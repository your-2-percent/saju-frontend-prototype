function S2(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var G0={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function aN(){if(Wx)return ju;Wx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:e,type:i,key:u,ref:o!==void 0?o:null,props:l}}return ju.Fragment=t,ju.jsx=n,ju.jsxs=n,ju}var Xx;function oN(){return Xx||(Xx=1,G0.exports=aN()),G0.exports}var g=oN();const E2="harim.theme",nb="harim.settings.v1";function T2(){try{const e=localStorage.getItem(E2);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(nb);if(t){const i=JSON.parse(t)?.theme;if(i==="dark"||i==="light")return i}return null}catch{return null}}function rb(e){try{localStorage.setItem(E2,e);const t=localStorage.getItem(nb),n=t?JSON.parse(t):{};localStorage.setItem(nb,JSON.stringify({...n,theme:e}))}catch{}}function k2(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=T2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");k2(e)}catch{}})();var F0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx;function lN(){if(Jx)return ot;Jx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,A={};function D(U,B,q){this.props=U,this.context=B,this.refs=A,this.updater=q||T}D.prototype.isReactComponent={},D.prototype.setState=function(U,B){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,B,"setState")},D.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function $(){}$.prototype=D.prototype;function O(U,B,q){this.props=U,this.context=B,this.refs=A,this.updater=q||T}var C=O.prototype=new $;C.constructor=O,k(C,D.prototype),C.isPureReactComponent=!0;var M=Array.isArray;function G(){}var H={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function W(U,B,q){var V=q.ref;return{$$typeof:e,type:U,key:B,ref:V!==void 0?V:null,props:q}}function ae(U,B){return W(U.type,B,U.props)}function Q(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function Y(U){var B={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(q){return B[q]})}var te=/\/+/g;function re(U,B){return typeof U=="object"&&U!==null&&U.key!=null?Y(""+U.key):B.toString(36)}function Se(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function(B){U.status==="pending"&&(U.status="fulfilled",U.value=B)},function(B){U.status==="pending"&&(U.status="rejected",U.reason=B)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,B,q,V,P){var Z=typeof U;(Z==="undefined"||Z==="boolean")&&(U=null);var ie=!1;if(U===null)ie=!0;else switch(Z){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(U.$$typeof){case e:case t:ie=!0;break;case y:return ie=U._init,X(ie(U._payload),B,q,V,P)}}if(ie)return P=P(U),ie=V===""?"."+re(U,0):V,M(P)?(q="",ie!=null&&(q=ie.replace(te,"$&/")+"/"),X(P,B,q,"",function(xe){return xe})):P!=null&&(Q(P)&&(P=ae(P,q+(P.key==null||U&&U.key===P.key?"":(""+P.key).replace(te,"$&/")+"/")+ie)),B.push(P)),1;ie=0;var me=V===""?".":V+":";if(M(U))for(var ce=0;ce<U.length;ce++)V=U[ce],Z=me+re(V,ce),ie+=X(V,B,q,Z,P);else if(ce=S(U),typeof ce=="function")for(U=ce.call(U),ce=0;!(V=U.next()).done;)V=V.value,Z=me+re(V,ce++),ie+=X(V,B,q,Z,P);else if(Z==="object"){if(typeof U.then=="function")return X(Se(U),B,q,V,P);throw B=String(U),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ie}function oe(U,B,q){if(U==null)return U;var V=[],P=0;return X(U,V,"","",function(Z){return B.call(q,Z,P++)}),V}function J(U){if(U._status===-1){var B=U._result;B=B(),B.then(function(q){(U._status===0||U._status===-1)&&(U._status=1,U._result=q)},function(q){(U._status===0||U._status===-1)&&(U._status=2,U._result=q)}),U._status===-1&&(U._status=0,U._result=B)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},K={map:oe,forEach:function(U,B,q){oe(U,function(){B.apply(this,arguments)},q)},count:function(U){var B=0;return oe(U,function(){B++}),B},toArray:function(U){return oe(U,function(B){return B})||[]},only:function(U){if(!Q(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ot.Activity=_,ot.Children=K,ot.Component=D,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=O,ot.StrictMode=i,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ot.__COMPILER_RUNTIME={__proto__:null,c:function(U){return H.H.useMemoCache(U)}},ot.cache=function(U){return function(){return U.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(U,B,q){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var V=k({},U.props),P=U.key;if(B!=null)for(Z in B.key!==void 0&&(P=""+B.key),B)!F.call(B,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&B.ref===void 0||(V[Z]=B[Z]);var Z=arguments.length-2;if(Z===1)V.children=q;else if(1<Z){for(var ie=Array(Z),me=0;me<Z;me++)ie[me]=arguments[me+2];V.children=ie}return W(U.type,P,V)},ot.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},ot.createElement=function(U,B,q){var V,P={},Z=null;if(B!=null)for(V in B.key!==void 0&&(Z=""+B.key),B)F.call(B,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(P[V]=B[V]);var ie=arguments.length-2;if(ie===1)P.children=q;else if(1<ie){for(var me=Array(ie),ce=0;ce<ie;ce++)me[ce]=arguments[ce+2];P.children=me}if(U&&U.defaultProps)for(V in ie=U.defaultProps,ie)P[V]===void 0&&(P[V]=ie[V]);return W(U,Z,P)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(U){return{$$typeof:f,render:U}},ot.isValidElement=Q,ot.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:J}},ot.memo=function(U,B){return{$$typeof:p,type:U,compare:B===void 0?null:B}},ot.startTransition=function(U){var B=H.T,q={};H.T=q;try{var V=U(),P=H.S;P!==null&&P(q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(G,ye)}catch(Z){ye(Z)}finally{B!==null&&q.types!==null&&(B.types=q.types),H.T=B}},ot.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ot.use=function(U){return H.H.use(U)},ot.useActionState=function(U,B,q){return H.H.useActionState(U,B,q)},ot.useCallback=function(U,B){return H.H.useCallback(U,B)},ot.useContext=function(U){return H.H.useContext(U)},ot.useDebugValue=function(){},ot.useDeferredValue=function(U,B){return H.H.useDeferredValue(U,B)},ot.useEffect=function(U,B){return H.H.useEffect(U,B)},ot.useEffectEvent=function(U){return H.H.useEffectEvent(U)},ot.useId=function(){return H.H.useId()},ot.useImperativeHandle=function(U,B,q){return H.H.useImperativeHandle(U,B,q)},ot.useInsertionEffect=function(U,B){return H.H.useInsertionEffect(U,B)},ot.useLayoutEffect=function(U,B){return H.H.useLayoutEffect(U,B)},ot.useMemo=function(U,B){return H.H.useMemo(U,B)},ot.useOptimistic=function(U,B){return H.H.useOptimistic(U,B)},ot.useReducer=function(U,B,q){return H.H.useReducer(U,B,q)},ot.useRef=function(U){return H.H.useRef(U)},ot.useState=function(U){return H.H.useState(U)},ot.useSyncExternalStore=function(U,B,q){return H.H.useSyncExternalStore(U,B,q)},ot.useTransition=function(){return H.H.useTransition()},ot.version="19.2.1",ot}var Qx;function _m(){return Qx||(Qx=1,F0.exports=lN()),F0.exports}var R=_m();const rn=ll(R);var Y0={exports:{}},Nu={},q0={exports:{}},Z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function cN(){return ew||(ew=1,(function(e){function t(X,oe){var J=X.length;X.push(oe);e:for(;0<J;){var ye=J-1>>>1,K=X[ye];if(0<o(K,oe))X[ye]=oe,X[J]=K,J=ye;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],J=X.pop();if(J!==oe){X[0]=J;e:for(var ye=0,K=X.length,U=K>>>1;ye<U;){var B=2*(ye+1)-1,q=X[B],V=B+1,P=X[V];if(0>o(q,J))V<K&&0>o(P,q)?(X[ye]=P,X[V]=J,ye=V):(X[ye]=q,X[B]=J,ye=B);else if(V<K&&0>o(P,J))X[ye]=P,X[V]=J,ye=V;else break e}}return oe}function o(X,oe){var J=X.sortIndex-oe.sortIndex;return J!==0?J:X.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,_=null,x=3,S=!1,T=!1,k=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function C(X){for(var oe=n(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=X)i(p),oe.sortIndex=oe.expirationTime,t(m,oe);else break;oe=n(p)}}function M(X){if(k=!1,C(X),!T)if(n(m)!==null)T=!0,G||(G=!0,Y());else{var oe=n(p);oe!==null&&Se(M,oe.startTime-X)}}var G=!1,H=-1,F=5,W=-1;function ae(){return A?!0:!(e.unstable_now()-W<F)}function Q(){if(A=!1,G){var X=e.unstable_now();W=X;var oe=!0;try{e:{T=!1,k&&(k=!1,$(H),H=-1),S=!0;var J=x;try{t:{for(C(X),_=n(m);_!==null&&!(_.expirationTime>X&&ae());){var ye=_.callback;if(typeof ye=="function"){_.callback=null,x=_.priorityLevel;var K=ye(_.expirationTime<=X);if(X=e.unstable_now(),typeof K=="function"){_.callback=K,C(X),oe=!0;break t}_===n(m)&&i(m),C(X)}else i(m);_=n(m)}if(_!==null)oe=!0;else{var U=n(p);U!==null&&Se(M,U.startTime-X),oe=!1}}break e}finally{_=null,x=J,S=!1}oe=void 0}}finally{oe?Y():G=!1}}}var Y;if(typeof O=="function")Y=function(){O(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,re=te.port2;te.port1.onmessage=Q,Y=function(){re.postMessage(null)}}else Y=function(){D(Q,0)};function Se(X,oe){H=D(function(){X(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(X){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var J=x;x=oe;try{return X()}finally{x=J}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=x;x=X;try{return oe()}finally{x=J}},e.unstable_scheduleCallback=function(X,oe,J){var ye=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,X){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,X={id:y++,callback:oe,priorityLevel:X,startTime:J,expirationTime:K,sortIndex:-1},J>ye?(X.sortIndex=J,t(p,X),n(m)===null&&X===n(p)&&(k?($(H),H=-1):k=!0,Se(M,J-ye))):(X.sortIndex=K,t(m,X),T||S||(T=!0,G||(G=!0,Y()))),X},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(X){var oe=x;return function(){var J=x;x=oe;try{return X.apply(this,arguments)}finally{x=J}}}})(Z0)),Z0}var tw;function uN(){return tw||(tw=1,q0.exports=cN()),q0.exports}var V0={exports:{}},hr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function dN(){if(nw)return hr;nw=1;var e=_m();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hr.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},hr.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},hr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},hr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},hr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&i.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},hr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hr.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},hr.requestFormReset=function(m){i.d.r(m)},hr.unstable_batchedUpdates=function(m,p){return m(p)},hr.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},hr.useFormStatus=function(){return u.H.useHostTransitionStatus()},hr.version="19.2.1",hr}var rw;function A2(){if(rw)return V0.exports;rw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V0.exports=dN(),V0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function hN(){if(iw)return Nu;iw=1;var e=uN(),t=_m(),n=A2();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,h=s;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return m(v),r;if(w===h)return m(v),s;w=w.sibling}throw Error(i(188))}if(c.return!==h.return)c=v,h=w;else{for(var N=!1,z=v.child;z;){if(z===c){N=!0,c=v,h=w;break}if(z===h){N=!0,h=v,c=w;break}z=z.sibling}if(!N){for(z=w.child;z;){if(z===c){N=!0,c=w,h=v;break}if(z===h){N=!0,h=w,c=v;break}z=z.sibling}if(!N)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),O=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var te=Symbol.for("react.client.reference");function re(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===te?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case D:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case G:return"SuspenseList";case W:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case O:return r.displayName||"Context";case $:return(r._context.displayName||"Context")+".Consumer";case C:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:re(r.type)||"Memo";case F:s=r._payload,r=r._init;try{return re(r(s))}catch{}}return null}var Se=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ye=[],K=-1;function U(r){return{current:r}}function B(r){0>K||(r.current=ye[K],ye[K]=null,K--)}function q(r,s){K++,ye[K]=r.current,r.current=s}var V=U(null),P=U(null),Z=U(null),ie=U(null);function me(r,s){switch(q(Z,s),q(P,r),q(V,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?vx(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=vx(s),r=_x(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(V),q(V,r)}function ce(){B(V),B(P),B(Z)}function xe(r){r.memoizedState!==null&&q(ie,r);var s=V.current,c=_x(s,r.type);s!==c&&(q(P,r),q(V,c))}function ke(r){P.current===r&&(B(V),B(P)),ie.current===r&&(B(ie),Eu._currentValue=J)}var je,Me;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);je=s&&s[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Me}var Pe=!1;function Ce(r,s){if(!r||Pe)return"";Pe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var _e=we}Reflect.construct(r,[],De)}else{try{De.call()}catch(we){_e=we}r.call(De.prototype)}}else{try{throw Error()}catch(we){_e=we}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&_e&&typeof we.stack=="string")return[we.stack,_e.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),N=w[0],z=w[1];if(N&&z){var ne=N.split(`
`),be=z.split(`
`);for(v=h=0;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;for(;v<be.length&&!be[v].includes("DetermineComponentFrameRoot");)v++;if(h===ne.length||v===be.length)for(h=ne.length-1,v=be.length-1;1<=h&&0<=v&&ne[h]!==be[v];)v--;for(;1<=h&&0<=v;h--,v--)if(ne[h]!==be[v]){if(h!==1||v!==1)do if(h--,v--,0>v||ne[h]!==be[v]){var Ae=`
`+ne[h].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=h&&0<=v);break}}}finally{Pe=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Le(r,s){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==s&&s!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ce(r.type,!1);case 11:return Ce(r.type.render,!1);case 1:return Ce(r.type,!0);case 31:return Ee("Activity");default:return""}}function Ue(r){try{var s="",c=null;do s+=Le(r,c),c=r,r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var fe=Object.prototype.hasOwnProperty,Be=e.unstable_scheduleCallback,le=e.unstable_cancelCallback,he=e.unstable_shouldYield,$e=e.unstable_requestPaint,Ie=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,En=e.unstable_LowPriority,Tn=e.unstable_IdlePriority,or=e.log,vr=e.unstable_setDisableYieldValue,dn=null,Mt=null;function bn(r){if(typeof or=="function"&&vr(r),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(dn,r)}catch{}}var hn=Math.clz32?Math.clz32:zi,qr=Math.log,ra=Math.LN2;function zi(r){return r>>>=0,r===0?32:31-(qr(r)/ra|0)|0}var kn=256,Dn=262144,os=4194304;function Nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function lr(r,s,c){var h=r.pendingLanes;if(h===0)return 0;var v=0,w=r.suspendedLanes,N=r.pingedLanes;r=r.warmLanes;var z=h&134217727;return z!==0?(h=z&~w,h!==0?v=Nr(h):(N&=z,N!==0?v=Nr(N):c||(c=z&~r,c!==0&&(v=Nr(c))))):(z=h&~w,z!==0?v=Nr(z):N!==0?v=Nr(N):c||(c=h&~r,c!==0&&(v=Nr(c)))),v===0?0:s!==0&&s!==v&&(s&w)===0&&(w=v&-v,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:v}function pi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ia(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var r=os;return os<<=1,(os&62914560)===0&&(os=4194304),r}function eo(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function Ui(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function to(r,s,c,h,v,w){var N=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var z=r.entanglements,ne=r.expirationTimes,be=r.hiddenUpdates;for(c=N&~c;0<c;){var Ae=31-hn(c),De=1<<Ae;z[Ae]=0,ne[Ae]=-1;var _e=be[Ae];if(_e!==null)for(be[Ae]=null,Ae=0;Ae<_e.length;Ae++){var we=_e[Ae];we!==null&&(we.lane&=-536870913)}c&=~De}h!==0&&sa(r,h,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(N&~s))}function sa(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-hn(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function no(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var h=31-hn(c),v=1<<h;v&s|r[h]&s&&(r[h]|=s),c&=~v}}function ro(r,s){var c=s&-s;return c=(c&42)!==0?1:$n(c),(c&(r.suspendedLanes|s))!==0?0:c}function $n(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ks(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:Gx(r.type))}function Or(r,s){var c=oe.p;try{return oe.p=r,s()}finally{oe.p=c}}var cr=Math.random().toString(36).slice(2),sn="__reactFiber$"+cr,An="__reactProps$"+cr,Zr="__reactContainer$"+cr,gi="__reactEvents$"+cr,pe="__reactListeners$"+cr,Ye="__reactHandles$"+cr,lt="__reactResources$"+cr,pt="__reactMarker$"+cr;function tt(r){delete r[sn],delete r[An],delete r[gi],delete r[pe],delete r[Ye]}function dt(r){var s=r[sn];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Zr]||c[sn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=Ax(r);r!==null;){if(c=r[sn])return c;r=Ax(r)}return s}r=c,c=r.parentNode}return null}function xt(r){if(r=r[sn]||r[Zr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function mt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function In(r){var s=r[lt];return s||(s=r[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[pt]=!0}var aa=new Set,io={};function bi(r,s){Xn(r,s),Xn(r+"Capture",s)}function Xn(r,s){for(io[r]=s,r=0;r<s.length;r++)aa.add(s[r])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},ao={};function oo(r){return fe.call(ao,r)?!0:fe.call(so,r)?!1:As.test(r)?ao[r]=!0:(so[r]=!0,!1)}function gt(r,s,c){if(oo(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function It(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function Dr(r,s,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+h)}}function zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function js(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Mc(r,s,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return v.call(this)},set:function(N){c=""+N,w.call(this,N)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(N){c=""+N},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function at(r){if(!r._valueTracker){var s=js(r)?"checked":"value";r._valueTracker=Mc(r,s,""+r[s])}}function an(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return r&&(h=js(r)?r.checked?"true":"false":r.value),r=h,r!==c?(s.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var dl=/[\n"\\]/g;function en(r){return r.replace(dl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cc(r,s,c,h,v,w,N,z){r.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.type=N:r.removeAttribute("type"),s!=null?N==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+zn(s)):r.value!==""+zn(s)&&(r.value=""+zn(s)):N!=="submit"&&N!=="reset"||r.removeAttribute("value"),s!=null?Hi(r,N,zn(s)):c!=null?Hi(r,N,zn(c)):h!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.name=""+zn(z):r.removeAttribute("name")}function lo(r,s,c,h,v,w,N,z){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){at(r);return}c=c!=null?""+zn(c):"",s=s!=null?""+zn(s):c,z||s===r.value||(r.value=s),r.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=z?r.checked:!!h,r.defaultChecked=!!h,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.name=N),at(r)}function Hi(r,s,c){s==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ft(r,s,c,h){if(r=r.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=s.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&h&&(r[c].defaultSelected=!0)}else{for(c=""+zn(c),s=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}s!==null||r[v].disabled||(s=r[v])}s!==null&&(s.selected=!0)}}function ls(r,s,c){if(s!=null&&(s=""+zn(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+zn(c):""}function la(r,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(i(92));if(Se(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=zn(s),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),at(r)}function yi(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(r,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,c):typeof c!="number"||c===0||Rc.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function hl(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&c[v]!==h&&ca(r,v,h)}else for(var w in s)s.hasOwnProperty(w)&&ca(r,w,s[w])}function co(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Lc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Mr(){}var ml=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var da=null,it=null;function Vr(r){var s=xt(r);if(s&&(r=s.stateNode)){var c=r[An]||null;e:switch(r=s.stateNode,s.type){case"input":if(Cc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==r&&h.form===r.form){var v=h[An]||null;if(!v)throw Error(i(90));Cc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===r.form&&an(h)}break e;case"textarea":ls(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ft(r,!!c.multiple,s,!1)}}}var Lt=!1;function Bc(r,s,c){if(Lt)return r(s,c);Lt=!0;try{var h=r(s);return h}finally{if(Lt=!1,(da!==null||it!==null)&&(xh(),da&&(s=da,r=it,it=da=null,Vr(s),r)))for(s=0;s<r.length;s++)Vr(r[s])}}function Ns(r,s){var c=r.stateNode;if(c===null)return null;var h=c[An]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Kr)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{ho=!1}var vi=null,Os=null,yn=null;function cs(){if(yn)return yn;var r,s=Os,c=s.length,h,v="value"in vi?vi.value:vi.textContent,w=v.length;for(r=0;r<c&&s[r]===v[r];r++);var N=c-r;for(h=1;h<=N&&s[c-h]===v[w-h];h++);return yn=v.slice(r,1<h?1-h:void 0)}function fo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function mo(){return!0}function kd(){return!1}function Jn(r){function s(c,h,v,w,N){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var z in r)r.hasOwnProperty(z)&&(c=r[z],this[z]=c?c(w):w[z]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?mo:kd,this.isPropagationStopped=kd,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Jn(Gi),ha=_({},Gi,{view:0,detail:0}),St=Jn(ha),Pc,_r,Fi,po=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?(Pc=r.screenX-Fi.screenX,_r=r.screenY-Fi.screenY):_r=Pc=0,Fi=r),Pc)},movementY:function(r){return"movementY"in r?r.movementY:_r}}),Ad=Jn(po),$c=_({},po,{dataTransfer:0}),Qm=Jn($c),jd=_({},ha,{relatedTarget:0}),Ic=Jn(jd),ep=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=Jn(ep),tp=_({},Gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_i=Jn(tp),np=_({},Gi,{data:0}),Uc=Jn(np),us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Od[r])?!!s[r]:!1}function Gc(){return Hc}var Dd=_({},ha,{key:function(r){if(r.key){var s=us[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Nd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(r){return r.type==="keypress"?fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Md=Jn(Dd),rp=_({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=Jn(rp),Fc=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),ip=Jn(Fc),Rd=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=Jn(Rd),gl=_({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ds=Jn(gl),sp=_({},Gi,{newState:0,oldState:0}),go=Jn(sp),Cr=[9,13,27,32],bl=Kr&&"CompositionEvent"in window,fa=null;Kr&&"documentMode"in document&&(fa=document.documentMode);var ap=Kr&&"TextEvent"in window&&!fa,yl=Kr&&(!bl||fa&&8<fa&&11>=fa),vl=" ",Bd=!1;function Pd(r,s){switch(r){case"keyup":return Cr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Xr(r,s){switch(r){case"compositionend":return Yc(s);case"keypress":return s.which!==32?null:(Bd=!0,vl);case"textInput":return r=s.data,r===vl&&Bd?null:r;default:return null}}function pa(r,s){if(ma)return r==="compositionend"||!bl&&Pd(r,s)?(r=cs(),yn=Os=vi=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yl&&s.locale!=="ko"?null:s.data;default:return null}}var op={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xi(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!op[r.type]:s==="textarea"}function $d(r,s,c,h){da?it?it.push(h):it=[h]:da=h,s=jh(s,"onChange"),0<s.length&&(c=new pl("onChange","change",null,c,h),r.push({event:c,listeners:s}))}var wi=null,bo=null;function yo(r){fx(r,0)}function vo(r){var s=mt(r);if(an(s))return r}function _o(r,s){if(r==="change")return s}var Id=!1;if(Kr){var Si;if(Kr){var ga="oninput"in document;if(!ga){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),ga=typeof zd.oninput=="function"}Si=ga}else Si=!1;Id=Si&&(!document.documentMode||9<document.documentMode)}function _l(){wi&&(wi.detachEvent("onpropertychange",Ud),bo=wi=null)}function Ud(r){if(r.propertyName==="value"&&vo(bo)){var s=[];$d(s,bo,r,uo(r)),Bc(yo,s)}}function Yi(r,s,c){r==="focusin"?(_l(),wi=s,bo=c,wi.attachEvent("onpropertychange",Ud)):r==="focusout"&&_l()}function lp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vo(bo)}function ba(r,s){if(r==="click")return vo(s)}function cp(r,s){if(r==="input"||r==="change")return vo(s)}function qi(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Fn=typeof Object.is=="function"?Object.is:qi;function ya(r,s){if(Fn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!fe.call(s,v)||!Fn(r[v],s[v]))return!1}return!0}function xl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xo(r,s){var c=xl(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=s&&h>=s)return{node:c,offset:s-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xl(c)}}function wl(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?wl(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function wo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=oa(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=oa(r.document)}return s}function ds(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Sl=Kr&&"documentMode"in document&&11>=document.documentMode,hs=null,El=null,So=null,va=!1;function Hd(r,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;va||hs==null||hs!==oa(h)||(h=hs,"selectionStart"in h&&ds(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),So&&ya(So,h)||(So=h,h=jh(El,"onSelect"),0<h.length&&(s=new pl("onSelect","select",null,s,c),r.push({event:s,listeners:h}),s.target=hs)))}function fs(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var _a={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Tl={},Gd={};Kr&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Yn(r){if(Tl[r])return Tl[r];if(!_a[r])return r;var s=_a[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Gd)return Tl[r]=s[c];return r}var Eo=Yn("animationend"),Fd=Yn("animationiteration"),To=Yn("animationstart"),up=Yn("transitionrun"),Yd=Yn("transitionstart"),dp=Yn("transitioncancel"),xa=Yn("transitionend"),qd=new Map,ms="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ms.push("scrollEnd");function Rr(r,s){qd.set(r,s),bi(s,[r])}var ko=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],ur=0,kl=0;function Ao(){for(var r=ur,s=kl=ur=0;s<r;){var c=Lr[s];Lr[s++]=null;var h=Lr[s];Lr[s++]=null;var v=Lr[s];Lr[s++]=null;var w=Lr[s];if(Lr[s++]=null,h!==null&&v!==null){var N=h.pending;N===null?v.next=v:(v.next=N.next,N.next=v),h.pending=v}w!==0&&wa(c,v,w)}}function ps(r,s,c,h){Lr[ur++]=r,Lr[ur++]=s,Lr[ur++]=c,Lr[ur++]=h,kl|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function qc(r,s,c,h){return ps(r,s,c,h),jo(r)}function Ei(r,s){return ps(r,null,null,s),jo(r)}function wa(r,s,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&s!==null&&(v=31-hn(c),r=w.hiddenUpdates,h=r[v],h===null?r[v]=[s]:h.push(s),s.lane=c|536870912),w):null}function jo(r){if(50<bu)throw bu=0,f0=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ms={};function hp(r,s,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(r,s,c,h){return new hp(r,s,c,h)}function Al(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ti(r,s){var c=r.alternate;return c===null?(c=dr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Zc(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function No(r,s,c,h,v,w){var N=0;if(h=r,typeof r=="function")Al(r)&&(N=1);else if(typeof r=="string")N=Vj(r,c,V.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case W:return r=dr(31,c,s,v),r.elementType=W,r.lanes=w,r;case k:return Cs(c.children,v,w,s);case A:N=8,v|=24;break;case D:return r=dr(12,c,s,v|2),r.elementType=D,r.lanes=w,r;case M:return r=dr(13,c,s,v),r.elementType=M,r.lanes=w,r;case G:return r=dr(19,c,s,v),r.elementType=G,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:N=10;break e;case $:N=9;break e;case C:N=11;break e;case H:N=14;break e;case F:N=16,h=null;break e}N=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return s=dr(N,c,s,v),s.elementType=r,s.type=h,s.lanes=w,s}function Cs(r,s,c,h){return r=dr(7,r,h,s),r.lanes=c,r}function jl(r,s,c){return r=dr(6,r,null,s),r.lanes=c,r}function Vc(r){var s=dr(18,null,null,0);return s.stateNode=r,s}function Kc(r,s,c){return s=dr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var a=new WeakMap;function d(r,s){if(typeof r=="object"&&r!==null){var c=a.get(r);return c!==void 0?c:(s={value:r,source:s,stack:Ue(s)},a.set(r,s),s)}return{value:r,source:s,stack:Ue(s)}}var b=[],E=0,j=null,I=0,ee=[],de=0,ve=null,Oe=1,Ge="";function Xe(r,s){b[E++]=I,b[E++]=j,j=r,I=s}function ht(r,s,c){ee[de++]=Oe,ee[de++]=Ge,ee[de++]=ve,ve=r;var h=Oe;r=Ge;var v=32-hn(h)-1;h&=~(1<<v),c+=1;var w=32-hn(s)+v;if(30<w){var N=v-v%5;w=(h&(1<<N)-1).toString(32),h>>=N,v-=N,Oe=1<<32-hn(s)+v|c<<v|h,Ge=w+r}else Oe=1<<w|c<<v|h,Ge=r}function Un(r){r.return!==null&&(Xe(r,1),ht(r,1,0))}function vn(r){for(;r===j;)j=b[--E],b[E]=null,I=b[--E],b[E]=null;for(;r===ve;)ve=ee[--de],ee[de]=null,Ge=ee[--de],ee[de]=null,Oe=ee[--de],ee[de]=null}function xr(r,s){ee[de++]=Oe,ee[de++]=Ge,ee[de++]=ve,Oe=s.id,Ge=s.overflow,ve=r}var jt=null,Nt=null,bt=!1,gs=null,Br=!1,Nl=Error(i(519));function bs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(d(s,r)),Nl}function Wc(r){var s=r.stateNode,c=r.type,h=r.memoizedProps;switch(s[sn]=r,s[An]=h,c){case"dialog":vt("cancel",s),vt("close",s);break;case"iframe":case"object":case"embed":vt("load",s);break;case"video":case"audio":for(c=0;c<vu.length;c++)vt(vu[c],s);break;case"source":vt("error",s);break;case"img":case"image":case"link":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"input":vt("invalid",s),lo(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":vt("invalid",s);break;case"textarea":vt("invalid",s),la(s,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||bx(s.textContent,c)?(h.popover!=null&&(vt("beforetoggle",s),vt("toggle",s)),h.onScroll!=null&&vt("scroll",s),h.onScrollEnd!=null&&vt("scrollend",s),h.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||bs(r,!0)}function fn(r){for(jt=r.return;jt;)switch(jt.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:jt=jt.return}}function Zi(r){if(r!==jt)return!1;if(!bt)return fn(r),bt=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||j0(r.type,r.memoizedProps)),c=!c),c&&Nt&&bs(r),fn(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Nt=kx(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Nt=kx(r)}else s===27?(s=Nt,Ba(r.type)?(r=C0,C0=null,Nt=r):Nt=s):Nt=jt?Ai(r.stateNode.nextSibling):null;return!0}function Rs(){Nt=jt=null,bt=!1}function Xc(){var r=gs;return r!==null&&(zr===null?zr=r:zr.push.apply(zr,r),gs=null),r}function Oo(r){gs===null?gs=[r]:gs.push(r)}var Do=U(null),ys=null,Vi=null;function Sa(r,s,c){q(Do,s._currentValue),s._currentValue=c}function Ls(r){r._currentValue=Do.current,B(Do)}function fp(r,s,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===c)break;r=r.return}}function mp(r,s,c,h){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var N=v.child;w=w.firstContext;e:for(;w!==null;){var z=w;w=v;for(var ne=0;ne<s.length;ne++)if(z.context===s[ne]){w.lanes|=c,z=w.alternate,z!==null&&(z.lanes|=c),fp(w.return,c,r),h||(N=null);break e}w=z.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(i(341));N.lanes|=c,w=N.alternate,w!==null&&(w.lanes|=c),fp(N,c,r),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===r){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function Ol(r,s,c,h){r=null;for(var v=s,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var z=v.type;Fn(v.pendingProps.value,N.value)||(r!==null?r.push(z):r=[z])}}else if(v===ie.current){if(N=v.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Eu):r=[Eu])}v=v.return}r!==null&&mp(s,r,c,h),s.flags|=262144}function Zd(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Mo(r){ys=r,Vi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Qn(r){return nv(ys,r)}function Vd(r,s){return ys===null&&Mo(r),nv(r,s)}function nv(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Vi===null){if(r===null)throw Error(i(308));Vi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Vi=Vi.next=s;return c}var FA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},YA=e.unstable_scheduleCallback,qA=e.unstable_NormalPriority,Mn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pp(){return{controller:new FA,data:new Map,refCount:0}}function Jc(r){r.refCount--,r.refCount===0&&YA(qA,function(){r.controller.abort()})}var Qc=null,gp=0,Dl=0,Ml=null;function ZA(r,s){if(Qc===null){var c=Qc=[];gp=0,Dl=v0(),Ml={status:"pending",value:void 0,then:function(h){c.push(h)}}}return gp++,s.then(rv,rv),s}function rv(){if(--gp===0&&Qc!==null){Ml!==null&&(Ml.status="fulfilled");var r=Qc;Qc=null,Dl=0,Ml=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function VA(r,s){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var iv=X.S;X.S=function(r,s){U_=Ie(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ZA(r,s),iv!==null&&iv(r,s)};var Co=U(null);function bp(){var r=Co.current;return r!==null?r:Yt.pooledCache}function Kd(r,s){s===null?q(Co,Co.current):q(Co,s.pool)}function sv(){var r=bp();return r===null?null:{parent:Mn._currentValue,pool:r}}var Cl=Error(i(460)),yp=Error(i(474)),Wd=Error(i(542)),Xd={then:function(){}};function av(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ov(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,cv(r),r;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,cv(r),r}throw Lo=s,Cl}}function Ro(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Lo=c,Cl):c}}var Lo=null;function lv(){if(Lo===null)throw Error(i(459));var r=Lo;return Lo=null,r}function cv(r){if(r===Cl||r===Wd)throw Error(i(483))}var Rl=null,eu=0;function Jd(r){var s=eu;return eu+=1,Rl===null&&(Rl=[]),ov(Rl,r,s)}function tu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Qd(r,s){throw s.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function uv(r){function s(ue,se){if(r){var ge=ue.deletions;ge===null?(ue.deletions=[se],ue.flags|=16):ge.push(se)}}function c(ue,se){if(!r)return null;for(;se!==null;)s(ue,se),se=se.sibling;return null}function h(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function v(ue,se){return ue=Ti(ue,se),ue.index=0,ue.sibling=null,ue}function w(ue,se,ge){return ue.index=ge,r?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<se?(ue.flags|=67108866,se):ge):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function N(ue){return r&&ue.alternate===null&&(ue.flags|=67108866),ue}function z(ue,se,ge,Ne){return se===null||se.tag!==6?(se=jl(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function ne(ue,se,ge,Ne){var Qe=ge.type;return Qe===k?Ae(ue,se,ge.props.children,Ne,ge.key):se!==null&&(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===se.type)?(se=v(se,ge.props),tu(se,ge),se.return=ue,se):(se=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),tu(se,ge),se.return=ue,se)}function be(ue,se,ge,Ne){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=Kc(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge.children||[]),se.return=ue,se)}function Ae(ue,se,ge,Ne,Qe){return se===null||se.tag!==7?(se=Cs(ge,ue.mode,Ne,Qe),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function De(ue,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=jl(""+se,ue.mode,ge),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return ge=No(se.type,se.key,se.props,null,ue.mode,ge),tu(ge,se),ge.return=ue,ge;case T:return se=Kc(se,ue.mode,ge),se.return=ue,se;case F:return se=Ro(se),De(ue,se,ge)}if(Se(se)||Y(se))return se=Cs(se,ue.mode,ge,null),se.return=ue,se;if(typeof se.then=="function")return De(ue,Jd(se),ge);if(se.$$typeof===O)return De(ue,Vd(ue,se),ge);Qd(ue,se)}return null}function _e(ue,se,ge,Ne){var Qe=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Qe!==null?null:z(ue,se,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Qe?ne(ue,se,ge,Ne):null;case T:return ge.key===Qe?be(ue,se,ge,Ne):null;case F:return ge=Ro(ge),_e(ue,se,ge,Ne)}if(Se(ge)||Y(ge))return Qe!==null?null:Ae(ue,se,ge,Ne,null);if(typeof ge.then=="function")return _e(ue,se,Jd(ge),Ne);if(ge.$$typeof===O)return _e(ue,se,Vd(ue,ge),Ne);Qd(ue,ge)}return null}function we(ue,se,ge,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ue=ue.get(ge)||null,z(se,ue,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,ne(se,ue,Ne,Qe);case T:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,be(se,ue,Ne,Qe);case F:return Ne=Ro(Ne),we(ue,se,ge,Ne,Qe)}if(Se(Ne)||Y(Ne))return ue=ue.get(ge)||null,Ae(se,ue,Ne,Qe,null);if(typeof Ne.then=="function")return we(ue,se,ge,Jd(Ne),Qe);if(Ne.$$typeof===O)return we(ue,se,ge,Vd(se,Ne),Qe);Qd(se,Ne)}return null}function qe(ue,se,ge,Ne){for(var Qe=null,Ot=null,Ke=se,ft=se=0,Tt=null;Ke!==null&&ft<ge.length;ft++){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Dt=_e(ue,Ke,ge[ft],Ne);if(Dt===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Dt.alternate===null&&s(ue,Ke),se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt,Ke=Tt}if(ft===ge.length)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;ft<ge.length;ft++)Ke=De(ue,ge[ft],Ne),Ke!==null&&(se=w(Ke,se,ft),Ot===null?Qe=Ke:Ot.sibling=Ke,Ot=Ke);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);ft<ge.length;ft++)Tt=we(Ke,ue,ft,ge[ft],Ne),Tt!==null&&(r&&Tt.alternate!==null&&Ke.delete(Tt.key===null?ft:Tt.key),se=w(Tt,se,ft),Ot===null?Qe=Tt:Ot.sibling=Tt,Ot=Tt);return r&&Ke.forEach(function(Ua){return s(ue,Ua)}),bt&&Xe(ue,ft),Qe}function nt(ue,se,ge,Ne){if(ge==null)throw Error(i(151));for(var Qe=null,Ot=null,Ke=se,ft=se=0,Tt=null,Dt=ge.next();Ke!==null&&!Dt.done;ft++,Dt=ge.next()){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Ua=_e(ue,Ke,Dt.value,Ne);if(Ua===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Ua.alternate===null&&s(ue,Ke),se=w(Ua,se,ft),Ot===null?Qe=Ua:Ot.sibling=Ua,Ot=Ua,Ke=Tt}if(Dt.done)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;!Dt.done;ft++,Dt=ge.next())Dt=De(ue,Dt.value,Ne),Dt!==null&&(se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);!Dt.done;ft++,Dt=ge.next())Dt=we(Ke,ue,ft,Dt.value,Ne),Dt!==null&&(r&&Dt.alternate!==null&&Ke.delete(Dt.key===null?ft:Dt.key),se=w(Dt,se,ft),Ot===null?Qe=Dt:Ot.sibling=Dt,Ot=Dt);return r&&Ke.forEach(function(sN){return s(ue,sN)}),bt&&Xe(ue,ft),Qe}function Ht(ue,se,ge,Ne){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Qe=ge.key;se!==null;){if(se.key===Qe){if(Qe=ge.type,Qe===k){if(se.tag===7){c(ue,se.sibling),Ne=v(se,ge.props.children),Ne.return=ue,ue=Ne;break e}}else if(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===se.type){c(ue,se.sibling),Ne=v(se,ge.props),tu(Ne,ge),Ne.return=ue,ue=Ne;break e}c(ue,se);break}else s(ue,se);se=se.sibling}ge.type===k?(Ne=Cs(ge.props.children,ue.mode,Ne,ge.key),Ne.return=ue,ue=Ne):(Ne=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),tu(Ne,ge),Ne.return=ue,ue=Ne)}return N(ue);case T:e:{for(Qe=ge.key;se!==null;){if(se.key===Qe)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){c(ue,se.sibling),Ne=v(se,ge.children||[]),Ne.return=ue,ue=Ne;break e}else{c(ue,se);break}else s(ue,se);se=se.sibling}Ne=Kc(ge,ue.mode,Ne),Ne.return=ue,ue=Ne}return N(ue);case F:return ge=Ro(ge),Ht(ue,se,ge,Ne)}if(Se(ge))return qe(ue,se,ge,Ne);if(Y(ge)){if(Qe=Y(ge),typeof Qe!="function")throw Error(i(150));return ge=Qe.call(ge),nt(ue,se,ge,Ne)}if(typeof ge.then=="function")return Ht(ue,se,Jd(ge),Ne);if(ge.$$typeof===O)return Ht(ue,se,Vd(ue,ge),Ne);Qd(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(c(ue,se.sibling),Ne=v(se,ge),Ne.return=ue,ue=Ne):(c(ue,se),Ne=jl(ge,ue.mode,Ne),Ne.return=ue,ue=Ne),N(ue)):c(ue,se)}return function(ue,se,ge,Ne){try{eu=0;var Qe=Ht(ue,se,ge,Ne);return Rl=null,Qe}catch(Ke){if(Ke===Cl||Ke===Wd)throw Ke;var Ot=dr(29,Ke,null,ue.mode);return Ot.lanes=Ne,Ot.return=ue,Ot}finally{}}}var Bo=uv(!0),dv=uv(!1),Ea=!1;function vp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _p(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ta(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,s,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ct&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=jo(r),wa(r,null,c),s}return ps(r,h,s,c),jo(r)}function nu(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}function xp(r,s){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var N={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=N:w=w.next=N,c=c.next}while(c!==null);w===null?v=w=s:w=w.next=s}else v=w=s;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var wp=!1;function ru(){if(wp){var r=Ml;if(r!==null)throw r}}function iu(r,s,c,h){wp=!1;var v=r.updateQueue;Ea=!1;var w=v.firstBaseUpdate,N=v.lastBaseUpdate,z=v.shared.pending;if(z!==null){v.shared.pending=null;var ne=z,be=ne.next;ne.next=null,N===null?w=be:N.next=be,N=ne;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,z=Ae.lastBaseUpdate,z!==N&&(z===null?Ae.firstBaseUpdate=be:z.next=be,Ae.lastBaseUpdate=ne))}if(w!==null){var De=v.baseState;N=0,Ae=be=ne=null,z=w;do{var _e=z.lane&-536870913,we=_e!==z.lane;if(we?(Et&_e)===_e:(h&_e)===_e){_e!==0&&_e===Dl&&(wp=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var qe=r,nt=z;_e=s;var Ht=c;switch(nt.tag){case 1:if(qe=nt.payload,typeof qe=="function"){De=qe.call(Ht,De,_e);break e}De=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=nt.payload,_e=typeof qe=="function"?qe.call(Ht,De,_e):qe,_e==null)break e;De=_({},De,_e);break e;case 2:Ea=!0}}_e=z.callback,_e!==null&&(r.flags|=64,we&&(r.flags|=8192),we=v.callbacks,we===null?v.callbacks=[_e]:we.push(_e))}else we={lane:_e,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ae===null?(be=Ae=we,ne=De):Ae=Ae.next=we,N|=_e;if(z=z.next,z===null){if(z=v.shared.pending,z===null)break;we=z,z=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);Ae===null&&(ne=De),v.baseState=ne,v.firstBaseUpdate=be,v.lastBaseUpdate=Ae,w===null&&(v.shared.lanes=0),Da|=N,r.lanes=N,r.memoizedState=De}}function hv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function fv(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)hv(c[r],s)}var Ll=U(null),eh=U(0);function mv(r,s){r=Fs,q(eh,r),q(Ll,s),Fs=r|s.baseLanes}function Sp(){q(eh,Fs),q(Ll,Ll.current)}function Ep(){Fs=eh.current,B(Ll),B(eh)}var Jr=U(null),ki=null;function Aa(r){var s=r.alternate;q(jn,jn.current&1),q(Jr,r),ki===null&&(s===null||Ll.current!==null||s.memoizedState!==null)&&(ki=r)}function Tp(r){q(jn,jn.current),q(Jr,r),ki===null&&(ki=r)}function pv(r){r.tag===22?(q(jn,jn.current),q(Jr,r),ki===null&&(ki=r)):ja()}function ja(){q(jn,jn.current),q(Jr,Jr.current)}function Qr(r){B(Jr),ki===r&&(ki=null),B(jn)}var jn=U(0);function th(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||D0(c)||M0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Bs=0,ct=null,zt=null,Cn=null,nh=!1,Bl=!1,Po=!1,rh=0,su=0,Pl=null,KA=0;function _n(){throw Error(i(321))}function kp(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Fn(r[c],s[c]))return!1;return!0}function Ap(r,s,c,h,v,w){return Bs=w,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?Jv:Hp,Po=!1,w=c(h,v),Po=!1,Bl&&(w=bv(s,c,h,v)),gv(r),w}function gv(r){X.H=lu;var s=zt!==null&&zt.next!==null;if(Bs=0,Cn=zt=ct=null,nh=!1,su=0,Pl=null,s)throw Error(i(300));r===null||Rn||(r=r.dependencies,r!==null&&Zd(r)&&(Rn=!0))}function bv(r,s,c,h){ct=r;var v=0;do{if(Bl&&(Pl=null),su=0,Bl=!1,25<=v)throw Error(i(301));if(v+=1,Cn=zt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=Qv,w=s(c,h)}while(Bl);return w}function WA(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?au(s):s,r=r.useState()[0],(zt!==null?zt.memoizedState:null)!==r&&(ct.flags|=1024),s}function jp(){var r=rh!==0;return rh=0,r}function Np(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Op(r){if(nh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nh=!1}Bs=0,Cn=zt=ct=null,Bl=!1,su=rh=0,Pl=null}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function Nn(){if(zt===null){var r=ct.alternate;r=r!==null?r.memoizedState:null}else r=zt.next;var s=Cn===null?ct.memoizedState:Cn.next;if(s!==null)Cn=s,zt=r;else{if(r===null)throw ct.alternate===null?Error(i(467)):Error(i(310));zt=r,r={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(r){var s=su;return su+=1,Pl===null&&(Pl=[]),r=ov(Pl,r,s),s=ct,(Cn===null?s.memoizedState:Cn.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Jv:Hp),r}function sh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return au(r);if(r.$$typeof===O)return Qn(r)}throw Error(i(438,String(r)))}function Dp(r){var s=null,c=ct.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=ih(),ct.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),h=0;h<r;h++)c[h]=ae;return s.index++,c}function Ps(r,s){return typeof s=="function"?s(r):s}function ah(r){var s=Nn();return Mp(s,zt,r)}function Mp(r,s,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var v=r.baseQueue,w=h.pending;if(w!==null){if(v!==null){var N=v.next;v.next=w.next,w.next=N}s.baseQueue=v=w,h.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{s=v.next;var z=N=null,ne=null,be=s,Ae=!1;do{var De=be.lane&-536870913;if(De!==be.lane?(Et&De)===De:(Bs&De)===De){var _e=be.revertLane;if(_e===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),De===Dl&&(Ae=!0);else if((Bs&_e)===_e){be=be.next,_e===Dl&&(Ae=!0);continue}else De={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=De,N=w):ne=ne.next=De,ct.lanes|=_e,Da|=_e;De=be.action,Po&&c(w,De),w=be.hasEagerState?be.eagerState:c(w,De)}else _e={lane:De,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=_e,N=w):ne=ne.next=_e,ct.lanes|=De,Da|=De;be=be.next}while(be!==null&&be!==s);if(ne===null?N=w:ne.next=z,!Fn(w,r.memoizedState)&&(Rn=!0,Ae&&(c=Ml,c!==null)))throw c;r.memoizedState=w,r.baseState=N,r.baseQueue=ne,h.lastRenderedState=w}return v===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Cp(r){var s=Nn(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,v=c.pending,w=s.memoizedState;if(v!==null){c.pending=null;var N=v=v.next;do w=r(w,N.action),N=N.next;while(N!==v);Fn(w,s.memoizedState)||(Rn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,h]}function yv(r,s,c){var h=ct,v=Nn(),w=bt;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=s();var N=!Fn((zt||v).memoizedState,c);if(N&&(v.memoizedState=c,Rn=!0),v=v.queue,Bp(xv.bind(null,h,v,r),[r]),v.getSnapshot!==s||N||Cn!==null&&Cn.memoizedState.tag&1){if(h.flags|=2048,$l(9,{destroy:void 0},_v.bind(null,h,v,c,s),null),Yt===null)throw Error(i(349));w||(Bs&127)!==0||vv(h,s,c)}return c}function vv(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=ct.updateQueue,s===null?(s=ih(),ct.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function _v(r,s,c,h){s.value=c,s.getSnapshot=h,wv(s)&&Sv(r)}function xv(r,s,c){return c(function(){wv(s)&&Sv(r)})}function wv(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Fn(r,c)}catch{return!0}}function Sv(r){var s=Ei(r,2);s!==null&&Ur(s,r,2)}function Rp(r){var s=wr();if(typeof r=="function"){var c=r;if(r=c(),Po){bn(!0);try{c()}finally{bn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:r},s}function Ev(r,s,c,h){return r.baseState=c,Mp(r,zt,typeof h=="function"?h:Ps)}function XA(r,s,c,h,v){if(ch(r))throw Error(i(485));if(r=s.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};X.T!==null?c(!0):w.isTransition=!1,h(w),c=s.pending,c===null?(w.next=s.pending=w,Tv(s,w)):(w.next=c.next,s.pending=c.next=w)}}function Tv(r,s){var c=s.action,h=s.payload,v=r.state;if(s.isTransition){var w=X.T,N={};X.T=N;try{var z=c(v,h),ne=X.S;ne!==null&&ne(N,z),kv(r,s,z)}catch(be){Lp(r,s,be)}finally{w!==null&&N.types!==null&&(w.types=N.types),X.T=w}}else try{w=c(v,h),kv(r,s,w)}catch(be){Lp(r,s,be)}}function kv(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Av(r,s,h)},function(h){return Lp(r,s,h)}):Av(r,s,c)}function Av(r,s,c){s.status="fulfilled",s.value=c,jv(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,Tv(r,c)))}function Lp(r,s,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,jv(s),s=s.next;while(s!==h)}r.action=null}function jv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Nv(r,s){return s}function Ov(r,s){if(bt){var c=Yt.formState;if(c!==null){e:{var h=ct;if(bt){if(Nt){t:{for(var v=Nt,w=Br;v.nodeType!==8;){if(!w){v=null;break t}if(v=Ai(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Nt=Ai(v.nextSibling),h=v.data==="F!";break e}}bs(h)}h=!1}h&&(s=c[0])}}return c=wr(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nv,lastRenderedState:s},c.queue=h,c=Kv.bind(null,ct,h),h.dispatch=c,h=Rp(!1),w=Up.bind(null,ct,!1,h.queue),h=wr(),v={state:s,dispatch:null,action:r,pending:null},h.queue=v,c=XA.bind(null,ct,v,w,c),v.dispatch=c,h.memoizedState=r,[s,c,!1]}function Dv(r){var s=Nn();return Mv(s,zt,r)}function Mv(r,s,c){if(s=Mp(r,s,Nv)[0],r=ah(Ps)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=au(s)}catch(N){throw N===Cl?Wd:N}else h=s;s=Nn();var v=s.queue,w=v.dispatch;return c!==s.memoizedState&&(ct.flags|=2048,$l(9,{destroy:void 0},JA.bind(null,v,c),null)),[h,w,r]}function JA(r,s){r.action=s}function Cv(r){var s=Nn(),c=zt;if(c!==null)return Mv(s,c,r);Nn(),s=s.memoizedState,c=Nn();var h=c.queue.dispatch;return c.memoizedState=r,[s,h,!1]}function $l(r,s,c,h){return r={tag:r,create:c,deps:h,inst:s,next:null},s=ct.updateQueue,s===null&&(s=ih(),ct.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,s.lastEffect=r),r}function Rv(){return Nn().memoizedState}function oh(r,s,c,h){var v=wr();ct.flags|=r,v.memoizedState=$l(1|s,{destroy:void 0},c,h===void 0?null:h)}function lh(r,s,c,h){var v=Nn();h=h===void 0?null:h;var w=v.memoizedState.inst;zt!==null&&h!==null&&kp(h,zt.memoizedState.deps)?v.memoizedState=$l(s,w,c,h):(ct.flags|=r,v.memoizedState=$l(1|s,w,c,h))}function Lv(r,s){oh(8390656,8,r,s)}function Bp(r,s){lh(2048,8,r,s)}function QA(r){ct.flags|=4;var s=ct.updateQueue;if(s===null)s=ih(),ct.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function Bv(r){var s=Nn().memoizedState;return QA({ref:s,nextImpl:r}),function(){if((Ct&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Pv(r,s){return lh(4,2,r,s)}function $v(r,s){return lh(4,4,r,s)}function Iv(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function zv(r,s,c){c=c!=null?c.concat([r]):null,lh(4,4,Iv.bind(null,s,r),c)}function Pp(){}function Uv(r,s){var c=Nn();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&kp(s,h[1])?h[0]:(c.memoizedState=[r,s],r)}function Hv(r,s){var c=Nn();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&kp(s,h[1]))return h[0];if(h=r(),Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h}function $p(r,s,c){return c===void 0||(Bs&1073741824)!==0&&(Et&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=G_(),ct.lanes|=r,Da|=r,c)}function Gv(r,s,c,h){return Fn(c,s)?c:Ll.current!==null?(r=$p(r,c,h),Fn(r,s)||(Rn=!0),r):(Bs&42)===0||(Bs&1073741824)!==0&&(Et&261930)===0?(Rn=!0,r.memoizedState=c):(r=G_(),ct.lanes|=r,Da|=r,s)}function Fv(r,s,c,h,v){var w=oe.p;oe.p=w!==0&&8>w?w:8;var N=X.T,z={};X.T=z,Up(r,!1,s,c);try{var ne=v(),be=X.S;if(be!==null&&be(z,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=VA(ne,h);ou(r,s,Ae,ni(r))}else ou(r,s,h,ni(r))}catch(De){ou(r,s,{then:function(){},status:"rejected",reason:De},ni())}finally{oe.p=w,N!==null&&z.types!==null&&(N.types=z.types),X.T=N}}function ej(){}function Ip(r,s,c,h){if(r.tag!==5)throw Error(i(476));var v=Yv(r).queue;Fv(r,v,s,J,c===null?ej:function(){return qv(r),c(h)})}function Yv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:J},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function qv(r){var s=Yv(r);s.next===null&&(s=r.alternate.memoizedState),ou(r,s.next.queue,{},ni())}function zp(){return Qn(Eu)}function Zv(){return Nn().memoizedState}function Vv(){return Nn().memoizedState}function tj(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=ni();r=Ta(c);var h=ka(s,r,c);h!==null&&(Ur(h,s,c),nu(h,s,c)),s={cache:pp()},r.payload=s;return}s=s.return}}function nj(r,s,c){var h=ni();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ch(r)?Wv(s,c):(c=qc(r,s,c,h),c!==null&&(Ur(c,r,h),Xv(c,s,h)))}function Kv(r,s,c){var h=ni();ou(r,s,c,h)}function ou(r,s,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(ch(r))Wv(s,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var N=s.lastRenderedState,z=w(N,c);if(v.hasEagerState=!0,v.eagerState=z,Fn(z,N))return ps(r,s,v,0),Yt===null&&Ao(),!1}catch{}finally{}if(c=qc(r,s,v,h),c!==null)return Ur(c,r,h),Xv(c,s,h),!0}return!1}function Up(r,s,c,h){if(h={lane:2,revertLane:v0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ch(r)){if(s)throw Error(i(479))}else s=qc(r,c,h,2),s!==null&&Ur(s,r,2)}function ch(r){var s=r.alternate;return r===ct||s!==null&&s===ct}function Wv(r,s){Bl=nh=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function Xv(r,s,c){if((c&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}var lu={readContext:Qn,use:sh,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};lu.useEffectEvent=_n;var Jv={readContext:Qn,use:sh,useCallback:function(r,s){return wr().memoizedState=[r,s===void 0?null:s],r},useContext:Qn,useEffect:Lv,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,oh(4194308,4,Iv.bind(null,s,r),c)},useLayoutEffect:function(r,s){return oh(4194308,4,r,s)},useInsertionEffect:function(r,s){oh(4,2,r,s)},useMemo:function(r,s){var c=wr();s=s===void 0?null:s;var h=r();if(Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h},useReducer:function(r,s,c){var h=wr();if(c!==void 0){var v=c(s);if(Po){bn(!0);try{c(s)}finally{bn(!1)}}}else v=s;return h.memoizedState=h.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},h.queue=r,r=r.dispatch=nj.bind(null,ct,r),[h.memoizedState,r]},useRef:function(r){var s=wr();return r={current:r},s.memoizedState=r},useState:function(r){r=Rp(r);var s=r.queue,c=Kv.bind(null,ct,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:Pp,useDeferredValue:function(r,s){var c=wr();return $p(c,r,s)},useTransition:function(){var r=Rp(!1);return r=Fv.bind(null,ct,r.queue,!0,!1),wr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var h=ct,v=wr();if(bt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),Yt===null)throw Error(i(349));(Et&127)!==0||vv(h,s,c)}v.memoizedState=c;var w={value:c,getSnapshot:s};return v.queue=w,Lv(xv.bind(null,h,w,r),[r]),h.flags|=2048,$l(9,{destroy:void 0},_v.bind(null,h,w,c,s),null),c},useId:function(){var r=wr(),s=Yt.identifierPrefix;if(bt){var c=Ge,h=Oe;c=(h&~(1<<32-hn(h)-1)).toString(32)+c,s="_"+s+"R_"+c,c=rh++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=KA++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:zp,useFormState:Ov,useActionState:Ov,useOptimistic:function(r){var s=wr();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Up.bind(null,ct,!0,c),c.dispatch=s,[r,s]},useMemoCache:Dp,useCacheRefresh:function(){return wr().memoizedState=tj.bind(null,ct)},useEffectEvent:function(r){var s=wr(),c={impl:r};return s.memoizedState=c,function(){if((Ct&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Hp={readContext:Qn,use:sh,useCallback:Uv,useContext:Qn,useEffect:Bp,useImperativeHandle:zv,useInsertionEffect:Pv,useLayoutEffect:$v,useMemo:Hv,useReducer:ah,useRef:Rv,useState:function(){return ah(Ps)},useDebugValue:Pp,useDeferredValue:function(r,s){var c=Nn();return Gv(c,zt.memoizedState,r,s)},useTransition:function(){var r=ah(Ps)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:au(r),s]},useSyncExternalStore:yv,useId:Zv,useHostTransitionStatus:zp,useFormState:Dv,useActionState:Dv,useOptimistic:function(r,s){var c=Nn();return Ev(c,zt,r,s)},useMemoCache:Dp,useCacheRefresh:Vv};Hp.useEffectEvent=Bv;var Qv={readContext:Qn,use:sh,useCallback:Uv,useContext:Qn,useEffect:Bp,useImperativeHandle:zv,useInsertionEffect:Pv,useLayoutEffect:$v,useMemo:Hv,useReducer:Cp,useRef:Rv,useState:function(){return Cp(Ps)},useDebugValue:Pp,useDeferredValue:function(r,s){var c=Nn();return zt===null?$p(c,r,s):Gv(c,zt.memoizedState,r,s)},useTransition:function(){var r=Cp(Ps)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:au(r),s]},useSyncExternalStore:yv,useId:Zv,useHostTransitionStatus:zp,useFormState:Cv,useActionState:Cv,useOptimistic:function(r,s){var c=Nn();return zt!==null?Ev(c,zt,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Dp,useCacheRefresh:Vv};Qv.useEffectEvent=Bv;function Gp(r,s,c,h){s=r.memoizedState,c=c(h,s),c=c==null?s:_({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Fp={enqueueSetState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),nu(s,r,h))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),nu(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=ni(),h=Ta(c);h.tag=2,s!=null&&(h.callback=s),s=ka(r,h,c),s!==null&&(Ur(s,r,c),nu(s,r,c))}};function e_(r,s,c,h,v,w,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,N):s.prototype&&s.prototype.isPureReactComponent?!ya(c,h)||!ya(v,w):!0}function t_(r,s,c,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==r&&Fp.enqueueReplaceState(s,s.state,null)}function $o(r,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(r=r.defaultProps){c===s&&(c=_({},c));for(var v in r)c[v]===void 0&&(c[v]=r[v])}return c}function n_(r){ko(r)}function r_(r){console.error(r)}function i_(r){ko(r)}function uh(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function s_(r,s,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Yp(r,s,c){return c=Ta(c),c.tag=3,c.payload={element:null},c.callback=function(){uh(r,s)},c}function a_(r){return r=Ta(r),r.tag=3,r}function o_(r,s,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;r.payload=function(){return v(w)},r.callback=function(){s_(s,c,h)}}var N=c.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(r.callback=function(){s_(s,c,h),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var z=h.stack;this.componentDidCatch(h.value,{componentStack:z!==null?z:""})})}function rj(r,s,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&Ol(s,c,v,!0),c=Jr.current,c!==null){switch(c.tag){case 31:case 13:return ki===null?wh():c.alternate===null&&xn===0&&(xn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Xd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),g0(r,h,v)),!1;case 22:return c.flags|=65536,h===Xd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),g0(r,h,v)),!1}throw Error(i(435,c.tag))}return g0(r,h,v),wh(),!1}if(bt)return s=Jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==Nl&&(r=Error(i(422),{cause:h}),Oo(d(r,c)))):(h!==Nl&&(s=Error(i(423),{cause:h}),Oo(d(s,c))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,h=d(h,c),v=Yp(r.stateNode,h,v),xp(r,v),xn!==4&&(xn=2)),!1;var w=Error(i(520),{cause:h});if(w=d(w,c),gu===null?gu=[w]:gu.push(w),xn!==4&&(xn=2),s===null)return!0;h=d(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=v&-v,c.lanes|=r,r=Yp(c.stateNode,h,r),xp(c,r),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=a_(v),o_(v,r,c,h),xp(c,v),!1}c=c.return}while(c!==null);return!1}var qp=Error(i(461)),Rn=!1;function er(r,s,c,h){s.child=r===null?dv(s,null,c,h):Bo(s,r.child,c,h)}function l_(r,s,c,h,v){c=c.render;var w=s.ref;if("ref"in h){var N={};for(var z in h)z!=="ref"&&(N[z]=h[z])}else N=h;return Mo(s),h=Ap(r,s,c,N,w,v),z=jp(),r!==null&&!Rn?(Np(r,s,v),$s(r,s,v)):(bt&&z&&Un(s),s.flags|=1,er(r,s,h,v),s.child)}function c_(r,s,c,h,v){if(r===null){var w=c.type;return typeof w=="function"&&!Al(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,u_(r,s,w,h,v)):(r=No(c.type,null,h,s,s.mode,v),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!e0(r,v)){var N=w.memoizedProps;if(c=c.compare,c=c!==null?c:ya,c(N,h)&&r.ref===s.ref)return $s(r,s,v)}return s.flags|=1,r=Ti(w,h),r.ref=s.ref,r.return=s,s.child=r}function u_(r,s,c,h,v){if(r!==null){var w=r.memoizedProps;if(ya(w,h)&&r.ref===s.ref)if(Rn=!1,s.pendingProps=h=w,e0(r,v))(r.flags&131072)!==0&&(Rn=!0);else return s.lanes=r.lanes,$s(r,s,v)}return Zp(r,s,c,h,v)}function d_(r,s,c,h){var v=h.children,w=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=s.child=r.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,s.child=null;return h_(r,s,w,c,h)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Kd(s,w!==null?w.cachePool:null),w!==null?mv(s,w):Sp(),pv(s);else return h=s.lanes=536870912,h_(r,s,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Kd(s,w.cachePool),mv(s,w),ja(),s.memoizedState=null):(r!==null&&Kd(s,null),Sp(),ja());return er(r,s,v,c),s.child}function cu(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function h_(r,s,c,h,v){var w=bp();return w=w===null?null:{parent:Mn._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},r!==null&&Kd(s,null),Sp(),pv(s),r!==null&&Ol(r,s,h,!0),s.childLanes=v,null}function dh(r,s){return s=fh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function f_(r,s,c){return Bo(s,r.child,null,c),r=dh(s,s.pendingProps),r.flags|=2,Qr(s),s.memoizedState=null,r}function ij(r,s,c){var h=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(bt){if(h.mode==="hidden")return r=dh(s,h),s.lanes=536870912,cu(null,r);if(Tp(s),(r=Nt)?(r=Tx(r,Br),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Vc(r),c.return=s,s.child=c,jt=s,Nt=null)):r=null,r===null)throw bs(s);return s.lanes=536870912,null}return dh(s,h)}var w=r.memoizedState;if(w!==null){var N=w.dehydrated;if(Tp(s),v)if(s.flags&256)s.flags&=-257,s=f_(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Rn||Ol(r,s,c,!1),v=(c&r.childLanes)!==0,Rn||v){if(h=Yt,h!==null&&(N=ro(h,c),N!==0&&N!==w.retryLane))throw w.retryLane=N,Ei(r,N),Ur(h,r,N),qp;wh(),s=f_(r,s,c)}else r=w.treeContext,Nt=Ai(N.nextSibling),jt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=dh(s,h),s.flags|=4096;return s}return r=Ti(r.child,{mode:h.mode,children:h.children}),r.ref=s.ref,s.child=r,r.return=s,r}function hh(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Zp(r,s,c,h,v){return Mo(s),c=Ap(r,s,c,h,void 0,v),h=jp(),r!==null&&!Rn?(Np(r,s,v),$s(r,s,v)):(bt&&h&&Un(s),s.flags|=1,er(r,s,c,v),s.child)}function m_(r,s,c,h,v,w){return Mo(s),s.updateQueue=null,c=bv(s,h,c,v),gv(r),h=jp(),r!==null&&!Rn?(Np(r,s,w),$s(r,s,w)):(bt&&h&&Un(s),s.flags|=1,er(r,s,c,w),s.child)}function p_(r,s,c,h,v){if(Mo(s),s.stateNode===null){var w=Ms,N=c.contextType;typeof N=="object"&&N!==null&&(w=Qn(N)),w=new c(h,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Fp,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=h,w.state=s.memoizedState,w.refs={},vp(s),N=c.contextType,w.context=typeof N=="object"&&N!==null?Qn(N):Ms,w.state=s.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(Gp(s,c,N,h),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&Fp.enqueueReplaceState(w,w.state,null),iu(s,h,w,v),ru(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){w=s.stateNode;var z=s.memoizedProps,ne=$o(c,z);w.props=ne;var be=w.context,Ae=c.contextType;N=Ms,typeof Ae=="object"&&Ae!==null&&(N=Qn(Ae));var De=c.getDerivedStateFromProps;Ae=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function",z=s.pendingProps!==z,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z||be!==N)&&t_(s,w,h,N),Ea=!1;var _e=s.memoizedState;w.state=_e,iu(s,h,w,v),ru(),be=s.memoizedState,z||_e!==be||Ea?(typeof De=="function"&&(Gp(s,c,De,h),be=s.memoizedState),(ne=Ea||e_(s,c,ne,h,_e,be,N))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=be),w.props=h,w.state=be,w.context=N,h=ne):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,_p(r,s),N=s.memoizedProps,Ae=$o(c,N),w.props=Ae,De=s.pendingProps,_e=w.context,be=c.contextType,ne=Ms,typeof be=="object"&&be!==null&&(ne=Qn(be)),z=c.getDerivedStateFromProps,(be=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==De||_e!==ne)&&t_(s,w,h,ne),Ea=!1,_e=s.memoizedState,w.state=_e,iu(s,h,w,v),ru();var we=s.memoizedState;N!==De||_e!==we||Ea||r!==null&&r.dependencies!==null&&Zd(r.dependencies)?(typeof z=="function"&&(Gp(s,c,z,h),we=s.memoizedState),(Ae=Ea||e_(s,c,Ae,h,_e,we,ne)||r!==null&&r.dependencies!==null&&Zd(r.dependencies))?(be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,we,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,we,ne)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&_e===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&_e===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=we),w.props=h,w.state=we,w.context=ne,h=Ae):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&_e===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&_e===r.memoizedState||(s.flags|=1024),h=!1)}return w=h,hh(r,s),h=(s.flags&128)!==0,w||h?(w=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,r!==null&&h?(s.child=Bo(s,r.child,null,v),s.child=Bo(s,null,c,v)):er(r,s,c,v),s.memoizedState=w.state,r=s.child):r=$s(r,s,v),r}function g_(r,s,c,h){return Rs(),s.flags|=256,er(r,s,c,h),s.child}var Vp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kp(r){return{baseLanes:r,cachePool:sv()}}function Wp(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=ti),r}function b_(r,s,c){var h=s.pendingProps,v=!1,w=(s.flags&128)!==0,N;if((N=w)||(N=r!==null&&r.memoizedState===null?!1:(jn.current&2)!==0),N&&(v=!0,s.flags&=-129),N=(s.flags&32)!==0,s.flags&=-33,r===null){if(bt){if(v?Aa(s):ja(),(r=Nt)?(r=Tx(r,Br),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Vc(r),c.return=s,s.child=c,jt=s,Nt=null)):r=null,r===null)throw bs(s);return M0(r)?s.lanes=32:s.lanes=536870912,null}var z=h.children;return h=h.fallback,v?(ja(),v=s.mode,z=fh({mode:"hidden",children:z},v),h=Cs(h,v,c,null),z.return=s,h.return=s,z.sibling=h,s.child=z,h=s.child,h.memoizedState=Kp(c),h.childLanes=Wp(r,N,c),s.memoizedState=Vp,cu(null,h)):(Aa(s),Xp(s,z))}var ne=r.memoizedState;if(ne!==null&&(z=ne.dehydrated,z!==null)){if(w)s.flags&256?(Aa(s),s.flags&=-257,s=Jp(r,s,c)):s.memoizedState!==null?(ja(),s.child=r.child,s.flags|=128,s=null):(ja(),z=h.fallback,v=s.mode,h=fh({mode:"visible",children:h.children},v),z=Cs(z,v,c,null),z.flags|=2,h.return=s,z.return=s,h.sibling=z,s.child=h,Bo(s,r.child,null,c),h=s.child,h.memoizedState=Kp(c),h.childLanes=Wp(r,N,c),s.memoizedState=Vp,s=cu(null,h));else if(Aa(s),M0(z)){if(N=z.nextSibling&&z.nextSibling.dataset,N)var be=N.dgst;N=be,h=Error(i(419)),h.stack="",h.digest=N,Oo({value:h,source:null,stack:null}),s=Jp(r,s,c)}else if(Rn||Ol(r,s,c,!1),N=(c&r.childLanes)!==0,Rn||N){if(N=Yt,N!==null&&(h=ro(N,c),h!==0&&h!==ne.retryLane))throw ne.retryLane=h,Ei(r,h),Ur(N,r,h),qp;D0(z)||wh(),s=Jp(r,s,c)}else D0(z)?(s.flags|=192,s.child=r.child,s=null):(r=ne.treeContext,Nt=Ai(z.nextSibling),jt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=Xp(s,h.children),s.flags|=4096);return s}return v?(ja(),z=h.fallback,v=s.mode,ne=r.child,be=ne.sibling,h=Ti(ne,{mode:"hidden",children:h.children}),h.subtreeFlags=ne.subtreeFlags&65011712,be!==null?z=Ti(be,z):(z=Cs(z,v,c,null),z.flags|=2),z.return=s,h.return=s,h.sibling=z,s.child=h,cu(null,h),h=s.child,z=r.child.memoizedState,z===null?z=Kp(c):(v=z.cachePool,v!==null?(ne=Mn._currentValue,v=v.parent!==ne?{parent:ne,pool:ne}:v):v=sv(),z={baseLanes:z.baseLanes|c,cachePool:v}),h.memoizedState=z,h.childLanes=Wp(r,N,c),s.memoizedState=Vp,cu(r.child,h)):(Aa(s),c=r.child,r=c.sibling,c=Ti(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,r!==null&&(N=s.deletions,N===null?(s.deletions=[r],s.flags|=16):N.push(r)),s.child=c,s.memoizedState=null,c)}function Xp(r,s){return s=fh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function fh(r,s){return r=dr(22,r,null,s),r.lanes=0,r}function Jp(r,s,c){return Bo(s,r.child,null,c),r=Xp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function y_(r,s,c){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),fp(r.return,s,c)}function Qp(r,s,c,h,v,w){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(N.isBackwards=s,N.rendering=null,N.renderingStartTime=0,N.last=h,N.tail=c,N.tailMode=v,N.treeForkCount=w)}function v_(r,s,c){var h=s.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var N=jn.current,z=(N&2)!==0;if(z?(N=N&1|2,s.flags|=128):N&=1,q(jn,N),er(r,s,h,c),h=bt?I:0,!z&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&y_(r,c,s);else if(r.tag===19)y_(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(c=s.child,v=null;c!==null;)r=c.alternate,r!==null&&th(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),Qp(s,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(r=v.alternate,r!==null&&th(r)===null){s.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Qp(s,!0,c,null,w,h);break;case"together":Qp(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function $s(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Da|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Ol(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=Ti(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=Ti(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function e0(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Zd(r)))}function sj(r,s,c){switch(s.tag){case 3:me(s,s.stateNode.containerInfo),Sa(s,Mn,r.memoizedState.cache),Rs();break;case 27:case 5:xe(s);break;case 4:me(s,s.stateNode.containerInfo);break;case 10:Sa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tp(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Aa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?b_(r,s,c):(Aa(s),r=$s(r,s,c),r!==null?r.sibling:null);Aa(s);break;case 19:var v=(r.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(Ol(r,s,c,!1),h=(c&s.childLanes)!==0),v){if(h)return v_(r,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),q(jn,jn.current),h)break;return null;case 22:return s.lanes=0,d_(r,s,c,s.pendingProps);case 24:Sa(s,Mn,r.memoizedState.cache)}return $s(r,s,c)}function __(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Rn=!0;else{if(!e0(r,c)&&(s.flags&128)===0)return Rn=!1,sj(r,s,c);Rn=(r.flags&131072)!==0}else Rn=!1,bt&&(s.flags&1048576)!==0&&ht(s,I,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(r=Ro(s.elementType),s.type=r,typeof r=="function")Al(r)?(h=$o(r,h),s.tag=1,s=p_(null,s,r,h,c)):(s.tag=0,s=Zp(null,s,r,h,c));else{if(r!=null){var v=r.$$typeof;if(v===C){s.tag=11,s=l_(null,s,r,h,c);break e}else if(v===H){s.tag=14,s=c_(null,s,r,h,c);break e}}throw s=re(r)||r,Error(i(306,s,""))}}return s;case 0:return Zp(r,s,s.type,s.pendingProps,c);case 1:return h=s.type,v=$o(h,s.pendingProps),p_(r,s,h,v,c);case 3:e:{if(me(s,s.stateNode.containerInfo),r===null)throw Error(i(387));h=s.pendingProps;var w=s.memoizedState;v=w.element,_p(r,s),iu(s,h,null,c);var N=s.memoizedState;if(h=N.cache,Sa(s,Mn,h),h!==w.cache&&mp(s,[Mn],c,!0),ru(),h=N.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:N.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=g_(r,s,h,c);break e}else if(h!==v){v=d(Error(i(424)),s),Oo(v),s=g_(r,s,h,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Ai(r.firstChild),jt=s,bt=!0,gs=null,Br=!0,c=dv(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Rs(),h===v){s=$s(r,s,c);break e}er(r,s,h,c)}s=s.child}return s;case 26:return hh(r,s),r===null?(c=Dx(s.type,null,s.pendingProps,null))?s.memoizedState=c:bt||(c=s.type,r=s.pendingProps,h=Nh(Z.current).createElement(c),h[sn]=s,h[An]=r,tr(h,c,r),wt(h),s.stateNode=h):s.memoizedState=Dx(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return xe(s),r===null&&bt&&(h=s.stateNode=jx(s.type,s.pendingProps,Z.current),jt=s,Br=!0,v=Nt,Ba(s.type)?(C0=v,Nt=Ai(h.firstChild)):Nt=v),er(r,s,s.pendingProps.children,c),hh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&bt&&((v=h=Nt)&&(h=Lj(h,s.type,s.pendingProps,Br),h!==null?(s.stateNode=h,jt=s,Nt=Ai(h.firstChild),Br=!1,v=!0):v=!1),v||bs(s)),xe(s),v=s.type,w=s.pendingProps,N=r!==null?r.memoizedProps:null,h=w.children,j0(v,w)?h=null:N!==null&&j0(v,N)&&(s.flags|=32),s.memoizedState!==null&&(v=Ap(r,s,WA,null,null,c),Eu._currentValue=v),hh(r,s),er(r,s,h,c),s.child;case 6:return r===null&&bt&&((r=c=Nt)&&(c=Bj(c,s.pendingProps,Br),c!==null?(s.stateNode=c,jt=s,Nt=null,r=!0):r=!1),r||bs(s)),null;case 13:return b_(r,s,c);case 4:return me(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Bo(s,null,h,c):er(r,s,h,c),s.child;case 11:return l_(r,s,s.type,s.pendingProps,c);case 7:return er(r,s,s.pendingProps,c),s.child;case 8:return er(r,s,s.pendingProps.children,c),s.child;case 12:return er(r,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Sa(s,s.type,h.value),er(r,s,h.children,c),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,Mo(s),v=Qn(v),h=h(v),s.flags|=1,er(r,s,h,c),s.child;case 14:return c_(r,s,s.type,s.pendingProps,c);case 15:return u_(r,s,s.type,s.pendingProps,c);case 19:return v_(r,s,c);case 31:return ij(r,s,c);case 22:return d_(r,s,c,s.pendingProps);case 24:return Mo(s),h=Qn(Mn),r===null?(v=bp(),v===null&&(v=Yt,w=pp(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),s.memoizedState={parent:h,cache:v},vp(s),Sa(s,Mn,v)):((r.lanes&c)!==0&&(_p(r,s),iu(s,null,null,c),ru()),v=r.memoizedState,w=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Sa(s,Mn,h)):(h=w.cache,Sa(s,Mn,h),h!==v.cache&&mp(s,[Mn],c,!0))),er(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Is(r){r.flags|=4}function t0(r,s,c,h,v){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(Z_())r.flags|=8192;else throw Lo=Xd,yp}else r.flags&=-16777217}function x_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Bx(s))if(Z_())r.flags|=8192;else throw Lo=Xd,yp}function mh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Qa():536870912,r.lanes|=s,Hl|=s)}function uu(r,s){if(!bt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function tn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(s)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=c,s}function aj(r,s,c){var h=s.pendingProps;switch(vn(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return tn(s),null;case 3:return c=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ls(Mn),ce(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Zi(s)?Is(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xc())),tn(s),null;case 26:var v=s.type,w=s.memoizedState;return r===null?(Is(s),w!==null?(tn(s),x_(s,w)):(tn(s),t0(s,v,null,h,c))):w?w!==r.memoizedState?(Is(s),tn(s),x_(s,w)):(tn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==h&&Is(s),tn(s),t0(s,v,r,h,c)),null;case 27:if(ke(s),c=Z.current,v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}r=V.current,Zi(s)?Wc(s):(r=jx(v,h,c),s.stateNode=r,Is(s))}return tn(s),null;case 5:if(ke(s),v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}if(w=V.current,Zi(s))Wc(s);else{var N=Nh(Z.current);switch(w){case 1:w=N.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=N.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=N.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?N.createElement("select",{is:h.is}):N.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?N.createElement(v,{is:h.is}):N.createElement(v)}}w[sn]=s,w[An]=h;e:for(N=s.child;N!==null;){if(N.tag===5||N.tag===6)w.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===s)break e;for(;N.sibling===null;){if(N.return===null||N.return===s)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}s.stateNode=w;e:switch(tr(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Is(s)}}return tn(s),t0(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(r=Z.current,Zi(s)){if(r=s.stateNode,c=s.memoizedProps,h=null,v=jt,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}r[sn]=s,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||bx(r.nodeValue,c)),r||bs(s,!0)}else r=Nh(r).createTextNode(h),r[sn]=s,s.stateNode=r}return tn(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(h=Zi(s),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),r=!1}else c=Xc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(Qr(s),s):(Qr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return tn(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Zi(s),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),v=!1}else v=Xc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Qr(s),s):(Qr(s),null)}return Qr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),mh(s,s.updateQueue),tn(s),null);case 4:return ce(),r===null&&S0(s.stateNode.containerInfo),tn(s),null;case 10:return Ls(s.type),tn(s),null;case 19:if(B(jn),h=s.memoizedState,h===null)return tn(s),null;if(v=(s.flags&128)!==0,w=h.rendering,w===null)if(v)uu(h,!1);else{if(xn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=th(r),w!==null){for(s.flags|=128,uu(h,!1),r=w.updateQueue,s.updateQueue=r,mh(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)Zc(c,r),c=c.sibling;return q(jn,jn.current&1|2),bt&&Xe(s,h.treeForkCount),s.child}r=r.sibling}h.tail!==null&&Ie()>vh&&(s.flags|=128,v=!0,uu(h,!1),s.lanes=4194304)}else{if(!v)if(r=th(w),r!==null){if(s.flags|=128,v=!0,r=r.updateQueue,s.updateQueue=r,mh(s,r),uu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!bt)return tn(s),null}else 2*Ie()-h.renderingStartTime>vh&&c!==536870912&&(s.flags|=128,v=!0,uu(h,!1),s.lanes=4194304);h.isBackwards?(w.sibling=s.child,s.child=w):(r=h.last,r!==null?r.sibling=w:s.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Ie(),r.sibling=null,c=jn.current,q(jn,v?c&1|2:c&1),bt&&Xe(s,h.treeForkCount),r):(tn(s),null);case 22:case 23:return Qr(s),Ep(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),c=s.updateQueue,c!==null&&mh(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),r!==null&&B(Co),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ls(Mn),tn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function oj(r,s){switch(vn(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ls(Mn),ce(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ke(s),null;case 31:if(s.memoizedState!==null){if(Qr(s),s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Qr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return B(jn),null;case 4:return ce(),null;case 10:return Ls(s.type),null;case 22:case 23:return Qr(s),Ep(),r!==null&&B(Co),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ls(Mn),null;case 25:return null;default:return null}}function w_(r,s){switch(vn(s),s.tag){case 3:Ls(Mn),ce();break;case 26:case 27:case 5:ke(s);break;case 4:ce();break;case 31:s.memoizedState!==null&&Qr(s);break;case 13:Qr(s);break;case 19:B(jn);break;case 10:Ls(s.type);break;case 22:case 23:Qr(s),Ep(),r!==null&&B(Co);break;case 24:Ls(Mn)}}function du(r,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&r)===r){h=void 0;var w=c.create,N=c.inst;h=w(),N.destroy=h}c=c.next}while(c!==v)}}catch(z){$t(s,s.return,z)}}function Na(r,s,c){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&r)===r){var N=h.inst,z=N.destroy;if(z!==void 0){N.destroy=void 0,v=s;var ne=c,be=z;try{be()}catch(Ae){$t(v,ne,Ae)}}}h=h.next}while(h!==w)}}catch(Ae){$t(s,s.return,Ae)}}function S_(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{fv(s,c)}catch(h){$t(r,r.return,h)}}}function E_(r,s,c){c.props=$o(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){$t(r,s,h)}}function hu(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(v){$t(r,s,v)}}function vs(r,s){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){$t(r,s,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){$t(r,s,v)}else c.current=null}function T_(r){var s=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){$t(r,r.return,v)}}function n0(r,s,c){try{var h=r.stateNode;Nj(h,r.type,c,s),h[An]=s}catch(v){$t(r,r.return,v)}}function k_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ba(r.type)||r.tag===4}function r0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||k_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ba(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function i0(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(i0(r,s,c),r=r.sibling;r!==null;)i0(r,s,c),r=r.sibling}function ph(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(ph(r,s,c),r=r.sibling;r!==null;)ph(r,s,c),r=r.sibling}function A_(r){var s=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);tr(s,h,c),s[sn]=r,s[An]=c}catch(w){$t(r,r.return,w)}}var zs=!1,Ln=!1,s0=!1,j_=typeof WeakSet=="function"?WeakSet:Set,qn=null;function lj(r,s){if(r=r.containerInfo,k0=Bh,r=wo(r),ds(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var N=0,z=-1,ne=-1,be=0,Ae=0,De=r,_e=null;t:for(;;){for(var we;De!==c||v!==0&&De.nodeType!==3||(z=N+v),De!==w||h!==0&&De.nodeType!==3||(ne=N+h),De.nodeType===3&&(N+=De.nodeValue.length),(we=De.firstChild)!==null;)_e=De,De=we;for(;;){if(De===r)break t;if(_e===c&&++be===v&&(z=N),_e===w&&++Ae===h&&(ne=N),(we=De.nextSibling)!==null)break;De=_e,_e=De.parentNode}De=we}c=z===-1||ne===-1?null:{start:z,end:ne}}else c=null}c=c||{start:0,end:0}}else c=null;for(A0={focusedElem:r,selectionRange:c},Bh=!1,qn=s;qn!==null;)if(s=qn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,qn=r;else for(;qn!==null;){switch(s=qn,w=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)v=r[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=s,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var qe=$o(c.type,v);r=h.getSnapshotBeforeUpdate(qe,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(nt){$t(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)O0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":O0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,qn=r;break}qn=s.return}}function N_(r,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(r,c),h&4&&du(5,c);break;case 1:if(Hs(r,c),h&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(N){$t(c,c.return,N)}else{var v=$o(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(v,s,r.__reactInternalSnapshotBeforeUpdate)}catch(N){$t(c,c.return,N)}}h&64&&S_(c),h&512&&hu(c,c.return);break;case 3:if(Hs(r,c),h&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{fv(r,s)}catch(N){$t(c,c.return,N)}}break;case 27:s===null&&h&4&&A_(c);case 26:case 5:Hs(r,c),s===null&&h&4&&T_(c),h&512&&hu(c,c.return);break;case 12:Hs(r,c);break;case 31:Hs(r,c),h&4&&M_(r,c);break;case 13:Hs(r,c),h&4&&C_(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=bj.bind(null,c),Pj(r,c))));break;case 22:if(h=c.memoizedState!==null||zs,!h){s=s!==null&&s.memoizedState!==null||Ln,v=zs;var w=Ln;zs=h,(Ln=s)&&!w?Gs(r,c,(c.subtreeFlags&8772)!==0):Hs(r,c),zs=v,Ln=w}break;case 30:break;default:Hs(r,c)}}function O_(r){var s=r.alternate;s!==null&&(r.alternate=null,O_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&tt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,Pr=!1;function Us(r,s,c){for(c=c.child;c!==null;)D_(r,s,c),c=c.sibling}function D_(r,s,c){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(dn,c)}catch{}switch(c.tag){case 26:Ln||vs(c,s),Us(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ln||vs(c,s);var h=on,v=Pr;Ba(c.type)&&(on=c.stateNode,Pr=!1),Us(r,s,c),xu(c.stateNode),on=h,Pr=v;break;case 5:Ln||vs(c,s);case 6:if(h=on,v=Pr,on=null,Us(r,s,c),on=h,Pr=v,on!==null)if(Pr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(w){$t(c,s,w)}else try{on.removeChild(c.stateNode)}catch(w){$t(c,s,w)}break;case 18:on!==null&&(Pr?(r=on,Sx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Wl(r)):Sx(on,c.stateNode));break;case 4:h=on,v=Pr,on=c.stateNode.containerInfo,Pr=!0,Us(r,s,c),on=h,Pr=v;break;case 0:case 11:case 14:case 15:Na(2,c,s),Ln||Na(4,c,s),Us(r,s,c);break;case 1:Ln||(vs(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&E_(c,s,h)),Us(r,s,c);break;case 21:Us(r,s,c);break;case 22:Ln=(h=Ln)||c.memoizedState!==null,Us(r,s,c),Ln=h;break;default:Us(r,s,c)}}function M_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wl(r)}catch(c){$t(s,s.return,c)}}}function C_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wl(r)}catch(c){$t(s,s.return,c)}}function cj(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new j_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new j_),s;default:throw Error(i(435,r.tag))}}function gh(r,s){var c=cj(r);s.forEach(function(h){if(!c.has(h)){c.add(h);var v=yj.bind(null,r,h);h.then(v,v)}})}function $r(r,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=r,N=s,z=N;e:for(;z!==null;){switch(z.tag){case 27:if(Ba(z.type)){on=z.stateNode,Pr=!1;break e}break;case 5:on=z.stateNode,Pr=!1;break e;case 3:case 4:on=z.stateNode.containerInfo,Pr=!0;break e}z=z.return}if(on===null)throw Error(i(160));D_(w,N,v),on=null,Pr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)R_(s,r),s=s.sibling}var Ki=null;function R_(r,s){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$r(s,r),Ir(r),h&4&&(Na(3,r,r.return),du(3,r),Na(5,r,r.return));break;case 1:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&64&&zs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Ki;if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[pt]||w[sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),tr(w,h,c),w[sn]=r,wt(w),h=w;break e;case"link":var N=Rx("link","href",v).get(h+(c.href||""));if(N){for(var z=0;z<N.length;z++)if(w=N[z],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){N.splice(z,1);break t}}w=v.createElement(h),tr(w,h,c),v.head.appendChild(w);break;case"meta":if(N=Rx("meta","content",v).get(h+(c.content||""))){for(z=0;z<N.length;z++)if(w=N[z],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){N.splice(z,1);break t}}w=v.createElement(h),tr(w,h,c),v.head.appendChild(w);break;default:throw Error(i(468,h))}w[sn]=r,wt(w),h=w}r.stateNode=h}else Lx(v,r.type,r.stateNode);else r.stateNode=Cx(v,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?Lx(v,r.type,r.stateNode):Cx(v,h,r.memoizedProps)):h===null&&r.stateNode!==null&&n0(r,r.memoizedProps,c.memoizedProps)}break;case 27:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),c!==null&&h&4&&n0(r,r.memoizedProps,c.memoizedProps);break;case 5:if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),r.flags&32){v=r.stateNode;try{yi(v,"")}catch(qe){$t(r,r.return,qe)}}h&4&&r.stateNode!=null&&(v=r.memoizedProps,n0(r,v,c!==null?c.memoizedProps:v)),h&1024&&(s0=!0);break;case 6:if($r(s,r),Ir(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(qe){$t(r,r.return,qe)}}break;case 3:if(Mh=null,v=Ki,Ki=Oh(s.containerInfo),$r(s,r),Ki=v,Ir(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Wl(s.containerInfo)}catch(qe){$t(r,r.return,qe)}s0&&(s0=!1,L_(r));break;case 4:h=Ki,Ki=Oh(r.stateNode.containerInfo),$r(s,r),Ir(r),Ki=h;break;case 12:$r(s,r),Ir(r);break;case 31:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,gh(r,h)));break;case 13:$r(s,r),Ir(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(yh=Ie()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,gh(r,h)));break;case 22:v=r.memoizedState!==null;var ne=c!==null&&c.memoizedState!==null,be=zs,Ae=Ln;if(zs=be||v,Ln=Ae||ne,$r(s,r),Ln=Ae,zs=be,Ir(r),h&8192)e:for(s=r.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||ne||zs||Ln||Io(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){ne=c=s;try{if(w=ne.stateNode,v)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{z=ne.stateNode;var De=ne.memoizedProps.style,_e=De!=null&&De.hasOwnProperty("display")?De.display:null;z.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(qe){$t(ne,ne.return,qe)}}}else if(s.tag===6){if(c===null){ne=s;try{ne.stateNode.nodeValue=v?"":ne.memoizedProps}catch(qe){$t(ne,ne.return,qe)}}}else if(s.tag===18){if(c===null){ne=s;try{var we=ne.stateNode;v?Ex(we,!0):Ex(ne.stateNode,!1)}catch(qe){$t(ne,ne.return,qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,gh(r,c))));break;case 19:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,gh(r,h)));break;case 30:break;case 21:break;default:$r(s,r),Ir(r)}}function Ir(r){var s=r.flags;if(s&2){try{for(var c,h=r.return;h!==null;){if(k_(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var v=c.stateNode,w=r0(r);ph(r,w,v);break;case 5:var N=c.stateNode;c.flags&32&&(yi(N,""),c.flags&=-33);var z=r0(r);ph(r,z,N);break;case 3:case 4:var ne=c.stateNode.containerInfo,be=r0(r);i0(r,be,ne);break;default:throw Error(i(161))}}catch(Ae){$t(r,r.return,Ae)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function L_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;L_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)N_(r,s.alternate,s),s=s.sibling}function Io(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Na(4,s,s.return),Io(s);break;case 1:vs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&E_(s,s.return,c),Io(s);break;case 27:xu(s.stateNode);case 26:case 5:vs(s,s.return),Io(s);break;case 22:s.memoizedState===null&&Io(s);break;case 30:Io(s);break;default:Io(s)}r=r.sibling}}function Gs(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=r,w=s,N=w.flags;switch(w.tag){case 0:case 11:case 15:Gs(v,w,c),du(4,w);break;case 1:if(Gs(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(be){$t(h,h.return,be)}if(h=w,v=h.updateQueue,v!==null){var z=h.stateNode;try{var ne=v.shared.hiddenCallbacks;if(ne!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ne.length;v++)hv(ne[v],z)}catch(be){$t(h,h.return,be)}}c&&N&64&&S_(w),hu(w,w.return);break;case 27:A_(w);case 26:case 5:Gs(v,w,c),c&&h===null&&N&4&&T_(w),hu(w,w.return);break;case 12:Gs(v,w,c);break;case 31:Gs(v,w,c),c&&N&4&&M_(v,w);break;case 13:Gs(v,w,c),c&&N&4&&C_(v,w);break;case 22:w.memoizedState===null&&Gs(v,w,c),hu(w,w.return);break;case 30:break;default:Gs(v,w,c)}s=s.sibling}}function a0(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Jc(c))}function o0(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Jc(r))}function Wi(r,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)B_(r,s,c,h),s=s.sibling}function B_(r,s,c,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Wi(r,s,c,h),v&2048&&du(9,s);break;case 1:Wi(r,s,c,h);break;case 3:Wi(r,s,c,h),v&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Jc(r)));break;case 12:if(v&2048){Wi(r,s,c,h),r=s.stateNode;try{var w=s.memoizedProps,N=w.id,z=w.onPostCommit;typeof z=="function"&&z(N,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ne){$t(s,s.return,ne)}}else Wi(r,s,c,h);break;case 31:Wi(r,s,c,h);break;case 13:Wi(r,s,c,h);break;case 23:break;case 22:w=s.stateNode,N=s.alternate,s.memoizedState!==null?w._visibility&2?Wi(r,s,c,h):fu(r,s):w._visibility&2?Wi(r,s,c,h):(w._visibility|=2,Il(r,s,c,h,(s.subtreeFlags&10256)!==0||!1)),v&2048&&a0(N,s);break;case 24:Wi(r,s,c,h),v&2048&&o0(s.alternate,s);break;default:Wi(r,s,c,h)}}function Il(r,s,c,h,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=r,N=s,z=c,ne=h,be=N.flags;switch(N.tag){case 0:case 11:case 15:Il(w,N,z,ne,v),du(8,N);break;case 23:break;case 22:var Ae=N.stateNode;N.memoizedState!==null?Ae._visibility&2?Il(w,N,z,ne,v):fu(w,N):(Ae._visibility|=2,Il(w,N,z,ne,v)),v&&be&2048&&a0(N.alternate,N);break;case 24:Il(w,N,z,ne,v),v&&be&2048&&o0(N.alternate,N);break;default:Il(w,N,z,ne,v)}s=s.sibling}}function fu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,h=s,v=h.flags;switch(h.tag){case 22:fu(c,h),v&2048&&a0(h.alternate,h);break;case 24:fu(c,h),v&2048&&o0(h.alternate,h);break;default:fu(c,h)}s=s.sibling}}var mu=8192;function zl(r,s,c){if(r.subtreeFlags&mu)for(r=r.child;r!==null;)P_(r,s,c),r=r.sibling}function P_(r,s,c){switch(r.tag){case 26:zl(r,s,c),r.flags&mu&&r.memoizedState!==null&&Kj(c,Ki,r.memoizedState,r.memoizedProps);break;case 5:zl(r,s,c);break;case 3:case 4:var h=Ki;Ki=Oh(r.stateNode.containerInfo),zl(r,s,c),Ki=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=mu,mu=16777216,zl(r,s,c),mu=h):zl(r,s,c));break;default:zl(r,s,c)}}function $_(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function pu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];qn=h,z_(h,r)}$_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I_(r),r=r.sibling}function I_(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Na(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,bh(r)):pu(r);break;default:pu(r)}}function bh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];qn=h,z_(h,r)}$_(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Na(8,s,s.return),bh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,bh(s));break;default:bh(s)}r=r.sibling}}function z_(r,s){for(;qn!==null;){var c=qn;switch(c.tag){case 0:case 11:case 15:Na(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Jc(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,qn=h;else e:for(c=r;qn!==null;){h=qn;var v=h.sibling,w=h.return;if(O_(h),h===c){qn=null;break e}if(v!==null){v.return=w,qn=v;break e}qn=w}}}var uj={getCacheForType:function(r){var s=Qn(Mn),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return Qn(Mn).controller.signal}},dj=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Yt=null,yt=null,Et=0,Pt=0,ei=null,Oa=!1,Ul=!1,l0=!1,Fs=0,xn=0,Da=0,zo=0,c0=0,ti=0,Hl=0,gu=null,zr=null,u0=!1,yh=0,U_=0,vh=1/0,_h=null,Ma=null,Hn=0,Ca=null,Gl=null,Ys=0,d0=0,h0=null,H_=null,bu=0,f0=null;function ni(){return(Ct&2)!==0&&Et!==0?Et&-Et:X.T!==null?v0():ks()}function G_(){if(ti===0)if((Et&536870912)===0||bt){var r=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),ti=r}else ti=536870912;return r=Jr.current,r!==null&&(r.flags|=32),ti}function Ur(r,s,c){(r===Yt&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)&&(Fl(r,0),Ra(r,Et,ti,!1)),Ui(r,c),((Ct&2)===0||r!==Yt)&&(r===Yt&&((Ct&2)===0&&(zo|=c),xn===4&&Ra(r,Et,ti,!1)),_s(r))}function F_(r,s,c){if((Ct&6)!==0)throw Error(i(327));var h=!c&&(s&127)===0&&(s&r.expiredLanes)===0||pi(r,s),v=h?mj(r,s):p0(r,s,!0),w=h;do{if(v===0){Ul&&!h&&Ra(r,s,0,!1);break}else{if(c=r.current.alternate,w&&!hj(c)){v=p0(r,s,!1),w=!1;continue}if(v===2){if(w=s,r.errorRecoveryDisabledLanes&w)var N=0;else N=r.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){s=N;e:{var z=r;v=gu;var ne=z.current.memoizedState.isDehydrated;if(ne&&(Fl(z,N).flags|=256),N=p0(z,N,!1),N!==2){if(l0&&!ne){z.errorRecoveryDisabledLanes|=w,zo|=w,v=4;break e}w=zr,zr=v,w!==null&&(zr===null?zr=w:zr.push.apply(zr,w))}v=N}if(w=!1,v!==2)continue}}if(v===1){Fl(r,0),Ra(r,s,0,!0);break}e:{switch(h=r,w=v,w){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ra(h,s,ti,!Oa);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=yh+300-Ie(),10<v)){if(Ra(h,s,ti,!Oa),lr(h,0,!0)!==0)break e;Ys=s,h.timeoutHandle=xx(Y_.bind(null,h,c,zr,_h,u0,s,ti,zo,Hl,Oa,w,"Throttled",-0,0),v);break e}Y_(h,c,zr,_h,u0,s,ti,zo,Hl,Oa,w,null,-0,0)}}break}while(!0);_s(r)}function Y_(r,s,c,h,v,w,N,z,ne,be,Ae,De,_e,we){if(r.timeoutHandle=-1,De=s.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},P_(s,w,De);var qe=(w&62914560)===w?yh-Ie():(w&4194048)===w?U_-Ie():0;if(qe=Wj(De,qe),qe!==null){Ys=w,r.cancelPendingCommit=qe(Q_.bind(null,r,s,w,c,h,v,N,z,ne,Ae,De,null,_e,we)),Ra(r,w,N,!be);return}}Q_(r,s,w,c,h,v,N,z,ne)}function hj(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!Fn(w(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ra(r,s,c,h){s&=~c0,s&=~zo,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var v=s;0<v;){var w=31-hn(v),N=1<<w;h[w]=-1,v&=~N}c!==0&&sa(r,c,s)}function xh(){return(Ct&6)===0?(yu(0),!1):!0}function m0(){if(yt!==null){if(Pt===0)var r=yt.return;else r=yt,Vi=ys=null,Op(r),Rl=null,eu=0,r=yt;for(;r!==null;)w_(r.alternate,r),r=r.return;yt=null}}function Fl(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,Mj(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Ys=0,m0(),Yt=r,yt=c=Ti(r.current,null),Et=s,Pt=0,ei=null,Oa=!1,Ul=pi(r,s),l0=!1,Hl=ti=c0=zo=Da=xn=0,zr=gu=null,u0=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var v=31-hn(h),w=1<<v;s|=r[v],h&=~w}return Fs=s,Ao(),c}function q_(r,s){ct=null,X.H=lu,s===Cl||s===Wd?(s=lv(),Pt=3):s===yp?(s=lv(),Pt=4):Pt=s===qp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ei=s,yt===null&&(xn=1,uh(r,d(s,r.current)))}function Z_(){var r=Jr.current;return r===null?!0:(Et&4194048)===Et?ki===null:(Et&62914560)===Et||(Et&536870912)!==0?r===ki:!1}function V_(){var r=X.H;return X.H=lu,r===null?lu:r}function K_(){var r=X.A;return X.A=uj,r}function wh(){xn=4,Oa||(Et&4194048)!==Et&&Jr.current!==null||(Ul=!0),(Da&134217727)===0&&(zo&134217727)===0||Yt===null||Ra(Yt,Et,ti,!1)}function p0(r,s,c){var h=Ct;Ct|=2;var v=V_(),w=K_();(Yt!==r||Et!==s)&&(_h=null,Fl(r,s)),s=!1;var N=xn;e:do try{if(Pt!==0&&yt!==null){var z=yt,ne=ei;switch(Pt){case 8:m0(),N=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(s=!0);var be=Pt;if(Pt=0,ei=null,Yl(r,z,ne,be),c&&Ul){N=0;break e}break;default:be=Pt,Pt=0,ei=null,Yl(r,z,ne,be)}}fj(),N=xn;break}catch(Ae){q_(r,Ae)}while(!0);return s&&r.shellSuspendCounter++,Vi=ys=null,Ct=h,X.H=v,X.A=w,yt===null&&(Yt=null,Et=0,Ao()),N}function fj(){for(;yt!==null;)W_(yt)}function mj(r,s){var c=Ct;Ct|=2;var h=V_(),v=K_();Yt!==r||Et!==s?(_h=null,vh=Ie()+500,Fl(r,s)):Ul=pi(r,s);e:do try{if(Pt!==0&&yt!==null){s=yt;var w=ei;t:switch(Pt){case 1:Pt=0,ei=null,Yl(r,s,w,1);break;case 2:case 9:if(av(w)){Pt=0,ei=null,X_(s);break}s=function(){Pt!==2&&Pt!==9||Yt!==r||(Pt=7),_s(r)},w.then(s,s);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:av(w)?(Pt=0,ei=null,X_(s)):(Pt=0,ei=null,Yl(r,s,w,7));break;case 5:var N=null;switch(yt.tag){case 26:N=yt.memoizedState;case 5:case 27:var z=yt;if(N?Bx(N):z.stateNode.complete){Pt=0,ei=null;var ne=z.sibling;if(ne!==null)yt=ne;else{var be=z.return;be!==null?(yt=be,Sh(be)):yt=null}break t}}Pt=0,ei=null,Yl(r,s,w,5);break;case 6:Pt=0,ei=null,Yl(r,s,w,6);break;case 8:m0(),xn=6;break e;default:throw Error(i(462))}}pj();break}catch(Ae){q_(r,Ae)}while(!0);return Vi=ys=null,X.H=h,X.A=v,Ct=c,yt!==null?0:(Yt=null,Et=0,Ao(),xn)}function pj(){for(;yt!==null&&!he();)W_(yt)}function W_(r){var s=__(r.alternate,r,Fs);r.memoizedProps=r.pendingProps,s===null?Sh(r):yt=s}function X_(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=m_(c,s,s.pendingProps,s.type,void 0,Et);break;case 11:s=m_(c,s,s.pendingProps,s.type.render,s.ref,Et);break;case 5:Op(s);default:w_(c,s),s=yt=Zc(s,Fs),s=__(c,s,Fs)}r.memoizedProps=r.pendingProps,s===null?Sh(r):yt=s}function Yl(r,s,c,h){Vi=ys=null,Op(s),Rl=null,eu=0;var v=s.return;try{if(rj(r,v,s,c,Et)){xn=1,uh(r,d(c,r.current)),yt=null;return}}catch(w){if(v!==null)throw yt=v,w;xn=1,uh(r,d(c,r.current)),yt=null;return}s.flags&32768?(bt||h===1?r=!0:Ul||(Et&536870912)!==0?r=!1:(Oa=r=!0,(h===2||h===9||h===3||h===6)&&(h=Jr.current,h!==null&&h.tag===13&&(h.flags|=16384))),J_(s,r)):Sh(s)}function Sh(r){var s=r;do{if((s.flags&32768)!==0){J_(s,Oa);return}r=s.return;var c=aj(s.alternate,s,Fs);if(c!==null){yt=c;return}if(s=s.sibling,s!==null){yt=s;return}yt=s=r}while(s!==null);xn===0&&(xn=5)}function J_(r,s){do{var c=oj(r.alternate,r);if(c!==null){c.flags&=32767,yt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){yt=r;return}yt=r=c}while(r!==null);xn=6,yt=null}function Q_(r,s,c,h,v,w,N,z,ne){r.cancelPendingCommit=null;do Eh();while(Hn!==0);if((Ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(w=s.lanes|s.childLanes,w|=kl,to(r,c,w,N,z,ne),r===Yt&&(yt=Yt=null,Et=0),Gl=s,Ca=r,Ys=c,d0=w,h0=v,H_=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vj(Zt,function(){return ix(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,v=oe.p,oe.p=2,N=Ct,Ct|=4;try{lj(r,s,c)}finally{Ct=N,oe.p=v,X.T=h}}Hn=1,ex(),tx(),nx()}}function ex(){if(Hn===1){Hn=0;var r=Ca,s=Gl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var h=oe.p;oe.p=2;var v=Ct;Ct|=4;try{R_(s,r);var w=A0,N=wo(r.containerInfo),z=w.focusedElem,ne=w.selectionRange;if(N!==z&&z&&z.ownerDocument&&wl(z.ownerDocument.documentElement,z)){if(ne!==null&&ds(z)){var be=ne.start,Ae=ne.end;if(Ae===void 0&&(Ae=be),"selectionStart"in z)z.selectionStart=be,z.selectionEnd=Math.min(Ae,z.value.length);else{var De=z.ownerDocument||document,_e=De&&De.defaultView||window;if(_e.getSelection){var we=_e.getSelection(),qe=z.textContent.length,nt=Math.min(ne.start,qe),Ht=ne.end===void 0?nt:Math.min(ne.end,qe);!we.extend&&nt>Ht&&(N=Ht,Ht=nt,nt=N);var ue=xo(z,nt),se=xo(z,Ht);if(ue&&se&&(we.rangeCount!==1||we.anchorNode!==ue.node||we.anchorOffset!==ue.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ge=De.createRange();ge.setStart(ue.node,ue.offset),we.removeAllRanges(),nt>Ht?(we.addRange(ge),we.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),we.addRange(ge))}}}}for(De=[],we=z;we=we.parentNode;)we.nodeType===1&&De.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<De.length;z++){var Ne=De[z];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Bh=!!k0,A0=k0=null}finally{Ct=v,oe.p=h,X.T=c}}r.current=s,Hn=2}}function tx(){if(Hn===2){Hn=0;var r=Ca,s=Gl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var h=oe.p;oe.p=2;var v=Ct;Ct|=4;try{N_(r,s.alternate,s)}finally{Ct=v,oe.p=h,X.T=c}}Hn=3}}function nx(){if(Hn===4||Hn===3){Hn=0,$e();var r=Ca,s=Gl,c=Ys,h=H_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Hn=5:(Hn=0,Gl=Ca=null,rx(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ma=null),Ve(c),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(dn,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=X.T,v=oe.p,oe.p=2,X.T=null;try{for(var w=r.onRecoverableError,N=0;N<h.length;N++){var z=h[N];w(z.value,{componentStack:z.stack})}}finally{X.T=s,oe.p=v}}(Ys&3)!==0&&Eh(),_s(r),v=r.pendingLanes,(c&261930)!==0&&(v&42)!==0?r===f0?bu++:(bu=0,f0=r):bu=0,yu(0)}}function rx(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Jc(s)))}function Eh(){return ex(),tx(),nx(),ix()}function ix(){if(Hn!==5)return!1;var r=Ca,s=d0;d0=0;var c=Ve(Ys),h=X.T,v=oe.p;try{oe.p=32>c?32:c,X.T=null,c=h0,h0=null;var w=Ca,N=Ys;if(Hn=0,Gl=Ca=null,Ys=0,(Ct&6)!==0)throw Error(i(331));var z=Ct;if(Ct|=4,I_(w.current),B_(w,w.current,N,c),Ct=z,yu(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(dn,w)}catch{}return!0}finally{oe.p=v,X.T=h,rx(r,s)}}function sx(r,s,c){s=d(c,s),s=Yp(r.stateNode,s,2),r=ka(r,s,2),r!==null&&(Ui(r,2),_s(r))}function $t(r,s,c){if(r.tag===3)sx(r,r,c);else for(;s!==null;){if(s.tag===3){sx(s,r,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){r=d(c,r),c=a_(2),h=ka(s,c,2),h!==null&&(o_(c,h,s,r),Ui(h,2),_s(h));break}}s=s.return}}function g0(r,s,c){var h=r.pingCache;if(h===null){h=r.pingCache=new dj;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(c)||(l0=!0,v.add(c),r=gj.bind(null,r,s,c),s.then(r,r))}function gj(r,s,c){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Yt===r&&(Et&c)===c&&(xn===4||xn===3&&(Et&62914560)===Et&&300>Ie()-yh?(Ct&2)===0&&Fl(r,0):c0|=c,Hl===Et&&(Hl=0)),_s(r)}function ax(r,s){s===0&&(s=Qa()),r=Ei(r,s),r!==null&&(Ui(r,s),_s(r))}function bj(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),ax(r,c)}function yj(r,s){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),ax(r,c)}function vj(r,s){return Be(r,s)}var Th=null,ql=null,b0=!1,kh=!1,y0=!1,La=0;function _s(r){r!==ql&&r.next===null&&(ql===null?Th=ql=r:ql=ql.next=r),kh=!0,b0||(b0=!0,xj())}function yu(r,s){if(!y0&&kh){y0=!0;do for(var c=!1,h=Th;h!==null;){if(r!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var N=h.suspendedLanes,z=h.pingedLanes;w=(1<<31-hn(42|r)+1)-1,w&=v&~(N&~z),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,ux(h,w))}else w=Et,w=lr(h,h===Yt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||pi(h,w)||(c=!0,ux(h,w));h=h.next}while(c);y0=!1}}function _j(){ox()}function ox(){kh=b0=!1;var r=0;La!==0&&Dj()&&(r=La);for(var s=Ie(),c=null,h=Th;h!==null;){var v=h.next,w=lx(h,s);w===0?(h.next=null,c===null?Th=v:c.next=v,v===null&&(ql=c)):(c=h,(r!==0||(w&3)!==0)&&(kh=!0)),h=v}Hn!==0&&Hn!==5||yu(r),La!==0&&(La=0)}function lx(r,s){for(var c=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var N=31-hn(w),z=1<<N,ne=v[N];ne===-1?((z&c)===0||(z&h)!==0)&&(v[N]=ia(z,s)):ne<=s&&(r.expiredLanes|=z),w&=~z}if(s=Yt,c=Et,c=lr(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===s&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&le(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||pi(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(h!==null&&le(h),Ve(c)){case 2:case 8:c=et;break;case 32:c=Zt;break;case 268435456:c=Tn;break;default:c=Zt}return h=cx.bind(null,r),c=Be(c,h),r.callbackPriority=s,r.callbackNode=c,s}return h!==null&&h!==null&&le(h),r.callbackPriority=2,r.callbackNode=null,2}function cx(r,s){if(Hn!==0&&Hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Eh()&&r.callbackNode!==c)return null;var h=Et;return h=lr(r,r===Yt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(F_(r,h,s),lx(r,Ie()),r.callbackNode!=null&&r.callbackNode===c?cx.bind(null,r):null)}function ux(r,s){if(Eh())return null;F_(r,s,!0)}function xj(){Cj(function(){(Ct&6)!==0?Be(st,_j):ox()})}function v0(){if(La===0){var r=Dl;r===0&&(r=kn,kn<<=1,(kn&261888)===0&&(kn=256)),La=r}return La}function dx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function hx(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function wj(r,s,c,h,v){if(s==="submit"&&c&&c.stateNode===v){var w=dx((v[An]||null).action),N=h.submitter;N&&(s=(s=N[An]||null)?dx(s.formAction):N.getAttribute("formAction"),s!==null&&(w=s,N=null));var z=new pl("action","action",null,h,v);r.push({event:z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(La!==0){var ne=N?hx(v,N):new FormData(v);Ip(c,{pending:!0,data:ne,method:v.method,action:w},null,ne)}}else typeof w=="function"&&(z.preventDefault(),ne=N?hx(v,N):new FormData(v),Ip(c,{pending:!0,data:ne,method:v.method,action:w},w,ne))},currentTarget:v}]})}}for(var _0=0;_0<ms.length;_0++){var x0=ms[_0],Sj=x0.toLowerCase(),Ej=x0[0].toUpperCase()+x0.slice(1);Rr(Sj,"on"+Ej)}Rr(Eo,"onAnimationEnd"),Rr(Fd,"onAnimationIteration"),Rr(To,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(up,"onTransitionRun"),Rr(Yd,"onTransitionStart"),Rr(dp,"onTransitionCancel"),Rr(xa,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function fx(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],v=h.event;h=h.listeners;e:{var w=void 0;if(s)for(var N=h.length-1;0<=N;N--){var z=h[N],ne=z.instance,be=z.currentTarget;if(z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}else for(N=0;N<h.length;N++){if(z=h[N],ne=z.instance,be=z.currentTarget,z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}}}}function vt(r,s){var c=s[gi];c===void 0&&(c=s[gi]=new Set);var h=r+"__bubble";c.has(h)||(mx(s,r,2,!1),c.add(h))}function w0(r,s,c){var h=0;s&&(h|=4),mx(c,r,h,s)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function S0(r){if(!r[Ah]){r[Ah]=!0,aa.forEach(function(c){c!=="selectionchange"&&(Tj.has(c)||w0(c,!1,r),w0(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ah]||(s[Ah]=!0,w0("selectionchange",!1,s))}}function mx(r,s,c,h){switch(Gx(s)){case 2:var v=Qj;break;case 8:v=eN;break;default:v=$0}c=v.bind(null,s,c,r),v=void 0,!ho||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(s,c,{capture:!0,passive:v}):r.addEventListener(s,c,!0):v!==void 0?r.addEventListener(s,c,{passive:v}):r.addEventListener(s,c,!1)}function E0(r,s,c,h,v){var w=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var N=h.tag;if(N===3||N===4){var z=h.stateNode.containerInfo;if(z===v)break;if(N===4)for(N=h.return;N!==null;){var ne=N.tag;if((ne===3||ne===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;z!==null;){if(N=dt(z),N===null)return;if(ne=N.tag,ne===5||ne===6||ne===26||ne===27){h=w=N;continue e}z=z.parentNode}}h=h.return}Bc(function(){var be=w,Ae=uo(c),De=[];e:{var _e=qd.get(r);if(_e!==void 0){var we=pl,qe=r;switch(r){case"keypress":if(fo(c)===0)break e;case"keydown":case"keyup":we=Md;break;case"focusin":qe="focus",we=Ic;break;case"focusout":qe="blur",we=Ic;break;case"beforeblur":case"afterblur":we=Ic;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=ip;break;case Eo:case Fd:case To:we=zc;break;case xa:we=Ld;break;case"scroll":case"scrollend":we=St;break;case"wheel":we=Ds;break;case"copy":case"cut":case"paste":we=_i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Cd;break;case"toggle":case"beforetoggle":we=go}var nt=(s&4)!==0,Ht=!nt&&(r==="scroll"||r==="scrollend"),ue=nt?_e!==null?_e+"Capture":null:_e;nt=[];for(var se=be,ge;se!==null;){var Ne=se;if(ge=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ge===null||ue===null||(Ne=Ns(se,ue),Ne!=null&&nt.push(_u(se,Ne,ge))),Ht)break;se=se.return}0<nt.length&&(_e=new we(_e,qe,null,c,Ae),De.push({event:_e,listeners:nt}))}}if((s&7)===0){e:{if(_e=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",_e&&c!==ml&&(qe=c.relatedTarget||c.fromElement)&&(dt(qe)||qe[Zr]))break e;if((we||_e)&&(_e=Ae.window===Ae?Ae:(_e=Ae.ownerDocument)?_e.defaultView||_e.parentWindow:window,we?(qe=c.relatedTarget||c.toElement,we=be,qe=qe?dt(qe):null,qe!==null&&(Ht=l(qe),nt=qe.tag,qe!==Ht||nt!==5&&nt!==27&&nt!==6)&&(qe=null)):(we=null,qe=be),we!==qe)){if(nt=Ad,Ne="onMouseLeave",ue="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(nt=Cd,Ne="onPointerLeave",ue="onPointerEnter",se="pointer"),Ht=we==null?_e:mt(we),ge=qe==null?_e:mt(qe),_e=new nt(Ne,se+"leave",we,c,Ae),_e.target=Ht,_e.relatedTarget=ge,Ne=null,dt(Ae)===be&&(nt=new nt(ue,se+"enter",qe,c,Ae),nt.target=ge,nt.relatedTarget=Ht,Ne=nt),Ht=Ne,we&&qe)t:{for(nt=kj,ue=we,se=qe,ge=0,Ne=ue;Ne;Ne=nt(Ne))ge++;Ne=0;for(var Qe=se;Qe;Qe=nt(Qe))Ne++;for(;0<ge-Ne;)ue=nt(ue),ge--;for(;0<Ne-ge;)se=nt(se),Ne--;for(;ge--;){if(ue===se||se!==null&&ue===se.alternate){nt=ue;break t}ue=nt(ue),se=nt(se)}nt=null}else nt=null;we!==null&&px(De,_e,we,nt,!1),qe!==null&&Ht!==null&&px(De,Ht,qe,nt,!0)}}e:{if(_e=be?mt(be):window,we=_e.nodeName&&_e.nodeName.toLowerCase(),we==="select"||we==="input"&&_e.type==="file")var Ot=_o;else if(xi(_e))if(Id)Ot=cp;else{Ot=lp;var Ke=Yi}else we=_e.nodeName,!we||we.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?be&&co(be.elementType)&&(Ot=_o):Ot=ba;if(Ot&&(Ot=Ot(r,be))){$d(De,Ot,c,Ae);break e}Ke&&Ke(r,_e,be),r==="focusout"&&be&&_e.type==="number"&&be.memoizedProps.value!=null&&Hi(_e,"number",_e.value)}switch(Ke=be?mt(be):window,r){case"focusin":(xi(Ke)||Ke.contentEditable==="true")&&(hs=Ke,El=be,So=null);break;case"focusout":So=El=hs=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Hd(De,c,Ae);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":Hd(De,c,Ae)}var ft;if(bl)e:{switch(r){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else ma?Pd(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(yl&&c.locale!=="ko"&&(ma||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ma&&(ft=cs()):(vi=Ae,Os="value"in vi?vi.value:vi.textContent,ma=!0)),Ke=jh(be,Tt),0<Ke.length&&(Tt=new Uc(Tt,r,null,c,Ae),De.push({event:Tt,listeners:Ke}),ft?Tt.data=ft:(ft=Yc(c),ft!==null&&(Tt.data=ft)))),(ft=ap?Xr(r,c):pa(r,c))&&(Tt=jh(be,"onBeforeInput"),0<Tt.length&&(Ke=new Uc("onBeforeInput","beforeinput",null,c,Ae),De.push({event:Ke,listeners:Tt}),Ke.data=ft)),wj(De,r,be,c,Ae)}fx(De,s)})}function _u(r,s,c){return{instance:r,listener:s,currentTarget:c}}function jh(r,s){for(var c=s+"Capture",h=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Ns(r,c),v!=null&&h.unshift(_u(r,v,w)),v=Ns(r,s),v!=null&&h.push(_u(r,v,w))),r.tag===3)return h;r=r.return}return[]}function kj(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function px(r,s,c,h,v){for(var w=s._reactName,N=[];c!==null&&c!==h;){var z=c,ne=z.alternate,be=z.stateNode;if(z=z.tag,ne!==null&&ne===h)break;z!==5&&z!==26&&z!==27||be===null||(ne=be,v?(be=Ns(c,w),be!=null&&N.unshift(_u(c,be,ne))):v||(be=Ns(c,w),be!=null&&N.push(_u(c,be,ne)))),c=c.return}N.length!==0&&r.push({event:s,listeners:N})}var Aj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function gx(r){return(typeof r=="string"?r:""+r).replace(Aj,`
`).replace(jj,"")}function bx(r,s){return s=gx(s),gx(r)===s}function Ut(r,s,c,h,v,w){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||yi(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&yi(r,""+h);break;case"className":It(r,"class",h);break;case"tabIndex":It(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":It(r,c,h);break;case"style":hl(r,h,w);break;case"data":if(s!=="object"){It(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&Ut(r,s,"name",v.name,v,null),Ut(r,s,"formEncType",v.formEncType,v,null),Ut(r,s,"formMethod",v.formMethod,v,null),Ut(r,s,"formTarget",v.formTarget,v,null)):(Ut(r,s,"encType",v.encType,v,null),Ut(r,s,"method",v.method,v,null),Ut(r,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ua(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":vt("beforetoggle",r),vt("toggle",r),gt(r,"popover",h);break;case"xlinkActuate":Dr(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Dr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Dr(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Dr(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Dr(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Dr(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gt(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fl.get(c)||c,gt(r,c,h))}}function T0(r,s,c,h,v,w){switch(c){case"style":hl(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?yi(r,h):(typeof h=="number"||typeof h=="bigint")&&yi(r,""+h);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),w=r[An]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(s,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,h,v);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):gt(r,c,h)}}}function tr(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",r),vt("load",r);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var N=c[w];if(N!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(r,s,w,N,c,null)}}v&&Ut(r,s,"srcSet",c.srcSet,c,null),h&&Ut(r,s,"src",c.src,c,null);return;case"input":vt("invalid",r);var z=w=N=v=null,ne=null,be=null;for(h in c)if(c.hasOwnProperty(h)){var Ae=c[h];if(Ae!=null)switch(h){case"name":v=Ae;break;case"type":N=Ae;break;case"checked":ne=Ae;break;case"defaultChecked":be=Ae;break;case"value":w=Ae;break;case"defaultValue":z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,s));break;default:Ut(r,s,h,Ae,c,null)}}lo(r,w,z,ne,be,N,v,!1);return;case"select":vt("invalid",r),h=N=w=null;for(v in c)if(c.hasOwnProperty(v)&&(z=c[v],z!=null))switch(v){case"value":w=z;break;case"defaultValue":N=z;break;case"multiple":h=z;default:Ut(r,s,v,z,c,null)}s=w,c=N,r.multiple=!!h,s!=null?Ft(r,!!h,s,!1):c!=null&&Ft(r,!!h,c,!0);return;case"textarea":vt("invalid",r),w=v=h=null;for(N in c)if(c.hasOwnProperty(N)&&(z=c[N],z!=null))switch(N){case"value":h=z;break;case"defaultValue":v=z;break;case"children":w=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:Ut(r,s,N,z,c,null)}la(r,h,v,w);return;case"option":for(ne in c)if(c.hasOwnProperty(ne)&&(h=c[ne],h!=null))switch(ne){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ut(r,s,ne,h,c,null)}return;case"dialog":vt("beforetoggle",r),vt("toggle",r),vt("cancel",r),vt("close",r);break;case"iframe":case"object":vt("load",r);break;case"video":case"audio":for(h=0;h<vu.length;h++)vt(vu[h],r);break;case"image":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"embed":case"source":case"link":vt("error",r),vt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in c)if(c.hasOwnProperty(be)&&(h=c[be],h!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ut(r,s,be,h,c,null)}return;default:if(co(s)){for(Ae in c)c.hasOwnProperty(Ae)&&(h=c[Ae],h!==void 0&&T0(r,s,Ae,h,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(h=c[z],h!=null&&Ut(r,s,z,h,c,null))}function Nj(r,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,N=null,z=null,ne=null,be=null,Ae=null;for(we in c){var De=c[we];if(c.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ne=De;default:h.hasOwnProperty(we)||Ut(r,s,we,null,h,De)}}for(var _e in h){var we=h[_e];if(De=c[_e],h.hasOwnProperty(_e)&&(we!=null||De!=null))switch(_e){case"type":w=we;break;case"name":v=we;break;case"checked":be=we;break;case"defaultChecked":Ae=we;break;case"value":N=we;break;case"defaultValue":z=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,s));break;default:we!==De&&Ut(r,s,_e,we,h,De)}}Cc(r,N,z,ne,be,Ae,w,v);return;case"select":we=N=z=_e=null;for(w in c)if(ne=c[w],c.hasOwnProperty(w)&&ne!=null)switch(w){case"value":break;case"multiple":we=ne;default:h.hasOwnProperty(w)||Ut(r,s,w,null,h,ne)}for(v in h)if(w=h[v],ne=c[v],h.hasOwnProperty(v)&&(w!=null||ne!=null))switch(v){case"value":_e=w;break;case"defaultValue":z=w;break;case"multiple":N=w;default:w!==ne&&Ut(r,s,v,w,h,ne)}s=z,c=N,h=we,_e!=null?Ft(r,!!c,_e,!1):!!h!=!!c&&(s!=null?Ft(r,!!c,s,!0):Ft(r,!!c,c?[]:"",!1));return;case"textarea":we=_e=null;for(z in c)if(v=c[z],c.hasOwnProperty(z)&&v!=null&&!h.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Ut(r,s,z,null,h,v)}for(N in h)if(v=h[N],w=c[N],h.hasOwnProperty(N)&&(v!=null||w!=null))switch(N){case"value":_e=v;break;case"defaultValue":we=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==w&&Ut(r,s,N,v,h,w)}ls(r,_e,we);return;case"option":for(var qe in c)if(_e=c[qe],c.hasOwnProperty(qe)&&_e!=null&&!h.hasOwnProperty(qe))switch(qe){case"selected":r.selected=!1;break;default:Ut(r,s,qe,null,h,_e)}for(ne in h)if(_e=h[ne],we=c[ne],h.hasOwnProperty(ne)&&_e!==we&&(_e!=null||we!=null))switch(ne){case"selected":r.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Ut(r,s,ne,_e,h,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)_e=c[nt],c.hasOwnProperty(nt)&&_e!=null&&!h.hasOwnProperty(nt)&&Ut(r,s,nt,null,h,_e);for(be in h)if(_e=h[be],we=c[be],h.hasOwnProperty(be)&&_e!==we&&(_e!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,s));break;default:Ut(r,s,be,_e,h,we)}return;default:if(co(s)){for(var Ht in c)_e=c[Ht],c.hasOwnProperty(Ht)&&_e!==void 0&&!h.hasOwnProperty(Ht)&&T0(r,s,Ht,void 0,h,_e);for(Ae in h)_e=h[Ae],we=c[Ae],!h.hasOwnProperty(Ae)||_e===we||_e===void 0&&we===void 0||T0(r,s,Ae,_e,h,we);return}}for(var ue in c)_e=c[ue],c.hasOwnProperty(ue)&&_e!=null&&!h.hasOwnProperty(ue)&&Ut(r,s,ue,null,h,_e);for(De in h)_e=h[De],we=c[De],!h.hasOwnProperty(De)||_e===we||_e==null&&we==null||Ut(r,s,De,_e,h,we)}function yx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Oj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,N=v.initiatorType,z=v.duration;if(w&&z&&yx(N)){for(N=0,z=v.responseEnd,h+=1;h<c.length;h++){var ne=c[h],be=ne.startTime;if(be>z)break;var Ae=ne.transferSize,De=ne.initiatorType;Ae&&yx(De)&&(ne=ne.responseEnd,N+=Ae*(ne<z?1:(z-be)/(ne-be)))}if(--h,s+=8*(w+N)/(v.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var k0=null,A0=null;function Nh(r){return r.nodeType===9?r:r.ownerDocument}function vx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function j0(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var N0=null;function Dj(){var r=window.event;return r&&r.type==="popstate"?r===N0?!1:(N0=r,!0):(N0=null,!1)}var xx=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,wx=typeof Promise=="function"?Promise:void 0,Cj=typeof queueMicrotask=="function"?queueMicrotask:typeof wx<"u"?function(r){return wx.resolve(null).then(r).catch(Rj)}:xx;function Rj(r){setTimeout(function(){throw r})}function Ba(r){return r==="head"}function Sx(r,s){var c=s,h=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(v),Wl(s);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")xu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,xu(c);for(var w=c.firstChild;w;){var N=w.nextSibling,z=w.nodeName;w[pt]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=N}}else c==="body"&&xu(r.ownerDocument.body);c=v}while(c);Wl(s)}function Ex(r,s){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function O0(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":O0(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Lj(r,s,c,h){for(;r.nodeType===1;){var v=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[pt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Ai(r.nextSibling),r===null)break}return null}function Bj(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Ai(r.nextSibling),r===null))return null;return r}function Tx(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ai(r.nextSibling),r===null))return null;return r}function D0(r){return r.data==="$?"||r.data==="$~"}function M0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Pj(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Ai(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var C0=null;function kx(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return Ai(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function Ax(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function jx(r,s,c){switch(s=Nh(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function xu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);tt(r)}var ji=new Map,Nx=new Set;function Oh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qs=oe.d;oe.d={f:$j,r:Ij,D:zj,C:Uj,L:Hj,m:Gj,X:Yj,S:Fj,M:qj};function $j(){var r=qs.f(),s=xh();return r||s}function Ij(r){var s=xt(r);s!==null&&s.tag===5&&s.type==="form"?qv(s):qs.r(r)}var Zl=typeof document>"u"?null:document;function Ox(r,s,c){var h=Zl;if(h&&typeof s=="string"&&s){var v=en(s);v='link[rel="'+r+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Nx.has(v)||(Nx.add(v),r={rel:r,crossOrigin:c,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),tr(s,"link",r),wt(s),h.head.appendChild(s)))}}function zj(r){qs.D(r),Ox("dns-prefetch",r,null)}function Uj(r,s){qs.C(r,s),Ox("preconnect",r,s)}function Hj(r,s,c){qs.L(r,s,c);var h=Zl;if(h&&r&&s){var v='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+en(c.imageSizes)+'"]')):v+='[href="'+en(r)+'"]';var w=v;switch(s){case"style":w=Vl(r);break;case"script":w=Kl(r)}ji.has(w)||(r=_({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),ji.set(w,r),h.querySelector(v)!==null||s==="style"&&h.querySelector(wu(w))||s==="script"&&h.querySelector(Su(w))||(s=h.createElement("link"),tr(s,"link",r),wt(s),h.head.appendChild(s)))}}function Gj(r,s){qs.m(r,s);var c=Zl;if(c&&r){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+en(h)+'"][href="'+en(r)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Kl(r)}if(!ji.has(w)&&(r=_({rel:"modulepreload",href:r},s),ji.set(w,r),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Su(w)))return}h=c.createElement("link"),tr(h,"link",r),wt(h),c.head.appendChild(h)}}}function Fj(r,s,c){qs.S(r,s,c);var h=Zl;if(h&&r){var v=In(h).hoistableStyles,w=Vl(r);s=s||"default";var N=v.get(w);if(!N){var z={loading:0,preload:null};if(N=h.querySelector(wu(w)))z.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},c),(c=ji.get(w))&&R0(r,c);var ne=N=h.createElement("link");wt(ne),tr(ne,"link",r),ne._p=new Promise(function(be,Ae){ne.onload=be,ne.onerror=Ae}),ne.addEventListener("load",function(){z.loading|=1}),ne.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Dh(N,s,h)}N={type:"stylesheet",instance:N,count:1,state:z},v.set(w,N)}}}function Yj(r,s){qs.X(r,s);var c=Zl;if(c&&r){var h=In(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Su(v)),w||(r=_({src:r,async:!0},s),(s=ji.get(v))&&L0(r,s),w=c.createElement("script"),wt(w),tr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function qj(r,s){qs.M(r,s);var c=Zl;if(c&&r){var h=In(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Su(v)),w||(r=_({src:r,async:!0,type:"module"},s),(s=ji.get(v))&&L0(r,s),w=c.createElement("script"),wt(w),tr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Dx(r,s,c,h){var v=(v=Z.current)?Oh(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Vl(c.href),c=In(v).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Vl(c.href);var w=In(v).hoistableStyles,N=w.get(r);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,N),(w=v.querySelector(wu(r)))&&!w._p&&(N.instance=w,N.state.loading=5),ji.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ji.set(r,c),w||Zj(v,r,c,N.state))),s&&h===null)throw Error(i(528,""));return N}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kl(c),c=In(v).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+en(r)+'"'}function wu(r){return'link[rel="stylesheet"]['+r+"]"}function Mx(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function Zj(r,s,c,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),tr(s,"link",c),wt(s),r.head.appendChild(s))}function Kl(r){return'[src="'+en(r)+'"]'}function Su(r){return"script[async]"+r}function Cx(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+en(c.href)+'"]');if(h)return s.instance=h,wt(h),h;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),wt(h),tr(h,"style",v),Dh(h,c.precedence,r),s.instance=h;case"stylesheet":v=Vl(c.href);var w=r.querySelector(wu(v));if(w)return s.state.loading|=4,s.instance=w,wt(w),w;h=Mx(c),(v=ji.get(v))&&R0(h,v),w=(r.ownerDocument||r).createElement("link"),wt(w);var N=w;return N._p=new Promise(function(z,ne){N.onload=z,N.onerror=ne}),tr(w,"link",h),s.state.loading|=4,Dh(w,c.precedence,r),s.instance=w;case"script":return w=Kl(c.src),(v=r.querySelector(Su(w)))?(s.instance=v,wt(v),v):(h=c,(v=ji.get(w))&&(h=_({},c),L0(h,v)),r=r.ownerDocument||r,v=r.createElement("script"),wt(v),tr(v,"link",h),r.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Dh(h,c.precedence,r));return s.instance}function Dh(r,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,N=0;N<h.length;N++){var z=h[N];if(z.dataset.precedence===s)w=z;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function R0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function L0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Mh=null;function Rx(r,s,c){if(Mh===null){var h=new Map,v=Mh=new Map;v.set(c,h)}else v=Mh,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),v=0;v<c.length;v++){var w=c[v];if(!(w[pt]||w[sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(s)||"";N=r+N;var z=h.get(N);z?z.push(w):h.set(N,[w])}}return h}function Lx(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function Vj(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Bx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Kj(r,s,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Vl(h.href),w=s.querySelector(wu(v));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Ch.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=w,wt(w);return}w=s.ownerDocument||s,h=Mx(h),(v=ji.get(v))&&R0(h,v),w=w.createElement("link"),wt(w);var N=w;N._p=new Promise(function(z,ne){N.onload=z,N.onerror=ne}),tr(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Ch.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var B0=0;function Wj(r,s){return r.stylesheets&&r.count===0&&Lh(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+s);0<r.imgBytes&&B0===0&&(B0=62500*Oj());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>B0?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Rh=null;function Lh(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Rh=new Map,s.forEach(Xj,r),Rh=null,Ch.call(r))}function Xj(r,s){if(!(s.state.loading&4)){var c=Rh.get(r);if(c)var h=c.get(null);else{c=new Map,Rh.set(r,c);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var N=v[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(c.set(N.dataset.precedence,N),h=N)}h&&c.set(null,h)}v=s.instance,N=v.getAttribute("data-precedence"),w=c.get(N)||h,w===h&&c.set(null,v),c.set(N,v),this.count++,h=Ch.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),s.state.loading|=4}}var Eu={$$typeof:O,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Jj(r,s,c,h,v,w,N,z,ne){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function Px(r,s,c,h,v,w,N,z,ne,be,Ae,De){return r=new Jj(r,s,c,N,ne,be,Ae,De,z),s=1,w===!0&&(s|=24),w=dr(3,null,null,s),r.current=w,w.stateNode=r,s=pp(),s.refCount++,r.pooledCache=s,s.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:s},vp(w),r}function $x(r){return r?(r=Ms,r):Ms}function Ix(r,s,c,h,v,w){v=$x(v),h.context===null?h.context=v:h.pendingContext=v,h=Ta(s),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ka(r,h,s),c!==null&&(Ur(c,r,s),nu(c,r,s))}function zx(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function P0(r,s){zx(r,s),(r=r.alternate)&&zx(r,s)}function Ux(r){if(r.tag===13||r.tag===31){var s=Ei(r,67108864);s!==null&&Ur(s,r,67108864),P0(r,67108864)}}function Hx(r){if(r.tag===13||r.tag===31){var s=ni();s=$n(s);var c=Ei(r,s);c!==null&&Ur(c,r,s),P0(r,s)}}var Bh=!0;function Qj(r,s,c,h){var v=X.T;X.T=null;var w=oe.p;try{oe.p=2,$0(r,s,c,h)}finally{oe.p=w,X.T=v}}function eN(r,s,c,h){var v=X.T;X.T=null;var w=oe.p;try{oe.p=8,$0(r,s,c,h)}finally{oe.p=w,X.T=v}}function $0(r,s,c,h){if(Bh){var v=I0(h);if(v===null)E0(r,s,h,Ph,c),Fx(r,h);else if(nN(v,r,s,c,h))h.stopPropagation();else if(Fx(r,h),s&4&&-1<tN.indexOf(r)){for(;v!==null;){var w=xt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=Nr(w.pendingLanes);if(N!==0){var z=w;for(z.pendingLanes|=2,z.entangledLanes|=2;N;){var ne=1<<31-hn(N);z.entanglements[1]|=ne,N&=~ne}_s(w),(Ct&6)===0&&(vh=Ie()+500,yu(0))}}break;case 31:case 13:z=Ei(w,2),z!==null&&Ur(z,w,2),xh(),P0(w,2)}if(w=I0(h),w===null&&E0(r,s,h,Ph,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else E0(r,s,h,null,c)}}function I0(r){return r=uo(r),z0(r)}var Ph=null;function z0(r){if(Ph=null,r=dt(r),r!==null){var s=l(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=u(s),r!==null)return r;r=null}else if(c===31){if(r=f(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ph=r,null}function Gx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case st:return 2;case et:return 8;case Zt:case En:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var U0=!1,Pa=null,$a=null,Ia=null,Tu=new Map,ku=new Map,za=[],tN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fx(r,s){switch(r){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(s.pointerId)}}function Au(r,s,c,h,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},s!==null&&(s=xt(s),s!==null&&Ux(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),r)}function nN(r,s,c,h,v){switch(s){case"focusin":return Pa=Au(Pa,r,s,c,h,v),!0;case"dragenter":return $a=Au($a,r,s,c,h,v),!0;case"mouseover":return Ia=Au(Ia,r,s,c,h,v),!0;case"pointerover":var w=v.pointerId;return Tu.set(w,Au(Tu.get(w)||null,r,s,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,ku.set(w,Au(ku.get(w)||null,r,s,c,h,v)),!0}return!1}function Yx(r){var s=dt(r.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Hx(c)});return}}else if(s===31){if(s=f(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Hx(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $h(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=I0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);ml=h,c.target.dispatchEvent(h),ml=null}else return s=xt(c),s!==null&&Ux(s),r.blockedOn=c,!1;s.shift()}return!0}function qx(r,s,c){$h(r)&&c.delete(s)}function rN(){U0=!1,Pa!==null&&$h(Pa)&&(Pa=null),$a!==null&&$h($a)&&($a=null),Ia!==null&&$h(Ia)&&(Ia=null),Tu.forEach(qx),ku.forEach(qx)}function Ih(r,s){r.blockedOn===s&&(r.blockedOn=null,U0||(U0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rN)))}var zh=null;function Zx(r){zh!==r&&(zh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zh===r&&(zh=null);for(var s=0;s<r.length;s+=3){var c=r[s],h=r[s+1],v=r[s+2];if(typeof h!="function"){if(z0(h||c)===null)continue;break}var w=xt(c);w!==null&&(r.splice(s,3),s-=3,Ip(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Wl(r){function s(ne){return Ih(ne,r)}Pa!==null&&Ih(Pa,r),$a!==null&&Ih($a,r),Ia!==null&&Ih(Ia,r),Tu.forEach(s),ku.forEach(s);for(var c=0;c<za.length;c++){var h=za[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<za.length&&(c=za[0],c.blockedOn===null);)Yx(c),c.blockedOn===null&&za.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],N=v[An]||null;if(typeof w=="function")N||Zx(c);else if(N){var z=null;if(w&&w.hasAttribute("formAction")){if(v=w,N=w[An]||null)z=N.formAction;else if(z0(v)!==null)continue}else z=N.action;typeof z=="function"?c[h+1]=z:(c.splice(h,3),h-=3),Zx(c)}}}function Vx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(N){return v=N})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function H0(r){this._internalRoot=r}Uh.prototype.render=H0.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,h=ni();Ix(c,h,r,s,null,null)},Uh.prototype.unmount=H0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ix(r.current,2,null,r,null,null),xh(),s[Zr]=null}};function Uh(r){this._internalRoot=r}Uh.prototype.unstable_scheduleHydration=function(r){if(r){var s=ks();r={blockedOn:null,target:r,priority:s};for(var c=0;c<za.length&&s!==0&&s<za[c].priority;c++);za.splice(c,0,r),c===0&&Yx(r)}};var Kx=t.version;if(Kx!=="19.2.1")throw Error(i(527,Kx,"19.2.1"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var iN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{dn=Hh.inject(iN),Mt=Hh}catch{}}return Nu.createRoot=function(r,s){if(!o(r))throw Error(i(299));var c=!1,h="",v=n_,w=r_,N=i_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError)),s=Px(r,1,!1,null,null,c,h,null,v,w,N,Vx),r[Zr]=s.current,S0(r),new H0(s)},Nu.hydrateRoot=function(r,s,c){if(!o(r))throw Error(i(299));var h=!1,v="",w=n_,N=r_,z=i_,ne=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(ne=c.formState)),s=Px(r,1,!0,s,c??null,h,v,ne,w,N,z,Vx),s.context=$x(null),c=s.current,h=ni(),h=$n(h),v=Ta(h),v.callback=null,ka(c,v,h),c=h,s.current.lanes=c,Ui(s,c),_s(s),r[Zr]=s.current,S0(r),new Uh(s)},Nu.version="19.2.1",Nu}var sw;function fN(){if(sw)return Y0.exports;sw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Y0.exports=hN(),Y0.exports}var mN=fN();let pN={data:""},gN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||pN,bN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yN=/\/\*[^]*?\*\/|  +/g,aw=/\n+/g,Fa=(e,t)=>{let n="",i="",o="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":i+=l[1]=="f"?Fa(u,l):l+"{"+Fa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?i+=Fa(u,t?t.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Fa.p?Fa.p(l,u):l+":"+u+";")}return n+(t&&o?t+"{"+o+"}":o)+i},Zs={},j2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+j2(e[n]);return t}return e},vN=(e,t,n,i,o)=>{let l=j2(e),u=Zs[l]||(Zs[l]=(m=>{let p=0,y=11;for(;p<m.length;)y=101*y+m.charCodeAt(p++)>>>0;return"go"+y})(l));if(!Zs[u]){let m=l!==e?e:(p=>{let y,_,x=[{}];for(;y=bN.exec(p.replace(yN,""));)y[4]?x.shift():y[3]?(_=y[3].replace(aw," ").trim(),x.unshift(x[0][_]=x[0][_]||{})):x[0][y[1]]=y[2].replace(aw," ").trim();return x[0]})(e);Zs[u]=Fa(o?{["@keyframes "+u]:m}:m,n?"":"."+u)}let f=n&&Zs.g?Zs.g:null;return n&&(Zs.g=Zs[u]),((m,p,y,_)=>{_?p.data=p.data.replace(_,m):p.data.indexOf(m)===-1&&(p.data=y?m+p.data:p.data+m)})(Zs[u],t,i,f),u},_N=(e,t,n)=>e.reduce((i,o,l)=>{let u=t[l];if(u&&u.call){let f=u(n),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=m?"."+m:f&&typeof f=="object"?f.props?"":Fa(f,""):f===!1?"":f}return i+o+(u??"")},"");function xm(e){let t=this||{},n=e.call?e(t.p):e;return vN(n.unshift?n.raw?_N(n,[].slice.call(arguments,1),t.p):n.reduce((i,o)=>Object.assign(i,o&&o.call?o(t.p):o),{}):n,gN(t.target),t.g,t.o,t.k)}let N2,ib,sb;xm.bind({g:1});let ta=xm.bind({k:1});function xN(e,t,n,i){Fa.p=t,N2=e,ib=n,sb=i}function Ja(e,t){let n=this||{};return function(){let i=arguments;function o(l,u){let f=Object.assign({},l),m=f.className||o.className;n.p=Object.assign({theme:ib&&ib()},f),n.o=/ *go\d+/.test(m),f.className=xm.apply(n,i)+(m?" "+m:"");let p=e;return e[0]&&(p=f.as||e,delete f.as),sb&&p[0]&&sb(f),N2(p,f)}return o}}var wN=e=>typeof e=="function",Yf=(e,t)=>wN(e)?e(t):e,SN=(()=>{let e=0;return()=>(++e).toString()})(),O2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),EN=20,Yb="default",D2=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:i}=t;return D2(e,{type:e.toasts.find(u=>u.id===i.id)?1:0,toast:i});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},Lf=[],M2={toasts:[],pausedAt:void 0,settings:{toastLimit:EN}},Es={},C2=(e,t=Yb)=>{Es[t]=D2(Es[t]||M2,e),Lf.forEach(([n,i])=>{n===t&&i(Es[t])})},R2=e=>Object.keys(Es).forEach(t=>C2(e,t)),TN=e=>Object.keys(Es).find(t=>Es[t].toasts.some(n=>n.id===e)),wm=(e=Yb)=>t=>{C2(t,e)},kN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},AN=(e={},t=Yb)=>{let[n,i]=R.useState(Es[t]||M2),o=R.useRef(Es[t]);R.useEffect(()=>(o.current!==Es[t]&&i(Es[t]),Lf.push([t,i]),()=>{let u=Lf.findIndex(([f])=>f===t);u>-1&&Lf.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var f,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((f=e[u.type])==null?void 0:f.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||kN[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},jN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||SN()}),md=e=>(t,n)=>{let i=jN(t,e,n);return wm(i.toasterId||TN(i.id))({type:2,toast:i}),i.id},Vn=(e,t)=>md("blank")(e,t);Vn.error=md("error");Vn.success=md("success");Vn.loading=md("loading");Vn.custom=md("custom");Vn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?wm(t)(n):R2(n)};Vn.dismissAll=e=>Vn.dismiss(void 0,e);Vn.remove=(e,t)=>{let n={type:4,toastId:e};t?wm(t)(n):R2(n)};Vn.removeAll=e=>Vn.remove(void 0,e);Vn.promise=(e,t,n)=>{let i=Vn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=t.success?Yf(t.success,o):void 0;return l?Vn.success(l,{id:i,...n,...n?.success}):Vn.dismiss(i),o}).catch(o=>{let l=t.error?Yf(t.error,o):void 0;l?Vn.error(l,{id:i,...n,...n?.error}):Vn.dismiss(i)}),e};var NN=1e3,ON=(e,t="default")=>{let{toasts:n,pausedAt:i}=AN(e,t),o=R.useRef(new Map).current,l=R.useCallback((_,x=NN)=>{if(o.has(_))return;let S=setTimeout(()=>{o.delete(_),u({type:4,toastId:_})},x);o.set(_,S)},[]);R.useEffect(()=>{if(i)return;let _=Date.now(),x=n.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(_-S.createdAt);if(T<0){S.visible&&Vn.dismiss(S.id);return}return setTimeout(()=>Vn.dismiss(S.id,t),T)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[n,i,t]);let u=R.useCallback(wm(t),[t]),f=R.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=R.useCallback((_,x)=>{u({type:1,toast:{id:_,height:x}})},[u]),p=R.useCallback(()=>{i&&u({type:6,time:Date.now()})},[i,u]),y=R.useCallback((_,x)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=x||{},A=n.filter(O=>(O.position||k)===(_.position||k)&&O.height),D=A.findIndex(O=>O.id===_.id),$=A.filter((O,C)=>C<D&&O.visible).length;return A.filter(O=>O.visible).slice(...S?[$+1]:[0,$]).reduce((O,C)=>O+(C.height||0)+T,0)},[n]);return R.useEffect(()=>{n.forEach(_=>{if(_.dismissed)l(_.id,_.removeDelay);else{let x=o.get(_.id);x&&(clearTimeout(x),o.delete(_.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:f,endPause:p,calculateOffset:y}}},DN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,MN=ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CN=ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${MN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${CN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LN=ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BN=Ja("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${LN} 1s linear infinite;
`,PN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$N=ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,IN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$N} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zN=Ja("div")`
  position: absolute;
`,UN=Ja("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HN=ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,GN=Ja("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FN=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?R.createElement(GN,null,t):t:n==="blank"?null:R.createElement(UN,null,R.createElement(BN,{...i}),n!=="loading"&&R.createElement(zN,null,n==="error"?R.createElement(RN,{...i}):R.createElement(IN,{...i})))},YN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ZN="0%{opacity:0;} 100%{opacity:1;}",VN="0%{opacity:1;} 100%{opacity:0;}",KN=Ja("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,WN=Ja("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,XN=(e,t)=>{let n=e.includes("top")?1:-1,[i,o]=O2()?[ZN,VN]:[YN(n),qN(n)];return{animation:t?`${ta(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ta(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JN=R.memo(({toast:e,position:t,style:n,children:i})=>{let o=e.height?XN(e.position||t||"top-center",e.visible):{opacity:0},l=R.createElement(FN,{toast:e}),u=R.createElement(WN,{...e.ariaProps},Yf(e.message,e));return R.createElement(KN,{className:e.className,style:{...o,...n,...e.style}},typeof i=="function"?i({icon:l,message:u}):R.createElement(R.Fragment,null,l,u))});xN(R.createElement);var QN=({id:e,className:t,style:n,onHeightUpdate:i,children:o})=>{let l=R.useCallback(u=>{if(u){let f=()=>{let m=u.getBoundingClientRect().height;i(e,m)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return R.createElement("div",{ref:l,className:t,style:n},o)},eO=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:O2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...o}},tO=xm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gh=16,nO=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:o,toasterId:l,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=ON(n,l);return R.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Gh,left:Gh,right:Gh,bottom:Gh,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(y=>{let _=y.position||t,x=p.calculateOffset(y,{reverseOrder:e,gutter:i,defaultPosition:t}),S=eO(_,x);return R.createElement(QN,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?tO:"",style:S},y.type==="custom"?Yf(y.message,y):o?o(y):R.createElement(JN,{toast:y,position:_}))}))};function rO(e,t,n,i=0,o=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),f=n+(i+o/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+f+u-1524.5}const iO=864e5;function sO(e){const t=(e-24405875e-1)*iO;return new Date(t)}function aO(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const o=n-2e3;return 63.86+.3345*o-.060374*o*o+.0017275*o**3+651814e-9*o**4+2373599e-11*o**5}if(n>=2005&&n<2050){const o=n-2e3;return 62.92+.32217*o+.005589*o*o}if(n>=2050&&n<=2150){const o=(n-1820)/100;return-20+32*o*o-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const o=(n-1800)/100;return 13.72-33.244*o+68.612*o**2-65.3*o**3-1.653*o**4+.3343*o**5-.012125*o**6+1348e-7*o**7-175e-8*o**8}const i=(n-1820)/100;return-20+32*i*i}function oO(e){const t=Math.floor(e+.5),n=e+.5-t;let i=t;if(t>=2299161){const _=Math.floor((t-186721625e-2)/36524.25);i=t+1+_-Math.floor(_/4)}const o=i+1524,l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),f=Math.floor((o-u)/30.6001),m=o-u-Math.floor(30.6001*f)+n;let p=f-1;p>12&&(p-=12);let y=l-4715;return p>2&&(y-=1),[y,p,m]}const Vu=Math.PI,el=Vu/180,lO=180/Vu,cO=86400;function uO(e){return e%=360,e<0?e+360:e}function dO(e,t){return(e-t+540)%360-180}function ow(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function hO(e){const[t,n]=oO(e);return e+aO(t,Math.round(n))/cO}function lw(e,t){let n=0,i=1;for(let o=0;o<e.length;o++){let l=0;for(const[u,f,m]of e[o])l+=u*Math.cos(f+m*t);n+=l*i,i*=t}return n*1e-8}function fO(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*el,i=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*el,o=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*el,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*el,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*el,f=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[y,_,x,S,T,k,A,D,$]of f){const O=y*n+_*i+x*o+S*l+T*u;m+=(k+A*t)*Math.sin(O),p+=(D+$*t)*Math.cos(O)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function Fh(e){const t=hO(e),n=(t-2451545)/365250,i=lw(cw.L,n),o=lw(cw.R,n);let l=i+Vu;l>2*Vu&&(l-=2*Vu);const{dpsi:u}=fO(t),f=u/3600*el,m=20.4898/(3600*o),p=l+f-m*el;return uO(p*lO)}function Gn(e,t,n){const i=(t%360+360)%360,o=rO(e,1,1),l=Fh(o);let u=i-l;u<0&&(u+=360);let f=o+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const S=Fh(f),T=dO(i,S);if(Math.abs(T)<m)break;const k=Fh(f+p),A=Fh(f-p),D=ow(k,S),$=ow(A,S),O=(D-$)/(2*p);f+=T/O}const y=sO(f),_=new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(_.getTime()+x*36e5)}return _}const cw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},jr=["","","","","","","","","",""],Yr=["","","","","","","","","","","",""],Li={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},mi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},mO=["","","","","","","","","",""],pO=["","","","","","","","","","","",""],gO=["","","","","","","","","","","","","","","","","","","",""],bO=["","","","","","","","","","","","","","","","","","","","","","","",""],Sm=new Set(jr),qb=new Set(Yr),Em={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vb=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Kb={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},L2={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},uw=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],yO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},vO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function _O(e,t=127.5){return(ut(e,t)||"").charAt(0)}const dw=new Map;function B2(e,t=127.5){const n=`${e}@${t}`,i=dw.get(n);if(i)return i;const o=Gn(e,315,t);if(!o)throw new Error(`    : year=${e}, lon=${t}`);return dw.set(n,o),o}const xO=(e,t)=>(e%t+t)%t,P2=e=>e instanceof Date&&!Number.isNaN(e.getTime());function $2(e,t=127.5){if(!P2(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),i=B2(n,t),o=e<i?n-1:n,l=xO(o-4,60);return{useYear:o,index60Num:l}}function ut(e,t=127.5){const{index60Num:n}=$2(e,t);return Vb[n]}const wO=[2,4,6,8,0,2,4,6,8,0];function SO(e,t=127.5){const n=new Array(12);return n[0]=B2(e,t),n[1]=Gn(e,345,t),n[2]=Gn(e,15,t),n[3]=Gn(e,45,t),n[4]=Gn(e,75,t),n[5]=Gn(e,105,t),n[6]=Gn(e,135,t),n[7]=Gn(e,165,t),n[8]=Gn(e,195,t),n[9]=Gn(e,225,t),n[10]=Gn(e,255,t),n[11]=Gn(e+1,285,t),n.map(i=>new Date(i.getTime()+1800*1e3))}function EO(e,t=127.5){const{useYear:n}=$2(e,t),i=SO(n,t);let o=0;for(let u=0;u<12;u++)e>=i[u]&&(o=u);return{monthIndex:o+1,useYear:n,boundaries:i}}function TO(e,t=127.5){const n=_O(e,t),i=Li..indexOf(n);if(i<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return wO[i]}function kO(e,t,n=127.5){return(TO(e,n)+(t-1))%10}function At(e,t=127.5){if(!P2(e))return"";const{monthIndex:n}=EO(e,t),i=(2+(n-1))%12,o=Li.[i],l=kO(e,n,t);return Li.[l]+o}const I2=(e,t)=>(e%t+t)%t;function z2(e,t,n,i=0,o=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),f=2-u+Math.floor(u/4),m=(i+o/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+f-1524.5}function AO(e,t){const n=e.getHours(),i=e.getMinutes(),o=n*60+i,l=U2(e);return t===""&&l===""?o>=1380?1:0:t===""&&(l===""||l==="")?o<180?-1:0:(o<0,0)}function jO(e,t){const i=e.getHours()*60+e.getMinutes();return t===""?i>=1380?1:0:t===""&&i<180?-1:0}const qf={JDN:2445731,idx:0};function _t(e,t){const n=AO(e,t),i=new Date(e.getTime());i.setDate(i.getDate()+n);const o=z2(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),l=Math.floor(o+.5),u=I2(l-qf.JDN+qf.idx,60),f=Vb[u];if(!f)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${o})`);return f}function NO(e,t){const n=new Date(e),i=jO(n,t),o=new Date(e.getTime());o.setDate(o.getDate()+i);const l=z2(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()),u=Math.floor(l+.5),f=I2(u-qf.JDN+qf.idx,60),m=Vb[f];if(!m)throw new Error(`getDayGanZhi: idx=${f} out of range (jdn=${u}, jd=${l})`);return m}function U2(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<uw.length;n++){const{branch:i,start:o,end:l}=uw[n];if(o<l){if(t>=o&&t<l)return i}else if(t>=o||t<l)return i}return""}function OO(e,t,n,i){const o=jr.indexOf(t);if(o<0)return"";let l=(o%5*2+n)%10;const u=e.getHours();return(i===""||i==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),jr[l]}function Pi(e,t,n){e instanceof Date||(e=new Date(e));const i=U2(e),o=Yr.indexOf(i),u=(n??_t(e,t)).charAt(0);return OO(e,u,o,t)+i}const hw=e=>{let t;const n=new Set,i=(p,y)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=y??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(S=>S(t,x))}},o=()=>t,f={setState:i,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(i,o,f);return f},DO=(e=>e?hw(e):hw),MO=e=>e;function CO(e,t=MO){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const fw=e=>{const t=DO(e),n=i=>CO(t,i);return Object.assign(n,t),n},pd=(e=>e?fw(e):fw);function RO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),f=(l=n.getItem(o))!=null?l:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const ab=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return ab(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return ab(i)(n)}}}},LO=(e,t)=>(n,i,o)=>{let l={storage:RO(()=>localStorage),partialize:k=>k,version:0,merge:(k,A)=>({...A,...k}),...t},u=!1;const f=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},i,o);const y=()=>{const k=l.partialize({...i()});return p.setItem(l.name,{state:k,version:l.version})},_=o.setState;o.setState=(k,A)=>(_(k,A),y());const x=e((...k)=>(n(...k),y()),i,o);o.getInitialState=()=>x;let S;const T=()=>{var k,A;if(!p)return;u=!1,f.forEach($=>{var O;return $((O=i())!=null?O:x)});const D=((A=l.onRehydrateStorage)==null?void 0:A.call(l,(k=i())!=null?k:x))||void 0;return ab(p.getItem.bind(p))(l.name).then($=>{if($)if(typeof $.version=="number"&&$.version!==l.version){if(l.migrate){const O=l.migrate($.state,$.version);return O instanceof Promise?O.then(C=>[!0,C]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,$.state];return[!1,void 0]}).then($=>{var O;const[C,M]=$;if(S=l.merge(M,(O=i())!=null?O:x),n(S,!0),C)return y()}).then(()=>{D?.(S,void 0),S=i(),u=!0,m.forEach($=>$(S))}).catch($=>{D?.(void 0,$)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(f.add(k),()=>{f.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),S||x},H2=LO;var Vs={},Yh={},ob=function(e,t){return ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},ob(e,t)};function G2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ob(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Zf=function(){return Zf=Object.assign||function(t){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Zf.apply(this,arguments)};function Tc(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function F2(e,t,n,i){var o=arguments.length,l=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,i);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(l=(o<3?u(l):o>3?u(t,n,l):u(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}function Y2(e,t){return function(n,i){t(n,i,e)}}function q2(e,t,n,i,o,l){function u(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var f=i.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,y=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),_,x=!1,S=n.length-1;S>=0;S--){var T={};for(var k in i)T[k]=k==="access"?{}:i[k];for(var k in i.access)T.access[k]=i.access[k];T.addInitializer=function(D){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(D||null))};var A=(0,n[S])(f==="accessor"?{get:y.get,set:y.set}:y[m],T);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(_=u(A.get))&&(y.get=_),(_=u(A.set))&&(y.set=_),(_=u(A.init))&&o.unshift(_)}else(_=u(A))&&(f==="field"?o.unshift(_):y[m]=_)}p&&Object.defineProperty(p,i.name,y),x=!0}function Z2(e,t,n){for(var i=arguments.length>2,o=0;o<t.length;o++)n=i?t[o].call(e,n):t[o].call(e);return i?n:void 0}function V2(e){return typeof e=="symbol"?e:"".concat(e)}function K2(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function W2(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(i.next(y))}catch(_){u(_)}}function m(y){try{p(i.throw(y))}catch(_){u(_)}}function p(y){y.done?l(y.value):o(y.value).then(f,m)}p((i=i.apply(e,t||[])).next())})}function X2(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(y){return m([p,y])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Tm=Object.create?(function(e,t,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}):(function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]});function J2(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Tm(t,e,n)}function Vf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wb(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,l=[],u;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return l}function Q2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wb(arguments[t]));return e}function eE(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var l=arguments[t],u=0,f=l.length;u<f;u++,o++)i[o]=l[u];return i}function tE(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}function bc(e){return this instanceof bc?(this.v=e,this):new bc(e)}function nE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(S){return function(T){return Promise.resolve(T).then(S,_)}}function f(S,T){i[S]&&(o[S]=function(k){return new Promise(function(A,D){l.push([S,k,A,D])>1||m(S,k)})},T&&(o[S]=T(o[S])))}function m(S,T){try{p(i[S](T))}catch(k){x(l[0][3],k)}}function p(S){S.value instanceof bc?Promise.resolve(S.value.v).then(y,_):x(l[0][2],S)}function y(S){m("next",S)}function _(S){m("throw",S)}function x(S,T){S(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function rE(e){var t,n;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,l){t[o]=e[o]?function(u){return(n=!n)?{value:bc(e[o](u)),done:!1}:l?l(u):u}:l}}function iE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vf=="function"?Vf(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(u){return new Promise(function(f,m){u=e[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}function sE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var BO=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},lb=function(e){return lb=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},lb(e)};function aE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=lb(e),i=0;i<n.length;i++)n[i]!=="default"&&Tm(t,e,n[i]);return BO(t,e),t}function oE(e){return e&&e.__esModule?e:{default:e}}function lE(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function cE(e,t,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function uE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function dE(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var PO=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function hE(e){function t(l){e.error=e.hasError?new PO(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,i=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(l).then(o,function(u){return t(u),o()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function fE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,o,l,u){return i?t?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):e}const $O={__extends:G2,__assign:Zf,__rest:Tc,__decorate:F2,__param:Y2,__esDecorate:q2,__runInitializers:Z2,__propKey:V2,__setFunctionName:K2,__metadata:W2,__awaiter:Ze,__generator:X2,__createBinding:Tm,__exportStar:J2,__values:Vf,__read:Wb,__spread:Q2,__spreadArrays:eE,__spreadArray:tE,__await:bc,__asyncGenerator:nE,__asyncDelegator:rE,__asyncValues:iE,__makeTemplateObject:sE,__importStar:aE,__importDefault:oE,__classPrivateFieldGet:lE,__classPrivateFieldSet:cE,__classPrivateFieldIn:uE,__addDisposableResource:dE,__disposeResources:hE,__rewriteRelativeImportExtension:fE},IO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:dE,get __assign(){return Zf},__asyncDelegator:rE,__asyncGenerator:nE,__asyncValues:iE,__await:bc,__awaiter:Ze,__classPrivateFieldGet:lE,__classPrivateFieldIn:uE,__classPrivateFieldSet:cE,__createBinding:Tm,__decorate:F2,__disposeResources:hE,__esDecorate:q2,__exportStar:J2,__extends:G2,__generator:X2,__importDefault:oE,__importStar:aE,__makeTemplateObject:sE,__metadata:W2,__param:Y2,__propKey:V2,__read:Wb,__rest:Tc,__rewriteRelativeImportExtension:fE,__runInitializers:Z2,__setFunctionName:K2,__spread:Q2,__spreadArray:tE,__spreadArrays:eE,__values:Vf,default:$O},Symbol.toStringTag,{value:"Module"})),zO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let km=class extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}},mE=class extends km{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},cb=class extends km{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},ub=class extends km{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Kf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kf||(Kf={}));class UO{constructor(t,{headers:n={},customFetch:i,region:o=Kf.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=zO(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,i={}){var o;let l,u;try{const{headers:f,method:m,body:p,signal:y,timeout:_}=i;let x={},{region:S}=i;S||(S=this.region);const T=new URL(`${this.url}/${n}`);S&&S!=="any"&&(x["x-region"]=S,T.searchParams.set("forceFunctionRegion",S));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let A=y;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),y?(A=u.signal,y.addEventListener("abort",()=>u.abort())):A=u.signal);const D=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:k,signal:A}).catch(M=>{throw new mE(M)}),$=D.headers.get("x-relay-error");if($&&$==="true")throw new cb(D);if(!D.ok)throw new ub(D);let O=((o=D.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),C;return O==="application/json"?C=yield D.json():O==="application/octet-stream"||O==="application/pdf"?C=yield D.blob():O==="text/event-stream"?C=D:O==="multipart/form-data"?C=yield D.formData():C=yield D.text(),{data:C,error:null,response:D}}catch(f){return{data:null,error:f,response:f instanceof ub||f instanceof cb?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const HO=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Kf},FunctionsClient:UO,FunctionsError:km,FunctionsFetchError:mE,FunctionsHttpError:ub,FunctionsRelayError:cb},Symbol.toStringTag,{value:"Module"})),pE=fd(HO);var fr={};const kc=fd(IO);var qh={},Zh={},Vh={},Kh={},Wh={},Xh={},mw;function gE(){if(mw)return Xh;mw=1,Object.defineProperty(Xh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Xh.default=e,Xh}var pw;function bE(){if(pw)return Wh;pw=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=kc.__importDefault(gE());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,y,_,x;let S=null,T=null,k=null,A=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const M=await m.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=M:T=JSON.parse(M))}const O=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),C=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");O&&C&&C.length>1&&(k=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,A=406,D="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const O=await m.text();try{S=JSON.parse(O),Array.isArray(S)&&m.status===404&&(T=[],S=null,A=200,D="OK")}catch{m.status===404&&O===""?(A=204,D="No Content"):S={message:O}}if(S&&this.isMaybeSingle&&(!((x=S?.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,A=200,D="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:k,status:A,statusText:D}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,y,_,x,S,T;let k="";const A=m?.cause;if(A){const D=(p=A?.message)!==null&&p!==void 0?p:"",$=(y=A?.code)!==null&&y!==void 0?y:"";k=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=A?.name)!==null&&x!==void 0?x:"Error"}: ${D}`,$&&(k+=` (${$})`),A?.stack&&(k+=`
${A.stack}`)}else k=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}};return Wh.default=n,Wh}var gw;function yE(){if(gw)return Kh;gw=1,Object.defineProperty(Kh,"__esModule",{value:!0});const t=kc.__importDefault(bE());let n=class extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return Kh.default=n,Kh}var bw;function Xb(){if(bw)return Vh;bw=1,Object.defineProperty(Vh,"__esModule",{value:!0});const t=kc.__importDefault(yE()),n=new RegExp("[,()]");let i=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}};return Vh.default=i,Vh}var yw;function vE(){if(yw)return Zh;yw=1,Object.defineProperty(Zh,"__esModule",{value:!0});const t=kc.__importDefault(Xb());let n=class{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const y=(o??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Zh.default=n,Zh}var vw;function GO(){if(vw)return qh;vw=1,Object.defineProperty(qh,"__esModule",{value:!0});const e=kc,t=e.__importDefault(vE()),n=e.__importDefault(Xb());let i=class _E{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new _E(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var y;let _;const x=new URL(`${this.url}/rpc/${l}`);let S;f||m?(_=f?"HEAD":"GET",Object.entries(u).filter(([k,A])=>A!==void 0).map(([k,A])=>[k,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([k,A])=>{x.searchParams.append(k,A)})):(_="POST",S=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:_,url:x,headers:T,schema:this.schemaName,body:S,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return qh.default=i,qh}var _w;function xE(){if(_w)return fr;_w=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.PostgrestError=fr.PostgrestBuilder=fr.PostgrestTransformBuilder=fr.PostgrestFilterBuilder=fr.PostgrestQueryBuilder=fr.PostgrestClient=void 0;const e=kc,t=e.__importDefault(GO());fr.PostgrestClient=t.default;const n=e.__importDefault(vE());fr.PostgrestQueryBuilder=n.default;const i=e.__importDefault(Xb());fr.PostgrestFilterBuilder=i.default;const o=e.__importDefault(yE());fr.PostgrestTransformBuilder=o.default;const l=e.__importDefault(bE());fr.PostgrestBuilder=l.default;const u=e.__importDefault(gE());return fr.PostgrestError=u.default,fr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},fr}class wE{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FO="2.86.2",YO=`realtime-js/${FO}`,SE="1.0.0",qO="2.0.0",xw=SE,db=1e4,ZO=1e3,VO=100;var tl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(tl||(tl={}));var Bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bn||(Bn={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var hb;(function(e){e.websocket="websocket"})(hb||(hb={}));var nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nl||(nl={}));class KO{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,i){var o,l;const u=t.topic,f=(o=t.ref)!==null&&o!==void 0?o:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(S),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,f.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,_.length),T.setUint8(k++,n),Array.from(m,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(f,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(u,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(p,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(_,D=>T.setUint8(k++,D.charCodeAt(0)));var A=new Uint8Array(S.byteLength+i.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(i),S.byteLength),A.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,u,f,m]=i;return n({join_ref:o,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,i){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(t.slice(m,m+o));m=m+o;const y=i.decode(t.slice(m,m+l));m=m+l;const _=i.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,T={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class EE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const ww=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=WO(u,e,t,o),l),{}):{}},WO=(e,t,n,i)=>{const o=t.find(f=>f.name===e),l=o?.type,u=n[e];return l&&!i.includes(l)?TE(l,u):fb(u)},TE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return eD(t,n)}switch(e){case Kt.bool:return XO(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return JO(t);case Kt.json:case Kt.jsonb:return QO(t);case Kt.timestamp:return tD(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return fb(t);default:return fb(t)}},fb=e=>e,XO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},eD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>TE(t,f))}return e},tD=e=>typeof e=="string"?e.replace(" ","T"):e,kE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class K0{constructor(t,n,i={},o=db){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var mb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(mb||(mb={}));let AE=class Bf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bf.syncState(this.state,o,l,u),this.pendingDiffs.forEach(m=>{this.state=Bf.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Bf.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const l=this.cloneDeep(t),u=this.transformState(n),f={},m={};return this.map(l,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const _=l[p];if(_){const x=y.map(A=>A.presence_ref),S=_.map(A=>A.presence_ref),T=y.filter(A=>S.indexOf(A.presence_ref)<0),k=_.filter(A=>x.indexOf(A.presence_ref)<0);T.length>0&&(f[p]=T),k.length>0&&(m[p]=k)}else f[p]=y}),this.syncDiff(l,{joins:f,leaves:m},i,o)}static syncDiff(t,n,i,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const y=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(m),y.length>0){const _=t[f].map(S=>S.presence_ref),x=y.filter(S=>_.indexOf(S.presence_ref)<0);t[f].unshift(...x)}i(f,y,m)}),this.map(u,(f,m)=>{let p=t[f];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),t[f]=p,o(f,p,m),p.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var pb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(pb||(pb={}));var mc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mc||(mc={}));var Ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));const nD=Bn;let jE=class NE{constructor(t,n={config:{}},i){var o,l;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new K0(this,ns.join,this.params,this.timeout),this.rejoinTimer=new EE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new AE(this),this.broadcastEndpointURL=kE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[mc.PRESENCE]&&this.bindings[mc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Ss.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){t?.(Ss.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,A=(T=k?.length)!==null&&T!==void 0?T:0,D=[];for(let $=0;$<A;$++){const O=k[$],{filter:{event:C,schema:M,table:G,filter:H}}=O,F=S&&S[$];if(F&&F.event===C&&F.schema===M&&F.table===G&&F.filter===H)D.push(Object.assign(Object.assign({},O),{id:F.id}));else{this.unsubscribe(),this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(Ss.SUBSCRIBED);return}}).receive("error",S=>{this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Bn.joined&&t===mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new K0(this,ns.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new K0(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>VO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,l;const u=t.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=ns;if(i&&[f,m,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,n,i);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var T,k,A;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(k=S.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(S=>S.callback(x,i)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var T,k,A,D,$,O;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const C=S.id,M=(T=S.filter)===null||T===void 0?void 0:T.event;return C&&((k=n.ids)===null||k===void 0?void 0:k.includes(C))&&(M==="*"||M?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const C=($=(D=S?.filter)===null||D===void 0?void 0:D.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return C==="*"||C===((O=n?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:A,commit_timestamp:D,type:$,errors:O}=T;x=Object.assign(Object.assign({},{schema:k,table:A,commit_timestamp:D,eventType:$,new:{},old:{},errors:O}),this._getPayloadRecords(T))}S.callback(x,i)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&NE.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ww(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ww(t.columns,t.old_record)),n}};const W0=()=>{},Jh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rD=[1e3,2e3,5e3,1e4],iD=1e4,sD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let aD=class{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=db,this.transport=null,this.heartbeatIntervalMs=Jh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=W0,this.ref=0,this.reconnectTimer=null,this.vsn=xw,this.logger=W0,this.conn=null,this.sendBuffer=[],this.serializer=new KO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${hb.websocket}`,this.httpEndpoint=kE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case tl.connecting:return nl.Connecting;case tl.open:return nl.Open;case tl.closing:return nl.Closing;default:return nl.Closed}}isConnected(){return this.connectionState()===nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new jE(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ZO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Jh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===tl.open||this.conn.readyState===tl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([sD],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:YO};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ns.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new EE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,l,u,f,m,p,y,_,x,S;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:db,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Jh.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:W0,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:xw,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>rD[T-1]||iD),this.vsn){case SE:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((T,k)=>k(JSON.stringify(T))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:((T,k)=>k(JSON.parse(T)));break;case qO:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const oD=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:nD,get REALTIME_LISTEN_TYPES(){return mc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return pb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return mb},get REALTIME_SUBSCRIBE_STATES(){return Ss},RealtimeChannel:jE,RealtimeClient:aD,RealtimePresence:AE,WebSocketFactory:wE},Symbol.toStringTag,{value:"Module"})),OE=fd(oD);class gd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class DE extends gd{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wf extends gd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Jb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lD=()=>Response,gb=e=>{if(Array.isArray(e))return e.map(n=>gb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=gb(i)}),t},cD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},uD=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),X0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},dD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const i=yield lD();e instanceof i&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new DE(X0(o),l,u))}).catch(o=>{t(new Wf(X0(o),o))}):t(new Wf(X0(e),e))}),hD=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!i?o:(cD(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function bd(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,hD(t,i,o,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>dD(m,f,i))})})}function Qu(e,t,n,i){return Ze(this,void 0,void 0,function*(){return bd(e,"GET",t,n,i)})}function ts(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return bd(e,"POST",t,i,o,n)})}function bb(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return bd(e,"PUT",t,i,o,n)})}function fD(e,t,n,i){return Ze(this,void 0,void 0,function*(){return bd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Qb(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return bd(e,"DELETE",t,i,o,n)})}class mD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var ME;class pD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[ME]="BlobDownloadBuilder",this.promise=null}asStream(){return new mD(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}ME=Symbol.toStringTag;const gD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bD{constructor(t,n={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=Jb(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,o){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Sw),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),_=yield(t=="PUT"?bb:ts)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ln(l))return{data:null,error:l};throw l}})}upload(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,o){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:Sw.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",p.cacheControl)):(m=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const _=yield bb(this.fetch,f.toString(),m,{headers:y});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ln(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield ts(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new gd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}update(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}copy(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,i){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield ts(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=yield ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(t),m=()=>Qu(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new pD(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Qu(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:gb(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield fD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i)&&i instanceof Wf){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},gD),n),{prefix:t||""});return{data:yield ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield ts(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const CE="2.86.2",RE={"X-Client-Info":`storage-js/${CE}`};class yD{constructor(t,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RE),n),this.fetch=Jb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Qu(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Qu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield bb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ed=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function vD(e,t,n){const i=new URL(t,e);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function _D(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function xD(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:l,headers:u}){const f=vD(e.baseUrl,i,o),m=await _D(e.auth),p=await t(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&y?JSON.parse(y):y;if(!p.ok){const S=_?x:void 0,T=S?.error;throw new ed(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:p.status,headers:p.headers,data:x}}}}function Qh(e){return e.join("")}var wD=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Qh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qh(e.namespace)}`}),!0}catch(t){if(t instanceof ed&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ed&&n.status===409)return;throw n}}};function Xl(e){return e.join("")}var SD=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ed&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ed&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ED=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=xD({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new wD(this.client,t),this.tableOps=new SD(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class LE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RE),n),this.fetch=Jb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Qu(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!uD(t))throw new gd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new ED({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const ey={"X-Client-Info":`storage-js/${CE}`,"Content-Type":"application/json"};class ty extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Pf extends ty{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class BE extends ty{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var yb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(yb||(yb={}));const Am=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),TD=()=>Response,PE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kD=e=>Array.from(new Float32Array(e)),AD=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},Ew=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const o=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";t(new Pf(Ew(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Pf(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Pf(f,o,u))}}else t(new BE(Ew(e),e))}),ND=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return i?(PE(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),n)):o};function OD(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,ND(t,i,o,l)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>jD(m,f,i))})})}function li(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return OD(e,"POST",t,i,o,n)})}class $E{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ey),n),this.fetch=Am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}}class IE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ey),n),this.fetch=Am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield li(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class zE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ey),n),this.fetch=Am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield li(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class UE extends zE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new HE(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class HE extends $E{constructor(t,n,i,o){super(t,n,o),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new GE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class GE extends IE{constructor(t,n,i,o,l){super(t,n,l),this.vectorBucketName=i,this.indexName=o}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class DD extends yD{constructor(t,n={},i,o){super(t,n,i,o)}from(t){return new bD(this.url,this.headers,t,this.fetch)}get vectors(){return new UE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LE(this.url+"/iceberg",this.headers,this.fetch)}}const MD=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:LE,StorageApiError:DE,StorageClient:DD,StorageError:gd,StorageUnknownError:Wf,StorageVectorsApiError:Pf,StorageVectorsClient:UE,StorageVectorsError:ty,get StorageVectorsErrorCode(){return yb},StorageVectorsUnknownError:BE,VectorBucketApi:zE,VectorBucketScope:HE,VectorDataApi:IE,VectorIndexApi:$E,VectorIndexScope:GE,isPlainObject:PE,isStorageError:ln,isStorageVectorsError:Fr,normalizeToFloat32:kD,resolveFetch:Am,resolveResponse:TD,validateVectorDimension:AD},Symbol.toStringTag,{value:"Module"})),CD=fd(MD);var J0={},Ou={},Tw;function RD(){return Tw||(Tw=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.version=void 0,Ou.version="2.86.2"),Ou}var kw;function LD(){return kw||(kw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=RD();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(J0)),J0}var Q0={},Aw;function BD(){return Aw||(Aw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const i=(o,l,u)=>{const f=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,y)=>{var _;const x=(_=await l())!==null&&_!==void 0?_:o;let S=new m(y?.headers);return S.has("apikey")||S.set("apikey",o),S.has("Authorization")||S.set("Authorization",`Bearer ${x}`),f(p,Object.assign(Object.assign({},y),{headers:S}))}};e.fetchWithAuth=i})(Q0)),Q0}var Ks={},jw;function PD(){if(jw)return Ks;jw=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.isBrowser=void 0,Ks.uuid=e,Ks.ensureTrailingSlash=t,Ks.applySettingDefaults=i,Ks.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,f=l=="x"?u:u&3|8;return f.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Ks.isBrowser=n;function i(l,u){var f,m;const{db:p,auth:y,realtime:_,global:x}=l,{db:S,auth:T,realtime:k,global:A}=u,D={db:Object.assign(Object.assign({},S),p),auth:Object.assign(Object.assign({},T),y),realtime:Object.assign(Object.assign({},k),_),storage:{},global:Object.assign(Object.assign(Object.assign({},A),x),{headers:Object.assign(Object.assign({},(f=A?.headers)!==null&&f!==void 0?f:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?D.accessToken=l.accessToken:delete D.accessToken,D}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ks}var Du={};const FE="2.86.2",oc=30*1e3,vb=3,eg=vb*oc,$D="http://localhost:9999",ID="supabase.auth.token",zD={"X-Client-Info":`gotrue-js/${FE}`},_b="X-Supabase-Api-Version",YE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HD=600*1e3;let yc=class extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let qE=class extends yc{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}};function ZE(e){return We(e)&&e.name==="AuthApiError"}let Ya=class extends yc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},na=class extends yc{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}},Hr=class extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function VE(e){return We(e)&&e.name==="AuthSessionMissingError"}let Wo=class extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Uu=class extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Hu=class extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function KE(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let xb=class extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Xf=class extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function $f(e){return We(e)&&e.name==="AuthRetryableFetchError"}let wb=class extends na{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}};function GD(e){return We(e)&&e.name==="AuthWeakPasswordError"}let Jf=class extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nw=` 	
\r=`.split(""),FD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Nw.length;t+=1)e[Nw[t].charCodeAt(0)]=-2;for(let t=0;t<Qf.length;t+=1)e[Qf[t].charCodeAt(0)]=t;return e})();function Ow(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Qf[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Qf[i]),t.queuedBits-=6}}function WE(e,t,n){const i=FD[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Dw(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{ZD(u,i,n)};for(let u=0;u<e.length;u+=1)WE(e.charCodeAt(u),o,l);return t.join("")}function YD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function qD(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}YD(i,t)}}function ZD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function pc(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)WE(e.charCodeAt(o),n,i);return new Uint8Array(t)}function VD(e){const t=[];return qD(e,n=>t.push(n)),new Uint8Array(t)}function rl(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Ow(o,n,i)),Ow(null,n,i),t.join("")}function KD(e){return Math.round(Date.now()/1e3)+e}function WD(){return Symbol("auth-callback")}const ir=()=>typeof window<"u"&&typeof document<"u",Uo={tested:!1,writable:!1},XE=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Uo.tested)return Uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Uo.tested=!0,Uo.writable=!0}catch{Uo.tested=!0,Uo.writable=!1}return Uo.writable};function XD(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const JE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),JD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ho=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},nr=async(e,t)=>{await e.removeItem(t)};class jm{constructor(){this.promise=new jm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}jm.promiseConstructor=Promise;function tg(e){const t=e.split(".");if(t.length!==3)throw new Jf("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!UD.test(t[i]))throw new Jf("JWT not in base64url format");return{header:JSON.parse(Dw(t[0])),payload:JSON.parse(Dw(t[1])),signature:pc(t[2]),raw:{header:t[0],payload:t[1]}}}async function QD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eM(e,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function tM(e){return("0"+e.toString(16)).substr(-2)}function nM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,tM).join("")}async function rM(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function iM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await rM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jl(e,t,n=!1){const i=nM();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await lc(e,`${t}-code-verifier`,o);const l=await iM(i);return[l,i===l?"plain":"s256"]}const sM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aM(e){const t=e.headers.get(_b);if(!t||!t.match(sM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function oM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ql(e){if(!cM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ng(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uM(e,t){return new Proxy(e,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,o)}})}function Mw(e){return JSON.parse(JSON.stringify(e))}const Xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dM=[502,503,504];async function Cw(e){var t;if(!JD(e))throw new Xf(Xo(e),0);if(dM.includes(e.status))throw new Xf(Xo(e),e.status);let n;try{n=await e.json()}catch(l){throw new Ya(Xo(l),l)}let i;const o=aM(e);if(o&&o.getTime()>=YE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new wb(Xo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Hr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new wb(Xo(n),e.status,n.weak_password.reasons);throw new qE(Xo(n),e.status||500,i)}const hM=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function rt(e,t,n,i){var o;const l=Object.assign({},i?.headers);l[_b]||(l[_b]=YE["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await fM(e,t,n+f,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function fM(e,t,n,i,o,l){const u=hM(t,i,o,l);let f;try{f=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new Xf(Xo(m),0)}if(f.ok||await Cw(f),i?.noResolveJson)return f;try{return await f.json()}catch(m){await Cw(m)}}function Qi(e){var t;let n=null;gM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=KD(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Rw(e){const t=Qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function mM(e){return{data:e,error:null}}function pM(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=e,u=Tc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function Lw(e){return e}function gM(e){return e.access_token&&e.refresh_token&&e.expires_in}const If=["global","local","others"];let ny=class{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=JE(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=If[0]){if(If.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${If.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Tc(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:pM,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Lw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Ql(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ql(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Ql(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Ql(t.userId);try{const{data:n,error:i}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ql(t.userId),Ql(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Lw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(We(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function Bw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Jo={debug:!!(globalThis&&XE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ry extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let QE=class extends ry{};class bM extends ry{}async function eT(e,t,n){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new QE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Pw={};async function yM(e,t,n){var i;const o=(i=Pw[e])!==null&&i!==void 0?i:Promise.resolve(),l=Promise.race([o.catch(()=>null),t>=0?new Promise((u,f)=>{setTimeout(()=>{f(new bM(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return Pw[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function vM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function _M(e){return parseInt(e,16)}function xM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function wM(e){var t;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:y,uri:_,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=tT(e.address),T=y?`${y}://${i}`:i,k=e.statement?`${e.statement}
`:"",A=`${T} wants you to sign in with your Ethereum account:
${S}

${k}`;let D=`URI: ${_}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(D+=`
Expiration Time: ${o.toISOString()}`),f&&(D+=`
Not Before: ${f.toISOString()}`),m&&(D+=`
Request ID: ${m}`),p){let $=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);$+=`
- ${O}`}D+=$}return`${A}
${D}`}class Pn extends Error{constructor({message:t,code:n,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class em extends Pn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function SM({error:e,options:t}){var n,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(nT(u)){if(l.rp.id!==u)return new Pn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function EM({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(nT(i)){if(n.rpId!==i)return new Pn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class TM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const kM=new TM;function AM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,o=Tc(e,["challenge","user","excludeCredentials"]),l=pc(t).buffer,u=Object.assign(Object.assign({},n),{id:pc(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:pc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function jM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Tc(e,["challenge","allowCredentials"]),o=pc(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:pc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function NM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:rl(new Uint8Array(e.response.attestationObject)),clientDataJSON:rl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function OM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rl(new Uint8Array(o.authenticatorData)),clientDataJSON:rl(new Uint8Array(o.clientDataJSON)),signature:rl(new Uint8Array(o.signature)),userHandle:o.userHandle?rl(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function $w(){var e,t;return!!(ir()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function DM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new em("Browser returned unexpected credential type",t)}:{data:null,error:new em("Empty credential response",t)}}catch(t){return{data:null,error:SM({error:t,options:e})}}}async function MM(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new em("Browser returned unexpected credential type",t)}:{data:null,error:new em("Empty credential response",t)}}catch(t){return{data:null,error:EM({error:t,options:e})}}}const CM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},RM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function tm(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(t(u)){const f=i[l];t(f)?i[l]=tm(f,u):i[l]=tm(u)}else i[l]=u}return i}function LM(e,t){return tm(CM,e,t||{})}function BM(e,t){return tm(RM,e,t||{})}class PM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:f};const m=o??kM.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=LM(u.webauthn.credential_options.publicKey,l?.create),{data:y,error:_}=await DM({publicKey:p,signal:m});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}case"request":{const p=BM(u.webauthn.credential_options.publicKey,l?.request),{data:y,error:_}=await MM(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new yc("rpId is required for WebAuthn authentication")};try{if(!$w())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new yc("rpId is required for WebAuthn registration")};try{if(!$w())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in register",u)}}}}vM();const $M={url:$D,storageKey:ID,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Iw(e,t,n){return await n()}const ec={};let iy=class Sb{get jwks(){var t,n;return(n=(t=ec[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ec[this.storageKey]=Object.assign(Object.assign({},ec[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ec[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ec[this.storageKey]=Object.assign(Object.assign({},ec[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},$M),t);if(this.storageKey=l.storageKey,this.instanceID=(n=Sb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Sb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ir()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ny({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=JE(l.fetch),this.lock=l.lock||Iw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:ir()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=eT:this.lock=Iw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:XE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${FE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(ir()&&(n=XD(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),ir()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),KE(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Ya("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qi}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,i,o;try{let l;if("email"in t){const{email:y,password:_,options:x}=t;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Jl(this.storage,this.storageKey)),l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:y,password:_,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:T},xform:Qi})}else if("phone"in t){const{phone:y,password:_,options:x}=t;l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Qi})}else throw new Uu("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await nr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Rw})}else if("phone"in t){const{phone:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Rw})}else throw new Uu("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Wo;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,o,l,u,f,m,p,y,_,x;let S,T;if("message"in t)S=t.message,T=t.signature;else{const{chain:k,wallet:A,statement:D,options:$}=t;let O;if(ir())if(typeof A=="object")O=A;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")O=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=A}const C=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href),M=await O.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=tT(M[0]);let H=(i=$?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!H){const W=await O.request({method:"eth_chainId"});H=_M(W)}const F={domain:C.host,address:G,statement:D,uri:C.href,version:"1",chainId:H,nonce:(o=$?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=$?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=$?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=$?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=$?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=$?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=wM(F),T=await O.request({method:"personal_sign",params:[xM(S),G]})}try{const{data:k,error:A}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:T},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qi});if(A)throw A;if(!k||!k.session||!k.user){const D=new Wo;return this._returnResult({data:{user:null,session:null},error:D})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:A})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,i,o,l,u,f,m,p,y,_,x,S;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:A,wallet:D,statement:$,options:O}=t;let C;if(ir())if(typeof D=="object")C=D;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))C=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=D}const M=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const G=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),$?{statement:$}:null));let H;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")H=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)H=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)T=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),k=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(o=(i=O?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=O?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((_=(y=O?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...O.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const G=await C.signMessage(new TextEncoder().encode(T),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=G}}try{const{data:A,error:D}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:rl(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Qi});if(D)throw D;if(!A||!A.session||!A.user){const $=new Wo;return this._returnResult({data:{user:null,session:null},error:$})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:D})}catch(A){if(We(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Qi});if(await nr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Wo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:l,nonce:u}=t,f=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qi}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Wo;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,o,l,u;try{if("email"in t){const{email:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Jl(this.storage,this.storageKey));const{error:_}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:m}=t,{data:p,error:y}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:y})}throw new Uu("You must provide either an email or phone number.")}catch(f){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,i;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Qi});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,i,o,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Jl(this.storage,this.storageKey));const p=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:mM});return!((l=p.data)===null||l===void 0)&&l.url&&ir()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Hr;const{error:o}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:f}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Uu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<eg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Ho(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=ng()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=uM(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qa}):await this._useSession(async n=>{var i,o,l;const{data:u,error:f}=n;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hr}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:qa})})}catch(n){if(We(n))return VE(n)&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Hr;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Jl(this.storage,this.storageKey));const{data:p,error:y}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:qa});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hr;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:u}=tg(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:f}=n;if(f)throw f;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Hr;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ir())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xb("No code detected.");const{data:$,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=t;if(!l||!f||!u||!p)throw new Hu("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(f);let x=y+_;m&&(x=parseInt(m));const S=x-y;S*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const T=x-_;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,y);const{data:k,error:A}=await this._getUser(l);if(A)throw A;const D={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(i){if(We(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(ZE(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=WD(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Jl(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var u,f,m,p,y;const{data:_,error:x}=l;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return ir()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(We(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:p,nonce:y}=t,_=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Qi}),{data:x,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Wo}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(o){if(await nr(this.storage,`${this.storageKey}-code-verifier`),We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)throw u;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await eM(async o=>(o>0&&await QD(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qi})),(o,l)=>{const u=200*Math.pow(2,o);return l&&$f(l)&&Date.now()+u-i<oc})}catch(i){if(this._debug(n,"error",i),We(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),ir()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ho(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await lc(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:ng()}else if(o&&!o.user&&!o.user){const u=await Ho(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await nr(this.storage,this.storageKey+"-user"),await lc(this.storage,this.storageKey,o)):o.user=ng()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<eg;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${eg}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),$f(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Hr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new jm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Hr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),We(l)){const u={data:null,error:l};return $f(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await nr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await lc(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Mw(o);await lc(this.storage,this.storageKey,l)}else{const o=Mw(n);await lc(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await nr(this.storage,this.storageKey),await nr(this.storage,this.storageKey+"-code-verifier"),await nr(this.storage,this.storageKey+"-user"),this.userStorage&&await nr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${oc}ms, refresh threshold is ${vb} ticks`),o<=vb&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ry)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Jl(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?NM(t.webauthn.credential_response):OM(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:AM(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:jM(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=tg(i.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&ir()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&ir()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(f=>f.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===t),i&&this.jwks_cached_at+HD>o)return i;const{data:l,error:u}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(f=>f.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:S,error:T}=await this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});i=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:m}}=tg(i);n?.allowExpired||oM(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const y=lM(o.alg),_=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,VD(`${f}.${m}`)))throw new Jf("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}};iy.nextInstanceID={};const IM=ny,zM=iy,UM=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:IM,AuthApiError:qE,AuthClient:zM,AuthError:yc,AuthImplicitGrantRedirectError:Hu,AuthInvalidCredentialsError:Uu,AuthInvalidJwtError:Jf,AuthInvalidTokenResponseError:Wo,AuthPKCEGrantCodeExchangeError:xb,AuthRetryableFetchError:Xf,AuthSessionMissingError:Hr,AuthUnknownError:Ya,AuthWeakPasswordError:wb,CustomAuthError:na,GoTrueAdminApi:ny,GoTrueClient:iy,NavigatorLockAcquireTimeoutError:QE,SIGN_OUT_SCOPES:If,isAuthApiError:ZE,isAuthError:We,isAuthImplicitGrantRedirectError:KE,isAuthRetryableFetchError:$f,isAuthSessionMissingError:VE,isAuthWeakPasswordError:GD,lockInternals:Jo,navigatorLock:eT,processLock:yM},Symbol.toStringTag,{value:"Module"})),rT=fd(UM);var zw;function HM(){if(zw)return Du;zw=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.SupabaseAuthClient=void 0;const e=rT;let t=class extends e.AuthClient{constructor(i){super(i)}};return Du.SupabaseAuthClient=t,Du}var Uw;function Hw(){if(Uw)return Yh;Uw=1,Object.defineProperty(Yh,"__esModule",{value:!0});const e=pE,t=xE(),n=OE,i=CD,o=LD(),l=BD(),u=PD(),f=HM();class m{constructor(y,_,x){var S,T,k;this.supabaseUrl=y,this.supabaseKey=_;const A=(0,u.validateSupabaseUrl)(y);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const D=`sb-${A.hostname.split(".")[0]}-auth-token`,$={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:D}),global:o.DEFAULT_GLOBAL_OPTIONS},O=(0,u.applySettingDefaults)(x??{},$);this.storageKey=(S=O.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(T=O.global.headers)!==null&&T!==void 0?T:{},O.accessToken?(this.accessToken=O.accessToken,this.auth=new Proxy({},{get:(C,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=O.auth)!==null&&k!==void 0?k:{},this.headers,O.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),O.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},O.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new t.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:O.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),O.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,_={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,_,x)}channel(y,_={config:{}}){return this.realtime.channel(y,_)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,_;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(_=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,storageKey:k,flowType:A,lock:D,debug:$,throwOnError:O},C,M){const G={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},G),C),storageKey:k,autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,flowType:A,lock:D,debug:$,throwOnError:O,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(H=>H.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,x)=>{this._handleTokenChanged(_,"CLIENT",x?.access_token)})}_handleTokenChanged(y,_,x){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Yh.default=m,Yh}var Gw;function GM(){return Gw||(Gw=1,(function(e){var t=Vs&&Vs.__createBinding||(Object.create?(function(y,_,x,S){S===void 0&&(S=x);var T=Object.getOwnPropertyDescriptor(_,x);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(y,S,T)}):(function(y,_,x,S){S===void 0&&(S=x),y[S]=_[x]})),n=Vs&&Vs.__exportStar||function(y,_){for(var x in y)x!=="default"&&!Object.prototype.hasOwnProperty.call(_,x)&&t(_,y,x)},i=Vs&&Vs.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=i(Hw());n(rT,e);var l=xE();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=pE;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(OE,e);var f=Hw();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(f).default}});const m=(y,_,x)=>new o.default(y,_,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const _=y.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Vs)),Vs}var iT=GM();const sT=ll(iT),FM=S2({__proto__:null,default:sT},[iT]),{PostgrestError:eU,FunctionsHttpError:tU,FunctionsFetchError:nU,FunctionsRelayError:rU,FunctionsError:iU,FunctionRegion:sU,SupabaseClient:aU,createClient:YM,GoTrueAdminApi:oU,GoTrueClient:lU,AuthAdminApi:cU,AuthClient:uU,navigatorLock:dU,NavigatorLockAcquireTimeoutError:hU,lockInternals:fU,processLock:mU,SIGN_OUT_SCOPES:pU,AuthError:gU,AuthApiError:bU,AuthUnknownError:yU,CustomAuthError:vU,AuthSessionMissingError:_U,AuthInvalidTokenResponseError:xU,AuthInvalidCredentialsError:wU,AuthImplicitGrantRedirectError:SU,AuthPKCEGrantCodeExchangeError:EU,AuthRetryableFetchError:TU,AuthWeakPasswordError:kU,AuthInvalidJwtError:AU,isAuthError:jU,isAuthApiError:NU,isAuthSessionMissingError:OU,isAuthImplicitGrantRedirectError:DU,isAuthRetryableFetchError:MU,isAuthWeakPasswordError:CU,RealtimePresence:RU,RealtimeChannel:LU,RealtimeClient:BU,REALTIME_LISTEN_TYPES:PU,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:$U,REALTIME_PRESENCE_LISTEN_EVENTS:IU,REALTIME_SUBSCRIBE_STATES:zU,REALTIME_CHANNEL_STATES:UU}=sT||FM,qt=YM("https://jouhybyquybxbnqztxum.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),Eb={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility"]},yr=pd()(H2((e,t)=>({settings:Eb,syncing:!1,loaded:!1,setSettings:n=>e({settings:n}),setKey:(n,i)=>e({settings:{...t().settings,[n]:i}}),reset:()=>e({settings:Eb}),loadFromServer:async()=>{e({syncing:!0});const{data:{user:n},error:i}=await qt.auth.getUser();if(i||!n){e({syncing:!1,loaded:!1});return}const{data:o,error:l}=await qt.from("user_settings").select("payload").eq("user_id",n.id).single();if(l&&l.code!=="PGRST116"){console.error("loadFromServer(settings) error:",l),e({syncing:!1,loaded:!0});return}if(o?.payload){e({settings:o.payload,syncing:!1,loaded:!0});return}await t().saveToServer(),e({syncing:!1,loaded:!0})},saveToServer:async()=>{if(!t().loaded)return;e({syncing:!0});const{data:{user:n},error:i}=await qt.auth.getUser();if(i||!n){e({syncing:!1});return}const{error:o}=await qt.from("user_settings").upsert({user_id:n.id,payload:t().settings,updated_at:new Date().toISOString()});o&&console.error("saveToServer(settings) error:",o),e({syncing:!1})}}),{name:"settings_v1"}));function Tb(e){const t=jr.indexOf(e);if(t!==-1)return jr[t];const n=mi..indexOf(e);return n!==-1?jr[n]:null}function aT(e){const t=Yr.indexOf(e);if(t!==-1)return Yr[t];const n=mi..indexOf(e);return n!==-1?Yr[n]:null}function Fw(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-white":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function hi(e,t,n){if(t==="stem"){const i=Tb(e);if(!i)return console.warn("Invalid stem:",e),"bg-neutral-700";const o=jr.indexOf(i),l=o>=0?mO[o]:void 0;return Fw(l,n)}else{const i=aT(e);if(!i)return console.warn("Invalid branch:",e),"bg-neutral-700";const o=Yr.indexOf(i),l=o>=0?pO[o]:void 0;return Fw(l,n)}}function Ar(e,t){const n=Tb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const i=Tb(t.stem);if(!i)throw new Error(`getSipSin: invalid stem ${t.stem}`);return yO[n][i]}if(t.branch){const i=aT(t.branch);if(!i)throw new Error(`getSipSin: invalid branch ${t.branch}`);return vO[n][i]}throw new Error("getSipSin: stem or branch required")}const Nm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Om={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function Gu({branch:e,dayStem:t,mode:n="all",mapping:i="classic",variant:o="auto",isUnknownTime:l=!1}){const u=(i==="hgc"?Om:Nm)[e]??[],f=n==="main"?[u[2]]:u,m=o==="white",p=m?"text-white":"text-neutral-800 dark:text-white",y=m?"border-white":"border-neutral-800 dark: border-neutral-200",_=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:f.map((x,S)=>x==="(-)"||l?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap`,children:"(-) ()"},S):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap 
            ${n==="main"||S===2?`jeonggi bg-neutral-500/50 ${_} font-bold`:""}`,children:[x," (",Ar(t,{stem:x}),")"]},S))})}const yd=pd(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),sy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},oT=Object.fromEntries(Object.entries(sy).map(([e,t])=>[t,e])),ay={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},lT=Object.fromEntries(Object.entries(ay).map(([e,t])=>[t,e]));function Yw(e){return Li..includes(e)}function qw(e){return Li..includes(e)}function qM(e){return mi..includes(e)}function ZM(e){return mi..includes(e)}function Zw(e,t,n){return n===""?t==="stem"?sy[e]??e:ay[e]??e:t==="stem"?oT[e]??e:lT[e]??e}function Vw(e){const t=oT[e]??e;return qM(t)?t:""}function VM(e){const t=lT[e]??e;return ZM(t)?t:""}function KM(e){if(Yw(e))return e;const t=sy[e]??e;return Yw(t)?t:""}function WM(e){if(qw(e))return e;const t=ay[e]??e;return qw(t)?t:""}const XM=new Set(["","","","","","","","","",""]),JM=new Set(["","","","","","","","","","","",""]),QM=e=>XM.has(e),eC=e=>JM.has(e);function cc({label:e,gz:t,dayStem:n,settings:i,unseongText:o,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:f=!1,size:m="sm",variant:p="auto",isUnknownTime:y=!1}){const{manualHour:_}=yd(),x=y&&!_,S=t.charAt(0),T=t.charAt(1),k=Zw(S,"stem",i.charType),A=Zw(T,"branch",i.charType),D=Vw(S),$=VM(T),O=Vw(n),C=WM(T),M=KM(n),G=i.showSipSin?Ar(O,{stem:D}):null,H=!u&&i.showSipSin?Ar(O,{branch:$}):null,F=i.thinEum&&QM(S)?"font-thin":"font-bold",W=i.thinEum&&eC(T)?"font-thin":"font-bold",ae={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},Q=!f&&!!i.hiddenStem,Y=i.hiddenStem==="regular"?"main":"all",te=i.hiddenStemMode==="hgc"?"hgc":"classic",re=p==="white",Se=re?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",X=re?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",oe=re?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",J=re?"text-neutral-500":"text-neutral-400",ye=re?"text-neutral-500":"text-neutral-400",{settings:K}=yr(),U=x?`bg-white ${oe}`:`${hi(D,"stem",K)} ${oe}`,B=x?`bg-white ${oe}`:`${hi($,"branch",K)} ${oe}`,q=x?"text-black":K.difficultyMode?K.theme==="light"?"text-neutral-900":"text-black":"text-white",V=x?"text-black":K.difficultyMode?K.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Se}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${X} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[G&&g.jsx("div",{className:`text-[10px] desk:text-xs ${J} text-nowrap`,children:y&&!_?"-":G}),g.jsx("div",{className:`${ae[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${U}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${q} ${F}`,children:x?"-":k})}),g.jsx("div",{className:`${ae[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${B}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${V} ${W}`,children:x?"-":A})}),Q&&g.jsx(Gu,{branch:C,dayStem:M,mode:Y,mapping:te,isUnknownTime:y&&!_&&(e===""||e==="")}),H&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye}`,children:y&&!_?"-":H}),i.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:y&&!_?"-":o||""}),i.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:y&&!_?"-":l||""})]})]})}const tC=new Set(mi.);function nC(e){return Sm.has(e)?e:tC.has(e)?Em[e]:""}function rC({label:e,settings:t,hideBranchSipSin:n=!0}){const i=t.showSipSin,o=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,f=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[i&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),o&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),f&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function iC(){const e=yr(T=>T.settings),[t,n]=R.useState(new Date),[i,o]=R.useState(!0),[l,u]=R.useState("/"),[f,m]=R.useState(!1);R.useEffect(()=>{if(!i)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[i]);const p=ut(t),y=At(t),_=_t(t,l),x=Pi(t,"/"),S=nC(_.charAt(0));return g.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",i?"":"",") ",oC(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>o(!i),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:i?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[f?g.jsx(rC,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(cc,{label:"",gz:x,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:_,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:y,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:p,dayStem:S,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsx("input",{type:"datetime-local",value:sC(t),disabled:i,onChange:T=>{const k=aC(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${f?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:f?" ":" "})]})]})})}function sC(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function aC(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[i,o,l]=t.split("-").map(Number),[u,f]=n.split(":").map(Number),m=new Date(i,o-1,l,u,f);return Number.isNaN(m.getTime())?null:m}function oC(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const rr=[];for(let e=0;e<256;++e)rr.push((e+256).toString(16).slice(1));function lC(e,t=0){return(rr[e[t+0]]+rr[e[t+1]]+rr[e[t+2]]+rr[e[t+3]]+"-"+rr[e[t+4]]+rr[e[t+5]]+"-"+rr[e[t+6]]+rr[e[t+7]]+"-"+rr[e[t+8]]+rr[e[t+9]]+"-"+rr[e[t+10]]+rr[e[t+11]]+rr[e[t+12]]+rr[e[t+13]]+rr[e[t+14]]+rr[e[t+15]]).toLowerCase()}let rg;const cC=new Uint8Array(16);function uC(){if(!rg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");rg=crypto.getRandomValues.bind(crypto)}return rg(cC)}const dC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kw={randomUUID:dC};function cT(e,t,n){if(Kw.randomUUID&&!e)return Kw.randomUUID();e=e||{};const i=e.random??e.rng?.()??uC();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,lC(i)}var Fu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var hC=Fu.exports,Ww;function fC(){return Ww||(Ww=1,(function(e,t){(function(n,i){i(t)})(hC,(function(n){var i="1.9.4";function o(a){var d,b,E,j;for(b=1,E=arguments.length;b<E;b++){j=arguments[b];for(d in j)a[d]=j[d]}return a}var l=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function u(a,d){var b=Array.prototype.slice;if(a.bind)return a.bind.apply(a,b.call(arguments,1));var E=b.call(arguments,2);return function(){return a.apply(d,E.length?E.concat(b.call(arguments)):arguments)}}var f=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function p(a,d,b){var E,j,I,ee;return ee=function(){E=!1,j&&(I.apply(b,j),j=!1)},I=function(){E?j=arguments:(a.apply(b,arguments),setTimeout(ee,d),E=!0)},I}function y(a,d,b){var E=d[1],j=d[0],I=E-j;return a===E&&b?a:((a-j)%I+I)%I+j}function _(){return!1}function x(a,d){if(d===!1)return a;var b=Math.pow(10,d===void 0?6:d);return Math.round(a*b)/b}function S(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return S(a).split(/\s+/)}function k(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var b in d)a.options[b]=d[b];return a.options}function A(a,d,b){var E=[];for(var j in a)E.push(encodeURIComponent(b?j.toUpperCase():j)+"="+encodeURIComponent(a[j]));return(!d||d.indexOf("?")===-1?"?":"&")+E.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function $(a,d){return a.replace(D,function(b,E){var j=d[E];if(j===void 0)throw new Error("No value provided for variable "+b);return typeof j=="function"&&(j=j(d)),j})}var O=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function C(a,d){for(var b=0;b<a.length;b++)if(a[b]===d)return b;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var H=0;function F(a){var d=+new Date,b=Math.max(0,16-(d-H));return H=d+b,window.setTimeout(a,b)}var W=window.requestAnimationFrame||G("RequestAnimationFrame")||F,ae=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Q(a,d,b){if(b&&W===F)a.call(d);else return W.call(window,u(a,d))}function Y(a){a&&ae.call(window,a)}var te={__proto__:null,extend:o,create:l,bind:u,get lastId(){return f},stamp:m,throttle:p,wrapNum:y,falseFn:_,formatNum:x,trim:S,splitWords:T,setOptions:k,getParamString:A,template:$,isArray:O,indexOf:C,emptyImageUrl:M,requestFn:W,cancelFn:ae,requestAnimFrame:Q,cancelAnimFrame:Y};function re(){}re.extend=function(a){var d=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=d.__super__=this.prototype,E=l(b);E.constructor=d,d.prototype=E;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(d[j]=this[j]);return a.statics&&o(d,a.statics),a.includes&&(Se(a.includes),o.apply(null,[E].concat(a.includes))),o(E,a),delete E.statics,delete E.includes,E.options&&(E.options=b.options?l(b.options):{},o(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,ee=E._initHooks.length;I<ee;I++)E._initHooks[I].call(this)}},d},re.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},re.mergeOptions=function(a){return o(this.prototype.options,a),this},re.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),b=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function Se(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=O(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,b)}return this},off:function(a,d,b){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],d);else{a=T(a);for(var j=arguments.length===1,I=0,ee=a.length;I<ee;I++)j?this._off(a[I]):this._off(a[I],d,b)}return this},_on:function(a,d,b,E){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,b)===!1){b===this&&(b=void 0);var j={fn:d,ctx:b};E&&(j.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(j)}},_off:function(a,d,b){var E,j,I;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(j=0,I=E.length;j<I;j++)E[j].fn=_;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var ee=this._listens(a,d,b);if(ee!==!1){var de=E[ee];this._firingCount&&(de.fn=_,this._events[a]=E=E.slice()),E.splice(ee,1)}}},fire:function(a,d,b){if(!this.listens(a,b))return this;var E=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var j=this._events[a];if(j){this._firingCount=this._firingCount+1||1;for(var I=0,ee=j.length;I<ee;I++){var de=j[I],ve=de.fn;de.once&&this.off(a,ve,de.ctx),ve.call(de.ctx||this,E)}this._firingCount--}}return b&&this._propagateEvent(E),this},listens:function(a,d,b,E){typeof a!="string"&&console.warn('"string" type argument expected');var j=d;typeof d!="function"&&(E=!!d,j=void 0,b=void 0);var I=this._events&&this._events[a];if(I&&I.length&&this._listens(a,j,b)!==!1)return!0;if(E){for(var ee in this._eventParents)if(this._eventParents[ee].listens(a,d,b,E))return!0}return!1},_listens:function(a,d,b){if(!this._events)return!1;var E=this._events[a]||[];if(!d)return!!E.length;b===this&&(b=void 0);for(var j=0,I=E.length;j<I;j++)if(E[j].fn===d&&E[j].ctx===b)return j;return!1},once:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d,!0);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,b,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var oe=re.extend(X);function J(a,d,b){this.x=b?Math.round(a):a,this.y=b?Math.round(d):d}var ye=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(a){return this.clone()._add(K(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(K(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new J(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new J(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(a){a=K(a);var d=a.x-this.x,b=a.y-this.y;return Math.sqrt(d*d+b*b)},equals:function(a){return a=K(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=K(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function K(a,d,b){return a instanceof J?a:O(a)?new J(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new J(a.x,a.y):new J(a,d,b)}function U(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}U.prototype={extend:function(a){var d,b;if(!a)return this;if(a instanceof J||typeof a[0]=="number"||"x"in a)d=b=K(a);else if(a=B(a),d=a.min,b=a.max,!d||!b)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=b.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(a){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,b;return typeof a[0]=="number"||a instanceof J?a=K(a):a=B(a),a instanceof U?(d=a.min,b=a.max):d=b=a,d.x>=this.min.x&&b.x<=this.max.x&&d.y>=this.min.y&&b.y<=this.max.y},intersects:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,I=j.x>=d.x&&E.x<=b.x,ee=j.y>=d.y&&E.y<=b.y;return I&&ee},overlaps:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,I=j.x>d.x&&E.x<b.x,ee=j.y>d.y&&E.y<b.y;return I&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,b=this.max,E=Math.abs(d.x-b.x)*a,j=Math.abs(d.y-b.y)*a;return B(K(d.x-E,d.y-j),K(b.x+E,b.y+j))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,d){return!a||a instanceof U?a:new U(a,d)}function q(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}q.prototype={extend:function(a){var d=this._southWest,b=this._northEast,E,j;if(a instanceof P)E=a,j=a;else if(a instanceof q){if(E=a._southWest,j=a._northEast,!E||!j)return this}else return a?this.extend(Z(a)||V(a)):this;return!d&&!b?(this._southWest=new P(E.lat,E.lng),this._northEast=new P(j.lat,j.lng)):(d.lat=Math.min(E.lat,d.lat),d.lng=Math.min(E.lng,d.lng),b.lat=Math.max(j.lat,b.lat),b.lng=Math.max(j.lng,b.lng)),this},pad:function(a){var d=this._southWest,b=this._northEast,E=Math.abs(d.lat-b.lat)*a,j=Math.abs(d.lng-b.lng)*a;return new q(new P(d.lat-E,d.lng-j),new P(b.lat+E,b.lng+j))},getCenter:function(){return new P((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new P(this.getNorth(),this.getWest())},getSouthEast:function(){return new P(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof P||"lat"in a?a=Z(a):a=V(a);var d=this._southWest,b=this._northEast,E,j;return a instanceof q?(E=a.getSouthWest(),j=a.getNorthEast()):E=j=a,E.lat>=d.lat&&j.lat<=b.lat&&E.lng>=d.lng&&j.lng<=b.lng},intersects:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>=d.lat&&E.lat<=b.lat,ee=j.lng>=d.lng&&E.lng<=b.lng;return I&&ee},overlaps:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>d.lat&&E.lat<b.lat,ee=j.lng>d.lng&&E.lng<b.lng;return I&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=V(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function V(a,d){return a instanceof q?a:new q(a,d)}function P(a,d,b){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,b!==void 0&&(this.alt=+b)}P.prototype={equals:function(a,d){if(!a)return!1;a=Z(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return me.distance(this,Z(a))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,b=d/Math.cos(Math.PI/180*this.lat);return V([this.lat-d,this.lng-b],[this.lat+d,this.lng+b])},clone:function(){return new P(this.lat,this.lng,this.alt)}};function Z(a,d,b){return a instanceof P?a:O(a)&&typeof a[0]!="object"?a.length===3?new P(a[0],a[1],a[2]):a.length===2?new P(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new P(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new P(a,d,b)}var ie={latLngToPoint:function(a,d){var b=this.projection.project(a),E=this.scale(d);return this.transformation._transform(b,E)},pointToLatLng:function(a,d){var b=this.scale(d),E=this.transformation.untransform(a,b);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,b=this.scale(a),E=this.transformation.transform(d.min,b),j=this.transformation.transform(d.max,b);return new U(E,j)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?y(a.lng,this.wrapLng,!0):a.lng,b=this.wrapLat?y(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new P(b,d,E)},wrapLatLngBounds:function(a){var d=a.getCenter(),b=this.wrapLatLng(d),E=d.lat-b.lat,j=d.lng-b.lng;if(E===0&&j===0)return a;var I=a.getSouthWest(),ee=a.getNorthEast(),de=new P(I.lat-E,I.lng-j),ve=new P(ee.lat-E,ee.lng-j);return new q(de,ve)}},me=o({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var b=Math.PI/180,E=a.lat*b,j=d.lat*b,I=Math.sin((d.lat-a.lat)*b/2),ee=Math.sin((d.lng-a.lng)*b/2),de=I*I+Math.cos(E)*Math.cos(j)*ee*ee,ve=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*ve}}),ce=6378137,xe={R:ce,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,b=this.MAX_LATITUDE,E=Math.max(Math.min(b,a.lat),-b),j=Math.sin(E*d);return new J(this.R*a.lng*d,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(a){var d=180/Math.PI;return new P((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=ce*Math.PI;return new U([-a,-a],[a,a])})()};function ke(a,d,b,E){if(O(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=b,this._d=E}ke.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new J((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function je(a,d,b,E){return new ke(a,d,b,E)}var Me=o({},me,{code:"EPSG:3857",projection:xe,transformation:(function(){var a=.5/(Math.PI*xe.R);return je(a,.5,-a,.5)})()}),Ee=o({},Me,{code:"EPSG:900913"});function Pe(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ce(a,d){var b="",E,j,I,ee,de,ve;for(E=0,I=a.length;E<I;E++){for(de=a[E],j=0,ee=de.length;j<ee;j++)ve=de[j],b+=(j?"L":"M")+ve.x+" "+ve.y;b+=d?Ve.svg?"z":"x":""}return b||"M0 0"}var Le=document.documentElement.style,Ue="ActiveXObject"in window,fe=Ue&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),le=$n("webkit"),he=$n("android"),$e=$n("android 2")||$n("android 3"),Ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=he&&$n("Google")&&Ie<537&&!("AudioNode"in window),st=!!window.opera,et=!Be&&$n("chrome"),Zt=$n("gecko")&&!le&&!st&&!Ue,En=!et&&$n("safari"),Tn=$n("phantom"),or="OTransition"in Le,vr=navigator.platform.indexOf("Win")===0,dn=Ue&&"transition"in Le,Mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$e,bn="MozPerspective"in Le,hn=!window.L_DISABLE_3D&&(dn||Mt||bn)&&!or&&!Tn,qr=typeof orientation<"u"||$n("mobile"),ra=qr&&le,zi=qr&&Mt,kn=!window.PointerEvent&&window.MSPointerEvent,Dn=!!(window.PointerEvent||kn),os="ontouchstart"in window||!!window.TouchEvent,Nr=!window.L_NO_TOUCH&&(os||Dn),lr=qr&&st,pi=qr&&Zt,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qa=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,d),window.removeEventListener("testPassiveEventSupport",_,d)}catch{}return a})(),eo=(function(){return!!document.createElement("canvas").getContext})(),Ui=!!(document.createElementNS&&Pe("svg").createSVGRect),to=!!Ui&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sa=!Ui&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),no=navigator.platform.indexOf("Mac")===0,ro=navigator.platform.indexOf("Linux")===0;function $n(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ve={ie:Ue,ielt9:fe,edge:Be,webkit:le,android:he,android23:$e,androidStock:He,opera:st,chrome:et,gecko:Zt,safari:En,phantom:Tn,opera12:or,win:vr,ie3d:dn,webkit3d:Mt,gecko3d:bn,any3d:hn,mobile:qr,mobileWebkit:ra,mobileWebkit3d:zi,msPointer:kn,pointer:Dn,touch:Nr,touchNative:os,mobileOpera:lr,mobileGecko:pi,retina:ia,passiveEvents:Qa,canvas:eo,svg:Ui,vml:sa,inlineSvg:to,mac:no,linux:ro},ks=Ve.msPointer?"MSPointerDown":"pointerdown",Or=Ve.msPointer?"MSPointerMove":"pointermove",cr=Ve.msPointer?"MSPointerUp":"pointerup",sn=Ve.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:ks,touchmove:Or,touchend:cr,touchcancel:sn},Zr={touchstart:In,touchmove:mt,touchend:mt,touchcancel:mt},gi={},pe=!1;function Ye(a,d,b){return d==="touchstart"&&xt(),Zr[d]?(b=Zr[d].bind(this,b),a.addEventListener(An[d],b,!1),b):(console.warn("wrong event specified:",d),_)}function lt(a,d,b){if(!An[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(An[d],b,!1)}function pt(a){gi[a.pointerId]=a}function tt(a){gi[a.pointerId]&&(gi[a.pointerId]=a)}function dt(a){delete gi[a.pointerId]}function xt(){pe||(document.addEventListener(ks,pt,!0),document.addEventListener(Or,tt,!0),document.addEventListener(cr,dt,!0),document.addEventListener(sn,dt,!0),pe=!0)}function mt(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var b in gi)d.touches.push(gi[b]);d.changedTouches=[d],a(d)}}function In(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&yn(d),mt(a,d)}function wt(a){var d={},b,E;for(E in a)b=a[E],d[E]=b&&b.bind?b.bind(a):b;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var aa=200;function io(a,d){a.addEventListener("dblclick",d);var b=0,E;function j(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var ee=fo(I);if(!(ee.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!ee.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var de=Date.now();de-b<=aa?(E++,E===2&&d(wt(I))):E=1,b=de}}}return a.addEventListener("click",j),{dblclick:d,simDblclick:j}}function bi(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Xn=lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),As=lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=As==="webkitTransition"||As==="OTransition"?As+"End":"transitionend";function ao(a){return typeof a=="string"?document.getElementById(a):a}function oo(a,d){var b=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!b||b==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);b=E?E[d]:null}return b==="auto"?null:b}function gt(a,d,b){var E=document.createElement(a);return E.className=d||"",b&&b.appendChild(E),E}function It(a){var d=a.parentNode;d&&d.removeChild(a)}function Dr(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function zn(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function js(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Mc(a,d){if(a.classList!==void 0)return a.classList.contains(d);var b=dl(a);return b.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(b)}function at(a,d){if(a.classList!==void 0)for(var b=T(d),E=0,j=b.length;E<j;E++)a.classList.add(b[E]);else if(!Mc(a,d)){var I=dl(a);oa(a,(I?I+" ":"")+d)}}function an(a,d){a.classList!==void 0?a.classList.remove(d):oa(a,S((" "+dl(a)+" ").replace(" "+d+" "," ")))}function oa(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function dl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function en(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Cc(a,d)}function Cc(a,d){var b=!1,E="DXImageTransform.Microsoft.Alpha";try{b=a.filters.item(E)}catch{if(d===1)return}d=Math.round(d*100),b?(b.Enabled=d!==100,b.Opacity=d):a.style.filter+=" progid:"+E+"(opacity="+d+")"}function lo(a){for(var d=document.documentElement.style,b=0;b<a.length;b++)if(a[b]in d)return a[b];return!1}function Hi(a,d,b){var E=d||new J(0,0);a.style[Xn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(b?" scale("+b+")":"")}function Ft(a,d){a._leaflet_pos=d,Ve.any3d?Hi(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ls(a){return a._leaflet_pos||new J(0,0)}var la,yi,Rc;if("onselectstart"in document)la=function(){it(window,"selectstart",yn)},yi=function(){Lt(window,"selectstart",yn)};else{var ca=lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ca){var a=document.documentElement.style;Rc=a[ca],a[ca]="none"}},yi=function(){ca&&(document.documentElement.style[ca]=Rc,Rc=void 0)}}function hl(){it(window,"dragstart",yn)}function co(){Lt(window,"dragstart",yn)}var fl,Lc;function ua(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Mr(),fl=a,Lc=a.style.outlineStyle,a.style.outlineStyle="none",it(window,"keydown",Mr))}function Mr(){fl&&(fl.style.outlineStyle=Lc,fl=void 0,Lc=void 0,Lt(window,"keydown",Mr))}function ml(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function uo(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var da={__proto__:null,TRANSFORM:Xn,TRANSITION:As,TRANSITION_END:so,get:ao,getStyle:oo,create:gt,remove:It,empty:Dr,toFront:zn,toBack:js,hasClass:Mc,addClass:at,removeClass:an,setClass:oa,getClass:dl,setOpacity:en,testProp:lo,setTransform:Hi,setPosition:Ft,getPosition:ls,get disableTextSelection(){return la},get enableTextSelection(){return yi},disableImageDrag:hl,enableImageDrag:co,preventOutline:ua,restoreOutline:Mr,getSizedParentNode:ml,getScale:uo};function it(a,d,b,E){if(d&&typeof d=="object")for(var j in d)Kr(a,j,d[j],b);else{d=T(d);for(var I=0,ee=d.length;I<ee;I++)Kr(a,d[I],b,E)}return this}var Vr="_leaflet_events";function Lt(a,d,b,E){if(arguments.length===1)Bc(a),delete a[Vr];else if(d&&typeof d=="object")for(var j in d)ho(a,j,d[j],b);else if(d=T(d),arguments.length===2)Bc(a,function(de){return C(d,de)!==-1});else for(var I=0,ee=d.length;I<ee;I++)ho(a,d[I],b,E);return this}function Bc(a,d){for(var b in a[Vr]){var E=b.split(/\d/)[0];(!d||d(E))&&ho(a,E,null,null,b)}}var Ns={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Kr(a,d,b,E){var j=d+m(b)+(E?"_"+m(E):"");if(a[Vr]&&a[Vr][j])return this;var I=function(de){return b.call(E||a,de||window.event)},ee=I;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?I=Ye(a,d,I):Ve.touch&&d==="dblclick"?I=io(a,I):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ns[d]||d,I,Ve.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(I=function(de){de=de||window.event,Gi(a,de)&&ee(de)},a.addEventListener(Ns[d],I,!1)):a.addEventListener(d,ee,!1):a.attachEvent("on"+d,I),a[Vr]=a[Vr]||{},a[Vr][j]=I}function ho(a,d,b,E,j){j=j||d+m(b)+(E?"_"+m(E):"");var I=a[Vr]&&a[Vr][j];if(!I)return this;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?lt(a,d,I):Ve.touch&&d==="dblclick"?bi(a,I):"removeEventListener"in a?a.removeEventListener(Ns[d]||d,I,!1):a.detachEvent("on"+d,I),a[Vr][j]=null}function Wr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function vi(a){return Kr(a,"wheel",Wr),this}function Os(a){return it(a,"mousedown touchstart dblclick contextmenu",Wr),a._leaflet_disable_click=!0,this}function yn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function cs(a){return yn(a),Wr(a),this}function fo(a){if(a.composedPath)return a.composedPath();for(var d=[],b=a.target;b;)d.push(b),b=b.parentNode;return d}function mo(a,d){if(!d)return new J(a.clientX,a.clientY);var b=uo(d),E=b.boundingClientRect;return new J((a.clientX-E.left)/b.x-d.clientLeft,(a.clientY-E.top)/b.y-d.clientTop)}var kd=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jn(a){return Ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/kd:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Gi(a,d){var b=d.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch{return!1}return b!==a}var pl={__proto__:null,on:it,off:Lt,stopPropagation:Wr,disableScrollPropagation:vi,disableClickPropagation:Os,preventDefault:yn,stop:cs,getPropagationPath:fo,getMousePosition:mo,getWheelDelta:Jn,isExternalTarget:Gi,addListener:it,removeListener:Lt},ha=oe.extend({run:function(a,d,b,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ls(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,b=this._duration*1e3;d<b?this._runFrame(this._easeOut(d/b),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var b=this._startPos.add(this._offset.multiplyBy(a));d&&b._round(),Ft(this._el,b),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),St=oe.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=k(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Z(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=As&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,b){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(Z(a),d,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=o({animate:b.animate},b.zoom),b.pan=o({animate:b.animate,duration:b.duration},b.pan));var E=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,b.zoom):this._tryAnimatedPan(a,b.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,b.pan&&b.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,b){var E=this.getZoomScale(d),j=this.getSize().divideBy(2),I=a instanceof J?a:this.latLngToContainerPoint(a),ee=I.subtract(j).multiplyBy(1-1/E),de=this.containerPointToLatLng(j.add(ee));return this.setView(de,d,{zoom:b})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():V(a);var b=K(d.paddingTopLeft||d.padding||[0,0]),E=K(d.paddingBottomRight||d.padding||[0,0]),j=this.getBoundsZoom(a,!1,b.add(E));if(j=typeof d.maxZoom=="number"?Math.min(d.maxZoom,j):j,j===1/0)return{center:a.getCenter(),zoom:j};var I=E.subtract(b).divideBy(2),ee=this.project(a.getSouthWest(),j),de=this.project(a.getNorthEast(),j),ve=this.unproject(ee.add(de).divideBy(2).add(I),j);return{center:ve,zoom:j}},fitBounds:function(a,d){if(a=V(a),!a.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(a,d);return this.setView(b.center,b.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=K(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,b,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,b){if(b=b||{},b.animate===!1||!Ve.any3d)return this.setView(a,d,b);this._stop();var E=this.project(this.getCenter()),j=this.project(a),I=this.getSize(),ee=this._zoom;a=Z(a),d=d===void 0?ee:d;var de=Math.max(I.x,I.y),ve=de*this.getZoomScale(ee,d),Oe=j.distanceTo(E)||1,Ge=1.42,Xe=Ge*Ge;function ht(fn){var Zi=fn?-1:1,Rs=fn?ve:de,Xc=ve*ve-de*de+Zi*Xe*Xe*Oe*Oe,Oo=2*Rs*Xe*Oe,Do=Xc/Oo,ys=Math.sqrt(Do*Do+1)-Do,Vi=ys<1e-9?-18:Math.log(ys);return Vi}function Un(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function vn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function xr(fn){return Un(fn)/vn(fn)}var jt=ht(0);function Nt(fn){return de*(vn(jt)/vn(jt+Ge*fn))}function bt(fn){return de*(vn(jt)*xr(jt+Ge*fn)-Un(jt))/Xe}function gs(fn){return 1-Math.pow(1-fn,1.5)}var Br=Date.now(),Nl=(ht(1)-jt)/Ge,bs=b.duration?1e3*b.duration:1e3*Nl*.8;function Wc(){var fn=(Date.now()-Br)/bs,Zi=gs(fn)*Nl;fn<=1?(this._flyToFrame=Q(Wc,this),this._move(this.unproject(E.add(j.subtract(E).multiplyBy(bt(Zi)/Oe)),ee),this.getScaleZoom(de/Nt(Zi),ee),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),Wc.call(this),this},flyToBounds:function(a,d){var b=this._getBoundsCenterZoom(a,d);return this.flyTo(b.center,b.zoom,d)},setMaxBounds:function(a){return a=V(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var b=this.getCenter(),E=this._limitCenter(b,this._zoom,V(a));return b.equals(E)||this.panTo(E,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var b=K(d.paddingTopLeft||d.padding||[0,0]),E=K(d.paddingBottomRight||d.padding||[0,0]),j=this.project(this.getCenter()),I=this.project(a),ee=this.getPixelBounds(),de=B([ee.min.add(b),ee.max.subtract(E)]),ve=de.getSize();if(!de.contains(I)){this._enforcingBounds=!0;var Oe=I.subtract(de.getCenter()),Ge=de.extend(I).getSize().subtract(ve);j.x+=Oe.x<0?-Ge.x:Ge.x,j.y+=Oe.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(j),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),E=d.divideBy(2).round(),j=b.divideBy(2).round(),I=E.subtract(j);return!I.x&&!I.y?this:(a.animate&&a.pan?this.panBy(I):(a.pan&&this._rawPanBy(I),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),b=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,b,a):navigator.geolocation.getCurrentPosition(d,b,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,b=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,b=a.coords.longitude,E=new P(d,b),j=E.toBounds(a.coords.accuracy*2),I=this._locateOptions;if(I.setView){var ee=this.getBoundsZoom(j);this.setView(E,I.maxZoom?Math.min(ee,I.maxZoom):ee)}var de={latlng:E,bounds:j,timestamp:a.timestamp};for(var ve in a.coords)typeof a.coords[ve]=="number"&&(de[ve]=a.coords[ve]);this.fire("locationfound",de)}},addHandler:function(a,d){if(!d)return this;var b=this[a]=new d(this);return this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)It(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var b="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=gt("div",b,d||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),b=this.unproject(a.getTopRight());return new q(d,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,b){a=V(a),b=K(b||[0,0]);var E=this.getZoom()||0,j=this.getMinZoom(),I=this.getMaxZoom(),ee=a.getNorthWest(),de=a.getSouthEast(),ve=this.getSize().subtract(b),Oe=B(this.project(de,E),this.project(ee,E)).getSize(),Ge=Ve.any3d?this.options.zoomSnap:1,Xe=ve.x/Oe.x,ht=ve.y/Oe.y,Un=d?Math.max(Xe,ht):Math.min(Xe,ht);return E=this.getScaleZoom(Un,E),Ge&&(E=Math.round(E/(Ge/100))*(Ge/100),E=d?Math.ceil(E/Ge)*Ge:Math.floor(E/Ge)*Ge),Math.max(j,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var b=this._getTopLeftPoint(a,d);return new U(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var b=this.options.crs;return d=d===void 0?this._zoom:d,b.scale(a)/b.scale(d)},getScaleZoom:function(a,d){var b=this.options.crs;d=d===void 0?this._zoom:d;var E=b.zoom(a*b.scale(d));return isNaN(E)?1/0:E},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Z(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(K(a),d)},layerPointToLatLng:function(a){var d=K(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(Z(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Z(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(V(a))},distance:function(a,d){return this.options.crs.distance(Z(a),Z(d))},containerPointToLayerPoint:function(a){return K(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return K(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(K(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(a)))},mouseEventToContainerPoint:function(a){return mo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=ao(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,at(a,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=oo(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ft(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(a.markerPane,"leaflet-zoom-hide"),at(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,b){Ft(this._mapPane,new J(0,0));var E=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var j=this._zoom!==d;this._moveStart(j,b)._move(a,d)._moveEnd(j),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,b,E){d===void 0&&(d=this._zoom);var j=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?b&&b.pinch&&this.fire("zoom",b):((j||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ft(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var d=a?Lt:it;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var b=[],E,j=d==="mouseout"||d==="mouseover",I=a.target||a.srcElement,ee=!1;I;){if(E=this._targets[m(I)],E&&(d==="click"||d==="preclick")&&this._draggableMoved(E)){ee=!0;break}if(E&&E.listens(d,!0)&&(j&&!Gi(I,a)||(b.push(E),j))||I===this._container)break;I=I.parentNode}return!b.length&&!ee&&!j&&this.listens(d,!0)&&(b=[this]),b},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var b=a.type;b==="mousedown"&&ua(d),this._fireDOMEvent(a,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,b){if(a.type==="click"){var E=o({},a);E.type="preclick",this._fireDOMEvent(E,E.type,b)}var j=this._findEventTargets(a,d);if(b){for(var I=[],ee=0;ee<b.length;ee++)b[ee].listens(d,!0)&&I.push(b[ee]);j=I.concat(j)}if(j.length){d==="contextmenu"&&yn(a);var de=j[0],ve={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Oe=de.getLatLng&&(!de._radius||de._radius<=10);ve.containerPoint=Oe?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(a),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Oe?de.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(ee=0;ee<j.length;ee++)if(j[ee].fire(d,ve,!0),ve.originalEvent._stopped||j[ee].options.bubblingMouseEvents===!1&&C(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ls(this._mapPane)||new J(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var b=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var b=this.getSize()._divideBy(2);return this.project(a,d)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return this.project(a,d)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return B([this.project(a.getSouthWest(),d)._subtract(E),this.project(a.getNorthWest(),d)._subtract(E),this.project(a.getSouthEast(),d)._subtract(E),this.project(a.getNorthEast(),d)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,b){if(!b)return a;var E=this.project(a,d),j=this.getSize().divideBy(2),I=new U(E.subtract(j),E.add(j)),ee=this._getBoundsOffset(I,b,d);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?a:this.unproject(E.add(ee),d)},_limitOffset:function(a,d){if(!d)return a;var b=this.getPixelBounds(),E=new U(b.min.add(a),b.max.add(a));return a.add(this._getBoundsOffset(E,d))},_getBoundsOffset:function(a,d,b){var E=B(this.project(d.getNorthEast(),b),this.project(d.getSouthWest(),b)),j=E.min.subtract(a.min),I=E.max.subtract(a.max),ee=this._rebound(j.x,-I.x),de=this._rebound(j.y,-I.y);return new J(ee,de)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),b=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(d,Math.min(b,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var b=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,d),!0)},_createAnimProxy:function(){var a=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var b=Xn,E=this._proxy.style[b];Hi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),E===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();Hi(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(d),j=this._getCenterOffset(a)._divideBy(1-1/E);return b.animate!==!0&&!this.getSize().contains(j)?!1:(Q(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,b,E){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Pc(a,d){return new St(a,d)}var _r=re.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),b=this.getPosition(),E=a._controlCorners[b];return at(d,"leaflet-control"),b.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fi=function(a){return new _r(a)};St.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",b=this._controlContainer=gt("div",d+"control-container",this._container);function E(j,I){var ee=d+j+" "+d+I;a[j+I]=gt("div",ee,b)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)It(this._controlCorners[a]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=_r.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,b,E){return b<E?-1:E<b?1:0}},initialize:function(a,d,b){k(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in d)this._addLayer(d[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return _r.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=gt("div",a),b=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Os(d),vi(d);var E=this._section=gt("section",a+"-list");b&&(this._map.on("click",this.collapse,this),it(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=gt("a",a+"-toggle",d);j.href="#",j.title="Layers",j.setAttribute("role","button"),it(j,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){yn(I),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=gt("div",a+"-base",E),this._separator=gt("div",a+"-separator",E),this._overlaysList=gt("div",a+"-overlays",E),d.appendChild(E)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,b){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:b}),this.options.sortLayers&&this._layers.sort(u(function(E,j){return this.options.sortFunction(E.layer,j.layer,E.name,j.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dr(this._baseLayersList),Dr(this._overlaysList),this._layerControlInputs=[];var a,d,b,E,j=0;for(b=0;b<this._layers.length;b++)E=this._layers[b],this._addItem(E),d=d||E.overlay,a=a||!E.overlay,j+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&j>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(m(a.target)),b=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;b&&this._map.fire(b,d)},_createRadioElement:function(a,d){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=b,E.firstChild},_addItem:function(a){var d=document.createElement("label"),b=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=b):E=this._createRadioElement("leaflet-base-layers_"+m(this),b),this._layerControlInputs.push(E),E.layerId=m(a.layer),it(E,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+a.name;var I=document.createElement("span");d.appendChild(I),I.appendChild(E),I.appendChild(j);var ee=a.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,b,E=[],j=[];this._handlingClick=!0;for(var I=a.length-1;I>=0;I--)d=a[I],b=this._getLayer(d.layerId).layer,d.checked?E.push(b):d.checked||j.push(b);for(I=0;I<j.length;I++)this._map.hasLayer(j[I])&&this._map.removeLayer(j[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,b,E=this._map.getZoom(),j=a.length-1;j>=0;j--)d=a[j],b=this._getLayer(d.layerId).layer,d.disabled=b.options.minZoom!==void 0&&E<b.options.minZoom||b.options.maxZoom!==void 0&&E>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,it(a,"click",yn),this.expand();var d=this;setTimeout(function(){Lt(a,"click",yn),d._preventClick=!1})}}),Ad=function(a,d,b){return new po(a,d,b)},$c=_r.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",b=gt("div",d+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,d+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,d+"-out",b,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,b,E,j){var I=gt("a",b,E);return I.innerHTML=a,I.href="#",I.title=d,I.setAttribute("role","button"),I.setAttribute("aria-label",d),Os(I),it(I,"click",cs),it(I,"click",j,this),it(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";an(this._zoomInButton,d),an(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(at(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(at(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $c,this.addControl(this.zoomControl))});var Qm=function(a){return new $c(a)},jd=_r.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",b=gt("div",d),E=this.options;return this._addScales(E,d+"-line",b),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,b){a.metric&&(this._mScale=gt("div",d,b)),a.imperial&&(this._iScale=gt("div",d,b))},_update:function(){var a=this._map,d=a.getSize().y/2,b=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(b)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),b=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,b,d/a)},_updateImperial:function(a){var d=a*3.2808399,b,E,j;d>5280?(b=d/5280,E=this._getRoundNum(b),this._updateScale(this._iScale,E+" mi",E/b)):(j=this._getRoundNum(d),this._updateScale(this._iScale,j+" ft",j/d))},_updateScale:function(a,d,b){a.style.width=Math.round(this.options.maxWidth*b)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),b=a/d;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,d*b}}),Ic=function(a){return new jd(a)},ep='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zc=_r.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?ep+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Os(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var b=[];this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new zc().addTo(this)});var tp=function(a){return new zc(a)};_r.Layers=po,_r.Zoom=$c,_r.Scale=jd,_r.Attribution=zc,Fi.layers=Ad,Fi.zoom=Qm,Fi.scale=Ic,Fi.attribution=tp;var _i=re.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_i.addTo=function(a,d){return a.addHandler(d,this),this};var np={Events:X},Uc=Ve.touch?"touchstart mousedown":"mousedown",us=oe.extend({options:{clickTolerance:3},initialize:function(a,d,b,E){k(this,E),this._element=a,this._dragStartTarget=d||a,this._preventOutline=b},enable:function(){this._enabled||(it(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(us._dragging===this&&this.finishDrag(!0),Lt(this._dragStartTarget,Uc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Mc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){us._dragging===this&&this.finishDrag();return}if(!(us._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(us._dragging=this,this._preventOutline&&ua(this._element),hl(),la(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,b=ml(this._element);this._startPoint=new J(d.clientX,d.clientY),this._startPos=ls(this._element),this._parentScale=uo(b);var E=a.type==="mousedown";it(document,E?"mousemove":"touchmove",this._onMove,this),it(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,b=new J(d.clientX,d.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,yn(a),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ft(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Lt(document,"mousemove touchmove",this._onMove,this),Lt(document,"mouseup touchend touchcancel",this._onUp,this),co(),yi();var d=this._moved&&this._moving;this._moving=!1,us._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Nd(a,d,b){var E,j=[1,4,2,8],I,ee,de,ve,Oe,Ge,Xe,ht;for(I=0,Ge=a.length;I<Ge;I++)a[I]._code=Ds(a[I],d);for(de=0;de<4;de++){for(Xe=j[de],E=[],I=0,Ge=a.length,ee=Ge-1;I<Ge;ee=I++)ve=a[I],Oe=a[ee],ve._code&Xe?Oe._code&Xe||(ht=gl(Oe,ve,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)):(Oe._code&Xe&&(ht=gl(Oe,ve,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)),E.push(ve));a=E}return a}function Od(a,d){var b,E,j,I,ee,de,ve,Oe,Ge;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xe=Z([0,0]),ht=V(a),Un=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());Un<1700&&(Xe=Hc(a));var vn=a.length,xr=[];for(b=0;b<vn;b++){var jt=Z(a[b]);xr.push(d.project(Z([jt.lat-Xe.lat,jt.lng-Xe.lng])))}for(de=ve=Oe=0,b=0,E=vn-1;b<vn;E=b++)j=xr[b],I=xr[E],ee=j.y*I.x-I.y*j.x,ve+=(j.x+I.x)*ee,Oe+=(j.y+I.y)*ee,de+=ee*3;de===0?Ge=xr[0]:Ge=[ve/de,Oe/de];var Nt=d.unproject(K(Ge));return Z([Nt.lat+Xe.lat,Nt.lng+Xe.lng])}function Hc(a){for(var d=0,b=0,E=0,j=0;j<a.length;j++){var I=Z(a[j]);d+=I.lat,b+=I.lng,E++}return Z([d/E,b/E])}var Gc={__proto__:null,clipPolygon:Nd,polygonCenter:Od,centroid:Hc};function Dd(a,d){if(!d||!a.length)return a.slice();var b=d*d;return a=ip(a,b),a=Cd(a,b),a}function Md(a,d,b){return Math.sqrt(go(a,d,b,!0))}function rp(a,d,b){return go(a,d,b)}function Cd(a,d){var b=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,j=new E(b);j[0]=j[b-1]=1,Fc(a,j,d,0,b-1);var I,ee=[];for(I=0;I<b;I++)j[I]&&ee.push(a[I]);return ee}function Fc(a,d,b,E,j){var I=0,ee,de,ve;for(de=E+1;de<=j-1;de++)ve=go(a[de],a[E],a[j],!0),ve>I&&(ee=de,I=ve);I>b&&(d[ee]=1,Fc(a,d,b,E,ee),Fc(a,d,b,ee,j))}function ip(a,d){for(var b=[a[0]],E=1,j=0,I=a.length;E<I;E++)sp(a[E],a[j])>d&&(b.push(a[E]),j=E);return j<I-1&&b.push(a[I-1]),b}var Rd;function Ld(a,d,b,E,j){var I=E?Rd:Ds(a,b),ee=Ds(d,b),de,ve,Oe;for(Rd=ee;;){if(!(I|ee))return[a,d];if(I&ee)return!1;de=I||ee,ve=gl(a,d,de,b,j),Oe=Ds(ve,b),de===I?(a=ve,I=Oe):(d=ve,ee=Oe)}}function gl(a,d,b,E,j){var I=d.x-a.x,ee=d.y-a.y,de=E.min,ve=E.max,Oe,Ge;return b&8?(Oe=a.x+I*(ve.y-a.y)/ee,Ge=ve.y):b&4?(Oe=a.x+I*(de.y-a.y)/ee,Ge=de.y):b&2?(Oe=ve.x,Ge=a.y+ee*(ve.x-a.x)/I):b&1&&(Oe=de.x,Ge=a.y+ee*(de.x-a.x)/I),new J(Oe,Ge,j)}function Ds(a,d){var b=0;return a.x<d.min.x?b|=1:a.x>d.max.x&&(b|=2),a.y<d.min.y?b|=4:a.y>d.max.y&&(b|=8),b}function sp(a,d){var b=d.x-a.x,E=d.y-a.y;return b*b+E*E}function go(a,d,b,E){var j=d.x,I=d.y,ee=b.x-j,de=b.y-I,ve=ee*ee+de*de,Oe;return ve>0&&(Oe=((a.x-j)*ee+(a.y-I)*de)/ve,Oe>1?(j=b.x,I=b.y):Oe>0&&(j+=ee*Oe,I+=de*Oe)),ee=a.x-j,de=a.y-I,E?ee*ee+de*de:new J(j,I)}function Cr(a){return!O(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function bl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(a)}function fa(a,d){var b,E,j,I,ee,de,ve,Oe;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ge=Z([0,0]),Xe=V(a),ht=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ht<1700&&(Ge=Hc(a));var Un=a.length,vn=[];for(b=0;b<Un;b++){var xr=Z(a[b]);vn.push(d.project(Z([xr.lat-Ge.lat,xr.lng-Ge.lng])))}for(b=0,E=0;b<Un-1;b++)E+=vn[b].distanceTo(vn[b+1])/2;if(E===0)Oe=vn[0];else for(b=0,I=0;b<Un-1;b++)if(ee=vn[b],de=vn[b+1],j=ee.distanceTo(de),I+=j,I>E){ve=(I-E)/j,Oe=[de.x-ve*(de.x-ee.x),de.y-ve*(de.y-ee.y)];break}var jt=d.unproject(K(Oe));return Z([jt.lat+Ge.lat,jt.lng+Ge.lng])}var ap={__proto__:null,simplify:Dd,pointToSegmentDistance:Md,closestPointOnSegment:rp,clipSegment:Ld,_getEdgeIntersection:gl,_getBitCode:Ds,_sqClosestPointOnSegment:go,isFlat:Cr,_flat:bl,polylineCenter:fa},yl={project:function(a){return new J(a.lng,a.lat)},unproject:function(a){return new P(a.y,a.x)},bounds:new U([-180,-90],[180,90])},vl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,b=this.R,E=a.lat*d,j=this.R_MINOR/b,I=Math.sqrt(1-j*j),ee=I*Math.sin(E),de=Math.tan(Math.PI/4-E/2)/Math.pow((1-ee)/(1+ee),I/2);return E=-b*Math.log(Math.max(de,1e-10)),new J(a.lng*d*b,E)},unproject:function(a){for(var d=180/Math.PI,b=this.R,E=this.R_MINOR/b,j=Math.sqrt(1-E*E),I=Math.exp(-a.y/b),ee=Math.PI/2-2*Math.atan(I),de=0,ve=.1,Oe;de<15&&Math.abs(ve)>1e-7;de++)Oe=j*Math.sin(ee),Oe=Math.pow((1-Oe)/(1+Oe),j/2),ve=Math.PI/2-2*Math.atan(I*Oe)-ee,ee+=ve;return new P(ee*d,a.x*d/b)}},Bd={__proto__:null,LonLat:yl,Mercator:vl,SphericalMercator:xe},Pd=o({},me,{code:"EPSG:3395",projection:vl,transformation:(function(){var a=.5/(Math.PI*vl.R);return je(a,.5,-a,.5)})()}),Yc=o({},me,{code:"EPSG:4326",projection:yl,transformation:je(1/180,1,-1/180,.5)}),ma=o({},ie,{projection:yl,transformation:je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var b=d.lng-a.lng,E=d.lat-a.lat;return Math.sqrt(b*b+E*E)},infinite:!0});ie.Earth=me,ie.EPSG3395=Pd,ie.EPSG3857=Me,ie.EPSG900913=Ee,ie.EPSG4326=Yc,ie.Simple=ma;var Xr=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var b=this.getEvents();d.on(b,this),this.once("remove",function(){d.off(b,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});St.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=m(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},_addLayers:function(a){a=a?O(a)?a:[a]:[];for(var d=0,b=a.length;d<b;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=m(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,b=this._getZoomSpan();for(var E in this._zoomBoundLayers){var j=this._zoomBoundLayers[E].options;a=j.minZoom===void 0?a:Math.min(a,j.minZoom),d=j.maxZoom===void 0?d:Math.max(d,j.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pa=Xr.extend({initialize:function(a,d){k(this,d),this._layers={};var b,E;if(a)for(b=0,E=a.length;b<E;b++)this.addLayer(a[b])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),b,E;for(b in this._layers)E=this._layers[b],E[a]&&E[a].apply(E,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),op=function(a,d){return new pa(a,d)},xi=pa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),pa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),pa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new q;for(var d in this._layers){var b=this._layers[d];a.extend(b.getBounds?b.getBounds():b.getLatLng())}return a}}),$d=function(a,d){return new xi(a,d)},wi=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var b=this._getIconUrl(a);if(!b){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(b,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,d){var b=this.options,E=b[d+"Size"];typeof E=="number"&&(E=[E,E]);var j=K(E),I=K(d==="shadow"&&b.shadowAnchor||b.iconAnchor||j&&j.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(b.className||""),I&&(a.style.marginLeft=-I.x+"px",a.style.marginTop=-I.y+"px"),j&&(a.style.width=j.x+"px",a.style.height=j.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bo(a){return new wi(a)}var yo=wi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yo.imagePath!="string"&&(yo.imagePath=this._detectIconPath()),(this.options.imagePath||yo.imagePath)+wi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(b,E,j){var I=E.exec(b);return I&&I[j]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=gt("div","leaflet-default-icon-path",document.body),d=oo(a,"background-image")||oo(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),vo=_i.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new us(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,b=d._map,E=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,I=ls(d._icon),ee=b.getPixelBounds(),de=b.getPixelOrigin(),ve=B(ee.min._subtract(de).add(j),ee.max._subtract(de).subtract(j));if(!ve.contains(I)){var Oe=K((Math.max(ve.max.x,I.x)-ve.max.x)/(ee.max.x-ve.max.x)-(Math.min(ve.min.x,I.x)-ve.min.x)/(ee.min.x-ve.min.x),(Math.max(ve.max.y,I.y)-ve.max.y)/(ee.max.y-ve.max.y)-(Math.min(ve.min.y,I.y)-ve.min.y)/(ee.min.y-ve.min.y)).multiplyBy(E);b.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Ft(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Q(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,b=d._shadow,E=ls(d._icon),j=d._map.layerPointToLatLng(E);b&&Ft(b,E),d._latlng=j,a.latlng=j,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),_o=Xr.extend({options:{icon:new yo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){k(this,d),this._latlng=Z(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Z(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=a.icon.createIcon(this._icon),E=!1;b!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(b.title=a.title),b.tagName==="IMG"&&(b.alt=a.alt||"")),at(b,d),a.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(b,"focus",this._panOnFocus,this);var j=a.icon.createShadow(this._shadow),I=!1;j!==this._shadow&&(this._removeShadow(),I=!0),j&&(at(j,d),j.alt=""),this._shadow=j,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&I&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ft(this._icon,a),this._shadow&&Ft(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&en(this._icon,a),this._shadow&&en(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,b=d.iconSize?K(d.iconSize):K(0,0),E=d.iconAnchor?K(d.iconAnchor):K(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:b.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Id(a,d){return new _o(a,d)}var Si=Xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=Si.extend({options:{fill:!0,radius:10},initialize:function(a,d){k(this,d),this._latlng=Z(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Z(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Si.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,b=this._clickTolerance(),E=[a+b,d+b];this._pxBounds=new U(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zd(a,d){return new ga(a,d)}var _l=ga.extend({initialize:function(a,d,b){if(typeof d=="number"&&(d=o({},b,{radius:d})),k(this,d),this._latlng=Z(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Si.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,b=this._map,E=b.options.crs;if(E.distance===me.distance){var j=Math.PI/180,I=this._mRadius/me.R/j,ee=b.project([d+I,a]),de=b.project([d-I,a]),ve=ee.add(de).divideBy(2),Oe=b.unproject(ve).lat,Ge=Math.acos((Math.cos(I*j)-Math.sin(d*j)*Math.sin(Oe*j))/(Math.cos(d*j)*Math.cos(Oe*j)))/j;(isNaN(Ge)||Ge===0)&&(Ge=I/Math.cos(Math.PI/180*d)),this._point=ve.subtract(b.getPixelOrigin()),this._radius=isNaN(Ge)?0:ve.x-b.project([Oe,a-Ge]).x,this._radiusY=ve.y-ee.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Ud(a,d,b){return new _l(a,d,b)}var Yi=Si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){k(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,b=null,E=go,j,I,ee=0,de=this._parts.length;ee<de;ee++)for(var ve=this._parts[ee],Oe=1,Ge=ve.length;Oe<Ge;Oe++){j=ve[Oe-1],I=ve[Oe];var Xe=E(a,j,I,!0);Xe<d&&(d=Xe,b=E(a,j,I))}return b&&(b.distance=Math.sqrt(d)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Z(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new q,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],b=Cr(a),E=0,j=a.length;E<j;E++)b?(d[E]=Z(a[E]),this._bounds.extend(d[E])):d[E]=this._convertLatLngs(a[E]);return d},_project:function(){var a=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new J(a,a);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,b){var E=a[0]instanceof P,j=a.length,I,ee;if(E){for(ee=[],I=0;I<j;I++)ee[I]=this._map.latLngToLayerPoint(a[I]),b.extend(ee[I]);d.push(ee)}else for(I=0;I<j;I++)this._projectLatlngs(a[I],d,b)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,b,E,j,I,ee,de,ve;for(b=0,j=0,I=this._rings.length;b<I;b++)for(ve=this._rings[b],E=0,ee=ve.length;E<ee-1;E++)de=Ld(ve[E],ve[E+1],a,E,!0),de&&(d[j]=d[j]||[],d[j].push(de[0]),(de[1]!==ve[E+1]||E===ee-2)&&(d[j].push(de[1]),j++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,b=0,E=a.length;b<E;b++)a[b]=Dd(a[b],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var b,E,j,I,ee,de,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(b=0,I=this._parts.length;b<I;b++)for(de=this._parts[b],E=0,ee=de.length,j=ee-1;E<ee;j=E++)if(!(!d&&E===0)&&Md(a,de[j],de[E])<=ve)return!0;return!1}});function lp(a,d){return new Yi(a,d)}Yi._flat=bl;var ba=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Od(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Yi.prototype._convertLatLngs.call(this,a),b=d.length;return b>=2&&d[0]instanceof P&&d[0].equals(d[b-1])&&d.pop(),d},_setLatLngs:function(a){Yi.prototype._setLatLngs.call(this,a),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,b=new J(d,d);if(a=new U(a.min.subtract(b),a.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,j=this._rings.length,I;E<j;E++)I=Nd(this._rings[E],a,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,b,E,j,I,ee,de,ve,Oe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(I=0,ve=this._parts.length;I<ve;I++)for(b=this._parts[I],ee=0,Oe=b.length,de=Oe-1;ee<Oe;de=ee++)E=b[ee],j=b[de],E.y>a.y!=j.y>a.y&&a.x<(j.x-E.x)*(a.y-E.y)/(j.y-E.y)+E.x&&(d=!d);return d||Yi.prototype._containsPoint.call(this,a,!0)}});function cp(a,d){return new ba(a,d)}var qi=xi.extend({initialize:function(a,d){k(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=O(a)?a:a.features,b,E,j;if(d){for(b=0,E=d.length;b<E;b++)j=d[b],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var I=this.options;if(I.filter&&!I.filter(a))return this;var ee=Fn(a,I);return ee?(ee.feature=Sl(a),ee.defaultOptions=ee.options,this.resetStyle(ee),I.onEachFeature&&I.onEachFeature(a,ee),this.addLayer(ee)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function Fn(a,d){var b=a.type==="Feature"?a.geometry:a,E=b?b.coordinates:null,j=[],I=d&&d.pointToLayer,ee=d&&d.coordsToLatLng||xl,de,ve,Oe,Ge;if(!E&&!b)return null;switch(b.type){case"Point":return de=ee(E),ya(I,a,de,d);case"MultiPoint":for(Oe=0,Ge=E.length;Oe<Ge;Oe++)de=ee(E[Oe]),j.push(ya(I,a,de,d));return new xi(j);case"LineString":case"MultiLineString":return ve=xo(E,b.type==="LineString"?0:1,ee),new Yi(ve,d);case"Polygon":case"MultiPolygon":return ve=xo(E,b.type==="Polygon"?1:2,ee),new ba(ve,d);case"GeometryCollection":for(Oe=0,Ge=b.geometries.length;Oe<Ge;Oe++){var Xe=Fn({geometry:b.geometries[Oe],type:"Feature",properties:a.properties},d);Xe&&j.push(Xe)}return new xi(j);case"FeatureCollection":for(Oe=0,Ge=b.features.length;Oe<Ge;Oe++){var ht=Fn(b.features[Oe],d);ht&&j.push(ht)}return new xi(j);default:throw new Error("Invalid GeoJSON object.")}}function ya(a,d,b,E){return a?a(d,b):new _o(b,E&&E.markersInheritOptions&&E)}function xl(a){return new P(a[1],a[0],a[2])}function xo(a,d,b){for(var E=[],j=0,I=a.length,ee;j<I;j++)ee=d?xo(a[j],d-1,b):(b||xl)(a[j]),E.push(ee);return E}function wl(a,d){return a=Z(a),a.alt!==void 0?[x(a.lng,d),x(a.lat,d),x(a.alt,d)]:[x(a.lng,d),x(a.lat,d)]}function wo(a,d,b,E){for(var j=[],I=0,ee=a.length;I<ee;I++)j.push(d?wo(a[I],Cr(a[I])?0:d-1,b,E):wl(a[I],E));return!d&&b&&j.length>0&&j.push(j[0].slice()),j}function ds(a,d){return a.feature?o({},a.feature,{geometry:d}):Sl(d)}function Sl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hs={toGeoJSON:function(a){return ds(this,{type:"Point",coordinates:wl(this.getLatLng(),a)})}};_o.include(hs),_l.include(hs),ga.include(hs),Yi.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=wo(this._latlngs,d?1:0,!1,a);return ds(this,{type:(d?"Multi":"")+"LineString",coordinates:b})}}),ba.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=d&&!Cr(this._latlngs[0]),E=wo(this._latlngs,b?2:d?1:0,!0,a);return d||(E=[E]),ds(this,{type:(b?"Multi":"")+"Polygon",coordinates:E})}}),pa.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(b){d.push(b.toGeoJSON(a).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var b=d==="GeometryCollection",E=[];return this.eachLayer(function(j){if(j.toGeoJSON){var I=j.toGeoJSON(a);if(b)E.push(I.geometry);else{var ee=Sl(I);ee.type==="FeatureCollection"?E.push.apply(E,ee.features):E.push(ee)}}}),b?ds(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function El(a,d){return new qi(a,d)}var So=El,va=Xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,b){this._url=a,this._bounds=V(d),k(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&js(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=V(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:gt("img");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hi(this._image,b,d)},_reset:function(){var a=this._image,d=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=d.getSize();Ft(a,d.min),a.style.width=b.x+"px",a.style.height=b.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Hd=function(a,d,b){return new va(a,d,b)},fs=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:gt("video");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onloadeddata=u(this.fire,this,"load"),a){for(var b=d.getElementsByTagName("source"),E=[],j=0;j<b.length;j++)E.push(b[j].src);this._url=b.length>0?E:[d.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var ee=gt("source");ee.src=this._url[I],d.appendChild(ee)}}});function _a(a,d,b){return new fs(a,d,b)}var Tl=va.extend({_initImage:function(){var a=this._image=this._url;at(a,"leaflet-image-layer"),this._zoomAnimated&&at(a,"leaflet-zoom-animated"),this.options.className&&at(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Gd(a,d,b){return new Tl(a,d,b)}var Yn=Xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof P||O(a))?(this._latlng=Z(a),k(this,d)):(k(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Z(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&js(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof xi){d=null;var b=this._source._layers;for(var E in b)if(b[E]._map){d=b[E];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=K(this.options.offset),b=this._getAnchor();this._zoomAnimated?Ft(this._container,a.add(b)):d=d.add(a).add(b);var E=this._containerBottom=-d.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=E+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(a,d,b,E){var j=d;return j instanceof a||(j=new a(E).setContent(d)),b&&j.setLatLng(b),j}}),Xr.include({_initOverlay:function(a,d,b,E){var j=b;return j instanceof a?(k(j,E),j._source=this):(j=d&&!E?d:new a(E,this),j.setContent(b)),j}});var Eo=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Yn.prototype.openOn.call(this,a)},onAdd:function(a){Yn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Si||this._source.on("preclick",Wr))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Si||this._source.off("preclick",Wr))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=gt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=gt("div",a+"-content-wrapper",d);if(this._contentNode=gt("div",a+"-content",b),Os(d),vi(this._contentNode),it(d,"contextmenu",Wr),this._tipContainer=gt("div",a+"-tip-container",d),this._tip=gt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=gt("a",a+"-close-button",d);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',it(E,"click",function(j){yn(j),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var b=a.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),d.width=b+1+"px",d.whiteSpace="",d.height="";var E=a.offsetHeight,j=this.options.maxHeight,I="leaflet-popup-scrolled";j&&E>j?(d.height=j+"px",at(a,I)):an(a,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),b=this._getAnchor();Ft(this._container,d.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(oo(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+d,E=this._containerWidth,j=new J(this._containerLeft,-b-this._containerBottom);j._add(ls(this._container));var I=a.layerPointToContainerPoint(j),ee=K(this.options.autoPanPadding),de=K(this.options.autoPanPaddingTopLeft||ee),ve=K(this.options.autoPanPaddingBottomRight||ee),Oe=a.getSize(),Ge=0,Xe=0;I.x+E+ve.x>Oe.x&&(Ge=I.x+E-Oe.x+ve.x),I.x-Ge-de.x<0&&(Ge=I.x-de.x),I.y+b+ve.y>Oe.y&&(Xe=I.y+b-Oe.y+ve.y),I.y-Xe-de.y<0&&(Xe=I.y-de.y),(Ge||Xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ge,Xe]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fd=function(a,d){return new Eo(a,d)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(a,d,b){return this._initOverlay(Eo,a,d,b).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Xr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Eo,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof xi||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){cs(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var To=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Yn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,b,E=this._map,j=this._container,I=E.latLngToContainerPoint(E.getCenter()),ee=E.layerPointToContainerPoint(a),de=this.options.direction,ve=j.offsetWidth,Oe=j.offsetHeight,Ge=K(this.options.offset),Xe=this._getAnchor();de==="top"?(d=ve/2,b=Oe):de==="bottom"?(d=ve/2,b=0):de==="center"?(d=ve/2,b=Oe/2):de==="right"?(d=0,b=Oe/2):de==="left"?(d=ve,b=Oe/2):ee.x<I.x?(de="right",d=0,b=Oe/2):(de="left",d=ve+(Ge.x+Xe.x)*2,b=Oe/2),a=a.subtract(K(d,b,!0)).add(Ge).add(Xe),an(j,"leaflet-tooltip-right"),an(j,"leaflet-tooltip-left"),an(j,"leaflet-tooltip-top"),an(j,"leaflet-tooltip-bottom"),at(j,"leaflet-tooltip-"+de),Ft(j,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&en(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),up=function(a,d){return new To(a,d)};St.include({openTooltip:function(a,d,b){return this._initOverlay(To,a,d,b).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Xr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(To,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[d](b),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof xi||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(it(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),it(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,b,E;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(d)}});var Yd=wi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Dr(d),d.appendChild(b.html)):d.innerHTML=b.html!==!1?b.html:"",b.bgPos){var E=K(b.bgPos);d.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function dp(a){return new Yd(a)}wi.Default=yo;var xa=Xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),It(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(js(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof J?a:new J(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,b=-a(-1/0,1/0),E=0,j=d.length,I;E<j;E++)I=d[E].style.zIndex,d[E]!==this._container&&I&&(b=a(b,+I));isFinite(b)&&(this.options.zIndex=b+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){en(this._container,this.options.opacity);var a=+new Date,d=!1,b=!1;for(var E in this._tiles){var j=this._tiles[E];if(!(!j.current||!j.loaded)){var I=Math.min(1,(a-j.loaded)/200);en(j.el,I),I<1?d=!0:(j.active?b=!0:this._onOpaqueTile(j),j.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),d&&(Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===a?(this._levels[b].el.style.zIndex=d-Math.abs(a-b),this._onUpdateLevel(b)):(It(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var E=this._levels[a],j=this._map;return E||(E=this._levels[a]={},E.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=d,E.origin=j.project(j.unproject(j.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,j.getCenter(),j.getZoom()),_(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,d,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var E=d.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)It(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,b,E){var j=Math.floor(a/2),I=Math.floor(d/2),ee=b-1,de=new J(+j,+I);de.z=+ee;var ve=this._tileCoordsToKey(de),Oe=this._tiles[ve];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),ee>E?this._retainParent(j,I,ee,E):!1)},_retainChildren:function(a,d,b,E){for(var j=2*a;j<2*a+2;j++)for(var I=2*d;I<2*d+2;I++){var ee=new J(j,I);ee.z=b+1;var de=this._tileCoordsToKey(ee),ve=this._tiles[de];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);b+1<E&&this._retainChildren(j,I,b+1,E)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,b,E){var j=Math.round(d);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var I=this.options.updateWhenZooming&&j!==this._tileZoom;(!E||I)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(a),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var b in this._levels)this._setZoomTransform(this._levels[b],a,d)},_setZoomTransform:function(a,d,b){var E=this._map.getZoomScale(b,a.zoom),j=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(d,b)).round();Ve.any3d?Hi(a.el,j,E):Ft(a.el,j)},_resetGrid:function(){var a=this._map,d=a.options.crs,b=this._tileSize=this.getTileSize(),E=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],E).x/b.x),Math.ceil(a.project([0,d.wrapLng[1]],E).x/b.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],E).y/b.x),Math.ceil(a.project([d.wrapLat[1],0],E).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,b=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),E=d.getZoomScale(b,this._tileZoom),j=d.project(a,this._tileZoom).floor(),I=d.getSize().divideBy(E*2);return new U(j.subtract(I),j.add(I))},_update:function(a){var d=this._map;if(d){var b=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),j=this._pxBoundsToTileRange(E),I=j.getCenter(),ee=[],de=this.options.keepBuffer,ve=new U(j.getBottomLeft().subtract([de,-de]),j.getTopRight().add([de,-de]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ge=this._tiles[Oe].coords;(Ge.z!==this._tileZoom||!ve.contains(new J(Ge.x,Ge.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(a,b);return}for(var Xe=j.min.y;Xe<=j.max.y;Xe++)for(var ht=j.min.x;ht<=j.max.x;ht++){var Un=new J(ht,Xe);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var vn=this._tiles[this._tileCoordsToKey(Un)];vn?vn.current=!0:ee.push(Un)}}if(ee.sort(function(jt,Nt){return jt.distanceTo(I)-Nt.distanceTo(I)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xr=document.createDocumentFragment();for(ht=0;ht<ee.length;ht++)this._addTile(ee[ht],xr);this._level.el.appendChild(xr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var b=this._globalTileRange;if(!d.wrapLng&&(a.x<b.min.x||a.x>b.max.x)||!d.wrapLat&&(a.y<b.min.y||a.y>b.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return V(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,b=this.getTileSize(),E=a.scaleBy(b),j=E.add(b),I=d.unproject(E,a.z),ee=d.unproject(j,a.z);return[I,ee]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),b=new q(d[0],d[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),b=new J(+d[0],+d[1]);return b.z=+d[2],b},_removeTile:function(a){var d=this._tiles[a];d&&(It(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){at(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=_,a.onmousemove=_,Ve.ielt9&&this.options.opacity<1&&en(a,this.options.opacity)},_addTile:function(a,d){var b=this._getTilePos(a),E=this._tileCoordsToKey(a),j=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(j),this.createTile.length<2&&Q(u(this._tileReady,this,a,null,j)),Ft(j,b),this._tiles[E]={el:j,coords:a,current:!0},d.appendChild(j),this.fire("tileloadstart",{tile:j,coords:a})},_tileReady:function(a,d,b){d&&this.fire("tileerror",{error:d,tile:b,coords:a});var E=this._tileCoordsToKey(a);b=this._tiles[E],b&&(b.loaded=+new Date,this._map._fadeAnimated?(en(b.el,0),Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),d||(at(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new J(this._wrapX?y(a.x,this._wrapX):a.x,this._wrapY?y(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new U(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function qd(a){return new xa(a)}var ms=xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=k(this,d),d.detectRetina&&Ve.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var b=document.createElement("img");return it(b,"load",u(this._tileOnLoad,this,d,b)),it(b,"error",u(this._tileOnError,this,d,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(a),b},getTileUrl:function(a){var d={r:Ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=b),d["-y"]=b}return $(this._url,o(d,this.options))},_tileOnLoad:function(a,d){Ve.ielt9?setTimeout(u(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,b){var E=this.options.errorTileUrl;E&&d.getAttribute("src")!==E&&(d.src=E),a(b,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,b=this.options.zoomReverse,E=this.options.zoomOffset;return b&&(a=d-a),a+E},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=_,d.onerror=_,!d.complete)){d.src=M;var b=this._tiles[a].coords;It(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:b})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",M),xa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,b){if(!(!this._map||b&&b.getAttribute("src")===M))return xa.prototype._tileReady.call(this,a,d,b)}});function Rr(a,d){return new ms(a,d)}var ko=ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var b=o({},this.defaultWmsParams);for(var E in d)E in this.options||(b[E]=d[E]);d=k(this,d);var j=d.detectRetina&&Ve.retina?2:1,I=this.getTileSize();b.width=I.x*j,b.height=I.y*j,this.wmsParams=b},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ms.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),b=this._crs,E=B(b.project(d[0]),b.project(d[1])),j=E.min,I=E.max,ee=(this._wmsVersion>=1.3&&this._crs===Yc?[j.y,j.x,I.y,I.x]:[j.x,j.y,I.x,I.y]).join(","),de=ms.prototype.getTileUrl.call(this,a);return de+A(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function Lr(a,d){return new ko(a,d)}ms.WMS=ko,Rr.wms=Lr;var ur=Xr.extend({options:{padding:.1},initialize:function(a){k(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var b=this._map.getZoomScale(d,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,d),I=E.multiplyBy(-b).add(j).subtract(this._map._getNewPixelOrigin(a,d));Ve.any3d?Hi(this._container,I,b):Ft(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),b=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new U(b,b.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kl=ur.extend({options:{tolerance:0},getEvents:function(){var a=ur.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");it(a,"mousemove",this._onMouseMove,this),it(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,It(this._container),Lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ur.prototype._update.call(this);var a=this._bounds,d=this._container,b=a.getSize(),E=Ve.retina?2:1;Ft(d,a.min),d.width=E*b.x,d.height=E*b.y,d.style.width=b.x+"px",d.style.height=b.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,b=d.next,E=d.prev;b?b.prev=E:this._drawLast=E,E?E.next=b:this._drawFirst=b,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),b=[],E,j;for(j=0;j<d.length;j++){if(E=Number(d[j]),isNaN(E))return;b.push(E)}a.options._dashArray=b}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var b=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var b,E,j,I,ee=a._parts,de=ee.length,ve=this._ctx;if(de){for(ve.beginPath(),b=0;b<de;b++){for(E=0,j=ee[b].length;E<j;E++)I=ee[b][E],ve[E?"lineTo":"moveTo"](I.x,I.y);d&&ve.closePath()}this._fillStroke(ve,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,b=this._ctx,E=Math.max(Math.round(a._radius),1),j=(Math.max(Math.round(a._radiusY),1)||E)/E;j!==1&&(b.save(),b.scale(1,j)),b.beginPath(),b.arc(d.x,d.y/j,E,0,Math.PI*2,!1),j!==1&&b.restore(),this._fillStroke(b,a)}},_fillStroke:function(a,d){var b=d.options;b.fill&&(a.globalAlpha=b.fillOpacity,a.fillStyle=b.fillColor||b.color,a.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=b.opacity,a.lineWidth=b.weight,a.strokeStyle=b.color,a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(b))&&(E=b);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(an(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(E=b);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(at(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,b){this._map._fireDOMEvent(d,b||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(b)b.prev=E;else return;E?E.next=b:b&&(this._drawFirst=b),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(E)E.next=b;else return;b?b.prev=E:E&&(this._drawLast=E),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function Ao(a){return Ve.canvas?new kl(a):null}var ps=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),qc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=ps("shape");at(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=ps("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;It(d),a.removeInteractiveTarget(d),delete this._layers[m(a)]},_updateStyle:function(a){var d=a._stroke,b=a._fill,E=a.options,j=a._container;j.stroked=!!E.stroke,j.filled=!!E.fill,E.stroke?(d||(d=a._stroke=ps("stroke")),j.appendChild(d),d.weight=E.weight+"px",d.color=E.color,d.opacity=E.opacity,E.dashArray?d.dashStyle=O(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=E.lineCap.replace("butt","flat"),d.joinstyle=E.lineJoin):d&&(j.removeChild(d),a._stroke=null),E.fill?(b||(b=a._fill=ps("fill")),j.appendChild(b),b.color=E.fillColor||E.color,b.opacity=E.fillOpacity):b&&(j.removeChild(b),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),b=Math.round(a._radius),E=Math.round(a._radiusY||b);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+b+","+E+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){zn(a._container)},_bringToBack:function(a){js(a._container)}},Ei=Ve.vml?ps:Pe,wa=ur.extend({_initContainer:function(){this._container=Ei("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ei("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ur.prototype._update.call(this);var a=this._bounds,d=a.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,b.setAttribute("width",d.x),b.setAttribute("height",d.y)),Ft(b,a.min),b.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ei("path");a.options.className&&at(d,a.options.className),a.options.interactive&&at(d,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){It(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,b=a.options;d&&(b.stroke?(d.setAttribute("stroke",b.color),d.setAttribute("stroke-opacity",b.opacity),d.setAttribute("stroke-width",b.weight),d.setAttribute("stroke-linecap",b.lineCap),d.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?d.setAttribute("stroke-dasharray",b.dashArray):d.removeAttribute("stroke-dasharray"),b.dashOffset?d.setAttribute("stroke-dashoffset",b.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),b.fill?(d.setAttribute("fill",b.fillColor||b.color),d.setAttribute("fill-opacity",b.fillOpacity),d.setAttribute("fill-rule",b.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ce(a._parts,d))},_updateCircle:function(a){var d=a._point,b=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||b,j="a"+b+","+E+" 0 1,0 ",I=a._empty()?"M0 0":"M"+(d.x-b)+","+d.y+j+b*2+",0 "+j+-b*2+",0 ";this._setPath(a,I)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){zn(a._path)},_bringToBack:function(a){js(a._path)}});Ve.vml&&wa.include(qc);function jo(a){return Ve.svg||Ve.vml?new wa(a):null}St.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Ao(a)||jo(a)}});var Ms=ba.extend({initialize:function(a,d){ba.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=V(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function hp(a,d){return new Ms(a,d)}wa.create=Ei,wa.pointsToPath=Ce,qi.geometryToLayer=Fn,qi.coordsToLatLng=xl,qi.coordsToLatLngs=xo,qi.latLngToCoords=wl,qi.latLngsToCoords=wo,qi.getFeature=ds,qi.asFeature=Sl,St.mergeOptions({boxZoom:!0});var dr=_i.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),hl(),this._startPoint=this._map.mouseEventToContainerPoint(a),it(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new U(this._point,this._startPoint),b=d.getSize();Ft(this._box,d.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(It(this._box),an(this._container,"leaflet-crosshair")),yi(),co(),Lt(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",dr),St.mergeOptions({doubleClickZoom:!0});var Al=_i.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,b=d.getZoom(),E=d.options.zoomDelta,j=a.originalEvent.shiftKey?b-E:b+E;d.options.doubleClickZoom==="center"?d.setZoom(j):d.setZoomAround(a.containerPoint,j)}});St.addInitHook("addHandler","doubleClickZoom",Al),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ti=_i.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new us(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=V(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),b=this._initialWorldOffset,E=this._draggable._newPos.x,j=(E-d+b)%a+d-b,I=(E+d+b)%a-d-b,ee=Math.abs(j+b)<Math.abs(I+b)?j:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(a){var d=this._map,b=d.options,E=!b.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),E)d.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,ee=b.easeLinearity,de=j.multiplyBy(ee/I),ve=de.distanceTo([0,0]),Oe=Math.min(b.inertiaMaxSpeed,ve),Ge=de.multiplyBy(Oe/ve),Xe=Oe/(b.inertiaDeceleration*ee),ht=Ge.multiplyBy(-Xe/2).round();!ht.x&&!ht.y?d.fire("moveend"):(ht=d._limitOffset(ht,d.options.maxBounds),Q(function(){d.panBy(ht,{duration:Xe,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",Ti),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zc=_i.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),it(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,b=a.scrollTop||d.scrollTop,E=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(E,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},b=this.keyCodes,E,j;for(E=0,j=b.left.length;E<j;E++)d[b.left[E]]=[-1*a,0];for(E=0,j=b.right.length;E<j;E++)d[b.right[E]]=[a,0];for(E=0,j=b.down.length;E<j;E++)d[b.down[E]]=[0,a];for(E=0,j=b.up.length;E<j;E++)d[b.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},b=this.keyCodes,E,j;for(E=0,j=b.zoomIn.length;E<j;E++)d[b.zoomIn[E]]=a;for(E=0,j=b.zoomOut.length;E<j;E++)d[b.zoomOut[E]]=-a},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,b=this._map,E;if(d in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(E=this._panKeys[d],a.shiftKey&&(E=K(E).multiplyBy(3)),b.options.maxBounds&&(E=b._limitOffset(K(E),b.options.maxBounds)),b.options.worldCopyJump){var j=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(E)));b.panTo(j)}else b.panBy(E)}else if(d in this._zoomKeys)b.setZoom(b.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;cs(a)}}});St.addInitHook("addHandler","keyboard",Zc),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var No=_i.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Jn(a),b=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),cs(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),b=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=b?Math.ceil(j/b)*b:j,ee=a._limitZoom(d+(this._delta>0?I:-I))-d;this._delta=0,this._startTime=null,ee&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ee):a.setZoomAround(this._lastMousePos,d+ee))}});St.addInitHook("addHandler","scrollWheelZoom",No);var Cs=600;St.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var jl=_i.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new J(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",yn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Cs),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Lt(document,"touchend",yn),Lt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new J(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var b=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});b._simulated=!0,d.target.dispatchEvent(b)}});St.addInitHook("addHandler","tapHold",jl),St.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Vc=_i.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(b.add(E)._divideBy(2))),this._startDist=b.distanceTo(E),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),yn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]),j=b.distanceTo(E)/this._startDist;if(this._zoom=d.getScaleZoom(j,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&j<1||this._zoom>d.getMaxZoom()&&j>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var I=b._add(E)._divideBy(2)._subtract(this._centerPoint);if(j===1&&I.x===0&&I.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var ee=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(ee,this,!0),yn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",Vc),St.BoxZoom=dr,St.DoubleClickZoom=Al,St.Drag=Ti,St.Keyboard=Zc,St.ScrollWheelZoom=No,St.TapHold=jl,St.TouchZoom=Vc,n.Bounds=U,n.Browser=Ve,n.CRS=ie,n.Canvas=kl,n.Circle=_l,n.CircleMarker=ga,n.Class=re,n.Control=_r,n.DivIcon=Yd,n.DivOverlay=Yn,n.DomEvent=pl,n.DomUtil=da,n.Draggable=us,n.Evented=oe,n.FeatureGroup=xi,n.GeoJSON=qi,n.GridLayer=xa,n.Handler=_i,n.Icon=wi,n.ImageOverlay=va,n.LatLng=P,n.LatLngBounds=q,n.Layer=Xr,n.LayerGroup=pa,n.LineUtil=ap,n.Map=St,n.Marker=_o,n.Mixin=np,n.Path=Si,n.Point=J,n.PolyUtil=Gc,n.Polygon=ba,n.Polyline=Yi,n.Popup=Eo,n.PosAnimation=ha,n.Projection=Bd,n.Rectangle=Ms,n.Renderer=ur,n.SVG=wa,n.SVGOverlay=Tl,n.TileLayer=ms,n.Tooltip=To,n.Transformation=ke,n.Util=te,n.VideoOverlay=fs,n.bind=u,n.bounds=B,n.canvas=Ao,n.circle=Ud,n.circleMarker=zd,n.control=Fi,n.divIcon=dp,n.extend=o,n.featureGroup=$d,n.geoJSON=El,n.geoJson=So,n.gridLayer=qd,n.icon=bo,n.imageOverlay=Hd,n.latLng=Z,n.latLngBounds=V,n.layerGroup=op,n.map=Pc,n.marker=Id,n.point=K,n.polygon=cp,n.polyline=lp,n.popup=Fd,n.rectangle=hp,n.setOptions=k,n.stamp=m,n.svg=jo,n.svgOverlay=Gd,n.tileLayer=Rr,n.tooltip=up,n.transformation=je,n.version=i,n.videoOverlay=_a;var Kc=window.L;n.noConflict=function(){return window.L=Kc,this},window.L=n}))})(Fu,Fu.exports)),Fu.exports}var mC=fC();const ig=ll(mC),ef=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Go(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function pC(e){const{buttonId:t,buttonInputId:n,modalId:i,closeMapId:o,mapCloseBtnId:l,searchBoxId:u,suggestionsId:f,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},y=Go(n),_=Go(t),x=Go(i),S=Go(l),T=Go(u),k=Go(f),A=o?Go(o):null;let D=null,$=null,O=null;const C=Y=>Y.code==="Space"||Y.key===" "||Y.key==="Spacebar"||Y.key==="Space",M=Y=>{C(Y)&&document.activeElement!==T&&(Y.preventDefault(),Y.stopPropagation(),T.focus())},G=()=>{x.style.display="flex",D?setTimeout(()=>D?.invalidateSize(),200):setTimeout(()=>{D=ig.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),ig.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(D),D.invalidateSize()},0),x.addEventListener("keydown",M,!0),x.addEventListener("keyup",M,!0),T.focus()},H=()=>{x.style.display="none",T.value="",k.innerHTML="",O&&(window.clearTimeout(O),O=null),x.removeEventListener("keydown",M,!0),x.removeEventListener("keyup",M,!0)},F=Y=>{const te=Y.dataset.name??"",re=Number(Y.dataset.lat??""),Se=Number(Y.dataset.lon??"");!Number.isFinite(re)||!Number.isFinite(Se)||!D||($?$.setLatLng([re,Se]):$=ig.marker([re,Se]).addTo(D),D.flyTo([re,Se],14,{duration:.5}),y.value=te,y.dataset.lat=String(re),y.dataset.lon=String(Se),e.onSelected?.({name:te,lat:re,lon:Se}),k.innerHTML="",H())},W=()=>{O&&window.clearTimeout(O);const Y=T.value.trim();if(!Y){k.innerHTML="";return}O=window.setTimeout(async()=>{try{const te="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(Y),re=await fetch(te,{headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`HTTP ${re.status}`);const Se=await re.json();if(!Array.isArray(Se)||Se.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const X=Se.slice(0,12).map((oe,J)=>{const ye=oe.display_name.split(",").slice(0,3).map(B=>B.trim()).join("  "),K="padding:8px;cursor:pointer;outline:none;",U=J===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${ef(ye)}"
                    data-lat="${ef(oe.lat)}"
                    data-lon="${ef(oe.lon)}"
                    data-active="${J===0?"1":"0"}"
                    style="${K}${U}"
                  >${ef(ye)}</li>`}).join("");k.innerHTML=X}catch(te){console.error(te),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},ae=Y=>{const te=Y.target;te.tagName==="LI"&&F(te)},Q=Y=>{if(Y.key==="Enter"){const te=k.querySelector('li[data-active="1"]')??k.querySelector("li");te&&F(te)}};return _.addEventListener("click",G),S.addEventListener("click",H),A&&A.addEventListener("click",H),T.addEventListener("input",W),T.addEventListener("keydown",Q),k.addEventListener("click",ae),()=>{_.removeEventListener("click",G),S.removeEventListener("click",H),A&&A.removeEventListener("click",H),T.removeEventListener("input",W),T.removeEventListener("keydown",Q),k.removeEventListener("click",ae),x.removeEventListener("keydown",M,!0),x.removeEventListener("keyup",M,!0),O&&(window.clearTimeout(O),O=null),D&&(D.remove(),D=null)}}function tc(){return document.getElementById("suggestions")}function zf(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,i)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${i}`)}),t}function sg(e,t){const n=zf(e);if(n.length===0)return;const i=n.length;let o=t;o<0&&(o=i-1),o>=i&&(o=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[o];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function uT({onSelect:e,placeholderText:t="",buttonStyle:n,value:i}){const[o,l]=R.useState(t),[u,f]=R.useState(!1),[m,p]=R.useState(i??""),y=R.useRef(null),_=R.useRef(null),x=R.useRef(null),S=R.useRef(null);return R.useEffect(()=>{i!==void 0&&p(i)},[i]),R.useEffect(()=>{if(!u)return;const T=pC({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:W=>{l(""),p(W.name),y.current&&(y.current.value=W.name),_.current&&(_.current.value=String(W.lat)),x.current&&(x.current.value=String(W.lon)),e?.(W),f(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const A=document.getElementById("mapModal"),D=document.getElementById("searchBox"),$=tc();setTimeout(()=>D?.focus(),0);const O='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',C=W=>{if(W.key==="Escape"){W.preventDefault(),f(!1);return}if(W.key!=="Tab")return;const ae=tc();if(ae&&ae.contains(document.activeElement))return;const Q=Array.from(A.querySelectorAll(O)).filter(Se=>!Se.hasAttribute("disabled")&&Se.tabIndex!==-1);if(Q.length===0)return;const Y=Q[0],te=Q[Q.length-1],re=document.activeElement;W.shiftKey?(re===Y||!A.contains(re))&&(W.preventDefault(),te.focus()):(re===te||!A.contains(re))&&(W.preventDefault(),Y.focus())};A.addEventListener("keydown",C);const M=W=>{if(W.key!=="ArrowDown")return;const ae=tc();!ae||zf(ae).length===0||W.preventDefault()};D?.addEventListener("keydown",M);const G=W=>{if(W.target.value.trim()===""){const Q=tc();Q&&(Q.innerHTML="")}};D?.addEventListener("input",G);const H=W=>{const ae=tc();if(!ae)return;const Q=zf(ae);if(Q.length===0)return;const Y=document.activeElement,te=Y?Q.indexOf(Y):-1;if(te===-1)return;const re=Se=>{W.preventDefault(),sg(ae,te+Se)};switch(W.key){case"Tab":W.preventDefault(),re(W.shiftKey?-1:1);break;case"ArrowDown":W.preventDefault(),re(1);break;case"ArrowUp":W.preventDefault(),re(-1);break;case"Home":W.preventDefault(),sg(ae,0);break;case"End":W.preventDefault(),sg(ae,Q.length-1);break;case"Enter":case" ":W.preventDefault(),Y.click();break;case"Backspace":W.preventDefault(),ae.innerHTML="",D?.focus();break}W.stopPropagation()};let F=null;return $&&($.addEventListener("keydown",H),F=new MutationObserver(()=>{const W=tc();!W||zf(W).length}),F.observe($,{childList:!0,subtree:!1})),()=>{A.removeEventListener("keydown",C),D?.removeEventListener("keydown",M),D?.removeEventListener("input",G),$&&$.removeEventListener("keydown",H),F?.disconnect(),T?.()}},[u,e]),R.useEffect(()=>{u||setTimeout(()=>S.current?.focus(),0)},[u]),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),g.jsx("button",{ref:S,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:o}),g.jsx("input",{ref:y,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:_,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>f(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:" ,  ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ,   ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}var Dm=A2();const gC=ll(Dm);function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var bC=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xw=bC,Jw=()=>Math.random().toString(36).substring(7).split("").join("."),yC={INIT:`@@redux/INIT${Jw()}`,REPLACE:`@@redux/REPLACE${Jw()}`},Qw=yC;function vC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dT(e,t,n){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(dT)(e,t)}let i=e,o=t,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((A,D)=>{u.set(D,A)}))}function y(){if(m)throw new Error(Er(3));return o}function _(A){if(typeof A!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let D=!0;p();const $=f++;return u.set($,A),function(){if(D){if(m)throw new Error(Er(6));D=!1,p(),u.delete($),l=null}}}function x(A){if(!vC(A))throw new Error(Er(7));if(typeof A.type>"u")throw new Error(Er(8));if(typeof A.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,o=i(o,A)}finally{m=!1}return(l=u).forEach($=>{$()}),A}function S(A){if(typeof A!="function")throw new Error(Er(10));i=A,x({type:Qw.REPLACE})}function T(){const A=_;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Er(11));function $(){const C=D;C.next&&C.next(y())}return $(),{unsubscribe:A($)}},[Xw](){return this}}}return x({type:Qw.INIT}),{dispatch:x,subscribe:_,getState:y,replaceReducer:S,[Xw]:T}}function e1(e,t){return function(...n){return t(e.apply(this,n))}}function t1(e,t){if(typeof e=="function")return e1(e,t);if(typeof e!="object"||e===null)throw new Error(Er(16));const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=e1(o,t))}return n}function hT(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function _C(...e){return t=>(n,i)=>{const o=t(n,i);let l=()=>{throw new Error(Er(15))};const u={getState:o.getState,dispatch:(m,...p)=>l(m,...p)},f=e.map(m=>m(u));return l=hT(...f)(o.dispatch),{...o,dispatch:l}}}var ag={exports:{}},og={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function xC(){if(n1)return og;n1=1;var e=_m();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return og.useSyncExternalStoreWithSelector=function(m,p,y,_,x){var S=o(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=u(function(){function A(M){if(!D){if(D=!0,$=M,M=_(M),x!==void 0&&T.hasValue){var G=T.value;if(x(G,M))return O=G}return O=M}if(G=O,n($,M))return G;var H=_(M);return x!==void 0&&x(G,H)?($=M,G):($=M,O=H)}var D=!1,$,O,C=y===void 0?null:y;return[function(){return A(p())},C===null?void 0:function(){return A(C())}]},[p,y,_,x]);var k=i(m,S[0],S[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),f(k),k},og}var r1;function wC(){return r1||(r1=1,ag.exports=xC()),ag.exports}wC();var SC=R.version.startsWith("19"),EC=Symbol.for(SC?"react.transitional.element":"react.element"),TC=Symbol.for("react.portal"),kC=Symbol.for("react.fragment"),AC=Symbol.for("react.strict_mode"),jC=Symbol.for("react.profiler"),NC=Symbol.for("react.consumer"),OC=Symbol.for("react.context"),fT=Symbol.for("react.forward_ref"),DC=Symbol.for("react.suspense"),MC=Symbol.for("react.suspense_list"),oy=Symbol.for("react.memo"),CC=Symbol.for("react.lazy"),RC=fT,LC=oy;function BC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case EC:switch(e=e.type,e){case kC:case jC:case AC:case DC:case MC:return e;default:switch(e=e&&e.$$typeof,e){case OC:case fT:case CC:case oy:return e;case NC:return e;default:return t}}case TC:return t}}}function PC(e){return BC(e)===oy}function $C(e,t,n,i,{areStatesEqual:o,areOwnPropsEqual:l,areStatePropsEqual:u}){let f=!1,m,p,y,_,x;function S($,O){return m=$,p=O,y=e(m,p),_=t(i,p),x=n(y,_,p),f=!0,x}function T(){return y=e(m,p),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function k(){return e.dependsOnOwnProps&&(y=e(m,p)),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function A(){const $=e(m,p),O=!u($,y);return y=$,O&&(x=n(y,_,p)),x}function D($,O){const C=!l(O,p),M=!o($,m,O,p);return m=$,p=O,C&&M?T():C?k():M?A():x}return function(O,C){return f?D(O,C):S(O,C)}}function IC(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:i,...o}){const l=t(e,o),u=n(e,o),f=i(e,o);return $C(l,u,f,e,o)}function zC(e,t){const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=(...l)=>t(o(...l)))}return n}function kb(e){return function(n){const i=e(n);function o(){return i}return o.dependsOnOwnProps=!1,o}}function i1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function mT(e,t){return function(i,{displayName:o}){const l=function(f,m){return l.dependsOnOwnProps?l.mapToProps(f,m):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,m){l.mapToProps=e,l.dependsOnOwnProps=i1(e);let p=l(f,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=i1(p),p=l(f,m)),p},l}}function ly(e,t){return(n,i)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${i.wrappedComponentName}.`)}}function UC(e){return e&&typeof e=="object"?kb(t=>zC(e,t)):e?typeof e=="function"?mT(e):ly(e,"mapDispatchToProps"):kb(t=>({dispatch:t}))}function HC(e){return e?typeof e=="function"?mT(e):ly(e,"mapStateToProps"):kb(()=>({}))}function GC(e,t,n){return{...n,...e,...t}}function FC(e){return function(n,{displayName:i,areMergedPropsEqual:o}){let l=!1,u;return function(m,p,y){const _=e(m,p,y);return l?o(_,u)||(u=_):(l=!0,u=_),u}}}function YC(e){return e?typeof e=="function"?FC(e):ly(e,"mergeProps"):()=>GC}function qC(e){e()}function ZC(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qC(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var s1={notify(){},get:()=>[]};function pT(e,t){let n,i=s1,o=0,l=!1;function u(k){y();const A=i.subscribe(k);let D=!1;return()=>{D||(D=!0,A(),_())}}function f(){i.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function y(){o++,n||(n=t?t.addNestedSub(m):e.subscribe(m),i=ZC())}function _(){o--,n&&o===0&&(n(),n=void 0,i.clear(),i=s1)}function x(){l||(l=!0,y())}function S(){l&&(l=!1,_())}const T={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>i};return T}var VC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KC=VC(),WC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",XC=WC(),JC=()=>KC||XC?R.useLayoutEffect:R.useEffect,nm=JC();function a1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function lg(e,t){if(a1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!a1(e[n[o]],t[n[o]]))return!1;return!0}var QC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},t3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n3={[RC]:t3,[LC]:gT};function o1(e){return PC(e)?gT:n3[e.$$typeof]||QC}var r3=Object.defineProperty,i3=Object.getOwnPropertyNames,l1=Object.getOwnPropertySymbols,s3=Object.getOwnPropertyDescriptor,a3=Object.getPrototypeOf,c1=Object.prototype;function Ab(e,t){if(typeof t!="string"){if(c1){const l=a3(t);l&&l!==c1&&Ab(e,l)}let n=i3(t);l1&&(n=n.concat(l1(t)));const i=o1(e),o=o1(t);for(let l=0;l<n.length;++l){const u=n[l];if(!e3[u]&&!(o&&o[u])&&!(i&&i[u])){const f=s3(t,u);try{r3(e,u,f)}catch{}}}}return e}var o3=Symbol.for("react-redux-context"),l3=typeof globalThis<"u"?globalThis:{};function c3(){if(!R.createContext)return{};const e=l3[o3]??=new Map;let t=e.get(R.createContext);return t||(t=R.createContext(null),e.set(R.createContext,t)),t}var bT=c3(),u3=[null,null];function d3(e,t,n){nm(()=>e(...t),n)}function h3(e,t,n,i,o,l){e.current=i,n.current=!1,o.current&&(o.current=null,l())}function f3(e,t,n,i,o,l,u,f,m,p,y){if(!e)return()=>{};let _=!1,x=null;const S=()=>{if(_||!f.current)return;const k=t.getState();let A,D;try{A=i(k,o.current)}catch($){D=$,x=$}D||(x=null),A===l.current?u.current||p():(l.current=A,m.current=A,u.current=!0,y())};return n.onStateChange=S,n.trySubscribe(),S(),()=>{if(_=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function m3(e,t){return e===t}function p3(e,t,n,{pure:i,areStatesEqual:o=m3,areOwnPropsEqual:l=lg,areStatePropsEqual:u=lg,areMergedPropsEqual:f=lg,forwardRef:m=!1,context:p=bT}={}){const y=p,_=HC(e),x=UC(t),S=YC(n),T=!!e;return A=>{const D=A.displayName||A.name||"Component",$=`Connect(${D})`,O={shouldHandleStateChanges:T,displayName:$,wrappedComponentName:D,WrappedComponent:A,initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:f};function C(H){const[F,W,ae]=R.useMemo(()=>{const{reactReduxForwardedRef:je,...Me}=H;return[H.context,je,Me]},[H]),Q=R.useMemo(()=>{let je=y;return F?.Consumer,je},[F,y]),Y=R.useContext(Q),te=!!H.store&&!!H.store.getState&&!!H.store.dispatch,re=!!Y&&!!Y.store,Se=te?H.store:Y.store,X=re?Y.getServerState:Se.getState,oe=R.useMemo(()=>IC(Se.dispatch,O),[Se]),[J,ye]=R.useMemo(()=>{if(!T)return u3;const je=pT(Se,te?void 0:Y.subscription),Me=je.notifyNestedSubs.bind(je);return[je,Me]},[Se,te,Y]),K=R.useMemo(()=>te?Y:{...Y,subscription:J},[te,Y,J]),U=R.useRef(void 0),B=R.useRef(ae),q=R.useRef(void 0),V=R.useRef(!1),P=R.useRef(!1),Z=R.useRef(void 0);nm(()=>(P.current=!0,()=>{P.current=!1}),[]);const ie=R.useMemo(()=>()=>q.current&&ae===B.current?q.current:oe(Se.getState(),ae),[Se,ae]),me=R.useMemo(()=>Me=>J?f3(T,Se,J,oe,B,U,V,P,q,ye,Me):()=>{},[J]);d3(h3,[B,U,V,ae,q,ye]);let ce;try{ce=R.useSyncExternalStore(me,ie,X?()=>oe(X(),ae):ie)}catch(je){throw Z.current&&(je.message+=`
The error may be correlated with this previous error:
${Z.current.stack}

`),je}nm(()=>{Z.current=void 0,q.current=void 0,U.current=ce});const xe=R.useMemo(()=>R.createElement(A,{...ce,ref:W}),[W,A,ce]);return R.useMemo(()=>T?R.createElement(Q.Provider,{value:K},xe):xe,[Q,xe,K])}const G=R.memo(C);if(G.WrappedComponent=A,G.displayName=C.displayName=$,m){const F=R.forwardRef(function(ae,Q){return R.createElement(G,{...ae,reactReduxForwardedRef:Q})});return F.displayName=$,F.WrappedComponent=A,Ab(F,A)}return Ab(G,A)}}var yT=p3;function g3(e){const{children:t,context:n,serverState:i,store:o}=e,l=R.useMemo(()=>{const m=pT(o);return{store:o,subscription:m,getServerState:i?()=>i:void 0}},[o,i]),u=R.useMemo(()=>o.getState(),[o]);nm(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==o.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=n||bT;return R.createElement(f.Provider,{value:l},t)}var b3=g3,y3="Invariant failed";function v3(e,t){throw new Error(y3)}var is=function(t){var n=t.top,i=t.right,o=t.bottom,l=t.left,u=i-l,f=o-n,m={top:n,right:i,bottom:o,left:l,width:u,height:f,x:l,y:n,center:{x:(i+l)/2,y:(o+n)/2}};return m},cy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},u1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},_3=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},cg={top:0,right:0,bottom:0,left:0},uy=function(t){var n=t.borderBox,i=t.margin,o=i===void 0?cg:i,l=t.border,u=l===void 0?cg:l,f=t.padding,m=f===void 0?cg:f,p=is(cy(n,o)),y=is(u1(n,u)),_=is(u1(y,m));return{marginBox:p,borderBox:is(n),paddingBox:y,contentBox:_,margin:o,border:u,padding:m}},Ni=function(t){var n=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var o=Number(n);return isNaN(o)&&v3(),o},x3=function(){return{x:window.pageXOffset,y:window.pageYOffset}},rm=function(t,n){var i=t.borderBox,o=t.border,l=t.margin,u=t.padding,f=_3(i,n);return uy({borderBox:f,border:o,margin:l,padding:u})},im=function(t,n){return n===void 0&&(n=x3()),rm(t,n)},vT=function(t,n){var i={top:Ni(n.marginTop),right:Ni(n.marginRight),bottom:Ni(n.marginBottom),left:Ni(n.marginLeft)},o={top:Ni(n.paddingTop),right:Ni(n.paddingRight),bottom:Ni(n.paddingBottom),left:Ni(n.paddingLeft)},l={top:Ni(n.borderTopWidth),right:Ni(n.borderRightWidth),bottom:Ni(n.borderBottomWidth),left:Ni(n.borderLeftWidth)};return uy({borderBox:t,margin:i,padding:o,border:l})},_T=function(t){var n=t.getBoundingClientRect(),i=window.getComputedStyle(t);return vT(n,i)},td=function(t){var n=[],i=null,o=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];n=f,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,n)}))};return o.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},o};function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sm.apply(null,arguments)}function xT(e,t){}xT.bind(null,"warn");xT.bind(null,"error");function Za(){}function w3(e,t){return{...e,...t}}function Di(e,t,n){const i=t.map(o=>{const l=w3(n,o.options);return e.addEventListener(o.eventName,o.fn,l),function(){e.removeEventListener(o.eventName,o.fn,l)}});return function(){i.forEach(l=>{l()})}}const S3="Invariant failed";class am extends Error{}am.prototype.toString=function(){return this.message};function ze(e,t){throw new am(S3)}class E3 extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Za,this.onWindowError=n=>{const i=this.getCallbacks();i.isDragging()&&i.tryAbort(),n.error instanceof am&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Di(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof am){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const T3=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,om=e=>e+1,k3=e=>`
  You have lifted an item in position ${om(e.source.index)}
`,wT=(e,t)=>{const n=e.droppableId===t.droppableId,i=om(e.index),o=om(t.index);return n?`
      You have moved the item from position ${i}
      to position ${o}
    `:`
    You have moved the item from position ${i}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},ST=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,A3=e=>{const t=e.destination;if(t)return wT(e.source,t);const n=e.combine;return n?ST(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},d1=e=>`
  The item has returned to its starting position
  of ${om(e.index)}
`,j3=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${d1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${wT(e.source,t)}
    `:n?`
      You have dropped the item.
      ${ST(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${d1(e.source)}
  `},Uf={dragHandleUsageInstructions:T3,onDragStart:k3,onDragUpdate:A3,onDragEnd:j3};function N3(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function ET(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!N3(e[n],t[n]))return!1;return!0}function kt(e,t){const n=R.useState(()=>({inputs:t,result:e()}))[0],i=R.useRef(!0),o=R.useRef(n),u=i.current||!!(t&&o.current.inputs&&ET(t,o.current.inputs))?o.current:{inputs:t,result:e()};return R.useEffect(()=>{i.current=!1,o.current=u},[u]),u.result}function Je(e,t){return kt(()=>e,t)}const Wn={x:0,y:0},ar=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ci=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Va=(e,t)=>e.x===t.x&&e.y===t.y,Ac=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),al=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},nd=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),h1=(e,t)=>Math.min(...t.map(n=>nd(e,n))),TT=e=>t=>({x:e(t.x),y:e(t.y)});var O3=(e,t)=>{const n=is({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const vd=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),f1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],D3={top:0,right:0,bottom:0,left:0},M3=(e,t)=>t?vd(e,t.scroll.diff.displacement):e,C3=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,R3=(e,t)=>t&&t.shouldClipSubject?O3(t.pageMarginBox,e):is(e);var vc=({page:e,withPlaceholder:t,axis:n,frame:i})=>{const o=M3(e.marginBox,i),l=C3(o,n,t),u=R3(l,i);return{page:e,withPlaceholder:t,active:u}},dy=(e,t)=>{e.frame||ze();const n=e.frame,i=ci(t,n.scroll.initial),o=Ac(i),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:i,displacement:o},max:n.scroll.max}},u=vc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Kn(e,t=ET){let n=null;function i(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const l=e.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return i.clear=function(){n=null},i}const kT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),AT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Mm=Kn(e=>Object.values(e)),L3=Kn(e=>Object.values(e));var jc=Kn((e,t)=>L3(t).filter(i=>e===i.descriptor.droppableId).sort((i,o)=>i.descriptor.index-o.descriptor.index));function hy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Cm(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Rm=Kn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),B3=({isMovingForward:e,draggable:t,destination:n,insideDestination:i,previousImpact:o})=>{if(!n.isCombineEnabled||!hy(o))return null;function u(S){const T={type:"COMBINE",combine:{draggableId:S,droppableId:n.descriptor.id}};return{...o,at:T}}const f=o.displaced.all,m=f.length?f[0]:null;if(e)return m?u(m):null;const p=Rm(t,i);if(!m){if(!p.length)return null;const S=p[p.length-1];return u(S.descriptor.id)}const y=p.findIndex(S=>S.descriptor.id===m);y===-1&&ze();const _=y-1;if(_<0)return null;const x=p[_];return u(x.descriptor.id)},Nc=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const jT={point:Wn,value:0},rd={invisible:{},visible:{},all:[]},P3={displaced:rd,displacedBy:jT,at:null};var Bi=(e,t)=>n=>e<=n&&n<=t,NT=e=>{const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return i=>{if(t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right))return!0;const l=t(i.top)||t(i.bottom),u=n(i.left)||n(i.right);if(l&&u)return!0;const m=i.top<e.top&&i.bottom>e.bottom,p=i.left<e.left&&i.right>e.right;return m&&p?!0:m&&u||p&&l}},$3=e=>{const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return i=>t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right)};const fy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},OT={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var I3=e=>t=>{const n=Bi(t.top,t.bottom),i=Bi(t.left,t.right);return o=>e===fy?n(o.top)&&n(o.bottom):i(o.left)&&i(o.right)};const z3=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Wn;return vd(e,n)},U3=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,H3=(e,t,n)=>n(t)(e),my=({target:e,destination:t,viewport:n,withDroppableDisplacement:i,isVisibleThroughFrameFn:o})=>{const l=i?z3(e,t):e;return U3(l,t,o)&&H3(l,n,o)},G3=e=>my({...e,isVisibleThroughFrameFn:NT}),DT=e=>my({...e,isVisibleThroughFrameFn:$3}),F3=e=>my({...e,isVisibleThroughFrameFn:I3(e.destination.axis)}),Y3=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:i,visible:o}=t;if(i[e])return!1;const l=o[e];return l?l.shouldAnimate:!0};function q3(e,t){const n=e.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return is(cy(n,i))}function id({afterDragging:e,destination:t,displacedBy:n,viewport:i,forceShouldAnimate:o,last:l}){return e.reduce(function(f,m){const p=q3(m,n),y=m.descriptor.id;if(f.all.push(y),!G3({target:p,destination:t,viewport:i,withDroppableDisplacement:!0}))return f.invisible[m.descriptor.id]=!0,f;const x=Y3(y,l,o),S={draggableId:y,shouldAnimate:x};return f.visible[y]=S,f},{all:[],visible:{},invisible:{}})}function Z3(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function m1({insideDestination:e,inHomeList:t,displacedBy:n,destination:i}){const o=Z3(e,{inHomeList:t});return{displaced:rd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function lm({draggable:e,insideDestination:t,destination:n,viewport:i,displacedBy:o,last:l,index:u,forceShouldAnimate:f}){const m=Nc(e,n);if(u==null)return m1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return m1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const y=Rm(e,t),_=t.indexOf(p),x=y.slice(_);return{displaced:id({afterDragging:x,destination:n,displacedBy:o,last:l,viewport:i.frame,forceShouldAnimate:f}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function Ka(e,t){return!!t.effected[e]}var V3=({isMovingForward:e,destination:t,draggables:n,combine:i,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const l=i.draggableId,f=n[l].descriptor.index;return Ka(l,o)?e?f:f-1:e?f+1:f},K3=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:i})=>{if(!n.length)return null;const o=i.index,l=e?o+1:o-1,u=n[0].descriptor.index,f=n[n.length-1].descriptor.index,m=t?f:f+1;return l<u||l>m?null:l},W3=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:i,destination:o,insideDestination:l,previousImpact:u,viewport:f,afterCritical:m})=>{const p=u.at;if(p||ze(),p.type==="REORDER"){const _=K3({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return _==null?null:lm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:_})}const y=V3({isMovingForward:e,destination:o,displaced:u.displaced,draggables:i,combine:p.combine,afterCritical:m});return y==null?null:lm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:y})},X3=({displaced:e,afterCritical:t,combineWith:n,displacedBy:i})=>{const o=!!(e.visible[n]||e.invisible[n]);return Ka(n,t)?o?Wn:Ac(i.point):o?i.point:Wn},J3=({afterCritical:e,impact:t,draggables:n})=>{const i=Cm(t);i||ze();const o=i.draggableId,l=n[o].page.borderBox.center,u=X3({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return ar(l,u)};const MT=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Q3=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,py=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,p1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.end]+MT(e,n),py(e,t.marginBox,n)),g1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.start]-Q3(e,n),py(e,t.marginBox,n)),eR=({axis:e,moveInto:t,isMoving:n})=>al(e.line,t.contentBox[e.start]+MT(e,n),py(e,t.contentBox,n));var tR=({impact:e,draggable:t,draggables:n,droppable:i,afterCritical:o})=>{const l=jc(i.descriptor.id,n),u=t.page,f=i.axis;if(!l.length)return eR({axis:f,moveInto:i.page,isMoving:u});const{displaced:m,displacedBy:p}=e,y=m.all[0];if(y){const x=n[y];if(Ka(y,o))return g1({axis:f,moveRelativeTo:x.page,isMoving:u});const S=rm(x.page,p.point);return g1({axis:f,moveRelativeTo:S,isMoving:u})}const _=l[l.length-1];if(_.descriptor.id===t.descriptor.id)return u.borderBox.center;if(Ka(_.descriptor.id,o)){const x=rm(_.page,Ac(o.displacedBy.point));return p1({axis:f,moveRelativeTo:x,isMoving:u})}return p1({axis:f,moveRelativeTo:_.page,isMoving:u})},jb=(e,t)=>{const n=e.frame;return n?ar(t,n.scroll.diff.displacement):t};const nR=({impact:e,draggable:t,droppable:n,draggables:i,afterCritical:o})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?tR({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:o}):J3({impact:e,draggables:i,afterCritical:o})};var Lm=e=>{const t=nR(e),n=e.droppable;return n?jb(n,t):t},CT=(e,t)=>{const n=ci(t,e.scroll.initial),i=Ac(n);return{frame:is({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:i}}}};function b1(e,t){return e.map(n=>t[n])}function rR(e,t){for(let n=0;n<t.length;n++){const i=t[n].visible[e];if(i)return i}return null}var iR=({impact:e,viewport:t,destination:n,draggables:i,maxScrollChange:o})=>{const l=CT(t,ar(t.scroll.current,o)),u=n.frame?dy(n,ar(n.frame.scroll.current,o)):n,f=e.displaced,m=id({afterDragging:b1(f.all,i),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),p=id({afterDragging:b1(f.all,i),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:f,forceShouldAnimate:!1}),y={},_={},x=[f,m,p];return f.all.forEach(T=>{const k=rR(T,x);if(k){_[T]=k;return}y[T]=!0}),{...e,displaced:{all:f.all,invisible:y,visible:_}}},sR=(e,t)=>ar(e.scroll.diff.displacement,t),gy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const i=sR(n,e),o=ci(i,t.page.borderBox.center);return ar(t.client.borderBox.center,o)},RT=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:i,withDroppableDisplacement:o,onlyOnMainAxis:l=!1})=>{const u=ci(n,e.page.borderBox.center),m={target:vd(e.page.borderBox,u),destination:t,withDroppableDisplacement:o,viewport:i};return l?F3(m):DT(m)},aR=({isMovingForward:e,draggable:t,destination:n,draggables:i,previousImpact:o,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:m})=>{if(!n.isEnabled)return null;const p=jc(n.descriptor.id,i),y=Nc(t,n),_=B3({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:o})||W3({isMovingForward:e,isInHomeList:y,draggable:t,draggables:i,destination:n,insideDestination:p,previousImpact:o,viewport:l,afterCritical:m});if(!_)return null;const x=Lm({impact:_,draggable:t,droppable:n,draggables:i,afterCritical:m});if(RT({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:gy({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:_,scrollJumpRequest:null};const T=ci(x,u),k=iR({impact:_,viewport:l,destination:n,draggables:i,maxScrollChange:T});return{clientSelection:f,impact:k,scrollJumpRequest:T}};const Sr=e=>{const t=e.subject.active;return t||ze(),t};var oR=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:o})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,f=Bi(l[u.start],l[u.end]),m=Mm(i).filter(y=>y!==n).filter(y=>y.isEnabled).filter(y=>!!y.subject.active).filter(y=>NT(o.frame)(Sr(y))).filter(y=>{const _=Sr(y);return e?l[u.crossAxisEnd]<_[u.crossAxisEnd]:_[u.crossAxisStart]<l[u.crossAxisStart]}).filter(y=>{const _=Sr(y),x=Bi(_[u.start],_[u.end]);return f(_[u.start])||f(_[u.end])||x(l[u.start])||x(l[u.end])}).sort((y,_)=>{const x=Sr(y)[u.crossAxisStart],S=Sr(_)[u.crossAxisStart];return e?x-S:S-x}).filter((y,_,x)=>Sr(y)[u.crossAxisStart]===Sr(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(y=>Bi(Sr(y)[u.start],Sr(y)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((y,_)=>Sr(y)[u.start]-Sr(_)[u.start])[0]:m.sort((y,_)=>{const x=h1(t,f1(Sr(y))),S=h1(t,f1(Sr(_)));return x!==S?x-S:Sr(y)[u.start]-Sr(_)[u.start]})[0]};const y1=(e,t)=>{const n=e.page.borderBox.center;return Ka(e.descriptor.id,t)?ci(n,t.displacedBy.point):n},lR=(e,t)=>{const n=e.page.borderBox;return Ka(e.descriptor.id,t)?vd(n,Ac(t.displacedBy.point)):n};var cR=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:i,afterCritical:o})=>i.filter(u=>DT({target:lR(u,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const m=nd(e,jb(n,y1(u,o))),p=nd(e,jb(n,y1(f,o)));return m<p?-1:p<m?1:u.descriptor.index-f.descriptor.index})[0]||null,_d=Kn(function(t,n){const i=n[t.line];return{value:i,point:al(t.line,i)}});const uR=(e,t,n)=>{const i=e.axis;if(e.descriptor.mode==="virtual")return al(i.line,t[i.line]);const o=e.subject.page.contentBox[i.size],m=jc(e.descriptor.id,n).reduce((p,y)=>p+y.client.marginBox[i.size],0)+t[i.line]-o;return m<=0?null:al(i.line,m)},LT=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),BT=(e,t,n)=>{const i=e.frame;Nc(t,e)&&ze(),e.subject.withPlaceholder&&ze();const o=_d(e.axis,t.displaceBy).point,l=uR(e,o,n),u={placeholderSize:o,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){const y=vc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:y}}const f=l?ar(i.scroll.max,l):i.scroll.max,m=LT(i,f),p=vc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},dR=e=>{const t=e.subject.withPlaceholder;t||ze();const n=e.frame;if(!n){const u=vc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const i=t.oldFrameMaxScroll;i||ze();const o=LT(n,i),l=vc({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:l,frame:o}};var hR=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:i,draggables:o,destination:l,viewport:u,afterCritical:f})=>{if(!t){if(n.length)return null;const _={displaced:rd,displacedBy:jT,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=Lm({impact:_,draggable:i,droppable:l,draggables:o,afterCritical:f}),S=Nc(i,l)?l:BT(l,i,o);return RT({draggable:i,destination:S,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?_:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const _=t.descriptor.index;return t.descriptor.id===i.descriptor.id||m?_:_+1})(),y=_d(l.axis,i.displaceBy);return lm({draggable:i,insideDestination:n,destination:l,viewport:u,displacedBy:y,last:rd,index:p})},fR=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:i,draggables:o,droppables:l,viewport:u,afterCritical:f})=>{const m=oR({isMovingForward:e,pageBorderBoxCenter:t,source:i,droppables:l,viewport:u});if(!m)return null;const p=jc(m.descriptor.id,o),y=cR({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:f}),_=hR({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:o,moveRelativeTo:y,insideDestination:p,viewport:u,afterCritical:f});if(!_)return null;const x=Lm({impact:_,draggable:n,droppable:m,draggables:o,afterCritical:f});return{clientSelection:gy({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:_,scrollJumpRequest:null}},ui=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const mR=(e,t)=>{const n=ui(e);return n?t[n]:null};var pR=({state:e,type:t})=>{const n=mR(e.impact,e.dimensions.droppables),i=!!n,o=e.dimensions.droppables[e.critical.droppable.id],l=n||o,u=l.axis.direction,f=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(f&&!i)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],y=e.current.page.borderBoxCenter,{draggables:_,droppables:x}=e.dimensions;return f?aR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,destination:l,draggables:_,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):fR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,isOver:l,draggables:_,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Qo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function PT(e){const t=Bi(e.top,e.bottom),n=Bi(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function gR(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function bR({pageBorderBox:e,draggable:t,candidates:n}){const i=t.page.borderBox.center,o=n.map(l=>{const u=l.axis,f=al(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:nd(i,f)}}).sort((l,u)=>u.distance-l.distance);return o[0]?o[0].id:null}function yR({pageBorderBox:e,draggable:t,droppables:n}){const i=Mm(n).filter(o=>{if(!o.isEnabled)return!1;const l=o.subject.active;if(!l||!gR(e,l))return!1;if(PT(l)(e.center))return!0;const u=o.axis,f=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],y=Bi(l[u.crossAxisStart],l[u.crossAxisEnd]),_=y(m),x=y(p);return!_&&!x?!0:_?m<f:p>f});return i.length?i.length===1?i[0].descriptor.id:bR({pageBorderBox:e,draggable:t,candidates:i}):null}const $T=(e,t)=>is(vd(e,t));var vR=(e,t)=>{const n=e.frame;return n?$T(t,n.scroll.diff.value):t};function IT({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function _R({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var xR=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:i,last:o,viewport:l,afterCritical:u})=>{const f=n.axis,m=_d(n.axis,t.displaceBy),p=m.value,y=e[f.start],_=e[f.end],S=Rm(t,i).find(k=>{const A=k.descriptor.id,D=k.page.borderBox.center[f.line],$=Ka(A,u),O=IT({displaced:o,id:A});return $?O?_<=D:y<D-p:O?_<=D+p:y<D})||null,T=_R({draggable:t,closest:S,inHomeList:Nc(t,n)});return lm({draggable:t,insideDestination:i,destination:n,viewport:l,last:o,displacedBy:m,index:T})};const wR=4;var SR=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:i,insideDestination:o,afterCritical:l})=>{if(!i.isCombineEnabled)return null;const u=i.axis,f=_d(i.axis,e.displaceBy),m=f.value,p=t[u.start],y=t[u.end],x=Rm(e,o).find(T=>{const k=T.descriptor.id,A=T.page.borderBox,$=A[u.size]/wR,O=Ka(k,l),C=IT({displaced:n.displaced,id:k});return O?C?y>A[u.start]+$&&y<A[u.end]-$:p>A[u.start]-m+$&&p<A[u.end]-m-$:C?y>A[u.start]+m+$&&y<A[u.end]+m-$:p>A[u.start]+$&&p<A[u.end]-$});return x?{displacedBy:f,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}}:null},zT=({pageOffset:e,draggable:t,draggables:n,droppables:i,previousImpact:o,viewport:l,afterCritical:u})=>{const f=$T(t.page.borderBox,e),m=yR({pageBorderBox:f,draggable:t,droppables:i});if(!m)return P3;const p=i[m],y=jc(p.descriptor.id,n),_=vR(p,f);return SR({pageBorderBoxWithDroppableScroll:_,draggable:t,previousImpact:o,destination:p,insideDestination:y,afterCritical:u})||xR({pageBorderBoxWithDroppableScroll:_,draggable:t,destination:p,insideDestination:y,last:o.displaced,viewport:l,afterCritical:u})},by=(e,t)=>({...e,[t.descriptor.id]:t});const ER=({previousImpact:e,impact:t,droppables:n})=>{const i=ui(e),o=ui(t);if(!i||i===o)return n;const l=n[i];if(!l.subject.withPlaceholder)return n;const u=dR(l);return by(n,u)};var TR=({draggable:e,draggables:t,droppables:n,previousImpact:i,impact:o})=>{const l=ER({previousImpact:i,impact:o,droppables:n}),u=ui(o);if(!u)return l;const f=n[u];if(Nc(e,f)||f.subject.withPlaceholder)return l;const m=BT(f,e,t);return by(l,m)},Ku=({state:e,clientSelection:t,dimensions:n,viewport:i,impact:o,scrollJumpRequest:l})=>{const u=i||e.viewport,f=n||e.dimensions,m=t||e.current.client.selection,p=ci(m,e.initial.client.selection),y={offset:p,selection:m,borderBoxCenter:ar(e.initial.client.borderBoxCenter,p)},_={selection:ar(y.selection,u.scroll.current),borderBoxCenter:ar(y.borderBoxCenter,u.scroll.current),offset:ar(y.offset,u.scroll.diff.value)},x={client:y,page:_};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const S=f.draggables[e.critical.draggable.id],T=o||zT({pageOffset:_.offset,draggable:S,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=TR({draggable:S,impact:T,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function kR(e,t){return e.map(n=>t[n])}var UT=({impact:e,viewport:t,draggables:n,destination:i,forceShouldAnimate:o})=>{const l=e.displaced,u=kR(l.all,n),f=id({afterDragging:u,destination:i,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:l});return{...e,displaced:f}},HT=({impact:e,draggable:t,droppable:n,draggables:i,viewport:o,afterCritical:l})=>{const u=Lm({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:l});return gy({pageBorderBoxCenter:u,draggable:t,viewport:o})},GT=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ze();const i=e.impact,o=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:f}=l,m=u[e.critical.draggable.id],p=ui(i);p||ze();const y=f[p],_=UT({impact:i,viewport:o,destination:y,draggables:u}),x=HT({impact:_,draggable:m,droppable:y,draggables:u,viewport:o,afterCritical:e.afterCritical});return Ku({impact:_,clientSelection:x,state:e,dimensions:l,viewport:o})},AR=e=>({index:e.index,droppableId:e.droppableId}),FT=({draggable:e,home:t,draggables:n,viewport:i})=>{const o=_d(t.axis,e.displaceBy),l=jc(t.descriptor.id,n),u=l.indexOf(e);u===-1&&ze();const f=l.slice(u+1),m=f.reduce((x,S)=>(x[S.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:m};return{impact:{displaced:id({afterDragging:f,destination:t,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:AR(e.descriptor)}},afterCritical:p}},jR=(e,t)=>({draggables:e.draggables,droppables:by(e.droppables,t)}),NR=({draggable:e,offset:t,initialWindowScroll:n})=>{const i=rm(e.client,t),o=im(i,n);return{...e,placeholder:{...e.placeholder,client:i},client:i,page:o}},OR=e=>{const t=e.frame;return t||ze(),t},DR=({additions:e,updatedDroppables:t,viewport:n})=>{const i=n.scroll.diff.value;return e.map(o=>{const l=o.descriptor.droppableId,u=t[l],m=OR(u).scroll.diff.value,p=ar(i,m);return NR({draggable:o,offset:p,initialWindowScroll:n.scroll.initial})})},MR=({state:e,published:t})=>{const n=t.modified.map(D=>{const $=e.dimensions.droppables[D.droppableId];return dy($,D.scroll)}),i={...e.dimensions.droppables,...kT(n)},o=AT(DR({additions:t.additions,updatedDroppables:i,viewport:e.viewport})),l={...e.dimensions.draggables,...o};t.removals.forEach(D=>{delete l[D]});const u={droppables:i,draggables:l},f=ui(e.impact),m=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],y=u.droppables[e.critical.droppable.id],{impact:_,afterCritical:x}=FT({draggable:p,home:y,draggables:l,viewport:e.viewport}),S=m&&m.isCombineEnabled?e.impact:_,T=zT({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:S,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:_,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Nb=e=>e.movementMode==="SNAP",ug=(e,t,n)=>{const i=jR(e.dimensions,t);return!Nb(e)||n?Ku({state:e,dimensions:i}):GT({state:e,dimensions:i})};function dg(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const v1={phase:"IDLE",completed:null,shouldFlush:!1};var CR=(e=v1,t)=>{if(t.type==="FLUSH")return{...v1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ze();const{critical:n,clientSelection:i,viewport:o,dimensions:l,movementMode:u}=t.payload,f=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:i,borderBoxCenter:f.client.borderBox.center,offset:Wn},y={client:p,page:{selection:ar(p.selection,o.scroll.initial),borderBoxCenter:ar(p.selection,o.scroll.initial),offset:ar(p.selection,o.scroll.diff.value)}},_=Mm(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:S}=FT({draggable:f,home:m,draggables:l.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:y,current:y,isWindowScrollAllowed:_,impact:x,afterCritical:S,onLiftImpact:x,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ze(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ze(),MR({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{client:n}=t.payload;return Va(n,e.current.client.selection)?e:Ku({state:e,clientSelection:n,impact:Nb(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return dg(e);Qo(e)||ze();const{id:n,newScroll:i}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const l=dy(o,i);return ug(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isEnabled===i&&ze();const l={...o,isEnabled:i};return ug(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isCombineEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isCombineEnabled===i&&ze();const l={...o,isCombineEnabled:i};return ug(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Qo(e)||ze(),e.isWindowScrollAllowed||ze();const n=t.payload.newScroll;if(Va(e.viewport.scroll.current,n))return dg(e);const i=CT(e.viewport,n);return Nb(e)?GT({state:e,viewport:i}):Ku({state:e,viewport:i})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qo(e))return e;const n=t.payload.maxScroll;if(Va(n,e.viewport.scroll.max))return e;const i={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:i}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ze();const n=pR({state:e,type:t.type});return n?Ku({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ze(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:i,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ze(),{phase:"DROP_ANIMATING",completed:n,dropDuration:i,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Bt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const RR=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),LR=e=>({type:"LIFT",payload:e}),BR=e=>({type:"INITIAL_PUBLISH",payload:e}),PR=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),$R=()=>({type:"COLLECTION_STARTING",payload:null}),IR=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),zR=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),UR=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),YT=e=>({type:"MOVE",payload:e}),HR=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),GR=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),FR=()=>({type:"MOVE_UP",payload:null}),YR=()=>({type:"MOVE_DOWN",payload:null}),qR=()=>({type:"MOVE_RIGHT",payload:null}),ZR=()=>({type:"MOVE_LEFT",payload:null}),yy=()=>({type:"FLUSH",payload:null}),VR=e=>({type:"DROP_ANIMATE",payload:e}),vy=e=>({type:"DROP_COMPLETE",payload:e}),qT=e=>({type:"DROP",payload:e}),KR=e=>({type:"DROP_PENDING",payload:e}),ZT=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var WR=e=>({getState:t,dispatch:n})=>i=>o=>{if(!Bt(o,"LIFT")){i(o);return}const{id:l,clientSelection:u,movementMode:f}=o.payload,m=t();m.phase==="DROP_ANIMATING"&&n(vy({completed:m.completed})),t().phase!=="IDLE"&&ze(),n(yy()),n(RR({draggableId:l,movementMode:f}));const y={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:_,dimensions:x,viewport:S}=e.startPublishing(y);n(BR({critical:_,dimensions:x,clientSelection:u,movementMode:f,viewport:S}))},XR=e=>()=>t=>n=>{Bt(n,"INITIAL_PUBLISH")&&e.dragging(),Bt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Bt(n,"FLUSH")||Bt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const _y={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},sd={opacity:{drop:0,combining:.7},scale:{drop:.75}},VT={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fo=`${VT.outOfTheWay}s ${_y.outOfTheWay}`,Wu={fluid:`opacity ${Fo}`,snap:`transform ${Fo}, opacity ${Fo}`,drop:e=>{const t=`${e}s ${_y.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fo}`,placeholder:`height ${Fo}, width ${Fo}, margin ${Fo}`},_1=e=>Va(e,Wn)?void 0:`translate(${e.x}px, ${e.y}px)`,Ob={moveTo:_1,drop:(e,t)=>{const n=_1(e);if(n)return t?`${n} scale(${sd.scale.drop})`:n}},{minDropTime:Db,maxDropTime:KT}=VT,JR=KT-Db,x1=1500,QR=.6;var e5=({current:e,destination:t,reason:n})=>{const i=nd(e,t);if(i<=0)return Db;if(i>=x1)return KT;const o=i/x1,l=Db+JR*o,u=n==="CANCEL"?l*QR:l;return Number(u.toFixed(2))},t5=({impact:e,draggable:t,dimensions:n,viewport:i,afterCritical:o})=>{const{draggables:l,droppables:u}=n,f=ui(e),m=f?u[f]:null,p=u[t.descriptor.droppableId],y=HT({impact:e,draggable:t,draggables:l,afterCritical:o,droppable:m||p,viewport:i});return ci(y,t.client.borderBox.center)},n5=({draggables:e,reason:t,lastImpact:n,home:i,viewport:o,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:UT({draggables:e,impact:l,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:rd},didDropInsideDroppable:!0};const r5=({getState:e,dispatch:t})=>n=>i=>{if(!Bt(i,"DROP")){n(i);return}const o=e(),l=i.payload.reason;if(o.phase==="COLLECTING"){t(KR({reason:l}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&ze(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ze();const f=o.critical,m=o.dimensions,p=m.draggables[o.critical.draggable.id],{impact:y,didDropInsideDroppable:_}=n5({reason:l,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),x=_?hy(y):null,S=_?Cm(y):null,T={index:f.draggable.index,droppableId:f.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:o.movementMode,destination:x,combine:S},A=t5({impact:y,draggable:p,dimensions:m,viewport:o.viewport,afterCritical:o.afterCritical}),D={critical:o.critical,afterCritical:o.afterCritical,result:k,impact:y};if(!(!Va(o.current.client.offset,A)||!!k.combine)){t(vy({completed:D}));return}const O=e5({current:o.current.client.offset,destination:A,reason:l});t(VR({newHomeClientOffset:A,dropDuration:O,completed:D}))};var WT=()=>({x:window.pageXOffset,y:window.pageYOffset});function i5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function s5({onWindowScroll:e}){function t(){e(WT())}const n=td(t),i=i5(n);let o=Za;function l(){return o!==Za}function u(){l()&&ze(),o=Di(window,[i])}function f(){l()||ze(),n.cancel(),o(),o=Za}return{start:u,stop:f,isActive:l}}const a5=e=>Bt(e,"DROP_COMPLETE")||Bt(e,"DROP_ANIMATE")||Bt(e,"FLUSH"),o5=e=>{const t=s5({onWindowScroll:n=>{e.dispatch(HR({newScroll:n}))}});return n=>i=>{!t.isActive()&&Bt(i,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&a5(i)&&t.stop(),n(i)}};var l5=e=>{let t=!1,n=!1;const i=setTimeout(()=>{n=!0}),o=l=>{t||n||(t=!0,e(l),clearTimeout(i))};return o.wasCalled=()=>t,o},c5=()=>{const e=[],t=o=>{const l=e.findIndex(f=>f.timerId===o);l===-1&&ze();const[u]=e.splice(l,1);u.callback()};return{add:o=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:o};e.push(u)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const u5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,d5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,h5=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,i=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&i},Mu=(e,t)=>{t()},tf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function hg(e,t,n,i){if(!e){n(i(t));return}const o=l5(n);e(t,{announce:o}),o.wasCalled()||n(i(t))}var f5=(e,t)=>{const n=c5();let i=null;const o=(_,x)=>{i&&ze(),Mu("onBeforeCapture",()=>{const S=e().onBeforeCapture;S&&S({draggableId:_,mode:x})})},l=(_,x)=>{i&&ze(),Mu("onBeforeDragStart",()=>{const S=e().onBeforeDragStart;S&&S(tf(_,x))})},u=(_,x)=>{i&&ze();const S=tf(_,x);i={mode:x,lastCritical:_,lastLocation:S.source,lastCombine:null},n.add(()=>{Mu("onDragStart",()=>hg(e().onDragStart,S,t,Uf.onDragStart))})},f=(_,x)=>{const S=hy(x),T=Cm(x);i||ze();const k=!h5(_,i.lastCritical);k&&(i.lastCritical=_);const A=!u5(i.lastLocation,S);A&&(i.lastLocation=S);const D=!d5(i.lastCombine,T);if(D&&(i.lastCombine=T),!k&&!A&&!D)return;const $={...tf(_,i.mode),combine:T,destination:S};n.add(()=>{Mu("onDragUpdate",()=>hg(e().onDragUpdate,$,t,Uf.onDragUpdate))})},m=()=>{i||ze(),n.flush()},p=_=>{i||ze(),i=null,Mu("onDragEnd",()=>hg(e().onDragEnd,_,t,Uf.onDragEnd))};return{beforeCapture:o,beforeStart:l,start:u,update:f,flush:m,drop:p,abort:()=>{if(!i)return;const _={...tf(i.lastCritical,i.mode),combine:null,destination:null,reason:"CANCEL"};p(_)}}},m5=(e,t)=>{const n=f5(e,t);return i=>o=>l=>{if(Bt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Bt(l,"INITIAL_PUBLISH")){const f=l.payload.critical;n.beforeStart(f,l.payload.movementMode),o(l),n.start(f,l.payload.movementMode);return}if(Bt(l,"DROP_COMPLETE")){const f=l.payload.completed.result;n.flush(),o(l),n.drop(f);return}if(o(l),Bt(l,"FLUSH")){n.abort();return}const u=i.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const p5=e=>t=>n=>{if(!Bt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const i=e.getState();i.phase!=="DROP_ANIMATING"&&ze(),e.dispatch(vy({completed:i.completed}))},g5=e=>{let t=null,n=null;function i(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>l=>{if((Bt(l,"FLUSH")||Bt(l,"DROP_COMPLETE")||Bt(l,"DROP_ANIMATION_FINISHED"))&&i(),o(l),!Bt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(ZT())}};n=requestAnimationFrame(()=>{n=null,t=Di(window,[u])})}};var b5=e=>()=>t=>n=>{(Bt(n,"DROP_COMPLETE")||Bt(n,"FLUSH")||Bt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},y5=e=>{let t=!1;return()=>n=>i=>{if(Bt(i,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(i.payload.critical.draggable.id),n(i),e.tryRestoreFocusRecorded();return}if(n(i),!!t){if(Bt(i,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Bt(i,"DROP_COMPLETE")){t=!1;const o=i.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const v5=e=>Bt(e,"DROP_COMPLETE")||Bt(e,"DROP_ANIMATE")||Bt(e,"FLUSH");var _5=e=>t=>n=>i=>{if(v5(i)){e.stop(),n(i);return}if(Bt(i,"INITIAL_PUBLISH")){n(i);const o=t.getState();o.phase!=="DRAGGING"&&ze(),e.start(o);return}n(i),e.scroll(t.getState())};const x5=e=>t=>n=>{if(t(n),!Bt(n,"PUBLISH_WHILE_DRAGGING"))return;const i=e.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||e.dispatch(qT({reason:i.reason})))},w5=hT;var S5=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:i,announce:o,autoScroller:l})=>dT(CR,w5(_C(XR(n),b5(e),WR(e),r5,p5,g5,x5,_5(l),o5,y5(t),m5(i,o))));const fg=()=>({additions:{},removals:{},modified:{}});function E5({registry:e,callbacks:t}){let n=fg(),i=null;const o=()=>{i||(t.collectionStarting(),i=requestAnimationFrame(()=>{i=null;const{additions:m,removals:p,modified:y}=n,_=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Wn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(y).map(T=>{const A=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:A}}),S={additions:_,removals:Object.keys(p),modified:x};n=fg(),t.publish(S)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],o()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],o()},stop:()=>{i&&(cancelAnimationFrame(i),i=null,n=fg())}}}var XT=({scrollHeight:e,scrollWidth:t,height:n,width:i})=>{const o=ci({x:t,y:e},{x:i,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},JT=()=>{const e=document.documentElement;return e||ze(),e},QT=()=>{const e=JT();return XT({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},T5=()=>{const e=WT(),t=QT(),n=e.y,i=e.x,o=JT(),l=o.clientWidth,u=o.clientHeight,f=i+l,m=n+u;return{frame:is({top:n,left:i,right:f,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Wn,displacement:Wn}}}},k5=({critical:e,scrollOptions:t,registry:n})=>{const i=T5(),o=i.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(y=>y.callbacks.getDimensionAndWatchScroll(o,t)),f=n.draggable.getAllByType(e.draggable.type).map(y=>y.getDimension(o));return{dimensions:{draggables:AT(f),droppables:kT(u)},critical:e,viewport:i}};function w1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var A5=(e,t)=>{let n=null;const i=E5({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(x,S)=>{e.droppable.exists(x)||ze(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:S})},l=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:S}))},u=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableScroll({id:x,newScroll:S}))},f=(x,S)=>{n&&e.droppable.getById(x).callbacks.scroll(S)},m=()=>{if(!n)return;i.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(S=>S.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||ze();const S=n.critical.draggable;x.type==="ADDITION"&&w1(e,S,x.value)&&i.add(x.value),x.type==="REMOVAL"&&w1(e,S,x.value)&&i.remove(x.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{n&&ze();const S=e.draggable.getById(x.draggableId),T=e.droppable.getById(S.descriptor.droppableId),k={draggable:S.descriptor,droppable:T.descriptor},A=e.subscribe(p);return n={critical:k,unsubscribe:A},k5({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},ek=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",j5=e=>{window.scrollBy(e.x,e.y)};const N5=Kn(e=>Mm(e).filter(t=>!(!t.isEnabled||!t.frame))),O5=(e,t)=>N5(t).find(i=>(i.frame||ze(),PT(i.frame.pageMarginBox)(e)))||null;var D5=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return O5(e,n)};const ad={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var M5=(e,t,n=()=>ad)=>{const i=n(),o=e[t.size]*i.startFromPercentage,l=e[t.size]*i.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:l}},tk=({startOfRange:e,endOfRange:t,current:n})=>{const i=t-e;return i===0?0:(n-e)/i},xy=1,C5=(e,t,n=()=>ad)=>{const i=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return i.maxPixelScroll;if(e===t.startScrollingFrom)return xy;const l=1-tk({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=i.maxPixelScroll*i.ease(l);return Math.ceil(u)},R5=(e,t,n)=>{const i=n(),o=i.durationDampening.accelerateAt,l=i.durationDampening.stopDampeningAt,u=t,f=l,p=Date.now()-u;if(p>=l)return e;if(p<o)return xy;const y=tk({startOfRange:o,endOfRange:f,current:p}),_=e*i.ease(y);return Math.ceil(_)},S1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=C5(e,t,o);return l===0?0:i?Math.max(R5(l,n,o),xy):l},E1=({container:e,distanceToEdges:t,dragStartTime:n,axis:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=M5(e,i,l);return t[i.end]<t[i.start]?S1({distanceToEdge:t[i.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l}):-1*S1({distanceToEdge:t[i.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l})},L5=({container:e,subject:t,proposedScroll:n})=>{const i=t.height>e.height,o=t.width>e.width;return!o&&!i?n:o&&i?null:{x:o?0:n.x,y:i?0:n.y}};const B5=TT(e=>e===0?0:e);var nk=({dragStartTime:e,container:t,subject:n,center:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},f=E1({container:t,distanceToEdges:u,dragStartTime:e,axis:fy,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),m=E1({container:t,distanceToEdges:u,dragStartTime:e,axis:OT,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),p=B5({x:m,y:f});if(Va(p,Wn))return null;const y=L5({container:t,subject:n,proposedScroll:p});return y?Va(y,Wn)?null:y:null};const P5=TT(e=>e===0?0:e>0?1:-1),wy=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:i})=>{const o=ar(t,i),l={x:e(o.x,n.x),y:e(o.y,n.y)};return Va(l,Wn)?null:l}})(),rk=({max:e,current:t,change:n})=>{const i={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=P5(n),l=wy({max:i,current:t,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},Sy=(e,t)=>rk({current:e.scroll.current,max:e.scroll.max,change:t}),$5=(e,t)=>{if(!Sy(e,t))return null;const n=e.scroll.max,i=e.scroll.current;return wy({current:i,max:n,change:t})},Ey=(e,t)=>{const n=e.frame;return n?rk({current:n.scroll.current,max:n.scroll.max,change:t}):!1},I5=(e,t)=>{const n=e.frame;return!n||!Ey(e,t)?null:wy({current:n.scroll.current,max:n.scroll.max,change:t})};var z5=({viewport:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=nk({dragStartTime:i,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return u&&Sy(e,u)?u:null},U5=({droppable:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const f=nk({dragStartTime:i,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return f&&Ey(e,f)?f:null},T1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:i,scrollDroppable:o,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const _=e.viewport,x=z5({dragStartTime:t,viewport:_,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){i(x);return}}const p=D5({center:u,destination:ui(e.impact),droppables:e.dimensions.droppables});if(!p)return;const y=U5({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});y&&o(p.descriptor.id,y)},H5=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ad})=>{const i=td(e),o=td(t);let l=null;const u=p=>{l||ze();const{shouldUseTimeDampening:y,dragStartTime:_}=l;T1({state:p,scrollWindow:i,scrollDroppable:o,dragStartTime:_,shouldUseTimeDampening:y,getAutoScrollerOptions:n})};return{start:p=>{l&&ze();const y=Date.now();let _=!1;const x=()=>{_=!0};T1({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:y,shouldUseTimeDampening:_},_&&u(p)},stop:()=>{l&&(i.cancel(),o.cancel(),l=null)},scroll:u}},G5=({move:e,scrollDroppable:t,scrollWindow:n})=>{const i=(f,m)=>{const p=ar(f.current.client.selection,m);e({client:p})},o=(f,m)=>{if(!Ey(f,m))return m;const p=I5(f,m);if(!p)return t(f.descriptor.id,m),null;const y=ci(m,p);return t(f.descriptor.id,y),ci(m,y)},l=(f,m,p)=>{if(!f||!Sy(m,p))return p;const y=$5(m,p);if(!y)return n(p),null;const _=ci(p,y);return n(_),ci(p,_)};return f=>{const m=f.scrollJumpRequest;if(!m)return;const p=ui(f.impact);p||ze();const y=o(f.dimensions.droppables[p],m);if(!y)return;const _=f.viewport,x=l(f.isWindowScrollAllowed,_,y);x&&i(f,x)}},F5=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:i})=>{const o=H5({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:i}),l=G5({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(i().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){o.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:o.start,stop:o.stop}};const _c="data-rfd",xc=(()=>{const e=`${_c}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Mb=(()=>{const e=`${_c}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Y5=(()=>{const e=`${_c}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),k1={contextId:`${_c}-scroll-container-context-id`},q5=e=>t=>`[${t}="${e}"]`,Cu=(e,t)=>e.map(n=>{const i=n.styles[t];return i?`${n.selector} { ${i} }`:""}).join(" "),Z5="pointer-events: none;";var V5=e=>{const t=q5(e),n=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(xc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:Z5,dropAnimating:f}}})(),i=(()=>{const f=`
      transition: ${Wu.outOfTheWay};
    `;return{selector:t(Mb.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),o={selector:t(Y5.contextId),styles:{always:"overflow-anchor: none;"}},u=[i,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Cu(u,"always"),resting:Cu(u,"resting"),dragging:Cu(u,"dragging"),dropAnimating:Cu(u,"dropAnimating"),userCancel:Cu(u,"userCancel")}};const di=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?R.useLayoutEffect:R.useEffect,mg=()=>{const e=document.querySelector("head");return e||ze(),e},A1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function K5(e,t){const n=kt(()=>V5(e),[e]),i=R.useRef(null),o=R.useRef(null),l=Je(Kn(_=>{const x=o.current;x||ze(),x.textContent=_}),[]),u=Je(_=>{const x=i.current;x||ze(),x.textContent=_},[]);di(()=>{!i.current&&!o.current||ze();const _=A1(t),x=A1(t);return i.current=_,o.current=x,_.setAttribute(`${_c}-always`,e),x.setAttribute(`${_c}-dynamic`,e),mg().appendChild(_),mg().appendChild(x),u(n.always),l(n.resting),()=>{const S=T=>{const k=T.current;k||ze(),mg().removeChild(k),T.current=null};S(i),S(o)}},[t,u,l,n.always,n.resting,e]);const f=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(_=>{if(_==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{o.current&&l(n.resting)},[l,n.resting]);return kt(()=>({dragging:f,dropping:m,resting:p}),[f,m,p])}function ik(e,t){return Array.from(e.querySelectorAll(t))}var sk=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Bm(e){return e instanceof sk(e).HTMLElement}function W5(e,t){const n=`[${xc.contextId}="${e}"]`,i=ik(document,n);if(!i.length)return null;const o=i.find(l=>l.getAttribute(xc.draggableId)===t);return!o||!Bm(o)?null:o}function X5(e){const t=R.useRef({}),n=R.useRef(null),i=R.useRef(null),o=R.useRef(!1),l=Je(function(x,S){const T={id:x,focus:S};return t.current[x]=T,function(){const A=t.current;A[x]!==T&&delete A[x]}},[]),u=Je(function(x){const S=W5(e,x);S&&S!==document.activeElement&&S.focus()},[e]),f=Je(function(x,S){n.current===x&&(n.current=S)},[]),m=Je(function(){i.current||o.current&&(i.current=requestAnimationFrame(()=>{i.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const S=document.activeElement;S&&S.getAttribute(xc.draggableId)===x&&(n.current=x)},[]);return di(()=>(o.current=!0,function(){o.current=!1;const x=i.current;x&&cancelAnimationFrame(x)}),[]),kt(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:f}),[l,p,m,f])}function J5(){const e={draggables:{},droppables:{}},t=[];function n(_){return t.push(_),function(){const S=t.indexOf(_);S!==-1&&t.splice(S,1)}}function i(_){t.length&&t.forEach(x=>x(_))}function o(_){return e.draggables[_]||null}function l(_){const x=o(_);return x||ze(),x}const u={register:_=>{e.draggables[_.descriptor.id]=_,i({type:"ADDITION",value:_})},update:(_,x)=>{const S=e.draggables[x.descriptor.id];S&&S.uniqueId===_.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[_.descriptor.id]=_)},unregister:_=>{const x=_.descriptor.id,S=o(x);S&&_.uniqueId===S.uniqueId&&(delete e.draggables[x],e.droppables[_.descriptor.droppableId]&&i({type:"REMOVAL",value:_}))},getById:l,findById:o,exists:_=>!!o(_),getAllByType:_=>Object.values(e.draggables).filter(x=>x.descriptor.type===_)};function f(_){return e.droppables[_]||null}function m(_){const x=f(_);return x||ze(),x}const p={register:_=>{e.droppables[_.descriptor.id]=_},unregister:_=>{const x=f(_.descriptor.id);x&&_.uniqueId===x.uniqueId&&delete e.droppables[_.descriptor.id]},getById:m,findById:f,exists:_=>!!f(_),getAllByType:_=>Object.values(e.droppables).filter(x=>x.descriptor.type===_)};function y(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:y}}function Q5(){const e=kt(J5,[]);return R.useEffect(()=>function(){e.clean()},[e]),e}var Ty=rn.createContext(null),cm=()=>{const e=document.body;return e||ze(),e};const eL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},tL=e=>`rfd-announcement-${e}`;function nL(e){const t=kt(()=>tL(e),[e]),n=R.useRef(null);return R.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),sm(l.style,eL),cm().appendChild(l),function(){setTimeout(function(){const m=cm();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(o=>{const l=n.current;if(l){l.textContent=o;return}},[])}const rL={separator:"::"};function ky(e,t=rL){const n=rn.useId();return kt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function iL({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function sL({contextId:e,text:t}){const n=ky("hidden-text",{separator:"-"}),i=kt(()=>iL({contextId:e,uniqueId:n}),[n,e]);return R.useEffect(function(){const l=document.createElement("div");return l.id=i,l.textContent=t,l.style.display="none",cm().appendChild(l),function(){const f=cm();f.contains(l)&&f.removeChild(l)}},[i,t]),i}var Pm=rn.createContext(null);function ak(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),t}function aL(){let e=null;function t(){return!!e}function n(u){return u===e}function i(u){e&&ze();const f={abandon:u};return e=f,f}function o(){e||ze(),e=null}function l(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:i,release:o,tryAbandon:l}}function od(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const oL=9,lL=13,Ay=27,ok=32,cL=33,uL=34,dL=35,hL=36,fL=37,mL=38,pL=39,gL=40,bL={[lL]:!0,[oL]:!0};var lk=e=>{bL[e.keyCode]&&e.preventDefault()};const $m=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(i=>`on${i}`in document)||e})(),ck=0,j1=5;function yL(e,t){return Math.abs(t.x-e.x)>=j1||Math.abs(t.y-e.y)>=j1}const N1={type:"IDLE"};function vL({cancel:e,completed:t,getPhase:n,setPhase:i}){return[{eventName:"mousemove",fn:o=>{const{button:l,clientX:u,clientY:f}=o;if(l!==ck)return;const m={x:u,y:f},p=n();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&ze();const y=p.point;if(!yL(y,m))return;o.preventDefault();const _=p.actions.fluidLift(m);i({type:"DRAGGING",actions:_})}},{eventName:"mouseup",fn:o=>{const l=n();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===Ay){o.preventDefault(),e();return}lk(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const l=n();if(l.type==="IDLE"&&ze(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:$m,fn:e}]}function _L(e){const t=R.useRef(N1),n=R.useRef(Za),i=kt(()=>({eventName:"mousedown",fn:function(_){if(_.defaultPrevented||_.button!==ck||_.ctrlKey||_.metaKey||_.shiftKey||_.altKey)return;const x=e.findClosestDraggableId(_);if(!x)return;const S=e.tryGetLock(x,u,{sourceEvent:_});if(!S)return;_.preventDefault();const T={x:_.clientX,y:_.clientY};n.current(),p(S,T)}}),[e]),o=kt(()=>({eventName:"webkitmouseforcewillbegin",fn:y=>{if(y.defaultPrevented)return;const _=e.findClosestDraggableId(y);if(!_)return;const x=e.findOptionsForDraggable(_);x&&(x.shouldRespectForcePress||e.canGetLock(_)&&y.preventDefault())}}),[e]),l=Je(function(){const _={passive:!1,capture:!0};n.current=Di(window,[o,i],_)},[o,i]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=N1,n.current(),l())},[l]),f=Je(()=>{const y=t.current;u(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[u]),m=Je(function(){const _={capture:!0,passive:!1},x=vL({cancel:f,completed:u,getPhase:()=>t.current,setPhase:S=>{t.current=S}});n.current=Di(window,x,_)},[f,u]),p=Je(function(_,x){t.current.type!=="IDLE"&&ze(),t.current={type:"PENDING",point:x,actions:_},m()},[m]);di(function(){return l(),function(){n.current()}},[l])}function xL(){}const wL={[uL]:!0,[cL]:!0,[hL]:!0,[dL]:!0};function SL(e,t){function n(){t(),e.cancel()}function i(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===Ay){o.preventDefault(),n();return}if(o.keyCode===ok){o.preventDefault(),i();return}if(o.keyCode===gL){o.preventDefault(),e.moveDown();return}if(o.keyCode===mL){o.preventDefault(),e.moveUp();return}if(o.keyCode===pL){o.preventDefault(),e.moveRight();return}if(o.keyCode===fL){o.preventDefault(),e.moveLeft();return}if(wL[o.keyCode]){o.preventDefault();return}lk(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:$m,fn:n}]}function EL(e){const t=R.useRef(xL),n=kt(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==ok)return;const u=e.findClosestDraggableId(l);if(!u)return;const f=e.tryGetLock(u,y,{sourceEvent:l});if(!f)return;l.preventDefault();let m=!0;const p=f.snapLift();t.current();function y(){m||ze(),m=!1,t.current(),i()}t.current=Di(window,SL(p,y),{capture:!0,passive:!1})}}),[e]),i=Je(function(){const l={passive:!1,capture:!0};t.current=Di(window,[n],l)},[n]);di(function(){return i(),function(){t.current()}},[i])}const pg={type:"IDLE"},TL=120,kL=.15;function AL({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Ay&&n.preventDefault(),e()}},{eventName:$m,fn:e}]}function jL({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:l,clientY:u}=i.touches[0],f={x:l,y:u};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:i=>{if(n().type!=="DRAGGING"){e();return}i.preventDefault(),e()}},{eventName:"touchforcechange",fn:i=>{const o=n();o.type==="IDLE"&&ze();const l=i.touches[0];if(!l||!(l.force>=kL))return;const f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&e();return}if(f){if(o.hasMoved){i.preventDefault();return}e();return}i.preventDefault()}},{eventName:$m,fn:e}]}function NL(e){const t=R.useRef(pg),n=R.useRef(Za),i=Je(function(){return t.current},[]),o=Je(function(S){t.current=S},[]),l=kt(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const T=e.findClosestDraggableId(S);if(!T)return;const k=e.tryGetLock(T,f,{sourceEvent:S});if(!k)return;const A=S.touches[0],{clientX:D,clientY:$}=A,O={x:D,y:$};n.current(),_(k,O)}}),[e]),u=Je(function(){const S={capture:!0,passive:!1};n.current=Di(window,[l],S)},[l]),f=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(pg),n.current(),u())},[u,o]),m=Je(()=>{const x=t.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Je(function(){const S={capture:!0,passive:!1},T={cancel:m,completed:f,getPhase:i},k=Di(window,jL(T),S),A=Di(window,AL(T),S);n.current=function(){k(),A()}},[m,i,f]),y=Je(function(){const S=i();S.type!=="PENDING"&&ze();const T=S.actions.fluidLift(S.point);o({type:"DRAGGING",actions:T,hasMoved:!1})},[i,o]),_=Je(function(S,T){i().type!=="IDLE"&&ze();const k=setTimeout(y,TL);o({type:"PENDING",point:T,actions:S,longPressTimerId:k}),p()},[p,i,o,y]);di(function(){return u(),function(){n.current();const T=i();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),o(pg))}},[i,u,o]),di(function(){return Di(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const OL=["input","button","textarea","select","option","optgroup","video","audio"];function uk(e,t){if(t==null)return!1;if(OL.includes(t.tagName.toLowerCase()))return!0;const i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===e?!1:uk(e,t.parentElement)}function DL(e,t){const n=t.target;return Bm(n)?uk(e,n):!1}var ML=e=>is(e.getBoundingClientRect()).center;function CL(e){return e instanceof sk(e).Element}const RL=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(i=>i in Element.prototype)||e})();function dk(e,t){return e==null?null:e[RL](t)?e:dk(e.parentElement,t)}function LL(e,t){return e.closest?e.closest(t):dk(e,t)}function BL(e){return`[${xc.contextId}="${e}"]`}function PL(e,t){const n=t.target;if(!CL(n))return null;const i=BL(e),o=LL(n,i);return!o||!Bm(o)?null:o}function $L(e,t){const n=PL(e,t);return n?n.getAttribute(xc.draggableId):null}function IL(e,t){const n=`[${Mb.contextId}="${e}"]`,o=ik(document,n).find(l=>l.getAttribute(Mb.id)===t);return!o||!Bm(o)?null:o}function zL(e){e.preventDefault()}function nf({expected:e,phase:t,isLockActive:n,shouldWarn:i}){return!(!n()||e!==t)}function hk({lockAPI:e,store:t,registry:n,draggableId:i}){if(e.isClaimed())return!1;const o=n.draggable.findById(i);return!(!o||!o.options.isEnabled||!ek(t.getState(),i))}function UL({lockAPI:e,contextId:t,store:n,registry:i,draggableId:o,forceSensorStop:l,sourceEvent:u}){if(!hk({lockAPI:e,store:n,registry:i,draggableId:o}))return null;const m=i.draggable.getById(o),p=IL(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&DL(p,u))return null;const y=e.claim(l||Za);let _="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function S(){return e.isActive(y)}function T(M,G){nf({expected:M,phase:_,isLockActive:S,shouldWarn:!0})&&n.dispatch(G())}const k=T.bind(null,"DRAGGING");function A(M){function G(){e.release(),_="COMPLETED"}_!=="PRE_DRAG"&&(G(),ze()),n.dispatch(LR(M.liftActionArgs)),_="DRAGGING";function H(F,W={shouldBlockNextClick:!1}){if(M.cleanup(),W.shouldBlockNextClick){const ae=Di(window,[{eventName:"click",fn:zL,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ae)}G(),n.dispatch(qT({reason:F}))}return{isActive:()=>nf({expected:"DRAGGING",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,drop:F=>H("DROP",F),cancel:F=>H("CANCEL",F),...M.actions}}function D(M){const G=td(F=>{k(()=>YT({client:F}))});return{...A({liftActionArgs:{id:o,clientSelection:M,movementMode:"FLUID"},cleanup:()=>G.cancel(),actions:{move:G}}),move:G}}function $(){const M={moveUp:()=>k(FR),moveRight:()=>k(qR),moveDown:()=>k(YR),moveLeft:()=>k(ZR)};return A({liftActionArgs:{id:o,clientSelection:ML(p),movementMode:"SNAP"},cleanup:Za,actions:M})}function O(){nf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!0})&&e.release()}return{isActive:()=>nf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:D,snapLift:$,abort:O}}const HL=[_L,EL,NL];function GL({contextId:e,store:t,registry:n,customSensors:i,enableDefaultSensors:o}){const l=[...o?HL:[],...i||[]],u=R.useState(()=>aL())[0],f=Je(function(A,D){od(A)&&!od(D)&&u.tryAbandon()},[u]);di(function(){let A=t.getState();return t.subscribe(()=>{const $=t.getState();f(A,$),A=$})},[u,t,f]),di(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>hk({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,A,D)=>UL({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:A||null,sourceEvent:D&&D.sourceEvent?D.sourceEvent:null}),[e,u,n,t]),y=Je(k=>$L(e,k),[e]),_=Je(k=>{const A=n.draggable.findById(k);return A?A.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(yy()))},[u,t]),S=Je(()=>u.isClaimed(),[u]),T=kt(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:y,findOptionsForDraggable:_,tryReleaseLock:x,isLockClaimed:S}),[m,p,y,_,x,S]);for(let k=0;k<l.length;k++)l[k](T)}const FL=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Dm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),YL=e=>({...ad,...e.autoScrollerOptions,durationDampening:{...ad.durationDampening,...e.autoScrollerOptions}});function Ru(e){return e.current||ze(),e.current}function qL(e){const{contextId:t,setCallbacks:n,sensors:i,nonce:o,dragHandleUsageInstructions:l}=e,u=R.useRef(null),f=ak(e),m=Je(()=>FL(f.current),[f]),p=Je(()=>YL(f.current),[f]),y=nL(t),_=sL({contextId:t,text:l}),x=K5(t,o),S=Je(ae=>{Ru(u).dispatch(ae)},[]),T=kt(()=>t1({publishWhileDragging:PR,updateDroppableScroll:IR,updateDroppableIsEnabled:zR,updateDroppableIsCombineEnabled:UR,collectionStarting:$R},S),[S]),k=Q5(),A=kt(()=>A5(k,T),[k,T]),D=kt(()=>F5({scrollWindow:j5,scrollDroppable:A.scrollDroppable,getAutoScrollerOptions:p,...t1({move:YT},S)}),[A.scrollDroppable,S,p]),$=X5(t),O=kt(()=>S5({announce:y,autoScroller:D,dimensionMarshal:A,focusMarshal:$,getResponders:m,styleMarshal:x}),[y,D,A,$,m,x]);u.current=O;const C=Je(()=>{const ae=Ru(u);ae.getState().phase!=="IDLE"&&ae.dispatch(yy())},[]),M=Je(()=>{const ae=Ru(u).getState();return ae.phase==="DROP_ANIMATING"?!0:ae.phase==="IDLE"?!1:ae.isDragging},[]),G=kt(()=>({isDragging:M,tryAbort:C}),[M,C]);n(G);const H=Je(ae=>ek(Ru(u).getState(),ae),[]),F=Je(()=>Qo(Ru(u).getState()),[]),W=kt(()=>({marshal:A,focus:$,contextId:t,canLift:H,isMovementAllowed:F,dragHandleUsageInstructionsId:_,registry:k}),[t,A,_,$,H,F,k]);return GL({contextId:t,store:O,registry:k,customSensors:i||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),R.useEffect(()=>C,[C]),rn.createElement(Pm.Provider,{value:W},rn.createElement(b3,{context:Ty,store:O},e.children))}function ZL(){return rn.useId()}function xd(e){const t=ZL(),n=e.dragHandleUsageInstructions||Uf.dragHandleUsageInstructions;return rn.createElement(E3,null,i=>rn.createElement(qL,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const O1={dragging:5e3,dropAnimating:4500},VL=(e,t)=>t?Wu.drop(t.duration):e?Wu.snap:Wu.fluid,KL=(e,t)=>{if(e)return t?sd.opacity.drop:sd.opacity.combining},WL=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function XL(e){const n=e.dimension.client,{offset:i,combineWith:o,dropping:l}=e,u=!!o,f=WL(e),m=!!l,p=m?Ob.drop(i,u):Ob.moveTo(i);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:VL(f,l),transform:p,opacity:KL(u,m),zIndex:m?O1.dropAnimating:O1.dragging,pointerEvents:"none"}}function JL(e){return{transform:Ob.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function QL(e){return e.type==="DRAGGING"?XL(e):JL(e)}function eB(e,t,n=Wn){const i=window.getComputedStyle(t),o=t.getBoundingClientRect(),l=vT(o,i),u=im(l,n),f={client:l,tagName:t.tagName.toLowerCase(),display:i.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:m,client:l,page:u}}function tB(e){const t=ky("draggable"),{descriptor:n,registry:i,getDraggableRef:o,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}=e,m=kt(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}),[l,f,u]),p=Je(S=>{const T=o();return T||ze(),eB(n,T,S)},[n,o]),y=kt(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),_=R.useRef(y),x=R.useRef(!0);di(()=>(i.draggable.register(_.current),()=>i.draggable.unregister(_.current)),[i.draggable]),di(()=>{if(x.current){x.current=!1;return}const S=_.current;_.current=y,i.draggable.update(y,S)},[y,i.draggable])}var jy=rn.createContext(null);function um(e){const t=R.useContext(e);return t||ze(),t}function nB(e){e.preventDefault()}const rB=e=>{const t=R.useRef(null),n=Je((G=null)=>{t.current=G},[]),i=Je(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:l,registry:u}=um(Pm),{type:f,droppableId:m}=um(jy),p=kt(()=>({id:e.draggableId,index:e.index,type:f,droppableId:m}),[e.draggableId,e.index,f,m]),{children:y,draggableId:_,isEnabled:x,shouldRespectForcePress:S,canDragInteractiveElements:T,isClone:k,mapped:A,dropAnimationFinished:D}=e;if(!k){const G=kt(()=>({descriptor:p,registry:u,getDraggableRef:i,canDragInteractiveElements:T,shouldRespectForcePress:S,isEnabled:x}),[p,u,i,T,S,x]);tB(G)}const $=kt(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":_,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:nB}:null,[o,l,_,x]),O=Je(G=>{A.type==="DRAGGING"&&A.dropping&&G.propertyName==="transform"&&Dm.flushSync(D)},[D,A]),C=kt(()=>{const G=QL(A),H=A.type==="DRAGGING"&&A.dropping?O:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":_,style:G,onTransitionEnd:H},dragHandleProps:$}},[o,$,_,A,O,n]),M=kt(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return rn.createElement(rn.Fragment,null,y(C,A.snapshot,M))};var fk=(e,t)=>e===t,mk=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const iB=e=>e.combine?e.combine.draggableId:null,sB=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function aB(){const e=Kn((o,l)=>({x:o,y:l})),t=Kn((o,l,u=null,f=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:o,draggingOver:u,combineWith:f,combineTargetFor:null})),n=Kn((o,l,u,f,m=null,p=null,y=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:o,dimension:u,forceShouldAnimate:y,snapshot:t(l,f,m,p,null)}}));return(o,l)=>{if(od(o)){if(o.critical.draggable.id!==l.draggableId)return null;const u=o.current.client.offset,f=o.dimensions.draggables[l.draggableId],m=ui(o.impact),p=sB(o.impact),y=o.forceShouldAnimate;return n(e(u.x,u.y),o.movementMode,f,l.isClone,m,p,y)}if(o.phase==="DROP_ANIMATING"){const u=o.completed;if(u.result.draggableId!==l.draggableId)return null;const f=l.isClone,m=o.dimensions.draggables[l.draggableId],p=u.result,y=p.mode,_=mk(p),x=iB(p),T={duration:o.dropDuration,curve:_y.drop,moveTo:o.newHomeClientOffset,opacity:x?sd.opacity.drop:null,scale:x?sd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:T,draggingOver:_,combineWith:x,mode:y,forceShouldAnimate:null,snapshot:t(y,f,_,x,T)}}}return null}}function pk(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const oB={mapped:{type:"SECONDARY",offset:Wn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pk(null)}};function lB(){const e=Kn((u,f)=>({x:u,y:f})),t=Kn(pk),n=Kn((u,f=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:m,snapshot:t(f)}})),i=u=>u?n(Wn,u,!0):null,o=(u,f,m,p)=>{const y=m.displaced.visible[u],_=!!(p.inVirtualList&&p.effected[u]),x=Cm(m),S=x&&x.draggableId===u?f:null;if(!y){if(!_)return i(S);if(m.displaced.invisible[u])return null;const A=Ac(p.displacedBy.point),D=e(A.x,A.y);return n(D,S,!0)}if(_)return i(S);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,S,y.shouldAnimate)};return(u,f)=>{if(od(u))return u.critical.draggable.id===f.draggableId?null:o(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===f.draggableId?null:o(f.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const cB=()=>{const e=aB(),t=lB();return(i,o)=>e(i,o)||t(i,o)||oB},uB={dropAnimationFinished:ZT},dB=yT(cB,uB,null,{context:Ty,areStatePropsEqual:fk})(rB);function gk(e){return um(jy).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(dB,e)}function wc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,i=!!e.shouldRespectForcePress;return rn.createElement(gk,sm({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}const bk=e=>t=>e===t,hB=bk("scroll"),fB=bk("auto"),D1=(e,t)=>t(e.overflowX)||t(e.overflowY),mB=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return D1(n,hB)||D1(n,fB)},pB=()=>!1,yk=e=>e==null?null:e===document.body?pB()?e:null:e===document.documentElement?null:mB(e)?e:yk(e.parentElement);var Cb=e=>({x:e.scrollLeft,y:e.scrollTop});const vk=e=>e?window.getComputedStyle(e).position==="fixed"?!0:vk(e.parentElement):!1;var gB=e=>{const t=yk(e),n=vk(e);return{closestScrollable:t,isFixedOnPage:n}},bB=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:i,direction:o,client:l,page:u,closest:f})=>{const m=(()=>{if(!f)return null;const{scrollSize:x,client:S}=f,T=XT({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:S,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:T,diff:{value:Wn,displacement:Wn}}}})(),p=o==="vertical"?fy:OT,y=vc({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:i,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:y}};const yB=(e,t)=>{const n=_T(e);if(!t||e!==t)return n;const i=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,l=i+t.scrollHeight,u=o+t.scrollWidth,m=cy({top:i,right:u,bottom:l,left:o},n.border);return uy({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var vB=({ref:e,descriptor:t,env:n,windowScroll:i,direction:o,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:f})=>{const m=n.closestScrollable,p=yB(e,m),y=im(p,i),_=(()=>{if(!m)return null;const S=_T(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:S,page:im(S,i),scroll:Cb(m),scrollSize:T,shouldClipSubject:f}})();return bB({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:o,client:p,page:y,closest:_})};const _B={passive:!1},xB={passive:!0};var M1=e=>e.shouldPublishImmediately?_B:xB;const rf=e=>e&&e.env.closestScrollable||null;function wB(e){const t=R.useRef(null),n=um(Pm),i=ky("droppable"),{registry:o,marshal:l}=n,u=ak(e),f=kt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=R.useRef(f),p=kt(()=>Kn((C,M)=>{t.current||ze();const G={x:C,y:M};l.updateDroppableScroll(f.id,G)}),[f.id,l]),y=Je(()=>{const C=t.current;return!C||!C.env.closestScrollable?Wn:Cb(C.env.closestScrollable)},[]),_=Je(()=>{const C=y();p(C.x,C.y)},[y,p]),x=kt(()=>td(_),[_]),S=Je(()=>{const C=t.current,M=rf(C);if(C&&M||ze(),C.scrollOptions.shouldPublishImmediately){_();return}x()},[x,_]),T=Je((C,M)=>{t.current&&ze();const G=u.current,H=G.getDroppableRef();H||ze();const F=gB(H),W={ref:H,descriptor:f,env:F,scrollOptions:M};t.current=W;const ae=vB({ref:H,descriptor:f,env:F,windowScroll:C,direction:G.direction,isDropDisabled:G.isDropDisabled,isCombineEnabled:G.isCombineEnabled,shouldClipSubject:!G.ignoreContainerClipping}),Q=F.closestScrollable;return Q&&(Q.setAttribute(k1.contextId,n.contextId),Q.addEventListener("scroll",S,M1(W.scrollOptions))),ae},[n.contextId,f,S,u]),k=Je(()=>{const C=t.current,M=rf(C);return C&&M||ze(),Cb(M)},[]),A=Je(()=>{const C=t.current;C||ze();const M=rf(C);t.current=null,M&&(x.cancel(),M.removeAttribute(k1.contextId),M.removeEventListener("scroll",S,M1(C.scrollOptions)))},[S,x]),D=Je(C=>{const M=t.current;M||ze();const G=rf(M);G||ze(),G.scrollTop+=C.y,G.scrollLeft+=C.x},[]),$=kt(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:A,scroll:D}),[A,T,k,D]),O=kt(()=>({uniqueId:i,descriptor:f,callbacks:$}),[$,f,i]);di(()=>(m.current=O.descriptor,o.droppable.register(O),()=>{t.current&&A(),o.droppable.unregister(O)}),[$,f,A,O,l,o.droppable]),di(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),di(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function gg(){}const C1={width:0,height:0,margin:D3},SB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?C1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},EB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const i=SB({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Wu.placeholder:null}},TB=e=>{const t=R.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:i,onTransitionEnd:o,onClose:l,contextId:u}=e,[f,m]=R.useState(e.animate==="open");R.useEffect(()=>f?i!=="open"?(n(),m(!1),gg):t.current?gg:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):gg,[i,f,n]);const p=Je(_=>{_.propertyName==="height"&&(o(),i==="close"&&l())},[i,l,o]),y=EB({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:y,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var kB=rn.memo(TB);class AB extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const jB=e=>{const t=R.useContext(Pm);t||ze();const{contextId:n,isMovementAllowed:i}=t,o=R.useRef(null),l=R.useRef(null),{children:u,droppableId:f,type:m,mode:p,direction:y,ignoreContainerClipping:_,isDropDisabled:x,isCombineEnabled:S,snapshot:T,useClone:k,updateViewportMaxScroll:A,getContainerForClone:D}=e,$=Je(()=>o.current,[]),O=Je((Q=null)=>{o.current=Q},[]);Je(()=>l.current,[]);const C=Je((Q=null)=>{l.current=Q},[]),M=Je(()=>{i()&&A({maxScroll:QT()})},[i,A]);wB({droppableId:f,type:m,mode:p,direction:y,isDropDisabled:x,isCombineEnabled:S,ignoreContainerClipping:_,getDroppableRef:$});const G=kt(()=>rn.createElement(AB,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:Q,data:Y,animate:te})=>rn.createElement(kB,{placeholder:Y,onClose:Q,innerRef:C,animate:te,contextId:n,onTransitionEnd:M})),[n,M,e.placeholder,e.shouldAnimatePlaceholder,C]),H=kt(()=>({innerRef:O,placeholder:G,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":n}}),[n,f,G,O]),F=k?k.dragging.draggableId:null,W=kt(()=>({droppableId:f,type:m,isUsingCloneFor:F}),[f,F,m]);function ae(){if(!k)return null;const{dragging:Q,render:Y}=k,te=rn.createElement(gk,{draggableId:Q.draggableId,index:Q.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(re,Se)=>Y(re,Se,Q));return gC.createPortal(te,D())}return rn.createElement(jy.Provider,{value:W},u(H,T),ae())};function NB(){return document.body||ze(),document.body}const R1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:NB},_k=e=>{let t={...e},n;for(n in R1)e[n]===void 0&&(t={...t,[n]:R1[n]});return t},bg=(e,t)=>e===t.droppable.type,L1=(e,t)=>t.draggables[e.draggable.id],OB=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Kn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),i=Kn((l,u,f,m,p,y)=>{const _=p.descriptor.id;if(p.descriptor.droppableId===l){const T=y?{render:y,dragging:n(p.descriptor)}:null,k={isDraggingOver:f,draggingOverWith:f?_:null,draggingFromThisWith:_,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const S={isDraggingOver:f,draggingOverWith:_,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(l,u)=>{const f=_k(u),m=f.droppableId,p=f.type,y=!f.isDropDisabled,_=f.renderClone;if(od(l)){const x=l.critical;if(!bg(p,x))return t;const S=L1(x,l.dimensions),T=ui(l.impact)===m;return i(m,y,T,T,S,_)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!bg(p,x.critical))return t;const S=L1(x.critical,l.dimensions);return i(m,y,mk(x.result)===m,ui(x.impact)===m,S,_)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!bg(p,x.critical))return t;const S=ui(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return S?T?e:t:k?e:t}return t}},DB={updateViewportMaxScroll:GR},il=yT(OB,DB,(e,t,n)=>({..._k(n),...e,...t}),{context:Ty,areStatePropsEqual:fk})(jB),MB={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function dm(e,t,n){const i=MB[e];if(!i)return!1;const o=new Date(e,t-1,n,0,0,0,0);return o>=i.start&&o<i.end}function CB(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),o=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),f=e.getUTCSeconds(),m=(l-12)/24+u/1440+f/86400,p=2*Math.PI/365*(o-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function RB(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function cl(e,t,n=!1){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(i.getTime()-1800*1e3);if(t==null||!isFinite(t))return i;let o=t;Math.abs(o)<=Math.PI+1e-6&&(o=o*180/Math.PI),o=(o+540)%360-180;const l=RB(o),u=4*(o-l),f=CB(i);return new Date(i.getTime()+(u+f)*60*1e3)}var Hf={exports:{}},LB=Hf.exports,B1;function BB(){return B1||(B1=1,(function(e,t){(function(n,i){e.exports=i()})(LB,function(){return(function(n){function i(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,i),u.l=!0,u.exports}var o={};return i.m=n,i.c=o,i.d=function(l,u,f){i.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:f})},i.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(u,"a",u),u},i.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},i.p="",i(i.s=0)})([function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var l=o(1),u=(function(f){return f&&f.__esModule?f:{default:f}})(l);i.default=u.default,n.exports=i.default},function(n,i,o){function l(te){return te&&te.__esModule?te:{default:te}}Object.defineProperty(i,"__esModule",{value:!0});var u=o(2),f=l(u),m=o(3),p=l(m),y=o(4),_=l(y),x=o(5),S=l(x),T=o(6),k=l(T),A=o(7),D=l(A),$=o(8),O=l($),C=o(9),M=l(C),G=o(10),H=l(G),F=o(11),W=l(F),ae=o(12),Q=l(ae),Y={lunarInfo:f.default,solarMonth:p.default,gan:_.default,zhi:S.default,animals:k.default,lunarTerm:D.default,lTermInfo:O.default,nStr1:M.default,nStr2:H.default,nStr3:W.default,nStr4:Q.default,lYearDays:function(te){var re,Se=348;for(re=32768;re>8;re>>=1)Se+=Y.lunarInfo[te-1900]&re?1:0;return Se+Y.leapDays(te)},leapMonth:function(te){return 15&Y.lunarInfo[te-1900]},leapDays:function(te){return Y.leapMonth(te)?65536&Y.lunarInfo[te-1900]?30:29:0},monthDays:function(te,re){return re>12||re<1?-1:Y.lunarInfo[te-1900]&65536>>re?30:29},solarDays:function(te,re){if(re>12||re<1)return-1;var Se=re-1;return Se==1?te%4==0&&te%100!=0||te%400==0?29:28:Y.solarMonth[Se]},toGanZhi:function(te){return Y.gan[te%10]+Y.zhi[te%12]},getTerm:function(te,re){if(te<1900||te>2100||re<1||re>24)return-1;var Se=Y.lTermInfo[te-1900],X=[parseInt("0x"+Se.substr(0,5)).toString(),parseInt("0x"+Se.substr(5,5)).toString(),parseInt("0x"+Se.substr(10,5)).toString(),parseInt("0x"+Se.substr(15,5)).toString(),parseInt("0x"+Se.substr(20,5)).toString(),parseInt("0x"+Se.substr(25,5)).toString()],oe=[X[0].substr(0,1),X[0].substr(1,2),X[0].substr(3,1),X[0].substr(4,2),X[1].substr(0,1),X[1].substr(1,2),X[1].substr(3,1),X[1].substr(4,2),X[2].substr(0,1),X[2].substr(1,2),X[2].substr(3,1),X[2].substr(4,2),X[3].substr(0,1),X[3].substr(1,2),X[3].substr(3,1),X[3].substr(4,2),X[4].substr(0,1),X[4].substr(1,2),X[4].substr(3,1),X[4].substr(4,2),X[5].substr(0,1),X[5].substr(1,2),X[5].substr(3,1),X[5].substr(4,2)];return parseInt(oe[re-1])},toChinaYear:function(te){var re=parseInt(te/1e3),Se=parseInt(te%1e3/100),X=parseInt(te%100/10),oe=te%10;return Y.nStr4[re]+Y.nStr4[Se]+Y.nStr4[X]+Y.nStr4[oe]+""},toChinaMonth:function(te){if(te>12||te<1)return-1;var re=Y.nStr3[te-1];return re+=""},toChinaDay:function(te){var re;switch(te){case 10:re="";break;case 20:re="";break;case 30:re="";break;default:re=Y.nStr2[Math.floor(te/10)],re+=Y.nStr1[te%10]}return re},getAnimal:function(te){return Y.animals[(te-4)%12]},solar2lunar:function(ye,K,U){if(ye<1900||ye>2100||ye==1900&&K==1&&U<31)return-1;if(ye)var X=new Date(ye,parseInt(K)-1,U);else var X=new Date;var oe,me=0,J=0,ye=X.getFullYear(),K=X.getMonth()+1,U=X.getDate(),B=(Date.UTC(X.getFullYear(),X.getMonth(),X.getDate())-Date.UTC(1900,0,31))/864e5;for(oe=1900;oe<2101&&B>0;oe++)J=Y.lYearDays(oe),B-=J;B<0&&(B+=J,oe--);var q=new Date,V=!1;q.getFullYear()==ye&&q.getMonth()+1==K&&q.getDate()==U&&(V=!0);var P=X.getDay(),Z=Y.nStr1[P];P==0&&(P=7);var ie=oe,me=Y.leapMonth(oe),ce=!1;for(oe=1;oe<13&&B>0;oe++)me>0&&oe==me+1&&ce==0?(--oe,ce=!0,J=Y.leapDays(ie)):J=Y.monthDays(ie,oe),ce==1&&oe==me+1&&(ce=!1),B-=J;B==0&&me>0&&oe==me+1&&(ce?ce=!1:(ce=!0,--oe)),B<0&&(B+=J,--oe);var xe=oe,ke=B+1,je=K-1,Me=Y.getTerm(ye,3),Ee=Y.toGanZhi(ye-4),Pe=new Date(ye,1,Me).getTime();new Date(ye,je,U).getTime()<Pe&&(Ee=Y.toGanZhi(ye-5));var Ce=Y.getTerm(ye,2*K-1),Le=Y.getTerm(ye,2*K),Ue=Y.toGanZhi(12*(ye-1900)+K+11);U>=Ce&&(Ue=Y.toGanZhi(12*(ye-1900)+K+12));var fe=!1,Be="";Ce==U&&(fe=!0,Be=Y.lunarTerm[2*K-2]),Le==U&&(fe=!0,Be=Y.lunarTerm[2*K-1]);var le=Date.UTC(ye,je,1,0,0,0,0)/864e5+25567+10,he=Y.toGanZhi(le+U-1);return{lYear:ie,lMonth:xe,lDay:ke,animal:Y.getAnimal(ie),yearCn:Y.toChinaYear(ie),monthCn:(ce&&me===xe?"":"")+Y.toChinaMonth(xe),dayCn:Y.toChinaDay(ke),cYear:ye,cMonth:K,cDay:U,gzYear:Ee,gzMonth:Ue,gzDay:he,isToday:V,isLeap:ce,nWeek:P,ncWeek:""+Z,isTerm:fe,term:Be}},lunar2solar:function(te,re,Se,X){var oe=Y.leapMonth(te);if(Y.leapDays(te),X&&oe!=re||te==2100&&re==12&&Se>1||te==1900&&re==1&&Se<31)return-1;var J=Y.monthDays(te,re);if(te<1900||te>2100||Se>J)return-1;for(var ye=0,K=1900;K<te;K++)ye+=Y.lYearDays(K);for(var U=0,B=!1,K=1;K<re;K++)U=Y.leapMonth(te),B||U<=K&&U>0&&(ye+=Y.leapDays(te),B=!0),ye+=Y.monthDays(te,K);X&&(ye+=J);var q=Date.UTC(1900,1,30,0,0,0),V=new Date(864e5*(ye+Se-31)+q),P=V.getUTCFullYear(),Z=V.getUTCMonth()+1,ie=V.getUTCDate();return Y.solar2lunar(P,Z,ie)}};i.default=Y,n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default}])})})(Hf)),Hf.exports}var xk=BB();const PB=ll(xk),Ny=S2({__proto__:null,default:PB},[xk]);function Rb(e){return typeof e=="object"&&e!==null}function $B(e){if(!Rb(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,i=t.cMonth,o=t.cDay;if(typeof n!="number"||typeof i!="number"||typeof o!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:i,cDay:o,isLeap:typeof l=="boolean"?l:void 0}}function IB(e){const t=Rb(e)&&"default"in e?e.default:e;if(!Rb(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(i,o,l)=>$B(n(i,o,l,!1))}const zB=IB(Ny);function Im(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),i=Number(e.birthDay.slice(4,6)),o=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const $=zB(n,i,o);n=$.cYear,i=$.cMonth,o=$.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),f=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,i-1,o,u,f,0,0),y=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",_=cl(p,m,y),x=l?"":_.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),S=ut(_,m),T=At(_,m),k=_t(_,t),A=l?null:Pi(_,t),D=[` : ${S} ${T} ${k}`,A?`${A}`:null].filter(Boolean).join(" ");return{correctedLocal:x,ganji:D}}function Oy(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function P1(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(i=>i.endsWith(""));return n&&n.length>0?n.charAt(0):null}function $1(e){const t=Oy(e.gender),n=P1(e.ganjiText)??P1(e.ganji);if(!n)return"forward";const o=["","","","",""].includes(n),l=t==="";return o&&!l||!o&&l?"forward":"backward"}function UB(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date,i={...e,dateObj:t,corrected:n};try{const o=Im(i),l={...i,...o},u=$1(l);return{...l,dir:u}}catch(o){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",o);const l=$1(i);return{...i,dir:l}}}function HB(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),i=typeof n=="number"&&Number.isFinite(n)?n:void 0,o={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:Oy(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,sortOrder:i,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return UB(o)}function sf(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5};return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:Oy(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,sort_order:null,updated_at:new Date().toISOString()}}const ss=pd((e,t)=>({currentId:null,list:[],loading:!0,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:i}=await qt.auth.getUser();if(i||!n){console.error("loadFromServer: user not found / error",i),e({list:[],currentId:null,loading:!1});return}let o,l;const u="id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at";{const _=await qt.from("myeongsik").select(u).order("created_at",{ascending:!1});o=_.data,l=_.error}if(l||!o){console.error("loadFromServer error:",l),e({loading:!1});return}const m=o.filter(_=>_.user_id===n.id).map(HB),p=t().currentId,y=p&&m.some(_=>_.id===p)?p:m[0]?.id??null;e({list:m,currentId:y,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let i;try{i=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const o=i.state??{},l=Array.isArray(o.list)?o.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:f}=await qt.auth.getUser();if(f||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await qt.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const y=new Set((m??[]).map(T=>T.id)),_=l.filter(T=>!!T&&!y.has(T.id));if(_.length===0){window.localStorage.removeItem("myeongsik-list");return}const x=_.map(T=>sf(T,u.id)),{error:S}=await qt.from("myeongsik").upsert(x,{onConflict:"id"});if(S){console.error("migrateLocalToServer upsert error:",S);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const i=(t().list.length||0)+1,o={...n,sortOrder:n.sortOrder??i},{data:{user:l},error:u}=await qt.auth.getUser();if(u||!l){console.error("add: user not found",u);return}e(p=>({list:[o,...p.list],currentId:p.currentId??o.id}));const f=sf(o,l.id),{error:m}=await qt.from("myeongsik").upsert(f,{onConflict:"id"});m&&console.error("add upsert error:",m)},update:async(n,i)=>{const o=t().list.find(y=>y.id===n);if(!o)return;const l={...o,...i};e(y=>({list:y.list.map(_=>_.id===n?l:_)}));const{data:{user:u},error:f}=await qt.auth.getUser();if(f||!u){console.error("update: user not found",f);return}const m=sf(l,u.id),{error:p}=await qt.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(o=>{const l=o.list.filter(f=>f.id!==n),u=o.currentId===n?l[0]?.id??null:o.currentId;return{list:l,currentId:u}});const{error:i}=await qt.from("myeongsik").delete().eq("id",n);i&&console.error("remove error:",i)},reorder:async n=>{const i=n.map((m,p)=>({...m,sortOrder:p+1}));e({list:i});const{data:{user:o},error:l}=await qt.auth.getUser();if(l||!o){console.error("reorder: user not found",l);return}const u=i.map(m=>sf(m,o.id)),{error:f}=await qt.from("myeongsik").upsert(u,{onConflict:"id"});f&&console.error("reorder upsert error:",f)},clear:()=>{e({currentId:null,list:[]})}})),GB=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],wk=({value:e,onChange:t})=>{const[n,i]=R.useState(GB),[o,l]=R.useState(""),[u,f]=R.useState(!1),[m,p]=R.useState(""),[y,_]=R.useState(!1),{list:x}=ss(),T=x.some(O=>O.relationship==="")?n.filter(O=>O.value!==""):n;R.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=O=>{const C=O.target.value;l(C),t?.(C),C===""?f(!0):(f(!1),p(""))};R.useEffect(()=>{const O=localStorage.getItem("relationshipOptions");O&&i(JSON.parse(O))},[]),R.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n))},[n]);const A=()=>{if(!m.trim())return;const O={value:m,label:m};i([...n,O]),l(m),p(""),f(!1)},D=O=>{i(n.filter(C=>C.value!==O)),o===O&&l("")},$=O=>{if(!O.destination)return;const C=Array.from(n),[M]=C.splice(O.source.index,1);C.splice(O.destination.index,0,M),i(C)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:o,onChange:k,children:[g.jsx("option",{value:"",hidden:!0,children:""}),T.map(O=>g.jsx("option",{value:O.value,children:O.label},O.value)),g.jsx("option",{value:"",children:""})]}),g.jsx("button",{type:"button",onClick:()=>_(!0),className:"btn_style",children:""})]}),u&&!y&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:" ",value:m,onChange:O=>p(O.target.value)}),g.jsx("button",{type:"button",onClick:A,className:"btn_style",children:""})]}),y&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(xd,{onDragEnd:$,children:g.jsx(il,{droppableId:"relList",children:O=>g.jsxs("ul",{ref:O.innerRef,...O.droppableProps,className:"space-y-1",children:[n.map((C,M)=>g.jsx(wc,{draggableId:C.value,index:M,children:G=>g.jsxs("li",{ref:G.innerRef,...G.draggableProps,...G.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:C.label}),g.jsx("button",{type:"button",className:"text-red-500",onClick:()=>D(C.value),children:""})]})},C.value)),O.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full btn_style mt-2",children:""})]})]})},pn=" ",Sk=["","","","","",""],Dy="ms_folders",Ek="ms_folder_order",I1="ms_folder_favs",Lb="ms_disabled_presets",Wa="myeoun:folder-updated";function sl(e){if(e!==pn)return e||void 0}function zm(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(i=>typeof i=="string"):[]}catch{return[]}}function Um(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function FB(){const e=zm(Lb);return Sk.filter(t=>!e.includes(t))}function My(){return zm(Dy)}function Gf(){const e=FB(),t=My(),n=new Set,i=[];for(const o of[...e,...t])n.has(o)||(n.add(o),i.push(o));return i}function YB(){return[pn,...Gf()]}function Tk(e){const t=e.trim();if(!t||t===pn)return;const n=My();if(n.includes(t))return;const i=[...n,t];Um(Dy,i),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function qB(e){const t=My(),n=t.filter(i=>i!==e);n.length!==t.length&&(Um(Dy,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa)))}function ZB(e){const t=zm(Lb);if(t.includes(e))return;const n=[...t,e];Um(Lb,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Ff(){return zm(Ek)}function Xu(e){Um(Ek,e),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Yu(e,t){const n=new Set(e),i=[];for(const o of t)n.has(o)&&!i.includes(o)&&i.push(o);for(const o of e)i.includes(o)||i.push(o);return i}function VB(e){return Array.from(new Set(e))}function af(e){const t=e.filter(n=>n!==pn);return{rest:t,withUnassigned:[pn,...t]}}function KB(e,t){return Yu(t,e)}function WB({value:e,onChange:t}){const[n,i]=R.useState([pn]),[o,l]=R.useState(!1),[u,f]=R.useState(""),[m,p]=R.useState(!1),y=R.useCallback(()=>{if(typeof window>"u")return;const k=VB(YB()),A=k.includes(pn)?k:[pn,...k],{rest:D}=af(A),$=Ff(),O=KB($,D),C=[pn,...O];i(C),$.length===O.length&&$.every((G,H)=>G===O[H])||Xu(O)},[]);R.useEffect(()=>{if(y(),typeof window<"u"){const k=()=>y();return window.addEventListener(Wa,k),()=>window.removeEventListener(Wa,k)}},[y]);const _=R.useMemo(()=>e||pn,[e]),x=k=>{const{rest:A}=af(k);Xu(A)},S=k=>{const{source:A,destination:D}=k;if(!D||D.index===A.index)return;const{rest:$}=af(n),O=Array.from($),[C]=O.splice(A.index,1);O.splice(D.index,0,C);const M=[pn,...O];i(M),x(M)},T=k=>{const A=sl(k);A&&(Tk(A),y())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:o?"__custom__":_,onChange:k=>{const A=k.target.value;if(A==="__custom__"){l(!0),t(void 0);return}l(!1),t(sl(A))},children:[n.map(k=>g.jsx("option",{value:k,children:k},k)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(k=>!k),children:m?" ":" "})]}),o&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:k=>f(k.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const k=u.trim();k&&(T(k),t(sl(k)),l(!1),f(""))},children:""})]}),m&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[pn," ()"]})]}),g.jsx(xd,{onDragEnd:S,children:g.jsx(il,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"space-y-1",children:[af(n).rest.map((A,D)=>g.jsx(wc,{draggableId:A,index:D,children:$=>g.jsxs("li",{ref:$.innerRef,...$.draggableProps,...$.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:A})]})},A)),k.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',pn,'" .      .']})]})}function kk({message:e,onClose:t,ms:n=2e3}){return R.useEffect(()=>{const i=setTimeout(t,n);return()=>clearTimeout(i)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function Hm(e){return typeof e=="object"&&e!==null}function XB(e){return Hm(e)&&"default"in e}function JB(e){return Hm(e)&&typeof e.lunar2solar=="function"}function QB(e){if(!Hm(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function e7(e){const t=XB(e)?e.default:e;if(!JB(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,u);return QB(f)}}}const t7=e7(Ny);function gr(e,t,n,i=4,o=0){const l=t7.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,i,o)}const Lu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],Bu=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],of=["","/",""],lf=["",""];function yg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function vg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function n7({onSave:e,onClose:t}){const{add:n}=ss(),[i,o]=R.useState(0),[l,u]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[f,m]=R.useState(null),[p,y]=R.useState(!1),[_,x]=R.useState(!1),S=Lu[i],T=C=>m(C);R.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(S.key)){const M=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(M){M.focus();return}}if(S.key==="mingSikType"){const M=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(M){M.focus();return}}if(S.key==="gender"){const M=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(M){M.focus();return}}if(l.birthPlace||_){const M=()=>{const G=document.querySelector(".current-step form button[type='submit']");G&&G.focus()};M(),setTimeout(M,0)}else{const M=document.getElementById("inputBirthPlaceBtn");M&&M.focus()}if(S.key==="relationship"){setTimeout(()=>{const M=document.querySelector(".current-step select");M&&M.focus()},0);return}if(S.key==="folder"){setTimeout(()=>{const M=document.querySelector(".current-step select");M&&M.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[_,i,S.key,l.birthPlace]);const k=R.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const C=Number(l.birthDay.slice(0,4)),M=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8)),H=gr(C,M,G);return`  ${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}catch(C){const M=C instanceof Error?C.message:void 0;return`  ${M?`: ${M}`:""}`}},[l.calendarType,l.birthDay]),A=()=>{const C=Lu[i];if(C.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),C.key==="birthDay"){const M=/^\d{8}$/;if(!l.birthDay||!M.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const G=Number(l.birthDay.substring(0,4)),H=Number(l.birthDay.substring(4,6)),F=Number(l.birthDay.substring(6,8));if(G<1900||G>2100)return T("  1900~2100  ."),!1;if(H<1||H>12)return T("  01~12  ."),!1;if(F<1||F>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const W=new Date(G,H-1,F);if(W.getFullYear()!==G||W.getMonth()+1!==H||W.getDate()!==F)return T("  ."),!1}else try{gr(G,H,F)}catch(W){return T(W instanceof Error?W.message:"   ."),!1}}if(C.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const M=Number(l.birthTime);if(Number.isNaN(M)||M<0||M>2359)return T("  00002359  ."),!1;const G=Number(l.birthTime.slice(0,2)),H=Number(l.birthTime.slice(2,4));if(G>23||H>59)return T("  00002359  ."),!1}}return C.key==="birthPlace"&&!l.birthPlace&&!_?(T("   ''  ."),!1):!0},D=()=>{if(!A())return;if(i<Lu.length-1){o(i+1);return}const C=sl(l.folder),M=!l.birthTime||l.birthTime==="",G=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let H=Number(l.birthDay.slice(0,4)),F=Number(l.birthDay.slice(4,6)),W=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const Z=gr(H,F,W);H=Z.getFullYear(),F=Z.getMonth()+1,W=Z.getDate()}const ae=M?4:Number(l.birthTime.slice(0,2)),Q=M?30:Number(l.birthTime.slice(2,4)),Y=new Date(H,F-1,W,ae,Q,0,0),te=_||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,re=cl(Y,te,G),Se=l.mingSikType??"/",X=M?"":re.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),oe=ut(re,te),J=At(re,te),ye=_t(re,Se),K=M?null:Pi(re,Se),U=[` : ${oe} ${J} ${ye}`,K?`${K}`:null].filter(Boolean).join(" ");function B(Z,ie){const ce=["","","","","","","","","",""].includes(Z),xe=ie==="";return ce?xe?"forward":"backward":xe?"backward":"forward"}const q=oe.charAt(0),V=B(q,l.gender??""),P={id:cT(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:M?"":l.birthTime||"",gender:l.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:C,correctedLocal:X,ganji:U,calendarType:l.calendarType??"solar",dir:V,corrected:re,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(P),e(P),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),y(!1),x(!1),o(0)},$=C=>{if(C.key!=="Enter")return;const M=C.target,G=M.getAttribute("role");if(G==="radio"||G==="checkbox")return;const H=document.getElementById("mapModal");if(H&&H.contains(M))return;const F=M.tagName.toLowerCase(),W=M instanceof HTMLInputElement?M.type:"";if(F==="textarea"){if(C.shiftKey)return;C.preventDefault(),D();return}if(W==="radio"||W==="checkbox"){C.preventDefault(),M instanceof HTMLInputElement&&M.click();return}F==="button"&&M.type!=="submit"||(C.preventDefault(),D())},O=C=>{switch(C){case"birthPlace":return _?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):pn;default:{const G=l[C];return typeof G=="string"?G:G!=null?String(G):""}}};return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[f&&g.jsx(kk,{message:f,onClose:()=>m(null)}),Lu.slice(0,i).map((C,M)=>g.jsxs("button",{onClick:()=>o(M),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:C.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:O(C.key)})]},C.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:C=>{C.preventDefault(),D()},onKeyDown:$,children:[g.jsx("label",{className:"block mb-2 font-bold",children:S.label}),S.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.name||"",onChange:C=>u({...l,name:C.target.value})}),S.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.birthDay||"",onChange:C=>{const M=C.target.value.replace(/\D/g,"");u({...l,birthDay:M.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:Bu.map(({value:C,label:M,id:G})=>{const H=l.calendarType===C;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:G,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:G,id:`${G}_lbl`,role:"radio","aria-checked":H,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":H?"true":"false",onKeyDown:F=>{if(F.stopPropagation(),F.key===" "||F.key==="Enter"){F.preventDefault(),u({...l,calendarType:C});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(F.key))return;F.preventDefault();const ae=Bu.findIndex(te=>te.value===l.calendarType),Q=yg(ae<0?0:ae,Bu.length,F.key),Y=Bu[Q].value;u({...l,calendarType:Y}),vg(`${Bu[Q].id}_lbl`)},onClick:F=>{F.preventDefault(),u({...l,calendarType:C})},children:M})]},C)})})]}),l.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const C=Number(l.birthDay.slice(0,4)),M=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8));return dm(C,M,G)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),S.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:p?"":l.birthTime||"",onChange:C=>{const M=C.target.value.replace(/\D/g,"");u({...l,birthTime:M.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:C=>{C.stopPropagation(),(C.key===" "||C.key==="Enter")&&(C.preventDefault(),y(!p))},onClick:C=>{C.preventDefault(),y(!p)},children:""})]})]}),S.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:of.map(C=>{const M=`ming_${C}`,G=(l.mingSikType??"/")===C;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:M,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:M,id:`${M}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,mingSikType:C});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const W=l.mingSikType??"/",ae=of.indexOf(W),Q=yg(ae,of.length,H.key),Y=of[Q];u({...l,mingSikType:Y}),vg(`ming_${Y}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,mingSikType:C})},children:[C,""]})]},C)})}),S.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:lf.map(C=>{const M=`gender_${C}`,G=(l.gender??"")===C;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:M,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:M,id:`${M}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,gender:C});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const W=l.gender??"",ae=lf.indexOf(W),Q=yg(ae,lf.length,H.key),Y=lf[Q];u({...l,gender:Y}),vg(`gender_${Y}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,gender:C})},children:C})]},C)})}),S.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(uT,{onSelect:C=>u({...l,birthPlace:C})}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":_,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":_?"true":"false",onKeyDown:C=>{C.stopPropagation(),(C.key===" "||C.key==="Enter")&&(C.preventDefault(),x(!_))},onClick:C=>{C.preventDefault(),x(!_)},children:""})]})]}),S.key==="relationship"&&g.jsx(wk,{value:l.relationship||"",onChange:C=>u({...l,relationship:C})}),S.key==="folder"&&g.jsx(WB,{value:sl(l.folder),onChange:C=>u({...l,folder:C})}),S.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.memo||"",onChange:C=>u({...l,memo:C.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:i===Lu.length-1?"":""})]})]})})]})}var cf={},z1;function r7(){if(z1)return cf;z1=1,cf.match=l,cf.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function l(y,_){return u(y).some(function(x){var S=x.inverse,T=x.type==="all"||_.type===x.type;if(T&&S||!(T||S))return!1;var k=x.expressions.every(function(A){var D=A.feature,$=A.modifier,O=A.value,C=_[D];if(!C)return!1;switch(D){case"orientation":case"scan":return C.toLowerCase()===O.toLowerCase();case"width":case"height":case"device-width":case"device-height":O=p(O),C=p(C);break;case"resolution":O=m(O),C=m(C);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":O=f(O),C=f(C);break;case"grid":case"color":case"color-index":case"monochrome":O=parseInt(O,10)||1,C=parseInt(C,10)||0;break}switch($){case"min":return C>=O;case"max":return C<=O;default:return C===O}});return k&&!S||!k&&S})}function u(y){return y.split(",").map(function(_){_=_.trim();var x=_.match(e),S=x[1],T=x[2],k=x[3]||"",A={};return A.inverse=!!S&&S.toLowerCase()==="not",A.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],A.expressions=k.map(function(D){var $=D.match(t),O=$[1].toLowerCase().match(n);return{modifier:O[1],feature:O[2],value:$[2]}}),A})}function f(y){var _=Number(y),x;return _||(x=y.match(/^(\d+)\s*\/\s*(\d+)$/),_=x[1]/x[2]),_}function m(y){var _=parseFloat(y),x=String(y).match(o)[1];switch(x){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function p(y){var _=parseFloat(y),x=String(y).match(i)[1];switch(x){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}return cf}var _g,U1;function i7(){if(U1)return _g;U1=1;var e=r7().match,t=typeof window<"u"?window.matchMedia:null;function n(o,l,u){var f=this,m;t&&!u&&(m=t.call(window,o)),m?(this.matches=m.matches,this.media=m.media,m.addListener(_)):(this.matches=e(o,l),this.media=o),this.addListener=p,this.removeListener=y,this.dispose=x;function p(S){m&&m.addListener(S)}function y(S){m&&m.removeListener(S)}function _(S){f.matches=S.matches,f.media=S.media}function x(){m&&m.removeListener(_)}}function i(o,l,u){return new n(o,l,u)}return _g=i,_g}var s7=i7();const a7=ll(s7);var o7=/[A-Z]/g,l7=/^ms-/,xg={};function c7(e){return"-"+e.toLowerCase()}function Ak(e){if(xg.hasOwnProperty(e))return xg[e];var t=e.replace(o7,c7);return xg[e]=l7.test(t)?"-"+t:t}function u7(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t),o=n.length;if(i.length!==o)return!1;for(let l=0;l<o;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var wg={exports:{}},Sg,H1;function d7(){if(H1)return Sg;H1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sg=e,Sg}var Eg,G1;function h7(){if(G1)return Eg;G1=1;var e=d7();function t(){}function n(){}return n.resetWarningCache=t,Eg=function(){function i(u,f,m,p,y,_){if(_!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Eg}var F1;function f7(){return F1||(F1=1,wg.exports=h7()()),wg.exports}var m7=f7();const Rt=ll(m7),kr=Rt.oneOfType([Rt.string,Rt.number]),jk={all:Rt.bool,grid:Rt.bool,aural:Rt.bool,braille:Rt.bool,handheld:Rt.bool,print:Rt.bool,projection:Rt.bool,screen:Rt.bool,tty:Rt.bool,tv:Rt.bool,embossed:Rt.bool},p7={orientation:Rt.oneOf(["portrait","landscape"]),scan:Rt.oneOf(["progressive","interlace"]),aspectRatio:Rt.string,deviceAspectRatio:Rt.string,height:kr,deviceHeight:kr,width:kr,deviceWidth:kr,color:Rt.bool,colorIndex:Rt.bool,monochrome:Rt.bool,resolution:kr,type:Object.keys(jk)},{type:HU,...g7}=p7,b7={minAspectRatio:Rt.string,maxAspectRatio:Rt.string,minDeviceAspectRatio:Rt.string,maxDeviceAspectRatio:Rt.string,minHeight:kr,maxHeight:kr,minDeviceHeight:kr,maxDeviceHeight:kr,minWidth:kr,maxWidth:kr,minDeviceWidth:kr,maxDeviceWidth:kr,minColor:Rt.number,maxColor:Rt.number,minColorIndex:Rt.number,maxColorIndex:Rt.number,minMonochrome:Rt.number,maxMonochrome:Rt.number,minResolution:kr,maxResolution:kr,...g7},y7={...jk,...b7};var v7={all:y7};const _7=e=>`not ${e}`,x7=(e,t)=>{const n=Ak(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?_7(n):`(${n}: ${t})`},w7=e=>e.join(" and "),S7=e=>{const t=[];return Object.keys(v7.all).forEach(n=>{const i=e[n];i!=null&&t.push(x7(n,i))}),w7(t)},E7=R.createContext(void 0),T7=e=>e.query||S7(e),Y1=e=>e?Object.keys(e).reduce((n,i)=>(n[Ak(i)]=e[i],n),{}):void 0,Nk=()=>{const e=R.useRef(!1);return R.useEffect(()=>{e.current=!0},[]),e.current},k7=e=>{const t=R.useContext(E7),n=()=>Y1(e)||Y1(t),[i,o]=R.useState(n);return R.useEffect(()=>{const l=n();u7(i,l)||o(l)},[e,t]),i},A7=e=>{const t=()=>T7(e),[n,i]=R.useState(t);return R.useEffect(()=>{const o=t();n!==o&&i(o)},[e]),n},j7=(e,t)=>{const n=()=>a7(e,t||{},!!t),[i,o]=R.useState(n),l=Nk();return R.useEffect(()=>{if(l){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),i},N7=e=>{const[t,n]=R.useState(e.matches);return R.useEffect(()=>{const i=o=>{n(o.matches)};return e.addListener(i),n(e.matches),()=>{e.removeListener(i)}},[e]),t},O7=(e,t,n)=>{const i=k7(t),o=A7(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const l=j7(o,i),u=N7(l);return Nk(),R.useEffect(()=>{},[u]),R.useEffect(()=>()=>{l&&l.dispose()},[]),u},Ok=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})();function D7(e){const t=Ok.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function hm(e,t,n=1){const i=D7(e),o=t==="forward"?n:-n;return Ok[(i+o+60*1e3)%60]}const M7=60*1e3,C7=60*M7,R7=24*C7;function L7(e,t){const n=new Date(e.getTime()),i=n.getFullYear()+t,o=n.getMonth(),l=n.getDate();return new Date(Date.UTC(i,o,l,n.getUTCHours(),n.getUTCMinutes()))}function Bb(e){const t=new Date(e);return t.setSeconds(0,0),t}function B7(e,t,n){const i=e.getHours(),o=n==="/"?(Math.floor((i+1)/2)*2-1+24)%24:(Math.floor(i/2)*2+1)%24,l=new Date(e);l.setHours(o,0,0,0);const u=new Date(l);u.setHours(o+2,0,0,0);const f=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?f:m}function Dk(e,t,n,i=120,o="/"){const l=Bb(e),u=B7(l,n,o),f=Bb(new Date(l.getTime()+u*120)),m=L7(e,i).getTime(),p=[];let y=hm(t,n,1);for(let _=f.getTime();_<=m;_+=10*R7)p.push({at:new Date(_),gz:y}),y=hm(y,n,1);return{firstChange:f,events:p}}function Mk(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return i=>i===n}function Ck(e,t,n,i){const o=Mk(i,n);let l=t;const u=[];for(const f of e.events){const m=f.gz.charAt(1);o(m)&&(l=hm(l,n,1),u.push({at:f.at,gz:l}))}return{events:u}}function as(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],i={deg:315,name:""},o=n.map(f=>({name:f.name,date:Gn(t,f.deg)})).concat([{name:i.name,date:Gn(t+1,i.deg)},{name:"",date:Gn(t+1,285)}]),l=Gn(t,315),u=Gn(t+1,315);return o.filter(f=>f.date>=l&&f.date<u).sort((f,m)=>f.date.getTime()-m.date.getTime())}const P7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},I7=e=>P7[e]??("".includes(e)?e:null),z7=e=>$7[e]??("".includes(e)?e:null);function q1(e){const t=I7(e[0]),n=z7(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function wd(e,t,n,i=120,o){function l(O){return O instanceof Date||(O=new Date(O)),Math.floor((O.getHours()+1)%24/2)}function u(O){return["","","","","","","","","","","",""][l(O)]}function f(O,C,M){const G=O.charAt(0),H=O.charAt(1),F=jr.indexOf(G),W=Yr.indexOf(H),ae=C==="forward"?M:-M,Q=(F+ae%10+10)%10,Y=(W+ae%12+12)%12;return jr[Q]+Yr[Y]}const m=as(e).sort((O,C)=>O.date.getTime()-C.date.getTime());let p;if(n==="forward"){const O=m.findIndex(C=>C.date>=e);O>=0&&(p=m[O].date)}else{const O=m.filter(C=>C.date<=e);O.length&&(p=O[O.length-1].date)}function y(O,C){const M=u(O),G={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},H=G[M],F=(H+2)%24,W=new Date(O);if(W.setSeconds(0,0),n==="backward"&&C){const Q=u(C),Y=G[Q],te=new Date(C);return te.setHours(Y,0,0,0),te}if(n==="forward"&&C){const Q=u(C),Y=G[Q],te=new Date(C);if(te.setHours(Y,0,0,0),te>W)return te}const ae=new Date(W);return n==="forward"?(ae.setHours(F,0,0,0),ae<=W&&ae.setDate(ae.getDate()+1)):(ae.setHours(H,0,0,0),ae>=W&&ae.setDate(ae.getDate()-1)),ae}new Date(e).setSeconds(0,0);const x=q1(At(e,127.5)),S=y(e,p),T=Math.floor(n==="forward"?(S.getTime()-e.getTime())/6e4:(e.getTime()-S.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let A=new Date(e.getTime()+k);try{const O=q1(At(e,o));(n==="forward"&&x!==O||n==="backward"&&x!==O)&&(A=new Date(e.getTime()+6e4))}catch{}const D=i/10,$=[];for(let O=0;O<D;O++){const C=new Date(A);C.setFullYear(C.getFullYear()+O*10),C.setSeconds(0,0);const M=f(t,n,O+1);$.push({at:C,gz:M})}return{natalMonthPillar:t,firstChange:A,mPillars:[],events:$}}function U7(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(i))}function Rk(e,t,n,i,o){const l=Mk(i,n);let u=t;const f=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=hm(u,n,1),f.push({at:m.at,gz:u,age:U7(o,m.at)}))}return{events:f}}function H7(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(o=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,i,o,l,0,0)}function Gm(e){const t=H7(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=cl(t,e.birthPlace?.lon??null,n);return Bb(i)}function Cy(e,t){const n=e.birthPlace?.lon??127.5,i=Gm(e),o=_t(i,t),l=Pi(i,t,o.charAt(0));return{year:ut(i,n),month:At(i,n),day:o,hour:l}}const G7=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})(),F7=e=>G7.indexOf(e),Tg=e=>{if(F7(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Ry(e){return typeof e=="object"&&e!==null}function Y7(e){return Ry(e)&&"default"in e}function q7(e){return Ry(e)&&typeof e.lunar2solar=="function"}function Z7(e){if(!Ry(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function V7(e){const t=Y7(e)?e.default:e;if(!q7(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,!!u);return Z7(f)}}}const K7=V7(Ny),Z1=e=>e<10?`0${e}`:`${e}`;function Ly(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||i!=="lunar")return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}try{const p=K7.lunar2solar(o,l,u,m),y=`${p.cYear}${Z1(p.cMonth)}${Z1(p.cDay)}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}}function W7(e,t="/"){const n=R.useMemo(()=>Ly(e),[e]),i=R.useMemo(()=>Gm(n),[n]),o=R.useMemo(()=>Cy(n,t),[n,t]);return R.useMemo(()=>{const l=wd(i,o.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function f(O,C){let M=null;const G=C.getTime();for(const H of O)if(H.at.getTime()<=G)M=H;else break;return M}const m=f(l.events,u)?.gz??o.month,p=Tg(m),y=u.getFullYear(),_=Gn(y,315),S=_&&u>=_?y:y-1,T=ut(new Date(S,1,10,0,0,0),127.5),k=Tg(T),A=At(u,127.5),D=Tg(A),$=[];return D&&$.push({key:"wolun",label:"",data:D}),k&&$.push({key:"seun",label:"",data:k}),p&&$.push({key:"daeun",label:"",data:p}),$},[i,n.dir,o.month,n.birthPlace?.lon])}function Ju(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function uc(e){return e<10?`0${e}`:`${e}`}function X7(e){return`${uc(e.getHours())}:${uc(e.getMinutes())}`}function J7(e){return`${e.getFullYear()}-${uc(e.getMonth()+1)}-${uc(e.getDate())} ${uc(e.getHours())}:${uc(e.getMinutes())}`}const fi=pd()(H2((e,t)=>{const n=new Date,i="/",o=127.5,l=o,u=ut(n,l),f=At(n,l),m=_t(n,i);return{date:n,scope:"",rule:i,lon:o,yearGZ:u,monthGZ:f,dayGZ:m,setDate:p=>{const{rule:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({date:p,yearGZ:ut(p,x),monthGZ:At(p,x),dayGZ:_t(p,y)})},resetDate:()=>{const{rule:p,lon:y}=t(),_=new Date,x=typeof y=="number"?y:void 0;e({date:_,yearGZ:ut(_,x),monthGZ:At(_,x),dayGZ:_t(_,p)})},resetMonth:()=>{const{lon:p}=t(),y=new Date;e({date:y,monthGZ:At(y,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({rule:p,yearGZ:ut(y,x),monthGZ:At(y,x),dayGZ:_t(y,p)})},setLon:p=>{const{date:y,rule:_}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:ut(y,x),monthGZ:At(y,x),dayGZ:_t(y,_)})},setFromEvent:(p,y)=>{const{rule:_,lon:x}=t(),S=typeof x=="number"?x:void 0;e({date:p.at,scope:y,yearGZ:ut(p.at,S),monthGZ:At(p.at,S),dayGZ:_t(p.at,_)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),ul={Classic:"",Modern:""};function Jt(e,t){const i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return i?i[t]??"":""}function Q7(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function e4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function t4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function n4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function Qt(e){const{baseBranch:t,targetBranch:n,era:i,gaehwa:o}=e;return!t||!n?"":i===""?o?Q7(t,n):e4(t,n):o?t4(t,n):n4(t,n)}function Sd(e,t="/",n=100){const i=R.useMemo(()=>Ly(e),[e]),o=R.useMemo(()=>Gm(i),[i]),l=R.useMemo(()=>Cy(i,t),[i,t]),u=(f,m)=>{const p=m.getFullYear()-f.getFullYear(),y=m.getMonth()-f.getMonth(),_=m.getDate()-f.getDate(),x=y<0||y===0&&_<0?p-1:p;return Math.max(0,x)};return R.useMemo(()=>wd(o,l.month,i.dir,n,i.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(o,m.at)})),[o,l.month,i.dir,n,i.birthPlace?.lon])}function kg(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function r4(e,t){if(!Array.isArray(e)||e.length===0||!kg(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],f=n[l+1];if(!kg(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!f||kg(f.at)&&t.getTime()<f.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const i=n.length-1,o=n[i];return{gz:o.gz??"",at:o.at,index:i}}function By(e,t,n){const{date:i,rule:o,lon:l}=fi(),u=R.useMemo(()=>n??i??new Date,[n,i]),f=Sd(e,e?.mingSikType),{gz:m}=r4(f,u);return R.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,y=o??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:ut(u,p),at:u},wol:{gz:At(u,p),at:u},il:{gz:_t(u,y),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,o,l,e,t,m])}const Py={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i4=Object.fromEntries(Object.entries(Py).map(([e,t])=>[t,e])),s4=Object.fromEntries(Object.entries($y).map(([e,t])=>[t,e])),a4=new Set(["","","","","","","","","",""]),o4=new Set(["","","","","","","","","","","",""]),l4=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],c4=(()=>{const e={};for(const t of l4){const[n,i]=t.keys;e[n]={label:t.label,elem:t.elem},e[i]={label:t.label,elem:t.elem}}return e})();function u4(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const d4={:1,:2,:3};function h4(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const f4={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function m4(e){switch(f4[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function p4({data:e,hourTable:t}){const{date:n}=fi(),i=yr(P=>P.settings),o=i.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:f,solarM:m,solarD:p}=R.useMemo(()=>{let P=Number(e.birthDay?.slice(0,4)??2e3),Z=Number(e.birthDay?.slice(4,6)??1),ie=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const me=gr(P,Z,ie);P=me.getFullYear(),Z=me.getMonth()+1,ie=me.getDate()}return{solarY:P,solarM:Z,solarD:ie}},[e.birthDay,e.calendarType]),[y,_]=R.useState(!1);R.useEffect(()=>{f&&m&&p&&_(dm(f,m,p))},[f,m,p]);const x=!e.birthTime||e.birthTime==="";function S(P,Z){const ie=!P.birthTime||P.birthTime==="";let me=Number(P.birthDay.slice(0,4)),ce=Number(P.birthDay.slice(4,6)),xe=Number(P.birthDay.slice(6,8));if(P.calendarType==="lunar"){const $e=gr(me,ce,xe);me=$e.getFullYear(),ce=$e.getMonth()+1,xe=$e.getDate()}const ke=ie?4:Number(P.birthTime.slice(0,2)),je=ie?30:Number(P.birthTime.slice(2,4)),Me=new Date(me,ce-1,xe,ke,je,0,0),Ee=!P.birthPlace||P.birthPlace.name===""||!P.birthPlace.lon,Pe=Ee?127.5:P.birthPlace.lon;let Ce;Ee?Ce=new Date(Me.getTime()-1800*1e3):Ce=cl(Me,Pe,ie);const Le=Z?new Date(Ce.getTime()-3600*1e3):Ce,Ue=P.mingSikType??"/",fe=ut(Le,Pe),Be=At(Le,Pe),le=_t(Le,Ue),he=ie?null:Pi(Le,Ue);return{corrected:Le,year:{stem:fe.charAt(0),branch:fe.charAt(1)},month:{stem:Be.charAt(0),branch:Be.charAt(1)},day:{stem:le.charAt(0),branch:le.charAt(1)},hour:he?{stem:he.charAt(0),branch:he.charAt(1)}:null}}const[T,k]=R.useState(()=>S(e,y));R.useEffect(()=>{k(S(e,y))},[e,y]);const A=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,D=T.day.stem,[$,O]=R.useState(null),[C,M]=R.useState(()=>e.mingSikType==="");R.useEffect(()=>{O(null),M(e.mingSikType==="")},[A,e.mingSikType]);const G=R.useMemo(()=>(C?Kb:L2)[D]??[],[C,D]),H=$??T.hour,F=i.sinsalBase===""?T.day.branch:T.year.branch,W=yd(P=>P.setManualHour),ae=(P,Z)=>{const ie={stem:P,branch:Z};O(ie),W(ie)},Q=P=>i.showSibiUnseong?Jt(D,P):null,Y=P=>i.showSibiSinsal?Qt({baseBranch:F,targetBranch:P,era:Ag(i.sinsalMode),gaehwa:i.sinsalBloom}):null,te=W7(e,l),re=O7({query:"(min-width: 992px)"}),Se=i.hiddenStem==="regular"?"main":"all",X=i.exposure,oe=X===""?0:d4[X],J=oe===0?[]:te.filter(P=>h4(P.label)<=oe),ye=dm(f,m,p),K=()=>_(P=>!P),U=By(e,t,n),B=U.dae.gz,q=U.se.gz,V=U.wol.gz;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),ye&&g.jsxs("button",{onClick:K,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[b4(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",`${x?"":J7(T.corrected)}`]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${J.length===0?"grid-cols-1":J.length===1?"grid-cols-[2fr_8fr]":J.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[J.length>0&&(re?g.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-2 p-3 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(P=>{let Z=P.data.stem,ie=P.data.branch;P.label.includes("")&&B&&(Z=B.charAt(0),ie=B.charAt(1)),P.label.includes("")&&q&&(Z=q.charAt(0),ie=q.charAt(1)),P.label.includes("")&&V&&(Z=V.charAt(0),ie=V.charAt(1));const me=Q(ie),ce=Y(ie);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(D,{stem:Z})}),g.jsx(Ha,{value:Z,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:ie,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Gu,{branch:ie,dayStem:D,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:me}),i.showSibiSinsal&&g.jsx("div",{children:ce}),o&&g.jsx(uf,{stem:Z,branch:ie})]})]})]},P.key)})})})]}):g.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-1 p-0 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(P=>{let Z=P.data.stem,ie=P.data.branch;P.label.includes("")&&B&&(Z=B.charAt(0),ie=B.charAt(1)),P.label.includes("")&&q&&(Z=q.charAt(0),ie=q.charAt(1)),P.label.includes("")&&V&&(Z=V.charAt(0),ie=V.charAt(1));const me=Q(ie),ce=Y(ie);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(D,{stem:Z})}),g.jsx(Ha,{value:Z,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:ie,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Gu,{branch:ie,dayStem:D,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:me}),i.showSibiSinsal&&g.jsx("div",{children:ce}),o&&g.jsx(uf,{stem:Z,branch:ie})]})]})]},P.key)})})})]})),re?g.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(P=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:P.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(D,{stem:P.data.stem})}),g.jsx(Ha,{value:P.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:P.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Gu,{branch:P.data.branch,dayStem:D,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(D,P.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:P.data.branch,era:Ag(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(uf,{stem:P.data.stem,branch:P.data.branch})]})]}):g.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},P.key))})})]}):g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"px-1 pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(P=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:P.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(D,{stem:P.data.stem})}),g.jsx(Ha,{value:P.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:P.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Gu,{branch:P.data.branch,dayStem:D,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(D,P.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:P.data.branch,era:Ag(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(uf,{stem:P.data.stem,branch:P.data.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},P.key))})})]})]}),x&&g.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("button",{onClick:()=>M(P=>!P),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:C?" : ":" : "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:G.map(P=>{const Z=P.charAt(0),ie=P.charAt(1),me=$?.stem===Z&&$?.branch===ie;return g.jsx("button",{onClick:()=>ae(Z,ie),className:`p-2 text-xs rounded border cursor-pointer ${me?m4(ie):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${P} ( )`,children:P},P)})})]})]})}function uf({stem:e,branch:t}){const n=Py[e]??e,i=$y[t]??t,o=`${n}${i}`,l=c4[o];if(!l)return null;const u=u4(l.elem);return g.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function g4(e){return Hm(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Ag(e){const t=ul;return g4(t)?e==="classic"?t.Classic:t.Modern:e}function Ha({value:e,kind:t,charType:n,thinEum:i}){const{settings:o}=yr(),l=hi(e,t,o),u=n===""?t==="stem"?Py[e]??e:$y[e]??e:t==="stem"?i4[e]??e:s4[e]??e,f=t==="stem"?a4.has(e):o4.has(e),m=i&&f?"font-thin":"font-bold";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function b4(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8),l=`${n}-${i}-${o}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function Xa(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,i=Number(e.birthDay?.slice(6,8)),o=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,i,o,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const f=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return cl(u,e.birthPlace?.lon??127.5,f)}function Fm(e,t){const n=e.length;if(n===0||!t)return 0;const i=e[0].at.getTime(),o=e[n-1].at.getTime(),l=t.getTime();if(l<=i)return 0;if(l>=o)return n-1;for(let u=0;u<n-1;u+=1){const f=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=f&&l<m)return u}return 0}const Lk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Bk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y4=Object.fromEntries(Object.entries(Lk).map(([e,t])=>[t,e])),v4=Object.fromEntries(Object.entries(Bk).map(([e,t])=>[t,e]));function V1(e,t,n){return n===""?t==="stem"?Lk[e]??e:Bk[e]??e:t==="stem"?y4[e]??e:v4[e]??e}const _4=new Set(["","","","","","","","","",""]),x4=new Set(["","","","","","","","","","","",""]);function K1(e,t){return t==="stem"?_4.has(e):x4.has(e)}function w4(e){return typeof e=="object"&&e!==null}function S4(e){return w4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function E4(e){const t=ul;return S4(t)?e==="classic"?t.Classic:t.Modern:e}const T4=!1,W1=e=>e<10?`0${e}`:`${e}`;function k4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=gr(o,l,u,0,0),y=`${p.getFullYear()}${W1(p.getMonth()+1)}${W1(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function A4({data:e}){const t=Sd(e),n=R.useMemo(()=>{const M=k4(e);return Xa(M)},[e]),i=R.useMemo(()=>{const M=e.mingSikType??"/";return _t(n,M).charAt(0)},[n,e.mingSikType]),{date:o,setFromEvent:l}=fi(),u=R.useMemo(()=>Fm(t,o),[t,o]),f=yr(M=>M.settings),{charType:m,thinEum:p,showSipSin:y,showSibiUnseong:_,showSibiSinsal:x,sinsalBase:S,sinsalMode:T,sinsalBloom:k}=f,A=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,D=e.mingSikType??"/",$=S===""?_t(n,D).charAt(1):ut(n,A).charAt(1),O=M=>_?Jt(i,M):null,C=M=>x?Qt({baseBranch:$,targetBranch:M,era:E4(T),gaehwa:!!k}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((M,G)=>{const H=M.gz.charAt(0),F=M.gz.charAt(1),W=j4(n,M.at),ae=G===u,Q=V1(H,"stem",m),Y=V1(F,"branch",m),te=K1(H,"stem"),re=K1(F,"branch"),Se=p&&te?"font-thin":"font-bold",X=p&&re?"font-thin":"font-bold",oe=O(F),J=C(F);return g.jsxs("div",{onClick:()=>l(M,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${ae?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${M.gz}  ${M.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{stem:H})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(H,"stem",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${Se}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(F,"branch",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:Y})}),y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{branch:F})}),(_||x)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[_&&g.jsx("div",{children:oe}),x&&g.jsx("div",{children:J})]})]})]},`${M.gz}-${G}`)})})]})}function j4(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(i))}function Ym(e,t){const n=e,i=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,o=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(i||!(o||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const Pk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$k={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N4=Object.fromEntries(Object.entries(Pk).map(([e,t])=>[t,e])),O4=Object.fromEntries(Object.entries($k).map(([e,t])=>[t,e]));function X1(e,t,n){return n===""?t==="stem"?Pk[e]??e:$k[e]??e:t==="stem"?N4[e]??e:O4[e]??e}const D4=new Set(["","","","","","","","","",""]),M4=new Set(["","","","","","","","","","","",""]);function J1(e,t){return t==="stem"?D4.has(e):M4.has(e)}function C4(e){return typeof e=="object"&&e!==null}function R4(e){return C4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function L4(e){const t=ul;return R4(t)?e==="classic"?t.Classic:t.Modern:e}function jg(e){return new Date(e,6,2,12,0,0,0)}function B4(e,t){return t-e+1}const P4=!1,Q1=e=>e<10?`0${e}`:`${e}`;function $4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=gr(o,l,u,0,0),y=`${p.getFullYear()}${Q1(p.getMonth()+1)}${Q1(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function I4({data:e,list:t,onSelect:n}){const i=yr(H=>H.settings),{date:o,setFromEvent:l}=fi(),[u,f]=R.useState(()=>t);R.useEffect(()=>{t&&t.length>0&&f(t)},[t]);const m=Xa(e),p=R.useMemo(()=>Ym(e,m),[e,m]),y=R.useMemo(()=>p.getFullYear(),[p]),_=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=R.useMemo(()=>{if(!o)return[];const H=o.getFullYear(),F=jg(H),W=ut(F,_);return[{at:F,gz:W}]},[o,_]),S=t.length>0?t:u.length>0?u:x,T=R.useMemo(()=>[...S].sort((H,F)=>H.at.getTime()-F.at.getTime()),[S]),k=R.useMemo(()=>{if(T.length===0)return 0;const H=Fm(T,o);return H<0?0:H>=T.length?T.length-1:H},[T,o]),[A,D]=R.useState(null);R.useEffect(()=>{D(null)},[o,T]);const $=A??k,O=R.useMemo(()=>{const H=$4(e);return Xa(H)},[e]),C=e.mingSikType??"/",M=R.useMemo(()=>_t(O,C).charAt(0),[O,C]),G=R.useMemo(()=>i.sinsalBase===""?_t(p,C).charAt(1):ut(p,_).charAt(1),[p,C,_,i.sinsalBase]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((H,F)=>{const W=H.at.getFullYear(),ae=jg(W),Q=ut(ae,_),Y=Q.charAt(0),te=Q.charAt(1),re=F===$,Se=X1(Y,"stem",i.charType),X=X1(te,"branch",i.charType),oe=J1(Y,"stem"),J=J1(te,"branch"),ye=i.thinEum&&oe?"font-thin":"font-bold",K=i.thinEum&&J?"font-thin":"font-bold",U=i.showSibiUnseong?Jt(M,te):null,B=i.showSibiSinsal?Qt({baseBranch:G,targetBranch:te,era:L4(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null,q=B4(y,W);return g.jsxs("div",{onClick:()=>{if(F===0){D(F);return}D(F);const V=jg(W),P=ut(V,_);l({at:V,gz:P},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(W)):Promise.resolve().then(()=>n(W)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${re?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${Q}  ${H.at.toLocaleDateString()}  ${q}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[q,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:W}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(M,{stem:Y})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(Y,"stem",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${ye}`,children:Se})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(te,"branch",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${K}`,children:X})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(M,{branch:te})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&U&&g.jsx("div",{children:U}),i.showSibiSinsal&&B&&g.jsx("div",{children:B})]})]})]},`${W}-${H.gz||F}`)})})]})}const z4=new Set(["","","","","","","","","","","",""]);function U4(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),o=[...as(new Date(n-1,5,15,12,0))??[],...as(new Date(n,5,15,12,0))??[],...as(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>z4.has(m.name));let l=o.findIndex((m,p)=>o[p].date<=t&&t<o[p+1]?.date);l<0&&(l=0);const u=o[l],f=o[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(f.date.getFullYear(),f.date.getMonth(),f.date.getDate(),0,0,0,0),cur:u,next:f}}const Ik={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H4=Object.fromEntries(Object.entries(Ik).map(([e,t])=>[t,e])),G4=Object.fromEntries(Object.entries(zk).map(([e,t])=>[t,e]));function eS(e,t,n){return n===""?t==="stem"?Ik[e]??e:zk[e]??e:t==="stem"?H4[e]??e:G4[e]??e}const F4=new Set(["","","","","","","","","",""]),Y4=new Set(["","","","","","","","","","","",""]);function tS(e,t){return t==="stem"?F4.has(e):Y4.has(e)}function q4(e){return typeof e=="object"&&e!==null}function Z4(e){return q4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function V4(e){const t=ul;return Z4(t)?e==="classic"?t.Classic:t.Modern:e}const K4=new Set(["","","","","","","","","","","",""]);function W4(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function X4(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function Ng(e){return new Date(e,5,15,12,0,0,0)}function J4(e){const n=[...as(Ng(e-1))??[],...as(Ng(e))??[],...as(Ng(e+1))??[]].map(f=>({name:String(f.name),date:new Date(f.date)})).sort((f,m)=>f.date.getTime()-m.date.getTime()).filter(f=>K4.has(f.name)),i=new Date(e,0,1,0,0,0,0),o=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(f=>f.name===""&&f.date>=i&&f.date<o);if(l===-1)return[];const u=[];for(let f=0;f<12;f++){const m=n[l+f];if(!m)break;const p=new Date(m.date),y=W4(p);u.push({name:m.name,termAt:p,at00:y})}return u}const Q4=!1,nS=e=>e<10?`0${e}`:`${e}`;function eP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=gr(o,l,u,0,0),y=`${p.getFullYear()}${nS(p.getMonth()+1)}${nS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function tP({data:e,activeYear:t,onSelect:n,onSelectMonth:i}){const o=yr(A=>A.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Xa(e),f=R.useMemo(()=>Ym(e,u),[e,u]),m=R.useMemo(()=>{const A=eP(e);return Xa(A)},[e]),p=e.mingSikType??"/",y=R.useMemo(()=>_t(m,p).charAt(0),[m,p]),_=o.sinsalBase===""?_t(f,p).charAt(1):ut(f,l).charAt(1),x=R.useMemo(()=>t?J4(t).map(D=>{const $=D.at00,O=new Date(D.at00);O.setDate(O.getDate()+1);const C=At(O,l);return{at:$,gz:C,term:D.name,termAt:D.termAt}}):[],[t,l]),{date:S,setFromEvent:T}=fi(),k=Fm(x,S);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((A,D)=>{const $=A.gz.charAt(0),O=A.gz.charAt(1),C=`${X4(A.at)}`,M=D===k,G=eS($,"stem",o.charType),H=eS(O,"branch",o.charType),F=tS($,"stem"),W=tS(O,"branch"),ae=o.thinEum&&F?"font-thin":"font-bold",Q=o.thinEum&&W?"font-thin":"font-bold",Y=o.showSibiUnseong?Jt(y,O):null,te=o.showSibiSinsal?Qt({baseBranch:_,targetBranch:O,era:V4(o.sinsalMode),gaehwa:!!o.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{i(A.at);const re=new Date(A.at),{start:Se}=U4(re);n?.(Se.getFullYear(),Se.getMonth()),T({at:re,gz:At(re,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${M?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${A.term}   ${A.gz}  ${A.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:C}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{stem:$})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi($,"stem",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${ae}`,children:G})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(O,"branch",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${Q}`,children:H})}),o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{branch:O})}),(o.showSibiUnseong||o.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[o.showSibiUnseong&&Y&&g.jsx("div",{children:Y}),o.showSibiSinsal&&te&&g.jsx("div",{children:te})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:A.term})]})]},`${A.term}-${A.at.toISOString()}`)})})]})}const Uk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},nP=Object.fromEntries(Object.entries(Uk).map(([e,t])=>[t,e])),rP=Object.fromEntries(Object.entries(Hk).map(([e,t])=>[t,e]));function rS(e,t,n){return n===""?t==="stem"?Uk[e]??e:Hk[e]??e:t==="stem"?nP[e]??e:rP[e]??e}const iP=new Set(["","","","","","","","","",""]),sP=new Set(["","","","","","","","","","","",""]);function iS(e,t){return t==="stem"?iP.has(e):sP.has(e)}function aP(e){return typeof e=="object"&&e!==null}function oP(e){return aP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function lP(e){const t=ul;return oP(t)?e==="classic"?t.Classic:t.Modern:e}const cP=!1,sS=e=>e<10?`0${e}`:`${e}`;function uP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=gr(o,l,u,0,0),m=`${f.getFullYear()}${sS(f.getMonth()+1)}${sS(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function dP(e,t){return new Date(e,t,15,12,0,0,0)}function Og(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const hP=new Set(["","","","","","","","","","","",""]);function Gk(e){return[...as(new Date(e-1,5,15,12,0))??[],...as(new Date(e,5,15,12,0))??[],...as(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,i)=>n.date.getTime()-i.date.getTime())}function fP(e){const t=Gk(e.getFullYear()),n=t.filter(u=>hP.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),f=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(f.date),end:new Date(m.date),cur:f,next:m}}let i=n.findIndex(u=>u.date>e)-1;i<0&&(i=n.length-1);const o=n[i],l=n[(i+1)%n.length];return{start:new Date(o.date),end:new Date(l.date),cur:o,next:l}}function mP({data:e,year:t,month:n,selectedMonth:i}){const o=yr(W=>W.settings),l=o.ilunRule||"/",u=e?Xa(e):null,f=e&&u?Ym(e,u):null,m=R.useMemo(()=>{const W=uP(e);return Xa(W)},[e]),p=R.useMemo(()=>m?_t(m,l).charAt(0):void 0,[m,l]),y=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&f?o.sinsalBase===""?_t(f,l).charAt(1):ut(f,y).charAt(1):null,{date:x,setFromEvent:S}=fi(),T=R.useMemo(()=>dP(t,n),[t,n]),k=R.useMemo(()=>x?Og(new Date(x)):null,[x]),A=R.useMemo(()=>i?Og(i):null,[i]),D=R.useMemo(()=>k??A??T,[k,A,T]),{start:$,end:O,cur:C,next:M}=R.useMemo(()=>fP(D),[D]),G=R.useMemo(()=>{const W=[],ae=new Date($);for(;ae<O;)W.push(new Date(ae)),ae.setDate(ae.getDate()+1);return W},[$,O]),H=R.useMemo(()=>{const W=Gk(D.getFullYear()),ae=W.filter(Y=>Y.date>=$&&Y.date<O),Q=W.find(Y=>Y.date>=O);return Q?[...ae,Q]:ae},[D,$,O]),F=R.useMemo(()=>{const W=[];let ae=[];const Q=new Date($).getDay();for(let Y=0;Y<Q;Y++)ae.push(null);for(const Y of G)ae.length===7&&(W.push(ae),ae=[]),ae.push(Y);for(;ae.length<7;)ae.push(null);return W.push(ae),W},[G,$]);return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[C?.name?g.jsxs(g.Fragment,{children:[C.name," ~ ",M?.name??""]}):`${t} ${n}`,H.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",H.map((W,ae)=>g.jsxs("span",{children:[W.name," ",pP(W.date),ae<H.length-1?"  ":""]},`${W.name}_${W.date.getTime()}_${ae}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(W=>g.jsx("div",{className:"py-1",children:W},W))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:F.map((W,ae)=>W.map((Q,Y)=>{if(!Q)return g.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${ae}-${Y}`);const te=Og(Q),re=new Date,Se=te.getFullYear()===re.getFullYear()&&te.getMonth()===re.getMonth()&&te.getDate()===re.getDate(),oe=!!k&&te.getFullYear()===k.getFullYear()&&te.getMonth()===k.getMonth()&&te.getDate()===k.getDate()||!k&&Se,J=NO(te,l),ye=J.charAt(0),K=J.charAt(1),U=rS(ye,"stem",o.charType),B=rS(K,"branch",o.charType),q=o.thinEum&&iS(ye,"stem")?"font-thin":"font-bold",V=o.thinEum&&iS(K,"branch")?"font-thin":"font-bold",P=!!p&&o.showSipSin,Z=!!p&&o.showSibiUnseong,ie=!!p&&_!=null&&o.showSibiSinsal,me=P?Ar(p,{stem:ye}):"",ce=P?Ar(p,{branch:K}):"",xe=Z?Jt(p,K):"",ke=ie?Qt({baseBranch:_,targetBranch:K,era:lP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):"",je=H.find(Me=>Me.date.getFullYear()===te.getFullYear()&&Me.date.getMonth()===te.getMonth()&&Me.date.getDate()===te.getDate());return g.jsxs("div",{onClick:()=>S({at:te},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${oe?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${J} (${te.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:te.getDate()}),je&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),P&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:me}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(ye,"stem",o)}`,children:g.jsx("span",{className:q,children:U})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(K,"branch",o)}`,children:g.jsx("span",{className:V,children:B})}),P&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:ce}),(Z||ie)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[Z&&xe&&g.jsx("div",{children:xe}),ie&&ke&&g.jsx("div",{children:ke})]})]},Q.toISOString())}))})]})}function pP(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",i="",o="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(i=u.value),u.type==="hour"&&(o=u.value),u.type==="minute"&&(l=u.value);return`${n}/${i} ${o}:${l}`}function aS(e,t){const n=e.at.getFullYear(),i=t?t.at.getFullYear():n+10,o=[];for(let l=n;l<i;l++){const u=Gn(l,315);let f=l;new Date<u&&(f=l-1);const p=ut(new Date(f,1,10));o.push({at:u,gz:p})}return o}function gP({data:e}){const t=Sd(e),[n,i]=R.useState(null),[o,l]=R.useState(null),[u,f]=R.useState("il"),[m,p]=R.useState(null);R.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((A,D)=>{const $=t[D+1]?.at;return T>=A.at&&(!$||T<$)});k!==-1&&i(k)},[t]),R.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const A=aS(T,k),D=new Date;A.findIndex((O,C)=>{const M=A[C+1]?.at;return D>=O.at&&(!M||D<M)})!==-1&&l({year:D.getFullYear(),month:D.getMonth()})},[n,t]);const y=By(e),{date:_}=fi(),x=_.getMonth()+1===1?_.getFullYear()-1:_.getFullYear(),S=R.useMemo(()=>{if(!y?.dae?.gz)return[];const T=t.findIndex((D,$)=>{const O=t[$+1]?.at;return y.dae.at>=D.at&&(!O||y.dae.at<O)});if(T===-1)return[];const k=t[T],A=t[T+1];return aS(k,A)},[t,y?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(A4,{data:e}),u==="se"||u==="wol"||u==="il"?g.jsx(I4,{data:e,list:S,onSelect:()=>{f("wol")}}):null,u==="wol"||u==="il"?g.jsx(tP,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),f("il")},onSelectMonth:p}):null,u==="il"&&o&&g.jsx(mP,{data:e,year:o.year,month:o.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const bP=new Set(gO),yP=new Set(bO);function oS(e){return typeof e=="string"&&e.length>=2&&bP.has(e[0])&&yP.has(e[1])}function ri(e,...t){if(oS(e))return e;for(const n of t)if(oS(n))return n;return""}const vP={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},Fk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_P={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function lS(e){return!!e&&Li..includes(e)}function xP(e){return Fk[e]??e}function cS(e){return _P[e]??e}function wP(e){if(lS(e))return e;const t=Fk[e];return lS(t)?t:""}function SP(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function EP(e){const t=ul;return SP(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function df(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function TP({data:e}){const t=yr(ae=>ae.settings),{manualHour:n}=yd(),{showSibiUnseong:i,showSibiSinsal:o,sinsalBase:l,sinsalMode:u,sinsalBloom:f}=t,{date:m}=fi(),p=R.useMemo(()=>Ly(e),[e]),y=R.useMemo(()=>Gm(p),[p]),_=R.useMemo(()=>Cy(p,"/"),[p]),x=R.useMemo(()=>wP(_.day?.charAt(0)??""),[_.day]),S=!e.birthTime||e.birthTime==="",T=R.useMemo(()=>Dk(y,_.hour,e.dir??"forward",120,"/"),[y,_.hour,e.dir]),k=R.useMemo(()=>Ck(T,_.day,e.dir??"forward",""),[T,_.day,e.dir]),A=R.useMemo(()=>wd(y,_.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[y,_.month,e.dir,p.birthPlace?.lon]),D=R.useMemo(()=>Rk(A,_.year,e.dir??"forward","",y),[A,_.year,e.dir,y]),$=R.useMemo(()=>{const ae=T?.events?.[0];return ae?{at:ae.at,from:ri(_.hour),to:ri(ae.gz)}:null},[T?.events,_.hour]),O=R.useMemo(()=>{const ae=A?.events?.[0];return A?.firstChange?{at:A.firstChange,from:ri(_.month),to:ri(ae?.gz??_.month)}:null},[A?.firstChange,A?.events,_.month]),C=R.useMemo(()=>{const ae=S?n?n.stem+n.branch:"":ri(df(T.events,m)?.gz,_.hour);let Q;if(S&&n){const Y=m.getFullYear(),te=m.getMonth(),re=m.getDate(),Se=vP[n.branch]??0,X=new Date(Y,te,re,Se,0),oe=_t(X,e.mingSikType??"/");Q=ri(oe,_.day)}else Q=ri(df(k.events,m)?.gz,_.day);return{si:ae,il:Q,wl:ri(df(A.events,m)?.gz,_.month),yn:ri(df(D.events,m)?.gz,_.year)}},[m,T.events,k.events,A.events,D.events,_,S,n,e.mingSikType]),M=R.useMemo(()=>({si:ri(Pi(m,"/")),il:ri(_t(m,"/")),wl:ri(At(m)),yn:ri(ut(m))}),[m]),G=R.useMemo(()=>l===""?_.day.charAt(1):_.year.charAt(1),[l,_.day,_.year]),H=R.useMemo(()=>EP(u),[u]),F=ae=>{if(!ae)return{unseong:"",shinsal:""};const Q=xP(x),Y=cS(ae.charAt(1)),te=cS(G);return{unseong:i&&Jt(Q,Y)||"",shinsal:o&&Qt({baseBranch:te,targetBranch:Y,era:H,gaehwa:!!f})||""}},W=(ae,Q,Y="myoun")=>{const te=Q,{unseong:re,shinsal:Se}=Q?F(Q):{unseong:"",shinsal:""},X=Y==="myoun"&&S&&(ae===""||ae==="");return g.jsx(cc,{label:ae,gz:te,dayStem:x,settings:t,unseongText:Q?re:"",shinsalText:Q?Se:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:X},`${Y}-${ae}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Ju(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[W("",C.si,"myoun"),W("",C.il,"myoun"),W("",C.wl,"myoun"),W("",C.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[W("",M.si,"live"),W("",M.il,"live"),W("",M.wl,"live"),W("",M.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",$?`${Ju($.at)} (${$.from}  ${$.to})`:" "]}),g.jsxs("div",{children:[":"," ",O?`${Ju(O.at)} (${O.from}  ${O.to})`:" "]})]})]})}const uS=["","","","","","","","","",""],kP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},AP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jP={:"",:"",:"",:"",:""},NP={:"",:"",:"",:"",:""},OP={:"",:"",:"",:"",:""},DP={:"",:"",:"",:"",:""};function MP(e,t){switch(e){case"":return t;case"":return jP[t];case"":return OP[t];case"":return DP[t];case"":return NP[t];default:return t}}function CP({data:e,perStemElementScaled:t,elementPercent:n,dayStem:i,width:o=280,height:l=280,revKey:u}){const f=o,m=l,p=f/2,y=m/2,_=Math.min(f,m)*.37,x=R.useMemo(()=>{const O=(i??"").charAt(0);return AP[O]??null},[i]),S=O=>Math.PI/2+2*-Math.PI*O/5,T=R.useMemo(()=>e.map((O,C)=>({...O,x:p+_*Math.cos(S(C)),y:y-_*Math.sin(S(C))})),[e,p,y,_]),[k,A]=R.useState(0),D=R.useRef(""),$=R.useMemo(()=>{const O=e.map(G=>`${G.name}:${G.value}`).join(","),C=uS.map(G=>`${G}:${t?.[G]??0}`).join(","),M=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",O,C,M,i??""].join("||")},[u,e,t,i,n]);return R.useEffect(()=>{$!==D.current&&(D.current=$,A(O=>O+1))},[$]),g.jsx("div",{className:"w-full",children:g.jsxs("svg",{width:f,height:m,className:"mx-auto pt-2",children:[T.map((O,C)=>{const M=T[(C+2)%5];return g.jsx("line",{x1:O.x,y1:O.y,x2:M.x,y2:M.y,stroke:"#94a3b8",strokeWidth:1},`line-${C}`)}),T.map((O,C)=>{const M=T[(C+1)%5],G=(O.x+M.x)/2,H=(O.y+M.y)/2,F=G-p,W=H-y,ae=1.5,Q=p+F*ae,Y=y+W*ae;return g.jsx("path",{d:`M${O.x},${O.y} Q${Q},${Y} ${M.x},${M.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${C}`)}),g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:g.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(O=>{const C=O.name,M=x?MP(C,x):null,G=M?uS.filter(H=>kP[H]===M).map(H=>[H,t?.[H]??0]):[];return g.jsxs("g",{transform:`translate(${O.x},${O.y})`,children:[g.jsx("circle",{r:33,fill:O.color??"#334155",opacity:O.value===0?.7:1}),g.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[O.name," ",O.value]}),G.map(([H,F],W)=>g.jsxs("text",{textAnchor:"middle",dy:8+W*11,fontSize:10,className:"fill-white",children:[H," ",Math.round(F)]},H))]},`${O.name}-${O.value}`)})]},k)})}const RP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function Iy(e){return Math.max(0,Math.min(100,e))}function Yk(e){const t=Iy(e);return RP.find(i=>t>=i.min&&t<i.max)?.name??""}const LP=[10,20,35,45,55,65,80];function BP({value:e}){const t=R.useMemo(()=>Iy(e),[e]),n=R.useMemo(()=>Yk(t),[t]);return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:""}),g.jsx("span",{children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[LP.map(i=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${i}%`},title:`${i}%`},i)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const Js=["","","",""],hf={year:0,month:1,day:2,hour:3},Dg="",PP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=PP[i[1]]??i[1],l=qk[i[2]]??i[2];return`${o}${l}`}return""}const fm=e=>e&&e.length>=1?e[0]:"",Qs=e=>e&&e.length>=2?e[1]:"",zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Uy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Hy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Gy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Fy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Yy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],dS=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Vy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Ky=[{pair:["",""],label:""}],$P=new Set(["","","",""]),ld=new Set(["","","",""]),qm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],Zm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function Sn(e,t,n){for(const{pair:[i,o],label:l}of e)if(t===i&&n===o||t===o&&n===i)return l;return null}function Wt(e,t){e.includes(t)||e.push(t)}const Yo=e=>[...e].sort((t,n)=>t-n).map(t=>Js[t]).join("X"),Mg=(e,t)=>e===0&&t===3||e===3&&t===0;function hS(e,t){const n=[];for(const i of e)for(const o of t){if(i===o)continue;const l=Math.min(i,o),u=Math.max(i,o);l===0&&u===3||n.push([l,u])}return n.sort((i,o)=>{const l=Math.abs(i[0]-i[1]),u=Math.abs(o[0]-o[1]);return l!==u?l-u:0})}function IP(e){const t=[],n=[...e].sort((i,o)=>i-o);for(let i=0;i<n.length;i++)for(let o=i+1;o<n.length;o++){const l=n[i],u=n[o];l===0&&u===3||t.push([l,u])}return t}const Zk=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function zP(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const UP=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Vk(e){for(const t of UP){const i=(e[t]??[]).map(o=>o&&o.normalize("NFKC")).filter(o=>!!o&&!zP(o));e[t]=Array.from(new Set(i))}return e.jijiHyeong=Kk(e.jijiHyeong),e}const fS=["","","",""];function Kk(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(o=>o?.normalize("NFKC")??""))).filter(Boolean),n=t.some(o=>o.includes("")||o.includes("()")),i=t.some(o=>o.includes("")||o.includes("()"));return t.filter(o=>!(n&&(o.includes("")||o.includes("")||o.includes(""))||i&&(o.includes("")||o.includes("")||o.includes(""))))}function Wy(e,t={}){const{emitGanjiAmhap:n=!0}=t,i=e.map(Fe),o=i.map(x=>fm(x)),l=i.map(x=>Qs(x)),f={title:i.map((x,S)=>`${x}${["","","",""][S]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,S,T,k)=>{const A=o.flatMap(($,O)=>$===x?[O]:[]),D=o.flatMap(($,O)=>$===S?[O]:[]);for(const $ of A)for(const O of D)$!==O&&Math.abs($-O)===1&&Wt(k,`#${Yo([$,O])}_${T}`)};zy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganHap)),Uy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganChung));const p=x=>{const S=new Set,T=[];for(const k of x)for(let A=0;A<l.length;A++)if(l[A]===k&&!S.has(A)){S.add(A),T.push(A);break}return T};qm.forEach(({name:x,members:S,wang:T})=>{const k=S.filter(D=>l.includes(D)),A=new Set(k).size;if(A===3){const D=p(S);D.length===3&&Wt(f.jijiSamhap,`#${Yo(D)}_${x}`)}else if(A===2){if(!k.includes(T))return;const[D,$]=k,O=l.flatMap((H,F)=>H===D?[F]:[]),C=l.flatMap((H,F)=>H===$?[F]:[]),M=hS(O,C),G=M.length>1;for(const[H,F]of M){const W=Mg(H,F),ae=`#${Yo([H,F])}_${D}${$}${G?"":W?`_${Dg}`:""}`;Wt(f.jijiSamhap,ae)}}}),Zm.forEach(({name:x,members:S})=>{const T=S.filter(A=>l.includes(A));if(new Set(T).size===3){const A=p(S);A.length===3&&Wt(f.jijiBanghap,`#${Yo(A)}_${x}`)}});const y=(x,S,T,k)=>{const A=l.flatMap((C,M)=>C===x?[M]:[]),D=l.flatMap((C,M)=>C===S?[M]:[]),$=hS(A,D),O=$.length>1;for(const[C,M]of $){const G=Mg(C,M),H=`#${Yo([C,M])}_${T}${O?"":G?`_${Dg}`:""}`;Wt(k,H)}};if(Hy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiYukhap)),Gy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiChung)),Fy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiPa)),Yy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHae)),qy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiWonjin)),Zy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const S=[],T=new Set;if(x.forEach(k=>{l.forEach((A,D)=>{A===k&&(S.push(D),T.add(k))})}),T.size===3){const k=Array.from(new Set(S)).sort((A,D)=>A-D);Wt(f.jijiHyeong,`#${Yo(k)}_${x.join("")}`)}}),Vy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),Ky.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),["","","",""].forEach(x=>{const S=l.flatMap((A,D)=>A===x?[D]:[]),T=IP(S),k=T.length>1;for(const[A,D]of T){const $=Mg(A,D),O=`#${Yo([A,D])}_${x}${x}${k?"":$?`_${Dg}`:""}`;Wt(f.jijiHyeong,O)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,S],label:T})=>y(x,S,T,f.amhap)),n)for(let x=0;x<4;x++){const S=i[x]??"";if(S.length<2)continue;const T=`${S[0]}${S[1]}`;ld.has(T)&&Wt(f.ganjiAmhap,`#${Zk(Js[x])}_${T}`)}return f.jijiHyeong=Kk(f.jijiHyeong),Vk(f)}function pr(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,i=[Fe(e.natal[0]??""),Fe(e.natal[1]??""),Fe(e.natal[2]??""),Fe(e.natal[3]??"")],l=[Fe(e.daewoon??""),Fe(e.sewoon??""),Fe(e.wolwoon??"")].some(y=>y.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let y=0;y<4;y++){const _=i[y]??"";if(_.length<2)continue;const x=`${_[0]}${_[1]}`;ld.has(x)&&Wt(u.ganjiAmhap,`#${Zk(Js[y])}_${x}`)}const f=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[y,_]of f){if(!_)continue;const x=Fe(_);if(!x||x.length<2)continue;const S=fm(x),T=Qs(x);{const D=`${S}${T}`;ld.has(D)&&Wt(u.ganjiAmhap,`#${y}_${D}`)}for(let D=0;D<4;D++){const $=i[D]??"";if($.length<2)continue;const O=Js[D],C=fm($),M=Qs($),G=Sn(zy,S,C);G&&Wt(u.cheonganHap,`#${y}X${O}_${G}`);const H=Sn(Uy,S,C);H&&Wt(u.cheonganChung,`#${y}X${O}_${H}`);const F=Sn(Hy,T,M);F&&Wt(u.jijiYukhap,`#${y}X${O}_${F}`);const W=Sn(Gy,T,M);W&&Wt(u.jijiChung,`#${y}X${O}_${W}`);const ae=Sn(Fy,T,M);ae&&Wt(u.jijiPa,`#${y}X${O}_${ae}`);const Q=Sn(Yy,T,M);Q&&Wt(u.jijiHae,`#${y}X${O}_${Q}`);const Y=Sn(qy,T,M);Y&&Wt(u.jijiWonjin,`#${y}X${O}_${Y}`);const te=Sn(Zy,T,M);te&&Wt(u.jijiGwimun,`#${y}X${O}_${te}`);const re=Sn(Vy,T,M);if(re)Wt(u.jijiHyeong,`#${y}X${O}_${re}`);else{const oe=Sn(Ky,T,M);oe?Wt(u.jijiHyeong,`#${y}X${O}_${oe}`):T===M&&$P.has(T)&&Wt(u.jijiHyeong,`#${y}X${O}_${T}${M}`)}const X=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,M);X&&Wt(u.amhap,`#${y}X${O}_${X}`)}const k=i.map(D=>{const $=Qs(D??"");return qk[$]??$});for(const D of qm){if(!D.members.includes(T))continue;const $=D.members.filter(C=>C!==T),O=k.map((C,M)=>({b:C,pos:Js[M]})).filter(C=>$.includes(C.b));if(new Set(O.map(C=>C.b)).size===2){const[C,M]=O.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Wt(u.jijiSamhap,`#${y}X${C}X${M}_(${D.name})`)}}const A=[...i.map((D,$)=>({b:Qs(D),pos:Js[$]}))];for(const D of Zm){const $=A.filter(O=>D.members.includes(O.b));if(new Set($.map(O=>O.b)).size===3){const O=$.map(C=>C.pos).join("X");Wt(u.jijiBanghap,`#${O}_(${D.name})`)}}for(const D of dS){if(!D.members.includes(T))continue;const $=D.members.filter(C=>C!==T),O=k.map((C,M)=>({b:C,pos:Js[M]})).filter(C=>$.includes(C.b));if(new Set(O.map(C=>C.b)).size===2){const[C,M]=O.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Wt(u.jijiHyeong,`#${y}X${C}X${M}_${D.name}`),D.name===""&&(m=!0),D.name===""&&(p=!0)}}}{const y=[],_=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,S]of _){const T=Fe(S??"");T.length>=2&&y.push({kind:x,b:Qs(T)})}if(y.length>=2){const x=i.map((S,T)=>({pos:Js[T],b:Qs(S)}));for(const S of dS)for(let T=0;T<y.length;T++)for(let k=T+1;k<y.length;k++){const A=y[T],D=y[k];for(const $ of x){const O=new Set([$.b,A.b,D.b]);if(O.size===3&&S.members.every(C=>O.has(C))){const C=[A.kind,D.kind].sort((G,H)=>fS.indexOf(G)-fS.indexOf(H)).join("X"),M=`${$.pos}X${C}`;Wt(u.jijiHyeong,`#${M}_${S.name}`),S.name===""&&(m=!0),S.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(y=>!(m&&/(||)/.test(y)||p&&/(||)/.test(y)))),Vk(u)}function HP(e,t){const i=e.map(Fe).map(m=>Qs(m)),o=hf.month,l=i[o],u=m=>{const p=[];for(let y=0;y<4;y++){const _=i[y];_&&m.has(_)&&p.push(y)}return p},f=m=>{const p=[...m].sort((y,_)=>y-_);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of qm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(y.length===2&&y.includes(o)){const _=y[0]===o?y[1]:y[0],x=l===m.wang;_===hf.day&&x?t[m.out]+=8:_===hf.year&&x?t[m.out]+=6:_===hf.hour&&(t[m.out]+=x?4:2)}}for(const m of Zm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function mS(e){const t=["","","",""],n=e.map(Fe),i=n.map(f=>fm(f)),o=n.map(f=>Qs(f)),l=new Map,u=new Map;for(let f=0;f<4;f++){const m=i[f],p=o[f];m.includes(m)&&l.set(m,[...l.get(m)??[],f]),p.includes(p)&&u.set(p,[...u.get(p)??[],f])}return{stemsByPos:i,brsByPos:o,stemPos:l,brPos:u,names:t}}function Gt(e){return Js[e]}function mr(e,t){t&&(e.includes(t)||e.push(t))}function GP(e,t){const n=mS(e),i=mS(t),o={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let f=0;f<4;f++){const m=n.stemsByPos[f],p=n.brsByPos[f];for(let y=0;y<4;y++){const _=i.stemsByPos[y],x=i.brsByPos[y],S=Sn(zy,m,_);S&&mr(o.,`${Gt(f)}X${Gt(y)} ${S}`);const T=Sn(Uy,m,_);T&&mr(o.,`${Gt(f)}X${Gt(y)} ${T}`);const k=Sn(Hy,p,x);k&&mr(o.,`${Gt(f)}X${Gt(y)} ${k}`);const A=Sn(Gy,p,x);A&&mr(o.,`${Gt(f)}X${Gt(y)} ${A}`);const D=Sn(Fy,p,x);D&&mr(o.,`${Gt(f)}X${Gt(y)} ${D}`);const $=Sn(Yy,p,x);$&&mr(o.,`${Gt(f)}X${Gt(y)} ${$}`);const O=Sn(qy,p,x);O&&mr(o.,`${Gt(f)}X${Gt(y)} ${O}`);const C=Sn(Zy,p,x);C&&mr(o.,`${Gt(f)}X${Gt(y)} ${C}`);const G=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);G&&mr(o.,`${Gt(f)}X${Gt(y)} ${G}`);const H=`${m}${x}`,F=`${_}${p}`;ld.has(H)&&mr(o.,`${Gt(f)}X${Gt(y)} ${H}`),ld.has(F)&&mr(o.,`${Gt(y)}X${Gt(f)} ${F}`);const W=Sn(Vy,p,x);if(W)mr(o.,`${Gt(f)}X${Gt(y)} ${W}`);else{const ae=Sn(Ky,p,x);ae&&mr(o.,`${Gt(f)}X${Gt(y)} ${ae}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(i.brsByPos.filter(Boolean));for(const f of qm){if(f.members.every(y=>l.has(y)||u.has(y))){const y=f.members.filter(x=>l.has(x)).length,_=f.members.filter(x=>u.has(x)).length;y>=1&&_>=1&&mr(o.,`${f.name}`)}const p=f.members.filter(y=>l.has(y)||u.has(y));if(p.length===2&&p.includes(f.wang)){const y=p.some(x=>l.has(x)),_=p.some(x=>u.has(x));if(y&&_){const[x,S]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(S)?.[0],k=i.brPos.get(x)?.[0]??i.brPos.get(S)?.[0];T!=null&&k!=null&&mr(o.,`${Gt(T)}X${Gt(k)} ${x}${S}`)}}}for(const f of Zm)if(f.members.every(p=>l.has(p)||u.has(p))){const p=f.members.filter(_=>l.has(_)).length,y=f.members.filter(_=>u.has(_)).length;p>=1&&y>=1&&mr(o.,`${f.name}`)}return Object.keys(o).forEach(f=>o[f].sort()),o}function Pu(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Xi({label:e,natal:t,dae:n,se:i,wol:o,il:l}){const u=n.length+i.length+o.length+l.length>0,f=t.length>0?t:["#"],m=u?f.filter(_=>_!=="#"):f,y=m.some(_=>_!=="#")||n.length>0||i.length>0||o.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[g.jsx("div",{className:y,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"natal"),children:_},`natal-${x}`)),n.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"dae"),children:_},`dae-${x}`)),i.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"se"),children:_},`se-${x}`)),o.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"wol"),children:_},`wol-${x}`)),l.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Pu(_,"il"),children:_},`il-${x}`))]})]})}function Pb(e){return Array.isArray(e)?e:[]}function ff(e,t){const n=new Set(Pb(e));return Pb(t).filter(o=>!n.has(o))}function FP({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const u=Wy(e),f=pr({natal:e}),m=t?pr({natal:e,daewoon:t}):f,p=n?pr({natal:e,daewoon:t,sewoon:n}):m,y=i?pr({natal:e,daewoon:t,sewoon:n,wolwoon:i}):p,_=o?pr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o}):y,x=k=>({natal:Pb(u[k]),dae:ff(f[k],m[k]),se:ff(m[k],p[k]),wol:ff(p[k],y[k]),il:ff(y[k],_[k])}),S={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(Xi,{label:"",...T(S.cheonganHap)}),g.jsx(Xi,{label:"",...T(S.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(Xi,{label:"",...T(S.jijiSamhap)}),g.jsx(Xi,{label:"",...T(S.jijiBanghap)}),g.jsx(Xi,{label:"",...T(S.jijiYukhap)}),g.jsx(Xi,{label:"",...T(S.amhap)}),g.jsx(Xi,{label:"",...T(S.ganjiAmhap)}),g.jsx(Xi,{label:"",...T(S.jijiChung)}),g.jsx(Xi,{label:"",...T(S.jijiHyeong)}),g.jsx(Xi,{label:"",...T(S.jijiPa)}),g.jsx(Xi,{label:"",...T(S.jijiHae)})]})}const YP={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},qP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Wk(e){const t=qP[e]??"";return YP[t]}const Xk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ZP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ed={:"",:"",:"",:"",:""},cd={:"",:"",:"",:"",:""},Oc={:"",:"",:"",:"",:""},VP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],KP={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function Xy(e){return Math.max(0,Math.min(100,e))}function Sc(e,t,n){return Math.max(t,Math.min(n,e))}function WP(e){const t=Xy(e);return VP.find(n=>t>=n.min&&t<n.max)?.name??""}function XP(e){const t=e?.[2]?.charAt(0)??"";return Xk[t]??null}function JP(e){return(e?.[1]?.charAt(1)??"")||null}function Vm(e){const t=Object.entries(Oc);for(const[n,i]of t)if(i===e)return n;return""}function QP(e){return e?{peer:e,resource:cd[e],leak:Ed[e],wealth:Oc[e],officer:Vm(e)}:null}function e9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=n.charAt(0),o=n.charAt(1),l=Xk[i],u=ZP[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function t9(e){const t=Object.values(e).reduce((i,o)=>i+o,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(i=>{n[i]=e[i]/t*100}),n}function n9(e){if(!e||e.length===0)return null;const t=e.reduce((i,o)=>i+(o?.value??0),0)||0;if(t<=0)return null;const n=i=>e.find(o=>o.name===i)?.value??0;return Xy((n("")+n(""))/t*100)}function r9(e,t){return!e||!t?null:t===e?"":Ed[e]===t?"":Oc[e]===t?"":Vm(e)===t?"":cd[e]===t?"":null}const Cg=24,i9=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function s9(e){for(const[t,n]of i9)if(e>=t)return n;return 1}const mm=20,pS=(e,t)=>Sc((mm-(t[e]??0))/mm,0,1),gS=(e,t)=>Sc(((t[e]??0)-mm)/mm,0,1);function a9(e,t,n,i){const o=r9(e,n);if(!e||!o)return 0;const l=Sc((50-t)/50,0,1),u=Sc((t-50)/50,0,1),f=pS(n,i),m=gS(n,i),p=pS(e,i),y=gS(e,i),_=6.5;let x=0;if(l>0)switch(o){case"":x=+(.3+.4*p+.15*f)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-f)+.1*y)*l;break;case"":x=-(.22+.25*(1-f)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-f)+.1*(1-p))*l;break}else if(u>0)switch(o){case"":x=-(.25+.25*(1-f)+.2*y)*u;break;case"":x=-(.28+.2*y)*u;break;case"":x=+(.18+.2*f+.15*y)*u;break;case"":x=+(.22+.25*f+.1*y)*u;break;case"":x=+(.2+.2*f)*u;break}else switch(o){case"":x=.08*(p+f);break;case"":x=.05*p-.03*y;break;case"":x=.02*f-.02*m;break;case"":x=.01*f-.06*m;break;case"":x=-.05*(1-f);break}return Math.round(_*x*10)/10}function o9(e,t,n,i){const o=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(o){const f=Ed[e],m=Oc[e],p=Vm(e);u[f]+=28,u[m]+=22,u[p]+=20,i.get(f)?.push(":    ()"),i.get(m)?.push(":     "),i.get(p)?.push(":     ")}if(l){const f=cd[e],m=e;u[f]+=28,u[m]+=22,i.get(f)?.push(":     "),i.get(m)?.push(":     ")}return u}function bS(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=KP[e]??{temp:"mild",wet:"normal"},i={:0,:0,:0,:0,:0};return n.temp==="cold"?(i.+=16,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(i.+=14,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),i}function yS(e,t){const n={:0,:0,:0,:0,:0},i=["","","","",""];for(const o of i){const l=Oc[o],u=Math.max(0,(e[o]??0)-(e[l]??0));if(u<=0)continue;const f=Ed[o],m=Math.round(u*.35);m>0&&(n[f]+=m,t.get(f)?.push(`: ${o}${l} `))}return n}function vS(e,t){const n={:0,:0,:0,:0,:0},i=Object.entries(e),o=Math.min(...i.map(([,u])=>u)),l=i.filter(([,u])=>u<=Math.max(6,o));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function _S(e,t){const n=XP(e),i=JP(e),o=e9(e),l=t9(o);let u=n9(t);if(u==null)if(!n)u=50;else{const Q=n,Y=cd[n],te=Object.values(o).reduce((re,Se)=>re+Se,0)||1;u=Xy(((o[Q]??0)+(o[Y]??0))/te*100)}const f=WP(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(Q=>[Q,[]]));if(n){const Q=o9(n,f,o,p);Object.keys(m).forEach(Y=>{m[Y]+=Q[Y]??0})}const y=bS(i,p);Object.keys(m).forEach(Q=>{m[Q]+=y[Q]??0});const _=yS(o,p);Object.keys(m).forEach(Q=>{m[Q]+=_[Q]??0});const x=vS(o,p);Object.keys(m).forEach(Q=>{m[Q]+=x[Q]??0});const S=QP(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const Q of t)T[Q.name]=Q.value;if(u>=45&&u<=55&&S){const Q=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[S.resource]+=14,p.get(S.resource)?.push(": -"),m[S.peer]+=10,p.get(S.peer)?.push(": -"),m[S.leak]+=6,p.get(S.leak)?.push(": -"),m[S.wealth]+=3,p.get(S.wealth)?.push(": -"),Q&&S.officer&&(m[S.officer]=Math.round(m[S.officer]*.8*10)/10,p.get(S.officer)?.push(":   "))):(m[S.leak]+=14,p.get(S.leak)?.push(": -"),m[S.wealth]+=10,p.get(S.wealth)?.push(": -"),S.officer&&(m[S.officer]+=6,p.get(S.officer)?.push(": -")),m[S.resource]+=3,p.get(S.resource)?.push(": -"))}["","","","",""].forEach(Q=>{const Y=a9(n,u,Q,l);m[Q]=Sc(Math.round((m[Q]+Y)*10)/10,0,999)});const A=u<50;["","","","",""].forEach(Q=>{const Y=l[Q]??0,te=A&&n===Q;if(Y>=Cg&&!te){const re=s9(Y);m[Q]=Math.round(m[Q]*re*10)/10;const Se=Math.min(14,Math.max(0,Math.ceil((Y-Cg)*.5)));Se>0&&(m[Q]=Sc(m[Q]-Se,0,999)),p.get(Q)?.push(" ()")}});const D={:[],:[],:[],:[],:[]};if(n){const Q=Ed[n],Y=Oc[n],te=Vm(n),re=n,Se=cd[n];D[Q].push(""),D[Y].push(""),D[te].push(""),D[re].push(""),D[Se].push("")}const $={:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0},O=Q=>{const Y=l[Q]??0;return Y>=Cg&&!(A&&n===Q)?Y>=55?4:Y>=45?3:2:$[Q]?0:1},C=bS(i,new Map),M=yS(o,new Map),G=vS(o,new Map),H=Object.keys(m).map(Q=>({element:Q,score:Math.round(m[Q]*10)/10,via:l9(Q,C,M,G),reasons:(p.get(Q)??[]).slice(),tenGodHints:D[Q]})).sort((Q,Y)=>{const te=O(Q.element),re=O(Y.element);return te!==re?te-re:Y.score!==Q.score?Y.score-Q.score:Q.element.localeCompare(Y.element)}),F=c9(f,C,M,G),W={:0,:0,:0,:0,:0},ae=t?t.reduce((Q,Y)=>(Q[Y.name]=Y.value,Q),{...W}):void 0;return{chosenType:F,ordered:H,debug:{band:f,overallPct:u,elementScore:o,tenGodTotals:ae,monthBranch:i??void 0}}}function l9(e,t,n,i){const o=[];return(t[e]??0)>0&&o.push(""),(n[e]??0)>0&&o.push(""),(i[e]??0)>0&&o.push(""),o.length===0&&o.push(""),o}function c9(e,t,n,i){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((y,_)=>y+_,0),u=l(t),f=l(n),m=l(i);return u>Math.max(f,m)?"":f>=m?"":""}const u9=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),d9=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),h9=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),f9=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),m9=e=>u9[e]??e,p9=e=>h9[e]??e,g9=e=>d9[e]??e,b9=e=>f9[e]??e;function y9(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?m9(n):g9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}function Jy(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?p9(n):b9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}const v9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Jk={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},x9={...Jk,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},xS=y9(v9),wS=Jy(_9);Jy(Jk);Jy(x9);const w9=["","","","",""],mn={2:4,1:3,3:2,0:1};function mf(e,t,n="classic"){const i=oi(t),o=Xt(t),l=(n==="hgc"?Om:Nm)[o]??[];return[i,...l].includes(e)}const dc={1:4,2:3,0:2,3:1},Qk=new Set(Object.keys(Em)),eA=new Set(Object.keys(Zb)),S9=e=>e.slice(0,1),E9=e=>e.slice(-1);function ea(e){return Sm.has(e)?e:Qk.has(e)?Em[e]??e:e}function br(e){return qb.has(e)?e:eA.has(e)?Zb[e]??e:e}function oi(e){return ea(S9(e))}function Xt(e){return br(E9(e))}const Te={year:0,month:1,day:2,hour:3};function Rg(e,t){const n=br(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(Xt(t[o])===n)return{pos:o,weight:mn[o]??0};return null}function Qy(e,t,n){return Xt(t[n])===br(e)?{pos:n,weight:mn[n]}:null}function T9(e,t){const n=ea(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(oi(t[o])===n)return{pos:o,weight:mn[o]??0};return null}const k9=/^#(|||)X\1_/,A9=e=>k9.test(e);function SS(e){const t=new Map;for(const n of e){if(A9(n.name))continue;const i=`${n.name}@${n.pos}`,o=t.get(i);(!o||n.weight>o.weight)&&t.set(i,n)}return Array.from(t.values()).sort((n,i)=>i.weight!==n.weight?i.weight-n.weight:n.name.localeCompare(i.name,"ko"))}function pf(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ol=e=>e===0?"":e===1?"":e===2?"":"",Dc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",j9=(e,t)=>`#X${ol(t)}_${e}`,tA=(e,t)=>t===Te.month?`#_${e}`:`#X${ol(t)}_${e}`,gc=(e,t,n)=>`#${ol(t)}X${ol(n)}_${e}`,N9=(e,t)=>`#${e==="day"?"":""}X${ol(t)}_`,xs=e=>`#_${e}`,gf=(e,t)=>`#${ol(t)}_${e}`,nc=(e,t)=>`#X${Dc(t)}_${e}`,$u=(e,t)=>`#X${Dc(t)}_${e}`,Lg=(e,t,n)=>`#${Dc(t)}X${ol(n)}_${e}`,O9=(e,t)=>`#${t==="day"?"":""}X${Dc(e)}_`,D9=(e,t)=>`#${t==="day"?"":""}X${Dc(e)}_`,ES=(e,t)=>`#X${Dc(e)}_${t}`;function M9(e){if(!e)return null;const t=Array.from(String(e));let n=null,i=null;for(const o of t)!n&&(Sm.has(o)||Qk.has(o))&&(n=ea(o)),(qb.has(o)||eA.has(o))&&(i=br(o));return n&&i?{stem:n,branch:i}:null}function Bg(e){return e.map(Xt)}const gn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[br(t),(Array.isArray(n)?n:[n]).map(br)])),C9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),nA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),R9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),U9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),iA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),H9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),F9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),sA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V9=iA,K9=nA,W9=sA,X9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),J9=rA,Q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),e6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),t6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),aA=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>br(t.trim())).filter(Boolean),$i=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[br(t),(Array.isArray(n)?n:[n]).map(i=>br(i))])),TS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},AS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},n6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),NS=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Km=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[br(t),aA(n)])),r6=Km({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),i6=Km({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),s6=Km({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),a6=Km({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),o6=$i({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),l6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),c6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),d6=$i({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),OS=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),p6=$i({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),un=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ea(t),aA(n)])),g6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),DS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),b6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),MS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),CS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),RS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N6=un({:"",:"",:"",:""}),O6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),LS=un({:"",:"",:""}),BS=un({:"",:"",:""}),D6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),PS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$S=un({:"",:"",:"",:"",:"",:"",:""}),Pg=[["",""],["",""],["",""],["",""],["",""],["",""]],$g=[["",""],["",""],["",""],["",""],["",""],["",""]],M6=new Set(["","","",""]),IS=[["",""],["",""]],C6=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Iu(e,t,n){const i=br(t),o=br(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return!0;return!1}function zS(e,t,n){const i=br(t),o=br(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return`${l}${u}`;return`${i}${o}`}function bf(e){for(const t of C6)if(t.set.has(e))return t.voids;return null}function Ig(e){const t=br(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const i of n)if(i.group.has(t))return Array.from(i.years);return null}function Td(e,t){e.push(t)}function zg(e,t,n,i,o=0){const l=dc[n]>=dc[i]?n:i,u=gc(t,n,i);e.push({name:u,weight:mn[l]+o,pos:l})}function nn(e,t,n,i,o){const l=Xt(e[Te.year]),u=t[l];if(!u)return;const f=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=Qy(m,e,p);y&&Td(o,{name:gc(i,Te.year,p),weight:y.weight,pos:p})}}function yf(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=ea(l),f=T9(u,e);f&&Td(i,{name:tA(n,f.pos),weight:f.weight,pos:f.pos})}function ii(e,t,n,i,o="ALL"){const l=Xt(e[Te.month]),u=t[l];if(!u)return;const f=o==="YEAR"?[Te.year]:o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:o==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=Qy(m,e,p);if(!y)continue;const _=p===Te.month?`#_${n}`:tA(n,p);Td(i,{name:_,weight:y.weight,pos:p})}}function vf(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=e[Te.day];l.includes(u)&&Td(i,{name:gc(n,Te.month,Te.day),weight:mn[Te.day],pos:Te.day})}function Vt(e,t,n,i,o){const l=oi(e[Te.day]),u=t[l];if(!u)return;const f=o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=Qy(m,e,p);y&&Td(i,{name:j9(n,p),weight:y.weight,pos:p})}}function Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:l}){const u=oi(e[Te.day]),f=Xt(e[Te.day]),m=Xt(e[Te.month]),p=Xt(e[Te.year]),y=Bg(e),_=[],x=[],S=new Set(["","","",""]);if(nn(e,C9,"MONTH","",x),nn(e,nA,"DAY","",x),nn(e,L9,"MONTH","",x),nn(e,B9,"MONTH","",x),nn(e,P9,"ALL","",x),nn(e,$9,"HOUR","",x),nn(e,I9,"ALL","",x),nn(e,z9,"ALL","",x),nn(e,U9,"ALL","",x),nn(e,iA,"ALL","",x),nn(e,H9,"ALL","",x),nn(e,G9,"ALL","",x),nn(e,F9,"ALL","",x),nn(e,Y9,"ALL","",x),nn(e,q9,"ALL","",x),nn(e,Z9,"ALL","",x),nn(e,sA,"ALL","",x),nn(e,V9,"ALL","",x),nn(e,K9,"ALL","",x),nn(e,W9,"ALL","",x),nn(e,X9,"ALL","",x),nn(e,J9,"ALL","",x),nn(e,Q9,"ALL","",x),nn(e,e6,"ALL","",x),nn(e,t6,"ALL","",x),yf(e,TS,"",_),yf(e,kS,"",_),yf(e,AS,"",_),yf(e,jS,"",_),ii(e,n6,"",x,"ALL"),ii(e,NS,"",x,"YEAR"),ii(e,NS,"",x,"DAY"),vf(e,r6,"",_),vf(e,i6,"",x),vf(e,s6,"",x),vf(e,a6,"",_),ii(e,o6,"",x,"ALL"),ii(e,l6,"",x,"ALL"),ii(e,c6,"",x,"ALL"),ii(e,u6,"",x,"ALL"),ii(e,d6,"",x,"ALL"),ii(e,OS,"",_,"ALL"),ii(e,h6,"",_,"DAY_HOUR"),ii(e,f6,"",_,"DAY_HOUR"),ii(e,m6,"",_,"ALL"),ii(e,p6,"",_,"ALL"),Vt(e,g6,"",_,"ALL"),Vt(e,DS,"",_,"ALL"),Vt(e,b6,"",_,"ALL"),Vt(e,y6,"",_,"ALL"),Vt(e,v6,"",_,"ALL"),Vt(e,_6,"",_,"ALL"),Vt(e,x6,"",_,"ALL"),Vt(e,MS,"",_,"ALL"),Vt(e,w6,"",_,"ALL"),Vt(e,S6,"",_,"ALL"),Vt(e,E6,"",_,"ALL"),Vt(e,T6,"",_,"ALL"),Vt(e,k6,"",_,"ALL"),Vt(e,CS,"",x,"ALL"),Vt(e,A6,"",x,"ALL"),Vt(e,j6,"",x,"ALL"),Vt(e,RS,"",x,"DAY"),Vt(e,RS,"",x,"HOUR"),Vt(e,LS,"",x,"DAY"),Vt(e,LS,"",x,"HOUR"),Vt(e,BS,"",x,"DAY"),Vt(e,BS,"",x,"HOUR"),Vt(e,N6,"",x,"DAY"),Vt(e,O6,"",x,"ALL"),Vt(e,D6,"",_,"ALL"),Vt(e,PS,"",x,"ALL"),S.has(e[Te.day])){x.push({name:xs(""),weight:mn[Te.day],pos:Te.day});for(const K of[Te.year,Te.month,Te.hour])e[K]===e[Te.day]&&x.push({name:gf("",K),weight:mn[K],pos:K})}const k=$S[u];if(k)for(const K of[Te.year,Te.month,Te.day,Te.hour]){const U=oi(e[K]),B=Xt(e[K]);U===u&&k.includes(B)&&x.push({name:gf("",K),weight:mn[K],pos:K})}for(const[K,U]of IS){const B=Rg(K,e),q=Rg(U,e);B&&q&&zg(x,"",B.pos,q.pos)}{const K=new Set(["",""]),U=new Set(["","","",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(K.has(q)||U.has(V))&&x.push({name:gf("",B),weight:mn[B],pos:B})}}{const K=oi(e[Te.day]),U=e[Te.hour],B=(q,V)=>q.includes(K)&&V.includes(U);B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour})}{const K=Bg(e);["","","",""].every(B=>K.includes(B))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const K=e[Te.day],U=e[Te.hour];(K===""&&U===""||K===""&&U==="")&&x.push({name:gc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const K=Xt(e[Te.year]),U=new Set(Bg(e).slice(1)),B=(q,V)=>q.every(P=>U.has(P))&&K===V;(B(["","",""],"")||B(["","",""],"")||B(["","",""],"")||B(["","",""],""))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day});{const K=oi(e[Te.day]),B={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[K],q=e.some(Z=>Xt(Z)===B.rok),P=oi(e[Te.hour])===B.maStem;q&&P&&_.push({name:gc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const K=oi(e[Te.day]),U=Xt(e[Te.day]),B=Xt(e[Te.hour]),V={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[K];if(V){const P=U===V.rok,Z=B===V.ma,ie=mf(V.rokStem,e[Te.day],"classic")||mf(V.rokStem,e[Te.hour],"classic"),me=mf(V.maStem,e[Te.day],"classic")||mf(V.maStem,e[Te.hour],"classic");P&&Z&&(ie||me)&&_.push({name:gc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}}{const K=new Set(["","","","","",""]),U=e.map(oi),B=e.map(Xt),q=U.concat(B).filter(ie=>K.has(ie)).length,V=t?oi(t):"",P=t?Xt(t):"",Z=K.has(V)||K.has(P);(q>=4||q===3&&Z)&&x.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const K=new Set(["",""]),U=new Set(["",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(K.has(q)||U.has(V))&&x.push({name:gf("",B),weight:mn[B],pos:B})}}{const K=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[U,B]of K){const q=Xt(e[U]),V=Xt(e[B]);if(Iu(Pg,q,V)){const P=zS(Pg,q,V);zg(x,`${P}`,U,B)}}}{const K=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[U,B,q]of K){const V=Xt(e[U]),P=Xt(e[B]);if(Iu($g,V,P)){const Z=zS($g,V,P),ie=(q?1:0)+(M6.has(V+P)?1:0);zg(x,`${Z}`,U,B,ie)}}}function A(K){const U=K.lastIndexOf("_");return U>=0?K.slice(U+1):K}const D=new Set(["",""]);function $(K){return D.has(K)?!0:K.endsWith("")||K.endsWith("")}function O(K){const U=new Map;for(const q of K){const V=A(q.name);U.has(V)||U.set(V,[]),U.get(V).push(q)}const B=[];for(const[q,V]of U)if($(q))B.push(...V);else{const P=V.sort((Z,ie)=>dc[Z.pos]!==dc[ie.pos]?dc[ie.pos]-dc[Z.pos]:ie.weight-Z.weight)[0];B.push(P)}return B}const C=bf(e[Te.day]),M=bf(e[Te.year]);{const K=(l?.voidBasis??"day")==="day"?C:M;if(K){const[U,B]=K.map(br),q=[Te.year,Te.month,Te.day,Te.hour];for(const V of q){const P=Xt(e[V]);(P===U||P===B)&&x.push({name:N9(l?.voidBasis??"day",V),weight:mn[V],pos:V})}}}const G=O(SS(_)),H=O(SS(x)),F={si:[],il:[],yeon:[],wol:[]},W={si:[],il:[],yeon:[],wol:[]};for(const K of G)F[pf(K.pos)].push(K.name);for(const K of H)W[pf(K.pos)].push(K.name);const ae=[],Q=[],Y=[],te=[],re=[],Se=[],X=[],oe=[];function J(K,U){K.includes(U)||K.push(U)}function ye(K,U){const B=M9(U);if(!B)return;const q=B.branch,V=B.stem;let P,Z;switch(K){case"dae":P=ae,Z=re;break;case"se":P=Q,Z=Se;break;case"wol":P=Y,Z=X;break;case"il":P=te,Z=oe;break;default:return}ea(TS[m])===V&&J(P,$u("",K)),ea(kS[m])===V&&J(P,$u("",K)),ea(AS[m])===V&&J(P,$u("",K)),ea(jS[m])===V&&J(P,$u("",K)),OS[m]?.includes(q)&&J(P,$u("",K)),DS[u]?.includes(q)&&J(P,nc("",K)),MS[u]?.includes(q)&&J(P,nc("",K)),CS[u]?.includes(q)&&J(Z,nc("",K)),PS[u]?.includes(q)&&J(Z,nc("",K)),$S[u]?.includes(q)&&J(Z,nc("",K)),K==="se"&&(R9[p]?.includes(q)&&J(Z,ES(K,"")),rA[p]?.includes(q)&&J(Z,ES(K,"")));for(const me of y)if(Iu(IS,q,me)){const ce=Rg(me,e)?.pos;ce!==void 0&&J(Z,Lg("",K,ce));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(q)&&J(Z,nc("",K));const ie=(l?.voidBasis??"day")==="day"?C:M;ie&&(q===ie[0]||q===ie[1])&&J(Z,O9(K,l?.voidBasis??"day"));for(let me=0;me<=3;me++){const ce=Xt(e[me]);Iu(Pg,q,ce)&&J(Z,Lg("",K,me)),Iu($g,q,ce)&&J(Z,Lg("",K,me))}if(K==="se"){const me=(l?.samjaeBasis??"day")==="day"?f:p,ce=me?Ig(me):null;ce&&ce.includes(q)&&J(Z,D9(K,l?.samjaeBasis??"day"))}}return ye("dae",t??null),ye("se",n??null),ye("wol",i??null),ye("il",o??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const K={si:[],il:[],yeon:[],wol:[]};for(const U of G)K[pf(U.pos)].push(U.name);return K})(),dae:ae,se:Q,wolun:Y,ilun:te},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const K={si:[],il:[],yeon:[],wol:[]};for(const U of H)K[pf(U.pos)].push(U.name);return K})(),dae:re,se:Se,wolun:X,ilun:oe},meta:{voidPair:{day:bf(e[Te.day])??void 0,year:bf(e[Te.year])??void 0},samjaeYears:{day:Ig(f)??void 0,year:Ig(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function R6(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function L6({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((i,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+R6(i,t),children:i},`${t}-${o}-${i}`))})}function US({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const o=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[g.jsx("div",{className:o,children:n.label}),g.jsx(L6,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function B6({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const{settings:u}=yr(),[f,m]=R.useState(""),[p,y]=R.useState("");R.useEffect(()=>{u.sinsalBase===""?(m(""),y("")):(m(""),y(""))},[u.sinsalBase]);const _=R.useMemo(()=>({voidBasis:f===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[f,p]),x=R.useMemo(()=>Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:_}),[e,t,n,i,o,_]),{good:S,bad:T,meta:k}=x,A=ae=>ae.map(Q=>Q==="#"?Q:` ${Q}`),D=(ae,Q)=>{const Y=["natal"];return Q===""&&Y.push("natal"),Q===""&&Y.push("natal","dae"),Q===""&&Y.push("natal","dae","se"),Q===""&&Y.push("natal","dae","se","wol"),Q===""&&Y.push("natal","dae","se","wol","il"),ae.filter(te=>Y.includes(te.source))},$=[{label:"",items:A(S.si),source:"natal"},{label:"",items:A(S.il),source:"natal"},{label:"",items:A(S.wol),source:"natal"},{label:"",items:A(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],O=[{label:"",items:A(T.si),source:"natal"},{label:"",items:A(T.il),source:"natal"},{label:"",items:A(T.wol),source:"natal"},{label:"",items:A(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],C=D($,l),M=D(O,l),G=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",H=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",F=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",W=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:f,onChange:ae=>m(ae.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:G}),g.jsx("option",{value:"",children:H})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:p,onChange:ae=>y(ae.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:F}),g.jsx("option",{value:"",children:W})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(US,{title:"()",rows:C}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(US,{title:"()",rows:M})]})]})}const Mi={year:0,month:1,day:2,hour:3},oA={[Mi.year]:.3,[Mi.month]:.5,[Mi.day]:.3,[Mi.hour]:.3},lA={[Mi.year]:.15,[Mi.month]:.2,[Mi.day]:0,[Mi.hour]:.15},P6=e=>qb.has(e)?e:Zb[e]??e,$6=e=>Sm.has(e)?e:Em[e]??e,I6=e=>typeof e=="string"&&e.length>=2?P6(e.slice(-1)):"",z6=e=>typeof e=="string"&&e.length>=1?$6(e.slice(0,1)):"",wn=(e,t,n,i)=>({han:e,nan:t,jo:n,seup:i}),U6={:wn(2,0,.5,2),:wn(2,0,0,2),:wn(2,0,0,2),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,2,1,2),:wn(0,2,2,.5),:wn(0,2,2,0),:wn(0,2,2,1),:wn(2,0,0,2),:wn(2,0,0,2),:wn(2,0,1,1)},H6={:wn(0,1,1,0),:wn(0,1,1,0),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,0,1,0),:wn(0,0,0,1),:wn(1,0,0,1),:wn(1,0,0,1),:wn(2,0,0,2),:wn(2,0,0,2)},HS=e=>Math.max(0,Math.min(100,e));function GS(e,t){const n=Math.max(0,e),i=Math.max(0,t),o=n+i;return o<=0?50:i/o*100}function G6(e){let t=0,n=0,i=0,o=0;return[Mi.year,Mi.month,Mi.day,Mi.hour].forEach(l=>{const u=U6[I6(e[l])],f=H6[z6(e[l])],m=oA[l],p=lA[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,i+=u.jo*m,o+=u.seup*m),p>0&&f&&(t+=f.han*p,n+=f.nan*p,i+=f.jo*p,o+=f.seup*p)}),{han:t,nan:n,jo:i,seup:o}}function F6(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function Y6(e){const t=F6(e);return R.useMemo(()=>{const{han:n,nan:i,jo:o,seup:l}=G6(t),u=GS(n,i),f=GS(l,o);return{hanNanPct:HS(u),joSeupPct:HS(f),raw:{han:n,nan:i,jo:o,seup:l},weights:{branch:oA,stem:lA}}},[t])}function FS({label:e,percent:t,leftHint:n,midHint:i,rightHint:o}){const l=R.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:n}),g.jsx("span",{children:i}),g.jsx("span",{children:o})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(f=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${f}%`},title:`${f}%`},f)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function q6({natal:e}){const{hanNanPct:t,joSeupPct:n}=Y6(e);return g.jsxs("div",{className:"flex gap-2",children:[g.jsx(FS,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),g.jsx(FS,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const Z6=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),V6=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),K6=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),W6=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),X6=e=>Z6[e]??e,J6=e=>K6[e]??e,Q6=e=>V6[e]??e,e$=e=>W6[e]??e;function cA(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const i=n.charAt(0),o=n.charAt(1),l=/[]/.test(i)||/[]/.test(o)?`${X6(i)}${J6(o)}`:`${Q6(i)}${e$(o)}`;t[l]===void 0&&(t[l]=e[n])}return t}const uA={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},t$={...uA,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},n$=cA(uA),r$=cA(t$),i$={:"",:"",:"",:"",:""},s$={:"",:"",:"",:"",:""},a$={:"",:"",:"",:"",:""},o$={:"",:"",:"",:"",:""},l$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},c$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},u$=e=>l$[e]??e,d$=e=>c$[e]??e;function dA(e){return!e||e.length<2?"":`${u$(e[0])}${d$(e[1])}`}const hA=e=>e&&e.length>=1?e[0]:"",fA=e=>e&&e.length>=2?e[1]:"";function mA(e){return{:e,:i$[e],:s$[e],:a$[e],:o$[e]}}const pA={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function h$(e,t){const n=(e??[]).slice(0,4).map(dA);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const i=hA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(x=>fA(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},f=pA[i]??[],m=l[1];f.includes(m)&&(u..=!0,u..=!0);const p=l[2];f.includes(p)&&(u..=!0,u..=!0);const y=mA(o).,_=t[y]??0;return u..=_>=30,{flags:u,monthBranch:m,dayEl:o}}function gA(e,t){const n=(e??[]).slice(0,4).map(dA);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const i=hA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(T=>fA(T)),u={:!1,:!1,:!1},f={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=pA[i]??[],p=l[1];m.includes(p)&&(f..=!0,f..=!0,f..=!0,f..=!0);const y=l[2];m.includes(y)&&(f..=!0,f..=!0,f..=!0,f..=!0);const _=mA(o).;return(t[_]??0)>=30&&(f..=!0,f..=!0,f..=!0,f..=!0),{flags:f,monthBranch:p,dayEl:o}}const f$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},m$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},p$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},g$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b$=e=>f$[e]??e,y$=e=>m$[e]??e;function v$(e){return!e||e.length<2?"":`${b$(e[0])}${y$(e[1])}`}function qo(e){return xS[e]??xS[p$[e]??""]}function Zo(e){return wS[e]??wS[g$[e]??""]}const Ug=["year","month","day","hour"],_$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},x$={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},w$=new Set(["","","","",""]),S$=new Set(["","","","","",""]),E$=new Set(["","","",""]),Hg=e=>w$.has(e)?"":"",Gg=e=>{const t=S$.has(e)?"":"";return E$.has(e)?t===""?"":"":t};function YS(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.floor(f+.5)),o=100-i.reduce((f,m)=>f+m,0);if(o===0)return i;const l=n.map((f,m)=>({i:m,frac:f-Math.floor(f+.5)})).sort((f,m)=>m.frac-f.frac),u=i.slice();if(o>0)for(let f=0;f<o;f++)u[l[f].i]+=1;else for(let f=0;f<-o;f++)u[l[l.length-1-f].i]-=1;return u}function T$(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const _f={:.15,:.1,:-.15,:-.2,:-.25},pm={:"",:"",:"",:"",:""},bA={:"",:"",:"",:"",:""},ud={:"",:"",:"",:"",:""},k$={:"",:"",:"",:"",:""};function xf(e,t){return e===t?"":pm[t]===e?"":pm[e]===t?"":ud[e]===t?"":ud[t]===e?"":""}const Ga=e=>e&&e.length>=1?e[0]:"",Vo=e=>e&&e.length>=2?e[1]:"";function A$(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const i=e.map(m=>m/n*t),o=i.map(m=>Math.floor(m));let l=t-o.reduce((m,p)=>m+p,0);const u=i.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),f=o.slice();for(let m=0;m<u.length&&l>0;m++)f[u[m].i]+=1,l-=1;return f}function qS(e,t){switch(e){case"":return t;case"":return pm[t];case"":return ud[t];case"":return k$[t];case"":return bA[t];default:return t}}function $b(e){const{pillars:t,dayStem:n,mode:i,debug:o,useHarmonyOverlay:l,criteriaMode:u,luck:f}=e,m=u==="modern"?_$:x$,p=i==="classic"?r$:n$,y={:0,:0,:0,:0,:0},_={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S=(t??[]).slice(0,4).map(v$),T=S.length===4&&S[0]&&S[0].length>=2&&S[1]&&S[1].length>=2&&S[2]&&S[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const P=["","","","",""].map(Z=>({name:Z,value:0,color:"#999999"}));return{overlay:k,totals:P,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:y,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const A=Ga(S[2]),D=n??A,$=D===""||D===""?"":D===""||D===""?"":D===""||D===""?"":D===""||D===""?"":"",O=[{val:0},{val:0},{val:0},{val:0}],C=[[],[],[],[]];for(const P of S){if(!P)continue;const Z=P.charAt(0),ie=P.charAt(1);_[Z]=(_[Z]??0)+50;const me=x[ie];me&&(_[me]=(_[me]??0)+50)}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Ug[P],me=Ga(Z),ce=Vo(Z),xe=m[ie],ke=qo(me);ke&&(y[ke]+=xe.stem,O[P]={stem:me,el:ke,pol:Hg(me),val:xe.stem});const je=Zo(ce);je&&(y[je]+=xe.branch,C[P].push({el:je,pol:Gg(ce),val:xe.branch}))}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Ug[P],me=p[Z]??0;if(me===0)continue;const ce=Ga(Z),xe=qo(ce);if(!xe)continue;const ke=m[ie].stem*me;y[xe]+=ke,O[P].val+=ke}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=Zo(ie);if(!me)continue;const ce=m[Ug[P]].branch,xe=Gg(ie);let ke=0;const je=[P];P-1>=0&&je.push(P-1),P+1<=3&&je.push(P+1),P-2>=0&&je.push(P-2),P+2<=3&&je.push(P+2);const Me=Array.from(new Set(je));for(const Ee of Me){if(!S[Ee]||S[Ee].length<2)continue;const Pe=Ga(S[Ee]),Ce=qo(Pe);if(!Ce||Ce!==me)continue;const Le=Hg(Pe)===xe,Ue=Math.abs(Ee-P),fe=T$(Ue,Le);ke+=ce*fe}ke!==0&&(y[me]+=ke,C[P].push({el:me,pol:xe,val:ke}))}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Ga(Z),me=qo(ie);if(!me)continue;let ce=0;const xe=Vo(S[P]),ke=Zo(xe);ke&&(ce+=_f[xf(me,ke)]);const je=P===0?[1]:P===3?[2]:[P-1,P+1];for(const Ee of je){const Pe=Ga(S[Ee]),Ce=qo(Pe);Ce&&(ce+=_f[xf(me,Ce)])}const Me=O[P].val;if(Me!==0&&ce!==0){const Ee=Math.round(Me*(1+ce)*10)/10,Pe=Ee-Me;y[me]+=Pe,O[P].val=Ee}}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=Zo(ie);if(!me)continue;let ce=0;const xe=Ga(S[P]),ke=qo(xe);ke&&(ce+=_f[xf(me,ke)]);const je=P===0?[1]:P===3?[2]:[P-1,P+1];for(const Ee of je){if(!S[Ee]||S[Ee].length<2)continue;const Pe=Vo(S[Ee]),Ce=Zo(Pe);Ce&&(ce+=_f[xf(me,Ce)])}const Me=C[P].reduce((Ee,Pe)=>Ee+Pe.val,0);if(Me!==0&&ce!==0){const Pe=Math.round(Me*(1+ce)*10)/10-Me;y[me]+=Pe,C[P].length>0&&(C[P][0].val+=Pe)}}l&&HP(S,y);const M={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},G=[];if(!(!f||f.tab==="")){let P=function(Z,ie){const me=Z?Fe(Z):"";if(!me||me.length<2)return;const ce=Ga(me),xe=Vo(me),ke=qo(ce),je=Zo(xe),Me=Math.max(1,(y.??0)+(y.??0)+(y.??0)+(y.??0)+(y.??0)),Ee=M[ie];if(ke){const Pe=Math.round(Me*Ee.stem);y[ke]+=Pe,G.push({stem:ce,el:ke,pol:Hg(ce),val:Pe})}if(je){const Pe=Math.round(Me*Ee.branch);y[je]+=Pe,G.push({el:je,pol:Gg(xe),val:Pe})}};P(f.dae,"dae"),(f.tab===""||f.tab===""||f.tab==="")&&P(f.se,"se"),(f.tab===""||f.tab==="")&&P(f.wol,"wol"),f.tab===""&&P(f.il,"il")}const H={:0,:0,:0,:0,:0};Object.entries(y).forEach(([P,Z])=>{const ie=te(P,$);H[ie]+=Z});const F=["","","","",""],W=YS(F.map(P=>H[P])),ae=Wk(D),Q=F.map((P,Z)=>({name:P,value:W[Z],color:ae[P]})),Y={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function te(P,Z){return P===Z?"":pm[Z]===P?"":ud[Z]===P?"":ud[P]===Z?"":bA[Z]===P?"":""}function re(P,Z){switch(te(P,$)){case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break}}Object.entries(y).forEach(([P,Z])=>{Z>0&&re(P,Z)});const Se={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const P of F){const Z=Q.find(je=>je.name===P)?.value??0,ie=Se[P].a,me=Se[P].b,ce=Y[ie]??0,xe=Y[me]??0,ke=ce+xe;if(ke>0){const je=Math.floor(Z*ce/ke+.5),Me=Z-je;Se[P].aVal=je,Se[P].bVal=Me}else Se[P].aVal=Math.floor(Z/2+.5),Se[P].bVal=Z-Se[P].aVal}const{flags:X}=h$(S,y),oe={};O.forEach(P=>{if(P.stem&&P.el&&P.val){const Z=`${P.stem}${P.el}`;oe[Z]=(oe[Z]??0)+P.val}});for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=x[ie],ce=Zo(ie);if(!me||!ce)continue;const xe=`${me}${ce}`,ke=C[P].reduce((je,Me)=>je+Me.val,0);oe[xe]=(oe[xe]??0)+ke}const J=["","","","","","","","","",""],ye={};J.forEach(P=>{ye[P]=0}),F.forEach(P=>{const Z=Q.find(Me=>Me.name===P)?.value??0,ie=qS(P,$),me=Object.entries(oe).filter(([Me])=>Me.endsWith(ie)),ce=me.map(([Me])=>Me),xe=me.map(([,Me])=>Me),ke=Math.max(0,Math.round(Z*10)),je=A$(xe.length?xe:[1,1],ke);if(ce.length===2)ye[ce[0]]=(je[0]??Math.round(ke/2))/10,ye[ce[1]]=(je[1]??ke-(je[0]??0))/10;else if(ce.length===1)ye[ce[0]]=ke/10;else{const Me=ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:["",""],Ee=Math.floor(ke/2),Pe=ke-Ee;ye[Me[0]]+=Ee/10,ye[Me[1]]+=Pe/10}});const K=["","","","",""],U={:0,:0,:0,:0,:0};for(const P of Q){const Z=qS(P.name,$);U[Z]+=P.value}const B=YS(K.map(P=>U[P])),q={:B[0],:B[1],:B[2],:B[3],:B[4]};return o&&console.log({elementScore:y,totals:Q,perTenGod:Se,perStemRaw:oe,perStemElementScaled:ye,elementPercent100:q}),{overlay:{totalsSub:Y,perStemAugBare:oe,perStemAugFull:ye},totals:Q,perTenGod:Se,PerTenGodSub:Y,stemScoreRaw:_,elementScoreRaw:y,deukFlags:X,perStemElement:oe,perStemElementScaled:ye,elementPercent100:q}}function j$(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.round(f));let l=100-i.reduce((f,m)=>f+m,0);const u=n.map((f,m)=>({i:m,f:f-Math.round(f)})).sort((f,m)=>m.f-f.f);for(let f=0;f<u.length&&l>0;f++)i[u[f].i]+=1,l-=1;return i}const ZS=["","","","",""];function N$(e,t){const n=[Fe(e[0]??""),Fe(e[1]??""),Fe(e[2]??""),Fe(e[3]??"")],{elementScoreRaw:i}=$b({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),o=ZS.map(f=>i[f]??0),l=j$(o),u={:0,:0,:0,:0,:0};return ZS.forEach((f,m)=>{u[f]=l[m]}),u}function yA(e,t){const n=N$(e,t),i=Fe(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[i];if(!l)return 0;const u={:"",:"",:"",:"",:""},f=n[l]??0,m=n[u[l]]??0;return f+m*.7}const wf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Sf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ef={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},O$=["","","","",""];function VS(e){return O$.includes(e)}const D$={:"",:"",:"",:"",:""},M$={:"",:"",:"",:"",:""},C$={:"",:"",:"",:"",:""},R$={:"",:"",:"",:"",:""},Ib={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},L$=["","","","","","","","","",""],B$={natal:50,dae:30,se:20,wol:7,il:3};function gm(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(wf[t])return wf[t];if(["","","","","","","","","","","",""].includes(t))return Ef[t]??null;if(Sf[t])return Ef[Sf[t]]??null;const n=t.charAt(0);return wf[n]?wf[n]:["","","","","","","","","",""].includes(n)?n:Sf[n]?Ef[Sf[n]]??null:["","","","","","","","","","","",""].includes(n)?Ef[n]??null:null}function P$(e,t){const n=Ib[e],i=Ib[t];if(!n||!i)return"";let o;i===n?o="":i===D$[n]?o="":i===M$[n]?o="":i===C$[n]?o="":i===R$[n]?o="":o="";const l=VS(e)===VS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function bm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.round(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.round(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function KS(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=gm(i);if(!l)continue;const u=P$(t,l);n[u]+=o}return bm(n)}function $$(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function WS(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=gm(n);o&&(t[o]=(t[o]??0)+i)}return t}function XS(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of L$){const o=Ib[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}function JS(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const i of t)typeof e[i]=="number"&&(n[i]=e[i]);return n}function I$(e,t){const n=t?.dae?Tf(t.dae):{},i=t?.se?Tf(t.se):{},o=t?.wol?Tf(t.wol):{},l=t?.il?Tf(t.il):{},u={},f=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:i},{kind:"wol",bare:o},{kind:"il",bare:l}];for(const{kind:p,bare:y}of f){const _=B$[p];if(!y||Object.keys(y).length===0)continue;const x=bm(y);for(const[S,T]of Object.entries(x))u[S]=(u[S]??0)+T*_}const m=Object.values(u).reduce((p,y)=>p+y,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function z$(e){if(!e)return[];const t=gm(e.charAt(0)),n=gm(e.charAt(1));return[t,n].filter(Boolean)}function Tf(e){const t=z$(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function vA(e){const{natal:t,tab:n,chain:i,hourKey:o="unified"}=e,l=[Fe(t[0]??""),Fe(t[1]??""),Fe(t[2]??""),Fe(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:f,hiddenStem:m}=Eb,p=f==="classic"?"classic":"hgc",y=i?{tab:n,dae:i.dae?Fe(i.dae):void 0,se:(n===""||n===""||n==="")&&i.se?Fe(i.se):void 0,wol:(n===""||n==="")&&i.wol?Fe(i.wol):void 0,il:n===""&&i.il?Fe(i.il):void 0}:{tab:n},_=$b({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:y}),x=$b({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),S=WS(_.perStemElementScaled),T=n===""?S:I$(S,i),k=bm(T),A=KS(T,u),D=$$(A),$=XS(k),O=WS(x.perStemElementScaled),C=KS(O,u),M=bm(O),G=XS(M);return{elementScoreRaw:_.elementScoreRaw,elementPercent100:_.elementPercent100,totals:_.totals,perStemElementScaled:_.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:A,perTenGod:D,overlay:{totalsSub:A,perStemAugBare:T,perStemAugFull:$},natalFixed:{elementScoreRaw:JS(x.elementScoreRaw),elementPercent100:JS(x.elementPercent100),totalsSub:C,overlay:{totalsSub:C,perStemAugBare:O,perStemAugFull:G}}}}const Ci={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ts={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},U$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Ri(e){return["","","","",""].includes(e)}function H$(e){return["","","","","",""].includes(e)}const _A={:"",:"",:"",:"",:""},ev={:"",:"",:"",:"",:""},xA={:"",:"",:"",:"",:""},wA={:"",:"",:"",:"",:""},Fg=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Oi=e=>e&&e.length>=1?e.charAt(0):"",On=e=>e&&e.length>=2?e.charAt(1):"",G$=e=>Array.from(new Set(e)),F$={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},Y$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function q$(e,t){const n=Y$[e];if(!n)return!1;const o=as(t).find(f=>f.name===n);if(!o)return!1;const l=new Date(o.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const Z$={:["","",""],:["","",""],:["","",""],:["","",""]};function V$(e,t){const n=Z$[e];return n?n.filter(i=>i!==e).every(i=>t.includes(i)):!1}function rs(e,t){const n=Ci[e],i=Ci[t];if(!n||!i)return"";let o;i===n?o="":i===_A[n]?o="":i===ev[n]?o="":i===xA[n]?o="":i===wA[n]?o="":o="";const l=Ri(e)===Ri(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function K$(e,t){const n=Ci[e],i=Ts[t];if(!n||!i)return"";let o;i===n?o="":i===_A[n]?o="":i===ev[n]?o="":i===xA[n]?o="":i===wA[n]?o="":o="";const l=Ri(e)===H$(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function W$(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function zb(e,t){const n=W$(e),i=Ri(e),o={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":o[n]===t?u="":o[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const f=i===Ri(X$(t));switch(u){case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":""}}function X$(e){return{:"",:"",:"",:"",:""}[e]}const Yg={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},SA={:"",:"",:"",:"",:""},EA={:"",:"",:"",:""},J$=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],Q$=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const i=Oi(n),o=On(n),l=Ci[i],u=Ts[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function e8(e){const{pillars:t,dayStem:n,monthBranch:i,mapping:o}=e,[l,u,f,m]=(t??[]).slice(0,4),p=[Oi(l),Oi(u),Oi(f),Oi(m)].filter(Boolean),y=[On(l),On(u),On(f),On(m)].filter(Boolean),_=Ci[n],x=p.map(he=>rs(n,he)),S=[],T=he=>p.filter($e=>$e===he).length,k=he=>y.filter($e=>$e===he).length,A=he=>he.every($e=>y.includes($e)),D=he=>x.some($e=>he.includes($e)),$=Oi(u),O=he=>Ri(he),C=()=>{const he=p.map($e=>Ci[$e]);return he.length===4&&he.every($e=>$e===he[0])},M=()=>{if(p.length!==4)return!1;const he=p.map(O),$e=he[0]&&!he[1]&&he[2]&&!he[3],Ie=!he[0]&&he[1]&&!he[2]&&he[3];return $e||Ie};Ri(n)&&SA[n]===i&&S.push("");const G=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[he,$e]of G)if(n===he&&i===$e){S.push("");break}!Ri(n)&&EA[n]===i&&S.push("");const H=Yg[n];H&&On(f)===H&&_===Ts[On(f)]&&S.push(""),H&&On(m)===H&&_===Ts[On(m)]&&S.push("");const F=[l,u,f,m].map(l8),W=[l,u,f,m].map(c8);for(const he of F);for(const he of W);const ae=o==="hgc"?Om:Nm;function Q(he){return(ae[he]??[]).filter($e=>["","","","","","","","","",""].includes($e))}const Y=[l,u,f,m].filter(Boolean),re=Y.flatMap(he=>[he.charAt(0),he.charAt(1)]).flatMap(he=>{try{if(["","","","","","","","","",""].includes(he))return[rs(n,he)];if(["","","","","","","","","","","",""].includes(he)){const $e=K$(n,he),Ie=Q(he).map(He=>rs(n,He));return[$e,...Ie]}return[]}catch{return[]}}),Se=he=>re.some($e=>he.includes($e)),X=(he,$e)=>{const Ie=[],He=[];for(const et of Y){const Zt=et.charAt(0),En=et.charAt(1);Ie.push(rs(n,Zt));const Tn=Ts[En];Tn?He.push(zb(n,Tn)):He.push(null)}const st=(et,Zt)=>!!et&&!!Zt&&(he.includes(et)&&$e.includes(Zt)||$e.includes(et)&&he.includes(Zt));for(let et=0;et<Ie.length;et++)if(st(Ie[et],He[et]))return!0;for(let et=0;et<Ie.length-1;et++)if(st(Ie[et],Ie[et+1])||st(He[et],He[et+1]))return!0;return!1},oe={:["",""],:["",""],:["",""],:["",""]};Se([...oe.])&&Se([...oe.])&&X([...oe.],[...oe.])&&S.push(""),Se([...oe.])&&Se([...oe.])&&X([...oe.],[...oe.])&&S.push("");const J=he=>x.filter($e=>he.includes($e)).length,ye=J(["",""]),K=J([""]),U=J([""]),B=J(["",""]),q=J(["",""]),V=J(["",""]);K>=1&&ye>=1&&ye>=K&&U<=K&&S.push("");const P=J([""]);P>=1&&B>=1&&P>=B&&S.push(""),x.includes("")&&B>=1&&S.push("");const ie=Q$(t),me=Object.entries(ie).sort((he,$e)=>$e[1]-he[1]),ce=me[0];if(ce&&ce[1]>=60&&S.push(`(${ce[0]})`),me.length>=2){const[he,$e]=me[0],[,Ie]=me[1];$e>=75&&$e-Ie>=12&&_!==he&&S.push(`(${he})`)}for(const he of J$){const $e=p.includes(he.a),Ie=p.includes(he.b);if(!$e||!Ie)continue;const He=he.to,st=ie[He]??0,et=Ci[he.a],Zt=Ci[he.b],En=Math.max(ie[et]??0,ie[Zt]??0),Tn=Ts[i]===He,vr=Object.entries(ie).sort((Mt,bn)=>bn[1]-Mt[1])[0]?.[0]===He;let dn=!1;st>=60&&(Tn||vr)&&En<=20&&st-En>=20&&(S.push(`(${He})`),dn=!0),!dn&&st>=50&&(Tn||vr)&&En<=25&&(S.push(`(${He})`),dn=!0),!dn&&st>=35&&S.push(`(${He})`)}const xe=`${Oi(m)}${On(m)}`;["",""].includes(n)&&["","",""].includes(xe)&&S.push(""),["","","",""].includes(On(m))&&S.push(""),["",""].includes(n)&&(On(f)===""||On(u)==="")&&!y.includes("")&&S.push("");const ke=p.some(he=>he===""||he===""),je=y.some(he=>he===""||he==="");["",""].includes(On(f))&&!ke&&!je&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push("");const Me=Object.values(ie).sort((he,$e)=>$e-he);Me.length>=3&&Me[0]-Me[2]<=8&&Me[0]+Me[1]+Me[2]>=80&&S.push(""),q>=1&&V>=1&&Math.abs(q-V)<=1&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),y.length===4&&y.every(he=>he===y[0])&&S.push(""),p.length===4&&C()&&M()&&S.push(""),t.every(he=>he&&he===t[0])&&S.push(""),p.length===4&&p.every(he=>he===p[0])&&y.length===4&&y.every(he=>he===y[0])&&S.push(""),ye>=1&&(On(f)===Yg[n]||On(m)===Yg[n])&&S.push(""),T("")>=3&&A(["","",""])&&["","",""].includes(On(f))&&S.push("");const Pe=n===""||n==="",Ce=[["","",""],["","",""]],Le=[["","",""],["","",""]];Pe&&(Ce.some(he=>A(he))||Le.some(he=>A(he)))&&S.push("");const Ue=new Set(["","","","","",""]),fe=`${Oi(f)}${On(f)}`;if(Ue.has(fe)&&k("")>=2&&(D(["",""])||y.includes("")||y.includes("")||D(["",""])||S.push("")),new Set(["","","","","",""]).has(fe)&&k("")>=2&&y.includes("")&&S.push(""),n===""&&`${Oi(m)}${On(m)}`==""){const he=rs(n,$);!["","","",""].includes(he)&&D(["",""])&&!y.includes("")&&!y.includes("")&&S.push("")}return new Set(["","",""]).has(fe)&&`${Oi(m)}${On(m)}`==""&&!y.includes("")&&!D(["",""])&&S.push(""),fe===""&&k("")+k("")>=2&&S.push(""),(fe===""||fe==="")&&k("")>=2&&!D(["",""])&&!y.includes("")&&S.push(""),n===""&&A(["","",""])&&S.push(""),fe===""&&`${Oi(m)}${On(m)}`==""&&S.push(""),G$(S)}function t8(e){const{dayStem:t,monthBranch:n,date:i,pillars:o,emittedStems:l=[],otherBranches:u=[],isNeutralized:f,mapping:m}=e,p=[],y=F$[n];if(!y)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const _={:y.?{stem:Fg(y..stem),w:y..w}:void 0,:y.?{stem:Fg(y..stem),w:y..w}:void 0,:{stem:Fg(y..stem),w:y..w}},x=_..stem;let S=x;if(["","","",""].includes(n))S=_..stem,p.push(":   ");else if(["","","",""].includes(n)){const F=[];_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)});const W=F.filter(ae=>ae.emitted);W.length===1?(S=W[0].stem,p.push(`: ${W[0].from}  `)):W.length>1?(W.sort((ae,Q)=>Q.w-ae.w),S=W[0].stem,p.push(`:      ${W[0].from} `)):(S=_..stem,p.push(":    "))}else["","","",""].includes(n)&&(V$(n,u)&&_.?(S=_..stem,p.push(":     ")):q$(n,i)&&_.?(S=_..stem,p.push(":  +12    ")):(S=_..stem,p.push(":  +12    ")));const T=S;let k="";const A=Ci[T];if(A){const F=Object.entries(ev).find(([,W])=>W===A)?.[0]??null;F&&(k=Object.entries(Ci).find(([ae,Q])=>Q===F&&Ri(ae)===Ri(T))?.[0]??"")}f?.(T)&&p.push(":   / ");let D="-";const $=rs(t,T),C=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([F,W])=>F===t&&W===n),M=Ri(t)&&SA[t]===n,G=!Ri(t)&&EA[t]===n;$===""||$===""?C?(D="",p.push(": /   ")):M?(D="",p.push(":    ")):G?(D="",p.push(":    ")):p.push(": /  "):$===""?D="()":D={:"",:"",:"",:"",:"",:"",:"",:""}[$]??"-";const H=e8({pillars:o,dayStem:t,monthBranch:n,mapping:m});return{:x,:S,:T,:k,:D,:H,reason:p}}const Re=(e,t)=>`${e}+${t}`,Tr=(e,t,n)=>`${e}+${t}+${n}`,n8={[Re("","")]:[""],[Tr("","","")]:void 0,[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Tr("","","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""]},r8={[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:["",""]};function i8(){const e={},t={},n=/[]/g;for(const[i,o]of Object.entries(n8)){if(!o)continue;const l=i.match(n);if(!l||l.length<2)continue;const[u,f]=l;e[i]=o.map(m=>`${u}X${f}_${m}`)}for(const[i,o]of Object.entries(r8)){if(!o)continue;const l=i.match(n);if(!l||l.length<3)continue;const[u,f,m]=l;t[i]=o.map(p=>`${u}X${f}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:qg,newTris:Zg}=i8();function s8(e){const[t,n,i,o]=e,l=S=>Oi(S),u=l(o),f=l(i),m=l(n),p=l(t),y=[],_=[[u,f],[f,m],[m,p]];for(const[S,T]of _){if(!S||!T)continue;const k=Re(S,T),A=qg[k];A&&A.length&&y.push(...A);const D=Re(T,S);D!==k&&qg[D]&&y.push(...qg[D])}const x=[[u,f,m],[f,m,p]];for(const[S,T,k]of x){if(!S||!T||!k)continue;const A=Tr(S,T,k),D=Zg[A];D&&D.length&&y.push(...D);const $=Tr(k,T,S);$!==A&&Zg[$]&&y.push(...Zg[$])}return Array.from(new Set(y))}const a8={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},o8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function l8(e){return e?.charAt(0)??""}function c8(e){return e?.charAt(1)??""}function u8(e,t,n){const[i,o,l,u]=(e??[]).slice(0,4),f=le=>(le?.length??0)>=1?le.charAt(0):"",m=le=>(le?.length??0)>=2?le.charAt(1):"",p=[i,o,l,u].map(f).filter(Boolean),y=[i,o,l,u].map(m).filter(Boolean),_=f(l),x=a8[_]??!1,S=new Set,T=t==="classic"?Nm:Om,k=new Set(["","","","","","","","","",""]),A=le=>(T[le]??[]).filter(he=>k.has(he)),D=(le,he)=>{const $e=Ts[he];if(!$e)throw new Error(`Unknown branch main element: ${he}`);return zb(le,$e)},$={:0,:0,:0,:0,:0};for(const le of p){const he=Ci[le];he&&($[he]+=10)}const O=[];for(const le of y){const he=U$[le];he&&O.push(he);const $e=Ts[le];$e&&($[$e]+=6)}const M=[...p,...O].map(le=>rs(_,le)),G={:["",""],:["",""],:["",""],:["",""],:["",""]},H=le=>M.filter(he=>he===le).length,F=le=>M.filter(he=>G[le].includes(he)).length,W=y[1],ae=!!_&&o8[_]===W,Q=n.elementPercent100;Q.>=20&&Q.>=20&&Q.>=15&&S.add("");const Y=[i,o,l,u].filter(Boolean),te=[];for(const le of Y){const he=le.charAt(0),$e=le.charAt(1);te.push(rs(_,he)),te.push(D(_,$e))}const re=(le,he)=>{const $e=(Ie,He)=>!!Ie&&!!He&&le.includes(Ie)&&he.includes(He)||he.includes(Ie)&&le.includes(He);for(let Ie=0;Ie+1<te.length;Ie+=2)if($e(te[Ie],te[Ie+1]))return!0;return!1},Se=le=>te.some(he=>le.includes(he)),X=H("")+H(""),oe=H(""),J=F(""),ye=F(""),K=re(["",""],["",""]);if((oe>=1||X>=2)&&J>=1&&X>J&&ye<=1&&K&&S.add(""),Se(G.)&&Se(G.)&&re(G.,G.)){const le=M.includes("");S.add(le?"":"")}F("")>=2&&F("")>=2&&Math.abs(F("")-F(""))<=1&&F("")<=1&&F("")<=1&&S.add("");const U=H(""),B=H(""),q=H("")+H(""),V=H("")+H(""),P=F("");B>=2&&q>=1&&$.+$.>=20&&S.add(""),B>=2&&V>=1&&$.+$.>=20&&S.add(""),B>=2&&V>=1&&$.+$.>=20&&re([""],["",""])&&P<=1&&S.add(""),U>=2&&V>=1&&$.+$.>=20&&re([""],["",""])&&P<=1&&S.add("");const Z=(le,he)=>{const $e=Ci[le],Ie=Ts[he];return!!$e&&!!Ie&&$e===Ie},ie=[i,o,l,u].filter(Boolean),me=m(l),ce=Z(_,me),xe=ie.map(le=>le.charAt(0)).filter(le=>["",""].includes(rs(_,le)));let ke=!1;for(const le of ie){const he=le.charAt(0),$e=le.charAt(1);if(xe.includes(he)&&Z(he,$e)){ke=!0;break}}ce&&ke&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=1&&S.add(""),F("")>=3&&F("")+F("")<=1&&S.add("");const je=H("");F("")+F("")>=2&&je===1&&F("")>=1&&S.add(""),je>=2&&q+F("")>=3&&S.add("");const Me=U+B;(U>=2||Me>=2)&&V>=1&&Me>V&&S.add(""),B>=2&&V>=1&&Me>V&&S.add("");const Ee=H(""),Pe=H("");Ee>=2&&je+Pe>=1&&S.add(""),Ee>=2&&je+Pe===0&&S.add(""),x&&Ee>=2&&je>=1&&S.add(""),!x&&Ee>=2&&je>=1&&S.add(""),H("")>=2&&H("")>=1&&S.add(""),H("")>=1&&H("")>=1&&re([""],[""])&&S.add(""),ae&&je>=1&&F("")+F("")>=2&&S.add("");const Ce=[m(i),m(o),m(l),m(u)].filter(Boolean),Le=[i?.charAt(0),o?.charAt(0),u?.charAt(0)].filter(Boolean),Ue=new Set(Le.map(le=>rs(_,le))),fe=new Set(Ce.flatMap(le=>{const he=Ts[le];return he?[zb(_,he)]:[]})),Be=new Set(Ce.flatMap(le=>A(le).map(he=>rs(_,he))));return["","","","",""].forEach(le=>{const he=G[le],$e=he.some(st=>Ue.has(st)),Ie=he.some(st=>fe.has(st)),He=he.some(st=>Be.has(st));!$e&&!Ie&&!He?S.add(`${le}`):!$e&&!Ie&&He&&S.add(`${le}`)}),Array.from(S)}function d8(e){const{pillars:t,tab:n,birthDate:i,emittedStems:o,otherBranches:l,isNeutralized:u,mapping:f,unified:m}=e,[p,y,_,x]=t,S=re=>re&&re.length>=1?re.charAt(0):"",T=re=>re&&re.length>=2?re.charAt(1):"",k=T(y),A=S(_),D=i instanceof Date&&!Number.isNaN(i.getTime())?i:new Date,$=[S(p),S(y),S(_),S(x)].filter(re=>!!(re&&re.length===1)),O=[T(p),T(_),T(x)].filter(re=>!!(re&&re.length===1)),C=t8({dayStem:A,monthBranch:k,date:D,pillars:t,emittedStems:o??$,otherBranches:l??O,isNeutralized:u,mapping:f}),M=[` : ${C.||"-"}`,` : ${C.||"-"}`,` : ${C.||"-"}`,` : ${C.||"-"}`],G=[` : ${C.||"-"}`],H=Array.isArray(C.)&&C..length>0?C..map(re=>` : ${re}`):[" : -"],F=s8(t),W=[...F.length?F.map(re=>`${re}`):[]],Q=[...u8(t,f,m)],Y=({text:re,color:Se})=>{const X={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return g.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${X[Se]}`,title:re,children:re})},te=({children:re})=>g.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:re});return g.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${M.join(",")}|${G.join(",")}|${H.join(",")}`,children:[g.jsx("div",{className:"font-bold text-base",children:"   "}),g.jsxs("ul",{className:"space-y-1",children:[g.jsx(te,{children:M.map(re=>g.jsx(Y,{text:re,color:"violet"},re))}),g.jsx(te,{children:G.map(re=>g.jsx(Y,{text:re,color:"amber"},re))}),g.jsx(te,{children:H.map(re=>g.jsx(Y,{text:re,color:"blue"},re))}),g.jsx(te,{children:W.map(re=>g.jsx(Y,{text:re,color:"green"},re))}),g.jsx(te,{children:Q.map(re=>g.jsx(Y,{text:re,color:"red"},re))})]}),C.reason.length>0&&g.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",C.reason.join(" / ")]})]})}const hc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ec={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},TA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},h8=["","","","",""];function QS(e){return h8.includes(e)}const f8={:"",:"",:"",:"",:""},m8={:"",:"",:"",:"",:""},p8={:"",:"",:"",:"",:""},g8={:"",:"",:"",:"",:""};function dd(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(hc[t])return hc[t];if(["","","","","","","","","","","",""].includes(t))return kf[t]??null;if(fc[t])return kf[fc[t]]??null;const n=t.charAt(0);return hc[n]?hc[n]:["","","","","","","","","",""].includes(n)?n:fc[n]?kf[fc[n]]??null:["","","","","","","","","","","",""].includes(n)?kf[n]??null:null}function b8(e,t){const n=Ec[e],i=Ec[t];if(!n||!i)return"";let o;i===n?o="":i===f8[n]?o="":i===m8[n]?o="":i===p8[n]?o="":i===g8[n]?o="":o="";const l=QS(e)===QS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function y8(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function Wm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function v8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e??{})){const o=Ec[dd(n)];o&&i>0&&(t[o]+=i)}return Wm(t)}function _8(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=dd(i);if(!l)continue;const u=b8(t,l);n[u]+=o}return n}function x8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=y8(n);t[o]+=i}return Wm(t)}function Vg(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);return i?`${hc[i[1]]}${fc[i[2]]}`:""}function e2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${hc[u[1]]}${fc[u[2]]}`:i<=2?"--":""})}function w8(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const o=Ec[i.charAt(0)];o&&(n[o]=!0);{const l=TA[i.charAt(1)];l&&(n[l]=!0)}}return n}function S8(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=Ec[n.charAt(0)],o=TA[n.charAt(1)];i&&(t[i]+=10),o&&(t[o]+=6)}return t}function Kg(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const E8=["","","","","","","","","",""];function T8(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=dd(n);o&&(t[o]=(t[o]??0)+i)}return t}function k8(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of E8){const o=Ec[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}const A8={natal:50,dae:30,se:20,wol:7,il:3};function j8(e){const t={};for(const{kind:i,bare:o}of e){const l=A8[i]??0;if(l<=0)continue;const u=Wm(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function N8(e){if(!e)return[];const t=dd(e.charAt(0)),n=dd(e.charAt(1));return[t,n].filter(Boolean)}function Af(e){const t=N8(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function O8({data:e,pillars:t,lunarPillars:n,daewoonGz:i}){const o=yr(Ee=>Ee.settings),[l,u]=R.useState("   "),[f,m]=R.useState(""),[p,y]=R.useState(!0),{date:_,yearGZ:x,monthGZ:S,dayGZ:T}=fi(),k=R.useMemo(()=>Fe(x),[x]),A=R.useMemo(()=>Fe(S),[S]),D=R.useMemo(()=>Fe(T),[T]),$=Sd(e,e?.mingSikType),O=R.useMemo(()=>{if(!$?.length)return 0;const Ee=$.findIndex((Pe,Ce)=>{const Le=$[Ce+1]?.at;return _>=Pe.at&&(!Le||_<Le)});return Ee!==-1?Ee:_<$[0].at?0:$.length-1},[$,_]),C=R.useMemo(()=>{const Ee=i??$?.[O]?.gz??"";return Fe(Ee)||null},[i,$,O]),{manualHour:M}=yd(),G=e.mingSikType??"/",H=R.useMemo(()=>e2(t),[t]),F=R.useMemo(()=>e2(n),[n]),W=R.useMemo(()=>{const Ee=[...H];return(!Ee[3]||Ee[3]==="")&&M&&(Ee[3]=M.stem+M.branch),Ee},[H,M]),ae=R.useMemo(()=>{const Ee=[...F];return(!Ee[3]||Ee[3]==="")&&M&&(Ee[3]=M.stem+M.branch),Ee},[F,M]),Q=R.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),Pe=Number(e.birthDay?.slice(4,6)),Ce=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite(Pe)||!Number.isFinite(Ce))return null;const Le=new Date(Ee,Pe-1,Ce,12,0,0,0),Ue=Vg(ut(Le)||""),fe=Vg(At(Le)||""),Be=Vg(_t(Le,G)||"");return[Ue,fe,Be,""]},[e.birthDay,G]),Y=Kg(W),te=Kg(ae),[re]=R.useState("solar"),Se=re==="lunar"?te?"lunar":Y?"solar":"lunar":Y?"solar":te?"lunar":"solar",X=R.useMemo(()=>{const Pe=[...Se==="lunar"?te?ae:Y?W:Q??["","","",""]:Y?W:te?ae:Q??["","","",""]];return(!Pe[3]||Pe[3]==="")&&M&&(Pe[3]=M.stem+M.branch),Pe},[Se,Y,te,W,ae,Q,M]),oe=R.useMemo(()=>M?M.stem+M.branch:X[3]||"",[M,X]),J=R.useMemo(()=>({dae:f!==""?C??null:null,se:f===""||f===""||f===""?k??null:null,wol:f===""||f===""?A??null:null,il:f===""?D??null:null}),[f,C,k,A,D]),ye=R.useMemo(()=>vA({natal:X,tab:f,chain:J,hourKey:oe}),[X,f,J,oe]),K=R.useMemo(()=>{if(!ye)return null;const Ee=T8(ye.perStemElementScaled),Pe=J.dae?Af(J.dae):{},Ce=J.se?Af(J.se):{},Le=J.wol?Af(J.wol):{},Ue=J.il?Af(J.il):{},fe=j8([{kind:"natal",bare:Ee},{kind:"dae",bare:Pe},{kind:"se",bare:Ce},{kind:"wol",bare:Le},{kind:"il",bare:Ue}]),Be=Wm(fe),le=k8(Be),he=_8(fe,ye.dayStem),$e=x8(he),Ie=v8(fe);return{perStemAugBare:fe,perStemAugFull:le,elemPct100:Ie,totalsMain:$e,totalsSub:he}},[ye,J]),U=R.useMemo(()=>w8(X),[X]),B=R.useMemo(()=>["","","","",""].some(Ee=>!U[Ee]),[U]),q=K?.elemPct100??ye?.elementPercent100??S8(X),V=R.useMemo(()=>{if(!ye||!K)return[];const Ee=Wk(ye.dayStem);return Object.entries(K.totalsMain).map(([Pe,Ce])=>({name:Pe,value:Ce,color:Ee[Pe]}))},[ye,K]),P=K?.elemPct100??{:0,:0,:0,:0,:0},Z=K?.totalsSub??null,ie=R.useMemo(()=>M?M.stem+M.branch:X[3]||"",[M,X]),me=R.useMemo(()=>[f,C??"",k??"",A??"",D??"",_?.toISOString?.()??"",ie].join("|"),[f,C,k,A,D,_,ie]),ce=R.useMemo(()=>{const Ee=Z?Object.entries(Z).sort(([Ce],[Le])=>Ce.localeCompare(Le)).map(([Ce,Le])=>`${Ce}:${Le}`).join(","):"none",Pe=V.map(Ce=>`${Ce.name}:${Ce.value}`).join(",");return`${me}||${X.join("")}||${Pe}||${Ee}`},[me,X,V,Z]),xe=typeof _S=="function"?_S(X,ye?.totals):null,ke=R.useMemo(()=>{const Pe=(xe?.ordered??[]).map(Ue=>{const fe=Ue.element??"",Be=/||wood/i.test(fe)?"":/||fire/i.test(fe)?"":/||earth/i.test(fe)?"":/||metal/i.test(fe)?"":/||water/i.test(fe)?"":null,le=typeof Ue.score=="number"?Ue.score:Be?q[Be]??0:0,he=Array.isArray(Ue.reasons)?Ue.reasons:[];return{element:fe,elNorm:Be,score:le,reasons:he}}),Ce=Ue=>Ue?U[Ue]:!1,Le=p?Pe.map(Ue=>Ue.elNorm&&!Ce(Ue.elNorm)?{...Ue,score:0,reasons:[...Ue.reasons,":    0"]}:Ue):Pe;return Le.sort((Ue,fe)=>{const Be=Ce(Ue.elNorm)?1:0,le=Ce(fe.elNorm)?1:0;return p&&Be!==le?le-Be:(fe.score??0)!==(Ue.score??0)?(fe.score??0)-(Ue.score??0):(Ue.elNorm??Ue.element).localeCompare(fe.elNorm??fe.element)}),Le},[xe,p,q,U]),je=R.useMemo(()=>Math.max(0,...ke.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[ke]);function Me(Ee){return yA(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return Kg(X)?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:w9.map(Ee=>g.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(f===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),g.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>g.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&g.jsx(FP,{pillars:X,daewoon:C||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:D||void 0,tab:f},`harm-${f}-${ie}`),l==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(CP,{data:V,revKey:ce,perStemElementScaled:K?.perStemAugFull,elementPercent:P,dayStem:X[2]?.charAt(0)??null},`pentagon-${ce}`),g.jsx(BP,{value:Me(X)}),g.jsx(q6,{natal:X}),g.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"text-sm font-bold",children:" "}),B&&g.jsxs("button",{type:"button",onClick:()=>y(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),g.jsx("ul",{className:"space-y-2",children:ke.map((Ee,Pe)=>g.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[Pe+1,""]}),g.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:g.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Ce,Le)=>g.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Ce},Le))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&g.jsx(B6,{pillars:X,daewoon:C||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:D||void 0,tab:f},`shin-${f}-${ie}`),l==="  "&&g.jsx(d8,{unified:ye,pillars:X,tab:f,mapping:o.hiddenStemMode},`gyeok-${f}-${ie}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const D8=!1,t2=e=>e<10?`0${e}`:`${e}`,M8=e=>typeof e=="string"&&e.length>=2,C8=e=>Array.isArray(e)&&e.length===4&&e.every(M8);function R8(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=gr(o,l,u,0,0),y=`${p.getFullYear()}${t2(p.getMonth()+1)}${t2(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function L8({data:e}){const[t,n]=R.useState("un"),i=R.useMemo(()=>{try{const f=R8(e);return Xa(f)}catch{return new Date}},[e]),o=R.useMemo(()=>Ym(e,i),[e,i]),l=!e.birthTime||e.birthTime==="",u=R.useMemo(()=>{try{const f=ut(o,e.birthPlace?.lon),m=At(o,e.birthPlace?.lon),p=_t(o,e.mingSikType),y=l?"":Pi(o,e.mingSikType);return[f,m,p,y]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(gP,{data:e}),t==="myoun"&&g.jsx(TP,{data:e}),t==="report"&&g.jsx(O8,{data:e,pillars:C8(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),n2=e=>{const t=P8(e);return t.charAt(0).toUpperCase()+t.slice(1)},kA=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),$8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...f},m)=>R.createElement("svg",{ref:m,...I8,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:kA("lucide",o),...!l&&!$8(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>R.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=(e,t)=>{const n=R.forwardRef(({className:i,...o},l)=>R.createElement(z8,{ref:l,iconNode:t,className:kA(`lucide-${B8(n2(e))}`,`lucide-${e}`,i),...o}));return n.displayName=n2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H8=Ii("chevron-down",U8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],F8=Ii("chevron-up",G8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],q8=Ii("circle-x",Y8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],V8=Ii("heart-handshake",Z8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],W8=Ii("house",K8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],J8=Ii("menu",X8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eI=Ii("plus",Q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nI=Ii("settings",tI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],iI=Ii("square-user",rI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],r2=Ii("star",sI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],oI=Ii("user-plus",aI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AA=Ii("x",lI);function cI({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(J8,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(oI,{size:18})}),g.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(iI,{size:18})})]})]})})}function uI(e){R.useEffect(()=>{const t=e??T2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");k2(t),e&&rb(e)},[e])}const jA=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function dI(e){return typeof e=="string"&&jA.includes(e)}function i2(e){const t=Array.isArray(e)?e.filter(dI):[],n=jA.filter(i=>!t.includes(i));return[...t,...n]}function hI({open:e,onClose:t}){const{settings:n,setSettings:i}=yr(),o=R.useMemo(()=>i2(n.sectionOrder),[n.sectionOrder]),[l,u]=R.useState(o),[f,m]=R.useState(n),[p,y]=R.useState(null);uI(f.theme??"dark"),R.useEffect(()=>{e&&(m(n),u(i2(n.sectionOrder)))},[e,n]);const _=(k,A)=>{m(D=>{const $={...D,[k]:A};return k==="theme"&&rb(A),$})},x=()=>{i({...f,sectionOrder:l}),f.theme&&rb(f.theme),y(" "),t()},S=k=>{const{destination:A,source:D}=k;if(!A||A.index===D.index)return;const $=Array.from(l),[O]=$.splice(D.index,1);$.splice(A.index,0,O),u($)},T=k=>{switch(k){case"theme":return g.jsx(Ji,{title:"",children:g.jsx(fI,{value:f.theme??"dark",onChange:A=>_("theme",A)})});case"hiddenStem":return g.jsx(Ji,{title:"  ",children:g.jsx(rc,{value:f.hiddenStem,onChange:A=>_("hiddenStem",A),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:f.hiddenStemMode,onChange:A=>_("hiddenStemMode",A),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Ji,{title:"",children:g.jsx(rc,{value:f.sinsalMode,onChange:A=>_("sinsalMode",A),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Ji,{title:"",children:g.jsx(rc,{value:f.sinsalBase,onChange:A=>_("sinsalBase",A),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!f.sinsalBloom,onChange:A=>_("sinsalBloom",A)})});case"exposure":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:f.exposure,onChange:A=>_("exposure",A),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:f.charType,onChange:A=>_("charType",A),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!f.thinEum,onChange:A=>_("thinEum",A)})});case"visibility":return g.jsx(Ji,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Ko,{label:" ",checked:!!f.showSipSin,onChange:A=>_("showSipSin",A)}),g.jsx(Ko,{label:" ",checked:!!f.showSibiUnseong,onChange:A=>_("showSibiUnseong",A)}),g.jsx(Ko,{label:" ",checked:!!f.showSibiSinsal,onChange:A=>_("showSibiSinsal",A)}),g.jsx(Ko,{label:" ",checked:!!f.showNabeum,onChange:A=>_("showNabeum",A)})]})});case"difficultyMode":return g.jsx(Ji,{title:" UP ver.",children:g.jsx(Ko,{label:" UP ",checked:!!f.difficultyMode,onChange:A=>_("difficultyMode",A)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:x,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&g.jsx(xd,{onDragEnd:S,children:g.jsx(il,{droppableId:"settings-sections",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[l.map((A,D)=>g.jsx(wc,{draggableId:A,index:D,children:$=>g.jsxs("li",{ref:$.innerRef,...$.draggableProps,...$.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsx("div",{className:"flex-1 min-w-0",children:T(A)})]})},A)),k.placeholder]})})})]}),p&&g.jsx(kk,{message:p,onClose:()=>y(null),ms:1800})]})}function fI({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Ji({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function rc({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:i=>i.stopPropagation(),onTouchStart:i=>i.stopPropagation(),children:n.map(i=>{const o=e===i.value;return g.jsx("button",{type:"button",onClick:()=>t(i.value),className:`px-3 py-1 text-sm transition-colors ${o?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:i.label},i.value)})})}function Ko({label:e,checked:t,onChange:n}){const i=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:i,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:i,type:"checkbox",checked:t,onChange:o=>n(o.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function mI({onShowToday:e,onShowCouple:t}){const[n,i]=R.useState(!1);return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(Wg,{icon:g.jsx(W8,{size:22}),label:" ",onClick:e}),g.jsx(Wg,{icon:g.jsx(V8,{size:22}),label:"",onClick:t}),g.jsx(Wg,{icon:g.jsx(nI,{size:22}),label:"",onClick:()=>i(!0)})]})}),g.jsx(hI,{open:n,onClose:()=>i(!1)})]})}function Wg({icon:e,label:t,onClick:n}){return g.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}function pI(e,t){const[n,i]=R.useState(()=>{if(typeof window>"u")return{};try{const M=localStorage.getItem(I1);return M?JSON.parse(M):{}}catch{return{}}});R.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(I1,JSON.stringify(n))}catch{}},[n]);const[o,l]=R.useState({}),[u,f]=R.useState({}),[m,p]=R.useState(""),[y,_]=R.useState(!1),[x,S]=R.useState(()=>{const M=Gf(),G=Ff();return G.length?Yu(M,G):M}),T=R.useRef(!1);R.useEffect(()=>{(async()=>{if(y)return;const{data:{user:G},error:H}=await qt.auth.getUser();if(H||!G)return;const{data:F,error:W}=await qt.from("user_folder_order").select("folder_name, sort_order").eq("user_id",G.id).order("sort_order",{ascending:!0,nullsFirst:!0});if(W){console.error("load folder order from server error:",W),_(!0);return}const ae=Gf(),Q=(F??[]).map(te=>String(te.folder_name)).filter(Boolean),Y=Q.length?Yu(ae,Q):Yu(ae,Ff());S(Y),_(!0)})()},[y]);const k=R.useCallback(async M=>{const{data:{user:G},error:H}=await qt.auth.getUser();if(H||!G)return;const F=M.map((ae,Q)=>({user_id:G.id,folder_name:ae,sort_order:Q+1,updated_at:new Date().toISOString()})),{error:W}=await qt.from("user_folder_order").upsert(F,{onConflict:"user_id,folder_name"});W&&console.error("save folder order to server error:",W)},[]);R.useEffect(()=>{if(typeof window>"u")return;const M=()=>{if(T.current){T.current=!1;return}const G=Gf(),H=Ff(),F=H.length?Yu(G,H):G;S(F)};return window.addEventListener(Wa,M),()=>window.removeEventListener(Wa,M)},[]),R.useEffect(()=>{l(M=>{const G={...M};for(const H of x)G[H]===void 0&&(G[H]=!0);return G})},[x]);const{grouped:A,unassignedItems:D}=R.useMemo(()=>{const M={};x.forEach(F=>{M[F]=[]});const G=[],H=new Set;for(const F of e){if(!F.id||H.has(F.id))continue;const W=F.folder;W&&x.includes(W)?M[W].push(F):G.push(F),H.add(F.id)}return{grouped:M,unassignedItems:G}},[e,x]),$=R.useCallback(M=>{const{source:G,destination:H,type:F}=M;if(!H||F!=="FOLDER")return;const W=G.index,ae=H.index;W!==ae&&S(Q=>{if(!Q.length)return Q;const Y=[...Q],[te]=Y.splice(W,1);return Y.splice(ae,0,te),T.current=!0,Xu(Y),Y})},[]);return{folderFavMap:n,setFolderFavMap:i,folderOpenMap:o,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:f,newFolderName:m,setNewFolderName:p,orderedFolders:x,grouped:A,unassignedItems:D,handleDragEnd:$,createFolder:M=>{const G=M.trim();!G||G===pn||(Tk(G),S(H=>{if(H.includes(G))return H;const F=[...H,G];return Xu(F),k(F),F}))},deleteFolder:M=>{e.forEach(G=>{G.folder===M&&t(G.id,{folder:void 0})}),i(G=>{const H={...G};return delete H[M],H}),S(G=>{const H=G.filter(F=>F!==M);return Xu(H),k(H),H}),Sk.includes(M)?ZB(M):qB(M)},UNASSIGNED_LABEL:pn}}function s2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${i} ${o} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${i} ${o} ( )`:`${n} ${i} ${o}`}function gI(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(f=>u.some(m=>f.endsWith(m))),i=n(["","",""]),o=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:i&&o?`${i} ${o}`:i||e}function Ub(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}const bI="list:__unassigned__",yI=e=>`list:${e}`,a2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},vI="myeoun:folder-updated",o2=()=>{typeof window>"u"||window.dispatchEvent(new Event(vI))};function _I(e){const t=Ub(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const i=Number(n.slice(0,4)),o=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!dm(i,o,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),f=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+f,y=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(y.getTime()))return t;new Date(y.getTime()-3600*1e3);const _=Im({...e,birthTime:p});return Ub({...e,..._})}function xI({open:e,onClose:t,onView:n,onAddNew:i,onEdit:o,onDeleteView:l}){const{list:u,remove:f,update:m,reorder:p}=ss(),{folderFavMap:y,setFolderFavMap:_,folderOpenMap:x,setFolderOpenMap:S,memoOpenMap:T,setMemoOpenMap:k,newFolderName:A,setNewFolderName:D,orderedFolders:$,grouped:O,unassignedItems:C,handleDragEnd:M,createFolder:G,deleteFolder:H,UNASSIGNED_LABEL:F}=pI(u,m),[W,ae]=R.useState(""),[Q,Y]=R.useState("name"),te=/\S/.test(W),{filteredUnassigned:re,filteredGrouped:Se,totalMatches:X}=R.useMemo(()=>{const B=ce=>ce.toLowerCase().replace(/\s+/g," ").trim();if(!te)return{filteredUnassigned:C,filteredGrouped:O,totalMatches:C.length+Object.values(O).reduce((ce,xe)=>ce+xe.length,0)};const q=B(W),V=ce=>{const xe=String(ce.birthDay??"").trim();let ke="",je="",Me="";if(/^\d{8}$/.test(xe))ke=xe.slice(0,4),je=xe.slice(4,6),Me=xe.slice(6,8);else{const Ue=new Date(xe);if(!Number.isNaN(Ue.getTime())){const fe=Ue.getFullYear(),Be=Ue.getMonth()+1,le=Ue.getDate();ke=String(fe).padStart(4,"0"),je=String(Be).padStart(2,"0"),Me=String(le).padStart(2,"0")}}const Ee=ke&&je&&Me?`${ke}${je}${Me}`:"",Pe=ke&&je&&Me?`${ke}-${je}-${Me}`:"",Ce=ke&&je&&Me?`${ke}.${je}.${Me}`:"",Le=s2(ce.birthDay,ce.birthTime);return B([Ee,Pe,Ce,Le].filter(Boolean).join(" "))},P=ce=>Q==="name"?B(ce.name??"").includes(q):Q==="ganji"?B(Ub(ce)??"").includes(q):V(ce).includes(q),Z=C.filter(P),ie={};let me=Z.length;for(const ce of $){const xe=(O[ce]||[]).filter(P);ie[ce]=xe,me+=xe.length}return{filteredUnassigned:Z,filteredGrouped:ie,totalMatches:me}},[W,Q,te,C,O,$]),oe=R.useRef(null),J=R.useRef(null);R.useEffect(()=>{if(J.current==null)return;const B=oe.current;B&&(B.scrollTop=J.current,J.current=null)},[u,$]);const ye=B=>({...B,transition:B?.transform?"transform 0.15s ease":"none"}),K=(B,q)=>{const V=_I(B),P=gI(B.birthPlace?.name),Z=`item:${B.id}`,ie=!!T[B.id],me=B.gender===""?"":B.gender===""?"":B.gender,ce=new Date(B.corrected),xe=!B.birthTime||B.birthTime==="",ke=String(B.birthDay).trim();let je=NaN;if(/^\d{8}$/.test(ke)){const Ce=`${ke.slice(0,4)}-${ke.slice(4,6)}-${ke.slice(6,8)}`,Le=new Date(Ce);Number.isNaN(Le.getTime())||(je=Le.getFullYear())}else{const Ce=new Date(ke);Number.isNaN(Ce.getTime())||(je=Ce.getFullYear())}function Me(Ce,Le){return Number.isNaN(Ce)?0:Le-Ce+1}const Ee=new Date().getFullYear(),Pe=Me(je,Ee);return g.jsx(wc,{draggableId:Z,index:q,isDragDisabled:te,children:Ce=>g.jsx("li",{ref:Ce.innerRef,...Ce.draggableProps,...Ce.dragHandleProps,style:ye(Ce.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[B.name," (",Pe,", ",me,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:B.relationship?B.relationship:" "}),g.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[s2(B.birthDay,B.birthTime),","," ",B.calendarType==="lunar"?"":""]}),(P||ce)&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[P,ce&&g.jsxs("span",{className:"opacity-70",children:[" "," "," ",xe?"":X7(ce)]})]}),V&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:V}),B.memo&&B.memo.trim()!==""&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Le=>{Le.stopPropagation(),k(Ue=>({...Ue,[B.id]:!Ue[B.id]}))},children:ie?" ":" "}),g.jsx("div",{className:ie?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:B.memo})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.folder??F,onClick:Le=>Le.stopPropagation(),onChange:Le=>{Le.stopPropagation();const Ue=Le.target.value,fe=Ue===F?void 0:Ue;m(B.id,{folder:fe})},children:[F,...$].map(Le=>g.jsx("option",{value:Le,children:Le},Le))}),g.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.mingSikType??"/",onClick:Le=>Le.stopPropagation(),onChange:Le=>{Le.stopPropagation();const Ue=Le.target.value,fe={...B,mingSikType:Ue},Be=Im(fe);m(B.id,{mingSikType:Ue,...Be}),n({...fe,...Be}),t()},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{onClick:Le=>{Le.stopPropagation(),n(B),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),g.jsx("button",{onClick:Le=>{Le.stopPropagation(),o?.(B)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),g.jsx("button",{onClick:Le=>{Le.stopPropagation(),confirm(`'${B.name}'  ?`)&&(f(B.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),g.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation();const Ue=!B.favorite;m(B.id,{favorite:Ue});const fe=B.folder??"__unassigned__",Be={__unassigned__:[]};$.forEach(Ie=>{Be[Ie]=[]}),u.forEach(Ie=>{const He=Ie.folder??"__unassigned__";Be[He]||(Be[He]=[]),Be[He].push(Ie)});const he=(Be[fe]??[]).filter(Ie=>Ie.id!==B.id);Be[fe]=[{...B,favorite:Ue},...he];const $e=[...Be.__unassigned__,...$.flatMap(Ie=>Be[Ie]??[])];p($e)},className:`ml-auto p-1 rounded cursor-pointer ${B.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(r2,{size:16,fill:B.favorite?"currentColor":"none"})})]})]})})},Z)},U=B=>{const{type:q,source:V,destination:P,draggableId:Z}=B;if(!P||te)return;const ie=oe.current;if(ie&&(J.current=ie.scrollTop),q==="FOLDER"){M(B);return}if(q==="ITEM"){if(!Z.replace(/^item:/,""))return;const ce=a2(V.droppableId),xe=a2(P.droppableId),ke=ce??"__unassigned__",je=xe??"__unassigned__",Me={__unassigned__:[...C]};$.forEach(fe=>{Me[fe]=[...O[fe]||[]]});const Ee=Me[ke]??[];if(!Ee[V.index])return;const[Pe]=Ee.splice(V.index,1),Ce={...Pe,folder:xe??void 0},Le=Me[je]??[];Le.splice(P.index,0,Ce),Me[ke]=Ee,Me[je]=Le;const Ue=[...Me.__unassigned__,...$.flatMap(fe=>Me[fe]??[])];p(Ue)}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:()=>{i(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[g.jsx(eI,{size:16})," "]}),g.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:g.jsx(AA,{size:22})})]})]}),g.jsx(xd,{onDragEnd:U,children:g.jsxs("div",{ref:oe,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:Q,onChange:B=>Y(B.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:W,onChange:B=>ae(B.target.value),placeholder:Q==="name"?" ":Q==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),W&&g.jsx("button",{type:"button",onClick:()=>ae(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(q8,{size:16})})]}),te&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[X,""]})]})}),g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:A,onChange:B=>D(B.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:B=>B.stopPropagation()}),g.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:B=>{B.stopPropagation();const q=A.trim();q&&(G(q),D(""),o2())},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:te?"   .":"/      ."}),g.jsx(il,{droppableId:bI,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:B=>{const q=re;return g.jsx("div",{ref:B.innerRef,...B.droppableProps,className:"mb-6",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[q.map((V,P)=>K(V,P)),B.placeholder]})})}}),g.jsx(il,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:B=>g.jsxs("div",{ref:B.innerRef,...B.droppableProps,children:[$.map((q,V)=>{const P=yI(q),Z=Se[q]||[],ie=!!x[q],me=!!y[q];return g.jsx(wc,{draggableId:`folder-${q}`,index:V,isDragDisabled:te,children:ce=>g.jsxs("div",{ref:ce.innerRef,...ce.draggableProps,...ce.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:xe=>{xe.stopPropagation(),S(ke=>({...ke,[q]:!ie}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[ie?g.jsx(F8,{size:16}):g.jsx(H8,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:q})]}),g.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),_(ke=>({...ke,[q]:!ke[q]}))},className:`p-1 rounded cursor-pointer ${me?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(r2,{size:16,fill:me?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[Z.length,""]}),g.jsx("button",{type:"button",onClick:xe=>{if(xe.stopPropagation(),y[q]){alert(`'${q}'    .
   .`);return}confirm(`'${q}'  ?
(   )`)&&(H(q),o2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),ie&&g.jsx(il,{droppableId:P,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:xe=>g.jsx("div",{ref:xe.innerRef,...xe.droppableProps,className:"mt-2",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[Z.map((ke,je)=>K(ke,je)),xe.placeholder]})})})]})},`folder-${q}`)}),B.placeholder]})})]})})]})]})}const l2="ms_folders",Xg="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",wI="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",SI="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Ws="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",EI="text-xs text-neutral-500 dark:text-neutral-400",jf="accent-violet-600 dark:accent-violet-400",c2="accent-violet-600 dark:accent-violet-400",Xm="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",TI=`${Xm} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,kI=`${Xm} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,u2=`${Xm} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,AI=`${Xm} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function jI({item:e,onClose:t}){const{list:n,update:i,remove:o}=ss(),[l,u]=R.useState(!1),[f,m]=R.useState({...e,calendarType:e.calendarType??"solar"}),[p,y]=R.useState(!e.birthTime||e.birthTime===""),[_,x]=R.useState(!e.birthPlace||e.birthPlace.name===""),S=R.useMemo(()=>["","","","","",""],[]),[T,k]=R.useState([]);R.useEffect(()=>{try{const M=JSON.parse(localStorage.getItem(l2)||"[]");Array.isArray(M)&&k(M)}catch{}},[]);const A=R.useMemo(()=>{const M=Array.from(new Set(n.map(F=>F.folder).filter(Boolean))),G=new Set([...S,...T,...M]),H=Array.from(G).sort((F,W)=>F.localeCompare(W));return[pn,...H]},[n,T,S]),D=()=>{m({...e,calendarType:e.calendarType??"solar"}),y(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},$=()=>{if(!f.name||f.name.trim()==="")return" .";if(!f.birthDay||!/^\d{8}$/.test(f.birthDay))return" YYYYMMDD  .";const M=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8));if(f.calendarType==="lunar")try{gr(M,G,H)}catch(F){return F instanceof Error?F.message:"   ."}else{const F=new Date(M,G-1,H);if(F.getFullYear()!==M||F.getMonth()+1!==G||F.getDate()!==H)return"   ."}if(!p){if(!f.birthTime||!/^\d{4}$/.test(f.birthTime))return"  00002359 (4) .";const F=Number(f.birthTime.slice(0,2)),W=Number(f.birthTime.slice(2,4));if(F<0||F>23||W<0||W>59)return"  00002359  ."}return!_&&!f.birthPlace?"   '' .":null},O=()=>{const M=$();if(M){alert(M);return}const G=Number(f.birthDay.slice(0,4)),H=Number(f.birthDay.slice(4,6)),F=Number(f.birthDay.slice(6,8));let W=G,ae=H,Q=F;if(f.calendarType==="lunar"){const ie=gr(G,H,F);W=ie.getFullYear(),ae=ie.getMonth()+1,Q=ie.getDate()}const Y=p?4:Number((f.birthTime??"0430").slice(0,2)),te=p?30:Number((f.birthTime??"0430").slice(2,4)),re=_||!f.birthPlace||f.birthPlace.lon===0?127.5:f.birthPlace.lon,Se=new Date(W,ae-1,Q,Y,te,0,0),X=!f.birthPlace||typeof f.birthPlace=="object"&&f.birthPlace.name==="",oe=cl(Se,re,X),ye=ut(oe,re).charAt(0),U=((ie,me)=>{const xe=["","","","","","","","","",""].includes(ie),ke=(me??"")==="";return xe?ke?"forward":"backward":ke?"backward":"forward"})(ye,f.gender??""),B=sl(f.folder===pn?void 0:f.folder),q={...e,name:(f.name??"").trim()||"",birthDay:f.birthDay,birthTime:p?"":f.birthTime??"0430",gender:f.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:f.birthPlace??{name:"",lat:0,lon:127.5},relationship:f.relationship??"",memo:f.memo??"",folder:B,calendarType:f.calendarType??"solar",mingSikType:f.mingSikType??"/",DayChangeRule:(f.mingSikType??"/")===""?"":"",dir:U,corrected:oe,correctedLocal:"",ganji:""},{correctedLocal:V,ganji:P}=Im(q),Z={...q,correctedLocal:V,ganji:P};if(Z.folder&&!S.includes(Z.folder)&&!T.includes(Z.folder)){const ie=[...T,Z.folder];k(ie),localStorage.setItem(l2,JSON.stringify(ie))}i(e.id,Z),u(!1),t&&t()},C=()=>{confirm(`'${e.name}'  ?`)&&o(e.id)};return l?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("input",{className:Xg,value:f.name||"",onChange:M=>m({...f,name:M.target.value}),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" (YYYYMMDD)"}),g.jsx("input",{className:Xg,value:f.birthDay||"",onChange:M=>m({...f,birthDay:M.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jf,name:"calendarType",checked:f.calendarType==="solar",onChange:()=>m({...f,calendarType:"solar"}),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jf,name:"calendarType",checked:f.calendarType==="lunar",onChange:()=>m({...f,calendarType:"lunar"}),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),f.calendarType==="lunar"&&f.birthDay?.length===8&&g.jsx("span",{className:EI,children:(()=>{try{const M=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8)),F=gr(M,G,H);return`  ${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`}catch(M){const G=M instanceof Error?M.message:void 0;return`  ${G?`: ${G}`:""}`}})()})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:"  (HHMM)"}),g.jsx("input",{className:`${Xg} disabled:opacity-50`,value:p?"":f.birthTime||"",onChange:M=>m({...f,birthTime:M.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:c2,checked:p,onChange:M=>y(M.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(M=>{const G=`editor_ming_${M}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jf,name:"mingSikType",checked:(f.mingSikType??"")===M,onChange:()=>m({...f,mingSikType:M}),id:G}),g.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:M})]},M)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(M=>{const G=`editor_gender_${M}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jf,name:"gender",value:M,checked:f.gender===M,onChange:H=>m({...f,gender:H.target.value}),id:G}),g.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:M})]},M)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx(uT,{onSelect:M=>m({...f,birthPlace:M}),value:_?"":f.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:c2,checked:_,onChange:M=>x(M.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx(wk,{value:f.relationship||"",onChange:M=>m({...f,relationship:M})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("select",{className:wI,value:f.folder??pn,onChange:M=>{const G=M.target.value;m(G===pn?{...f,folder:void 0}:{...f,folder:G})},children:A.map(M=>g.jsx("option",{value:M===pn?pn:M,children:M},M))})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("textarea",{className:SI,value:f.memo||"",onChange:M=>m({...f,memo:M.target.value}),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:u2,onClick:()=>{D(),u(!1)},children:""}),g.jsx("button",{className:AI,onClick:O,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:TI,onClick:()=>u(!0),children:""}),g.jsx("button",{className:kI,onClick:C,children:""}),t&&g.jsx("button",{className:u2,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??pn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function NI({pillarsA:e,pillarsB:t}){const n=GP(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([i,o])=>o.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:i}),g.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((l,u)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},i):null)]})}function OI(e){return typeof e=="object"&&e!==null}const DI=["","","","","","","","","","","","","","","","","","","",""],MI=["","","","","","","","","","","","","","","","","","","","","","","",""],CI=new Set(DI),RI=new Set(MI);function d2(e){return typeof e=="string"&&e.length>=2&&CI.has(e[0])&&RI.has(e[1])}function cn(e,...t){if(d2(e))return e;for(const n of t)if(d2(n))return n;return""}function Nf(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function LI(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function h2(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,i,o,l,u]=t,f=new Date(+n,+i-1,+o,+l,+u);return Number.isNaN(f.getTime())?null:f}function ym(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function BI(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(o=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:i,hh:o,mm:l}}function Jm(e){const{y:t,m:n,d:i}=BI(e),o=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?gr(t,n,i,o,l):new Date(t,n-1,i,o,l)}function PI(e){const t=Jm(e);return`${ym(e)}-${t.toISOString()}`}function zu(e){const t=e;return typeof t.id=="string"&&t.id?t.id:PI(e)}function $I(e){return OI(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function II(e){const t=ul;return $I(t)?e==="classic"?t.Classic:t.Modern:e}const Jg="people_picker_order_v1";function zI(e,t,n){const i=e.slice(),[o]=i.splice(t,1);return i.splice(n,0,o),i}function f2({open:e,list:t,onSelect:n,onClose:i}){const[o,l]=R.useState("");R.useEffect(()=>{e||l("")},[e]);const u=R.useMemo(()=>t.map(zu),[t]),f=R.useMemo(()=>new Set(u),[u]),[m,p]=R.useState([]);R.useEffect(()=>{const k=localStorage.getItem(Jg),A=k?JSON.parse(k):[],D=A.filter(O=>f.has(O)),$=[...D,...u.filter(O=>!D.includes(O))];p($),JSON.stringify($)!==JSON.stringify(A)&&localStorage.setItem(Jg,JSON.stringify($))},[u,f]);const y=k=>{p(k),localStorage.setItem(Jg,JSON.stringify(k))},_=R.useMemo(()=>{const k=new Map(t.map(D=>[zu(D),D])),A=[];for(const D of m){const $=k.get(D);$&&A.push($)}return k.forEach((D,$)=>{m.includes($)||A.push(D)}),A},[t,m]),x=R.useMemo(()=>{const k=o.trim().toLowerCase();return k?_.filter(A=>ym(A).toLowerCase().includes(k)):_},[_,o]),S=o.trim()==="",T=k=>{const{destination:A,source:D}=k;if(!A||!S||A.index===D.index)return;const $=x.map(zu),O=zI($,D.index,A.index),M=_.map(zu).filter(H=>!$.includes(H)),G=[...O,...M].filter((H,F,W)=>W.indexOf(H)===F);y(G)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:i}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{placeholder:" ",value:o,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!S&&g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),g.jsx(xd,{onDragEnd:T,children:g.jsx(il,{droppableId:"peopleList",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((A,D)=>{const $=String(zu(A)),O=Jm(A);return g.jsx(wc,{draggableId:$,index:D,children:C=>g.jsx("li",{ref:C.innerRef,...C.draggableProps,...C.dragHandleProps,onClick:()=>n(A),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:ym(A)}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Ju(O)})]})]})})},$)}),k.placeholder]})})})]})]})}function Qg({label:e,gzHour:t,gzDay:n,gzMonth:i,gzYear:o,dayStem:l,cardSettings:u,sinsalBaseBranch:f,sinsalMode:m,sinsalBloom:p}){const y=k=>{const A=u.showSibiUnseong?Jt(l,k):"",D=u.showSibiSinsal?Qt({baseBranch:f,targetBranch:k,era:II(m),gaehwa:!!p}):"";return{unseongText:A||void 0,shinsalText:D||void 0}},_=cn(t).charAt(1),x=cn(n).charAt(1),S=cn(i).charAt(1),T=cn(o).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),_],["",cn(n),x],["",cn(i),S],["",cn(o),T]].map(([k,A,D])=>{const{unseongText:$,shinsalText:O}=y(D);return g.jsx(cc,{label:k,gz:A,dayStem:l,settings:yr.getState().settings,unseongText:$,shinsalText:O,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function UI(e){if(!e)return"";const t=e,n=f=>typeof t[f]=="string"?String(t[f]).trim().toLowerCase():null,i=f=>typeof t[f]=="boolean"?t[f]:null,o=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(f=>!!f);for(const f of o){if(["","","male","m","boy","man"].includes(f))return"";if(["","","female","f","girl","woman"].includes(f))return""}const l=i("isMale"),u=i("isFemale");return l===!0?"":u===!0?"":""}function ic({label:e,data:t,mode:n,effectiveDate:i,onPick:o}){const l=yr(M=>M.settings),u=R.useMemo(()=>t?Jm(t):null,[t]),f=cn(u?Pi(u,"/"):void 0),m=cn(u?_t(u,"/"):void 0),p=cn(u?At(u):void 0),y=cn(u?ut(u):void 0),_=R.useMemo(()=>m.charAt(0)||"",[m]),x=u,S=R.useMemo(()=>{const M=t?.birthPlace;return!M||M.name===""||!M.lon?127.5:M.lon},[t]),T=t?.mingSikType??"/",k=R.useMemo(()=>{const M=x?_t(x,T).charAt(1):m.charAt(1)||"",G=x?ut(x,S).charAt(1):y.charAt(1)||"";return(l.sinsalBase??"")===""?M:G},[l.sinsalBase,x,T,S,m,y]),A=R.useMemo(()=>{if(n!==""||!u||!t)return null;try{const M=Dk(u,f,t.dir,120,t.mingSikType),G=Ck(M,m,t.dir,t.DayChangeRule),H=wd(u,p,t.dir,120,t?.birthPlace?.lon??127.5),F=Rk(H,y,t.dir,t.DayChangeRule,u),W=i;return{si:cn(Nf(M.events,W)?.gz,f),il:cn(Nf(G.events,W)?.gz,m),wl:cn(Nf(H.events,W)?.gz,p),yn:cn(Nf(F.events,W)?.gz,y)}}catch{return null}},[n,u,f,m,p,y,i,t]),D=R.useMemo(()=>{if(n!=="")return null;const M=i;return{si:cn(Pi(M,"/")),il:cn(_t(M,"/")),wl:cn(At(M)),yn:cn(ut(M))}},[n,i]),$=t?ym(t):"",O=u?Ju(u):"",C=t?UI(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:o,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:$}),C&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",C]}),O&&g.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:O})]}),n===""&&g.jsx(Qg,{label:"",gzHour:f,gzDay:m,gzMonth:p,gzYear:y,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&A&&g.jsx(Qg,{label:"",gzHour:A.si,gzDay:A.il,gzMonth:A.wl,gzYear:A.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&D&&g.jsx(Qg,{label:"",gzHour:D.si,gzDay:D.il,gzMonth:D.wl,gzYear:D.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:o,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function HI({people:e=[]}){const[t,n]=R.useState(),[i,o]=R.useState(),[l,u]=R.useState(!1),[f,m]=R.useState(!1),p=R.useRef(new Date),[y,_]=R.useState(()=>LI(p.current)),x=R.useRef(h2(y)??p.current),S=R.useMemo(()=>{const O=h2(y);return O&&(x.current=O),x.current},[y]),[T,k]=R.useState(!1),[A,D]=R.useState(!1);function $(O){if(!O)return["","","",""];try{const C=Jm(O),M={hour:cn(Pi(C,"/")),day:cn(_t(C,"/")),month:cn(At(C)),year:cn(ut(C))};return[M.year,M.month,M.day,M.hour]}catch{return["","","",""]}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:O=>u(O.target.checked),className:"accent-indigo-500"})," "]}),g.jsx("button",{onClick:()=>m(O=>!O),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:f?"  ":"  "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>D(!0)}),l&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),l&&i&&g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>D(!0)}),f&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),f&&i&&g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>D(!0)})]}),t&&i&&g.jsx("div",{className:"mt-4",children:g.jsx(NI,{pillarsA:$(t),pillarsB:$(i)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),g.jsx("input",{type:"datetime-local",value:y,onChange:O=>_(O.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(f2,{open:T,list:e||[],onSelect:O=>{n(O),k(!1)},onClose:()=>k(!1)}),g.jsx(f2,{open:A,list:e||[],onSelect:O=>{o(O),D(!1)},onClose:()=>D(!1)})]})}function GI(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=async()=>{try{const{data:{user:l}}=await qt.auth.getUser();if(!l){alert("  .");return}const u=l.id;await qt.from("profiles").delete().eq("id",u),await qt.from("myeongsik").delete().eq("user_id",u),await qt.auth.admin.deleteUser(u),await qt.auth.signOut(),alert(" ."),window.location.href="/"}catch(l){console.error(l),alert("   .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex flex-col items-center gap-2 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>i(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>i(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["         .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>i(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:o,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function FI({ms:e}){const{date:t,setDate:n}=fi();R.useEffect(()=>{n(new Date)},[e]);const i=By(e),o=R.useMemo(()=>{const f=t??new Date,m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),y=String(f.getDate()).padStart(2,"0");return`${m}-${p}-${y}`},[t]),l=f=>{if(!f)return;const[m,p,y]=f.split("-"),_=Number(m),x=Number(p),S=Number(y);if(!Number.isFinite(_)||!Number.isFinite(x)||!Number.isFinite(S))return;const T=t??new Date,k=T.getHours(),A=T.getMinutes(),D=new Date(_,x,0).getDate(),$=Math.min(S,D),O=new Date(_,x-1,$,k,A,0,0);Number.isNaN(O.getTime())||n(O)},u=R.useMemo(()=>{const f=e.ganji,m=i?.dae?.gz?`${i.dae.gz}`:null,p=i?.se?.gz?`${i.se.gz}`:null,y=i?.wol?.gz?`${i.wol.gz}`:null,_=[m,p,y].filter(Boolean).join(" ");return[f,_].filter(Boolean).join(" + ")},[e,i]);return g.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx("input",{type:"date",value:o,onChange:f=>l(f.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const YI=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function qI(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function Of(e,t){return e&&t?`${e}${t}`:null}function m2(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const ZI={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},VI=Li.,KI=["","","","","","","","","","","",""];function p2(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const i=ZI[n],o=KI.indexOf(t),l=(i+(o>=0?o:0))%10;return VI[l]}const WI=Li..slice(),XI=["","","","","","","","","","","",""];function sc(e,t){const i=(t===""?L2:Kb)[e],o=t===""?WI:XI,l=Li..reduce((u,f)=>(u[f]="",u),{});for(let u=0;u<12;u++)l[o[u]]=i[u];return l}const JI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},QI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function ez({open:e,onClose:t,onSave:n}){const{settings:i}=yr(),[o,l]=R.useState(null),[u,f]=R.useState({}),[m,p]=R.useState(null),[y,_]=R.useState(!0),[x,S]=R.useState(!0),[T,k]=R.useState(""),[A,D]=R.useState("male"),[$,O]=R.useState(null),[C,M]=R.useState(!1),[,G]=R.useState(null),[H,F]=R.useState(null),[W,ae]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[Q,Y]=R.useState(!1),[te,re]=R.useState(null),Se=fe=>{re(fe),setTimeout(()=>re(null),1800)},[X,oe]=R.useState(!1),[J,ye]=R.useState(!1);R.useEffect(()=>{if(X){const fe=setTimeout(()=>oe(!1),2e3);return()=>clearTimeout(fe)}},[X]),R.useEffect(()=>{if(J){const fe=setTimeout(()=>ye(!1),2e3);return()=>clearTimeout(fe)}},[J]);const K=()=>{const fe=H!==null?$?.filter((kn,Dn)=>Dn===H)??[]:[];if(fe.length===0){alert("  .");return}const Be=T===""?"/":"",le=fe[0],[he,$e,Ie]=le.date.split("-").map(Number),He={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let st=0,et=0;if(le.hourSlots.length>0){const kn=le.hourSlots[0].branch,Dn=He[kn];Dn&&(st=Dn.hh,et=Dn.mi)}const Zt=new Date(he,$e-1,Ie,st,et),En=new Date(Zt.getTime()-30*6e4),Tn=En.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),or=A==="male"?"":"";function vr(kn,Dn){const Nr=["","","","","","","","","",""].includes(kn),lr=Dn==="";return Nr?lr?"forward":"backward":lr?"backward":"forward"}const dn=vr(le.year.charAt(0),or),Mt=ut(En,127.5),bn=At(En,127.5),hn=_t(En,Be),qr=Pi(En,Be),ra=[` : ${Mt} ${bn} ${hn}`,qr?`${qr}`:null].filter(Boolean).join(" "),zi={id:cT(),name:"",birthDay:`${he}${String($e).padStart(2,"0")}${String(Ie).padStart(2,"0")}`,birthTime:`${String(st).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:or,birthPlace:Q?{name:"",lat:0,lon:127.5}:W.birthPlace??{name:"",lat:0,lon:127.5},relationship:W.relationship??"",memo:W.memo??"",folder:sl(W.folder),mingSikType:W.mingSikType??"/",DayChangeRule:W.mingSikType===""?"":"",calendarType:W.calendarType??"solar",yearGZ:le.year,monthGZ:le.month,dayGZ:le.day,hourGZ:le.hour,ganjiText:` : ${le.year} ${le.month} ${le.day} ${le.hour}`,ganji:ra,dayStem:le.day.charAt(0),dateObj:Zt,corrected:En,correctedLocal:Tn,dir:dn};Dm.flushSync(()=>{ss.getState().add(zi)}),n(zi),re(" !"),ae({gender:"",mingSikType:"/",calendarType:"solar"}),Y(!1),t()},U=y||x,B=!!(u.yearStem&&u.yearBranch),q=!!(u.dayStem&&u.dayBranch),V=!U||B||q,P=!!m&&m.endsWith("Stem"),Z=!!m&&m.endsWith("Branch");function ie(fe){return fe==="yearStem"?"yearBranch":fe==="yearBranch"?"yearStem":fe==="monthStem"?"monthBranch":fe==="monthBranch"?"monthStem":fe==="dayStem"?"dayBranch":fe==="dayBranch"?"dayStem":fe==="hourStem"?"hourBranch":"hourStem"}const me=R.useCallback((fe,Be)=>{if(!y||!fe.yearStem)return fe;const le={...fe},he=Kb[fe.yearStem];if(!he)return le;const $e=He=>he.filter(st=>st.startsWith(He)),Ie=He=>he.find(st=>st.endsWith(He));if(Be==="monthStem"&&le.monthStem){const He=$e(le.monthStem).map(st=>st.slice(1));return He.length>=2?(l(He.slice(0,2)),p("monthBranch"),le):(He.length===1&&(le.monthBranch=He[0],l(null)),le)}if(Be==="monthBranch"&&le.monthBranch){const He=Ie(le.monthBranch);return He&&(le.monthStem=He.slice(0,1),l(null)),le}if(Be==="yearStem"){if(le.monthStem&&!le.monthBranch){const He=$e(le.monthStem).map(st=>st.slice(1));if(He.length>=2)return l(He.slice(0,2)),p("monthBranch"),le;He.length===1&&(le.monthBranch=He[0])}else if(le.monthBranch&&!le.monthStem){const He=Ie(le.monthBranch);He&&(le.monthStem=He.slice(0,1))}}return le},[y,p]),ce=R.useCallback((fe,Be)=>{if(!x||!fe.dayStem)return fe;const le={...fe},he=sc(fe.dayStem,T),$e=He=>Object.entries(he).find(([,st])=>st.startsWith(He)),Ie=He=>he[He];if(Be==="hourStem"&&le.hourStem){const He=$e(le.hourStem);return He&&(le.hourBranch=He[0]),le}if(Be==="hourBranch"&&le.hourBranch){const He=Ie(le.hourBranch);return He&&(le.hourStem=He.slice(0,1)),le}if(Be==="dayStem"){if(le.hourStem&&!le.hourBranch){const He=$e(le.hourStem);He&&(le.hourBranch=He[0])}else if(le.hourBranch&&!le.hourStem){const He=Ie(le.hourBranch);He&&(le.hourStem=He.slice(0,1))}}return le},[x,T]),xe=R.useCallback(fe=>!y||!fe.yearStem?!1:fe.monthBranch&&fe.monthStem?p2(fe.yearStem,fe.monthBranch)!==fe.monthStem:!1,[y]),ke=R.useCallback(fe=>{if(!x||!fe.dayStem)return!1;if(fe.hourBranch&&fe.hourStem){const le=sc(fe.dayStem,T)[fe.hourBranch];return le?le.slice(0,1)!==fe.hourStem:!1}return!1},[x,T]);R.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Be=sc(u.dayStem,T)[u.hourBranch];Be&&f(le=>({...le,hourStem:Be.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=R.useCallback(fe=>{if(!m)return;if(!V&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){G("/  :    ."),setTimeout(()=>G(null),1500);return}let le={...u,[m]:fe};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(le=me(le,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(le=ce(le,m)),f(le);let he=!1;xe(le)&&(_(!1),he=!0),ke(le)&&(S(!1),he=!0),he&&Se("/  .   ."),f(le),O(null);const $e=ie(m);p($e),setTimeout(()=>{const Ie={...le};if(Ie.yearStem&&Ie.yearBranch&&!Ie.monthStem){p("monthStem");return}if(Ie.monthStem&&Ie.monthBranch&&!Ie.dayStem){p("dayStem");return}if(Ie.dayStem&&Ie.dayBranch&&!Ie.hourStem){p("hourStem");return}},0)},[m,u,V,me,ce,xe,ke]),Me=m2(u),Ee=R.useCallback(async()=>{if(O(null),G(null),!m2(u)){G("   .");return}const fe=Of(u.yearStem,u.yearBranch),Be=Of(u.monthStem,u.monthBranch),le=Of(u.dayStem,u.dayBranch),he=Of(u.hourStem,u.hourBranch),$e=300,Ie=[];M(!0);try{const He=new Date(1900,0,1,12,0,0),st=new Date(2100,11,31,12,0,0);for(let et=He.getTime();et<=st.getTime();et+=24*3600*1e3){const Zt=new Date(et),En=T===""?"/":"",Tn=ut(Zt);if(Tn!==fe)continue;const or=At(Zt);if(or!==Be)continue;const vr=_t(Zt,En);if(vr!==le)continue;const dn=sc(u.dayStem,T),Mt=[];for(let bn=0;bn<12;bn++){const hn=Li.[bn];dn[hn]===he&&Mt.push({branch:hn,time:YI[bn]})}if(Mt.length!==0&&(Ie.push({date:qI(Zt),year:Tn,month:or,day:vr,hour:he,hourSlots:Mt}),Ie.length>=$e))break}Ie.length===0&&G("  . (: 19002100)"),O(Ie)}catch(He){He instanceof Error?G(He.message):G(String(He))}finally{M(!1)}},[u,T]),Pe=()=>{f({}),O(null),G(null),p(null)},Ce=fe=>{O(null),fe&&f(Be=>{const le={...Be};return le.yearStem&&le.monthBranch&&(le.monthStem=p2(le.yearStem,le.monthBranch)),le}),_(fe)},Le=fe=>{O(null),fe&&f(Be=>{const le={...Be};if(le.dayStem&&le.hourBranch){const $e=sc(le.dayStem,T)[le.hourBranch];$e&&(le.hourStem=$e.slice(0,1))}return le}),S(fe)};if(!e)return null;const Ue=fe=>{if(O(null),k(fe),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const le=sc(u.dayStem,fe)[u.hourBranch];le&&f(he=>({...he,hourStem:le.slice(0,1)}))}};return g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(AA,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:y,onChange:fe=>Ce(fe.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:fe=>Le(fe.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Ue("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Ue("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:A==="male",onChange:()=>D("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:A==="female",onChange:()=>D("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),U&&!V&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""}),"  ."]}),g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([fe,Be])=>{const le=!V&&!(fe==="yearStem"||fe==="yearBranch"||fe==="dayStem"||fe==="dayBranch"),he=m===fe;return g.jsxs("button",{onClick:()=>!le&&p(fe),disabled:le,className:["border rounded p-2 text-center cursor-pointer",he?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",le?"opacity-50 cursor-not-allowed":""].join(" "),children:[Be,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:u[fe]??"-"})]},fe)})}),o&&o.length>0&&g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  :"}),g.jsx("div",{className:"flex gap-2",children:o.map(fe=>g.jsx("button",{onClick:()=>{let Be={...u,monthBranch:fe};l(null),Be=me(Be,"monthBranch"),f(Be),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:fe},fe))})]}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?g.jsxs("div",{className:"w-full",children:[P&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:Li..map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"stem",i)}`,children:fe},fe))})]}),Z&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:Li..filter(fe=>{const Be=ie(m),le=u[Be];return le?QI[fe]===JI[le]:!0}).map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"branch",i)}`,children:fe},fe))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!Me){oe(!0);return}Ee()},disabled:C,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:C?" ...":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:Pe,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>{if((H!==null?$?.filter((Be,le)=>le===H)??[]:[]).length===0){ye(!0);return}K()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:$?$.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:$.map((fe,Be)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Be}`,checked:H===Be,onChange:()=>F(Be)}),g.jsx("label",{htmlFor:`selectRow-${Be}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:fe.date}),g.jsx("td",{className:"p-1 text-center",children:fe.year}),g.jsx("td",{className:"p-1 text-center",children:fe.month}),g.jsx("td",{className:"p-1 text-center",children:fe.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:fe.hourSlots.map((le,he)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:le.branch})},he))})}),g.jsx("td",{className:"p-1 text-center",children:A==="male"?"":""})]},`${fe.date}-${Be}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),te&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:te})}),X&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),J&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",g.jsx("br",{})," ,  ."]})})]})})}const NA=pd(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function vm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),i=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const O=gr(t,n,i);t=O.getFullYear(),n=O.getMonth()+1,i=O.getDate()}const o=!e.birthTime||e.birthTime==="",l=o?4:Number(e.birthTime.slice(0,2)),u=o?30:Number(e.birthTime.slice(2,4)),f=new Date(t,n-1,i,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=cl(f,m,o),y=e.mingSikType??"/",_=ut(p,m),x=At(p,m),S=_t(p,y),T=o?null:Pi(p,y),k=Fe(_),A=Fe(x),D=Fe(S),$=T?Fe(T):"";return[k,A,D,$]}function OA(e){const t=new Date(e.corrected),n=vm(e),i=n[0].charAt(0),l=["","","","",""].includes(i),u=e.gender==="",f=u&&l||!u&&!l?"forward":"backward",m=wd(t,n[1],f,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const y=[];let _=Fe(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const S=new Date(p);if(S.setFullYear(S.getFullYear()+x*10),x>0){const T=m.events[x];T&&(_=Fe(T.gz))}y.push(`${S.getFullYear()} ${String(S.getMonth()+1).padStart(2,"0")} ${_}  `)}return y}const tz=!1,g2=e=>e<10?`0${e}`:`${e}`;function DA(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=gr(o,l,u,0,0),m=`${f.getFullYear()}${g2(f.getMonth()+1)}${g2(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const qu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},hd={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Df={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},nz=["","","","",""];function b2(e){return nz.includes(e)}const MA={:"",:"",:"",:"",:""},CA={:"",:"",:"",:"",:""},RA={:"",:"",:"",:"",:""},LA={:"",:"",:"",:"",:""};function Hb(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(qu[t])return qu[t];if(["","","","","","","","","","","",""].includes(t))return Df[t]??null;if(Zu[t])return Df[Zu[t]]??null;const n=t.charAt(0);return qu[n]?qu[n]:["","","","","","","","","",""].includes(n)?n:Zu[n]?Df[Zu[n]]??null:["","","","","","","","","","","",""].includes(n)?Df[n]??null:null}function rz(e,t){const n=hd[e],i=hd[t];if(!n||!i)return"";let o;i===n?o="":i===MA[n]?o="":i===CA[n]?o="":i===RA[n]?o="":i===LA[n]?o="":o="";const l=b2(e)===b2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function BA(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function iz(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=Hb(n);o&&(t[o]=(t[o]??0)+i)}return t}function sz(e){if(!e)return[];const t=Hb(e.charAt(0)),n=Hb(e.charAt(1));return[t,n].filter(Boolean)}function Mf(e){const t=sz(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function ai(e,t){return t===e?"":t===MA[e]?"":t===CA[e]?"":t===RA[e]?"":t===LA[e]?"":""}const az={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function oz(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),i=qu[t]??t,o=Zu[n]??n;return`${i}${o}`}function sr(e){const t=oz(e),n=az[t];return n?{...n,code:t}:null}function lz(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=hd[n];o&&(t[o]+=i)}return t}function cz(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e)){if(o<=0)continue;const l=rz(t,i);n[l]+=o}return n}function uz(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const dz={natal:50,dae:30,se:20,wol:7,il:3};function hz(e){const t={};for(const{kind:i,bare:o}of e){const l=dz[i]??0;if(l<=0)continue;const u=BA(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function es(e,t,n){const i=iz(e.perStemElementScaled),o=t!==""&&n?.dae?Mf(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Mf(n.se):{},u=(t===""||t==="")&&n?.wol?Mf(n.wol):{},f=t===""&&n?.il?Mf(n.il):{},m=hz([{kind:"natal",bare:i},{kind:"dae",bare:o},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:f}]),p=BA(m),y=lz(p),_=cz(p,e.dayStem),x=uz(_);return{perStemAugBare:p,elementPercent:y,totalsSub:_,totalsMain:x}}function fz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const eb=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Gb=e=>{if(Array.isArray(e)){const t=e.map(Gb).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||eb(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(eb(e)){const t={};for(const[n,i]of Object.entries(e)){const o=Gb(i);o!==void 0&&(Array.isArray(o)&&o.length===0||eb(o)&&Object.keys(o).length===0||(t[n]=o))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},mz=e=>{const t=Gb(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},si=(e,t)=>{const n=mz(t);return n?`## ${e}
${n}`:""};function pz(e){const{ms:t,natal:n,chain:i,basis:o,tab:l,unified:u,percent:f,category:m,topic:p,subTopic:y,relationMode:_,teacherMode:x}=e,S=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],T=OA(t).slice(0,10),k=pr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),A=Gr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),{shinsalEra:D,shinsalGaehwa:$,shinsalBase:O}=NA.getState(),C=O===""?S[0]?.charAt(1)??"":S[2]?.charAt(1)??"",M=es(u,l,i),G=M.elementPercent,H=M.totalsSub,{flags:F}=gA(S,u.elementScoreRaw),W=`${m} (${f.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`,ae=!t.birthTime||t.birthTime==="";function Q(B){const V=DA(B).birthDay??"",P=V.slice(0,4),Z=V.slice(4,6),ie=V.slice(6,8);let me="";if(B.corrected instanceof Date&&!isNaN(B.corrected.getTime())){const ce=String(B.corrected.getHours()).padStart(2,"0"),xe=String(B.corrected.getMinutes()).padStart(2,"0");me=ae?"":`${ce}:${xe}`}return`${P} ${Z} ${ie}  ${me}`}function Y(B,q){if(!q)return"()";const V=[];return(B===""||B===""||B===""||B==="")&&q.dae&&V.push(`:${Fe(q.dae)}`),(B===""||B===""||B==="")&&q.se&&V.push(`:${Fe(q.se)}`),(B===""||B==="")&&q.wol&&V.push(`:${Fe(q.wol)}`),B===""&&q.il&&V.push(`:${Fe(q.il)}`),V.length>0?V.join(" / "):"()"}const te=fz(S,t),re=u.dayStem,Se=hd[re],X=[` : ${t.name??""} (${Q(t)}) : ${t.gender}`,` ${S[0]} ${S[1]} ${S[2]}`+(S[3]?` ${S[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${Y(l,i)}`].join(`
`),oe=[];if(oe.push(si("  (10)",T)),oe.push(si("",W)),oe.push(si("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),l!==""&&oe.push(si(`(=${l})`,Object.fromEntries(Object.entries(G).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),oe.push(si(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&oe.push(si(` ( 10=${l} 100)`,H)),oe.push(si("(+ )",l===""?S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean):[...S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,unseong:Jt(S[2]?.charAt(0)??"",i.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,unseong:Jt(S[2]?.charAt(0)??"",i.se.charAt(1))}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,unseong:Jt(S[2]?.charAt(0)??"",i.wol.charAt(1))}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,unseong:Jt(S[2]?.charAt(0)??"",i.il.charAt(1))}]:[]].filter(Boolean))),oe.push(si("(+  )",l===""?S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,shinsal:Qt({baseBranch:C,targetBranch:B.charAt(1),era:D,gaehwa:$})}).filter(Boolean):[...S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,shinsal:Qt({baseBranch:C,targetBranch:B.charAt(1),era:D,gaehwa:$})}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,shinsal:Qt({baseBranch:C,targetBranch:i.dae.charAt(1),era:D,gaehwa:$})}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,shinsal:Qt({baseBranch:C,targetBranch:i.se.charAt(1),era:D,gaehwa:$})}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,shinsal:Qt({baseBranch:C,targetBranch:i.wol.charAt(1),era:D,gaehwa:$})}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,shinsal:Qt({baseBranch:C,targetBranch:i.il.charAt(1),era:D,gaehwa:$})}]:[]].filter(Boolean))),oe.push(si("(+ )",l===""?S.map((B,q)=>{if(!B||q>=te.length)return null;const V=sr(B);return V?{pos:te[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:te[q],gz:B,nabeum:null}}).filter(Boolean):[...S.map((B,q)=>{if(!B||q>=te.length)return null;const V=sr(B);return V?{pos:te[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:te[q],gz:B,nabeum:null}}).filter(Boolean),...i?.dae?(()=>{const B=sr(i.dae);return B?[{pos:"",gz:i.dae,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l===""||l==="")&&i?.se?(()=>{const B=sr(i.se);return B?[{pos:"",gz:i.se,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l==="")&&i?.wol?(()=>{const B=sr(i.wol);return B?[{pos:"",gz:i.wol,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...l===""&&i?.il?(()=>{const B=sr(i.il);return B?[{pos:"",gz:i.il,nabeum:B.name,element:B.element,code:B.code}]:[]})():[]].filter(Boolean))),oe.push(si("()",Wy(S.filter((B,q)=>q<te.length)))),oe.push(si("( :  )",k)),l===""){const B=Gr({natal:S,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:o});oe.push(si("( )",{good:B.good,bad:B.bad,meta:B.meta}))}else oe.push(si(`( =${l})`,A));const J=oe.filter(B=>B&&B.trim().length>0).join(`

`),ye=UA({topic:p,subTopic:y,timeMode:"single",tab:l,relationMode:_,teacherMode:x}),K=["-----","  ","","1.       (////)  .","2.  ,        ."];ye&&K.push("","  ( )",ye);const U=K.join(`
`);return[X,J,U].join(`

`)}function gz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const bz=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function tv(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function PA(e,t){const n=e[t],i=e[t+1];return i?tv(i):new Date(n.endYear+1,0,1)}function $A(e,t,n,i){return e<i&&t>n}function IA(e,t,n){const i=new Date(t,0,1),o=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=tv(f),p=PA(e,u);$A(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function y2(e,t){return IA(e,t,t)}function Cf(e,t,n){const i=new Date(t,n-1,1),o=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=tv(f),p=PA(e,u);$A(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function zA(e){const t=315569259747e-1,o=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(o);return new Date(l.getTime()+540*60*1e3)}function Rf(e,t){const n=[],i=new Date(e,t-1,15,0,0,0),o=new Date(e,t,1,15,0,0),l=zA(e),u=ut(new Date(e-1,5,15)),f=ut(new Date(e,5,15)),m=ut(new Date(e+1,5,15));if(o<=l)u&&n.push(Fe(u));else if(i>=l)f&&n.push(Fe(f));else if(u&&n.push(Fe(u)),f){const p=Fe(f);n.includes(p)||n.push(p)}if(t===12&&m){const p=Fe(m);n.includes(p)||n.push(p)}return n}function yz(e,t){const n=zA(e),i=new Date(e,t-1,1),o=[];return i<n&&o.push(e-1),i>=n&&o.push(e),t===12&&o.push(e+1),o}const ws=(e,t)=>{if(!e)return{};const n=t,i=f=>{if(!f)return;const m={};for(const[p,y]of Object.entries(f)){if(!Array.isArray(y))continue;const _=y.filter(x=>typeof x=="string"&&x.includes(n));_.length>0&&(m[p]=_)}if(Object.keys(m).length!==0)return m},o=i(e.good),l=i(e.bad),u={};return o&&(u.good=o),l&&(u.bad=l),u};function Fb(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Fb(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(bz(e)){const t={};for(const[n,i]of Object.entries(e)){const o=Fb(i);o!==void 0&&(t[n]=o)}return Object.keys(t).length>0?t:void 0}return e}}const vz=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),Zn=(e,t)=>{const n=Fb(t);if(n===void 0)return"";const i=vz(n);return i.trim()?`## ${e}
${i}`:""},Xs=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[i,o]of Object.entries(e)){if(!Array.isArray(o))continue;const l=Array.from(new Set(o.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[i]=l)}return n};function _z(e){const{ms:t,natal:n,basis:i,unified:o,percent:l,category:u,selectedDaeList:f,daeList:m,seYears:p,wolMonths:y,ilDays:_,topic:x,subTopic:S,teacherMode:T}=e,k=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],A=!t.birthTime||t.birthTime==="",D=gz(k,t),$=o.dayStem,O=hd[$],{shinsalEra:C,shinsalGaehwa:M,shinsalBase:G}=NA.getState(),H=G===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:F}=gA(k,o.elementScoreRaw),W=`${u} (${l.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`;function ae(J){const K=DA(J).birthDay??"",U=K.slice(0,4),B=K.slice(4,6),q=K.slice(6,8);let V="";if(J.corrected instanceof Date&&!isNaN(J.corrected.getTime())){const P=String(J.corrected.getHours()).padStart(2,"0"),Z=String(J.corrected.getMinutes()).padStart(2,"0");V=A?"":`${P}:${Z}`}return`${U} ${B} ${q}  ${V}`}const Q=[` : ${t.name??""} (${ae(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),Y=[];Y.push(Zn("",W)),Y.push(Zn("()",Object.fromEntries(Object.entries(o.natalFixed.elementPercent100).map(([J,ye])=>[`${J}(${ai(O,J)})`,ye])))),Y.push(Zn(" ( 10 100)",o.natalFixed.totalsSub)),Y.push(Zn("()",Wy(k.filter((J,ye)=>ye<D.length))));const te=Gr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});if(Y.push(Zn("()",{good:te.good,bad:te.bad,meta:te.meta})),Y.push(Zn("()",k.map((J,ye)=>{if(!J||ye>=D.length)return null;const K=sr(J);return K?{pos:D[ye],gz:J,nabeum:K.name,element:K.element,code:K.code}:{pos:D[ye],gz:J,nabeum:null}}).filter(Boolean))),Y.push(Zn("()",k.map((J,ye)=>!J||ye>=D.length?null:{pos:D[ye],gz:J,unseong:Jt(k[2]?.charAt(0)??"",J.charAt(1))}).filter(Boolean))),Y.push(Zn("()",k.map((J,ye)=>!J||ye>=D.length?null:{pos:D[ye],gz:J,shinsal:Qt({baseBranch:H,targetBranch:J.charAt(1),era:C,gaehwa:M})}).filter(Boolean))),m.length>0)for(const J of f){const ye={dae:J.gz,se:null,wol:null,il:null},K=es(o,"",ye),U=pr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),B=Gr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),q=sr(J.gz),V=Jt(k[2]?.charAt(0)??"",J.gz.charAt(1)),P=Qt({baseBranch:H,targetBranch:J.gz.charAt(1),era:C,gaehwa:M});Y.push(Zn(`${J.age} ${J.gz} (${J.startYear}~${J.endYear})`,{:Object.fromEntries(Object.entries(K.elementPercent).map(([Z,ie])=>[`${Z}(${ai(O,Z)})`,ie])),:K.totalsSub,:U,:ws(B,""),:q?{gz:J.gz,nabeum:q.name,element:q.element,code:q.code}:null,:{pos:"",gz:J.gz,unseong:V},:{pos:"",gz:J.gz,shinsal:P}}))}if(p.length>0){const J=p[0],ye=p[p.length-1],K=IA(m,J,ye);if(K.length>0){const U=J,B=ut(new Date(U,5,15)),q=Fe(B||""),V={:K.map(P=>{const Z={dae:P.gz,se:q||null,wol:null,il:null},ie=es(o,"",Z),me=pr({natal:k,daewoon:P.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Gr({natal:k,daewoon:P.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),xe=sr(P.gz),ke=Jt(k[2]?.charAt(0)??"",P.gz.charAt(1)),je=Qt({baseBranch:H,targetBranch:P.gz.charAt(1),era:C,gaehwa:M});return{:`${P.age} ${P.gz} (${P.startYear}~${P.endYear})`,:P.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(O,Me)})`,Ee])),:ie.totalsSub,:Xs(me,""),:ws(ce,""),:xe?{gz:P.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:P.gz,unseong:ke},:{pos:"",gz:P.gz,shinsal:je}}})};Y.push(Zn("",V))}for(const U of p){const B=ut(new Date(U,5,15)),q=y2(m,U),V=q.length>0?q[0]:null,P={dae:V?V.gz:null,se:Fe(B||""),wol:null,il:null},Z=es(o,"",P),ie=pr({natal:k,daewoon:V?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0}),me=Gr({natal:k,daewoon:V?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0,basis:i}),ce=sr(Fe(B||"")),xe=Jt(k[2]?.charAt(0)??"",(B||"").charAt(1)),ke=Qt({baseBranch:H,targetBranch:(B||"").charAt(1),era:C,gaehwa:M}),je={:{:`${U} ${Fe(B||"")}`,:Fe(B||""),:Object.fromEntries(Object.entries(Z.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(O,Me)})`,Ee])),:Z.totalsSub,:Xs(ie,""),:ws(me,""),:ce?{gz:Fe(B||""),nabeum:ce.name,element:ce.element,code:ce.code}:null,:{pos:"",gz:Fe(B||""),unseong:xe},:{pos:"",gz:Fe(B||""),shinsal:ke}}};Y.push(Zn(` ${U}`,je))}}if(y.length>0){const J=[],ye=new Map;for(const V of y){const[P,Z]=V.split("-").map(Number);Cf(m,P,Z).forEach(xe=>{J.some(ke=>ke.gz===xe.gz&&ke.startYear===xe.startYear)||J.push(xe)});const me=yz(P,Z);Rf(P,Z).forEach((xe,ke)=>{const je=me[ke]??me[me.length-1];ye.has(xe)||ye.set(xe,{year:je,month:Z})})}const[K]=y[0].split("-").map(Number),U=ut(new Date(K,5,15)),B=Fe(U||"");if(J.length>0){const V={:J.map(P=>{const Z={dae:P.gz,se:B||null,wol:null,il:null},ie=es(o,"",Z),me=pr({natal:k,daewoon:P.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Gr({natal:k,daewoon:P.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),xe=sr(P.gz),ke=Jt(k[2]?.charAt(0)??"",P.gz.charAt(1)),je=Qt({baseBranch:H,targetBranch:P.gz.charAt(1),era:C,gaehwa:M});return{:`${P.age} ${P.gz} (${P.startYear}~${P.endYear})`,:P.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(O,Me)})`,Ee])),:ie.totalsSub,:Xs(me,""),:ws(ce,""),:xe?{gz:P.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:P.gz,unseong:ke},:{pos:"",gz:P.gz,shinsal:je}}})};Y.push(Zn("",V))}const q=Array.from(ye.keys());if(q.length>0){const V={:q.map(P=>{const ie=ye.get(P).year,ce=y2(m,ie)[0]??J[0]??null,xe={dae:ce?ce.gz:null,se:P,wol:null,il:null},ke=es(o,"",xe),je=pr({natal:k,daewoon:ce?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0}),Me=Gr({natal:k,daewoon:ce?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0,basis:i}),Ee=sr(P),Pe=Jt(k[2]?.charAt(0)??"",P.charAt(1)),Ce=Qt({baseBranch:H,targetBranch:P.charAt(1),era:C,gaehwa:M});return{:`${ie} ${P}`,:P,:Object.fromEntries(Object.entries(ke.elementPercent).map(([Le,Ue])=>[`${Le}(${ai(O,Le)})`,Ue])),:ke.totalsSub,:Xs(je,""),:ws(Me,""),:Ee?{gz:P,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:P,unseong:Pe},:{pos:"",gz:P,shinsal:Ce}}})};Y.push(Zn("",V))}for(const V of y){const[P,Z]=V.split("-").map(Number),ie=new Date(P,Z-1,15),me=At(ie),ce=Cf(m,P,Z),xe=ce.length>0?ce[0]:null,ke=Rf(P,Z),je=ke.length>0?ke[ke.length-1]:"",Me={dae:xe?xe.gz:null,se:je||null,wol:Fe(me||""),il:null},Ee=es(o,"",Me),Pe=pr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:Fe(me||""),ilwoon:void 0}),Ce=Gr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:Fe(me||""),ilwoon:void 0,basis:i}),Le=sr(Fe(me||"")),Ue=Jt(k[2]?.charAt(0)??"",(me||"").charAt(1)),fe=Qt({baseBranch:H,targetBranch:(me||"").charAt(1),era:C,gaehwa:M}),Be={:{:`${V} ${Fe(me||"")}`,:Fe(me||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([le,he])=>[`${le}(${ai(O,le)})`,he])),:Ee.totalsSub,:Xs(Pe,""),:ws(Ce,""),:Le?{gz:Fe(me||""),nabeum:Le.name,element:Le.element,code:Le.code}:null,:{pos:"",gz:Fe(me||""),unseong:Ue},:{pos:"",gz:Fe(me||""),shinsal:fe}}};Y.push(Zn(` ${V}`,Be))}}if(_.length>0){const J=t.mingSikType??"/",[ye,K,U]=_[0].split("-").map(Number),B=new Date(ye,K-1,U,4,0);if(!isNaN(B.getTime())){const q=Cf(m,ye,K),V=q.length>0?q[0]:null,P=Rf(ye,K),Z=P.length>0?P[P.length-1]:"",ie=At(new Date(ye,K-1,15)),me=_t(B,J),ce=Fe(ie||""),xe=Fe(Z||""),ke=Fe(me||"");if(V){const je={dae:V.gz,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=pr({natal:k,daewoon:V.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=sr(V.gz),Le=Jt(k[2]?.charAt(0)??"",V.gz.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:V.gz.charAt(1),era:C,gaehwa:M});Y.push(Zn("",{:`${V.age} ${V.gz} (${V.startYear}~${V.endYear})`,:V.gz,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Be])=>[`${fe}(${ai(O,fe)})`,Be])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:V.gz,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:V.gz,unseong:Le},:{pos:"",gz:V.gz,shinsal:Ue}}))}if(xe){const je={dae:V?V.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=pr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=sr(xe),Le=Jt(k[2]?.charAt(0)??"",xe.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:xe.charAt(1),era:C,gaehwa:M});Y.push(Zn("",{:`${ye} ${xe}`,:xe,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Be])=>[`${fe}(${ai(O,fe)})`,Be])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:xe,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:xe,unseong:Le},:{pos:"",gz:xe,shinsal:Ue}}))}if(ce){const je={dae:V?V.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=pr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=sr(ce),Le=Jt(k[2]?.charAt(0)??"",ce.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:ce.charAt(1),era:C,gaehwa:M});Y.push(Zn("",{:`${ye}-${String(K).padStart(2,"0")} ${ce}`,:ce,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Be])=>[`${fe}(${ai(O,fe)})`,Be])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:ce,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:ce,unseong:Le},:{pos:"",gz:ce,shinsal:Ue}}))}}for(const q of _){const[V,P,Z]=q.split("-").map(Number),ie=new Date(V,P-1,Z,4,0);if(isNaN(ie.getTime()))continue;const me=Cf(m,V,P),ce=me.length>0?me[0]:null,xe=Rf(V,P),ke=xe.length>0?xe[xe.length-1]:"",je=At(new Date(V,P-1,15)),Me=_t(ie,J),Ee=Fe(je||""),Pe=Fe(ke||""),Ce=Fe(Me||""),Le={dae:ce?ce.gz:null,se:Pe||null,wol:Ee,il:Ce},Ue=es(o,"",Le),fe=pr({natal:k,daewoon:ce?.gz,sewoon:Pe||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0}),Be=Gr({natal:k,daewoon:ce?.gz,sewoon:Pe||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0,basis:i}),le=sr(Ce),he=Jt(k[2]?.charAt(0)??"",Ce.charAt(1)),$e=Qt({baseBranch:H,targetBranch:Ce.charAt(1),era:C,gaehwa:M}),Ie={:{:`${q} ${Ce}`,:Ce,:Object.fromEntries(Object.entries(Ue.elementPercent).map(([He,st])=>[`${He}(${ai(O,He)})`,st])),:Ue.totalsSub,:Xs(fe,""),:ws(Be,""),:le?{gz:Ce,nabeum:le.name,element:le.element,code:le.code}:null,:{pos:"",gz:Ce,unseong:he},:{pos:"",gz:Ce,shinsal:$e}}};Y.push(Zn(` ${q}`,Ie))}}const re=Y.filter(J=>J.trim().length>0).join(`

`),Se=UA({topic:x,subTopic:S,timeMode:"single",teacherMode:T}),X=["-----","  ","","1.       (////)  .","2.  ,        ."];Se&&X.push("","  ( )",Se);const oe=X.join(`
`);return[Q,re,oe].join(`

`)}function UA(e){const{topic:t,subTopic:n,timeMode:i="single",tab:o,relationMode:l,teacherMode:u}=e;if(!t)return"";const f=[];switch(u===!0?f.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):f.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),i==="single"?o?f.push(`-    (${o})   ,         .`,"-   ,             ."):f.push("-    ,          ."):f.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{f.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&f.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&f.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&f.push("-    ,   ,       /    ."),n==="personality_workStyle"&&f.push("-     ,     /      ."),n==="personality_stressPattern"&&f.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{f.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&f.push("-       ,        .");break}case"love":{f.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&f.push("-      ,     ,       ."),n==="love_timing"&&f.push("-     ,    ,       ."),n==="love_partner"&&f.push("-    ,        ."),n==="love_current"&&f.push("-       ,     ,     ."),n==="love_breakup"&&f.push("- /   ,      ,     ."),n==="love_marriageChange"&&f.push("-          ."),l==="solo"?f.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&f.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{f.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&f.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&f.push("-   (: , ,  ,  )    ."),n==="career_mode"&&f.push("- , , ,        ."),n==="career_jobChange"&&f.push("- /   ,    ,    ."),n==="career_promotion"&&f.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&f.push("- /   ,        .");break}case"money":{f.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&f.push("-   ( ,  ,  )   ."),n==="money_income"&&f.push("- , ,        ( , ,  )  ."),n==="money_spending"&&f.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&f.push("-   ,        ,   ."),n==="money_debt"&&f.push("- /      ,       ."),n==="money_invest"&&f.push("- /   ,          ."),n==="money_bigEvent"&&f.push("- , ,         ,      .");break}case"family":{f.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&f.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&f.push("-     (, ,  )     ."),n==="family_siblings"&&f.push("-   (  , / ) ."),n==="family_children"&&f.push("-   ,            .");break}case"health":{f.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&f.push("-   (:   /     )   ."),n==="health_physical"&&f.push("-    (, ,   )   ."),n==="health_mental"&&f.push("-    (, ,  ) ,        ."),n==="health_stress"&&f.push("-      ,      ."),n==="health_accident"&&f.push("- /   ,    ,   (, ,  )  .");break}case"move":{f.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&f.push("-    ,         ."),n==="move_timing"&&f.push("-    ,           ."),n==="move_targetHouse"&&f.push("-     ,   ,      ,      ."),n==="move_environment"&&f.push("- / (, ,  )     ."),n==="move_finance"&&f.push("- //      ,       .");break}case"social":{f.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&f.push("-       ."),n==="social_friend"&&f.push("-      ,      ."),n==="social_workspace"&&f.push("-      (, ,  ) ."),n==="social_network"&&f.push("-   (  vs   )    ,    ."),n==="social_conflict"&&f.push("-    ,  ,      ,    .");break}case"compat":{f.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&f.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&f.push("- /  ,  ,        ."),n==="compat_work"&&f.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&f.push("- /       ,       .");break}case"risk":{f.push("-   /   .","-  ,        ."),(!n||n==="overview")&&f.push("- , , ,           ."),n==="risk_money"&&f.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&f.push("-      (, ,   )  ."),n==="risk_health"&&f.push("- /  ,        ."),n==="risk_lawsuit"&&f.push("-  //     ,         ."),n==="risk_burnout"&&f.push("- /    ,          .");break}case"meta":{f.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&f.push("-     / ,     ."),n==="meta_cycle"&&f.push("- /   ,     ."),n==="meta_trigger"&&f.push("- , ,           ,   ."),n==="meta_usage"&&f.push("-         ,        .");break}}return f.join(`
`)}function xz({date:e,onChange:t,min:n="1900-01-01",max:i="2100-12-31"}){const o=R.useMemo(()=>{const u=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${f}-${m}`},[e]),l=u=>{if(!u)return;const[f,m,p]=u.split("-"),y=Number(f),_=Number(m),x=Number(p),S=e.getHours(),T=e.getMinutes(),k=new Date(y,_,0).getDate(),A=Math.min(x,k),D=new Date(y,_-1,A,S,T);Number.isNaN(D.getTime())||t(D)};return g.jsx("input",{type:"date",value:o,onChange:u=>l(u.target.value),min:n,max:i,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const tb={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},wz=["","","","",""],HA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},GA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v2={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},_2={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function ac(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=HA[i[1]],l=GA[i[2]];return o&&l?`${o}${l}`:""}return""}function x2(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function w2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${HA[u[1]]}${GA[u[2]]}`:i<=2?"--":""})}function Sz({ms:e,natal:t,chain:n,basis:i,lunarPillars:o,includeTenGod:l=!1}){const[u,f]=R.useState("analysis"),[m,p]=R.useState(!1),[y,_]=R.useState(!1),[x,S]=R.useState(()=>new Date),{list:T,currentId:k}=ss.getState(),[A,D]=R.useState(""),[$,O]=R.useState("personality"),[C,M]=R.useState("overview"),G=R.useMemo(()=>A?T.find(pe=>pe.id===A)??null:null,[A,T]),[H,F]=R.useState(""),[W,ae]=R.useState("solo");R.useEffect(()=>{$!=="love"&&$!=="compat"&&(ae("solo"),D(""))},[$]);const[Q,Y]=R.useState(!1),[te,re]=R.useState(""),[Se,X]=R.useState([]),[oe,J]=R.useState(new Date().getFullYear()),[ye,K]=R.useState(new Date().getFullYear()),[U,B]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[q,V]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[P,Z]=R.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),[ie,me]=R.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),ce=1e3*60*60*24;function xe(pe,Ye){return(Ye.getFullYear()-pe.getFullYear())*12+(Ye.getMonth()-pe.getMonth())}function ke(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}function je(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}-${String(pe.getDate()).padStart(2,"0")}`}const Me=pe=>{J(pe)},Ee=pe=>{K(pe)},Pe=()=>{const pe=oe;let Ye=ye;Ye<pe&&(Ye=pe),Ye-pe>9&&(Ye=pe+9),K(Ye)},Ce=()=>{let pe=oe;const Ye=ye;Ye<pe&&(pe=Ye),Ye-pe>9&&(pe=Ye-9),J(pe)},Le=pe=>{B(pe)},Ue=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){V(ke(tt));return}if(xe(tt,dt)>11){const mt=new Date(tt);mt.setMonth(tt.getMonth()+11),V(ke(mt))}},fe=pe=>{V(pe)},Be=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){B(ke(dt));return}if(xe(tt,dt)>11){const mt=new Date(dt);mt.setMonth(dt.getMonth()-11),B(ke(mt))}},le=pe=>{Z(pe)},he=()=>{if(!P||!ie)return;const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(mt<xt){me(je(xt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(xt);wt.setDate(xt.getDate()+6),me(je(wt))}},$e=pe=>{me(pe)},Ie=()=>{if(!P||!ie)return;const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(xt>mt){Z(je(mt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(mt);wt.setDate(mt.getDate()-6),Z(je(wt))}},He=e.mingSikType??"/",st=R.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const pe=x??new Date,Ye=ac(ut(pe)||""),lt=ac(At(pe)||""),pt=ac(_t(pe,He)||"");return{dae:null,se:Ye||null,wol:lt||null,il:pt||null}},[n,x,He]),et=yd.getState().manualHour,Zt=R.useMemo(()=>w2(t),[t]),En=R.useMemo(()=>w2(o),[o]),Tn=R.useMemo(()=>{const pe=[...Zt];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[Zt,et]),or=R.useMemo(()=>{const pe=[...En];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[En,et]),vr=R.useMemo(()=>{const pe=Number(e.birthDay?.slice(0,4)),Ye=Number(e.birthDay?.slice(4,6)),lt=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(pe)||!Number.isFinite(Ye)||!Number.isFinite(lt))return null;const pt=new Date(pe,Ye-1,lt,12,4,0,0),tt=ac(ut(pt)||""),dt=ac(At(pt)||""),xt=ac(_t(pt,He)||"");return[tt,dt,xt,""]},[e.birthDay,He]),dn=x2(Tn),Mt=x2(or),[bn]=R.useState("solar"),hn=bn==="lunar"?Mt?"lunar":dn?"solar":"lunar":dn?"solar":Mt?"lunar":"solar",qr=R.useMemo(()=>{const Ye=[...hn==="lunar"?Mt?or:dn?Tn:vr??["","","",""]:dn?Tn:Mt?or:vr??["","","",""]];return(!Ye[3]||Ye[3]==="")&&et&&(Ye[3]=et.stem+et.branch),Ye},[hn,dn,Mt,Tn,or,vr,et]),ra=R.useMemo(()=>et?et.stem+et.branch:qr[3]||"",[et,qr]);(!t||t.length===0)&&(t=vm(e));const zi=et?et.stem+et.branch:"",kn=R.useMemo(()=>{const pe=vm(e);return zi&&zi.length===2&&(pe[3]=zi),pe},[e,zi]),Dn=R.useMemo(()=>vA({natal:kn,tab:H,chain:st,hourKey:ra}),[kn,H,st,ra]);function os(pe){return yA(pe,{criteriaMode:"modern",useHarmonyOverlay:!0})}const Nr=os(kn),lr=R.useMemo(()=>Iy(Nr),[Nr]),pi=R.useMemo(()=>Yk(lr),[lr]),ia=R.useMemo(()=>{const pe=OA(e).slice(0,10),Ye=e.birthDay?Number(e.birthDay.slice(0,4)):0;return pe.map((lt,pt)=>{const tt=lt.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),dt=tt?Number(tt[1]):0,xt=tt?Number(tt[2]):1,mt=1,In=tt?tt[3]:"",wt=Ye>0?Ez(Ye,dt):pt*10;return{gz:In,age:wt,startYear:dt,startMonth:xt,startDay:mt,endYear:dt+10}})},[e]),Qa=_2[$],eo=R.useMemo(()=>e?pz({ms:e,natal:kn,chain:st,basis:i,tab:H,unified:Dn,percent:lr,category:pi,topic:$,subTopic:C,relationMode:W,teacherMode:y}):"",[e,i,l,H,st,Dn,lr,pi,kn,$,C,W,G,y]),Ui=R.useMemo(()=>{if(!e||!Q)return"";const pe=Se.map(tt=>ia[tt]).filter(tt=>tt),Ye=te===""?(()=>{const tt=[];for(let dt=oe;dt<=ye&&tt.length<10;dt++)tt.push(dt);return tt})():[],lt=te===""?(()=>{const tt=[],[dt,xt]=U.split("-").map(Number),[mt,In]=q.split("-").map(Number),wt=new Date(dt,xt-1),aa=new Date(mt,In-1);for(;wt<=aa&&tt.length<12;)tt.push(`${wt.getFullYear()}-${String(wt.getMonth()+1).padStart(2,"0")}`),wt.setMonth(wt.getMonth()+1);return tt})():[],pt=te===""?(()=>{const tt=[],[dt,xt,mt]=P.split("-").map(Number),[In,wt,aa]=ie.split("-").map(Number),io=new Date(dt,xt-1,mt,4,0,0),bi=new Date(In,wt-1,aa,4,0,0);if(isNaN(io.getTime())||isNaN(bi.getTime()))return tt;const Xn=new Date(io);for(;Xn<=bi&&tt.length<31;){const As=Xn.getFullYear(),so=String(Xn.getMonth()+1).padStart(2,"0"),ao=String(Xn.getDate()).padStart(2,"0");tt.push(`${As}-${so}-${ao}`),Xn.setDate(Xn.getDate()+1)}return tt})():[];return _z({ms:e,natal:kn,basis:i,unified:Dn,percent:lr,category:pi,selectedDaeList:pe,daeList:ia,seYears:Ye,wolMonths:lt,ilDays:pt,topic:$,subTopic:C,teacherMode:y})},[e,Q,te,Se,ia,oe,ye,U,q,P,ie,kn,i,l,Dn,lr,pi,$,C,W,G,y]),to=R.useMemo(()=>{if(W!=="couple"||!G)return"";const pe=G.name||"";let Ye="";if(G.birthDay&&G.birthDay.length===8){const dt=G.birthDay.slice(0,4),xt=G.birthDay.slice(4,6),mt=G.birthDay.slice(6,8);Ye=`${dt}-${xt}-${mt}`}else G.birthDay&&(Ye=G.birthDay);let lt="";if(G.birthTime&&G.birthTime.trim().length>0){const xt=G.birthTime.trim().padEnd(4,"0").slice(0,4),mt=xt.slice(0,2),In=xt.slice(2,4);lt=`${mt}:${In}`}let pt="";G.birthPlace&&typeof G.birthPlace=="object"&&(pt=G.birthPlace.name||"");const tt=G.ganji||G.ganjiText||"";return["","","[  - () ]"," ",`-  : ${pe}`,`-  : ${Ye}`,`-   : ${lt}`,`-   : ${pt}`,`- ${tt}`,""," //,       ,","           .",""].join(`
`)},[W,G]),sa=Q?Ui:eo,no=R.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),ro=m?`   ,   .
`:"",$n=R.useMemo(()=>sa||to?`${sa}${to}
${no}${ro}`:"",[no,ro,sa,to]),[Ve,ks]=R.useState(""),[Or,cr]=R.useState([]);R.useEffect(()=>{ks(""),cr([])},[e.id]);const sn=R.useMemo(()=>{if(!$n)return"";if(Or.length===0)return $n;const pe=["","-----","     ","",...Or.map((Ye,lt)=>`${lt+1}. ${Ye}`)];return`${$n}
${pe.join(`
`)}`},[$n,Or]),[An,Zr]=R.useState(!1);async function gi(){if(sn)try{await navigator.clipboard.writeText(sn),Zr(!0),setTimeout(()=>Zr(!1),1200)}catch{Zr(!1)}}return e?g.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),g.jsx("button",{onClick:gi,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${An?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:An?"!":" "})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),g.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(tb).map(pe=>g.jsx("button",{onClick:()=>f(pe),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:tb[pe].label},pe))}),g.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:tb[u].desc}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:pe=>p(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:y,onChange:pe=>_(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),g.jsx("select",{value:$,onChange:pe=>{const Ye=pe.target.value;O(Ye);const lt=_2[Ye];lt.length>0?M(lt[0].key):M("overview"),Ye!=="love"&&Ye!=="compat"&&ae("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(v2).map(pe=>{const Ye=v2[pe];return g.jsx("option",{value:pe,children:Ye.label},pe)})}),Qa.length>0&&g.jsx("select",{value:C,onChange:pe=>M(pe.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Qa.map(pe=>g.jsx("option",{value:pe.key,children:pe.label},pe.key))})]}),($==="love"||$==="compat")&&g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>ae("solo"),className:`px-3 py-1 cursor-pointer ${W==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>ae("couple"),className:`px-3 py-1 cursor-pointer ${W==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),W==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:A,onChange:pe=>D(pe.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:"  "}),T.filter(pe=>pe.id!==k).map(pe=>g.jsxs("option",{value:pe.id,children:[pe.name||" "," ",pe.birthDay?`(${pe.birthDay})`:""]},pe.id))]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Y(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsx("button",{onClick:()=>Y(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!Q&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:wz.map(pe=>g.jsx("button",{onClick:()=>F(pe),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${H===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:pe},pe))}),g.jsx(xz,{date:x,onChange:S})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"     ."}),g.jsx("p",{children:"  ,  ."}),g.jsx("p",{children:"   ,   ."})]})]}),Q&&g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(pe=>g.jsx("button",{onClick:()=>re(pe),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${te===pe?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:pe},pe))}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:ia.map((pe,Ye)=>g.jsxs("button",{onClick:()=>{X(lt=>lt.includes(Ye)?lt.filter(pt=>pt!==Ye):[...lt,Ye])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${Se.includes(Ye)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:pe.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[pe.age," (",pe.startYear,"~",pe.endYear,")"]})]},Ye))})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",value:oe,onChange:pe=>Me(Number(pe.target.value)),onBlur:Pe,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:ye,onChange:pe=>Ee(Number(pe.target.value)),onBlur:Ce,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",ye-oe+1,""]})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"month",value:U,onChange:pe=>Le(pe.target.value),onBlur:Ue,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:q,onChange:pe=>fe(pe.target.value),onBlur:Be,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number);return(lt-pe)*12+(pt-Ye)+1})(),""]})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"date",value:P,onChange:pe=>le(pe.target.value),onBlur:he,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:ie,onChange:pe=>$e(pe.target.value),onBlur:Ie,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);return isNaN(xt.getTime())||isNaN(mt.getTime())||mt<xt?0:Math.floor((mt.getTime()-xt.getTime())/ce)+1})(),""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",te,"   ."]}),g.jsx("p",{children:"    ."})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Or.length>0&&g.jsx("button",{type:"button",onClick:()=>cr([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:Ve,onChange:pe=>ks(pe.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:()=>{const pe=Ve.trim();pe&&(cr(Ye=>[...Ye,pe]),ks(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Or.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Or.length,""]})]}),Or.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Or.map((pe,Ye)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[Ye+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:pe}),g.jsx("button",{type:"button",onClick:()=>{cr(lt=>lt.filter((pt,tt)=>tt!==Ye))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},Ye))})]}),g.jsx("textarea",{readOnly:!0,value:sn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function Ez(e,t){return t-e+1}function Tz(e){const t=fi(o=>o.date),n=fi(o=>o.rule),i=Sd(e);return R.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const o=Fm(i,t),l=o>=0?i[o]?.gz??null:null,u=ut(t),f=At(t),m=_t(t,n);return{dae:l,se:u,wol:f,il:m}},[e,i,t,n])}function kz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(!1);R.useEffect(()=>{setTimeout(()=>t(!0),50),setTimeout(()=>i(!0),250),setTimeout(()=>l(!0),450)},[]);const y=async()=>{if(!m){alert("     .");return}const{error:_}=await qt.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});_&&(console.error("Google Login Error:",_),alert("   ."))};return g.jsxs("main",{className:`flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4 transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:`transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} absolute top-16 text-center`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:""}),g.jsx("p",{className:"text-sm text-neutral-400",children:"    "})]}),g.jsxs("div",{className:`w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800 transition-all duration-500 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,children:[g.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"     "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:m,onChange:()=>p(!m),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>f(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("button",{type:"button",onClick:y,disabled:!m,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all cursor-pointer 
            ${m?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98]":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]})]}),u&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>f(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:_=>_.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>f(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})})]})}const Az={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function jz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=ss(f=>f.migrateLocalToServer),l=ss(f=>f.loadFromServer),u=ss(f=>f.loading);return R.useEffect(()=>{const f=qt;(async()=>{const{data:y,error:_}=await f.auth.getSession();if(_){i(!1),t(!0);return}i(!!y.session),t(!0)})();const{data:{subscription:p}}=f.auth.onAuthStateChange((y,_)=>{i(!!_),t(!0)});return()=>{p.unsubscribe()}},[]),R.useEffect(()=>{n&&(async()=>(await o(),await l()))()},[n,o,l]),e?n?u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(Nz,{isLoggedIn:n}):g.jsx(kz,{}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"   ..."})})}function Nz({isLoggedIn:e}){const{list:t}=ss(),[n,i]=R.useState(()=>t.length>0?t[0].id:""),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(null),[y,_]=R.useState(!1),[x,S]=R.useState(!1),[T,k]=R.useState(!1);R.useEffect(()=>{_(!0),S(!1)},[]);const A=R.useMemo(()=>t.find(re=>re.id===n)??t[0],[t,n]),D=t.length>0&&!!A&&typeof A.birthDay=="string",$=D?A:Az,O=R.useMemo(()=>vm($),[$]),C=Tz($),M=re=>typeof re=="string"&&re.length>=2,G=re=>Array.isArray(re)&&re.length===4&&re.every(M),H=()=>l(!0),{settings:F,loadFromServer:W,saveToServer:ae,loaded:Q}=yr();R.useEffect(()=>{e&&W()},[e,W]),R.useEffect(()=>{!e||!Q||ae()},[e,Q,F,ae]);const Y=F.sinsalBase===""?"day":"year",te=F.sinsalBase===""?"day":"year";return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(cI,{onOpenSidebar:()=>f(!0),onAddNew:H,onOpenCustom:()=>k(!0)}),g.jsx(ez,{open:T,onClose:()=>k(!1),onSave:re=>{i(re.id),_(!1),S(!1),f(!1)}}),g.jsx(nO,{position:"top-center"}),g.jsx(xI,{open:u,onClose:()=>f(!1),onView:re=>{i(re.id),f(!1),_(!1),S(!1);const Se=new Date;Se.setHours(12,0,0,0),fi.getState().setDate(Se),D&&A.id===re.id?(_(!1),S(!1),f(!1)):(i(re.id),f(!1),_(!1),S(!1))},onAddNew:H,onEdit:re=>{p(re),i(re.id),f(!1),_(!1),S(!1)},onDeleteView:()=>{const re=ss.getState().list[0]?.id??"";i(re),_(!0),S(!1)}}),y&&g.jsx(iC,{}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(n7,{onSave:re=>{i(re.id),_(!1),S(!1),f(!1),requestAnimationFrame(()=>l(!1))},onClose:()=>l(!1)})})})]}),D&&!y&&!x&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(p4,{data:A,hourTable:A.mingSikType??"/"})}),g.jsx(FI,{ms:A}),g.jsx("div",{children:g.jsx(L8,{data:A})}),g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(Sz,{ms:A,natal:G(O)?O:[],chain:C,basis:{voidBasis:Y,samjaeBasis:te},includeTenGod:!0,lunarPillars:[]})})]}),x&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(HI,{people:t})}),m&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(jI,{item:m,onClose:()=>{p(null)}})})}),g.jsx(mI,{onShowToday:()=>{_(!0),S(!1)},onShowCouple:()=>{S(!0),_(!1)}}),g.jsx(GI,{})]})}mN.createRoot(document.getElementById("root")).render(g.jsx(R.StrictMode,{children:g.jsx(jz,{})}));
