function VE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Si(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wp(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var W_={exports:{}},qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eM;function bY(){if(eM)return qh;eM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return qh.Fragment=t,qh.jsx=n,qh.jsxs=n,qh}var tM;function yY(){return tM||(tM=1,W_.exports=bY()),W_.exports}var g=yY();const c$="harim.theme",Lk="harim.settings.v1";function u$(){try{const e=localStorage.getItem(c$);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(Lk);if(t){const r=JSON.parse(t)?.theme;if(r==="dark"||r==="light")return r}return null}catch{return null}}function d$(e){try{localStorage.setItem(c$,e);const t=localStorage.getItem(Lk),n=t?JSON.parse(t):{};localStorage.setItem(Lk,JSON.stringify({...n,theme:e}))}catch{}}function f$(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=u$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");f$(e)}catch{}})();var V_={exports:{}},Kh={},Z_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nM;function vY(){return nM||(nM=1,(function(e){function t(G,J){var Q=G.length;G.push(J);e:for(;0<Q;){var oe=Q-1>>>1,le=G[oe];if(0<i(le,J))G[oe]=J,G[Q]=le,Q=oe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Q=G.pop();if(Q!==J){G[0]=Q;e:for(var oe=0,le=G.length,z=le>>>1;oe<z;){var K=2*(oe+1)-1,ne=G[K],re=K+1,ce=G[re];if(0>i(ne,Q))re<le&&0>i(ce,ne)?(G[oe]=ce,G[re]=Q,oe=re):(G[oe]=ne,G[K]=Q,oe=K);else if(re<le&&0>i(ce,Q))G[oe]=ce,G[re]=Q,oe=re;else break e}}return J}function i(G,J){var Q=G.sortIndex-J.sortIndex;return Q!==0?Q:G.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,b=3,y=!1,k=!1,w=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function C(G){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=G)r(d),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(d)}}function M(G){if(w=!1,C(G),!k)if(n(u)!==null)k=!0,P||(P=!0,B());else{var J=n(d);J!==null&&X(M,J.startTime-G)}}var P=!1,I=-1,U=5,V=-1;function q(){return _?!0:!(e.unstable_now()-V<U)}function H(){if(_=!1,P){var G=e.unstable_now();V=G;var J=!0;try{e:{k=!1,w&&(w=!1,O(I),I=-1),y=!0;var Q=b;try{t:{for(C(G),p=n(u);p!==null&&!(p.expirationTime>G&&q());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,b=p.priorityLevel;var le=oe(p.expirationTime<=G);if(G=e.unstable_now(),typeof le=="function"){p.callback=le,C(G),J=!0;break t}p===n(u)&&r(u),C(G)}else r(u);p=n(u)}if(p!==null)J=!0;else{var z=n(d);z!==null&&X(M,z.startTime-G),J=!1}}break e}finally{p=null,b=Q,y=!1}J=void 0}}finally{J?B():P=!1}}}var B;if(typeof j=="function")B=function(){j(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=H,B=function(){Z.postMessage(null)}}else B=function(){T(H,0)};function X(G,J){I=T(function(){G(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(G){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var Q=b;b=J;try{return G()}finally{b=Q}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=b;b=G;try{return J()}finally{b=Q}},e.unstable_scheduleCallback=function(G,J,Q){var oe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,G){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Q+le,G={id:h++,callback:J,priorityLevel:G,startTime:Q,expirationTime:le,sortIndex:-1},Q>oe?(G.sortIndex=Q,t(d,G),n(u)===null&&G===n(d)&&(w?(O(I),I=-1):w=!0,X(M,Q-oe))):(G.sortIndex=le,t(u,G),k||y||(k=!0,P||(P=!0,B()))),G},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(G){var J=b;return function(){var Q=b;b=J;try{return G.apply(this,arguments)}finally{b=Q}}}})(X_)),X_}var rM;function xY(){return rM||(rM=1,Z_.exports=vY()),Z_.exports}var J_={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM;function wY(){if(iM)return ft;iM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(z,K,ne){this.props=z,this.context=K,this.refs=_,this.updater=ne||k}T.prototype.isReactComponent={},T.prototype.setState=function(z,K){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,K,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function O(){}O.prototype=T.prototype;function j(z,K,ne){this.props=z,this.context=K,this.refs=_,this.updater=ne||k}var C=j.prototype=new O;C.constructor=j,w(C,T.prototype),C.isPureReactComponent=!0;var M=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function V(z,K,ne){var re=ne.ref;return{$$typeof:e,type:z,key:K,ref:re!==void 0?re:null,props:ne}}function q(z,K){return V(z.type,K,z.props)}function H(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var K={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ne){return K[ne]})}var W=/\/+/g;function Z(z,K){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):K.toString(36)}function X(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(P,P):(z.status="pending",z.then(function(K){z.status==="pending"&&(z.status="fulfilled",z.value=K)},function(K){z.status==="pending"&&(z.status="rejected",z.reason=K)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,K,ne,re,ce){var ue=typeof z;(ue==="undefined"||ue==="boolean")&&(z=null);var ge=!1;if(z===null)ge=!0;else switch(ue){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(z.$$typeof){case e:case t:ge=!0;break;case h:return ge=z._init,G(ge(z._payload),K,ne,re,ce)}}if(ge)return ce=ce(z),ge=re===""?"."+Z(z,0):re,M(ce)?(ne="",ge!=null&&(ne=ge.replace(W,"$&/")+"/"),G(ce,K,ne,"",function(Ae){return Ae})):ce!=null&&(H(ce)&&(ce=q(ce,ne+(ce.key==null||z&&z.key===ce.key?"":(""+ce.key).replace(W,"$&/")+"/")+ge)),K.push(ce)),1;ge=0;var ke=re===""?".":re+":";if(M(z))for(var ie=0;ie<z.length;ie++)re=z[ie],ue=ke+Z(re,ie),ge+=G(re,K,ne,ue,ce);else if(ie=y(z),typeof ie=="function")for(z=ie.call(z),ie=0;!(re=z.next()).done;)re=re.value,ue=ke+Z(re,ie++),ge+=G(re,K,ne,ue,ce);else if(ue==="object"){if(typeof z.then=="function")return G(X(z),K,ne,re,ce);throw K=String(z),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ge}function J(z,K,ne){if(z==null)return z;var re=[],ce=0;return G(z,re,"","",function(ue){return K.call(ne,ue,ce++)}),re}function Q(z){if(z._status===-1){var K=z._result;K=K(),K.then(function(ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=ne)},function(ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=ne)}),z._status===-1&&(z._status=0,z._result=K)}if(z._status===1)return z._result.default;throw z._result}var oe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},le={map:J,forEach:function(z,K,ne){J(z,function(){K.apply(this,arguments)},ne)},count:function(z){var K=0;return J(z,function(){K++}),K},toArray:function(z){return J(z,function(K){return K})||[]},only:function(z){if(!H(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return ft.Activity=p,ft.Children=le,ft.Component=T,ft.Fragment=n,ft.Profiler=i,ft.PureComponent=j,ft.StrictMode=r,ft.Suspense=u,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ft.__COMPILER_RUNTIME={__proto__:null,c:function(z){return I.H.useMemoCache(z)}},ft.cache=function(z){return function(){return z.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(z,K,ne){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var re=w({},z.props),ce=z.key;if(K!=null)for(ue in K.key!==void 0&&(ce=""+K.key),K)!U.call(K,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&K.ref===void 0||(re[ue]=K[ue]);var ue=arguments.length-2;if(ue===1)re.children=ne;else if(1<ue){for(var ge=Array(ue),ke=0;ke<ue;ke++)ge[ke]=arguments[ke+2];re.children=ge}return V(z.type,ce,re)},ft.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},ft.createElement=function(z,K,ne){var re,ce={},ue=null;if(K!=null)for(re in K.key!==void 0&&(ue=""+K.key),K)U.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ce[re]=K[re]);var ge=arguments.length-2;if(ge===1)ce.children=ne;else if(1<ge){for(var ke=Array(ge),ie=0;ie<ge;ie++)ke[ie]=arguments[ie+2];ce.children=ke}if(z&&z.defaultProps)for(re in ge=z.defaultProps,ge)ce[re]===void 0&&(ce[re]=ge[re]);return V(z,ue,ce)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(z){return{$$typeof:l,render:z}},ft.isValidElement=H,ft.lazy=function(z){return{$$typeof:h,_payload:{_status:-1,_result:z},_init:Q}},ft.memo=function(z,K){return{$$typeof:d,type:z,compare:K===void 0?null:K}},ft.startTransition=function(z){var K=I.T,ne={};I.T=ne;try{var re=z(),ce=I.S;ce!==null&&ce(ne,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(P,oe)}catch(ue){oe(ue)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),I.T=K}},ft.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ft.use=function(z){return I.H.use(z)},ft.useActionState=function(z,K,ne){return I.H.useActionState(z,K,ne)},ft.useCallback=function(z,K){return I.H.useCallback(z,K)},ft.useContext=function(z){return I.H.useContext(z)},ft.useDebugValue=function(){},ft.useDeferredValue=function(z,K){return I.H.useDeferredValue(z,K)},ft.useEffect=function(z,K){return I.H.useEffect(z,K)},ft.useEffectEvent=function(z){return I.H.useEffectEvent(z)},ft.useId=function(){return I.H.useId()},ft.useImperativeHandle=function(z,K,ne){return I.H.useImperativeHandle(z,K,ne)},ft.useInsertionEffect=function(z,K){return I.H.useInsertionEffect(z,K)},ft.useLayoutEffect=function(z,K){return I.H.useLayoutEffect(z,K)},ft.useMemo=function(z,K){return I.H.useMemo(z,K)},ft.useOptimistic=function(z,K){return I.H.useOptimistic(z,K)},ft.useReducer=function(z,K,ne){return I.H.useReducer(z,K,ne)},ft.useRef=function(z){return I.H.useRef(z)},ft.useState=function(z){return I.H.useState(z)},ft.useSyncExternalStore=function(z,K,ne){return I.H.useSyncExternalStore(z,K,ne)},ft.useTransition=function(){return I.H.useTransition()},ft.version="19.2.1",ft}var aM;function xf(){return aM||(aM=1,J_.exports=wY()),J_.exports}var Q_={exports:{}},$r={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oM;function _Y(){if(oM)return $r;oM=1;var e=xf();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$r.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,h)},$r.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},$r.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},$r.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},$r.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$r.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},$r.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$r.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},$r.requestFormReset=function(u){r.d.r(u)},$r.unstable_batchedUpdates=function(u,d){return u(d)},$r.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},$r.useFormStatus=function(){return o.H.useHostTransitionStatus()},$r.version="19.2.1",$r}var sM;function h$(){if(sM)return Q_.exports;sM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Q_.exports=_Y(),Q_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lM;function SY(){if(lM)return Kh;lM=1;var e=xY(),t=xf(),n=h$();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,m=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(m=c.return),s=c.return;while(s)}return c.tag===3?m:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function l(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var m=s,x=c;;){var A=m.return;if(A===null)break;var N=A.alternate;if(N===null){if(x=A.return,x!==null){m=x;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===m)return u(A),s;if(N===x)return u(A),c;N=N.sibling}throw Error(r(188))}if(m.return!==x.return)m=A,x=N;else{for(var $=!1,Y=A.child;Y;){if(Y===m){$=!0,m=A,x=N;break}if(Y===x){$=!0,x=A,m=N;break}Y=Y.sibling}if(!$){for(Y=N.child;Y;){if(Y===m){$=!0,m=N,x=A;break}if(Y===x){$=!0,x=N,m=A;break}Y=Y.sibling}if(!$)throw Error(r(189))}}if(m.alternate!==x)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?s:c}function h(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=h(s),c!==null)return c;s=s.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var W=Symbol.for("react.client.reference");function Z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===W?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case j:return s.displayName||"Context";case O:return(s._context.displayName||"Context")+".Consumer";case C:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return c=s.displayName||null,c!==null?c:Z(s.type)||"Memo";case U:c=s._payload,s=s._init;try{return Z(s(c))}catch{}}return null}var X=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},oe=[],le=-1;function z(s){return{current:s}}function K(s){0>le||(s.current=oe[le],oe[le]=null,le--)}function ne(s,c){le++,oe[le]=s.current,s.current=c}var re=z(null),ce=z(null),ue=z(null),ge=z(null);function ke(s,c){switch(ne(ue,c),ne(ce,s),ne(re,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?SC(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=SC(c),s=kC(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(re),ne(re,s)}function ie(){K(re),K(ce),K(ue)}function Ae(s){s.memoizedState!==null&&ne(ge,s);var c=re.current,m=kC(c,s.type);c!==m&&(ne(ce,s),ne(re,m))}function Ee(s){ce.current===s&&(K(re),K(ce)),ge.current===s&&(K(ge),Fh._currentValue=Q)}var he,Le;function Ie(s){if(he===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);he=c&&c[1]||"",Le=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+s+Le}var tt=!1;function Ne(s,c){if(!s||tt)return"";tt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ve){var ye=ve}Reflect.construct(s,[],Te)}else{try{Te.call()}catch(ve){ye=ve}s.call(Te.prototype)}}else{try{throw Error()}catch(ve){ye=ve}(Te=s())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ve){if(ve&&ye&&typeof ve.stack=="string")return[ve.stack,ye.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=x.DetermineComponentFrameRoot(),$=N[0],Y=N[1];if($&&Y){var te=$.split(`
`),pe=Y.split(`
`);for(A=x=0;x<te.length&&!te[x].includes("DetermineComponentFrameRoot");)x++;for(;A<pe.length&&!pe[A].includes("DetermineComponentFrameRoot");)A++;if(x===te.length||A===pe.length)for(x=te.length-1,A=pe.length-1;1<=x&&0<=A&&te[x]!==pe[A];)A--;for(;1<=x&&0<=A;x--,A--)if(te[x]!==pe[A]){if(x!==1||A!==1)do if(x--,A--,0>A||te[x]!==pe[A]){var _e=`
`+te[x].replace(" at new "," at ");return s.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",s.displayName)),_e}while(1<=x&&0<=A);break}}}finally{tt=!1,Error.prepareStackTrace=m}return(m=s?s.displayName||s.name:"")?Ie(m):""}function Be(s,c){switch(s.tag){case 26:case 27:case 5:return Ie(s.type);case 16:return Ie("Lazy");case 13:return s.child!==c&&c!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return Ne(s.type,!1);case 11:return Ne(s.type.render,!1);case 1:return Ne(s.type,!0);case 31:return Ie("Activity");default:return""}}function Ue(s){try{var c="",m=null;do c+=Be(s,m),m=s,s=s.return;while(s);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var nt=Object.prototype.hasOwnProperty,ut=e.unstable_scheduleCallback,yt=e.unstable_cancelCallback,se=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Ye=e.unstable_now,qe=e.unstable_getCurrentPriorityLevel,Tt=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,ze=e.unstable_LowPriority,Xe=e.unstable_IdlePriority,vt=e.log,Ot=e.unstable_setDisableYieldValue,$t=null,Ht=null;function wn(s){if(typeof vt=="function"&&Ot(s),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode($t,s)}catch{}}var Tn=Math.clz32?Math.clz32:Ce,Ca=Math.log,zn=Math.LN2;function Ce(s){return s>>>=0,s===0?32:31-(Ca(s)/zn|0)|0}var at=256,Bt=262144,_r=4194304;function ni(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Lu(s,c,m){var x=s.pendingLanes;if(x===0)return 0;var A=0,N=s.suspendedLanes,$=s.pingedLanes;s=s.warmLanes;var Y=x&134217727;return Y!==0?(x=Y&~N,x!==0?A=ni(x):($&=Y,$!==0?A=ni($):m||(m=Y&~s,m!==0&&(A=ni(m))))):(Y=x&~N,Y!==0?A=ni(Y):$!==0?A=ni($):m||(m=x&~s,m!==0&&(A=ni(m)))),A===0?0:c!==0&&c!==A&&(c&N)===0&&(N=A&-A,m=c&-c,N>=m||N===32&&(m&4194048)!==0)?c:A}function cc(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function tw(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a0(){var s=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),s}function Gf(s){for(var c=[],m=0;31>m;m++)c.push(s);return c}function Wo(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function nw(s,c,m,x,A,N){var $=s.pendingLanes;s.pendingLanes=m,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=m,s.entangledLanes&=m,s.errorRecoveryDisabledLanes&=m,s.shellSuspendCounter=0;var Y=s.entanglements,te=s.expirationTimes,pe=s.hiddenUpdates;for(m=$&~m;0<m;){var _e=31-Tn(m),Te=1<<_e;Y[_e]=0,te[_e]=-1;var ye=pe[_e];if(ye!==null)for(pe[_e]=null,_e=0;_e<ye.length;_e++){var ve=ye[_e];ve!==null&&(ve.lane&=-536870913)}m&=~Te}x!==0&&o0(s,x,0),N!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=N&~($&~c))}function o0(s,c,m){s.pendingLanes|=c,s.suspendedLanes&=~c;var x=31-Tn(c);s.entangledLanes|=c,s.entanglements[x]=s.entanglements[x]|1073741824|m&261930}function s0(s,c){var m=s.entangledLanes|=c;for(s=s.entanglements;m;){var x=31-Tn(m),A=1<<x;A&c|s[x]&c&&(s[x]|=c),m&=~A}}function l0(s,c){var m=c&-c;return m=(m&42)!==0?1:ri(m),(m&(s.suspendedLanes|c))!==0?0:m}function ri(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function We(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Yf(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:KC(s.type))}function qf(s,c){var m=J.p;try{return J.p=s,c()}finally{J.p=m}}var Ma=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ma,cr="__reactProps$"+Ma,Vo="__reactContainer$"+Ma,uo="__reactEvents$"+Ma,c0="__reactListeners$"+Ma,rw="__reactHandles$"+Ma,u0="__reactResources$"+Ma,uc="__reactMarker$"+Ma;function Kf(s){delete s[Un],delete s[cr],delete s[uo],delete s[c0],delete s[rw]}function Zo(s){var c=s[Un];if(c)return c;for(var m=s.parentNode;m;){if(c=m[Vo]||m[Un]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(s=CC(s);s!==null;){if(m=s[Un])return m;s=CC(s)}return c}s=m,m=s.parentNode}return null}function Xs(s){if(s=s[Un]||s[Vo]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function fo(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function Js(s){var c=s[u0];return c||(c=s[u0]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Fn(s){s[uc]=!0}var d0=new Set,f0={};function Xo(s,c){ho(s,c),ho(s+"Capture",c)}function ho(s,c){for(f0[s]=c,s=0;s<c.length;s++)d0.add(c[s])}var dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wf={},Vf={};function fc(s){return nt.call(Vf,s)?!0:nt.call(Wf,s)?!1:dc.test(s)?Vf[s]=!0:(Wf[s]=!0,!1)}function xt(s,c,m){if(fc(c))if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+m)}}function Kt(s,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+m)}}function ii(s,c,m,x){if(x===null)s.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(m);return}s.setAttributeNS(c,m,""+x)}}function Qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Jo(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Zf(s,c,m){var x=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,N=x.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function($){m=""+$,N.call(this,$)}}),Object.defineProperty(s,c,{enumerable:x.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function dt(s){if(!s._valueTracker){var c=Jo(s)?"checked":"value";s._valueTracker=Zf(s,c,""+s[c])}}function dn(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return s&&(x=Jo(s)?s.checked?"true":"false":s.value),s=x,s!==m?(c.setValue(s),!0):!1}function Qs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Iu=/[\n"\\]/g;function on(s){return s.replace(Iu,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Xf(s,c,m,x,A,N,$,Y){s.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.type=$:s.removeAttribute("type"),c!=null?$==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Qn(c)):s.value!==""+Qn(c)&&(s.value=""+Qn(c)):$!=="submit"&&$!=="reset"||s.removeAttribute("value"),c!=null?Da(s,$,Qn(c)):m!=null?Da(s,$,Qn(m)):x!=null&&s.removeAttribute("value"),A==null&&N!=null&&(s.defaultChecked=!!N),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+Qn(Y):s.removeAttribute("name")}function hc(s,c,m,x,A,N,$,Y){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.type=N),c!=null||m!=null){if(!(N!=="submit"&&N!=="reset"||c!=null)){dt(s);return}m=m!=null?""+Qn(m):"",c=c!=null?""+Qn(c):m,Y||c===s.value||(s.value=c),s.defaultValue=c}x=x??A,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=Y?s.checked:!!x,s.defaultChecked=!!x,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(s.name=$),dt(s)}function Da(s,c,m){c==="number"&&Qs(s.ownerDocument)===s||s.defaultValue===""+m||(s.defaultValue=""+m)}function Xt(s,c,m,x){if(s=s.options,c){c={};for(var A=0;A<m.length;A++)c["$"+m[A]]=!0;for(m=0;m<s.length;m++)A=c.hasOwnProperty("$"+s[m].value),s[m].selected!==A&&(s[m].selected=A),A&&x&&(s[m].defaultSelected=!0)}else{for(m=""+Qn(m),c=null,A=0;A<s.length;A++){if(s[A].value===m){s[A].selected=!0,x&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function mo(s,c,m){if(c!=null&&(c=""+Qn(c),c!==s.value&&(s.value=c),m==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=m!=null?""+Qn(m):""}function el(s,c,m,x){if(c==null){if(x!=null){if(m!=null)throw Error(r(92));if(X(x)){if(1<x.length)throw Error(r(93));x=x[0]}m=x}m==null&&(m=""),c=m}m=Qn(c),s.defaultValue=m,x=s.textContent,x===m&&x!==""&&x!==null&&(s.value=x),dt(s)}function Ji(s,c){if(c){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=c;return}}s.textContent=c}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(s,c,m){var x=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":x?s.setProperty(c,m):typeof m!="number"||m===0||Jf.has(c)?c==="float"?s.cssFloat=m:s[c]=(""+m).trim():s[c]=m+"px"}function $u(s,c,m){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var A in c)x=c[A],c.hasOwnProperty(A)&&m[A]!==x&&tl(s,A,x)}else for(var N in c)c.hasOwnProperty(N)&&tl(s,N,c[N])}function mc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(s){return Qf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ai(){}var zu=null;function pc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rl=null,lt=null;function ji(s){var c=Xs(s);if(c&&(s=c.stateNode)){var m=s[cr]||null;e:switch(s=c.stateNode,c.type){case"input":if(Xf(s,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+on(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==s&&x.form===s.form){var A=x[cr]||null;if(!A)throw Error(r(90));Xf(x,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<m.length;c++)x=m[c],x.form===s.form&&dn(x)}break e;case"textarea":mo(s,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&Xt(s,!!m.multiple,c,!1)}}}var zt=!1;function eh(s,c,m){if(zt)return s(c,m);zt=!0;try{var x=s(c);return x}finally{if(zt=!1,(rl!==null||lt!==null)&&(lg(),rl&&(c=rl,s=lt,lt=rl=null,ji(c),s)))for(c=0;c<s.length;c++)ji(s[c])}}function Qo(s,c){var m=s.stateNode;if(m===null)return null;var x=m[cr]||null;if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(r(231,c,typeof m));return m}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(Ti)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{gc=!1}var Qi=null,es=null,An=null;function po(){if(An)return An;var s,c=es,m=c.length,x,A="value"in Qi?Qi.value:Qi.textContent,N=A.length;for(s=0;s<m&&c[s]===A[s];s++);var $=m-s;for(x=1;x<=$&&c[m-x]===A[N-x];x++);return An=A.slice(s,1<x?1-x:void 0)}function bc(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function yc(){return!0}function h0(){return!1}function Sr(s){function c(m,x,A,N,$){this._reactName=m,this._targetInst=A,this.type=x,this.nativeEvent=N,this.target=$,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(m=s[Y],this[Y]=m?m(N):N[Y]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?yc:h0,this.isPropagationStopped=h0,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),c}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=Sr(Pa),il=p({},Pa,{view:0,detail:0}),kt=Sr(il),th,Gr,Ra,vc=p({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ra&&(Ra&&s.type==="mousemove"?(th=s.screenX-Ra.screenX,Gr=s.screenY-Ra.screenY):Gr=th=0,Ra=s),th)},movementY:function(s){return"movementY"in s?s.movementY:Gr}}),m0=Sr(vc),nh=p({},vc,{dataTransfer:0}),iw=Sr(nh),p0=p({},il,{relatedTarget:0}),rh=Sr(p0),aw=p({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=Sr(aw),ow=p({},Pa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ea=Sr(ow),sw=p({},Pa,{data:0}),ah=Sr(sw),go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=b0[s])?!!c[s]:!1}function sh(){return oh}var y0=p({},il,{key:function(s){if(s.key){var c=go[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=bc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?g0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sh,charCode:function(s){return s.type==="keypress"?bc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?bc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v0=Sr(y0),lw=p({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=Sr(lw),lh=p({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sh}),cw=Sr(lh),w0=p({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=Sr(w0),Fu=p({},vc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ts=Sr(Fu),uw=p({},Pa,{newState:0,oldState:0}),xc=Sr(uw),oi=[9,13,27,32],Hu=Ti&&"CompositionEvent"in window,al=null;Ti&&"documentMode"in document&&(al=document.documentMode);var dw=Ti&&"TextEvent"in window&&!al,Gu=Ti&&(!Hu||al&&8<al&&11>=al),Yu=" ",S0=!1;function k0(s,c){switch(s){case"keyup":return oi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ol=!1;function Ni(s,c){switch(s){case"compositionend":return ch(c);case"keypress":return c.which!==32?null:(S0=!0,Yu);case"textInput":return s=c.data,s===Yu&&S0?null:s;default:return null}}function sl(s,c){if(ol)return s==="compositionend"||!Hu&&k0(s,c)?(s=po(),An=es=Qi=null,ol=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Gu&&c.locale!=="ko"?null:c.data;default:return null}}var fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!fw[s.type]:c==="textarea"}function E0(s,c,m,x){rl?lt?lt.push(x):lt=[x]:rl=x,c=pg(c,"onChange"),0<c.length&&(m=new Uu("onChange","change",null,m,x),s.push({event:m,listeners:c}))}var na=null,wc=null;function _c(s){bC(s,0)}function Sc(s){var c=fo(s);if(dn(c))return s}function kc(s,c){if(s==="change")return c}var j0=!1;if(Ti){var ra;if(Ti){var ll="oninput"in document;if(!ll){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),ll=typeof T0.oninput=="function"}ra=ll}else ra=!1;j0=ra&&(!document.documentMode||9<document.documentMode)}function qu(){na&&(na.detachEvent("onpropertychange",A0),wc=na=null)}function A0(s){if(s.propertyName==="value"&&Sc(wc)){var c=[];E0(c,wc,s,pc(s)),eh(_c,c)}}function La(s,c,m){s==="focusin"?(qu(),na=c,wc=m,na.attachEvent("onpropertychange",A0)):s==="focusout"&&qu()}function hw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Sc(wc)}function cl(s,c){if(s==="click")return Sc(c)}function mw(s,c){if(s==="input"||s==="change")return Sc(c)}function Ia(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var ur=typeof Object.is=="function"?Object.is:Ia;function ul(s,c){if(ur(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var m=Object.keys(s),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var A=m[x];if(!nt.call(c,A)||!ur(s[A],c[A]))return!1}return!0}function Ku(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ec(s,c){var m=Ku(s);s=0;for(var x;m;){if(m.nodeType===3){if(x=s+m.textContent.length,s<=c&&x>=c)return{node:m,offset:c-s};s=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ku(m)}}function Wu(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?Wu(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function jc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Qs(s.document);c instanceof s.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)s=c.contentWindow;else break;c=Qs(s.document)}return c}function bo(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var Vu=Ti&&"documentMode"in document&&11>=document.documentMode,yo=null,Zu=null,Tc=null,dl=!1;function N0(s,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;dl||yo==null||yo!==Qs(x)||(x=yo,"selectionStart"in x&&bo(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Tc&&ul(Tc,x)||(Tc=x,x=pg(Zu,"onSelect"),0<x.length&&(c=new Uu("onSelect","select",null,c,m),s.push({event:c,listeners:x}),c.target=yo)))}function vo(s,c){var m={};return m[s.toLowerCase()]=c.toLowerCase(),m["Webkit"+s]="webkit"+c,m["Moz"+s]="moz"+c,m}var fl={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionrun:vo("Transition","TransitionRun"),transitionstart:vo("Transition","TransitionStart"),transitioncancel:vo("Transition","TransitionCancel"),transitionend:vo("Transition","TransitionEnd")},Xu={},O0={};Ti&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function dr(s){if(Xu[s])return Xu[s];if(!fl[s])return s;var c=fl[s],m;for(m in c)if(c.hasOwnProperty(m)&&m in O0)return Xu[s]=c[m];return s}var Ac=dr("animationend"),C0=dr("animationiteration"),Nc=dr("animationstart"),pw=dr("transitionrun"),M0=dr("transitionstart"),gw=dr("transitioncancel"),hl=dr("transitionend"),D0=new Map,xo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xo.push("scrollEnd");function si(s,c){D0.set(s,c),Xo(c,[s])}var Oc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},li=[],Lr=0,Ju=0;function Cc(){for(var s=Lr,c=Ju=Lr=0;c<s;){var m=li[c];li[c++]=null;var x=li[c];li[c++]=null;var A=li[c];li[c++]=null;var N=li[c];if(li[c++]=null,x!==null&&A!==null){var $=x.pending;$===null?A.next=A:(A.next=$.next,$.next=A),x.pending=A}N!==0&&ml(m,A,N)}}function wo(s,c,m,x){li[Lr++]=s,li[Lr++]=c,li[Lr++]=m,li[Lr++]=x,Ju|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function uh(s,c,m,x){return wo(s,c,m,x),Mc(s)}function ia(s,c){return wo(s,null,null,c),Mc(s)}function ml(s,c,m){s.lanes|=m;var x=s.alternate;x!==null&&(x.lanes|=m);for(var A=!1,N=s.return;N!==null;)N.childLanes|=m,x=N.alternate,x!==null&&(x.childLanes|=m),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(A=!0)),s=N,N=N.return;return s.tag===3?(N=s.stateNode,A&&c!==null&&(A=31-Tn(m),s=N.hiddenUpdates,x=s[A],x===null?s[A]=[c]:x.push(c),c.lane=m|536870912),N):null}function Mc(s){if(50<Rh)throw Rh=0,y_=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var ns={};function bw(s,c,m,x){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(s,c,m,x){return new bw(s,c,m,x)}function Qu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function aa(s,c){var m=s.alternate;return m===null?(m=Ir(s.tag,c,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=c,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&65011712,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,c=s.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m.refCleanup=s.refCleanup,m}function dh(s,c){s.flags&=65011714;var m=s.alternate;return m===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=m.childLanes,s.lanes=m.lanes,s.child=m.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=m.memoizedProps,s.memoizedState=m.memoizedState,s.updateQueue=m.updateQueue,s.type=m.type,c=m.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Dc(s,c,m,x,A,N){var $=0;if(x=s,typeof s=="function")Qu(s)&&($=1);else if(typeof s=="string")$=aY(s,m,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case V:return s=Ir(31,m,c,A),s.elementType=V,s.lanes=N,s;case w:return rs(m.children,A,N,c);case _:$=8,A|=24;break;case T:return s=Ir(12,m,c,A|2),s.elementType=T,s.lanes=N,s;case M:return s=Ir(13,m,c,A),s.elementType=M,s.lanes=N,s;case P:return s=Ir(19,m,c,A),s.elementType=P,s.lanes=N,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:$=10;break e;case O:$=9;break e;case C:$=11;break e;case I:$=14;break e;case U:$=16,x=null;break e}$=29,m=Error(r(130,s===null?"null":typeof s,"")),x=null}return c=Ir($,m,c,A),c.elementType=s,c.type=x,c.lanes=N,c}function rs(s,c,m,x){return s=Ir(7,s,x,c),s.lanes=m,s}function ed(s,c,m){return s=Ir(6,s,null,c),s.lanes=m,s}function fh(s){var c=Ir(18,null,null,0);return c.stateNode=s,c}function hh(s,c,m){return c=Ir(4,s.children!==null?s.children:[],s.key,c),c.lanes=m,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var f=new WeakMap;function v(s,c){if(typeof s=="object"&&s!==null){var m=f.get(s);return m!==void 0?m:(c={value:s,source:c,stack:Ue(c)},f.set(s,c),c)}return{value:s,source:c,stack:Ue(c)}}var E=[],D=0,R=null,F=0,ee=[],fe=0,be=null,je=1,$e="";function Ze(s,c){E[D++]=F,E[D++]=R,R=s,F=c}function gt(s,c,m){ee[fe++]=je,ee[fe++]=$e,ee[fe++]=be,be=s;var x=je;s=$e;var A=32-Tn(x)-1;x&=~(1<<A),m+=1;var N=32-Tn(c)+A;if(30<N){var $=A-A%5;N=(x&(1<<$)-1).toString(32),x>>=$,A-=$,je=1<<32-Tn(c)+A|m<<A|x,$e=N+s}else je=1<<N|m<<A|x,$e=s}function er(s){s.return!==null&&(Ze(s,1),gt(s,1,0))}function Nn(s){for(;s===R;)R=E[--D],E[D]=null,F=E[--D],E[D]=null;for(;s===be;)be=ee[--fe],ee[fe]=null,$e=ee[--fe],ee[fe]=null,je=ee[--fe],ee[fe]=null}function Yr(s,c){ee[fe++]=je,ee[fe++]=$e,ee[fe++]=be,je=c.id,$e=c.overflow,be=s}var Ct=null,Mt=null,wt=!1,_o=null,ci=!1,td=Error(r(519));function So(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pc(v(c,s)),td}function mh(s){var c=s.stateNode,m=s.type,x=s.memoizedProps;switch(c[Un]=s,c[cr]=x,m){case"dialog":St("cancel",c),St("close",c);break;case"iframe":case"object":case"embed":St("load",c);break;case"video":case"audio":for(m=0;m<Ih.length;m++)St(Ih[m],c);break;case"source":St("error",c);break;case"img":case"image":case"link":St("error",c),St("load",c);break;case"details":St("toggle",c);break;case"input":St("invalid",c),hc(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":St("invalid",c);break;case"textarea":St("invalid",c),el(c,x.value,x.defaultValue,x.children)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||x.suppressHydrationWarning===!0||wC(c.textContent,m)?(x.popover!=null&&(St("beforetoggle",c),St("toggle",c)),x.onScroll!=null&&St("scroll",c),x.onScrollEnd!=null&&St("scrollend",c),x.onClick!=null&&(c.onclick=ai),c=!0):c=!1,c||So(s,!0)}function _n(s){for(Ct=s.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:Ct=Ct.return}}function $a(s){if(s!==Ct)return!1;if(!wt)return _n(s),wt=!0,!1;var c=s.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=s.type,m=!(m!=="form"&&m!=="button")||D_(s.type,s.memoizedProps)),m=!m),m&&Mt&&So(s),_n(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=OC(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=OC(s)}else c===27?(c=Mt,Al(s.type)?(s=$_,$_=null,Mt=s):Mt=c):Mt=Ct?sa(s.stateNode.nextSibling):null;return!0}function is(){Mt=Ct=null,wt=!1}function ph(){var s=_o;return s!==null&&(hi===null?hi=s:hi.push.apply(hi,s),_o=null),s}function Pc(s){_o===null?_o=[s]:_o.push(s)}var Rc=z(null),ko=null,Ba=null;function pl(s,c,m){ne(Rc,c._currentValue),c._currentValue=m}function as(s){s._currentValue=Rc.current,K(Rc)}function yw(s,c,m){for(;s!==null;){var x=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),s===m)break;s=s.return}}function vw(s,c,m,x){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var N=A.dependencies;if(N!==null){var $=A.child;N=N.firstContext;e:for(;N!==null;){var Y=N;N=A;for(var te=0;te<c.length;te++)if(Y.context===c[te]){N.lanes|=m,Y=N.alternate,Y!==null&&(Y.lanes|=m),yw(N.return,m,s),x||($=null);break e}N=Y.next}}else if(A.tag===18){if($=A.return,$===null)throw Error(r(341));$.lanes|=m,N=$.alternate,N!==null&&(N.lanes|=m),yw($,m,s),$=null}else $=A.child;if($!==null)$.return=A;else for($=A;$!==null;){if($===s){$=null;break}if(A=$.sibling,A!==null){A.return=$.return,$=A;break}$=$.return}A=$}}function nd(s,c,m,x){s=null;for(var A=c,N=!1;A!==null;){if(!N){if((A.flags&524288)!==0)N=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var $=A.alternate;if($===null)throw Error(r(387));if($=$.memoizedProps,$!==null){var Y=A.type;ur(A.pendingProps.value,$.value)||(s!==null?s.push(Y):s=[Y])}}else if(A===ge.current){if($=A.alternate,$===null)throw Error(r(387));$.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(Fh):s=[Fh])}A=A.return}s!==null&&vw(c,s,m,x),c.flags|=262144}function P0(s){for(s=s.firstContext;s!==null;){if(!ur(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lc(s){ko=s,Ba=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function kr(s){return oN(ko,s)}function R0(s,c){return ko===null&&Lc(s),oN(s,c)}function oN(s,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},Ba===null){if(s===null)throw Error(r(308));Ba=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Ba=Ba.next=c;return m}var tG=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(m,x){s.push(x)}};this.abort=function(){c.aborted=!0,s.forEach(function(m){return m()})}},nG=e.unstable_scheduleCallback,rG=e.unstable_NormalPriority,Hn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xw(){return{controller:new tG,data:new Map,refCount:0}}function gh(s){s.refCount--,s.refCount===0&&nG(rG,function(){s.controller.abort()})}var bh=null,ww=0,rd=0,id=null;function iG(s,c){if(bh===null){var m=bh=[];ww=0,rd=k_(),id={status:"pending",value:void 0,then:function(x){m.push(x)}}}return ww++,c.then(sN,sN),c}function sN(){if(--ww===0&&bh!==null){id!==null&&(id.status="fulfilled");var s=bh;bh=null,rd=0,id=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function aG(s,c){var m=[],x={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return s.then(function(){x.status="fulfilled",x.value=c;for(var A=0;A<m.length;A++)(0,m[A])(c)},function(A){for(x.status="rejected",x.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),x}var lN=G.S;G.S=function(s,c){YO=Ye(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&iG(s,c),lN!==null&&lN(s,c)};var Ic=z(null);function _w(){var s=Ic.current;return s!==null?s:Jt.pooledCache}function L0(s,c){c===null?ne(Ic,Ic.current):ne(Ic,c.pool)}function cN(){var s=_w();return s===null?null:{parent:Hn._currentValue,pool:s}}var ad=Error(r(460)),Sw=Error(r(474)),I0=Error(r(542)),$0={then:function(){}};function uN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dN(s,c,m){switch(m=s[m],m===void 0?s.push(c):m!==c&&(c.then(ai,ai),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,hN(s),s;default:if(typeof c.status=="string")c.then(ai,ai);else{if(s=Jt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(x){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=x}},function(x){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,hN(s),s}throw Bc=c,ad}}function $c(s){try{var c=s._init;return c(s._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Bc=m,ad):m}}var Bc=null;function fN(){if(Bc===null)throw Error(r(459));var s=Bc;return Bc=null,s}function hN(s){if(s===ad||s===I0)throw Error(r(483))}var od=null,yh=0;function B0(s){var c=yh;return yh+=1,od===null&&(od=[]),dN(od,s,c)}function vh(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function z0(s,c){throw c.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function mN(s){function c(de,ae){if(s){var me=de.deletions;me===null?(de.deletions=[ae],de.flags|=16):me.push(ae)}}function m(de,ae){if(!s)return null;for(;ae!==null;)c(de,ae),ae=ae.sibling;return null}function x(de){for(var ae=new Map;de!==null;)de.key!==null?ae.set(de.key,de):ae.set(de.index,de),de=de.sibling;return ae}function A(de,ae){return de=aa(de,ae),de.index=0,de.sibling=null,de}function N(de,ae,me){return de.index=me,s?(me=de.alternate,me!==null?(me=me.index,me<ae?(de.flags|=67108866,ae):me):(de.flags|=67108866,ae)):(de.flags|=1048576,ae)}function $(de){return s&&de.alternate===null&&(de.flags|=67108866),de}function Y(de,ae,me,Se){return ae===null||ae.tag!==6?(ae=ed(me,de.mode,Se),ae.return=de,ae):(ae=A(ae,me),ae.return=de,ae)}function te(de,ae,me,Se){var rt=me.type;return rt===w?_e(de,ae,me.props.children,Se,me.key):ae!==null&&(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===U&&$c(rt)===ae.type)?(ae=A(ae,me.props),vh(ae,me),ae.return=de,ae):(ae=Dc(me.type,me.key,me.props,null,de.mode,Se),vh(ae,me),ae.return=de,ae)}function pe(de,ae,me,Se){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==me.containerInfo||ae.stateNode.implementation!==me.implementation?(ae=hh(me,de.mode,Se),ae.return=de,ae):(ae=A(ae,me.children||[]),ae.return=de,ae)}function _e(de,ae,me,Se,rt){return ae===null||ae.tag!==7?(ae=rs(me,de.mode,Se,rt),ae.return=de,ae):(ae=A(ae,me),ae.return=de,ae)}function Te(de,ae,me){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=ed(""+ae,de.mode,me),ae.return=de,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return me=Dc(ae.type,ae.key,ae.props,null,de.mode,me),vh(me,ae),me.return=de,me;case k:return ae=hh(ae,de.mode,me),ae.return=de,ae;case U:return ae=$c(ae),Te(de,ae,me)}if(X(ae)||B(ae))return ae=rs(ae,de.mode,me,null),ae.return=de,ae;if(typeof ae.then=="function")return Te(de,B0(ae),me);if(ae.$$typeof===j)return Te(de,R0(de,ae),me);z0(de,ae)}return null}function ye(de,ae,me,Se){var rt=ae!==null?ae.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return rt!==null?null:Y(de,ae,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return me.key===rt?te(de,ae,me,Se):null;case k:return me.key===rt?pe(de,ae,me,Se):null;case U:return me=$c(me),ye(de,ae,me,Se)}if(X(me)||B(me))return rt!==null?null:_e(de,ae,me,Se,null);if(typeof me.then=="function")return ye(de,ae,B0(me),Se);if(me.$$typeof===j)return ye(de,ae,R0(de,me),Se);z0(de,me)}return null}function ve(de,ae,me,Se,rt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return de=de.get(me)||null,Y(ae,de,""+Se,rt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case y:return de=de.get(Se.key===null?me:Se.key)||null,te(ae,de,Se,rt);case k:return de=de.get(Se.key===null?me:Se.key)||null,pe(ae,de,Se,rt);case U:return Se=$c(Se),ve(de,ae,me,Se,rt)}if(X(Se)||B(Se))return de=de.get(me)||null,_e(ae,de,Se,rt,null);if(typeof Se.then=="function")return ve(de,ae,me,B0(Se),rt);if(Se.$$typeof===j)return ve(de,ae,me,R0(ae,Se),rt);z0(ae,Se)}return null}function He(de,ae,me,Se){for(var rt=null,Dt=null,Ke=ae,bt=ae=0,jt=null;Ke!==null&&bt<me.length;bt++){Ke.index>bt?(jt=Ke,Ke=null):jt=Ke.sibling;var Pt=ye(de,Ke,me[bt],Se);if(Pt===null){Ke===null&&(Ke=jt);break}s&&Ke&&Pt.alternate===null&&c(de,Ke),ae=N(Pt,ae,bt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt,Ke=jt}if(bt===me.length)return m(de,Ke),wt&&Ze(de,bt),rt;if(Ke===null){for(;bt<me.length;bt++)Ke=Te(de,me[bt],Se),Ke!==null&&(ae=N(Ke,ae,bt),Dt===null?rt=Ke:Dt.sibling=Ke,Dt=Ke);return wt&&Ze(de,bt),rt}for(Ke=x(Ke);bt<me.length;bt++)jt=ve(Ke,de,bt,me[bt],Se),jt!==null&&(s&&jt.alternate!==null&&Ke.delete(jt.key===null?bt:jt.key),ae=N(jt,ae,bt),Dt===null?rt=jt:Dt.sibling=jt,Dt=jt);return s&&Ke.forEach(function(Dl){return c(de,Dl)}),wt&&Ze(de,bt),rt}function ot(de,ae,me,Se){if(me==null)throw Error(r(151));for(var rt=null,Dt=null,Ke=ae,bt=ae=0,jt=null,Pt=me.next();Ke!==null&&!Pt.done;bt++,Pt=me.next()){Ke.index>bt?(jt=Ke,Ke=null):jt=Ke.sibling;var Dl=ye(de,Ke,Pt.value,Se);if(Dl===null){Ke===null&&(Ke=jt);break}s&&Ke&&Dl.alternate===null&&c(de,Ke),ae=N(Dl,ae,bt),Dt===null?rt=Dl:Dt.sibling=Dl,Dt=Dl,Ke=jt}if(Pt.done)return m(de,Ke),wt&&Ze(de,bt),rt;if(Ke===null){for(;!Pt.done;bt++,Pt=me.next())Pt=Te(de,Pt.value,Se),Pt!==null&&(ae=N(Pt,ae,bt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt);return wt&&Ze(de,bt),rt}for(Ke=x(Ke);!Pt.done;bt++,Pt=me.next())Pt=ve(Ke,de,bt,Pt.value,Se),Pt!==null&&(s&&Pt.alternate!==null&&Ke.delete(Pt.key===null?bt:Pt.key),ae=N(Pt,ae,bt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt);return s&&Ke.forEach(function(gY){return c(de,gY)}),wt&&Ze(de,bt),rt}function Zt(de,ae,me,Se){if(typeof me=="object"&&me!==null&&me.type===w&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case y:e:{for(var rt=me.key;ae!==null;){if(ae.key===rt){if(rt=me.type,rt===w){if(ae.tag===7){m(de,ae.sibling),Se=A(ae,me.props.children),Se.return=de,de=Se;break e}}else if(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===U&&$c(rt)===ae.type){m(de,ae.sibling),Se=A(ae,me.props),vh(Se,me),Se.return=de,de=Se;break e}m(de,ae);break}else c(de,ae);ae=ae.sibling}me.type===w?(Se=rs(me.props.children,de.mode,Se,me.key),Se.return=de,de=Se):(Se=Dc(me.type,me.key,me.props,null,de.mode,Se),vh(Se,me),Se.return=de,de=Se)}return $(de);case k:e:{for(rt=me.key;ae!==null;){if(ae.key===rt)if(ae.tag===4&&ae.stateNode.containerInfo===me.containerInfo&&ae.stateNode.implementation===me.implementation){m(de,ae.sibling),Se=A(ae,me.children||[]),Se.return=de,de=Se;break e}else{m(de,ae);break}else c(de,ae);ae=ae.sibling}Se=hh(me,de.mode,Se),Se.return=de,de=Se}return $(de);case U:return me=$c(me),Zt(de,ae,me,Se)}if(X(me))return He(de,ae,me,Se);if(B(me)){if(rt=B(me),typeof rt!="function")throw Error(r(150));return me=rt.call(me),ot(de,ae,me,Se)}if(typeof me.then=="function")return Zt(de,ae,B0(me),Se);if(me.$$typeof===j)return Zt(de,ae,R0(de,me),Se);z0(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ae!==null&&ae.tag===6?(m(de,ae.sibling),Se=A(ae,me),Se.return=de,de=Se):(m(de,ae),Se=ed(me,de.mode,Se),Se.return=de,de=Se),$(de)):m(de,ae)}return function(de,ae,me,Se){try{yh=0;var rt=Zt(de,ae,me,Se);return od=null,rt}catch(Ke){if(Ke===ad||Ke===I0)throw Ke;var Dt=Ir(29,Ke,null,de.mode);return Dt.lanes=Se,Dt.return=de,Dt}finally{}}}var zc=mN(!0),pN=mN(!1),gl=!1;function kw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ew(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function bl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function yl(s,c,m){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,(Lt&2)!==0){var A=x.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),x.pending=c,c=Mc(s),ml(s,null,m),c}return wo(s,x,c,m),Mc(s)}function xh(s,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var x=c.lanes;x&=s.pendingLanes,m|=x,c.lanes=m,s0(s,m)}}function jw(s,c){var m=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var A=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var $={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};N===null?A=N=$:N=N.next=$,m=m.next}while(m!==null);N===null?A=N=c:N=N.next=c}else A=N=c;m={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:x.shared,callbacks:x.callbacks},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=c:s.next=c,m.lastBaseUpdate=c}var Tw=!1;function wh(){if(Tw){var s=id;if(s!==null)throw s}}function _h(s,c,m,x){Tw=!1;var A=s.updateQueue;gl=!1;var N=A.firstBaseUpdate,$=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var te=Y,pe=te.next;te.next=null,$===null?N=pe:$.next=pe,$=te;var _e=s.alternate;_e!==null&&(_e=_e.updateQueue,Y=_e.lastBaseUpdate,Y!==$&&(Y===null?_e.firstBaseUpdate=pe:Y.next=pe,_e.lastBaseUpdate=te))}if(N!==null){var Te=A.baseState;$=0,_e=pe=te=null,Y=N;do{var ye=Y.lane&-536870913,ve=ye!==Y.lane;if(ve?(Et&ye)===ye:(x&ye)===ye){ye!==0&&ye===rd&&(Tw=!0),_e!==null&&(_e=_e.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var He=s,ot=Y;ye=c;var Zt=m;switch(ot.tag){case 1:if(He=ot.payload,typeof He=="function"){Te=He.call(Zt,Te,ye);break e}Te=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=ot.payload,ye=typeof He=="function"?He.call(Zt,Te,ye):He,ye==null)break e;Te=p({},Te,ye);break e;case 2:gl=!0}}ye=Y.callback,ye!==null&&(s.flags|=64,ve&&(s.flags|=8192),ve=A.callbacks,ve===null?A.callbacks=[ye]:ve.push(ye))}else ve={lane:ye,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},_e===null?(pe=_e=ve,te=Te):_e=_e.next=ve,$|=ye;if(Y=Y.next,Y===null){if(Y=A.shared.pending,Y===null)break;ve=Y,Y=ve.next,ve.next=null,A.lastBaseUpdate=ve,A.shared.pending=null}}while(!0);_e===null&&(te=Te),A.baseState=te,A.firstBaseUpdate=pe,A.lastBaseUpdate=_e,N===null&&(A.shared.lanes=0),Sl|=$,s.lanes=$,s.memoizedState=Te}}function gN(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function bN(s,c){var m=s.callbacks;if(m!==null)for(s.callbacks=null,s=0;s<m.length;s++)gN(m[s],c)}var sd=z(null),U0=z(0);function yN(s,c){s=ms,ne(U0,s),ne(sd,c),ms=s|c.baseLanes}function Aw(){ne(U0,ms),ne(sd,sd.current)}function Nw(){ms=U0.current,K(sd),K(U0)}var Oi=z(null),oa=null;function vl(s){var c=s.alternate;ne(Rn,Rn.current&1),ne(Oi,s),oa===null&&(c===null||sd.current!==null||c.memoizedState!==null)&&(oa=s)}function Ow(s){ne(Rn,Rn.current),ne(Oi,s),oa===null&&(oa=s)}function vN(s){s.tag===22?(ne(Rn,Rn.current),ne(Oi,s),oa===null&&(oa=s)):xl()}function xl(){ne(Rn,Rn.current),ne(Oi,Oi.current)}function Ci(s){K(Oi),oa===s&&(oa=null),K(Rn)}var Rn=z(0);function F0(s){for(var c=s;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||L_(m)||I_(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var os=0,mt=null,Wt=null,Gn=null,H0=!1,ld=!1,Uc=!1,G0=0,Sh=0,cd=null,oG=0;function On(){throw Error(r(321))}function Cw(s,c){if(c===null)return!1;for(var m=0;m<c.length&&m<s.length;m++)if(!ur(s[m],c[m]))return!1;return!0}function Mw(s,c,m,x,A,N){return os=N,mt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,G.H=s===null||s.memoizedState===null?nO:Kw,Uc=!1,N=m(x,A),Uc=!1,ld&&(N=wN(c,m,x,A)),xN(s),N}function xN(s){G.H=jh;var c=Wt!==null&&Wt.next!==null;if(os=0,Gn=Wt=mt=null,H0=!1,Sh=0,cd=null,c)throw Error(r(300));s===null||Yn||(s=s.dependencies,s!==null&&P0(s)&&(Yn=!0))}function wN(s,c,m,x){mt=s;var A=0;do{if(ld&&(cd=null),Sh=0,ld=!1,25<=A)throw Error(r(301));if(A+=1,Gn=Wt=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}G.H=rO,N=c(m,x)}while(ld);return N}function sG(){var s=G.H,c=s.useState()[0];return c=typeof c.then=="function"?kh(c):c,s=s.useState()[0],(Wt!==null?Wt.memoizedState:null)!==s&&(mt.flags|=1024),c}function Dw(){var s=G0!==0;return G0=0,s}function Pw(s,c,m){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~m}function Rw(s){if(H0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}H0=!1}os=0,Gn=Wt=mt=null,ld=!1,Sh=G0=0,cd=null}function qr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?mt.memoizedState=Gn=s:Gn=Gn.next=s,Gn}function Ln(){if(Wt===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Wt.next;var c=Gn===null?mt.memoizedState:Gn.next;if(c!==null)Gn=c,Wt=s;else{if(s===null)throw mt.alternate===null?Error(r(467)):Error(r(310));Wt=s,s={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Gn===null?mt.memoizedState=Gn=s:Gn=Gn.next=s}return Gn}function Y0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kh(s){var c=Sh;return Sh+=1,cd===null&&(cd=[]),s=dN(cd,s,c),c=mt,(Gn===null?c.memoizedState:Gn.next)===null&&(c=c.alternate,G.H=c===null||c.memoizedState===null?nO:Kw),s}function q0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kh(s);if(s.$$typeof===j)return kr(s)}throw Error(r(438,String(s)))}function Lw(s){var c=null,m=mt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var x=mt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=Y0(),mt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(s),x=0;x<s;x++)m[x]=q;return c.index++,m}function ss(s,c){return typeof c=="function"?c(s):c}function K0(s){var c=Ln();return Iw(c,Wt,s)}function Iw(s,c,m){var x=s.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=m;var A=s.baseQueue,N=x.pending;if(N!==null){if(A!==null){var $=A.next;A.next=N.next,N.next=$}c.baseQueue=A=N,x.pending=null}if(N=s.baseState,A===null)s.memoizedState=N;else{c=A.next;var Y=$=null,te=null,pe=c,_e=!1;do{var Te=pe.lane&-536870913;if(Te!==pe.lane?(Et&Te)===Te:(os&Te)===Te){var ye=pe.revertLane;if(ye===0)te!==null&&(te=te.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Te===rd&&(_e=!0);else if((os&ye)===ye){pe=pe.next,ye===rd&&(_e=!0);continue}else Te={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},te===null?(Y=te=Te,$=N):te=te.next=Te,mt.lanes|=ye,Sl|=ye;Te=pe.action,Uc&&m(N,Te),N=pe.hasEagerState?pe.eagerState:m(N,Te)}else ye={lane:Te,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},te===null?(Y=te=ye,$=N):te=te.next=ye,mt.lanes|=Te,Sl|=Te;pe=pe.next}while(pe!==null&&pe!==c);if(te===null?$=N:te.next=Y,!ur(N,s.memoizedState)&&(Yn=!0,_e&&(m=id,m!==null)))throw m;s.memoizedState=N,s.baseState=$,s.baseQueue=te,x.lastRenderedState=N}return A===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function $w(s){var c=Ln(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=s;var x=m.dispatch,A=m.pending,N=c.memoizedState;if(A!==null){m.pending=null;var $=A=A.next;do N=s(N,$.action),$=$.next;while($!==A);ur(N,c.memoizedState)||(Yn=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),m.lastRenderedState=N}return[N,x]}function _N(s,c,m){var x=mt,A=Ln(),N=wt;if(N){if(m===void 0)throw Error(r(407));m=m()}else m=c();var $=!ur((Wt||A).memoizedState,m);if($&&(A.memoizedState=m,Yn=!0),A=A.queue,Uw(EN.bind(null,x,A,s),[s]),A.getSnapshot!==c||$||Gn!==null&&Gn.memoizedState.tag&1){if(x.flags|=2048,ud(9,{destroy:void 0},kN.bind(null,x,A,m,c),null),Jt===null)throw Error(r(349));N||(os&127)!==0||SN(x,c,m)}return m}function SN(s,c,m){s.flags|=16384,s={getSnapshot:c,value:m},c=mt.updateQueue,c===null?(c=Y0(),mt.updateQueue=c,c.stores=[s]):(m=c.stores,m===null?c.stores=[s]:m.push(s))}function kN(s,c,m,x){c.value=m,c.getSnapshot=x,jN(c)&&TN(s)}function EN(s,c,m){return m(function(){jN(c)&&TN(s)})}function jN(s){var c=s.getSnapshot;s=s.value;try{var m=c();return!ur(s,m)}catch{return!0}}function TN(s){var c=ia(s,2);c!==null&&mi(c,s,2)}function Bw(s){var c=qr();if(typeof s=="function"){var m=s;if(s=m(),Uc){wn(!0);try{m()}finally{wn(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:s},c}function AN(s,c,m,x){return s.baseState=m,Iw(s,Wt,typeof x=="function"?x:ss)}function lG(s,c,m,x,A){if(Z0(s))throw Error(r(485));if(s=c.action,s!==null){var N={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){N.listeners.push($)}};G.T!==null?m(!0):N.isTransition=!1,x(N),m=c.pending,m===null?(N.next=c.pending=N,NN(c,N)):(N.next=m.next,c.pending=m.next=N)}}function NN(s,c){var m=c.action,x=c.payload,A=s.state;if(c.isTransition){var N=G.T,$={};G.T=$;try{var Y=m(A,x),te=G.S;te!==null&&te($,Y),ON(s,c,Y)}catch(pe){zw(s,c,pe)}finally{N!==null&&$.types!==null&&(N.types=$.types),G.T=N}}else try{N=m(A,x),ON(s,c,N)}catch(pe){zw(s,c,pe)}}function ON(s,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){CN(s,c,x)},function(x){return zw(s,c,x)}):CN(s,c,m)}function CN(s,c,m){c.status="fulfilled",c.value=m,MN(c),s.state=m,c=s.pending,c!==null&&(m=c.next,m===c?s.pending=null:(m=m.next,c.next=m,NN(s,m)))}function zw(s,c,m){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=m,MN(c),c=c.next;while(c!==x)}s.action=null}function MN(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function DN(s,c){return c}function PN(s,c){if(wt){var m=Jt.formState;if(m!==null){e:{var x=mt;if(wt){if(Mt){t:{for(var A=Mt,N=ci;A.nodeType!==8;){if(!N){A=null;break t}if(A=sa(A.nextSibling),A===null){A=null;break t}}N=A.data,A=N==="F!"||N==="F"?A:null}if(A){Mt=sa(A.nextSibling),x=A.data==="F!";break e}}So(x)}x=!1}x&&(c=m[0])}}return m=qr(),m.memoizedState=m.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DN,lastRenderedState:c},m.queue=x,m=QN.bind(null,mt,x),x.dispatch=m,x=Bw(!1),N=qw.bind(null,mt,!1,x.queue),x=qr(),A={state:c,dispatch:null,action:s,pending:null},x.queue=A,m=lG.bind(null,mt,A,N,m),A.dispatch=m,x.memoizedState=s,[c,m,!1]}function RN(s){var c=Ln();return LN(c,Wt,s)}function LN(s,c,m){if(c=Iw(s,c,DN)[0],s=K0(ss)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=kh(c)}catch($){throw $===ad?I0:$}else x=c;c=Ln();var A=c.queue,N=A.dispatch;return m!==c.memoizedState&&(mt.flags|=2048,ud(9,{destroy:void 0},cG.bind(null,A,m),null)),[x,N,s]}function cG(s,c){s.action=c}function IN(s){var c=Ln(),m=Wt;if(m!==null)return LN(c,m,s);Ln(),c=c.memoizedState,m=Ln();var x=m.queue.dispatch;return m.memoizedState=s,[c,x,!1]}function ud(s,c,m,x){return s={tag:s,create:m,deps:x,inst:c,next:null},c=mt.updateQueue,c===null&&(c=Y0(),mt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=s.next=s:(x=m.next,m.next=s,s.next=x,c.lastEffect=s),s}function $N(){return Ln().memoizedState}function W0(s,c,m,x){var A=qr();mt.flags|=s,A.memoizedState=ud(1|c,{destroy:void 0},m,x===void 0?null:x)}function V0(s,c,m,x){var A=Ln();x=x===void 0?null:x;var N=A.memoizedState.inst;Wt!==null&&x!==null&&Cw(x,Wt.memoizedState.deps)?A.memoizedState=ud(c,N,m,x):(mt.flags|=s,A.memoizedState=ud(1|c,N,m,x))}function BN(s,c){W0(8390656,8,s,c)}function Uw(s,c){V0(2048,8,s,c)}function uG(s){mt.flags|=4;var c=mt.updateQueue;if(c===null)c=Y0(),mt.updateQueue=c,c.events=[s];else{var m=c.events;m===null?c.events=[s]:m.push(s)}}function zN(s){var c=Ln().memoizedState;return uG({ref:c,nextImpl:s}),function(){if((Lt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function UN(s,c){return V0(4,2,s,c)}function FN(s,c){return V0(4,4,s,c)}function HN(s,c){if(typeof c=="function"){s=s();var m=c(s);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function GN(s,c,m){m=m!=null?m.concat([s]):null,V0(4,4,HN.bind(null,c,s),m)}function Fw(){}function YN(s,c){var m=Ln();c=c===void 0?null:c;var x=m.memoizedState;return c!==null&&Cw(c,x[1])?x[0]:(m.memoizedState=[s,c],s)}function qN(s,c){var m=Ln();c=c===void 0?null:c;var x=m.memoizedState;if(c!==null&&Cw(c,x[1]))return x[0];if(x=s(),Uc){wn(!0);try{s()}finally{wn(!1)}}return m.memoizedState=[x,c],x}function Hw(s,c,m){return m===void 0||(os&1073741824)!==0&&(Et&261930)===0?s.memoizedState=c:(s.memoizedState=m,s=KO(),mt.lanes|=s,Sl|=s,m)}function KN(s,c,m,x){return ur(m,c)?m:sd.current!==null?(s=Hw(s,m,x),ur(s,c)||(Yn=!0),s):(os&42)===0||(os&1073741824)!==0&&(Et&261930)===0?(Yn=!0,s.memoizedState=m):(s=KO(),mt.lanes|=s,Sl|=s,c)}function WN(s,c,m,x,A){var N=J.p;J.p=N!==0&&8>N?N:8;var $=G.T,Y={};G.T=Y,qw(s,!1,c,m);try{var te=A(),pe=G.S;if(pe!==null&&pe(Y,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var _e=aG(te,x);Eh(s,c,_e,Pi(s))}else Eh(s,c,x,Pi(s))}catch(Te){Eh(s,c,{then:function(){},status:"rejected",reason:Te},Pi())}finally{J.p=N,$!==null&&Y.types!==null&&($.types=Y.types),G.T=$}}function dG(){}function Gw(s,c,m,x){if(s.tag!==5)throw Error(r(476));var A=VN(s).queue;WN(s,A,c,Q,m===null?dG:function(){return ZN(s),m(x)})}function VN(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:Q},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:m},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function ZN(s){var c=VN(s);c.next===null&&(c=s.alternate.memoizedState),Eh(s,c.next.queue,{},Pi())}function Yw(){return kr(Fh)}function XN(){return Ln().memoizedState}function JN(){return Ln().memoizedState}function fG(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var m=Pi();s=bl(m);var x=yl(c,s,m);x!==null&&(mi(x,c,m),xh(x,c,m)),c={cache:xw()},s.payload=c;return}c=c.return}}function hG(s,c,m){var x=Pi();m={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Z0(s)?eO(c,m):(m=uh(s,c,m,x),m!==null&&(mi(m,s,x),tO(m,c,x)))}function QN(s,c,m){var x=Pi();Eh(s,c,m,x)}function Eh(s,c,m,x){var A={lane:x,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Z0(s))eO(c,A);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var $=c.lastRenderedState,Y=N($,m);if(A.hasEagerState=!0,A.eagerState=Y,ur(Y,$))return wo(s,c,A,0),Jt===null&&Cc(),!1}catch{}finally{}if(m=uh(s,c,A,x),m!==null)return mi(m,s,x),tO(m,c,x),!0}return!1}function qw(s,c,m,x){if(x={lane:2,revertLane:k_(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Z0(s)){if(c)throw Error(r(479))}else c=uh(s,m,x,2),c!==null&&mi(c,s,2)}function Z0(s){var c=s.alternate;return s===mt||c!==null&&c===mt}function eO(s,c){ld=H0=!0;var m=s.pending;m===null?c.next=c:(c.next=m.next,m.next=c),s.pending=c}function tO(s,c,m){if((m&4194048)!==0){var x=c.lanes;x&=s.pendingLanes,m|=x,c.lanes=m,s0(s,m)}}var jh={readContext:kr,use:q0,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};jh.useEffectEvent=On;var nO={readContext:kr,use:q0,useCallback:function(s,c){return qr().memoizedState=[s,c===void 0?null:c],s},useContext:kr,useEffect:BN,useImperativeHandle:function(s,c,m){m=m!=null?m.concat([s]):null,W0(4194308,4,HN.bind(null,c,s),m)},useLayoutEffect:function(s,c){return W0(4194308,4,s,c)},useInsertionEffect:function(s,c){W0(4,2,s,c)},useMemo:function(s,c){var m=qr();c=c===void 0?null:c;var x=s();if(Uc){wn(!0);try{s()}finally{wn(!1)}}return m.memoizedState=[x,c],x},useReducer:function(s,c,m){var x=qr();if(m!==void 0){var A=m(c);if(Uc){wn(!0);try{m(c)}finally{wn(!1)}}}else A=c;return x.memoizedState=x.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},x.queue=s,s=s.dispatch=hG.bind(null,mt,s),[x.memoizedState,s]},useRef:function(s){var c=qr();return s={current:s},c.memoizedState=s},useState:function(s){s=Bw(s);var c=s.queue,m=QN.bind(null,mt,c);return c.dispatch=m,[s.memoizedState,m]},useDebugValue:Fw,useDeferredValue:function(s,c){var m=qr();return Hw(m,s,c)},useTransition:function(){var s=Bw(!1);return s=WN.bind(null,mt,s.queue,!0,!1),qr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,m){var x=mt,A=qr();if(wt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=c(),Jt===null)throw Error(r(349));(Et&127)!==0||SN(x,c,m)}A.memoizedState=m;var N={value:m,getSnapshot:c};return A.queue=N,BN(EN.bind(null,x,N,s),[s]),x.flags|=2048,ud(9,{destroy:void 0},kN.bind(null,x,N,m,c),null),m},useId:function(){var s=qr(),c=Jt.identifierPrefix;if(wt){var m=$e,x=je;m=(x&~(1<<32-Tn(x)-1)).toString(32)+m,c="_"+c+"R_"+m,m=G0++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=oG++,c="_"+c+"r_"+m.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:Yw,useFormState:PN,useActionState:PN,useOptimistic:function(s){var c=qr();c.memoizedState=c.baseState=s;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=qw.bind(null,mt,!0,m),m.dispatch=c,[s,c]},useMemoCache:Lw,useCacheRefresh:function(){return qr().memoizedState=fG.bind(null,mt)},useEffectEvent:function(s){var c=qr(),m={impl:s};return c.memoizedState=m,function(){if((Lt&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},Kw={readContext:kr,use:q0,useCallback:YN,useContext:kr,useEffect:Uw,useImperativeHandle:GN,useInsertionEffect:UN,useLayoutEffect:FN,useMemo:qN,useReducer:K0,useRef:$N,useState:function(){return K0(ss)},useDebugValue:Fw,useDeferredValue:function(s,c){var m=Ln();return KN(m,Wt.memoizedState,s,c)},useTransition:function(){var s=K0(ss)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:kh(s),c]},useSyncExternalStore:_N,useId:XN,useHostTransitionStatus:Yw,useFormState:RN,useActionState:RN,useOptimistic:function(s,c){var m=Ln();return AN(m,Wt,s,c)},useMemoCache:Lw,useCacheRefresh:JN};Kw.useEffectEvent=zN;var rO={readContext:kr,use:q0,useCallback:YN,useContext:kr,useEffect:Uw,useImperativeHandle:GN,useInsertionEffect:UN,useLayoutEffect:FN,useMemo:qN,useReducer:$w,useRef:$N,useState:function(){return $w(ss)},useDebugValue:Fw,useDeferredValue:function(s,c){var m=Ln();return Wt===null?Hw(m,s,c):KN(m,Wt.memoizedState,s,c)},useTransition:function(){var s=$w(ss)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:kh(s),c]},useSyncExternalStore:_N,useId:XN,useHostTransitionStatus:Yw,useFormState:IN,useActionState:IN,useOptimistic:function(s,c){var m=Ln();return Wt!==null?AN(m,Wt,s,c):(m.baseState=s,[s,m.queue.dispatch])},useMemoCache:Lw,useCacheRefresh:JN};rO.useEffectEvent=zN;function Ww(s,c,m,x){c=s.memoizedState,m=m(x,c),m=m==null?c:p({},c,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var Vw={enqueueSetState:function(s,c,m){s=s._reactInternals;var x=Pi(),A=bl(x);A.payload=c,m!=null&&(A.callback=m),c=yl(s,A,x),c!==null&&(mi(c,s,x),xh(c,s,x))},enqueueReplaceState:function(s,c,m){s=s._reactInternals;var x=Pi(),A=bl(x);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=yl(s,A,x),c!==null&&(mi(c,s,x),xh(c,s,x))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var m=Pi(),x=bl(m);x.tag=2,c!=null&&(x.callback=c),c=yl(s,x,m),c!==null&&(mi(c,s,m),xh(c,s,m))}};function iO(s,c,m,x,A,N,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,N,$):c.prototype&&c.prototype.isPureReactComponent?!ul(m,x)||!ul(A,N):!0}function aO(s,c,m,x){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==s&&Vw.enqueueReplaceState(c,c.state,null)}function Fc(s,c){var m=c;if("ref"in c){m={};for(var x in c)x!=="ref"&&(m[x]=c[x])}if(s=s.defaultProps){m===c&&(m=p({},m));for(var A in s)m[A]===void 0&&(m[A]=s[A])}return m}function oO(s){Oc(s)}function sO(s){console.error(s)}function lO(s){Oc(s)}function X0(s,c){try{var m=s.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function cO(s,c,m){try{var x=s.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Zw(s,c,m){return m=bl(m),m.tag=3,m.payload={element:null},m.callback=function(){X0(s,c)},m}function uO(s){return s=bl(s),s.tag=3,s}function dO(s,c,m,x){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var N=x.value;s.payload=function(){return A(N)},s.callback=function(){cO(c,m,x)}}var $=m.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(s.callback=function(){cO(c,m,x),typeof A!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var Y=x.stack;this.componentDidCatch(x.value,{componentStack:Y!==null?Y:""})})}function mG(s,c,m,x,A){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=m.alternate,c!==null&&nd(c,m,A,!0),m=Oi.current,m!==null){switch(m.tag){case 31:case 13:return oa===null?cg():m.alternate===null&&Cn===0&&(Cn=3),m.flags&=-257,m.flags|=65536,m.lanes=A,x===$0?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([x]):c.add(x),w_(s,x,A)),!1;case 22:return m.flags|=65536,x===$0?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([x]):m.add(x)),w_(s,x,A)),!1}throw Error(r(435,m.tag))}return w_(s,x,A),cg(),!1}if(wt)return c=Oi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,x!==td&&(s=Error(r(422),{cause:x}),Pc(v(s,m)))):(x!==td&&(c=Error(r(423),{cause:x}),Pc(v(c,m))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,x=v(x,m),A=Zw(s.stateNode,x,A),jw(s,A),Cn!==4&&(Cn=2)),!1;var N=Error(r(520),{cause:x});if(N=v(N,m),Ph===null?Ph=[N]:Ph.push(N),Cn!==4&&(Cn=2),c===null)return!0;x=v(x,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,s=A&-A,m.lanes|=s,s=Zw(m.stateNode,x,s),jw(m,s),!1;case 1:if(c=m.type,N=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(kl===null||!kl.has(N))))return m.flags|=65536,A&=-A,m.lanes|=A,A=uO(A),dO(A,s,m,x),jw(m,A),!1}m=m.return}while(m!==null);return!1}var Xw=Error(r(461)),Yn=!1;function Er(s,c,m,x){c.child=s===null?pN(c,null,m,x):zc(c,s.child,m,x)}function fO(s,c,m,x,A){m=m.render;var N=c.ref;if("ref"in x){var $={};for(var Y in x)Y!=="ref"&&($[Y]=x[Y])}else $=x;return Lc(c),x=Mw(s,c,m,$,N,A),Y=Dw(),s!==null&&!Yn?(Pw(s,c,A),ls(s,c,A)):(wt&&Y&&er(c),c.flags|=1,Er(s,c,x,A),c.child)}function hO(s,c,m,x,A){if(s===null){var N=m.type;return typeof N=="function"&&!Qu(N)&&N.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=N,mO(s,c,N,x,A)):(s=Dc(m.type,null,x,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(N=s.child,!a_(s,A)){var $=N.memoizedProps;if(m=m.compare,m=m!==null?m:ul,m($,x)&&s.ref===c.ref)return ls(s,c,A)}return c.flags|=1,s=aa(N,x),s.ref=c.ref,s.return=c,c.child=s}function mO(s,c,m,x,A){if(s!==null){var N=s.memoizedProps;if(ul(N,x)&&s.ref===c.ref)if(Yn=!1,c.pendingProps=x=N,a_(s,A))(s.flags&131072)!==0&&(Yn=!0);else return c.lanes=s.lanes,ls(s,c,A)}return Jw(s,c,m,x,A)}function pO(s,c,m,x){var A=x.children,N=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(N=N!==null?N.baseLanes|m:m,s!==null){for(x=c.child=s.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;x=A&~N}else x=0,c.child=null;return gO(s,c,N,m,x)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&L0(c,N!==null?N.cachePool:null),N!==null?yN(c,N):Aw(),vN(c);else return x=c.lanes=536870912,gO(s,c,N!==null?N.baseLanes|m:m,m,x)}else N!==null?(L0(c,N.cachePool),yN(c,N),xl(),c.memoizedState=null):(s!==null&&L0(c,null),Aw(),xl());return Er(s,c,A,m),c.child}function Th(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function gO(s,c,m,x,A){var N=_w();return N=N===null?null:{parent:Hn._currentValue,pool:N},c.memoizedState={baseLanes:m,cachePool:N},s!==null&&L0(c,null),Aw(),vN(c),s!==null&&nd(s,c,x,!0),c.childLanes=A,null}function J0(s,c){return c=eg({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function bO(s,c,m){return zc(c,s.child,null,m),s=J0(c,c.pendingProps),s.flags|=2,Ci(c),c.memoizedState=null,s}function pG(s,c,m){var x=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(wt){if(x.mode==="hidden")return s=J0(c,x),c.lanes=536870912,Th(null,s);if(Ow(c),(s=Mt)?(s=NC(s,ci),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:je,overflow:$e}:null,retryLane:536870912,hydrationErrors:null},m=fh(s),m.return=c,c.child=m,Ct=c,Mt=null)):s=null,s===null)throw So(c);return c.lanes=536870912,null}return J0(c,x)}var N=s.memoizedState;if(N!==null){var $=N.dehydrated;if(Ow(c),A)if(c.flags&256)c.flags&=-257,c=bO(s,c,m);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(Yn||nd(s,c,m,!1),A=(m&s.childLanes)!==0,Yn||A){if(x=Jt,x!==null&&($=l0(x,m),$!==0&&$!==N.retryLane))throw N.retryLane=$,ia(s,$),mi(x,s,$),Xw;cg(),c=bO(s,c,m)}else s=N.treeContext,Mt=sa($.nextSibling),Ct=c,wt=!0,_o=null,ci=!1,s!==null&&Yr(c,s),c=J0(c,x),c.flags|=4096;return c}return s=aa(s.child,{mode:x.mode,children:x.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Q0(s,c){var m=c.ref;if(m===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(s===null||s.ref!==m)&&(c.flags|=4194816)}}function Jw(s,c,m,x,A){return Lc(c),m=Mw(s,c,m,x,void 0,A),x=Dw(),s!==null&&!Yn?(Pw(s,c,A),ls(s,c,A)):(wt&&x&&er(c),c.flags|=1,Er(s,c,m,A),c.child)}function yO(s,c,m,x,A,N){return Lc(c),c.updateQueue=null,m=wN(c,x,m,A),xN(s),x=Dw(),s!==null&&!Yn?(Pw(s,c,N),ls(s,c,N)):(wt&&x&&er(c),c.flags|=1,Er(s,c,m,N),c.child)}function vO(s,c,m,x,A){if(Lc(c),c.stateNode===null){var N=ns,$=m.contextType;typeof $=="object"&&$!==null&&(N=kr($)),N=new m(x,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Vw,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=x,N.state=c.memoizedState,N.refs={},kw(c),$=m.contextType,N.context=typeof $=="object"&&$!==null?kr($):ns,N.state=c.memoizedState,$=m.getDerivedStateFromProps,typeof $=="function"&&(Ww(c,m,$,x),N.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||($=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),$!==N.state&&Vw.enqueueReplaceState(N,N.state,null),_h(c,x,N,A),wh(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(s===null){N=c.stateNode;var Y=c.memoizedProps,te=Fc(m,Y);N.props=te;var pe=N.context,_e=m.contextType;$=ns,typeof _e=="object"&&_e!==null&&($=kr(_e));var Te=m.getDerivedStateFromProps;_e=typeof Te=="function"||typeof N.getSnapshotBeforeUpdate=="function",Y=c.pendingProps!==Y,_e||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y||pe!==$)&&aO(c,N,x,$),gl=!1;var ye=c.memoizedState;N.state=ye,_h(c,x,N,A),wh(),pe=c.memoizedState,Y||ye!==pe||gl?(typeof Te=="function"&&(Ww(c,m,Te,x),pe=c.memoizedState),(te=gl||iO(c,m,te,x,ye,pe,$))?(_e||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=pe),N.props=x,N.state=pe,N.context=$,x=te):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{N=c.stateNode,Ew(s,c),$=c.memoizedProps,_e=Fc(m,$),N.props=_e,Te=c.pendingProps,ye=N.context,pe=m.contextType,te=ns,typeof pe=="object"&&pe!==null&&(te=kr(pe)),Y=m.getDerivedStateFromProps,(pe=typeof Y=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==Te||ye!==te)&&aO(c,N,x,te),gl=!1,ye=c.memoizedState,N.state=ye,_h(c,x,N,A),wh();var ve=c.memoizedState;$!==Te||ye!==ve||gl||s!==null&&s.dependencies!==null&&P0(s.dependencies)?(typeof Y=="function"&&(Ww(c,m,Y,x),ve=c.memoizedState),(_e=gl||iO(c,m,_e,x,ye,ve,te)||s!==null&&s.dependencies!==null&&P0(s.dependencies))?(pe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,ve,te),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,ve,te)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=ve),N.props=x,N.state=ve,N.context=te,x=_e):(typeof N.componentDidUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),x=!1)}return N=x,Q0(s,c),x=(c.flags&128)!==0,N||x?(N=c.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,s!==null&&x?(c.child=zc(c,s.child,null,A),c.child=zc(c,null,m,A)):Er(s,c,m,A),c.memoizedState=N.state,s=c.child):s=ls(s,c,A),s}function xO(s,c,m,x){return is(),c.flags|=256,Er(s,c,m,x),c.child}var Qw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e_(s){return{baseLanes:s,cachePool:cN()}}function t_(s,c,m){return s=s!==null?s.childLanes&~m:0,c&&(s|=Di),s}function wO(s,c,m){var x=c.pendingProps,A=!1,N=(c.flags&128)!==0,$;if(($=N)||($=s!==null&&s.memoizedState===null?!1:(Rn.current&2)!==0),$&&(A=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,s===null){if(wt){if(A?vl(c):xl(),(s=Mt)?(s=NC(s,ci),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:je,overflow:$e}:null,retryLane:536870912,hydrationErrors:null},m=fh(s),m.return=c,c.child=m,Ct=c,Mt=null)):s=null,s===null)throw So(c);return I_(s)?c.lanes=32:c.lanes=536870912,null}var Y=x.children;return x=x.fallback,A?(xl(),A=c.mode,Y=eg({mode:"hidden",children:Y},A),x=rs(x,A,m,null),Y.return=c,x.return=c,Y.sibling=x,c.child=Y,x=c.child,x.memoizedState=e_(m),x.childLanes=t_(s,$,m),c.memoizedState=Qw,Th(null,x)):(vl(c),n_(c,Y))}var te=s.memoizedState;if(te!==null&&(Y=te.dehydrated,Y!==null)){if(N)c.flags&256?(vl(c),c.flags&=-257,c=r_(s,c,m)):c.memoizedState!==null?(xl(),c.child=s.child,c.flags|=128,c=null):(xl(),Y=x.fallback,A=c.mode,x=eg({mode:"visible",children:x.children},A),Y=rs(Y,A,m,null),Y.flags|=2,x.return=c,Y.return=c,x.sibling=Y,c.child=x,zc(c,s.child,null,m),x=c.child,x.memoizedState=e_(m),x.childLanes=t_(s,$,m),c.memoizedState=Qw,c=Th(null,x));else if(vl(c),I_(Y)){if($=Y.nextSibling&&Y.nextSibling.dataset,$)var pe=$.dgst;$=pe,x=Error(r(419)),x.stack="",x.digest=$,Pc({value:x,source:null,stack:null}),c=r_(s,c,m)}else if(Yn||nd(s,c,m,!1),$=(m&s.childLanes)!==0,Yn||$){if($=Jt,$!==null&&(x=l0($,m),x!==0&&x!==te.retryLane))throw te.retryLane=x,ia(s,x),mi($,s,x),Xw;L_(Y)||cg(),c=r_(s,c,m)}else L_(Y)?(c.flags|=192,c.child=s.child,c=null):(s=te.treeContext,Mt=sa(Y.nextSibling),Ct=c,wt=!0,_o=null,ci=!1,s!==null&&Yr(c,s),c=n_(c,x.children),c.flags|=4096);return c}return A?(xl(),Y=x.fallback,A=c.mode,te=s.child,pe=te.sibling,x=aa(te,{mode:"hidden",children:x.children}),x.subtreeFlags=te.subtreeFlags&65011712,pe!==null?Y=aa(pe,Y):(Y=rs(Y,A,m,null),Y.flags|=2),Y.return=c,x.return=c,x.sibling=Y,c.child=x,Th(null,x),x=c.child,Y=s.child.memoizedState,Y===null?Y=e_(m):(A=Y.cachePool,A!==null?(te=Hn._currentValue,A=A.parent!==te?{parent:te,pool:te}:A):A=cN(),Y={baseLanes:Y.baseLanes|m,cachePool:A}),x.memoizedState=Y,x.childLanes=t_(s,$,m),c.memoizedState=Qw,Th(s.child,x)):(vl(c),m=s.child,s=m.sibling,m=aa(m,{mode:"visible",children:x.children}),m.return=c,m.sibling=null,s!==null&&($=c.deletions,$===null?(c.deletions=[s],c.flags|=16):$.push(s)),c.child=m,c.memoizedState=null,m)}function n_(s,c){return c=eg({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function eg(s,c){return s=Ir(22,s,null,c),s.lanes=0,s}function r_(s,c,m){return zc(c,s.child,null,m),s=n_(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function _O(s,c,m){s.lanes|=c;var x=s.alternate;x!==null&&(x.lanes|=c),yw(s.return,c,m)}function i_(s,c,m,x,A,N){var $=s.memoizedState;$===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:A,treeForkCount:N}:($.isBackwards=c,$.rendering=null,$.renderingStartTime=0,$.last=x,$.tail=m,$.tailMode=A,$.treeForkCount=N)}function SO(s,c,m){var x=c.pendingProps,A=x.revealOrder,N=x.tail;x=x.children;var $=Rn.current,Y=($&2)!==0;if(Y?($=$&1|2,c.flags|=128):$&=1,ne(Rn,$),Er(s,c,x,m),x=wt?F:0,!Y&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_O(s,m,c);else if(s.tag===19)_O(s,m,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(m=c.child,A=null;m!==null;)s=m.alternate,s!==null&&F0(s)===null&&(A=m),m=m.sibling;m=A,m===null?(A=c.child,c.child=null):(A=m.sibling,m.sibling=null),i_(c,!1,A,m,N,x);break;case"backwards":case"unstable_legacy-backwards":for(m=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&F0(s)===null){c.child=A;break}s=A.sibling,A.sibling=m,m=A,A=s}i_(c,!0,m,null,N,x);break;case"together":i_(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function ls(s,c,m){if(s!==null&&(c.dependencies=s.dependencies),Sl|=c.lanes,(m&c.childLanes)===0)if(s!==null){if(nd(s,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,m=aa(s,s.pendingProps),c.child=m,m.return=c;s.sibling!==null;)s=s.sibling,m=m.sibling=aa(s,s.pendingProps),m.return=c;m.sibling=null}return c.child}function a_(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&P0(s)))}function gG(s,c,m){switch(c.tag){case 3:ke(c,c.stateNode.containerInfo),pl(c,Hn,s.memoizedState.cache),is();break;case 27:case 5:Ae(c);break;case 4:ke(c,c.stateNode.containerInfo);break;case 10:pl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Ow(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(vl(c),c.flags|=128,null):(m&c.child.childLanes)!==0?wO(s,c,m):(vl(c),s=ls(s,c,m),s!==null?s.sibling:null);vl(c);break;case 19:var A=(s.flags&128)!==0;if(x=(m&c.childLanes)!==0,x||(nd(s,c,m,!1),x=(m&c.childLanes)!==0),A){if(x)return SO(s,c,m);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ne(Rn,Rn.current),x)break;return null;case 22:return c.lanes=0,pO(s,c,m,c.pendingProps);case 24:pl(c,Hn,s.memoizedState.cache)}return ls(s,c,m)}function kO(s,c,m){if(s!==null)if(s.memoizedProps!==c.pendingProps)Yn=!0;else{if(!a_(s,m)&&(c.flags&128)===0)return Yn=!1,gG(s,c,m);Yn=(s.flags&131072)!==0}else Yn=!1,wt&&(c.flags&1048576)!==0&&gt(c,F,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(s=$c(c.elementType),c.type=s,typeof s=="function")Qu(s)?(x=Fc(s,x),c.tag=1,c=vO(null,c,s,x,m)):(c.tag=0,c=Jw(null,c,s,x,m));else{if(s!=null){var A=s.$$typeof;if(A===C){c.tag=11,c=fO(null,c,s,x,m);break e}else if(A===I){c.tag=14,c=hO(null,c,s,x,m);break e}}throw c=Z(s)||s,Error(r(306,c,""))}}return c;case 0:return Jw(s,c,c.type,c.pendingProps,m);case 1:return x=c.type,A=Fc(x,c.pendingProps),vO(s,c,x,A,m);case 3:e:{if(ke(c,c.stateNode.containerInfo),s===null)throw Error(r(387));x=c.pendingProps;var N=c.memoizedState;A=N.element,Ew(s,c),_h(c,x,null,m);var $=c.memoizedState;if(x=$.cache,pl(c,Hn,x),x!==N.cache&&vw(c,[Hn],m,!0),wh(),x=$.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=xO(s,c,x,m);break e}else if(x!==A){A=v(Error(r(424)),c),Pc(A),c=xO(s,c,x,m);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=sa(s.firstChild),Ct=c,wt=!0,_o=null,ci=!0,m=pN(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(is(),x===A){c=ls(s,c,m);break e}Er(s,c,x,m)}c=c.child}return c;case 26:return Q0(s,c),s===null?(m=RC(c.type,null,c.pendingProps,null))?c.memoizedState=m:wt||(m=c.type,s=c.pendingProps,x=gg(ue.current).createElement(m),x[Un]=c,x[cr]=s,jr(x,m,s),Fn(x),c.stateNode=x):c.memoizedState=RC(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Ae(c),s===null&&wt&&(x=c.stateNode=MC(c.type,c.pendingProps,ue.current),Ct=c,ci=!0,A=Mt,Al(c.type)?($_=A,Mt=sa(x.firstChild)):Mt=A),Er(s,c,c.pendingProps.children,m),Q0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&wt&&((A=x=Mt)&&(x=qG(x,c.type,c.pendingProps,ci),x!==null?(c.stateNode=x,Ct=c,Mt=sa(x.firstChild),ci=!1,A=!0):A=!1),A||So(c)),Ae(c),A=c.type,N=c.pendingProps,$=s!==null?s.memoizedProps:null,x=N.children,D_(A,N)?x=null:$!==null&&D_(A,$)&&(c.flags|=32),c.memoizedState!==null&&(A=Mw(s,c,sG,null,null,m),Fh._currentValue=A),Q0(s,c),Er(s,c,x,m),c.child;case 6:return s===null&&wt&&((s=m=Mt)&&(m=KG(m,c.pendingProps,ci),m!==null?(c.stateNode=m,Ct=c,Mt=null,s=!0):s=!1),s||So(c)),null;case 13:return wO(s,c,m);case 4:return ke(c,c.stateNode.containerInfo),x=c.pendingProps,s===null?c.child=zc(c,null,x,m):Er(s,c,x,m),c.child;case 11:return fO(s,c,c.type,c.pendingProps,m);case 7:return Er(s,c,c.pendingProps,m),c.child;case 8:return Er(s,c,c.pendingProps.children,m),c.child;case 12:return Er(s,c,c.pendingProps.children,m),c.child;case 10:return x=c.pendingProps,pl(c,c.type,x.value),Er(s,c,x.children,m),c.child;case 9:return A=c.type._context,x=c.pendingProps.children,Lc(c),A=kr(A),x=x(A),c.flags|=1,Er(s,c,x,m),c.child;case 14:return hO(s,c,c.type,c.pendingProps,m);case 15:return mO(s,c,c.type,c.pendingProps,m);case 19:return SO(s,c,m);case 31:return pG(s,c,m);case 22:return pO(s,c,m,c.pendingProps);case 24:return Lc(c),x=kr(Hn),s===null?(A=_w(),A===null&&(A=Jt,N=xw(),A.pooledCache=N,N.refCount++,N!==null&&(A.pooledCacheLanes|=m),A=N),c.memoizedState={parent:x,cache:A},kw(c),pl(c,Hn,A)):((s.lanes&m)!==0&&(Ew(s,c),_h(c,null,null,m),wh()),A=s.memoizedState,N=c.memoizedState,A.parent!==x?(A={parent:x,cache:x},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),pl(c,Hn,x)):(x=N.cache,pl(c,Hn,x),x!==A.cache&&vw(c,[Hn],m,!0))),Er(s,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function cs(s){s.flags|=4}function o_(s,c,m,x,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(XO())s.flags|=8192;else throw Bc=$0,Sw}else s.flags&=-16777217}function EO(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zC(c))if(XO())s.flags|=8192;else throw Bc=$0,Sw}function tg(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?a0():536870912,s.lanes|=c,md|=c)}function Ah(s,c){if(!wt)switch(s.tailMode){case"hidden":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function sn(s){var c=s.alternate!==null&&s.alternate.child===s.child,m=0,x=0;if(c)for(var A=s.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags&65011712,x|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=x,s.childLanes=m,c}function bG(s,c,m){var x=c.pendingProps;switch(Nn(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(c),null;case 1:return sn(c),null;case 3:return m=c.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),as(Hn),ie(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&($a(c)?cs(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ph())),sn(c),null;case 26:var A=c.type,N=c.memoizedState;return s===null?(cs(c),N!==null?(sn(c),EO(c,N)):(sn(c),o_(c,A,null,x,m))):N?N!==s.memoizedState?(cs(c),sn(c),EO(c,N)):(sn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==x&&cs(c),sn(c),o_(c,A,s,x,m)),null;case 27:if(Ee(c),m=ue.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&cs(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return sn(c),null}s=re.current,$a(c)?mh(c):(s=MC(A,x,m),c.stateNode=s,cs(c))}return sn(c),null;case 5:if(Ee(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&cs(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return sn(c),null}if(N=re.current,$a(c))mh(c);else{var $=gg(ue.current);switch(N){case 1:N=$.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:N=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":N=$.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":N=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":N=$.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof x.is=="string"?$.createElement("select",{is:x.is}):$.createElement("select"),x.multiple?N.multiple=!0:x.size&&(N.size=x.size);break;default:N=typeof x.is=="string"?$.createElement(A,{is:x.is}):$.createElement(A)}}N[Un]=c,N[cr]=x;e:for($=c.child;$!==null;){if($.tag===5||$.tag===6)N.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}c.stateNode=N;e:switch(jr(N,A,x),A){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&cs(c)}}return sn(c),o_(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,m),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==x&&cs(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(r(166));if(s=ue.current,$a(c)){if(s=c.stateNode,m=c.memoizedProps,x=null,A=Ct,A!==null)switch(A.tag){case 27:case 5:x=A.memoizedProps}s[Un]=c,s=!!(s.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||wC(s.nodeValue,m)),s||So(c,!0)}else s=gg(s).createTextNode(x),s[Un]=c,c.stateNode=s}return sn(c),null;case 31:if(m=c.memoizedState,s===null||s.memoizedState!==null){if(x=$a(c),m!==null){if(s===null){if(!x)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Un]=c}else is(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;sn(c),s=!1}else m=ph(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),s=!0;if(!s)return c.flags&256?(Ci(c),c):(Ci(c),null);if((c.flags&128)!==0)throw Error(r(558))}return sn(c),null;case 13:if(x=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=$a(c),x!==null&&x.dehydrated!==null){if(s===null){if(!A)throw Error(r(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Un]=c}else is(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;sn(c),A=!1}else A=ph(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Ci(c),c):(Ci(c),null)}return Ci(c),(c.flags&128)!==0?(c.lanes=m,c):(m=x!==null,s=s!==null&&s.memoizedState!==null,m&&(x=c.child,A=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(A=x.alternate.memoizedState.cachePool.pool),N=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(N=x.memoizedState.cachePool.pool),N!==A&&(x.flags|=2048)),m!==s&&m&&(c.child.flags|=8192),tg(c,c.updateQueue),sn(c),null);case 4:return ie(),s===null&&A_(c.stateNode.containerInfo),sn(c),null;case 10:return as(c.type),sn(c),null;case 19:if(K(Rn),x=c.memoizedState,x===null)return sn(c),null;if(A=(c.flags&128)!==0,N=x.rendering,N===null)if(A)Ah(x,!1);else{if(Cn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(N=F0(s),N!==null){for(c.flags|=128,Ah(x,!1),s=N.updateQueue,c.updateQueue=s,tg(c,s),c.subtreeFlags=0,s=m,m=c.child;m!==null;)dh(m,s),m=m.sibling;return ne(Rn,Rn.current&1|2),wt&&Ze(c,x.treeForkCount),c.child}s=s.sibling}x.tail!==null&&Ye()>og&&(c.flags|=128,A=!0,Ah(x,!1),c.lanes=4194304)}else{if(!A)if(s=F0(N),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,tg(c,s),Ah(x,!0),x.tail===null&&x.tailMode==="hidden"&&!N.alternate&&!wt)return sn(c),null}else 2*Ye()-x.renderingStartTime>og&&m!==536870912&&(c.flags|=128,A=!0,Ah(x,!1),c.lanes=4194304);x.isBackwards?(N.sibling=c.child,c.child=N):(s=x.last,s!==null?s.sibling=N:c.child=N,x.last=N)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=Ye(),s.sibling=null,m=Rn.current,ne(Rn,A?m&1|2:m&1),wt&&Ze(c,x.treeForkCount),s):(sn(c),null);case 22:case 23:return Ci(c),Nw(),x=c.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(m&536870912)!==0&&(c.flags&128)===0&&(sn(c),c.subtreeFlags&6&&(c.flags|=8192)):sn(c),m=c.updateQueue,m!==null&&tg(c,m.retryQueue),m=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==m&&(c.flags|=2048),s!==null&&K(Ic),null;case 24:return m=null,s!==null&&(m=s.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),as(Hn),sn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function yG(s,c){switch(Nn(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return as(Hn),ie(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return Ee(c),null;case 31:if(c.memoizedState!==null){if(Ci(c),c.alternate===null)throw Error(r(340));is()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Ci(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));is()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return K(Rn),null;case 4:return ie(),null;case 10:return as(c.type),null;case 22:case 23:return Ci(c),Nw(),s!==null&&K(Ic),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return as(Hn),null;case 25:return null;default:return null}}function jO(s,c){switch(Nn(c),c.tag){case 3:as(Hn),ie();break;case 26:case 27:case 5:Ee(c);break;case 4:ie();break;case 31:c.memoizedState!==null&&Ci(c);break;case 13:Ci(c);break;case 19:K(Rn);break;case 10:as(c.type);break;case 22:case 23:Ci(c),Nw(),s!==null&&K(Ic);break;case 24:as(Hn)}}function Nh(s,c){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&s)===s){x=void 0;var N=m.create,$=m.inst;x=N(),$.destroy=x}m=m.next}while(m!==A)}}catch(Y){Yt(c,c.return,Y)}}function wl(s,c,m){try{var x=c.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var N=A.next;x=N;do{if((x.tag&s)===s){var $=x.inst,Y=$.destroy;if(Y!==void 0){$.destroy=void 0,A=c;var te=m,pe=Y;try{pe()}catch(_e){Yt(A,te,_e)}}}x=x.next}while(x!==N)}}catch(_e){Yt(c,c.return,_e)}}function TO(s){var c=s.updateQueue;if(c!==null){var m=s.stateNode;try{bN(c,m)}catch(x){Yt(s,s.return,x)}}}function AO(s,c,m){m.props=Fc(s.type,s.memoizedProps),m.state=s.memoizedState;try{m.componentWillUnmount()}catch(x){Yt(s,c,x)}}function Oh(s,c){try{var m=s.ref;if(m!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof m=="function"?s.refCleanup=m(x):m.current=x}}catch(A){Yt(s,c,A)}}function Eo(s,c){var m=s.ref,x=s.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(A){Yt(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){Yt(s,c,A)}else m.current=null}function NO(s){var c=s.type,m=s.memoizedProps,x=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(A){Yt(s,s.return,A)}}function s_(s,c,m){try{var x=s.stateNode;zG(x,s.type,m,c),x[cr]=c}catch(A){Yt(s,s.return,A)}}function OO(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Al(s.type)||s.tag===4}function l_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||OO(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Al(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function c_(s,c,m){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(s,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(s),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=ai));else if(x!==4&&(x===27&&Al(s.type)&&(m=s.stateNode,c=null),s=s.child,s!==null))for(c_(s,c,m),s=s.sibling;s!==null;)c_(s,c,m),s=s.sibling}function ng(s,c,m){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?m.insertBefore(s,c):m.appendChild(s);else if(x!==4&&(x===27&&Al(s.type)&&(m=s.stateNode),s=s.child,s!==null))for(ng(s,c,m),s=s.sibling;s!==null;)ng(s,c,m),s=s.sibling}function CO(s){var c=s.stateNode,m=s.memoizedProps;try{for(var x=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);jr(c,x,m),c[Un]=s,c[cr]=m}catch(N){Yt(s,s.return,N)}}var us=!1,qn=!1,u_=!1,MO=typeof WeakSet=="function"?WeakSet:Set,fr=null;function vG(s,c){if(s=s.containerInfo,C_=Sg,s=jc(s),bo(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var A=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var $=0,Y=-1,te=-1,pe=0,_e=0,Te=s,ye=null;t:for(;;){for(var ve;Te!==m||A!==0&&Te.nodeType!==3||(Y=$+A),Te!==N||x!==0&&Te.nodeType!==3||(te=$+x),Te.nodeType===3&&($+=Te.nodeValue.length),(ve=Te.firstChild)!==null;)ye=Te,Te=ve;for(;;){if(Te===s)break t;if(ye===m&&++pe===A&&(Y=$),ye===N&&++_e===x&&(te=$),(ve=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=ve}m=Y===-1||te===-1?null:{start:Y,end:te}}else m=null}m=m||{start:0,end:0}}else m=null;for(M_={focusedElem:s,selectionRange:m},Sg=!1,fr=c;fr!==null;)if(c=fr,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,fr=s;else for(;fr!==null;){switch(c=fr,N=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(m=0;m<s.length;m++)A=s[m],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&N!==null){s=void 0,m=c,A=N.memoizedProps,N=N.memoizedState,x=m.stateNode;try{var He=Fc(m.type,A);s=x.getSnapshotBeforeUpdate(He,N),x.__reactInternalSnapshotBeforeUpdate=s}catch(ot){Yt(m,m.return,ot)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,m=s.nodeType,m===9)R_(s);else if(m===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":R_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,fr=s;break}fr=c.return}}function DO(s,c,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:fs(s,m),x&4&&Nh(5,m);break;case 1:if(fs(s,m),x&4)if(s=m.stateNode,c===null)try{s.componentDidMount()}catch($){Yt(m,m.return,$)}else{var A=Fc(m.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch($){Yt(m,m.return,$)}}x&64&&TO(m),x&512&&Oh(m,m.return);break;case 3:if(fs(s,m),x&64&&(s=m.updateQueue,s!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{bN(s,c)}catch($){Yt(m,m.return,$)}}break;case 27:c===null&&x&4&&CO(m);case 26:case 5:fs(s,m),c===null&&x&4&&NO(m),x&512&&Oh(m,m.return);break;case 12:fs(s,m);break;case 31:fs(s,m),x&4&&LO(s,m);break;case 13:fs(s,m),x&4&&IO(s,m),x&64&&(s=m.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(m=AG.bind(null,m),WG(s,m))));break;case 22:if(x=m.memoizedState!==null||us,!x){c=c!==null&&c.memoizedState!==null||qn,A=us;var N=qn;us=x,(qn=c)&&!N?hs(s,m,(m.subtreeFlags&8772)!==0):fs(s,m),us=A,qn=N}break;case 30:break;default:fs(s,m)}}function PO(s){var c=s.alternate;c!==null&&(s.alternate=null,PO(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Kf(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var fn=null,ui=!1;function ds(s,c,m){for(m=m.child;m!==null;)RO(s,c,m),m=m.sibling}function RO(s,c,m){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount($t,m)}catch{}switch(m.tag){case 26:qn||Eo(m,c),ds(s,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:qn||Eo(m,c);var x=fn,A=ui;Al(m.type)&&(fn=m.stateNode,ui=!1),ds(s,c,m),Bh(m.stateNode),fn=x,ui=A;break;case 5:qn||Eo(m,c);case 6:if(x=fn,A=ui,fn=null,ds(s,c,m),fn=x,ui=A,fn!==null)if(ui)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(m.stateNode)}catch(N){Yt(m,c,N)}else try{fn.removeChild(m.stateNode)}catch(N){Yt(m,c,N)}break;case 18:fn!==null&&(ui?(s=fn,TC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,m.stateNode),_d(s)):TC(fn,m.stateNode));break;case 4:x=fn,A=ui,fn=m.stateNode.containerInfo,ui=!0,ds(s,c,m),fn=x,ui=A;break;case 0:case 11:case 14:case 15:wl(2,m,c),qn||wl(4,m,c),ds(s,c,m);break;case 1:qn||(Eo(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"&&AO(m,c,x)),ds(s,c,m);break;case 21:ds(s,c,m);break;case 22:qn=(x=qn)||m.memoizedState!==null,ds(s,c,m),qn=x;break;default:ds(s,c,m)}}function LO(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{_d(s)}catch(m){Yt(c,c.return,m)}}}function IO(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{_d(s)}catch(m){Yt(c,c.return,m)}}function xG(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new MO),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new MO),c;default:throw Error(r(435,s.tag))}}function rg(s,c){var m=xG(s);c.forEach(function(x){if(!m.has(x)){m.add(x);var A=NG.bind(null,s,x);x.then(A,A)}})}function di(s,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var A=m[x],N=s,$=c,Y=$;e:for(;Y!==null;){switch(Y.tag){case 27:if(Al(Y.type)){fn=Y.stateNode,ui=!1;break e}break;case 5:fn=Y.stateNode,ui=!1;break e;case 3:case 4:fn=Y.stateNode.containerInfo,ui=!0;break e}Y=Y.return}if(fn===null)throw Error(r(160));RO(N,$,A),fn=null,ui=!1,N=A.alternate,N!==null&&(N.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)$O(c,s),c=c.sibling}var za=null;function $O(s,c){var m=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:di(c,s),fi(s),x&4&&(wl(3,s,s.return),Nh(3,s),wl(5,s,s.return));break;case 1:di(c,s),fi(s),x&512&&(qn||m===null||Eo(m,m.return)),x&64&&us&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(m=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var A=za;if(di(c,s),fi(s),x&512&&(qn||m===null||Eo(m,m.return)),x&4){var N=m!==null?m.memoizedState:null;if(x=s.memoizedState,m===null)if(x===null)if(s.stateNode===null){e:{x=s.type,m=s.memoizedProps,A=A.ownerDocument||A;t:switch(x){case"title":N=A.getElementsByTagName("title")[0],(!N||N[uc]||N[Un]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=A.createElement(x),A.head.insertBefore(N,A.querySelector("head > title"))),jr(N,x,m),N[Un]=s,Fn(N),x=N;break e;case"link":var $=$C("link","href",A).get(x+(m.href||""));if($){for(var Y=0;Y<$.length;Y++)if(N=$[Y],N.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&N.getAttribute("rel")===(m.rel==null?null:m.rel)&&N.getAttribute("title")===(m.title==null?null:m.title)&&N.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){$.splice(Y,1);break t}}N=A.createElement(x),jr(N,x,m),A.head.appendChild(N);break;case"meta":if($=$C("meta","content",A).get(x+(m.content||""))){for(Y=0;Y<$.length;Y++)if(N=$[Y],N.getAttribute("content")===(m.content==null?null:""+m.content)&&N.getAttribute("name")===(m.name==null?null:m.name)&&N.getAttribute("property")===(m.property==null?null:m.property)&&N.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&N.getAttribute("charset")===(m.charSet==null?null:m.charSet)){$.splice(Y,1);break t}}N=A.createElement(x),jr(N,x,m),A.head.appendChild(N);break;default:throw Error(r(468,x))}N[Un]=s,Fn(N),x=N}s.stateNode=x}else BC(A,s.type,s.stateNode);else s.stateNode=IC(A,x,s.memoizedProps);else N!==x?(N===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):N.count--,x===null?BC(A,s.type,s.stateNode):IC(A,x,s.memoizedProps)):x===null&&s.stateNode!==null&&s_(s,s.memoizedProps,m.memoizedProps)}break;case 27:di(c,s),fi(s),x&512&&(qn||m===null||Eo(m,m.return)),m!==null&&x&4&&s_(s,s.memoizedProps,m.memoizedProps);break;case 5:if(di(c,s),fi(s),x&512&&(qn||m===null||Eo(m,m.return)),s.flags&32){A=s.stateNode;try{Ji(A,"")}catch(He){Yt(s,s.return,He)}}x&4&&s.stateNode!=null&&(A=s.memoizedProps,s_(s,A,m!==null?m.memoizedProps:A)),x&1024&&(u_=!0);break;case 6:if(di(c,s),fi(s),x&4){if(s.stateNode===null)throw Error(r(162));x=s.memoizedProps,m=s.stateNode;try{m.nodeValue=x}catch(He){Yt(s,s.return,He)}}break;case 3:if(vg=null,A=za,za=bg(c.containerInfo),di(c,s),za=A,fi(s),x&4&&m!==null&&m.memoizedState.isDehydrated)try{_d(c.containerInfo)}catch(He){Yt(s,s.return,He)}u_&&(u_=!1,BO(s));break;case 4:x=za,za=bg(s.stateNode.containerInfo),di(c,s),fi(s),za=x;break;case 12:di(c,s),fi(s);break;case 31:di(c,s),fi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 13:di(c,s),fi(s),s.child.flags&8192&&s.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(ag=Ye()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 22:A=s.memoizedState!==null;var te=m!==null&&m.memoizedState!==null,pe=us,_e=qn;if(us=pe||A,qn=_e||te,di(c,s),qn=_e,us=pe,fi(s),x&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(m===null||te||us||qn||Hc(s)),m=null,c=s;;){if(c.tag===5||c.tag===26){if(m===null){te=m=c;try{if(N=te.stateNode,A)$=N.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Y=te.stateNode;var Te=te.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;Y.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(He){Yt(te,te.return,He)}}}else if(c.tag===6){if(m===null){te=c;try{te.stateNode.nodeValue=A?"":te.memoizedProps}catch(He){Yt(te,te.return,He)}}}else if(c.tag===18){if(m===null){te=c;try{var ve=te.stateNode;A?AC(ve,!0):AC(te.stateNode,!1)}catch(He){Yt(te,te.return,He)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=s.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,rg(s,m))));break;case 19:di(c,s),fi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 30:break;case 21:break;default:di(c,s),fi(s)}}function fi(s){var c=s.flags;if(c&2){try{for(var m,x=s.return;x!==null;){if(OO(x)){m=x;break}x=x.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var A=m.stateNode,N=l_(s);ng(s,N,A);break;case 5:var $=m.stateNode;m.flags&32&&(Ji($,""),m.flags&=-33);var Y=l_(s);ng(s,Y,$);break;case 3:case 4:var te=m.stateNode.containerInfo,pe=l_(s);c_(s,pe,te);break;default:throw Error(r(161))}}catch(_e){Yt(s,s.return,_e)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function BO(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;BO(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function fs(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)DO(s,c.alternate,c),c=c.sibling}function Hc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:wl(4,c,c.return),Hc(c);break;case 1:Eo(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&AO(c,c.return,m),Hc(c);break;case 27:Bh(c.stateNode);case 26:case 5:Eo(c,c.return),Hc(c);break;case 22:c.memoizedState===null&&Hc(c);break;case 30:Hc(c);break;default:Hc(c)}s=s.sibling}}function hs(s,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,A=s,N=c,$=N.flags;switch(N.tag){case 0:case 11:case 15:hs(A,N,m),Nh(4,N);break;case 1:if(hs(A,N,m),x=N,A=x.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(pe){Yt(x,x.return,pe)}if(x=N,A=x.updateQueue,A!==null){var Y=x.stateNode;try{var te=A.shared.hiddenCallbacks;if(te!==null)for(A.shared.hiddenCallbacks=null,A=0;A<te.length;A++)gN(te[A],Y)}catch(pe){Yt(x,x.return,pe)}}m&&$&64&&TO(N),Oh(N,N.return);break;case 27:CO(N);case 26:case 5:hs(A,N,m),m&&x===null&&$&4&&NO(N),Oh(N,N.return);break;case 12:hs(A,N,m);break;case 31:hs(A,N,m),m&&$&4&&LO(A,N);break;case 13:hs(A,N,m),m&&$&4&&IO(A,N);break;case 22:N.memoizedState===null&&hs(A,N,m),Oh(N,N.return);break;case 30:break;default:hs(A,N,m)}c=c.sibling}}function d_(s,c){var m=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==m&&(s!=null&&s.refCount++,m!=null&&gh(m))}function f_(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&gh(s))}function Ua(s,c,m,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)zO(s,c,m,x),c=c.sibling}function zO(s,c,m,x){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Ua(s,c,m,x),A&2048&&Nh(9,c);break;case 1:Ua(s,c,m,x);break;case 3:Ua(s,c,m,x),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&gh(s)));break;case 12:if(A&2048){Ua(s,c,m,x),s=c.stateNode;try{var N=c.memoizedProps,$=N.id,Y=N.onPostCommit;typeof Y=="function"&&Y($,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(te){Yt(c,c.return,te)}}else Ua(s,c,m,x);break;case 31:Ua(s,c,m,x);break;case 13:Ua(s,c,m,x);break;case 23:break;case 22:N=c.stateNode,$=c.alternate,c.memoizedState!==null?N._visibility&2?Ua(s,c,m,x):Ch(s,c):N._visibility&2?Ua(s,c,m,x):(N._visibility|=2,dd(s,c,m,x,(c.subtreeFlags&10256)!==0||!1)),A&2048&&d_($,c);break;case 24:Ua(s,c,m,x),A&2048&&f_(c.alternate,c);break;default:Ua(s,c,m,x)}}function dd(s,c,m,x,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var N=s,$=c,Y=m,te=x,pe=$.flags;switch($.tag){case 0:case 11:case 15:dd(N,$,Y,te,A),Nh(8,$);break;case 23:break;case 22:var _e=$.stateNode;$.memoizedState!==null?_e._visibility&2?dd(N,$,Y,te,A):Ch(N,$):(_e._visibility|=2,dd(N,$,Y,te,A)),A&&pe&2048&&d_($.alternate,$);break;case 24:dd(N,$,Y,te,A),A&&pe&2048&&f_($.alternate,$);break;default:dd(N,$,Y,te,A)}c=c.sibling}}function Ch(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=s,x=c,A=x.flags;switch(x.tag){case 22:Ch(m,x),A&2048&&d_(x.alternate,x);break;case 24:Ch(m,x),A&2048&&f_(x.alternate,x);break;default:Ch(m,x)}c=c.sibling}}var Mh=8192;function fd(s,c,m){if(s.subtreeFlags&Mh)for(s=s.child;s!==null;)UO(s,c,m),s=s.sibling}function UO(s,c,m){switch(s.tag){case 26:fd(s,c,m),s.flags&Mh&&s.memoizedState!==null&&oY(m,za,s.memoizedState,s.memoizedProps);break;case 5:fd(s,c,m);break;case 3:case 4:var x=za;za=bg(s.stateNode.containerInfo),fd(s,c,m),za=x;break;case 22:s.memoizedState===null&&(x=s.alternate,x!==null&&x.memoizedState!==null?(x=Mh,Mh=16777216,fd(s,c,m),Mh=x):fd(s,c,m));break;default:fd(s,c,m)}}function FO(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Dh(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];fr=x,GO(x,s)}FO(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HO(s),s=s.sibling}function HO(s){switch(s.tag){case 0:case 11:case 15:Dh(s),s.flags&2048&&wl(9,s,s.return);break;case 3:Dh(s);break;case 12:Dh(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,ig(s)):Dh(s);break;default:Dh(s)}}function ig(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];fr=x,GO(x,s)}FO(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:wl(8,c,c.return),ig(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,ig(c));break;default:ig(c)}s=s.sibling}}function GO(s,c){for(;fr!==null;){var m=fr;switch(m.tag){case 0:case 11:case 15:wl(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:gh(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,fr=x;else e:for(m=s;fr!==null;){x=fr;var A=x.sibling,N=x.return;if(PO(x),x===m){fr=null;break e}if(A!==null){A.return=N,fr=A;break e}fr=N}}}var wG={getCacheForType:function(s){var c=kr(Hn),m=c.data.get(s);return m===void 0&&(m=s(),c.data.set(s,m)),m},cacheSignal:function(){return kr(Hn).controller.signal}},_G=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Jt=null,_t=null,Et=0,Gt=0,Mi=null,_l=!1,hd=!1,h_=!1,ms=0,Cn=0,Sl=0,Gc=0,m_=0,Di=0,md=0,Ph=null,hi=null,p_=!1,ag=0,YO=0,og=1/0,sg=null,kl=null,tr=0,El=null,pd=null,ps=0,g_=0,b_=null,qO=null,Rh=0,y_=null;function Pi(){return(Lt&2)!==0&&Et!==0?Et&-Et:G.T!==null?k_():Yf()}function KO(){if(Di===0)if((Et&536870912)===0||wt){var s=Bt;Bt<<=1,(Bt&3932160)===0&&(Bt=262144),Di=s}else Di=536870912;return s=Oi.current,s!==null&&(s.flags|=32),Di}function mi(s,c,m){(s===Jt&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)&&(gd(s,0),jl(s,Et,Di,!1)),Wo(s,m),((Lt&2)===0||s!==Jt)&&(s===Jt&&((Lt&2)===0&&(Gc|=m),Cn===4&&jl(s,Et,Di,!1)),jo(s))}function WO(s,c,m){if((Lt&6)!==0)throw Error(r(327));var x=!m&&(c&127)===0&&(c&s.expiredLanes)===0||cc(s,c),A=x?EG(s,c):x_(s,c,!0),N=x;do{if(A===0){hd&&!x&&jl(s,c,0,!1);break}else{if(m=s.current.alternate,N&&!SG(m)){A=x_(s,c,!1),N=!1;continue}if(A===2){if(N=c,s.errorRecoveryDisabledLanes&N)var $=0;else $=s.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var Y=s;A=Ph;var te=Y.current.memoizedState.isDehydrated;if(te&&(gd(Y,$).flags|=256),$=x_(Y,$,!1),$!==2){if(h_&&!te){Y.errorRecoveryDisabledLanes|=N,Gc|=N,A=4;break e}N=hi,hi=A,N!==null&&(hi===null?hi=N:hi.push.apply(hi,N))}A=$}if(N=!1,A!==2)continue}}if(A===1){gd(s,0),jl(s,c,0,!0);break}e:{switch(x=s,N=A,N){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:jl(x,c,Di,!_l);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(A=ag+300-Ye(),10<A)){if(jl(x,c,Di,!_l),Lu(x,0,!0)!==0)break e;ps=c,x.timeoutHandle=EC(VO.bind(null,x,m,hi,sg,p_,c,Di,Gc,md,_l,N,"Throttled",-0,0),A);break e}VO(x,m,hi,sg,p_,c,Di,Gc,md,_l,N,null,-0,0)}}break}while(!0);jo(s)}function VO(s,c,m,x,A,N,$,Y,te,pe,_e,Te,ye,ve){if(s.timeoutHandle=-1,Te=c.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},UO(c,N,Te);var He=(N&62914560)===N?ag-Ye():(N&4194048)===N?YO-Ye():0;if(He=sY(Te,He),He!==null){ps=N,s.cancelPendingCommit=He(rC.bind(null,s,c,N,m,x,A,$,Y,te,_e,Te,null,ye,ve)),jl(s,N,$,!pe);return}}rC(s,c,N,m,x,A,$,Y,te)}function SG(s){for(var c=s;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var A=m[x],N=A.getSnapshot;A=A.value;try{if(!ur(N(),A))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function jl(s,c,m,x){c&=~m_,c&=~Gc,s.suspendedLanes|=c,s.pingedLanes&=~c,x&&(s.warmLanes|=c),x=s.expirationTimes;for(var A=c;0<A;){var N=31-Tn(A),$=1<<N;x[N]=-1,A&=~$}m!==0&&o0(s,m,c)}function lg(){return(Lt&6)===0?(Lh(0),!1):!0}function v_(){if(_t!==null){if(Gt===0)var s=_t.return;else s=_t,Ba=ko=null,Rw(s),od=null,yh=0,s=_t;for(;s!==null;)jO(s.alternate,s),s=s.return;_t=null}}function gd(s,c){var m=s.timeoutHandle;m!==-1&&(s.timeoutHandle=-1,HG(m)),m=s.cancelPendingCommit,m!==null&&(s.cancelPendingCommit=null,m()),ps=0,v_(),Jt=s,_t=m=aa(s.current,null),Et=c,Gt=0,Mi=null,_l=!1,hd=cc(s,c),h_=!1,md=Di=m_=Gc=Sl=Cn=0,hi=Ph=null,p_=!1,(c&8)!==0&&(c|=c&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=c;0<x;){var A=31-Tn(x),N=1<<A;c|=s[A],x&=~N}return ms=c,Cc(),m}function ZO(s,c){mt=null,G.H=jh,c===ad||c===I0?(c=fN(),Gt=3):c===Sw?(c=fN(),Gt=4):Gt=c===Xw?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Mi=c,_t===null&&(Cn=1,X0(s,v(c,s.current)))}function XO(){var s=Oi.current;return s===null?!0:(Et&4194048)===Et?oa===null:(Et&62914560)===Et||(Et&536870912)!==0?s===oa:!1}function JO(){var s=G.H;return G.H=jh,s===null?jh:s}function QO(){var s=G.A;return G.A=wG,s}function cg(){Cn=4,_l||(Et&4194048)!==Et&&Oi.current!==null||(hd=!0),(Sl&134217727)===0&&(Gc&134217727)===0||Jt===null||jl(Jt,Et,Di,!1)}function x_(s,c,m){var x=Lt;Lt|=2;var A=JO(),N=QO();(Jt!==s||Et!==c)&&(sg=null,gd(s,c)),c=!1;var $=Cn;e:do try{if(Gt!==0&&_t!==null){var Y=_t,te=Mi;switch(Gt){case 8:v_(),$=6;break e;case 3:case 2:case 9:case 6:Oi.current===null&&(c=!0);var pe=Gt;if(Gt=0,Mi=null,bd(s,Y,te,pe),m&&hd){$=0;break e}break;default:pe=Gt,Gt=0,Mi=null,bd(s,Y,te,pe)}}kG(),$=Cn;break}catch(_e){ZO(s,_e)}while(!0);return c&&s.shellSuspendCounter++,Ba=ko=null,Lt=x,G.H=A,G.A=N,_t===null&&(Jt=null,Et=0,Cc()),$}function kG(){for(;_t!==null;)eC(_t)}function EG(s,c){var m=Lt;Lt|=2;var x=JO(),A=QO();Jt!==s||Et!==c?(sg=null,og=Ye()+500,gd(s,c)):hd=cc(s,c);e:do try{if(Gt!==0&&_t!==null){c=_t;var N=Mi;t:switch(Gt){case 1:Gt=0,Mi=null,bd(s,c,N,1);break;case 2:case 9:if(uN(N)){Gt=0,Mi=null,tC(c);break}c=function(){Gt!==2&&Gt!==9||Jt!==s||(Gt=7),jo(s)},N.then(c,c);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:uN(N)?(Gt=0,Mi=null,tC(c)):(Gt=0,Mi=null,bd(s,c,N,7));break;case 5:var $=null;switch(_t.tag){case 26:$=_t.memoizedState;case 5:case 27:var Y=_t;if($?zC($):Y.stateNode.complete){Gt=0,Mi=null;var te=Y.sibling;if(te!==null)_t=te;else{var pe=Y.return;pe!==null?(_t=pe,ug(pe)):_t=null}break t}}Gt=0,Mi=null,bd(s,c,N,5);break;case 6:Gt=0,Mi=null,bd(s,c,N,6);break;case 8:v_(),Cn=6;break e;default:throw Error(r(462))}}jG();break}catch(_e){ZO(s,_e)}while(!0);return Ba=ko=null,G.H=x,G.A=A,Lt=m,_t!==null?0:(Jt=null,Et=0,Cc(),Cn)}function jG(){for(;_t!==null&&!se();)eC(_t)}function eC(s){var c=kO(s.alternate,s,ms);s.memoizedProps=s.pendingProps,c===null?ug(s):_t=c}function tC(s){var c=s,m=c.alternate;switch(c.tag){case 15:case 0:c=yO(m,c,c.pendingProps,c.type,void 0,Et);break;case 11:c=yO(m,c,c.pendingProps,c.type.render,c.ref,Et);break;case 5:Rw(c);default:jO(m,c),c=_t=dh(c,ms),c=kO(m,c,ms)}s.memoizedProps=s.pendingProps,c===null?ug(s):_t=c}function bd(s,c,m,x){Ba=ko=null,Rw(c),od=null,yh=0;var A=c.return;try{if(mG(s,A,c,m,Et)){Cn=1,X0(s,v(m,s.current)),_t=null;return}}catch(N){if(A!==null)throw _t=A,N;Cn=1,X0(s,v(m,s.current)),_t=null;return}c.flags&32768?(wt||x===1?s=!0:hd||(Et&536870912)!==0?s=!1:(_l=s=!0,(x===2||x===9||x===3||x===6)&&(x=Oi.current,x!==null&&x.tag===13&&(x.flags|=16384))),nC(c,s)):ug(c)}function ug(s){var c=s;do{if((c.flags&32768)!==0){nC(c,_l);return}s=c.return;var m=bG(c.alternate,c,ms);if(m!==null){_t=m;return}if(c=c.sibling,c!==null){_t=c;return}_t=c=s}while(c!==null);Cn===0&&(Cn=5)}function nC(s,c){do{var m=yG(s.alternate,s);if(m!==null){m.flags&=32767,_t=m;return}if(m=s.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(s=s.sibling,s!==null)){_t=s;return}_t=s=m}while(s!==null);Cn=6,_t=null}function rC(s,c,m,x,A,N,$,Y,te){s.cancelPendingCommit=null;do dg();while(tr!==0);if((Lt&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(N=c.lanes|c.childLanes,N|=Ju,nw(s,m,N,$,Y,te),s===Jt&&(_t=Jt=null,Et=0),pd=c,El=s,ps=m,g_=N,b_=A,qO=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,OG(Me,function(){return lC(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=G.T,G.T=null,A=J.p,J.p=2,$=Lt,Lt|=4;try{vG(s,c,m)}finally{Lt=$,J.p=A,G.T=x}}tr=1,iC(),aC(),oC()}}function iC(){if(tr===1){tr=0;var s=El,c=pd,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=G.T,G.T=null;var x=J.p;J.p=2;var A=Lt;Lt|=4;try{$O(c,s);var N=M_,$=jc(s.containerInfo),Y=N.focusedElem,te=N.selectionRange;if($!==Y&&Y&&Y.ownerDocument&&Wu(Y.ownerDocument.documentElement,Y)){if(te!==null&&bo(Y)){var pe=te.start,_e=te.end;if(_e===void 0&&(_e=pe),"selectionStart"in Y)Y.selectionStart=pe,Y.selectionEnd=Math.min(_e,Y.value.length);else{var Te=Y.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var ve=ye.getSelection(),He=Y.textContent.length,ot=Math.min(te.start,He),Zt=te.end===void 0?ot:Math.min(te.end,He);!ve.extend&&ot>Zt&&($=Zt,Zt=ot,ot=$);var de=Ec(Y,ot),ae=Ec(Y,Zt);if(de&&ae&&(ve.rangeCount!==1||ve.anchorNode!==de.node||ve.anchorOffset!==de.offset||ve.focusNode!==ae.node||ve.focusOffset!==ae.offset)){var me=Te.createRange();me.setStart(de.node,de.offset),ve.removeAllRanges(),ot>Zt?(ve.addRange(me),ve.extend(ae.node,ae.offset)):(me.setEnd(ae.node,ae.offset),ve.addRange(me))}}}}for(Te=[],ve=Y;ve=ve.parentNode;)ve.nodeType===1&&Te.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Te.length;Y++){var Se=Te[Y];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Sg=!!C_,M_=C_=null}finally{Lt=A,J.p=x,G.T=m}}s.current=c,tr=2}}function aC(){if(tr===2){tr=0;var s=El,c=pd,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=G.T,G.T=null;var x=J.p;J.p=2;var A=Lt;Lt|=4;try{DO(s,c.alternate,c)}finally{Lt=A,J.p=x,G.T=m}}tr=3}}function oC(){if(tr===4||tr===3){tr=0,Oe();var s=El,c=pd,m=ps,x=qO;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?tr=5:(tr=0,pd=El=null,sC(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(kl=null),We(m),c=c.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot($t,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=G.T,A=J.p,J.p=2,G.T=null;try{for(var N=s.onRecoverableError,$=0;$<x.length;$++){var Y=x[$];N(Y.value,{componentStack:Y.stack})}}finally{G.T=c,J.p=A}}(ps&3)!==0&&dg(),jo(s),A=s.pendingLanes,(m&261930)!==0&&(A&42)!==0?s===y_?Rh++:(Rh=0,y_=s):Rh=0,Lh(0)}}function sC(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,gh(c)))}function dg(){return iC(),aC(),oC(),lC()}function lC(){if(tr!==5)return!1;var s=El,c=g_;g_=0;var m=We(ps),x=G.T,A=J.p;try{J.p=32>m?32:m,G.T=null,m=b_,b_=null;var N=El,$=ps;if(tr=0,pd=El=null,ps=0,(Lt&6)!==0)throw Error(r(331));var Y=Lt;if(Lt|=4,HO(N.current),zO(N,N.current,$,m),Lt=Y,Lh(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot($t,N)}catch{}return!0}finally{J.p=A,G.T=x,sC(s,c)}}function cC(s,c,m){c=v(m,c),c=Zw(s.stateNode,c,2),s=yl(s,c,2),s!==null&&(Wo(s,2),jo(s))}function Yt(s,c,m){if(s.tag===3)cC(s,s,m);else for(;c!==null;){if(c.tag===3){cC(c,s,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(kl===null||!kl.has(x))){s=v(m,s),m=uO(2),x=yl(c,m,2),x!==null&&(dO(m,x,c,s),Wo(x,2),jo(x));break}}c=c.return}}function w_(s,c,m){var x=s.pingCache;if(x===null){x=s.pingCache=new _G;var A=new Set;x.set(c,A)}else A=x.get(c),A===void 0&&(A=new Set,x.set(c,A));A.has(m)||(h_=!0,A.add(m),s=TG.bind(null,s,c,m),c.then(s,s))}function TG(s,c,m){var x=s.pingCache;x!==null&&x.delete(c),s.pingedLanes|=s.suspendedLanes&m,s.warmLanes&=~m,Jt===s&&(Et&m)===m&&(Cn===4||Cn===3&&(Et&62914560)===Et&&300>Ye()-ag?(Lt&2)===0&&gd(s,0):m_|=m,md===Et&&(md=0)),jo(s)}function uC(s,c){c===0&&(c=a0()),s=ia(s,c),s!==null&&(Wo(s,c),jo(s))}function AG(s){var c=s.memoizedState,m=0;c!==null&&(m=c.retryLane),uC(s,m)}function NG(s,c){var m=0;switch(s.tag){case 31:case 13:var x=s.stateNode,A=s.memoizedState;A!==null&&(m=A.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(c),uC(s,m)}function OG(s,c){return ut(s,c)}var fg=null,yd=null,__=!1,hg=!1,S_=!1,Tl=0;function jo(s){s!==yd&&s.next===null&&(yd===null?fg=yd=s:yd=yd.next=s),hg=!0,__||(__=!0,MG())}function Lh(s,c){if(!S_&&hg){S_=!0;do for(var m=!1,x=fg;x!==null;){if(s!==0){var A=x.pendingLanes;if(A===0)var N=0;else{var $=x.suspendedLanes,Y=x.pingedLanes;N=(1<<31-Tn(42|s)+1)-1,N&=A&~($&~Y),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(m=!0,mC(x,N))}else N=Et,N=Lu(x,x===Jt?N:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(N&3)===0||cc(x,N)||(m=!0,mC(x,N));x=x.next}while(m);S_=!1}}function CG(){dC()}function dC(){hg=__=!1;var s=0;Tl!==0&&FG()&&(s=Tl);for(var c=Ye(),m=null,x=fg;x!==null;){var A=x.next,N=fC(x,c);N===0?(x.next=null,m===null?fg=A:m.next=A,A===null&&(yd=m)):(m=x,(s!==0||(N&3)!==0)&&(hg=!0)),x=A}tr!==0&&tr!==5||Lh(s),Tl!==0&&(Tl=0)}function fC(s,c){for(var m=s.suspendedLanes,x=s.pingedLanes,A=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var $=31-Tn(N),Y=1<<$,te=A[$];te===-1?((Y&m)===0||(Y&x)!==0)&&(A[$]=tw(Y,c)):te<=c&&(s.expiredLanes|=Y),N&=~Y}if(c=Jt,m=Et,m=Lu(s,s===c?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,m===0||s===c&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&yt(x),s.callbackNode=null,s.callbackPriority=0;if((m&3)===0||cc(s,m)){if(c=m&-m,c===s.callbackPriority)return c;switch(x!==null&&yt(x),We(m)){case 2:case 8:m=ht;break;case 32:m=Me;break;case 268435456:m=Xe;break;default:m=Me}return x=hC.bind(null,s),m=ut(m,x),s.callbackPriority=c,s.callbackNode=m,c}return x!==null&&x!==null&&yt(x),s.callbackPriority=2,s.callbackNode=null,2}function hC(s,c){if(tr!==0&&tr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var m=s.callbackNode;if(dg()&&s.callbackNode!==m)return null;var x=Et;return x=Lu(s,s===Jt?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(WO(s,x,c),fC(s,Ye()),s.callbackNode!=null&&s.callbackNode===m?hC.bind(null,s):null)}function mC(s,c){if(dg())return null;WO(s,c,!0)}function MG(){GG(function(){(Lt&6)!==0?ut(Tt,CG):dC()})}function k_(){if(Tl===0){var s=rd;s===0&&(s=at,at<<=1,(at&261888)===0&&(at=256)),Tl=s}return Tl}function pC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:nl(""+s)}function gC(s,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,s.id&&m.setAttribute("form",s.id),c.parentNode.insertBefore(m,c),s=new FormData(s),m.parentNode.removeChild(m),s}function DG(s,c,m,x,A){if(c==="submit"&&m&&m.stateNode===A){var N=pC((A[cr]||null).action),$=x.submitter;$&&(c=(c=$[cr]||null)?pC(c.formAction):$.getAttribute("formAction"),c!==null&&(N=c,$=null));var Y=new Uu("action","action",null,x,A);s.push({event:Y,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Tl!==0){var te=$?gC(A,$):new FormData(A);Gw(m,{pending:!0,data:te,method:A.method,action:N},null,te)}}else typeof N=="function"&&(Y.preventDefault(),te=$?gC(A,$):new FormData(A),Gw(m,{pending:!0,data:te,method:A.method,action:N},N,te))},currentTarget:A}]})}}for(var E_=0;E_<xo.length;E_++){var j_=xo[E_],PG=j_.toLowerCase(),RG=j_[0].toUpperCase()+j_.slice(1);si(PG,"on"+RG)}si(Ac,"onAnimationEnd"),si(C0,"onAnimationIteration"),si(Nc,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(pw,"onTransitionRun"),si(M0,"onTransitionStart"),si(gw,"onTransitionCancel"),si(hl,"onTransitionEnd"),ho("onMouseEnter",["mouseout","mouseover"]),ho("onMouseLeave",["mouseout","mouseover"]),ho("onPointerEnter",["pointerout","pointerover"]),ho("onPointerLeave",["pointerout","pointerover"]),Xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function bC(s,c){c=(c&4)!==0;for(var m=0;m<s.length;m++){var x=s[m],A=x.event;x=x.listeners;e:{var N=void 0;if(c)for(var $=x.length-1;0<=$;$--){var Y=x[$],te=Y.instance,pe=Y.currentTarget;if(Y=Y.listener,te!==N&&A.isPropagationStopped())break e;N=Y,A.currentTarget=pe;try{N(A)}catch(_e){Oc(_e)}A.currentTarget=null,N=te}else for($=0;$<x.length;$++){if(Y=x[$],te=Y.instance,pe=Y.currentTarget,Y=Y.listener,te!==N&&A.isPropagationStopped())break e;N=Y,A.currentTarget=pe;try{N(A)}catch(_e){Oc(_e)}A.currentTarget=null,N=te}}}}function St(s,c){var m=c[uo];m===void 0&&(m=c[uo]=new Set);var x=s+"__bubble";m.has(x)||(yC(c,s,2,!1),m.add(x))}function T_(s,c,m){var x=0;c&&(x|=4),yC(m,s,x,c)}var mg="_reactListening"+Math.random().toString(36).slice(2);function A_(s){if(!s[mg]){s[mg]=!0,d0.forEach(function(m){m!=="selectionchange"&&(LG.has(m)||T_(m,!1,s),T_(m,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[mg]||(c[mg]=!0,T_("selectionchange",!1,c))}}function yC(s,c,m,x){switch(KC(c)){case 2:var A=uY;break;case 8:A=dY;break;default:A=H_}m=A.bind(null,c,m,s),A=void 0,!gc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),x?A!==void 0?s.addEventListener(c,m,{capture:!0,passive:A}):s.addEventListener(c,m,!0):A!==void 0?s.addEventListener(c,m,{passive:A}):s.addEventListener(c,m,!1)}function N_(s,c,m,x,A){var N=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var Y=x.stateNode.containerInfo;if(Y===A)break;if($===4)for($=x.return;$!==null;){var te=$.tag;if((te===3||te===4)&&$.stateNode.containerInfo===A)return;$=$.return}for(;Y!==null;){if($=Zo(Y),$===null)return;if(te=$.tag,te===5||te===6||te===26||te===27){x=N=$;continue e}Y=Y.parentNode}}x=x.return}eh(function(){var pe=N,_e=pc(m),Te=[];e:{var ye=D0.get(s);if(ye!==void 0){var ve=Uu,He=s;switch(s){case"keypress":if(bc(m)===0)break e;case"keydown":case"keyup":ve=v0;break;case"focusin":He="focus",ve=rh;break;case"focusout":He="blur",ve=rh;break;case"beforeblur":case"afterblur":ve=rh;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=cw;break;case Ac:case C0:case Nc:ve=ih;break;case hl:ve=_0;break;case"scroll":case"scrollend":ve=kt;break;case"wheel":ve=ts;break;case"copy":case"cut":case"paste":ve=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=x0;break;case"toggle":case"beforetoggle":ve=xc}var ot=(c&4)!==0,Zt=!ot&&(s==="scroll"||s==="scrollend"),de=ot?ye!==null?ye+"Capture":null:ye;ot=[];for(var ae=pe,me;ae!==null;){var Se=ae;if(me=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||me===null||de===null||(Se=Qo(ae,de),Se!=null&&ot.push($h(ae,Se,me))),Zt)break;ae=ae.return}0<ot.length&&(ye=new ve(ye,He,null,m,_e),Te.push({event:ye,listeners:ot}))}}if((c&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",ye&&m!==zu&&(He=m.relatedTarget||m.fromElement)&&(Zo(He)||He[Vo]))break e;if((ve||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,ve?(He=m.relatedTarget||m.toElement,ve=pe,He=He?Zo(He):null,He!==null&&(Zt=a(He),ot=He.tag,He!==Zt||ot!==5&&ot!==27&&ot!==6)&&(He=null)):(ve=null,He=pe),ve!==He)){if(ot=m0,Se="onMouseLeave",de="onMouseEnter",ae="mouse",(s==="pointerout"||s==="pointerover")&&(ot=x0,Se="onPointerLeave",de="onPointerEnter",ae="pointer"),Zt=ve==null?ye:fo(ve),me=He==null?ye:fo(He),ye=new ot(Se,ae+"leave",ve,m,_e),ye.target=Zt,ye.relatedTarget=me,Se=null,Zo(_e)===pe&&(ot=new ot(de,ae+"enter",He,m,_e),ot.target=me,ot.relatedTarget=Zt,Se=ot),Zt=Se,ve&&He)t:{for(ot=IG,de=ve,ae=He,me=0,Se=de;Se;Se=ot(Se))me++;Se=0;for(var rt=ae;rt;rt=ot(rt))Se++;for(;0<me-Se;)de=ot(de),me--;for(;0<Se-me;)ae=ot(ae),Se--;for(;me--;){if(de===ae||ae!==null&&de===ae.alternate){ot=de;break t}de=ot(de),ae=ot(ae)}ot=null}else ot=null;ve!==null&&vC(Te,ye,ve,ot,!1),He!==null&&Zt!==null&&vC(Te,Zt,He,ot,!0)}}e:{if(ye=pe?fo(pe):window,ve=ye.nodeName&&ye.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ye.type==="file")var Dt=kc;else if(ta(ye))if(j0)Dt=mw;else{Dt=hw;var Ke=La}else ve=ye.nodeName,!ve||ve.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?pe&&mc(pe.elementType)&&(Dt=kc):Dt=cl;if(Dt&&(Dt=Dt(s,pe))){E0(Te,Dt,m,_e);break e}Ke&&Ke(s,ye,pe),s==="focusout"&&pe&&ye.type==="number"&&pe.memoizedProps.value!=null&&Da(ye,"number",ye.value)}switch(Ke=pe?fo(pe):window,s){case"focusin":(ta(Ke)||Ke.contentEditable==="true")&&(yo=Ke,Zu=pe,Tc=null);break;case"focusout":Tc=Zu=yo=null;break;case"mousedown":dl=!0;break;case"contextmenu":case"mouseup":case"dragend":dl=!1,N0(Te,m,_e);break;case"selectionchange":if(Vu)break;case"keydown":case"keyup":N0(Te,m,_e)}var bt;if(Hu)e:{switch(s){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ol?k0(s,m)&&(jt="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(jt="onCompositionStart");jt&&(Gu&&m.locale!=="ko"&&(ol||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ol&&(bt=po()):(Qi=_e,es="value"in Qi?Qi.value:Qi.textContent,ol=!0)),Ke=pg(pe,jt),0<Ke.length&&(jt=new ah(jt,s,null,m,_e),Te.push({event:jt,listeners:Ke}),bt?jt.data=bt:(bt=ch(m),bt!==null&&(jt.data=bt)))),(bt=dw?Ni(s,m):sl(s,m))&&(jt=pg(pe,"onBeforeInput"),0<jt.length&&(Ke=new ah("onBeforeInput","beforeinput",null,m,_e),Te.push({event:Ke,listeners:jt}),Ke.data=bt)),DG(Te,s,pe,m,_e)}bC(Te,c)})}function $h(s,c,m){return{instance:s,listener:c,currentTarget:m}}function pg(s,c){for(var m=c+"Capture",x=[];s!==null;){var A=s,N=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||N===null||(A=Qo(s,m),A!=null&&x.unshift($h(s,A,N)),A=Qo(s,c),A!=null&&x.push($h(s,A,N))),s.tag===3)return x;s=s.return}return[]}function IG(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vC(s,c,m,x,A){for(var N=c._reactName,$=[];m!==null&&m!==x;){var Y=m,te=Y.alternate,pe=Y.stateNode;if(Y=Y.tag,te!==null&&te===x)break;Y!==5&&Y!==26&&Y!==27||pe===null||(te=pe,A?(pe=Qo(m,N),pe!=null&&$.unshift($h(m,pe,te))):A||(pe=Qo(m,N),pe!=null&&$.push($h(m,pe,te)))),m=m.return}$.length!==0&&s.push({event:c,listeners:$})}var $G=/\r\n?/g,BG=/\u0000|\uFFFD/g;function xC(s){return(typeof s=="string"?s:""+s).replace($G,`
`).replace(BG,"")}function wC(s,c){return c=xC(c),xC(s)===c}function Vt(s,c,m,x,A,N){switch(m){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Ji(s,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Ji(s,""+x);break;case"className":Kt(s,"class",x);break;case"tabIndex":Kt(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Kt(s,m,x);break;case"style":$u(s,x,N);break;case"data":if(c!=="object"){Kt(s,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||m!=="href")){s.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(m);break}x=nl(""+x),s.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(m==="formAction"?(c!=="input"&&Vt(s,c,"name",A.name,A,null),Vt(s,c,"formEncType",A.formEncType,A,null),Vt(s,c,"formMethod",A.formMethod,A,null),Vt(s,c,"formTarget",A.formTarget,A,null)):(Vt(s,c,"encType",A.encType,A,null),Vt(s,c,"method",A.method,A,null),Vt(s,c,"target",A.target,A,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(m);break}x=nl(""+x),s.setAttribute(m,x);break;case"onClick":x!=null&&(s.onclick=ai);break;case"onScroll":x!=null&&St("scroll",s);break;case"onScrollEnd":x!=null&&St("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}m=nl(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,""+x):s.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,""):s.removeAttribute(m);break;case"capture":case"download":x===!0?s.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(m,x):s.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(m,x):s.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(m):s.setAttribute(m,x);break;case"popover":St("beforetoggle",s),St("toggle",s),xt(s,"popover",x);break;case"xlinkActuate":ii(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ii(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ii(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ii(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ii(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ii(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ii(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ii(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ii(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":xt(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Bu.get(m)||m,xt(s,m,x))}}function O_(s,c,m,x,A,N){switch(m){case"style":$u(s,x,N);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=m}}break;case"children":typeof x=="string"?Ji(s,x):(typeof x=="number"||typeof x=="bigint")&&Ji(s,""+x);break;case"onScroll":x!=null&&St("scroll",s);break;case"onScrollEnd":x!=null&&St("scrollend",s);break;case"onClick":x!=null&&(s.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!f0.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),c=m.slice(2,A?m.length-7:void 0),N=s[cr]||null,N=N!=null?N[m]:null,typeof N=="function"&&s.removeEventListener(c,N,A),typeof x=="function")){typeof N!="function"&&N!==null&&(m in s?s[m]=null:s.hasAttribute(m)&&s.removeAttribute(m)),s.addEventListener(c,x,A);break e}m in s?s[m]=x:x===!0?s.setAttribute(m,""):xt(s,m,x)}}}function jr(s,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",s),St("load",s);var x=!1,A=!1,N;for(N in m)if(m.hasOwnProperty(N)){var $=m[N];if($!=null)switch(N){case"src":x=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(s,c,N,$,m,null)}}A&&Vt(s,c,"srcSet",m.srcSet,m,null),x&&Vt(s,c,"src",m.src,m,null);return;case"input":St("invalid",s);var Y=N=$=A=null,te=null,pe=null;for(x in m)if(m.hasOwnProperty(x)){var _e=m[x];if(_e!=null)switch(x){case"name":A=_e;break;case"type":$=_e;break;case"checked":te=_e;break;case"defaultChecked":pe=_e;break;case"value":N=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,c));break;default:Vt(s,c,x,_e,m,null)}}hc(s,N,Y,te,pe,$,A,!1);return;case"select":St("invalid",s),x=$=N=null;for(A in m)if(m.hasOwnProperty(A)&&(Y=m[A],Y!=null))switch(A){case"value":N=Y;break;case"defaultValue":$=Y;break;case"multiple":x=Y;default:Vt(s,c,A,Y,m,null)}c=N,m=$,s.multiple=!!x,c!=null?Xt(s,!!x,c,!1):m!=null&&Xt(s,!!x,m,!0);return;case"textarea":St("invalid",s),N=A=x=null;for($ in m)if(m.hasOwnProperty($)&&(Y=m[$],Y!=null))switch($){case"value":x=Y;break;case"defaultValue":A=Y;break;case"children":N=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Vt(s,c,$,Y,m,null)}el(s,x,A,N);return;case"option":for(te in m)if(m.hasOwnProperty(te)&&(x=m[te],x!=null))switch(te){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Vt(s,c,te,x,m,null)}return;case"dialog":St("beforetoggle",s),St("toggle",s),St("cancel",s),St("close",s);break;case"iframe":case"object":St("load",s);break;case"video":case"audio":for(x=0;x<Ih.length;x++)St(Ih[x],s);break;case"image":St("error",s),St("load",s);break;case"details":St("toggle",s);break;case"embed":case"source":case"link":St("error",s),St("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in m)if(m.hasOwnProperty(pe)&&(x=m[pe],x!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(s,c,pe,x,m,null)}return;default:if(mc(c)){for(_e in m)m.hasOwnProperty(_e)&&(x=m[_e],x!==void 0&&O_(s,c,_e,x,m,void 0));return}}for(Y in m)m.hasOwnProperty(Y)&&(x=m[Y],x!=null&&Vt(s,c,Y,x,m,null))}function zG(s,c,m,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,N=null,$=null,Y=null,te=null,pe=null,_e=null;for(ve in m){var Te=m[ve];if(m.hasOwnProperty(ve)&&Te!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":te=Te;default:x.hasOwnProperty(ve)||Vt(s,c,ve,null,x,Te)}}for(var ye in x){var ve=x[ye];if(Te=m[ye],x.hasOwnProperty(ye)&&(ve!=null||Te!=null))switch(ye){case"type":N=ve;break;case"name":A=ve;break;case"checked":pe=ve;break;case"defaultChecked":_e=ve;break;case"value":$=ve;break;case"defaultValue":Y=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,c));break;default:ve!==Te&&Vt(s,c,ye,ve,x,Te)}}Xf(s,$,Y,te,pe,_e,N,A);return;case"select":ve=$=Y=ye=null;for(N in m)if(te=m[N],m.hasOwnProperty(N)&&te!=null)switch(N){case"value":break;case"multiple":ve=te;default:x.hasOwnProperty(N)||Vt(s,c,N,null,x,te)}for(A in x)if(N=x[A],te=m[A],x.hasOwnProperty(A)&&(N!=null||te!=null))switch(A){case"value":ye=N;break;case"defaultValue":Y=N;break;case"multiple":$=N;default:N!==te&&Vt(s,c,A,N,x,te)}c=Y,m=$,x=ve,ye!=null?Xt(s,!!m,ye,!1):!!x!=!!m&&(c!=null?Xt(s,!!m,c,!0):Xt(s,!!m,m?[]:"",!1));return;case"textarea":ve=ye=null;for(Y in m)if(A=m[Y],m.hasOwnProperty(Y)&&A!=null&&!x.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Vt(s,c,Y,null,x,A)}for($ in x)if(A=x[$],N=m[$],x.hasOwnProperty($)&&(A!=null||N!=null))switch($){case"value":ye=A;break;case"defaultValue":ve=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==N&&Vt(s,c,$,A,x,N)}mo(s,ye,ve);return;case"option":for(var He in m)if(ye=m[He],m.hasOwnProperty(He)&&ye!=null&&!x.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:Vt(s,c,He,null,x,ye)}for(te in x)if(ye=x[te],ve=m[te],x.hasOwnProperty(te)&&ye!==ve&&(ye!=null||ve!=null))switch(te){case"selected":s.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Vt(s,c,te,ye,x,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in m)ye=m[ot],m.hasOwnProperty(ot)&&ye!=null&&!x.hasOwnProperty(ot)&&Vt(s,c,ot,null,x,ye);for(pe in x)if(ye=x[pe],ve=m[pe],x.hasOwnProperty(pe)&&ye!==ve&&(ye!=null||ve!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,c));break;default:Vt(s,c,pe,ye,x,ve)}return;default:if(mc(c)){for(var Zt in m)ye=m[Zt],m.hasOwnProperty(Zt)&&ye!==void 0&&!x.hasOwnProperty(Zt)&&O_(s,c,Zt,void 0,x,ye);for(_e in x)ye=x[_e],ve=m[_e],!x.hasOwnProperty(_e)||ye===ve||ye===void 0&&ve===void 0||O_(s,c,_e,ye,x,ve);return}}for(var de in m)ye=m[de],m.hasOwnProperty(de)&&ye!=null&&!x.hasOwnProperty(de)&&Vt(s,c,de,null,x,ye);for(Te in x)ye=x[Te],ve=m[Te],!x.hasOwnProperty(Te)||ye===ve||ye==null&&ve==null||Vt(s,c,Te,ye,x,ve)}function _C(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UG(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,m=performance.getEntriesByType("resource"),x=0;x<m.length;x++){var A=m[x],N=A.transferSize,$=A.initiatorType,Y=A.duration;if(N&&Y&&_C($)){for($=0,Y=A.responseEnd,x+=1;x<m.length;x++){var te=m[x],pe=te.startTime;if(pe>Y)break;var _e=te.transferSize,Te=te.initiatorType;_e&&_C(Te)&&(te=te.responseEnd,$+=_e*(te<Y?1:(Y-pe)/(te-pe)))}if(--x,c+=8*(N+$)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var C_=null,M_=null;function gg(s){return s.nodeType===9?s:s.ownerDocument}function SC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kC(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function D_(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var P_=null;function FG(){var s=window.event;return s&&s.type==="popstate"?s===P_?!1:(P_=s,!0):(P_=null,!1)}var EC=typeof setTimeout=="function"?setTimeout:void 0,HG=typeof clearTimeout=="function"?clearTimeout:void 0,jC=typeof Promise=="function"?Promise:void 0,GG=typeof queueMicrotask=="function"?queueMicrotask:typeof jC<"u"?function(s){return jC.resolve(null).then(s).catch(YG)}:EC;function YG(s){setTimeout(function(){throw s})}function Al(s){return s==="head"}function TC(s,c){var m=c,x=0;do{var A=m.nextSibling;if(s.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"||m==="/&"){if(x===0){s.removeChild(A),_d(c);return}x--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")x++;else if(m==="html")Bh(s.ownerDocument.documentElement);else if(m==="head"){m=s.ownerDocument.head,Bh(m);for(var N=m.firstChild;N;){var $=N.nextSibling,Y=N.nodeName;N[uc]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&N.rel.toLowerCase()==="stylesheet"||m.removeChild(N),N=$}}else m==="body"&&Bh(s.ownerDocument.body);m=A}while(m);_d(c)}function AC(s,c){var m=s;s=0;do{var x=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),x&&x.nodeType===8)if(m=x.data,m==="/$"){if(s===0)break;s--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||s++;m=x}while(m)}function R_(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":R_(m),Kf(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}s.removeChild(m)}}function qG(s,c,m,x){for(;s.nodeType===1;){var A=m;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[uc])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(N=s.getAttribute("rel"),N==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(N!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(N=s.getAttribute("src"),(N!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&N&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var N=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===N)return s}else return s;if(s=sa(s.nextSibling),s===null)break}return null}function KG(s,c,m){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!m||(s=sa(s.nextSibling),s===null))return null;return s}function NC(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=sa(s.nextSibling),s===null))return null;return s}function L_(s){return s.data==="$?"||s.data==="$~"}function I_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function WG(s,c){var m=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||m.readyState!=="loading")c();else{var x=function(){c(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function sa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var $_=null;function OC(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"||m==="/&"){if(c===0)return sa(s.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}s=s.nextSibling}return null}function CC(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return s;c--}else m!=="/$"&&m!=="/&"||c++}s=s.previousSibling}return null}function MC(s,c,m){switch(c=gg(m),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Bh(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Kf(s)}var la=new Map,DC=new Set;function bg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var gs=J.d;J.d={f:VG,r:ZG,D:XG,C:JG,L:QG,m:eY,X:nY,S:tY,M:rY};function VG(){var s=gs.f(),c=lg();return s||c}function ZG(s){var c=Xs(s);c!==null&&c.tag===5&&c.type==="form"?ZN(c):gs.r(s)}var vd=typeof document>"u"?null:document;function PC(s,c,m){var x=vd;if(x&&typeof c=="string"&&c){var A=on(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),DC.has(A)||(DC.add(A),s={rel:s,crossOrigin:m,href:c},x.querySelector(A)===null&&(c=x.createElement("link"),jr(c,"link",s),Fn(c),x.head.appendChild(c)))}}function XG(s){gs.D(s),PC("dns-prefetch",s,null)}function JG(s,c){gs.C(s,c),PC("preconnect",s,c)}function QG(s,c,m){gs.L(s,c,m);var x=vd;if(x&&s&&c){var A='link[rel="preload"][as="'+on(c)+'"]';c==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+on(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+on(m.imageSizes)+'"]')):A+='[href="'+on(s)+'"]';var N=A;switch(c){case"style":N=xd(s);break;case"script":N=wd(s)}la.has(N)||(s=p({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:s,as:c},m),la.set(N,s),x.querySelector(A)!==null||c==="style"&&x.querySelector(zh(N))||c==="script"&&x.querySelector(Uh(N))||(c=x.createElement("link"),jr(c,"link",s),Fn(c),x.head.appendChild(c)))}}function eY(s,c){gs.m(s,c);var m=vd;if(m&&s){var x=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+on(x)+'"][href="'+on(s)+'"]',N=A;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=wd(s)}if(!la.has(N)&&(s=p({rel:"modulepreload",href:s},c),la.set(N,s),m.querySelector(A)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Uh(N)))return}x=m.createElement("link"),jr(x,"link",s),Fn(x),m.head.appendChild(x)}}}function tY(s,c,m){gs.S(s,c,m);var x=vd;if(x&&s){var A=Js(x).hoistableStyles,N=xd(s);c=c||"default";var $=A.get(N);if(!$){var Y={loading:0,preload:null};if($=x.querySelector(zh(N)))Y.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":c},m),(m=la.get(N))&&B_(s,m);var te=$=x.createElement("link");Fn(te),jr(te,"link",s),te._p=new Promise(function(pe,_e){te.onload=pe,te.onerror=_e}),te.addEventListener("load",function(){Y.loading|=1}),te.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,yg($,c,x)}$={type:"stylesheet",instance:$,count:1,state:Y},A.set(N,$)}}}function nY(s,c){gs.X(s,c);var m=vd;if(m&&s){var x=Js(m).hoistableScripts,A=wd(s),N=x.get(A);N||(N=m.querySelector(Uh(A)),N||(s=p({src:s,async:!0},c),(c=la.get(A))&&z_(s,c),N=m.createElement("script"),Fn(N),jr(N,"link",s),m.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(A,N))}}function rY(s,c){gs.M(s,c);var m=vd;if(m&&s){var x=Js(m).hoistableScripts,A=wd(s),N=x.get(A);N||(N=m.querySelector(Uh(A)),N||(s=p({src:s,async:!0,type:"module"},c),(c=la.get(A))&&z_(s,c),N=m.createElement("script"),Fn(N),jr(N,"link",s),m.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(A,N))}}function RC(s,c,m,x){var A=(A=ue.current)?bg(A):null;if(!A)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=xd(m.href),m=Js(A).hoistableStyles,x=m.get(c),x||(x={type:"style",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){s=xd(m.href);var N=Js(A).hoistableStyles,$=N.get(s);if($||(A=A.ownerDocument||A,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(s,$),(N=A.querySelector(zh(s)))&&!N._p&&($.instance=N,$.state.loading=5),la.has(s)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},la.set(s,m),N||iY(A,s,m,$.state))),c&&x===null)throw Error(r(528,""));return $}if(c&&x!==null)throw Error(r(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=wd(m),m=Js(A).hoistableScripts,x=m.get(c),x||(x={type:"script",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function xd(s){return'href="'+on(s)+'"'}function zh(s){return'link[rel="stylesheet"]['+s+"]"}function LC(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function iY(s,c,m,x){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=s.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),jr(c,"link",m),Fn(c),s.head.appendChild(c))}function wd(s){return'[src="'+on(s)+'"]'}function Uh(s){return"script[async]"+s}function IC(s,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var x=s.querySelector('style[data-href~="'+on(m.href)+'"]');if(x)return c.instance=x,Fn(x),x;var A=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),Fn(x),jr(x,"style",A),yg(x,m.precedence,s),c.instance=x;case"stylesheet":A=xd(m.href);var N=s.querySelector(zh(A));if(N)return c.state.loading|=4,c.instance=N,Fn(N),N;x=LC(m),(A=la.get(A))&&B_(x,A),N=(s.ownerDocument||s).createElement("link"),Fn(N);var $=N;return $._p=new Promise(function(Y,te){$.onload=Y,$.onerror=te}),jr(N,"link",x),c.state.loading|=4,yg(N,m.precedence,s),c.instance=N;case"script":return N=wd(m.src),(A=s.querySelector(Uh(N)))?(c.instance=A,Fn(A),A):(x=m,(A=la.get(N))&&(x=p({},m),z_(x,A)),s=s.ownerDocument||s,A=s.createElement("script"),Fn(A),jr(A,"link",x),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,yg(x,m.precedence,s));return c.instance}function yg(s,c,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=x.length?x[x.length-1]:null,N=A,$=0;$<x.length;$++){var Y=x[$];if(Y.dataset.precedence===c)N=Y;else if(N!==A)break}N?N.parentNode.insertBefore(s,N.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(s,c.firstChild))}function B_(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function z_(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var vg=null;function $C(s,c,m){if(vg===null){var x=new Map,A=vg=new Map;A.set(m,x)}else A=vg,x=A.get(m),x||(x=new Map,A.set(m,x));if(x.has(s))return x;for(x.set(s,null),m=m.getElementsByTagName(s),A=0;A<m.length;A++){var N=m[A];if(!(N[uc]||N[Un]||s==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var $=N.getAttribute(c)||"";$=s+$;var Y=x.get($);Y?Y.push(N):x.set($,[N])}}return x}function BC(s,c,m){s=s.ownerDocument||s,s.head.insertBefore(m,c==="title"?s.querySelector("head > title"):null)}function aY(s,c,m){if(m===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function zC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function oY(s,c,m,x){if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var A=xd(x.href),N=c.querySelector(zh(A));if(N){c=N._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=xg.bind(s),c.then(s,s)),m.state.loading|=4,m.instance=N,Fn(N);return}N=c.ownerDocument||c,x=LC(x),(A=la.get(A))&&B_(x,A),N=N.createElement("link"),Fn(N);var $=N;$._p=new Promise(function(Y,te){$.onload=Y,$.onerror=te}),jr(N,"link",x),m.instance=N}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(s.count++,m=xg.bind(s),c.addEventListener("load",m),c.addEventListener("error",m))}}var U_=0;function sY(s,c){return s.stylesheets&&s.count===0&&_g(s,s.stylesheets),0<s.count||0<s.imgCount?function(m){var x=setTimeout(function(){if(s.stylesheets&&_g(s,s.stylesheets),s.unsuspend){var N=s.unsuspend;s.unsuspend=null,N()}},6e4+c);0<s.imgBytes&&U_===0&&(U_=62500*UG());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&_g(s,s.stylesheets),s.unsuspend)){var N=s.unsuspend;s.unsuspend=null,N()}},(s.imgBytes>U_?50:800)+c);return s.unsuspend=m,function(){s.unsuspend=null,clearTimeout(x),clearTimeout(A)}}:null}function xg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_g(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var wg=null;function _g(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,wg=new Map,c.forEach(lY,s),wg=null,xg.call(s))}function lY(s,c){if(!(c.state.loading&4)){var m=wg.get(s);if(m)var x=m.get(null);else{m=new Map,wg.set(s,m);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<A.length;N++){var $=A[N];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(m.set($.dataset.precedence,$),x=$)}x&&m.set(null,x)}A=c.instance,$=A.getAttribute("data-precedence"),N=m.get($)||x,N===x&&m.set(null,A),m.set($,A),this.count++,x=xg.bind(this),A.addEventListener("load",x),A.addEventListener("error",x),N?N.parentNode.insertBefore(A,N.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var Fh={$$typeof:j,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function cY(s,c,m,x,A,N,$,Y,te){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gf(0),this.hiddenUpdates=Gf(null),this.identifierPrefix=x,this.onUncaughtError=A,this.onCaughtError=N,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function UC(s,c,m,x,A,N,$,Y,te,pe,_e,Te){return s=new cY(s,c,m,$,te,pe,_e,Te,Y),c=1,N===!0&&(c|=24),N=Ir(3,null,null,c),s.current=N,N.stateNode=s,c=xw(),c.refCount++,s.pooledCache=c,c.refCount++,N.memoizedState={element:x,isDehydrated:m,cache:c},kw(N),s}function FC(s){return s?(s=ns,s):ns}function HC(s,c,m,x,A,N){A=FC(A),x.context===null?x.context=A:x.pendingContext=A,x=bl(c),x.payload={element:m},N=N===void 0?null:N,N!==null&&(x.callback=N),m=yl(s,x,c),m!==null&&(mi(m,s,c),xh(m,s,c))}function GC(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<c?m:c}}function F_(s,c){GC(s,c),(s=s.alternate)&&GC(s,c)}function YC(s){if(s.tag===13||s.tag===31){var c=ia(s,67108864);c!==null&&mi(c,s,67108864),F_(s,67108864)}}function qC(s){if(s.tag===13||s.tag===31){var c=Pi();c=ri(c);var m=ia(s,c);m!==null&&mi(m,s,c),F_(s,c)}}var Sg=!0;function uY(s,c,m,x){var A=G.T;G.T=null;var N=J.p;try{J.p=2,H_(s,c,m,x)}finally{J.p=N,G.T=A}}function dY(s,c,m,x){var A=G.T;G.T=null;var N=J.p;try{J.p=8,H_(s,c,m,x)}finally{J.p=N,G.T=A}}function H_(s,c,m,x){if(Sg){var A=G_(x);if(A===null)N_(s,c,x,kg,m),WC(s,x);else if(hY(A,s,c,m,x))x.stopPropagation();else if(WC(s,x),c&4&&-1<fY.indexOf(s)){for(;A!==null;){var N=Xs(A);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var $=ni(N.pendingLanes);if($!==0){var Y=N;for(Y.pendingLanes|=2,Y.entangledLanes|=2;$;){var te=1<<31-Tn($);Y.entanglements[1]|=te,$&=~te}jo(N),(Lt&6)===0&&(og=Ye()+500,Lh(0))}}break;case 31:case 13:Y=ia(N,2),Y!==null&&mi(Y,N,2),lg(),F_(N,2)}if(N=G_(x),N===null&&N_(s,c,x,kg,m),N===A)break;A=N}A!==null&&x.stopPropagation()}else N_(s,c,x,null,m)}}function G_(s){return s=pc(s),Y_(s)}var kg=null;function Y_(s){if(kg=null,s=Zo(s),s!==null){var c=a(s);if(c===null)s=null;else{var m=c.tag;if(m===13){if(s=o(c),s!==null)return s;s=null}else if(m===31){if(s=l(c),s!==null)return s;s=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return kg=s,null}function KC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case Tt:return 2;case ht:return 8;case Me:case ze:return 32;case Xe:return 268435456;default:return 32}default:return 32}}var q_=!1,Nl=null,Ol=null,Cl=null,Hh=new Map,Gh=new Map,Ml=[],fY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WC(s,c){switch(s){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Ol=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Hh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(c.pointerId)}}function Yh(s,c,m,x,A,N){return s===null||s.nativeEvent!==N?(s={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:N,targetContainers:[A]},c!==null&&(c=Xs(c),c!==null&&YC(c)),s):(s.eventSystemFlags|=x,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function hY(s,c,m,x,A){switch(c){case"focusin":return Nl=Yh(Nl,s,c,m,x,A),!0;case"dragenter":return Ol=Yh(Ol,s,c,m,x,A),!0;case"mouseover":return Cl=Yh(Cl,s,c,m,x,A),!0;case"pointerover":var N=A.pointerId;return Hh.set(N,Yh(Hh.get(N)||null,s,c,m,x,A)),!0;case"gotpointercapture":return N=A.pointerId,Gh.set(N,Yh(Gh.get(N)||null,s,c,m,x,A)),!0}return!1}function VC(s){var c=Zo(s.target);if(c!==null){var m=a(c);if(m!==null){if(c=m.tag,c===13){if(c=o(m),c!==null){s.blockedOn=c,qf(s.priority,function(){qC(m)});return}}else if(c===31){if(c=l(m),c!==null){s.blockedOn=c,qf(s.priority,function(){qC(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Eg(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var m=G_(s.nativeEvent);if(m===null){m=s.nativeEvent;var x=new m.constructor(m.type,m);zu=x,m.target.dispatchEvent(x),zu=null}else return c=Xs(m),c!==null&&YC(c),s.blockedOn=m,!1;c.shift()}return!0}function ZC(s,c,m){Eg(s)&&m.delete(c)}function mY(){q_=!1,Nl!==null&&Eg(Nl)&&(Nl=null),Ol!==null&&Eg(Ol)&&(Ol=null),Cl!==null&&Eg(Cl)&&(Cl=null),Hh.forEach(ZC),Gh.forEach(ZC)}function jg(s,c){s.blockedOn===c&&(s.blockedOn=null,q_||(q_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mY)))}var Tg=null;function XC(s){Tg!==s&&(Tg=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Tg===s&&(Tg=null);for(var c=0;c<s.length;c+=3){var m=s[c],x=s[c+1],A=s[c+2];if(typeof x!="function"){if(Y_(x||m)===null)continue;break}var N=Xs(m);N!==null&&(s.splice(c,3),c-=3,Gw(N,{pending:!0,data:A,method:m.method,action:x},x,A))}}))}function _d(s){function c(te){return jg(te,s)}Nl!==null&&jg(Nl,s),Ol!==null&&jg(Ol,s),Cl!==null&&jg(Cl,s),Hh.forEach(c),Gh.forEach(c);for(var m=0;m<Ml.length;m++){var x=Ml[m];x.blockedOn===s&&(x.blockedOn=null)}for(;0<Ml.length&&(m=Ml[0],m.blockedOn===null);)VC(m),m.blockedOn===null&&Ml.shift();if(m=(s.ownerDocument||s).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var A=m[x],N=m[x+1],$=A[cr]||null;if(typeof N=="function")$||XC(m);else if($){var Y=null;if(N&&N.hasAttribute("formAction")){if(A=N,$=N[cr]||null)Y=$.formAction;else if(Y_(A)!==null)continue}else Y=$.action;typeof Y=="function"?m[x+1]=Y:(m.splice(x,3),x-=3),XC(m)}}}function JC(){function s(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function($){return A=$})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),x||setTimeout(m,20)}function m(){if(!x&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){x=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function K_(s){this._internalRoot=s}Ag.prototype.render=K_.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var m=c.current,x=Pi();HC(m,x,s,c,null,null)},Ag.prototype.unmount=K_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;HC(s.current,2,null,s,null,null),lg(),c[Vo]=null}};function Ag(s){this._internalRoot=s}Ag.prototype.unstable_scheduleHydration=function(s){if(s){var c=Yf();s={blockedOn:null,target:s,priority:c};for(var m=0;m<Ml.length&&c!==0&&c<Ml[m].priority;m++);Ml.splice(m,0,s),m===0&&VC(s)}};var QC=t.version;if(QC!=="19.2.1")throw Error(r(527,QC,"19.2.1"));J.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(c),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var pY={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{$t=Ng.inject(pY),Ht=Ng}catch{}}return Kh.createRoot=function(s,c){if(!i(s))throw Error(r(299));var m=!1,x="",A=oO,N=sO,$=lO;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError)),c=UC(s,1,!1,null,null,m,x,null,A,N,$,JC),s[Vo]=c.current,A_(s),new K_(c)},Kh.hydrateRoot=function(s,c,m){if(!i(s))throw Error(r(299));var x=!1,A="",N=oO,$=sO,Y=lO,te=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(N=m.onUncaughtError),m.onCaughtError!==void 0&&($=m.onCaughtError),m.onRecoverableError!==void 0&&(Y=m.onRecoverableError),m.formState!==void 0&&(te=m.formState)),c=UC(s,1,!0,c,m??null,x,A,te,N,$,Y,JC),c.context=FC(null),m=c.current,x=Pi(),x=ri(x),A=bl(x),A.callback=null,yl(m,A,x),m=x,c.current.lanes=m,Wo(c,m),jo(c),s[Vo]=c.current,A_(s),new Ag(c)},Kh.version="19.2.1",Kh}var cM;function kY(){if(cM)return V_.exports;cM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V_.exports=SY(),V_.exports}var EY=kY(),S=xf();const rn=Si(S),jY=VE({__proto__:null,default:rn},[S]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uM="popstate";function TY(e={}){function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return Ik("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$m(i)}return NY(t,n,null,e)}function vn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _a(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AY(){return Math.random().toString(36).substring(2,10)}function dM(e,t){return{usr:e.state,key:e.key,idx:t}}function Ik(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wf(t):t,state:n,key:t&&t.key||r||AY()}}function $m({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function NY(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){l="POP";let _=h(),T=_==null?null:_-d;d=_,u&&u({action:l,location:w.location,delta:T})}function b(_,T){l="PUSH";let O=Ik(w.location,_,T);d=h()+1;let j=dM(O,d),C=w.createHref(O);try{o.pushState(j,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(C)}a&&u&&u({action:l,location:w.location,delta:1})}function y(_,T){l="REPLACE";let O=Ik(w.location,_,T);d=h();let j=dM(O,d),C=w.createHref(O);o.replaceState(j,"",C),a&&u&&u({action:l,location:w.location,delta:0})}function k(_){return OY(_)}let w={get action(){return l},get location(){return e(i,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uM,p),u=_,()=>{i.removeEventListener(uM,p),u=null}},createHref(_){return t(i,_)},createURL:k,encodeLocation(_){let T=k(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:y,go(_){return o.go(_)}};return w}function OY(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),vn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:$m(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function m$(e,t,n="/"){return CY(e,t,n,!1)}function CY(e,t,n,r){let i=typeof t=="string"?wf(t):t,a=Ms(i.pathname||"/",n);if(a==null)return null;let o=p$(e);MY(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=HY(a);l=UY(o[u],d,r)}return l}function p$(e,t=[],n=[],r="",i=!1){let a=(o,l,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;vn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Ns([r,h.relativePath]),b=n.concat(h);o.children&&o.children.length>0&&(vn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),p$(o.children,t,b,p,u)),!(o.path==null&&!o.index)&&t.push({path:p,score:BY(p,o.index),routesMeta:b})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of g$(o.path))a(o,l,!0,u)}),t}function g$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=g$(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function MY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var DY=/^:[\w-]+$/,PY=3,RY=2,LY=1,IY=10,$Y=-2,fM=e=>e==="*";function BY(e,t){let n=e.split("/"),r=n.length;return n.some(fM)&&(r+=$Y),t&&(r+=RY),n.filter(i=>!fM(i)).reduce((i,a)=>i+(DY.test(a)?PY:a===""?LY:IY),r)}function zY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function UY(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",p=ay({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ay({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ns([a,p.pathname]),pathnameBase:WY(Ns([a,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(a=Ns([a,p.pathnameBase]))}return o}function ay(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FY(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},b)=>{if(h==="*"){let k=l[b]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const y=l[b];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function FY(e,t=!1,n=!0){_a(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function HY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _a(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ms(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var GY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YY=e=>GY.test(e);function qY(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?wf(e):e,a;if(n)if(YY(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),_a(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=hM(n.substring(1),"/"):a=hM(n,t)}else a=t;return{pathname:a,search:VY(r),hash:ZY(i)}}function hM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e1(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ZE(e){let t=KY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function XE(e,t,n,r=!1){let i;typeof e=="string"?i=wf(e):(i={...e},vn(!i.pathname||!i.pathname.includes("?"),e1("?","pathname","search",i)),vn(!i.pathname||!i.pathname.includes("#"),e1("#","pathname","hash",i)),vn(!i.search||!i.search.includes("#"),e1("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),p-=1;i.pathname=b.join("/")}l=p>=0?t[p]:"/"}let u=qY(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ns=e=>e.join("/").replace(/\/\/+/g,"/"),WY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function JY(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var b$=["POST","PUT","PATCH","DELETE"];new Set(b$);var QY=["GET",...b$];new Set(QY);var _f=S.createContext(null);_f.displayName="DataRouter";var Bv=S.createContext(null);Bv.displayName="DataRouterState";S.createContext(!1);var y$=S.createContext({isTransitioning:!1});y$.displayName="ViewTransition";var eq=S.createContext(new Map);eq.displayName="Fetchers";var tq=S.createContext(null);tq.displayName="Await";var Aa=S.createContext(null);Aa.displayName="Navigation";var _p=S.createContext(null);_p.displayName="Location";var qo=S.createContext({outlet:null,matches:[],isDataRoute:!1});qo.displayName="Route";var JE=S.createContext(null);JE.displayName="RouteError";function nq(e,{relative:t}={}){vn(Sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Aa),{hash:i,pathname:a,search:o}=Sp(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Ns([n,a])),r.createHref({pathname:l,search:o,hash:i})}function Sf(){return S.useContext(_p)!=null}function Hr(){return vn(Sf(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(_p).location}var v$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x$(e){S.useContext(Aa).static||S.useLayoutEffect(e)}function rc(){let{isDataRoute:e}=S.useContext(qo);return e?pq():rq()}function rq(){vn(Sf(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(_f),{basename:t,navigator:n}=S.useContext(Aa),{matches:r}=S.useContext(qo),{pathname:i}=Hr(),a=JSON.stringify(ZE(r)),o=S.useRef(!1);return x$(()=>{o.current=!0}),S.useCallback((u,d={})=>{if(_a(o.current,v$),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=XE(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ns([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}S.createContext(null);function Sp(e,{relative:t}={}){let{matches:n}=S.useContext(qo),{pathname:r}=Hr(),i=JSON.stringify(ZE(n));return S.useMemo(()=>XE(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function iq(e,t){return w$(e,t)}function w$(e,t,n,r,i){vn(Sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(Aa),{matches:o}=S.useContext(qo),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let O=p&&p.path||"";_$(d,!p||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let b=Hr(),y;if(t){let O=typeof t=="string"?wf(t):t;vn(h==="/"||O.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${O.pathname}" was given in the \`location\` prop.`),y=O}else y=b;let k=y.pathname||"/",w=k;if(h!=="/"){let O=h.replace(/^\//,"").split("/");w="/"+k.replace(/^\//,"").split("/").slice(O.length).join("/")}let _=m$(e,{pathname:w});_a(p||_!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),_a(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=cq(_&&_.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:Ns([h,a.encodeLocation?a.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?h:Ns([h,a.encodeLocation?a.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),o,n,r,i);return t&&T?S.createElement(_p.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function aq(){let e=mq(),t=XY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:i},n):null,o)}var oq=S.createElement(aq,null),sq=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(qo.Provider,{value:this.props.routeContext},S.createElement(JE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lq({routeContext:e,match:t,children:n}){let r=S.useContext(_f);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(qo.Provider,{value:e},n)}function cq(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);vn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:b,errors:y}=n,k=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||k){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,p)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:JY(n.matches),errorInfo:p})}:void 0;return a.reduceRight((h,p,b)=>{let y,k=!1,w=null,_=null;n&&(y=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||oq,l&&(u<0&&b===0?(_$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,_=null):u===b&&(k=!0,_=p.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,b+1)),O=()=>{let j;return y?j=w:k?j=_:p.route.Component?j=S.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,S.createElement(lq,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?S.createElement(sq,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):O()},null)}function QE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uq(e){let t=S.useContext(_f);return vn(t,QE(e)),t}function dq(e){let t=S.useContext(Bv);return vn(t,QE(e)),t}function fq(e){let t=S.useContext(qo);return vn(t,QE(e)),t}function ej(e){let t=fq(e),n=t.matches[t.matches.length-1];return vn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function hq(){return ej("useRouteId")}function mq(){let e=S.useContext(JE),t=dq("useRouteError"),n=ej("useRouteError");return e!==void 0?e:t.errors?.[n]}function pq(){let{router:e}=uq("useNavigate"),t=ej("useNavigate"),n=S.useRef(!1);return x$(()=>{n.current=!0}),S.useCallback(async(i,a={})=>{_a(n.current,v$),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var mM={};function _$(e,t,n){!t&&!mM[e]&&(mM[e]=!0,_a(!1,n))}S.memo(gq);function gq({routes:e,future:t,state:n,unstable_onError:r}){return w$(e,void 0,n,r,t)}function bq({to:e,replace:t,state:n,relative:r}){vn(Sf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=S.useContext(Aa);_a(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(qo),{pathname:o}=Hr(),l=rc(),u=XE(e,ZE(a),o,r==="path"),d=JSON.stringify(u);return S.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:r})},[l,d,r,t,n]),null}function Ha(e){vn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yq({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){vn(!Sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof n=="string"&&(n=wf(n));let{pathname:d="/",search:h="",hash:p="",state:b=null,key:y="default"}=n,k=S.useMemo(()=>{let w=Ms(d,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:b,key:y},navigationType:r}},[l,d,h,p,b,y,r]);return _a(k!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:S.createElement(Aa.Provider,{value:u},S.createElement(_p.Provider,{children:t,value:k}))}function vq({children:e,location:t}){return iq($k(e),t)}function $k(e,t=[]){let n=[];return S.Children.forEach(e,(r,i)=>{if(!S.isValidElement(r))return;let a=[...t,i];if(r.type===S.Fragment){n.push.apply(n,$k(r.props.children,a));return}vn(r.type===Ha,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$k(r.props.children,a)),n.push(o)}),n}var zb="get",Ub="application/x-www-form-urlencoded";function zv(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function xq(e){return zv(e)&&e.tagName.toLowerCase()==="button"}function wq(e){return zv(e)&&e.tagName.toLowerCase()==="form"}function _q(e){return zv(e)&&e.tagName.toLowerCase()==="input"}function Sq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kq(e,t){return e.button===0&&(!t||t==="_self")&&!Sq(e)}var Og=null;function Eq(){if(Og===null)try{new FormData(document.createElement("form"),0),Og=!1}catch{Og=!0}return Og}var jq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t1(e){return e!=null&&!jq.has(e)?(_a(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ub}"`),null):e}function Tq(e,t){let n,r,i,a,o;if(wq(e)){let l=e.getAttribute("action");r=l?Ms(l,t):null,n=e.getAttribute("method")||zb,i=t1(e.getAttribute("enctype"))||Ub,a=new FormData(e)}else if(xq(e)||_q(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(r=u?Ms(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||zb,i=t1(e.getAttribute("formenctype"))||t1(l.getAttribute("enctype"))||Ub,a=new FormData(l,e),!Eq()){let{name:d,type:h,value:p}=e;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,p)}}else{if(zv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zb,r=null,i=Ub,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tj(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Aq(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Ms(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Nq(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Oq(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Cq(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await Nq(a,n);return o.links?o.links():[]}return[]}));return Rq(r.flat(1).filter(Oq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function pM(e,t,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?t.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Mq(e,t,{includeHydrateFallback:n}={}){return Dq(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Dq(e){return[...new Set(e)]}function Pq(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Rq(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(Pq(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function S$(){let e=S.useContext(_f);return tj(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Lq(){let e=S.useContext(Bv);return tj(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nj=S.createContext(void 0);nj.displayName="FrameworkContext";function k$(){let e=S.useContext(nj);return tj(e,"You must render this element inside a <HydratedRouter> element"),e}function Iq(e,t){let n=S.useContext(nj),[r,i]=S.useState(!1),[a,o]=S.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=t,b=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=T=>{T.forEach(O=>{o(O.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,b,{}]:[a,b,{onFocus:Wh(l,y),onBlur:Wh(u,k),onMouseEnter:Wh(d,y),onMouseLeave:Wh(h,k),onTouchStart:Wh(p,y)}]:[!1,b,{}]}function Wh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $q({page:e,...t}){let{router:n}=S$(),r=S.useMemo(()=>m$(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(zq,{page:e,matches:r,...t}):null}function Bq(e){let{manifest:t,routeModules:n}=k$(),[r,i]=S.useState([]);return S.useEffect(()=>{let a=!1;return Cq(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function zq({page:e,matches:t,...n}){let r=Hr(),{manifest:i,routeModules:a}=k$(),{basename:o}=S$(),{loaderData:l,matches:u}=Lq(),d=S.useMemo(()=>pM(e,t,u,i,r,"data"),[e,t,u,i,r]),h=S.useMemo(()=>pM(e,t,u,i,r,"assets"),[e,t,u,i,r]),p=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,w=!1;if(t.forEach(T=>{let O=i.routes[T.route.id];!O||!O.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in l&&a[T.route.id]?.shouldRevalidate||O.hasClientLoader?w=!0:k.add(T.route.id))}),k.size===0)return[];let _=Aq(e,o,"data");return w&&k.size>0&&_.searchParams.set("_routes",t.filter(T=>k.has(T.route.id)).map(T=>T.route.id).join(",")),[_.pathname+_.search]},[o,l,r,i,d,t,e,a]),b=S.useMemo(()=>Mq(h,i),[h,i]),y=Bq(h);return S.createElement(S.Fragment,null,p.map(k=>S.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),b.map(k=>S.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),y.map(({key:k,link:w})=>S.createElement("link",{key:k,nonce:n.nonce,...w})))}function Uq(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var E$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E$&&(window.__reactRouterVersion="7.10.1")}catch{}function Fq({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=S.useRef();i.current==null&&(i.current=TY({window:r,v5Compat:!0}));let a=i.current,[o,l]=S.useState({action:a.action,location:a.location}),u=S.useCallback(d=>{n===!1?l(d):S.startTransition(()=>l(d))},[n]);return S.useLayoutEffect(()=>a.listen(u),[a,u]),S.createElement(yq,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}var j$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rj=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p,...b},y){let{basename:k,unstable_useTransitions:w}=S.useContext(Aa),_=typeof d=="string"&&j$.test(d),T,O=!1;if(typeof d=="string"&&_&&(T=d,E$))try{let q=new URL(window.location.href),H=d.startsWith("//")?new URL(q.protocol+d):new URL(d),B=Ms(H.pathname,k);H.origin===q.origin&&B!=null?d=B+H.search+H.hash:O=!0}catch{_a(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=nq(d,{relative:i}),[C,M,P]=Iq(r,b),I=qq(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p,unstable_useTransitions:w});function U(q){t&&t(q),q.defaultPrevented||I(q)}let V=S.createElement("a",{...b,...P,href:T||j,onClick:O||a?t:U,ref:Uq(y,M),target:u,"data-discover":!_&&n==="render"?"true":void 0});return C&&!_?S.createElement(S.Fragment,null,V,S.createElement($q,{page:j})):V});rj.displayName="Link";var Hq=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let p=Sp(o,{relative:d.relative}),b=Hr(),y=S.useContext(Bv),{navigator:k,basename:w}=S.useContext(Aa),_=y!=null&&Xq(p)&&l===!0,T=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,O=b.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(O=O.toLowerCase(),j=j?j.toLowerCase():null,T=T.toLowerCase()),j&&w&&(j=Ms(j,w)||j);const C=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let M=O===T||!i&&O.startsWith(T)&&O.charAt(C)==="/",P=j!=null&&(j===T||!i&&j.startsWith(T)&&j.charAt(T.length)==="/"),I={isActive:M,isPending:P,isTransitioning:_},U=M?t:void 0,V;typeof r=="function"?V=r(I):V=[r,M?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let q=typeof a=="function"?a(I):a;return S.createElement(rj,{...d,"aria-current":U,className:V,ref:h,style:q,to:o,viewTransition:l},typeof u=="function"?u(I):u)});Hq.displayName="NavLink";var Gq=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=zb,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:p,...b},y)=>{let{unstable_useTransitions:k}=S.useContext(Aa),w=Vq(),_=Zq(l,{relative:d}),T=o.toLowerCase()==="get"?"get":"post",O=typeof l=="string"&&j$.test(l),j=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let M=C.nativeEvent.submitter,P=M?.getAttribute("formmethod")||o,I=()=>w(M||C.currentTarget,{fetcherKey:t,method:P,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p});k&&n!==!1?S.startTransition(()=>I()):I()};return S.createElement("form",{ref:y,method:T,action:_,onSubmit:r?u:j,...b,"data-discover":!O&&e==="render"?"true":void 0})});Gq.displayName="Form";function Yq(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T$(e){let t=S.useContext(_f);return vn(t,Yq(e)),t}function qq(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let u=rc(),d=Hr(),h=Sp(e,{relative:a});return S.useCallback(p=>{if(kq(p,t)){p.preventDefault();let b=n!==void 0?n:$m(d)===$m(h),y=()=>u(e,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o});l?S.startTransition(()=>y()):y()}},[d,u,h,n,r,t,e,i,a,o,l])}var Kq=0,Wq=()=>`__${String(++Kq)}__`;function Vq(){let{router:e}=T$("useSubmit"),{basename:t}=S.useContext(Aa),n=hq(),r=e.fetch,i=e.navigate;return S.useCallback(async(a,o={})=>{let{action:l,method:u,encType:d,formData:h,body:p}=Tq(a,t);if(o.navigate===!1){let b=o.fetcherKey||Wq();await r(b,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,t,n])}function Zq(e,{relative:t}={}){let{basename:n}=S.useContext(Aa),r=S.useContext(qo);vn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sp(e||".",{relative:t})},o=Hr();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ns([n,a.pathname])),$m(a)}function Xq(e,{relative:t}={}){let n=S.useContext(y$);vn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=T$("useViewTransitionState"),i=Sp(e,{relative:t});if(!n.isTransitioning)return!1;let a=Ms(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ms(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ay(i.pathname,o)!=null||ay(i.pathname,a)!=null}var Du=h$();const Jq=Si(Du);let Qq={data:""},eK=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Qq,tK=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,nK=/\/\*[^]*?\*\/|  +/g,gM=/\n+/g,Il=(e,t)=>{let n="",r="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Il(o,a):a+"{"+Il(o,a[1]=="k"?"":t)+"}":typeof o=="object"?r+=Il(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Il.p?Il.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},bs={},A$=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+A$(e[n]);return t}return e},rK=(e,t,n,r,i)=>{let a=A$(e),o=bs[a]||(bs[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!bs[o]){let u=a!==e?e:(d=>{let h,p,b=[{}];for(;h=tK.exec(d.replace(nK,""));)h[4]?b.shift():h[3]?(p=h[3].replace(gM," ").trim(),b.unshift(b[0][p]=b[0][p]||{})):b[0][h[1]]=h[2].replace(gM," ").trim();return b[0]})(e);bs[o]=Il(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&bs.g?bs.g:null;return n&&(bs.g=bs[o]),((u,d,h,p)=>{p?d.data=d.data.replace(p,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(bs[o],t,r,l),o},iK=(e,t,n)=>e.reduce((r,i,a)=>{let o=t[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Il(l,""):l===!1?"":l}return r+i+(o??"")},"");function Uv(e){let t=this||{},n=e.call?e(t.p):e;return rK(n.unshift?n.raw?iK(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,eK(t.target),t.g,t.o,t.k)}let N$,Bk,zk;Uv.bind({g:1});let Ds=Uv.bind({k:1});function aK(e,t,n,r){Il.p=t,N$=e,Bk=n,zk=r}function ic(e,t){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),u=l.className||i.className;n.p=Object.assign({theme:Bk&&Bk()},l),n.o=/ *go\d+/.test(u),l.className=Uv.apply(n,r)+(u?" "+u:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),zk&&d[0]&&zk(l),N$(d,l)}return i}}var oK=e=>typeof e=="function",oy=(e,t)=>oK(e)?e(t):e,sK=(()=>{let e=0;return()=>(++e).toString()})(),O$=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),lK=20,ij="default",C$=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return C$(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},Fb=[],M$={toasts:[],pausedAt:void 0,settings:{toastLimit:lK}},Lo={},D$=(e,t=ij)=>{Lo[t]=C$(Lo[t]||M$,e),Fb.forEach(([n,r])=>{n===t&&r(Lo[t])})},P$=e=>Object.keys(Lo).forEach(t=>D$(e,t)),cK=e=>Object.keys(Lo).find(t=>Lo[t].toasts.some(n=>n.id===e)),Fv=(e=ij)=>t=>{D$(t,e)},uK={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dK=(e={},t=ij)=>{let[n,r]=S.useState(Lo[t]||M$),i=S.useRef(Lo[t]);S.useEffect(()=>(i.current!==Lo[t]&&r(Lo[t]),Fb.push([t,r]),()=>{let o=Fb.findIndex(([l])=>l===t);o>-1&&Fb.splice(o,1)}),[t]);let a=n.toasts.map(o=>{var l,u,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((u=e[o.type])==null?void 0:u.duration)||e?.duration||uK[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:a}},fK=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||sK()}),kp=e=>(t,n)=>{let r=fK(t,e,n);return Fv(r.toasterId||cK(r.id))({type:2,toast:r}),r.id},Bn=(e,t)=>kp("blank")(e,t);Bn.error=kp("error");Bn.success=kp("success");Bn.loading=kp("loading");Bn.custom=kp("custom");Bn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Fv(t)(n):P$(n)};Bn.dismissAll=e=>Bn.dismiss(void 0,e);Bn.remove=(e,t)=>{let n={type:4,toastId:e};t?Fv(t)(n):P$(n)};Bn.removeAll=e=>Bn.remove(void 0,e);Bn.promise=(e,t,n)=>{let r=Bn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?oy(t.success,i):void 0;return a?Bn.success(a,{id:r,...n,...n?.success}):Bn.dismiss(r),i}).catch(i=>{let a=t.error?oy(t.error,i):void 0;a?Bn.error(a,{id:r,...n,...n?.error}):Bn.dismiss(r)}),e};var hK=1e3,mK=(e,t="default")=>{let{toasts:n,pausedAt:r}=dK(e,t),i=S.useRef(new Map).current,a=S.useCallback((p,b=hK)=>{if(i.has(p))return;let y=setTimeout(()=>{i.delete(p),o({type:4,toastId:p})},b);i.set(p,y)},[]);S.useEffect(()=>{if(r)return;let p=Date.now(),b=n.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(p-y.createdAt);if(k<0){y.visible&&Bn.dismiss(y.id);return}return setTimeout(()=>Bn.dismiss(y.id,t),k)});return()=>{b.forEach(y=>y&&clearTimeout(y))}},[n,r,t]);let o=S.useCallback(Fv(t),[t]),l=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=S.useCallback((p,b)=>{o({type:1,toast:{id:p,height:b}})},[o]),d=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=S.useCallback((p,b)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:w}=b||{},_=n.filter(j=>(j.position||w)===(p.position||w)&&j.height),T=_.findIndex(j=>j.id===p.id),O=_.filter((j,C)=>C<T&&j.visible).length;return _.filter(j=>j.visible).slice(...y?[O+1]:[0,O]).reduce((j,C)=>j+(C.height||0)+k,0)},[n]);return S.useEffect(()=>{n.forEach(p=>{if(p.dismissed)a(p.id,p.removeDelay);else{let b=i.get(p.id);b&&(clearTimeout(b),i.delete(p.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:u,startPause:l,endPause:d,calculateOffset:h}}},pK=Ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,gK=Ds`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bK=Ds`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,yK=ic("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${gK} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bK} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vK=Ds`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,xK=ic("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${vK} 1s linear infinite;
`,wK=Ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,_K=Ds`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,SK=ic("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${_K} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,kK=ic("div")`
  position: absolute;
`,EK=ic("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jK=Ds`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TK=ic("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jK} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,AK=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(TK,null,t):t:n==="blank"?null:S.createElement(EK,null,S.createElement(xK,{...r}),n!=="loading"&&S.createElement(kK,null,n==="error"?S.createElement(yK,{...r}):S.createElement(SK,{...r})))},NK=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,OK=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,CK="0%{opacity:0;} 100%{opacity:1;}",MK="0%{opacity:1;} 100%{opacity:0;}",DK=ic("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PK=ic("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RK=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=O$()?[CK,MK]:[NK(n),OK(n)];return{animation:t?`${Ds(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ds(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},LK=S.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?RK(e.position||t||"top-center",e.visible):{opacity:0},a=S.createElement(AK,{toast:e}),o=S.createElement(PK,{...e.ariaProps},oy(e.message,e));return S.createElement(DK,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:a,message:o}):S.createElement(S.Fragment,null,a,o))});aK(S.createElement);var IK=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let a=S.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(e,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:a,className:t,style:n},i)},$K=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:O$()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},BK=Uv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cg=16,R$=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:d}=mK(n,a);return S.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Cg,left:Cg,right:Cg,bottom:Cg,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let p=h.position||t,b=d.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=$K(p,b);return S.createElement(IK,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?BK:"",style:y},h.type==="custom"?oy(h.message,h):i?i(h):S.createElement(LK,{toast:h,position:p}))}))},ma=Bn;function zK(e,t,n,r=0,i=0){t<=2&&(e-=1,t+=12);const a=Math.floor(e/100),o=2-a+Math.floor(a/4),l=n+(r+i/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+l+o-1524.5}const UK=864e5;function FK(e){const t=(e-24405875e-1)*UK;return new Date(t)}function HK(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const i=n-2e3;return 63.86+.3345*i-.060374*i*i+.0017275*i**3+651814e-9*i**4+2373599e-11*i**5}if(n>=2005&&n<2050){const i=n-2e3;return 62.92+.32217*i+.005589*i*i}if(n>=2050&&n<=2150){const i=(n-1820)/100;return-20+32*i*i-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const i=(n-1800)/100;return 13.72-33.244*i+68.612*i**2-65.3*i**3-1.653*i**4+.3343*i**5-.012125*i**6+1348e-7*i**7-175e-8*i**8}const r=(n-1820)/100;return-20+32*r*r}function GK(e){const t=Math.floor(e+.5),n=e+.5-t;let r=t;if(t>=2299161){const p=Math.floor((t-186721625e-2)/36524.25);r=t+1+p-Math.floor(p/4)}const i=r+1524,a=Math.floor((i-122.1)/365.25),o=Math.floor(365.25*a),l=Math.floor((i-o)/30.6001),u=i-o-Math.floor(30.6001*l)+n;let d=l-1;d>12&&(d-=12);let h=a-4715;return d>2&&(h-=1),[h,d,u]}const Cm=Math.PI,lu=Cm/180,YK=180/Cm,qK=86400;function KK(e){return e%=360,e<0?e+360:e}function WK(e,t){return(e-t+540)%360-180}function bM(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function VK(e){const[t,n]=GK(e);return e+HK(t,Math.round(n))/qK}function yM(e,t){let n=0,r=1;for(let i=0;i<e.length;i++){let a=0;for(const[o,l,u]of e[i])a+=o*Math.cos(l+u*t);n+=a*r,r*=t}return n*1e-8}function ZK(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*lu,r=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*lu,i=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*lu,a=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*lu,o=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*lu,l=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let u=0,d=0;for(const[h,p,b,y,k,w,_,T,O]of l){const j=h*n+p*r+b*i+y*a+k*o;u+=(w+_*t)*Math.sin(j),d+=(T+O*t)*Math.cos(j)}return u*=1e-4,d*=1e-4,{dpsi:u,deps:d}}function Mg(e){const t=VK(e),n=(t-2451545)/365250,r=yM(vM.L,n),i=yM(vM.R,n);let a=r+Cm;a>2*Cm&&(a-=2*Cm);const{dpsi:o}=ZK(t),l=o/3600*lu,u=20.4898/(3600*i),d=a+l-u*lu;return KK(d*YK)}function pn(e,t,n){const r=(t%360+360)%360,i=zK(e,1,1),a=Mg(i);let o=r-a;o<0&&(o+=360);let l=i+o/.98564736;const u=1e-6,d=5e-6;for(let b=0;b<25;b++){const y=Mg(l),k=WK(r,y);if(Math.abs(k)<u)break;const w=Mg(l+d),_=Mg(l-d),T=bM(w,y),O=bM(_,y),j=(T-O)/(2*d);l+=k/j}const h=FK(l),p=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),0,0);if(Number.isFinite(n)){const b=n/15-9;if(Math.abs(b)>1e-12)return new Date(p.getTime()+b*36e5)}return p}const vM={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},XK=(e,t)=>(e%t+t)%t,aj=(e,t)=>(e%t+t)%t,L$=e=>e instanceof Date&&!Number.isNaN(e.getTime()),xM=new Map;function I$(e,t=127.5){const n=`${e}@${t}`,r=xM.get(n);if(r)return r;const i=pn(e,315,t);if(!i)throw new Error(`    : year=${e}, lon=${t}`);return xM.set(n,i),i}function $$(e,t=127.5){if(!L$(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),r=I$(n,t),i=e<r?n-1:n,a=XK(i-4,60);return{useYear:i,index60Num:a}}const Jr=["","","","","","","","","",""],xi=["","","","","","","","","","","",""],Uk={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},co={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},JK=["","","","","","","","","",""],QK=["","","","","","","","","","","",""],eW=["","","","","","","","","","","","","","","","","","","",""],tW=["","","","","","","","","","","","","","","","","","","","","","","",""],rf=new Set(Jr),Bm=new Set(xi),Xn={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ir={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zm=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],sy=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],nW={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},rW={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function ct(e,t=127.5){const{index60Num:n}=$$(e,t);return zm[n]}function iW(e,t=127.5){return(ct(e,t)||"").charAt(0)}const aW=[2,4,6,8,0,2,4,6,8,0];function oW(e,t=127.5){const n=new Array(12);return n[0]=I$(e,t),n[1]=pn(e,345,t),n[2]=pn(e,15,t),n[3]=pn(e,45,t),n[4]=pn(e,75,t),n[5]=pn(e,105,t),n[6]=pn(e,135,t),n[7]=pn(e,165,t),n[8]=pn(e,195,t),n[9]=pn(e,225,t),n[10]=pn(e,255,t),n[11]=pn(e+1,285,t),n.map(r=>new Date(r.getTime()+1800*1e3))}function sW(e,t=127.5){const{useYear:n}=$$(e,t),r=oW(n,t);let i=0;for(let o=0;o<12;o+=1)e>=r[o]&&(i=o);return{monthIndex:i+1,useYear:n,boundaries:r}}function lW(e,t=127.5){const n=iW(e,t),r=Uk..indexOf(n);if(r<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return aW[r]}function cW(e,t,n=127.5){return(lW(e,n)+(t-1))%10}function At(e,t=127.5){if(!L$(e))return"";const{monthIndex:n}=sW(e,t),r=(2+(n-1))%12,i=Uk.[r],a=cW(e,n,t);return Uk.[a]+i}const ly={JDN:2445731,idx:0};function B$(e,t,n,r=0,i=0,a=0){t<=2&&(e-=1,t+=12);const o=Math.floor(e/100),l=2-o+Math.floor(o/4),u=(r+i/60+a/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+u+l-1524.5}function uW(e,t){const n=e.getHours(),r=e.getMinutes(),i=n*60+r,a=hW(e);return t===""&&a===""?i>=1380?1:0:t===""&&(a===""||a==="")?i<180?-1:0:(i<0,0)}function dW(e,t){const r=e.getHours()*60+e.getMinutes();return t===""?r>=1380?1:0:t===""&&r<180?-1:0}function pt(e,t){const n=uW(e,t),r=new Date(e.getTime());r.setDate(r.getDate()+n);const i=B$(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes()),a=Math.floor(i+.5),o=aj(a-ly.JDN+ly.idx,60),l=zm[o];if(!l)throw new Error(`getDayGanZhi: idx=${o} out of range (jdn=${a}, jd=${i})`);return l}function to(e,t){if(!e)return e;const n=zm.indexOf(e);return n<0?e:zm[aj(n+t,60)]??e}function fW(e,t){const n=new Date(e),r=dW(n,t),i=new Date(e.getTime());i.setDate(i.getDate()+r);const a=B$(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),o=Math.floor(a+.5),l=aj(o-ly.JDN+ly.idx,60),u=zm[l];if(!u)throw new Error(`getDayGanZhi: idx=${l} out of range (jdn=${o}, jd=${a})`);return u}function hW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<sy.length;n+=1){const{branch:r,start:i,end:a}=sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function mW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<sy.length;n+=1){const{branch:r,start:i,end:a}=sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function pW(e,t,n,r){const i=Jr.indexOf(t);if(i<0)return"";let a=(i%5*2+n)%10;const o=e.getHours();return(r===""||r==="/"&&o>=3)&&(n===0||n===1)&&(a=(a+2)%10),Jr[a]}function no(e,t,n){e instanceof Date||(e=new Date(e));const r=mW(e),i=xi.indexOf(r),o=(n??pt(e,t)).charAt(0);return pW(e,o,i,t)+r}const wM=e=>{let t;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const b=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,b))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,l);return l},gW=(e=>e?wM(e):wM),bW=e=>e;function yW(e,t=bW){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const _M=e=>{const t=gW(e),n=r=>yW(t,r);return Object.assign(n,t),n},Ko=(e=>e?_M(e):_M);function vW(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Fk=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Fk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Fk(r)(n)}}}},xW=(e,t)=>(n,r,i)=>{let a={storage:vW(()=>localStorage),partialize:w=>w,version:0,merge:(w,_)=>({..._,...w}),...t},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},p=i.setState;i.setState=(w,_)=>(p(w,_),h());const b=e((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>b;let y;const k=()=>{var w,_;if(!d)return;o=!1,l.forEach(O=>{var j;return O((j=r())!=null?j:b)});const T=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(w=r())!=null?w:b))||void 0;return Fk(d.getItem.bind(d))(a.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==a.version){if(a.migrate){const j=a.migrate(O.state,O.version);return j instanceof Promise?j.then(C=>[!0,C]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var j;const[C,M]=O;if(y=a.merge(M,(j=r())!=null?j:b),n(y,!0),C)return h()}).then(()=>{T?.(y,void 0),y=r(),o=!0,u.forEach(O=>O(y))}).catch(O=>{T?.(void 0,O)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||k(),y||b},z$=xW;var ys={},Dg={},Hk=function(e,t){return Hk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Hk(e,t)};function U$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var cy=function(){return cy=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cy.apply(this,arguments)};function kf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function F$(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function H$(e,t){return function(n,r){t(n,r,e)}}function G$(e,t,n,r,i,a){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,b=!1,y=n.length-1;y>=0;y--){var k={};for(var w in r)k[w]=w==="access"?{}:r[w];for(var w in r.access)k.access[w]=r.access[w];k.addInitializer=function(T){if(b)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(T||null))};var _=(0,n[y])(l==="accessor"?{get:h.get,set:h.set}:h[u],k);if(l==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(p=o(_.get))&&(h.get=p),(p=o(_.set))&&(h.set=p),(p=o(_.init))&&i.unshift(p)}else(p=o(_))&&(l==="field"?i.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),b=!0}function Y$(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function q$(e){return typeof e=="symbol"?e:"".concat(e)}function K$(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function W$(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ge(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?a(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function V$(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Hv=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function Z$(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Hv(t,e,n)}function uy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oj(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function X$(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(oj(arguments[t]));return e}function J$(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r}function Q$(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function af(e){return this instanceof af?(this.v=e,this):new af(e)}function eB(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(k){return Promise.resolve(k).then(y,p)}}function l(y,k){r[y]&&(i[y]=function(w){return new Promise(function(_,T){a.push([y,w,_,T])>1||u(y,w)})},k&&(i[y]=k(i[y])))}function u(y,k){try{d(r[y](k))}catch(w){b(a[0][3],w)}}function d(y){y.value instanceof af?Promise.resolve(y.value.v).then(h,p):b(a[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function b(y,k){y(k),a.shift(),a.length&&u(a[0][0],a[0][1])}}function tB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:af(e[i](o)),done:!1}:a?a(o):o}:a}}function nB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof uy=="function"?uy(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),i(l,u,o.done,o.value)})}}function i(a,o,l,u){Promise.resolve(u).then(function(d){a({value:d,done:l})},o)}}function rB(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var wW=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Gk=function(e){return Gk=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Gk(e)};function iB(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Gk(e),r=0;r<n.length;r++)n[r]!=="default"&&Hv(t,e,n[r]);return wW(t,e),t}function aB(e){return e&&e.__esModule?e:{default:e}}function oB(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function sB(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function lB(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function cB(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var _W=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function uB(e){function t(a){e.error=e.hasError?new _W(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function dB(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?t?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):e}const SW={__extends:U$,__assign:cy,__rest:kf,__decorate:F$,__param:H$,__esDecorate:G$,__runInitializers:Y$,__propKey:q$,__setFunctionName:K$,__metadata:W$,__awaiter:Ge,__generator:V$,__createBinding:Hv,__exportStar:Z$,__values:uy,__read:oj,__spread:X$,__spreadArrays:J$,__spreadArray:Q$,__await:af,__asyncGenerator:eB,__asyncDelegator:tB,__asyncValues:nB,__makeTemplateObject:rB,__importStar:iB,__importDefault:aB,__classPrivateFieldGet:oB,__classPrivateFieldSet:sB,__classPrivateFieldIn:lB,__addDisposableResource:cB,__disposeResources:uB,__rewriteRelativeImportExtension:dB},kW=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:cB,get __assign(){return cy},__asyncDelegator:tB,__asyncGenerator:eB,__asyncValues:nB,__await:af,__awaiter:Ge,__classPrivateFieldGet:oB,__classPrivateFieldIn:lB,__classPrivateFieldSet:sB,__createBinding:Hv,__decorate:F$,__disposeResources:uB,__esDecorate:G$,__exportStar:Z$,__extends:U$,__generator:V$,__importDefault:aB,__importStar:iB,__makeTemplateObject:rB,__metadata:W$,__param:H$,__propKey:q$,__read:oj,__rest:kf,__rewriteRelativeImportExtension:dB,__runInitializers:Y$,__setFunctionName:K$,__spread:X$,__spreadArray:Q$,__spreadArrays:J$,__values:uy,default:SW},Symbol.toStringTag,{value:"Module"})),EW=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Gv=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},fB=class extends Gv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Yk=class extends Gv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},qk=class extends Gv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var dy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dy||(dy={}));class jW{constructor(t,{headers:n={},customFetch:r,region:i=dy.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=EW(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ge(this,arguments,void 0,function*(n,r={}){var i;let a,o;try{const{headers:l,method:u,body:d,signal:h,timeout:p}=r;let b={},{region:y}=r;y||(y=this.region);const k=new URL(`${this.url}/${n}`);y&&y!=="any"&&(b["x-region"]=y,k.searchParams.set("forceFunctionRegion",y));let w;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(b["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(b["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let _=h;p&&(o=new AbortController,a=setTimeout(()=>o.abort(),p),h?(_=o.signal,h.addEventListener("abort",()=>o.abort())):_=o.signal);const T=yield this.fetch(k.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),l),body:w,signal:_}).catch(M=>{throw new fB(M)}),O=T.headers.get("x-relay-error");if(O&&O==="true")throw new Yk(T);if(!T.ok)throw new qk(T);let j=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield T.json():j==="application/octet-stream"||j==="application/pdf"?C=yield T.blob():j==="text/event-stream"?C=T:j==="multipart/form-data"?C=yield T.formData():C=yield T.text(),{data:C,error:null,response:T}}catch(l){return{data:null,error:l,response:l instanceof qk||l instanceof Yk?l.context:void 0}}finally{a&&clearTimeout(a)}})}}const TW=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return dy},FunctionsClient:jW,FunctionsError:Gv,FunctionsFetchError:fB,FunctionsHttpError:qk,FunctionsRelayError:Yk},Symbol.toStringTag,{value:"Module"})),hB=wp(TW);var Br={};const Ef=wp(kW);var Pg={},Rg={},Lg={},Ig={},$g={},Bg={},SM;function mB(){if(SM)return Bg;SM=1,Object.defineProperty(Bg,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Bg.default=e,Bg}var kM;function pB(){if(kM)return $g;kM=1,Object.defineProperty($g,"__esModule",{value:!0});const t=Ef.__importDefault(mB());let n=class{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,p,b;let y=null,k=null,w=null,_=u.status,T=u.statusText;if(u.ok){if(this.method!=="HEAD"){const M=await u.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?k=M:k=JSON.parse(M))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),C=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&C&&C.length>1&&(w=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(y={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,w=null,_=406,T="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const j=await u.text();try{y=JSON.parse(j),Array.isArray(y)&&u.status===404&&(k=[],y=null,_=200,T="OK")}catch{u.status===404&&j===""?(_=204,T="No Content"):y={message:j}}if(y&&this.isMaybeSingle&&(!((b=y?.details)===null||b===void 0)&&b.includes("0 rows"))&&(y=null,_=200,T="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:k,count:w,status:_,statusText:T}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,h,p,b,y,k;let w="";const _=u?.cause;if(_){const T=(d=_?.message)!==null&&d!==void 0?d:"",O=(h=_?.code)!==null&&h!==void 0?h:"";w=`${(p=u?.name)!==null&&p!==void 0?p:"FetchError"}: ${u?.message}`,w+=`

Caused by: ${(b=_?.name)!==null&&b!==void 0?b:"Error"}: ${T}`,O&&(w+=` (${O})`),_?.stack&&(w+=`
${_.stack}`)}else w=(y=u?.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(k=u?.name)!==null&&k!==void 0?k:"FetchError"}: ${u?.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}};return $g.default=n,$g}var EM;function gB(){if(EM)return Ig;EM=1,Object.defineProperty(Ig,"__esModule",{value:!0});const t=Ef.__importDefault(pB());let n=class extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const p=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),b=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${b}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Ig.default=n,Ig}var jM;function sj(){if(jM)return Lg;jM=1,Object.defineProperty(Lg,"__esModule",{value:!0});const t=Ef.__importDefault(gB()),n=new RegExp("[,()]");let r=class extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}};return Lg.default=r,Lg}var TM;function bB(){if(TM)return Rg;TM=1,Object.defineProperty(Rg,"__esModule",{value:!0});const t=Ef.__importDefault(sj());let n=class{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},u=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((b,y)=>b.concat(Object.keys(y)),[]);if(p.length>0){const b=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return Rg.default=n,Rg}var AM;function AW(){if(AM)return Pg;AM=1,Object.defineProperty(Pg,"__esModule",{value:!0});const e=Ef,t=e.__importDefault(bB()),n=e.__importDefault(sj());let r=class yB{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new yB(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:d}={}){var h;let p;const b=new URL(`${this.url}/rpc/${a}`);let y;l||u?(p=l?"HEAD":"GET",Object.entries(o).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{b.searchParams.append(w,_)})):(p="POST",y=o);const k=new Headers(this.headers);return d&&k.set("Prefer",`count=${d}`),new n.default({method:p,url:b,headers:k,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return Pg.default=r,Pg}var NM;function vB(){if(NM)return Br;NM=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.PostgrestError=Br.PostgrestBuilder=Br.PostgrestTransformBuilder=Br.PostgrestFilterBuilder=Br.PostgrestQueryBuilder=Br.PostgrestClient=void 0;const e=Ef,t=e.__importDefault(AW());Br.PostgrestClient=t.default;const n=e.__importDefault(bB());Br.PostgrestQueryBuilder=n.default;const r=e.__importDefault(sj());Br.PostgrestFilterBuilder=r.default;const i=e.__importDefault(gB());Br.PostgrestTransformBuilder=i.default;const a=e.__importDefault(pB());Br.PostgrestBuilder=a.default;const o=e.__importDefault(mB());return Br.PostgrestError=o.default,Br.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Br}class xB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const NW="2.86.2",OW=`realtime-js/${NW}`,wB="1.0.0",CW="2.0.0",OM=wB,Kk=1e4,MW=1e3,DW=100;var cu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(cu||(cu={}));var Wn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wn||(Wn={}));var qa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qa||(qa={}));var Wk;(function(e){e.websocket="websocket"})(Wk||(Wk={}));var uu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uu||(uu={}));class PW{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,a;const o=t.topic,l=(i=t.ref)!==null&&i!==void 0?i:"",u=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+p.length,y=new ArrayBuffer(this.HEADER_LENGTH+b);let k=new DataView(y),w=0;k.setUint8(w++,this.KINDS.userBroadcastPush),k.setUint8(w++,u.length),k.setUint8(w++,l.length),k.setUint8(w++,o.length),k.setUint8(w++,d.length),k.setUint8(w++,p.length),k.setUint8(w++,n),Array.from(u,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(l,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(o,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(d,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(p,T=>k.setUint8(w++,T.charCodeAt(0)));var _=new Uint8Array(y.byteLength+r.byteLength);return _.set(new Uint8Array(y),0),_.set(new Uint8Array(r),y.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,o,l,u]=r;return n({join_ref:i,ref:a,topic:o,event:l,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(t.slice(u,u+i));u=u+i;const h=r.decode(t.slice(u,u+a));u=u+a;const p=r.decode(t.slice(u,u+o));u=u+o;const b=t.slice(u,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,k={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(k.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class _B{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nn||(nn={}));const CM=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=RW(o,e,t,i),a),{}):{}},RW=(e,t,n,r)=>{const i=t.find(l=>l.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?SB(a,o):Vk(o)},SB=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return BW(t,n)}switch(e){case nn.bool:return LW(t);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return IW(t);case nn.json:case nn.jsonb:return $W(t);case nn.timestamp:return zW(t);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return Vk(t);default:return Vk(t)}},Vk=e=>e,LW=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},IW=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$W=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BW=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>SB(t,l))}return e},zW=e=>typeof e=="string"?e.replace(" ","T"):e,kB=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class n1{constructor(t,n,r={},i=Kk){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Zk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Zk||(Zk={}));let EB=class Hb{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hb.syncState(this.state,i,a,o),this.pendingDiffs.forEach(u=>{this.state=Hb.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hb.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),l={},u={};return this.map(a,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const p=a[d];if(p){const b=h.map(_=>_.presence_ref),y=p.map(_=>_.presence_ref),k=h.filter(_=>y.indexOf(_.presence_ref)<0),w=p.filter(_=>b.indexOf(_.presence_ref)<0);k.length>0&&(l[d]=k),w.length>0&&(u[d]=w)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,u)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),h.length>0){const p=t[l].map(y=>y.presence_ref),b=h.filter(y=>p.indexOf(y.presence_ref)<0);t[l].unshift(...b)}r(l,h,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),t[l]=d,i(l,d,u),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Xk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xk||(Xk={}));var Zd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zd||(Zd={}));var Co;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Co||(Co={}));const UW=Wn;let jB=class TB{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new n1(this,qa.join,this.params,this.timeout),this.rejoinTimer=new _B(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qa.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new EB(this),this.broadcastEndpointURL=kB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Wn.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Zd.PRESENCE]&&this.bindings[Zd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},b={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t?.(Co.CHANNEL_ERROR,y)),this._onClose(()=>t?.(Co.CLOSED)),this.updateJoinPayload(Object.assign({config:b},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket.setAuth(),y===void 0){t?.(Co.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(k=w?.length)!==null&&k!==void 0?k:0,T=[];for(let O=0;O<_;O++){const j=w[O],{filter:{event:C,schema:M,table:P,filter:I}}=j,U=y&&y[O];if(U&&U.event===C&&U.schema===M&&U.table===P&&U.filter===I)T.push(Object.assign(Object.assign({},j),{id:U.id}));else{this.unsubscribe(),this.state=Wn.errored,t?.(Co.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(Co.SUBSCRIBED);return}}).receive("error",y=>{this.state=Wn.errored,t?.(Co.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t?.(Co.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Wn.joined&&t===Zd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qa.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new n1(this,qa.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new n1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>DW){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=qa;if(r&&[l,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let b=this._onMessage(o,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var k,w,_;return((k=y.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(w=y.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(y=>y.callback(b,r)):(a=this.bindings[o])===null||a===void 0||a.filter(y=>{var k,w,_,T,O,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const C=y.id,M=(k=y.filter)===null||k===void 0?void 0:k.event;return C&&((w=n.ids)===null||w===void 0?void 0:w.includes(C))&&(M==="*"||M?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(O=(T=y?.filter)===null||T===void 0?void 0:T.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return C==="*"||C===((j=n?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:w,table:_,commit_timestamp:T,type:O,errors:j}=k;b=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:T,eventType:O,new:{},old:{},errors:j}),this._getPayloadRecords(k))}y.callback(b,r)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&TB.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qa.close,{},t)}_onError(t){this._on(qa.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=CM(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=CM(t.columns,t.old_record)),n}};const r1=()=>{},zg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FW=[1e3,2e3,5e3,1e4],HW=1e4,GW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let YW=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kk,this.transport=null,this.heartbeatIntervalMs=zg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=r1,this.ref=0,this.reconnectTimer=null,this.vsn=OM,this.logger=r1,this.conn=null,this.sendBuffer=[],this.serializer=new PW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Wk.websocket}`,this.httpEndpoint=kB(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cu.connecting:return uu.Connecting;case cu.open:return uu.Open;case cu.closing:return uu.Closing;default:return uu.Closed}}isConnected(){return this.connectionState()===uu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new jB(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(MW,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,l=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===cu.open||this.conn.readyState===cu.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qa.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([GW],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:OW};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(qa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new _B(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,l,u,d,h,p,b,y;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Kk,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:zg.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:r1,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:OM,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(k=>FW[k-1]||HW),this.vsn){case wB:this.encode=(h=t?.encode)!==null&&h!==void 0?h:((k,w)=>w(JSON.stringify(k))),this.decode=(p=t?.decode)!==null&&p!==void 0?p:((k,w)=>w(JSON.parse(k)));break;case CW:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(y=t?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const qW=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:UW,get REALTIME_LISTEN_TYPES(){return Zd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Xk},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Zk},get REALTIME_SUBSCRIBE_STATES(){return Co},RealtimeChannel:jB,RealtimeClient:YW,RealtimePresence:EB,WebSocketFactory:xB},Symbol.toStringTag,{value:"Module"})),AB=wp(qW);class Ep extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function hn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class NB extends Ep{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fy extends Ep{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const lj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),KW=()=>Response,Jk=e=>{if(Array.isArray(e))return e.map(n=>Jk(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Jk(r)}),t},WW=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},VW=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),i1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},ZW=(e,t,n)=>Ge(void 0,void 0,void 0,function*(){const r=yield KW();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new NB(i1(i),a,o))}).catch(i=>{t(new fy(i1(i),i))}):t(new fy(i1(e),e))}),XW=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(WW(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function jp(e,t,n,r,i,a){return Ge(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,XW(t,r,i,a)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>ZW(u,l,r))})})}function Um(e,t,n,r){return Ge(this,void 0,void 0,function*(){return jp(e,"GET",t,n,r)})}function Ya(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"POST",t,r,i,n)})}function Qk(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"PUT",t,r,i,n)})}function JW(e,t,n,r){return Ge(this,void 0,void 0,function*(){return jp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cj(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"DELETE",t,r,i,n)})}class QW{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ge(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}var OB;class eV{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[OB]="BlobDownloadBuilder",this.promise=null}asStream(){return new QW(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ge(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}OB=Symbol.toStringTag;const tV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},MM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nV{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=lj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Ge(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},MM),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),u&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield(t=="PUT"?Qk:Ya)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ge(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:MM.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield Qk(this.fetch,l.toString(),u,{headers:h});return{data:{path:a,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(hn(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Ya(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Ep("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Ya(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ge(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ya(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ge(this,void 0,void 0,function*(){try{const i=yield Ya(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),u=()=>Um(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new eV(u,this.shouldThrowOnError)}info(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Um(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jk(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}exists(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield JW(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r)&&r instanceof fy){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ge(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},tV),n),{prefix:t||""});return{data:yield Ya(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Ge(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ya(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const CB="2.86.2",MB={"X-Client-Info":`storage-js/${CB}`};class rV{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MB),n),this.fetch=lj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ge(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Um(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}getBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Um(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}createBucket(t){return Ge(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ya(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:yield Qk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Fm=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function iV(e,t,n){const r=new URL(t,e);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function aV(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function oV(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:o}){const l=iV(e.baseUrl,r,i),u=await aV(e.auth),d=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...u,...o},body:a?JSON.stringify(a):void 0}),h=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),b=p&&h?JSON.parse(h):h;if(!d.ok){const y=p?b:void 0,k=y?.error;throw new Fm(k?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:k?.type,icebergCode:k?.code,details:y})}return{status:d.status,headers:d.headers,data:b}}}}function Ug(e){return e.join("")}var sV=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ug(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`}),!0}catch(t){if(t instanceof Fm&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Fm&&n.status===409)return;throw n}}};function Sd(e){return e.join("")}var lV=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Fm&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Fm&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},cV=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=oV({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new sV(this.client,t),this.tableOps=new lV(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class DB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MB),n),this.fetch=lj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ge(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Um(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}from(t){if(!VW(t))throw new Ep("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new cV({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ge(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const uj={"X-Client-Info":`storage-js/${CB}`,"Content-Type":"application/json"};class dj extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function yi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Gb extends dj{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class PB extends dj{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var e2;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(e2||(e2={}));const Yv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uV=()=>Response,RB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dV=e=>Array.from(new Float32Array(e)),fV=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},DM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hV=(e,t,n)=>Ge(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new Gb(DM(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Gb(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Gb(l,i,o))}}else t(new PB(DM(e),e))}),mV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(RB(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function pV(e,t,n,r,i,a){return Ge(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,mV(t,r,i,a)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>hV(u,l,r))})})}function zi(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return pV(e,"POST",t,r,i,n)})}class LB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}}class IB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}getVectors(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}listVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield zi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}}class $B{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}getBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}listBuckets(){return Ge(this,arguments,void 0,function*(t={}){try{return{data:yield zi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield zi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yi(n))return{data:null,error:n};throw n}})}}class BB extends $B{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new zB(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ge(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ge(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ge(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ge(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class zB extends LB{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ge(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ge(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ge(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ge(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new UB(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class UB extends IB{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ge(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ge(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ge(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ge(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ge(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class gV extends rV{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new nV(this.url,this.headers,t,this.fetch)}get vectors(){return new BB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new DB(this.url+"/iceberg",this.headers,this.fetch)}}const bV=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:DB,StorageApiError:NB,StorageClient:gV,StorageError:Ep,StorageUnknownError:fy,StorageVectorsApiError:Gb,StorageVectorsClient:BB,StorageVectorsError:dj,get StorageVectorsErrorCode(){return e2},StorageVectorsUnknownError:PB,VectorBucketApi:$B,VectorBucketScope:zB,VectorDataApi:IB,VectorIndexApi:LB,VectorIndexScope:UB,isPlainObject:RB,isStorageError:hn,isStorageVectorsError:yi,normalizeToFloat32:dV,resolveFetch:Yv,resolveResponse:uV,validateVectorDimension:fV},Symbol.toStringTag,{value:"Module"})),yV=wp(bV);var a1={},Vh={},PM;function vV(){return PM||(PM=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.version=void 0,Vh.version="2.86.2"),Vh}var RM;function xV(){return RM||(RM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=vV();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(a1)),a1}var o1={},LM;function wV(){return LM||(LM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,a,o)=>{const l=(0,e.resolveFetch)(o),u=(0,e.resolveHeadersConstructor)();return async(d,h)=>{var p;const b=(p=await a())!==null&&p!==void 0?p:i;let y=new u(h?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),l(d,Object.assign(Object.assign({},h),{headers:y}))}};e.fetchWithAuth=r})(o1)),o1}var vs={},IM;function _V(){if(IM)return vs;IM=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.isBrowser=void 0,vs.uuid=e,vs.ensureTrailingSlash=t,vs.applySettingDefaults=r,vs.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var o=Math.random()*16|0,l=a=="x"?o:o&3|8;return l.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";vs.isBrowser=n;function r(a,o){var l,u;const{db:d,auth:h,realtime:p,global:b}=a,{db:y,auth:k,realtime:w,global:_}=o,T={db:Object.assign(Object.assign({},y),d),auth:Object.assign(Object.assign({},k),h),realtime:Object.assign(Object.assign({},w),p),storage:{},global:Object.assign(Object.assign(Object.assign({},_),b),{headers:Object.assign(Object.assign({},(l=_?.headers)!==null&&l!==void 0?l:{}),(u=b?.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return a.accessToken?T.accessToken=a.accessToken:delete T.accessToken,T}function i(a){const o=a?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return vs}var Zh={};const FB="2.86.2",$d=30*1e3,t2=3,s1=t2*$d,SV="http://localhost:9999",kV="supabase.auth.token",EV={"X-Client-Info":`gotrue-js/${FB}`},n2="X-Supabase-Api-Version",HB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TV=600*1e3;let of=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let GB=class extends of{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function YB(e){return Ve(e)&&e.name==="AuthApiError"}let $l=class extends of{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Us=class extends of{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},pi=class extends Us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function qB(e){return Ve(e)&&e.name==="AuthSessionMissingError"}let tu=class extends Us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},_m=class extends Us{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Sm=class extends Us{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function KB(e){return Ve(e)&&e.name==="AuthImplicitGrantRedirectError"}let r2=class extends Us{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},hy=class extends Us{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Yb(e){return Ve(e)&&e.name==="AuthRetryableFetchError"}let i2=class extends Us{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function AV(e){return Ve(e)&&e.name==="AuthWeakPasswordError"}let my=class extends Us{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$M=` 	
\r=`.split(""),NV=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$M.length;t+=1)e[$M[t].charCodeAt(0)]=-2;for(let t=0;t<py.length;t+=1)e[py[t].charCodeAt(0)]=t;return e})();function BM(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}}function WB(e,t,n){const r=NV[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zM(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{MV(o,r,n)};for(let o=0;o<e.length;o+=1)WB(e.charCodeAt(o),i,a);return t.join("")}function OV(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CV(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}OV(r,t)}}function MV(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Xd(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)WB(e.charCodeAt(i),n,r);return new Uint8Array(t)}function DV(e){const t=[];return CV(e,n=>t.push(n)),new Uint8Array(t)}function hu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>BM(i,n,r)),BM(null,n,r),t.join("")}function PV(e){return Math.round(Date.now()/1e3)+e}function RV(){return Symbol("auth-callback")}const Nr=()=>typeof window<"u"&&typeof document<"u",Yc={tested:!1,writable:!1},VB=()=>{if(!Nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yc.tested)return Yc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yc.tested=!0,Yc.writable=!0}catch{Yc.tested=!0,Yc.writable=!1}return Yc.writable};function LV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const ZB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),IV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bd=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},qc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tr=async(e,t)=>{await e.removeItem(t)};class qv{constructor(){this.promise=new qv.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}qv.promiseConstructor=Promise;function l1(e){const t=e.split(".");if(t.length!==3)throw new my("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!jV.test(t[r]))throw new my("JWT not in base64url format");return{header:JSON.parse(zM(t[0])),payload:JSON.parse(zM(t[1])),signature:Xd(t[2]),raw:{header:t[0],payload:t[1]}}}async function $V(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function BV(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function zV(e){return("0"+e.toString(16)).substr(-2)}function UV(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,zV).join("")}async function FV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function HV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await FV(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kd(e,t,n=!1){const r=UV();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Bd(e,`${t}-code-verifier`,i);const a=await HV(r);return[a,r===a?"plain":"s256"]}const GV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YV(e){const t=e.headers.get(n2);if(!t||!t.match(GV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qV(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function KV(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ed(e){if(!WV.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function c1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VV(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function UM(e){return JSON.parse(JSON.stringify(e))}const nu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZV=[502,503,504];async function FM(e){var t;if(!IV(e))throw new hy(nu(e),0);if(ZV.includes(e.status))throw new hy(nu(e),e.status);let n;try{n=await e.json()}catch(a){throw new $l(nu(a),a)}let r;const i=YV(e);if(i&&i.getTime()>=HB["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new i2(nu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new pi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new i2(nu(n),e.status,n.weak_password.reasons);throw new GB(nu(n),e.status||500,r)}const XV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function st(e,t,n,r){var i;const a=Object.assign({},r?.headers);a[n2]||(a[n2]=HB["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await JV(e,t,n+l,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function JV(e,t,n,r,i,a){const o=XV(t,r,i,a);let l;try{l=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new hy(nu(u),0)}if(l.ok||await FM(l),r?.noResolveJson)return l;try{return await l.json()}catch(u){await FM(u)}}function Ga(e){var t;let n=null;tZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=PV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function HM(e){const t=Ga(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QV(e){return{data:e,error:null}}function eZ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=kf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function GM(e){return e}function tZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const qb=["global","local","others"];let fj=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=ZB(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=qb[0]){if(qb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qb.join(", ")}`);try{return await st(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await st(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Bl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=kf(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await st(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:eZ,redirectTo:n?.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await st(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bl})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:GM});if(h.error)throw h.error;const p=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ve(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ed(t);try{return await st(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bl})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ed(t);try{return await st(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Bl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ed(t);try{return await st(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Bl})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ed(t.userId);try{const{data:n,error:r}=await st(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ed(t.userId),Ed(t.id);try{return{data:await st(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:GM});if(h.error)throw h.error;const p=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ve(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await st(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await st(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await st(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}};function YM(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ru={debug:!!(globalThis&&VB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let XB=class extends hj{};class nZ extends hj{}async function JB(e,t,n){ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ru.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new XB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ru.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const qM={};async function rZ(e,t,n){var r;const i=(r=qM[e])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new nZ(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return qM[e]=a.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await a}function iZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function QB(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function aZ(e){return parseInt(e,16)}function oZ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function sZ(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:h,uri:p,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=QB(e.address),k=h?`${h}://${r}`:r,w=e.statement?`${e.statement}
`:"",_=`${k} wants you to sign in with your Ethereum account:
${y}

${w}`;let T=`URI: ${p}
Version: ${b}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),l&&(T+=`
Not Before: ${l.toISOString()}`),u&&(T+=`
Request ID: ${u}`),d){let O=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);O+=`
- ${j}`}T+=O}return`${_}
${T}`}class Vn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class gy extends Vn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function lZ({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Vn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Vn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Vn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Vn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Vn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Vn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Vn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Vn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(e4(o)){if(a.rp.id!==o)return new Vn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Vn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Vn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function cZ({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Vn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Vn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(e4(r)){if(n.rpId!==r)return new Vn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Vn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class uZ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const dZ=new uZ;function fZ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=kf(e,["challenge","user","excludeCredentials"]),a=Xd(t).buffer,o=Object.assign(Object.assign({},n),{id:Xd(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Xd(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function hZ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=kf(e,["challenge","allowCredentials"]),i=Xd(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Xd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function mZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:hu(new Uint8Array(e.response.attestationObject)),clientDataJSON:hu(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function pZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hu(new Uint8Array(i.authenticatorData)),clientDataJSON:hu(new Uint8Array(i.clientDataJSON)),signature:hu(new Uint8Array(i.signature)),userHandle:i.userHandle?hu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function e4(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function KM(){var e,t;return!!(Nr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function gZ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gy("Browser returned unexpected credential type",t)}:{data:null,error:new gy("Empty credential response",t)}}catch(t){return{data:null,error:lZ({error:t,options:e})}}}async function bZ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gy("Browser returned unexpected credential type",t)}:{data:null,error:new gy("Empty credential response",t)}}catch(t){return{data:null,error:cZ({error:t,options:e})}}}const yZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function by(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const l=r[a];t(l)?r[a]=by(l,o):r[a]=by(o)}else r[a]=o}return r}function xZ(e,t){return by(yZ,e,t||{})}function wZ(e,t){return by(vZ,e,t||{})}class _Z{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const u=i??dZ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=xZ(o.webauthn.credential_options.publicKey,a?.create),{data:h,error:p}=await gZ({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=wZ(o.webauthn.credential_options.publicKey,a?.request),{data:h,error:p}=await bZ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new $l("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new of("rpId is required for WebAuthn authentication")};try{if(!KM())return{data:null,error:new $l("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new $l("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new of("rpId is required for WebAuthn registration")};try{if(!KM())return{data:null,error:new $l("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Ve(o)?{data:null,error:o}:{data:null,error:new $l("Unexpected error in register",o)}}}}iZ();const SZ={url:SV,storageKey:kV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function WM(e,t,n){return await n()}const jd={};let mj=class a2{get jwks(){var t,n;return(n=(t=jd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=jd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},SZ),t);if(this.storageKey=a.storageKey,this.instanceID=(n=a2.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,a2.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Nr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new fj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ZB(a.fetch),this.lock=a.lock||WM,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Nr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=JB:this.lock=WM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _Z(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:VB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=YM(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=YM(this.memoryStorage)),Nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${FB}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Nr()&&(n=LV(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Nr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),KB(a)){const u=(t=a.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?this._returnResult({error:n}):this._returnResult({error:new $l("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ga}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:h,password:p,options:b}=t;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await kd(this.storage,this.storageKey)),a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:h,password:p,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:k},xform:Ga})}else if("phone"in t){const{phone:h,password:p,options:b}=t;a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ga})}else throw new _m("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await Tr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:HM})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:HM})}else throw new _m("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new tu;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,l,u,d,h,p,b;let y,k;if("message"in t)y=t.message,k=t.signature;else{const{chain:w,wallet:_,statement:T,options:O}=t;let j;if(Nr())if(typeof _=="object")j=_;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")j=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=_}const C=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=QB(M[0]);let I=(r=O?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const V=await j.request({method:"eth_chainId"});I=aZ(V)}const U={domain:C.host,address:P,statement:T,uri:C.href,version:"1",chainId:I,nonce:(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=O?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=sZ(U),k=await j.request({method:"personal_sign",params:[oZ(y),P]})}try{const{data:w,error:_}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:k},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ga});if(_)throw _;if(!w||!w.session||!w.user){const T=new tu;return this._returnResult({data:{user:null,session:null},error:T})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(Ve(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,a,o,l,u,d,h,p,b,y;let k,w;if("message"in t)k=t.message,w=t.signature;else{const{chain:_,wallet:T,statement:O,options:j}=t;let C;if(Nr())if(typeof T=="object")C=T;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const M=new URL((n=j?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),O?{statement:O}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),w=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=j?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=j?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(k),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=P}}try{const{data:_,error:T}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:hu(w)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ga});if(T)throw T;if(!_||!_.session||!_.user){const O=new tu;return this._returnResult({data:{user:null,session:null},error:O})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(Ve(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await qc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await st(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ga});if(await Tr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new tu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,l=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Ga}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new tu;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await kd(this.storage,this.storageKey));const{error:p}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:h}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new _m("You must provide either an email or phone number.")}catch(l){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await st(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ga});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await kd(this.storage,this.storageKey));const d=await st(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:QV});return!((a=d.data)===null||a===void 0)&&a.url&&Nr()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new pi;const{error:i}=await st(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await st(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:l}=await st(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new _m("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await qc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<s1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await qc(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=c1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=VV(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bl}):await this._useSession(async n=>{var r,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pi}:await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Bl})})}catch(n){if(Ve(n))return qB(n)&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new pi;const o=i.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await kd(this.storage,this.storageKey));const{data:d,error:h}=await st(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Bl});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new pi;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=l1(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new pi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Nr())throw new Sm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new r2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new r2("No code detected.");const{data:O,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!a||!l||!o||!d)throw new Sm("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let b=h+p;u&&(b=parseInt(u));const y=b-h;y*1e3<=$d&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const k=b-p;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,h);const{data:w,error:_}=await this._getUser(a);if(_)throw _;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:p,expires_at:b,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await qc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(YB(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=RV(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await kd(this.storage,this.storageKey,!0));try{return await st(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,l,u,d,h;const{data:p,error:b}=a;if(b)throw b;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await st(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Nr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:l,token:u,access_token:d,nonce:h}=t,p=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Ga}),{data:b,error:y}=p;return y?this._returnResult({data:{user:null,session:null},error:y}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new tu}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:y}))}catch(i){if(await Tr(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await st(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await BV(async i=>(i>0&&await $V(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await st(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ga})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Yb(a)&&Date.now()+o-r<$d})}catch(r){if(this._debug(n,"error",r),Ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Nr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await qc(this.storage,this.storageKey);if(i&&this.userStorage){let o=await qc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Bd(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:c1()}else if(i&&!i.user&&!i.user){const o=await qc(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Tr(this.storage,this.storageKey+"-user"),await Bd(this.storage,this.storageKey,i)):i.user=c1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<s1;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${s1}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Yb(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new pi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qv;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new pi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Ve(a)){const o={data:null,error:a};return Yb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Tr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Bd(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=UM(i);await Bd(this.storage,this.storageKey,a)}else{const i=UM(n);await Bd(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tr(this.storage,this.storageKey),await Tr(this.storage,this.storageKey+"-code-verifier"),await Tr(this.storage,this.storageKey+"-user"),this.userStorage&&await Tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Nr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),$d);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/$d);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${$d}ms, refresh threshold is ${t2} ticks`),i<=t2&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await kd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await st(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await st(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?mZ(t.webauthn.credential_response):pZ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:fZ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:hZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=l1(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await st(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new pi})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new pi});const o=await st(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Nr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new pi});const o=await st(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Nr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await st(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new pi})})}catch(t){if(Ve(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await st(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pi})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+TV>i)return r;const{data:a,error:o}=await st(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:k}=await this.getSession();if(k||!y.session)return this._returnResult({data:null,error:k});r=y.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:u}}=l1(r);n?.allowExpired||qV(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:a,header:i,signature:o},error:null}}const h=KV(i.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,DV(`${l}.${u}`)))throw new my("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Ve(r))return this._returnResult({data:null,error:r});throw r}}};mj.nextInstanceID={};const kZ=fj,EZ=mj,jZ=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:kZ,AuthApiError:GB,AuthClient:EZ,AuthError:of,AuthImplicitGrantRedirectError:Sm,AuthInvalidCredentialsError:_m,AuthInvalidJwtError:my,AuthInvalidTokenResponseError:tu,AuthPKCEGrantCodeExchangeError:r2,AuthRetryableFetchError:hy,AuthSessionMissingError:pi,AuthUnknownError:$l,AuthWeakPasswordError:i2,CustomAuthError:Us,GoTrueAdminApi:fj,GoTrueClient:mj,NavigatorLockAcquireTimeoutError:XB,SIGN_OUT_SCOPES:qb,isAuthApiError:YB,isAuthError:Ve,isAuthImplicitGrantRedirectError:KB,isAuthRetryableFetchError:Yb,isAuthSessionMissingError:qB,isAuthWeakPasswordError:AV,lockInternals:ru,navigatorLock:JB,processLock:rZ},Symbol.toStringTag,{value:"Module"})),t4=wp(jZ);var VM;function TZ(){if(VM)return Zh;VM=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.SupabaseAuthClient=void 0;const e=t4;let t=class extends e.AuthClient{constructor(r){super(r)}};return Zh.SupabaseAuthClient=t,Zh}var ZM;function XM(){if(ZM)return Dg;ZM=1,Object.defineProperty(Dg,"__esModule",{value:!0});const e=hB,t=vB(),n=AB,r=yV,i=xV(),a=wV(),o=_V(),l=TZ();class u{constructor(h,p,b){var y,k,w;this.supabaseUrl=h,this.supabaseKey=p;const _=(0,o.validateSupabaseUrl)(h);if(!p)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const T=`sb-${_.hostname.split(".")[0]}-auth-token`,O={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:T}),global:i.DEFAULT_GLOBAL_OPTIONS},j=(0,o.applySettingDefaults)(b??{},O);this.storageKey=(y=j.auth.storageKey)!==null&&y!==void 0?y:"",this.headers=(k=j.global.headers)!==null&&k!==void 0?k:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(C,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((w=j.auth)!==null&&w!==void 0?w:{},this.headers,j.global.fetch),this.fetch=(0,a.fetchWithAuth)(p,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new t.PostgrestClient(new URL("rest/v1",_).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,b?.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,p={},b={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,p,b)}channel(h,p={config:{}}){return this.realtime.channel(h,p)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,p;if(this.accessToken)return await this.accessToken();const{data:b}=await this.auth.getSession();return(p=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:p,detectSessionInUrl:b,storage:y,userStorage:k,storageKey:w,flowType:_,lock:T,debug:O,throwOnError:j},C,M){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),C),storageKey:w,autoRefreshToken:h,persistSession:p,detectSessionInUrl:b,storage:y,userStorage:k,flowType:_,lock:T,debug:O,throwOnError:j,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((p,b)=>{this._handleTokenChanged(p,"CLIENT",b?.access_token)})}_handleTokenChanged(h,p,b){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==b?(this.changedAccessToken=b,this.realtime.setAuth(b)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),p=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Dg.default=u,Dg}var JM;function AZ(){return JM||(JM=1,(function(e){var t=ys&&ys.__createBinding||(Object.create?(function(h,p,b,y){y===void 0&&(y=b);var k=Object.getOwnPropertyDescriptor(p,b);(!k||("get"in k?!p.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(h,y,k)}):(function(h,p,b,y){y===void 0&&(y=b),h[y]=p[b]})),n=ys&&ys.__exportStar||function(h,p){for(var b in h)b!=="default"&&!Object.prototype.hasOwnProperty.call(p,b)&&t(p,h,b)},r=ys&&ys.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(XM());n(t4,e);var a=vB();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var o=hB;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(AB,e);var l=XM();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(l).default}});const u=(h,p,b)=>new i.default(h,p,b);e.createClient=u;function d(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const p=h.match(/^v(\d+)\./);return p?parseInt(p[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ys)),ys}var n4=AZ();const r4=Si(n4),NZ=VE({__proto__:null,default:r4},[n4]),{PostgrestError:kCe,FunctionsHttpError:ECe,FunctionsFetchError:jCe,FunctionsRelayError:TCe,FunctionsError:ACe,FunctionRegion:NCe,SupabaseClient:OCe,createClient:OZ,GoTrueAdminApi:CCe,GoTrueClient:MCe,AuthAdminApi:DCe,AuthClient:PCe,navigatorLock:RCe,NavigatorLockAcquireTimeoutError:LCe,lockInternals:ICe,processLock:$Ce,SIGN_OUT_SCOPES:BCe,AuthError:zCe,AuthApiError:UCe,AuthUnknownError:FCe,CustomAuthError:HCe,AuthSessionMissingError:GCe,AuthInvalidTokenResponseError:YCe,AuthInvalidCredentialsError:qCe,AuthImplicitGrantRedirectError:KCe,AuthPKCEGrantCodeExchangeError:WCe,AuthRetryableFetchError:VCe,AuthWeakPasswordError:ZCe,AuthInvalidJwtError:XCe,isAuthError:JCe,isAuthApiError:QCe,isAuthSessionMissingError:eMe,isAuthImplicitGrantRedirectError:tMe,isAuthRetryableFetchError:nMe,isAuthWeakPasswordError:rMe,RealtimePresence:iMe,RealtimeChannel:aMe,RealtimeClient:oMe,REALTIME_LISTEN_TYPES:sMe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:lMe,REALTIME_PRESENCE_LISTEN_EVENTS:cMe,REALTIME_SUBSCRIBE_STATES:uMe,REALTIME_CHANNEL_STATES:dMe}=r4||NZ,CZ="https://jouhybyquybxbnqztxum.supabase.co",MZ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",DZ=!1,De=OZ(CZ,MZ,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:DZ,storage:localStorage}}),i4="settings_v1",o2=()=>{try{typeof window<"u"&&window.localStorage.removeItem(i4)}catch{}},zl={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",daewoonDisplayBase:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,showEtcShinsal:!0,showRelationBox:!0,showPromptBox:!0,theme:"dark",difficultyMode:!1,sidebarCardsCollapsed:!1,sidebarCardCollapsedMap:{},sidebarCollapseInitDone:!0,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},QM=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],PZ=e=>{const t=Array.isArray(e)?e.filter(r=>typeof r=="string"&&QM.includes(r)):[],n=QM.filter(r=>!t.includes(r));return[...t,...n]},Jd=e=>({...zl,...e,sectionOrder:PZ(e.sectionOrder)}),RZ=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return Jd(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return Jd(n.settings)}}return Jd(e??{})},LZ=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};o2();const tn=Ko()(z$((e,t)=>({settings:zl,syncing:!1,loaded:!1,setSettings:n=>e({settings:Jd(n)}),setKey:(n,r)=>e({settings:Jd({...t().settings,[n]:r})}),reset:()=>e({settings:zl,loaded:!0}),loadFromServer:async n=>{const r=t();if(!r.syncing&&!(!n?.force&&r.loaded))try{e({syncing:!0}),o2();const{data:i,error:a}=await De.auth.getUser(),o=i?.user??null;if(a||!o){e({settings:zl,syncing:!1,loaded:!0});return}const l=t();!n?.force&&l.loaded&&l.syncing;const{data:u,error:d}=await De.from("user_settings").select("payload").eq("user_id",o.id).maybeSingle();if(!u&&!d&&await De.from("user_settings").upsert({user_id:o.id,payload:{}}),d&&d.code!=="PGRST116"){console.error("loadFromServer(settings) error:",d),e({syncing:!1,loaded:!0});return}if(u?.payload){const h=RZ(u.payload),b=u.payload?.sidebarCollapseInitDone===!0;b||(h.sidebarCardsCollapsed=zl.sidebarCardsCollapsed,h.sidebarCardCollapsedMap={},h.sidebarCollapseInitDone=!0),e({settings:h,syncing:!1,loaded:!0}),(LZ(u.payload)||!b)&&await De.from("user_settings").upsert({user_id:o.id,payload:h,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(i){console.error("loadFromServer(settings) exception:",i),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),o2();const{data:r,error:i}=await De.auth.getUser(),a=r?.user??null;if(i||!a){e({syncing:!1,loaded:!0,settings:zl});return}const o=Jd(t().settings),{error:l}=await De.from("user_settings").upsert({user_id:a.id,payload:o,updated_at:new Date().toISOString()});l&&console.error("saveToServer(settings) error:",l),e({syncing:!1,loaded:!0})}catch(r){console.error("saveToServer(settings) exception:",r),e({syncing:!1,loaded:!0})}}}),{name:i4,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function s2(e){const t=Jr.indexOf(e);if(t!==-1)return Jr[t];const n=co..indexOf(e);return n!==-1?Jr[n]:null}function a4(e){const t=xi.indexOf(e);if(t!==-1)return xi[t];const n=co..indexOf(e);return n!==-1?xi[n]:null}function eD(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function Wi(e,t,n){if(t==="stem"){const r=s2(e);if(!r)return console.warn("Invalid stem:",e),"bg-neutral-700";const i=Jr.indexOf(r),a=i>=0?JK[i]:void 0;return eD(a,n)}else{const r=a4(e);if(!r)return console.warn("Invalid branch:",e),"bg-neutral-700";const i=xi.indexOf(r),a=i>=0?QK[i]:void 0;return eD(a,n)}}function Sa(e,t){const n=s2(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const r=s2(t.stem);if(!r)throw new Error(`getSipSin: invalid stem ${t.stem}`);return nW[n][r]}if(t.branch){const r=a4(t.branch);if(!r)throw new Error(`getSipSin: invalid branch ${t.branch}`);return rW[n][r]}throw new Error("getSipSin: stem or branch required")}const Kv={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Wv={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function o4({branch:e,dayStem:t,mode:n="all",mapping:r="classic",variant:i="auto",isUnknownTime:a=!1}){const o=(r==="hgc"?Wv:Kv)[e]??[],l=n==="main"?[o[2]]:o,u=i==="white",d=u?"text-white":"text-neutral-800 dark:text-white",h=u?"border-white":"border-neutral-800 dark: border-neutral-200",p=u?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:l.map((b,y)=>b==="(-)"||a?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap`,children:"(-) ()"},y):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap 
            ${n==="main"||y===2?`jeonggi bg-neutral-500/50 ${p} font-bold`:""}`,children:[b," (",Sa(t,{stem:b}),")"]},y))})}const Fi=Ko(e=>({manualHour:null,usePrevDay:!1,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null}),setUsePrevDay:t=>e({usePrevDay:t}),togglePrevDay:()=>e(t=>({usePrevDay:!t.usePrevDay}))})),s4=Object.fromEntries(Object.entries(Xn).map(([e,t])=>[t,e])),l4=Object.fromEntries(Object.entries(ir).map(([e,t])=>[t,e])),IZ=new Set(Object.keys(Xn)),$Z=new Set(Object.keys(ir)),BZ=new Set(["","","","","","","","","",""]),zZ=new Set(["","","","","","","","","","","",""]);function wi(e,t,n){return n===""?t==="stem"?Xn[e]??e:ir[e]??e:t==="stem"?s4[e]??e:l4[e]??e}function tD(e){const t=s4[e]??e;return IZ.has(t)?t:""}function UZ(e){const t=l4[e]??e;return $Z.has(t)?t:""}function Vv(e){if(rf.has(e))return e;const t=Xn[e]??e;return rf.has(t)?t:""}function pj(e){if(Bm.has(e))return e;const t=ir[e]??e;return Bm.has(t)?t:""}function ro(e,t){return t==="stem"?BZ.has(e):zZ.has(e)}function Ud({label:e,gz:t,dayStem:n,settings:r,unseongText:i,shinsalText:a,hideBranchSipSin:o=!0,hideHiddenStems:l=!1,size:u="sm",variant:d="auto",isUnknownTime:h=!1}){const{manualHour:p}=Fi(),b=h&&!p,y=t.charAt(0),k=t.charAt(1),w=wi(y,"stem",r.charType),_=wi(k,"branch",r.charType),T=tD(y),O=UZ(k),j=tD(n),C=pj(k),M=Vv(n),P=r.showSipSin?Sa(j,{stem:T}):null,I=!o&&r.showSipSin?Sa(j,{branch:O}):null,U=r.thinEum&&ro(y,"stem")?"font-thin":"font-bold",V=r.thinEum&&ro(k,"branch")?"font-thin":"font-bold",q={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},H=!l&&!!r.hiddenStem,B=r.hiddenStem==="regular"?"main":"all",W=r.hiddenStemMode==="hgc"?"hgc":"classic",Z=d==="white",X=Z?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",G=Z?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",J=Z?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",Q=Z?"text-neutral-500":"text-neutral-400",oe=Z?"text-neutral-500":"text-neutral-400",{settings:le}=tn(),z=b?`bg-white ${J}`:`${Wi(T,"stem",le)} ${J}`,K=b?`bg-white ${J}`:`${Wi(O,"branch",le)} ${J}`,ne=b?"text-black":le.difficultyMode?le.theme==="light"?"text-neutral-900":"text-black":"text-white",re=b?"text-black":le.difficultyMode?le.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${X}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${G} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[P&&g.jsx("div",{className:`text-[10px] desk:text-xs ${Q} text-nowrap`,children:h&&!p?"-":P}),g.jsx("div",{className:`${q[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${z}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${ne} ${U}`,children:b?"-":w})}),g.jsx("div",{className:`${q[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${K}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${re} ${V}`,children:b?"-":_})}),H&&g.jsx(o4,{branch:C,dayStem:M,mode:B,mapping:W,isUnknownTime:h&&!p&&(e===""||e==="")}),I&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe}`,children:h&&!p?"-":I}),r.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe} text-nowrap`,children:h&&!p?"-":i||""}),r.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe} text-nowrap`,children:h&&!p?"-":a||""})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HZ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nD=e=>{const t=HZ(e);return t.charAt(0).toUpperCase()+t.slice(1)},c4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),GZ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...YZ,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:c4("lucide",i),...!a&&!GZ(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>S.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=(e,t)=>{const n=S.forwardRef(({className:r,...i},a)=>S.createElement(qZ,{ref:a,iconNode:t,className:c4(`lucide-${FZ(nD(e))}`,`lucide-${e}`,r),...i}));return n.displayName=nD(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],WZ=Pr("chevron-down",KZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZZ=Pr("chevron-up",VZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],u4=Pr("circle-question-mark",XZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],QZ=Pr("circle-x",JZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],tX=Pr("heart-handshake",eX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rX=Pr("house",nX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],aX=Pr("info",iX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],d4=Pr("log-in",oX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lX=Pr("log-out",sX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],uX=Pr("menu",cX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fX=Pr("plus",dX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mX=Pr("settings",hX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gX=Pr("sparkles",pX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],yX=Pr("square-user",bX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],f4=Pr("star",vX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wX=Pr("user-plus",xX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yy=Pr("x",_X);function SX(){const[e,t]=S.useState(!1);return g.jsx("div",{className:"z-[60] pointer-events-none mt-2",children:g.jsx("div",{className:"max-w-[700px] w-full mx-auto pb-2 pointer-events-auto",children:g.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white/90 backdrop-blur shadow-sm dark:border-neutral-800 dark:bg-neutral-950/80",children:[g.jsxs("button",{type:"button",onClick:()=>t(n=>!n),className:"w-full flex flex-col desk:flex-row items-center justify-between gap-2 px-3 py-2 cursor-pointer",children:[g.jsx("div",{className:"flex items-center gap-2 min-w-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(aX,{className:"w-4 h-4 text-neutral-600 dark:text-neutral-300 hidden desk:block"}),g.jsx("span",{className:"text-xs text-neutral-700 dark:text-neutral-200",children:"         ."})]})}),g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:e?"":""})]}),e&&g.jsx("div",{className:"px-3 pb-3",children:g.jsxs("div",{className:"text-[12px] leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{className:"mt-1 text-neutral-500 dark:text-neutral-400",children:"  /     ."}),g.jsx("p",{children:g.jsx("a",{href:"https://yavares.tistory.com/1013",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"     !"})})})]})})]})})})}const kX=new Set(co.);function EX(e){return rf.has(e)?e:kX.has(e)?Xn[e]:""}function jX(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function TX({label:e,settings:t,hideBranchSipSin:n=!0}){const r=t.showSipSin,i=!!t.hiddenStem,o=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,l=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[r&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),i&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:o}).map((u,d)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},d))}),l&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function AX(){const e=tn(_=>_.settings),[t,n]=S.useState(new Date),[r,i]=S.useState(!0),[a,o]=S.useState("/"),[l,u]=S.useState(!1),[d,h]=S.useState(null);S.useEffect(()=>{if(!r)return;const _=setInterval(()=>n(new Date),1e3);return()=>clearInterval(_)},[r]),S.useEffect(()=>{let _=!0;const T=async()=>{const{data:C}=await De.auth.getSession(),M=C.session?.user?.id;if(!M){_&&h(null);return}const{data:P,error:I}=await De.from("user_activity").select("total_active_ms").eq("user_id",M).maybeSingle();if(I){_&&h(null);return}const U=P?.total_active_ms;_&&h(typeof U=="number"?U:null)};T();const O=window.setInterval(()=>void T(),6e4),j=()=>{document.visibilityState==="visible"&&T()};return document.addEventListener("visibilitychange",j),()=>{_=!1,window.clearInterval(O),document.removeEventListener("visibilitychange",j)}},[]);const p=ct(t),b=At(t),y=pt(t,a),k=no(t,"/"),w=EX(y.charAt(0));return g.jsx("div",{className:"flex flex-col justify-center items-center pt-20 desk:pt-16 desk:mt-12 w-full h-auto desk:h-[calc(100dvh_-_212px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("div",{className:"mb-3 text-xs desk:text-sm text-neutral-600 dark:text-neutral-300",children:["  :"," ",g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:jX(d)})]}),g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",r?"":"",") ",CX(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>u(_=>!_),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                          ${l?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[l?g.jsx(TX,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(Ud,{label:"",gz:k,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Ud,{label:"",gz:y,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Ud,{label:"",gz:b,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Ud,{label:"",gz:p,dayStem:w,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"datetime-local",value:NX(t),disabled:r,onChange:_=>{const T=OX(_.target.value);T&&n(T)},className:`h-30 rounded px-3 py-1 text-sm transition-colors
                          bg-white dark:bg-neutral-900
                          border border-neutral-300 dark:border-neutral-700
                          text-neutral-900 dark:text-neutral-100
                          focus:outline-none focus:ring-2 focus:ring-amber-500/40
                          ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:r?" ":" "})]})]}),g.jsx(SX,{})]})})}function NX(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function OX(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[r,i,a]=t.split("-").map(Number),[o,l]=n.split(":").map(Number),u=new Date(r,i-1,a,o,l);return Number.isNaN(u.getTime())?null:u}function CX(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}function MX({placeholderText:e,value:t}){const[n,r]=S.useState(e),[i,a]=S.useState(!1),[o,l]=S.useState(t??""),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),p=S.useRef(null);return S.useEffect(()=>{t!==void 0&&l(t)},[t]),{btnText:n,setBtnText:r,open:i,setOpen:a,localValue:o,setLocalValue:l,nameRef:u,latRef:d,lonRef:h,triggerBtnRef:p}}var km={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var DX=km.exports,rD;function PX(){return rD||(rD=1,(function(e,t){(function(n,r){r(t)})(DX,(function(n){var r="1.9.4";function i(f){var v,E,D,R;for(E=1,D=arguments.length;E<D;E++){R=arguments[E];for(v in R)f[v]=R[v]}return f}var a=Object.create||(function(){function f(){}return function(v){return f.prototype=v,new f}})();function o(f,v){var E=Array.prototype.slice;if(f.bind)return f.bind.apply(f,E.call(arguments,1));var D=E.call(arguments,2);return function(){return f.apply(v,D.length?D.concat(E.call(arguments)):arguments)}}var l=0;function u(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function d(f,v,E){var D,R,F,ee;return ee=function(){D=!1,R&&(F.apply(E,R),R=!1)},F=function(){D?R=arguments:(f.apply(E,arguments),setTimeout(ee,v),D=!0)},F}function h(f,v,E){var D=v[1],R=v[0],F=D-R;return f===D&&E?f:((f-R)%F+F)%F+R}function p(){return!1}function b(f,v){if(v===!1)return f;var E=Math.pow(10,v===void 0?6:v);return Math.round(f*E)/E}function y(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function k(f){return y(f).split(/\s+/)}function w(f,v){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var E in v)f.options[E]=v[E];return f.options}function _(f,v,E){var D=[];for(var R in f)D.push(encodeURIComponent(E?R.toUpperCase():R)+"="+encodeURIComponent(f[R]));return(!v||v.indexOf("?")===-1?"?":"&")+D.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function O(f,v){return f.replace(T,function(E,D){var R=v[D];if(R===void 0)throw new Error("No value provided for variable "+E);return typeof R=="function"&&(R=R(v)),R})}var j=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function C(f,v){for(var E=0;E<f.length;E++)if(f[E]===v)return E;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var I=0;function U(f){var v=+new Date,E=Math.max(0,16-(v-I));return I=v+E,window.setTimeout(f,E)}var V=window.requestAnimationFrame||P("RequestAnimationFrame")||U,q=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function H(f,v,E){if(E&&V===U)f.call(v);else return V.call(window,o(f,v))}function B(f){f&&q.call(window,f)}var W={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:p,formatNum:b,trim:y,splitWords:k,setOptions:w,getParamString:_,template:O,isArray:j,indexOf:C,emptyImageUrl:M,requestFn:V,cancelFn:q,requestAnimFrame:H,cancelAnimFrame:B};function Z(){}Z.extend=function(f){var v=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,D=a(E);D.constructor=v,v.prototype=D;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(v[R]=this[R]);return f.statics&&i(v,f.statics),f.includes&&(X(f.includes),i.apply(null,[D].concat(f.includes))),i(D,f),delete D.statics,delete D.includes,D.options&&(D.options=E.options?a(E.options):{},i(D.options,f.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,ee=D._initHooks.length;F<ee;F++)D._initHooks[F].call(this)}},v},Z.include=function(f){var v=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=v,this.mergeOptions(f.options)),this},Z.mergeOptions=function(f){return i(this.prototype.options,f),this},Z.addInitHook=function(f){var v=Array.prototype.slice.call(arguments,1),E=typeof f=="function"?f:function(){this[f].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function X(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=j(f)?f:[f];for(var v=0;v<f.length;v++)f[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v);else{f=k(f);for(var R=0,F=f.length;R<F;R++)this._on(f[R],v,E)}return this},off:function(f,v,E){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var D in f)this._off(D,f[D],v);else{f=k(f);for(var R=arguments.length===1,F=0,ee=f.length;F<ee;F++)R?this._off(f[F]):this._off(f[F],v,E)}return this},_on:function(f,v,E,D){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(f,v,E)===!1){E===this&&(E=void 0);var R={fn:v,ctx:E};D&&(R.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(R)}},_off:function(f,v,E){var D,R,F;if(this._events&&(D=this._events[f],!!D)){if(arguments.length===1){if(this._firingCount)for(R=0,F=D.length;R<F;R++)D[R].fn=p;delete this._events[f];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ee=this._listens(f,v,E);if(ee!==!1){var fe=D[ee];this._firingCount&&(fe.fn=p,this._events[f]=D=D.slice()),D.splice(ee,1)}}},fire:function(f,v,E){if(!this.listens(f,E))return this;var D=i({},v,{type:f,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var R=this._events[f];if(R){this._firingCount=this._firingCount+1||1;for(var F=0,ee=R.length;F<ee;F++){var fe=R[F],be=fe.fn;fe.once&&this.off(f,be,fe.ctx),be.call(fe.ctx||this,D)}this._firingCount--}}return E&&this._propagateEvent(D),this},listens:function(f,v,E,D){typeof f!="string"&&console.warn('"string" type argument expected');var R=v;typeof v!="function"&&(D=!!v,R=void 0,E=void 0);var F=this._events&&this._events[f];if(F&&F.length&&this._listens(f,R,E)!==!1)return!0;if(D){for(var ee in this._eventParents)if(this._eventParents[ee].listens(f,v,E,D))return!0}return!1},_listens:function(f,v,E){if(!this._events)return!1;var D=this._events[f]||[];if(!v)return!!D.length;E===this&&(E=void 0);for(var R=0,F=D.length;R<F;R++)if(D[R].fn===v&&D[R].ctx===E)return R;return!1},once:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v,!0);else{f=k(f);for(var R=0,F=f.length;R<F;R++)this._on(f[R],v,E,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[u(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[u(f)],this},_propagateEvent:function(f){for(var v in this._eventParents)this._eventParents[v].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var J=Z.extend(G);function Q(f,v,E){this.x=E?Math.round(f):f,this.y=E?Math.round(v):v}var oe=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(f){return this.clone()._add(le(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(le(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new Q(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new Q(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(f){f=le(f);var v=f.x-this.x,E=f.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(f){return f=le(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=le(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function le(f,v,E){return f instanceof Q?f:j(f)?new Q(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new Q(f.x,f.y):new Q(f,v,E)}function z(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}z.prototype={extend:function(f){var v,E;if(!f)return this;if(f instanceof Q||typeof f[0]=="number"||"x"in f)v=E=le(f);else if(f=K(f),v=f.min,E=f.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(f){return le((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return le(this.min.x,this.max.y)},getTopRight:function(){return le(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var v,E;return typeof f[0]=="number"||f instanceof Q?f=le(f):f=K(f),f instanceof z?(v=f.min,E=f.max):v=E=f,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(f){f=K(f);var v=this.min,E=this.max,D=f.min,R=f.max,F=R.x>=v.x&&D.x<=E.x,ee=R.y>=v.y&&D.y<=E.y;return F&&ee},overlaps:function(f){f=K(f);var v=this.min,E=this.max,D=f.min,R=f.max,F=R.x>v.x&&D.x<E.x,ee=R.y>v.y&&D.y<E.y;return F&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var v=this.min,E=this.max,D=Math.abs(v.x-E.x)*f,R=Math.abs(v.y-E.y)*f;return K(le(v.x-D,v.y-R),le(E.x+D,E.y+R))},equals:function(f){return f?(f=K(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function K(f,v){return!f||f instanceof z?f:new z(f,v)}function ne(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}ne.prototype={extend:function(f){var v=this._southWest,E=this._northEast,D,R;if(f instanceof ce)D=f,R=f;else if(f instanceof ne){if(D=f._southWest,R=f._northEast,!D||!R)return this}else return f?this.extend(ue(f)||re(f)):this;return!v&&!E?(this._southWest=new ce(D.lat,D.lng),this._northEast=new ce(R.lat,R.lng)):(v.lat=Math.min(D.lat,v.lat),v.lng=Math.min(D.lng,v.lng),E.lat=Math.max(R.lat,E.lat),E.lng=Math.max(R.lng,E.lng)),this},pad:function(f){var v=this._southWest,E=this._northEast,D=Math.abs(v.lat-E.lat)*f,R=Math.abs(v.lng-E.lng)*f;return new ne(new ce(v.lat-D,v.lng-R),new ce(E.lat+D,E.lng+R))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof ce||"lat"in f?f=ue(f):f=re(f);var v=this._southWest,E=this._northEast,D,R;return f instanceof ne?(D=f.getSouthWest(),R=f.getNorthEast()):D=R=f,D.lat>=v.lat&&R.lat<=E.lat&&D.lng>=v.lng&&R.lng<=E.lng},intersects:function(f){f=re(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),F=R.lat>=v.lat&&D.lat<=E.lat,ee=R.lng>=v.lng&&D.lng<=E.lng;return F&&ee},overlaps:function(f){f=re(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),F=R.lat>v.lat&&D.lat<E.lat,ee=R.lng>v.lng&&D.lng<E.lng;return F&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,v){return f?(f=re(f),this._southWest.equals(f.getSouthWest(),v)&&this._northEast.equals(f.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(f,v){return f instanceof ne?f:new ne(f,v)}function ce(f,v,E){if(isNaN(f)||isNaN(v))throw new Error("Invalid LatLng object: ("+f+", "+v+")");this.lat=+f,this.lng=+v,E!==void 0&&(this.alt=+E)}ce.prototype={equals:function(f,v){if(!f)return!1;f=ue(f);var E=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return E<=(v===void 0?1e-9:v)},toString:function(f){return"LatLng("+b(this.lat,f)+", "+b(this.lng,f)+")"},distanceTo:function(f){return ke.distance(this,ue(f))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(f){var v=180*f/40075017,E=v/Math.cos(Math.PI/180*this.lat);return re([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function ue(f,v,E){return f instanceof ce?f:j(f)&&typeof f[0]!="object"?f.length===3?new ce(f[0],f[1],f[2]):f.length===2?new ce(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new ce(f.lat,"lng"in f?f.lng:f.lon,f.alt):v===void 0?null:new ce(f,v,E)}var ge={latLngToPoint:function(f,v){var E=this.projection.project(f),D=this.scale(v);return this.transformation._transform(E,D)},pointToLatLng:function(f,v){var E=this.scale(v),D=this.transformation.untransform(f,E);return this.projection.unproject(D)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(f),D=this.transformation.transform(v.min,E),R=this.transformation.transform(v.max,E);return new z(D,R)},infinite:!1,wrapLatLng:function(f){var v=this.wrapLng?h(f.lng,this.wrapLng,!0):f.lng,E=this.wrapLat?h(f.lat,this.wrapLat,!0):f.lat,D=f.alt;return new ce(E,v,D)},wrapLatLngBounds:function(f){var v=f.getCenter(),E=this.wrapLatLng(v),D=v.lat-E.lat,R=v.lng-E.lng;if(D===0&&R===0)return f;var F=f.getSouthWest(),ee=f.getNorthEast(),fe=new ce(F.lat-D,F.lng-R),be=new ce(ee.lat-D,ee.lng-R);return new ne(fe,be)}},ke=i({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(f,v){var E=Math.PI/180,D=f.lat*E,R=v.lat*E,F=Math.sin((v.lat-f.lat)*E/2),ee=Math.sin((v.lng-f.lng)*E/2),fe=F*F+Math.cos(D)*Math.cos(R)*ee*ee,be=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*be}}),ie=6378137,Ae={R:ie,MAX_LATITUDE:85.0511287798,project:function(f){var v=Math.PI/180,E=this.MAX_LATITUDE,D=Math.max(Math.min(E,f.lat),-E),R=Math.sin(D*v);return new Q(this.R*f.lng*v,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(f){var v=180/Math.PI;return new ce((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*v,f.x*v/this.R)},bounds:(function(){var f=ie*Math.PI;return new z([-f,-f],[f,f])})()};function Ee(f,v,E,D){if(j(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=v,this._c=E,this._d=D}Ee.prototype={transform:function(f,v){return this._transform(f.clone(),v)},_transform:function(f,v){return v=v||1,f.x=v*(this._a*f.x+this._b),f.y=v*(this._c*f.y+this._d),f},untransform:function(f,v){return v=v||1,new Q((f.x/v-this._b)/this._a,(f.y/v-this._d)/this._c)}};function he(f,v,E,D){return new Ee(f,v,E,D)}var Le=i({},ke,{code:"EPSG:3857",projection:Ae,transformation:(function(){var f=.5/(Math.PI*Ae.R);return he(f,.5,-f,.5)})()}),Ie=i({},Le,{code:"EPSG:900913"});function tt(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Ne(f,v){var E="",D,R,F,ee,fe,be;for(D=0,F=f.length;D<F;D++){for(fe=f[D],R=0,ee=fe.length;R<ee;R++)be=fe[R],E+=(R?"L":"M")+be.x+" "+be.y;E+=v?We.svg?"z":"x":""}return E||"M0 0"}var Be=document.documentElement.style,Ue="ActiveXObject"in window,nt=Ue&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),yt=ri("webkit"),se=ri("android"),Oe=ri("android 2")||ri("android 3"),Ye=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qe=se&&ri("Google")&&Ye<537&&!("AudioNode"in window),Tt=!!window.opera,ht=!ut&&ri("chrome"),Me=ri("gecko")&&!yt&&!Tt&&!Ue,ze=!ht&&ri("safari"),Xe=ri("phantom"),vt="OTransition"in Be,Ot=navigator.platform.indexOf("Win")===0,$t=Ue&&"transition"in Be,Ht="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,wn="MozPerspective"in Be,Tn=!window.L_DISABLE_3D&&($t||Ht||wn)&&!vt&&!Xe,Ca=typeof orientation<"u"||ri("mobile"),zn=Ca&&yt,Ce=Ca&&Ht,at=!window.PointerEvent&&window.MSPointerEvent,Bt=!!(window.PointerEvent||at),_r="ontouchstart"in window||!!window.TouchEvent,ni=!window.L_NO_TOUCH&&(_r||Bt),Lu=Ca&&Tt,cc=Ca&&Me,tw=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,a0=(function(){var f=!1;try{var v=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return f})(),Gf=(function(){return!!document.createElement("canvas").getContext})(),Wo=!!(document.createElementNS&&tt("svg").createSVGRect),nw=!!Wo&&(function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),o0=!Wo&&(function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var v=f.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),s0=navigator.platform.indexOf("Mac")===0,l0=navigator.platform.indexOf("Linux")===0;function ri(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var We={ie:Ue,ielt9:nt,edge:ut,webkit:yt,android:se,android23:Oe,androidStock:qe,opera:Tt,chrome:ht,gecko:Me,safari:ze,phantom:Xe,opera12:vt,win:Ot,ie3d:$t,webkit3d:Ht,gecko3d:wn,any3d:Tn,mobile:Ca,mobileWebkit:zn,mobileWebkit3d:Ce,msPointer:at,pointer:Bt,touch:ni,touchNative:_r,mobileOpera:Lu,mobileGecko:cc,retina:tw,passiveEvents:a0,canvas:Gf,svg:Wo,vml:o0,inlineSvg:nw,mac:s0,linux:l0},Yf=We.msPointer?"MSPointerDown":"pointerdown",qf=We.msPointer?"MSPointerMove":"pointermove",Ma=We.msPointer?"MSPointerUp":"pointerup",Un=We.msPointer?"MSPointerCancel":"pointercancel",cr={touchstart:Yf,touchmove:qf,touchend:Ma,touchcancel:Un},Vo={touchstart:Js,touchmove:fo,touchend:fo,touchcancel:fo},uo={},c0=!1;function rw(f,v,E){return v==="touchstart"&&Xs(),Vo[v]?(E=Vo[v].bind(this,E),f.addEventListener(cr[v],E,!1),E):(console.warn("wrong event specified:",v),p)}function u0(f,v,E){if(!cr[v]){console.warn("wrong event specified:",v);return}f.removeEventListener(cr[v],E,!1)}function uc(f){uo[f.pointerId]=f}function Kf(f){uo[f.pointerId]&&(uo[f.pointerId]=f)}function Zo(f){delete uo[f.pointerId]}function Xs(){c0||(document.addEventListener(Yf,uc,!0),document.addEventListener(qf,Kf,!0),document.addEventListener(Ma,Zo,!0),document.addEventListener(Un,Zo,!0),c0=!0)}function fo(f,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in uo)v.touches.push(uo[E]);v.changedTouches=[v],f(v)}}function Js(f,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&An(v),fo(f,v)}function Fn(f){var v={},E,D;for(D in f)E=f[D],v[D]=E&&E.bind?E.bind(f):E;return f=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var d0=200;function f0(f,v){f.addEventListener("dblclick",v);var E=0,D;function R(F){if(F.detail!==1){D=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var ee=bc(F);if(!(ee.some(function(be){return be instanceof HTMLLabelElement&&be.attributes.for})&&!ee.some(function(be){return be instanceof HTMLInputElement||be instanceof HTMLSelectElement}))){var fe=Date.now();fe-E<=d0?(D++,D===2&&v(Fn(F))):D=1,E=fe}}}return f.addEventListener("click",R),{dblclick:v,simDblclick:R}}function Xo(f,v){f.removeEventListener("dblclick",v.dblclick),f.removeEventListener("click",v.simDblclick)}var ho=hc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dc=hc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wf=dc==="webkitTransition"||dc==="OTransition"?dc+"End":"transitionend";function Vf(f){return typeof f=="string"?document.getElementById(f):f}function fc(f,v){var E=f.style[v]||f.currentStyle&&f.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(f,null);E=D?D[v]:null}return E==="auto"?null:E}function xt(f,v,E){var D=document.createElement(f);return D.className=v||"",E&&E.appendChild(D),D}function Kt(f){var v=f.parentNode;v&&v.removeChild(f)}function ii(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Qn(f){var v=f.parentNode;v&&v.lastChild!==f&&v.appendChild(f)}function Jo(f){var v=f.parentNode;v&&v.firstChild!==f&&v.insertBefore(f,v.firstChild)}function Zf(f,v){if(f.classList!==void 0)return f.classList.contains(v);var E=Iu(f);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function dt(f,v){if(f.classList!==void 0)for(var E=k(v),D=0,R=E.length;D<R;D++)f.classList.add(E[D]);else if(!Zf(f,v)){var F=Iu(f);Qs(f,(F?F+" ":"")+v)}}function dn(f,v){f.classList!==void 0?f.classList.remove(v):Qs(f,y((" "+Iu(f)+" ").replace(" "+v+" "," ")))}function Qs(f,v){f.className.baseVal===void 0?f.className=v:f.className.baseVal=v}function Iu(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function on(f,v){"opacity"in f.style?f.style.opacity=v:"filter"in f.style&&Xf(f,v)}function Xf(f,v){var E=!1,D="DXImageTransform.Microsoft.Alpha";try{E=f.filters.item(D)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):f.style.filter+=" progid:"+D+"(opacity="+v+")"}function hc(f){for(var v=document.documentElement.style,E=0;E<f.length;E++)if(f[E]in v)return f[E];return!1}function Da(f,v,E){var D=v||new Q(0,0);f.style[ho]=(We.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(E?" scale("+E+")":"")}function Xt(f,v){f._leaflet_pos=v,We.any3d?Da(f,v):(f.style.left=v.x+"px",f.style.top=v.y+"px")}function mo(f){return f._leaflet_pos||new Q(0,0)}var el,Ji,Jf;if("onselectstart"in document)el=function(){lt(window,"selectstart",An)},Ji=function(){zt(window,"selectstart",An)};else{var tl=hc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);el=function(){if(tl){var f=document.documentElement.style;Jf=f[tl],f[tl]="none"}},Ji=function(){tl&&(document.documentElement.style[tl]=Jf,Jf=void 0)}}function $u(){lt(window,"dragstart",An)}function mc(){zt(window,"dragstart",An)}var Bu,Qf;function nl(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(ai(),Bu=f,Qf=f.style.outlineStyle,f.style.outlineStyle="none",lt(window,"keydown",ai))}function ai(){Bu&&(Bu.style.outlineStyle=Qf,Bu=void 0,Qf=void 0,zt(window,"keydown",ai))}function zu(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function pc(f){var v=f.getBoundingClientRect();return{x:v.width/f.offsetWidth||1,y:v.height/f.offsetHeight||1,boundingClientRect:v}}var rl={__proto__:null,TRANSFORM:ho,TRANSITION:dc,TRANSITION_END:Wf,get:Vf,getStyle:fc,create:xt,remove:Kt,empty:ii,toFront:Qn,toBack:Jo,hasClass:Zf,addClass:dt,removeClass:dn,setClass:Qs,getClass:Iu,setOpacity:on,testProp:hc,setTransform:Da,setPosition:Xt,getPosition:mo,get disableTextSelection(){return el},get enableTextSelection(){return Ji},disableImageDrag:$u,enableImageDrag:mc,preventOutline:nl,restoreOutline:ai,getSizedParentNode:zu,getScale:pc};function lt(f,v,E,D){if(v&&typeof v=="object")for(var R in v)Ti(f,R,v[R],E);else{v=k(v);for(var F=0,ee=v.length;F<ee;F++)Ti(f,v[F],E,D)}return this}var ji="_leaflet_events";function zt(f,v,E,D){if(arguments.length===1)eh(f),delete f[ji];else if(v&&typeof v=="object")for(var R in v)gc(f,R,v[R],E);else if(v=k(v),arguments.length===2)eh(f,function(fe){return C(v,fe)!==-1});else for(var F=0,ee=v.length;F<ee;F++)gc(f,v[F],E,D);return this}function eh(f,v){for(var E in f[ji]){var D=E.split(/\d/)[0];(!v||v(D))&&gc(f,D,null,null,E)}}var Qo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ti(f,v,E,D){var R=v+u(E)+(D?"_"+u(D):"");if(f[ji]&&f[ji][R])return this;var F=function(fe){return E.call(D||f,fe||window.event)},ee=F;!We.touchNative&&We.pointer&&v.indexOf("touch")===0?F=rw(f,v,F):We.touch&&v==="dblclick"?F=f0(f,F):"addEventListener"in f?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?f.addEventListener(Qo[v]||v,F,We.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(F=function(fe){fe=fe||window.event,Pa(f,fe)&&ee(fe)},f.addEventListener(Qo[v],F,!1)):f.addEventListener(v,ee,!1):f.attachEvent("on"+v,F),f[ji]=f[ji]||{},f[ji][R]=F}function gc(f,v,E,D,R){R=R||v+u(E)+(D?"_"+u(D):"");var F=f[ji]&&f[ji][R];if(!F)return this;!We.touchNative&&We.pointer&&v.indexOf("touch")===0?u0(f,v,F):We.touch&&v==="dblclick"?Xo(f,F):"removeEventListener"in f?f.removeEventListener(Qo[v]||v,F,!1):f.detachEvent("on"+v,F),f[ji][R]=null}function Ai(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Qi(f){return Ti(f,"wheel",Ai),this}function es(f){return lt(f,"mousedown touchstart dblclick contextmenu",Ai),f._leaflet_disable_click=!0,this}function An(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function po(f){return An(f),Ai(f),this}function bc(f){if(f.composedPath)return f.composedPath();for(var v=[],E=f.target;E;)v.push(E),E=E.parentNode;return v}function yc(f,v){if(!v)return new Q(f.clientX,f.clientY);var E=pc(v),D=E.boundingClientRect;return new Q((f.clientX-D.left)/E.x-v.clientLeft,(f.clientY-D.top)/E.y-v.clientTop)}var h0=We.linux&&We.chrome?window.devicePixelRatio:We.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sr(f){return We.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/h0:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Pa(f,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==f;)E=E.parentNode}catch{return!1}return E!==f}var Uu={__proto__:null,on:lt,off:zt,stopPropagation:Ai,disableScrollPropagation:Qi,disableClickPropagation:es,preventDefault:An,stop:po,getPropagationPath:bc,getMousePosition:yc,getWheelDelta:Sr,isExternalTarget:Pa,addListener:lt,removeListener:zt},il=J.extend({run:function(f,v,E,D){this.stop(),this._el=f,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=mo(f),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(f){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),f):(this._runFrame(1),this._complete())},_runFrame:function(f,v){var E=this._startPos.add(this._offset.multiplyBy(f));v&&E._round(),Xt(this._el,E),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),kt=J.extend({options:{crs:Le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,v){v=w(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(ue(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=dc&&We.any3d&&!We.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Wf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),f=this._limitCenter(ue(f),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var D=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,v,E.zoom):this._tryAnimatedPan(f,E.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(f,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(f,v){return this._loaded?this.setView(this.getCenter(),f,{zoom:v}):(this._zoom=f,this)},zoomIn:function(f,v){return f=f||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,v)},zoomOut:function(f,v){return f=f||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,v)},setZoomAround:function(f,v,E){var D=this.getZoomScale(v),R=this.getSize().divideBy(2),F=f instanceof Q?f:this.latLngToContainerPoint(f),ee=F.subtract(R).multiplyBy(1-1/D),fe=this.containerPointToLatLng(R.add(ee));return this.setView(fe,v,{zoom:E})},_getBoundsCenterZoom:function(f,v){v=v||{},f=f.getBounds?f.getBounds():re(f);var E=le(v.paddingTopLeft||v.padding||[0,0]),D=le(v.paddingBottomRight||v.padding||[0,0]),R=this.getBoundsZoom(f,!1,E.add(D));if(R=typeof v.maxZoom=="number"?Math.min(v.maxZoom,R):R,R===1/0)return{center:f.getCenter(),zoom:R};var F=D.subtract(E).divideBy(2),ee=this.project(f.getSouthWest(),R),fe=this.project(f.getNorthEast(),R),be=this.unproject(ee.add(fe).divideBy(2).add(F),R);return{center:be,zoom:R}},fitBounds:function(f,v){if(f=re(f),!f.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(f,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,v){return this.setView(f,this._zoom,{pan:v})},panBy:function(f,v){if(f=le(f).round(),v=v||{},!f.x&&!f.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new il,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){dt(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,v,E){if(E=E||{},E.animate===!1||!We.any3d)return this.setView(f,v,E);this._stop();var D=this.project(this.getCenter()),R=this.project(f),F=this.getSize(),ee=this._zoom;f=ue(f),v=v===void 0?ee:v;var fe=Math.max(F.x,F.y),be=fe*this.getZoomScale(ee,v),je=R.distanceTo(D)||1,$e=1.42,Ze=$e*$e;function gt(_n){var $a=_n?-1:1,is=_n?be:fe,ph=be*be-fe*fe+$a*Ze*Ze*je*je,Pc=2*is*Ze*je,Rc=ph/Pc,ko=Math.sqrt(Rc*Rc+1)-Rc,Ba=ko<1e-9?-18:Math.log(ko);return Ba}function er(_n){return(Math.exp(_n)-Math.exp(-_n))/2}function Nn(_n){return(Math.exp(_n)+Math.exp(-_n))/2}function Yr(_n){return er(_n)/Nn(_n)}var Ct=gt(0);function Mt(_n){return fe*(Nn(Ct)/Nn(Ct+$e*_n))}function wt(_n){return fe*(Nn(Ct)*Yr(Ct+$e*_n)-er(Ct))/Ze}function _o(_n){return 1-Math.pow(1-_n,1.5)}var ci=Date.now(),td=(gt(1)-Ct)/$e,So=E.duration?1e3*E.duration:1e3*td*.8;function mh(){var _n=(Date.now()-ci)/So,$a=_o(_n)*td;_n<=1?(this._flyToFrame=H(mh,this),this._move(this.unproject(D.add(R.subtract(D).multiplyBy(wt($a)/je)),ee),this.getScaleZoom(fe/Mt($a),ee),{flyTo:!0})):this._move(f,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),mh.call(this),this},flyToBounds:function(f,v){var E=this._getBoundsCenterZoom(f,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(f){return f=re(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var v=this.options.minZoom;return this.options.minZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var v=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,v){this._enforcingBounds=!0;var E=this.getCenter(),D=this._limitCenter(E,this._zoom,re(f));return E.equals(D)||this.panTo(D,v),this._enforcingBounds=!1,this},panInside:function(f,v){v=v||{};var E=le(v.paddingTopLeft||v.padding||[0,0]),D=le(v.paddingBottomRight||v.padding||[0,0]),R=this.project(this.getCenter()),F=this.project(f),ee=this.getPixelBounds(),fe=K([ee.min.add(E),ee.max.subtract(D)]),be=fe.getSize();if(!fe.contains(F)){this._enforcingBounds=!0;var je=F.subtract(fe.getCenter()),$e=fe.extend(F).getSize().subtract(be);R.x+=je.x<0?-$e.x:$e.x,R.y+=je.y<0?-$e.y:$e.y,this.panTo(this.unproject(R),v),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),D=v.divideBy(2).round(),R=E.divideBy(2).round(),F=D.subtract(R);return!F.x&&!F.y?this:(f.animate&&f.pan?this.panBy(F):(f.pan&&this._rawPanBy(F),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,f):navigator.geolocation.getCurrentPosition(v,E,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var v=f.code,E=f.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var v=f.coords.latitude,E=f.coords.longitude,D=new ce(v,E),R=D.toBounds(f.coords.accuracy*2),F=this._locateOptions;if(F.setView){var ee=this.getBoundsZoom(R);this.setView(D,F.maxZoom?Math.min(ee,F.maxZoom):ee)}var fe={latlng:D,bounds:R,timestamp:f.timestamp};for(var be in f.coords)typeof f.coords[be]=="number"&&(fe[be]=f.coords[be]);this.fire("locationfound",fe)}},addHandler:function(f,v){if(!v)return this;var E=this[f]=new v(this);return this._handlers.push(E),this.options[f]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Kt(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,v){var E="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),D=xt("div",E,v||this._mapPane);return f&&(this._panes[f]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),v=this.unproject(f.getBottomLeft()),E=this.unproject(f.getTopRight());return new ne(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,v,E){f=re(f),E=le(E||[0,0]);var D=this.getZoom()||0,R=this.getMinZoom(),F=this.getMaxZoom(),ee=f.getNorthWest(),fe=f.getSouthEast(),be=this.getSize().subtract(E),je=K(this.project(fe,D),this.project(ee,D)).getSize(),$e=We.any3d?this.options.zoomSnap:1,Ze=be.x/je.x,gt=be.y/je.y,er=v?Math.max(Ze,gt):Math.min(Ze,gt);return D=this.getScaleZoom(er,D),$e&&(D=Math.round(D/($e/100))*($e/100),D=v?Math.ceil(D/$e)*$e:Math.floor(D/$e)*$e),Math.max(R,Math.min(F,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,v){var E=this._getTopLeftPoint(f,v);return new z(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(f)/E.scale(v)},getScaleZoom:function(f,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var D=E.zoom(f*E.scale(v));return isNaN(D)?1/0:D},project:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(ue(f),v)},unproject:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(le(f),v)},layerPointToLatLng:function(f){var v=le(f).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(f){var v=this.project(ue(f))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(ue(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(re(f))},distance:function(f,v){return this.options.crs.distance(ue(f),ue(v))},containerPointToLayerPoint:function(f){return le(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return le(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var v=this.containerPointToLayerPoint(le(f));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(f)))},mouseEventToContainerPoint:function(f){return yc(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var v=this._container=Vf(f);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(v,"scroll",this._onScroll,this),this._containerId=u(v)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&We.any3d,dt(f,"leaflet-container"+(We.touch?" leaflet-touch":"")+(We.retina?" leaflet-retina":"")+(We.ielt9?" leaflet-oldie":"")+(We.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=fc(f,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xt(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(dt(f.markerPane,"leaflet-zoom-hide"),dt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,v,E){Xt(this._mapPane,new Q(0,0));var D=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var R=this._zoom!==v;this._moveStart(R,E)._move(f,v)._moveEnd(R),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(f,v){return f&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(f,v,E,D){v===void 0&&(v=this._zoom);var R=this._zoom!==v;return this._zoom=v,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),D?E&&E.pinch&&this.fire("zoom",E):((R||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Xt(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[u(this._container)]=this;var v=f?zt:lt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),We.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,v){for(var E=[],D,R=v==="mouseout"||v==="mouseover",F=f.target||f.srcElement,ee=!1;F;){if(D=this._targets[u(F)],D&&(v==="click"||v==="preclick")&&this._draggableMoved(D)){ee=!0;break}if(D&&D.listens(v,!0)&&(R&&!Pa(F,f)||(E.push(D),R))||F===this._container)break;F=F.parentNode}return!E.length&&!ee&&!R&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var v=f.target||f.srcElement;if(!(!this._loaded||v._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(v))){var E=f.type;E==="mousedown"&&nl(v),this._fireDOMEvent(f,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,v,E){if(f.type==="click"){var D=i({},f);D.type="preclick",this._fireDOMEvent(D,D.type,E)}var R=this._findEventTargets(f,v);if(E){for(var F=[],ee=0;ee<E.length;ee++)E[ee].listens(v,!0)&&F.push(E[ee]);R=F.concat(R)}if(R.length){v==="contextmenu"&&An(f);var fe=R[0],be={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var je=fe.getLatLng&&(!fe._radius||fe._radius<=10);be.containerPoint=je?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(f),be.layerPoint=this.containerPointToLayerPoint(be.containerPoint),be.latlng=je?fe.getLatLng():this.layerPointToLatLng(be.layerPoint)}for(ee=0;ee<R.length;ee++)if(R[ee].fire(v,be,!0),be.originalEvent._stopped||R[ee].options.bubblingMouseEvents===!1&&C(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,v=this._handlers.length;f<v;f++)this._handlers[f].disable()},whenReady:function(f,v){return this._loaded?f.call(v||this,{target:this}):this.on("load",f,v),this},_getMapPanePos:function(){return mo(this._mapPane)||new Q(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,v){var E=f&&v!==void 0?this._getNewPixelOrigin(f,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,v){var E=this.getSize()._divideBy(2);return this.project(f,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return this.project(f,v)._subtract(D)},_latLngBoundsToNewLayerBounds:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return K([this.project(f.getSouthWest(),v)._subtract(D),this.project(f.getNorthWest(),v)._subtract(D),this.project(f.getSouthEast(),v)._subtract(D),this.project(f.getNorthEast(),v)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,v,E){if(!E)return f;var D=this.project(f,v),R=this.getSize().divideBy(2),F=new z(D.subtract(R),D.add(R)),ee=this._getBoundsOffset(F,E,v);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?f:this.unproject(D.add(ee),v)},_limitOffset:function(f,v){if(!v)return f;var E=this.getPixelBounds(),D=new z(E.min.add(f),E.max.add(f));return f.add(this._getBoundsOffset(D,v))},_getBoundsOffset:function(f,v,E){var D=K(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),R=D.min.subtract(f.min),F=D.max.subtract(f.max),ee=this._rebound(R.x,-F.x),fe=this._rebound(R.y,-F.y);return new Q(ee,fe)},_rebound:function(f,v){return f+v>0?Math.round(f-v)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(v))},_limitZoom:function(f){var v=this.getMinZoom(),E=this.getMaxZoom(),D=We.any3d?this.options.zoomSnap:1;return D&&(f=Math.round(f/D)*D),Math.max(v,Math.min(E,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){dn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,v){var E=this._getCenterOffset(f)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var f=this._proxy=xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(v){var E=ho,D=this._proxy.style[E];Da(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),D===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),v=this.getZoom();Da(this._proxy,this.project(f,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(v),R=this._getCenterOffset(f)._divideBy(1-1/D);return E.animate!==!0&&!this.getSize().contains(R)?!1:(H(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(f,v,!0)},this),!0)},_animateZoom:function(f,v,E,D){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=v,dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:v,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&dn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function th(f,v){return new kt(f,v)}var Gr=Z.extend({options:{position:"topright"},initialize:function(f){w(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var v=this._map;return v&&v.removeControl(this),this.options.position=f,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var v=this._container=this.onAdd(f),E=this.getPosition(),D=f._controlCorners[E];return dt(v,"leaflet-control"),E.indexOf("bottom")!==-1?D.insertBefore(v,D.firstChild):D.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Ra=function(f){return new Gr(f)};kt.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},v="leaflet-",E=this._controlContainer=xt("div",v+"control-container",this._container);function D(R,F){var ee=v+R+" "+v+F;f[R+F]=xt("div",ee,E)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Kt(this._controlCorners[f]);Kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vc=Gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,v,E,D){return E<D?-1:D<E?1:0}},initialize:function(f,v,E){w(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in f)this._addLayer(f[D],D);for(D in v)this._addLayer(v[D],D,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Gr.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,v){return this._addLayer(f,v),this._map?this._update():this},addOverlay:function(f,v){return this._addLayer(f,v,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var v=this._getLayer(u(f));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):dn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return dn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",v=this._container=xt("div",f),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),es(v),Qi(v);var D=this._section=xt("section",f+"-list");E&&(this._map.on("click",this.collapse,this),lt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=xt("a",f+"-toggle",v);R.href="#",R.title="Layers",R.setAttribute("role","button"),lt(R,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){An(F),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=xt("div",f+"-base",D),this._separator=xt("div",f+"-separator",D),this._overlaysList=xt("div",f+"-overlays",D),v.appendChild(D)},_getLayer:function(f){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&u(this._layers[v].layer)===f)return this._layers[v]},_addLayer:function(f,v,E){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(D,R){return this.options.sortFunction(D.layer,R.layer,D.name,R.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ii(this._baseLayersList),ii(this._overlaysList),this._layerControlInputs=[];var f,v,E,D,R=0;for(E=0;E<this._layers.length;E++)D=this._layers[E],this._addItem(D),v=v||D.overlay,f=f||!D.overlay,R+=D.overlay?0:1;return this.options.hideSingleBase&&(f=f&&R>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=v&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var v=this._getLayer(u(f.target)),E=v.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(f,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(v?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=E,D.firstChild},_addItem:function(f){var v=document.createElement("label"),E=this._map.hasLayer(f.layer),D;f.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=E):D=this._createRadioElement("leaflet-base-layers_"+u(this),E),this._layerControlInputs.push(D),D.layerId=u(f.layer),lt(D,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+f.name;var F=document.createElement("span");v.appendChild(F),F.appendChild(D),F.appendChild(R);var ee=f.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,v,E,D=[],R=[];this._handlingClick=!0;for(var F=f.length-1;F>=0;F--)v=f[F],E=this._getLayer(v.layerId).layer,v.checked?D.push(E):v.checked||R.push(E);for(F=0;F<R.length;F++)this._map.hasLayer(R[F])&&this._map.removeLayer(R[F]);for(F=0;F<D.length;F++)this._map.hasLayer(D[F])||this._map.addLayer(D[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,v,E,D=this._map.getZoom(),R=f.length-1;R>=0;R--)v=f[R],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&D<E.options.minZoom||E.options.maxZoom!==void 0&&D>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,lt(f,"click",An),this.expand();var v=this;setTimeout(function(){zt(f,"click",An),v._preventClick=!1})}}),m0=function(f,v,E){return new vc(f,v,E)},nh=Gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var v="leaflet-control-zoom",E=xt("div",v+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,v,E,D,R){var F=xt("a",E,D);return F.innerHTML=f,F.href="#",F.title=v,F.setAttribute("role","button"),F.setAttribute("aria-label",v),es(F),lt(F,"click",po),lt(F,"click",R,this),lt(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var f=this._map,v="leaflet-disabled";dn(this._zoomInButton,v),dn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(dt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(dt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});kt.mergeOptions({zoomControl:!0}),kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nh,this.addControl(this.zoomControl))});var iw=function(f){return new nh(f)},p0=Gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var v="leaflet-control-scale",E=xt("div",v),D=this.options;return this._addScales(D,v+"-line",E),f.on(D.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),E},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,v,E){f.metric&&(this._mScale=xt("div",v,E)),f.imperial&&(this._iScale=xt("div",v,E))},_update:function(){var f=this._map,v=f.getSize().y/2,E=f.distance(f.containerPointToLatLng([0,v]),f.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var v=this._getRoundNum(f),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/f)},_updateImperial:function(f){var v=f*3.2808399,E,D,R;v>5280?(E=v/5280,D=this._getRoundNum(E),this._updateScale(this._iScale,D+" mi",D/E)):(R=this._getRoundNum(v),this._updateScale(this._iScale,R+" ft",R/v))},_updateScale:function(f,v,E){f.style.width=Math.round(this.options.maxWidth*E)+"px",f.innerHTML=v},_getRoundNum:function(f){var v=Math.pow(10,(Math.floor(f)+"").length-1),E=f/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),rh=function(f){return new p0(f)},aw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ih=Gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(We.inlineSvg?aw+" ":"")+"Leaflet</a>"},initialize:function(f){w(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=xt("div","leaflet-control-attribution"),es(this._container);for(var v in f._layers)f._layers[v].getAttribution&&this.addAttribution(f._layers[v].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var v in this._attributions)this._attributions[v]&&f.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),f.length&&E.push(f.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});kt.mergeOptions({attributionControl:!0}),kt.addInitHook(function(){this.options.attributionControl&&new ih().addTo(this)});var ow=function(f){return new ih(f)};Gr.Layers=vc,Gr.Zoom=nh,Gr.Scale=p0,Gr.Attribution=ih,Ra.layers=m0,Ra.zoom=iw,Ra.scale=rh,Ra.attribution=ow;var ea=Z.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ea.addTo=function(f,v){return f.addHandler(v,this),this};var sw={Events:G},ah=We.touch?"touchstart mousedown":"mousedown",go=J.extend({options:{clickTolerance:3},initialize:function(f,v,E,D){w(this,D),this._element=f,this._dragStartTarget=v||f,this._preventOutline=E},enable:function(){this._enabled||(lt(this._dragStartTarget,ah,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(go._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,ah,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Zf(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){go._dragging===this&&this.finishDrag();return}if(!(go._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(go._dragging=this,this._preventOutline&&nl(this._element),$u(),el(),!this._moving)){this.fire("down");var v=f.touches?f.touches[0]:f,E=zu(this._element);this._startPoint=new Q(v.clientX,v.clientY),this._startPos=mo(this._element),this._parentScale=pc(E);var D=f.type==="mousedown";lt(document,D?"mousemove":"touchmove",this._onMove,this),lt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var v=f.touches&&f.touches.length===1?f.touches[0]:f,E=new Q(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,An(f),this._moved||(this.fire("dragstart"),this._moved=!0,dt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Xt(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){dn(document.body,"leaflet-dragging"),this._lastTarget&&(dn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),mc(),Ji();var v=this._moved&&this._moving;this._moving=!1,go._dragging=!1,v&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function g0(f,v,E){var D,R=[1,4,2,8],F,ee,fe,be,je,$e,Ze,gt;for(F=0,$e=f.length;F<$e;F++)f[F]._code=ts(f[F],v);for(fe=0;fe<4;fe++){for(Ze=R[fe],D=[],F=0,$e=f.length,ee=$e-1;F<$e;ee=F++)be=f[F],je=f[ee],be._code&Ze?je._code&Ze||(gt=Fu(je,be,Ze,v,E),gt._code=ts(gt,v),D.push(gt)):(je._code&Ze&&(gt=Fu(je,be,Ze,v,E),gt._code=ts(gt,v),D.push(gt)),D.push(be));f=D}return f}function b0(f,v){var E,D,R,F,ee,fe,be,je,$e;if(!f||f.length===0)throw new Error("latlngs not passed");oi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ze=ue([0,0]),gt=re(f),er=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());er<1700&&(Ze=oh(f));var Nn=f.length,Yr=[];for(E=0;E<Nn;E++){var Ct=ue(f[E]);Yr.push(v.project(ue([Ct.lat-Ze.lat,Ct.lng-Ze.lng])))}for(fe=be=je=0,E=0,D=Nn-1;E<Nn;D=E++)R=Yr[E],F=Yr[D],ee=R.y*F.x-F.y*R.x,be+=(R.x+F.x)*ee,je+=(R.y+F.y)*ee,fe+=ee*3;fe===0?$e=Yr[0]:$e=[be/fe,je/fe];var Mt=v.unproject(le($e));return ue([Mt.lat+Ze.lat,Mt.lng+Ze.lng])}function oh(f){for(var v=0,E=0,D=0,R=0;R<f.length;R++){var F=ue(f[R]);v+=F.lat,E+=F.lng,D++}return ue([v/D,E/D])}var sh={__proto__:null,clipPolygon:g0,polygonCenter:b0,centroid:oh};function y0(f,v){if(!v||!f.length)return f.slice();var E=v*v;return f=cw(f,E),f=x0(f,E),f}function v0(f,v,E){return Math.sqrt(xc(f,v,E,!0))}function lw(f,v,E){return xc(f,v,E)}function x0(f,v){var E=f.length,D=typeof Uint8Array<"u"?Uint8Array:Array,R=new D(E);R[0]=R[E-1]=1,lh(f,R,v,0,E-1);var F,ee=[];for(F=0;F<E;F++)R[F]&&ee.push(f[F]);return ee}function lh(f,v,E,D,R){var F=0,ee,fe,be;for(fe=D+1;fe<=R-1;fe++)be=xc(f[fe],f[D],f[R],!0),be>F&&(ee=fe,F=be);F>E&&(v[ee]=1,lh(f,v,E,D,ee),lh(f,v,E,ee,R))}function cw(f,v){for(var E=[f[0]],D=1,R=0,F=f.length;D<F;D++)uw(f[D],f[R])>v&&(E.push(f[D]),R=D);return R<F-1&&E.push(f[F-1]),E}var w0;function _0(f,v,E,D,R){var F=D?w0:ts(f,E),ee=ts(v,E),fe,be,je;for(w0=ee;;){if(!(F|ee))return[f,v];if(F&ee)return!1;fe=F||ee,be=Fu(f,v,fe,E,R),je=ts(be,E),fe===F?(f=be,F=je):(v=be,ee=je)}}function Fu(f,v,E,D,R){var F=v.x-f.x,ee=v.y-f.y,fe=D.min,be=D.max,je,$e;return E&8?(je=f.x+F*(be.y-f.y)/ee,$e=be.y):E&4?(je=f.x+F*(fe.y-f.y)/ee,$e=fe.y):E&2?(je=be.x,$e=f.y+ee*(be.x-f.x)/F):E&1&&(je=fe.x,$e=f.y+ee*(fe.x-f.x)/F),new Q(je,$e,R)}function ts(f,v){var E=0;return f.x<v.min.x?E|=1:f.x>v.max.x&&(E|=2),f.y<v.min.y?E|=4:f.y>v.max.y&&(E|=8),E}function uw(f,v){var E=v.x-f.x,D=v.y-f.y;return E*E+D*D}function xc(f,v,E,D){var R=v.x,F=v.y,ee=E.x-R,fe=E.y-F,be=ee*ee+fe*fe,je;return be>0&&(je=((f.x-R)*ee+(f.y-F)*fe)/be,je>1?(R=E.x,F=E.y):je>0&&(R+=ee*je,F+=fe*je)),ee=f.x-R,fe=f.y-F,D?ee*ee+fe*fe:new Q(R,F)}function oi(f){return!j(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function Hu(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),oi(f)}function al(f,v){var E,D,R,F,ee,fe,be,je;if(!f||f.length===0)throw new Error("latlngs not passed");oi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var $e=ue([0,0]),Ze=re(f),gt=Ze.getNorthWest().distanceTo(Ze.getSouthWest())*Ze.getNorthEast().distanceTo(Ze.getNorthWest());gt<1700&&($e=oh(f));var er=f.length,Nn=[];for(E=0;E<er;E++){var Yr=ue(f[E]);Nn.push(v.project(ue([Yr.lat-$e.lat,Yr.lng-$e.lng])))}for(E=0,D=0;E<er-1;E++)D+=Nn[E].distanceTo(Nn[E+1])/2;if(D===0)je=Nn[0];else for(E=0,F=0;E<er-1;E++)if(ee=Nn[E],fe=Nn[E+1],R=ee.distanceTo(fe),F+=R,F>D){be=(F-D)/R,je=[fe.x-be*(fe.x-ee.x),fe.y-be*(fe.y-ee.y)];break}var Ct=v.unproject(le(je));return ue([Ct.lat+$e.lat,Ct.lng+$e.lng])}var dw={__proto__:null,simplify:y0,pointToSegmentDistance:v0,closestPointOnSegment:lw,clipSegment:_0,_getEdgeIntersection:Fu,_getBitCode:ts,_sqClosestPointOnSegment:xc,isFlat:oi,_flat:Hu,polylineCenter:al},Gu={project:function(f){return new Q(f.lng,f.lat)},unproject:function(f){return new ce(f.y,f.x)},bounds:new z([-180,-90],[180,90])},Yu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var v=Math.PI/180,E=this.R,D=f.lat*v,R=this.R_MINOR/E,F=Math.sqrt(1-R*R),ee=F*Math.sin(D),fe=Math.tan(Math.PI/4-D/2)/Math.pow((1-ee)/(1+ee),F/2);return D=-E*Math.log(Math.max(fe,1e-10)),new Q(f.lng*v*E,D)},unproject:function(f){for(var v=180/Math.PI,E=this.R,D=this.R_MINOR/E,R=Math.sqrt(1-D*D),F=Math.exp(-f.y/E),ee=Math.PI/2-2*Math.atan(F),fe=0,be=.1,je;fe<15&&Math.abs(be)>1e-7;fe++)je=R*Math.sin(ee),je=Math.pow((1-je)/(1+je),R/2),be=Math.PI/2-2*Math.atan(F*je)-ee,ee+=be;return new ce(ee*v,f.x*v/E)}},S0={__proto__:null,LonLat:Gu,Mercator:Yu,SphericalMercator:Ae},k0=i({},ke,{code:"EPSG:3395",projection:Yu,transformation:(function(){var f=.5/(Math.PI*Yu.R);return he(f,.5,-f,.5)})()}),ch=i({},ke,{code:"EPSG:4326",projection:Gu,transformation:he(1/180,1,-1/180,.5)}),ol=i({},ge,{projection:Gu,transformation:he(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,v){var E=v.lng-f.lng,D=v.lat-f.lat;return Math.sqrt(E*E+D*D)},infinite:!0});ge.Earth=ke,ge.EPSG3395=k0,ge.EPSG3857=Le,ge.EPSG900913=Ie,ge.EPSG4326=ch,ge.Simple=ol;var Ni=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[u(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[u(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var v=f.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});kt.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var v=u(f);return this._layers[v]?this:(this._layers[v]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var v=u(f);return this._layers[v]?(this._loaded&&f.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return u(f)in this._layers},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},_addLayers:function(f){f=f?j(f)?f:[f]:[];for(var v=0,E=f.length;v<E;v++)this.addLayer(f[v])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[u(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var v=u(f);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,v=-1/0,E=this._getZoomSpan();for(var D in this._zoomBoundLayers){var R=this._zoomBoundLayers[D].options;f=R.minZoom===void 0?f:Math.min(f,R.minZoom),v=R.maxZoom===void 0?v:Math.max(v,R.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=f===1/0?void 0:f,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var sl=Ni.extend({initialize:function(f,v){w(this,v),this._layers={};var E,D;if(f)for(E=0,D=f.length;E<D;E++)this.addLayer(f[E])},addLayer:function(f){var v=this.getLayerId(f);return this._layers[v]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var v=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(f){var v=typeof f=="number"?f:this.getLayerId(f);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var v=Array.prototype.slice.call(arguments,1),E,D;for(E in this._layers)D=this._layers[E],D[f]&&D[f].apply(D,v);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return u(f)}}),fw=function(f,v){return new sl(f,v)},ta=sl.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),sl.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),sl.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ne;for(var v in this._layers){var E=this._layers[v];f.extend(E.getBounds?E.getBounds():E.getLatLng())}return f}}),E0=function(f,v){return new ta(f,v)},na=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){w(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,v){var E=this._getIconUrl(f);if(!E){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(D,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(f,v){var E=this.options,D=E[v+"Size"];typeof D=="number"&&(D=[D,D]);var R=le(D),F=le(v==="shadow"&&E.shadowAnchor||E.iconAnchor||R&&R.divideBy(2,!0));f.className="leaflet-marker-"+v+" "+(E.className||""),F&&(f.style.marginLeft=-F.x+"px",f.style.marginTop=-F.y+"px"),R&&(f.style.width=R.x+"px",f.style.height=R.y+"px")},_createImg:function(f,v){return v=v||document.createElement("img"),v.src=f,v},_getIconUrl:function(f){return We.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function wc(f){return new na(f)}var _c=na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof _c.imagePath!="string"&&(_c.imagePath=this._detectIconPath()),(this.options.imagePath||_c.imagePath)+na.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var v=function(E,D,R){var F=D.exec(E);return F&&F[R]};return f=v(f,/^url\((['"])?(.+)\1\)$/,2),f&&v(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=xt("div","leaflet-default-icon-path",document.body),v=fc(f,"background-image")||fc(f,"backgroundImage");if(document.body.removeChild(f),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Sc=ea.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new go(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),dt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&dn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var v=this._marker,E=v._map,D=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,F=mo(v._icon),ee=E.getPixelBounds(),fe=E.getPixelOrigin(),be=K(ee.min._subtract(fe).add(R),ee.max._subtract(fe).subtract(R));if(!be.contains(F)){var je=le((Math.max(be.max.x,F.x)-be.max.x)/(ee.max.x-be.max.x)-(Math.min(be.min.x,F.x)-be.min.x)/(ee.min.x-be.min.x),(Math.max(be.max.y,F.y)-be.max.y)/(ee.max.y-be.max.y)-(Math.min(be.min.y,F.y)-be.min.y)/(ee.min.y-be.min.y)).multiplyBy(D);E.panBy(je,{animate:!1}),this._draggable._newPos._add(je),this._draggable._startPos._add(je),Xt(v._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=H(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,f)))},_onDrag:function(f){var v=this._marker,E=v._shadow,D=mo(v._icon),R=v._map.layerPointToLatLng(D);E&&Xt(E,D),v._latlng=R,f.latlng=R,f.oldLatLng=this._oldLatLng,v.fire("move",f).fire("drag",f)},_onDragEnd:function(f){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),kc=Ni.extend({options:{icon:new _c,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,v){w(this,v),this._latlng=ue(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var v=this._latlng;return this._latlng=ue(f),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=f.icon.createIcon(this._icon),D=!1;E!==this._icon&&(this._icon&&this._removeIcon(),D=!0,f.title&&(E.title=f.title),E.tagName==="IMG"&&(E.alt=f.alt||"")),dt(E,v),f.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(E,"focus",this._panOnFocus,this);var R=f.icon.createShadow(this._shadow),F=!1;R!==this._shadow&&(this._removeShadow(),F=!0),R&&(dt(R,v),R.alt=""),this._shadow=R,f.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&F&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),Kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Kt(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Xt(this._icon,f),this._shadow&&Xt(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sc)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sc(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&on(this._icon,f),this._shadow&&on(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var v=this.options.icon.options,E=v.iconSize?le(v.iconSize):le(0,0),D=v.iconAnchor?le(v.iconAnchor):le(0,0);f.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:E.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function j0(f,v){return new kc(f,v)}var ra=Ni.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return w(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ll=ra.extend({options:{fill:!0,radius:10},initialize:function(f,v){w(this,v),this._latlng=ue(f),this._radius=this.options.radius},setLatLng:function(f){var v=this._latlng;return this._latlng=ue(f),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var v=f&&f.radius||this._radius;return ra.prototype.setStyle.call(this,f),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,v=this._radiusY||f,E=this._clickTolerance(),D=[f+E,v+E];this._pxBounds=new z(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function T0(f,v){return new ll(f,v)}var qu=ll.extend({initialize:function(f,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),w(this,v),this._latlng=ue(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:ra.prototype.setStyle,_project:function(){var f=this._latlng.lng,v=this._latlng.lat,E=this._map,D=E.options.crs;if(D.distance===ke.distance){var R=Math.PI/180,F=this._mRadius/ke.R/R,ee=E.project([v+F,f]),fe=E.project([v-F,f]),be=ee.add(fe).divideBy(2),je=E.unproject(be).lat,$e=Math.acos((Math.cos(F*R)-Math.sin(v*R)*Math.sin(je*R))/(Math.cos(v*R)*Math.cos(je*R)))/R;(isNaN($e)||$e===0)&&($e=F/Math.cos(Math.PI/180*v)),this._point=be.subtract(E.getPixelOrigin()),this._radius=isNaN($e)?0:be.x-E.project([je,f-$e]).x,this._radiusY=be.y-ee.y}else{var Ze=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Ze).x}this._updateBounds()}});function A0(f,v,E){return new qu(f,v,E)}var La=ra.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,v){w(this,v),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var v=1/0,E=null,D=xc,R,F,ee=0,fe=this._parts.length;ee<fe;ee++)for(var be=this._parts[ee],je=1,$e=be.length;je<$e;je++){R=be[je-1],F=be[je];var Ze=D(f,R,F,!0);Ze<v&&(v=Ze,E=D(f,R,F))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return al(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,v){return v=v||this._defaultShape(),f=ue(f),v.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ne,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return oi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var v=[],E=oi(f),D=0,R=f.length;D<R;D++)E?(v[D]=ue(f[D]),this._bounds.extend(v[D])):v[D]=this._convertLatLngs(f[D]);return v},_project:function(){var f=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),v=new Q(f,f);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(f,v,E){var D=f[0]instanceof ce,R=f.length,F,ee;if(D){for(ee=[],F=0;F<R;F++)ee[F]=this._map.latLngToLayerPoint(f[F]),E.extend(ee[F]);v.push(ee)}else for(F=0;F<R;F++)this._projectLatlngs(f[F],v,E)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,D,R,F,ee,fe,be;for(E=0,R=0,F=this._rings.length;E<F;E++)for(be=this._rings[E],D=0,ee=be.length;D<ee-1;D++)fe=_0(be[D],be[D+1],f,D,!0),fe&&(v[R]=v[R]||[],v[R].push(fe[0]),(fe[1]!==be[D+1]||D===ee-2)&&(v[R].push(fe[1]),R++))}},_simplifyPoints:function(){for(var f=this._parts,v=this.options.smoothFactor,E=0,D=f.length;E<D;E++)f[E]=y0(f[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,v){var E,D,R,F,ee,fe,be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(E=0,F=this._parts.length;E<F;E++)for(fe=this._parts[E],D=0,ee=fe.length,R=ee-1;D<ee;R=D++)if(!(!v&&D===0)&&v0(f,fe[R],fe[D])<=be)return!0;return!1}});function hw(f,v){return new La(f,v)}La._flat=Hu;var cl=La.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return b0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var v=La.prototype._convertLatLngs.call(this,f),E=v.length;return E>=2&&v[0]instanceof ce&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(f){La.prototype._setLatLngs.call(this,f),oi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return oi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,v=this.options.weight,E=new Q(v,v);if(f=new z(f.min.subtract(E),f.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,R=this._rings.length,F;D<R;D++)F=g0(this._rings[D],f,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var v=!1,E,D,R,F,ee,fe,be,je;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(F=0,be=this._parts.length;F<be;F++)for(E=this._parts[F],ee=0,je=E.length,fe=je-1;ee<je;fe=ee++)D=E[ee],R=E[fe],D.y>f.y!=R.y>f.y&&f.x<(R.x-D.x)*(f.y-D.y)/(R.y-D.y)+D.x&&(v=!v);return v||La.prototype._containsPoint.call(this,f,!0)}});function mw(f,v){return new cl(f,v)}var Ia=ta.extend({initialize:function(f,v){w(this,v),this._layers={},f&&this.addData(f)},addData:function(f){var v=j(f)?f:f.features,E,D,R;if(v){for(E=0,D=v.length;E<D;E++)R=v[E],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var F=this.options;if(F.filter&&!F.filter(f))return this;var ee=ur(f,F);return ee?(ee.feature=Vu(f),ee.defaultOptions=ee.options,this.resetStyle(ee),F.onEachFeature&&F.onEachFeature(f,ee),this.addLayer(ee)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(v){this._setLayerStyle(v,f)},this)},_setLayerStyle:function(f,v){f.setStyle&&(typeof v=="function"&&(v=v(f.feature)),f.setStyle(v))}});function ur(f,v){var E=f.type==="Feature"?f.geometry:f,D=E?E.coordinates:null,R=[],F=v&&v.pointToLayer,ee=v&&v.coordsToLatLng||Ku,fe,be,je,$e;if(!D&&!E)return null;switch(E.type){case"Point":return fe=ee(D),ul(F,f,fe,v);case"MultiPoint":for(je=0,$e=D.length;je<$e;je++)fe=ee(D[je]),R.push(ul(F,f,fe,v));return new ta(R);case"LineString":case"MultiLineString":return be=Ec(D,E.type==="LineString"?0:1,ee),new La(be,v);case"Polygon":case"MultiPolygon":return be=Ec(D,E.type==="Polygon"?1:2,ee),new cl(be,v);case"GeometryCollection":for(je=0,$e=E.geometries.length;je<$e;je++){var Ze=ur({geometry:E.geometries[je],type:"Feature",properties:f.properties},v);Ze&&R.push(Ze)}return new ta(R);case"FeatureCollection":for(je=0,$e=E.features.length;je<$e;je++){var gt=ur(E.features[je],v);gt&&R.push(gt)}return new ta(R);default:throw new Error("Invalid GeoJSON object.")}}function ul(f,v,E,D){return f?f(v,E):new kc(E,D&&D.markersInheritOptions&&D)}function Ku(f){return new ce(f[1],f[0],f[2])}function Ec(f,v,E){for(var D=[],R=0,F=f.length,ee;R<F;R++)ee=v?Ec(f[R],v-1,E):(E||Ku)(f[R]),D.push(ee);return D}function Wu(f,v){return f=ue(f),f.alt!==void 0?[b(f.lng,v),b(f.lat,v),b(f.alt,v)]:[b(f.lng,v),b(f.lat,v)]}function jc(f,v,E,D){for(var R=[],F=0,ee=f.length;F<ee;F++)R.push(v?jc(f[F],oi(f[F])?0:v-1,E,D):Wu(f[F],D));return!v&&E&&R.length>0&&R.push(R[0].slice()),R}function bo(f,v){return f.feature?i({},f.feature,{geometry:v}):Vu(v)}function Vu(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var yo={toGeoJSON:function(f){return bo(this,{type:"Point",coordinates:Wu(this.getLatLng(),f)})}};kc.include(yo),qu.include(yo),ll.include(yo),La.include({toGeoJSON:function(f){var v=!oi(this._latlngs),E=jc(this._latlngs,v?1:0,!1,f);return bo(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),cl.include({toGeoJSON:function(f){var v=!oi(this._latlngs),E=v&&!oi(this._latlngs[0]),D=jc(this._latlngs,E?2:v?1:0,!0,f);return v||(D=[D]),bo(this,{type:(E?"Multi":"")+"Polygon",coordinates:D})}}),sl.include({toMultiPoint:function(f){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(f).geometry.coordinates)}),bo(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(f){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(f);var E=v==="GeometryCollection",D=[];return this.eachLayer(function(R){if(R.toGeoJSON){var F=R.toGeoJSON(f);if(E)D.push(F.geometry);else{var ee=Vu(F);ee.type==="FeatureCollection"?D.push.apply(D,ee.features):D.push(ee)}}}),E?bo(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function Zu(f,v){return new Ia(f,v)}var Tc=Zu,dl=Ni.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,v,E){this._url=f,this._bounds=re(v),w(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Qn(this._image),this},bringToBack:function(){return this._map&&Jo(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=re(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",v=this._image=f?this._url:xt("img");if(dt(v,"leaflet-image-layer"),this._zoomAnimated&&dt(v,"leaflet-zoom-animated"),this.options.className&&dt(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(f){var v=this._map.getZoomScale(f.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Da(this._image,E,v)},_reset:function(){var f=this._image,v=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Xt(f,v.min),f.style.width=E.x+"px",f.style.height=E.y+"px"},_updateOpacity:function(){on(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),N0=function(f,v,E){return new dl(f,v,E)},vo=dl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",v=this._image=f?this._url:xt("video");if(dt(v,"leaflet-image-layer"),this._zoomAnimated&&dt(v,"leaflet-zoom-animated"),this.options.className&&dt(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=o(this.fire,this,"load"),f){for(var E=v.getElementsByTagName("source"),D=[],R=0;R<E.length;R++)D.push(E[R].src);this._url=E.length>0?D:[v.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var ee=xt("source");ee.src=this._url[F],v.appendChild(ee)}}});function fl(f,v,E){return new vo(f,v,E)}var Xu=dl.extend({_initImage:function(){var f=this._image=this._url;dt(f,"leaflet-image-layer"),this._zoomAnimated&&dt(f,"leaflet-zoom-animated"),this.options.className&&dt(f,this.options.className),f.onselectstart=p,f.onmousemove=p}});function O0(f,v,E){return new Xu(f,v,E)}var dr=Ni.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,v){f&&(f instanceof ce||j(f))?(this._latlng=ue(f),w(this,v)):(w(this,f),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&on(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&on(this._container,1),this.bringToFront(),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(on(this._container,0),this._removeTimeout=setTimeout(o(Kt,void 0,this._container),200)):Kt(this._container),this.options.interactive&&(dn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=ue(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qn(this._container),this},bringToBack:function(){return this._map&&Jo(this._container),this},_prepareOpen:function(f){var v=this._source;if(!v._map)return!1;if(v instanceof ta){v=null;var E=this._source._layers;for(var D in E)if(E[D]._map){v=E[D];break}if(!v)return!1;this._source=v}if(!f)if(v.getCenter)f=v.getCenter();else if(v.getLatLng)f=v.getLatLng();else if(v.getBounds)f=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")f.innerHTML=v;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),v=le(this.options.offset),E=this._getAnchor();this._zoomAnimated?Xt(this._container,f.add(E)):v=v.add(f).add(E);var D=this._containerBottom=-v.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=D+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});kt.include({_initOverlay:function(f,v,E,D){var R=v;return R instanceof f||(R=new f(D).setContent(v)),E&&R.setLatLng(E),R}}),Ni.include({_initOverlay:function(f,v,E,D){var R=E;return R instanceof f?(w(R,D),R._source=this):(R=v&&!D?v:new f(D,this),R.setContent(E)),R}});var Ac=dr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,dr.prototype.openOn.call(this,f)},onAdd:function(f){dr.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ra||this._source.on("preclick",Ai))},onRemove:function(f){dr.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ra||this._source.off("preclick",Ai))},getEvents:function(){var f=dr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",v=this._container=xt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=xt("div",f+"-content-wrapper",v);if(this._contentNode=xt("div",f+"-content",E),es(v),Qi(this._contentNode),lt(v,"contextmenu",Ai),this._tipContainer=xt("div",f+"-tip-container",v),this._tip=xt("div",f+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=xt("a",f+"-close-button",v);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',lt(D,"click",function(R){An(R),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,v=f.style;v.width="",v.whiteSpace="nowrap";var E=f.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var D=f.offsetHeight,R=this.options.maxHeight,F="leaflet-popup-scrolled";R&&D>R?(v.height=R+"px",dt(f,F)):dn(f,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),E=this._getAnchor();Xt(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,v=parseInt(fc(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,D=this._containerWidth,R=new Q(this._containerLeft,-E-this._containerBottom);R._add(mo(this._container));var F=f.layerPointToContainerPoint(R),ee=le(this.options.autoPanPadding),fe=le(this.options.autoPanPaddingTopLeft||ee),be=le(this.options.autoPanPaddingBottomRight||ee),je=f.getSize(),$e=0,Ze=0;F.x+D+be.x>je.x&&($e=F.x+D-je.x+be.x),F.x-$e-fe.x<0&&($e=F.x-fe.x),F.y+E+be.y>je.y&&(Ze=F.y+E-je.y+be.y),F.y-Ze-fe.y<0&&(Ze=F.y-fe.y),($e||Ze)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([$e,Ze]))}},_getAnchor:function(){return le(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),C0=function(f,v){return new Ac(f,v)};kt.mergeOptions({closePopupOnClick:!0}),kt.include({openPopup:function(f,v,E){return this._initOverlay(Ac,f,v,E).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Ni.include({bindPopup:function(f,v){return this._popup=this._initOverlay(Ac,this._popup,f,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof ta||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){po(f);var v=f.layer||f.target;if(this._popup._source===v&&!(v instanceof ra)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=v,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Nc=dr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){dr.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){dr.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=dr.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",v=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var v,E,D=this._map,R=this._container,F=D.latLngToContainerPoint(D.getCenter()),ee=D.layerPointToContainerPoint(f),fe=this.options.direction,be=R.offsetWidth,je=R.offsetHeight,$e=le(this.options.offset),Ze=this._getAnchor();fe==="top"?(v=be/2,E=je):fe==="bottom"?(v=be/2,E=0):fe==="center"?(v=be/2,E=je/2):fe==="right"?(v=0,E=je/2):fe==="left"?(v=be,E=je/2):ee.x<F.x?(fe="right",v=0,E=je/2):(fe="left",v=be+($e.x+Ze.x)*2,E=je/2),f=f.subtract(le(v,E,!0)).add($e).add(Ze),dn(R,"leaflet-tooltip-right"),dn(R,"leaflet-tooltip-left"),dn(R,"leaflet-tooltip-top"),dn(R,"leaflet-tooltip-bottom"),dt(R,"leaflet-tooltip-"+fe),Xt(R,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&on(this._container,f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(v)},_getAnchor:function(){return le(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pw=function(f,v){return new Nc(f,v)};kt.include({openTooltip:function(f,v,E){return this._initOverlay(Nc,f,v,E).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Ni.include({bindTooltip:function(f,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nc,this._tooltip,f,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var v=f?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof ta||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&(lt(v,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),lt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var v=f.latlng,E,D;this._tooltip.options.sticky&&f.originalEvent&&(E=this._map.mouseEventToContainerPoint(f.originalEvent),D=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(v)}});var M0=na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var v=f&&f.tagName==="DIV"?f:document.createElement("div"),E=this.options;if(E.html instanceof Element?(ii(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var D=le(E.bgPos);v.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function gw(f){return new M0(f)}na.Default=_c;var hl=Ni.extend({options:{tileSize:256,opacity:1,updateWhenIdle:We.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){w(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Kt(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Jo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof Q?f:new Q(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var v=this.getPane().children,E=-f(-1/0,1/0),D=0,R=v.length,F;D<R;D++)F=v[D].style.zIndex,v[D]!==this._container&&F&&(E=f(E,+F));isFinite(E)&&(this.options.zIndex=E+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!We.ielt9){on(this._container,this.options.opacity);var f=+new Date,v=!1,E=!1;for(var D in this._tiles){var R=this._tiles[D];if(!(!R.current||!R.loaded)){var F=Math.min(1,(f-R.loaded)/200);on(R.el,F),F<1?v=!0:(R.active?E=!0:this._onOpaqueTile(R),R.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,v=this.options.maxZoom;if(f!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===f?(this._levels[E].el.style.zIndex=v-Math.abs(f-E),this._onUpdateLevel(E)):(Kt(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var D=this._levels[f],R=this._map;return D||(D=this._levels[f]={},D.el=xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=v,D.origin=R.project(R.unproject(R.getPixelOrigin()),f).round(),D.zoom=f,this._setZoomTransform(D,R.getCenter(),R.getZoom()),p(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var f,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)v=this._tiles[f],v.retain=v.current;for(f in this._tiles)if(v=this._tiles[f],v.current&&!v.active){var D=v.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var v in this._tiles)this._tiles[v].coords.z===f&&this._removeTile(v)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Kt(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,v,E,D){var R=Math.floor(f/2),F=Math.floor(v/2),ee=E-1,fe=new Q(+R,+F);fe.z=+ee;var be=this._tileCoordsToKey(fe),je=this._tiles[be];return je&&je.active?(je.retain=!0,!0):(je&&je.loaded&&(je.retain=!0),ee>D?this._retainParent(R,F,ee,D):!1)},_retainChildren:function(f,v,E,D){for(var R=2*f;R<2*f+2;R++)for(var F=2*v;F<2*v+2;F++){var ee=new Q(R,F);ee.z=E+1;var fe=this._tileCoordsToKey(ee),be=this._tiles[fe];if(be&&be.active){be.retain=!0;continue}else be&&be.loaded&&(be.retain=!0);E+1<D&&this._retainChildren(R,F,E+1,D)}},_resetView:function(f){var v=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var v=this.options;return v.minNativeZoom!==void 0&&f<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<f?v.maxNativeZoom:f},_setView:function(f,v,E,D){var R=Math.round(v);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var F=this.options.updateWhenZooming&&R!==this._tileZoom;(!D||F)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(f),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(f,v)},_setZoomTransforms:function(f,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],f,v)},_setZoomTransform:function(f,v,E){var D=this._map.getZoomScale(E,f.zoom),R=f.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(v,E)).round();We.any3d?Da(f.el,R,D):Xt(f.el,R)},_resetGrid:function(){var f=this._map,v=f.options.crs,E=this._tileSize=this.getTileSize(),D=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,v.wrapLng[0]],D).x/E.x),Math.ceil(f.project([0,v.wrapLng[1]],D).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([v.wrapLat[0],0],D).y/E.x),Math.ceil(f.project([v.wrapLat[1],0],D).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),D=v.getZoomScale(E,this._tileZoom),R=v.project(f,this._tileZoom).floor(),F=v.getSize().divideBy(D*2);return new z(R.subtract(F),R.add(F))},_update:function(f){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(f===void 0&&(f=v.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(f),R=this._pxBoundsToTileRange(D),F=R.getCenter(),ee=[],fe=this.options.keepBuffer,be=new z(R.getBottomLeft().subtract([fe,-fe]),R.getTopRight().add([fe,-fe]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var je in this._tiles){var $e=this._tiles[je].coords;($e.z!==this._tileZoom||!be.contains(new Q($e.x,$e.y)))&&(this._tiles[je].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(f,E);return}for(var Ze=R.min.y;Ze<=R.max.y;Ze++)for(var gt=R.min.x;gt<=R.max.x;gt++){var er=new Q(gt,Ze);if(er.z=this._tileZoom,!!this._isValidTile(er)){var Nn=this._tiles[this._tileCoordsToKey(er)];Nn?Nn.current=!0:ee.push(er)}}if(ee.sort(function(Ct,Mt){return Ct.distanceTo(F)-Mt.distanceTo(F)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Yr=document.createDocumentFragment();for(gt=0;gt<ee.length;gt++)this._addTile(ee[gt],Yr);this._level.el.appendChild(Yr)}}}},_isValidTile:function(f){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(f.x<E.min.x||f.x>E.max.x)||!v.wrapLat&&(f.y<E.min.y||f.y>E.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(f);return re(this.options.bounds).overlaps(D)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var v=this._map,E=this.getTileSize(),D=f.scaleBy(E),R=D.add(E),F=v.unproject(D,f.z),ee=v.unproject(R,f.z);return[F,ee]},_tileCoordsToBounds:function(f){var v=this._tileCoordsToNwSe(f),E=new ne(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var v=f.split(":"),E=new Q(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(f){var v=this._tiles[f];v&&(Kt(v.el),delete this._tiles[f],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){dt(f,"leaflet-tile");var v=this.getTileSize();f.style.width=v.x+"px",f.style.height=v.y+"px",f.onselectstart=p,f.onmousemove=p,We.ielt9&&this.options.opacity<1&&on(f,this.options.opacity)},_addTile:function(f,v){var E=this._getTilePos(f),D=this._tileCoordsToKey(f),R=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(R),this.createTile.length<2&&H(o(this._tileReady,this,f,null,R)),Xt(R,E),this._tiles[D]={el:R,coords:f,current:!0},v.appendChild(R),this.fire("tileloadstart",{tile:R,coords:f})},_tileReady:function(f,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:f});var D=this._tileCoordsToKey(f);E=this._tiles[D],E&&(E.loaded=+new Date,this._map._fadeAnimated?(on(E.el,0),B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(dt(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),We.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var v=new Q(this._wrapX?h(f.x,this._wrapX):f.x,this._wrapY?h(f.y,this._wrapY):f.y);return v.z=f.z,v},_pxBoundsToTileRange:function(f){var v=this.getTileSize();return new z(f.min.unscaleBy(v).floor(),f.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function D0(f){return new hl(f)}var xo=hl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,v){this._url=f,v=w(this,v),v.detectRetina&&We.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,v){return this._url===f&&v===void 0&&(v=!0),this._url=f,v||this.redraw(),this},createTile:function(f,v){var E=document.createElement("img");return lt(E,"load",o(this._tileOnLoad,this,v,E)),lt(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(f),E},getTileUrl:function(f){var v={r:We.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-f.y;this.options.tms&&(v.y=E),v["-y"]=E}return O(this._url,i(v,this.options))},_tileOnLoad:function(f,v){We.ielt9?setTimeout(o(f,this,null,v),0):f(null,v)},_tileOnError:function(f,v,E){var D=this.options.errorTileUrl;D&&v.getAttribute("src")!==D&&(v.src=D),f(E,v)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,D=this.options.zoomOffset;return E&&(f=v-f),f+D},_getSubdomain:function(f){var v=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var f,v;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(v=this._tiles[f].el,v.onload=p,v.onerror=p,!v.complete)){v.src=M;var E=this._tiles[f].coords;Kt(v),delete this._tiles[f],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(f){var v=this._tiles[f];if(v)return v.el.setAttribute("src",M),hl.prototype._removeTile.call(this,f)},_tileReady:function(f,v,E){if(!(!this._map||E&&E.getAttribute("src")===M))return hl.prototype._tileReady.call(this,f,v,E)}});function si(f,v){return new xo(f,v)}var Oc=xo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,v){this._url=f;var E=i({},this.defaultWmsParams);for(var D in v)D in this.options||(E[D]=v[D]);v=w(this,v);var R=v.detectRetina&&We.retina?2:1,F=this.getTileSize();E.width=F.x*R,E.height=F.y*R,this.wmsParams=E},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,xo.prototype.onAdd.call(this,f)},getTileUrl:function(f){var v=this._tileCoordsToNwSe(f),E=this._crs,D=K(E.project(v[0]),E.project(v[1])),R=D.min,F=D.max,ee=(this._wmsVersion>=1.3&&this._crs===ch?[R.y,R.x,F.y,F.x]:[R.x,R.y,F.x,F.y]).join(","),fe=xo.prototype.getTileUrl.call(this,f);return fe+_(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(f,v){return i(this.wmsParams,f),v||this.redraw(),this}});function li(f,v){return new Oc(f,v)}xo.WMS=Oc,si.wms=li;var Lr=Ni.extend({options:{padding:.1},initialize:function(f){w(this,f),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,v){var E=this._map.getZoomScale(v,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,v),F=D.multiplyBy(-E).add(R).subtract(this._map._getNewPixelOrigin(f,v));We.any3d?Da(this._container,F,E):Xt(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-f)).round();this._bounds=new z(E,E.add(v.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ju=Lr.extend({options:{tolerance:0},getEvents:function(){var f=Lr.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");lt(f,"mousemove",this._onMouseMove,this),lt(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Kt(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var v in this._layers)f=this._layers[v],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var f=this._bounds,v=this._container,E=f.getSize(),D=We.retina?2:1;Xt(v,f.min),v.width=D*E.x,v.height=D*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",We.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[u(f)]=f;var v=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var v=f._order,E=v.next,D=v.prev;E?E.prev=D:this._drawLast=D,D?D.next=E:this._drawFirst=E,delete f._order,delete this._layers[u(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var v=f.options.dashArray.split(/[, ]+/),E=[],D,R;for(R=0;R<v.length;R++){if(D=Number(v[R]),isNaN(D))return;E.push(D)}f.options._dashArray=E}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var v=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(f._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(f._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var v=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)f=D.layer,(!v||f._pxBounds&&f._pxBounds.intersects(v))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,v){if(this._drawing){var E,D,R,F,ee=f._parts,fe=ee.length,be=this._ctx;if(fe){for(be.beginPath(),E=0;E<fe;E++){for(D=0,R=ee[E].length;D<R;D++)F=ee[E][D],be[D?"lineTo":"moveTo"](F.x,F.y);v&&be.closePath()}this._fillStroke(be,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var v=f._point,E=this._ctx,D=Math.max(Math.round(f._radius),1),R=(Math.max(Math.round(f._radiusY),1)||D)/D;R!==1&&(E.save(),E.scale(1,R)),E.beginPath(),E.arc(v.x,v.y/R,D,0,Math.PI*2,!1),R!==1&&E.restore(),this._fillStroke(E,f)}},_fillStroke:function(f,v){var E=v.options;E.fill&&(f.globalAlpha=E.fillOpacity,f.fillStyle=E.fillColor||E.color,f.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(f.setLineDash&&f.setLineDash(v.options&&v.options._dashArray||[]),f.globalAlpha=E.opacity,f.lineWidth=E.weight,f.strokeStyle=E.color,f.lineCap=E.lineCap,f.lineJoin=E.lineJoin,f.stroke())},_onClick:function(f){for(var v=this._map.mouseEventToLayerPoint(f),E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(E))&&(D=E);this._fireEvent(D?[D]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,v)}},_handleMouseOut:function(f){var v=this._hoveredLayer;v&&(dn(this._container,"leaflet-interactive"),this._fireEvent([v],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,v){if(!this._mouseHoverThrottled){for(var E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(D=E);D!==this._hoveredLayer&&(this._handleMouseOut(f),D&&(dt(this._container,"leaflet-interactive"),this._fireEvent([D],f,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,v,E){this._map._fireDOMEvent(v,E||v.type,f)},_bringToFront:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(E)E.prev=D;else return;D?D.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(f)}},_bringToBack:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(D)D.next=E;else return;E?E.prev=D:D&&(this._drawLast=D),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(f)}}});function Cc(f){return We.canvas?new Ju(f):null}var wo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),uh={_initContainer:function(){this._container=xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lr.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var v=f._container=wo("shape");dt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",f._path=wo("path"),v.appendChild(f._path),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){var v=f._container;this._container.appendChild(v),f.options.interactive&&f.addInteractiveTarget(v)},_removePath:function(f){var v=f._container;Kt(v),f.removeInteractiveTarget(v),delete this._layers[u(f)]},_updateStyle:function(f){var v=f._stroke,E=f._fill,D=f.options,R=f._container;R.stroked=!!D.stroke,R.filled=!!D.fill,D.stroke?(v||(v=f._stroke=wo("stroke")),R.appendChild(v),v.weight=D.weight+"px",v.color=D.color,v.opacity=D.opacity,D.dashArray?v.dashStyle=j(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=D.lineCap.replace("butt","flat"),v.joinstyle=D.lineJoin):v&&(R.removeChild(v),f._stroke=null),D.fill?(E||(E=f._fill=wo("fill")),R.appendChild(E),E.color=D.fillColor||D.color,E.opacity=D.fillOpacity):E&&(R.removeChild(E),f._fill=null)},_updateCircle:function(f){var v=f._point.round(),E=Math.round(f._radius),D=Math.round(f._radiusY||E);this._setPath(f,f._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+D+" 0,"+65535*360)},_setPath:function(f,v){f._path.v=v},_bringToFront:function(f){Qn(f._container)},_bringToBack:function(f){Jo(f._container)}},ia=We.vml?wo:tt,ml=Lr.extend({_initContainer:function(){this._container=ia("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ia("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Kt(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var f=this._bounds,v=f.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Xt(E,f.min),E.setAttribute("viewBox",[f.min.x,f.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(f){var v=f._path=ia("path");f.options.className&&dt(v,f.options.className),f.options.interactive&&dt(v,"leaflet-interactive"),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Kt(f._path),f.removeInteractiveTarget(f._path),delete this._layers[u(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var v=f._path,E=f.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(f,v){this._setPath(f,Ne(f._parts,v))},_updateCircle:function(f){var v=f._point,E=Math.max(Math.round(f._radius),1),D=Math.max(Math.round(f._radiusY),1)||E,R="a"+E+","+D+" 0 1,0 ",F=f._empty()?"M0 0":"M"+(v.x-E)+","+v.y+R+E*2+",0 "+R+-E*2+",0 ";this._setPath(f,F)},_setPath:function(f,v){f._path.setAttribute("d",v)},_bringToFront:function(f){Qn(f._path)},_bringToBack:function(f){Jo(f._path)}});We.vml&&ml.include(uh);function Mc(f){return We.svg||We.vml?new ml(f):null}kt.include({getRenderer:function(f){var v=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var v=this._paneRenderers[f];return v===void 0&&(v=this._createRenderer({pane:f}),this._paneRenderers[f]=v),v},_createRenderer:function(f){return this.options.preferCanvas&&Cc(f)||Mc(f)}});var ns=cl.extend({initialize:function(f,v){cl.prototype.initialize.call(this,this._boundsToLatLngs(f),v)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=re(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function bw(f,v){return new ns(f,v)}ml.create=ia,ml.pointsToPath=Ne,Ia.geometryToLayer=ur,Ia.coordsToLatLng=Ku,Ia.coordsToLatLngs=Ec,Ia.latLngToCoords=Wu,Ia.latLngsToCoords=jc,Ia.getFeature=bo,Ia.asFeature=Vu,kt.mergeOptions({boxZoom:!0});var Ir=ea.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),el(),$u(),this._startPoint=this._map.mouseEventToContainerPoint(f),lt(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=xt("div","leaflet-zoom-box",this._container),dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var v=new z(this._point,this._startPoint),E=v.getSize();Xt(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Kt(this._box),dn(this._container,"leaflet-crosshair")),Ji(),mc(),zt(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kt.addInitHook("addHandler","boxZoom",Ir),kt.mergeOptions({doubleClickZoom:!0});var Qu=ea.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var v=this._map,E=v.getZoom(),D=v.options.zoomDelta,R=f.originalEvent.shiftKey?E-D:E+D;v.options.doubleClickZoom==="center"?v.setZoom(R):v.setZoomAround(f.containerPoint,R)}});kt.addInitHook("addHandler","doubleClickZoom",Qu),kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var aa=ea.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new go(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){dn(this._map._container,"leaflet-grab"),dn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=re(this._map.options.maxBounds);this._offsetLimit=K(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,v){return f-(f-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;f.x<v.min.x&&(f.x=this._viscousLimit(f.x,v.min.x)),f.y<v.min.y&&(f.y=this._viscousLimit(f.y,v.min.y)),f.x>v.max.x&&(f.x=this._viscousLimit(f.x,v.max.x)),f.y>v.max.y&&(f.y=this._viscousLimit(f.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,v=Math.round(f/2),E=this._initialWorldOffset,D=this._draggable._newPos.x,R=(D-v+E)%f+v-E,F=(D+v+E)%f-v-E,ee=Math.abs(R+E)<Math.abs(F+E)?R:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(f){var v=this._map,E=v.options,D=!E.inertia||f.noInertia||this._times.length<2;if(v.fire("dragend",f),D)v.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,ee=E.easeLinearity,fe=R.multiplyBy(ee/F),be=fe.distanceTo([0,0]),je=Math.min(E.inertiaMaxSpeed,be),$e=fe.multiplyBy(je/be),Ze=je/(E.inertiaDeceleration*ee),gt=$e.multiplyBy(-Ze/2).round();!gt.x&&!gt.y?v.fire("moveend"):(gt=v._limitOffset(gt,v.options.maxBounds),H(function(){v.panBy(gt,{duration:Ze,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});kt.addInitHook("addHandler","dragging",aa),kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dh=ea.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),lt(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,v=document.documentElement,E=f.scrollTop||v.scrollTop,D=f.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(D,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var v=this._panKeys={},E=this.keyCodes,D,R;for(D=0,R=E.left.length;D<R;D++)v[E.left[D]]=[-1*f,0];for(D=0,R=E.right.length;D<R;D++)v[E.right[D]]=[f,0];for(D=0,R=E.down.length;D<R;D++)v[E.down[D]]=[0,f];for(D=0,R=E.up.length;D<R;D++)v[E.up[D]]=[0,-1*f]},_setZoomDelta:function(f){var v=this._zoomKeys={},E=this.keyCodes,D,R;for(D=0,R=E.zoomIn.length;D<R;D++)v[E.zoomIn[D]]=f;for(D=0,R=E.zoomOut.length;D<R;D++)v[E.zoomOut[D]]=-f},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var v=f.keyCode,E=this._map,D;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(D=this._panKeys[v],f.shiftKey&&(D=le(D).multiplyBy(3)),E.options.maxBounds&&(D=E._limitOffset(le(D),E.options.maxBounds)),E.options.worldCopyJump){var R=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(D)));E.panTo(R)}else E.panBy(D)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;po(f)}}});kt.addInitHook("addHandler","keyboard",dh),kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dc=ea.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var v=Sr(f),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var D=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),po(f)},_performZoom:function(){var f=this._map,v=f.getZoom(),E=this._map.options.zoomSnap||0;f._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,F=E?Math.ceil(R/E)*E:R,ee=f._limitZoom(v+(this._delta>0?F:-F))-v;this._delta=0,this._startTime=null,ee&&(f.options.scrollWheelZoom==="center"?f.setZoom(v+ee):f.setZoomAround(this._lastMousePos,v+ee))}});kt.addInitHook("addHandler","scrollWheelZoom",Dc);var rs=600;kt.mergeOptions({tapHold:We.touchNative&&We.safari&&We.mobile,tapTolerance:15});var ed=ea.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var v=f.touches[0];this._startPos=this._newPos=new Q(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(lt(document,"touchend",An),lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),rs),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){zt(document,"touchend",An),zt(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(f){var v=f.touches[0];this._newPos=new Q(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,v){var E=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});kt.addInitHook("addHandler","tapHold",ed),kt.mergeOptions({touchZoom:We.touch,bounceAtZoomLimits:!0});var fh=ea.extend({addHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){dn(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var v=this._map;if(!(!f.touches||f.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(D)._divideBy(2))),this._startDist=E.distanceTo(D),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),An(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]),R=E.distanceTo(D)/this._startDist;if(this._zoom=v.getScaleZoom(R,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&R<1||this._zoom>v.getMaxZoom()&&R>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var F=E._add(D)._divideBy(2)._subtract(this._centerPoint);if(R===1&&F.x===0&&F.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ee=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(ee,this,!0),An(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kt.addInitHook("addHandler","touchZoom",fh),kt.BoxZoom=Ir,kt.DoubleClickZoom=Qu,kt.Drag=aa,kt.Keyboard=dh,kt.ScrollWheelZoom=Dc,kt.TapHold=ed,kt.TouchZoom=fh,n.Bounds=z,n.Browser=We,n.CRS=ge,n.Canvas=Ju,n.Circle=qu,n.CircleMarker=ll,n.Class=Z,n.Control=Gr,n.DivIcon=M0,n.DivOverlay=dr,n.DomEvent=Uu,n.DomUtil=rl,n.Draggable=go,n.Evented=J,n.FeatureGroup=ta,n.GeoJSON=Ia,n.GridLayer=hl,n.Handler=ea,n.Icon=na,n.ImageOverlay=dl,n.LatLng=ce,n.LatLngBounds=ne,n.Layer=Ni,n.LayerGroup=sl,n.LineUtil=dw,n.Map=kt,n.Marker=kc,n.Mixin=sw,n.Path=ra,n.Point=Q,n.PolyUtil=sh,n.Polygon=cl,n.Polyline=La,n.Popup=Ac,n.PosAnimation=il,n.Projection=S0,n.Rectangle=ns,n.Renderer=Lr,n.SVG=ml,n.SVGOverlay=Xu,n.TileLayer=xo,n.Tooltip=Nc,n.Transformation=Ee,n.Util=W,n.VideoOverlay=vo,n.bind=o,n.bounds=K,n.canvas=Cc,n.circle=A0,n.circleMarker=T0,n.control=Ra,n.divIcon=gw,n.extend=i,n.featureGroup=E0,n.geoJSON=Zu,n.geoJson=Tc,n.gridLayer=D0,n.icon=wc,n.imageOverlay=N0,n.latLng=ue,n.latLngBounds=re,n.layerGroup=fw,n.map=th,n.marker=j0,n.point=le,n.polygon=mw,n.polyline=hw,n.popup=C0,n.rectangle=bw,n.setOptions=w,n.stamp=u,n.svg=Mc,n.svgOverlay=O0,n.tileLayer=si,n.tooltip=pw,n.transformation=he,n.version=r,n.videoOverlay=fl;var hh=window.L;n.noConflict=function(){return window.L=hh,this},window.L=n}))})(km,km.exports)),km.exports}var RX=PX();const u1=Si(RX),Fg=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Kc(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function LX(e){const{buttonId:t,buttonInputId:n,modalId:r,closeMapId:i,mapCloseBtnId:a,searchBoxId:o,suggestionsId:l,mapId:u}=e.ids,d=e.initialCenter??{lat:37.5665,lon:126.978},h=Kc(n),p=Kc(t),b=Kc(r),y=Kc(a),k=Kc(o),w=Kc(l),_=i?Kc(i):null;let T=null,O=null,j=null;const C=B=>B.code==="Space"||B.key===" "||B.key==="Spacebar"||B.key==="Space",M=B=>{C(B)&&document.activeElement!==k&&(B.preventDefault(),B.stopPropagation(),k.focus())},P=()=>{b.style.display="flex",T?setTimeout(()=>T?.invalidateSize(),200):setTimeout(()=>{T=u1.map(u,{keyboard:!1}).setView([d.lat,d.lon],11),u1.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(T),T.invalidateSize()},0),b.addEventListener("keydown",M,!0),b.addEventListener("keyup",M,!0),k.focus()},I=()=>{b.style.display="none",k.value="",w.innerHTML="",j&&(window.clearTimeout(j),j=null),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0)},U=B=>{const W=B.dataset.name??"",Z=Number(B.dataset.lat??""),X=Number(B.dataset.lon??"");!Number.isFinite(Z)||!Number.isFinite(X)||!T||(O?O.setLatLng([Z,X]):O=u1.marker([Z,X]).addTo(T),T.flyTo([Z,X],14,{duration:.5}),h.value=W,h.dataset.lat=String(Z),h.dataset.lon=String(X),e.onSelected?.({name:W,lat:Z,lon:X}),w.innerHTML="",I())},V=()=>{j&&window.clearTimeout(j);const B=k.value.trim();if(!B){w.innerHTML="";return}j=window.setTimeout(async()=>{try{const W="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(B),Z=await fetch(W,{headers:{Accept:"application/json"}});if(!Z.ok)throw new Error(`HTTP ${Z.status}`);const X=await Z.json();if(!Array.isArray(X)||X.length===0){w.innerHTML='<li style="padding:8px"> </li>';return}const G=X.slice(0,12).map((J,Q)=>{const oe=J.display_name.split(",").slice(0,3).map(K=>K.trim()).join("  "),le="padding:8px;cursor:pointer;outline:none;",z=Q===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${Fg(oe)}"
                    data-lat="${Fg(J.lat)}"
                    data-lon="${Fg(J.lon)}"
                    data-active="${Q===0?"1":"0"}"
                    style="${le}${z}"
                  >${Fg(oe)}</li>`}).join("");w.innerHTML=G}catch(W){console.error(W),w.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},q=B=>{const W=B.target;W.tagName==="LI"&&U(W)},H=B=>{if(B.key==="Enter"){const W=w.querySelector('li[data-active="1"]')??w.querySelector("li");W&&U(W)}};return p.addEventListener("click",P),y.addEventListener("click",I),_&&_.addEventListener("click",I),k.addEventListener("input",V),k.addEventListener("keydown",H),w.addEventListener("click",q),()=>{p.removeEventListener("click",P),y.removeEventListener("click",I),_&&_.removeEventListener("click",I),k.removeEventListener("input",V),k.removeEventListener("keydown",H),w.removeEventListener("click",q),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0),j&&(window.clearTimeout(j),j=null),T&&(T.remove(),T=null)}}function Td(){return document.getElementById("suggestions")}function Kb(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,r)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${r}`)}),t}function d1(e,t){const n=Kb(e);if(n.length===0)return;const r=n.length;let i=t;i<0&&(i=r-1),i>=r&&(i=0),n.forEach(o=>{o.tabIndex=-1,o.setAttribute("aria-selected","false")});const a=n[i];a.tabIndex=0,a.setAttribute("aria-selected","true"),a.focus()}const IX='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';function $X({open:e,setOpen:t,setBtnText:n,setLocalValue:r,nameRef:i,latRef:a,lonRef:o,triggerBtnRef:l,onSelect:u}){S.useEffect(()=>{if(!e)return;const d=LX({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:j=>{n(""),r(j.name),i.current&&(i.current.value=j.name),a.current&&(a.current.value=String(j.lat)),o.current&&(o.current.value=String(j.lon)),u?.(j),t(!1)}}),h=document.getElementById("inputBirthPlaceBtn");h&&h.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const p=document.getElementById("mapModal");if(!p)return;const b=document.getElementById("searchBox"),y=Td();setTimeout(()=>b?.focus(),0);const k=j=>{if(j.key==="Escape"){j.preventDefault(),t(!1);return}if(j.key!=="Tab")return;const C=Td();if(C&&C.contains(document.activeElement))return;const M=Array.from(p.querySelectorAll(IX)).filter(V=>!V.hasAttribute("disabled")&&V.tabIndex!==-1);if(M.length===0)return;const P=M[0],I=M[M.length-1],U=document.activeElement;j.shiftKey?(U===P||!p.contains(U))&&(j.preventDefault(),I.focus()):(U===I||!p.contains(U))&&(j.preventDefault(),P.focus())};p.addEventListener("keydown",k);const w=j=>{if(j.key!=="ArrowDown")return;const C=Td();!C||Kb(C).length===0||j.preventDefault()};b?.addEventListener("keydown",w);const _=j=>{if(j.target.value.trim()===""){const M=Td();M&&(M.innerHTML="")}};b?.addEventListener("input",_);const T=j=>{const C=Td();if(!C)return;const M=Kb(C);if(M.length===0)return;const P=document.activeElement,I=P?M.indexOf(P):-1;if(I===-1)return;const U=V=>{j.preventDefault(),d1(C,I+V)};switch(j.key){case"Tab":j.preventDefault(),U(j.shiftKey?-1:1);break;case"ArrowDown":j.preventDefault(),U(1);break;case"ArrowUp":j.preventDefault(),U(-1);break;case"Home":j.preventDefault(),d1(C,0);break;case"End":j.preventDefault(),d1(C,M.length-1);break;case"Enter":case" ":j.preventDefault(),P.click();break;case"Backspace":j.preventDefault(),C.innerHTML="",b?.focus();break}j.stopPropagation()};let O=null;return y&&(y.addEventListener("keydown",T),O=new MutationObserver(()=>{const j=Td();!j||Kb(j).length}),O.observe(y,{childList:!0,subtree:!1})),()=>{p.removeEventListener("keydown",k),b?.removeEventListener("keydown",w),b?.removeEventListener("input",_),y&&y.removeEventListener("keydown",T),O?.disconnect(),d?.()}},[e,u,n,r,t,i,a,o]),S.useEffect(()=>{e||setTimeout(()=>l.current?.focus(),0)},[e,l])}function h4({onSelect:e,placeholderText:t=" ",buttonStyle:n,value:r}){const i=MX({placeholderText:t,value:r});return $X({...i,onSelect:e}),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:i.localValue&&i.localValue.trim()!==""?i.localValue:t}),g.jsx("button",{ref:i.triggerBtnRef,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>i.setOpen(!0),"aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":"mapModal",children:i.btnText}),g.jsx("input",{ref:i.nameRef,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:i.latRef,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:i.lonRef,type:"hidden",name:"birthPlace_lon",defaultValue:""}),i.open&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:" "}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>i.setOpen(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":  / seoul / / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"   ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}function pr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var BX=typeof Symbol=="function"&&Symbol.observable||"@@observable",iD=BX,f1=()=>Math.random().toString(36).substring(7).split("").join("."),zX={INIT:`@@redux/INIT${f1()}`,REPLACE:`@@redux/REPLACE${f1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${f1()}`},vy=zX;function gj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bj(e,t,n){if(typeof e!="function")throw new Error(pr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pr(1));return n(bj)(e,t)}let r=e,i=t,a=new Map,o=a,l=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((_,T)=>{o.set(T,_)}))}function h(){if(u)throw new Error(pr(3));return i}function p(_){if(typeof _!="function")throw new Error(pr(4));if(u)throw new Error(pr(5));let T=!0;d();const O=l++;return o.set(O,_),function(){if(T){if(u)throw new Error(pr(6));T=!1,d(),o.delete(O),a=null}}}function b(_){if(!gj(_))throw new Error(pr(7));if(typeof _.type>"u")throw new Error(pr(8));if(typeof _.type!="string")throw new Error(pr(17));if(u)throw new Error(pr(9));try{u=!0,i=r(i,_)}finally{u=!1}return(a=o).forEach(O=>{O()}),_}function y(_){if(typeof _!="function")throw new Error(pr(10));r=_,b({type:vy.REPLACE})}function k(){const _=p;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(pr(11));function O(){const C=T;C.next&&C.next(h())}return O(),{unsubscribe:_(O)}},[iD](){return this}}}return b({type:vy.INIT}),{dispatch:b,subscribe:p,getState:h,replaceReducer:y,[iD]:k}}function UX(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:vy.INIT})>"u")throw new Error(pr(12));if(typeof n(void 0,{type:vy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function m4(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{UX(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],b=n[p],y=o[p],k=b(y,l);if(typeof k>"u")throw l&&l.type,new Error(pr(14));d[p]=k,u=u||k!==y}return u=u||r.length!==Object.keys(o).length,u?d:o}}function aD(e,t){return function(...n){return t(e.apply(this,n))}}function oD(e,t){if(typeof e=="function")return aD(e,t);if(typeof e!="object"||e===null)throw new Error(pr(16));const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=aD(i,t))}return n}function Hm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function p4(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(pr(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},l=e.map(u=>u(o));return a=Hm(...l)(i.dispatch),{...i,dispatch:a}}}function g4(e){return gj(e)&&"type"in e&&typeof e.type=="string"}var h1={exports:{}},m1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function FX(){if(sD)return m1;sD=1;var e=xf();function t(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return m1.useSyncExternalStoreWithSelector=function(u,d,h,p,b){var y=i(null);if(y.current===null){var k={hasValue:!1,value:null};y.current=k}else k=y.current;y=o(function(){function _(M){if(!T){if(T=!0,O=M,M=p(M),b!==void 0&&k.hasValue){var P=k.value;if(b(P,M))return j=P}return j=M}if(P=j,n(O,M))return P;var I=p(M);return b!==void 0&&b(P,I)?(O=M,P):(O=M,j=I)}var T=!1,O,j,C=h===void 0?null:h;return[function(){return _(d())},C===null?void 0:function(){return _(C())}]},[d,h,p,b]);var w=r(u,y[0],y[1]);return a(function(){k.hasValue=!0,k.value=w},[w]),l(w),w},m1}var lD;function HX(){return lD||(lD=1,h1.exports=FX()),h1.exports}HX();var GX=S.version.startsWith("19"),YX=Symbol.for(GX?"react.transitional.element":"react.element"),qX=Symbol.for("react.portal"),KX=Symbol.for("react.fragment"),WX=Symbol.for("react.strict_mode"),VX=Symbol.for("react.profiler"),ZX=Symbol.for("react.consumer"),XX=Symbol.for("react.context"),b4=Symbol.for("react.forward_ref"),JX=Symbol.for("react.suspense"),QX=Symbol.for("react.suspense_list"),yj=Symbol.for("react.memo"),eJ=Symbol.for("react.lazy"),tJ=b4,nJ=yj;function rJ(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case YX:switch(e=e.type,e){case KX:case VX:case WX:case JX:case QX:return e;default:switch(e=e&&e.$$typeof,e){case XX:case b4:case eJ:case yj:return e;case ZX:return e;default:return t}}case qX:return t}}}function iJ(e){return rJ(e)===yj}function aJ(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let l=!1,u,d,h,p,b;function y(O,j){return u=O,d=j,h=e(u,d),p=t(r,d),b=n(h,p,d),l=!0,b}function k(){return h=e(u,d),t.dependsOnOwnProps&&(p=t(r,d)),b=n(h,p,d),b}function w(){return e.dependsOnOwnProps&&(h=e(u,d)),t.dependsOnOwnProps&&(p=t(r,d)),b=n(h,p,d),b}function _(){const O=e(u,d),j=!o(O,h);return h=O,j&&(b=n(h,p,d)),b}function T(O,j){const C=!a(j,d),M=!i(O,u,j,d);return u=O,d=j,C&&M?k():C?w():M?_():b}return function(j,C){return l?T(j,C):y(j,C)}}function oJ(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const a=t(e,i),o=n(e,i),l=r(e,i);return aJ(a,o,l,e,i)}function sJ(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...a)=>t(i(...a)))}return n}function l2(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function cD(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function y4(e,t){return function(r,{displayName:i}){const a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=e,a.dependsOnOwnProps=cD(e);let d=a(l,u);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=cD(d),d=a(l,u)),d},a}}function vj(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function lJ(e){return e&&typeof e=="object"?l2(t=>sJ(e,t)):e?typeof e=="function"?y4(e):vj(e,"mapDispatchToProps"):l2(t=>({dispatch:t}))}function cJ(e){return e?typeof e=="function"?y4(e):vj(e,"mapStateToProps"):l2(()=>({}))}function uJ(e,t,n){return{...n,...e,...t}}function dJ(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let a=!1,o;return function(u,d,h){const p=e(u,d,h);return a?i(p,o)||(o=p):(a=!0,o=p),o}}}function fJ(e){return e?typeof e=="function"?dJ(e):vj(e,"mergeProps"):()=>uJ}function hJ(e){e()}function mJ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){hJ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var uD={notify(){},get:()=>[]};function v4(e,t){let n,r=uD,i=0,a=!1;function o(w){h();const _=r.subscribe(w);let T=!1;return()=>{T||(T=!0,_(),p())}}function l(){r.notify()}function u(){k.onStateChange&&k.onStateChange()}function d(){return a}function h(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=mJ())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=uD)}function b(){a||(a=!0,h())}function y(){a&&(a=!1,p())}const k={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:b,tryUnsubscribe:y,getListeners:()=>r};return k}var pJ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gJ=pJ(),bJ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yJ=bJ(),vJ=()=>gJ||yJ?S.useLayoutEffect:S.useEffect,xy=vJ();function dD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Wb(e,t){if(dD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!dD(e[n[i]],t[n[i]]))return!1;return!0}var xJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_J={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},x4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SJ={[tJ]:_J,[nJ]:x4};function fD(e){return iJ(e)?x4:SJ[e.$$typeof]||xJ}var kJ=Object.defineProperty,EJ=Object.getOwnPropertyNames,hD=Object.getOwnPropertySymbols,jJ=Object.getOwnPropertyDescriptor,TJ=Object.getPrototypeOf,mD=Object.prototype;function c2(e,t){if(typeof t!="string"){if(mD){const a=TJ(t);a&&a!==mD&&c2(e,a)}let n=EJ(t);hD&&(n=n.concat(hD(t)));const r=fD(e),i=fD(t);for(let a=0;a<n.length;++a){const o=n[a];if(!wJ[o]&&!(i&&i[o])&&!(r&&r[o])){const l=jJ(t,o);try{kJ(e,o,l)}catch{}}}}return e}var AJ=Symbol.for("react-redux-context"),NJ=typeof globalThis<"u"?globalThis:{};function OJ(){if(!S.createContext)return{};const e=NJ[AJ]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var w4=OJ(),CJ=[null,null];function MJ(e,t,n){xy(()=>e(...t),n)}function DJ(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function PJ(e,t,n,r,i,a,o,l,u,d,h){if(!e)return()=>{};let p=!1,b=null;const y=()=>{if(p||!l.current)return;const w=t.getState();let _,T;try{_=r(w,i.current)}catch(O){T=O,b=O}T||(b=null),_===a.current?o.current||d():(a.current=_,u.current=_,o.current=!0,h())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,b)throw b}}function RJ(e,t){return e===t}function LJ(e,t,n,{pure:r,areStatesEqual:i=RJ,areOwnPropsEqual:a=Wb,areStatePropsEqual:o=Wb,areMergedPropsEqual:l=Wb,forwardRef:u=!1,context:d=w4}={}){const h=d,p=cJ(e),b=lJ(t),y=fJ(n),k=!!e;return _=>{const T=_.displayName||_.name||"Component",O=`Connect(${T})`,j={shouldHandleStateChanges:k,displayName:O,wrappedComponentName:T,WrappedComponent:_,initMapStateToProps:p,initMapDispatchToProps:b,initMergeProps:y,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:l};function C(I){const[U,V,q]=S.useMemo(()=>{const{reactReduxForwardedRef:he,...Le}=I;return[I.context,he,Le]},[I]),H=S.useMemo(()=>{let he=h;return U?.Consumer,he},[U,h]),B=S.useContext(H),W=!!I.store&&!!I.store.getState&&!!I.store.dispatch,Z=!!B&&!!B.store,X=W?I.store:B.store,G=Z?B.getServerState:X.getState,J=S.useMemo(()=>oJ(X.dispatch,j),[X]),[Q,oe]=S.useMemo(()=>{if(!k)return CJ;const he=v4(X,W?void 0:B.subscription),Le=he.notifyNestedSubs.bind(he);return[he,Le]},[X,W,B]),le=S.useMemo(()=>W?B:{...B,subscription:Q},[W,B,Q]),z=S.useRef(void 0),K=S.useRef(q),ne=S.useRef(void 0),re=S.useRef(!1),ce=S.useRef(!1),ue=S.useRef(void 0);xy(()=>(ce.current=!0,()=>{ce.current=!1}),[]);const ge=S.useMemo(()=>()=>ne.current&&q===K.current?ne.current:J(X.getState(),q),[X,q]),ke=S.useMemo(()=>Le=>Q?PJ(k,X,Q,J,K,z,re,ce,ne,oe,Le):()=>{},[Q]);MJ(DJ,[K,z,re,q,ne,oe]);let ie;try{ie=S.useSyncExternalStore(ke,ge,G?()=>J(G(),q):ge)}catch(he){throw ue.current&&(he.message+=`
The error may be correlated with this previous error:
${ue.current.stack}

`),he}xy(()=>{ue.current=void 0,ne.current=void 0,z.current=ie});const Ae=S.useMemo(()=>S.createElement(_,{...ie,ref:V}),[V,_,ie]);return S.useMemo(()=>k?S.createElement(H.Provider,{value:le},Ae):Ae,[H,Ae,le])}const P=S.memo(C);if(P.WrappedComponent=_,P.displayName=C.displayName=O,u){const U=S.forwardRef(function(q,H){return S.createElement(P,{...q,reactReduxForwardedRef:H})});return U.displayName=O,U.WrappedComponent=_,c2(U,_)}return c2(P,_)}}var _4=LJ;function IJ(e){const{children:t,context:n,serverState:r,store:i}=e,a=S.useMemo(()=>{const u=v4(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=S.useMemo(()=>i.getState(),[i]);xy(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=n||w4;return S.createElement(l.Provider,{value:a},t)}var S4=IJ,$J="Invariant failed";function BJ(e,t){throw new Error($J)}var Qa=function(t){var n=t.top,r=t.right,i=t.bottom,a=t.left,o=r-a,l=i-n,u={top:n,right:r,bottom:i,left:a,width:o,height:l,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return u},xj=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},pD=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},zJ=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},p1={top:0,right:0,bottom:0,left:0},wj=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?p1:r,a=t.border,o=a===void 0?p1:a,l=t.padding,u=l===void 0?p1:l,d=Qa(xj(n,i)),h=Qa(pD(n,o)),p=Qa(pD(h,u));return{marginBox:d,borderBox:Qa(n),paddingBox:h,contentBox:p,margin:i,border:o,padding:u}},ca=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&BJ(),i},UJ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},wy=function(t,n){var r=t.borderBox,i=t.border,a=t.margin,o=t.padding,l=zJ(r,n);return wj({borderBox:l,border:i,margin:a,padding:o})},_y=function(t,n){return n===void 0&&(n=UJ()),wy(t,n)},k4=function(t,n){var r={top:ca(n.marginTop),right:ca(n.marginRight),bottom:ca(n.marginBottom),left:ca(n.marginLeft)},i={top:ca(n.paddingTop),right:ca(n.paddingRight),bottom:ca(n.paddingBottom),left:ca(n.paddingLeft)},a={top:ca(n.borderTopWidth),right:ca(n.borderRightWidth),bottom:ca(n.borderBottomWidth),left:ca(n.borderLeftWidth)};return wj({borderBox:t,margin:r,padding:i,border:a})},E4=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return k4(n,r)},Gm=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sy.apply(null,arguments)}function j4(e,t){}j4.bind(null,"warn");j4.bind(null,"error");function Gl(){}function FJ(e,t){return{...e,...t}}function ga(e,t,n){const r=t.map(i=>{const a=FJ(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(a=>{a()})}}const HJ="Invariant failed";class ky extends Error{}ky.prototype.toString=function(){return this.message};function Re(e,t){throw new ky(HJ)}class GJ extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Gl,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof ky&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ga(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ky){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const YJ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ey=e=>e+1,qJ=e=>`
  You have lifted an item in position ${Ey(e.source.index)}
`,T4=(e,t)=>{const n=e.droppableId===t.droppableId,r=Ey(e.index),i=Ey(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},A4=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,KJ=e=>{const t=e.destination;if(t)return T4(e.source,t);const n=e.combine;return n?A4(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},gD=e=>`
  The item has returned to its starting position
  of ${Ey(e.index)}
`,WJ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${gD(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${T4(e.source,t)}
    `:n?`
      You have dropped the item.
      ${A4(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${gD(e.source)}
  `},Vb={dragHandleUsageInstructions:YJ,onDragStart:qJ,onDragUpdate:KJ,onDragEnd:WJ};function VJ(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function N4(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!VJ(e[n],t[n]))return!1;return!0}function Nt(e,t){const n=S.useState(()=>({inputs:t,result:e()}))[0],r=S.useRef(!0),i=S.useRef(n),o=r.current||!!(t&&i.current.inputs&&N4(t,i.current.inputs))?i.current:{inputs:t,result:e()};return S.useEffect(()=>{r.current=!1,i.current=o},[o]),o.result}function Qe(e,t){return Nt(()=>e,t)}const vr={x:0,y:0},Or=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Hi=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Yl=(e,t)=>e.x===t.x&&e.y===t.y,jf=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ku=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Ym=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),bD=(e,t)=>Math.min(...t.map(n=>Ym(e,n))),O4=e=>t=>({x:e(t.x),y:e(t.y)});var ZJ=(e,t)=>{const n=Qa({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Tp=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),yD=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],XJ={top:0,right:0,bottom:0,left:0},JJ=(e,t)=>t?Tp(e,t.scroll.diff.displacement):e,QJ=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,eQ=(e,t)=>t&&t.shouldClipSubject?ZJ(t.pageMarginBox,e):Qa(e);var sf=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=JJ(e.marginBox,r),a=QJ(i,n,t),o=eQ(a,r);return{page:e,withPlaceholder:t,active:o}},_j=(e,t)=>{e.frame||Re();const n=e.frame,r=Hi(t,n.scroll.initial),i=jf(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=sf({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function yr(e,t=N4){let n=null;function r(...i){if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;const a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const C4=yr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),M4=yr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Zv=yr(e=>Object.values(e)),tQ=yr(e=>Object.values(e));var Tf=yr((e,t)=>tQ(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Sj(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Xv(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Jv=yr((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),nQ=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!Sj(i))return null;function o(y){const k={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...i,at:k}}const l=i.displaced.all,u=l.length?l[0]:null;if(e)return u?o(u):null;const d=Jv(t,r);if(!u){if(!d.length)return null;const y=d[d.length-1];return o(y.descriptor.id)}const h=d.findIndex(y=>y.descriptor.id===u);h===-1&&Re();const p=h-1;if(p<0)return null;const b=d[p];return o(b.descriptor.id)},Af=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const D4={point:vr,value:0},qm={invisible:{},visible:{},all:[]},rQ={displaced:qm,displacedBy:D4,at:null};var wa=(e,t)=>n=>e<=n&&n<=t,P4=e=>{const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return u&&d?!0:u&&o||d&&a}},iQ=e=>{const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const kj={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},R4={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var aQ=e=>t=>{const n=wa(t.top,t.bottom),r=wa(t.left,t.right);return i=>e===kj?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const oQ=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:vr;return Tp(e,n)},sQ=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,lQ=(e,t,n)=>n(t)(e),Ej=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const a=r?oQ(e,t):e;return sQ(a,t,i)&&lQ(a,n,i)},cQ=e=>Ej({...e,isVisibleThroughFrameFn:P4}),L4=e=>Ej({...e,isVisibleThroughFrameFn:iQ}),uQ=e=>Ej({...e,isVisibleThroughFrameFn:aQ(e.destination.axis)}),dQ=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function fQ(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Qa(xj(n,r))}function Km({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(l,u){const d=fQ(u,n),h=u.descriptor.id;if(l.all.push(h),!cQ({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[u.descriptor.id]=!0,l;const b=dQ(h,a,i),y={draggableId:h,shouldAnimate:b};return l.visible[h]=y,l},{all:[],visible:{},invisible:{}})}function hQ(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function vD({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=hQ(e,{inHomeList:t});return{displaced:qm,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function jy({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:l}){const u=Af(e,n);if(o==null)return vD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const d=t.find(k=>k.descriptor.index===o);if(!d)return vD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const h=Jv(e,t),p=t.indexOf(d),b=h.slice(p);return{displaced:Km({afterDragging:b,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Vl(e,t){return!!t.effected[e]}var mQ=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,l=n[a].descriptor.index;return Vl(a,i)?e?l:l-1:e?l+1:l},pQ=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,u=t?l:l+1;return a<o||a>u?null:a},gQ=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:l,afterCritical:u})=>{const d=o.at;if(d||Re(),d.type==="REORDER"){const p=pQ({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:a});return p==null?null:jy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:p})}const h=mQ({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:d.combine,afterCritical:u});return h==null?null:jy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},bQ=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return Vl(n,t)?i?vr:jf(r.point):i?r.point:vr},yQ=({afterCritical:e,impact:t,draggables:n})=>{const r=Xv(t);r||Re();const i=r.draggableId,a=n[i].page.borderBox.center,o=bQ({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Or(a,o)};const I4=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,vQ=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,jj=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,xD=({axis:e,moveRelativeTo:t,isMoving:n})=>ku(e.line,t.marginBox[e.end]+I4(e,n),jj(e,t.marginBox,n)),wD=({axis:e,moveRelativeTo:t,isMoving:n})=>ku(e.line,t.marginBox[e.start]-vQ(e,n),jj(e,t.marginBox,n)),xQ=({axis:e,moveInto:t,isMoving:n})=>ku(e.line,t.contentBox[e.start]+I4(e,n),jj(e,t.contentBox,n));var wQ=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const a=Tf(r.descriptor.id,n),o=t.page,l=r.axis;if(!a.length)return xQ({axis:l,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:d}=e,h=u.all[0];if(h){const b=n[h];if(Vl(h,i))return wD({axis:l,moveRelativeTo:b.page,isMoving:o});const y=wy(b.page,d.point);return wD({axis:l,moveRelativeTo:y,isMoving:o})}const p=a[a.length-1];if(p.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Vl(p.descriptor.id,i)){const b=wy(p.page,jf(i.displacedBy.point));return xD({axis:l,moveRelativeTo:b,isMoving:o})}return xD({axis:l,moveRelativeTo:p.page,isMoving:o})},u2=(e,t)=>{const n=e.frame;return n?Or(t,n.scroll.diff.displacement):t};const _Q=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type==="REORDER"?wQ({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):yQ({impact:e,draggables:r,afterCritical:i})};var Qv=e=>{const t=_Q(e),n=e.droppable;return n?u2(n,t):t},$4=(e,t)=>{const n=Hi(t,e.scroll.initial),r=jf(n);return{frame:Qa({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function _D(e,t){return e.map(n=>t[n])}function SQ(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var kQ=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const a=$4(t,Or(t.scroll.current,i)),o=n.frame?_j(n,Or(n.frame.scroll.current,i)):n,l=e.displaced,u=Km({afterDragging:_D(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=Km({afterDragging:_D(l.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),h={},p={},b=[l,u,d];return l.all.forEach(k=>{const w=SQ(k,b);if(w){p[k]=w;return}h[k]=!0}),{...e,displaced:{all:l.all,invisible:h,visible:p}}},EQ=(e,t)=>Or(e.scroll.diff.displacement,t),Tj=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=EQ(n,e),i=Hi(r,t.page.borderBox.center);return Or(t.client.borderBox.center,i)},B4=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const o=Hi(n,e.page.borderBox.center),u={target:Tp(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?uQ(u):L4(u)},jQ=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:u})=>{if(!n.isEnabled)return null;const d=Tf(n.descriptor.id,r),h=Af(t,n),p=nQ({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:i})||gQ({isMovingForward:e,isInHomeList:h,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:i,viewport:a,afterCritical:u});if(!p)return null;const b=Qv({impact:p,draggable:t,droppable:n,draggables:r,afterCritical:u});if(B4({draggable:t,destination:n,newPageBorderBoxCenter:b,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Tj({pageBorderBoxCenter:b,draggable:t,viewport:a}),impact:p,scrollJumpRequest:null};const k=Hi(b,o),w=kQ({impact:p,viewport:a,destination:n,draggables:r,maxScrollChange:k});return{clientSelection:l,impact:w,scrollJumpRequest:k}};const Kr=e=>{const t=e.subject.active;return t||Re(),t};var TQ=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const a=n.subject.active;if(!a)return null;const o=n.axis,l=wa(a[o.start],a[o.end]),u=Zv(r).filter(h=>h!==n).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>P4(i.frame)(Kr(h))).filter(h=>{const p=Kr(h);return e?a[o.crossAxisEnd]<p[o.crossAxisEnd]:p[o.crossAxisStart]<a[o.crossAxisStart]}).filter(h=>{const p=Kr(h),b=wa(p[o.start],p[o.end]);return l(p[o.start])||l(p[o.end])||b(a[o.start])||b(a[o.end])}).sort((h,p)=>{const b=Kr(h)[o.crossAxisStart],y=Kr(p)[o.crossAxisStart];return e?b-y:y-b}).filter((h,p,b)=>Kr(h)[o.crossAxisStart]===Kr(b[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const d=u.filter(h=>wa(Kr(h)[o.start],Kr(h)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((h,p)=>Kr(h)[o.start]-Kr(p)[o.start])[0]:u.sort((h,p)=>{const b=bD(t,yD(Kr(h))),y=bD(t,yD(Kr(p)));return b!==y?b-y:Kr(h)[o.start]-Kr(p)[o.start]})[0]};const SD=(e,t)=>{const n=e.page.borderBox.center;return Vl(e.descriptor.id,t)?Hi(n,t.displacedBy.point):n},AQ=(e,t)=>{const n=e.page.borderBox;return Vl(e.descriptor.id,t)?Tp(n,jf(t.displacedBy.point)):n};var NQ=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>L4({target:AQ(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const u=Ym(e,u2(n,SD(o,i))),d=Ym(e,u2(n,SD(l,i)));return u<d?-1:d<u?1:o.descriptor.index-l.descriptor.index})[0]||null,Ap=yr(function(t,n){const r=n[t.line];return{value:r,point:ku(t.line,r)}});const OQ=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return ku(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=Tf(e.descriptor.id,n).reduce((d,h)=>d+h.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:ku(r.line,u)},z4=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),U4=(e,t,n)=>{const r=e.frame;Af(t,e)&&Re(),e.subject.withPlaceholder&&Re();const i=Ap(e.axis,t.displaceBy).point,a=OQ(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const h=sf({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:h}}const l=a?Or(r.scroll.max,a):r.scroll.max,u=z4(r,l),d=sf({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:d,frame:u}},CQ=e=>{const t=e.subject.withPlaceholder;t||Re();const n=e.frame;if(!n){const o=sf({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||Re();const i=z4(n,r),a=sf({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var MQ=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const p={displaced:qm,displacedBy:D4,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},b=Qv({impact:p,draggable:r,droppable:a,draggables:i,afterCritical:l}),y=Af(r,a)?a:U4(a,r,i);return B4({draggable:r,destination:y,newPageBorderBoxCenter:b,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}const u=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],d=(()=>{const p=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?p:p+1})(),h=Ap(a.axis,r.displaceBy);return jy({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:h,last:qm,index:d})},DQ=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:l})=>{const u=TQ({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!u)return null;const d=Tf(u.descriptor.id,i),h=NQ({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:d,afterCritical:l}),p=MQ({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:h,insideDestination:d,viewport:o,afterCritical:l});if(!p)return null;const b=Qv({impact:p,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:Tj({pageBorderBoxCenter:b,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null}},Yi=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const PQ=(e,t)=>{const n=Yi(e);return n?t[n]:null};var RQ=({state:e,type:t})=>{const n=PQ(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,{draggables:p,droppables:b}=e.dimensions;return l?jQ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,destination:a,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):DQ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,isOver:a,draggables:p,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function iu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function F4(e){const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function LQ(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function IQ({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(a=>{const o=a.axis,l=ku(a.axis.line,e.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Ym(r,l)}}).sort((a,o)=>o.distance-a.distance);return i[0]?i[0].id:null}function $Q({pageBorderBox:e,draggable:t,droppables:n}){const r=Zv(n).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!LQ(e,a))return!1;if(F4(a)(e.center))return!0;const o=i.axis,l=a.center[o.crossAxisLine],u=e[o.crossAxisStart],d=e[o.crossAxisEnd],h=wa(a[o.crossAxisStart],a[o.crossAxisEnd]),p=h(u),b=h(d);return!p&&!b?!0:p?u<l:d>l});return r.length?r.length===1?r[0].descriptor.id:IQ({pageBorderBox:e,draggable:t,candidates:r}):null}const H4=(e,t)=>Qa(Tp(e,t));var BQ=(e,t)=>{const n=e.frame;return n?H4(t,n.scroll.diff.value):t};function G4({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function zQ({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var UQ=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{const l=n.axis,u=Ap(n.axis,t.displaceBy),d=u.value,h=e[l.start],p=e[l.end],y=Jv(t,r).find(w=>{const _=w.descriptor.id,T=w.page.borderBox.center[l.line],O=Vl(_,o),j=G4({displaced:i,id:_});return O?j?p<=T:h<T-d:j?p<=T+d:h<T})||null,k=zQ({draggable:t,closest:y,inHomeList:Af(t,n)});return jy({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:u,index:k})};const FQ=4;var HQ=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Ap(r.axis,e.displaceBy),u=l.value,d=t[o.start],h=t[o.end],b=Jv(e,i).find(k=>{const w=k.descriptor.id,_=k.page.borderBox,O=_[o.size]/FQ,j=Vl(w,a),C=G4({displaced:n.displaced,id:w});return j?C?h>_[o.start]+O&&h<_[o.end]-O:d>_[o.start]-u+O&&d<_[o.end]-u-O:C?h>_[o.start]+u+O&&h<_[o.end]+u-O:d>_[o.start]+O&&d<_[o.end]-O});return b?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:b.descriptor.id,droppableId:r.descriptor.id}}}:null},Y4=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{const l=H4(t.page.borderBox,e),u=$Q({pageBorderBox:l,draggable:t,droppables:r});if(!u)return rQ;const d=r[u],h=Tf(d.descriptor.id,n),p=BQ(d,l);return HQ({pageBorderBoxWithDroppableScroll:p,draggable:t,previousImpact:i,destination:d,insideDestination:h,afterCritical:o})||UQ({pageBorderBoxWithDroppableScroll:p,draggable:t,destination:d,insideDestination:h,last:i.displaced,viewport:a,afterCritical:o})},Aj=(e,t)=>({...e,[t.descriptor.id]:t});const GQ=({previousImpact:e,impact:t,droppables:n})=>{const r=Yi(e),i=Yi(t);if(!r||r===i)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const o=CQ(a);return Aj(n,o)};var YQ=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const a=GQ({previousImpact:r,impact:i,droppables:n}),o=Yi(i);if(!o)return a;const l=n[o];if(Af(e,l)||l.subject.withPlaceholder)return a;const u=U4(l,e,t);return Aj(a,u)},Mm=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{const o=r||e.viewport,l=n||e.dimensions,u=t||e.current.client.selection,d=Hi(u,e.initial.client.selection),h={offset:d,selection:u,borderBoxCenter:Or(e.initial.client.borderBoxCenter,d)},p={selection:Or(h.selection,o.scroll.current),borderBoxCenter:Or(h.borderBoxCenter,o.scroll.current),offset:Or(h.offset,o.scroll.diff.value)},b={client:h,page:p};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:b};const y=l.draggables[e.critical.draggable.id],k=i||Y4({pageOffset:p.offset,draggable:y,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),w=YQ({draggable:y,impact:k,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:b,dimensions:{draggables:l.draggables,droppables:w},impact:k,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function qQ(e,t){return e.map(n=>t[n])}var q4=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const a=e.displaced,o=qQ(a.all,n),l=Km({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:l}},K4=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{const o=Qv({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Tj({pageBorderBoxCenter:o,draggable:t,viewport:i})},W4=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Re();const r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:l}=a,u=o[e.critical.draggable.id],d=Yi(r);d||Re();const h=l[d],p=q4({impact:r,viewport:i,destination:h,draggables:o}),b=K4({impact:p,draggable:u,droppable:h,draggables:o,viewport:i,afterCritical:e.afterCritical});return Mm({impact:p,clientSelection:b,state:e,dimensions:a,viewport:i})},KQ=e=>({index:e.index,droppableId:e.droppableId}),V4=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=Ap(t.axis,e.displaceBy),a=Tf(t.descriptor.id,n),o=a.indexOf(e);o===-1&&Re();const l=a.slice(o+1),u=l.reduce((b,y)=>(b[y.descriptor.id]=!0,b),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:Km({afterDragging:l,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:KQ(e.descriptor)}},afterCritical:d}},WQ=(e,t)=>({draggables:e.draggables,droppables:Aj(e.droppables,t)}),VQ=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=wy(e.client,t),i=_y(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},ZQ=e=>{const t=e.frame;return t||Re(),t},XQ=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,o=t[a],u=ZQ(o).scroll.diff.value,d=Or(r,u);return VQ({draggable:i,offset:d,initialWindowScroll:n.scroll.initial})})},JQ=({state:e,published:t})=>{const n=t.modified.map(T=>{const O=e.dimensions.droppables[T.droppableId];return _j(O,T.scroll)}),r={...e.dimensions.droppables,...C4(n)},i=M4(XQ({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(T=>{delete a[T]});const o={droppables:r,draggables:a},l=Yi(e.impact),u=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],h=o.droppables[e.critical.droppable.id],{impact:p,afterCritical:b}=V4({draggable:d,home:h,draggables:a,viewport:e.viewport}),y=u&&u.isCombineEnabled?e.impact:p,k=Y4({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:b}),w={...e,phase:"DRAGGING",impact:k,onLiftImpact:p,dimensions:o,afterCritical:b,forceShouldAnimate:!1};return e.phase==="COLLECTING"?w:{...w,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const d2=e=>e.movementMode==="SNAP",g1=(e,t,n)=>{const r=WQ(e.dimensions,t);return!d2(e)||n?Mm({state:e,dimensions:r}):W4({state:e,dimensions:r})};function b1(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const kD={phase:"IDLE",completed:null,shouldFlush:!1};var QQ=(e=kD,t)=>{if(t.type==="FLUSH")return{...kD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Re();const{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,l=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:vr},h={client:d,page:{selection:Or(d.selection,i.scroll.initial),borderBoxCenter:Or(d.selection,i.scroll.initial),offset:Or(d.selection,i.scroll.diff.value)}},p=Zv(a.droppables).every(w=>!w.isFixedOnPage),{impact:b,afterCritical:y}=V4({draggable:l,home:u,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:h,current:h,isWindowScrollAllowed:p,impact:b,afterCritical:y,onLiftImpact:b,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Re(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Re(),JQ({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;iu(e)||Re();const{client:n}=t.payload;return Yl(n,e.current.client.selection)?e:Mm({state:e,clientSelection:n,impact:d2(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return b1(e);iu(e)||Re();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const a=_j(i,r);return g1(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;iu(e)||Re();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isEnabled===r&&Re();const a={...i,isEnabled:r};return g1(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;iu(e)||Re();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isCombineEnabled===r&&Re();const a={...i,isCombineEnabled:r};return g1(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;iu(e)||Re(),e.isWindowScrollAllowed||Re();const n=t.payload.newScroll;if(Yl(e.viewport.scroll.current,n))return b1(e);const r=$4(e.viewport,n);return d2(e)?W4({state:e,viewport:r}):Mm({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!iu(e))return e;const n=t.payload.maxScroll;if(Yl(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Re();const n=RQ({state:e,type:t.type});return n?Mm({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Re(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Re(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ft(e,t){return e instanceof Object&&"type"in e&&e.type===t}const eee=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),tee=e=>({type:"LIFT",payload:e}),nee=e=>({type:"INITIAL_PUBLISH",payload:e}),ree=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),iee=()=>({type:"COLLECTION_STARTING",payload:null}),aee=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),oee=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),see=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Z4=e=>({type:"MOVE",payload:e}),lee=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),cee=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),uee=()=>({type:"MOVE_UP",payload:null}),dee=()=>({type:"MOVE_DOWN",payload:null}),fee=()=>({type:"MOVE_RIGHT",payload:null}),hee=()=>({type:"MOVE_LEFT",payload:null}),Nj=()=>({type:"FLUSH",payload:null}),mee=e=>({type:"DROP_ANIMATE",payload:e}),Oj=e=>({type:"DROP_COMPLETE",payload:e}),X4=e=>({type:"DROP",payload:e}),pee=e=>({type:"DROP_PENDING",payload:e}),J4=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var gee=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Ft(i,"LIFT")){r(i);return}const{id:a,clientSelection:o,movementMode:l}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(Oj({completed:u.completed})),t().phase!=="IDLE"&&Re(),n(Nj()),n(eee({draggableId:a,movementMode:l}));const h={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:p,dimensions:b,viewport:y}=e.startPublishing(h);n(nee({critical:p,dimensions:b,clientSelection:o,movementMode:l,viewport:y}))},bee=e=>()=>t=>n=>{Ft(n,"INITIAL_PUBLISH")&&e.dragging(),Ft(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ft(n,"FLUSH")||Ft(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Cj={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wm={opacity:{drop:0,combining:.7},scale:{drop:.75}},Q4={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Wc=`${Q4.outOfTheWay}s ${Cj.outOfTheWay}`,Dm={fluid:`opacity ${Wc}`,snap:`transform ${Wc}, opacity ${Wc}`,drop:e=>{const t=`${e}s ${Cj.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Wc}`,placeholder:`height ${Wc}, width ${Wc}, margin ${Wc}`},ED=e=>Yl(e,vr)?void 0:`translate(${e.x}px, ${e.y}px)`,f2={moveTo:ED,drop:(e,t)=>{const n=ED(e);if(n)return t?`${n} scale(${Wm.scale.drop})`:n}},{minDropTime:h2,maxDropTime:e6}=Q4,yee=e6-h2,jD=1500,vee=.6;var xee=({current:e,destination:t,reason:n})=>{const r=Ym(e,t);if(r<=0)return h2;if(r>=jD)return e6;const i=r/jD,a=h2+yee*i,o=n==="CANCEL"?a*vee:a;return Number(o.toFixed(2))},wee=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:a,droppables:o}=n,l=Yi(e),u=l?o[l]:null,d=o[t.descriptor.droppableId],h=K4({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:u||d,viewport:r});return Hi(h,t.client.borderBox.center)},_ee=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:q4({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:qm},didDropInsideDroppable:!0};const See=({getState:e,dispatch:t})=>n=>r=>{if(!Ft(r,"DROP")){n(r);return}const i=e(),a=r.payload.reason;if(i.phase==="COLLECTING"){t(pee({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&Re(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||Re();const l=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:p}=_ee({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),b=p?Sj(h):null,y=p?Xv(h):null,k={index:l.draggable.index,droppableId:l.droppable.id},w={draggableId:d.descriptor.id,type:d.descriptor.type,source:k,reason:a,mode:i.movementMode,destination:b,combine:y},_=wee({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),T={critical:i.critical,afterCritical:i.afterCritical,result:w,impact:h};if(!(!Yl(i.current.client.offset,_)||!!w.combine)){t(Oj({completed:T}));return}const j=xee({current:i.current.client.offset,destination:_,reason:a});t(mee({newHomeClientOffset:_,dropDuration:j,completed:T}))};var t6=()=>({x:window.pageXOffset,y:window.pageYOffset});function kee(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Eee({onWindowScroll:e}){function t(){e(t6())}const n=Gm(t),r=kee(n);let i=Gl;function a(){return i!==Gl}function o(){a()&&Re(),i=ga(window,[r])}function l(){a()||Re(),n.cancel(),i(),i=Gl}return{start:o,stop:l,isActive:a}}const jee=e=>Ft(e,"DROP_COMPLETE")||Ft(e,"DROP_ANIMATE")||Ft(e,"FLUSH"),Tee=e=>{const t=Eee({onWindowScroll:n=>{e.dispatch(lee({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ft(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&jee(r)&&t.stop(),n(r)}};var Aee=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=()=>t,i},Nee=()=>{const e=[],t=i=>{const a=e.findIndex(l=>l.timerId===i);a===-1&&Re();const[o]=e.splice(a,1);o.callback()};return{add:i=>{const a=setTimeout(()=>t(a)),o={timerId:a,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const Oee=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Cee=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Mee=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Xh=(e,t)=>{t()},Hg=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function y1(e,t,n,r){if(!e){n(r(t));return}const i=Aee(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var Dee=(e,t)=>{const n=Nee();let r=null;const i=(p,b)=>{r&&Re(),Xh("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:p,mode:b})})},a=(p,b)=>{r&&Re(),Xh("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(Hg(p,b))})},o=(p,b)=>{r&&Re();const y=Hg(p,b);r={mode:b,lastCritical:p,lastLocation:y.source,lastCombine:null},n.add(()=>{Xh("onDragStart",()=>y1(e().onDragStart,y,t,Vb.onDragStart))})},l=(p,b)=>{const y=Sj(b),k=Xv(b);r||Re();const w=!Mee(p,r.lastCritical);w&&(r.lastCritical=p);const _=!Oee(r.lastLocation,y);_&&(r.lastLocation=y);const T=!Cee(r.lastCombine,k);if(T&&(r.lastCombine=k),!w&&!_&&!T)return;const O={...Hg(p,r.mode),combine:k,destination:y};n.add(()=>{Xh("onDragUpdate",()=>y1(e().onDragUpdate,O,t,Vb.onDragUpdate))})},u=()=>{r||Re(),n.flush()},d=p=>{r||Re(),r=null,Xh("onDragEnd",()=>y1(e().onDragEnd,p,t,Vb.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:u,drop:d,abort:()=>{if(!r)return;const p={...Hg(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(p)}}},Pee=(e,t)=>{const n=Dee(e,t);return r=>i=>a=>{if(Ft(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ft(a,"INITIAL_PUBLISH")){const l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),i(a),n.start(l,a.payload.movementMode);return}if(Ft(a,"DROP_COMPLETE")){const l=a.payload.completed.result;n.flush(),i(a),n.drop(l);return}if(i(a),Ft(a,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const Ree=e=>t=>n=>{if(!Ft(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&Re(),e.dispatch(Oj({completed:r.completed}))},Lee=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>a=>{if((Ft(a,"FLUSH")||Ft(a,"DROP_COMPLETE")||Ft(a,"DROP_ANIMATION_FINISHED"))&&r(),i(a),!Ft(a,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(J4())}};n=requestAnimationFrame(()=>{n=null,t=ga(window,[o])})}};var Iee=e=>()=>t=>n=>{(Ft(n,"DROP_COMPLETE")||Ft(n,"FLUSH")||Ft(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},$ee=e=>{let t=!1;return()=>n=>r=>{if(Ft(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ft(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ft(r,"DROP_COMPLETE")){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Bee=e=>Ft(e,"DROP_COMPLETE")||Ft(e,"DROP_ANIMATE")||Ft(e,"FLUSH");var zee=e=>t=>n=>r=>{if(Bee(r)){e.stop(),n(r);return}if(Ft(r,"INITIAL_PUBLISH")){n(r);const i=t.getState();i.phase!=="DRAGGING"&&Re(),e.start(i);return}n(r),e.scroll(t.getState())};const Uee=e=>t=>n=>{if(t(n),!Ft(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(X4({reason:r.reason})))},Fee=Hm;var Hee=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>bj(QQ,Fee(p4(bee(n),Iee(e),gee(e),See,Ree,Lee,Uee,zee(a),Tee,$ee(t),Pee(r,i))));const v1=()=>({additions:{},removals:{},modified:{}});function Gee({registry:e,callbacks:t}){let n=v1(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:d,modified:h}=n,p=Object.keys(u).map(k=>e.draggable.getById(k).getDimension(vr)).sort((k,w)=>k.descriptor.index-w.descriptor.index),b=Object.keys(h).map(k=>{const _=e.droppable.getById(k).callbacks.getScrollWhileDragging();return{droppableId:k,scroll:_}}),y={additions:p,removals:Object.keys(d),modified:b};n=v1(),t.publish(y)}))};return{add:u=>{const d=u.descriptor.id;n.additions[d]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},remove:u=>{const d=u.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=v1())}}}var n6=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Hi({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},r6=()=>{const e=document.documentElement;return e||Re(),e},i6=()=>{const e=r6();return n6({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Yee=()=>{const e=t6(),t=i6(),n=e.y,r=e.x,i=r6(),a=i.clientWidth,o=i.clientHeight,l=r+a,u=n+o;return{frame:Qa({top:n,left:r,right:l,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:vr,displacement:vr}}}},qee=({critical:e,scrollOptions:t,registry:n})=>{const r=Yee(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,t)),l=n.draggable.getAllByType(e.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:M4(l),droppables:C4(o)},critical:e,viewport:r}};function TD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Kee=(e,t)=>{let n=null;const r=Gee({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(b,y)=>{e.droppable.exists(b)||Re(),n&&t.updateDroppableIsEnabled({id:b,isEnabled:y})},a=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableIsCombineEnabled({id:b,isCombineEnabled:y}))},o=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableScroll({id:b,newScroll:y}))},l=(b,y)=>{n&&e.droppable.getById(b).callbacks.scroll(y)},u=()=>{if(!n)return;r.stop();const b=n.critical.droppable;e.droppable.getAllByType(b.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},d=b=>{n||Re();const y=n.critical.draggable;b.type==="ADDITION"&&TD(e,y,b.value)&&r.add(b.value),b.type==="REMOVAL"&&TD(e,y,b.value)&&r.remove(b.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:b=>{n&&Re();const y=e.draggable.getById(b.draggableId),k=e.droppable.getById(y.descriptor.droppableId),w={draggable:y.descriptor,droppable:k.descriptor},_=e.subscribe(d);return n={critical:w,unsubscribe:_},qee({critical:w,registry:e,scrollOptions:b.scrollOptions})},stopPublishing:u}},a6=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Wee=e=>{window.scrollBy(e.x,e.y)};const Vee=yr(e=>Zv(e).filter(t=>!(!t.isEnabled||!t.frame))),Zee=(e,t)=>Vee(t).find(r=>(r.frame||Re(),F4(r.frame.pageMarginBox)(e)))||null;var Xee=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return Zee(e,n)};const Vm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Jee=(e,t,n=()=>Vm)=>{const r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},o6=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Mj=1,Qee=(e,t,n=()=>Vm)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Mj;const a=1-o6({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(a);return Math.ceil(o)},ete=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,l=a,d=Date.now()-o;if(d>=a)return e;if(d<i)return Mj;const h=o6({startOfRange:i,endOfRange:l,current:d}),p=e*r.ease(h);return Math.ceil(p)},AD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=Qee(e,t,i);return a===0?0:r?Math.max(ete(a,n,i),Mj):a},ND=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=Jee(e,r,a);return t[r.end]<t[r.start]?AD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*AD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},tte=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const nte=O4(e=>e===0?0:e);var s6=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=ND({container:t,distanceToEdges:o,dragStartTime:e,axis:kj,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),u=ND({container:t,distanceToEdges:o,dragStartTime:e,axis:R4,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),d=nte({x:u,y:l});if(Yl(d,vr))return null;const h=tte({container:t,subject:n,proposedScroll:d});return h?Yl(h,vr)?null:h:null};const rte=O4(e=>e===0?0:e>0?1:-1),Dj=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Or(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return Yl(a,vr)?null:a}})(),l6=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=rte(n),a=Dj({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},Pj=(e,t)=>l6({current:e.scroll.current,max:e.scroll.max,change:t}),ite=(e,t)=>{if(!Pj(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Dj({current:r,max:n,change:t})},Rj=(e,t)=>{const n=e.frame;return n?l6({current:n.scroll.current,max:n.scroll.max,change:t}):!1},ate=(e,t)=>{const n=e.frame;return!n||!Rj(e,t)?null:Dj({current:n.scroll.current,max:n.scroll.max,change:t})};var ote=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=s6({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&Pj(e,o)?o:null},ste=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=e.frame;if(!o)return null;const l=s6({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return l&&Rj(e,l)?l:null},OD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const p=e.viewport,b=ote({dragStartTime:t,viewport:p,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(b){r(b);return}}const d=Xee({center:o,destination:Yi(e.impact),droppables:e.dimensions.droppables});if(!d)return;const h=ste({dragStartTime:t,droppable:d,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});h&&i(d.descriptor.id,h)},lte=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Vm})=>{const r=Gm(e),i=Gm(t);let a=null;const o=d=>{a||Re();const{shouldUseTimeDampening:h,dragStartTime:p}=a;OD({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:h,getAutoScrollerOptions:n})};return{start:d=>{a&&Re();const h=Date.now();let p=!1;const b=()=>{p=!0};OD({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:b,scrollDroppable:b,getAutoScrollerOptions:n}),a={dragStartTime:h,shouldUseTimeDampening:p},p&&o(d)},stop:()=>{a&&(r.cancel(),i.cancel(),a=null)},scroll:o}},cte=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,u)=>{const d=Or(l.current.client.selection,u);e({client:d})},i=(l,u)=>{if(!Rj(l,u))return u;const d=ate(l,u);if(!d)return t(l.descriptor.id,u),null;const h=Hi(u,d);return t(l.descriptor.id,h),Hi(u,h)},a=(l,u,d)=>{if(!l||!Pj(u,d))return d;const h=ite(u,d);if(!h)return n(d),null;const p=Hi(d,h);return n(p),Hi(d,p)};return l=>{const u=l.scrollJumpRequest;if(!u)return;const d=Yi(l.impact);d||Re();const h=i(l.dimensions.droppables[d],u);if(!h)return;const p=l.viewport,b=a(l.isWindowScrollAllowed,p,h);b&&r(l,b)}},ute=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=lte({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=cte({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:i.start,stop:i.stop}};const lf="data-rfd",cf=(()=>{const e=`${lf}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),m2=(()=>{const e=`${lf}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),dte=(()=>{const e=`${lf}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),CD={contextId:`${lf}-scroll-container-context-id`},fte=e=>t=>`[${t}="${e}"]`,Jh=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),hte="pointer-events: none;";var mte=e=>{const t=fte(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(cf.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:hte,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Dm.outOfTheWay};
    `;return{selector:t(m2.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),i={selector:t(dte.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Jh(o,"always"),resting:Jh(o,"resting"),dragging:Jh(o,"dragging"),dropAnimating:Jh(o,"dropAnimating"),userCancel:Jh(o,"userCancel")}};const qi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,x1=()=>{const e=document.querySelector("head");return e||Re(),e},MD=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function pte(e,t){const n=Nt(()=>mte(e),[e]),r=S.useRef(null),i=S.useRef(null),a=Qe(yr(p=>{const b=i.current;b||Re(),b.textContent=p}),[]),o=Qe(p=>{const b=r.current;b||Re(),b.textContent=p},[]);qi(()=>{!r.current&&!i.current||Re();const p=MD(t),b=MD(t);return r.current=p,i.current=b,p.setAttribute(`${lf}-always`,e),b.setAttribute(`${lf}-dynamic`,e),x1().appendChild(p),x1().appendChild(b),o(n.always),a(n.resting),()=>{const y=k=>{const w=k.current;w||Re(),x1().removeChild(w),k.current=null};y(r),y(i)}},[t,o,a,n.always,n.resting,e]);const l=Qe(()=>a(n.dragging),[a,n.dragging]),u=Qe(p=>{if(p==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=Qe(()=>{i.current&&a(n.resting)},[a,n.resting]);return Nt(()=>({dragging:l,dropping:u,resting:d}),[l,u,d])}function c6(e,t){return Array.from(e.querySelectorAll(t))}var u6=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ex(e){return e instanceof u6(e).HTMLElement}function gte(e,t){const n=`[${cf.contextId}="${e}"]`,r=c6(document,n);if(!r.length)return null;const i=r.find(a=>a.getAttribute(cf.draggableId)===t);return!i||!ex(i)?null:i}function bte(e){const t=S.useRef({}),n=S.useRef(null),r=S.useRef(null),i=S.useRef(!1),a=Qe(function(b,y){const k={id:b,focus:y};return t.current[b]=k,function(){const _=t.current;_[b]!==k&&delete _[b]}},[]),o=Qe(function(b){const y=gte(e,b);y&&y!==document.activeElement&&y.focus()},[e]),l=Qe(function(b,y){n.current===b&&(n.current=y)},[]),u=Qe(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const b=n.current;b&&o(b)}))},[o]),d=Qe(function(b){n.current=null;const y=document.activeElement;y&&y.getAttribute(cf.draggableId)===b&&(n.current=b)},[]);return qi(()=>(i.current=!0,function(){i.current=!1;const b=r.current;b&&cancelAnimationFrame(b)}),[]),Nt(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:l}),[a,d,u,l])}function yte(){const e={draggables:{},droppables:{}},t=[];function n(p){return t.push(p),function(){const y=t.indexOf(p);y!==-1&&t.splice(y,1)}}function r(p){t.length&&t.forEach(b=>b(p))}function i(p){return e.draggables[p]||null}function a(p){const b=i(p);return b||Re(),b}const o={register:p=>{e.draggables[p.descriptor.id]=p,r({type:"ADDITION",value:p})},update:(p,b)=>{const y=e.draggables[b.descriptor.id];y&&y.uniqueId===p.uniqueId&&(delete e.draggables[b.descriptor.id],e.draggables[p.descriptor.id]=p)},unregister:p=>{const b=p.descriptor.id,y=i(b);y&&p.uniqueId===y.uniqueId&&(delete e.draggables[b],e.droppables[p.descriptor.droppableId]&&r({type:"REMOVAL",value:p}))},getById:a,findById:i,exists:p=>!!i(p),getAllByType:p=>Object.values(e.draggables).filter(b=>b.descriptor.type===p)};function l(p){return e.droppables[p]||null}function u(p){const b=l(p);return b||Re(),b}const d={register:p=>{e.droppables[p.descriptor.id]=p},unregister:p=>{const b=l(p.descriptor.id);b&&p.uniqueId===b.uniqueId&&delete e.droppables[p.descriptor.id]},getById:u,findById:l,exists:p=>!!l(p),getAllByType:p=>Object.values(e.droppables).filter(b=>b.descriptor.type===p)};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:h}}function vte(){const e=Nt(yte,[]);return S.useEffect(()=>function(){e.clean()},[e]),e}var Lj=rn.createContext(null),Ty=()=>{const e=document.body;return e||Re(),e};const xte={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},wte=e=>`rfd-announcement-${e}`;function _te(e){const t=Nt(()=>wte(e),[e]),n=S.useRef(null);return S.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Sy(a.style,xte),Ty().appendChild(a),function(){setTimeout(function(){const u=Ty();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[t]),Qe(i=>{const a=n.current;if(a){a.textContent=i;return}},[])}const Ste={separator:"::"};function Ij(e,t=Ste){const n=rn.useId();return Nt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function kte({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function Ete({contextId:e,text:t}){const n=Ij("hidden-text",{separator:"-"}),r=Nt(()=>kte({contextId:e,uniqueId:n}),[n,e]);return S.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",Ty().appendChild(a),function(){const l=Ty();l.contains(a)&&l.removeChild(a)}},[r,t]),r}var tx=rn.createContext(null);function d6(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),t}function jte(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&Re();const l={abandon:o};return e=l,l}function i(){e||Re(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function Zm(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Tte=9,Ate=13,$j=27,f6=32,Nte=33,Ote=34,Cte=35,Mte=36,Dte=37,Pte=38,Rte=39,Lte=40,Ite={[Ate]:!0,[Tte]:!0};var h6=e=>{Ite[e.keyCode]&&e.preventDefault()};const nx=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),m6=0,DD=5;function $te(e,t){return Math.abs(t.x-e.x)>=DD||Math.abs(t.y-e.y)>=DD}const PD={type:"IDLE"};function Bte({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:o,clientY:l}=i;if(a!==m6)return;const u={x:o,y:l},d=n();if(d.type==="DRAGGING"){i.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&Re();const h=d.point;if(!$te(h,u))return;i.preventDefault();const p=d.actions.fluidLift(u);r({type:"DRAGGING",actions:p})}},{eventName:"mouseup",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===$j){i.preventDefault(),e();return}h6(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=n();if(a.type==="IDLE"&&Re(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:nx,fn:e}]}function zte(e){const t=S.useRef(PD),n=S.useRef(Gl),r=Nt(()=>({eventName:"mousedown",fn:function(p){if(p.defaultPrevented||p.button!==m6||p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)return;const b=e.findClosestDraggableId(p);if(!b)return;const y=e.tryGetLock(b,o,{sourceEvent:p});if(!y)return;p.preventDefault();const k={x:p.clientX,y:p.clientY};n.current(),d(y,k)}}),[e]),i=Nt(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const p=e.findClosestDraggableId(h);if(!p)return;const b=e.findOptionsForDraggable(p);b&&(b.shouldRespectForcePress||e.canGetLock(p)&&h.preventDefault())}}),[e]),a=Qe(function(){const p={passive:!1,capture:!0};n.current=ga(window,[i,r],p)},[i,r]),o=Qe(()=>{t.current.type!=="IDLE"&&(t.current=PD,n.current(),a())},[a]),l=Qe(()=>{const h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Qe(function(){const p={capture:!0,passive:!1},b=Bte({cancel:l,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ga(window,b,p)},[l,o]),d=Qe(function(p,b){t.current.type!=="IDLE"&&Re(),t.current={type:"PENDING",point:b,actions:p},u()},[u]);qi(function(){return a(),function(){n.current()}},[a])}function Ute(){}const Fte={[Ote]:!0,[Nte]:!0,[Mte]:!0,[Cte]:!0};function Hte(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===$j){i.preventDefault(),n();return}if(i.keyCode===f6){i.preventDefault(),r();return}if(i.keyCode===Lte){i.preventDefault(),e.moveDown();return}if(i.keyCode===Pte){i.preventDefault(),e.moveUp();return}if(i.keyCode===Rte){i.preventDefault(),e.moveRight();return}if(i.keyCode===Dte){i.preventDefault(),e.moveLeft();return}if(Fte[i.keyCode]){i.preventDefault();return}h6(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:nx,fn:n}]}function Gte(e){const t=S.useRef(Ute),n=Nt(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==f6)return;const o=e.findClosestDraggableId(a);if(!o)return;const l=e.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();let u=!0;const d=l.snapLift();t.current();function h(){u||Re(),u=!1,t.current(),r()}t.current=ga(window,Hte(d,h),{capture:!0,passive:!1})}}),[e]),r=Qe(function(){const a={passive:!1,capture:!0};t.current=ga(window,[n],a)},[n]);qi(function(){return r(),function(){t.current()}},[r])}const w1={type:"IDLE"},Yte=120,qte=.15;function Kte({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===$j&&n.preventDefault(),e()}},{eventName:nx,fn:e}]}function Wte({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:o}=r.touches[0],l={x:a,y:o};r.preventDefault(),i.actions.move(l)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&Re();const a=r.touches[0];if(!a||!(a.force>=qte))return;const l=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){l&&e();return}if(l){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:nx,fn:e}]}function Vte(e){const t=S.useRef(w1),n=S.useRef(Gl),r=Qe(function(){return t.current},[]),i=Qe(function(y){t.current=y},[]),a=Nt(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const k=e.findClosestDraggableId(y);if(!k)return;const w=e.tryGetLock(k,l,{sourceEvent:y});if(!w)return;const _=y.touches[0],{clientX:T,clientY:O}=_,j={x:T,y:O};n.current(),p(w,j)}}),[e]),o=Qe(function(){const y={capture:!0,passive:!1};n.current=ga(window,[a],y)},[a]),l=Qe(()=>{const b=t.current;b.type!=="IDLE"&&(b.type==="PENDING"&&clearTimeout(b.longPressTimerId),i(w1),n.current(),o())},[o,i]),u=Qe(()=>{const b=t.current;l(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[l]),d=Qe(function(){const y={capture:!0,passive:!1},k={cancel:u,completed:l,getPhase:r},w=ga(window,Wte(k),y),_=ga(window,Kte(k),y);n.current=function(){w(),_()}},[u,r,l]),h=Qe(function(){const y=r();y.type!=="PENDING"&&Re();const k=y.actions.fluidLift(y.point);i({type:"DRAGGING",actions:k,hasMoved:!1})},[r,i]),p=Qe(function(y,k){r().type!=="IDLE"&&Re();const w=setTimeout(h,Yte);i({type:"PENDING",point:k,actions:y,longPressTimerId:w}),d()},[d,r,i,h]);qi(function(){return o(),function(){n.current();const k=r();k.type==="PENDING"&&(clearTimeout(k.longPressTimerId),i(w1))}},[r,o,i]),qi(function(){return ga(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Zte=["input","button","textarea","select","option","optgroup","video","audio"];function p6(e,t){if(t==null)return!1;if(Zte.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:p6(e,t.parentElement)}function Xte(e,t){const n=t.target;return ex(n)?p6(e,n):!1}var Jte=e=>Qa(e.getBoundingClientRect()).center;function Qte(e){return e instanceof u6(e).Element}const ene=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function g6(e,t){return e==null?null:e[ene](t)?e:g6(e.parentElement,t)}function tne(e,t){return e.closest?e.closest(t):g6(e,t)}function nne(e){return`[${cf.contextId}="${e}"]`}function rne(e,t){const n=t.target;if(!Qte(n))return null;const r=nne(e),i=tne(n,r);return!i||!ex(i)?null:i}function ine(e,t){const n=rne(e,t);return n?n.getAttribute(cf.draggableId):null}function ane(e,t){const n=`[${m2.contextId}="${e}"]`,i=c6(document,n).find(a=>a.getAttribute(m2.id)===t);return!i||!ex(i)?null:i}function one(e){e.preventDefault()}function Gg({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function b6({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!a6(t.getState(),r))}function sne({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!b6({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),d=ane(t,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&Xte(d,o))return null;const h=e.claim(a||Gl);let p="PRE_DRAG";function b(){return u.options.shouldRespectForcePress}function y(){return e.isActive(h)}function k(M,P){Gg({expected:M,phase:p,isLockActive:y,shouldWarn:!0})&&n.dispatch(P())}const w=k.bind(null,"DRAGGING");function _(M){function P(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(P(),Re()),n.dispatch(tee(M.liftActionArgs)),p="DRAGGING";function I(U,V={shouldBlockNextClick:!1}){if(M.cleanup(),V.shouldBlockNextClick){const q=ga(window,[{eventName:"click",fn:one,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(q)}P(),n.dispatch(X4({reason:U}))}return{isActive:()=>Gg({expected:"DRAGGING",phase:p,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,drop:U=>I("DROP",U),cancel:U=>I("CANCEL",U),...M.actions}}function T(M){const P=Gm(U=>{w(()=>Z4({client:U}))});return{..._({liftActionArgs:{id:i,clientSelection:M,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function O(){const M={moveUp:()=>w(uee),moveRight:()=>w(fee),moveDown:()=>w(dee),moveLeft:()=>w(hee)};return _({liftActionArgs:{id:i,clientSelection:Jte(d),movementMode:"SNAP"},cleanup:Gl,actions:M})}function j(){Gg({expected:"PRE_DRAG",phase:p,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>Gg({expected:"PRE_DRAG",phase:p,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,fluidLift:T,snapLift:O,abort:j}}const lne=[zte,Gte,Vte];function cne({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const a=[...i?lne:[],...r||[]],o=S.useState(()=>jte())[0],l=Qe(function(_,T){Zm(_)&&!Zm(T)&&o.tryAbandon()},[o]);qi(function(){let _=t.getState();return t.subscribe(()=>{const O=t.getState();l(_,O),_=O})},[o,t,l]),qi(()=>o.tryAbandon,[o.tryAbandon]);const u=Qe(w=>b6({lockAPI:o,registry:n,store:t,draggableId:w}),[o,n,t]),d=Qe((w,_,T)=>sne({lockAPI:o,registry:n,contextId:e,store:t,draggableId:w,forceSensorStop:_||null,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null}),[e,o,n,t]),h=Qe(w=>ine(e,w),[e]),p=Qe(w=>{const _=n.draggable.findById(w);return _?_.options:null},[n.draggable]),b=Qe(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Nj()))},[o,t]),y=Qe(()=>o.isClaimed(),[o]),k=Nt(()=>({canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:p,tryReleaseLock:b,isLockClaimed:y}),[u,d,h,p,b,y]);for(let w=0;w<a.length;w++)a[w](k)}const une=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Du.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),dne=e=>({...Vm,...e.autoScrollerOptions,durationDampening:{...Vm.durationDampening,...e.autoScrollerOptions}});function Qh(e){return e.current||Re(),e.current}function fne(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=S.useRef(null),l=d6(e),u=Qe(()=>une(l.current),[l]),d=Qe(()=>dne(l.current),[l]),h=_te(t),p=Ete({contextId:t,text:a}),b=pte(t,i),y=Qe(q=>{Qh(o).dispatch(q)},[]),k=Nt(()=>oD({publishWhileDragging:ree,updateDroppableScroll:aee,updateDroppableIsEnabled:oee,updateDroppableIsCombineEnabled:see,collectionStarting:iee},y),[y]),w=vte(),_=Nt(()=>Kee(w,k),[w,k]),T=Nt(()=>ute({scrollWindow:Wee,scrollDroppable:_.scrollDroppable,getAutoScrollerOptions:d,...oD({move:Z4},y)}),[_.scrollDroppable,y,d]),O=bte(t),j=Nt(()=>Hee({announce:h,autoScroller:T,dimensionMarshal:_,focusMarshal:O,getResponders:u,styleMarshal:b}),[h,T,_,O,u,b]);o.current=j;const C=Qe(()=>{const q=Qh(o);q.getState().phase!=="IDLE"&&q.dispatch(Nj())},[]),M=Qe(()=>{const q=Qh(o).getState();return q.phase==="DROP_ANIMATING"?!0:q.phase==="IDLE"?!1:q.isDragging},[]),P=Nt(()=>({isDragging:M,tryAbort:C}),[M,C]);n(P);const I=Qe(q=>a6(Qh(o).getState(),q),[]),U=Qe(()=>iu(Qh(o).getState()),[]),V=Nt(()=>({marshal:_,focus:O,contextId:t,canLift:I,isMovementAllowed:U,dragHandleUsageInstructionsId:p,registry:w}),[t,_,p,O,I,U,w]);return cne({contextId:t,store:j,registry:w,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),S.useEffect(()=>C,[C]),rn.createElement(tx.Provider,{value:V},rn.createElement(S4,{context:Lj,store:j},e.children))}function hne(){return rn.useId()}function Np(e){const t=hne(),n=e.dragHandleUsageInstructions||Vb.dragHandleUsageInstructions;return rn.createElement(GJ,null,r=>rn.createElement(fne,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const RD={dragging:5e3,dropAnimating:4500},mne=(e,t)=>t?Dm.drop(t.duration):e?Dm.snap:Dm.fluid,pne=(e,t)=>{if(e)return t?Wm.opacity.drop:Wm.opacity.combining},gne=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function bne(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:a}=e,o=!!i,l=gne(e),u=!!a,d=u?f2.drop(r,o):f2.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:mne(l,a),transform:d,opacity:pne(o,u),zIndex:u?RD.dropAnimating:RD.dragging,pointerEvents:"none"}}function yne(e){return{transform:f2.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function vne(e){return e.type==="DRAGGING"?bne(e):yne(e)}function xne(e,t,n=vr){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=k4(i,r),o=_y(a,n),l={client:a,tagName:t.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:u,client:a,page:o}}function wne(e){const t=Ij("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}=e,u=Nt(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}),[a,l,o]),d=Qe(y=>{const k=i();return k||Re(),xne(n,k,y)},[n,i]),h=Nt(()=>({uniqueId:t,descriptor:n,options:u,getDimension:d}),[n,d,u,t]),p=S.useRef(h),b=S.useRef(!0);qi(()=>(r.draggable.register(p.current),()=>r.draggable.unregister(p.current)),[r.draggable]),qi(()=>{if(b.current){b.current=!1;return}const y=p.current;p.current=h,r.draggable.update(h,y)},[h,r.draggable])}var Bj=rn.createContext(null);function Ay(e){const t=S.useContext(e);return t||Re(),t}function _ne(e){e.preventDefault()}const Sne=e=>{const t=S.useRef(null),n=Qe((P=null)=>{t.current=P},[]),r=Qe(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=Ay(tx),{type:l,droppableId:u}=Ay(Bj),d=Nt(()=>({id:e.draggableId,index:e.index,type:l,droppableId:u}),[e.draggableId,e.index,l,u]),{children:h,draggableId:p,isEnabled:b,shouldRespectForcePress:y,canDragInteractiveElements:k,isClone:w,mapped:_,dropAnimationFinished:T}=e;if(!w){const P=Nt(()=>({descriptor:d,registry:o,getDraggableRef:r,canDragInteractiveElements:k,shouldRespectForcePress:y,isEnabled:b}),[d,o,r,k,y,b]);wne(P)}const O=Nt(()=>b?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:_ne}:null,[i,a,p,b]),j=Qe(P=>{_.type==="DRAGGING"&&_.dropping&&P.propertyName==="transform"&&Du.flushSync(T)},[T,_]),C=Nt(()=>{const P=vne(_),I=_.type==="DRAGGING"&&_.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":p,style:P,onTransitionEnd:I},dragHandleProps:O}},[i,O,p,_,j,n]),M=Nt(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return rn.createElement(rn.Fragment,null,h(C,_.snapshot,M))};var y6=(e,t)=>e===t,v6=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const kne=e=>e.combine?e.combine.draggableId:null,Ene=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function jne(){const e=yr((i,a)=>({x:i,y:a})),t=yr((i,a,o=null,l=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null})),n=yr((i,a,o,l,u=null,d=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:h,snapshot:t(a,l,u,d,null)}}));return(i,a)=>{if(Zm(i)){if(i.critical.draggable.id!==a.draggableId)return null;const o=i.current.client.offset,l=i.dimensions.draggables[a.draggableId],u=Yi(i.impact),d=Ene(i.impact),h=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,l,a.isClone,u,d,h)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==a.draggableId)return null;const l=a.isClone,u=i.dimensions.draggables[a.draggableId],d=o.result,h=d.mode,p=v6(d),b=kne(d),k={duration:i.dropDuration,curve:Cj.drop,moveTo:i.newHomeClientOffset,opacity:b?Wm.opacity.drop:null,scale:b?Wm.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:k,draggingOver:p,combineWith:b,mode:h,forceShouldAnimate:null,snapshot:t(h,l,p,b,k)}}}return null}}function x6(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Tne={mapped:{type:"SECONDARY",offset:vr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:x6(null)}};function Ane(){const e=yr((o,l)=>({x:o,y:l})),t=yr(x6),n=yr((o,l=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:t(l)}})),r=o=>o?n(vr,o,!0):null,i=(o,l,u,d)=>{const h=u.displaced.visible[o],p=!!(d.inVirtualList&&d.effected[o]),b=Xv(u),y=b&&b.draggableId===o?l:null;if(!h){if(!p)return r(y);if(u.displaced.invisible[o])return null;const _=jf(d.displacedBy.point),T=e(_.x,_.y);return n(T,y,!0)}if(p)return r(y);const k=u.displacedBy.point,w=e(k.x,k.y);return n(w,y,h.shouldAnimate)};return(o,l)=>{if(Zm(o))return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const Nne=()=>{const e=jne(),t=Ane();return(r,i)=>e(r,i)||t(r,i)||Tne},One={dropAnimationFinished:J4},Cne=_4(Nne,One,null,{context:Lj,areStatePropsEqual:y6})(Sne);function w6(e){return Ay(Bj).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(Cne,e)}function Nf(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return rn.createElement(w6,Sy({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const _6=e=>t=>e===t,Mne=_6("scroll"),Dne=_6("auto"),LD=(e,t)=>t(e.overflowX)||t(e.overflowY),Pne=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return LD(n,Mne)||LD(n,Dne)},Rne=()=>!1,S6=e=>e==null?null:e===document.body?Rne()?e:null:e===document.documentElement?null:Pne(e)?e:S6(e.parentElement);var p2=e=>({x:e.scrollLeft,y:e.scrollTop});const k6=e=>e?window.getComputedStyle(e).position==="fixed"?!0:k6(e.parentElement):!1;var Lne=e=>{const t=S6(e),n=k6(e);return{closestScrollable:t,isFixedOnPage:n}},Ine=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:l})=>{const u=(()=>{if(!l)return null;const{scrollSize:b,client:y}=l,k=n6({scrollHeight:b.scrollHeight,scrollWidth:b.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:y,scrollSize:b,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:k,diff:{value:vr,displacement:vr}}}})(),d=i==="vertical"?kj:R4,h=sf({page:o,withPlaceholder:null,axis:d,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:a,page:o,frame:u,subject:h}};const $ne=(e,t)=>{const n=E4(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,u=xj({top:r,right:o,bottom:a,left:i},n.border);return wj({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Bne=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:l})=>{const u=n.closestScrollable,d=$ne(e,u),h=_y(d,r),p=(()=>{if(!u)return null;const y=E4(u),k={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:y,page:_y(y,r),scroll:p2(u),scrollSize:k,shouldClipSubject:l}})();return Ine({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:h,closest:p})};const zne={passive:!1},Une={passive:!0};var ID=e=>e.shouldPublishImmediately?zne:Une;const Yg=e=>e&&e.env.closestScrollable||null;function Fne(e){const t=S.useRef(null),n=Ay(tx),r=Ij("droppable"),{registry:i,marshal:a}=n,o=d6(e),l=Nt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=S.useRef(l),d=Nt(()=>yr((C,M)=>{t.current||Re();const P={x:C,y:M};a.updateDroppableScroll(l.id,P)}),[l.id,a]),h=Qe(()=>{const C=t.current;return!C||!C.env.closestScrollable?vr:p2(C.env.closestScrollable)},[]),p=Qe(()=>{const C=h();d(C.x,C.y)},[h,d]),b=Nt(()=>Gm(p),[p]),y=Qe(()=>{const C=t.current,M=Yg(C);if(C&&M||Re(),C.scrollOptions.shouldPublishImmediately){p();return}b()},[b,p]),k=Qe((C,M)=>{t.current&&Re();const P=o.current,I=P.getDroppableRef();I||Re();const U=Lne(I),V={ref:I,descriptor:l,env:U,scrollOptions:M};t.current=V;const q=Bne({ref:I,descriptor:l,env:U,windowScroll:C,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),H=U.closestScrollable;return H&&(H.setAttribute(CD.contextId,n.contextId),H.addEventListener("scroll",y,ID(V.scrollOptions))),q},[n.contextId,l,y,o]),w=Qe(()=>{const C=t.current,M=Yg(C);return C&&M||Re(),p2(M)},[]),_=Qe(()=>{const C=t.current;C||Re();const M=Yg(C);t.current=null,M&&(b.cancel(),M.removeAttribute(CD.contextId),M.removeEventListener("scroll",y,ID(C.scrollOptions)))},[y,b]),T=Qe(C=>{const M=t.current;M||Re();const P=Yg(M);P||Re(),P.scrollTop+=C.y,P.scrollLeft+=C.x},[]),O=Nt(()=>({getDimensionAndWatchScroll:k,getScrollWhileDragging:w,dragStopped:_,scroll:T}),[_,k,w,T]),j=Nt(()=>({uniqueId:r,descriptor:l,callbacks:O}),[O,l,r]);qi(()=>(u.current=j.descriptor,i.droppable.register(j),()=>{t.current&&_(),i.droppable.unregister(j)}),[O,l,_,j,a,i.droppable]),qi(()=>{t.current&&a.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),qi(()=>{t.current&&a.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function _1(){}const $D={width:0,height:0,margin:XJ},Hne=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?$D:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Gne=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Hne({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Dm.placeholder:null}},Yne=e=>{const t=S.useRef(null),n=Qe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[l,u]=S.useState(e.animate==="open");S.useEffect(()=>l?r!=="open"?(n(),u(!1),_1):t.current?_1:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):_1,[r,l,n]);const d=Qe(p=>{p.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),h=Gne({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var qne=rn.memo(Yne);class Kne extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Wne=e=>{const t=S.useContext(tx);t||Re();const{contextId:n,isMovementAllowed:r}=t,i=S.useRef(null),a=S.useRef(null),{children:o,droppableId:l,type:u,mode:d,direction:h,ignoreContainerClipping:p,isDropDisabled:b,isCombineEnabled:y,snapshot:k,useClone:w,updateViewportMaxScroll:_,getContainerForClone:T}=e,O=Qe(()=>i.current,[]),j=Qe((H=null)=>{i.current=H},[]);Qe(()=>a.current,[]);const C=Qe((H=null)=>{a.current=H},[]),M=Qe(()=>{r()&&_({maxScroll:i6()})},[r,_]);Fne({droppableId:l,type:u,mode:d,direction:h,isDropDisabled:b,isCombineEnabled:y,ignoreContainerClipping:p,getDroppableRef:O});const P=Nt(()=>rn.createElement(Kne,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:H,data:B,animate:W})=>rn.createElement(qne,{placeholder:B,onClose:H,innerRef:C,animate:W,contextId:n,onTransitionEnd:M})),[n,M,e.placeholder,e.shouldAnimatePlaceholder,C]),I=Nt(()=>({innerRef:j,placeholder:P,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,P,j]),U=w?w.dragging.draggableId:null,V=Nt(()=>({droppableId:l,type:u,isUsingCloneFor:U}),[l,U,u]);function q(){if(!w)return null;const{dragging:H,render:B}=w,W=rn.createElement(w6,{draggableId:H.draggableId,index:H.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Z,X)=>B(Z,X,H));return Jq.createPortal(W,T())}return rn.createElement(Bj.Provider,{value:V},o(I,k),q())};function Vne(){return document.body||Re(),document.body}const BD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Vne},E6=e=>{let t={...e},n;for(n in BD)e[n]===void 0&&(t={...t,[n]:BD[n]});return t},S1=(e,t)=>e===t.droppable.type,zD=(e,t)=>t.draggables[e.draggable.id],Zne=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=yr(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=yr((a,o,l,u,d,h)=>{const p=d.descriptor.id;if(d.descriptor.droppableId===a){const k=h?{render:h,dragging:n(d.descriptor)}:null,w={isDraggingOver:l,draggingOverWith:l?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:w,useClone:k}}if(!o)return t;if(!u)return e;const y={isDraggingOver:l,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(a,o)=>{const l=E6(o),u=l.droppableId,d=l.type,h=!l.isDropDisabled,p=l.renderClone;if(Zm(a)){const b=a.critical;if(!S1(d,b))return t;const y=zD(b,a.dimensions),k=Yi(a.impact)===u;return r(u,h,k,k,y,p)}if(a.phase==="DROP_ANIMATING"){const b=a.completed;if(!S1(d,b.critical))return t;const y=zD(b.critical,a.dimensions);return r(u,h,v6(b.result)===u,Yi(b.impact)===u,y,p)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const b=a.completed;if(!S1(d,b.critical))return t;const y=Yi(b.impact)===u,k=!!(b.impact.at&&b.impact.at.type==="COMBINE"),w=b.critical.droppable.id===u;return y?k?e:t:w?e:t}return t}},Xne={updateViewportMaxScroll:cee},Of=_4(Zne,Xne,(e,t,n)=>({...E6(n),...e,...t}),{context:Lj,areStatePropsEqual:y6})(Wne),Jne={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function Xm(e,t,n){const r=Jne[e];if(!r)return!1;const i=new Date(e,t-1,n,0,0,0,0);return i>=r.start&&i<r.end}function Qne(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),i=Math.floor((e.getTime()-n)/864e5)+1,a=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds(),u=(a-12)/24+o/1440+l/86400,d=2*Math.PI/365*(i-1+u);return 229.18*(75e-6+.001868*Math.cos(d)-.032077*Math.sin(d)-.014615*Math.cos(2*d)-.040849*Math.sin(2*d))}function ere(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function Op(e,t,n=!1){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(r.getTime()-1800*1e3);if(t==null||!isFinite(t))return r;let i=t;Math.abs(i)<=Math.PI+1e-6&&(i=i*180/Math.PI),i=(i+540)%360-180;const a=ere(i),o=4*(i-a),l=Qne(r);return new Date(r.getTime()+(o+l)*60*1e3)}function j6(e){return e.replace(/\D/g,"")}function tre(e,t,n){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(n)||e<1800||e>2200||t<1||t>12||n<1||n>31)return!1;const r=new Date(e,t-1,n);return r.getFullYear()===e&&r.getMonth()+1===t&&r.getDate()===n}function nre(e,t){return!(!Number.isFinite(e)||!Number.isFinite(t)||e<0||e>23||t<0||t>59)}function Cf(e){const t=j6(e.trim());if(t.length!==8)return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8));return tre(n,r,i)?{y:n,m:r,d:i}:null}function Cp(e){const t=e.trim();if(!t||t==="")return null;const n=j6(t);if(n.length!==4)return null;const r=Number(n.slice(0,2)),i=Number(n.slice(2,4));return nre(r,i)?{hh:r,mm:i}:null}function rx(e){const t=e.trim(),n=Cf(t);if(!n)return t;const r=String(n.y).padStart(4,"0"),i=String(n.m).padStart(2,"0"),a=String(n.d).padStart(2,"0");return`${r}${i}${a}`}function ix(e){const t=e.trim();if(t==="")return"";const n=Cp(t);if(!n)return t;const r=String(n.hh).padStart(2,"0"),i=String(n.mm).padStart(2,"0");return`${r}${i}`}var Zb={exports:{}},rre=Zb.exports,UD;function ire(){return UD||(UD=1,(function(e,t){(function(n,r){e.exports=r()})(rre,function(){return(function(n){function r(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var i={};return r.m=n,r.c=i,r.d=function(a,o,l){r.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},r.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(o,"a",o),o},r.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},r.p="",r(r.s=0)})([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(l){return l&&l.__esModule?l:{default:l}})(a);r.default=o.default,n.exports=r.default},function(n,r,i){function a(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(r,"__esModule",{value:!0});var o=i(2),l=a(o),u=i(3),d=a(u),h=i(4),p=a(h),b=i(5),y=a(b),k=i(6),w=a(k),_=i(7),T=a(_),O=i(8),j=a(O),C=i(9),M=a(C),P=i(10),I=a(P),U=i(11),V=a(U),q=i(12),H=a(q),B={lunarInfo:l.default,solarMonth:d.default,gan:p.default,zhi:y.default,animals:w.default,lunarTerm:T.default,lTermInfo:j.default,nStr1:M.default,nStr2:I.default,nStr3:V.default,nStr4:H.default,lYearDays:function(W){var Z,X=348;for(Z=32768;Z>8;Z>>=1)X+=B.lunarInfo[W-1900]&Z?1:0;return X+B.leapDays(W)},leapMonth:function(W){return 15&B.lunarInfo[W-1900]},leapDays:function(W){return B.leapMonth(W)?65536&B.lunarInfo[W-1900]?30:29:0},monthDays:function(W,Z){return Z>12||Z<1?-1:B.lunarInfo[W-1900]&65536>>Z?30:29},solarDays:function(W,Z){if(Z>12||Z<1)return-1;var X=Z-1;return X==1?W%4==0&&W%100!=0||W%400==0?29:28:B.solarMonth[X]},toGanZhi:function(W){return B.gan[W%10]+B.zhi[W%12]},getTerm:function(W,Z){if(W<1900||W>2100||Z<1||Z>24)return-1;var X=B.lTermInfo[W-1900],G=[parseInt("0x"+X.substr(0,5)).toString(),parseInt("0x"+X.substr(5,5)).toString(),parseInt("0x"+X.substr(10,5)).toString(),parseInt("0x"+X.substr(15,5)).toString(),parseInt("0x"+X.substr(20,5)).toString(),parseInt("0x"+X.substr(25,5)).toString()],J=[G[0].substr(0,1),G[0].substr(1,2),G[0].substr(3,1),G[0].substr(4,2),G[1].substr(0,1),G[1].substr(1,2),G[1].substr(3,1),G[1].substr(4,2),G[2].substr(0,1),G[2].substr(1,2),G[2].substr(3,1),G[2].substr(4,2),G[3].substr(0,1),G[3].substr(1,2),G[3].substr(3,1),G[3].substr(4,2),G[4].substr(0,1),G[4].substr(1,2),G[4].substr(3,1),G[4].substr(4,2),G[5].substr(0,1),G[5].substr(1,2),G[5].substr(3,1),G[5].substr(4,2)];return parseInt(J[Z-1])},toChinaYear:function(W){var Z=parseInt(W/1e3),X=parseInt(W%1e3/100),G=parseInt(W%100/10),J=W%10;return B.nStr4[Z]+B.nStr4[X]+B.nStr4[G]+B.nStr4[J]+""},toChinaMonth:function(W){if(W>12||W<1)return-1;var Z=B.nStr3[W-1];return Z+=""},toChinaDay:function(W){var Z;switch(W){case 10:Z="";break;case 20:Z="";break;case 30:Z="";break;default:Z=B.nStr2[Math.floor(W/10)],Z+=B.nStr1[W%10]}return Z},getAnimal:function(W){return B.animals[(W-4)%12]},solar2lunar:function(oe,le,z){if(oe<1900||oe>2100||oe==1900&&le==1&&z<31)return-1;if(oe)var G=new Date(oe,parseInt(le)-1,z);else var G=new Date;var J,ke=0,Q=0,oe=G.getFullYear(),le=G.getMonth()+1,z=G.getDate(),K=(Date.UTC(G.getFullYear(),G.getMonth(),G.getDate())-Date.UTC(1900,0,31))/864e5;for(J=1900;J<2101&&K>0;J++)Q=B.lYearDays(J),K-=Q;K<0&&(K+=Q,J--);var ne=new Date,re=!1;ne.getFullYear()==oe&&ne.getMonth()+1==le&&ne.getDate()==z&&(re=!0);var ce=G.getDay(),ue=B.nStr1[ce];ce==0&&(ce=7);var ge=J,ke=B.leapMonth(J),ie=!1;for(J=1;J<13&&K>0;J++)ke>0&&J==ke+1&&ie==0?(--J,ie=!0,Q=B.leapDays(ge)):Q=B.monthDays(ge,J),ie==1&&J==ke+1&&(ie=!1),K-=Q;K==0&&ke>0&&J==ke+1&&(ie?ie=!1:(ie=!0,--J)),K<0&&(K+=Q,--J);var Ae=J,Ee=K+1,he=le-1,Le=B.getTerm(oe,3),Ie=B.toGanZhi(oe-4),tt=new Date(oe,1,Le).getTime();new Date(oe,he,z).getTime()<tt&&(Ie=B.toGanZhi(oe-5));var Ne=B.getTerm(oe,2*le-1),Be=B.getTerm(oe,2*le),Ue=B.toGanZhi(12*(oe-1900)+le+11);z>=Ne&&(Ue=B.toGanZhi(12*(oe-1900)+le+12));var nt=!1,ut="";Ne==z&&(nt=!0,ut=B.lunarTerm[2*le-2]),Be==z&&(nt=!0,ut=B.lunarTerm[2*le-1]);var yt=Date.UTC(oe,he,1,0,0,0,0)/864e5+25567+10,se=B.toGanZhi(yt+z-1);return{lYear:ge,lMonth:Ae,lDay:Ee,animal:B.getAnimal(ge),yearCn:B.toChinaYear(ge),monthCn:(ie&&ke===Ae?"":"")+B.toChinaMonth(Ae),dayCn:B.toChinaDay(Ee),cYear:oe,cMonth:le,cDay:z,gzYear:Ie,gzMonth:Ue,gzDay:se,isToday:re,isLeap:ie,nWeek:ce,ncWeek:""+ue,isTerm:nt,term:ut}},lunar2solar:function(W,Z,X,G){var J=B.leapMonth(W);if(B.leapDays(W),G&&J!=Z||W==2100&&Z==12&&X>1||W==1900&&Z==1&&X<31)return-1;var Q=B.monthDays(W,Z);if(W<1900||W>2100||X>Q)return-1;for(var oe=0,le=1900;le<W;le++)oe+=B.lYearDays(le);for(var z=0,K=!1,le=1;le<Z;le++)z=B.leapMonth(W),K||z<=le&&z>0&&(oe+=B.leapDays(W),K=!0),oe+=B.monthDays(W,le);G&&(oe+=Q);var ne=Date.UTC(1900,1,30,0,0,0),re=new Date(864e5*(oe+X-31)+ne),ce=re.getUTCFullYear(),ue=re.getUTCMonth()+1,ge=re.getUTCDate();return B.solar2lunar(ce,ue,ge)}};r.default=B,n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default}])})})(Zb)),Zb.exports}var T6=ire();const are=Si(T6),ore=VE({__proto__:null,default:are},[T6]);function zj(e){return typeof e=="object"&&e!==null}function sre(e){return zj(e)&&"default"in e}function lre(e){return zj(e)&&typeof e.lunar2solar=="function"}function cre(e){if(!zj(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,r=e.cDay,i=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof r!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:r,isLeap:typeof i=="boolean"?i:void 0}}function ure(e){const t=sre(e)?e.default:e;if(!lre(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(r,i,a,o)=>{const l=t.lunar2solar(r,i,a,o);return cre(l)}}}const dre=ure(ore);function Zi(e,t,n,r=4,i=0){const a=dre.lunar2solar(e,t,n,!1);return new Date(a.cYear,a.cMonth-1,a.cDay,r,i)}const FD=e=>e<10?`0${e}`:`${e}`;function Mf(e){if(e.calendarType!=="lunar")return e;const t=Cf(e.birthDay??"");if(!t)return e;try{const n=Zi(t.y,t.m,t.d,0,0),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate();return{...e,birthDay:`${r}${FD(i)}${FD(a)}`,calendarType:"solar"}}catch{return e}}function Uj(e){const t=e.mingSikType??"/",n=Cf(e.birthDay??"");if(!n){const C=e.corrected instanceof Date?e.corrected:new Date(NaN),M=typeof e.ganji=="string"?e.ganji:"",P=typeof e.ganjiText=="string"?e.ganjiText:M,I=typeof e.dayStem=="string"?e.dayStem:"";return{corrected:C,correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganji:M,ganjiText:P,dayStem:I}}let r=n.y,i=n.m,a=n.d;if(e.calendarType==="lunar")try{const C=Zi(r,i,a,0,0);r=C.getFullYear(),i=C.getMonth()+1,a=C.getDate()}catch{}const o=Cp(e.birthTime??""),l=!e.birthTime||e.birthTime===""||!o,u=l?4:o.hh,d=l?30:o.mm,h=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(r,i-1,a,u,d,0,0),b=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",y=Op(p,h,b),k=l?"":y.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=ct(y,h),_=At(y,h),T=pt(y,t),O=l?null:no(y,t),j=[` : ${w} ${_} ${T}`,O?`${O}`:null].filter(Boolean).join(" ");return{corrected:y,correctedLocal:k,ganji:j,ganjiText:j,dayStem:T.charAt(0)}}function HD(e,t){return e instanceof Date&&!Number.isNaN(e.getTime())?e:t}function Mp(e){return(typeof e=="string"?e.trim():"")===""?"":""}function GD(e){if(typeof e!="string")return null;const t=e.match(/\s*:\s*(.)/);return t?t[1]:null}function fre(e){const t=GD(e.ganjiText)??GD(e.ganji);if(!t)return"forward";const r=["","","","",""].includes(t),i=Mp(e.gender)==="";return r?i?"forward":"backward":i?"backward":"forward"}function Jm(e){const t={...e,birthDay:rx(e.birthDay??""),birthTime:e.birthTime===""?"":ix(e.birthTime??""),gender:Mp(e.gender),dateObj:HD(e.dateObj,new Date),corrected:HD(e.corrected,new Date(NaN)),correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganjiText:typeof e.ganjiText=="string"?e.ganjiText:"",ganji:typeof e.ganji=="string"?e.ganji:"",dayStem:typeof e.dayStem=="string"?e.dayStem:"",calendarType:e.calendarType==="lunar"?"lunar":"solar",dir:e.dir==="backward"?"backward":"forward"},n=Uj(t),r={...t,...n};return{...r,dir:fre(r)}}function hre(e){return e===""||e==="/"||e===""?e:"/"}function mre(e){return e==="lunar"?"lunar":"solar"}function pre(e,t){if(t||!e||e.name==="")return{name:"",lat:0,lon:127.5};const n=Number.isFinite(e.lat)?e.lat:0,r=Number.isFinite(e.lon)?e.lon:127.5;return{name:typeof e.name=="string"&&e.name.trim()?e.name.trim():"",lat:n,lon:r}}function gre(e,t){const n=typeof e=="string"?e.trim():"";return n?{ok:!0,value:n}:t?{ok:!1,message:" ."}:{ok:!0,value:""}}function Fj(e,t){const r=rx(typeof e=="string"?e:""),i=Cf(r);if(!i)return{ok:!1,message:"(YYYYMMDD)  ."};if(i.y<1900||i.y>2100)return{ok:!1,message:"(YYYY) 1900~2100  ."};if(t==="solar"){const a=new Date(i.y,i.m-1,i.d);if(a.getFullYear()!==i.y||a.getMonth()+1!==i.m||a.getDate()!==i.d)return{ok:!1,message:"  ."}}else try{Zi(i.y,i.m,i.d,0,0)}catch{return{ok:!1,message:"      ."}}return{ok:!0,value:r}}function Hj(e,t){if(t)return{ok:!0,value:""};const r=ix(typeof e=="string"?e:"");return Cp(r)?{ok:!0,value:r}:{ok:!1,message:"  HHmm  ."}}function A6(e,t){const n=t?.requireName??!1,r=gre(e.name,n);if(!r.ok)return r;const i=mre(e.calendarType),a=Fj(e.birthDay,i);if(!a.ok)return a;const o=Hj(e.birthTime,e.unknownTime);if(!o.ok)return o;const l=hre(e.mingSikType),u={id:e.id,name:r.value,birthDay:a.value,birthTime:o.value,gender:Mp(e.gender),sortOrder:e.sortOrder,birthPlace:pre(e.birthPlace,e.unknownPlace),relationship:e.relationship??"",memo:e.memo??"",folder:e.folder,mingSikType:l,DayChangeRule:l===""?"":"",favorite:e.favorite??!1,deletedAt:e.deletedAt??null,dateObj:e.dateObj??new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:i,dir:"forward"};return{ok:!0,value:Jm(u)}}function Zl(e,t=0){const n=Mf(e),r=Cf(n.birthDay??"");if(!r)throw new Error(`Invalid date: ${e.birthDay}`);const i=Cp(n.birthTime??""),a=!i,o=a?4:i.hh,l=a?30:i.mm,u=new Date(r.y,r.m-1,r.d,o,l,0,0);if(Number.isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const d=!n.birthPlace||typeof n.birthPlace=="object"&&n.birthPlace.name==="",h=n.birthPlace?.lon??127.5,p=Op(u,h,d);return t!==0?new Date(p.getTime()+t*60*1e3):p}function bre(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function du(e){return[...e].sort((t,n)=>{const r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:-1,i=typeof n.sortOrder=="number"&&Number.isFinite(n.sortOrder)?n.sortOrder:-1;if(r!==i)return r-i;const a=(t.name??"").toString(),o=(n.name??"").toString(),l=a.localeCompare(o);return l!==0?l:t.id.localeCompare(n.id)})}function g2(e){if(!bre(e))return null;const t=typeof e.id=="string"?e.id:null,n=typeof e.user_id=="string"?e.user_id:null;if(!t||!n)return null;const r=o=>typeof o=="number"&&Number.isFinite(o)?o:null,i=o=>typeof o=="string"?o:null,a=o=>typeof o=="boolean"?o:null;return{id:t,user_id:n,name:i(e.name),birth_day:i(e.birth_day),birth_time:i(e.birth_time),gender:i(e.gender),birth_place_name:i(e.birth_place_name),birth_place_lat:r(e.birth_place_lat),birth_place_lon:r(e.birth_place_lon),relationship:i(e.relationship),memo:i(e.memo),folder:i(e.folder),ming_sik_type:i(e.ming_sik_type),day_change_rule:i(e.day_change_rule),calendar_type:i(e.calendar_type),favorite:a(e.favorite),sort_order:typeof e.sort_order=="string"||typeof e.sort_order=="number"?e.sort_order:null,created_at:i(e.created_at),deleted_at:i(e.deleted_at),updated_at:i(e.updated_at)}}function N6(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),r=typeof n=="number"&&Number.isFinite(n)?n:void 0,i={id:e.id,name:e.name??"",birthDay:rx(e.birth_day??""),birthTime:ix(e.birth_time??""),gender:Mp(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,deletedAt:e.deleted_at??null,sortOrder:r,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:e.calendar_type==="lunar"?"lunar":"solar",dir:"forward"};return Jm(i)}function yre(e,t){const n=typeof e.folder=="string"?e.folder.trim():"",r=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,sort_order:r,folder:n||null,favorite:!!e.favorite,updated_at:new Date().toISOString()}}function YD(e,t){const n=rx(e.birthDay??""),r=ix(e.birthTime??""),i=e.birthPlace??{name:"",lat:0,lon:127.5},a=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:n||null,birth_time:r||null,gender:Mp(e.gender),birth_place_name:i.name??null,birth_place_lat:typeof i.lat=="number"?i.lat:null,birth_place_lon:typeof i.lon=="number"?i.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:typeof e.folder=="string"?e.folder:null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,calendar_type:e.calendarType??"solar",favorite:e.favorite??!1,deleted_at:e.deletedAt??null,sort_order:a,updated_at:new Date().toISOString()}}const b2="hm_session_started_at_ms",vre=7200*1e3;function O6(){return typeof window>"u"?null:window.localStorage}function xre(){const e=O6();if(!e)return Date.now();const t=e.getItem(b2),n=t?Number(t):NaN;if(Number.isFinite(n))return n;const r=Date.now();return e.setItem(b2,String(r)),r}function C6(e=Date.now()){const t=O6();if(t)try{t.setItem(b2,String(e))}catch{}}function wre(e=Date.now()){const t=xre();return e-t>=vre}const qg="myeongsik-list";function _re(e){try{return JSON.parse(e)}catch{return null}}async function Sre(e){if(typeof window>"u")return;const t=window.localStorage.getItem(qg);if(!t)return;const n=_re(t);if(!n){window.localStorage.removeItem(qg);return}const r=n.state??{},i=Array.isArray(r.list)?r.list:[];if(i.length===0){window.localStorage.removeItem(qg);return}const a=await e.getUser();if(!a)return;const o=await e.fetchRows(a.id),l=new Set(o.map(d=>d.id)),u=i.filter(d=>!!d&&typeof d.id=="string"&&d.id.trim()!==""&&!l.has(d.id));for(const d of u)await e.upsertOne(a.id,d);window.localStorage.removeItem(qg)}const kre=250;function Ere(e){return e.map(t=>{const n=typeof t.folder=="string"?t.folder.trim():"",r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:"",i=t.favorite?1:0;return`${t.id}:${r}:${n}:${i}`}).join("|")}function jre(e){if(typeof window>"u")return;const t=window,n="__hm_reorder_flush_installed__";t[n]!==!0&&(t[n]=!0,window.addEventListener("beforeunload",()=>e()),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}))}function Tre(e){let t=null,n=null,r=!1,i="";async function a(){if(!r){r=!0;try{for(;n;){const l=n;if(n=null,l.key&&l.key===i){l.resolve();continue}const u=await e.getUser();if(!u){console.warn("reorder flush skipped: no user"),l.resolve();continue}await e.upsertOrderPatch(u.id,l.list),i=l.key,l.resolve()}}finally{r=!1}}}jre(()=>{a()});function o(l,u){const d=Ere(l);if(d&&d===i&&!n)return Promise.resolve();if(n)n.key=d,n.list=l;else{let h;const p=new Promise(b=>{h=b});n={key:d,list:l,promise:p,resolve:h}}return typeof window>"u"?(a(),n.promise):(t&&window.clearTimeout(t),u?.immediate?a():t=window.setTimeout(()=>{t=null,a()},kre),n.promise)}return{queue:o,flushNow:a}}const br="__UNASSIGNED__",Are=[" ",""],ql=e=>typeof e=="string"?e.trim():"",M6=e=>Are.includes(e);function Fd(e,t){const n=[],r=[];for(const i of e){const a=ql(i);a&&(t[a]?n.push(a):r.push(a))}return[...n,...r]}function ax(e,t){const n=new Set(t.map(o=>ql(o)).filter(o=>o!=="")),r=new Set,i=Object.create(null),a=(o,l)=>{i[o]||(i[o]=[]),i[o].push(l)};for(const o of e){const l=String(o.id??"");if(!l||r.has(l))continue;r.add(l);const u=ql(o.folder),d=!u||M6(u)?br:n.has(u)?u:br;a(d,o)}i[br]||(i[br]=[]);for(const o of t){const l=ql(o);l&&(i[l]||(i[l]=[]))}return i}function Gj(e,t){const n=[];for(const i of t){const a=ql(i);if(!a)continue;const o=e[a];Array.isArray(o)&&n.push(...o)}const r=e[br];return Array.isArray(r)&&r.length&&n.push(...r),n}function Nre(e){const{list:t,orderedFolders:n,source:r,destination:i}=e,a=ax(t,n),o=r.droppableId===br?br:r.droppableId,l=i.droppableId===br?br:i.droppableId,u=[...a[o]??[]],d=o===l?u:[...a[l]??[]],h=u[r.index];if(!h)return{nextList:t,changedIds:[]};u.splice(r.index,1);const b=o!==l&&l===br,y=Math.max(0,Math.min(i.index,d.length)),k=b?d.length:y;o===l?u.splice(k,0,h):d.splice(k,0,h);const w=String(h.id),_=new Set([w]),T={...h,folder:l===br?"":l};return a[o]=u,a[l]=o===l?u:d,a[l]=(a[l]??[]).map(O=>String(O.id)===w?T:O),{nextList:Gj(a,n),changedIds:Array.from(_)}}function Ore(e){const{list:t,orderedFolders:n,targetId:r,nextFolder:i}=e,a=ax(t,n),o=[...n.map(T=>ql(T)),br].filter(Boolean);let l=null,u=-1;for(const T of o){const j=(a[T]??[]).findIndex(C=>String(C.id)===r);if(j>=0){l=T,u=j;break}}if(!l||u<0)return{nextList:t,changedIds:[]};const d=[...a[l]??[]],h=d[u];if(!h)return{nextList:t,changedIds:[]};d.splice(u,1);const p=ql(i),b=!p||M6(p)?br:p,y=l!==b,k=y?[...a[b]??[]]:d,w=String(h.id),_={...h,folder:b===br?"":b};return y?k.push(_):d.splice(u,0,_),a[l]=d,a[b]=y?k:d,{nextList:Gj(a,n),changedIds:[w]}}function Cre(e){const{list:t,targetId:n,orderedFolders:r}=e,i=ax(t,r);let a=null,o=null;const l=[...r.map(y=>ql(y)),br].filter(Boolean);for(const y of l){const k=i[y]??[],w=k.findIndex(_=>String(_.id)===n);if(w>=0){a=y,o=k[w]??null;break}}if(!a||!o)return{nextList:t,nextItem:null};const u=[...i[a]??[]],d=u.findIndex(y=>String(y.id)===n);if(d<0)return{nextList:t,nextItem:null};const h=u[d],p=!h.favorite,b={...h,favorite:p};return u.splice(d,1),p?u.unshift(b):u.push(b),i[a]=u,{nextList:Gj(i,r),nextItem:b}}function Mre(e){const{list:t,folderName:n}=e,r=n.trim();if(!r)return{nextList:t,changedIds:[]};const i=[],a=[],o=[];for(const l of t){if((l.folder??"").trim()!==r){a.push(l);continue}i.push(String(l.id)),o.push({...l,folder:""})}return{nextList:[...a,...o],changedIds:i}}function D6(e){return e.trim().length>0}const em=e=>e.toLowerCase().replace(/\s+/g," ").trim(),Dre=e=>e.replace(/\D/g,""),Pre=e=>{const t=typeof e.birthDay=="string"?e.birthDay:"",n=Dre(t);if(n.length!==8)return t?[t]:[];const r=n.slice(0,4),i=n.slice(4,6),a=n.slice(6,8);return[n,`${r}-${i}-${a}`,`${r}.${i}.${a}`,`${r}/${i}/${a}`,`${r}${i}${a}`]},Rre=e=>{const t=[],n=typeof e.ganji=="string"?e.ganji:"",r=typeof e.ganjiText=="string"?e.ganjiText:"",i=typeof e.dayStem=="string"?e.dayStem:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},Lre=e=>{const t=[],n=typeof e.memo=="string"?e.memo:"",r=typeof e.relationship=="string"?e.relationship:"",i=e.birthPlace&&typeof e.birthPlace=="object"&&typeof e.birthPlace.name=="string"?e.birthPlace.name:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},qD=(e,t,n)=>{const r=em(t);if(!r)return!0;const i=em(typeof e.name=="string"?e.name:""),a=Pre(e).map(em),o=Rre(e).map(em),l=Lre(e).map(em),u=h=>h.includes(r),d=h=>h.some(u);switch(n){case"name":return u(i);case"birth":return d(a);case"ganji":return d(o);case"memo":return d(l);case"all":default:return u(i)||d(a)||d(o)||d(l)}};function Ire(e){const{search:t,searchMode:n,orderedFolders:r,grouped:i,unassignedItems:a}=e;if(!D6(t)){const d={};for(const h of r){const p=typeof h=="string"?h.trim():"";p&&(d[p]=i[p]??[])}return{filteredGrouped:d,filteredUnassigned:a??[],totalMatches:(a?.length??0)+r.reduce((h,p)=>h+(i[p]?.length??0),0)}}const o={};let l=0;for(const d of r){const h=typeof d=="string"?d.trim():"";if(!h)continue;const b=(i[h]??[]).filter(y=>qD(y,t,n));o[h]=b,l+=b.length}const u=(a??[]).filter(d=>qD(d,t,n));return l+=u.length,{filteredGrouped:o,filteredUnassigned:u,totalMatches:l}}function $re(e){return"source"in e&&"destination"in e?e:{orderedFolders:e.orderedFolders,source:{droppableId:(e.sourceFolder??br).toString(),index:e.sourceIndex},destination:{droppableId:(e.destinationFolder??br).toString(),index:e.destinationIndex}}}function Bre(e,t){const n=String(t.eventType??""),r=g2(t.new),i=g2(t.old),a=r??i;if(!a)return e;if(n==="DELETE"||a.deleted_at)return e.filter(d=>d.id!==a.id);const o=N6(a),u=e.some(d=>d.id===o.id)?e.map(d=>d.id===o.id?o:d):[...e,o];return du(u)}async function zre(e){if(!e)return;const t=De;if(typeof t.removeChannel=="function"){await t.removeChannel(e);return}if(typeof t.removeSubscription=="function"){await t.removeSubscription(e);return}}function Ure(){return["id","user_id","name","birth_day","birth_time","gender","birth_place_name","birth_place_lat","birth_place_lon","relationship","memo","folder","ming_sik_type","day_change_rule","calendar_type","favorite","deleted_at","created_at","updated_at","sort_order"].join(", ")}function Fre(){return{async getUser(){const{data:e,error:t}=await De.auth.getUser();return t||!e.user?null:{id:e.user.id}},async fetchRows(e){const{data:t,error:n}=await De.from("myeongsik").select(Ure()).eq("user_id",e).is("deleted_at",null).order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});return n||!t?[]:(Array.isArray(t)?t:[]).map(i=>g2(i)).filter(i=>i!==null).filter(i=>i.user_id===e)},async upsertOne(e,t){const n=YD(t,e),{error:r}=await De.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik upsert error:",r)},async updateOne(e,t,n){const r=YD(n,e),{error:i}=await De.from("myeongsik").update(r).eq("id",t);i&&console.error("myeongsik update error:",i)},async softDelete(e){const t=new Date().toISOString(),{error:n}=await De.from("myeongsik").update({deleted_at:t}).eq("id",e);n&&console.error("myeongsik softDelete error:",n)},async upsertOrderPatch(e,t){const n=t.map(i=>yre(i,e)),{error:r}=await De.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik orderPatch upsert error:",r)},async subscribe(e,t,n){const r=De.channel(`myeongsik:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"myeongsik",filter:`user_id=eq.${e}`},a=>{typeof a!="object"||a===null||t(a)}).subscribe(a=>{n&&n(String(a))});return{async unsubscribe(){await zre(r)}}}}}function Hre(e){return e.trim().toLowerCase().replace(/\s+/g,"").replace(/-/g,"_")}function Em(e){if(!e)return"FREE";const t=Hre(e);return t==="free"?"FREE":t==="basic"?"BASIC":t==="pro"?"PRO":t==="prompt_hidden"||t==="prompt_hide"||t==="hidden"||t==="hide"||t==="prompt_locked"||t==="prompt_lock"||t==="locked"||t==="lock"?"FREE":t==="prompt_full"||t==="full"?"PRO":t==="ms_all"||t==="msall"||t==="basic_3"||t==="basic3"||t==="basic_5"||t==="basic5"||t==="basic_10"||t==="basic10"?"BASIC":t==="pro_select"||t==="proselect"?"PRO":"FREE"}function y2(e){switch(e){case"FREE":return{maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1};case"BASIC":return{maxMyeongsik:9999,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!1};case"PRO":return{maxMyeongsik:null,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!0}}}const Kg={plan:"FREE",maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1,canUseMyoViewer:!1,startsAt:null,expiresAt:null};function Gre(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.floor(e);if(typeof e=="string"&&e.trim()!==""){const n=Number(e);return Number.isFinite(n)?Math.floor(n):t}return t}function KD(e){if(typeof e!="string"||e.trim()==="")return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function WD(e,t,n=Date.now()){return!(e&&e.getTime()>n||t&&t.getTime()<=n)}function Yre(e){return e?e.can_use_myo_viewer===!0:!1}async function qre(e){const{data:t,error:n}=await De.from("user_entitlements").select("plan,max_myeongsik,starts_at,expires_at,can_use_myo_viewer").eq("user_id",e).maybeSingle();return n?null:t??null}const bn=Ko((e,t)=>({loaded:!1,loading:!1,userId:null,...Kg,reset:()=>{e({loaded:!1,loading:!1,userId:null,...Kg})},loadFromServer:async n=>{if(!t().loading){e({loading:!0});try{const{data:i,error:a}=await De.auth.getUser(),o=i.user?.id??null;if(a||!o){e({...Kg,loaded:!0,userId:null});return}const l=t();if(!n?.force&&l.loaded&&l.userId===o)return;const u=await qre(o);if(!u){const O=y2("FREE");e({loaded:!0,userId:o,plan:"FREE",maxMyeongsik:O.maxMyeongsik===null?9999:O.maxMyeongsik,canManageMyeongsik:O.canManageMyeongsik,canUseLuckTabs:O.canUseLuckTabs,canUseMultiMode:O.canUseMultiMode,canUseAllPrompts:O.canUseAllPrompts,canUseAdvancedReport:O.canUseAdvancedReport,canRemoveAds:O.canRemoveAds,canUseMyoViewer:!1,startsAt:null,expiresAt:null});return}const d=KD(u.starts_at??null),h=KD(u.expires_at??null),p=WD(d,h),b=Em(u.plan??null),y=p?b:"FREE",k=y2(y),w=k.maxMyeongsik===null?9999:k.maxMyeongsik,_=Gre(u.max_myeongsik,w),T=Math.max(1,Math.max(_,w));e({loaded:!0,userId:o,plan:y,maxMyeongsik:T,canManageMyeongsik:k.canManageMyeongsik,canUseLuckTabs:k.canUseLuckTabs,canUseMultiMode:k.canUseMultiMode,canUseAllPrompts:k.canUseAllPrompts,canUseAdvancedReport:k.canUseAdvancedReport,canRemoveAds:k.canRemoveAds,canUseMyoViewer:Yre(u),startsAt:d,expiresAt:h})}catch(i){console.error("loadFromServer(entitlements) exception:",i),e({...Kg,loaded:!0,userId:null})}finally{e({loading:!1})}}},isActiveNow:()=>{const{startsAt:n,expiresAt:r}=t();return WD(n,r)},getRemainingMs:n=>{if(!n)return null;const r=n.getTime()-Date.now();return r>0?r:0},formatRemaining:n=>{const r=Math.floor(n/1e3),i=r%60,a=Math.floor(r/60),o=a%60,l=Math.floor(a/60),u=l%24,d=Math.floor(l/24),h=[];return d>0&&h.push(`${d}`),u>0&&h.push(`${u}`),d===0&&o>0&&h.push(`${o}`),h.length===0&&h.push(`${i}`),h.join(" ")},canAddMyeongsik:()=>({ok:!0}),canManageNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canManageMyeongsik},canUseLuckTabsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseLuckTabs},canUseMultiModeNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseMultiMode},canUseAllPromptsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAllPrompts},canUseAdvancedReportNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAdvancedReport},shouldShowAdsNow:()=>{const n=t();return!n.loaded||!n.isActiveNow()?!0:!n.canRemoveAds},canUseMyoViewerNow:()=>{const n=t();return n.loaded&&n.canUseMyoViewer}})),Yj="guest_myeongsik_v1";function P6(e){return typeof e=="object"&&e!==null}function v2(e,t){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const n=Number(e);if(Number.isFinite(n))return n}return t}function Li(e,t=""){return typeof e=="string"?e:t}function Kre(e,t=!1){return typeof e=="boolean"?e:t}function Wre(e){return P6(e)?{name:Li(e.name,""),lat:v2(e.lat,0),lon:v2(e.lon,0)}:{name:"",lat:0,lon:0}}function Vre(e){return{id:e.id,sortOrder:typeof e.sortOrder=="number"?e.sortOrder:1,name:e.name??"",birthDay:e.birthDay??"",birthTime:e.birthTime??"",gender:e.gender??"",birthPlace:e.birthPlace??{name:"",lat:0,lon:0},relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:e.mingSikType??"/",DayChangeRule:e.DayChangeRule??"",favorite:!!e.favorite,calendarType:e.calendarType??"solar",dir:e.dir??"forward"}}function Zre(e){if(!P6(e))return null;const t={id:Li(e.id,""),sortOrder:v2(e.sortOrder,1),name:Li(e.name,""),birthDay:Li(e.birthDay,""),birthTime:Li(e.birthTime,""),gender:Li(e.gender,""),birthPlace:Wre(e.birthPlace),relationship:Li(e.relationship,""),memo:Li(e.memo,""),folder:Li(e.folder,""),mingSikType:Li(e.mingSikType,"/"),DayChangeRule:Li(e.DayChangeRule,""),favorite:Kre(e.favorite,!1),calendarType:Li(e.calendarType,"solar"),dir:Li(e.dir,"forward")};return t.id?Jm(t):null}function R6(){try{const e=localStorage.getItem(Yj);if(!e)return[];const t=JSON.parse(e);if(!Array.isArray(t))return[];const n=t.map(Zre).filter(r=>r!==null);return du(n)}catch{return[]}}function Pl(e){try{const t=e.map(Vre);localStorage.setItem(Yj,JSON.stringify(t))}catch{}}function L6(){try{localStorage.removeItem(Yj)}catch{}}const Es=Ko(e=>({open:!1,reason:"HEADER",openWith:t=>e({open:!0,reason:t}),close:()=>e({open:!1})})),Kn=Fre(),Xre=Tre(Kn);function Vc(){const t=bn.getState().canManageNow();return t||console.warn("[myeongsik] blocked: canManageNow=false"),t}function Jre(e){const n=bn.getState().canAddMyeongsik(e);return n.ok||console.warn("[myeongsik] blocked: canAddMyeongsik",n.message),n.ok}async function VD(e){const t=R6();if(t.length)try{for(const n of t)await Kn.upsertOne(e,n);L6()}catch(n){console.warn("[myeongsik] migrateGuestListToServerIfAny failed:",n)}}const En=Ko((e,t)=>({loading:!1,loaded:!1,loadedUserId:null,realtimeReady:!1,list:[],currentId:null,_rtSub:null,_rtUserId:null,getCurrent:()=>{const{list:n,currentId:r}=t();return r?n.find(i=>i.id===r)??null:null},setCurrentId:n=>e({currentId:n}),startRealtime:async()=>{if(typeof window>"u")return;if(wre()){C6(Date.now()),window.location.reload();return}const n=await Kn.getUser();if(!n){await t().stopRealtime(),e({realtimeReady:!1});return}if(t()._rtUserId===n.id&&t()._rtSub){e({realtimeReady:!0});return}await t().stopRealtime();const r=await Kn.subscribe(n.id,i=>{e(a=>({list:Bre(a.list,i)}))},i=>{i==="SUBSCRIBED"&&e({realtimeReady:!0})});e({_rtSub:r,_rtUserId:n.id})},stopRealtime:async()=>{const n=t()._rtSub;if(n)try{await n.unsubscribe()}catch(r){console.warn("stopRealtime error",r)}e({_rtSub:null,_rtUserId:null,realtimeReady:!1})},loadFromServer:async()=>{if(!t().loading){e({loading:!0});try{const n=await Kn.getUser(),r=t();if(n&&r.loaded&&r.loadedUserId===n.id){e({loading:!1});return}if(!n){const u=R6(),d=u[0]?.id??null;e({list:u,currentId:d,loaded:!0,loadedUserId:null}),await t().stopRealtime();return}await VD(n.id);const i=await Kn.fetchRows(n.id),a=du(i.map(N6)),o=t().currentId,l=o&&a.some(u=>u.id===o)?o:a[0]?.id??null;e({list:a,currentId:l,loaded:!0,loadedUserId:n.id}),await t().startRealtime()}catch(n){console.error("useMyeongSikStore.loadFromServer exception:",n)}finally{e({loading:!1})}}},migrateLocalToServer:async()=>{try{await Sre(Kn);const n=await Kn.getUser();n&&await VD(n.id)}catch(n){console.error("useMyeongSikStore.migrateLocalToServer exception:",n)}},add:async n=>{const r=await Kn.getUser(),i=t().list.length;if(!Jre(i)){r||Es.getState().openWith("ADD_LIMIT");return}const a=(i||0)+1,o={...n,sortOrder:n.sortOrder??a},l=Jm(o),u=t().list,d=du([...u,l]),h=t().currentId??l.id;if(e({list:d,currentId:h}),!r){Pl(d),d.length===1&&Es.getState().openWith("PERSIST_SAVE");return}await Kn.upsertOne(r.id,l)},update:async(n,r)=>{const i=await Kn.getUser();if(i&&!Vc())return;const a=t().list.find(u=>u.id===n);if(!a)return;const o=Jm({...a,...r}),l=du(t().list.map(u=>u.id===n?o:u));if(e({list:l}),!i){Pl(l);return}await Kn.updateOne(i.id,n,o)},remove:async n=>{const r=await Kn.getUser();if(r&&!Vc())return;const a=t().list.filter(l=>l.id!==n),o=t().currentId===n?a[0]?.id??null:t().currentId;if(e({list:a,currentId:o}),!r){Pl(a);return}await Kn.softDelete(n)},moveItemByDnD:async n=>{const r=t().list,i=$re(n),o=Nre({list:r,orderedFolders:i.orderedFolders,source:i.source,destination:i.destination}).nextList;e({list:o});const l=await Kn.getUser();if(l&&!Vc()){e({list:r});return}if(!l){Pl(o);return}await t().reorder(o)},applyNextList:async n=>{const r=t().list;e({list:n});const i=await Kn.getUser();if(i&&!Vc()){e({list:r});return}if(!i){Pl(n);return}await t().reorder(n)},toggleFavoriteWithReorder:async(n,r)=>{const i=await Kn.getUser();if(i&&!Vc())return;const o=Cre({list:t().list,targetId:n,orderedFolders:r}).nextList;if(e({list:o}),!i){Pl(o);return}await t().reorder(o)},unsetFolderForFolder:async n=>{const r=await Kn.getUser();if(r&&!Vc())return;const i=(n??"").trim();if(!i)return;const a=t().list,o=Mre({list:a,folderName:i}),l=du(o.nextList),u=new Set(o.changedIds);if(u.size===0)return;if(e({list:l}),!r){Pl(l);return}const d=l.filter(h=>u.has(h.id));await Kn.upsertOrderPatch(r.id,d)},reorder:async n=>{const r=await Kn.getUser();if(r&&!Vc())return;const i=n.map((o,l)=>({...o,sortOrder:l+1})),a=du(i);if(e({list:a}),!r){Pl(a);return}await Xre.queue(a)},clear:()=>{e({currentId:null,list:[],loaded:!1,loadedUserId:null}),L6()}})),ZD="__custom__",Wg=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],I6=({value:e,onChange:t})=>{const[n,r]=S.useState(Wg),[i,a]=S.useState(""),[o,l]=S.useState(!1),[u,d]=S.useState(""),[h,p]=S.useState(!1),{list:b}=En(),y=(e??i??"").trim(),k=y==="",w=b.some(P=>(P.relationship??"").trim()===""),_=w&&!k?n.filter(P=>P.value!==""):n,T=S.useMemo(()=>{const P=_.find(I=>I.value==="");return P?[P,..._.filter(I=>I.value!=="")]:_},[_]);S.useEffect(()=>{e!==void 0&&a(e)},[e]),S.useEffect(()=>{y||w||(a(""),t?.(""))},[y,w,t]);const O=P=>{const I=P.target.value;I===ZD?(l(!0),a(""),t?.("")):(l(!1),d(""),a(I),t?.(I))};S.useEffect(()=>{const P=localStorage.getItem("relationshipOptions");if(P)try{const I=JSON.parse(P),U=new Set,V=[...I,...Wg].filter(q=>!q||!q.value||U.has(q.value)?!1:(U.add(q.value),!0));r(V)}catch{r(Wg)}},[]),S.useEffect(()=>{(async()=>{const{data:{user:I},error:U}=await De.auth.getUser();if(U||!I)return;const{data:V,error:q}=await De.from("user_settings").select("payload").eq("user_id",I.id).single();if(q&&q.code!=="PGRST116"){console.error("load relationships settings error",q.message);return}const H=V?.payload?.relationshipOptions;if(!Array.isArray(H))return;const B=H.map(W=>W&&typeof W=="object"&&typeof W.value=="string"&&typeof W.label=="string"?{value:W.value,label:W.label}:typeof W=="string"?{value:W,label:W}:null).filter(W=>!!W);B.length&&r(W=>{const Z=new Set,X=[...B,...W,...Wg].filter(G=>Z.has(G.value)?!1:(Z.add(G.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(X)),X})})()},[]),S.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:I},error:U}=await De.auth.getUser();if(U||!I)return;const{data:V,error:q}=await De.from("user_settings").select("payload").eq("user_id",I.id).single();if(q&&q.code!=="PGRST116"){console.error("load relationships settings error",q.message);return}const H={...V?.payload??{},relationshipOptions:n},{error:B}=await De.from("user_settings").upsert({user_id:I.id,payload:H,updated_at:new Date().toISOString()});B&&console.error("save relationships settings error",B.message)})()},[n]);const j=()=>{const P=u.trim();if(!P)return;const I={value:P,label:P};r(U=>[...U,I]),a(P),t?.(P),d(""),l(!1)},C=P=>{r(n.filter(I=>I.value!==P)),i===P&&a("")},M=P=>{if(!P.destination)return;const I=Array.from(n),[U]=I.splice(P.source.index,1);I.splice(P.destination.index,0,U),r(I)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:i,onChange:O,children:[g.jsx("option",{value:"",hidden:!0,children:" "}),T.map(P=>g.jsx("option",{value:P.value,children:P.label},P.value)),g.jsx("option",{value:ZD,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>p(!0),className:"btn_style",children:" "})]}),o&&!h&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:"  ",value:u,onChange:P=>d(P.target.value)}),g.jsx("button",{type:"button",onClick:j,className:"btn_style",children:" "})]}),h&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(Np,{onDragEnd:M,children:g.jsx(Of,{droppableId:"relList",children:P=>g.jsxs("ul",{ref:P.innerRef,...P.droppableProps,className:"space-y-1",children:[n.map((I,U)=>g.jsx(Nf,{draggableId:I.value,index:U,children:V=>g.jsxs("li",{ref:V.innerRef,...V.draggableProps,...V.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:I.label}),g.jsx("button",{type:"button",className:"text-red-500 cursor-pointer",onClick:()=>C(I.value),children:""})]})},I.value)),P.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-full btn_style mt-2",children:""})]})]})},kn=" ",$6=["","","","","",""],B6="ms_folders",z6="ms_folder_order",XD="ms_folder_favs",x2="ms_disabled_presets",Xl="myeoun:folder-updated";function vu(e){if(e!==kn)return e||void 0}function ox(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(r=>typeof r=="string"):[]}catch{return[]}}function qj(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function Qre(){const e=ox(x2);return $6.filter(t=>!e.includes(t))}function Kj(){return ox(B6)}function Wj(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];qj(B6,t),typeof window<"u"&&window.dispatchEvent(new Event(Xl))}function Ny(){const e=Qre(),t=Kj(),n=new Set,r=[];for(const i of[...e,...t])n.has(i)||(n.add(i),r.push(i));return r}function eie(){return[kn,...Ny()]}function U6(e){const t=e.trim();if(!t||t===kn)return;const n=Kj();if(n.includes(t))return;const r=[...n,t];Wj(r)}function tie(e){const t=Kj(),n=t.filter(r=>r!==e);n.length!==t.length&&Wj(n)}function nie(e){const t=ox(x2);if(t.includes(e))return;const n=[...t,e];qj(x2,n),typeof window<"u"&&window.dispatchEvent(new Event(Xl))}function Oy(){return ox(z6)}function Hd(e){qj(z6,e),typeof window<"u"&&window.dispatchEvent(new Event(Xl))}function Pm(e,t){const n=new Set(e),r=[];for(const i of t)n.has(i)&&!r.includes(i)&&r.push(i);for(const i of e)r.includes(i)||r.push(i);return r}function rie(e){return Array.from(new Set(e))}function Vg(e){const t=e.filter(n=>n!==kn);return{rest:t,withUnassigned:[kn,...t]}}function iie(e,t){return Pm(t,e)}function aie({value:e,onChange:t}){const[n,r]=S.useState([kn]),[i,a]=S.useState(!1),[o,l]=S.useState(""),[u,d]=S.useState(!1),h=S.useCallback(async _=>{const{data:{user:T},error:O}=await De.auth.getUser();if(O||!T)return;const j=_.map((M,P)=>({user_id:T.id,folder_name:M,sort_order:P+1,updated_at:new Date().toISOString()})),{error:C}=await De.from("user_folder_order").upsert(j,{onConflict:"user_id,folder_name"});C&&console.error("save folder order error",C.message)},[]),p=S.useCallback(()=>{if(typeof window>"u")return;const _=rie(eie()),T=_.includes(kn)?_:[kn,..._],{rest:O}=Vg(T),j=Oy(),C=iie(j,O),M=[kn,...C];r(M),j.length===C.length&&j.every((I,U)=>I===C[U])||(Hd(C),h(C))},[h]);S.useEffect(()=>{if(p(),typeof window<"u"){const _=()=>p();return window.addEventListener(Xl,_),()=>window.removeEventListener(Xl,_)}},[p]);const b=S.useMemo(()=>e||kn,[e]),y=_=>{const{rest:T}=Vg(_);Hd(T),h(T)},k=_=>{const{source:T,destination:O}=_;if(!O||O.index===T.index)return;const{rest:j}=Vg(n),C=Array.from(j),[M]=C.splice(T.index,1);C.splice(O.index,0,M);const P=[kn,...C];r(P),y(P)},w=_=>{const T=vu(_);T&&(U6(T),p())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:i?"__custom__":b,onChange:_=>{const T=_.target.value;if(T==="__custom__"){a(!0),t(void 0);return}a(!1),t(vu(T))},children:[n.map(_=>g.jsx("option",{value:_,children:_},_)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>d(_=>!_),children:u?" ":" "})]}),i&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const _=o.trim();_&&(w(_),t(vu(_)),a(!1),l(""))},children:""})]}),u&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[kn," ()"]})]}),g.jsx(Np,{onDragEnd:k,children:g.jsx(Of,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:_=>g.jsxs("ul",{ref:_.innerRef,..._.droppableProps,className:"space-y-1",children:[Vg(n).rest.map((T,O)=>g.jsx(Nf,{draggableId:T,index:O,children:j=>g.jsxs("li",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:T})]})},T)),_.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',kn,'" .      .']})]})}function F6({message:e,onClose:t,ms:n=2e3}){return S.useEffect(()=>{const r=setTimeout(t,n);return()=>clearTimeout(r)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}const JD=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:"",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:"",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],oie=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],sie=["","/",""],lie=["",""],H6={gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"};function cie(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function uie(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function die(){const[e,t]=S.useState(0),[n,r]=S.useState({...H6}),[i,a]=S.useState(null),[o,l]=S.useState(!1),[u,d]=S.useState(!1);return{stepIndex:e,setStepIndex:t,form:n,setForm:r,toast:i,setToast:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d}}function fie({currentStepKey:e,birthPlace:t,unknownPlace:n,stepIndex:r}){S.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(e)){const a=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(a){a.focus();return}}if(e==="mingSikType"){const a=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="gender"){const a=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="birthPlace"){if(t||n){const a=()=>{const o=document.querySelector(".current-step form button[type='submit']");o&&o.focus()};a(),setTimeout(a,0)}else{const a=document.getElementById("inputBirthPlaceBtn");a&&a.focus()}return}if(e==="relationship"||e==="folder"){setTimeout(()=>{const a=document.querySelector(".current-step select");a&&a.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[n,r,e,t])}function hie(e,t){if(e!=="lunar"||!t||t.length!==8)return null;try{const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=Zi(n,r,i);return` ${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}catch(n){const r=n instanceof Error?n.message:void 0;return` ${r?`: ${r}`:""}`}}function mie(e,t,n,r){switch(e){case"birthPlace":return r?"":t.birthPlace?.name||"";case"birthTime":return n?"":t.birthTime||"";case"folder":return t.folder?String(t.folder):kn;default:{const a=t[e];return typeof a=="string"?a:a!=null?String(a):""}}}function pie({form:e,unknownTime:t,unknownPlace:n,stepIndex:r}){const i=JD[r],a=S.useMemo(()=>hie(e.calendarType,e.birthDay),[e.calendarType,e.birthDay]);return{steps:JD,currentStep:i,lunarPreview:a,displayValue:l=>mie(l,e,t,n),CALENDAR_OPTIONS:oie,MING_OPTIONS:sie,GENDER_OPTIONS:lie,nextIndex:cie,focusById:uie,isDST:Xm}}function gie(){return{add:En(t=>t.add)}}const Ar=[];for(let e=0;e<256;++e)Ar.push((e+256).toString(16).slice(1));function bie(e,t=0){return(Ar[e[t+0]]+Ar[e[t+1]]+Ar[e[t+2]]+Ar[e[t+3]]+"-"+Ar[e[t+4]]+Ar[e[t+5]]+"-"+Ar[e[t+6]]+Ar[e[t+7]]+"-"+Ar[e[t+8]]+Ar[e[t+9]]+"-"+Ar[e[t+10]]+Ar[e[t+11]]+Ar[e[t+12]]+Ar[e[t+13]]+Ar[e[t+14]]+Ar[e[t+15]]).toLowerCase()}let k1;const yie=new Uint8Array(16);function vie(){if(!k1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k1=crypto.getRandomValues.bind(crypto)}return k1(yie)}const xie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),QD={randomUUID:xie};function G6(e,t,n){if(QD.randomUUID&&!e)return QD.randomUUID();e=e||{};const r=e.random??e.rng?.()??vie();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,bie(r)}function wie(e,t,n){const r=vu(e.folder);return A6({id:G6(),name:e.name,birthDay:e.birthDay??"",calendarType:e.calendarType??"solar",birthTime:e.birthTime,unknownTime:t,gender:e.gender,birthPlace:e.birthPlace,unknownPlace:n,relationship:e.relationship,memo:e.memo,folder:r,mingSikType:e.mingSikType,dateObj:e.dateObj||new Date},{requireName:!1})}function _ie(e,t,n,r){if(e==="name"&&!t.name)return{ok:!0,message:"  '' .",nextForm:{...t,name:""}};if(e==="birthDay"){const i=Fj(t.birthDay??"",t.calendarType??"solar");if(!i.ok)return{ok:!1,message:i.message};if(t.birthDay!==i.value)return{ok:!0,nextForm:{...t,birthDay:i.value}}}if(e==="birthTime"){const i=Hj(t.birthTime??"",n);if(!i.ok)return{ok:!1,message:i.message};if(i.value!==""&&t.birthTime!==i.value)return{ok:!0,nextForm:{...t,birthTime:i.value}}}return e==="birthPlace"&&!t.birthPlace&&!r?{ok:!1,message:"  ''  ."}:{ok:!0}}function Sie({form:e,setForm:t,stepIndex:n,setStepIndex:r,stepsLength:i,currentStepKey:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d,setToast:h,onSave:p}){const{add:b}=gie(),y=S.useCallback(()=>{const w=_ie(a,e,o,u);if(!w.ok){h(w.message??" .");return}if(w.nextForm&&(t(w.nextForm),w.message&&h(w.message)),n<i-1){r(n+1);return}const _=wie(e,o,u);if(!_.ok){h(_.message);return}const T=_.value;b(T),p(T),h(" !"),t({...H6}),l(!1),d(!1),r(0)},[a,e,o,u,h,t,n,i,r,b,p,l,d]),k=S.useCallback(w=>{if(w.key!=="Enter")return;const _=w.target,T=_.getAttribute("role");if(T==="radio"||T==="checkbox")return;const O=document.getElementById("mapModal");if(O&&O.contains(_))return;const j=_.tagName.toLowerCase(),C=_ instanceof HTMLInputElement?_.type:"";if(j==="textarea"){if(w.shiftKey)return;w.preventDefault(),y();return}if(C==="radio"||C==="checkbox"){w.preventDefault(),_ instanceof HTMLInputElement&&_.click();return}j==="button"&&_.type!=="submit"||(w.preventDefault(),y())},[y]);return{handleNext:y,handleFormKeyDown:k}}function kie({onSave:e}){const t=die(),n=pie({form:t.form,unknownTime:t.unknownTime,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});fie({currentStepKey:n.currentStep.key,birthPlace:t.form.birthPlace,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});const r=Sie({form:t.form,setForm:t.setForm,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,stepsLength:n.steps.length,currentStepKey:n.currentStep.key,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,setToast:t.setToast,onSave:e});return{steps:n.steps,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,currentStep:n.currentStep,form:t.form,setForm:t.setForm,toast:t.toast,setToast:t.setToast,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,lunarPreview:n.lunarPreview,handleNext:r.handleNext,handleFormKeyDown:r.handleFormKeyDown,displayValue:n.displayValue,CALENDAR_OPTIONS:n.CALENDAR_OPTIONS,MING_OPTIONS:n.MING_OPTIONS,GENDER_OPTIONS:n.GENDER_OPTIONS,nextIndex:n.nextIndex,focusById:n.focusById,isDST:n.isDST}}function Eie({onSave:e,onClose:t}){const n=kie({onSave:e});return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[n.toast&&g.jsx(F6,{message:n.toast,onClose:()=>n.setToast(null)}),n.steps.slice(0,n.stepIndex).map((r,i)=>g.jsxs("button",{onClick:()=>n.setStepIndex(i),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:r.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:n.displayValue(r.key)})]},r.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:r=>{r.preventDefault(),n.handleNext()},onKeyDown:n.handleFormKeyDown,children:[g.jsx("label",{className:"block mb-2 font-bold",children:n.currentStep.label}),n.currentStep.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.name||"",onChange:r=>n.setForm({...n.form,name:r.target.value})}),n.currentStep.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.birthDay||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthDay:i.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:n.CALENDAR_OPTIONS.map(({value:r,label:i,id:a})=>{const o=n.form.calendarType===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:a,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:a,id:`${a}_lbl`,role:"radio","aria-checked":o,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":o?"true":"false",onKeyDown:l=>{if(l.stopPropagation(),l.key===" "||l.key==="Enter"){l.preventDefault(),n.setForm({...n.form,calendarType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(l.key))return;l.preventDefault();const d=n.CALENDAR_OPTIONS.findIndex(b=>b.value===n.form.calendarType),h=n.nextIndex(d<0?0:d,n.CALENDAR_OPTIONS.length,l.key),p=n.CALENDAR_OPTIONS[h].value;n.setForm({...n.form,calendarType:p}),n.focusById(`${n.CALENDAR_OPTIONS[h].id}_lbl`)},onClick:l=>{l.preventDefault(),n.setForm({...n.form,calendarType:r})},children:i})]},r)})})]}),n.form.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:n.lunarPreview})}),n.form.birthDay&&n.form.birthDay.length===8&&(()=>{const r=Number(n.form.birthDay.slice(0,4)),i=Number(n.form.birthDay.slice(4,6)),a=Number(n.form.birthDay.slice(6,8));return n.isDST(r,i,a)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"  ."}):null})()]}),n.currentStep.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.unknownTime?"":n.form.birthTime||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthTime:i.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:n.unknownTime}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":n.unknownTime,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownTime?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownTime(!n.unknownTime))},onClick:r=>{r.preventDefault(),n.setUnknownTime(!n.unknownTime)},children:""})]})]}),n.currentStep.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:n.MING_OPTIONS.map(r=>{const i=`ming_${r}`,a=(n.form.mingSikType??"/")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,mingSikType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.mingSikType??"/",d=n.MING_OPTIONS.indexOf(u),h=n.nextIndex(d,n.MING_OPTIONS.length,o.key),p=n.MING_OPTIONS[h];n.setForm({...n.form,mingSikType:p}),n.focusById(`ming_${p}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,mingSikType:r})},children:[r," "]})]},r)})}),n.currentStep.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:n.GENDER_OPTIONS.map(r=>{const i=`gender_${r}`,a=(n.form.gender??"")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,gender:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.gender??"",d=n.GENDER_OPTIONS.indexOf(u),h=n.nextIndex(d,n.GENDER_OPTIONS.length,o.key),p=n.GENDER_OPTIONS[h];n.setForm({...n.form,gender:p}),n.focusById(`gender_${p}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,gender:r})},children:r})]},r)})}),n.currentStep.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(h4,{onSelect:r=>n.setForm({...n.form,birthPlace:r}),value:n.unknownPlace?"":n.form.birthPlace?.name??""}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":n.unknownPlace,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownPlace?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownPlace(!n.unknownPlace))},onClick:r=>{r.preventDefault(),n.setUnknownPlace(!n.unknownPlace)},children:""})]})]}),n.currentStep.key==="relationship"&&g.jsx(I6,{value:n.form.relationship||"",onChange:r=>n.setForm({...n.form,relationship:r})}),n.currentStep.key==="folder"&&g.jsx(aie,{value:vu(n.form.folder),onChange:r=>n.setForm({...n.form,folder:r})}),n.currentStep.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.memo||"",onChange:r=>n.setForm({...n.form,memo:r.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:n.stepIndex===n.steps.length-1?"":""})]})]})})]})}var Zg={},eP;function jie(){if(eP)return Zg;eP=1,Zg.match=a,Zg.parse=o;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function a(h,p){return o(h).some(function(b){var y=b.inverse,k=b.type==="all"||p.type===b.type;if(k&&y||!(k||y))return!1;var w=b.expressions.every(function(_){var T=_.feature,O=_.modifier,j=_.value,C=p[T];if(!C)return!1;switch(T){case"orientation":case"scan":return C.toLowerCase()===j.toLowerCase();case"width":case"height":case"device-width":case"device-height":j=d(j),C=d(C);break;case"resolution":j=u(j),C=u(C);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":j=l(j),C=l(C);break;case"grid":case"color":case"color-index":case"monochrome":j=parseInt(j,10)||1,C=parseInt(C,10)||0;break}switch(O){case"min":return C>=j;case"max":return C<=j;default:return C===j}});return w&&!y||!w&&y})}function o(h){return h.split(",").map(function(p){p=p.trim();var b=p.match(e),y=b[1],k=b[2],w=b[3]||"",_={};return _.inverse=!!y&&y.toLowerCase()==="not",_.type=k?k.toLowerCase():"all",w=w.match(/\([^\)]+\)/g)||[],_.expressions=w.map(function(T){var O=T.match(t),j=O[1].toLowerCase().match(n);return{modifier:j[1],feature:j[2],value:O[2]}}),_})}function l(h){var p=Number(h),b;return p||(b=h.match(/^(\d+)\s*\/\s*(\d+)$/),p=b[1]/b[2]),p}function u(h){var p=parseFloat(h),b=String(h).match(i)[1];switch(b){case"dpcm":return p/2.54;case"dppx":return p*96;default:return p}}function d(h){var p=parseFloat(h),b=String(h).match(r)[1];switch(b){case"em":return p*16;case"rem":return p*16;case"cm":return p*96/2.54;case"mm":return p*96/2.54/10;case"in":return p*96;case"pt":return p*72;case"pc":return p*72/12;default:return p}}return Zg}var E1,tP;function Tie(){if(tP)return E1;tP=1;var e=jie().match,t=typeof window<"u"?window.matchMedia:null;function n(i,a,o){var l=this,u;t&&!o&&(u=t.call(window,i)),u?(this.matches=u.matches,this.media=u.media,u.addListener(p)):(this.matches=e(i,a),this.media=i),this.addListener=d,this.removeListener=h,this.dispose=b;function d(y){u&&u.addListener(y)}function h(y){u&&u.removeListener(y)}function p(y){l.matches=y.matches,l.media=y.media}function b(){u&&u.removeListener(p)}}function r(i,a,o){return new n(i,a,o)}return E1=r,E1}var Aie=Tie();const Nie=Si(Aie);var Oie=/[A-Z]/g,Cie=/^ms-/,j1={};function Mie(e){return"-"+e.toLowerCase()}function Y6(e){if(j1.hasOwnProperty(e))return j1[e];var t=e.replace(Oie,Mie);return j1[e]=Cie.test(t)?"-"+t:t}function Die(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let a=0;a<i;a++){const o=n[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}var T1={exports:{}},A1,nP;function Pie(){if(nP)return A1;nP=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return A1=e,A1}var N1,rP;function Rie(){if(rP)return N1;rP=1;var e=Pie();function t(){}function n(){}return n.resetWarningCache=t,N1=function(){function r(o,l,u,d,h,p){if(p!==e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},N1}var iP;function Lie(){return iP||(iP=1,T1.exports=Rie()()),T1.exports}var Iie=Lie();const It=Si(Iie),Wr=It.oneOfType([It.string,It.number]),q6={all:It.bool,grid:It.bool,aural:It.bool,braille:It.bool,handheld:It.bool,print:It.bool,projection:It.bool,screen:It.bool,tty:It.bool,tv:It.bool,embossed:It.bool},$ie={orientation:It.oneOf(["portrait","landscape"]),scan:It.oneOf(["progressive","interlace"]),aspectRatio:It.string,deviceAspectRatio:It.string,height:Wr,deviceHeight:Wr,width:Wr,deviceWidth:Wr,color:It.bool,colorIndex:It.bool,monochrome:It.bool,resolution:Wr,type:Object.keys(q6)},{type:fMe,...Bie}=$ie,zie={minAspectRatio:It.string,maxAspectRatio:It.string,minDeviceAspectRatio:It.string,maxDeviceAspectRatio:It.string,minHeight:Wr,maxHeight:Wr,minDeviceHeight:Wr,maxDeviceHeight:Wr,minWidth:Wr,maxWidth:Wr,minDeviceWidth:Wr,maxDeviceWidth:Wr,minColor:It.number,maxColor:It.number,minColorIndex:It.number,maxColorIndex:It.number,minMonochrome:It.number,maxMonochrome:It.number,minResolution:Wr,maxResolution:Wr,...Bie},Uie={...q6,...zie};var Fie={all:Uie};const Hie=e=>`not ${e}`,Gie=(e,t)=>{const n=Y6(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?Hie(n):`(${n}: ${t})`},Yie=e=>e.join(" and "),qie=e=>{const t=[];return Object.keys(Fie.all).forEach(n=>{const r=e[n];r!=null&&t.push(Gie(n,r))}),Yie(t)},Kie=S.createContext(void 0),Wie=e=>e.query||qie(e),aP=e=>e?Object.keys(e).reduce((n,r)=>(n[Y6(r)]=e[r],n),{}):void 0,K6=()=>{const e=S.useRef(!1);return S.useEffect(()=>{e.current=!0},[]),e.current},Vie=e=>{const t=S.useContext(Kie),n=()=>aP(e)||aP(t),[r,i]=S.useState(n);return S.useEffect(()=>{const a=n();Die(r,a)||i(a)},[e,t]),r},Zie=e=>{const t=()=>Wie(e),[n,r]=S.useState(t);return S.useEffect(()=>{const i=t();n!==i&&r(i)},[e]),n},Xie=(e,t)=>{const n=()=>Nie(e,t||{},!!t),[r,i]=S.useState(n),a=K6();return S.useEffect(()=>{if(a){const o=n();return i(o),()=>{o&&o.dispose()}}},[e,t]),r},Jie=e=>{const[t,n]=S.useState(e.matches);return S.useEffect(()=>{const r=i=>{n(i.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},Qie=(e,t,n)=>{const r=Vie(t),i=Zie(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const a=Xie(i,r),o=Jie(a);return K6(),S.useEffect(()=>{},[o]),S.useEffect(()=>()=>{a&&a.dispose()},[]),o},W6={Classic:"",Modern:""};function io(e,t){const r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return r?r[t]??"":""}function eae(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function tae(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function nae(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function rae(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function ao(e){const{baseBranch:t,targetBranch:n,era:r,gaehwa:i}=e;return!t||!n?"":r===""?i?eae(t,n):tae(t,n):i?nae(t,n):rae(t,n)}const Qr=Ko()(z$((e,t)=>{const n=new Date,r="/",i=127.5,a=0,o=(b,y)=>y?new Date(b.getTime()+y*60*1e3):b,l=i,u=o(n,a),d=ct(u,l),h=At(u,l),p=pt(u,r);return{date:n,scope:"",rule:r,lon:i,dstOffsetMinutes:a,yearGZ:d,monthGZ:h,dayGZ:p,setDate:b=>{const{rule:y,lon:k,dstOffsetMinutes:w}=t(),_=typeof k=="number"?k:void 0,T=o(b,w);e({date:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:pt(T,y)})},resetDate:()=>{const{rule:b,lon:y,dstOffsetMinutes:k}=t(),w=new Date,_=typeof y=="number"?y:void 0,T=o(w,k);e({date:w,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:pt(T,b)})},resetMonth:()=>{const{lon:b,dstOffsetMinutes:y}=t(),k=new Date,w=typeof b=="number"?b:void 0,_=o(k,y);e({date:k,monthGZ:At(_,w)})},setScope:b=>e({scope:b}),setRule:b=>{const{date:y,lon:k,dstOffsetMinutes:w}=t(),_=typeof k=="number"?k:void 0,T=o(y,w);e({rule:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:pt(T,b)})},setLon:b=>{const{date:y,rule:k,dstOffsetMinutes:w}=t(),_=typeof b=="number"?b:void 0,T=o(y,w);e({lon:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:pt(T,k)})},setDstOffsetMinutes:b=>{const{date:y,rule:k,lon:w}=t(),_=typeof w=="number"?w:void 0,T=o(y,b);e({dstOffsetMinutes:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:pt(T,k)})},setFromEvent:(b,y)=>{const{rule:k,lon:w,dstOffsetMinutes:_}=t(),T=typeof w=="number"?w:void 0,O=o(b.at,_);e({date:b.at,scope:y,yearGZ:ct(O,T),monthGZ:At(O,T),dayGZ:pt(O,k)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),iae=60*1e3,V6=60*iae,aae=24*V6,oae=(e,t)=>{const n=new Date(e.getTime()),r=n.getFullYear()+t,i=n.getMonth(),a=n.getDate();return new Date(Date.UTC(r,i,a,n.getUTCHours(),n.getUTCMinutes()))},Qm=e=>{const t=new Date(e);return t.setSeconds(0,0),t},Xb={HOUR:V6,DAY:aae},Z6=[315,345,15,45,75,105,135,165,195,225,255,285],sae=e=>{const t=e.getFullYear(),n=[];for(const r of[t-1,t])for(const i of Z6){const a=pn(r,i);a.getTime()<=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>i.getTime()-r.getTime()),Qm(n[0])},lae=e=>{const t=e.getFullYear(),n=[];for(const r of[t,t+1])for(const i of Z6){const a=pn(r,i);a.getTime()>=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>r.getTime()-i.getTime()),Qm(n[0])},_i=e=>{const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],r={deg:315,name:""},i=n.map(l=>({name:l.name,date:pn(t,l.deg)})).concat([{name:r.name,date:pn(t+1,r.deg)},{name:"",date:pn(t+1,285)}]),a=pn(t,315),o=pn(t+1,315);return i.filter(l=>l.date>=a&&l.date<o).sort((l,u)=>l.date.getTime()-u.date.getTime())},X6=(()=>{const e=[];for(let t=0;t<60;t+=1)e.push(`${Jr[t%10]}${xi[t%12]}`);return e})(),cae=e=>{const t=X6.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t},ep=(e,t,n=1)=>{const r=cae(e),i=t==="forward"?n:-n;return X6[(r+i+60*1e3)%60]},Ad=2*Xb.HOUR,oP=e=>(Math.floor((e+1)/2)*2-1+24)%24,uae=(e,t)=>{const n=e.getHours(),r=oP(n),i=new Date(e);i.setHours(r,0,0,0),i.getTime()>e.getTime()&&i.setTime(i.getTime()-Ad);const a=new Date(i.getTime()+Ad),o=e.getTime()-i.getTime(),l=a.getTime()-e.getTime();if(o<0||o>Ad||l<0||l>Ad){const u=new Date(e);for(u.setHours(oP(e.getHours()),0,0,0);u.getTime()>e.getTime();)u.setTime(u.getTime()-Ad);const d=new Date(u.getTime()+Ad),h=e.getTime()-u.getTime(),p=d.getTime()-e.getTime();return t==="backward"?h:p}return t==="backward"?o:l},J6=(e,t,n,r=120)=>{const i=Qm(e),a=uae(i,n),o=10*Xb.DAY/(2*Xb.HOUR),l=Qm(new Date(i.getTime()+a*o)),u=oae(e,r).getTime(),d=[];let h=ep(t,n,1);for(let p=l.getTime();p<=u;p+=10*Xb.DAY)d.push({at:new Date(p),gz:h}),h=ep(h,n,1);return{firstChange:l,events:d}},Q6=(e,t)=>{const n=t==="forward"?e===""?"":"":e===""?"":"";return r=>r===n},e7=(e,t,n,r)=>{const i=Q6(r,n);let a=t;const o=[];for(const l of e.events){const u=l.gz.charAt(1);i(u)&&(a=ep(a,n,1),o.push({at:l.at,gz:a}))}return{events:o}},w2=7200*1e3,dae=(e,t,n)=>{const r=e.charAt(0),i=e.charAt(1),a=Jr.indexOf(r),o=xi.indexOf(i),l=t==="forward"?n:-n,u=(a+l%10+10)%10,d=(o+l%12+12)%12;return Jr[u]+xi[d]},fae=e=>(Math.floor((e+1)/2)*2-1+24)%24,hae=e=>{const t=e.getHours(),n=fae(t),r=new Date(e);return r.setHours(n,0,0,0),r.getTime()>e.getTime()&&r.setTime(r.getTime()-w2),r},mae=(e,t)=>{const n=_i(e).sort((p,b)=>p.date.getTime()-b.date.getTime()),r=e.getTime();let i;if(t==="forward"){let p=n.find(b=>b.date.getTime()>r);if(!p){const b=new Date(e.getFullYear()+1,0,2,12,0,0,0);p=_i(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).find(k=>k.date.getTime()>r)}if(!p)throw new Error("    .");i=p.date}else{let p=n.filter(b=>b.date.getTime()<r);if(p.length===0){const b=new Date(e.getFullYear()-1,11,31,12,0,0,0);p=_i(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).filter(k=>k.date.getTime()<r)}if(p.length===0)throw new Error("    .");i=p[p.length-1].date}const a=hae(e),o=t==="forward"?w2:-w2,l=i.getTime();let u=new Date(a.getTime()),d=0;const h=365*24/2;for(;d<h;){const p=u.getTime();if(t==="forward"){if(p>=l)return u}else if(p<=l)return u;u=new Date(u.getTime()+o),d++}throw new Error("     .")},pae=(e,t)=>{const i=Math.abs(t.getTime()-e.getTime())*120;return new Date(e.getTime()+i)},Dp=(e,t,n,r=120,i)=>{console.log(i);const a=mae(e,n),o=pae(e,a),l=Math.floor(r/10),u=[];for(let d=0;d<l;d++){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const p=dae(t,n,d+1);u.push({at:h,gz:p})}return u.sort((d,h)=>d.at.getTime()-h.at.getTime()),{natalMonthPillar:t,firstChange:o,mPillars:[],events:u}},gae=(e,t)=>{const r=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(r))},t7=(e,t,n,r,i)=>{const a=Q6(r,n);let o=t;const l=[];for(const u of e.events){const d=u.gz.charAt(1);a(d)&&(o=ep(o,n,1),l.push({at:u.at,gz:o,age:gae(i,u.at)}))}return{events:l}},bae=e=>{const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=12,a=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(i=Number(e.birthTime.slice(0,2)),a=Number(e.birthTime.slice(2,4))),new Date(t,n-1,r,i,a,0,0)},sx=(e,t)=>{const n=bae(e),r=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=Op(n,e.birthPlace?.lon??null,r),a=t?.dstOffsetMinutes??0,o=a!==0?new Date(i.getTime()+a*60*1e3):i;return Qm(o)},Vj=(e,t,n)=>{const r=e.birthPlace?.lon??127.5,i=sx(e,n),a=pt(i,t),o=no(i,t,a.charAt(0));return{year:ct(i,r),month:At(i,r),day:a,hour:o}},yae=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Jr[t%10]}${xi[t%12]}`);return e})(),vae=e=>yae.indexOf(e),O1=e=>{if(vae(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function xae(e,t="/",n=0){const r=S.useMemo(()=>Mf(e),[e]),i=S.useMemo(()=>sx(r,{dstOffsetMinutes:n}),[r,n]),a=S.useMemo(()=>Vj(r,t,{dstOffsetMinutes:n}),[r,t,n]);return S.useMemo(()=>{const o=Dp(i,a.month,r.dir,120,r?.birthPlace?.lon??127.5),l=new Date;function u(C,M){let P=null;const I=M.getTime();for(const U of C)if(U.at.getTime()<=I)P=U;else break;return P}const d=u(o.events,l)?.gz??a.month,h=O1(d),p=l.getFullYear(),b=pn(p,315),k=b&&l>=b?p:p-1,w=ct(new Date(k,1,10,0,0,0),127.5),_=O1(w),T=At(l,127.5),O=O1(T),j=[];return O&&j.push({key:"wolun",label:"",data:O}),_&&j.push({key:"seun",label:"",data:_}),h&&j.push({key:"daeun",label:"",data:h}),j},[i,r.dir,a.month,r.birthPlace?.lon])}const wae=365.2425*24*60*60*1e3,_ae=1440*60*1e3,Sae=(e,t)=>(t.getTime()-e.getTime())/wae,kae=e=>e<1?1+e:e,sP=e=>Math.floor(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())/_ae),Eae=(e,t)=>{try{const n=t==="forward"?lae(e):sae(e),r=Math.abs(sP(n)-sP(e));return(t==="forward"?r+1:r)/3}catch{return 0}},jae=(e,t,n,r)=>{const i=Eae(e,n),a=Math.max(1,Math.floor(i+1e-9)),o=new Date(e.getFullYear()+Math.max(0,a-1),0,1,12,0,0,0),l=Math.max(0,Math.floor(r/10)),u=[];for(let d=0;d<l;d+=1){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const p=ep(t,n,d+1);u.push({at:h,gz:p})}return{baseAge:a,events:u}};function ac(e,t="/",n=100,r=0){const i=tn(d=>d.settings.daewoonDisplayBase),a=S.useMemo(()=>Mf(e),[e]),o=S.useMemo(()=>sx(a,{dstOffsetMinutes:r}),[a,r]),l=S.useMemo(()=>Vj(a,t,{dstOffsetMinutes:r}),[a,t,r]),u=a.dir==="backward"?"backward":"forward";return S.useMemo(()=>{const d=(k,w)=>k.map((_,T)=>{const O=T===0?1:w+(T-1)*10,j=_.at.getFullYear();return{..._,age:O,startYear:j}});if(i===""){const k=jae(o,l.month,u,n),w={at:o,gz:l.month};return d([w,...k.events],k.baseAge)}const h=Dp(o,l.month,u,n,a.birthPlace?.lon??127.5),p={at:o,gz:h.natalMonthPillar},b=h.events[0]?Sae(o,h.events[0].at):0,y=kae(b);return d([p,...h.events],y)},[o,l.month,u,n,a.birthPlace?.lon,i])}function C1(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function Tae(e,t){if(!Array.isArray(e)||e.length===0||!C1(t))return{gz:"",at:t,index:-1};const n=e;for(let a=0;a<n.length;a++){const o=n[a],l=n[a+1];if(!C1(o.at))continue;if(t.getTime()>=o.at.getTime()&&(!l||C1(l.at)&&t.getTime()<l.at.getTime()))return{gz:o.gz??"",at:o.at,index:a}}if(t.getTime()<n[0].at.getTime()){const a=n[0];return{gz:a.gz??"",at:a.at,index:0}}const r=n.length-1,i=n[r];return{gz:i.gz??"",at:i.at,index:r}}function lx(e,t,n,r){const{date:i,rule:a,lon:o}=Qr(),l=S.useMemo(()=>n??i??new Date,[n,i]),u=r?.dstOffsetMinutes??0,d=ac(e,e?.mingSikType,100,u),h=u!==0?new Date(l.getTime()+u*60*1e3):l,{gz:p}=Tae(d,h);return S.useMemo(()=>{try{const b=o??e?.birthPlace?.lon??127.5,y=a??e?.mingSikType??t??"/";return{dae:{gz:p,at:h},se:{gz:ct(h,b),at:h},wol:{gz:At(h,b),at:h},il:{gz:pt(h,y),at:h}}}catch{const b=new Date;return{dae:{gz:"",at:b},se:{gz:"",at:b},wol:{gz:"",at:b},il:{gz:"",at:b}}}},[a,o,e,t,p,h])}const Cy=Ko(e=>({useDST:!1,setUseDST:t=>e({useDST:t}),toggleDST:()=>e(t=>({useDST:!t.useDST}))})),Fs=()=>Cy(e=>e.useDST?-60:0),Sn=["","","",""],lP={month:1},cP=["","","",""],Pp=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],n7=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],uP=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Aae={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Pe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const r=t.match(/([]).*?([])/);if(r){const i=Aae[r[1]]??r[1],a=_2[r[2]]??r[2];return`${i}${a}`}return""}const My=e=>e&&e.length>=1?e[0]:"",$i=e=>e&&e.length>=2?e[1]:"",Zj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Xj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Jj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Qj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],eT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],tT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],nT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],rT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],iT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],aT=[{pair:["",""],label:""}],oT=new Set(["","","",""]),Dy=new Set(["","","",""]),sT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],r7=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}];function gi(e,t,n){for(const{pair:[r,i],label:a}of e)if(t===r&&n===i||t===i&&n===r)return a;return null}function ln(e,t){e.includes(t)||e.push(t)}const Nae=e=>[...e].sort((t,n)=>t-n).map(t=>Sn[t]).join("X");function Oae(e,t){const n=[];for(const r of e)for(const i of t){if(r===i)continue;const a=Math.min(r,i),o=Math.max(r,i);n.push([a,o])}return n.sort((r,i)=>{const a=Math.abs(r[0]-r[1]),o=Math.abs(i[0]-i[1]);return a!==o?a-o:0})}function Cae(e){const t=[],n=[...e].sort((r,i)=>r-i);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const a=n[r],o=n[i];t.push([a,o])}return t}const i7=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function Mae(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const a7=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Dae(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(i=>i?.normalize("NFKC")??""))).filter(Boolean),n=t.some(i=>i.includes("")||i.includes("()")),r=t.some(i=>i.includes("")||i.includes("()"));return t.filter(i=>!(n&&(i.includes("")||i.includes("")||i.includes(""))||r&&(i.includes("")||i.includes("")||i.includes(""))))}function o7(e){for(const t of a7){const r=(e[t]??[]).map(i=>i&&i.normalize("NFKC")).filter(i=>!!i&&!Mae(i));e[t]=Array.from(new Set(r))}return e.jijiHyeong=Dae(e.jijiHyeong),e}function Pae(e,t){for(let n=0;n<e.length;n++)if((e[n]??"").includes(t))return n;return-1}function Rae(e,t){for(const n of Pp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function dP(e,t,n){Pae(e,n)<0&&ln(e,t)}function cx(e,t={}){const{emitGanjiAmhap:n=!0,fillNone:r=!0}=t,i=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],a={title:"",cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},o=i.map(b=>My(b)),l=i.map(b=>$i(b));function u(b,y){if(b===y)return;const k=o[b],w=o[y];if(!k||!w)return;const _=gi(Zj,k,w);_&&ln(a.cheonganHap,`#${Sn[b]}X${Sn[y]}_${_}`);const T=gi(Xj,k,w);T&&ln(a.cheonganChung,`#${Sn[b]}X${Sn[y]}_${T}`)}for(let b=0;b<4;b++)for(let y=b+1;y<4;y++)u(b,y);function d(b,y,k,w,_=!0){const T=[],O=[];for(let C=0;C<4;C++)l[C]===b&&T.push(C),l[C]===y&&O.push(C);const j=Oae(T,O);for(const[C,M]of j){const P=`#${Sn[C]}X${Sn[M]}_${k}`;_?dP(w,P,k):ln(w,P)}}const h=(b,y)=>{for(const{pair:[k,w],label:_}of b)d(k,w,_,y)};h(Jj,a.jijiYukhap),h(Qj,a.jijiChung),h(eT,a.jijiPa),h(tT,a.jijiHae),h(nT,a.jijiWonjin),h(rT,a.jijiGwimun);for(const b of Pp){if(!b.members.every(_=>l.includes(_)))continue;const k=[];for(let _=0;_<4;_++)b.members.includes(l[_])&&k.push(_);const w=Nae(k);ln(a.jijiSamhap,`#${w}_${b.name}`)}for(const{pair:[b,y],label:k}of r7)Rae(b,y)&&d(b,y,k,a.jijiBanhap,!1);for(const{pair:[b,y],label:k}of iT)d(b,y,k,a.jijiHyeong);for(const{pair:[b,y],label:k}of aT)d(b,y,k,a.jijiHyeong);for(const b of oT){const y=l.map((k,w)=>k===b?w:-1).filter(k=>k>=0);if(!(y.length<2))for(const[k,w]of Cae(y)){const _=`#${Sn[k]}X${Sn[w]}_${b}`;dP(a.jijiHyeong,_,`${b}`)}}for(const{pair:[b,y],label:k}of sT)d(b,y,k,a.amhap);if(n)for(let b=0;b<4;b++){const y=i[b]??"";if(y.length<2)continue;const k=`${y[0]}${y[1]}`;Dy.has(k)&&ln(a.ganjiAmhap,`#${i7(Sn[b])}_${k}`)}const p=o7(a);if(r)for(const b of Object.keys(p)){if(b==="title")continue;const y=p[b];Array.isArray(y)&&y.length===0&&(p[b]=["#"])}return p}function Lae(e,t){for(const n of Pp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function Iae(e,t){const n=[],r=new Set;for(const i of e)for(const a of t){if(i===a)continue;const o=Math.min(i,a),l=Math.max(i,a),u=`${o}-${l}`;r.has(u)||(r.add(u),n.push([o,l]))}return n}function Ul(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,r=[Pe(e.natal[0]??""),Pe(e.natal[1]??""),Pe(e.natal[2]??""),Pe(e.natal[3]??"")],a=[Pe(e.daewoon??""),Pe(e.sewoon??""),Pe(e.wolwoon??"")].some(p=>p.length>=2),o={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},l=r.map(p=>{const b=$i(p??"");return _2[b]??b});for(const{pair:[p,b],label:y}of r7){if(!Lae(p,b))continue;const k=[],w=[];for(let T=0;T<4;T++)l[T]===p&&k.push(T),l[T]===b&&w.push(T);const _=Iae(k,w);for(const[T,O]of _){const j=`#${Sn[T]}X${Sn[O]}_${y}`;ln(o.jijiBanhap,j)}}if(n&&a)for(let p=0;p<4;p++){const b=r[p]??"";if(b.length<2)continue;const y=`${b[0]}${b[1]}`;Dy.has(y)&&ln(o.ganjiAmhap,`#${i7(Sn[p])}_${y}`)}const u=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let d=!1,h=!1;for(const[p,b]of u){if(!b)continue;const y=Pe(b);if(!y||y.length<2)continue;const k=My(y),w=$i(y);{const T=`${k}${w}`;Dy.has(T)&&ln(o.ganjiAmhap,`#${p}_${T}`)}for(let T=0;T<4;T++){const O=r[T]??"";if(O.length<2)continue;const j=Sn[T],C=My(O),M=$i(O),P=gi(Zj,k,C);P&&ln(o.cheonganHap,`#${p}X${j}_${P}`);const I=gi(Xj,k,C);I&&ln(o.cheonganChung,`#${p}X${j}_${I}`);const U=gi(Jj,w,M);U&&ln(o.jijiYukhap,`#${p}X${j}_${U}`);const V=gi(Qj,w,M);V&&ln(o.jijiChung,`#${p}X${j}_${V}`);const q=gi(eT,w,M);q&&ln(o.jijiPa,`#${p}X${j}_${q}`);const H=gi(tT,w,M);H&&ln(o.jijiHae,`#${p}X${j}_${H}`);const B=gi(nT,w,M);B&&ln(o.jijiWonjin,`#${p}X${j}_${B}`);const W=gi(rT,w,M);W&&ln(o.jijiGwimun,`#${p}X${j}_${W}`);const Z=gi(iT,w,M);if(Z)ln(o.jijiHyeong,`#${p}X${j}_${Z}`);else{const G=gi(aT,w,M);G?ln(o.jijiHyeong,`#${p}X${j}_${G}`):w===M&&oT.has(w)&&ln(o.jijiHyeong,`#${p}X${j}_${w}${M}`)}const X=gi(sT,w,M);X&&ln(o.amhap,`#${p}X${j}_${X}`)}for(const T of Pp){if(!T.members.includes(w))continue;const O=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:Sn[M]})).filter(C=>C.b&&O.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>Sn.indexOf(P)-Sn.indexOf(I));ln(o.jijiSamhap,`#${p}X${C}X${M}_(${T.name})`)}}for(const T of uP){if(!T.members.includes(w))continue;const O=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:Sn[M]})).filter(C=>C.b&&O.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>Sn.indexOf(P)-Sn.indexOf(I));ln(o.jijiHyeong,`#${p}X${C}X${M}_${T.name}`),T.name===""&&(d=!0),T.name===""&&(h=!0)}}const _=[...r.map((T,O)=>({b:_2[$i(T)]??$i(T),pos:Sn[O]}))];for(const T of n7){const O=_.filter(j=>T.members.includes(j.b));if(new Set(O.map(j=>j.b)).size===3){const j=O.map(C=>C.pos).join("X");ln(o.jijiBanghap,`#${j}_(${T.name})`)}}}{const p=[],b=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[y,k]of b){const w=Pe(k??"");w.length>=2&&p.push({kind:y,b:$i(w)})}if(p.length>=2){const y=r.map((k,w)=>({pos:Sn[w],b:$i(k)}));for(const k of uP)for(let w=0;w<p.length;w++)for(let _=w+1;_<p.length;_++){const T=p[w],O=p[_];for(const j of y){const C=new Set([j.b,T.b,O.b]);if(C.size===3&&k.members.every(M=>C.has(M))){const M=[T.kind,O.kind].sort((I,U)=>cP.indexOf(I)-cP.indexOf(U)).join("X"),P=`${j.pos}X${M}`;ln(o.jijiHyeong,`#${P}_${k.name}`),k.name===""&&(d=!0),k.name===""&&(h=!0)}}}}}return(d||h)&&(o.jijiHyeong=o.jijiHyeong.filter(p=>!(d&&/(||)/.test(p)||h&&/(||)/.test(p)))),o7($ae(o))}function $ae(e){const t=/(|||)X(|||)/,n={...e};for(const r of Object.keys(e)){if(r==="title")continue;const i=e[r];Array.isArray(i)&&(n[r]=i.filter(a=>!t.test(a??"")))}return n}const Bae={:"",:"",:"",:"",:""},fP={:"",:"",:"",:"",:""},zae={:"",:"",:"",:"",:""},Uae={:"",:"",:"",:"",:""},Fae={:.15,:.1,:-.15,:-.2,:-.25};function Hae(e,t){const n=Array.from(new Set(t)).sort((r,i)=>r-i);if(n.length<3)return!1;for(let r=0;r<n.length;r++){const i=n[r],a=n[r+1],o=n[r+2];if(!(a==null||o==null)&&o-i<=2&&(e===i||e===a||e===o))return!0}return!1}function Gae(e){const t=e.includes(lP.month),n=Hae(lP.month,e)||e.length>=3;return t&&n?"":t||e.length>=2?"":""}function Yae(e,t,n,r){const i=r===""?2:r===""?1:.5;e[t]=(e[t]??0)-i,e[n]=(e[n]??0)+i}function qae(e,t,n={}){const{includeBanghap:r=!0,includeSamhap:i=!0}=n,a=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],o=a.map(h=>$i(h)).filter(Boolean),l=[],u={...t},d=(h,p)=>{const b=[];for(let T=0;T<a.length;T++){const O=$i(a[T]??"");p.members.includes(O)&&b.push(T)}if(!p.members.every(T=>o.includes(T)))return;const k=Gae(b),w=p.out,_=fP[w];Yae(u,_,w,k),l.push({type:h,name:p.name,out:p.out,strength:k})};if(i)for(const h of Pp)d("",h);if(r)for(const h of n7)d("",h);return{applied:l,score:u,strengthAdj:Fae,shengNext:Bae,shengPrev:fP,ke:zae,keInv:Uae}}function Py(e){return Sn[e]}function hP(e){const t=new Map,n=new Map;for(let r=0;r<4;r++){const i=Pe(e[r]??""),a=My(i),o=$i(i);a&&t.set(a,[...t.get(a)??[],r]),o&&n.set(o,[...n.get(o)??[],r])}return{stemPos:t,branchPos:n}}function tm(e,t,n){const r=[];for(const i of t)for(const a of n)r.push(`#${Py(i)}X${Py(a)}_${e}`);return r}function Kae(e,t){const n=hP(e),r=hP(t),i={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]},a=(l,u)=>{l.includes(u)||l.push(u)};for(const{pair:[l,u],label:d}of Zj){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],p=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&p.length)for(const b of tm(d,h,p))a(i.,b)}for(const{pair:[l,u],label:d}of Xj){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],p=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&p.length)for(const b of tm(d,h,p))a(i.,b)}const o=(l,u)=>{const d=Array.from(n.branchPos.keys()),h=Array.from(r.branchPos.keys());for(const p of d)for(const b of h){const y=gi(u,p,b);if(!y)continue;const k=n.branchPos.get(p)??[],w=r.branchPos.get(b)??[];for(const _ of tm(y,k,w))a(i[l],_)}};o("",Jj),o("",Qj),o("",eT),o("",tT),o("",nT),o("",rT),o("",iT),o("",aT);for(const l of oT){const u=n.branchPos.get(l)??[],d=r.branchPos.get(l)??[];if(!(!u.length||!d.length))for(const h of tm(`${l}`,u,d))a(i.,h)}for(const{label:l,pair:[u,d]}of sT){const h=[...n.branchPos.get(u)??[],...n.branchPos.get(d)??[]],p=[...r.branchPos.get(u)??[],...r.branchPos.get(d)??[]];if(!(!h.length||!p.length))for(const b of tm(l,h,p))a(i.,b)}{const l=Array.from(n.stemPos.keys()),u=Array.from(r.stemPos.keys());for(const d of l)for(const h of u){const p=n.stemPos.get(d)??[],b=r.stemPos.get(h)??[];for(const y of p){const k=$i(Pe(e[y]??"")),w=`${d}${k}`;if(Dy.has(w))for(const _ of b){const T=$i(Pe(t[_]??""));`${h}${T}`===w&&a(i.,`#${Py(y)}X${Py(_)}_${w}`)}}}}return i}const s7=new Set(Object.keys(Xn)),l7=new Set(Object.keys(ir)),Wae=e=>e.slice(0,1),Vae=e=>e.slice(-1);function js(e){return rf.has(e)?e:s7.has(e)?Xn[e]??e:e}function Dr(e){return Bm.has(e)?e:l7.has(e)?ir[e]??e:e}function Mo(e){return js(Wae(e))}function Qt(e){return Dr(Vae(e))}function Zae(e){if(!e)return null;const t=Array.from(String(e));let n=null,r=null;for(const i of t)!n&&(rf.has(i)||s7.has(i))&&(n=js(i)),(Bm.has(i)||l7.has(i))&&(r=Dr(i));return n&&r?{stem:n,branch:r}:null}function Xae(e){return e.map(Qt)}function Xg(e,t,n="classic"){const r=Mo(t),i=Qt(t),a=(n==="hgc"?Wv:Kv)[i]??[];return[r,...a].includes(e)}const S2=[["",""],["",""],["",""],["",""],["",""],["",""]],k2=[["",""],["",""],["",""],["",""],["",""],["",""]],Jae=new Set(["","","",""]),c7=[["",""],["",""]],Qae=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Rm(e,t,n){const r=Dr(t),i=Dr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return!0;return!1}function mP(e,t,n){const r=Dr(t),i=Dr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return`${a}${o}`;return`${r}${i}`}function Ry(e){for(const t of Qae)if(t.set.has(e))return t.voids;return null}function E2(e){const t=Dr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const r of n)if(r.group.has(t))return Array.from(r.years);return null}const nr={2:4,1:3,3:2,0:1},Gd={1:4,2:3,0:2,3:1},we={year:0,month:1,day:2,hour:3};function eoe(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const Eu=e=>e===0?"":e===1?"":e===2?"":"",Df=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",toe=(e,t)=>`#X${Eu(t)}_${e}`,Qd=(e,t,n)=>t===we.month&&n===we.day?`#X_${e}`:t===we.year&&n===we.month?`#X_${e}`:t===we.year&&n===we.day?`#X_${e}`:t===we.month&&n===we.hour?`#X_${e}`:t===we.day&&n===we.hour?`#X_${e}`:`#${Eu(t)}X${Eu(n)}_${e}`,Jg=(e,t)=>`#${Eu(t)}_${e}`,u7=(e,t)=>`#X${Eu(t)}_${e}`,noe=(e,t)=>`#(${e==="day"?"":""})X${Eu(t)}_`,Nd=e=>`#_${e}`,Od=(e,t)=>`#X${Df(t)}_${e}`,nm=(e,t)=>`#X${Df(t)}_${e}`,M1=(e,t,n)=>`#${Eu(n)}X${Df(t)}_${e}`,roe=(e,t)=>`#(${t==="day"?"":""})_${Df(e)}_`,ioe=(e,t)=>`#(${t==="day"?"":""})X${Df(e)}_`,pP=(e,t)=>`#X${Df(e)}_${t}`;function j2(e,t){const n=Dr(e),r=[we.day,we.month,we.hour,we.year];for(const i of r)if(Qt(t[i])===n)return{pos:i,weight:nr[i]??0};return null}function lT(e,t,n){return Qt(t[n])===Dr(e)?{pos:n,weight:nr[n]}:null}function aoe(e,t){const n=js(e),r=[we.day,we.month,we.hour,we.year];for(const i of r)if(Mo(t[i])===n)return{pos:i,weight:nr[i]??0};return null}const ooe=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Dr(t.trim())).filter(Boolean),xn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[js(t),ooe(n)])),soe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),d7=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),loe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),coe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),uoe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),doe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),foe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f7=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hoe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),moe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),poe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),goe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),boe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h7=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),yoe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),voe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),gP=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),xoe=xn({:"",:"",:"",:"",:""}),woe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bP=xn({:"",:"",:""}),yP=xn({:"",:"",:""}),_oe=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m7=xn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),p7=xn({:"",:"",:"",:"",:"",:"",:""}),Soe=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Dr(t.trim())).filter(Boolean),Na=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Dr(t),(Array.isArray(n)?n:[n]).map(r=>Dr(r))])),ux=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Dr(t),Soe(n)])),g7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},koe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),vP=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Eoe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),joe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Toe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Aoe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Noe=Na({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),Ooe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Coe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Moe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Doe=Na({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),x7=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Poe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Roe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Loe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ioe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),jn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Dr(t),(Array.isArray(n)?n:[n]).map(r=>Dr(r))])),$oe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Boe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Uoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Foe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Hoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Goe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Yoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),qoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Koe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Woe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Voe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Zoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Xoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Joe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Qoe=S7,ese=w7,tse=k7,nse=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rse=_7,ise=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ase=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ose=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""});function Rp(e,t){e.push(t)}function D1(e,t,n,r,i=0){const a=Gd[n]>=Gd[r]?n:r;e.push({name:Qd(t,n,r),weight:nr[a]+i,pos:a})}function sse(e,t,n,r,i){const a=Qt(e[we.year]),o=t[a];if(!o)return;const l=n==="MONTH"?[we.month]:n==="DAY"?[we.day]:n==="HOUR"?[we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);h&&Rp(i,{name:Qd(r,we.year,d),weight:h.weight,pos:d})}}function lse(e,t,n,r){const i=Qt(e[we.month]),a=t[i];if(!a)return;const o=js(a),l=aoe(o,e);l&&Rp(r,{name:u7(n,l.pos),weight:l.weight,pos:l.pos})}function xP(e,t,n,r,i="ALL"){const a=Qt(e[we.month]),o=t[a];if(!o)return;const l=i==="YEAR"?[we.year]:i==="DAY"?[we.day]:i==="HOUR"?[we.hour]:i==="DAY_HOUR"?[we.day,we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);if(!h)continue;const p=d===we.month?`#_${n}`:u7(n,d);Rp(r,{name:p,weight:h.weight,pos:d})}}function wP(e,t,n,r){const i=Qt(e[we.month]),a=t[i];if(!a)return;const o=e[we.day];a.includes(o)&&Rp(r,{name:Qd(n,we.month,we.day),weight:nr[we.day],pos:we.day})}function _P(e,t,n,r,i){const a=Mo(e[we.day]),o=t[a];if(!o)return;const l=i==="DAY"?[we.day]:i==="HOUR"?[we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);h&&Rp(r,{name:toe(n,d),weight:h.weight,pos:d})}}function cse({natal:e,daewoon:t,basis:n}){const r=Mo(e[we.day]),i=Qt(e[we.day]),a=Qt(e[we.month]),o=Qt(e[we.year]),l=Xae(e),u=[],d=[],h=[[$oe,"MONTH",""],[w7,"DAY",""],[zoe,"MONTH",""],[Uoe,"MONTH",""],[Foe,"ALL",""],[Hoe,"HOUR",""],[Goe,"ALL",""],[Yoe,"ALL",""],[qoe,"ALL",""],[S7,"ALL",""],[Koe,"ALL",""],[Woe,"ALL",""],[Voe,"ALL",""],[Zoe,"ALL",""],[Xoe,"ALL",""],[Joe,"ALL",""],[k7,"ALL",""],[Qoe,"ALL",""],[ese,"ALL",""],[tse,"ALL",""],[nse,"ALL",""],[rse,"ALL",""],[ise,"ALL",""],[ase,"ALL",""],[ose,"ALL",""]];for(const[C,M,P]of h)sse(e,C,M,P,d);const p=[[g7,""],[b7,""],[y7,""],[v7,""]];for(const[C,M]of p)lse(e,C,M,u);const b=[[koe,"","ALL"],[vP,"","YEAR"],[vP,"","DAY"],[Noe,"","ALL"],[Ooe,"","ALL"],[Coe,"","ALL"],[Moe,"","ALL"],[Doe,"","ALL"]];for(const[C,M,P]of b)xP(e,C,M,d,P);const y=[[x7,"","ALL"],[Poe,"","DAY_HOUR"],[Roe,"","DAY_HOUR"],[Loe,"","ALL"],[Ioe,"","ALL"]];for(const[C,M,P]of y)xP(e,C,M,u,P);const k=[[Eoe,""],[Aoe,""]];for(const[C,M]of k)wP(e,C,M,u);const w=[[joe,""],[Toe,""]];for(const[C,M]of w)wP(e,C,M,d);const _=[[soe,"","ALL"],[d7,"","ALL"],[loe,"","ALL"],[coe,"","ALL"],[uoe,"","ALL"],[doe,"","ALL"],[foe,"","ALL"],[f7,"","ALL"],[hoe,"","ALL"],[moe,"","ALL"],[poe,"","ALL"],[goe,"","ALL"],[boe,"","ALL"],[_oe,"","ALL"]];for(const[C,M,P]of _)_P(e,C,M,u,P);const T=[[h7,"","ALL"],[yoe,"","ALL"],[voe,"","ALL"],[gP,"","DAY"],[gP,"","HOUR"],[bP,"","DAY"],[bP,"","HOUR"],[yP,"","DAY"],[yP,"","HOUR"],[xoe,"","DAY"],[woe,"","ALL"],[m7,"","ALL"]];for(const[C,M,P]of T)_P(e,C,M,d,P);if(new Set(["","","",""]).has(e[we.day])){d.push({name:Nd(""),weight:nr[we.day],pos:we.day});for(const M of[we.year,we.month,we.hour])e[M]===e[we.day]&&d.push({name:Jg("",M),weight:nr[M],pos:M})}{const C=p7[r];if(C)for(const M of[we.year,we.month,we.day,we.hour]){const P=Mo(e[M]),I=Qt(e[M]);P===r&&C.includes(I)&&d.push({name:Jg("",M),weight:nr[M],pos:M})}}for(const[C,M]of c7){const P=j2(C,e),I=j2(M,e);P&&I&&D1(d,"",P.pos,I.pos)}{const C=new Set(["",""]),M=new Set(["","","",""]);for(let P=0;P<=3;P++){const I=Mo(e[P]),U=Qt(e[P]);(C.has(I)||M.has(U))&&d.push({name:Jg("",P),weight:nr[P],pos:P})}}{const C=e[we.hour],M=(I,U)=>I.includes(r)&&U.includes(C);(M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""]))&&d.push({name:Nd(""),weight:nr[we.hour],pos:we.hour})}["","","",""].every(C=>l.includes(C))&&u.push({name:Nd(""),weight:nr[we.day],pos:we.day});{const C=e[we.day],M=e[we.hour];(C===""&&M===""||C===""&&M==="")&&d.push({name:Qd("",we.day,we.hour),weight:nr[we.hour],pos:we.hour})}{const C=Qt(e[we.year]),M=new Set(l.slice(1)),P=(U,V)=>U.every(q=>M.has(q))&&C===V;(P(["","",""],"")||P(["","",""],"")||P(["","",""],"")||P(["","",""],""))&&u.push({name:Nd(""),weight:nr[we.day],pos:we.day})}(e[we.day]===""||e[we.day]==="")&&u.push({name:Nd(""),weight:nr[we.day],pos:we.day});{const M={:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""}}[r];M&&e.some(I=>Qt(I)===M.rok)&&Mo(e[we.hour])===M.maStem&&u.push({name:Qd("",we.day,we.hour),weight:nr[we.hour],pos:we.hour})}{const C=Qt(e[we.hour]),P={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[r];if(P){const I=i===P.rok,U=C===P.ma,V=Xg(P.rokStem,e[we.day],"classic")||Xg(P.rokStem,e[we.hour],"classic"),q=Xg(P.maStem,e[we.day],"classic")||Xg(P.maStem,e[we.hour],"classic");I&&U&&(V||q)&&u.push({name:Qd("",we.day,we.hour),weight:nr[we.hour],pos:we.hour})}}{const C=new Set(["","","","","",""]),M=e.map(Mo),P=e.map(Qt),I=M.concat(P).filter(H=>C.has(H)).length,U=t?Mo(t):"",V=t?Qt(t):"",q=C.has(U)||C.has(V);(I>=4||I===3&&q)&&d.push({name:Nd(""),weight:nr[we.day],pos:we.day})}{const C=new Set(["",""]),M=new Set(["",""]);for(let P=0;P<=3;P++){const I=Mo(e[P]),U=Qt(e[P]);(C.has(I)||M.has(U))&&d.push({name:Jg("",P),weight:nr[P],pos:P})}}{const C=[[we.year,we.month],[we.year,we.day],[we.month,we.day],[we.month,we.hour],[we.day,we.hour]];for(const[M,P]of C){const I=Qt(e[M]),U=Qt(e[P]);if(Rm(S2,I,U)){const V=mP(S2,I,U);D1(d,`${V}`,M,P)}}}{const C=[[we.year,we.month,0],[we.month,we.day,1],[we.month,we.hour,0],[we.day,we.hour,0]];for(const[M,P,I]of C){const U=Qt(e[M]),V=Qt(e[P]);if(Rm(k2,U,V)){const q=mP(k2,U,V),H=(I?1:0)+(Jae.has(U+V)?1:0);D1(d,`${q}`,M,P,H)}}}const O=Ry(e[we.day]),j=Ry(e[we.year]);{const C=(n?.voidBasis??"day")==="day"?O:j;if(C){const[M,P]=C.map(Dr);for(const I of[we.year,we.month,we.day,we.hour]){const U=Qt(e[I]);(U===M||U===P)&&d.push({name:noe(n?.voidBasis??"day",I),weight:nr[I],pos:I})}}}return{goodPos:u,badPos:d,dayVoid:O,yearVoid:j,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l}}function Qg({src:e,luck:t,natal:n,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l,dayVoid:u,yearVoid:d,basis:h}){const p=[],b=[],y=(O,j)=>{O.includes(j)||O.push(j)},k=Zae(t??null);if(!k)return{good:p,bad:b};const w=k.branch,_=k.stem;js(g7[a]??"")===_&&y(p,nm("",e)),js(b7[a]??"")===_&&y(p,nm("",e)),js(y7[a]??"")===_&&y(p,nm("",e)),js(v7[a]??"")===_&&y(p,nm("",e)),x7[a]?.includes(w)&&y(p,nm("",e)),d7[r]?.includes(w)&&y(p,Od("",e)),f7[r]?.includes(w)&&y(p,Od("",e)),h7[r]?.includes(w)&&y(b,Od("",e)),m7[r]?.includes(w)&&y(b,Od("",e)),p7[r]?.includes(w)&&y(b,Od("",e)),e==="se"&&(Boe[o]?.includes(w)&&y(b,pP(e,"")),_7[o]?.includes(w)&&y(b,pP(e,"")));for(const O of l)if(Rm(c7,w,O)){const j=j2(O,n)?.pos;j!==void 0&&y(b,M1("",e,j));break}new Set(["",""]).has(r)&&new Set(["","","",""]).has(w)&&y(b,Od("",e));const T=(h?.voidBasis??"day")==="day"?u:d;T&&(w===T[0]||w===T[1])&&y(b,roe(e,h?.voidBasis??"day"));for(let O=0;O<=3;O++){const j=Qt(n[O]);Rm(S2,w,j)&&y(b,M1("",e,O)),Rm(k2,w,j)&&y(b,M1("",e,O))}if(e==="se"){const O=(h?.samjaeBasis??"day")==="day"?i:o,j=O?E2(O):null;j&&j.includes(w)&&y(b,ioe(e,h?.samjaeBasis??"day"))}return{good:p,bad:b}}const use=/^#(|||)X\1_/,dse=e=>use.test(e);function SP(e){const t=new Map;for(const n of e){if(dse(n.name))continue;const r=`${n.name}@${n.pos}`,i=t.get(r);(!i||n.weight>i.weight)&&t.set(r,n)}return Array.from(t.values()).sort((n,r)=>r.weight!==n.weight?r.weight-n.weight:n.name.localeCompare(r.name,"ko"))}function fse(e){const t=e.lastIndexOf("_");return t>=0?e.slice(t+1):e}const hse=new Set(["",""]);function mse(e){return hse.has(e)?!0:e.endsWith("")||e.endsWith("")}function kP(e){const t=new Map;for(const r of e){const i=fse(r.name);t.has(i)||t.set(i,[]),t.get(i).push(r)}const n=[];for(const[r,i]of t)if(mse(r))n.push(...i);else{const a=i.sort((o,l)=>Gd[o.pos]!==Gd[l.pos]?Gd[l.pos]-Gd[o.pos]:l.weight-o.weight)[0];n.push(a)}return n}function EP(e,t){const n={si:[],il:[],yeon:[],wol:[]},r=eoe;for(const i of e)n[r(i.pos)].push(i.name);return n}function Lp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:a}){const{goodPos:o,badPos:l,dayVoid:u,yearVoid:d,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:k}=cse({natal:e,daewoon:t,basis:a}),w=kP(SP(o)),_=kP(SP(l)),T=EP(w),O=EP(_),j=Qg({src:"dae",luck:t??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),C=Qg({src:"se",luck:n??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),M=Qg({src:"wol",luck:r??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),P=Qg({src:"il",luck:i??null,natal:e,dStem:h,dBranch:p,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a});return{good:{...T,dae:j.good,se:C.good,wolun:M.good,ilun:P.good},bad:{...O,dae:j.bad,se:C.bad,wolun:M.bad,ilun:P.bad},meta:{voidPair:{day:Ry(e[we.day])??void 0,year:Ry(e[we.year])??void 0},samjaeYears:{day:E2(Qt(e[we.day]))??void 0,year:E2(Qt(e[we.year]))??void 0},currentBasis:{voidBasis:a?.voidBasis??"day",samjaeBasis:a?.samjaeBasis??"day"}}}}function pse(e){return typeof e=="object"&&e!==null}function Pf(e){const t=W6;return pse(t)&&("Classic"in t||"Modern"in t||"classic"in t||"modern"in t)?e==="classic"?t.Classic:t.Modern:e}const jP=["","","","","","","","","",""],TP=["","","","","","","","","","","",""],gse=["","","","","","","","","","","",""];function bse(e){const t=Vv(e);return t===""||t===""?0:t===""||t===""?2:t===""||t===""?4:t===""||t===""?6:8}function yse(e,t){const n=bse(e);return(t?gse:TP).map(i=>{const a=TP.indexOf(i);let o=(n+(a<0?0:a))%10;return t&&(i===""||i==="")&&(o=(o+2)%10),`${jP[o]??jP[0]}${i}`})}function Lm(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function AP(e){return e<10?`0${e}`:`${e}`}function T2(e){return`${AP(e.getHours())}:${AP(e.getMinutes())}`}function cT(e){return!e||e===""?!0:!/^\d{4}$/.test(e)}function NP(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),a=`${n}-${r}-${i}`;return!t||cT(t)?a:`${a} ${t.slice(0,2)}:${t.slice(2,4)}`}function vse(e,t,n){if(n)return"";const r=(e??"").trim();if(r)return r;const i=t instanceof Date?t:new Date(t);return Number.isNaN(i.getTime())?"":T2(i)}const OP=["","/",""],xse="/";function E7(e,t){return e&&OP.includes(e)?e:t&&OP.includes(t)?t:xse}function CP(e){return e===""}function wse(e){return e===""?"":""}function _se(e){switch(e){case"":return 1;case"":return 2;case"":return 3;case"":default:return 0}}const Sse=e=>e instanceof Date&&!Number.isNaN(e.getTime());function A2(e,t){const n=cT(e.birthTime);let r=Number(e.birthDay?.slice(0,4)??2e3),i=Number(e.birthDay?.slice(4,6)??1),a=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Zi(r,i,a);r=j.getFullYear(),i=j.getMonth()+1,a=j.getDate()}const o=n?4:Number(e.birthTime?.slice(0,2)??4),l=n?30:Number(e.birthTime?.slice(2,4)??30),u=new Date(r,i-1,a,o,l,0,0),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon,h=d?127.5:e.birthPlace.lon,p=Sse(e.corrected);let b;p?b=e.corrected:d?b=u:b=Op(u,h,n);const y=t?new Date(b.getTime()-3600*1e3):b,k=E7(e.mingSikType),w=ct(y,h),_=At(y,h),T=pt(y,k),O=n?null:no(y,k);return{corrected:y,year:{stem:w.charAt(0),branch:w.charAt(1)},month:{stem:_.charAt(0),branch:_.charAt(1)},day:{stem:T.charAt(0),branch:T.charAt(1)},hour:O?{stem:O.charAt(0),branch:O.charAt(1)}:null}}const kse=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],Ese=(()=>{const e={};for(const t of kse){const[n,r]=t.keys;e[n]={label:t.label,elem:t.elem},e[r]={label:t.label,elem:t.elem}}return e})(),jse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Tse(e,t){const n=`${Vv(e)}${pj(t)}`;return Ese[n]??null}function Ase(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}function Nse(e){switch(jse[pj(e)]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function Ose({stem:e,branch:t}){const n=Tse(e,t);if(!n)return null;const r=Ase(n.elem);return g.jsx("span",{className:`inline-block mt-1 px-1.5 py-[2px] rounded ${r} border border-white/10 text-nowrap`,title:`${n.label}  ${n.elem}`,children:n.label})}function MP({value:e,kind:t,charType:n,thinEum:r,highlighted:i}){const{settings:a}=tn(),o=Wi(e,t,a),l=wi(e,t,n),u=ro(e,t),d=r&&u?"font-thin":"font-bold",h=i?"border-purple-500 border-3":"border-neutral-200 dark:border-neutral-800";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${o}
                  flex items-center justify-center border ${h}`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${d} `,children:l})})}function j7({title:e,data:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:y="regular",highlightedStem:k=!1,highlightedBranch:w=!1}){const _=y==="compact"?"py-1 text-center text-xs tracking-wider":"px-2 py-1 text-center text-xs tracking-wider",T=y==="compact"?"py-2":"p-2";return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:`${_} bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300`,children:e}),g.jsx("div",{className:`${T} flex flex-col items-center gap-1`,children:t?g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Sa(n,{stem:t.stem})}),g.jsx(MP,{value:t.stem,kind:"stem",charType:r,thinEum:i,highlighted:k}),g.jsx(MP,{value:t.branch,kind:"branch",charType:r,thinEum:i,highlighted:w}),g.jsx(o4,{branch:t.branch,dayStem:n,mode:d,mapping:h}),(o||l||u)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 w-full",children:[o&&g.jsx("div",{children:p(t.branch)}),l&&g.jsx("div",{children:b(t.branch)}),u&&g.jsx(Ose,{stem:t.stem,branch:t.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]})}const Cse=(e,t,n,r)=>{let i=e.data.stem,a=e.data.branch;return e.key==="daeun"&&t&&(i=t.charAt(0),a=t.charAt(1)),e.key==="seun"&&n&&(i=n.charAt(0),a=n.charAt(1)),e.key==="wolun"&&r&&(i=r.charAt(0),a=r.charAt(1)),{stem:i,branch:a}};function Mse({cards:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,daeGz:y,seGz:k,wolGz:w,highlightMap:_={}}){const T=t?"regular":"compact",O=e.length===1?"grid-cols-1":e.length===2?"grid-cols-2":"grid-cols-3",j="rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",C=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",M=t?`grid gap-2 p-3 ${O}`:`grid gap-1 p-0 ${O}`;return g.jsxs("div",{className:j,children:[g.jsx("div",{className:C,children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:M,children:e.map(P=>{const I=Cse(P,y,k,w),U=_[P.key]??{stem:!1,branch:!1};return g.jsx(j7,{title:P.label,data:I,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:T,highlightedStem:U.stem,highlightedBranch:U.branch},P.key)})})})]})}function Dse({pillars:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,highlightMap:y={}}){const k=t?"regular":"compact",w=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",_=t?"grid grid-cols-4 gap-2 p-3":"grid grid-cols-4 gap-1";return g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:w,children:g.jsx("b",{children:""})}),g.jsx("div",{className:t?"pb-2":"px-1 pb-2",children:g.jsx("div",{className:_,children:e.map(T=>{const O=y[T.key]??{stem:!1,branch:!1};return g.jsx(j7,{title:T.label,data:T.data,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:p,calcShinsal:b,size:k,highlightedStem:O.stem,highlightedBranch:O.branch},T.key)})})})]})}function Pse({hourCandidates:e,useInsi:t,onToggleRule:n,usePrevDay:r,onTogglePrevDay:i,canSelectHourBranch:a,manualHour:o,onSelectHour:l}){return g.jsxs("div",{className:"my-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:n,className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:t?" : ":" : "}),g.jsx("button",{onClick:i,className:`px-2 py-1 text-xs rounded border cursor-pointer ${r?"bg-amber-500 text-white border-amber-500":"bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600"}`,children:""})]})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map(u=>{const d=u.charAt(0),h=u.charAt(1),p=o?.stem===d&&o?.branch===h,b=a?!a(h):!1;return g.jsx("button",{onClick:()=>l(d,h),disabled:b,className:`p-2 text-xs rounded border ${p?Nse(h):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"} ${b?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,title:`${u} ( )`,children:u},u)})})]})}function Rse(e){const i=e.trim().replace(/^#?(|||)(X(|||))?_/u,"").replace(/\((|||)\)$/u,"").replace(/\s+/g," ").trim(),a=i.includes("_")?i.split("_").pop()??i:i;return a.includes("")?"":a.includes("")?"":a.includes("")?"":a===""||a===""||a===""?"":a}const rm={:{title:"()",kind:"",oneLine:"     .",bullets:["  ,   ."]},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   :   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" ,    ."},:{title:"()",kind:"",oneLine:"  (  ) ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"  / ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"()   ."},:{title:"()",kind:"",oneLine:"  ()  ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"+     ."},:{title:"()",kind:"",oneLine:"///   ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"/        ."},:{title:"()",kind:"",oneLine:" 3      .",bullets:["    ."]},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"   : //."},:{title:"",kind:"",oneLine:"  :   ."},:{title:"",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" //  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:": /  ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  ."},:{title:"()",kind:"",oneLine:" / :   ."},:{title:"()",kind:"",oneLine:"()  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" / :    ."},:{title:"()",kind:"",oneLine:" :   / ."},:{title:"",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"() //  ."},:{title:"()",kind:"",oneLine:" :      ."},:{title:"()",kind:"",oneLine:" ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//    ."},:{title:"()",kind:"",oneLine:"    : ."},:{title:"",kind:"",oneLine:"  : //."},:{title:"()",kind:"",oneLine:"/  ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:" : /  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:" () ."},:{title:"()",kind:"",oneLine:"  ,    ."},:{title:"",kind:"",oneLine:":  ."},:{title:"",kind:"",oneLine:" /  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"      :    ."},:{title:"",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" .       ."},:{title:"()",kind:"",oneLine:" .     ."},:{title:"()",kind:"",oneLine:"  .      ."},:{title:"()",kind:"",oneLine:" :  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:" :  /,   ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"/  :    ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"  : /  ."},:{title:"()",kind:"",oneLine:"  : // ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:"//   ."},:{title:"()",kind:"",oneLine:"/  :  ."},:{title:"()",kind:"",oneLine:"/    ."},:{title:"()",kind:"",oneLine:" :    ,  /  ."}};function Lse(e){const t=Rse(e),n=rm[t];if(n)return n;if(t.endsWith("")){const r=t.replace(/$/,"");if(rm[r])return rm[r]}else{const r=`${t}`;if(rm[r])return rm[r]}return{title:t||"",kind:"",oneLine:" "}}function Ise(e){const t=`${e.title}  ${e.kind}`,n=e.oneLine,r=(e.bullets??[]).map(i=>`- ${i}`).join(`
`);return r?`${t}
${n}
${r}`:`${t}
${n}`}function To({columnKey:e,title:t,goodTags:n,badTags:r,isDesktop:i,openTagKey:a,setOpenTagKey:o}){const l=N2(n,Ly),u=N2(r,Ly),d=i||l.length>0,h=i||u.length>0;return!i&&l.length===0&&u.length===0?null:g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:t}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[d&&g.jsx("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mb-1",children:""}),g.jsx(DP,{tags:n,idPrefix:`${e}-good`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]}),g.jsxs("div",{children:[h&&g.jsx("div",{className:"text-[10px] text-rose-600 dark:text-rose-400 mb-1",children:""}),g.jsx(DP,{tags:r,idPrefix:`${e}-bad`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]})]})]})}function DP({tags:e,idPrefix:t,isDesktop:n,openTagKey:r,setOpenTagKey:i}){const a=N2(e,Ly);return a.length===0?n?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):null:g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:a.map((o,l)=>{const u=`${t}-${l}`;return g.jsx($se,{tag:o,id:u,openTagKey:r,setOpenTagKey:i},u)})})}function $se({tag:e,id:t,openTagKey:n,setOpenTagKey:r}){const i=n===t,a=Lse(e),o=a?Ise(a):"",l=Ly(e),u=S.useRef(null),d=S.useRef(null),[h,p]=S.useState("center");return S.useLayoutEffect(()=>{if(!i)return;const b=d.current;if(!b)return;const y=b.getBoundingClientRect(),w=Math.min(300,window.innerWidth-16*2),_=y.left,T=window.innerWidth-y.right;T<w/2&&_>T?p("right"):_<w/2&&T>_?p("left"):p("center")},[i]),S.useLayoutEffect(()=>{if(!i)return;const b=y=>{const k=y.target;!u.current||k&&u.current.contains(k)||r(null)};return document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b)}},[i,r]),g.jsxs("div",{ref:u,className:"relative",children:[g.jsx("button",{ref:d,type:"button",onClick:()=>r(i?null:t),className:["px-2 py-1 text-[12px] desk:text-[11px] text-center  rounded border desk:break-keep w-full cursor-pointer ",i?"bg-purple-500/20 text-purple-200 border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:l,children:l}),a&&i&&g.jsx("div",{className:["absolute top-full mt-2 z-50",h==="left"?"left-0":h==="right"?"right-0":"left-1/2 -translate-x-1/2"].join(" "),children:g.jsx("div",{className:"relative whitespace-pre-wrap break-words break-keep rounded-md border border-neutral-700 bg-neutral-900 text-neutral-100 text-[10px] leading-4 p-2 shadow-lg text-center",style:{width:"min(190px, calc(100vw - 24px))"},children:o})})]})}function Ly(e){const t=e.replace(/^#/,""),n=t.split("_"),r=n.length>1?n[n.length-1]:t,i=r.split(" ").filter(Boolean);return i.length>0?i[i.length-1]:r}function N2(e,t){const n=new Set,r=[];for(const i of e){const a=t(i);n.has(a)||(n.add(a),r.push(i))}return r}const Bse=[{level:0,label:" "},{level:1,label:" "},{level:2,label:" "},{level:3,label:" "}];function zse({isDesktop:e,exposureLevel:t,relationApplyLevel:n,maxRelationApplyLevel:r,onChangeRelationApplyLevel:i,relationChips:a,relationByPillar:o,activeRelationTag:l,onToggleRelationTag:u,showRelationBox:d,showEtcShinsalBox:h,etcShinsalGood:p,etcShinsalBad:b}){const[y,k]=S.useState(!0),[w,_]=S.useState(!0),[T,O]=S.useState(null);return g.jsxs(g.Fragment,{children:[d&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>k(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",y?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:y?"":""})]}),y&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 mb-2",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:Bse.filter(j=>j.level<=r).map(j=>{const C=n===j.level;return g.jsx("button",{type:"button",onClick:()=>i(j.level),className:["px-2 py-1 text-[11px] rounded border transition cursor-pointer",C?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),children:j.label},j.level)})})}),g.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 pl-1 mb-2",children:"     ."}),a.length===0?g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."}):g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?n>=3?"4fr 5fr":n>=2?"3.5fr 6.5fr":n>=1?"2fr 8fr":"1fr":void 0},children:[n>=1&&g.jsx("div",{className:"border-t desk:border-0 border-neutral-200 dark:border-neutral-800 pt-2 desk:pt-0 order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${n>=3?3:n>=2?2:1}, minmax(60px, 1fr))`:void 0},children:(e?[n>=3&&g.jsx(Ao,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol"),n>=2&&g.jsx(Ao,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=1&&g.jsx(Ao,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae")]:[n>=1&&g.jsx(Ao,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae"),n>=2&&g.jsx(Ao,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=3&&g.jsx(Ao,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2 desk:pl-0 desk:border-t-0 desk:border-l-0",children:[g.jsx(Ao,{title:"",tags:o.natal.hour,activeTag:l,onToggle:u}),g.jsx(Ao,{title:"",tags:o.natal.day,activeTag:l,onToggle:u}),g.jsx(Ao,{title:"",tags:o.natal.month,activeTag:l,onToggle:u}),g.jsx(Ao,{title:"",tags:o.natal.year,activeTag:l,onToggle:u})]})]})]})]})}),h&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>_(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",w?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:w?"":""})]}),w&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 text-[11px] text-amber-600 dark:text-amber-300 mb-2",children:"       ."}),PP(p)||PP(b)?g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?t>=3?"4fr 5fr":t>=2?"3.5fr 6.5fr":t>=1?"2fr 8fr":"1fr":void 0},children:[g.jsx("div",{className:"order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${t>=3?3:t>=2?2:t>=1?1:0}, minmax(60px, 1fr))`:void 0},children:(e?[t>=3&&g.jsx(To,{columnKey:"etc-luck-wol",title:"",goodTags:p.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-wol"),t>=2&&g.jsx(To,{columnKey:"etc-luck-se",title:"",goodTags:p.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-se"),t>=1&&g.jsx(To,{columnKey:"etc-luck-dae",title:"",goodTags:p.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-dae")]:[t>=1&&g.jsx(To,{columnKey:"etc-luck-dae",title:"",goodTags:p.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-dae"),t>=2&&g.jsx(To,{columnKey:"etc-luck-se",title:"",goodTags:p.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-se"),t>=3&&g.jsx(To,{columnKey:"etc-luck-wol",title:"",goodTags:p.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2",children:[g.jsx(To,{columnKey:"etc-natal-hour",title:"",goodTags:p.natal.hour,badTags:b.natal.hour,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(To,{columnKey:"etc-natal-day",title:"",goodTags:p.natal.day,badTags:b.natal.day,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(To,{columnKey:"etc-natal-month",title:"",goodTags:p.natal.month,badTags:b.natal.month,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(To,{columnKey:"etc-natal-year",title:"",goodTags:p.natal.year,badTags:b.natal.year,isDesktop:e,openTagKey:T,setOpenTagKey:O})]})]}):g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."})]})]})})]})}function Ao({title:e,tags:t,activeTag:n,onToggle:r}){return g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:e}),t.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:t.map(i=>{const a=n===i;return g.jsx("button",{type:"button",onClick:()=>r(a?null:i),className:["px-2 py-1 text-[12px] desk:text-[11px] rounded border transition desk:break-keep cursor-pointer",a?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:i,children:Use(i)},i)})})]})}function Use(e){const t=e.replace(/^#/,""),n=t.split("_");return(n.length>1?n.slice(1).join("_"):t).replace(/_/g," ")}function PP(e){const{natal:t,luck:n}=e;return t.hour.length>0||t.day.length>0||t.month.length>0||t.year.length>0||n.dae.length>0||n.se.length>0||n.wol.length>0}function RP(e){return String(e).padStart(2,"0")}function Fse(e,t,n){if(!e||e.length<8)return NP(e,t);const r=NP(e,t);if(n!=="lunar")return r;try{const i=Number(e.slice(0,4)),a=Number(e.slice(4,6)),o=Number(e.slice(6,8)),l=Zi(i,a,o);return` ${`${l.getFullYear()}.${RP(l.getMonth()+1)}.${RP(l.getDate())}`} ( ${r})`}catch{return` ${r}`}}function Hse({data:e,hourTable:t}){const{date:n,setDstOffsetMinutes:r}=Qr(),i=tn(Me=>Me.settings),a=i.showNabeum??!0,o=i.showRelationBox??!0,l=i.showEtcShinsal??!0,u=E7(e.mingSikType,t),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:h,solarM:p,solarD:b}=S.useMemo(()=>{let Me=Number(e.birthDay?.slice(0,4)??2e3),ze=Number(e.birthDay?.slice(4,6)??1),Xe=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const vt=Zi(Me,ze,Xe);Me=vt.getFullYear(),ze=vt.getMonth()+1,Xe=vt.getDate()}return{solarY:Me,solarM:ze,solarD:Xe}},[e.birthDay,e.calendarType]),y=Cy(Me=>Me.useDST),k=Cy(Me=>Me.setUseDST);S.useEffect(()=>{h&&p&&b&&k(Xm(h,p,b))},[h,p,b,k]),S.useEffect(()=>{r(y?-60:0)},[y,r]);const w=cT(e.birthTime),[_,T]=S.useState(()=>A2(e,y));S.useEffect(()=>{T(A2(e,y))},[e,y]);const O=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,j=Fi(Me=>Me.usePrevDay),C=Fi(Me=>Me.setUsePrevDay),M=S.useMemo(()=>{const Me=`${_.day.stem}${_.day.branch}`,ze=j?to(Me,-1):Me;return{stem:ze.charAt(0),branch:ze.charAt(1)}},[_.day.stem,_.day.branch,j]),P=_.day.stem,I=M.stem,[U,V]=S.useState(null),[q,H]=S.useState(()=>CP(e.mingSikType)),B=Fi(Me=>Me.clearManualHour);S.useEffect(()=>{V(null),B(),H(CP(e.mingSikType)),C(!1)},[O,e.mingSikType,B,C]);const W=j&&q?I:P,Z=S.useMemo(()=>yse(W,q),[q,W]),X=U??_.hour,G=Fi(Me=>Me.setManualHour),J=S.useCallback(Me=>j?q?Me===""||Me==="":Me==="":!0,[j,q]);S.useEffect(()=>{U&&(J(U.branch)||(V(null),B()))},[U,J,B]);const Q=(Me,ze)=>{if(!J(ze))return;if(U?.stem===Me&&U?.branch===ze){V(null),B();return}const Xe={stem:Me,branch:ze};V(Xe),G(Xe)},oe=wse(i.sinsalBase)===""?M.branch:_.year.branch,le=Me=>i.showSibiUnseong?io(I,Me):null,z=Me=>i.showSibiSinsal?ao({baseBranch:oe,targetBranch:Me,era:Pf(i.sinsalMode),gaehwa:i.sinsalBloom}):null,K=y?-60:0,ne=xae(e,u,K),re=Qie({query:"(min-width: 992px)"}),ce=i.hiddenStem==="regular"?"main":"all",ue=_se(i.exposure),ge=ue===0?[]:ne.filter(Me=>(Me.key==="daeun"?1:Me.key==="seun"?2:3)<=ue),ke=Xm(h,p,b),ie=()=>k(!y),Ae=S.useMemo(()=>{const Me=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??""));return Number.isNaN(Me.getTime())?_.corrected:Me},[e.corrected,_.corrected]),Ee=S.useMemo(()=>Ae&&(ke&&y?new Date(Ae.getTime()-3600*1e3):Ae),[Ae,ke,y]),he=S.useMemo(()=>{const Me=ke&&y?"":e.correctedLocal;return vse(Me,Ee??new Date,w)},[e.correctedLocal,Ee,w,ke,y]),Le=lx(e,t,n,{dstOffsetMinutes:K}),Ie=Le.dae.gz,tt=Le.se.gz,Ne=Le.wol.gz,Be=S.useMemo(()=>ue>=3&&Ne?3:ue>=2&&tt?2:ue>=1&&Ie?1:0,[ue,Ie,tt,Ne]),[Ue,nt]=S.useState(Be),[ut,yt]=S.useState(null);S.useEffect(()=>{nt(Be),yt(null)},[O,Be]);const se=S.useMemo(()=>{const Me=$t=>$t?.stem&&$t?.branch?`${$t.stem}${$t.branch}`:"",ze=[Me(_.year),Me(_.month),Me(M),Me(X)],Xe=Ul({natal:[...ze],daewoon:Ue>=1?Ie??void 0:void 0,sewoon:Ue>=2?tt??void 0:void 0,wolwoon:Ue>=3?Ne??void 0:void 0}),vt=cx([...ze],{fillNone:!1}),Ot={...Xe};for(const $t of a7)Ot[$t]=Array.from(new Set([...Ot[$t]??[],...vt[$t]??[]]));return Ot},[_,M,X,Ie,tt,Ne,Ue]),Oe=S.useMemo(()=>{const Me=[...se.cheonganHap,...se.cheonganChung,...se.jijiSamhap,...se.jijiBanhap,...se.jijiBanghap,...se.jijiYukhap,...se.jijiChung,...se.jijiHyeong,...se.jijiPa,...se.jijiHae,...se.amhap,...se.ganjiAmhap].filter(ze=>ze&&ze!=="#");return Array.from(new Set(Me))},[se]);S.useEffect(()=>{ut&&!Oe.includes(ut)&&yt(null)},[ut,Oe]);const Ye=S.useMemo(()=>{const Me=(Xe,vt)=>{Xe.includes(vt)||Xe.push(vt)},ze={luck:{wol:[],se:[],dae:[]},natal:{hour:[],day:[],month:[],year:[]}};for(const Xe of Oe){const Ot=(Xe.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean);Ot.includes("")&&Me(ze.luck.wol,Xe),Ot.includes("")&&Me(ze.luck.se,Xe),Ot.includes("")&&Me(ze.luck.dae,Xe),Ot.includes("")&&Me(ze.natal.hour,Xe),Ot.includes("")&&Me(ze.natal.day,Xe),Ot.includes("")&&Me(ze.natal.month,Xe),Ot.includes("")&&Me(ze.natal.year,Xe)}return ze},[Oe]),qe=S.useMemo(()=>{const Me=vt=>vt?.stem&&vt?.branch?`${vt.stem}${vt.branch}`:"",ze=Lp({natal:[Me(_.year),Me(_.month),Me(M),Me(X)],daewoon:ue>=1?Ie??void 0:void 0,sewoon:ue>=2?tt??void 0:void 0,wolwoon:ue>=3?Ne??void 0:void 0}),Xe=vt=>Array.from(new Set(vt.filter(Ot=>Ot&&Ot!=="#")));return{good:{natal:{hour:Xe(ze.good.si??[]),day:Xe(ze.good.il??[]),month:Xe(ze.good.wol??[]),year:Xe(ze.good.yeon??[])},luck:{dae:Xe(ze.good.dae??[]),se:Xe(ze.good.se??[]),wol:Xe(ze.good.wolun??[])}},bad:{natal:{hour:Xe(ze.bad.si??[]),day:Xe(ze.bad.il??[]),month:Xe(ze.bad.wol??[]),year:Xe(ze.bad.yeon??[])},luck:{dae:Xe(ze.bad.dae??[]),se:Xe(ze.bad.se??[]),wol:Xe(ze.bad.wolun??[])}}}},[_,M,X,Ie,tt,Ne,ue]),Tt=S.useMemo(()=>{const Me={},ze=(Xe,vt)=>{for(const Ot of Xe)Me[Ot]=vt};return ze(se.cheonganHap,"stem"),ze(se.cheonganChung,"stem"),ze(se.jijiSamhap,"branch"),ze(se.jijiBanhap,"branch"),ze(se.jijiBanghap,"branch"),ze(se.jijiYukhap,"branch"),ze(se.jijiChung,"branch"),ze(se.jijiHyeong,"branch"),ze(se.jijiPa,"branch"),ze(se.jijiHae,"branch"),ze(se.amhap,"branch"),ze(se.ganjiAmhap,"both"),Me},[se]),ht=S.useMemo(()=>{if(!ut)return{};const Me=Tt[ut]??"branch",Xe=(ut.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean),vt={:"year",:"month",:"day",:"hour",:"daeun",:"seun",:"wolun",:"ilun"},Ot={};for(const $t of Xe){const Ht=vt[$t];if(!Ht)continue;const wn=Ot[Ht]??{stem:!1,branch:!1};Me==="stem"?wn.stem=!0:(Me==="branch"||(wn.stem=!0),wn.branch=!0),Ot[Ht]=wn}return Ot},[ut,Tt]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),ke&&g.jsxs("button",{onClick:ie,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-xs desk:text-sm text-neutral-600 dark:text-neutral-400",children:[Fse(e.birthDay,e.birthTime,e.calendarType)," : ",he]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[e.birthPlace?.name?`: ${e.birthPlace.name}`:""," /  : ",d.toFixed(2),"  ",u," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${ge.length===0?"grid-cols-1":ge.length===1?"grid-cols-[2fr_8fr]":ge.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[ge.length>0&&g.jsx(Mse,{cards:ge,isDesktop:re,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:ce,hiddenStemMode:i.hiddenStemMode,calcUnseong:le,calcShinsal:z,daeGz:Ie,seGz:tt,wolGz:Ne,highlightMap:ht}),g.jsx(Dse,{isDesktop:re,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:ce,hiddenStemMode:i.hiddenStemMode,calcUnseong:le,calcShinsal:z,highlightMap:ht,pillars:[{key:"hour",label:"",data:X},{key:"day",label:"",data:M},{key:"month",label:"",data:_.month},{key:"year",label:"",data:_.year}]})]}),w&&g.jsx(Pse,{hourCandidates:Z,useInsi:q,onToggleRule:()=>H(Me=>!Me),usePrevDay:j,onTogglePrevDay:()=>C(!j),canSelectHourBranch:J,manualHour:U,onSelectHour:Q}),g.jsx(zse,{isDesktop:re,exposureLevel:ue,relationApplyLevel:Ue,maxRelationApplyLevel:Be,onChangeRelationApplyLevel:nt,relationChips:Oe,relationByPillar:Ye,activeRelationTag:ut,onToggleRelationTag:yt,showRelationBox:o,showEtcShinsalBox:l,etcShinsalGood:qe.good,etcShinsalBad:qe.bad})]})}function Jl(e,t){const n=e,r=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,i=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),a=typeof n.birthHour=="number",o=typeof n.birthMinute=="number";if(r||!(i||a||o)){const u=new Date(t);return u.setHours(4,30,0,0),u}return t}function dx(e,t){const n=e.length;if(n===0||!t)return 0;const r=e[0].at.getTime(),i=e[n-1].at.getTime(),a=t.getTime();if(a<=r)return 0;if(a>=i)return n-1;for(let o=0;o<n-1;o+=1){const l=e[o].at.getTime(),u=e[o+1].at.getTime();if(a>=l&&a<u)return o}return 0}function Gse({data:e}){const t=Fs(),n=ac(e,e.mingSikType,100,t),r=Fi(q=>q.usePrevDay),i=S.useMemo(()=>{const q=Mf(e);return Zl(q,t)},[e,t]),a=S.useMemo(()=>Jl(e,i),[e,i]),o=S.useMemo(()=>{const q=e.mingSikType??"/",H=pt(a,q);return(r?to(H,-1):H).charAt(0)},[a,e.mingSikType,r]),{date:l,setFromEvent:u}=Qr(),d=S.useMemo(()=>dx(n,l),[n,l]),h=tn(q=>q.settings),p=tn(q=>q.setKey),{charType:b,thinEum:y,showSipSin:k,showSibiUnseong:w,showSibiSinsal:_,sinsalBase:T,sinsalMode:O,sinsalBloom:j,daewoonDisplayBase:C}=h,M=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,P=e.mingSikType??"/",I=T===""?(r?to(pt(a,P),-1):pt(a,P)).charAt(1):ct(a,M).charAt(1),U=q=>w?io(o,q):null,V=q=>_?ao({baseBranch:I,targetBranch:q,era:Pf(O),gaehwa:!!j}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsxs("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300 flex items-center justify-between gap-2",children:[g.jsx("span",{children:""}),g.jsxs("div",{className:"inline-flex rounded-md overflow-hidden border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("button",{type:"button",onClick:()=>p("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>p("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""})]})]}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:n.map((q,H)=>{const B=q.gz.charAt(0),W=q.gz.charAt(1),Z=Yse(q.age),X=H===d,G=wi(B,"stem",b),J=wi(W,"branch",b),Q=ro(B,"stem"),oe=ro(W,"branch"),le=y&&Q?"font-thin":"font-bold",z=y&&oe?"font-thin":"font-bold",K=U(W),ne=V(W);return g.jsxs("div",{onClick:()=>u(q,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${X?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${q.gz}  ${q.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:Z}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(o,{stem:B})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Wi(B,"stem",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${le}`,children:G})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Wi(W,"branch",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${z}`,children:J})}),k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(o,{branch:W})}),(w||_)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[w&&g.jsx("div",{children:K}),_&&g.jsx("div",{children:ne})]})]})]},`${q.gz}-${H}`)})})]})}function Yse(e){return e>=2?String(Math.floor(e)):Number.isInteger(e)?String(e):e.toFixed(4).replace(/\.?0+$/,"")}const qse=!1,LP=e=>e<10?`0${e}`:`${e}`;function uT(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8)),l=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let u=!1;for(const d of l){const h=t[d];if(typeof h=="boolean"){u=h;break}if(typeof h=="number"){u=h===1;break}if(typeof h=="string"){u=h==="1"||h.toLowerCase()==="true";break}}if(r==="lunar")try{const d=Zi(i,a,o,0,0),h=`${d.getFullYear()}${LP(d.getMonth()+1)}${LP(d.getDate())}`;return{...e,birthDay:h,calendarType:"solar"}}catch{return e}return e}function P1(e){return new Date(e,6,2,12,0,0,0)}function Kse(e,t){return t-e+1}function Wse({data:e,list:t,onSelect:n}){const r=tn(q=>q.settings),{date:i,setFromEvent:a}=Qr(),o=Fs(),l=Fi(q=>q.usePrevDay),[u,d]=S.useState(()=>t);S.useEffect(()=>{t&&t.length>0&&d(t)},[t]);const h=Zl(e,o),p=S.useMemo(()=>Jl(e,h),[e,h]),b=S.useMemo(()=>p.getFullYear(),[p]),y=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,k=S.useMemo(()=>{if(!i)return[];const q=i.getFullYear(),H=P1(q),B=ct(H,y);return[{at:H,gz:B}]},[i,y]),w=t.length>0?t:u.length>0?u:k,_=S.useMemo(()=>[...w].sort((q,H)=>q.at.getTime()-H.at.getTime()),[w]),T=S.useMemo(()=>{if(_.length===0)return 0;const q=dx(_,i);return q<0?0:q>=_.length?_.length-1:q},[_,i]),[O,j]=S.useState(null);S.useEffect(()=>{j(null)},[i,_]);const C=O??T,M=S.useMemo(()=>{const q=uT(e);return Zl(q,o)},[e,o]),P=S.useMemo(()=>Jl(e,M),[e,M]),I=e.mingSikType??"/",U=S.useMemo(()=>{const q=pt(P,I);return(l?to(q,-1):q).charAt(0)},[P,I,l]),V=S.useMemo(()=>r.sinsalBase===""?(l?to(pt(p,I),-1):pt(p,I)).charAt(1):ct(p,y).charAt(1),[p,I,y,r.sinsalBase,l]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:_.map((q,H)=>{const B=q.at.getFullYear(),W=P1(B),Z=ct(W,y),X=Z.charAt(0),G=Z.charAt(1),J=H===C,Q=wi(X,"stem",r.charType),oe=wi(G,"branch",r.charType),le=ro(X,"stem"),z=ro(G,"branch"),K=r.thinEum&&le?"font-thin":"font-bold",ne=r.thinEum&&z?"font-thin":"font-bold",re=r.showSibiUnseong?io(U,G):null,ce=r.showSibiSinsal?ao({baseBranch:V,targetBranch:G,era:Pf(r.sinsalMode),gaehwa:!!r.sinsalBloom}):null,ue=Kse(b,B);return g.jsxs("div",{onClick:()=>{j(H);const ge=P1(B),ke=ct(ge,y);a({at:ge,gz:ke},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(B)):Promise.resolve().then(()=>n(B)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${J?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${Z}  ${q.at.toLocaleDateString()}  ${ue}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[ue,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(U,{stem:X})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Wi(X,"stem",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${K}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Wi(G,"branch",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${ne}`,children:oe})}),r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(U,{branch:G})}),(r.showSibiUnseong||r.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[r.showSibiUnseong&&re&&g.jsx("div",{children:re}),r.showSibiSinsal&&ce&&g.jsx("div",{children:ce})]})]})]},`${B}-${q.gz||H}`)})})]})}const Vse=new Set(["","","","","","","","","","","",""]);function Zse(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),i=[..._i(new Date(n-1,5,15,12,0))??[],..._i(new Date(n,5,15,12,0))??[],..._i(new Date(n+1,5,15,12,0))??[]].map(u=>({name:String(u.name),date:new Date(u.date)})).sort((u,d)=>u.date.getTime()-d.date.getTime()).filter(u=>Vse.has(u.name));let a=i.findIndex((u,d)=>i[d].date<=t&&t<i[d+1]?.date);a<0&&(a=0);const o=i[a],l=i[a+1];return{start:new Date(o.date.getFullYear(),o.date.getMonth(),o.date.getDate(),0,0,0,0),end:new Date(l.date.getFullYear(),l.date.getMonth(),l.date.getDate(),0,0,0,0),cur:o,next:l}}const Xse=new Set(["","","","","","","","","","","",""]);function Jse(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function Qse(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function R1(e){return new Date(e,5,15,12,0,0,0)}function ele(e){const n=[..._i(R1(e-1))??[],..._i(R1(e))??[],..._i(R1(e+1))??[]].map(l=>({name:String(l.name),date:new Date(l.date)})).sort((l,u)=>l.date.getTime()-u.date.getTime()).filter(l=>Xse.has(l.name)),r=new Date(e,0,1,0,0,0,0),i=new Date(e+1,0,1,0,0,0,0),a=n.findIndex(l=>l.name===""&&l.date>=r&&l.date<i);if(a===-1)return[];const o=[];for(let l=0;l<12;l++){const u=n[a+l];if(!u)break;const d=new Date(u.date),h=Jse(d);o.push({name:u.name,termAt:d,at00:h})}return o}function tle({data:e,activeYear:t,onSelect:n,onSelectMonth:r}){const i=tn(j=>j.settings),a=Fs(),o=Fi(j=>j.usePrevDay),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Zl(e,a),d=S.useMemo(()=>Jl(e,u),[e,u]),h=S.useMemo(()=>{const j=uT(e);return Zl(j,a)},[e,a]),p=S.useMemo(()=>Jl(e,h),[e,h]),b=e.mingSikType??"/",y=S.useMemo(()=>{const j=pt(p,b);return(o?to(j,-1):j).charAt(0)},[p,b,o]),k=i.sinsalBase===""?(o?to(pt(d,b),-1):pt(d,b)).charAt(1):ct(d,l).charAt(1),w=S.useMemo(()=>t?ele(t).map(C=>{const M=C.termAt,P=new Date(C.termAt.getTime()+1860*1e3),I=At(P,l);return{at:M,gz:I,term:C.name,termAt:C.termAt}}):[],[t,l]),{date:_,setFromEvent:T}=Qr(),O=dx(w,_);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:w.map((j,C)=>{const M=j.gz.charAt(0),P=j.gz.charAt(1),I=`${Qse(j.at)}`,U=C===O,V=wi(M,"stem",i.charType),q=wi(P,"branch",i.charType),H=ro(M,"stem"),B=ro(P,"branch"),W=i.thinEum&&H?"font-thin":"font-bold",Z=i.thinEum&&B?"font-thin":"font-bold",X=i.showSibiUnseong?io(y,P):null,G=i.showSibiSinsal?ao({baseBranch:k,targetBranch:P,era:Pf(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{r(j.at);const J=new Date(j.at),{start:Q}=Zse(J);n?.(Q.getFullYear(),Q.getMonth()),T({at:J,gz:At(J,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${U?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${j.term}   ${j.gz}  ${j.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:I}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(y,{stem:M})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Wi(M,"stem",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${W}`,children:V})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Wi(P,"branch",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${Z}`,children:q})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(y,{branch:P})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&X&&g.jsx("div",{children:X}),i.showSibiSinsal&&G&&g.jsx("div",{children:G})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:j.term})]})]},`${j.term}-${j.at.toISOString()}`)})})]})}function nle(){const e=tn(r=>r.settings),{date:t,setFromEvent:n}=Qr();return{settings:e,pickedDate:t,setFromEvent:n}}const rle=(e,t)=>new Date(e,t,15,12,0,0,0),O2=e=>{const t=new Date(e);return t.setHours(23,59,0,0),t},ile=new Set(["","","","","","","","","","","",""]),T7=e=>[..._i(new Date(e-1,5,15,12,0))??[],..._i(new Date(e,5,15,12,0))??[],..._i(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,r)=>n.date.getTime()-r.date.getTime()),ale=e=>{const t=T7(e.getFullYear()),n=t.filter(o=>ile.has(o.name));if(n.length<12){const o=t.findIndex(d=>d.date>e),l=t[Math.max(0,o-1)],u=t[Math.min(t.length-1,o)];return{start:new Date(l.date),end:new Date(u.date),cur:l,next:u}}let r=n.findIndex(o=>o.date>e)-1;r<0&&(r=n.length-1);const i=n[r],a=n[(r+1)%n.length];return{start:new Date(i.date),end:new Date(a.date),cur:i,next:a}},ole=e=>{if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",r="",i="",a="";for(const o of t)o.type==="month"&&(n=o.value),o.type==="day"&&(r=o.value),o.type==="hour"&&(i=o.value),o.type==="minute"&&(a=o.value);return`${n}/${r} ${i}:${a}`};function sle({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i=0,settings:a,pickedDate:o}){const l=Fi(B=>B.usePrevDay),u=a.ilunRule||"/",d=e.mingSikType??"/",h=S.useMemo(()=>{const B=uT(e);return Zl(B,i)},[e,i]),p=S.useMemo(()=>Jl(e,h),[e,h]),b=S.useMemo(()=>{if(!p)return;const B=pt(p,d);return(l?to(B,-1):B).charAt(0)},[p,d,l]),y=S.useMemo(()=>e?Zl(e,i):null,[e,i]),k=S.useMemo(()=>e&&y?Jl(e,y):null,[e,y]),w=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&k?a.sinsalBase===""?(l?to(pt(k,d),-1):pt(k,d)).charAt(1):ct(k,w).charAt(1):null,T=S.useMemo(()=>rle(t,n),[t,n]),O=S.useMemo(()=>o?O2(new Date(o)):null,[o]),j=S.useMemo(()=>r?O2(r):null,[r]),C=S.useMemo(()=>O??j??T,[O,j,T]),{start:M,end:P,cur:I,next:U}=S.useMemo(()=>ale(C),[C]),V=S.useMemo(()=>{const B=[],W=new Date(M);for(;W<P;)B.push(new Date(W)),W.setDate(W.getDate()+1);return B},[M,P]),q=S.useMemo(()=>{const B=T7(C.getFullYear()),W=B.filter(X=>X.date>=M&&X.date<P),Z=B.find(X=>X.date>=P);return Z?[...W,Z]:W},[C,M,P]),H=S.useMemo(()=>{const B=[];let W=[];const Z=new Date(M).getDay();for(let X=0;X<Z;X+=1)W.push(null);for(const X of V)W.length===7&&(B.push(W),W=[]),W.push(X);for(;W.length<7;)W.push(null);return B.push(W),B},[V,M]);return{rule:u,dayStem:b,baseBranch:_,pickerNoon:O,termMarks:q,weeks:H,cur:I??null,next:U??null}}function lle({setFromEvent:e}){return{handleDayClick:S.useCallback(n=>{e({at:n},"")},[e])}}function cle({data:e,year:t,month:n,selectedMonth:r}){const i=Fs(),a=nle(),o=sle({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i,settings:a.settings,pickedDate:a.pickedDate}),l=lle({setFromEvent:a.setFromEvent});return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[o.cur?.name?g.jsxs(g.Fragment,{children:[o.cur.name," "," ~ ",o.next?.name??""]}):`${t} ${n}`,o.termMarks.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",o.termMarks.map((u,d)=>g.jsxs("span",{children:[u.name," ",ole(u.date),d<o.termMarks.length-1?"  ":""]},`${u.name}_${u.date.getTime()}_${d}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(u=>g.jsx("div",{className:"py-1",children:u},u))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:o.weeks.map((u,d)=>u.map((h,p)=>{if(!h)return g.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800"},`${d}-${p}`);const b=O2(h),y=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0),k=new Date,w=b.getFullYear()===k.getFullYear()&&b.getMonth()===k.getMonth()&&b.getDate()===k.getDate(),T=!!o.pickerNoon&&b.getFullYear()===o.pickerNoon.getFullYear()&&b.getMonth()===o.pickerNoon.getMonth()&&b.getDate()===o.pickerNoon.getDate()||!o.pickerNoon&&w,O=i!==0?new Date(y.getTime()+i*60*1e3):y,j=fW(O,o.rule),C=j.charAt(0),M=j.charAt(1),P=wi(C,"stem",a.settings.charType),I=wi(M,"branch",a.settings.charType),U=a.settings.thinEum&&ro(C,"stem")?"font-thin":"font-bold",V=a.settings.thinEum&&ro(M,"branch")?"font-thin":"font-bold",q=!!o.dayStem&&a.settings.showSipSin,H=!!o.dayStem&&a.settings.showSibiUnseong,B=!!o.dayStem&&o.baseBranch!=null&&a.settings.showSibiSinsal,W=q?Sa(o.dayStem,{stem:C}):"",Z=q?Sa(o.dayStem,{branch:M}):"",X=H?io(o.dayStem,M):"",G=B?ao({baseBranch:o.baseBranch,targetBranch:M,era:Pf(a.settings.sinsalMode),gaehwa:!!a.settings.sinsalBloom}):"",J=o.termMarks.find(Q=>Q.date.getFullYear()===b.getFullYear()&&Q.date.getMonth()===b.getMonth()&&Q.date.getDate()===b.getDate());return g.jsxs("div",{onClick:()=>l.handleDayClick(y),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${T?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${j} (${b.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:b.getDate()}),J&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:J.name})]}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:W}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Wi(C,"stem",a.settings)}`,children:g.jsx("span",{className:U,children:P})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Wi(M,"branch",a.settings)}`,children:g.jsx("span",{className:V,children:I})}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:Z}),(H||B)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[H&&X&&g.jsx("div",{children:X}),B&&G&&g.jsx("div",{children:G})]})]},h.toISOString())}))})]})}function IP(e,t){const n=e.startYear??e.at.getFullYear(),r=t?t.startYear??t.at.getFullYear():n+10,i=[];for(let a=n;a<r;a++){const o=pn(a,315),l=ct(new Date(a,1,10));i.push({at:o,gz:l})}return i}function ule({data:e}){const t=Fs(),n=ac(e,e.mingSikType,100,t),[r,i]=S.useState(null),[a,o]=S.useState(null),[l,u]=S.useState("il"),[d,h]=S.useState(null);S.useEffect(()=>{if(!n.length)return;const _=new Date,T=n.findIndex((O,j)=>{const C=n[j+1]?.at;return _>=O.at&&(!C||_<C)});T!==-1&&i(T)},[n]);const p=_=>_<=0&&n.length>1?1:_;S.useEffect(()=>{if(r===null)return;const _=p(r),T=n[_],O=n[_+1];if(!T)return;const j=IP(T,O);if(!Array.isArray(j)||j.length===0)return;const C=j.filter(U=>!!U&&U.at instanceof Date&&!Number.isNaN(U.at.getTime()));if(!C.length)return;const M=new Date,P=M.getTime();C.findIndex((U,V)=>{const q=C[V+1]?.at,H=U.at.getTime(),B=q?q.getTime():null;return P>=H&&(B===null||P<B)})!==-1&&o({year:M.getFullYear(),month:M.getMonth()})},[r,n]);const b=lx(e,void 0,void 0,{dstOffsetMinutes:t}),{date:y}=Qr(),k=y.getMonth()+1===1?y.getFullYear()-1:y.getFullYear(),w=S.useMemo(()=>{if(!b?.dae?.gz)return[];const _=n.findIndex((M,P)=>{const I=n[P+1]?.at;return b.dae.at>=M.at&&(!I||b.dae.at<I)});if(_===-1)return[];const T=p(_),O=n[T],j=n[T+1],C=IP(O,j);return Array.isArray(C)?C.filter(M=>!!M&&M.at instanceof Date&&!Number.isNaN(M.at.getTime())):[]},[n,b?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(Gse,{data:e}),l==="se"||l==="wol"||l==="il"?g.jsx(Wse,{data:e,list:w,onSelect:()=>{u("wol")}}):null,l==="wol"||l==="il"?g.jsx(tle,{data:e,activeYear:k,onSelect:(_,T)=>{o({year:_,month:T}),u("il")},onSelectMonth:h}):null,l==="il"&&a&&g.jsx(cle,{data:e,year:a.year,month:a.month+1,selectedMonth:d})]})}const dle=new Set(eW),fle=new Set(tW);function $P(e){return typeof e=="string"&&e.length>=2&&dle.has(e[0])&&fle.has(e[1])}function Ri(e,...t){if($P(e))return e;for(const n of t)if($P(n))return n;return""}const hle={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22};function eb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function mle({data:e}){const t=tn(W=>W.settings),{manualHour:n}=Fi(),{showSibiUnseong:r,showSibiSinsal:i,sinsalBase:a,sinsalMode:o,sinsalBloom:l}=t,{date:u}=Qr(),d=Fs(),h=e.mingSikType??"/",p=e.DayChangeRule??(e.mingSikType===""?"":""),b=S.useMemo(()=>Mf(e),[e]),y=S.useMemo(()=>sx(b,{dstOffsetMinutes:d}),[b,d]),k=S.useMemo(()=>Vj(b,h,{dstOffsetMinutes:d}),[b,d,h]),w=S.useMemo(()=>Vv(k.day?.charAt(0)??""),[k.day]),_=!e.birthTime||e.birthTime==="",T=S.useMemo(()=>J6(y,k.hour,e.dir??"forward",120),[y,k.hour,e.dir]),O=S.useMemo(()=>e7(T,k.day,e.dir??"forward",p),[T,k.day,e.dir,p]),j=S.useMemo(()=>Dp(y,k.month,e.dir??"forward",120,b.birthPlace?.lon??127.5),[y,k.month,e.dir,b.birthPlace?.lon]),C=S.useMemo(()=>t7(j,k.year,e.dir??"forward",p,y),[j,k.year,e.dir,y,p]),M=S.useMemo(()=>{const W=T?.events?.[0];return W?{at:W.at,from:Ri(k.hour),to:Ri(W.gz)}:null},[T?.events,k.hour]),P=S.useMemo(()=>{const W=j?.events?.[0];return j?.firstChange?{at:j.firstChange,from:Ri(k.month),to:Ri(W?.gz??k.month)}:null},[j?.firstChange,j?.events,k.month]),I=S.useMemo(()=>{const W=_?n?n.stem+n.branch:"":Ri(eb(T.events,u)?.gz,k.hour);let Z;if(_&&n){const X=u.getFullYear(),G=u.getMonth(),J=u.getDate(),Q=hle[n.branch]??0,oe=new Date(X,G,J,Q,0),le=pt(oe,h);Z=Ri(le,k.day)}else Z=Ri(eb(O.events,u)?.gz,k.day);return{si:W,il:Z,wl:Ri(eb(j.events,u)?.gz,k.month),yn:Ri(eb(C.events,u)?.gz,k.year)}},[u,T.events,O.events,j.events,C.events,k,_,n,h]),U=S.useMemo(()=>({si:Ri(no(u,h)),il:Ri(pt(u,h)),wl:Ri(At(u)),yn:Ri(ct(u))}),[u,h]),V=S.useMemo(()=>a===""?k.day.charAt(1):k.year.charAt(1),[a,k.day,k.year]),q=S.useMemo(()=>Pf(o),[o]),H=W=>{if(!W)return{unseong:"",shinsal:""};const Z=wi(w,"stem",""),X=wi(W.charAt(1),"branch",""),G=wi(V,"branch","");return{unseong:r&&io(Z,X)||"",shinsal:i&&ao({baseBranch:G,targetBranch:X,era:q,gaehwa:!!l})||""}},B=(W,Z,X="myoun")=>{const G=Z,{unseong:J,shinsal:Q}=Z?H(Z):{unseong:"",shinsal:""},oe=X==="myoun"&&_&&(W===""||W==="");return g.jsx(Ud,{label:W,gz:G,dayStem:w,settings:t,unseongText:Z?J:"",shinsalText:Z?Q:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:oe},`${X}-${W}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Lm(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[B("",I.si,"myoun"),B("",I.il,"myoun"),B("",I.wl,"myoun"),B("",I.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[B("",U.si,"live"),B("",U.il,"live"),B("",U.wl,"live"),B("",U.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",M?`${Lm(M.at)} (${M.from}  ${M.to})`:" "]}),g.jsxs("div",{children:[":"," ",P?`${Lm(P.at)} (${P.from}  ${P.to})`:" "]})]})]})}const ple=["","","","","","","","","",""],gle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ble={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},A7={:"",:"",:"",:"",:""},N7={:"",:"",:"",:"",:""},O7={:"",:"",:"",:"",:""};function yle(e,t){switch(e){case"":return t;case"":return A7[t];case"":return N7[t];case"":return O7[t];case"":return C7[t];default:return t}}const C7={:"",:"",:"",:"",:""};function vle({data:e,perStemElementScaled:t,dayStem:n,yongshinTop:r,yongshinKind:i,width:a=340,height:o=360}){const l=a/2,u=o/2-20,d=Math.min(a,o)*.33,h=S.useMemo(()=>{const w=(n??"").charAt(0);return ble[w]??null},[n]),p=S.useMemo(()=>e.map((w,_)=>{const T=Math.PI/2+2*-Math.PI*_/5;return{...w,angle:T,x:l+d*Math.cos(T),y:u-d*Math.sin(T)}}),[e,l,u,d]),b=w=>w?w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":null:null,y=(w,_)=>_===w?"":A7[w]===_?"":N7[w]===_?"":O7[w]===_?"":C7[w]===_?"":"",k=S.useMemo(()=>{if(!e||e.length===0)return null;const w=[...e].sort((P,I)=>I.value-P.value),_=w[0],O=w[w.length-1]?.name??"",j=b(r),C=h&&j?y(h,j):O;return{summary:i==="GYEOKGUK"?`${_.name}   ,    ${_.name}  .`:`${_.name}   ,  ${C}     .`,advice:_.value>45?`${_.name}         .`:"       ."}},[e,h,r,i]);return g.jsxs("div",{className:"w-full flex flex-col items-center p-6 bg-white dark:bg-neutral-900 rounded-[2.5rem] border border-neutral-100 dark:border-neutral-800 shadow-xl tracking-tighter transition-colors",children:[g.jsx("div",{className:"text-center mb-4",children:g.jsxs("h3",{className:"text-lg font-black text-neutral-800 dark:text-neutral-100",children:[n,"  "]})}),g.jsxs("svg",{width:a,height:o,className:"overflow-visible",children:[g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:g.jsx("path",{d:"M0,0 L10,3.5 L0,7 Z",fill:"#94a3b8",opacity:"0.4"})})}),p.map((w,_)=>{const T=p[(_+2)%5];return g.jsx("line",{x1:w.x,y1:w.y,x2:T.x,y2:T.y,stroke:"currentColor",className:"text-neutral-200 dark:text-neutral-800",strokeWidth:1.5,strokeDasharray:"4 4"},`line-ke-${_}`)}),p.map((w,_)=>{const T=p[(_+1)%5],O=(w.x+T.x)/2,j=(w.y+T.y)/2,C=O-l,M=j-u,P=l+C*1.45,I=u+M*1.45;return g.jsx("path",{d:`M${w.x},${w.y} Q${P},${I} ${T.x},${T.y}`,stroke:"#94a3b8",strokeWidth:2,strokeOpacity:.25,fill:"none",markerEnd:"url(#arrow)"},`path-sheng-${_}`)}),p.map(w=>{const _=w.name,T=h?yle(_,h):null,O=T?ple.filter(j=>gle[j]===T).map(j=>[j,t?.[j]??0]):[];return g.jsxs("g",{transform:`translate(${w.x},${w.y})`,children:[g.jsx("circle",{r:40,fill:w.color,className:"stroke-white/20 dark:stroke-black/20",strokeWidth:1}),g.jsx("circle",{r:40,fill:"black",opacity:.05}),g.jsx("text",{textAnchor:"middle",dy:"-5",fontSize:15,className:"fill-white font-black",children:w.name}),g.jsxs("text",{textAnchor:"middle",dy:"15",fontSize:13,className:"fill-white/90 font-bold",children:[w.value,"%"]}),g.jsx("g",{transform:"translate(0, 48)",children:O.map(([j,C],M)=>{const P=j.charAt(0),I=Math.round(C),U=I===0;return g.jsxs("g",{transform:`translate(${(M===0?-1:1)*25}, 0)`,children:[g.jsx("rect",{x:"-21",y:"0",width:"42",height:"21",rx:"10.5",fill:U?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.3)"}),g.jsxs("text",{textAnchor:"middle",y:"14.5",fontSize:12,className:`font-black ${U?"fill-neutral-400 dark:fill-neutral-500":"fill-white"}`,children:[g.jsx("tspan",{children:P}),g.jsx("tspan",{dx:"1",children:I})]})]},j)})})]},w.name)})]}),k&&g.jsxs("div",{className:"w-full mt-6 space-y-3",children:[g.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800 text-center",children:g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold",children:k.summary})}),g.jsx("div",{className:"px-4 py-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl border border-blue-100/30 text-center",children:g.jsxs("p",{className:"text-[11.5px] text-blue-700 dark:text-blue-300 font-bold",children:[" ",k.advice]})})]})]})}const xle=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function dT(e){return Math.max(0,Math.min(100,e))}function M7(e){const t=dT(e);return xle.find(r=>t>=r.min&&t<r.max)?.name??""}const wle=[10,20,35,45,55,65,80];function _le({value:e}){const[t,n]=S.useState(!1),r=S.useMemo(()=>dT(e),[e]),i=S.useMemo(()=>M7(r),[r]);S.useEffect(()=>{n(!0)},[]);const a=S.useMemo(()=>r>=80?{tag:"",desc:"      .",advice:"  () ()   ."}:r>=55?{tag:"",desc:"      .",advice:"      ."}:r>=45?{tag:"",desc:"        .",advice:"      ."}:r>=20?{tag:"",desc:"       .",advice:"() ()       ."}:{tag:"",desc:"       .",advice:"        ."},[r]);return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-lg border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-end mb-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"    "}),g.jsx("p",{className:"text-[10px] text-neutral-400 uppercase tracking-tighter",children:"  "})]}),g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:"text-2xl font-black text-neutral-800 dark:text-white",children:r.toFixed(0)}),g.jsx("span",{className:"text-xs font-bold text-neutral-500",children:"%"})]})]}),g.jsxs("div",{className:"relative mb-8 pt-4",children:[g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-2 px-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"translate-x-1",children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-3 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-emerald-400 via-yellow-400 to-red-500 opacity-80"}),wle.map(o=>g.jsx("div",{className:"absolute top-0 h-3 w-[1.5px] bg-white/30 dark:bg-black/20",style:{left:`${o}%`}},o)),g.jsx("div",{className:"absolute left-1/2 top-0 w-0.5 h-3 bg-white/50 -translate-x-1/2 z-10"}),g.jsx("div",{className:"absolute -top-1.5 h-6 w-3 bg-white dark:bg-neutral-100 rounded-full shadow-[0_2px_8px_rgba(0,0,0,0.3)] border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:t?`${r}%`:"50%",transform:"translateX(-50%)"},children:g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsx("div",{className:"w-1 h-2 bg-neutral-300 rounded-full"})})})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:`px-3 py-1 rounded-full text-[11px] font-black border-2 ${r>=55?"border-red-500/20 bg-red-50 text-red-600":r>=45?"border-emerald-500/20 bg-emerald-50 text-emerald-600":"border-blue-500/20 bg-blue-50 text-blue-600"}`,children:[a.tag," (",i,")"]}),g.jsx("div",{className:"h-[1px] flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsxs("div",{className:"px-1",children:[g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold leading-snug mb-1",children:a.desc}),g.jsxs("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed italic",children:[" ",a.advice]})]})]})]})}const BP={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},Sle=["year","month","day","hour"],kle=new Set(["","","","",""]),tb=new Set(["","","","",""]),zP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ele={:5,:7,:5,:-5,:-7,:-5};function jle({natal:e,perStemElementScaled:t}){const[n,r]=S.useState(!1);S.useEffect(()=>{const b=setTimeout(()=>r(!0),100);return()=>clearTimeout(b)},[e]);const i=S.useMemo(()=>{if(!t||!e||e.length<4)return null;let b=0,y=0;Object.entries(t).forEach(([W,Z])=>{tb.has(W.charAt(0))?b+=Z:y+=Z});const k=b+y>0?(b-y)/(b+y):0;let w=0,_=0,T=0,O=0;e.forEach(W=>{[W[0],zP[W[1]]].forEach(Z=>{Z&&(kle.has(Z)?w+=1:_+=1,tb.has(Z)?T+=1:O+=1)})});const j=w+_>0?(w-_)/(w+_):0,C=T+O>0?(T-O)/(T+O):0;let M=0,P=0;e.forEach((W,Z)=>{const X=Sle[Z],G=BP[X].stem,J=BP[X].branch;tb.has(W[0])?M+=G:P+=G;const Q=zP[W[1]];Q&&tb.has(Q)?M+=J:P+=J});const I=M+P>0?(M-P)/(M+P):0,U=e[1]?.charAt(1),V=(Ele[U]||0)/100,q=j*.3+C*.3+k*.2+I*.2+V,H=(Math.min(1,Math.max(-1,q))+1)*50,B=100-Math.abs(H-50)*2;return{yang:H,yin:100-H,essencePos:(j+1)*50,naturePos:(C+1)*50,harmony:B,category:H>=55?"":H<=45?"":""}},[e,t]),a=S.useMemo(()=>{if(!i)return null;const{yang:b,essencePos:y,naturePos:k,category:w,harmony:_}=i,T=Math.abs(y-k);let O="";w===""?O="              .":w===""?O=b>75?"    .       .":"         .":O=b<25?"    .         .":"   .         .";let j="";T<15?j="     .      .":T<40?j="       .    .":j="        .      .";let C="";return _>85?C="    .   .":w===""?C="         .":C="          .",{natureDetail:O,consistencyDetail:j,advice:C}},[i]);if(!i||!a)return null;const{yang:o,yin:l,essencePos:u,naturePos:d,harmony:h,category:p}=i;return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-start mb-10",children:[g.jsx("div",{children:g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"   "})}),g.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-xl text-center border border-emerald-100 dark:border-emerald-800/50",children:[g.jsx("div",{className:"text-[9px] font-bold text-emerald-600 mb-0.5 uppercase",children:""}),g.jsxs("div",{className:"text-base font-black text-emerald-500 leading-none",children:[h.toFixed(0),"%"]})]})]}),g.jsxs("div",{className:"relative mb-14 px-1",children:[n&&g.jsxs("div",{className:"absolute -top-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${u}%`,transform:"translateX(-50%)"},children:[g.jsx("span",{className:"text-[10px] font-bold text-blue-500 mb-1",children:""}),g.jsx("div",{className:"w-[1.5px] h-3 bg-blue-500/40 rounded-full"})]}),g.jsxs("div",{className:"relative w-full h-8 bg-neutral-100 dark:bg-neutral-800 rounded-2xl flex overflow-hidden shadow-inner border-[3px] border-white dark:border-neutral-900",children:[g.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000 ease-out",style:{width:n?`${l}%`:"50%"}}),g.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-out",style:{width:n?`${o}%`:"50%"}}),g.jsx("div",{className:"absolute left-1/2 top-0 w-[1px] h-full bg-white/30 -translate-x-1/2 z-10"})]}),n&&g.jsxs("div",{className:"absolute -bottom-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${d}%`,transform:"translateX(-50%)"},children:[g.jsx("div",{className:"w-[1.5px] h-3 bg-red-500/40 rounded-full"}),g.jsx("span",{className:"text-[10px] font-bold text-red-500 mt-1",children:""})]})]}),g.jsxs("div",{className:"space-y-3 mb-5 mt-6",children:[g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.natureDetail})]}),g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-blue-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.consistencyDetail})]})]}),g.jsxs("div",{className:`text-center py-3 rounded-xl text-[11px] font-bold tracking-tight shadow-sm ${p===""?"bg-red-50 text-red-600 dark:bg-red-950/20":p===""?"bg-blue-50 text-blue-600 dark:bg-blue-950/20":"bg-emerald-50 text-emerald-600 dark:bg-emerald-950/20"}`,children:[" ",a.advice]})]})}function im(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function ua({label:e,natal:t,dae:n,se:r,wol:i,il:a}){const o=n.length+r.length+i.length+a.length>0,l=t.length>0?t:["#"],u=o?l.filter(p=>p!=="#"):l,h=u.some(p=>p!=="#")||n.length>0||r.length>0||i.length>0||a.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:h,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(p,"natal"),children:p},`natal-${b}`)),n.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(p,"dae"),children:p},`dae-${b}`)),r.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(p,"se"),children:p},`se-${b}`)),i.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(p,"wol"),children:p},`wol-${b}`)),a.map((p,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(p,"il"),children:p},`il-${b}`))]})]})}function C2(e){return Array.isArray(e)?e:[]}function nb(e,t){const n=new Set(C2(e));return C2(t).filter(i=>!n.has(i))}function Tle({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const o=cx(e),l=Ul({natal:e}),u=t?Ul({natal:e,daewoon:t}):l,d=n?Ul({natal:e,daewoon:t,sewoon:n}):u,h=r?Ul({natal:e,daewoon:t,sewoon:n,wolwoon:r}):d,p=i?Ul({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i}):h,b=w=>({natal:C2(o[w]),dae:nb(l[w],u[w]),se:nb(u[w],d[w]),wol:nb(d[w],h[w]),il:nb(h[w],p[w])}),y={cheonganHap:b("cheonganHap"),cheonganChung:b("cheonganChung"),jijiSamhap:b("jijiSamhap"),jijiBanhap:b("jijiBanhap"),jijiBanghap:b("jijiBanghap"),jijiYukhap:b("jijiYukhap"),amhap:b("amhap"),ganjiAmhap:b("ganjiAmhap"),jijiChung:b("jijiChung"),jijiHyeong:b("jijiHyeong"),jijiPa:b("jijiPa"),jijiHae:b("jijiHae")},k=w=>a===""?{natal:w.natal,dae:[],se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:w.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(ua,{label:"",...k(y.cheonganHap)}),g.jsx(ua,{label:"",...k(y.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(ua,{label:"",...k(y.jijiSamhap)}),g.jsx(ua,{label:"",...k(y.jijiBanhap)}),g.jsx(ua,{label:"",...k(y.jijiBanghap)}),g.jsx(ua,{label:"",...k(y.jijiYukhap)}),g.jsx(ua,{label:"",...k(y.amhap)}),g.jsx(ua,{label:"",...k(y.ganjiAmhap)}),g.jsx(ua,{label:"",...k(y.jijiChung)}),g.jsx(ua,{label:"",...k(y.jijiHyeong)}),g.jsx(ua,{label:"",...k(y.jijiPa)}),g.jsx(ua,{label:"",...k(y.jijiHae)})]})}function Ale(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Nle({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((r,i)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ale(r,t),children:r},`${t}-${i}-${r}`))})}function UP({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const i=n.items.some(a=>a!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:i,children:n.label}),g.jsx(Nle,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function Ole({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const{settings:o}=tn(),[l,u]=S.useState(""),[d,h]=S.useState("");S.useEffect(()=>{o.sinsalBase===""?(u(""),h("")):(u(""),h(""))},[o.sinsalBase]);const p=S.useMemo(()=>({voidBasis:l===""?"day":"year",samjaeBasis:d===""?"day":"year"}),[l,d]),b=S.useMemo(()=>Lp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:p}),[e,t,n,r,i,p]),{good:y,bad:k,meta:w}=b,_=q=>q.map(H=>H==="#"?H:` ${H}`),T=(q,H)=>{const B=["natal"];return H===""&&B.push("natal"),H===""&&B.push("natal","dae"),H===""&&B.push("natal","dae","se"),H===""&&B.push("natal","dae","se","wol"),H===""&&B.push("natal","dae","se","wol","il"),q.filter(W=>B.includes(W.source))},O=[{label:"",items:_(y.si),source:"natal"},{label:"",items:_(y.il),source:"natal"},{label:"",items:_(y.wol),source:"natal"},{label:"",items:_(y.yeon),source:"natal"},{label:"",items:y.dae,source:"dae"},{label:"",items:y.se,source:"se"},{label:"",items:y.wolun,source:"wol"},{label:"",items:y.ilun,source:"il"}],j=[{label:"",items:_(k.si),source:"natal"},{label:"",items:_(k.il),source:"natal"},{label:"",items:_(k.wol),source:"natal"},{label:"",items:_(k.yeon),source:"natal"},{label:"",items:k.dae,source:"dae"},{label:"",items:k.se,source:"se"},{label:"",items:k.wolun,source:"wol"},{label:"",items:k.ilun,source:"il"}],C=T(O,a),M=T(j,a),P=w.voidPair.day?`(${w.voidPair.day.join("")})`:"()",I=w.voidPair.year?`(${w.voidPair.year.join("")})`:"()",U=w.samjaeYears.day?`(${w.samjaeYears.day.join("")})`:"()",V=w.samjaeYears.year?`(${w.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:l,onChange:q=>u(q.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:P}),g.jsx("option",{value:"",children:I})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:d,onChange:q=>h(q.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:U}),g.jsx("option",{value:"",children:V})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(UP,{title:"()",rows:C}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(UP,{title:"()",rows:M})]})]})}const ba={year:0,month:1,day:2,hour:3},D7={[ba.year]:.3,[ba.month]:.5,[ba.day]:.3,[ba.hour]:.3},P7={[ba.year]:.15,[ba.month]:.2,[ba.day]:0,[ba.hour]:.15},Cle=e=>Bm.has(e)?e:ir[e]??e,Mle=e=>rf.has(e)?e:Xn[e]??e,Dle=e=>typeof e=="string"&&e.length>=2?Cle(e.slice(-1)):"",Ple=e=>typeof e=="string"&&e.length>=1?Mle(e.slice(0,1)):"",Mn=(e,t,n,r)=>({han:e,nan:t,jo:n,seup:r}),Rle={:Mn(2,0,.5,2),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,2,1,2),:Mn(0,2,2,.5),:Mn(0,2,2,0),:Mn(0,2,2,1),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(2,0,1,1)},Lle={:Mn(0,1,1,0),:Mn(0,1,1,0),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,0,1,0),:Mn(0,0,0,1),:Mn(1,0,0,1),:Mn(1,0,0,1),:Mn(2,0,0,2),:Mn(2,0,0,2)},FP=e=>Math.max(0,Math.min(100,e));function HP(e,t){const n=Math.max(0,e),r=Math.max(0,t),i=n+r;return i<=0?50:r/i*100}function Ile(e){let t=0,n=0,r=0,i=0;return[ba.year,ba.month,ba.day,ba.hour].forEach(a=>{const o=Rle[Dle(e[a])],l=Lle[Ple(e[a])],u=D7[a],d=P7[a];u>0&&o&&(t+=o.han*u,n+=o.nan*u,r+=o.jo*u,i+=o.seup*u),d>0&&l&&(t+=l.han*d,n+=l.nan*d,r+=l.jo*d,i+=l.seup*d)}),{han:t,nan:n,jo:r,seup:i}}function R7(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function L7(e){const{han:t,nan:n,jo:r,seup:i}=Ile(e),a=HP(t,n),o=HP(i,r);return{hanNanPct:FP(a),joSeupPct:FP(o),raw:{han:t,nan:n,jo:r,seup:i},weights:{branch:D7,stem:P7}}}function $le(e){return L7(R7(e))}function Ble(e){const t=R7(e);return S.useMemo(()=>L7(t),[t])}function GP({label:e,percent:t,leftHint:n,midHint:r,rightHint:i,gradientClass:a}){const[o,l]=S.useState(!1),u=S.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),d=[20,35,50,65,80];return S.useEffect(()=>{l(!0)},[]),g.jsxs("div",{className:"flex-1 p-4 bg-white dark:bg-neutral-900 rounded-3xl shadow-sm border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("span",{className:"text-[11px] font-black text-neutral-400 uppercase",children:e}),g.jsxs("span",{className:"text-sm font-black dark:text-white",children:[u.toFixed(0),"%"]})]}),g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-1.5 px-0.5",children:[g.jsx("span",{children:n}),g.jsx("span",{children:r}),g.jsx("span",{children:i})]}),g.jsxs("div",{className:"relative h-2.5 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:`absolute inset-0 rounded-full opacity-80 ${a}`}),d.map(h=>g.jsx("div",{className:"absolute top-0 h-2.5 w-[1px] bg-white/20 dark:bg-black/10",style:{left:`${h}%`}},h)),g.jsx("div",{className:"absolute -top-1.5 h-5 w-2.5 bg-white dark:bg-neutral-100 rounded-full shadow-md border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:o?`${u}%`:"50%",transform:"translateX(-50%)"}})]})]})}function zle({natal:e}){const{hanNanPct:t,joSeupPct:n}=Ble(e),r=S.useMemo(()=>{let i="";return t>60?i+="   , ":t<40?i+="   , ":i+="    , ",n>60?i+="     .":n<40?i+="      .":i+="     .",i},[t,n]);return g.jsxs("div",{className:"w-full space-y-3",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx(GP,{label:" ()",percent:t,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-blue-500 via-neutral-200 to-red-500"}),g.jsx(GP,{label:" ()",percent:n,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-teal-600 via-neutral-200 to-orange-600"})]}),g.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/30 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11.5px] text-neutral-600 dark:text-neutral-400 leading-relaxed text-center font-medium",children:[g.jsx("span",{className:"text-neutral-400 mr-2",children:" :"}),r]})})]})}const Vr={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wa={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ule={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Iy={:"",:"",:"",:"",:""},I7={:"",:"",:"",:"",:""},tp={:"",:"",:"",:"",:""},$7={:"",:"",:"",:"",:""},Fle={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}}},Hle={:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}}};function fT(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}function B7(e){return(typeof e=="string"?e.trim().toLowerCase():"")==="hgc"?"hgc":"classic"}function hT(e){return e==="hgc"?Hle:Fle}const Gle={:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""]},L1={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},z7={:"",:"",:"",:"",:""},U7={:"",:"",:"",:""},Yle=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],qle=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Kle={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},Je=(e,t)=>`${e}${t}`,Ii=(e,t,n)=>`${e}${t}${n}`,Wle={:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]},YP={[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""]},qP={[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:[""],[Ii("","","")]:["",""]},Vle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function ya(e){return["","","","",""].includes(e)}function Zle(e){return["","","","","",""].includes(e)}const I1=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,fa=e=>e&&e.length>=1?e.charAt(0):"",In=e=>e&&e.length>=2?e.charAt(1):"",Xle=e=>Array.from(new Set(e));function Jle(e,t){const n=Gle[e];if(!n)return!1;const r=new Set(t.filter(Boolean));return n.filter(a=>a!==e).every(a=>r.has(a))}function Qle(e){return Vr[e]??""}function Va(e,t){const n=Vr[e],r=Vr[t];if(!n||!r)return"";let i;r===n?i="":r===Iy[n]?i="":r===tp[n]?i="":r===$7[n]?i="":r===I7[n]?i="":i="";const a=ya(e)===ya(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function ece(e,t){const n=Vr[e],r=Wa[t];if(!n||!r)return"";let i;r===n?i="":r===Iy[n]?i="":r===tp[n]?i="":r===$7[n]?i="":r===I7[n]?i="":i="";const a=Zle(t)===ya(e);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function tce(e){return{:"",:"",:"",:"",:""}[e]??""}function M2(e,t){const n=Qle(e),r=ya(e);let i;t===n?i="":Iy[n]===t?i="":Iy[t]===n?i="":tp[n]===t?i="":tp[t]===n?i="":i="";const a=r===ya(tce(t));switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}const nce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rce=e=>/^(|||||||||)$/.test(e);function ice(e){return e?rce(e)?e:nce[e]??"":""}function rb(e){return ice(fa(e))}function ace(e){return e?.charAt(0)??""}function oce(e){return e?.charAt(1)??""}function sce(e,t,n){const[r,i,a,o]=(e??[]).slice(0,4),l=se=>(se?.length??0)>=1?se.charAt(0):"",u=se=>(se?.length??0)>=2?se.charAt(1):"",d=[r,i,a,o].map(l).filter(Boolean),h=new Set(Object.keys(Wa)),p=[r,i,a,o].map(u).filter(se=>!!se&&h.has(se)),b=l(a),y=Kle[b]??!1,k=new Set,w=t==="classic"?Kv:Wv,_=new Set(["","","","","","","","","",""]),T=se=>(w[se]??[]).filter(Oe=>_.has(Oe)),O=(se,Oe)=>{const Ye=Wa[Oe];return Ye?M2(se,Ye):null},j={:0,:0,:0,:0,:0};for(const se of d){const Oe=Vr[se];Oe&&(j[Oe]+=10)}const C=[];for(const se of p){const Oe=Ule[se];Oe&&C.push(Oe);const Ye=Wa[se];Ye&&(j[Ye]+=6)}const P=[...d,...C].map(se=>Va(b,se)),I={:["",""],:["",""],:["",""],:["",""],:["",""]},U=se=>P.filter(Oe=>Oe===se).length,V=se=>P.filter(Oe=>I[se].includes(Oe)).length,q=p[1],H=!!b&&Vle[b]===q,B=n.elementPercent100;B.>=20&&B.>=20&&B.>=15&&k.add("");const W=[r,i,a,o].filter(Boolean),Z=[];for(const se of W){const Oe=se.charAt(0),Ye=se.charAt(1);Z.push(Va(b,Oe)),Z.push(O(b,Ye))}const X=(se,Oe)=>{const Ye=(qe,Tt)=>!!qe&&!!Tt&&se.includes(qe)&&Oe.includes(Tt)||Oe.includes(qe)&&se.includes(Tt);for(let qe=0;qe+1<Z.length;qe+=2)if(Ye(Z[qe],Z[qe+1]))return!0;return!1},G=se=>Z.some(Oe=>!!Oe&&se.includes(Oe)),J=U("")+U(""),Q=U(""),oe=V(""),le=V(""),z=X(["",""],["",""]);if((Q>=1||J>=2)&&oe>=1&&J>oe&&le<=1&&z&&k.add(""),G(I.)&&G(I.)&&X(I.,I.)){const se=P.includes("");k.add(se?"":"")}V("")>=2&&V("")>=2&&Math.abs(V("")-V(""))<=1&&V("")<=1&&V("")<=1&&k.add("");const K=U(""),ne=U(""),re=U("")+U(""),ce=U("")+U(""),ue=V("");ne>=2&&re>=1&&j.+j.>=20&&k.add(""),ne>=2&&ce>=1&&j.+j.>=20&&k.add(""),ne>=2&&ce>=1&&j.+j.>=20&&X([""],["",""])&&ue<=1&&k.add(""),K>=2&&ce>=1&&j.+j.>=20&&X([""],["",""])&&ue<=1&&k.add("");const ge=(se,Oe)=>{const Ye=Vr[se],qe=Wa[Oe];return!!Ye&&!!qe&&Ye===qe},ke=[r,i,a,o].filter(Boolean),ie=u(a),Ae=ge(b,ie),Ee=ke.map(se=>se.charAt(0)).filter(se=>["",""].includes(Va(b,se)));let he=!1;for(const se of ke){const Oe=se.charAt(0),Ye=se.charAt(1);if(Ee.includes(Oe)&&ge(Oe,Ye)){he=!0;break}}Ae&&he&&k.add(""),V("")>=3&&V("")>=.5*(V("")+V("")+V("")+V(""))&&k.add(""),V("")>=3&&V("")>=.5*(V("")+V("")+V("")+V(""))&&k.add(""),V("")>=3&&V("")>=1&&k.add(""),V("")>=3&&V("")+V("")<=1&&k.add("");const Le=U("");V("")+V("")>=2&&Le===1&&V("")>=1&&k.add(""),Le>=2&&re+V("")>=3&&k.add("");const Ie=K+ne;(K>=2||Ie>=2)&&ce>=1&&Ie>ce&&k.add(""),ne>=2&&ce>=1&&Ie>ce&&k.add("");const tt=U(""),Ne=U("");tt>=2&&Le+Ne>=1&&k.add(""),tt>=2&&Le+Ne===0&&k.add(""),y&&tt>=2&&Le>=1&&k.add(""),!y&&tt>=2&&Le>=1&&k.add(""),U("")>=2&&U("")>=1&&k.add(""),U("")>=1&&U("")>=1&&X([""],[""])&&k.add(""),H&&Le>=1&&V("")+V("")>=2&&k.add("");const Be=[u(r),u(i),u(a),u(o)].filter(Boolean),Ue=[r?.charAt(0),i?.charAt(0),o?.charAt(0)].filter(Boolean),nt=new Set(Ue.map(se=>Va(b,se))),ut=new Set(Be.flatMap(se=>{const Oe=Wa[se];return Oe?[M2(b,Oe)]:[]})),yt=new Set(Be.flatMap(se=>T(se).map(Oe=>Va(b,Oe))));return["","","","",""].forEach(se=>{const Oe=I[se],Ye=Oe.some(ht=>nt.has(ht)),qe=Oe.some(ht=>ut.has(ht)),Tt=Oe.some(ht=>yt.has(ht));!Ye&&!qe&&!Tt?k.add(`${se}`):!Ye&&!qe&&Tt&&k.add(`${se}`)}),Array.from(k)}const lce=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const r=fa(n),i=In(n),a=Vr[r],o=Wa[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t};function cce(e){const{pillars:t,dayStem:n,monthBranch:r,mapping:i}=e,[a,o,l,u]=(t??[]).slice(0,4),d=[fa(a),fa(o),fa(l),fa(u)].filter(Boolean),h=[In(a),In(o),In(l),In(u)].filter(Boolean),p=Vr[n],b=d.map(se=>Va(n,se)),y=[],k=se=>d.filter(Oe=>Oe===se).length,w=se=>h.filter(Oe=>Oe===se).length,_=se=>se.every(Oe=>h.includes(Oe)),T=se=>b.some(Oe=>se.includes(Oe)),O=fa(o),j=se=>ya(se),C=()=>{const se=d.map(Oe=>Vr[Oe]);return se.length===4&&se.every(Oe=>Oe===se[0])},M=()=>{if(d.length!==4)return!1;const se=d.map(j),Oe=se[0]&&!se[1]&&se[2]&&!se[3],Ye=!se[0]&&se[1]&&!se[2]&&se[3];return Oe||Ye};ya(n)&&z7[n]===r&&y.push("");const P=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[se,Oe]of P)if(n===se&&r===Oe){y.push("");break}!ya(n)&&U7[n]===r&&y.push("");const I=L1[n];I&&In(l)===I&&p===Wa[In(l)]&&y.push(""),I&&In(u)===I&&p===Wa[In(u)]&&y.push("");const U=[a,o,l,u].map(ace),V=[a,o,l,u].map(oce);for(const se of U);for(const se of V);const q=i==="hgc"?Wv:Kv;function H(se){return(q[se]??[]).filter(Oe=>["","","","","","","","","",""].includes(Oe))}const B=[a,o,l,u].filter(Boolean),Z=B.flatMap(se=>[se.charAt(0),se.charAt(1)]).flatMap(se=>{try{if(["","","","","","","","","",""].includes(se))return[Va(n,se)];if(["","","","","","","","","","","",""].includes(se)){const Oe=ece(n,se),Ye=H(se).map(qe=>Va(n,qe));return[Oe,...Ye]}return[]}catch{return[]}}),X=se=>Z.some(Oe=>se.includes(Oe)),G=(se,Oe)=>{const Ye=[],qe=[];for(const ht of B){const Me=ht.charAt(0),ze=ht.charAt(1);Ye.push(Va(n,Me));const Xe=Wa[ze];Xe?qe.push(M2(n,Xe)):qe.push(null)}const Tt=(ht,Me)=>!!ht&&!!Me&&(se.includes(ht)&&Oe.includes(Me)||Oe.includes(ht)&&se.includes(Me));for(let ht=0;ht<Ye.length;ht++)if(Tt(Ye[ht],qe[ht]))return!0;for(let ht=0;ht<Ye.length-1;ht++)if(Tt(Ye[ht],Ye[ht+1])||Tt(qe[ht],qe[ht+1]))return!0;return!1},J={:["",""],:["",""],:["",""],:["",""]};X([...J.])&&X([...J.])&&G([...J.],[...J.])&&y.push(""),X([...J.])&&X([...J.])&&G([...J.],[...J.])&&y.push("");const Q=se=>b.filter(Oe=>se.includes(Oe)).length,oe=Q(["",""]),le=Q([""]),z=Q([""]),K=Q(["",""]),ne=Q(["",""]),re=Q(["",""]);le>=1&&oe>=1&&oe>=le&&z<=le&&y.push("");const ce=Q([""]);ce>=1&&K>=1&&ce>=K&&y.push(""),b.includes("")&&K>=1&&y.push("");const ge=lce(t),ke=Object.entries(ge).sort((se,Oe)=>Oe[1]-se[1]),ie=ke[0];if(ie&&ie[1]>=60&&y.push(`(${ie[0]})`),ke.length>=2){const[se,Oe]=ke[0],[,Ye]=ke[1];Oe>=75&&Oe-Ye>=12&&p!==se&&y.push(`(${se})`)}for(const se of Yle){const Oe=d.includes(se.a),Ye=d.includes(se.b);if(!Oe||!Ye)continue;const qe=se.to,Tt=ge[qe]??0,ht=Vr[se.a],Me=Vr[se.b],ze=Math.max(ge[ht]??0,ge[Me]??0),Xe=Wa[r]===qe,Ot=Object.entries(ge).sort((Ht,wn)=>wn[1]-Ht[1])[0]?.[0]===qe;let $t=!1;Tt>=60&&(Xe||Ot)&&ze<=20&&Tt-ze>=20&&(y.push(`(${qe})`),$t=!0),!$t&&Tt>=50&&(Xe||Ot)&&ze<=25&&(y.push(`(${qe})`),$t=!0),!$t&&Tt>=35&&y.push(`(${qe})`)}const Ae=`${fa(u)}${In(u)}`;["",""].includes(n)&&["","",""].includes(Ae)&&y.push(""),["","","",""].includes(In(u))&&y.push(""),["",""].includes(n)&&(In(l)===""||In(o)==="")&&!h.includes("")&&y.push("");const Ee=d.some(se=>se===""||se===""),he=h.some(se=>se===""||se==="");["",""].includes(In(l))&&!Ee&&!he&&y.push(""),["","",""].every(se=>d.includes(se))&&y.push(""),["","",""].every(se=>d.includes(se))&&y.push(""),["","",""].every(se=>d.includes(se))&&y.push("");const Le=Object.values(ge).sort((se,Oe)=>Oe-se);Le.length>=3&&Le[0]-Le[2]<=8&&Le[0]+Le[1]+Le[2]>=80&&y.push(""),ne>=1&&re>=1&&Math.abs(ne-re)<=1&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),h.length===4&&h.every(se=>se===h[0])&&y.push(""),d.length===4&&C()&&M()&&y.push(""),t.every(se=>se&&se===t[0])&&y.push(""),d.length===4&&d.every(se=>se===d[0])&&h.length===4&&h.every(se=>se===h[0])&&y.push(""),oe>=1&&(In(l)===L1[n]||In(u)===L1[n])&&y.push(""),k("")>=3&&_(["","",""])&&["","",""].includes(In(l))&&y.push("");const tt=n===""||n==="",Ne=[["","",""],["","",""]],Be=[["","",""],["","",""]];tt&&(Ne.some(se=>_(se))||Be.some(se=>_(se)))&&y.push("");const Ue=new Set(["","","","","",""]),nt=`${fa(l)}${In(l)}`;if(Ue.has(nt)&&w("")>=2&&(T(["",""])||h.includes("")||h.includes("")||T(["",""])||y.push("")),new Set(["","","","","",""]).has(nt)&&w("")>=2&&h.includes("")&&y.push(""),n===""&&`${fa(u)}${In(u)}`==""){const se=Va(n,O);!["","","",""].includes(se)&&T(["",""])&&!h.includes("")&&!h.includes("")&&y.push("")}return new Set(["","",""]).has(nt)&&`${fa(u)}${In(u)}`==""&&!h.includes("")&&!T(["",""])&&y.push(""),nt===""&&w("")+w("")>=2&&y.push(""),(nt===""||nt==="")&&w("")>=2&&!T(["",""])&&!h.includes("")&&y.push(""),n===""&&_(["","",""])&&y.push(""),nt===""&&`${fa(u)}${In(u)}`==""&&y.push(""),Xle(y)}function uce(e){const t=[];for(const n of e)switch(n.kind){case"BUNIL_PICK":t.push(`: ${n.from} `);break;case"WANGJI_FIXED_JUNGI":t.push(":   ");break;case"SAENGJI_EMITTED_ONE":t.push(`: ${n.from}  `);break;case"SAENGJI_EMITTED_MULTI":t.push(`:      ${n.from} `);break;case"SAENGJI_NOT_EMITTED_USE_JUNGI":t.push(":    ");break;case"GOJI_SAMHAP_USE_JUNGI":t.push(":     ");break;case"GOJI_EARLY_JEOLIP_USE_CHOGI":t.push(":  +12    ");break;case"GOJI_LATE_JEOLIP_USE_JUNGI":t.push(":  +12    ");break;case"NEUTRALIZED":t.push(":   / ");break;case"EX_GEONLOK":t.push(": /   ");break;case"EX_YANGIN":t.push(":    ");break;case"EX_WOLGEOP":t.push(":    ");break;case"EX_EXCLUDED_BIGEOP":t.push(": /  ");break}return t}function dce(e){return e===""?"()":{:"",:"",:"",:"",:"",:"",:"",:""}[e]??"-"}const KP=1e3*60*60*24;function ib(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function fce(e){let t=_i(e);const n=t[0]?.date;if(n&&e.getTime()<n.getTime()){const r=new Date(e);r.setFullYear(e.getFullYear()-1),t=_i(r)}return t}function hce(e){const t=Wle[e];return Array.isArray(t)&&t.length>0?t[0]:null}function mce(e,t){const n=hce(e);if(!n)return null;const r=fce(t),i=r.findIndex(d=>d.name===n);if(i<0)return null;const a=r[i]?.date,o=r[i+1]?.date;if(!a)return null;const l=Math.floor((ib(t)-ib(a))/KP)+1,u=o?Math.max(1,Math.floor((ib(o)-ib(a))/KP)):30;return{dayIdx:l<1?1:l,spanDays:u}}function pce(e){return(e.?.w??0)+(e.?.w??0)+e..w}function gce(e,t,n){const r=Math.max(1,pce(e)),i=Math.max(1,Math.min(n,t)),a=Math.max(1,Math.min(r,Math.ceil(i*r/n))),o=e.?.w??0,l=e.?.w??0;return e.&&a<=o?{stem:e..stem,from:""}:e.&&a<=o+l?{stem:e..stem,from:""}:{stem:e..stem,from:""}}function F7(e){const{dayStem:t,monthBranch:n,date:r,pillars:i,emittedStems:a=[],otherBranches:o=[],isNeutralized:l,mapping:u}=e,d=[],h=B7(u),p=hT(h);if(!fT(n))return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const b=p[n];if(!b)return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const y={:b.?{stem:I1(b..stem),w:b..w}:void 0,:b.?{stem:I1(b..stem),w:b..w}:void 0,:{stem:I1(b..stem),w:b..w}},k=y..stem;let w=k;const _=mce(n,r);if(["","","",""].includes(n)&&Jle(n,o)&&y.)w=y..stem,d.push({kind:"GOJI_SAMHAP_USE_JUNGI"});else if(_){const B=gce(y,_.dayIdx,_.spanDays);w=B.stem,d.push({kind:"BUNIL_PICK",from:B.from})}else w=k,d.push({kind:"BUNIL_FALLBACK_USE_WOLRYEONG"});function T(B,W){if(!B)return!1;if(W.includes(B))return!0;const Z=Vr[B];return Z?W.some(X=>Vr[X]===Z):!1}let O="";w&&T(w,a)&&!l?.(w)?(O=w,d.push({kind:"DANRYEONG_CONFIRMED_BY_EMIT"})):w&&l?.(w)&&d.push({kind:"NEUTRALIZED"});const j=O||k;let C="";const M=Vr[j];if(M){const B=Object.entries(tp).find(([,W])=>W===M)?.[0]??null;B&&(C=Object.entries(Vr).find(([Z,X])=>X===B&&ya(Z)===ya(j))?.[0]??"")}let P="-";const I=Va(t,j),U=qle.some(([B,W])=>B===t&&W===n),V=ya(t)&&z7[t]===n,q=!ya(t)&&U7[t]===n;I===""||I===""?U?(P="",d.push({kind:"EX_GEONLOK"})):V?(P="",d.push({kind:"EX_YANGIN"})):q?(P="",d.push({kind:"EX_WOLGEOP"})):d.push({kind:"EX_EXCLUDED_BIGEOP"}):P=dce(I);const H=cce({pillars:i,dayStem:t,monthBranch:n,mapping:u});return{:k,:w,:O||"-",:j||"-",:C||"-",:P,:H,reason:uce(d),reasonTokens:d}}function bce(e){const[t,n,r,i]=e,a=rb(i),o=rb(r),l=rb(n),u=rb(t),d=[],h=[[a,o],[o,l],[l,u]];for(const[b,y]of h){if(!b||!y)continue;const k=Je(b,y),w=YP[k];w?.length&&d.push(...w);const _=Je(y,b);if(_!==k){const T=YP[_];T?.length&&d.push(...T)}}const p=[[a,o,l],[o,l,u]];for(const[b,y,k]of p){if(!b||!y||!k)continue;const w=Ii(b,y,k),_=qP[w];_?.length&&d.push(..._);const T=Ii(k,y,b);if(T!==w){const O=qP[T];O?.length&&d.push(...O)}}return Array.from(new Set(d))}const yce=["","","","",""];function vce(e){return yce.includes(e)}function xce(e){const t=/^(.+?)\((.+)\)$/.exec(e.trim());return t?{base:t[1].trim(),inner:t[2].trim()}:{base:e.trim()}}function am(e,t){if(!t)return e;const n=(vce(t),t);return`${e}(${n})`}const wce={:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:" 3    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."}},_ce={:e=>({title:am("",e),short:"     ."}),:e=>({title:am("",e),short:"   ."}),:e=>({title:am("",e),short:"   ."}),:e=>({title:am("",e),short:"    ."}),:e=>({title:am("",e),short:"    ."})};function Sce(e){const{base:t,inner:n}=xce(e);return t===""||t===""||t===""||t===""||t===""?_ce[t](n):wce[t]}function kce(e){const t=Sce(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Ece=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),WP={:"   .   .",:"   .",:"  .",:"    .",:"  .",:"  .  .",:"   .",:"  .   .",:"   .",:"  .",:"   .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"   .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"   .",:"  .  .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"      .",:"  .",:"  .",:"    .",:"  .",:"  .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"  .",:"    .",:"   .",:"  .",:"    .",:"     .",:"   .",:"  .",:"     .",:"    .",:"   .",:"    .",:"    .",:"   .",:"   .",:" .",:"   .",:"   .",:"   .",:"   ."};function jce(e){if(Ece(WP,e))return WP[e]}const VP={:"(/)",:"(/)",:"(/)",:"(/)",:"(/)"},Tce={:{title:"",short:"    .",detail:"       ."},:{title:"",short:"      .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +  ."},:{title:"",short:"      .",detail:"     ."},:{title:"",short:"    ."},:{title:"",short:"    .",detail:"  +    ."},:{title:"",short:"()    .",hint:"     "},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"  +    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"       ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."}};function Ace(e){const t=/^(|)(||||)$/.exec(e);if(!t)return null;const n=t[1],r=t[2];return n===""?{kind:"",group:r}:{kind:"",group:r}}function Nce(e,t){return e===""?{title:`${t}`,short:`${VP[t]}() //   .`,hint:"( ) +  +   "}:{title:`${t}`,short:`${VP[t]}()     .`,hint:" X /  O"}}function Oce(e){const t=Ace(e);return t?Nce(t.kind,t.group):Tce[e]}function Cce(e){const t=Oce(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Mce={:{title:"",text:"()  /  .   ."},:{title:"",text:" (//)     .  ."},:{title:"",text:"       .     ."},:{title:"",text:" (/)    ( ).    ."},:{title:"",text:" (/)   ,           ."}};function Dce(e){return Mce[e]?.text}const Pce=e=>{switch(e){case"":return"( )";case"":return"";case"":return"()"}},Rce={BUNIL_PICK:{title:"",text:"    //     ."},BUNIL_FALLBACK_USE_WOLRYEONG:{title:" ",text:"    ()    ."},DANRYEONG_CONFIRMED_BY_EMIT:{title:" ",text:"      ."},WANGJI_FIXED_JUNGI:{title:"",text:"       ."},SAENGJI_EMITTED_ONE:{title:" ",text:"        ."},SAENGJI_EMITTED_MULTI:{title:"  ",text:"          ."},SAENGJI_NOT_EMITTED_USE_JUNGI:{title:" ",text:"        ."},GOJI_SAMHAP_USE_JUNGI:{title:" + ",text:"      ."},GOJI_EARLY_JEOLIP_USE_CHOGI:{title:" +  ",text:"   12    ."},GOJI_LATE_JEOLIP_USE_JUNGI:{title:" +  ",text:"   12    ."},NEUTRALIZED:{title:"",text:"       ."},EX_GEONLOK:{title:" ",text:"       ."},EX_YANGIN:{title:" ",text:"       ."},EX_WOLGEOP:{title:" ",text:"        ."},EX_EXCLUDED_BIGEOP:{title:" ",text:"   ."}},Lce={:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},"()":{title:"()",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"/       ."},:{title:"",text:"/        ."},:{title:"",text:"/       ."}},Ice=e=>e.replace(/^\s*:\s*/,"").trim();function $ce(e){const t=Ice(e);return Lce[t]}function Bce(e){const t=Rce[e.kind];if(t)return"from"in e?{...t,text:`${t.text} ( : ${Pce(e.from)})`}:t}const Zc=S.memo(({text:e,color:t,onClick:n})=>{const r={violet:"bg-violet-50 text-violet-700 border-violet-200 dark:bg-violet-900/20 dark:text-violet-300 dark:border-violet-800",amber:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800",blue:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800",green:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-800",red:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800"};return g.jsx("button",{type:"button",onClick:n,className:`px-2.5 py-1 text-[11px] font-bold rounded-lg border shadow-sm whitespace-nowrap active:scale-95 transition-transform cursor-pointer ${r[t]}`,children:e})}),Cd=({text:e})=>g.jsxs("div",{className:"absolute z-50 left-0 top-full mt-2 w-[220px] p-3 bg-white dark:bg-neutral-800 rounded-xl shadow-xl border border-neutral-200 dark:border-neutral-700 text-[11px] leading-relaxed text-left text-neutral-700 dark:text-neutral-200 pointer-events-none transition-none",children:[g.jsx("div",{className:"absolute -top-1 left-4 w-2 h-2 bg-white dark:bg-neutral-800 border-t border-l border-neutral-200 dark:border-neutral-700 rotate-45"}),e]}),ab=S.memo(({title:e,children:t})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-[10px] font-black text-neutral-400 dark:text-neutral-500 uppercase pl-1",children:e}),g.jsx("div",{className:"flex flex-wrap gap-1.5",children:t})]}));function zce({pillars:e,tab:t,birthDate:n,emittedStems:r,otherBranches:i,isNeutralized:a,mapping:o,unified:l}){const[u,d]=S.useState(null);S.useEffect(()=>{d(null)},[t,e]);const h=S.useMemo(()=>{const[w,_,T,O]=e,j=U=>U&&U.length>=1?U.charAt(0):"",C=U=>U&&U.length>=2?U.charAt(1):"",M=n instanceof Date&&!Number.isNaN(n.getTime())?n:new Date,P=[j(w),j(_),j(T),j(O)].filter(U=>!!U),I=[C(w),C(T),C(O)].filter(U=>!!U);return F7({dayStem:j(T),monthBranch:C(_),date:M,pillars:e,emittedStems:r??P,otherBranches:i??I,isNeutralized:a,mapping:o})},[e,n,r,i,a,o]),p=S.useMemo(()=>bce(e),[e]),b=S.useMemo(()=>sce(e,o,l),[e,o,l]),y=w=>{d(_=>_===w?null:w)},k=[{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.}];return g.jsxs("div",{className:"p-6 rounded-[2rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-sm space-y-6 overflow-visible",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"font-black text-lg text-neutral-800 dark:text-neutral-100 italic",children:"   "}),g.jsx("span",{className:"text-[10px] bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-0.5 rounded-full font-bold",children:"     "})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsx(ab,{title:"////",children:k.map(({key:w,value:_})=>g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:`${w}: ${_||"-"}`,color:"violet",onClick:()=>y(`env-${w}`)}),u===`env-${w}`&&g.jsx(Cd,{text:Dce(w)??" ."})]},w))}),g.jsxs(ab,{title:"",children:[g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:`: ${h.||"-"}`,color:"amber",onClick:()=>y("naegyeok")}),u==="naegyeok"&&g.jsx(Cd,{text:$ce(h.||"")?.text??"  ."})]}),h.reasonTokens?.map((w,_)=>{const T=Bce(w),O=`reason-${_}`;return g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:T?.title??(h.reason[_]||w.kind),color:"amber",onClick:()=>y(O)}),u===O&&g.jsx(Cd,{text:T?.text??"  ."})]},O)})]}),g.jsx(ab,{title:"",children:h.&&h..length>0?h..map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:`: ${w}`,color:"blue",onClick:()=>y(`outer-${_}`)}),u===`outer-${_}`&&g.jsx(Cd,{text:kce(w)??" "})]},`outer-${_}`)):g.jsx(Zc,{text:": -",color:"blue"})}),(p.length>0||b.length>0)&&g.jsxs(ab,{title:"  ",children:[p.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:w,color:"green",onClick:()=>y(`mul-${_}`)}),u===`mul-${_}`&&g.jsx(Cd,{text:jce(w)??" "})]},`mul-${_}`)),b.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Zc,{text:w,color:"red",onClick:()=>y(`str-${_}`)}),u===`str-${_}`&&g.jsx(Cd,{text:Cce(w)??" "})]},`str-${_}`))]})]}),!h.reasonTokens?.length&&h.reason.length>0&&g.jsx("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11px] text-neutral-500 leading-relaxed font-medium",children:[g.jsx("span",{className:"font-bold mr-1 text-neutral-400",children:"  :"}),h.reason.join(" / ")]})})]})}const Uce=Object.fromEntries(co..map((e,t)=>[e,Jr[t]])),Fce=Object.fromEntries(Jr.map((e,t)=>[e,co.[t]])),Hce=Object.fromEntries(co..map((e,t)=>[e,xi[t]])),Gce=Object.fromEntries(xi.map((e,t)=>[e,co.[t]])),Yce=e=>Uce[e]??e,qce=e=>Hce[e]??e,Kce=e=>Fce[e]??e,Wce=e=>Gce[e]??e;function Vce(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Yce(n):Kce(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}function mT(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?qce(n):Wce(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}const Zce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Xce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H7={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},Jce={...H7,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},ZP=Vce(Zce),np=mT(Xce);mT(H7);mT(Jce);const Qce=["","","","",""];function eue(){const[e,t]=S.useState("   "),[n,r]=S.useState(""),[i,a]=S.useState(!0);return{bigTab:e,setBigTab:t,blendTab:n,setBlendTab:r,demoteAbsent:i,setDemoteAbsent:a}}const tue={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},nue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function G7(e){const t=nue[e]??"";return tue[t]}const rue=Object.fromEntries(co..map((e,t)=>[e,Jr[t]])),iue=Object.fromEntries(Jr.map((e,t)=>[e,co.[t]])),aue=Object.fromEntries(co..map((e,t)=>[e,xi[t]])),oue=Object.fromEntries(xi.map((e,t)=>[e,co.[t]])),sue=e=>rue[e]??e,lue=e=>aue[e]??e,cue=e=>iue[e]??e,uue=e=>oue[e]??e;function Y7(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const r=n.charAt(0),i=n.charAt(1),a=/[]/.test(r)||/[]/.test(i)?`${sue(r)}${lue(i)}`:`${cue(r)}${uue(i)}`;t[a]===void 0&&(t[a]=e[n])}return t}const q7={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},due={...q7,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},fue=Y7(q7),hue=Y7(due),D2={:"",:"",:"",:"",:""},P2={:"",:"",:"",:"",:""},R2={:"",:"",:"",:"",:""},L2={:"",:"",:"",:"",:""},mue=e=>Xn[e]??e,pue=e=>ir[e]??e;function K7(e){return!e||e.length<2?"":`${mue(e[0])}${pue(e[1])}`}const W7=e=>e&&e.length>=1?e[0]:"",V7=e=>e&&e.length>=2?e[1]:"";function gue(e){return{:e,:D2[e],:P2[e],:R2[e],:L2[e]}}function Z7(e,t){if(!e)return!1;const n=np[e];return!!n&&n===t}function X7(e,t){const n=Object.values(e).reduce((a,o)=>a+Math.max(0,o),0);return n<=0?!1:Math.max(0,e[t]??0)/n*100>=30}function bue(e,t){const n=(e??[]).slice(0,4).map(K7);if(n.length!==4||n.some(p=>p.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const r=W7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(p=>V7(p)),o={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},l=a[1],u=np[l],d=gue(i),h=a[2];return Object.keys(o).forEach(p=>{const b=d[p];u&&u===b&&(o[p].=!0),Z7(h,b)&&(o[p].=!0),o[p].=X7(t,b)}),{flags:o,monthBranch:l,dayEl:i}}function J7(e,t){const n=(e??[]).slice(0,4).map(K7);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const b={:!1,:!1,:!1};return{flags:{:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b}},monthBranch:"",dayEl:""}}const r=W7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(b=>V7(b)),o={:!1,:!1,:!1},l={:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o}},u=a[1],d=np[u],h=a[2],p={:i,:i,:D2[i],:D2[i],:R2[i],:R2[i],:L2[i],:L2[i],:P2[i],:P2[i]};return Object.keys(l).forEach(b=>{const y=p[b];d&&d===y&&(l[b].=!0),Z7(h,y)&&(l[b].=!0),l[b].=X7(t,y)}),{flags:l,monthBranch:u,dayEl:i}}const yue=Object.fromEntries(Object.entries(Xn).map(([e,t])=>[t,e])),vue=Object.fromEntries(Object.entries(ir).map(([e,t])=>[t,e])),xue=e=>Xn[e]??e,wue=e=>ir[e]??e;function _ue(e){return!e||e.length<2?"":`${xue(e[0])}${wue(e[1])}`}function Xc(e){return ZP[e]??ZP[yue[e]??""]}function Jc(e){return np[e]??np[vue[e]??""]}const $1=["year","month","day","hour"],Sue={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},kue={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},Eue=new Set(["","","","",""]),jue=new Set(["","","","","",""]),Tue=new Set(["","","",""]),B1=e=>Eue.has(e)?"":"",z1=e=>{const t=jue.has(e)?"":"";return Tue.has(e)?t===""?"":"":t};function XP(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.floor(l+.5)),i=100-r.reduce((l,u)=>l+u,0);if(i===0)return r;const a=n.map((l,u)=>({i:u,frac:l-Math.floor(l+.5)})).sort((l,u)=>u.frac-l.frac),o=r.slice();if(i>0)for(let l=0;l<i;l++)o[a[l].i]+=1;else for(let l=0;l<-i;l++)o[a[a.length-1-l].i]-=1;return o}function Aue(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const ob={:.15,:.1,:-.15,:-.2,:-.25},Ps={:"",:"",:"",:"",:""},ju={:"",:"",:"",:"",:""},Uo={:"",:"",:"",:"",:""},fx={:"",:"",:"",:"",:""};function sb(e,t){return e===t?"":Ps[t]===e?"":Ps[e]===t?"":Uo[e]===t?"":Uo[t]===e?"":""}const Qc=e=>e&&e.length>=1?e[0]:"",eu=e=>e&&e.length>=2?e[1]:"";function Nue(e,t){const n=e.reduce((u,d)=>u+d,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const r=e.map(u=>u/n*t),i=r.map(u=>Math.floor(u));let a=t-i.reduce((u,d)=>u+d,0);const o=r.map((u,d)=>({i:d,frac:u-Math.floor(u)})).sort((u,d)=>d.frac-u.frac),l=i.slice();for(let u=0;u<o.length&&a>0;u++)l[o[u].i]+=1,a-=1;return l}function JP(e,t){switch(e){case"":return t;case"":return Ps[t];case"":return Uo[t];case"":return fx[t];case"":return ju[t];default:return t}}const QP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Oue=["","","","",""],Cue={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},eR={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},Mue={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}};function Due(e){return e.length===4&&!!e[0]&&e[0].length>=2&&!!e[1]&&e[1].length>=2&&!!e[2]&&e[2].length>=2}function Pue(e){const t=Oue.map(n=>({name:n,value:0,color:"#999999"}));return{overlay:{totalsSub:{...eR},perStemAugBare:{},perStemAugFull:{}},totals:t,perTenGod:{...Cue},PerTenGodSub:{...eR},elementScoreRaw:e,deukFlags:{...Mue},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}function Rue(e,t){const n=e[2]?.[0]??"",r=t??n;return{dayStem:r,dayEl:r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":""}}function I2(e){const{pillars:t,dayStem:n,mode:r,debug:i,useHarmonyOverlay:a,criteriaMode:o,luck:l}=e,u=o==="modern"?Sue:kue,d=r==="classic"?hue:fue,h={:0,:0,:0,:0,:0},p={},b=(t??[]).slice(0,4).map(_ue);if(!Due(b))return Pue(h);const{dayStem:y,dayEl:k}=Rue(b,n),w=[{val:0},{val:0},{val:0},{val:0}],_=[[],[],[],[]];for(const z of b){if(!z)continue;const K=z.charAt(0),ne=z.charAt(1);p[K]=(p[K]??0)+50;const re=QP[ne];re&&(p[re]=(p[re]??0)+50)}for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=$1[z],re=Qc(K),ce=eu(K),ue=u[ne],ge=Xc(re);ge&&(h[ge]+=ue.stem,w[z]={stem:re,el:ge,pol:B1(re),val:ue.stem});const ke=Jc(ce);ke&&(h[ke]+=ue.branch,_[z].push({el:ke,pol:z1(ce),val:ue.branch}))}for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=$1[z],re=d[K]??0;if(re===0)continue;const ce=Qc(K),ue=Xc(ce);if(!ue)continue;const ge=u[ne].stem*re;h[ue]+=ge,w[z].val+=ge}for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=eu(K),re=Jc(ne);if(!re)continue;const ce=u[$1[z]].branch,ue=z1(ne);let ge=0;const ke=[z];z-1>=0&&ke.push(z-1),z+1<=3&&ke.push(z+1),z-2>=0&&ke.push(z-2),z+2<=3&&ke.push(z+2);const ie=Array.from(new Set(ke));for(const Ae of ie){if(!b[Ae]||b[Ae].length<2)continue;const Ee=Qc(b[Ae]),he=Xc(Ee);if(!he||he!==re)continue;const Le=B1(Ee)===ue,Ie=Math.abs(Ae-z),tt=Aue(Ie,Le);ge+=ce*tt}ge!==0&&(h[re]+=ge,_[z].push({el:re,pol:ue,val:ge}))}for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=Qc(K),re=Xc(ne);if(!re)continue;let ce=0;const ue=eu(b[z]),ge=Jc(ue);ge&&(ce+=ob[sb(re,ge)]);const ke=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Ae of ke){const Ee=Qc(b[Ae]),he=Xc(Ee);he&&(ce+=ob[sb(re,he)])}const ie=w[z].val;if(ie!==0&&ce!==0){const Ae=Math.round(ie*(1+ce)*10)/10,Ee=Ae-ie;h[re]+=Ee,w[z].val=Ae}}for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=eu(K),re=Jc(ne);if(!re)continue;let ce=0;const ue=Qc(b[z]),ge=Xc(ue);ge&&(ce+=ob[sb(re,ge)]);const ke=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Ae of ke){if(!b[Ae]||b[Ae].length<2)continue;const Ee=eu(b[Ae]),he=Jc(Ee);he&&(ce+=ob[sb(re,he)])}const ie=_[z].reduce((Ae,Ee)=>Ae+Ee.val,0);if(ie!==0&&ce!==0){const Ee=Math.round(ie*(1+ce)*10)/10-ie;h[re]+=Ee,_[z].length>0&&(_[z][0].val+=Ee)}}a&&qae(b,h);const T={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},O=[];if(!(!l||l.tab==="")){let z=function(K,ne){const re=K?Pe(K):"";if(!re||re.length<2)return;const ce=Qc(re),ue=eu(re),ge=Xc(ce),ke=Jc(ue),ie=Math.max(1,(h.??0)+(h.??0)+(h.??0)+(h.??0)+(h.??0)),Ae=T[ne];if(ge){const Ee=Math.round(ie*Ae.stem);h[ge]+=Ee,O.push({stem:ce,el:ge,pol:B1(ce),val:Ee})}if(ke){const Ee=Math.round(ie*Ae.branch);h[ke]+=Ee,O.push({el:ke,pol:z1(ue),val:Ee})}};z(l.dae,"dae"),(l.tab===""||l.tab===""||l.tab==="")&&z(l.se,"se"),(l.tab===""||l.tab==="")&&z(l.wol,"wol"),l.tab===""&&z(l.il,"il")}const j={:0,:0,:0,:0,:0};Object.entries(h).forEach(([z,K])=>{const ne=V(z,k);j[ne]+=K});const C=["","","","",""],M=XP(C.map(z=>j[z])),P=G7(y),I=C.map((z,K)=>({name:z,value:M[K],color:P[z]})),U={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function V(z,K){return z===K?"":Ps[K]===z?"":Uo[K]===z?"":Uo[z]===K?"":ju[K]===z?"":""}function q(z,K){switch(V(z,k)){case"":U.+=K*.5,U.+=K*.5;break;case"":U.+=K*.5,U.+=K*.5;break;case"":U.+=K*.5,U.+=K*.5;break;case"":U.+=K*.5,U.+=K*.5;break;case"":U.+=K*.5,U.+=K*.5;break}}Object.entries(h).forEach(([z,K])=>{K>0&&q(z,K)});const H={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const z of C){const K=I.find(ke=>ke.name===z)?.value??0,ne=H[z].a,re=H[z].b,ce=U[ne]??0,ue=U[re]??0,ge=ce+ue;if(ge>0){const ke=Math.floor(K*ce/ge+.5),ie=K-ke;H[z].aVal=ke,H[z].bVal=ie}else H[z].aVal=Math.floor(K/2+.5),H[z].bVal=K-H[z].aVal}const{flags:B}=bue(b,h),W={};w.forEach(z=>{if(z.stem&&z.el&&z.val){const K=`${z.stem}${z.el}`;W[K]=(W[K]??0)+z.val}});for(let z=0;z<4;z++){const K=b[z];if(!K||K.length<2)continue;const ne=eu(K),re=QP[ne],ce=Jc(ne);if(!re||!ce)continue;const ue=`${re}${ce}`,ge=_[z].reduce((ke,ie)=>ke+ie.val,0);W[ue]=(W[ue]??0)+ge}const Z=["","","","","","","","","",""],X={};Z.forEach(z=>{X[z]=0}),C.forEach(z=>{const K=I.find(ie=>ie.name===z)?.value??0,ne=JP(z,k),re=Object.entries(W).filter(([ie])=>ie.endsWith(ne)),ce=re.map(([ie])=>ie),ue=re.map(([,ie])=>ie),ge=Math.max(0,Math.round(K*10)),ke=Nue(ue.length?ue:[1,1],ge);if(ce.length===2)X[ce[0]]=(ke[0]??Math.round(ge/2))/10,X[ce[1]]=(ke[1]??ge-(ke[0]??0))/10;else if(ce.length===1)X[ce[0]]=ge/10;else{const ie=ne===""?["",""]:ne===""?["",""]:ne===""?["",""]:ne===""?["",""]:["",""],Ae=Math.floor(ge/2),Ee=ge-Ae;X[ie[0]]+=Ae/10,X[ie[1]]+=Ee/10}});const G=["","","","",""],J={:0,:0,:0,:0,:0};for(const z of I){const K=JP(z.name,k);J[K]+=z.value}const Q=XP(G.map(z=>J[z])),oe={:Q[0],:Q[1],:Q[2],:Q[3],:Q[4]};return i&&console.log({elementScore:h,totals:I,perTenGod:H,perStemRaw:W,perStemElementScaled:X,elementPercent100:oe}),{overlay:{totalsSub:U,perStemAugBare:W,perStemAugFull:X},totals:I,perTenGod:H,PerTenGodSub:U,stemScoreRaw:p,elementScoreRaw:h,deukFlags:B,perStemElement:W,perStemElementScaled:X,elementPercent100:oe}}const lb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Lue=["","","","",""];function tR(e){return Lue.includes(e)}const Iue={:"",:"",:"",:"",:""},$ue={:"",:"",:"",:"",:""},Bue={:"",:"",:"",:"",:""},zue={:"",:"",:"",:"",:""},$2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Uue=["","","","","","","","","",""],Fue={natal:50,dae:30,se:20,wol:7,il:3};function $y(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Xn[t])return Xn[t];if(["","","","","","","","","","","",""].includes(t))return lb[t]??null;if(ir[t])return lb[ir[t]]??null;const n=t.charAt(0);return Xn[n]?Xn[n]:["","","","","","","","","",""].includes(n)?n:ir[n]?lb[ir[n]]??null:["","","","","","","","","","","",""].includes(n)?lb[n]??null:null}function Hue(e,t){const n=$2[e],r=$2[t];if(!n||!r)return"";let i;r===n?i="":r===Iue[n]?i="":r===$ue[n]?i="":r===Bue[n]?i="":r===zue[n]?i="":i="";const a=tR(e)===tR(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function By(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.round(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.round(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function nR(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=$y(r);if(!a)continue;const o=Hue(t,a);n[o]+=i}return By(n)}function Gue(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function rR(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=$y(n);i&&(t[i]=(t[i]??0)+r)}return t}function iR(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of Uue){const i=$2[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}function aR(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const r of t)typeof e[r]=="number"&&(n[r]=e[r]);return n}function Yue(e,t){const n=t?.dae?cb(t.dae):{},r=t?.se?cb(t.se):{},i=t?.wol?cb(t.wol):{},a=t?.il?cb(t.il):{},o={},l=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:r},{kind:"wol",bare:i},{kind:"il",bare:a}];for(const{kind:d,bare:h}of l){const p=Fue[d];if(!h||Object.keys(h).length===0)continue;const b=By(h);for(const[y,k]of Object.entries(b))o[y]=(o[y]??0)+k*p}const u=Object.values(o).reduce((d,h)=>d+h,0);if(u>0)for(const d of Object.keys(o))o[d]=o[d]/u*100;return o}function que(e){if(!e)return[];const t=$y(e.charAt(0)),n=$y(e.charAt(1));return[t,n].filter(Boolean)}function cb(e){const t=que(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function Ip(e){const{natal:t,tab:n,chain:r,hourKey:i="unified"}=e,a=[Pe(t[0]??""),Pe(t[1]??""),Pe(t[2]??""),Pe(t[3]??"")],o=a[2]?.charAt(0)??"",{hiddenStemMode:l,hiddenStem:u}=zl,d=l==="classic"?"classic":"hgc",h=r?{tab:n,dae:r.dae?Pe(r.dae):void 0,se:(n===""||n===""||n==="")&&r.se?Pe(r.se):void 0,wol:(n===""||n==="")&&r.wol?Pe(r.wol):void 0,il:n===""&&r.il?Pe(r.il):void 0}:{tab:n},p=I2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:h}),b=I2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),y=rR(p.perStemElementScaled),k=n===""?y:Yue(y,r),w=By(k),_=nR(k,o),T=Gue(_),O=iR(w),j=rR(b.perStemElementScaled),C=nR(j,o),M=By(j),P=iR(M);return{elementScoreRaw:p.elementScoreRaw,elementPercent100:p.elementPercent100,totals:p.totals,perStemElementScaled:p.perStemElementScaled,dayStem:o,mergedStems:w,perTenGodSub:_,perTenGod:T,overlay:{totalsSub:_,perStemAugBare:k,perStemAugFull:O},natalFixed:{elementScoreRaw:aR(b.elementScoreRaw),elementPercent100:aR(b.elementPercent100),totalsSub:C,overlay:{totalsSub:C,perStemAugBare:j,perStemAugFull:P}}}}const Do=["","","","",""],Ql={:0,:0,:0,:0,:0},Kue=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],Wue={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}},U1=24,Vue=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]],zy=20;Object.fromEntries(Object.entries(Xn).map(([e,t])=>[t,e]));Object.fromEntries(Object.entries(ir).map(([e,t])=>[t,e]));const Q7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function e9(e){return Math.max(0,Math.min(100,e))}function uf(e,t,n){return Math.max(t,Math.min(n,e))}function Xue(e){const t=e9(e);return Kue.find(n=>t>=n.min&&t<n.max)?.name??""}function Jue(e){const t=e?.[2]?.charAt(0)??"";return Q7[t]??null}function Que(e){return(e?.[1]?.charAt(1)??"")||null}function t9(e){return fx[e]}function ede(e){return e?{peer:e,resource:ju[e],leak:Ps[e],wealth:Uo[e],officer:t9(e)}:null}function tde(e){const t={...Ql};for(const n of e){if(!n)continue;const r=n.charAt(0),i=n.charAt(1),a=Q7[r],o=Zue[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t}function nde(e){const t=Object.values(e).reduce((r,i)=>r+i,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={...Ql};return Do.forEach(r=>{n[r]=e[r]/t*100}),n}function rde(e){if(!e||e.length===0)return null;const t=e.reduce((r,i)=>r+(i?.value??0),0)||0;if(t<=0)return null;const n=r=>e.find(i=>i.name===r)?.value??0;return e9((n("")+n(""))/t*100)}function ide(e,t){return!e||!t?null:t===e?"":Ps[e]===t?"":Uo[e]===t?"":t9(e)===t?"":ju[e]===t?"":null}function ade(e){for(const[t,n]of Vue)if(e>=t)return n;return 1}const oR=(e,t)=>uf((zy-(t[e]??0))/zy,0,1),sR=(e,t)=>uf(((t[e]??0)-zy)/zy,0,1);function ode(e,t,n,r){const i=ide(e,n);if(!e||!i)return 0;const a=uf((50-t)/50,0,1),o=uf((t-50)/50,0,1),l=oR(n,r),u=sR(n,r),d=oR(e,r),h=sR(e,r),p=6.5;let b=0;if(a>0)switch(i){case"":b=+(.3+.4*d+.15*l)*a;break;case"":b=+(.18+.45*d)*a;break;case"":b=-(.08+.2*(1-l)+.1*h)*a;break;case"":b=-(.22+.25*(1-l)+.1*(1-d))*a;break;case"":b=-(.35+.25*(1-l)+.1*(1-d))*a;break}else if(o>0)switch(i){case"":b=-(.25+.25*(1-l)+.2*h)*o;break;case"":b=-(.28+.2*h)*o;break;case"":b=+(.18+.2*l+.15*h)*o;break;case"":b=+(.22+.25*l+.1*h)*o;break;case"":b=+(.2+.2*l)*o;break}else switch(i){case"":b=.08*(d+l);break;case"":b=.05*d-.03*h;break;case"":b=.02*l-.02*u;break;case"":b=.01*l-.06*u;break;case"":b=-.05*(1-l);break}return Math.round(p*b*10)/10}function sde(e,t,n){const r=["","",""].includes(t),i=["","","",""].includes(t),a={...Ql};if(r){const o=Ps[e],l=Uo[e],u=fx[e];a[o]+=28,a[l]+=22,a[u]+=20,n.get(o)?.push(":    ()"),n.get(l)?.push(":     "),n.get(u)?.push(":     ")}if(i){const o=ju[e],l=e;a[o]+=28,a[l]+=22,n.get(o)?.push(":     "),n.get(l)?.push(":     ")}return a}function lR(e,t){if(!e)return{...Ql};const n=Wue[e]??{temp:"mild",wet:"normal"},r={...Ql};return n.temp==="cold"?(r.+=16,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(r.+=14,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),r}function cR(e,t){const n={...Ql};for(const r of Do){const i=Uo[r],a=Math.max(0,(e[r]??0)-(e[i]??0));if(a<=0)continue;const o=Ps[r],l=Math.round(a*.35);l>0&&(n[o]+=l,t.get(o)?.push(`: ${r}${i} `))}return n}function uR(e,t){const n={...Ql},r=Object.entries(e),i=Math.min(...r.map(([,o])=>o)),a=r.filter(([,o])=>o<=Math.max(6,i));for(const[o]of a)n[o]+=12,t.get(o)?.push(":  ");return n}const ub=()=>new Map(Do.map(e=>[e,[]]));function df(e,t){const n=Jue(e),r=Que(e),i=tde(e),a=nde(i);let o=rde(t);if(o==null)if(!n)o=50;else{const H=n,B=ju[n],W=Object.values(i).reduce((Z,X)=>Z+X,0)||1;o=Math.min(100,Math.max(0,((i[H]??0)+(i[B]??0))/W*100))}const l=Xue(o),u={...Ql},d=ub();if(n){const H=sde(n,l,d);Do.forEach(B=>{u[B]+=H[B]??0})}const h=lR(r,d);Do.forEach(H=>{u[H]+=h[H]??0});const p=cR(i,d);Do.forEach(H=>{u[H]+=p[H]??0});const b=uR(i,d);Do.forEach(H=>{u[H]+=b[H]??0});const y=ede(n),k={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const H of t)k[H.name]=H.value;if(o>=45&&o<=55&&y){const H=k.>=30||k.>=Math.max(k.,k.,k.,k.)+5;o<=50?(u[y.resource]+=14,d.get(y.resource)?.push(": -"),u[y.peer]+=10,d.get(y.peer)?.push(": -"),u[y.leak]+=6,d.get(y.leak)?.push(": -"),u[y.wealth]+=3,d.get(y.wealth)?.push(": -"),H&&(u[y.officer]=Math.round(u[y.officer]*.8*10)/10,d.get(y.officer)?.push(":   "))):(u[y.leak]+=14,d.get(y.leak)?.push(": -"),u[y.wealth]+=10,d.get(y.wealth)?.push(": -"),u[y.officer]+=6,d.get(y.officer)?.push(": -"),u[y.resource]+=3,d.get(y.resource)?.push(": -"))}Do.forEach(H=>{const B=ode(n,o,H,a);u[H]=uf(Math.round((u[H]+B)*10)/10,0,999)});const _=o<50;Do.forEach(H=>{const B=a[H]??0,W=_&&n===H;if(B>=U1&&!W){const Z=ade(B);u[H]=Math.round(u[H]*Z*10)/10;const X=Math.min(14,Math.max(0,Math.ceil((B-U1)*.5)));X>0&&(u[H]=uf(u[H]-X,0,999)),d.get(H)?.push(" ()")}});const T={:[],:[],:[],:[],:[]};if(n){const H=Ps[n],B=Uo[n],W=fx[n],Z=n,X=ju[n];T[H].push(""),T[B].push(""),T[W].push(""),T[Z].push(""),T[X].push("")}const O={:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0},j=H=>{const B=a[H]??0;return B>=U1&&!(_&&n===H)?B>=55?4:B>=45?3:2:O[H]?0:1},C=lR(r,ub()),M=cR(i,ub()),P=uR(i,ub()),I=Do.map(H=>({element:H,score:Math.round(u[H]*10)/10,via:lde(H,C,M,P),reasons:(d.get(H)??[]).slice(),tenGodHints:T[H]})).sort((H,B)=>{const W=j(H.element),Z=j(B.element);return W!==Z?W-Z:B.score!==H.score?B.score-H.score:H.element.localeCompare(B.element)}),U=cde(l,C,M,P),V={:0,:0,:0,:0,:0},q=t?t.reduce((H,B)=>(H[B.name]=B.value,H),{...V}):void 0;return{chosenType:U,ordered:I,debug:{band:l,overallPct:o,elementScore:i,tenGodTotals:q,monthBranch:r??void 0}}}function lde(e,t,n,r){const i=[];return(t[e]??0)>0&&i.push(""),(n[e]??0)>0&&i.push(""),(r[e]??0)>0&&i.push(""),i.length===0&&i.push(""),i}function cde(e,t,n,r){if(["","","",""].includes(e))return"";const a=d=>Object.values(d).reduce((h,p)=>h+p,0),o=a(t),l=a(n),u=a(r);return o>Math.max(l,u)?"":l>=u?"":""}function ude(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.round(l));let a=100-r.reduce((l,u)=>l+u,0);const o=n.map((l,u)=>({i:u,f:l-Math.round(l)})).sort((l,u)=>u.f-l.f);for(let l=0;l<o.length&&a>0;l++)r[o[l].i]+=1,a-=1;return r}const dR=["","","","",""];function dde(e,t){const n=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],{elementScoreRaw:r}=I2({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),i=dR.map(l=>r[l]??0),a=ude(i),o={:0,:0,:0,:0,:0};return dR.forEach((l,u)=>{o[l]=a[u]}),o}function n9(e,t){const n=dde(e,t),r=Pe(e[2]??"").charAt(0),a={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[r];if(!a)return 0;const o={:"",:"",:"",:"",:""},l=n[a]??0,u=n[o[a]]??0;return l+u*.7}const ff={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},db={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fde=["","","","",""];function fR(e){return fde.includes(e)}const hde={:"",:"",:"",:"",:""},mde={:"",:"",:"",:"",:""},pde={:"",:"",:"",:"",:""},gde={:"",:"",:"",:"",:""};function rp(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Xn[t])return Xn[t];if(["","","","","","","","","","","",""].includes(t))return db[t]??null;if(ir[t])return db[ir[t]]??null;const n=t.charAt(0);return Xn[n]?Xn[n]:["","","","","","","","","",""].includes(n)?n:ir[n]?db[ir[n]]??null:["","","","","","","","","","","",""].includes(n)?db[n]??null:null}function bde(e,t){const n=ff[e],r=ff[t];if(!n||!r)return"";let i;r===n?i="":r===hde[n]?i="":r===mde[n]?i="":r===pde[n]?i="":r===gde[n]?i="":i="";const a=fR(e)===fR(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function yde(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function hx(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function vde(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e??{})){const i=ff[rp(n)];i&&r>0&&(t[i]+=r)}return hx(t)}function xde(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=rp(r);if(!a)continue;const o=bde(t,a);n[o]+=i}return n}function wde(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=yde(n);t[i]+=r}return hx(t)}function hR(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Pe(n??"");return i||(r<=2?"--":"")})}function i9(e,t){const n=!!t?.includeBranches,r={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const a=ff[i.charAt(0)];if(a&&(r[a]=!0),n){const o=r9[i.charAt(1)];o&&(r[o]=!0)}}return r}function a9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const r=ff[n.charAt(0)],i=r9[n.charAt(1)];r&&(t[r]+=10),i&&(t[i]+=6)}return t}function F1(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const _de=["","","","","","","","","",""];function Sde(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=rp(n);i&&(t[i]=(t[i]??0)+r)}return t}function kde(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of _de){const i=ff[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}const Ede={natal:50,dae:30,se:20,wol:7,il:3};function jde(e){const t={};for(const{kind:r,bare:i}of e){const a=Ede[r]??0;if(a<=0)continue;const o=hx(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function Tde(e){if(!e)return[];const t=rp(e.charAt(0)),n=rp(e.charAt(1));return[t,n].filter(Boolean)}function fb(e){const t=Tde(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}const ef=["","","","",""];function Ade(e){const t=(e??"").trim(),n=t?t[t.length-1]:"";return["","",""].includes(n)?"WINTER":["","",""].includes(n)?"SUMMER":["","",""].includes(n)?"SPRING":["","",""].includes(n)?"AUTUMN":"UNKNOWN"}const Nde=12;function o9(e){return e<=40?"cold":e>=60?"hot":"mild"}function Ode(e){return e>=60?"wet":e<=40?"dry":"normal"}function Uy(e){return Math.abs(e-50)>=Nde}function Cde(e,t){if(!t)return e==="WINTER"||e==="SUMMER"?.85:.55;const n=Uy(t.hanNanPct),r=Uy(t.joSeupPct);if(!(n||r))return e==="WINTER"||e==="SUMMER"?.55:.45;const a=o9(t.hanNanPct),o=e==="WINTER"?"cold":e==="SUMMER"?"hot":"mild",l=a==="mild"||o==="mild"||a===o;return e==="WINTER"||e==="SUMMER"?l?.85:.6:.65}function Mde(e,t){const n=ef.filter(u=>t[u]),r=n.map(u=>e[u]??0),i=r.length?Math.max(...r):0,a=r.length?Math.min(...r):0,o=Math.round(i-a),l=n.length>=3&&o<=12;return{presentEls:n,spread:o,balancedPresent:l}}function pT(e){return/||wood/i.test(e)?"":/||fire/i.test(e)?"":/||earth/i.test(e)?"":/||metal/i.test(e)?"":/||water/i.test(e)?"":null}function Dde(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function mR(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function Pde(e){const n=[["",""],["",""],["",""],["",""],["",""]],r=[];for(const[i,a]of n){const o=e[i]??0,l=e[a]??0;if(o<24||l<24||Math.min(o,l)/Math.max(o,l)<.6)continue;let d=null,h=null;if(mR(i)===a)d=i,h=a;else if(mR(a)===i)d=a,h=i;else continue;const p=Dde(d),b=`${d}()${h}    ${p}( )`;r.push({a:i,b:a,controller:d,controlled:h,mediator:p,reason:b})}return r}function gT(e,t){const n=Math.max(.1,1-t/120);return Math.max(0,Math.round(e*n))}function om(e,t,n){return n?e.map(r=>!r.elNorm||t[r.elNorm]?r:{...r,score:0,reasons:[...r.reasons,":    0"]}):e}function sm(e,t,n){const r=i=>i?t[i]:!1;return[...e].sort((i,a)=>{if(n){const o=r(i.elNorm)?1:0,l=r(a.elNorm)?1:0;if(o!==l)return l-o}return a.score!==i.score?a.score-i.score:(i.elNorm??i.element).localeCompare(a.elNorm??a.element,"ko")})}function Rde(e,t,n){const r=(e??"").trim(),i=r?r[r.length-1]:"",a=new Set(["","",""]),o=new Set(["","",""]),l=new Set(["","",""]),u=new Set(["","",""]),d=Object.fromEntries(ef.map(k=>[k,0])),h=Object.fromEntries(ef.map(k=>[k,[]])),p=(k,w,_)=>{d[k]+=w,h[k].push(_)},b=k=>{for(const w of k)p(w.el,w.base,w.why)};let y=!1;if(n){const k=Uy(n.hanNanPct),w=Uy(n.joSeupPct);if(k||w){y=!0;const _=o9(n.hanNanPct),T=Ode(n.joSeupPct),O=Math.abs(n.hanNanPct-50),j=Math.abs(n.joSeupPct-50),C=Math.min(1,O/35),M=Math.min(1,j/35),P=Math.round(100-n.hanNanPct),I=Math.round(n.hanNanPct),U=Math.round(n.joSeupPct),V=Math.round(100-n.joSeupPct);if(k){const q=Math.round(80+50*C),H=Math.round(40+25*C);_==="cold"?(p("",q,`( ${P}%):   -> `),p("",H," :   -> ")):_==="hot"&&(p("",q,`( ${I}%):   -> `),p("",H," :  -> "))}if(w){const q=Math.round(55+35*M),H=Math.round(25+20*M);T==="wet"?(p("",q,`( ${U}%):   -> `),p("",H," :   -> ")):T==="dry"&&(p("",q,`( ${V}%):   -> `),p("",H," :  -> "))}}}if(!y){let k=[];a.has(i)?k=[{el:"",base:110,why:"():     "},{el:"",base:60,why:" :      "}]:o.has(i)?k=[{el:"",base:110,why:"():     "},{el:"",base:70,why:" :   () "}]:l.has(i)?k=[{el:"",base:90,why:"():     /"},{el:"",base:55,why:" : ()    "}]:u.has(i)?k=[{el:"",base:85,why:"():     "},{el:"",base:75,why:"():     "}]:k=[{el:"",base:60,why:":       ()"},{el:"",base:60,why:":       ()"}],b(k)}return ef.filter(k=>d[k]>0).map(k=>({element:k,elNorm:k,score:gT(d[k],t[k]??0),reasons:[...h[k],` ${k}  ${Math.round(t[k]??0)}%`]}))}function Lde(e){const t=Pde(e);if(!t.length)return{applicable:!1,items:[],note:"       "};const n=new Map;for(const i of t){const a=e[i.a]??0,o=e[i.b]??0,l=Math.min(a,o),u=95+Math.round(l/2),d=n.get(i.mediator),h=[i.reason,`(${i.a} ${Math.round(a)}%  ${i.b} ${Math.round(o)}%)`,` : ${i.controller}${i.mediator}${i.controlled}`];d?n.set(i.mediator,{score:Math.max(d.score,u),reasons:[...d.reasons,...h]}):n.set(i.mediator,{score:u,reasons:h})}return{applicable:!0,items:Array.from(n.entries()).map(([i,a])=>({element:i,elNorm:i,score:gT(a.score,e[i]??0),reasons:a.reasons})),note:"////       ( )  "}}function Ide(e,t){let n="",r=e.??0;for(const d of ef){const h=e[d]??0;h<r&&(r=h,n=d)}const i=ef.some(d=>!t[d]);if(!(i||r<=8))return{applicable:!1,items:[],note:"    ( )  "};const l=gT((i?85:70)+Math.round((8-Math.min(8,r))*6),e[n]??0);return{applicable:!0,items:[{element:n,elNorm:n,score:l,reasons:[i?"():  /  ":"():      ",`  ${n} = ${Math.round(r)}%`]}],note:" ()  ( 8% )      "}}function bT(e){const{eokbuList:t,monthGz:n,elemPct:r,presentMap:i,demoteAbsent:a,gyeokgukList:o,pillars:l}=e,u=$le(l),d=sm(om(t,i,a),i,a),h=sm(om(Rde(n,r,u),i,a),i,a),p=Ade(n),b=Mde(r,i),y=Cde(p,u),k=1.25,w=Lde(r),_=sm(om(w.items,i,a),i,a),T=Ide(r,i),O=sm(om(T.items,i,a),i,a),j=Array.isArray(o)?o:[],C=j.length>0,M=sm(om(j,i,a),i,a),P=Z=>Math.max(0,...Z.map(X=>Number.isFinite(X.score)?X.score:0)),U=[{kind:"EOKBU",title:"",marker:"",priority:1,weight:k,applicable:d.length>0,note:"1.  /()  ",candidates:d},{kind:"JOHU",title:"",marker:"",priority:2,weight:y,applicable:!0,note:p==="WINTER"?"2. ()   ":p==="SUMMER"?"2. ()   ":"2.    ,   ",candidates:h},{kind:"TONGGWAN",title:"",marker:"",priority:3,weight:.7,applicable:w.applicable,note:w.note,candidates:_},{kind:"BYEONGYAK",title:"",marker:"",priority:3,weight:.7,applicable:T.applicable,note:T.note,candidates:O},{kind:"GYEOKGUK",title:"",marker:"",priority:4,weight:.55,applicable:C,note:C?"/     ( )":"  (//  )",candidates:M}].map(Z=>{const X=P(Z.candidates),G=Z.candidates[0];let J=0;if(Z.applicable&&G){if(J=G.score*Z.weight,Z.kind==="EOKBU"&&!b.balancedPresent){const Q=Math.min(35,Math.round(b.spread*.9));J+=Q}Z.kind==="EOKBU"&&b.balancedPresent&&(J*=.75),G.elNorm&&!i[G.elNorm]&&(J*=.25)}return{...Z,maxScore:X,fitScore:Math.round(J),finalScore:Math.round(J)}}).sort((Z,X)=>Z.priority-X.priority),V=[...U].filter(Z=>Z.applicable&&Z.candidates.length>0).sort((Z,X)=>X.fitScore!==Z.fitScore?X.fitScore-Z.fitScore:Z.priority-X.priority)[0],q=Math.max(0,...U.map(Z=>Z.fitScore)),H=V?.kind??null,B=U.map(Z=>{if(!H)return Z;if(Z.kind===H){const X=Z.fitScore<q?q+1:Z.fitScore;return{...Z,finalScore:X}}return{...Z,finalScore:Z.fitScore}}),W=H?B.find(Z=>Z.kind===H)??null:null;return{bestKind:H,best:W,groups:B}}const $de={:"",:"",:"",:"",:""},Bde={:"",:"",:"",:"",:""},zde={:"",:"",:"",:"",:""},Ude={:"",:"",:"",:"",:""};function H1(e){switch(e){case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";default:return null}}function Fde(e){const t=(e||"").trim();return!t||t==="-"?null:t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":null}function Hde(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":""}function Gde(e,t){switch(t){case"":return e;case"":return $de[e];case"":return zde[e];case"":return Ude[e];case"":return Bde[e]}}function Yde(e,t){const n=new Map,r=(u,d,h)=>{if(!u)return;const p=n.get(u);if(!p){n.set(u,{element:u,score:d,reasons:[h]});return}p.score=Math.max(p.score,d),p.reasons=p.reasons.includes(h)?p.reasons:[...p.reasons,h]},i=H1(t),a=Fde(e.);if(i&&a){const u=Hde(a),d=Gde(i,u);r(d,92,` ${e.}  ${u} (${d})`)}const o=H1(e.);o&&r(o,86,` ${e.}  (${o})`);const l=H1(e.);return l&&r(l,70,` ${e.}  (${l})`),Array.from(n.values()).sort((u,d)=>d.score-u.score)}const lm=e=>e&&e.length>=1?e.charAt(0):"",hb=e=>e&&e.length>=2?e.charAt(1):"";function qde(e){const t=String(e??"");if(!/^\d{8}$/.test(t))return new Date;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i,12,0,0,0);return Number.isNaN(a.getTime())?new Date:a}function Kde({data:e,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:i,demoteAbsent:a}){const{date:o,yearGZ:l,monthGZ:u,dayGZ:d}=Qr(),h=S.useMemo(()=>Pe(l),[l]),p=S.useMemo(()=>Pe(u),[u]),b=S.useMemo(()=>Pe(d),[d]),y=ac(e,e?.mingSikType),k=S.useMemo(()=>{if(!y?.length)return 0;const Ne=y.findIndex((Be,Ue)=>{const nt=y[Ue+1]?.at;return o>=Be.at&&(!nt||o<nt)});return Ne!==-1?Ne:o<y[0].at?0:y.length-1},[y,o]),w=S.useMemo(()=>{const Ne=r??y?.[k]?.gz??"";return Pe(Ne)||null},[r,y,k]),{manualHour:_,usePrevDay:T}=Fi(),O=e.mingSikType??"/",j=S.useMemo(()=>hR(t),[t]),C=S.useMemo(()=>hR(n),[n]),M=S.useMemo(()=>{const Ne=[...j];return(!Ne[3]||Ne[3]===""||Ne[3]==="--")&&_&&(Ne[3]=_.stem+_.branch),Ne},[j,_]),P=S.useMemo(()=>{const Ne=[...C];return(!Ne[3]||Ne[3]===""||Ne[3]==="--")&&_&&(Ne[3]=_.stem+_.branch),Ne},[C,_]),I=S.useMemo(()=>{const Ne=Number(e.birthDay?.slice(0,4)),Be=Number(e.birthDay?.slice(4,6)),Ue=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ne)||!Number.isFinite(Be)||!Number.isFinite(Ue))return null;const nt=new Date(Ne,Be-1,Ue,12,0,0,0),ut=Pe(ct(nt)||""),yt=Pe(At(nt)||""),se=Pe(pt(nt,O)||"");return[ut,yt,se,""]},[e.birthDay,O]),U=F1(M),V=F1(P),H=(e.calendarType==="lunar"?"lunar":"solar")==="lunar"?V?"lunar":U?"solar":"lunar":U?"solar":V?"lunar":"solar",B=S.useMemo(()=>{const Be=[...H==="lunar"?V?P:U?M:I??["","","",""]:U?M:V?P:I??["","","",""]];if((!Be[3]||Be[3]===""||Be[3]==="--")&&_&&(Be[3]=_.stem+_.branch),Be[3]==="--"&&(Be[3]=""),!T)return Be;const Ue=to(Be[2]||"",-1);return[Be[0],Be[1],Ue,Be[3]]},[H,U,V,M,P,I,_,T]),W=S.useMemo(()=>lm(B[2]??""),[B]),Z=S.useMemo(()=>hb(B[1]??""),[B]),X=S.useMemo(()=>qde(e.birthDay),[e.birthDay]),G=S.useMemo(()=>_?_.stem+_.branch:B[3]||"",[_,B]),J=S.useMemo(()=>({dae:i!==""?w??null:null,se:i===""||i===""||i===""?h??null:null,wol:i===""||i===""?p??null:null,il:i===""?b??null:null}),[i,w,h,p,b]),Q=S.useMemo(()=>Ip({natal:B,tab:i,chain:J,hourKey:G}),[B,i,J,G]),oe=S.useMemo(()=>{if(!Q)return null;const Ne=Sde(Q.perStemElementScaled),Be=J.dae?fb(J.dae):{},Ue=J.se?fb(J.se):{},nt=J.wol?fb(J.wol):{},ut=J.il?fb(J.il):{},yt=jde([{kind:"natal",bare:Ne},{kind:"dae",bare:Be},{kind:"se",bare:Ue},{kind:"wol",bare:nt},{kind:"il",bare:ut}]),se=hx(yt),Oe=kde(se),Ye=xde(yt,Q.dayStem),qe=wde(Ye),Tt=vde(yt);return{perStemAugBare:yt,perStemAugFull:Oe,elemPct100:Tt,totalsMain:qe,totalsSub:Ye}},[Q,J]),le=S.useMemo(()=>i9(B,{includeBranches:!0}),[B]),z=S.useMemo(()=>["","","","",""].some(Ne=>!le[Ne]),[le]),K=oe?.elemPct100??Q?.elementPercent100??a9(B),ne=S.useMemo(()=>{if(!Q||!oe)return[];const Ne=G7(Q.dayStem);return Object.entries(oe.totalsMain).map(([Be,Ue])=>({name:Be,value:Ue,color:Ne[Be]}))},[Q,oe]),re=oe?.elemPct100??{:0,:0,:0,:0,:0},ce=oe?.totalsSub??Q?.perTenGodSub??null,ue=S.useMemo(()=>[i,w??"",h??"",p??"",b??"",o?.toISOString?.()??"",G].join("|"),[i,w,h,p,b,o,G]),ge=S.useMemo(()=>{const Ne=ce?Object.entries(ce).sort(([Ue],[nt])=>Ue.localeCompare(nt)).map(([Ue,nt])=>`${Ue}:${nt}`).join(","):"none",Be=ne.map(Ue=>`${Ue.name}:${Ue.value}`).join(",");return`${ue}||${B.join("")}||${Be}||${Ne}`},[ue,B,ne,ce]),ke=typeof df=="function"?df(B,Q?.totals):null,ie=S.useMemo(()=>(ke?.ordered??[]).map(Be=>{const Ue=Be.element??"",nt=/||wood/i.test(Ue)?"":/||fire/i.test(Ue)?"":/||earth/i.test(Ue)?"":/||metal/i.test(Ue)?"":/||water/i.test(Ue)?"":null,ut=typeof Be.score=="number"?Be.score:nt?K[nt]??0:0,yt=Array.isArray(Be.reasons)?Be.reasons:[];return{element:Ue,elNorm:nt,score:ut,reasons:yt}}),[ke,K]),Ae=S.useMemo(()=>ie.map(Ne=>({element:Ne.element,elNorm:Ne.elNorm,score:Ne.score,reasons:Ne.reasons})),[ie]),Ee=S.useMemo(()=>{if(!W||!Z)return[];const[Ne,Be,Ue,nt]=B,ut=[lm(Ne),lm(Be),lm(Ue),lm(nt)].filter(Boolean),yt=[hb(Ne),hb(Ue),hb(nt)].filter(Boolean),se=F7({dayStem:W,monthBranch:Z,date:X,pillars:B,emittedStems:ut,otherBranches:yt}),Oe=Yde(se,W),Ye=qe=>/||wood/i.test(qe)?"":/||fire/i.test(qe)?"":/||earth/i.test(qe)?"":/||metal/i.test(qe)?"":/||water/i.test(qe)?"":null;return(Oe??[]).map(qe=>({element:qe.element,elNorm:Ye(qe.element),score:Number.isFinite(qe.score)?qe.score:0,reasons:Array.isArray(qe.reasons)?qe.reasons:[]}))},[B,W,Z,X]),he=S.useMemo(()=>{const Ne=B[1]||"";return bT({eokbuList:Ae,monthGz:Ne,elemPct:K,presentMap:le,demoteAbsent:a,pillars:B,gyeokgukList:Ee})},[B,Ae,K,le,a,Ee]),Le=S.useMemo(()=>{const Ne=he.best;return Ne?.candidates?.length?Ne.candidates.map(Be=>({element:Be.element,elNorm:Be.elNorm,score:Be.score,reasons:Be.reasons})):ie},[he,ie]),Ie=S.useMemo(()=>Math.max(0,...Le.map(Ne=>Number.isFinite(Ne.score)?Ne.score:0)),[Le]),tt=S.useMemo(()=>n9(B,{criteriaMode:"modern",useHarmonyOverlay:!0}),[B]);return{seGz:h,wolGz:p,ilGz:b,daewoonGz:w,activePillars:B,chain:J,unified:Q,overlay:oe,chartData:ne,elementPct:re,tenSubTotals100:ce,hourKeyForUi:G,revKey:ge,yongshinMulti:he,yongshinRecommend:he,yongshinList:Le,maxScore:Ie,hasAbsent:z,dayElementPercent:tt,isValidActive:F1(B)}}function Wde(e){if(typeof e!="object"||e===null)return!1;const t=e,n=t.at,r=t.gz;return n instanceof Date&&!Number.isNaN(n.getTime())&&typeof r=="string"}function Vde(e){const t=new Date(e,1,15,12,0,0,0);return Pe(ct(t)||"")}function Zde(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=pT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}const Xde={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fy(e){return Xde[e]??null}function Jde(e,t){const n={:!1,:!1,:!1,:!1,:!1},r=hT(t);for(const i of e){const a=i?.charAt(0)??"",o=i?.charAt(1)??"",l=Fy(a);if(l&&(n[l]=!0),fT(o)){const u=r[o],d=[u.,u.,u.].filter(Boolean);for(const h of d){const p=Fy(h.stem);p&&h.w>0&&(n[p]=!0)}}}return n}function Qde(e,t){const n=hT(t),r={:0,:0,:0,:0,:0};for(const o of e){const l=o?.charAt(0)??"",u=o?.charAt(1)??"",d=Fy(l);if(d&&(r[d]+=50),fT(u)){const h=n[u],p=[h.,h.,h.].filter(Boolean),b=p.reduce((k,w)=>k+(Number.isFinite(w.w)?w.w:0),0),y=b>0?b:1;for(const k of p){const w=Fy(k.stem);w&&(r[w]+=50*k.w/y)}}}const i=r.+r.+r.+r.+r.,a=i>0?i:1;return{:r./a*100,:r./a*100,:r./a*100,:r./a*100,:r./a*100}}function efe(e,t,n){return e||Qde(t,n)}function tfe(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,gyeokgukList:a,hiddenStemMode:o}=e,l=S.useMemo(()=>B7(o),[o]),u=ac(t,t?.mingSikType),d=S.useMemo(()=>Array.isArray(u)?u.filter(Wde).slice(0,10):[],[u]),[h,p]=S.useState(0),[b,y]=S.useState(0),k=Math.max(0,Math.min(d.length-1,h)),w=d[k]??null,_=S.useMemo(()=>{if(!w)return[];const V=w.at.getFullYear();return Array.from({length:10},(q,H)=>{const B=V+H;return{year:B,gz:Vde(B)}})},[w]),T=b==null?null:Math.max(0,Math.min(_.length-1,b)),O=T==null?null:_[T]??null,j=S.useMemo(()=>Jde(n,l),[n,l]),C=S.useMemo(()=>["","","","",""].some(V=>!j[V]),[j]),M=S.useMemo(()=>{const V=w?Pe(w.gz):null,q=O?Pe(O.gz):null;return{dae:V||null,se:q||null,wol:null,il:null}},[w,O]),P=S.useMemo(()=>M.se?"":"",[M.se]),I=S.useMemo(()=>{const V=w?`${w.at.getFullYear()}~ ${Pe(w.gz)}`:" -",q=O?` / ${O.year} ${Pe(O.gz)}`:"";return`${V}${q}`},[w,O]),U=S.useMemo(()=>{if(!w)return null;const V=Ip({natal:n,tab:P,chain:M,hourKey:r}),q=efe(V?.elementPercent100,n,l),H=typeof df=="function"?df(n,V?.totals):null,B=Zde(H,q);return bT({eokbuList:B,monthGz:n[1]||"",elemPct:q,presentMap:j,demoteAbsent:i,pillars:n,gyeokgukList:Array.isArray(a)?a:null})},[w,n,P,M,r,j,i,a,l]);return{daeIndex:k,setDaeIndex:p,seIndex:T,setSeIndex:y,dae10:d,se10:_,chain:M,tab:P,label:I,recommend:U,presentMap:j,hasAbsent:C}}const nfe={EOKBU:"",JOHU:"",TONGGWAN:"",BYEONGYAK:"",GYEOKGUK:""};function B2(e){return e?nfe[e]??e:""}function rfe(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.at instanceof Date&&!Number.isNaN(t.at.getTime())&&typeof t.gz=="string"}function ife(e){const t=new Date(e,1,15,12,0,0,0);return Pe(ct(t)||"")}function G1(e){const t=e?.best??null,n=t?.candidates?.[0]??null,r=t?.kind??null,i=n?.element??null,a=n?.elNorm??(n?.element?pT(n.element):null),o=typeof t?.fitScore=="number"?t.fitScore:0,l=r&&i?`${B2(r)}:${i}`:r?`${B2(r)}:`:"";return{kind:r,top1:i,top1ElNorm:a,fit:o,label:l,result:e}}function afe(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=pT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}function pR(e){const{pillars:t,hourKey:n,chain:r,tab:i,demoteAbsent:a,presentMap:o,gyeokgukList:l}=e,u=Ip({natal:t,tab:i,chain:r,hourKey:n}),d=u?.elementPercent100??a9(t),h=typeof df=="function"?df(t,u?.totals):null,p=afe(h,d);return bT({eokbuList:p,monthGz:t[1]||"",elemPct:d,presentMap:o,demoteAbsent:a,pillars:t,gyeokgukList:Array.isArray(l)?l:null})}function ofe(e){const t=[];for(const n of e){const r=t[t.length-1];if(!r){t.push({fromYear:n.year,toYear:n.year,snap:n.snap});continue}r.snap.label===n.snap.label?r.toYear=n.year:t.push({fromYear:n.year,toYear:n.year,snap:n.snap})}return t}const Po=({text:e,tone:t="base",onClick:n,title:r})=>{const i=t==="pick"?"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":t==="diff"?"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800 cursor-pointer":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700",a=g.jsx("span",{className:`inline-flex items-center text-[11px] px-2 py-0.5 rounded-full border whitespace-nowrap ${i}`,title:r,children:e});return n?g.jsx("button",{type:"button",className:"inline-flex",onClick:n,title:r,children:a}):a};function gR({snap:e}){const t=e.result?.best??null,n=t?.candidates?.slice(0,3)??[];return t?g.jsxs("div",{className:"mt-2 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Po,{text:`: ${B2(t.kind)}`,tone:"pick"}),g.jsx(Po,{text:` ${t.fitScore}`}),n[0]?.element?g.jsx(Po,{text:`1 ${n[0].element}`,tone:"diff"}):null]}),t.note?g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:t.note}):null,n.length?g.jsx("ul",{className:"mt-2 space-y-2",children:n.map((r,i)=>g.jsx("li",{className:"text-xs",children:g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Po,{text:`${i+1} ${r.element}`}),g.jsx(Po,{text:` ${r.score}`}),(r.reasons??[]).slice(0,4).map((a,o)=>g.jsx(Po,{text:a},o))]})},`${r.elNorm??r.element}-${i}`))}):g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:" "})]}):g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "})}function sfe(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:a}=e,o=S.useMemo(()=>i9(n,{includeBranches:!0}),[n]),l=ac(t,t?.mingSikType),u=S.useMemo(()=>Array.isArray(l)?l.filter(rfe).slice(0,10):[],[l]),d=S.useMemo(()=>G1(a),[a]),[h,p]=S.useState(null),b=w=>p(_=>_===w?null:w),y=S.useMemo(()=>u.map((w,_)=>{const T=Pe(w.gz)||"",j=pR({pillars:n,hourKey:r,chain:{dae:T||null,se:null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),C=G1(j),M=w.at.getFullYear(),P=Array.from({length:10},(H,B)=>{const W=M+B,Z=ife(W),G=pR({pillars:n,hourKey:r,chain:{dae:T||null,se:Z||null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),J=G1(G);return{year:W,snap:J}}),U=ofe(P).filter(H=>H.snap.top1ElNorm!==C.top1ElNorm),V=C.top1ElNorm!==d.top1ElNorm,q=V||U.length>0;return{idx:_,dae:w,daeLabel:`${M}~ ${T||""}`,daeSnap:C,daeDiffFromNatal:V,segDiffOnly:U,hasAnyChange:q}}).filter(w=>w.hasAnyChange),[u,n,r,i,o,d.top1ElNorm]),k=S.useMemo(()=>y.some(w=>w.hasAnyChange),[y]);return g.jsxs("div",{className:"rounded-xl bg-neutral-100 dark:bg-neutral-900 p-4 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-bold",children:"  "}),g.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:["(): ",d.label," /  ",d.fit]})]}),k?g.jsx("div",{className:"space-y-3",children:y.map(w=>{const _=`dae:${w.idx}`,T=h===_;return g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Po,{text:` ${w.daeLabel}`,tone:"base"}),g.jsx(Po,{text:` ${w.daeSnap.label} ( ${w.daeSnap.fit})`,tone:w.daeDiffFromNatal?"diff":"base",onClick:()=>b(_),title:" (top3) "}),w.daeDiffFromNatal?g.jsx(Po,{text:" ",tone:"diff"}):null]}),w.segDiffOnly.length?g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.segDiffOnly.map((O,j)=>{const C=`seg:${w.idx}:${j}`,M=h===C,P=O.fromYear===O.toYear?`${O.fromYear}`:`${O.fromYear}~${O.toYear}`;return g.jsxs("div",{className:"inline-flex flex-col",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx(Po,{text:` ${P}  ${O.snap.label} ( ${O.snap.fit})`,tone:"diff",onClick:()=>b(C),title:" (top3) "})}),M?g.jsx(gR,{snap:O.snap}):null]},C)})}):null,T?g.jsx(gR,{snap:w.daeSnap}):null]},_)})}):g.jsx("div",{className:"w-full p-3 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-400 text-center",children:"  ."})]})}const Hy=({children:e,variant:t="neutral"})=>{const n={neutral:"bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-400",violet:"bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-300",amber:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",indigo:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"};return g.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold tracking-tight shadow-sm ${n[t]}`,children:e})};function lfe(e,t){if(t<=0)return"12%";const n=Math.round(e/t*100);return`${Math.max(5,Math.min(100,n))}%`}function cfe({g:e,isBest:t,demoteAbsent:n,hasAbsent:r,onDemoteAbsentChange:i}){const a=e.candidates.slice(0,3);return g.jsxs("details",{open:t,className:`group rounded-2xl border transition-all duration-300 ${t?"border-violet-200 dark:border-violet-800 bg-white dark:bg-neutral-900 shadow-md":"border-neutral-200 dark:border-neutral-800 bg-neutral-50/50 dark:bg-neutral-900/50"}`,children:[g.jsx("summary",{className:"list-none cursor-pointer p-4 select-none",children:g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:`text-sm ${t?"font-black text-violet-600":"font-bold text-neutral-700 dark:text-neutral-300"}`,children:[e.marker," ",e.title]}),t&&g.jsx(Hy,{variant:"violet",children:" "}),!e.applicable&&g.jsx(Hy,{variant:"neutral",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] font-medium text-neutral-400",children:""}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:e.fitScore}),g.jsx("span",{className:"text-neutral-300 group-open:rotate-180 transition-transform",children:""})]})]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed whitespace-normal break-words pr-4",children:e.note})]})}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[a.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 py-2 text-center border-t border-neutral-100 dark:border-neutral-800",children:"  ."}):g.jsx("div",{className:"space-y-2 border-t border-neutral-100 dark:border-neutral-800 pt-3",children:a.map((o,l)=>g.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[40px]",children:[g.jsxs("span",{className:"text-[9px] font-bold text-neutral-400 uppercase",children:[l+1,"st"]}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:o.element})]}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-2 w-full rounded-full bg-neutral-200 dark:bg-neutral-700 overflow-hidden shadow-inner",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-700 ${t?"bg-gradient-to-r from-violet-400 to-indigo-500":"bg-neutral-400"}`,style:{width:lfe(o.score??0,e.maxScore)}})}),g.jsx("div",{className:"flex flex-wrap gap-1",children:(o.reasons??[]).slice(0,4).map((u,d)=>g.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-white dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400 border border-neutral-100 dark:border-neutral-600 shadow-sm",children:u},d))})]})]},`${e.kind}-${o.element}-${l}`))}),r&&g.jsxs("button",{type:"button",onClick:()=>i?.(!n),className:`px-2 py-1 rounded-full text-[10px] font-bold border transition cursor-pointer ${n?"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800":"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-800 dark:text-neutral-400 dark:border-neutral-700"}`,"aria-pressed":n,children:[" ",n?"ON":"OFF"]})]})]})}function ufe({best:e}){const t=e?.candidates?.[0]??null;return g.jsxs("div",{className:"relative overflow-hidden rounded-[2rem] border border-violet-200 dark:border-violet-800 p-6 bg-gradient-to-br from-violet-50 to-white dark:from-violet-950/20 dark:to-neutral-900 shadow-sm",children:[g.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-violet-100 dark:bg-violet-900/20 rounded-full blur-3xl"}),g.jsxs("div",{className:"relative z-10 flex flex-col gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Hy,{variant:"indigo",children:" "}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("span",{className:"text-[10px] text-neutral-400 font-bold uppercase",children:" "}),g.jsx("span",{className:"text-lg font-black text-violet-600 dark:text-violet-400",children:e?.fitScore??0})]})]}),g.jsxs("div",{className:"flex items-end gap-3",children:[g.jsx("h4",{className:"text-2xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter",children:e?`${e.marker} ${e.title}`:"  "}),t?.element&&g.jsxs("div",{className:"mb-1 flex items-center gap-1",children:[g.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:"1:"}),g.jsx("span",{className:"text-base font-black text-indigo-500",children:t.element})]})]}),e?.note&&g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 leading-relaxed font-medium",children:e.note})]})]})}function dfe({recommend:e,data:t,pillars:n,hourKey:r,demoteAbsent:i,onDemoteAbsentChange:a,hasAbsent:o,hiddenStemMode:l}){const u=tfe({data:t,pillars:n,hourKey:r,demoteAbsent:i,hiddenStemMode:l}),d=o??u.hasAbsent;return g.jsxs("div",{className:"w-full p-6 rounded-[2.5rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-xl space-y-8",children:[g.jsxs("div",{className:"flex items-center justify-between px-2",children:[g.jsx("div",{className:"space-y-1",children:g.jsx("h2",{className:"text-xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter uppercase",children:" "})}),d&&g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx(Hy,{variant:"amber",children:"  "}),i&&g.jsx("span",{className:"text-[9px] text-amber-500 font-bold mt-1",children:" "})]})]}),g.jsx(ufe,{best:e.best}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 px-2",children:[g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"}),g.jsx("span",{className:"text-[10px] font-black text-neutral-300 dark:text-neutral-600 uppercase tracking-widest",children:" "}),g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsx("div",{className:"grid gap-3",children:e.groups.map(h=>g.jsx(cfe,{g:h,isBest:e.bestKind===h.kind,demoteAbsent:i,hasAbsent:d,onDemoteAbsentChange:a},h.kind))})]}),g.jsx("div",{className:"pt-2",children:g.jsx(sfe,{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:e})})]})}const bR=e=>e<10?`0${e}`:`${e}`;function ffe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Zi(i,a,o),u=`${l.getFullYear()}${bR(l.getMonth()+1)}${bR(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}function hfe(e){if(typeof e!="number"&&typeof e!="string")return null;const t=String(e);if(!/^\d{8}$/.test(t))return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i);return Number.isNaN(a.getTime())?null:a}const mfe=["  ","   ","","",""];function pfe(e){return e==="  "||e===""}function gfe({data:e,pillars:t,lunarPillars:n,daewoonGz:r}){const i=tn(p=>p.settings),a=eue(),o=ffe(e),l=hfe(o.birthDay)||void 0,u=bn(p=>p.canUseAdvancedReportNow()),d=Kde({data:o,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:a.blendTab,demoteAbsent:a.demoteAbsent}),h=S.useMemo(()=>"    100   ! (  )",[]);return d.isValidActive?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsxs("div",{className:"flex flex-col items-center mb-8",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap mb-4",children:Qce.map(p=>{const b=a.blendTab===p;return g.jsx("button",{onClick:()=>a.setBlendTab(p),className:`
                  px-4 py-1.5 text-[11px] font-bold rounded-full transition-all duration-200 active:scale-95 cursor-pointer
                  ${b?"bg-amber-400 text-amber-950 shadow-[0_2px_10px_rgba(251,191,36,0.4)] border border-amber-300":"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 border border-transparent hover:bg-neutral-200 dark:hover:bg-neutral-700"}
                `,children:p},p)})}),g.jsxs("div",{className:"flex items-start gap-2 px-4 py-2 bg-amber-50/50 dark:bg-amber-900/10 rounded-xl border border-amber-100/50 dark:border-amber-900/20",children:[g.jsx("span",{className:"text-amber-500 text-[12px] mt-0.5",children:""}),g.jsxs("p",{className:"text-[10.5px] text-amber-700 dark:text-amber-400/80 leading-relaxed font-medium",children:["    ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "})," ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "}),"   ."]})]})]}),g.jsx("div",{className:"flex gap-2 mb-8 justify-center flex-wrap",children:mfe.map(p=>{const b=!u&&pfe(p),y=a.bigTab===p;return g.jsxs("button",{title:b?h:void 0,onClick:()=>a.setBigTab(p),className:`
                relative px-4 py-2 text-sm font-bold rounded-2xl border transition-all duration-300 active:scale-95 flex items-center gap-1.5 cursor-pointer
                ${y?"bg-violet-600 text-white border-violet-500 shadow-[0_4px_12px_rgba(139,92,246,0.3)] z-10":"bg-white dark:bg-neutral-900 text-neutral-500 dark:text-neutral-400 border-neutral-200 dark:border-neutral-800 hover:border-violet-300 dark:hover:border-violet-700"}
                ${b?"opacity-70 bg-neutral-50 dark:bg-neutral-900/50":""}
              `,children:[g.jsx("span",{className:b?"mr-1":"",children:p}),b&&g.jsx("span",{className:"flex items-center justify-center w-4 h-4 bg-neutral-200 dark:bg-neutral-800 rounded-full text-[10px]",children:""}),y&&!b&&g.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]},p)})}),a.bigTab===""&&g.jsx(Tle,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`harm-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(vle,{data:d.chartData,perStemElementScaled:d.overlay?.perStemAugFull,dayStem:d.activePillars[2]?.charAt(0)??null,yongshinTop:d.yongshinMulti?.best?.candidates?.[0]?.element??null,yongshinKind:d.yongshinMulti?.bestKind??null},`pentagon-${d.revKey}`),g.jsx(jle,{natal:d.activePillars,perStemElementScaled:d.overlay?.perStemAugFull}),g.jsx(_le,{value:d.dayElementPercent}),g.jsx(zle,{natal:d.activePillars})]}),a.bigTab===""&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:""}),"   .   100  !"]}),a.bigTab===""&&u&&g.jsx(dfe,{recommend:d.yongshinMulti,data:o,pillars:d.activePillars,hourKey:d.hourKeyForUi,demoteAbsent:a.demoteAbsent,onDemoteAbsentChange:a.setDemoteAbsent,hasAbsent:d.hasAbsent,hiddenStemMode:i.hiddenStemMode},`yongshin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab===""&&g.jsx(Ole,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`shin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="  "&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:"  "}),"   .   100  !"]}),a.bigTab==="  "&&u&&g.jsx(zce,{unified:d.unified,pillars:d.activePillars,tab:a.blendTab,mapping:i.hiddenStemMode,birthDate:l},`gyeok-${a.blendTab}-${d.hourKeyForUi}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const mb=e=>typeof e=="string"&&e.length>=2,bfe=e=>!Array.isArray(e)||e.length!==4?!1:mb(e[0])&&mb(e[1])&&mb(e[2])&&(e[3]===""||mb(e[3]));function yfe({data:e}){const[t,n]=S.useState("un"),r=Fs(),i=bn(d=>d.canUseMyoViewerNow());S.useEffect(()=>{t==="myoun"&&!i&&n("un")},[t,i]);const a=S.useMemo(()=>{try{const d=Mf(e);return Zl(d,r)}catch{return new Date}},[e,r]),o=S.useMemo(()=>Jl(e,a),[e,a]),l=!e.birthTime||e.birthTime==="",u=S.useMemo(()=>{try{const d=ct(o,e.birthPlace?.lon),h=At(o,e.birthPlace?.lon),p=pt(o,e.mingSikType),b=l?"":no(o,e.mingSikType);return[d,h,p,b]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),i?g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}):null,g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(ule,{data:e}),t==="myoun"&&i&&g.jsx(mle,{data:e}),t==="report"&&g.jsx(gfe,{data:e,pillars:bfe(u)?u:[]})]})}function vfe({onOpenSidebar:e,onAddNew:t,onOpenCustom:n,isLoggedIn:r}){const i=En(C=>C.list.length),a=bn(C=>C.canAddMyeongsik),[o,l]=S.useState(!1);S.useEffect(()=>{let C=!0;De.auth.getSession().then(({data:P})=>{C&&l(!!P.session?.user)});const{data:M}=De.auth.onAuthStateChange((P,I)=>{l(!!I?.user)});return()=>{C=!1,M.subscription.unsubscribe()}},[]);const u=r||o,d=a(i),h=!d.ok,p=h?d.message:"",b=()=>{if(h){ma(p||"   ");return}t()},y=()=>{if(h){ma(p||"   ");return}n()},k=()=>{Es.getState().openWith("HEADER")},w=async()=>{const{error:C}=await De.auth.signOut();if(C){console.error(C),ma("  ");return}ma(" ")},_="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors",T="bg-purple-600 hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 cursor-pointer",O="bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 cursor-pointer",j="bg-neutral-300 dark:bg-neutral-800 text-neutral-100 cursor-not-allowed opacity-80";return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(uX,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("button",{type:"button",onClick:b,"aria-label":" ",disabled:h,title:" ",className:`${_} ${h?j:T}`,children:[g.jsx(wX,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),g.jsxs("button",{type:"button",onClick:y,"aria-label":"  ",disabled:h,title:"  ",className:`${_} ${h?j:O}`,children:[g.jsx(yX,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),u?g.jsx("button",{type:"button",onClick:w,"aria-label":"",title:"",className:"inline-flex items-center gap-1 text-xs cursor-pointer text-neutral-700 dark:text-neutral-200 hover:text-purple-600 dark:hover:text-purple-400",children:g.jsx("ins",{children:""})}):g.jsx("button",{type:"button",onClick:k,"aria-label":"",title:"",className:"text-xs cursor-pointer",children:g.jsx("ins",{children:""})})]})]})})}function xfe(e){S.useEffect(()=>{const t=e??u$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");f$(t),e&&d$(e)},[e])}const s9=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function wfe(e){return typeof e=="string"&&s9.includes(e)}function z2(e){const t=Array.isArray(e)?e.filter(wfe):[],n=s9.filter(r=>!t.includes(r));return[...t,...n]}function U2(e){return{...zl,...e,sectionOrder:z2(e.sectionOrder)}}function _fe(e,t){return e.theme??t.theme??"dark"}function Sfe({open:e,settings:t}){const n=S.useMemo(()=>z2(t.sectionOrder),[t.sectionOrder]),r=S.useMemo(()=>U2(t),[t]),[i,a]=S.useState(n),[o,l]=S.useState(r),[u,d]=S.useState(null),[h,p]=S.useState(!1);return S.useEffect(()=>{if(!e||h)return;const y=z2(t.sectionOrder);l({...U2(t),sectionOrder:y}),a(y),p(!1)},[e,t,h]),{order:i,setOrder:a,localSettings:o,setLocalSettings:l,updateSetting:(y,k)=>{l(w=>{const _={...w,[y]:k};return p(!0),_})},toastMessage:u,setToastMessage:d,dirty:h,setDirty:p}}function kfe(){try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}}function l9(e){d$(e)}function Efe({setSettings:e,saveToServer:t}){return{applyChanges:S.useCallback(async(r,i,a)=>{const o={...U2(r),sectionOrder:i};kfe(),S.startTransition(()=>{e(o)}),o.theme&&l9(o.theme),a(),t(!0)},[e,t])}}function jfe({open:e,onClose:t}){const{settings:n,setSettings:r,saveToServer:i}=tn(),a=Sfe({open:e,settings:n}),o=Efe({setSettings:r,saveToServer:i}),l=()=>a.setToastMessage(null),u=_fe(a.localSettings,n);xfe(u),S.useEffect(()=>{l9(u)},[u]);const d=()=>{o.applyChanges(a.localSettings,a.order,()=>{a.setToastMessage(" "),a.setDirty(!1),t()})},h=b=>{const{destination:y,source:k}=b;if(!y||y.index===k.index)return;const w=Array.from(a.order),[_]=w.splice(k.index,1);w.splice(y.index,0,_),a.setOrder(w)},p=b=>{switch(b){case"theme":return g.jsx(Fa,{title:"",children:g.jsx(Tfe,{value:a.localSettings.theme??"dark",onChange:y=>a.updateSetting("theme",y)})});case"hiddenStem":return g.jsx(Fa,{title:"  ",children:g.jsx(Md,{value:a.localSettings.hiddenStem,onChange:y=>a.updateSetting("hiddenStem",y),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Fa,{title:" ",children:g.jsx(Md,{value:a.localSettings.hiddenStemMode,onChange:y=>a.updateSetting("hiddenStemMode",y),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Fa,{title:"",children:g.jsx(Md,{value:a.localSettings.sinsalMode,onChange:y=>a.updateSetting("sinsalMode",y),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Fa,{title:"",children:g.jsx(Md,{value:a.localSettings.sinsalBase,onChange:y=>a.updateSetting("sinsalBase",y),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Fa,{title:" ",children:g.jsx(No,{label:" ",checked:!!a.localSettings.sinsalBloom,onChange:y=>a.updateSetting("sinsalBloom",y)})});case"exposure":return g.jsx(Fa,{title:" ",children:g.jsx(Md,{value:a.localSettings.exposure,onChange:y=>a.updateSetting("exposure",y),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Fa,{title:" ",children:g.jsx(Md,{value:a.localSettings.charType,onChange:y=>a.updateSetting("charType",y),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Fa,{title:" ",children:g.jsx(No,{label:" ",checked:!!a.localSettings.thinEum,onChange:y=>a.updateSetting("thinEum",y)})});case"visibility":return g.jsx(Fa,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(No,{label:" ",checked:!!a.localSettings.showSipSin,onChange:y=>a.updateSetting("showSipSin",y)}),g.jsx(No,{label:" ",checked:!!a.localSettings.showSibiUnseong,onChange:y=>a.updateSetting("showSibiUnseong",y)}),g.jsx(No,{label:" ",checked:!!a.localSettings.showSibiSinsal,onChange:y=>a.updateSetting("showSibiSinsal",y)}),g.jsx(No,{label:" ",checked:!!a.localSettings.showNabeum,onChange:y=>a.updateSetting("showNabeum",y)}),g.jsx(No,{label:" BOX ",checked:!!a.localSettings.showEtcShinsal,onChange:y=>a.updateSetting("showEtcShinsal",y)}),g.jsx(No,{label:" BOX ",checked:!!a.localSettings.showRelationBox,onChange:y=>a.updateSetting("showRelationBox",y)}),g.jsx(No,{label:" BOX ",checked:!!a.localSettings.showPromptBox,onChange:y=>a.updateSetting("showPromptBox",y)})]})});case"difficultyMode":return g.jsx(Fa,{title:" UP ver.",children:g.jsx(No,{label:" UP ",checked:!!a.localSettings.difficultyMode,onChange:y=>a.updateSetting("difficultyMode",y)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:d,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]}),e&&g.jsx(Np,{onDragEnd:h,children:g.jsx(Of,{droppableId:"settings-sections",children:b=>g.jsxs("ul",{ref:b.innerRef,...b.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[a.order.map((y,k)=>g.jsx(Nf,{draggableId:y,index:k,children:w=>g.jsxs("li",{ref:w.innerRef,...w.draggableProps,...w.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none text-neutral-500",children:"::"}),g.jsx("div",{className:"flex-1 min-w-0",children:p(y)})]})},y)),b.placeholder]})})})]}),a.toastMessage&&g.jsx(F6,{message:a.toastMessage,onClose:l,ms:1800})]})}function Tfe({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Fa({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function Md({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:r=>r.stopPropagation(),onTouchStart:r=>r.stopPropagation(),children:n.map(r=>{const i=e===r.value;return g.jsx("button",{type:"button",onClick:()=>t(r.value),className:`px-3 py-1 text-sm transition-colors ${i?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:r.label},r.value)})})}function No({label:e,checked:t,onChange:n}){const r=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:r,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:r,type:"checkbox",checked:t,onChange:i=>n(i.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-indigo-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-indigo-600"})]})}function Afe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=En(h=>h.list),a=rc();S.useEffect(()=>{r(En.getState().loading);const h=En.subscribe(p=>{r(p.loading)});return()=>h()},[]);const o=()=>{if(!n){if(i.length===0){alert("    !");return}a("/iching")}},d={bottom:"var(--bottom-dock, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] px-2 box-border left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",style:d,children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(cm,{icon:g.jsx(rX,{size:22}),label:"",onClick:()=>a("/")}),g.jsx(cm,{icon:g.jsx(tX,{size:22}),label:"",onClick:()=>a("/couple")}),g.jsx(cm,{icon:g.jsx(u4,{size:22}),label:"FAQ",onClick:()=>a("/faq")}),g.jsx(cm,{icon:g.jsx(mX,{size:22}),label:"",onClick:()=>t(!0)}),g.jsx(cm,{icon:g.jsx(gX,{size:22}),label:"",onClick:o})]})}),g.jsx(jfe,{open:e,onClose:()=>t(!1)})]})}function cm({icon:e,label:t,onClick:n,disabled:r}){return g.jsxs("button",{onClick:n,disabled:r,className:"flex flex-1 flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}const c9=e=>e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t!==""),Gy=e=>c9(e).join(""),Nfe=()=>{const[e,t]=S.useState(()=>{if(typeof window>"u")return{};try{const u=localStorage.getItem(XD);return u?JSON.parse(u):{}}catch{return{}}});S.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(XD,JSON.stringify(e))}catch{}},[e]);const[n,r]=S.useState({}),[i,a]=S.useState(""),[o,l]=S.useState(()=>{const u=Ny(),d=Oy(),h=d.length?Pm(u,d):u;return Fd(h,e)});return S.useEffect(()=>{l(u=>{const d=Fd(u,e);return Gy(d)===Gy(u)?u:d})},[e]),S.useEffect(()=>{r(u=>{const d={...u};for(const h of o)d[h]===void 0&&(d[h]=!0);return d})},[o]),{folderFavMap:e,setFolderFavMap:t,folderOpenMap:n,setFolderOpenMap:r,newFolderName:i,setNewFolderName:a,orderedFolders:o,setOrderedFolders:l}},Ofe=({list:e,orderedFolders:t})=>{const{grouped:n,unassignedItems:r}=S.useMemo(()=>{const i=ax(e,t),a={};for(const o of t)a[o]=i[o]??[];return{grouped:a,unassignedItems:i[br]??[]}},[e,t]);return{grouped:n,unassignedItems:r}},um=async()=>{const{data:e,error:t}=await De.auth.getUser();return t||!e.user?null:e.user.id},Cfe=async e=>{const{data:t,error:n}=await De.from("user_custom_folders").select("folder_name").eq("user_id",e);return n&&n.code==="PGRST205"?{data:[],error:n,disabled:!0}:n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?a.folder_name.trim():"").filter(a=>a!==""),error:null}},Mfe=async e=>{const{data:t,error:n}=await De.from("user_folder_order").select("folder_name, sort_order").eq("user_id",e).order("sort_order",{ascending:!0,nullsFirst:!0});return n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?String(a.folder_name):"").filter(a=>a.trim()!==""),error:null}},Dfe=async(e,t)=>{const n=t.filter(i=>typeof i=="string"&&i.trim()!=="").map((i,a)=>({user_id:e,folder_name:i.trim(),sort_order:a+1,updated_at:new Date().toISOString()}));if(!n.length){const{error:i}=await De.from("user_folder_order").delete().eq("user_id",e);return{data:null,error:i}}const{error:r}=await De.from("user_folder_order").upsert(n,{onConflict:"user_id,folder_name"});return{data:null,error:r}},Pfe=async(e,t)=>{const{error:n}=await De.from("user_folder_order").delete().eq("user_id",e).eq("folder_name",t);return{data:null,error:n}},Rfe=async(e,t)=>{const{error:n}=await De.from("user_custom_folders").upsert({user_id:e,folder_name:t,updated_at:new Date().toISOString()});return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Lfe=async(e,t)=>{const{error:n}=await De.from("user_custom_folders").delete().eq("user_id",e).eq("folder_name",t);return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Ife=({folderFavMap:e,setFolderFavMap:t,setOrderedFolders:n,unsetFolderForFolder:r})=>{const[i,a]=S.useState(!1),o=S.useRef(e),l=S.useRef(!1),u=S.useRef(!1);S.useEffect(()=>{o.current=e},[e]),S.useEffect(()=>{(async()=>{if(i)return;const O=await um();if(!O)return;try{if(!u.current){const I=await Cfe(O);I.disabled&&(u.current=!0),I.error?console.error("load custom folders from server error:",I.error):I.data.length&&Wj(I.data)}}catch(I){console.error("load custom folders exception:",I)}const j=await Mfe(O);if(j.error){console.error("load folder order from server error:",j.error),a(!0);return}const C=Ny(),M=j.data,P=M.length?Pm(C,M):Pm(C,Oy());n(Fd(P,o.current)),M.length&&Hd(M),a(!0)})()},[i,n]);const d=S.useCallback(async T=>{const O=await um();if(!O)return;const j=await Dfe(O,T);j.error&&console.error("save folder order to server error:",j.error)},[]),h=S.useRef(null),p=S.useRef(null),b=S.useRef(""),y=S.useCallback((T,O)=>{const j=c9(T),C=Gy(j);if(C&&C===b.current)return;h.current=j;const M=async()=>{const P=h.current;if(h.current=null,!P)return;const I=Gy(P);I&&I===b.current||(await d(P),b.current=I)};if(O?.immediate){p.current&&(window.clearTimeout(p.current),p.current=null),M();return}p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>{p.current=null,M()},300)},[d]);S.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=null);const T=h.current;h.current=null,T&&T.length&&d(T)},[d]),S.useEffect(()=>{if(typeof window>"u")return;const T=()=>{if(l.current){l.current=!1;return}const O=Ny(),j=Oy(),C=j.length?Pm(O,j):O;n(Fd(C,o.current))};return window.addEventListener(Xl,T),()=>window.removeEventListener(Xl,T)},[n]);const k=S.useCallback(T=>{const{source:O,destination:j,type:C}=T;if(!j||C!=="FOLDER")return;const M=O.index,P=j.index;M!==P&&n(I=>{if(!I.length)return I;const U=[...I],[V]=U.splice(M,1);U.splice(P,0,V);const q=Fd(U,o.current);return l.current=!0,Hd(q),y(q),q})},[y,n]),w=S.useCallback(T=>{const O=T.trim();!O||O===kn||(U6(O),(async()=>{if(u.current)return;const j=await um();if(!j)return;const C=await Rfe(j,O);C.disabled&&(u.current=!0),C.error&&console.error("save custom folder error:",C.error)})(),n(j=>{if(j.includes(O))return j;const C=[...j,O],M=Fd(C,o.current);return Hd(M),y(M,{immediate:!0}),M}))},[y,n]),_=S.useCallback(T=>{r(T),t(O=>{const j={...O};return delete j[T],j}),n(O=>{const j=O.filter(C=>C!==T);return Hd(j),y(j,{immediate:!0}),(async()=>{const C=await um();if(!C)return;const M=await Pfe(C,T);M.error&&console.error("delete folder order entry error:",M.error)})(),j}),$6.includes(T)?nie(T):(tie(T),(async()=>{if(u.current)return;const O=await um();if(!O)return;const j=await Lfe(O,T);j.disabled&&(u.current=!0),j.error&&console.error("delete custom folder error:",j.error)})())},[y,t,n,r]);return{handleDragEnd:k,createFolder:w,deleteFolder:_,UNASSIGNED_LABEL:kn}};function $fe(e,t){const n=Nfe(),r=Ofe({list:e,orderedFolders:n.orderedFolders}),i=Ife({folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,setOrderedFolders:n.setOrderedFolders,unsetFolderForFolder:t.unsetFolderForFolder});return{folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,folderOpenMap:n.folderOpenMap,setFolderOpenMap:n.setFolderOpenMap,newFolderName:n.newFolderName,setNewFolderName:n.setNewFolderName,orderedFolders:n.orderedFolders,grouped:r.grouped,unassignedItems:r.unassignedItems,handleDragEnd:i.handleDragEnd,createFolder:i.createFolder,deleteFolder:i.deleteFolder,UNASSIGNED_LABEL:i.UNASSIGNED_LABEL}}function Bfe({onClose:e,onAddNew:t,isLoggedIn:n,onLogin:r}){const i=En(p=>p.list.length),o=bn(p=>p.canAddMyeongsik)(i),l=!o.ok,u=l?o.message:"",d=()=>{if(l){ma(u||"  ");return}t()},h=async()=>{const{error:p}=await De.auth.signOut();if(p){console.error(p),ma(" ");return}ma(" ")};return g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h2",{className:"text-lg font-bold",children:" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n?g.jsxs("button",{type:"button",onClick:h,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(lX,{size:16})," "]}):g.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(d4,{size:16})," "]}),g.jsxs("button",{type:"button",onClick:d,disabled:l,title:u,className:l?"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-80":"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer bg-purple-600 hover:bg-purple-500 text-white",children:[g.jsx(fX,{size:16}),"  ",l?"":""]}),g.jsx("button",{type:"button",onClick:e,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900","aria-label":" ",title:"",children:g.jsx(yy,{size:22})})]})]})}function zfe({search:e,setSearch:t,searchMode:n,setSearchMode:r,isFiltering:i,totalMatches:a}){return g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"h-30 text-xs rounded px-2 py-1 cursor-pointer bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40",children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:e,onChange:o=>t(o.target.value),placeholder:n==="name"?" ":n==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:"w-full pl-7 pr-8 py-1 h-30 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-[16px] text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-amber-500/40"}),e&&g.jsx("button",{type:"button",onClick:()=>t(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(QZ,{size:16})})]}),i&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[a,""]})]})})}function Ufe({newFolderName:e,setNewFolderName:t,onCreate:n,isFiltering:r,totalCount:i,collapsed:a,onToggleCollapse:o}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),placeholder:"  ",className:"flex-1 w-[60%] px-2 py-1 rounded h-30 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500",onClick:l=>l.stopPropagation()}),g.jsx("button",{type:"button",className:"px-3 rounded h-30 text-sm cursor-pointer bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700",onClick:l=>{l.stopPropagation(),n()},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-1",children:r?"   .":"/      ."}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"  "}),g.jsx("span",{className:"mx-1",children:""}),g.jsxs("span",{className:"font-semibold text-amber-500 dark:text-amber-600",children:[i,""]})]}),g.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-xs text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:a?"  ":"  "})]}),g.jsx("div",{className:"text-xs mb-2 text-neutral-900 dark:text-neutral-100",children:"         !"})]})}function yR({droppableId:e,items:t,isDropDisabled:n,className:r}){return g.jsx(Of,{droppableId:e,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:n,children:i=>g.jsx("div",{ref:i.innerRef,...i.droppableProps,className:r,children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[t,i.placeholder]})})})}function Ffe({folderName:e,folderIndex:t,isOpen:n,isFavorite:r,itemCount:i,isDragDisabled:a,onToggleOpen:o,onToggleFavorite:l,onDelete:u,inner:d}){return g.jsx(Nf,{draggableId:`folder-${e}`,index:t,isDragDisabled:a,children:h=>g.jsxs("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:"flex items-center justify-between px-2 py-2 rounded bg-neutral-50 dark:bg-neutral-900/70 border border-neutral-200 dark:border-neutral-800 text-neutral-800 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[n?g.jsx(ZZ,{size:16}):g.jsx(WZ,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:e})]}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:`p-1 rounded cursor-pointer ${r?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":"  ",title:r?" ":"",children:g.jsx(f4,{size:16,fill:r?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[i,""]}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),u()},className:"px-2 py-1 rounded text-xs cursor-pointer border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30",children:""})]})]}),n?d:null]})},`folder-${e}`)}const Hfe=()=>({canManage:bn(()=>!0)}),ip="";function Gfe(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${r} ${i} ${t.slice(0,2)}:${t.slice(2,4)}`:t===ip?`${n} ${r} ${i} ( )`:`${n} ${r} ${i}`}function Yfe(e){if(!e||e==="")return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=o=>t.find(l=>o.some(u=>l.endsWith(u))),r=n(["","","","",""]),i=n(["","","","","",""]);return t.length===1||!n(["","","","","","","","","","",""])&&!n(["","","","","",""])?e:r&&i?`${r} ${i}`:r||e}function vR(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function qfe(e,t){const n=Cf(e),r=Cp(t);if(!n||!r)return null;const i=new Date(n.y,n.m-1,n.d,r.hh,r.mm,0,0),a=new Date(i.getTime()-3600*1e3),o=String(a.getFullYear()).padStart(4,"0"),l=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0"),h=String(a.getMinutes()).padStart(2,"0");return{birthDay:`${o}${l}${u}`,birthTime:`${d}${h}`}}function Kfe(e){const t=vR(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const r=Number(n.slice(0,4)),i=Number(n.slice(4,6)),a=Number(n.slice(6,8));if(!Xm(r,i,a)||!e.birthTime||e.birthTime===ip)return t;const o=qfe(n,e.birthTime);if(!o)return t;const l=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(l.getTime()))return t;const u=new Date(l.getTime()-3600*1e3),d=Uj({...e,birthDay:o.birthDay,birthTime:o.birthTime,corrected:u});return vR({...e,...d})}function Wfe(e){const t=String(e??"").trim();if(/^\d{8}$/.test(t)){const r=Number(t.slice(0,4));return Number.isFinite(r)?r:NaN}const n=new Date(t);return Number.isNaN(n.getTime())?NaN:n.getFullYear()}function Vfe(e,t){return Number.isNaN(e)?0:t-e+1}function Zfe(e){return{...e,transition:e?.transform?"transform 0.15s ease":"none"}}function Xfe(e){return e===""?"":e===""?"":e??""}function Jfe(e){const t=e.trim(),n=/^(\d{1,2}):(\d{2})$/.exec(t);if(!n)return null;const r=Number(n[1]),i=Number(n[2]);if(!Number.isFinite(r)||!Number.isFinite(i)||r<0||r>23||i<0||i>59)return null;const a=r-1<0?23:r-1;return`${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function Qfe(e,t){if(t)return ip;const n=String(e.birthDay??"").trim(),r=String(e.correctedLocal??"").trim(),i=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??"")),a=!Number.isNaN(i.getTime()),o=r||(a?T2(i):"");if(!/^\d{8}$/.test(n))return o;const l=Number(n.slice(0,4)),u=Number(n.slice(4,6)),d=Number(n.slice(6,8));if(!Xm(l,u,d)||!e.birthTime||e.birthTime===ip)return o;if(a){const p=new Date(i.getTime()-36e5);return T2(p)}return Jfe(r)??o}function ehe({m:e,memoOpen:t,isDragDisabled:n}){const r=n,i=`item:${e.id}`,a=Kfe(e),o=Yfe(e.birthPlace?.name),l=e.relationship?.trim()?e.relationship:" ",u=Xfe(e.gender),d=!e.birthTime||e.birthTime===ip,h=Qfe(e,d),p=!!(o||h),b=Gfe(e.birthDay,e.birthTime),y=e.calendarType==="lunar"?"":"",k=Wfe(e.birthDay),w=Vfe(k,new Date().getFullYear()),_=!!(e.memo&&e.memo.trim()!==""),T=t?" ":" ",O=e.mingSikType??"/",j=r?" ":"::",C=e.favorite?" ":"";return{keyId:i,dragDisabled:r,dragHandleLabel:j,ganji:a,placeDisplay:o,relationshipLabel:l,genderLabel:u,birthDisplay:b,calendarLabel:y,correctedLabel:h,showMetaLine:p,showMemo:_,memoToggleLabel:T,age:w,mingSikTypeValue:O,favoriteLabel:C,editLabel:"",deleteLabel:"",getDragStyle:Zfe}}const the=({m:e,unassignedLabel:t,onToggleMemo:n,onChangeFolder:r,onChangeMingSikType:i,onView:a,onEdit:o,onDelete:l,onToggleFavorite:u})=>{const d=S.useCallback(_=>{_?.stopPropagation(),n(e.id)},[n,e.id]),h=S.useCallback(_=>{_?.stopPropagation(),a(e)},[a,e]),p=S.useCallback(_=>{_?.stopPropagation(),o(e)},[o,e]),b=S.useCallback(_=>{_?.stopPropagation(),l(e)},[l,e]),y=S.useCallback(_=>{_?.stopPropagation(),u(e.id)},[u,e.id]),k=S.useCallback(_=>{const T=_===t?void 0:_;r(e.id,T)},[r,e.id,t]),w=S.useCallback(_=>{i(e,_)},[i,e]);return{handleToggleMemo:d,handleView:h,handleEdit:p,handleDelete:b,handleToggleFavorite:y,handleFolderChange:k,handleMingSikTypeChange:w}};function xR({m:e,index:t,orderedFolders:n,unassignedLabel:r,isDragDisabled:i,collapsed:a,memoOpen:o,onToggleMemo:l,onToggleCollapsed:u,onChangeFolder:d,onChangeMingSikType:h,onView:p,onEdit:b,onDelete:y,onToggleFavorite:k}){Hfe();const w=ehe({m:e,memoOpen:o,isDragDisabled:i}),_=a,T=the({m:e,unassignedLabel:r,onToggleMemo:l,onChangeFolder:d,onChangeMingSikType:h,onView:p,onEdit:b,onDelete:y,onToggleFavorite:k});return g.jsx(Nf,{draggableId:w.keyId,index:t,isDragDisabled:i,children:O=>g.jsx("li",{ref:O.innerRef,...O.draggableProps,...O.dragHandleProps,style:O.draggableProps.style,className:`list-none select-none rounded-xl border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-neutral-100 ${i?"cursor-default":"cursor-grab active:cursor-grabbing"}`,onClick:()=>{_&&T.handleView()},children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[e.name," (",w.age,"",w.genderLabel,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 text-nowrap",children:w.relationshipLabel}),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("span",{className:"opacity-50 select-none",children:w.dragHandleLabel}),g.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u()},className:"text-xs px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:_?" ":" "})]})]}),!_&&g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[w.birthDisplay,", ",w.calendarLabel]}),!_&&w.showMetaLine&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[w.placeDisplay,w.correctedLabel&&g.jsxs("span",{className:"opacity-70",children:["  ",w.correctedLabel]})]}),w.ganji&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:w.ganji}),!_&&w.showMemo&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:T.handleToggleMemo,children:w.memoToggleLabel}),g.jsx("div",{className:o?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:e.memo})]}),!_&&g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:e.folder??r,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleFolderChange(j.target.value)},children:[r,...n].map(j=>g.jsx("option",{value:j,children:j},j))}),g.jsxs("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:w.mingSikTypeValue,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleMingSikTypeChange(j.target.value)},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),!_&&g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{type:"button",onClick:T.handleView,className:"px-3 py-1 rounded text-white text-sm cursor-pointer bg-indigo-600 hover:bg-indigo-500",children:""}),g.jsx("button",{type:"button",title:"",onClick:T.handleEdit,className:"px-3 py-1 rounded text-white text-sm bg-amber-600 hover:bg-amber-500 cursor-pointer",children:w.editLabel}),g.jsx("button",{type:"button",title:"",onClick:T.handleDelete,className:"px-3 py-1 rounded text-white text-sm bg-red-600 hover:bg-red-500 cursor-pointer",children:w.deleteLabel}),g.jsx("button",{type:"button",title:w.favoriteLabel,onClick:T.handleToggleFavorite,className:`ml-auto p-1 rounded cursor-pointer ${e.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":w.favoriteLabel,children:g.jsx(f4,{size:16,fill:e.favorite?"currentColor":"none"})})]})]})})},w.keyId)}const nhe="list:__unassigned__",rhe=e=>`list:${e}`,wR=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},ihe=({search:e,searchMode:t,orderedFolders:n,grouped:r,unassignedItems:i})=>{const a=D6(e),{filteredUnassigned:o,filteredGrouped:l,totalMatches:u}=S.useMemo(()=>Ire({search:e,searchMode:t,orderedFolders:n,unassignedItems:i,grouped:r}),[e,t,n,i,r]);return{isFiltering:a,filteredUnassigned:o,filteredGrouped:l,totalMatches:u}},ahe=({list:e,orderedFolders:t})=>{const[n,r]=S.useState(""),[i,a]=S.useState("name"),[o,l]=S.useState({}),u=S.useRef(null),d=S.useRef(null);return S.useEffect(()=>{if(d.current==null)return;const b=u.current;b&&(b.scrollTop=d.current,d.current=null)},[e,t]),{search:n,setSearch:r,searchMode:i,setSearchMode:a,memoOpenMap:o,toggleMemo:b=>{l(y=>({...y,[b]:!y[b]}))},scrollRef:u,stashScrollTop:()=>{const b=u.current;b&&(d.current=b.scrollTop)}}},_R=()=>{typeof window>"u"||window.dispatchEvent(new Event(Xl))},ohe=({list:e,orderedFolders:t,isFiltering:n,handleFolderDragEnd:r,moveItemByDnD:i,applyNextList:a,update:o,remove:l,onView:u,onClose:d,onDeleteView:h,folderFavMap:p,setFolderFavMap:b,setFolderOpenMap:y,createFolder:k,deleteFolder:w,newFolderName:_,setNewFolderName:T,stashScrollTop:O})=>{const j=S.useCallback((B,W)=>{const{nextList:Z}=Ore({list:e,orderedFolders:t,targetId:B,nextFolder:W??""});a(Z)},[e,t,a]),C=S.useCallback((B,W)=>{const Z={...B,mingSikType:W},X=Uj(Z);o(B.id,{mingSikType:W,...X}),u({...Z,...X}),d()},[o,u,d]),M=S.useCallback(B=>{u(B),d()},[u,d]),P=S.useCallback(B=>{confirm(`'${B.name}'  ?`)&&(l(B.id),h&&h())},[l,h]),I=S.useCallback(()=>{const B=_.trim();B&&(k(B),T(""),_R())},[_,k,T]),U=S.useCallback(B=>{if(p[B]){alert(`'${B}'   .
   .`);return}confirm(`'${B}'  ?
(   )`)&&(w(B),_R())},[p,w]),V=S.useCallback(B=>{y(W=>({...W,[B]:!W[B]}))},[y]),q=S.useCallback(B=>{b(W=>({...W,[B]:!W[B]}))},[b]);return{handleDrop:S.useCallback(B=>{const{type:W,source:Z,destination:X,draggableId:G}=B;if(X&&!n){if(O(),W==="FOLDER"){r(B);return}if(W==="ITEM"){if(!G.replace(/^item:/,""))return;const Q=wR(Z.droppableId),oe=wR(X.droppableId);i({orderedFolders:t,sourceFolder:Q,sourceIndex:Z.index,destinationFolder:oe,destinationIndex:X.index})}}},[n,O,r,i,t]),changeFolder:j,changeMingSikType:C,viewAndClose:M,requestDelete:P,createFolderAndNotify:I,requestDeleteFolder:U,toggleFolderOpen:V,toggleFolderFavorite:q}};function she({open:e,onClose:t,onView:n,onAddNew:r,onEdit:i,onDeleteView:a,isLoggedIn:o}){const[l,u]=S.useState(!1),d=tn(Ee=>Ee.settings),h=tn(Ee=>Ee.setKey),p=tn(Ee=>Ee.saveToServer),{list:b,remove:y,update:k,moveItemByDnD:w,toggleFavoriteWithReorder:_,unsetFolderForFolder:T,applyNextList:O}=En(),{folderFavMap:j,setFolderFavMap:C,folderOpenMap:M,setFolderOpenMap:P,newFolderName:I,setNewFolderName:U,orderedFolders:V,grouped:q,unassignedItems:H,handleDragEnd:B,createFolder:W,deleteFolder:Z,UNASSIGNED_LABEL:X}=$fe(b,{unsetFolderForFolder:T}),G=ahe({list:b,orderedFolders:V}),J=d.sidebarCardsCollapsed,Q=d.sidebarCardCollapsedMap,oe=Ee=>Q[Ee]??J,le=Ee=>{h("sidebarCardCollapsedMap",Ee),p()},z=Ee=>{h("sidebarCardsCollapsed",Ee);const he=b.reduce((Le,Ie)=>(Le[Ie.id]=Ee,Le),{});le(he)},K=Ee=>{le({...Q,[Ee]:!(Q[Ee]??!0)})},{isFiltering:ne,filteredUnassigned:re,filteredGrouped:ce,totalMatches:ue}=ihe({search:G.search,searchMode:G.searchMode,orderedFolders:V,unassignedItems:H,grouped:q}),ge=ohe({list:b,applyNextList:O,orderedFolders:V,isFiltering:ne,handleFolderDragEnd:B,moveItemByDnD:w,update:k,remove:y,onView:n,onClose:t,onDeleteView:a,folderFavMap:j,setFolderFavMap:C,setFolderOpenMap:P,createFolder:W,deleteFolder:Z,newFolderName:I,setNewFolderName:U,stashScrollTop:G.stashScrollTop}),ke=()=>{u(!0)},ie=Ee=>{Du.flushSync(()=>{u(!1),ge.handleDrop(Ee)})},Ae=()=>{Es.getState().openWith("HEADER")};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-100 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-101 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsx(Bfe,{onClose:t,onAddNew:()=>{r(),t()},onLogin:()=>{Ae()},isLoggedIn:o}),g.jsx(Np,{onBeforeDragStart:ke,onDragEnd:ie,children:g.jsxs("div",{ref:G.scrollRef,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:l?"none":"pan-y"},children:[g.jsxs(g.Fragment,{children:[g.jsx(zfe,{search:G.search,setSearch:G.setSearch,searchMode:G.searchMode,setSearchMode:G.setSearchMode,isFiltering:ne,totalMatches:ue}),g.jsx(Ufe,{newFolderName:I,setNewFolderName:U,isFiltering:ne,onCreate:ge.createFolderAndNotify,totalCount:b.length,collapsed:J,onToggleCollapse:()=>z(!J)})]}),g.jsx(yR,{droppableId:nhe,isDropDisabled:ne,className:"mb-6",items:re.map((Ee,he)=>g.jsx(xR,{m:Ee,index:he,orderedFolders:V,unassignedLabel:X,isDragDisabled:ne,collapsed:oe(Ee.id),memoOpen:!!G.memoOpenMap[Ee.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>K(Ee.id),onChangeFolder:ge.changeFolder,onChangeMingSikType:ge.changeMingSikType,onView:ge.viewAndClose,onEdit:Le=>i(Le),onDelete:ge.requestDelete,onToggleFavorite:Le=>void _(Le,V)},Ee.id))}),g.jsx(Of,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ne,children:Ee=>g.jsxs("div",{ref:Ee.innerRef,...Ee.droppableProps,children:[V.map((he,Le)=>{const Ie=rhe(he),tt=ce[he]||[],Ne=!!M[he],Be=!!j[he];return g.jsx(Ffe,{folderName:he,folderIndex:Le,isOpen:Ne,isFavorite:Be,itemCount:tt.length,isDragDisabled:ne,onToggleOpen:()=>ge.toggleFolderOpen(he),onToggleFavorite:()=>ge.toggleFolderFavorite(he),onDelete:()=>ge.requestDeleteFolder(he),inner:g.jsx(yR,{droppableId:Ie,isDropDisabled:ne,className:"mt-2",items:tt.map((Ue,nt)=>g.jsx(xR,{m:Ue,index:nt,orderedFolders:V,unassignedLabel:X,isDragDisabled:ne,collapsed:oe(Ue.id),memoOpen:!!G.memoOpenMap[Ue.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>K(Ue.id),onChangeFolder:ge.changeFolder,onChangeMingSikType:ge.changeMingSikType,onView:ge.viewAndClose,onEdit:ut=>i(ut),onDelete:ge.requestDelete,onToggleFavorite:ut=>void _(ut,V)},Ue.id))})},`folder-${he}`)}),Ee.placeholder]})})]})})]})]})}function SR(e){return{...e,calendarType:e.calendarType??"solar"}}function kR(e){return!e.birthTime||e.birthTime===""}function ER(e){return!e.birthPlace||e.birthPlace.name===""}function lhe(e,t){if(t!=="lunar"||!e||e.length!==8)return null;try{const n=Number(e.slice(0,4)),r=Number(e.slice(4,6)),i=Number(e.slice(6,8)),a=Zi(n,r,i),o=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`  ${a.getFullYear()}-${o}-${l}`}catch(n){const r=n instanceof Error?n.message:void 0;return`  ${r?`: ${r}`:""}`}}const u9="ms_folders";function che(){try{const e=JSON.parse(localStorage.getItem(u9)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function uhe(e){localStorage.setItem(u9,JSON.stringify(e))}function dhe(e){const[t,n]=S.useState(!1),[r,i]=S.useState(()=>SR(e)),[a,o]=S.useState(kR(e)),[l,u]=S.useState(ER(e)),[d,h]=S.useState([]);return S.useEffect(()=>{h(che())},[]),{isEditing:t,setIsEditing:n,form:r,setForm:i,updateForm:(y,k)=>{i(w=>({...w,[y]:k}))},unknownTime:a,setUnknownTime:o,unknownPlace:l,setUnknownPlace:u,customFolders:d,setCustomFolders:h,resetForm:()=>{i(SR(e)),o(kR(e)),u(ER(e))}}}const d9=["","","","","",""];function fhe(e,t){const n=Array.from(new Set(e.map(a=>a.folder).filter(Boolean))),r=new Set([...d9,...t,...n]),i=Array.from(r).sort((a,o)=>a.localeCompare(o));return[kn,...i]}function hhe({list:e,customFolders:t,form:n}){const r=S.useMemo(()=>fhe(e,t),[e,t]),i=S.useMemo(()=>lhe(n.birthDay,n.calendarType),[n.birthDay,n.calendarType]);return{folderOptions:r,lunarPreview:i}}function mhe(e,t,n){if(!e.name||e.name.trim()==="")return"";const r=Fj(e.birthDay??"",e.calendarType??"solar");if(!r.ok)return r.message;const i=Hj(e.birthTime??"",t);return i.ok?!n&&!e.birthPlace?"":null:i.message}function phe({item:e,form:t,unknownTime:n,unknownPlace:r,customFolders:i,setCustomFolders:a,update:o,remove:l,onClose:u,onSaved:d}){return{save:()=>{const b=mhe(t,n,r);if(b){alert(b);return}const y=vu(t.folder===kn?void 0:t.folder),k=A6({id:e.id,name:t.name,birthDay:t.birthDay??"",calendarType:t.calendarType??"solar",birthTime:t.birthTime,unknownTime:n,gender:t.gender,birthPlace:t.birthPlace,unknownPlace:r,relationship:t.relationship,memo:t.memo,folder:y,mingSikType:t.mingSikType,favorite:e.favorite,deletedAt:e.deletedAt??null,sortOrder:e.sortOrder,dateObj:e.dateObj},{requireName:!0});if(!k.ok){alert(k.message);return}const w={...e,...k.value};if(w.folder&&!d9.includes(w.folder)&&!i.includes(w.folder)){const _=[...i,w.folder];a(_),uhe(_)}o(e.id,w),d?.(),u?.()},removeThis:()=>{confirm(`'${e.name}'  ?`)&&l(e.id)}}}const Y1="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",ghe="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",bhe="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",xs="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",yhe="text-xs text-neutral-500 dark:text-neutral-400",pb="accent-violet-600 dark:accent-violet-400",jR="accent-violet-600 dark:accent-violet-400",mx="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",vhe=`${mx} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,xhe=`${mx} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,TR=`${mx} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,whe=`${mx} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function _he({item:e,onClose:t}){const{list:n,update:r,remove:i}=En(),a=dhe(e),o=hhe({list:n,customFolders:a.customFolders,form:a.form}),l=phe({item:e,form:a.form,unknownTime:a.unknownTime,unknownPlace:a.unknownPlace,customFolders:a.customFolders,setCustomFolders:a.setCustomFolders,update:r,remove:i,onClose:t,onSaved:()=>a.setIsEditing(!1)});return a.isEditing?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:""}),g.jsx("input",{className:Y1,value:a.form.name||"",onChange:u=>a.updateForm("name",u.target.value),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:xs,children:" (YYYYMMDD)"}),g.jsx("input",{className:Y1,value:a.form.birthDay||"",onChange:u=>a.updateForm("birthDay",u.target.value.replace(/\D/g,"").slice(0,8)),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"calendarType",checked:a.form.calendarType==="solar",onChange:()=>a.updateForm("calendarType","solar"),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"calendarType",checked:a.form.calendarType==="lunar",onChange:()=>a.updateForm("calendarType","lunar"),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),o.lunarPreview&&g.jsx("span",{className:yhe,children:o.lunarPreview})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:"  (HHMM)"}),g.jsx("input",{className:`${Y1} disabled:opacity-50`,value:a.unknownTime?"":a.form.birthTime||"",onChange:u=>a.updateForm("birthTime",u.target.value.replace(/\D/g,"").slice(0,4)),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:a.unknownTime}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:jR,checked:a.unknownTime,onChange:u=>a.setUnknownTime(u.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:xs,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(u=>{const d=`editor_ming_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"mingSikType",checked:(a.form.mingSikType??"")===u,onChange:()=>a.updateForm("mingSikType",u),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(u=>{const d=`editor_gender_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"gender",value:u,checked:a.form.gender===u,onChange:h=>a.updateForm("gender",h.target.value),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:" "}),g.jsx(h4,{onSelect:u=>a.updateForm("birthPlace",u),value:a.unknownPlace?"":a.form.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:jR,checked:a.unknownPlace,onChange:u=>a.setUnknownPlace(u.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:""}),g.jsx(I6,{value:a.form.relationship||"",onChange:u=>a.updateForm("relationship",u)})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:""}),g.jsx("select",{className:ghe,value:a.form.folder??kn,onChange:u=>{const d=u.target.value;d===kn?a.updateForm("folder",void 0):a.updateForm("folder",d)},children:o.folderOptions.map(u=>g.jsx("option",{value:u===kn?kn:u,children:u},u))})]}),g.jsxs("div",{children:[g.jsx("label",{className:xs,children:""}),g.jsx("textarea",{className:bhe,value:a.form.memo||"",onChange:u=>a.updateForm("memo",u.target.value),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:TR,onClick:()=>{a.resetForm(),a.setIsEditing(!1)},children:""}),g.jsx("button",{className:whe,onClick:l.save,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:vhe,onClick:()=>a.setIsEditing(!0),children:""}),g.jsx("button",{className:xhe,onClick:l.removeThis,children:""}),t&&g.jsx("button",{className:TR,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??kn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function She({children:e}){const t=Hr(),[n,r]=S.useState(!1),i=[{label:" ",href:"/admin/dashboard"},{label:"  ",href:"/admin/user"},{label:"  ",href:"/admin/logs"}];return g.jsxs("div",{className:"flex min-h-screen bg-neutral-950 text-white",children:[g.jsxs("aside",{className:`
          fixed top-0 left-0 h-full bg-neutral-900 border-r border-neutral-800 
          transition-all z-50

          desk:w-60 desk:translate-x-0
          ${n?"w-60 translate-x-0":"-translate-x-full"}
        `,children:[g.jsxs("div",{className:"p-4 font-bold text-lg flex items-center justify-between",children:[g.jsx("span",{className:"desk:block hidden",children:""}),g.jsx("button",{className:"desk:hidden text-neutral-400 hover:text-white",onClick:()=>r(!1),children:""})]}),g.jsx("nav",{className:"mt-4 flex flex-col gap-1 px-2",children:i.map(a=>{const o=t.pathname.startsWith(a.href);return g.jsx("a",{href:a.href,className:`
                  block px-3 py-2 rounded-md text-sm
                  ${o?"bg-neutral-800 text-yellow-400":"text-neutral-300 hover:bg-neutral-800"}
                `,children:a.label},a.href)})})]}),g.jsxs("main",{className:"flex-1 flex flex-col desk:ml-60",children:[g.jsxs("header",{className:"h-14 border-b border-neutral-800 bg-neutral-900 flex items-center px-4 justify-between",children:[g.jsx("button",{className:"desk:hidden text-neutral-300",onClick:()=>r(!0),children:""}),g.jsx("div",{className:"font-semibold",children:" "}),g.jsx("button",{className:"text-sm text-neutral-400 hover:text-white cursor-pointer",onClick:()=>window.location.href="/",children:" "})]}),g.jsx("div",{className:"flex-1",children:e})]})]})}function khe(){const[e,t]=S.useState(null),[n,r]=S.useState(!0);return S.useEffect(()=>{(async()=>{const{data:a}=await De.auth.getUser(),o=a.user?.id;if(!o){t(null),r(!1);return}const{data:l}=await De.from("admin_roles").select("role").eq("user_id",o).maybeSingle();t(l?.role??null),r(!1)})()},[]),{role:e,loading:n}}function Ehe({allow:e,children:t}){const{role:n,loading:r}=khe();return r?g.jsx("div",{className:"text-white p-6",children:"Checking permission..."}):!n||!e.includes(n)?g.jsx("div",{className:"text-red-400 p-6",children:" ."}):g.jsx(g.Fragment,{children:t})}function f9(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=f9(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function un(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=f9(e))&&(r&&(r+=" "),r+=t);return r}var jhe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yT(e){if(typeof e!="string")return!1;var t=jhe;return t.includes(e)}var The=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ahe=new Set(The);function h9(e){return typeof e!="string"?!1:Ahe.has(e)}function m9(e){return typeof e=="string"&&e.startsWith("data-")}function oo(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(h9(n)||m9(n))&&(t[n]=e[n]);return t}function px(e){if(e==null)return null;if(S.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return oo(t)}return typeof e=="object"&&!Array.isArray(e)?oo(e):null}function ka(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(h9(n)||m9(n)||yT(n))&&(t[n]=e[n]);return t}function Nhe(e){return e==null?null:S.isValidElement(e)?ka(e.props):typeof e=="object"&&!Array.isArray(e)?ka(e):null}var Ohe=["children","width","height","viewBox","className","style","title","desc"];function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F2.apply(null,arguments)}function Che(e,t){if(e==null)return{};var n,r,i=Mhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var p9=S.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:l,title:u,desc:d}=e,h=Che(e,Ohe),p=a||{width:r,height:i,x:0,y:0},b=un("recharts-surface",o);return S.createElement("svg",F2({},ka(h),{className:b,width:r,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),S.createElement("title",null,u),S.createElement("desc",null,d),n)}),Dhe=["children","className"];function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(null,arguments)}function Phe(e,t){if(e==null)return{};var n,r,i=Rhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fo=S.forwardRef((e,t)=>{var{children:n,className:r}=e,i=Phe(e,Dhe),a=un("recharts-layer",r);return S.createElement("g",H2({className:a},ka(i),{ref:t}),n)}),Lhe=S.createContext(null);function Dn(e){return function(){return e}}const G2=Math.PI,Y2=2*G2,au=1e-6,Ihe=Y2-au;function g9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $he(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return g9;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Bhe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?g9:$he(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-t,d=i-n,h=o-t,p=l-n,b=h*h+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>au)if(!(Math.abs(p*u-d*h)>au)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=r-o,k=i-l,w=u*u+d*d,_=y*y+k*k,T=Math.sqrt(w),O=Math.sqrt(b),j=a*Math.tan((G2-Math.acos((w+b-_)/(2*T*O)))/2),C=j/O,M=j/T;Math.abs(C-1)>au&&this._append`L${t+C*h},${n+C*p}`,this._append`A${a},${a},0,0,${+(p*y>h*k)},${this._x1=t+M*u},${this._y1=n+M*d}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=t+l,h=n+u,p=1^o,b=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>au||Math.abs(this._y1-h)>au)&&this._append`L${d},${h}`,r&&(b<0&&(b=b%Y2+Y2),b>Ihe?this._append`A${r},${r},0,1,${p},${t-l},${n-u}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:b>au&&this._append`A${r},${r},0,${+(b>=G2)},${p},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function b9(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Bhe(t)}function vT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function y9(e){this._context=e}y9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gx(e){return new y9(e)}function v9(e){return e[0]}function x9(e){return e[1]}function w9(e,t){var n=Dn(!0),r=null,i=gx,a=null,o=b9(l);e=typeof e=="function"?e:e===void 0?v9:Dn(e),t=typeof t=="function"?t:t===void 0?x9:Dn(t);function l(u){var d,h=(u=vT(u)).length,p,b=!1,y;for(r==null&&(a=i(y=o())),d=0;d<=h;++d)!(d<h&&n(p=u[d],d,u))===b&&((b=!b)?a.lineStart():a.lineEnd()),b&&a.point(+e(p,d,u),+t(p,d,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Dn(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Dn(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function gb(e,t,n){var r=null,i=Dn(!0),a=null,o=gx,l=null,u=b9(d);e=typeof e=="function"?e:e===void 0?v9:Dn(+e),t=typeof t=="function"?t:Dn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?x9:Dn(+n);function d(p){var b,y,k,w=(p=vT(p)).length,_,T=!1,O,j=new Array(w),C=new Array(w);for(a==null&&(l=o(O=u())),b=0;b<=w;++b){if(!(b<w&&i(_=p[b],b,p))===T)if(T=!T)y=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),k=b-1;k>=y;--k)l.point(j[k],C[k]);l.lineEnd(),l.areaEnd()}T&&(j[b]=+e(_,b,p),C[b]=+t(_,b,p),l.point(r?+r(_,b,p):j[b],n?+n(_,b,p):C[b]))}if(O)return l=null,O+""||null}function h(){return w9().defined(i).curve(o).context(a)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Dn(+p),r=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Dn(+p),d):e},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Dn(+p),d):r},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Dn(+p),n=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Dn(+p),d):t},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dn(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Dn(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,a!=null&&(l=o(a)),d):o},d.context=function(p){return arguments.length?(p==null?a=l=null:l=o(a=p),d):a},d}class _9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function zhe(e){return new _9(e,!0)}function Uhe(e){return new _9(e,!1)}function Yy(){}function qy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function S9(e){this._context=e}S9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fhe(e){return new S9(e)}function k9(e){this._context=e}k9.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hhe(e){return new k9(e)}function E9(e){this._context=e}E9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ghe(e){return new E9(e)}function j9(e){this._context=e}j9.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Yhe(e){return new j9(e)}function AR(e){return e<0?-1:1}function NR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(AR(a)+AR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function OR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function q1(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Ky(e){this._context=e}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q1(this,this._t0,OR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q1(this,OR(this,n=NR(this,e,t)),n);break;default:q1(this,this._t0,n=NR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function T9(e){this._context=new A9(e)}(T9.prototype=Object.create(Ky.prototype)).point=function(e,t){Ky.prototype.point.call(this,t,e)};function A9(e){this._context=e}A9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function qhe(e){return new Ky(e)}function Khe(e){return new T9(e)}function N9(e){this._context=e}N9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=CR(e),i=CR(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CR(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Whe(e){return new N9(e)}function bx(e,t){this._context=e,this._t=t}bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Vhe(e){return new bx(e,.5)}function Zhe(e){return new bx(e,0)}function Xhe(e){return new bx(e,1)}function hf(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function q2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Jhe(e,t){return e[t]}function Qhe(e){const t=[];return t.key=e,t}function eme(){var e=Dn([]),t=q2,n=hf,r=Jhe;function i(a){var o=Array.from(e.apply(this,arguments),Qhe),l,u=o.length,d=-1,h;for(const p of a)for(l=0,++d;l<u;++l)(o[l][d]=[0,+r(p,o[l].key,d,a)]).data=p;for(l=0,h=vT(t(o));l<u;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Dn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Dn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?q2:typeof a=="function"?a:Dn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??hf,i):n},i}function tme(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}hf(e,t)}}function nme(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}hf(e,t)}}function rme(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,u=0,d=0;l<o;++l){for(var h=e[t[l]],p=h[r][1]||0,b=h[r-1][1]||0,y=(p-b)/2,k=0;k<l;++k){var w=e[t[k]],_=w[r][1]||0,T=w[r-1][1]||0;y+=_-T}u+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,hf(e,t)}}var K1={},W1={},MR;function ime(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(W1)),W1}var V1={},DR;function O9(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(V1)),V1}var Z1={},PR;function xT(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Z1)),Z1}var X1={},J1={},RR;function ame(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(J1)),J1}var LR;function wT(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ame(),n=xT();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const p=i[l];d?p==="\\"&&l+1<o?(l++,u+=i[l]):p===d?d="":u+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,a.push(u),u=""):u+=p:p==="["?(h=!0,u&&(a.push(u),u="")):p==="."?u&&(a.push(u),u=""):u+=p,l++}return u&&a.push(u),a}e.toPath=r})(X1)),X1}var IR;function _T(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ime(),n=O9(),r=xT(),i=wT();function a(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?n.isDeepKey(u)?a(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function o(l,u,d){if(u.length===0)return d;let h=l;for(let p=0;p<u.length;p++){if(h==null||t.isUnsafeProperty(u[p]))return d;h=h[u[p]]}return h===void 0?d:h}e.get=a})(K1)),K1}var Q1,$R;function ome(){return $R||($R=1,Q1=_T().get),Q1}var sme=ome();const yx=Si(sme);var va=e=>e===0?0:e>0?1:-1,so=e=>typeof e=="number"&&e!=+e,Rs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,et=e=>(typeof e=="number"||e instanceof Number)&&!so(e),Ho=e=>et(e)||typeof e=="string",lme=0,ap=e=>{var t=++lme;return"".concat(e||"").concat(t)},ec=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(t)&&typeof t!="string")return r;var a;if(Rs(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return so(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},C9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Ro(e,t,n){return et(e)&&et(t)?e+n*(t-e):t}function M9(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):yx(r,t))===n)}var Mr=e=>e===null||typeof e>"u",ST=e=>Mr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function cme(e){return e!=null}function $p(){}var D9=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,kT=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{yT(i)&&(r[i]=(a=>n[i](n,a)))}),r},ume=(e,t,n)=>r=>(e(t,n,r),null),dme=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];yT(i)&&typeof a=="function"&&(r||(r={}),r[i]=ume(a,t,n))}),r};function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(r){hme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hme(e,t,n){return(t=mme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mme(e){var t=pme(e,"string");return typeof t=="symbol"?t:t+""}function pme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(e,t){var n=fme({},e),r=t,i=Object.keys(t),a=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return a}var eS={},tS={},zR;function gme(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],l=r(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})(tS)),tS}var nS={},UR;function P9(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(nS)),nS}var rS={},iS={},aS={},FR;function bme(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(aS)),aS}var HR;function ET(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bme();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(iS)),iS}var oS={},GR;function yme(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(oS)),oS}var YR;function vme(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ET(),n=yme();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(rS)),rS}var sS={},lS={},qR;function xme(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_T();function n(r){return function(i){return t.get(i,r)}}e.property=n})(lS)),lS}var cS={},uS={},dS={},fS={},KR;function R9(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(fS)),fS}var hS={},WR;function L9(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(hS)),hS}var mS={},VR;function I9(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(mS)),mS}var ZR;function wme(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R9(),n=L9(),r=I9();function i(h,p,b){return typeof b!="function"?i(h,p,()=>{}):a(h,p,function y(k,w,_,T,O,j){const C=b(k,w,_,T,O,j);return C!==void 0?!!C:a(k,w,y,j)},new Map)}function a(h,p,b,y){if(p===h)return!0;switch(typeof p){case"object":return o(h,p,b,y);case"function":return Object.keys(p).length>0?a(h,{...p},b,y):r.eq(h,p);default:return t.isObject(h)?typeof p=="string"?p==="":!0:r.eq(h,p)}}function o(h,p,b,y){if(p==null)return!0;if(Array.isArray(p))return u(h,p,b,y);if(p instanceof Map)return l(h,p,b,y);if(p instanceof Set)return d(h,p,b,y);const k=Object.keys(p);if(h==null)return k.length===0;if(k.length===0)return!0;if(y?.has(p))return y.get(p)===h;y?.set(p,h);try{for(let w=0;w<k.length;w++){const _=k[w];if(!n.isPrimitive(h)&&!(_ in h)||p[_]===void 0&&h[_]!==void 0||p[_]===null&&h[_]!==null||!b(h[_],p[_],_,h,p,y))return!1}return!0}finally{y?.delete(p)}}function l(h,p,b,y){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[k,w]of p.entries()){const _=h.get(k);if(b(_,w,k,h,p,y)===!1)return!1}return!0}function u(h,p,b,y){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const k=new Set;for(let w=0;w<p.length;w++){const _=p[w];let T=!1;for(let O=0;O<h.length;O++){if(k.has(O))continue;const j=h[O];let C=!1;if(b(j,_,w,h,p,y)&&(C=!0),C){k.add(O),T=!0;break}}if(!T)return!1}return!0}function d(h,p,b,y){return p.size===0?!0:h instanceof Set?u([...h],[...p],b,y):!1}e.isMatchWith=i,e.isSetMatch=d})(dS)),dS}var XR;function $9(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wme();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(uS)),uS}var pS={},gS={},bS={},JR;function _me(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(bS)),bS}var yS={},QR;function B9(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(yS)),yS}var vS={},e3;function z9(){return e3||(e3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",b="[object ArrayBuffer]",y="[object Object]",k="[object Error]",w="[object DataView]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",C="[object BigUint64Array]",M="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",U="[object BigInt64Array]",V="[object Float32Array]",q="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=C,e.booleanTag=i,e.dataViewTag=w,e.dateTag=l,e.errorTag=k,e.float32ArrayTag=V,e.float64ArrayTag=q,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=I,e.int8ArrayTag=M,e.mapTag=u,e.numberTag=r,e.objectTag=y,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=O,e.uint32ArrayTag=j,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=T})(vS)),vS}var xS={},t3;function Sme(){return t3||(t3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(xS)),xS}var n3;function U9(){return n3||(n3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_me(),n=B9(),r=z9(),i=L9(),a=Sme();function o(h,p){return l(h,void 0,h,new Map,p)}function l(h,p,b,y=new Map,k=void 0){const w=k?.(h,p,b,y);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const _=new Array(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return Object.hasOwn(h,"index")&&(_.index=h.index),Object.hasOwn(h,"input")&&(_.input=h.input),_}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const _=new RegExp(h.source,h.flags);return _.lastIndex=h.lastIndex,_}if(h instanceof Map){const _=new Map;y.set(h,_);for(const[T,O]of h)_.set(T,l(O,T,b,y,k));return _}if(h instanceof Set){const _=new Set;y.set(h,_);for(const T of h)_.add(l(T,void 0,b,y,k));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const _=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return _}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const _=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,_),u(_,h,b,y,k),_}if(typeof File<"u"&&h instanceof File){const _=new File([h],h.name,{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(typeof Blob<"u"&&h instanceof Blob){const _=new Blob([h],{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Error){const _=new h.constructor;return y.set(h,_),_.message=h.message,_.name=h.name,_.stack=h.stack,_.cause=h.cause,u(_,h,b,y,k),_}if(h instanceof Boolean){const _=new Boolean(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Number){const _=new Number(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof String){const _=new String(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(typeof h=="object"&&d(h)){const _=Object.create(Object.getPrototypeOf(h));return y.set(h,_),u(_,h,b,y,k),_}return h}function u(h,p,b=h,y,k){const w=[...Object.keys(p),...t.getSymbols(p)];for(let _=0;_<w.length;_++){const T=w[_],O=Object.getOwnPropertyDescriptor(h,T);(O==null||O.writable)&&(h[T]=l(p[T],T,b,y,k))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=u})(gS)),gS}var r3;function kme(){return r3||(r3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(pS)),pS}var i3;function Eme(){return i3||(i3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$9(),n=kme();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(cS)),cS}var wS={},_S={},SS={},a3;function jme(){return a3||(a3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9(),n=z9();function r(i,a){return t.cloneDeepWith(i,(o,l,u,d)=>{const h=a?.(o,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i?.valueOf());return t.copyProperties(p,i),p}case n.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=r})(SS)),SS}var o3;function Tme(){return o3||(o3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jme();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(_S)),_S}var kS={},ES={},s3;function F9(){return s3||(s3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(ES)),ES}var jS={},l3;function Ame(){return l3||(l3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B9();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(jS)),jS}var c3;function Nme(){return c3||(c3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O9(),n=F9(),r=Ame(),i=wT();function a(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let h=0;h<u.length;h++){const p=u[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=a})(kS)),kS}var u3;function Ome(){return u3||(u3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$9(),n=xT(),r=Tme(),i=_T(),a=Nme();function o(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?a.has(d,l):u===void 0?h===void 0:t.isMatch(h,u)}}e.matchesProperty=o})(wS)),wS}var d3;function Cme(){return d3||(d3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P9(),n=xme(),r=Eme(),i=Ome();function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(sS)),sS}var f3;function Mme(){return f3||(f3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gme(),n=P9(),r=vme(),i=Cme();function a(o,l=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(l)):[]}e.uniqBy=a})(eS)),eS}var TS,h3;function Dme(){return h3||(h3=1,TS=Mme().uniqBy),TS}var Pme=Dme();const m3=Si(Pme);function Rme(e,t,n){return t===!0?m3(e,n):typeof t=="function"?m3(e,t):e}var AS={exports:{}},NS={},OS={exports:{}},CS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function Lme(){if(p3)return CS;p3=1;var e=xf();function t(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,b){var y=b(),k=r({inst:{value:y,getSnapshot:b}}),w=k[0].inst,_=k[1];return a(function(){w.value=y,w.getSnapshot=b,u(w)&&_({inst:w})},[p,y,b]),i(function(){return u(w)&&_({inst:w}),p(function(){u(w)&&_({inst:w})})},[p]),o(y),y}function u(p){var b=p.getSnapshot;p=p.value;try{var y=b();return!n(p,y)}catch{return!0}}function d(p,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return CS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,CS}var g3;function Ime(){return g3||(g3=1,OS.exports=Lme()),OS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3;function $me(){if(b3)return NS;b3=1;var e=xf(),t=Ime();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return NS.useSyncExternalStoreWithSelector=function(d,h,p,b,y){var k=a(null);if(k.current===null){var w={hasValue:!1,value:null};k.current=w}else w=k.current;k=l(function(){function T(P){if(!O){if(O=!0,j=P,P=b(P),y!==void 0&&w.hasValue){var I=w.value;if(y(I,P))return C=I}return C=P}if(I=C,r(j,P))return I;var U=b(P);return y!==void 0&&y(I,U)?(j=P,I):(j=P,C=U)}var O=!1,j,C,M=p===void 0?null:p;return[function(){return T(h())},M===null?void 0:function(){return T(M())}]},[h,p,b,y]);var _=i(d,k[0],k[1]);return o(function(){w.hasValue=!0,w.value=_},[_]),u(_),_},NS}var y3;function Bme(){return y3||(y3=1,AS.exports=$me()),AS.exports}var zme=Bme(),jT=S.createContext(null),Ume=e=>e,xr=()=>{var e=S.useContext(jT);return e?e.store.dispatch:Ume},Jb=()=>{},Fme=()=>Jb,Hme=(e,t)=>e===t;function it(e){var t=S.useContext(jT);return zme.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Fme,t?t.store.getState:Jb,t?t.store.getState:Jb,t?e:Jb,Hme)}function Gme(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yme(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function qme(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var v3=e=>Array.isArray(e)?e:[e];function Kme(e){const t=Array.isArray(e[0])?e[0]:e;return qme(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Wme(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Vme=class{constructor(e){this.value=e}deref(){return this.value}},Zme=typeof WeakRef<"u"?WeakRef:Vme,Xme=0,x3=1;function bb(){return{s:Xme,v:void 0,o:null,p:null}}function H9(e,t={}){let n=bb();const{resultEqualityCheck:r}=t;let i,a=0;function o(){let l=n;const{length:u}=arguments;for(let p=0,b=u;p<b;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let k=l.o;k===null&&(l.o=k=new WeakMap);const w=k.get(y);w===void 0?(l=bb(),k.set(y,l)):l=w}else{let k=l.p;k===null&&(l.p=k=new Map);const w=k.get(y);w===void 0?(l=bb(),k.set(y,l)):l=w}}const d=l;let h;if(l.s===x3)h=l.v;else if(h=e.apply(null,arguments),a++,r){const p=i?.deref?.()??i;p!=null&&r(p,h)&&(h=p,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Zme(h):h}return d.s=x3,d.v=h,h}return o.clearCache=()=>{n=bb(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Jme(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),Gme(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...u},{memoize:p,memoizeOptions:b=[],argsMemoize:y=H9,argsMemoizeOptions:k=[]}=h,w=v3(b),_=v3(k),T=Kme(i),O=p(function(){return a++,d.apply(null,arguments)},...w),j=y(function(){o++;const M=Wme(T,arguments);return l=O.apply(null,M),l},..._);return Object.assign(j,{resultFunc:d,memoizedResultFunc:O,dependencies:T,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var xe=Jme(H9),Qme=Object.assign((e,t=xe)=>{Yme(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>Qme}),MS={},DS={},PS={},w3;function epe(){return w3||(w3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),l=t(i);if(o===l&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=n})(PS)),PS}var RS={},LS={},_3;function G9(){return _3||(_3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(LS)),LS}var S3;function tpe(){return S3||(S3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G9(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(RS)),RS}var k3;function npe(){return k3||(k3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=epe(),n=tpe(),r=wT();function i(a,o,l,u){if(a==null)return[];l=u?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,k)=>{let w=y;for(let _=0;_<k.length&&w!=null;++_)w=w[k[_]];return w},h=(y,k)=>k==null||y==null?k:typeof y=="object"&&"key"in y?Object.hasOwn(k,y.key)?k[y.key]:d(k,y.path):typeof y=="function"?y(k):Array.isArray(y)?d(k,y):typeof k=="object"?k[y]:k,p=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(k=>h(k,y))})).slice().sort((y,k)=>{for(let w=0;w<p.length;w++){const _=t.compareValues(y.criteria[w],k.criteria[w],l[w]);if(_!==0)return _}return 0}).map(y=>y.original)}e.orderBy=i})(DS)),DS}var IS={},E3;function rpe(){return E3||(E3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<a?o(h,u+1):i.push(h)}};return o(n,0),i}e.flatten=t})(IS)),IS}var $S={},j3;function Y9(){return j3||(j3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F9(),n=ET(),r=R9(),i=I9();function a(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&t.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],o):!1}e.isIterateeCall=a})($S)),$S}var T3;function ipe(){return T3||(T3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=npe(),n=rpe(),r=Y9();function i(a,...o){const l=o.length;return l>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(MS)),MS}var BS,A3;function ape(){return A3||(A3=1,BS=ipe().sortBy),BS}var ope=ape();const vx=Si(ope);var q9=e=>e.legend.settings,spe=e=>e.legend.size,lpe=e=>e.legend.payload;xe([lpe,q9],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?vx(r,n):r});var yb=1;function cpe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>yb||Math.abs(o.left-t.left)>yb||Math.abs(o.top-t.top)>yb||Math.abs(o.width-t.width)>yb)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var K9=Symbol.for("immer-nothing"),N3=Symbol.for("immer-draftable"),ei=Symbol.for("immer-state");function Za(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gi=Object,mf=Gi.getPrototypeOf,Wy="constructor",xx="prototype",K2="configurable",Vy="enumerable",Qb="writable",op="value",Ls=e=>!!e&&!!e[ei];function lo(e){return e?W9(e)||wx(e)||!!e[N3]||!!e[Wy]?.[N3]||_x(e)||Sx(e):!1}var upe=Gi[xx][Wy].toString(),O3=new WeakMap;function W9(e){if(!e||!TT(e))return!1;const t=mf(e);if(t===null||t===Gi[xx])return!0;const n=Gi.hasOwnProperty.call(t,Wy)&&t[Wy];if(n===Object)return!0;if(!zd(n))return!1;let r=O3.get(n);return r===void 0&&(r=Function.toString.call(n),O3.set(n,r)),r===upe}function Bp(e,t,n=!0){zp(e)===0?(n?Reflect.ownKeys(e):Gi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function zp(e){const t=e[ei];return t?t.type_:wx(e)?1:_x(e)?2:Sx(e)?3:0}var C3=(e,t,n=zp(e))=>n===2?e.has(t):Gi[xx].hasOwnProperty.call(e,t),W2=(e,t,n=zp(e))=>n===2?e.get(t):e[t],Zy=(e,t,n,r=zp(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function dpe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wx=Array.isArray,_x=e=>e instanceof Map,Sx=e=>e instanceof Set,TT=e=>typeof e=="object",zd=e=>typeof e=="function",zS=e=>typeof e=="boolean",_s=e=>e.copy_||e.base_,AT=e=>e.modified_?e.copy_:e.base_;function V2(e,t){if(_x(e))return new Map(e);if(Sx(e))return new Set(e);if(wx(e))return Array[xx].slice.call(e);const n=W9(e);if(t===!0||t==="class_only"&&!n){const r=Gi.getOwnPropertyDescriptors(e);delete r[ei];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l[Qb]===!1&&(l[Qb]=!0,l[K2]=!0),(l.get||l.set)&&(r[o]={[K2]:!0,[Qb]:!0,[Vy]:l[Vy],[op]:e[o]})}return Gi.create(mf(e),r)}else{const r=mf(e);if(r!==null&&n)return{...e};const i=Gi.create(r);return Gi.assign(i,e)}}function NT(e,t=!1){return kx(e)||Ls(e)||!lo(e)||(zp(e)>1&&Gi.defineProperties(e,{set:vb,add:vb,clear:vb,delete:vb}),Gi.freeze(e),t&&Bp(e,(n,r)=>{NT(r,!0)},!1)),e}function fpe(){Za(2)}var vb={[op]:fpe};function kx(e){return e===null||!TT(e)?!0:Gi.isFrozen(e)}var Xy="MapSet",Z2="Patches",V9={};function pf(e){const t=V9[e];return t||Za(0,e),t}var hpe=e=>!!V9[e],sp,Z9=()=>sp,mpe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hpe(Xy)?pf(Xy):void 0});function M3(e,t){t&&(e.patchPlugin_=pf(Z2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X2(e){J2(e),e.drafts_.forEach(ppe),e.drafts_=null}function J2(e){e===sp&&(sp=e.parent_)}var D3=e=>sp=mpe(sp,e);function ppe(e){const t=e[ei];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function P3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[ei].modified_&&(X2(t),Za(4)),lo(e)&&(e=R3(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[ei].base_,e,t)}else e=R3(t,n);return gpe(t,e,!0),X2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==K9?e:void 0}function R3(e,t){if(kx(t))return t;const n=t[ei];if(!n)return OT(t,e.handledSet_,e);if(!Ex(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Q9(n,e)}return n.copy_}function gpe(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&NT(t,n)}function X9(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ex=(e,t)=>e.scope_===t,bpe=[];function J9(e,t,n,r){const i=_s(e),a=e.type_;if(r!==void 0&&W2(i,r,a)===t){Zy(i,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Bp(i,(u,d)=>{if(Ls(d)){const h=l.get(d)||[];h.push(u),l.set(d,h)}})}const o=e.draftLocations_.get(t)??bpe;for(const l of o)Zy(i,l,n,a)}function ype(e,t,n){e.callbacks_.push(function(i){const a=t;if(!a||!Ex(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const o=AT(a);J9(e,a.draft_??a,o,n),Q9(a,i)})}function Q9(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}X9(e)}}function vpe(e,t,n){const{scope_:r}=e;if(Ls(n)){const i=n[ei];Ex(i,r)&&i.callbacks_.push(function(){ey(e);const o=AT(i);J9(e,n,o,t)})}else lo(n)&&e.callbacks_.push(function(){const a=_s(e);W2(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&OT(W2(e.copy_,t,e.type_),r.handledSet_,r)})}function OT(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ls(e)||t.has(e)||!lo(e)||kx(e)||(t.add(e),Bp(e,(r,i)=>{if(Ls(i)){const a=i[ei];if(Ex(a,n)){const o=AT(a);Zy(e,r,o,e.type_),X9(a)}}else lo(i)&&OT(i,t,n)})),e}function xpe(e,t){const n=wx(e),r={type_:n?1:0,scope_:t?t.scope_:Z9(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=CT;n&&(i=[r],a=lp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,[l,r]}var CT={get(e,t){if(t===ei)return e;const n=_s(e);if(!C3(n,t,e.type_))return wpe(e,n,t);const r=n[t];if(e.finalized_||!lo(r))return r;if(r===US(e.base_,t)){ey(e);const i=e.type_===1?+t:t,a=eE(e.scope_,r,e,i);return e.copy_[i]=a}return r},has(e,t){return t in _s(e)},ownKeys(e){return Reflect.ownKeys(_s(e))},set(e,t,n){const r=e8(_s(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=US(_s(e),t),a=i?.[ei];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(dpe(n,i)&&(n!==void 0||C3(e.base_,t,e.type_)))return!0;ey(e),Q2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),vpe(e,t,n)),!0},deleteProperty(e,t){return ey(e),US(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Q2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_s(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Qb]:!0,[K2]:e.type_!==1||t!=="length",[Vy]:r[Vy],[op]:n[t]}},defineProperty(){Za(11)},getPrototypeOf(e){return mf(e.base_)},setPrototypeOf(){Za(12)}},lp={};Bp(CT,(e,t)=>{lp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});lp.deleteProperty=function(e,t){return lp.set.call(this,e,t,void 0)};lp.set=function(e,t,n){return CT.set.call(this,e[0],t,n,e[0])};function US(e,t){const n=e[ei];return(n?_s(n):e)[t]}function wpe(e,t,n){const r=e8(t,n);return r?op in r?r[op]:r.get?.call(e.draft_):void 0}function e8(e,t){if(!(t in e))return;let n=mf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=mf(n)}}function Q2(e){e.modified_||(e.modified_=!0,e.parent_&&Q2(e.parent_))}function ey(e){e.copy_||(e.assigned_=new Map,e.copy_=V2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _pe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(zd(n)&&!zd(r)){const o=r;r=n;const l=this;return function(d=o,...h){return l.produce(d,p=>r.call(this,p,...h))}}zd(r)||Za(6),i!==void 0&&!zd(i)&&Za(7);let a;if(lo(n)){const o=D3(this),l=eE(o,n,void 0);let u=!0;try{a=r(l),u=!1}finally{u?X2(o):J2(o)}return M3(o,i),P3(a,o)}else if(!n||!TT(n)){if(a=r(n),a===void 0&&(a=n),a===K9&&(a=void 0),this.autoFreeze_&&NT(a,!0),i){const o=[],l=[];pf(Z2).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:l}),i(o,l)}return a}else Za(1,n)},this.produceWithPatches=(n,r)=>{if(zd(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let i,a;return[this.produce(n,r,(l,u)=>{i=l,a=u}),i,a]},zS(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),zS(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),zS(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){lo(t)||Za(8),Ls(t)&&(t=eo(t));const n=D3(this),r=eE(n,t,void 0);return r[ei].isManual_=!0,J2(n),r}finishDraft(t,n){const r=t&&t[ei];(!r||!r.isManual_)&&Za(9);const{scope_:i}=r;return M3(i,n),P3(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=pf(Z2).applyPatches_;return Ls(t)?i(t,n):this.produce(t,a=>i(a,n))}};function eE(e,t,n,r){const[i,a]=_x(t)?pf(Xy).proxyMap_(t,n):Sx(t)?pf(Xy).proxySet_(t,n):xpe(t,n);return(n?.scope_??Z9()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?ype(n,a,r):a.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:d}=u;a.modified_&&d&&d.generatePatches_(a,[],u)}),i}function eo(e){return Ls(e)||Za(10,e),t8(e)}function t8(e){if(!lo(e)||kx(e))return e;const t=e[ei];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=V2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=V2(e,!0);return Bp(n,(i,a)=>{Zy(n,i,t8(a))},r),t&&(t.finalized_=!1),n}var Spe=new _pe,n8=Spe.produce;function r8(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var kpe=r8(),Epe=r8,jpe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hm:Hm.apply(null,arguments)};function Ea(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ki(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>g4(r)&&r.type===e,n}var i8=class jm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jm.prototype)}static get[Symbol.species](){return jm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jm(...t[0].concat(this)):new jm(...t.concat(this))}};function L3(e){return lo(e)?n8(e,()=>{}):e}function xb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Tpe(e){return typeof e=="boolean"}var Ape=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new i8;return n&&(Tpe(n)?o.push(kpe):o.push(Epe(n.extraArgument))),o},a8="RTK_autoBatch",gn=()=>e=>({payload:e,meta:{[a8]:!0}}),I3=e=>t=>{setTimeout(t,e)},o8=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:I3(10):e.type==="callback"?e.queueNotification:I3(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>i&&h(),b=r.subscribe(p);return l.add(h),()=>{b(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[a8],a=!i,a&&(o||(o=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},Npe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new i8(e);return r&&i.push(o8(typeof r=="object"?r:void 0)),i};function Ope(e){const t=Ape(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(gj(n))l=m4(n);else throw new Error(Ki(1));let u;typeof r=="function"?u=r(t):u=t();let d=Hm;i&&(d=jpe({trace:!1,...typeof i=="object"&&i}));const h=p4(...u),p=Npe(h);let b=typeof o=="function"?o(p):p();const y=d(...b);return bj(l,a,y)}function s8(e){const t={},n=[];let r;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(Ki(28));if(l in t)throw new Error(Ki(29));return t[l]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function Cpe(e){return typeof e=="function"}function Mpe(e,t){let[n,r,i]=s8(t),a;if(Cpe(e))a=()=>L3(e());else{const l=L3(e);a=()=>l}function o(l=a(),u){let d=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(Ls(h)){const y=p(h,u);return y===void 0?h:y}else{if(lo(h))return n8(h,b=>p(b,u));{const b=p(h,u);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},l)}return o.getInitialState=a,o}var Dpe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ppe=(e=21)=>{let t="",n=e;for(;n--;)t+=Dpe[Math.random()*64|0];return t},Rpe=Symbol.for("rtk-slice-createasyncthunk");function Lpe(e,t){return`${e}/${t}`}function Ipe({creators:e}={}){const t=e?.asyncThunk?.[Rpe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(Ki(11));const o=(typeof r.reducers=="function"?r.reducers(Bpe()):r.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,C){const M=typeof j=="string"?j:j.type;if(!M)throw new Error(Ki(12));if(M in u.sliceCaseReducersByType)throw new Error(Ki(13));return u.sliceCaseReducersByType[M]=C,d},addMatcher(j,C){return u.sliceMatchers.push({matcher:j,reducer:C}),d},exposeAction(j,C){return u.actionCreators[j]=C,d},exposeCaseReducer(j,C){return u.sliceCaseReducersByName[j]=C,d}};l.forEach(j=>{const C=o[j],M={reducerName:j,type:Lpe(i,j),createNotation:typeof r.reducers=="function"};Upe(C)?Hpe(M,C,d,t):zpe(M,C,d)});function h(){const[j={},C=[],M=void 0]=typeof r.extraReducers=="function"?s8(r.extraReducers):[r.extraReducers],P={...j,...u.sliceCaseReducersByType};return Mpe(r.initialState,I=>{for(let U in P)I.addCase(U,P[U]);for(let U of u.sliceMatchers)I.addMatcher(U.matcher,U.reducer);for(let U of C)I.addMatcher(U.matcher,U.reducer);M&&I.addDefaultCase(M)})}const p=j=>j,b=new Map,y=new WeakMap;let k;function w(j,C){return k||(k=h()),k(j,C)}function _(){return k||(k=h()),k.getInitialState()}function T(j,C=!1){function M(I){let U=I[j];return typeof U>"u"&&C&&(U=xb(y,M,_)),U}function P(I=p){const U=xb(b,C,()=>new WeakMap);return xb(U,I,()=>{const V={};for(const[q,H]of Object.entries(r.selectors??{}))V[q]=$pe(H,I,()=>xb(y,I,_),C);return V})}return{reducerPath:j,getSelectors:P,get selectors(){return P(M)},selectSlice:M}}const O={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...T(a),injectInto(j,{reducerPath:C,...M}={}){const P=C??a;return j.inject({reducerPath:P,reducer:w},M),{...O,...T(P,!0)}}};return O}}function $pe(e,t,n,r){function i(a,...o){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var ki=Ipe();function Bpe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function zpe({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!Fpe(r))throw new Error(Ki(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Ea(e,o):Ea(e))}function Upe(e){return e._reducerDefinitionType==="asyncThunk"}function Fpe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Hpe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ki(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:d,options:h}=n,p=i(e,a,h);r.exposeAction(t,p),o&&r.addCase(p.fulfilled,o),l&&r.addCase(p.pending,l),u&&r.addCase(p.rejected,u),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(t,{fulfilled:o||wb,pending:l||wb,rejected:u||wb,settled:d||wb})}function wb(){}var Gpe="task",l8="listener",c8="completed",MT="cancelled",Ype=`task-${MT}`,qpe=`task-${c8}`,tE=`${l8}-${MT}`,Kpe=`${l8}-${c8}`,jx=class{constructor(e){this.code=e,this.message=`${Gpe} ${MT} (reason: ${e})`}name="TaskAbortError";message},DT=(e,t)=>{if(typeof e!="function")throw new TypeError(Ki(32))},Jy=()=>{},u8=(e,t=Jy)=>(e.catch(t),e),d8=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),xu=e=>{if(e.aborted)throw new jx(e.reason)};function f8(e,t){let n=Jy;return new Promise((r,i)=>{const a=()=>i(new jx(e.reason));if(e.aborted){a();return}n=d8(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Jy})}var Wpe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof jx?"cancelled":"rejected",error:n}}finally{t?.()}},Qy=e=>t=>u8(f8(e,t).then(n=>(xu(e),n))),h8=e=>{const t=Qy(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:tf}=Object,$3={},Tx="listenerMiddleware",Vpe=(e,t)=>{const n=r=>d8(e,()=>r.abort(e.reason));return(r,i)=>{DT(r);const a=new AbortController;n(a);const o=Wpe(async()=>{xu(e),xu(a.signal);const l=await r({pause:Qy(a.signal),delay:h8(a.signal),signal:a.signal});return xu(a.signal),l},()=>a.abort(qpe));return i?.autoJoin&&t.push(o.catch(Jy)),{result:Qy(e)(o),cancel(){a.abort(Ype)}}}},Zpe=(e,t)=>{const n=async(r,i)=>{xu(t);let a=()=>{};const l=[new Promise((u,d)=>{let h=e({predicate:r,effect:(p,b)=>{b.unsubscribe(),u([p,b.getState(),b.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await f8(t,Promise.race(l));return xu(t),u}finally{a()}};return(r,i)=>u8(n(r,i))},m8=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=Ea(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ki(21));return DT(a),{predicate:i,type:t,effect:a}},p8=tf(e=>{const{type:t,predicate:n,effect:r}=m8(e);return{id:Ppe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ki(22))}}},{withTypes:()=>p8}),B3=(e,t)=>{const{type:n,effect:r,predicate:i}=m8(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},nE=e=>{e.pending.forEach(t=>{t.abort(tE)})},Xpe=(e,t)=>()=>{for(const n of t.keys())nE(n);e.clear()},z3=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},g8=tf(Ea(`${Tx}/add`),{withTypes:()=>g8}),Jpe=Ea(`${Tx}/removeAll`),b8=tf(Ea(`${Tx}/remove`),{withTypes:()=>b8}),Qpe=(...e)=>{console.error(`${Tx}/error`,...e)},Up=(e={})=>{const t=new Map,n=new Map,r=y=>{const k=n.get(y)??0;n.set(y,k+1)},i=y=>{const k=n.get(y)??1;k===1?n.delete(y):n.set(y,k-1)},{extra:a,onError:o=Qpe}=e;DT(o);const l=y=>(y.unsubscribe=()=>t.delete(y.id),t.set(y.id,y),k=>{y.unsubscribe(),k?.cancelActive&&nE(y)}),u=y=>{const k=B3(t,y)??p8(y);return l(k)};tf(u,{withTypes:()=>u});const d=y=>{const k=B3(t,y);return k&&(k.unsubscribe(),y.cancelActive&&nE(k)),!!k};tf(d,{withTypes:()=>d});const h=async(y,k,w,_)=>{const T=new AbortController,O=Zpe(u,T.signal),j=[];try{y.pending.add(T),r(y),await Promise.resolve(y.effect(k,tf({},w,{getOriginalState:_,condition:(C,M)=>O(C,M).then(Boolean),take:O,delay:h8(T.signal),pause:Qy(T.signal),extra:a,signal:T.signal,fork:Vpe(T.signal,j),unsubscribe:y.unsubscribe,subscribe:()=>{t.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((C,M,P)=>{C!==T&&(C.abort(tE),P.delete(C))})},cancel:()=>{T.abort(tE),y.pending.delete(T)},throwIfCancelled:()=>{xu(T.signal)}})))}catch(C){C instanceof jx||z3(o,C,{raisedBy:"effect"})}finally{await Promise.all(j),T.abort(Kpe),i(y),y.pending.delete(T)}},p=Xpe(t,n);return{middleware:y=>k=>w=>{if(!g4(w))return k(w);if(g8.match(w))return u(w.payload);if(Jpe.match(w)){p();return}if(b8.match(w))return d(w.payload);let _=y.getState();const T=()=>{if(_===$3)throw new Error(Ki(23));return _};let O;try{if(O=k(w),t.size>0){const j=y.getState(),C=Array.from(t.values());for(const M of C){let P=!1;try{P=M.predicate(w,j,_)}catch(I){P=!1,z3(o,I,{raisedBy:"predicate"})}P&&h(M,w,y,T)}}}finally{_=$3}return O},startListening:u,stopListening:d,clearListeners:p}};function Ki(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var e0e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},y8=ki({name:"chartLayout",initialState:e0e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:t0e,setLayout:n0e,setChartSize:r0e,setScale:i0e}=y8.actions,a0e=y8.reducer;function v8(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function U3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(n),!0).forEach(function(r){o0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o0e(e,t,n){return(t=s0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s0e(e){var t=l0e(e,"string");return typeof t=="symbol"?t:t+""}function l0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fr(e,t,n){return Mr(e)||Mr(t)?n:Ho(t)?yx(e,t,n):typeof t=="function"?t(e):n}var c0e=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&et(e[a]))return Yd(Yd({},e),{},{[a]:e[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&et(e[o]))return Yd(Yd({},e),{},{[o]:e[o]+(i||0)})}return e},Hs=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",x8=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var i,a,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||o.push(t),a||o.push(n),o},w8=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:b,axisType:y}=e;if(!o)return null;var k=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/k:0;if(w=y==="angleAxis"&&a&&a.length>=2?va(a[0]-a[1])*2*w:w,p||b){var _=(p||b||[]).map((T,O)=>{var j=r?r.indexOf(T):T;return{coordinate:o(j)+w,value:T,offset:w,index:O}});return _.filter(T=>!so(T.coordinate))}return u&&d?d.map((T,O)=>({coordinate:o(T)+w,value:T,index:O,offset:w})):o.ticks&&h!=null?o.ticks(h).map((T,O)=>({coordinate:o(T)+w,value:T,offset:w,index:O})):o.domain().map((T,O)=>({coordinate:o(T)+w,value:r?r[T]:T,index:O,offset:w}))},F3=1e-4,u0e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-F3,a=Math.max(r[0],r[1])+F3,o=e(t[0]),l=e(t[n-1]);(o<i||o>a||l<i||l>a)&&e.domain([t[0],t[n-1]])}},d0e=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var l=so(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1])}},f0e=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=so(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},h0e={sign:d0e,expand:tme,none:hf,silhouette:nme,wiggle:rme,positive:f0e},m0e=(e,t,n)=>{var r=h0e[n],i=eme().keys(t).value((a,o)=>Number(Fr(a,o,0))).order(q2).offset(r);return i(e)};function p0e(e){return e==null?void 0:String(e)}function H3(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Mr(i[t.dataKey])){var l=M9(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=Fr(i,Mr(o)?t.dataKey:o);return Mr(u)?null:t.scale(u)}var g0e=e=>{var t=e.flat(2).filter(et);return[Math.min(...t),Math.max(...t)]},b0e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],y0e=(e,t,n)=>{if(e!=null)return b0e(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,l=o.reduce((u,d)=>{var h=v8(d,t,n),p=g0e(h);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},G3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Y3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ev=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=vx(t,h=>h.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function q3(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Yd(Yd({},t),{},{dataKey:n,payload:r,value:i,name:a})}function _8(e,t){if(e)return String(e);if(typeof t=="string")return t}var v0e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},x0e=(e,t)=>t==="centric"?e.angle:e.radius,Gs=e=>e.layout.width,Ys=e=>e.layout.height,w0e=e=>e.layout.scale,S8=e=>e.layout.margin,Ax=xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nx=xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),_0e="data-recharts-item-index",S0e="data-recharts-item-data-key",Fp=60;function K3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(n),!0).forEach(function(r){k0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k0e(e,t,n){return(t=E0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E0e(e){var t=j0e(e,"string");return typeof t=="symbol"?t:t+""}function j0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T0e=e=>e.brush.height;function A0e(e){var t=Nx(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fp;return n+i}return n},0)}function N0e(e){var t=Nx(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fp;return n+i}return n},0)}function O0e(e){var t=Ax(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function C0e(e){var t=Ax(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Rr=xe([Gs,Ys,S8,T0e,A0e,N0e,O0e,C0e,q9,spe],(e,t,n,r,i,a,o,l,u,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},p={top:(n.top||0)+o,bottom:(n.bottom||0)+l},b=_b(_b({},p),h),y=b.bottom;b.bottom+=r,b=c0e(b,u,d);var k=e-b.left-b.right,w=t-b.top-b.bottom;return _b(_b({brushBottom:y},b),{},{width:Math.max(k,0),height:Math.max(w,0)})}),M0e=xe(Rr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),k8=xe(Gs,Ys,(e,t)=>({x:0,y:0,width:e,height:t})),D0e=S.createContext(null),Ei=()=>S.useContext(D0e)!=null,Ox=e=>e.brush,Cx=xe([Ox,Rr,S8],(e,t,n)=>({height:e.height,x:et(e.x)?e.x:t.left,y:et(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:et(e.width)?e.width:t.width})),FS={},HS={},GS={},W3;function P0e(){return W3||(W3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,l=null;const u=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},p=()=>{d&&h(),w()};let b=null;const y=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,p()},r)},k=()=>{b!==null&&(clearTimeout(b),b=null)},w=()=>{k(),o=void 0,l=null},_=()=>{h()},T=function(...O){if(i?.aborted)return;o=this,l=O;const j=b==null;y(),u&&j&&h()};return T.schedule=y,T.cancel=w,T.flush=_,i?.addEventListener("abort",w,{once:!0}),T}e.debounce=t})(GS)),GS}var V3;function R0e(){return V3||(V3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P0e();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:u}=a,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let h,p=null;const b=t.debounce(function(...w){h=r.apply(this,w),p=null},i,{edges:d}),y=function(...w){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=r.apply(this,w),p=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,w),h)},k=()=>(b.flush(),h);return y.cancel=b.cancel,y.flush=k,y}e.debounce=n})(HS)),HS}var Z3;function L0e(){return Z3||(Z3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R0e();function n(r,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(FS)),FS}var YS,X3;function I0e(){return X3||(X3=1,YS=L0e().throttle),YS}var $0e=I0e();const B0e=Si($0e);var tv=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},E8=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,l=Rs(r)?e:Number(r),u=Rs(i)?t:Number(i);return a&&a>0&&(l?u=l/a:u&&(l=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},z0e={width:0,height:0,overflow:"visible"},U0e={width:0,overflowX:"visible"},F0e={height:0,overflowY:"visible"},H0e={},G0e=e=>{var{width:t,height:n}=e,r=Rs(t),i=Rs(n);return r&&i?z0e:r?U0e:i?F0e:H0e};function Y0e(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Pn(e){return Number.isFinite(e)}function Go(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rE.apply(null,arguments)}function J3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(n),!0).forEach(function(r){q0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q0e(e,t,n){return(t=K0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K0e(e){var t=W0e(e,"string");return typeof t=="symbol"?t:t+""}function W0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j8=S.createContext({width:-1,height:-1});function V0e(e){return Go(e.width)&&Go(e.height)}function T8(e){var{children:t,width:n,height:r}=e,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return V0e(i)?S.createElement(j8.Provider,{value:i},t):null}var PT=()=>S.useContext(j8),Z0e=S.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:p,className:b,onResize:y,style:k={}}=e,w=S.useRef(null),_=S.useRef();_.current=y,S.useImperativeHandle(t,()=>w.current);var[T,O]=S.useState({containerWidth:r.width,containerHeight:r.height}),j=S.useCallback((U,V)=>{O(q=>{var H=Math.round(U),B=Math.round(V);return q.containerWidth===H&&q.containerHeight===B?q:{containerWidth:H,containerHeight:B}})},[]);S.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return $p;var U=B=>{var W,{width:Z,height:X}=B[0].contentRect;j(Z,X),(W=_.current)===null||W===void 0||W.call(_,Z,X)};h>0&&(U=B0e(U,h,{trailing:!0,leading:!1}));var V=new ResizeObserver(U),{width:q,height:H}=w.current.getBoundingClientRect();return j(q,H),V.observe(w.current),()=>{V.disconnect()}},[j,h]);var{containerWidth:C,containerHeight:M}=T;tv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:I}=E8(C,M,{width:i,height:a,aspect:n,maxHeight:u});return tv(P!=null&&P>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,I,i,a,o,l,n),S.createElement("div",{id:p?"".concat(p):void 0,className:un("recharts-responsive-container",b),style:Q3(Q3({},k),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:u}),ref:w},S.createElement("div",{style:G0e({width:i,height:a})},S.createElement(T8,{width:P,height:I},d)))}),X0e=S.forwardRef((e,t)=>{var n=PT();if(Go(n.width)&&Go(n.height))return e.children;var{width:r,height:i}=Y0e({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=E8(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return et(a)&&et(o)?S.createElement(T8,{width:a,height:o},e.children):S.createElement(Z0e,rE({},e,{width:r,height:i,ref:t}))});function A8(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Mx=()=>{var e,t=Ei(),n=it(M0e),r=it(Cx),i=(e=it(Ox))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},J0e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},N8=()=>{var e;return(e=it(Rr))!==null&&e!==void 0?e:J0e},O8=()=>it(Gs),C8=()=>it(Ys),an=e=>e.layout.layoutType,Hp=()=>it(an),Q0e=()=>{var e=Hp();if(e==="horizontal"||e==="vertical")return e},ege=()=>{var e=Hp();return e!==void 0},Dx=e=>{var t=xr(),n=Ei(),{width:r,height:i}=e,a=PT(),o=r,l=i;return a&&(o=a.width>0?a.width:r,l=a.height>0?a.height:i),S.useEffect(()=>{!n&&Go(o)&&Go(l)&&t(r0e({width:o,height:l}))},[t,n,o,l]),null},M8=Symbol.for("immer-nothing"),eL=Symbol.for("immer-draftable"),Vi=Symbol.for("immer-state");function Xa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cp=Object.getPrototypeOf;function gf(e){return!!e&&!!e[Vi]}function Tu(e){return e?D8(e)||Array.isArray(e)||!!e[eL]||!!e.constructor?.[eL]||Gp(e)||Rx(e):!1}var tge=Object.prototype.constructor.toString(),tL=new WeakMap;function D8(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=tL.get(n);return r===void 0&&(r=Function.toString.call(n),tL.set(n,r)),r===tge}function nv(e,t,n=!0){Px(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Px(e){const t=e[Vi];return t?t.type_:Array.isArray(e)?1:Gp(e)?2:Rx(e)?3:0}function iE(e,t){return Px(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function P8(e,t,n){const r=Px(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nge(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gp(e){return e instanceof Map}function Rx(e){return e instanceof Set}function ou(e){return e.copy_||e.base_}function aE(e,t){if(Gp(e))return new Map(e);if(Rx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=D8(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Vi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(cp(e),r)}else{const r=cp(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function RT(e,t=!1){return Lx(e)||gf(e)||!Tu(e)||(Px(e)>1&&Object.defineProperties(e,{set:Sb,add:Sb,clear:Sb,delete:Sb}),Object.freeze(e),t&&Object.values(e).forEach(n=>RT(n,!0))),e}function rge(){Xa(2)}var Sb={value:rge};function Lx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var ige={};function Au(e){const t=ige[e];return t||Xa(0,e),t}var up;function R8(){return up}function age(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nL(e,t){t&&(Au("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oE(e){sE(e),e.drafts_.forEach(oge),e.drafts_=null}function sE(e){e===up&&(up=e.parent_)}function rL(e){return up=age(up,e)}function oge(e){const t=e[Vi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function iL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Vi].modified_&&(oE(t),Xa(4)),Tu(e)&&(e=rv(t,e),t.parent_||iv(t,e)),t.patches_&&Au("Patches").generateReplacementPatches_(n[Vi].base_,e,t.patches_,t.inversePatches_)):e=rv(t,n,[]),oE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==M8?e:void 0}function rv(e,t,n){if(Lx(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Vi];if(!i)return nv(t,(a,o)=>aL(e,i,t,a,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return iv(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),nv(o,(u,d)=>aL(e,i,a,u,d,n,l),r),iv(e,a,!1),n&&e.patches_&&Au("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function aL(e,t,n,r,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=Lx(i);if(!(l&&!o)){if(gf(i)){const u=a&&t&&t.type_!==3&&!iE(t.assigned_,r)?a.concat(r):void 0,d=rv(e,i,u);if(P8(n,r,d),gf(d))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Tu(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&l)return;rv(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Gp(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&iv(e,i)}}}function iv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&RT(t,n)}function sge(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:R8(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=LT;n&&(i=[r],a=dp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,l}var LT={get(e,t){if(t===Vi)return e;const n=ou(e);if(!iE(n,t))return lge(e,n,t);const r=n[t];return e.finalized_||!Tu(r)?r:r===qS(e.base_,t)?(KS(e),e.copy_[t]=cE(r,e)):r},has(e,t){return t in ou(e)},ownKeys(e){return Reflect.ownKeys(ou(e))},set(e,t,n){const r=L8(ou(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=qS(ou(e),t),a=i?.[Vi];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nge(n,i)&&(n!==void 0||iE(e.base_,t)))return!0;KS(e),lE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return qS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,KS(e),lE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ou(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Xa(11)},getPrototypeOf(e){return cp(e.base_)},setPrototypeOf(){Xa(12)}},dp={};nv(LT,(e,t)=>{dp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dp.deleteProperty=function(e,t){return dp.set.call(this,e,t,void 0)};dp.set=function(e,t,n){return LT.set.call(this,e[0],t,n,e[0])};function qS(e,t){const n=e[Vi];return(n?ou(n):e)[t]}function lge(e,t,n){const r=L8(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function L8(e,t){if(!(t in e))return;let n=cp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cp(n)}}function lE(e){e.modified_||(e.modified_=!0,e.parent_&&lE(e.parent_))}function KS(e){e.copy_||(e.copy_=aE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cge=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(u=a,...d){return o.produce(u,h=>n.call(this,h,...d))}}typeof n!="function"&&Xa(6),r!==void 0&&typeof r!="function"&&Xa(7);let i;if(Tu(t)){const a=rL(this),o=cE(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?oE(a):sE(a)}return nL(a,r),iL(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===M8&&(i=void 0),this.autoFreeze_&&RT(i,!0),r){const a=[],o=[];Au("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else Xa(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let r,i;return[this.produce(t,n,(o,l)=>{r=o,i=l}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Tu(e)||Xa(8),gf(e)&&(e=uge(e));const t=rL(this),n=cE(e,void 0);return n[Vi].isManual_=!0,sE(t),n}finishDraft(e,t){const n=e&&e[Vi];(!n||!n.isManual_)&&Xa(9);const{scope_:r}=n;return nL(r,t),iL(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Au("Patches").applyPatches_;return gf(e)?r(e,t):this.produce(e,i=>r(i,t))}};function cE(e,t){const n=Gp(e)?Au("MapSet").proxyMap_(e,t):Rx(e)?Au("MapSet").proxySet_(e,t):sge(e,t);return(t?t.scope_:R8()).drafts_.push(n),n}function uge(e){return gf(e)||Xa(10,e),I8(e)}function I8(e){if(!Tu(e)||Lx(e))return e;const t=e[Vi];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=aE(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=aE(e,!0);return nv(n,(i,a)=>{P8(n,i,I8(a))},r),t&&(t.finalized_=!1),n}var dge=new cge;dge.produce;var fge={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},$8=ki({name:"legend",initialState:fge,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:gn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=eo(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:gn()},removeLegendPayload:{reducer(e,t){var n=eo(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:gn()}}}),{setLegendSize:mMe,setLegendSettings:pMe,addLegendPayload:hge,replaceLegendPayload:mge,removeLegendPayload:pge}=$8.actions,gge=$8.reducer;function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(null,arguments)}function oL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oL(Object(n),!0).forEach(function(r){bge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bge(e,t,n){return(t=yge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yge(e){var t=vge(e,"string");return typeof t=="symbol"?t:t+""}function vge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xge(e){return Array.isArray(e)&&Ho(e[0])&&Ho(e[1])?e.join(" ~ "):e}var wge=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:b=!1}=e,y=()=>{if(a&&a.length){var M={padding:0,margin:0},P=(l?vx(a,l):a).map((I,U)=>{if(I.type==="none")return null;var V=I.formatter||o||xge,{value:q,name:H}=I,B=q,W=H;if(V){var Z=V(q,H,I,U,a);if(Array.isArray(Z))[B,W]=Z;else if(Z!=null)B=Z;else return null}var X=WS({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:X},Ho(W)?S.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Ho(W)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},B),S.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:M},P)}return null},k=WS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=WS({margin:0},i),_=!Mr(h),T=_?h:"",O=un("recharts-default-tooltip",u),j=un("recharts-tooltip-label",d);_&&p&&a!==void 0&&a!==null&&(T=p(h,a));var C=b?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",uE({className:O,style:k},C),S.createElement("p",{className:j,style:w},S.isValidElement(T)?T:"".concat(T)),y())},dm="recharts-tooltip-wrapper",_ge={visibility:"hidden"};function Sge(e){var{coordinate:t,translateX:n,translateY:r}=e;return un(dm,{["".concat(dm,"-right")]:et(n)&&t&&et(t.x)&&n>=t.x,["".concat(dm,"-left")]:et(n)&&t&&et(t.x)&&n<t.x,["".concat(dm,"-bottom")]:et(r)&&t&&et(t.y)&&r>=t.y,["".concat(dm,"-top")]:et(r)&&t&&et(t.y)&&r<t.y})}function sL(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=e;if(a&&et(a[r]))return a[r];var h=n[r]-l-(i>0?i:0),p=n[r]+i;if(t[r])return o[r]?h:p;var b=u[r];if(b==null)return 0;if(o[r]){var y=h,k=b;return y<k?Math.max(p,b):Math.max(h,b)}if(d==null)return 0;var w=p+l,_=b+d;return w>_?Math.max(h,b):Math.max(p,b)}function kge(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Ege(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:u}=e,d,h,p;return o.height>0&&o.width>0&&n?(h=sL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=sL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=kge({translateX:h,translateY:p,useTranslate3d:l})):d=_ge,{cssProperties:d,cssClasses:Sge({translateX:h,translateY:p,coordinate:n})}}function lL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(n),!0).forEach(function(r){dE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dE(e,t,n){return(t=jge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jge(e){var t=Tge(e,"string");return typeof t=="symbol"?t:t+""}function Tge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Age extends S.PureComponent{constructor(){super(...arguments),dE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:p,useTranslate3d:b,viewBox:y,wrapperStyle:k,lastBoundingBox:w,innerRef:_,hasPortalFromProps:T}=this.props,{cssClasses:O,cssProperties:j}=Ege({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:b,viewBox:y}),C=T?{}:kb(kb({transition:u&&t?"transform ".concat(r,"ms ").concat(i):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),M=kb(kb({},C),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},k);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:M,ref:_},a)}}var B8=()=>{var e;return(e=it(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(null,arguments)}function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(n),!0).forEach(function(r){Nge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nge(e,t,n){return(t=Oge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oge(e){var t=Cge(e,"string");return typeof t=="symbol"?t:t+""}function Cge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dL={curveBasisClosed:Hhe,curveBasisOpen:Ghe,curveBasis:Fhe,curveBumpX:zhe,curveBumpY:Uhe,curveLinearClosed:Yhe,curveLinear:gx,curveMonotoneX:qhe,curveMonotoneY:Khe,curveNatural:Whe,curveStep:Vhe,curveStepAfter:Xhe,curveStepBefore:Zhe},av=e=>Pn(e.x)&&Pn(e.y),fL=e=>e.base!=null&&av(e.base)&&av(e),fm=e=>e.x,hm=e=>e.y,Mge=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(ST(e));return(n==="curveMonotone"||n==="curveBump")&&t?dL["".concat(n).concat(t==="vertical"?"Y":"X")]:dL[n]||gx},Dge=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=Mge(t,i),l=a?n.filter(av):n,u;if(Array.isArray(r)){var d=n.map((y,k)=>uL(uL({},y),{},{base:r[k]}));i==="vertical"?u=gb().y(hm).x1(fm).x0(y=>y.base.x):u=gb().x(fm).y1(hm).y0(y=>y.base.y);var h=u.defined(fL).curve(o),p=a?d.filter(fL):d;return h(p)}i==="vertical"&&et(r)?u=gb().y(hm).x1(fm).x0(r):et(r)?u=gb().x(fm).y1(hm).y0(r):u=w9().x(fm).y(hm);var b=u.defined(av).curve(o);return b(l)},ty=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Dge(e):r;return S.createElement("path",fE({},oo(e),kT(e),{className:un("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Pge=["x","y","top","left","width","height","className"];function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hE.apply(null,arguments)}function hL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hL(Object(n),!0).forEach(function(r){Lge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lge(e,t,n){return(t=Ige(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ige(e){var t=$ge(e,"string");return typeof t=="symbol"?t:t+""}function $ge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bge(e,t){if(e==null)return{};var n,r,i=zge(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zge(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Uge=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),Fge=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:l}=e,u=Bge(e,Pge),d=Rge({x:t,y:n,top:r,left:i,width:a,height:o},u);return!et(t)||!et(n)||!et(a)||!et(o)||!et(r)||!et(i)?null:S.createElement("path",hE({},ka(d),{className:un("recharts-cross",l),d:Uge(t,n,a,o,r,i)}))};function Hge(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(n),!0).forEach(function(r){Gge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gge(e,t,n){return(t=Yge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yge(e){var t=qge(e,"string");return typeof t=="symbol"?t:t+""}function qge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kge=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Wge=(e,t,n)=>e.map(r=>"".concat(Kge(r)," ").concat(t,"ms ").concat(n)).join(","),Vge=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),fp=(e,t)=>Object.keys(t).reduce((n,r)=>pL(pL({},n),{},{[r]:e(r,t[r])}),{});function gL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(n),!0).forEach(function(r){Zge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zge(e,t,n){return(t=Xge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xge(e){var t=Jge(e,"string");return typeof t=="symbol"?t:t+""}function Jge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ov=(e,t,n)=>e+(t-e)*n,mE=e=>{var{from:t,to:n}=e;return t!==n},z8=(e,t,n)=>{var r=fp((i,a)=>{if(mE(a)){var[o,l]=e(a.from,a.to,a.velocity);return rr(rr({},a),{},{from:o,velocity:l})}return a},t);return n<1?fp((i,a)=>mE(a)?rr(rr({},a),{},{velocity:ov(a.velocity,r[i].velocity,n),from:ov(a.from,r[i].from,n)}):a,t):z8(e,r,n-1)};function Qge(e,t,n,r,i,a){var o,l=r.reduce((b,y)=>rr(rr({},b),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),u=()=>fp((b,y)=>y.from,l),d=()=>!Object.values(l).filter(mE).length,h=null,p=b=>{o||(o=b);var y=b-o,k=y/n.dt;l=z8(n,l,k),i(rr(rr(rr({},e),t),u())),o=b,d()||(h=a.setTimeout(p))};return()=>(h=a.setTimeout(p),()=>{var b;(b=h)===null||b===void 0||b()})}function ebe(e,t,n,r,i,a,o){var l=null,u=i.reduce((p,b)=>rr(rr({},p),{},{[b]:[e[b],t[b]]}),{}),d,h=p=>{d||(d=p);var b=(p-d)/r,y=fp((w,_)=>ov(..._,n(b)),u);if(a(rr(rr(rr({},e),t),y)),b<1)l=o.setTimeout(h);else{var k=fp((w,_)=>ov(..._,n(1)),u);a(rr(rr(rr({},e),t),k))}};return()=>(l=o.setTimeout(h),()=>{var p;(p=l)===null||p===void 0||p()})}const tbe=(e,t,n,r,i,a)=>{var o=Vge(e,t);return n==null?()=>(i(rr(rr({},e),t)),()=>{}):n.isStepper===!0?Qge(e,t,n,o,i,a):ebe(e,t,n,r,o,i,a)};var sv=1e-4,U8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],F8=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),bL=(e,t)=>n=>{var r=U8(e,t);return F8(r,n)},nbe=(e,t)=>n=>{var r=U8(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return F8(i,n)},rbe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var o=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return n.length===4?n:[0,0,1,1]},ibe=(e,t,n,r)=>{var i=bL(e,n),a=bL(t,r),o=nbe(e,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,p=h,b=0;b<8;++b){var y=i(p)-h,k=o(p);if(Math.abs(y-h)<sv||k<sv)return a(p);p=l(p-y/k)}return a(p)};return u.isStepper=!1,u},yL=function(){return ibe(...rbe(...arguments))},abe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,l,u)=>{var d=-(o-l)*n,h=u*r,p=u+(d-h)*i/1e3,b=u*i/1e3+o;return Math.abs(b-l)<sv&&Math.abs(p)<sv?[l,0]:[b,p]};return a.isStepper=!0,a.dt=i,a},obe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yL(e);case"spring":return abe();default:if(e.split("(")[0]==="cubic-bezier")return yL(e)}return typeof e=="function"?e:null};function sbe(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){i=e.setTimeout(a.bind(null,d),u);return}a(u),i=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class lbe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function cbe(){return sbe(new lbe)}var ube=S.createContext(cbe);function dbe(e,t){var n=S.useContext(ube);return S.useMemo(()=>t??n(e),[e,t,n])}var fbe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Rf={devToolsEnabled:!1,isSsr:fbe()},hbe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},vL={t:0},VS={t:1};function H8(e){var t=Xi(e,hbe),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=t,h=n==="auto"?!Rf.isSsr:n,p=dbe(t.animationId,t.animationManager),[b,y]=S.useState(h?vL:VS),k=S.useRef(null);return S.useEffect(()=>{h||y(VS)},[h]),S.useEffect(()=>{if(!h||!r)return $p;var w=tbe(vL,VS,obe(a),i,y,p.getTimeoutController()),_=()=>{k.current=w()};return p.start([u,o,_,i,l]),()=>{p.stop(),k.current&&k.current(),l()}},[h,r,i,a,o,u,l,p]),d(b.t)}function G8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(ap(t)),r=S.useRef(e);return r.current!==e&&(n.current=ap(t),r.current=e),n.current}var mbe=["radius"],pbe=["radius"];function xL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xL(Object(n),!0).forEach(function(r){gbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gbe(e,t,n){return(t=bbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bbe(e){var t=ybe(e,"string");return typeof t=="symbol"?t:t+""}function ybe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function _L(e,t){if(e==null)return{};var n,r,i=vbe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vbe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var SL=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],p=0,b=4;p<b;p++)h[p]=i[p]>a?a:i[p];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(t)),d+="L ".concat(e+n-l*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(t+o*h[1])),d+="L ".concat(e+n,",").concat(t+r-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-l*h[2],",").concat(t+r)),d+="L ".concat(e+l*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+r-o*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+n-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n,",").concat(t+o*y,`
            L `).concat(e+n,",").concat(t+r-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n-l*y,",").concat(t+r,`
            L `).concat(e+l*y,",").concat(t+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(t+r-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},kL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xbe=e=>{var t=Xi(e,kL),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&i(J)}catch{}},[]);var{x:a,y:o,width:l,height:u,radius:d,className:h}=t,{animationEasing:p,animationDuration:b,animationBegin:y,isAnimationActive:k,isUpdateAnimationActive:w}=t,_=S.useRef(l),T=S.useRef(u),O=S.useRef(a),j=S.useRef(o),C=S.useMemo(()=>({x:a,y:o,width:l,height:u,radius:d}),[a,o,l,u,d]),M=G8(C,"rectangle-");if(a!==+a||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var P=un("recharts-rectangle",h);if(!w){var I=ka(t),{radius:U}=I,V=_L(I,mbe);return S.createElement("path",lv({},V,{radius:typeof d=="number"?d:void 0,className:P,d:SL(a,o,l,u,d)}))}var q=_.current,H=T.current,B=O.current,W=j.current,Z="0px ".concat(r===-1?1:r,"px"),X="".concat(r,"px 0px"),G=Wge(["strokeDasharray"],b,typeof p=="string"?p:kL.animationEasing);return S.createElement(H8,{animationId:M,key:M,canBegin:r>0,duration:b,easing:p,isActive:w,begin:y},J=>{var Q=Ro(q,l,J),oe=Ro(H,u,J),le=Ro(B,a,J),z=Ro(W,o,J);n.current&&(_.current=Q,T.current=oe,O.current=le,j.current=z);var K;k?J>0?K={transition:G,strokeDasharray:X}:K={strokeDasharray:Z}:K={strokeDasharray:X};var ne=ka(t),{radius:re}=ne,ce=_L(ne,pbe);return S.createElement("path",lv({},ce,{radius:typeof d=="number"?d:void 0,className:P,d:SL(le,z,Q,oe,d),ref:n,style:wL(wL({},K),t.style)}))})};function EL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(n),!0).forEach(function(r){wbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wbe(e,t,n){return(t=_be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _be(e){var t=Sbe(e,"string");return typeof t=="symbol"?t:t+""}function Sbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cv=Math.PI/180,kbe=e=>e*180/Math.PI,Cr=(e,t,n,r)=>({x:e+Math.cos(-cv*r)*n,y:t+Math.sin(-cv*r)*n}),Ebe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},jbe=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},Tbe=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=jbe({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>a&&(u=2*Math.PI-u),{radius:o,angle:kbe(u),angleInRadian:u}},Abe=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},Nbe=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},Obe=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=Tbe({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:d}=Abe(t),h=a,p;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=u}return p?jL(jL({},t),{},{radius:i,angle:Nbe(h,t)}):null};function Y8(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=Cr(t,n,r,i),l=Cr(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pE.apply(null,arguments)}var Cbe=(e,t)=>{var n=va(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Eb=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:u}=e,d=l*(o?1:-1)+r,h=Math.asin(l/d)/cv,p=u?i:i+a*h,b=Cr(t,n,d,p),y=Cr(t,n,r,p),k=u?i-a*h:i,w=Cr(t,n,d*Math.cos(h*cv),k);return{center:b,circleTangency:y,lineTangency:w,theta:h}},q8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,l=Cbe(a,o),u=a+l,d=Cr(t,n,i,a),h=Cr(t,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var b=Cr(t,n,r,a),y=Cr(t,n,r,u);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(b.x,",").concat(b.y," Z")}else p+="L ".concat(t,",").concat(n," Z");return p},Mbe=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=e,h=va(d-u),{circleTangency:p,lineTangency:b,theta:y}=Eb({cx:t,cy:n,radius:i,angle:u,sign:h,cornerRadius:a,cornerIsExternal:l}),{circleTangency:k,lineTangency:w,theta:_}=Eb({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:l}),T=l?Math.abs(u-d):Math.abs(u-d)-y-_;if(T<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):q8({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var O="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:j,lineTangency:C,theta:M}=Eb({cx:t,cy:n,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:P,lineTangency:I,theta:U}=Eb({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),V=l?Math.abs(u-d):Math.abs(u-d)-M-U;if(V<0&&a===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(V>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},Dbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Pbe=e=>{var t=Xi(e,Dbe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:p}=t;if(a<i||d===h)return null;var b=un("recharts-sector",p),y=a-i,k=ec(o,y,0,!0),w;return k>0&&Math.abs(d-h)<360?w=Mbe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(k,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):w=q8({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),S.createElement("path",pE({},ka(t),{className:b,d:w}))};function Rbe(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(D9(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:o,angle:l}=t,u=Cr(r,i,a,l),d=Cr(r,i,o,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return Y8(t)}}var ZS={},XS={},JS={},TL;function Lbe(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G9();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(JS)),JS}var AL;function Ibe(){return AL||(AL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lbe();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(XS)),XS}var NL;function $be(){return NL||(NL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y9(),n=Ibe();function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=o;return u}e.range=r})(ZS)),ZS}var QS,OL;function Bbe(){return OL||(OL=1,QS=$be().range),QS}var zbe=Bbe();const K8=Si(zbe);function Kl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ube(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IT(e){let t,n,r;e.length!==2?(t=Kl,n=(l,u)=>Kl(e(l),u),r=(l,u)=>e(l)-u):(t=e===Kl||e===Ube?e:Fbe,n=e,r=e);function i(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<0?d=p+1:h=p}while(d<h)}return d}function a(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<=0?d=p+1:h=p}while(d<h)}return d}function o(l,u,d=0,h=l.length){const p=i(l,u,d,h-1);return p>d&&r(l[p-1],u)>-r(l[p],u)?p-1:p}return{left:i,center:o,right:a}}function Fbe(){return 0}function W8(e){return e===null?NaN:+e}function*Hbe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Gbe=IT(Kl),Yp=Gbe.right;IT(W8).center;class CL extends Map{constructor(t,n=Kbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ML(this,t))}has(t){return super.has(ML(this,t))}set(t,n){return super.set(Ybe(this,t),n)}delete(t){return super.delete(qbe(this,t))}}function ML({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ybe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qbe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Kbe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wbe(e=Kl){if(e===Kl)return V8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function V8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Vbe=Math.sqrt(50),Zbe=Math.sqrt(10),Xbe=Math.sqrt(2);function uv(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Vbe?10:a>=Zbe?5:a>=Xbe?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=n&&n<2?uv(e,t,n*2):[l,u,d]}function gE(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?uv(t,e,n):uv(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)u[d]=(a-d)/-o;else for(let d=0;d<l;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(i+d)/-o;else for(let d=0;d<l;++d)u[d]=(i+d)*o;return u}function bE(e,t,n){return t=+t,e=+e,n=+n,uv(e,t,n)[2]}function yE(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bE(t,e,n):bE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function DL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function PL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Z8(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?V8:Wbe(i);r>n;){if(r-n>600){const u=r-n+1,d=t-n+1,h=Math.log(u),p=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),y=Math.max(n,Math.floor(t-d*p/u+b)),k=Math.min(r,Math.floor(t+(u-d)*p/u+b));Z8(e,t,y,k,i)}const a=e[t];let o=n,l=r;for(mm(e,n,t),i(e[r],a)>0&&mm(e,n,r);o<l;){for(mm(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?mm(e,n,l):(++l,mm(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function mm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Jbe(e,t,n){if(e=Float64Array.from(Hbe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return PL(e);if(t>=1)return DL(e);var r,i=(r-1)*t,a=Math.floor(i),o=DL(Z8(e,a).subarray(0,a+1)),l=PL(e.subarray(a+1));return o+(l-o)*(i-a)}}function Qbe(e,t,n=W8){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function eye(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Oa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vE=Symbol("implicit");function $T(){var e=new CL,t=[],n=[],r=vE;function i(a){let o=e.get(a);if(o===void 0){if(r!==vE)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new CL;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return $T(t,n).unknown(r)},Oa.apply(i,arguments),i}function BT(){var e=$T().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,u=0,d=0,h=.5;delete e.unknown;function p(){var b=t().length,y=i<r,k=y?i:r,w=y?r:i;a=(w-k)/Math.max(1,b-u+d*2),l&&(a=Math.floor(a)),k+=(w-k-a*(b-u))*h,o=a*(1-u),l&&(k=Math.round(k),o=Math.round(o));var _=eye(b).map(function(T){return k+a*T});return n(y?_.reverse():_)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,p()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(b){return arguments.length?(l=!!b,p()):l},e.padding=function(b){return arguments.length?(u=Math.min(1,d=+b),p()):u},e.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),p()):u},e.paddingOuter=function(b){return arguments.length?(d=+b,p()):d},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),p()):h},e.copy=function(){return BT(t(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},Oa.apply(p(),arguments)}function X8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return X8(t())},e}function tye(){return X8(BT.apply(null,arguments).paddingInner(1))}function zT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function J8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qp(){}var hp=.7,dv=1/hp,nf="\\s*([+-]?\\d+)\\s*",mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nye=/^#([0-9a-f]{3,8})$/,rye=new RegExp(`^rgb\\(${nf},${nf},${nf}\\)$`),iye=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),aye=new RegExp(`^rgba\\(${nf},${nf},${nf},${mp}\\)$`),oye=new RegExp(`^rgba\\(${zo},${zo},${zo},${mp}\\)$`),sye=new RegExp(`^hsl\\(${mp},${zo},${zo}\\)$`),lye=new RegExp(`^hsla\\(${mp},${zo},${zo},${mp}\\)$`),RL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zT(qp,pp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:LL,formatHex:LL,formatHex8:cye,formatHsl:uye,formatRgb:IL,toString:IL});function LL(){return this.rgb().formatHex()}function cye(){return this.rgb().formatHex8()}function uye(){return Q8(this).formatHsl()}function IL(){return this.rgb().formatRgb()}function pp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nye.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$L(t):n===3?new vi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rye.exec(e))?new vi(t[1],t[2],t[3],1):(t=iye.exec(e))?new vi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aye.exec(e))?jb(t[1],t[2],t[3],t[4]):(t=oye.exec(e))?jb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sye.exec(e))?UL(t[1],t[2]/100,t[3]/100,1):(t=lye.exec(e))?UL(t[1],t[2]/100,t[3]/100,t[4]):RL.hasOwnProperty(e)?$L(RL[e]):e==="transparent"?new vi(NaN,NaN,NaN,0):null}function $L(e){return new vi(e>>16&255,e>>8&255,e&255,1)}function jb(e,t,n,r){return r<=0&&(e=t=n=NaN),new vi(e,t,n,r)}function dye(e){return e instanceof qp||(e=pp(e)),e?(e=e.rgb(),new vi(e.r,e.g,e.b,e.opacity)):new vi}function xE(e,t,n,r){return arguments.length===1?dye(e):new vi(e,t,n,r??1)}function vi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zT(vi,xE,J8(qp,{brighter(e){return e=e==null?dv:Math.pow(dv,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new vi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vi(wu(this.r),wu(this.g),wu(this.b),fv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BL,formatHex:BL,formatHex8:fye,formatRgb:zL,toString:zL}));function BL(){return`#${mu(this.r)}${mu(this.g)}${mu(this.b)}`}function fye(){return`#${mu(this.r)}${mu(this.g)}${mu(this.b)}${mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function zL(){const e=fv(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function fv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function UL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ja(e,t,n,r)}function Q8(e){if(e instanceof Ja)return new Ja(e.h,e.s,e.l,e.opacity);if(e instanceof qp||(e=pp(e)),!e)return new Ja;if(e instanceof Ja)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Ja(o,l,u,e.opacity)}function hye(e,t,n,r){return arguments.length===1?Q8(e):new Ja(e,t,n,r??1)}function Ja(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zT(Ja,hye,J8(qp,{brighter(e){return e=e==null?dv:Math.pow(dv,e),new Ja(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new Ja(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vi(ek(e>=240?e-240:e+120,i,r),ek(e,i,r),ek(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ja(FL(this.h),Tb(this.s),Tb(this.l),fv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fv(this.opacity);return`${e===1?"hsl(":"hsla("}${FL(this.h)}, ${Tb(this.s)*100}%, ${Tb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function FL(e){return e=(e||0)%360,e<0?e+360:e}function Tb(e){return Math.max(0,Math.min(1,e||0))}function ek(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UT=e=>()=>e;function mye(e,t){return function(n){return e+n*t}}function pye(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gye(e){return(e=+e)==1?ez:function(t,n){return n-t?pye(t,n,e):UT(isNaN(t)?n:t)}}function ez(e,t){var n=t-e;return n?mye(e,n):UT(isNaN(e)?t:e)}const HL=(function e(t){var n=gye(t);function r(i,a){var o=n((i=xE(i)).r,(a=xE(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),d=ez(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function bye(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function yye(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vye(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Lf(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function xye(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wye(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Lf(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var wE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tk=new RegExp(wE.source,"g");function _ye(e){return function(){return e}}function Sye(e){return function(t){return e(t)+""}}function kye(e,t){var n=wE.lastIndex=tk.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=wE.exec(e))&&(i=tk.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:hv(r,i)})),n=tk.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Sye(u[0].x):_ye(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Lf(e,t){var n=typeof t,r;return t==null||n==="boolean"?UT(t):(n==="number"?hv:n==="string"?(r=pp(t))?(t=r,HL):kye:t instanceof pp?HL:t instanceof Date?xye:yye(t)?bye:Array.isArray(t)?vye:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wye:hv)(e,t)}function FT(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Eye(e,t){t===void 0&&(t=e,e=Lf);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function jye(e){return function(){return e}}function mv(e){return+e}var GL=[0,1];function Zr(e){return e}function _E(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jye(isNaN(t)?NaN:.5)}function Tye(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Aye(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=_E(i,r),a=n(o,a)):(r=_E(r,i),a=n(a,o)),function(l){return a(r(l))}}function Nye(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=_E(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=Yp(e,l,1,r)-1;return a[u](i[u](l))}}function Kp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ix(){var e=GL,t=GL,n=Lf,r,i,a,o=Zr,l,u,d;function h(){var b=Math.min(e.length,t.length);return o!==Zr&&(o=Tye(e[0],e[b-1])),l=b>2?Nye:Aye,u=d=null,p}function p(b){return b==null||isNaN(b=+b)?a:(u||(u=l(e.map(r),t,n)))(r(o(b)))}return p.invert=function(b){return o(i((d||(d=l(t,e.map(r),hv)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,mv),h()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),n=FT,h()},p.clamp=function(b){return arguments.length?(o=b?!0:Zr,h()):o!==Zr},p.interpolate=function(b){return arguments.length?(n=b,h()):n},p.unknown=function(b){return arguments.length?(a=b,p):a},function(b,y){return r=b,i=y,h()}}function HT(){return Ix()(Zr,Zr)}function Oye(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bf(e){return e=pv(Math.abs(e)),e?e[1]:NaN}function Cye(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Mye(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Dye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gp(e){if(!(t=Dye.exec(e)))throw new Error("invalid format: "+e);var t;return new GT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gp.prototype=GT.prototype;function GT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}GT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pye(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var tz;function Rye(e,t){var n=pv(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(tz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+pv(e,Math.max(0,t+a-1))[0]}function YL(e,t){var n=pv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Oye,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YL(e*100,t),r:YL,s:Rye,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KL(e){return e}var WL=Array.prototype.map,VL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lye(e){var t=e.grouping===void 0||e.thousands===void 0?KL:Cye(WL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?KL:Mye(WL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=gp(p);var b=p.fill,y=p.align,k=p.sign,w=p.symbol,_=p.zero,T=p.width,O=p.comma,j=p.precision,C=p.trim,M=p.type;M==="n"?(O=!0,M="g"):qL[M]||(j===void 0&&(j=12),C=!0,M="g"),(_||b==="0"&&y==="=")&&(_=!0,b="0",y="=");var P=w==="$"?n:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I=w==="$"?r:/[%p]/.test(M)?o:"",U=qL[M],V=/[defgprs%]/.test(M);j=j===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function q(H){var B=P,W=I,Z,X,G;if(M==="c")W=U(H)+W,H="";else{H=+H;var J=H<0||1/H<0;if(H=isNaN(H)?u:U(Math.abs(H),j),C&&(H=Pye(H)),J&&+H==0&&k!=="+"&&(J=!1),B=(J?k==="("?k:l:k==="-"||k==="("?"":k)+B,W=(M==="s"?VL[8+tz/3]:"")+W+(J&&k==="("?")":""),V){for(Z=-1,X=H.length;++Z<X;)if(G=H.charCodeAt(Z),48>G||G>57){W=(G===46?i+H.slice(Z+1):H.slice(Z))+W,H=H.slice(0,Z);break}}}O&&!_&&(H=t(H,1/0));var Q=B.length+H.length+W.length,oe=Q<T?new Array(T-Q+1).join(b):"";switch(O&&_&&(H=t(oe+H,oe.length?T-W.length:1/0),oe=""),y){case"<":H=B+H+W+oe;break;case"=":H=B+oe+H+W;break;case"^":H=oe.slice(0,Q=oe.length>>1)+B+H+W+oe.slice(Q);break;default:H=oe+B+H+W;break}return a(H)}return q.toString=function(){return p+""},q}function h(p,b){var y=d((p=gp(p),p.type="f",p)),k=Math.max(-8,Math.min(8,Math.floor(bf(b)/3)))*3,w=Math.pow(10,-k),_=VL[8+k/3];return function(T){return y(w*T)+_}}return{format:d,formatPrefix:h}}var Ab,YT,nz;Iye({thousands:",",grouping:[3],currency:["$",""]});function Iye(e){return Ab=Lye(e),YT=Ab.format,nz=Ab.formatPrefix,Ab}function $ye(e){return Math.max(0,-bf(Math.abs(e)))}function Bye(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bf(t)/3)))*3-bf(Math.abs(e)))}function zye(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bf(t)-bf(e))+1}function rz(e,t,n,r){var i=yE(e,t,n),a;switch(r=gp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Bye(i,o))&&(r.precision=a),nz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zye(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=$ye(i))&&(r.precision=a-(r.type==="%")*2);break}}return YT(r)}function oc(e){var t=e.domain;return e.ticks=function(n){var r=t();return gE(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return rz(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=bE(o,l,n),d===u)return r[i]=o,r[a]=l,t(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function iz(){var e=HT();return e.copy=function(){return Kp(e,iz())},Oa.apply(e,arguments),oc(e)}function az(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,mv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return az(e).unknown(t)},e=arguments.length?Array.from(e,mv):[0,1],oc(n)}function oz(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function ZL(e){return Math.log(e)}function XL(e){return Math.exp(e)}function Uye(e){return-Math.log(-e)}function Fye(e){return-Math.exp(-e)}function Hye(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gye(e){return e===10?Hye:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Yye(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JL(e){return(t,n)=>-e(-t,n)}function qT(e){const t=e(ZL,XL),n=t.domain;let r=10,i,a;function o(){return i=Yye(r),a=Gye(r),n()[0]<0?(i=JL(i),a=JL(a),e(Uye,Fye)):e(ZL,XL),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let d=u[0],h=u[u.length-1];const p=h<d;p&&([d,h]=[h,d]);let b=i(d),y=i(h),k,w;const _=l==null?10:+l;let T=[];if(!(r%1)&&y-b<_){if(b=Math.floor(b),y=Math.ceil(y),d>0){for(;b<=y;++b)for(k=1;k<r;++k)if(w=b<0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}}else for(;b<=y;++b)for(k=r-1;k>=1;--k)if(w=b>0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}T.length*2<_&&(T=gE(d,h,_))}else T=gE(b,y,Math.min(y-b,_)).map(a);return p?T.reverse():T},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=gp(u)).precision==null&&(u.trim=!0),u=YT(u)),l===1/0)return u;const d=Math.max(1,r*l/t.ticks().length);return h=>{let p=h/a(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=d?u(h):""}},t.nice=()=>n(oz(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function sz(){const e=qT(Ix()).domain([1,10]);return e.copy=()=>Kp(e,sz()).base(e.base()),Oa.apply(e,arguments),e}function QL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KT(e){var t=1,n=e(QL(t),eI(t));return n.constant=function(r){return arguments.length?e(QL(t=+r),eI(t)):t},oc(n)}function lz(){var e=KT(Ix());return e.copy=function(){return Kp(e,lz()).constant(e.constant())},Oa.apply(e,arguments)}function tI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qye(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Kye(e){return e<0?-e*e:e*e}function WT(e){var t=e(Zr,Zr),n=1;function r(){return n===1?e(Zr,Zr):n===.5?e(qye,Kye):e(tI(n),tI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},oc(t)}function VT(){var e=WT(Ix());return e.copy=function(){return Kp(e,VT()).exponent(e.exponent())},Oa.apply(e,arguments),e}function Wye(){return VT.apply(null,arguments).exponent(.5)}function nI(e){return Math.sign(e)*e*e}function Vye(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cz(){var e=HT(),t=[0,1],n=!1,r;function i(a){var o=Vye(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(nI(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,mv)).map(nI)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return cz(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Oa.apply(i,arguments),oc(i)}function uz(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Qbe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Yp(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Kl),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return uz().domain(e).range(t).unknown(r)},Oa.apply(a,arguments)}function dz(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Yp(r,u,0,n)]:a}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dz().domain([e,t]).range(i).unknown(a)},Oa.apply(oc(o),arguments)}function fz(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Yp(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return fz().domain(e).range(t).unknown(n)},Oa.apply(i,arguments)}const nk=new Date,rk=new Date;function ar(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let d;do u.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return u},i.filter=a=>ar(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(nk.setTime(+a),rk.setTime(+o),e(nk),e(rk),Math.floor(n(nk,rk))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const gv=ar(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ar(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gv);gv.range;const Ts=1e3,xa=Ts*60,As=xa*60,Is=As*24,ZT=Is*7,rI=Is*30,ik=Is*365,pu=ar(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCSeconds());pu.range;const XT=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getMinutes());XT.range;const JT=ar(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getUTCMinutes());JT.range;const QT=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts-e.getMinutes()*xa)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getHours());QT.range;const eA=ar(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getUTCHours());eA.range;const Wp=ar(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xa)/Is,e=>e.getDate()-1);Wp.range;const $x=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Is,e=>e.getUTCDate()-1);$x.range;const hz=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Is,e=>Math.floor(e/Is));hz.range;function Pu(e){return ar(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*xa)/ZT)}const Bx=Pu(0),bv=Pu(1),Zye=Pu(2),Xye=Pu(3),yf=Pu(4),Jye=Pu(5),Qye=Pu(6);Bx.range;bv.range;Zye.range;Xye.range;yf.range;Jye.range;Qye.range;function Ru(e){return ar(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ZT)}const zx=Ru(0),yv=Ru(1),eve=Ru(2),tve=Ru(3),vf=Ru(4),nve=Ru(5),rve=Ru(6);zx.range;yv.range;eve.range;tve.range;vf.range;nve.range;rve.range;const tA=ar(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tA.range;const nA=ar(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nA.range;const $s=ar(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$s.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});$s.range;const Bs=ar(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bs.range;function mz(e,t,n,r,i,a){const o=[[pu,1,Ts],[pu,5,5*Ts],[pu,15,15*Ts],[pu,30,30*Ts],[a,1,xa],[a,5,5*xa],[a,15,15*xa],[a,30,30*xa],[i,1,As],[i,3,3*As],[i,6,6*As],[i,12,12*As],[r,1,Is],[r,2,2*Is],[n,1,ZT],[t,1,rI],[t,3,3*rI],[e,1,ik]];function l(d,h,p){const b=h<d;b&&([d,h]=[h,d]);const y=p&&typeof p.range=="function"?p:u(d,h,p),k=y?y.range(d,+h+1):[];return b?k.reverse():k}function u(d,h,p){const b=Math.abs(h-d)/p,y=IT(([,,_])=>_).right(o,b);if(y===o.length)return e.every(yE(d/ik,h/ik,p));if(y===0)return gv.every(Math.max(yE(d,h,p),1));const[k,w]=o[b/o[y-1][2]<o[y][2]/b?y-1:y];return k.every(w)}return[l,u]}const[ive,ave]=mz(Bs,nA,zx,hz,eA,JT),[ove,sve]=mz($s,tA,Bx,Wp,QT,XT);function ak(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ok(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lve(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=gm(i),h=bm(i),p=gm(a),b=bm(a),y=gm(o),k=bm(o),w=gm(l),_=bm(l),T=gm(u),O=bm(u),j={a:J,A:Q,b:oe,B:le,c:null,d:cI,e:cI,f:Cve,g:Uve,G:Hve,H:Ave,I:Nve,j:Ove,L:pz,m:Mve,M:Dve,p:z,q:K,Q:fI,s:hI,S:Pve,u:Rve,U:Lve,V:Ive,w:$ve,W:Bve,x:null,X:null,y:zve,Y:Fve,Z:Gve,"%":dI},C={a:ne,A:re,b:ce,B:ue,c:null,d:uI,e:uI,f:Wve,g:ixe,G:oxe,H:Yve,I:qve,j:Kve,L:bz,m:Vve,M:Zve,p:ge,q:ke,Q:fI,s:hI,S:Xve,u:Jve,U:Qve,V:exe,w:txe,W:nxe,x:null,X:null,y:rxe,Y:axe,Z:sxe,"%":dI},M={a:q,A:H,b:B,B:W,c:Z,d:sI,e:sI,f:kve,g:oI,G:aI,H:lI,I:lI,j:xve,L:Sve,m:vve,M:wve,p:V,q:yve,Q:jve,s:Tve,S:_ve,u:hve,U:mve,V:pve,w:fve,W:gve,x:X,X:G,y:oI,Y:aI,Z:bve,"%":Eve};j.x=P(n,j),j.X=P(r,j),j.c=P(t,j),C.x=P(n,C),C.X=P(r,C),C.c=P(t,C);function P(ie,Ae){return function(Ee){var he=[],Le=-1,Ie=0,tt=ie.length,Ne,Be,Ue;for(Ee instanceof Date||(Ee=new Date(+Ee));++Le<tt;)ie.charCodeAt(Le)===37&&(he.push(ie.slice(Ie,Le)),(Be=iI[Ne=ie.charAt(++Le)])!=null?Ne=ie.charAt(++Le):Be=Ne==="e"?" ":"0",(Ue=Ae[Ne])&&(Ne=Ue(Ee,Be)),he.push(Ne),Ie=Le+1);return he.push(ie.slice(Ie,Le)),he.join("")}}function I(ie,Ae){return function(Ee){var he=pm(1900,void 0,1),Le=U(he,ie,Ee+="",0),Ie,tt;if(Le!=Ee.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Ae&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Ie=ok(pm(he.y,0,1)),tt=Ie.getUTCDay(),Ie=tt>4||tt===0?yv.ceil(Ie):yv(Ie),Ie=$x.offset(Ie,(he.V-1)*7),he.y=Ie.getUTCFullYear(),he.m=Ie.getUTCMonth(),he.d=Ie.getUTCDate()+(he.w+6)%7):(Ie=ak(pm(he.y,0,1)),tt=Ie.getDay(),Ie=tt>4||tt===0?bv.ceil(Ie):bv(Ie),Ie=Wp.offset(Ie,(he.V-1)*7),he.y=Ie.getFullYear(),he.m=Ie.getMonth(),he.d=Ie.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),tt="Z"in he?ok(pm(he.y,0,1)).getUTCDay():ak(pm(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(tt+5)%7:he.w+he.U*7-(tt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,ok(he)):ak(he)}}function U(ie,Ae,Ee,he){for(var Le=0,Ie=Ae.length,tt=Ee.length,Ne,Be;Le<Ie;){if(he>=tt)return-1;if(Ne=Ae.charCodeAt(Le++),Ne===37){if(Ne=Ae.charAt(Le++),Be=M[Ne in iI?Ae.charAt(Le++):Ne],!Be||(he=Be(ie,Ee,he))<0)return-1}else if(Ne!=Ee.charCodeAt(he++))return-1}return he}function V(ie,Ae,Ee){var he=d.exec(Ae.slice(Ee));return he?(ie.p=h.get(he[0].toLowerCase()),Ee+he[0].length):-1}function q(ie,Ae,Ee){var he=y.exec(Ae.slice(Ee));return he?(ie.w=k.get(he[0].toLowerCase()),Ee+he[0].length):-1}function H(ie,Ae,Ee){var he=p.exec(Ae.slice(Ee));return he?(ie.w=b.get(he[0].toLowerCase()),Ee+he[0].length):-1}function B(ie,Ae,Ee){var he=T.exec(Ae.slice(Ee));return he?(ie.m=O.get(he[0].toLowerCase()),Ee+he[0].length):-1}function W(ie,Ae,Ee){var he=w.exec(Ae.slice(Ee));return he?(ie.m=_.get(he[0].toLowerCase()),Ee+he[0].length):-1}function Z(ie,Ae,Ee){return U(ie,t,Ae,Ee)}function X(ie,Ae,Ee){return U(ie,n,Ae,Ee)}function G(ie,Ae,Ee){return U(ie,r,Ae,Ee)}function J(ie){return o[ie.getDay()]}function Q(ie){return a[ie.getDay()]}function oe(ie){return u[ie.getMonth()]}function le(ie){return l[ie.getMonth()]}function z(ie){return i[+(ie.getHours()>=12)]}function K(ie){return 1+~~(ie.getMonth()/3)}function ne(ie){return o[ie.getUTCDay()]}function re(ie){return a[ie.getUTCDay()]}function ce(ie){return u[ie.getUTCMonth()]}function ue(ie){return l[ie.getUTCMonth()]}function ge(ie){return i[+(ie.getUTCHours()>=12)]}function ke(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var Ae=P(ie+="",j);return Ae.toString=function(){return ie},Ae},parse:function(ie){var Ae=I(ie+="",!1);return Ae.toString=function(){return ie},Ae},utcFormat:function(ie){var Ae=P(ie+="",C);return Ae.toString=function(){return ie},Ae},utcParse:function(ie){var Ae=I(ie+="",!0);return Ae.toString=function(){return ie},Ae}}}var iI={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,cve=/^%/,uve=/[\\^$*+?|[\]().{}]/g;function Rt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function dve(e){return e.replace(uve,"\\$&")}function gm(e){return new RegExp("^(?:"+e.map(dve).join("|")+")","i")}function bm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fve(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hve(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function pve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aI(e,t,n){var r=wr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oI(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bve(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yve(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sI(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xve(e,t,n){var r=wr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lI(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _ve(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Sve(e,t,n){var r=wr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kve(e,t,n){var r=wr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Eve(e,t,n){var r=cve.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jve(e,t,n){var r=wr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Tve(e,t,n){var r=wr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cI(e,t){return Rt(e.getDate(),t,2)}function Ave(e,t){return Rt(e.getHours(),t,2)}function Nve(e,t){return Rt(e.getHours()%12||12,t,2)}function Ove(e,t){return Rt(1+Wp.count($s(e),e),t,3)}function pz(e,t){return Rt(e.getMilliseconds(),t,3)}function Cve(e,t){return pz(e,t)+"000"}function Mve(e,t){return Rt(e.getMonth()+1,t,2)}function Dve(e,t){return Rt(e.getMinutes(),t,2)}function Pve(e,t){return Rt(e.getSeconds(),t,2)}function Rve(e){var t=e.getDay();return t===0?7:t}function Lve(e,t){return Rt(Bx.count($s(e)-1,e),t,2)}function gz(e){var t=e.getDay();return t>=4||t===0?yf(e):yf.ceil(e)}function Ive(e,t){return e=gz(e),Rt(yf.count($s(e),e)+($s(e).getDay()===4),t,2)}function $ve(e){return e.getDay()}function Bve(e,t){return Rt(bv.count($s(e)-1,e),t,2)}function zve(e,t){return Rt(e.getFullYear()%100,t,2)}function Uve(e,t){return e=gz(e),Rt(e.getFullYear()%100,t,2)}function Fve(e,t){return Rt(e.getFullYear()%1e4,t,4)}function Hve(e,t){var n=e.getDay();return e=n>=4||n===0?yf(e):yf.ceil(e),Rt(e.getFullYear()%1e4,t,4)}function Gve(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rt(t/60|0,"0",2)+Rt(t%60,"0",2)}function uI(e,t){return Rt(e.getUTCDate(),t,2)}function Yve(e,t){return Rt(e.getUTCHours(),t,2)}function qve(e,t){return Rt(e.getUTCHours()%12||12,t,2)}function Kve(e,t){return Rt(1+$x.count(Bs(e),e),t,3)}function bz(e,t){return Rt(e.getUTCMilliseconds(),t,3)}function Wve(e,t){return bz(e,t)+"000"}function Vve(e,t){return Rt(e.getUTCMonth()+1,t,2)}function Zve(e,t){return Rt(e.getUTCMinutes(),t,2)}function Xve(e,t){return Rt(e.getUTCSeconds(),t,2)}function Jve(e){var t=e.getUTCDay();return t===0?7:t}function Qve(e,t){return Rt(zx.count(Bs(e)-1,e),t,2)}function yz(e){var t=e.getUTCDay();return t>=4||t===0?vf(e):vf.ceil(e)}function exe(e,t){return e=yz(e),Rt(vf.count(Bs(e),e)+(Bs(e).getUTCDay()===4),t,2)}function txe(e){return e.getUTCDay()}function nxe(e,t){return Rt(yv.count(Bs(e)-1,e),t,2)}function rxe(e,t){return Rt(e.getUTCFullYear()%100,t,2)}function ixe(e,t){return e=yz(e),Rt(e.getUTCFullYear()%100,t,2)}function axe(e,t){return Rt(e.getUTCFullYear()%1e4,t,4)}function oxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vf(e):vf.ceil(e),Rt(e.getUTCFullYear()%1e4,t,4)}function sxe(){return"+0000"}function dI(){return"%"}function fI(e){return+e}function hI(e){return Math.floor(+e/1e3)}var Dd,vz,xz;lxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lxe(e){return Dd=lve(e),vz=Dd.format,Dd.parse,xz=Dd.utcFormat,Dd.utcParse,Dd}function cxe(e){return new Date(e)}function uxe(e){return e instanceof Date?+e:+new Date(+e)}function rA(e,t,n,r,i,a,o,l,u,d){var h=HT(),p=h.invert,b=h.domain,y=d(".%L"),k=d(":%S"),w=d("%I:%M"),_=d("%I %p"),T=d("%a %d"),O=d("%b %d"),j=d("%B"),C=d("%Y");function M(P){return(u(P)<P?y:l(P)<P?k:o(P)<P?w:a(P)<P?_:r(P)<P?i(P)<P?T:O:n(P)<P?j:C)(P)}return h.invert=function(P){return new Date(p(P))},h.domain=function(P){return arguments.length?b(Array.from(P,uxe)):b().map(cxe)},h.ticks=function(P){var I=b();return e(I[0],I[I.length-1],P??10)},h.tickFormat=function(P,I){return I==null?M:d(I)},h.nice=function(P){var I=b();return(!P||typeof P.range!="function")&&(P=t(I[0],I[I.length-1],P??10)),P?b(oz(I,P)):h},h.copy=function(){return Kp(h,rA(e,t,n,r,i,a,o,l,u,d))},h}function dxe(){return Oa.apply(rA(ove,sve,$s,tA,Bx,Wp,QT,XT,pu,vz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fxe(){return Oa.apply(rA(ive,ave,Bs,nA,zx,$x,eA,JT,pu,xz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ux(){var e=0,t=1,n,r,i,a,o=Zr,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(i===0?.5:(p=(a(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function h(p){return function(b){var y,k;return arguments.length?([y,k]=b,o=p(y,k),d):[o(0),o(1)]}}return d.range=h(Lf),d.rangeRound=h(FT),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return a=p,n=p(e),r=p(t),i=n===r?0:1/(r-n),d}}function sc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wz(){var e=oc(Ux()(Zr));return e.copy=function(){return sc(e,wz())},qs.apply(e,arguments)}function _z(){var e=qT(Ux()).domain([1,10]);return e.copy=function(){return sc(e,_z()).base(e.base())},qs.apply(e,arguments)}function Sz(){var e=KT(Ux());return e.copy=function(){return sc(e,Sz()).constant(e.constant())},qs.apply(e,arguments)}function iA(){var e=WT(Ux());return e.copy=function(){return sc(e,iA()).exponent(e.exponent())},qs.apply(e,arguments)}function hxe(){return iA.apply(null,arguments).exponent(.5)}function kz(){var e=[],t=Zr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Yp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Kl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Jbe(e,a/r))},n.copy=function(){return kz(t).domain(e)},qs.apply(n,arguments)}function Fx(){var e=0,t=.5,n=1,r=1,i,a,o,l,u,d=Zr,h,p=!1,b;function y(w){return isNaN(w=+w)?b:(w=.5+((w=+h(w))-a)*(r*w<r*a?l:u),d(p?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y):[e,t,n]},y.clamp=function(w){return arguments.length?(p=!!w,y):p},y.interpolator=function(w){return arguments.length?(d=w,y):d};function k(w){return function(_){var T,O,j;return arguments.length?([T,O,j]=_,d=Eye(w,[T,O,j]),y):[d(0),d(.5),d(1)]}}return y.range=k(Lf),y.rangeRound=k(FT),y.unknown=function(w){return arguments.length?(b=w,y):b},function(w){return h=w,i=w(e),a=w(t),o=w(n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y}}function Ez(){var e=oc(Fx()(Zr));return e.copy=function(){return sc(e,Ez())},qs.apply(e,arguments)}function jz(){var e=qT(Fx()).domain([.1,1,10]);return e.copy=function(){return sc(e,jz()).base(e.base())},qs.apply(e,arguments)}function Tz(){var e=KT(Fx());return e.copy=function(){return sc(e,Tz()).constant(e.constant())},qs.apply(e,arguments)}function aA(){var e=WT(Fx());return e.copy=function(){return sc(e,aA()).exponent(e.exponent())},qs.apply(e,arguments)}function mxe(){return aA.apply(null,arguments).exponent(.5)}const Tm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:BT,scaleDiverging:Ez,scaleDivergingLog:jz,scaleDivergingPow:aA,scaleDivergingSqrt:mxe,scaleDivergingSymlog:Tz,scaleIdentity:az,scaleImplicit:vE,scaleLinear:iz,scaleLog:sz,scaleOrdinal:$T,scalePoint:tye,scalePow:VT,scaleQuantile:uz,scaleQuantize:dz,scaleRadial:cz,scaleSequential:wz,scaleSequentialLog:_z,scaleSequentialPow:iA,scaleSequentialQuantile:kz,scaleSequentialSqrt:hxe,scaleSequentialSymlog:Sz,scaleSqrt:Wye,scaleSymlog:lz,scaleThreshold:fz,scaleTime:dxe,scaleUtc:fxe,tickFormat:rz},Symbol.toStringTag,{value:"Module"}));var lc=e=>e.chartData,pxe=xe([lc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),oA=(e,t,n,r)=>r?pxe(e):lc(e);function tc(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Pn(t)&&Pn(n))return!0}return!1}function mI(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Az(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Pn(n))i=n;else if(typeof n=="function")return;if(Pn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(tc(o))return o}}function gxe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(tc(r))return mI(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(et(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[0]))}catch{}else if(typeof i=="string"&&G3.test(i)){var u=G3.exec(i);if(u==null||t==null)o=void 0;else{var d=+u[1];o=t[0]-d}}else o=t?.[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(et(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t?.[1]))}catch{}else if(typeof a=="string"&&Y3.test(a)){var h=Y3.exec(a);if(h==null||t==null)l=void 0;else{var p=+h[1];l=t[1]+p}}else l=t?.[1];var b=[o,l];if(tc(b))return t==null?b:mI(b,t,n)}}}var If=1e9,bxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lA,yn=!0,ja="[DecimalError] ",_u=ja+"Invalid argument: ",sA=ja+"Exponent out of range: ",$f=Math.floor,su=Math.pow,yxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui,gr=1e7,cn=7,Nz=9007199254740991,vv=$f(Nz/cn),Fe={};Fe.absoluteValue=Fe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Fe.comparedTo=Fe.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*cn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(e){return Os(this,new this.constructor(e))};Fe.dividedToIntegerBy=Fe.idiv=function(e){var t=this,n=t.constructor;return en(Os(t,new n(e),0,1),n.precision)};Fe.equals=Fe.eq=function(e){return!this.cmp(e)};Fe.exponent=function(){return Jn(this)};Fe.greaterThan=Fe.gt=function(e){return this.cmp(e)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(e){return this.cmp(e)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(e){return this.cmp(e)<0};Fe.lessThanOrEqualTo=Fe.lte=function(e){return this.cmp(e)<1};Fe.logarithm=Fe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ui))throw Error(ja+"NaN");if(n.s<1)throw Error(ja+(n.s?"NaN":"-Infinity"));return n.eq(Ui)?new r(0):(yn=!1,t=Os(bp(n,a),bp(e,a),a),yn=!0,en(t,i))};Fe.minus=Fe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Mz(t,e):Oz(t,(e.s=-e.s,e))};Fe.modulo=Fe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ja+"NaN");return n.s?(yn=!1,t=Os(n,e,0,1).times(e),yn=!0,n.minus(t)):en(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return Cz(this)};Fe.naturalLogarithm=Fe.ln=function(){return bp(this)};Fe.negated=Fe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Fe.plus=Fe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Oz(t,e):Mz(t,(e.s=-e.s,e))};Fe.precision=Fe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(_u+e);if(t=Jn(i)+1,r=i.d.length-1,n=r*cn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Fe.squareRoot=Fe.sqrt=function(){var e,t,n,r,i,a,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(ja+"NaN")}for(e=Jn(l),yn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Io(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=$f((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new u(t)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(Os(l,a,o+2)).times(.5),Io(a.d).slice(0,o)===(t=Io(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(en(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return yn=!0,en(r,n)};Fe.times=Fe.mul=function(e){var t,n,r,i,a,o,l,u,d,h=this,p=h.constructor,b=h.d,y=(e=new p(e)).d;if(!h.s||!e.s)return new p(0);for(e.s*=h.s,n=h.e+e.e,u=b.length,d=y.length,u<d&&(a=b,b=y,y=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=u+r;i>r;)l=a[i]+y[r]*b[i-r-1]+t,a[i--]=l%gr|0,t=l/gr|0;a[i]=(a[i]+t)%gr|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,yn?en(e,p.precision):e};Fe.toDecimalPlaces=Fe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Yo(e,0,If),t===void 0?t=r.rounding:Yo(t,0,8),en(n,e+Jn(n)+1,t))};Fe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Nu(r,!0):(Yo(e,0,If),t===void 0?t=i.rounding:Yo(t,0,8),r=en(new i(r),e+1,t),n=Nu(r,!0,e+1)),n};Fe.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Nu(i):(Yo(e,0,If),t===void 0?t=a.rounding:Yo(t,0,8),r=en(new a(i),e+Jn(i)+1,t),n=Nu(r.abs(),!1,e+Jn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var e=this,t=e.constructor;return en(new t(e),Jn(e)+1,t.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(e){var t,n,r,i,a,o,l=this,u=l.constructor,d=12,h=+(e=new u(e));if(!e.s)return new u(Ui);if(l=new u(l),!l.s){if(e.s<1)throw Error(ja+"Infinity");return l}if(l.eq(Ui))return l;if(r=u.precision,e.eq(Ui))return en(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=Nz){for(i=new u(Ui),t=Math.ceil(r/cn+4),yn=!1;n%2&&(i=i.times(l),gI(i.d,t)),n=$f(n/2),n!==0;)l=l.times(l),gI(l.d,t);return yn=!0,e.s<0?new u(Ui).div(i):en(i,r)}}else if(a<0)throw Error(ja+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,yn=!1,i=e.times(bp(l,r+d)),yn=!0,i=Cz(i),i.s=a,i};Fe.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Jn(i),r=Nu(i,n<=a.toExpNeg||n>=a.toExpPos)):(Yo(e,1,If),t===void 0?t=a.rounding:Yo(t,0,8),i=en(new a(i),e,t),n=Jn(i),r=Nu(i,e<=n||n<=a.toExpNeg,e)),r};Fe.toSignificantDigits=Fe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Yo(e,1,If),t===void 0?t=r.rounding:Yo(t,0,8)),en(new r(n),e,t)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jn(e),n=e.constructor;return Nu(e,t<=n.toExpNeg||t>=n.toExpPos)};function Oz(e,t){var n,r,i,a,o,l,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),yn?en(t,p):t;if(u=e.d,d=t.d,o=e.e,i=t.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,l=d.length):(r=d,i=o,l=u.length),o=Math.ceil(p/cn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=d.length,l-a<0&&(a=l,r=d,d=u,u=r),n=0;a;)n=(u[--a]=u[a]+d[a]+n)/gr|0,u[a]%=gr;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=i,yn?en(t,p):t}function Yo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(_u+e)}function Io(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=cn-r.length,n&&(a+=Rl(n)),a+=r;o=e[t],r=o+"",n=cn-r.length,n&&(a+=Rl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Os=(function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%gr|0,o=a/gr|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,u;if(a!=o)u=a>o?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*gr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,u,d,h,p,b,y,k,w,_,T,O,j,C,M,P,I,U,V=r.constructor,q=r.s==i.s?1:-1,H=r.d,B=i.d;if(!r.s)return new V(r);if(!i.s)throw Error(ja+"Division by zero");for(u=r.e-i.e,I=B.length,M=H.length,y=new V(q),k=y.d=[],d=0;B[d]==(H[d]||0);)++d;if(B[d]>(H[d]||0)&&--u,a==null?O=a=V.precision:o?O=a+(Jn(r)-Jn(i))+1:O=a,O<0)return new V(0);if(O=O/cn+2|0,d=0,I==1)for(h=0,B=B[0],O++;(d<M||h)&&O--;d++)j=h*gr+(H[d]||0),k[d]=j/B|0,h=j%B|0;else{for(h=gr/(B[0]+1)|0,h>1&&(B=e(B,h),H=e(H,h),I=B.length,M=H.length),C=I,w=H.slice(0,I),_=w.length;_<I;)w[_++]=0;U=B.slice(),U.unshift(0),P=B[0],B[1]>=gr/2&&++P;do h=0,l=t(B,w,I,_),l<0?(T=w[0],I!=_&&(T=T*gr+(w[1]||0)),h=T/P|0,h>1?(h>=gr&&(h=gr-1),p=e(B,h),b=p.length,_=w.length,l=t(p,w,b,_),l==1&&(h--,n(p,I<b?U:B,b))):(h==0&&(l=h=1),p=B.slice()),b=p.length,b<_&&p.unshift(0),n(w,p,_),l==-1&&(_=w.length,l=t(B,w,I,_),l<1&&(h++,n(w,I<_?U:B,_))),_=w.length):l===0&&(h++,w=[0]),k[d++]=h,l&&w[0]?w[_++]=H[C]||0:(w=[H[C]],_=1);while((C++<M||w[0]!==void 0)&&O--)}return k[0]||k.shift(),y.e=u,en(y,o?a+Jn(y)+1:a)}})();function Cz(e,t){var n,r,i,a,o,l,u=0,d=0,h=e.constructor,p=h.precision;if(Jn(e)>16)throw Error(sA+Jn(e));if(!e.s)return new h(Ui);for(yn=!1,l=p,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(su(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new h(Ui),h.precision=l;;){if(i=en(i.times(e),l),n=n.times(++u),o=a.plus(Os(i,n,l)),Io(o.d).slice(0,l)===Io(a.d).slice(0,l)){for(;d--;)a=en(a.times(a),l);return h.precision=p,t==null?(yn=!0,en(a,p)):a}a=o}}function Jn(e){for(var t=e.e*cn,n=e.d[0];n>=10;n/=10)t++;return t}function sk(e,t,n){if(t>e.LN10.sd())throw yn=!0,n&&(e.precision=n),Error(ja+"LN10 precision limit exceeded");return en(new e(e.LN10),t)}function Rl(e){for(var t="";e--;)t+="0";return t}function bp(e,t){var n,r,i,a,o,l,u,d,h,p=1,b=10,y=e,k=y.d,w=y.constructor,_=w.precision;if(y.s<1)throw Error(ja+(y.s?"NaN":"-Infinity"));if(y.eq(Ui))return new w(0);if(t==null?(yn=!1,d=_):d=t,y.eq(10))return t==null&&(yn=!0),sk(w,d);if(d+=b,w.precision=d,n=Io(k),r=n.charAt(0),a=Jn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=Io(y.d),r=n.charAt(0),p++;a=Jn(y),r>1?(y=new w("0."+n),a++):y=new w(r+"."+n.slice(1))}else return u=sk(w,d+2,_).times(a+""),y=bp(new w(r+"."+n.slice(1)),d-b).plus(u),w.precision=_,t==null?(yn=!0,en(y,_)):y;for(l=o=y=Os(y.minus(Ui),y.plus(Ui),d),h=en(y.times(y),d),i=3;;){if(o=en(o.times(h),d),u=l.plus(Os(o,new w(i),d)),Io(u.d).slice(0,d)===Io(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(sk(w,d+2,_).times(a+""))),l=Os(l,new w(p),d),w.precision=_,t==null?(yn=!0,en(l,_)):l;l=u,i+=2}}function pI(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=$f(n/cn),e.d=[],r=(n+1)%cn,n<0&&(r+=cn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=cn;r<i;)e.d.push(+t.slice(r,r+=cn));t=t.slice(r),r=cn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),yn&&(e.e>vv||e.e<-vv))throw Error(sA+n)}else e.s=0,e.e=0,e.d=[0];return e}function en(e,t,n){var r,i,a,o,l,u,d,h,p=e.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=cn,i=t,d=p[h=0];else{if(h=Math.ceil((r+1)/cn),a=p.length,h>=a)return e;for(d=a=p[h],o=1;a>=10;a/=10)o++;r%=cn,i=r-cn+o}if(n!==void 0&&(a=su(10,o-i-1),l=d/a%10|0,u=t<0||p[h+1]!==void 0||d%a,u=n<4?(l||u)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/su(10,o-i):0:p[h-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return u?(a=Jn(e),p.length=1,t=t-a-1,p[0]=su(10,(cn-t%cn)%cn),e.e=$f(-t/cn)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(r==0?(p.length=h,a=1,h--):(p.length=h+1,a=su(10,cn-r),p[h]=i>0?(d/su(10,o-i)%su(10,i)|0)*a:0),u)for(;;)if(h==0){(p[0]+=a)==gr&&(p[0]=1,++e.e);break}else{if(p[h]+=a,p[h]!=gr)break;p[h--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(yn&&(e.e>vv||e.e<-vv))throw Error(sA+Jn(e));return e}function Mz(e,t){var n,r,i,a,o,l,u,d,h,p,b=e.constructor,y=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),yn?en(t,y):t;if(u=e.d,p=t.d,r=t.e,d=e.e,u=u.slice(),o=d-r,o){for(h=o<0,h?(n=u,o=-o,l=p.length):(n=p,r=d,l=u.length),i=Math.max(Math.ceil(y/cn),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=p.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=p[i]){h=u[i]<p[i];break}o=0}for(h&&(n=u,u=p,p=n,t.s=-t.s),l=u.length,i=p.length-l;i>0;--i)u[l++]=0;for(i=p.length;i>o;){if(u[--i]<p[i]){for(a=i;a&&u[--a]===0;)u[a]=gr-1;--u[a],u[i]+=gr}u[i]-=p[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=r,yn?en(t,y):t):new b(0)}function Nu(e,t,n){var r,i=Jn(e),a=Io(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Rl(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Rl(-i-1)+a,n&&(r=n-o)>0&&(a+=Rl(r))):i>=o?(a+=Rl(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Rl(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Rl(r))),e.s<0?"-"+a:a}function gI(e,t){if(e.length>t)return e.length=t,!0}function Dz(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(_u+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return pI(o,a.toString())}else if(typeof a!="string")throw Error(_u+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,yxe.test(a))pI(o,a);else throw Error(_u+a)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Dz,i.config=i.set=vxe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vxe(e){if(!e||typeof e!="object")throw Error(ja+"Object expected");var t,n,r,i=["precision",1,If,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if($f(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(_u+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(_u+n+": "+r);return this}var lA=Dz(bxe);Ui=new lA(1);const qt=lA;var xxe=e=>e,Pz={},Rz=e=>e===Pz,bI=e=>function t(){return arguments.length===0||arguments.length===1&&Rz(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Lz=(e,t)=>e===1?t:bI(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==Pz).length;return a>=e?t(...r):Lz(e-a,bI(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=r.map(h=>Rz(h)?l.shift():h);return t(...d,...l)}))}),wxe=e=>Lz(e.length,e),SE=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},_xe=wxe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Sxe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return xxe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((l,u)=>u(l),a(...arguments))}},kE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Iz(e){var t;return e===0?t=1:t=Math.floor(new qt(e).abs().log(10).toNumber())+1,t}function $z(e,t,n){for(var r=new qt(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Bz=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},zz=(e,t,n)=>{if(e.lte(0))return new qt(0);var r=Iz(e.toNumber()),i=new qt(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new qt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return t?new qt(u.toNumber()):new qt(Math.ceil(u.toNumber()))},kxe=(e,t,n)=>{var r=new qt(1),i=new qt(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new qt(10).pow(Iz(e)-1),i=new qt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new qt(Math.floor(e)))}else e===0?i=new qt(Math.floor((t-1)/2)):n||(i=new qt(Math.floor(e)));var o=Math.floor((t-1)/2),l=Sxe(_xe(u=>i.add(new qt(u-o).mul(r)).toNumber()),SE);return l(0,t)},Uz=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new qt(0),tickMin:new qt(0),tickMax:new qt(0)};var o=zz(new qt(n).sub(t).div(r-1),i,a),l;t<=0&&n>=0?l=new qt(0):(l=new qt(t).add(n).div(2),l=l.sub(new qt(l).mod(o)));var u=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new qt(n).sub(l).div(o).toNumber()),h=u+d+1;return h>r?Uz(t,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,u=n>0?u:u+(r-h)),{step:o,tickMin:l.sub(new qt(u).mul(o)),tickMax:l.add(new qt(d).mul(o))})},Exe=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,u]=Bz([n,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...SE(0,i-1).map(()=>1/0)]:[...SE(0,i-1).map(()=>-1/0),u];return n>r?kE(d):d}if(l===u)return kxe(l,i,a);var{step:h,tickMin:p,tickMax:b}=Uz(l,u,o,a,0),y=$z(p,b.add(new qt(.1).mul(h)),h);return n>r?kE(y):y},jxe=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=Bz([r,i]);if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var u=Math.max(n,2),d=zz(new qt(l).sub(o).div(u-1),a,0),h=[...$z(new qt(o),new qt(l),d),l];return a===!1&&(h=h.map(p=>Math.round(p))),r>i?kE(h):h},Txe=e=>e.rootProps.barCategoryGap,Hx=e=>e.rootProps.stackOffset,Fz=e=>e.rootProps.reverseStackOrder,cA=e=>e.options.chartName,uA=e=>e.rootProps.syncId,Hz=e=>e.rootProps.syncMethod,dA=e=>e.options.eventEmitter,Axe=e=>e.rootProps.baseValue,Xr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ss={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Bi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Gx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Nxe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ss.angleAxisId,includeHidden:!1,name:void 0,reversed:Ss.reversed,scale:Ss.scale,tick:Ss.tick,tickCount:void 0,ticks:void 0,type:Ss.type,unit:void 0},Oxe={allowDataOverflow:Bi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bi.scale,tick:Bi.tick,tickCount:Bi.tickCount,ticks:void 0,type:Bi.type,unit:void 0},Cxe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ss.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ss.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ss.scale,tick:Ss.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Mxe={allowDataOverflow:Bi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bi.scale,tick:Bi.tick,tickCount:Bi.tickCount,ticks:void 0,type:"category",unit:void 0},fA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Cxe:Nxe,hA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Mxe:Oxe,Yx=e=>e.polarOptions,mA=xe([Gs,Ys,Rr],Ebe),Gz=xe([Yx,mA],(e,t)=>{if(e!=null)return ec(e.innerRadius,t,0)}),Yz=xe([Yx,mA],(e,t)=>{if(e!=null)return ec(e.outerRadius,t,t*.8)}),Dxe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},qz=xe([Yx],Dxe);xe([fA,qz],Gx);var Kz=xe([mA,Gz,Yz],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});xe([hA,Kz],Gx);var Wz=xe([an,Yx,Gz,Yz,Gs,Ys],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=t;return{cx:ec(o,i,i/2),cy:ec(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),or=(e,t)=>t,qx=(e,t,n)=>n;function pA(e){return e?.id}function Vz(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=pA(l);d.forEach((p,b)=>{var y=a==null||i?b:String(Fr(p,a,null)),k=Fr(p,l.dataKey,0),w;o.has(y)?w=o.get(y):w={},Object.assign(w,{[h]:k}),o.set(y,w)})}}),Array.from(o.values())}function gA(e){return e.stackId!=null&&e.dataKey!=null}var Kx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Wx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Pxe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var sr=e=>{var t=an(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Bf=e=>e.tooltip.settings.axisId;function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){Rxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rxe(e,t,n){return(t=Lxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lxe(e){var t=Ixe(e,"string");return typeof t=="symbol"?t:t+""}function Ixe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EE=[0,"auto"],hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Zz=(e,t)=>e.cartesianAxis.xAxis[t],Ks=(e,t)=>{var n=Zz(e,t);return n??hr},mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:EE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Fp},Xz=(e,t)=>e.cartesianAxis.yAxis[t],Ws=(e,t)=>{var n=Xz(e,t);return n??mr},$xe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bA=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??$xe},ti=(e,t,n)=>{switch(t){case"xAxis":return Ks(e,n);case"yAxis":return Ws(e,n);case"zAxis":return bA(e,n);case"angleAxis":return fA(e,n);case"radiusAxis":return hA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Bxe=(e,t,n)=>{switch(t){case"xAxis":return Ks(e,n);case"yAxis":return Ws(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Vp=(e,t,n)=>{switch(t){case"xAxis":return Ks(e,n);case"yAxis":return Ws(e,n);case"angleAxis":return fA(e,n);case"radiusAxis":return hA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Jz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Qz(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var eU=e=>e.graphicalItems.cartesianItems,zxe=xe([or,qx],Qz),tU=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Zp=xe([eU,ti,zxe],tU,{memoizeOptions:{resultEqualityCheck:Wx}}),nU=xe([Zp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(gA)),rU=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Uxe=xe([Zp],rU),iU=e=>e.map(t=>t.data).filter(Boolean).flat(1),Fxe=xe([Zp],iU,{memoizeOptions:{resultEqualityCheck:Wx}}),aU=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},yA=xe([Fxe,oA],aU),oU=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Fr(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Fr(i,r)}))):e.map(r=>({value:r})),Vx=xe([yA,ti,Zp],oU);function sU(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ny(e){if(Ho(e)||e instanceof Date){var t=Number(e);if(Pn(t))return t}}function vI(e){if(Array.isArray(e)){var t=[ny(e[0]),ny(e[1])];return tc(t)?t:void 0}var n=ny(e);if(n!=null)return[n,n]}function zs(e){return e.map(ny).filter(cme)}function Hxe(e,t,n){return!n||typeof t!="number"||so(t)?[]:n.length?zs(n.flatMap(r=>{var i=Fr(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Pn(a)||!Pn(o)))return[t-a,t+o]})):[]}var lr=e=>{var t=sr(e),n=Bf(e);return Vp(e,t,n)},Xp=xe([lr],e=>e?.dataKey),Gxe=xe([nU,oA,lr],Vz),lU=(e,t,n,r)=>{var i={},a=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),i);return Object.fromEntries(Object.entries(a).map(o=>{var[l,u]=o,d=r?[...u].reverse():u,h=d.map(pA);return[l,{stackedData:m0e(e,h,n),graphicalItems:d}]}))},jE=xe([Gxe,nU,Hx,Fz],lU),cU=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=y0e(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Yxe=xe([ti],e=>e.allowDataOverflow),vA=e=>{var t;if(e==null||!("domain"in e))return EE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=zs(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:EE},uU=xe([ti],vA),dU=xe([uU,Yxe],Az),qxe=xe([jE,lc,or,dU],cU,{memoizeOptions:{resultEqualityCheck:Kx}}),xA=e=>e.errorBars,Kxe=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>sU(n,r)),wv=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},fU=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(l=>{n.forEach(u=>{var d,h,p=(d=r[u.id])===null||d===void 0?void 0:d.filter(T=>sU(i,T)),b=Fr(l,(h=t.dataKey)!==null&&h!==void 0?h:u.dataKey),y=Hxe(l,b,p);if(y.length>=2){var k=Math.min(...y),w=Math.max(...y);(a==null||k<a)&&(a=k),(o==null||w>o)&&(o=w)}var _=vI(b);_!=null&&(a=a==null?_[0]:Math.min(a,_[0]),o=o==null?_[1]:Math.max(o,_[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var u=vI(Fr(l,t.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Pn(a)&&Pn(o))return[a,o]},Wxe=xe([yA,ti,Uxe,xA,or],fU,{memoizeOptions:{resultEqualityCheck:Kx}});function Vxe(e){var{value:t}=e;if(Ho(t)||t instanceof Date)return t}var Zxe=(e,t,n)=>{var r=e.map(Vxe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&C9(r))?K8(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},hU=e=>e.referenceElements.dots,zf=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Xxe=xe([hU,or,qx],zf),mU=e=>e.referenceElements.areas,Jxe=xe([mU,or,qx],zf),pU=e=>e.referenceElements.lines,Qxe=xe([pU,or,qx],zf),gU=(e,t)=>{var n=zs(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ewe=xe(Xxe,or,gU),bU=(e,t)=>{var n=zs(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},twe=xe([Jxe,or],bU);function nwe(e){var t;if(e.x!=null)return zs([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:zs(n)}function rwe(e){var t;if(e.y!=null)return zs([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:zs(n)}var yU=(e,t)=>{var n=e.flatMap(r=>t==="xAxis"?nwe(r):rwe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},iwe=xe([Qxe,or],yU),awe=xe(ewe,iwe,twe,(e,t,n)=>wv(e,n,t)),vU=(e,t,n,r,i,a,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=u?wv(r,a,i):wv(a,i);return gxe(t,d,e.allowDataOverflow)},owe=xe([ti,uU,dU,qxe,Wxe,awe,an,or],vU,{memoizeOptions:{resultEqualityCheck:Kx}}),swe=[0,1],xU=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=e,d=Hs(t,a);if(d&&l==null){var h;return K8(0,(h=n?.length)!==null&&h!==void 0?h:0)}return u==="category"?Zxe(r,e,d):i==="expand"?swe:o}},wA=xe([ti,an,yA,Vx,Hx,or,owe],xU),wU=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(ST(a));return l in Tm?l:"point"}}},Jp=xe([ti,an,Jz,cA,or],wU);function lwe(e){if(e!=null){if(e in Tm)return Tm[e]();var t="scale".concat(ST(e));if(t in Tm)return Tm[t]()}}function _A(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=lwe(t);if(i!=null){var a=i.domain(n).range(r);return u0e(a),a}}}var _U=(e,t,n)=>{var r=vA(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&tc(e))return Exe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&tc(e))return jxe(e,t.tickCount,t.allowDecimals)}},SA=xe([wA,Vp,Jp],_U),SU=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&tc(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],l=n[n.length-1];return[Math.min(i,a),Math.max(o,l)]}return t},cwe=xe([ti,wA,SA,or],SU),uwe=xe(Vx,ti,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(zs(e.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),kU=xe(uwe,an,Txe,Rr,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Pn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=ec(n,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),dwe=(e,t)=>{var n=Ks(e,t);return n==null||typeof n.padding!="string"?0:kU(e,"xAxis",t,n.padding)},fwe=(e,t)=>{var n=Ws(e,t);return n==null||typeof n.padding!="string"?0:kU(e,"yAxis",t,n.padding)},hwe=xe(Ks,dwe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),mwe=xe(Ws,fwe,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),pwe=xe([Rr,hwe,Cx,Ox,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),gwe=xe([Rr,an,mwe,Cx,Ox,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Qp=(e,t,n,r)=>{var i;switch(t){case"xAxis":return pwe(e,n,r);case"yAxis":return gwe(e,n,r);case"zAxis":return(i=bA(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return qz(e);case"radiusAxis":return Kz(e,n);default:return}},EU=xe([ti,Qp],Gx),Uf=xe([ti,Jp,cwe,EU],_A);xe([Zp,xA,or],Kxe);function jU(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zx=(e,t)=>t,Xx=(e,t,n)=>n,bwe=xe(Ax,Zx,Xx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(jU)),ywe=xe(Nx,Zx,Xx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(jU)),TU=(e,t)=>({width:e.width,height:t.height}),vwe=(e,t)=>{var n=typeof t.width=="number"?t.width:Fp;return{width:n,height:e.height}},xwe=xe(Rr,Ks,TU),wwe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},_we=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Swe=xe(Ys,Rr,bwe,Zx,Xx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=TU(t,l);o==null&&(o=wwe(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;a[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),kwe=xe(Gs,Rr,ywe,Zx,Xx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=vwe(t,l);o==null&&(o=_we(t,r,e));var d=r==="left"&&!i||r==="right"&&i;a[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),Ewe=(e,t)=>{var n=Ks(e,t);if(n!=null)return Swe(e,n.orientation,n.mirror)},jwe=xe([Rr,Ks,Ewe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Twe=(e,t)=>{var n=Ws(e,t);if(n!=null)return kwe(e,n.orientation,n.mirror)},Awe=xe([Rr,Ws,Twe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),Nwe=xe(Rr,Ws,(e,t)=>{var n=typeof t.width=="number"?t.width:Fp;return{width:n,height:e.height}}),AU=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,l=Hs(e,r),u=t.map(d=>d.value);if(o&&l&&a==="category"&&i&&C9(u))return u}},kA=xe([an,Vx,ti,or],AU),NU=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Hs(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(l=>l.value)}},EA=xe([an,Vx,Vp,or],NU),xI=xe([an,Bxe,Jp,Uf,kA,EA,Qp,SA,or],(e,t,n,r,i,a,o,l,u)=>{if(t!=null){var d=Hs(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}}),Owe=(e,t,n,r,i,a,o,l,u)=>{if(!(t==null||r==null)){var d=Hs(e,u),{type:h,ticks:p,tickCount:b}=t,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,k=h==="category"&&r.bandwidth?r.bandwidth()/y:0;k=u==="angleAxis"&&a!=null&&a.length>=2?va(a[0]-a[1])*2*k:k;var w=p||i;if(w){var _=w.map((T,O)=>{var j=o?o.indexOf(T):T;return{index:O,coordinate:r(j)+k,value:T,offset:k}});return _.filter(T=>Pn(T.coordinate))}return d&&l?l.map((T,O)=>({coordinate:r(T)+k,value:T,index:O,offset:k})).filter(T=>Pn(T.coordinate)):r.ticks?r.ticks(b).map(T=>({coordinate:r(T)+k,value:T,offset:k})):r.domain().map((T,O)=>({coordinate:r(T)+k,value:o?o[T]:T,index:O,offset:k}))}},OU=xe([an,Vp,Jp,Uf,SA,Qp,kA,EA,or],Owe),Cwe=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=Hs(e,o),{tickCount:u}=t,d=0;return d=o==="angleAxis"&&r?.length>=2?va(r[0]-r[1])*2*d:d,l&&a?a.map((h,p)=>({coordinate:n(h)+d,value:h,index:p,offset:d})):n.ticks?n.ticks(u).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,p)=>({coordinate:n(h)+d,value:i?i[h]:h,index:p,offset:d}))}},CU=xe([an,Vp,Uf,Qp,kA,EA,or],Cwe),MU=xe(ti,Uf,(e,t)=>{if(!(e==null||t==null))return xv(xv({},e),{},{scale:t})}),Mwe=xe([ti,Jp,wA,EU],_A);xe((e,t,n)=>bA(e,n),Mwe,(e,t)=>{if(!(e==null||t==null))return xv(xv({},e),{},{scale:t})});var Dwe=xe([an,Ax,Nx],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),DU=e=>e.options.defaultTooltipEventType,PU=e=>e.options.validateTooltipEventTypes;function RU(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function jA(e,t){var n=DU(e),r=PU(e);return RU(t,n,r)}function Pwe(e){return it(t=>jA(t,e))}var LU=(e,t)=>{var n,r=Number(t);if(!(so(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Rwe=e=>e.tooltip.settings,Fl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Lwe={itemInteraction:{click:Fl,hover:Fl},axisInteraction:{click:Fl,hover:Fl},keyboardInteraction:Fl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},IU=ki({name:"tooltip",initialState:Lwe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:gn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=eo(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:gn()},removeTooltipEntrySettings:{reducer(e,t){var n=eo(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:gn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Iwe,replaceTooltipEntrySettings:$we,removeTooltipEntrySettings:Bwe,setTooltipSettingsState:zwe,setActiveMouseOverItemIndex:Uwe,mouseLeaveItem:gMe,mouseLeaveChart:$U,setActiveClickItemIndex:bMe,setMouseOverAxisIndex:BU,setMouseClickAxisIndex:Fwe,setSyncInteraction:TE,setKeyboardInteraction:AE}=IU.actions,Hwe=IU.reducer;function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(r){Gwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gwe(e,t,n){return(t=Ywe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ywe(e){var t=qwe(e,"string");return typeof t=="symbol"?t:t+""}function qwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kwe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Wwe(e){return e.index!=null}var zU=(e,t,n,r)=>{if(t==null)return Fl;var i=Kwe(e,t,n);if(i==null)return Fl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Wwe(i)){if(a)return Nb(Nb({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Nb(Nb({},Fl),{},{coordinate:i.coordinate})};function Vwe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Zwe(e,t){var n=Vwe(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),o=Math.max(r,i);return n>=a&&n<=o}function Xwe(e,t,n){if(n==null||t==null)return!0;var r=Fr(e,t);return r==null||!tc(n)?!0:Zwe(r,n)}var TA=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var a=Number(i);if(!Pn(a))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var u=Math.max(o,Math.min(a,l)),d=t[u];return d==null||Xwe(d,n,r)?String(u):null},UU=(e,t,n,r,i,a,o,l)=>{if(!(a==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,a);if(d!=null)return d;var h=i?.[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},FU=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},e0=e=>e.options.tooltipPayloadSearcher,Ff=e=>e.tooltip;function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(n),!0).forEach(function(r){Jwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jwe(e,t,n){return(t=Qwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qwe(e){var t=e_e(e,"string");return typeof t=="symbol"?t:t+""}function e_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t_e(e,t){return e??t}var HU=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=n,p=[];return e.reduce((b,y)=>{var k,{dataDefinedOnItem:w,settings:_}=y,T=t_e(w,l),O=Array.isArray(T)?v8(T,d,h):T,j=(k=_?.dataKey)!==null&&k!==void 0?k:r,C=_?.nameKey,M;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&o==="axis"?M=M9(O,r,i):M=a(O,t,u,C),Array.isArray(M))M.forEach(I=>{var U=SI(SI({},_),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});b.push(q3({tooltipEntrySettings:U,dataKey:I.dataKey,payload:I.payload,value:Fr(I.payload,I.dataKey),name:I.name}))});else{var P;b.push(q3({tooltipEntrySettings:_,dataKey:j,payload:M,value:Fr(M,j),name:(P=Fr(M,C))!==null&&P!==void 0?P:_?.name}))}return b},p)}},AA=xe([lr,an,Jz,cA,sr],wU),n_e=xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),r_e=xe([sr,Bf],Qz),t0=xe([n_e,lr,r_e],tU,{memoizeOptions:{resultEqualityCheck:Wx}}),i_e=xe([t0],e=>e.filter(gA)),a_e=xe([t0],iU,{memoizeOptions:{resultEqualityCheck:Wx}}),Hf=xe([a_e,lc],aU),o_e=xe([i_e,lc,lr],Vz),NA=xe([Hf,lr,t0],oU),GU=xe([lr],vA),s_e=xe([lr],e=>e.allowDataOverflow),YU=xe([GU,s_e],Az),l_e=xe([t0],e=>e.filter(gA)),c_e=xe([o_e,l_e,Hx,Fz],lU),u_e=xe([c_e,lc,sr,YU],cU),d_e=xe([t0],rU),f_e=xe([Hf,lr,d_e,xA,sr],fU,{memoizeOptions:{resultEqualityCheck:Kx}}),h_e=xe([hU,sr,Bf],zf),m_e=xe([h_e,sr],gU),p_e=xe([mU,sr,Bf],zf),g_e=xe([p_e,sr],bU),b_e=xe([pU,sr,Bf],zf),y_e=xe([b_e,sr],yU),v_e=xe([m_e,y_e,g_e],wv),x_e=xe([lr,GU,YU,u_e,f_e,v_e,an,sr],vU),n0=xe([lr,an,Hf,NA,Hx,sr,x_e],xU),w_e=xe([n0,lr,AA],_U),__e=xe([lr,n0,w_e,sr],SU),qU=e=>{var t=sr(e),n=Bf(e),r=!1;return Qp(e,t,n,r)},KU=xe([lr,qU],Gx),WU=xe([lr,AA,__e,KU],_A),S_e=xe([an,NA,lr,sr],AU),k_e=xe([an,NA,lr,sr],NU),E_e=(e,t,n,r,i,a,o,l)=>{if(t){var{type:u}=t,d=Hs(e,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return p=l==="angleAxis"&&i!=null&&i?.length>=2?va(i[0]-i[1])*2*p:p,d&&o?o.map((b,y)=>({coordinate:r(b)+p,value:b,index:y,offset:p})):r.domain().map((b,y)=>({coordinate:r(b)+p,value:a?a[b]:b,index:y,offset:p}))}}},Vs=xe([an,lr,AA,WU,qU,S_e,k_e,sr],E_e),OA=xe([DU,PU,Rwe],(e,t,n)=>RU(n.shared,e,t)),VU=e=>e.tooltip.settings.trigger,CA=e=>e.tooltip.settings.defaultIndex,r0=xe([Ff,OA,VU,CA],zU),yp=xe([r0,Hf,Xp,n0],TA),ZU=xe([Vs,yp],LU),j_e=xe([r0],e=>{if(e)return e.dataKey});xe([r0],e=>{if(e)return e.graphicalItemId});var XU=xe([Ff,OA,VU,CA],FU),T_e=xe([Gs,Ys,an,Rr,Vs,CA,XU,e0],UU),A_e=xe([r0,T_e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),N_e=xe([r0],e=>e.active),O_e=xe([XU,yp,lc,Xp,ZU,e0,OA],HU),C_e=xe([O_e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(r){M_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M_e(e,t,n){return(t=D_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D_e(e){var t=P_e(e,"string");return typeof t=="symbol"?t:t+""}function P_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R_e=()=>it(lr),L_e=()=>{var e=R_e(),t=it(Vs),n=it(WU);return ev(!e||!n?void 0:EI(EI({},e),{},{scale:n}),t)};function jI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(n),!0).forEach(function(r){I_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I_e(e,t,n){return(t=$_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $_e(e){var t=B_e(e,"string");return typeof t=="symbol"?t:t+""}function B_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z_e=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},U_e=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Pd(Pd(Pd({},r),Cr(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:u}=r;return Pd(Pd(Pd({},r),Cr(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function F_e(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var JU=(e,t,n,r,i)=>{var a,o=-1,l=(a=t?.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?n[u-1].coordinate:n[l-1].coordinate,h=n[u].coordinate,p=u>=l-1?n[0].coordinate:n[u+1].coordinate,b=void 0;if(va(h-d)!==va(p-h)){var y=[];if(va(p-h)===va(i[1]-i[0])){b=p;var k=h+i[1]-i[0];y[0]=Math.min(k,(k+d)/2),y[1]=Math.max(k,(k+d)/2)}else{b=d;var w=p+i[1]-i[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var _=[Math.min(h,(b+h)/2),Math.max(h,(b+h)/2)];if(e>_[0]&&e<=_[1]||e>=y[0]&&e<=y[1]){({index:o}=n[u]);break}}else{var T=Math.min(d,p),O=Math.max(d,p);if(e>(T+h)/2&&e<=(O+h)/2){({index:o}=n[u]);break}}}else if(t){for(var j=0;j<l;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:o}=t[j]);break}}return o},QU=()=>it(cA),MA=(e,t)=>t,eF=(e,t,n)=>n,DA=(e,t,n,r)=>r,H_e=xe(Vs,e=>vx(e,t=>t.coordinate)),PA=xe([Ff,MA,eF,DA],zU),RA=xe([PA,Hf,Xp,n0],TA),G_e=(e,t,n)=>{if(t!=null){var r=Ff(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},tF=xe([Ff,MA,eF,DA],FU),_v=xe([Gs,Ys,an,Rr,Vs,DA,tF,e0],UU),Y_e=xe([PA,_v],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),nF=xe([Vs,RA],LU),q_e=xe([tF,RA,lc,Xp,nF,e0,MA],HU),K_e=xe([PA,RA],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),W_e=(e,t,n,r,i,a,o)=>{if(!(!e||!n||!r||!i)&&F_e(e,o)){var l=v0e(e,t),u=JU(l,a,i,n,r),d=z_e(t,i,u,e);return{activeIndex:String(u),activeCoordinate:d}}},V_e=(e,t,n,r,i,a,o)=>{if(!(!e||!r||!i||!a||!n)){var l=Obe(e,n);if(l){var u=x0e(l,t),d=JU(u,o,a,r,i),h=U_e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},Z_e=(e,t,n,r,i,a,o,l)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?W_e(e,t,r,i,a,o,l):V_e(e,t,n,r,i,a,o)},X_e=xe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElementId:r.elementId}}),J_e=xe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Xr)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Pxe}});function TI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(n),!0).forEach(function(r){Q_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q_e(e,t,n){return(t=e1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e1e(e){var t=t1e(e,"string");return typeof t=="symbol"?t:t+""}function t1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n1e={},r1e={zIndexMap:Object.values(Xr).reduce((e,t)=>AI(AI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),n1e)},i1e=new Set(Object.values(Xr));function a1e(e){return i1e.has(e)}var rF=ki({name:"zIndex",initialState:r1e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:gn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!a1e(n)&&delete e.zIndexMap[n])},prepare:gn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElementId=r:e.zIndexMap[n].elementId=r:e.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:gn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:gn()}}}),{registerZIndexPortal:o1e,unregisterZIndexPortal:s1e,registerZIndexPortalId:l1e,unregisterZIndexPortalId:c1e}=rF.actions,u1e=rF.reducer;function Zs(e){var{zIndex:t,children:n}=e,r=ege(),i=r&&t!==void 0&&t!==0,a=Ei(),o=xr();S.useLayoutEffect(()=>i?(o(o1e({zIndex:t})),()=>{o(s1e({zIndex:t}))}):$p,[o,t,i]);var l=it(d=>X_e(d,t,a));if(!i)return n;if(!l)return null;var u=document.getElementById(l);return u?Du.createPortal(n,u):null}function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NE.apply(null,arguments)}function NI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ob(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(n),!0).forEach(function(r){d1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d1e(e,t,n){return(t=f1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f1e(e){var t=h1e(e,"string");return typeof t=="symbol"?t:t+""}function h1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m1e(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return S.isValidElement(t)?S.cloneElement(t,r):S.createElement(n,r)}function p1e(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,p=n,b=r,y=i;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var k,w,_;if(h==="ScatterChart")k=p,w=Fge,_=Xr.cursorLine;else if(h==="BarChart")k=Hge(l,p,a,o),w=xbe,_=Xr.cursorRectangle;else if(l==="radial"&&D9(p)){var{cx:T,cy:O,radius:j,startAngle:C,endAngle:M}=Y8(p);k={cx:T,cy:O,startAngle:C,endAngle:M,innerRadius:j,outerRadius:j},w=Pbe,_=Xr.cursorLine}else k={points:Rbe(l,p,a)},w=ty,_=Xr.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,I=Ob(Ob(Ob(Ob({stroke:"#ccc",pointerEvents:"none"},a),k),px(u)),{},{payload:b,payloadIndex:y,className:un("recharts-tooltip-cursor",P)});return S.createElement(Zs,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},S.createElement(m1e,{cursor:u,cursorComp:w,cursorProps:I}))}function g1e(e){var t=L_e(),n=N8(),r=Hp(),i=QU();return t==null||n==null||r==null||i==null?null:S.createElement(p1e,NE({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var iF=S.createContext(null),b1e=()=>S.useContext(iF),lk={exports:{}},OI;function y1e(){return OI||(OI=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function a(u,d,h,p,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,p||u,b),k=n?n+d:d;return u._events[k]?u._events[k].fn?u._events[k]=[u._events[k],y]:u._events[k].push(y):(u._events[k]=y,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)t.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,y=p.length,k=new Array(y);b<y;b++)k[b]=p[b].fn;return k},l.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,h,p,b,y,k){var w=n?n+d:d;if(!this._events[w])return!1;var _=this._events[w],T=arguments.length,O,j;if(_.fn){switch(_.once&&this.removeListener(d,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,p),!0;case 4:return _.fn.call(_.context,h,p,b),!0;case 5:return _.fn.call(_.context,h,p,b,y),!0;case 6:return _.fn.call(_.context,h,p,b,y,k),!0}for(j=1,O=new Array(T-1);j<T;j++)O[j-1]=arguments[j];_.fn.apply(_.context,O)}else{var C=_.length,M;for(j=0;j<C;j++)switch(_[j].once&&this.removeListener(d,_[j].fn,void 0,!0),T){case 1:_[j].fn.call(_[j].context);break;case 2:_[j].fn.call(_[j].context,h);break;case 3:_[j].fn.call(_[j].context,h,p);break;case 4:_[j].fn.call(_[j].context,h,p,b);break;default:if(!O)for(M=1,O=new Array(T-1);M<T;M++)O[M-1]=arguments[M];_[j].fn.apply(_[j].context,O)}}return!0},l.prototype.on=function(d,h,p){return a(this,d,h,p,!1)},l.prototype.once=function(d,h,p){return a(this,d,h,p,!0)},l.prototype.removeListener=function(d,h,p,b){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var k=this._events[y];if(k.fn)k.fn===h&&(!b||k.once)&&(!p||k.context===p)&&o(this,y);else{for(var w=0,_=[],T=k.length;w<T;w++)(k[w].fn!==h||b&&!k[w].once||p&&k[w].context!==p)&&_.push(k[w]);_.length?this._events[y]=_.length===1?_[0]:_:o(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(lk)),lk.exports}var v1e=y1e();const x1e=Si(v1e);var vp=new x1e,OE="recharts.syncEvent.tooltip",CI="recharts.syncEvent.brush";function w1e(e,t){if(t){var n=Number.parseInt(t,10);if(!so(n))return e?.[n]}}var _1e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},aF=ki({name:"options",initialState:_1e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),S1e=aF.reducer,{createEventEmitter:k1e}=aF.actions;function E1e(e){return e.tooltip.syncInteraction}var j1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},oF=ki({name:"chartData",initialState:j1e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:MI,setDataStartEndIndexes:T1e,setComputedData:yMe}=oF.actions,A1e=oF.reducer,N1e=["x","y"];function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(n),!0).forEach(function(r){O1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O1e(e,t,n){return(t=C1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C1e(e){var t=M1e(e,"string");return typeof t=="symbol"?t:t+""}function M1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D1e(e,t){if(e==null)return{};var n,r,i=P1e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function R1e(){var e=it(uA),t=it(dA),n=xr(),r=it(Hz),i=it(Vs),a=Hp(),o=Mx(),l=it(u=>u.rootProps.className);S.useEffect(()=>{if(e==null)return $p;var u=(d,h,p)=>{if(t!==p&&e===d){if(r==="index"){var b;if(o&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:k,y:w}=y,_=D1e(y,N1e),{x:T,y:O,width:j,height:C}=h.payload.sourceViewBox,M=Rd(Rd({},_),{},{x:o.x+(j?(k-T)/j:0)*o.width,y:o.y+(C?(w-O)/C:0)*o.height});n(Rd(Rd({},h),{},{payload:Rd(Rd({},h.payload),{},{coordinate:M})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var I={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},U=r(i,I);P=i[U]}else r==="value"&&(P=i.find(G=>String(G.value)===h.payload.label));var{coordinate:V}=h.payload;if(P==null||h.payload.active===!1||V==null||o==null){n(TE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:q,y:H}=V,B=Math.min(q,o.x+o.width),W=Math.min(H,o.y+o.height),Z={x:a==="horizontal"?P.coordinate:B,y:a==="horizontal"?W:P.coordinate},X=TE({active:h.payload.active,coordinate:Z,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(X)}}};return vp.on(OE,u),()=>{vp.off(OE,u)}},[l,n,t,e,r,i,a,o])}function L1e(){var e=it(uA),t=it(dA),n=xr();S.useEffect(()=>{if(e==null)return $p;var r=(i,a,o)=>{t!==o&&e===i&&n(T1e(a))};return vp.on(CI,r),()=>{vp.off(CI,r)}},[n,t,e])}function I1e(){var e=xr();S.useEffect(()=>{e(k1e())},[e]),R1e(),L1e()}function $1e(e,t,n,r,i,a){var o=it(y=>G_e(y,e,t)),l=it(dA),u=it(uA),d=it(Hz),h=it(E1e),p=h?.active,b=Mx();S.useEffect(()=>{if(!p&&u!=null&&l!=null){var y=TE({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b,graphicalItemId:void 0});vp.emit(OE,u,y,l)}},[p,n,o,i,r,l,u,d,a,b])}function PI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PI(Object(n),!0).forEach(function(r){B1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B1e(e,t,n){return(t=z1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z1e(e){var t=U1e(e,"string");return typeof t=="symbol"?t:t+""}function U1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F1e(e){return e.dataKey}function H1e(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(wge,t)}var LI=[],G1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Y1e(e){var t,n,r=Xi(e,G1e),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:l,content:u,filterNull:d,isAnimationActive:h,offset:p,payloadUniqBy:b,position:y,reverseDirection:k,useTranslate3d:w,wrapperStyle:_,cursor:T,shared:O,trigger:j,defaultIndex:C,portal:M,axisId:P}=r,I=xr(),U=typeof C=="number"?String(C):C;S.useEffect(()=>{I(zwe({shared:O,trigger:j,axisId:P,active:i,defaultIndex:U}))},[I,O,j,P,i,U]);var V=Mx(),q=B8(),H=Pwe(O),{activeIndex:B,isActive:W}=(t=it(ge=>K_e(ge,H,j,U)))!==null&&t!==void 0?t:{},Z=it(ge=>q_e(ge,H,j,U)),X=it(ge=>nF(ge,H,j,U)),G=it(ge=>Y_e(ge,H,j,U)),J=Z,Q=b1e(),oe=(n=i??W)!==null&&n!==void 0?n:!1,[le,z]=cpe([J,oe]),K=H==="axis"?X:void 0;$1e(H,j,G,K,B,oe);var ne=M??Q;if(ne==null||V==null||H==null)return null;var re=J??LI;oe||(re=LI),d&&re.length&&(re=Rme(re.filter(ge=>ge.value!=null&&(ge.hide!==!0||r.includeHidden)),b,F1e));var ce=re.length>0,ue=S.createElement(Age,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:oe,coordinate:G,hasPayload:ce,offset:p,position:y,reverseDirection:k,useTranslate3d:w,viewBox:V,wrapperStyle:_,lastBoundingBox:le,innerRef:z,hasPortalFromProps:!!M},H1e(u,RI(RI({},r),{},{payload:re,label:K,active:oe,activeIndex:B,coordinate:G,accessibilityLayer:q})));return S.createElement(S.Fragment,null,Du.createPortal(ue,ne),oe&&S.createElement(g1e,{cursor:T,tooltipEventType:H,coordinate:G,payload:re,index:B}))}function q1e(e,t,n){return(t=K1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K1e(e){var t=W1e(e,"string");return typeof t=="symbol"?t:t+""}function W1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class V1e{constructor(t){q1e(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function II(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Z1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?II(Object(n),!0).forEach(function(r){X1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):II(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X1e(e,t,n){return(t=J1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J1e(e){var t=Q1e(e,"string");return typeof t=="symbol"?t:t+""}function Q1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eSe={cacheSize:2e3,enableCache:!0},sF=Z1e({},eSe),$I=new V1e(sF.cacheSize),tSe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},BI="recharts_measurement_span";function nSe(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var zI=(e,t)=>{try{var n=document.getElementById(BI);n||(n=document.createElement("span"),n.setAttribute("id",BI),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,tSe,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Im=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Rf.isSsr)return{width:0,height:0};if(!sF.enableCache)return zI(t,n);var r=nSe(t,n),i=$I.get(r);if(i)return i;var a=zI(t,n);return $I.set(r,a),a},UI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aSe=Object.keys(lF),qd="NaN";function oSe(e,t){return e*lF[t]}class bi{static parse(t){var n,[,r,i]=(n=iSe.exec(t))!==null&&n!==void 0?n:[];return new bi(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,so(t)&&(this.unit=""),n!==""&&!rSe.test(n)&&(this.num=NaN,this.unit=""),aSe.includes(n)&&(this.num=oSe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new bi(NaN,""):new bi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new bi(NaN,""):new bi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bi(NaN,""):new bi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bi(NaN,""):new bi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return so(this.num)}}function cF(e){if(e.includes(qd))return qd;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=UI.exec(t))!==null&&n!==void 0?n:[],o=bi.parse(r??""),l=bi.parse(a??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return qd;t=t.replace(UI,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,p,b]=(d=FI.exec(t))!==null&&d!==void 0?d:[],y=bi.parse(h??""),k=bi.parse(b??""),w=p==="+"?y.add(k):y.subtract(k);if(w.isNaN())return qd;t=t.replace(FI,w.toString())}return t}var HI=/\(([^()]*)\)/;function sSe(e){for(var t=e,n;(n=HI.exec(t))!=null;){var[,r]=n;t=t.replace(HI,cF(r))}return t}function lSe(e){var t=e.replace(/\s+/g,"");return t=sSe(t),t=cF(t),t}function cSe(e){try{return lSe(e)}catch{return qd}}function ck(e){var t=cSe(e.slice(5,-1));return t===qd?"":t}var uSe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dSe=["dx","dy","angle","className","breakAll"];function CE(){return CE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CE.apply(null,arguments)}function GI(e,t){if(e==null)return{};var n,r,i=fSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uF=/[ \f\n\r\t\v\u2028\u2029]+/,dF=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Mr(t)||(n?i=t.toString().split(""):i=t.toString().split(uF));var a=i.map(l=>({word:l,width:Im(l,r).width})),o=n?0:Im("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function hSe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var fF=(e,t,n,r)=>e.reduce((i,a)=>{var{word:o,width:l}=a,u=i[i.length-1];if(u&&l!=null&&(t==null||r||u.width+l+n<Number(t)))u.words.push(o),u.width+=l+n;else{var d={words:[o],width:l};i.push(d)}return i},[]),hF=e=>e.reduce((t,n)=>t.width>n.width?t:n),mSe="",YI=(e,t,n,r,i,a,o,l)=>{var u=e.slice(0,t),d=dF({breakAll:n,style:r,children:u+mSe});if(!d)return[!1,[]];var h=fF(d.wordsWithComputedWidth,a,o,l),p=h.length>i||hF(h).width>Number(a);return[p,h]},pSe=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:l,breakAll:u}=e,d=et(a),h=String(o),p=fF(t,r,n,i);if(!d||i)return p;var b=p.length>a||hF(p).width>Number(r);if(!b)return p;for(var y=0,k=h.length-1,w=0,_;y<=k&&w<=h.length-1;){var T=Math.floor((y+k)/2),O=T-1,[j,C]=YI(h,O,u,l,a,r,n,i),[M]=YI(h,T,u,l,a,r,n,i);if(!j&&!M&&(y=T+1),j&&M&&(k=T-1),!j&&M){_=C;break}w++}return _||p},qI=e=>{var t=Mr(e)?[]:e.toString().split(uF);return[{words:t,width:void 0}]},gSe=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!Rf.isSsr){var l,u,d=dF({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;l=h,u=p}else return qI(r);return pSe({breakAll:a,children:r,maxLines:o,style:i},l,u,t,!!n)}return qI(r)},mF="#808080",bSe={angle:0,breakAll:!1,capHeight:"0.71em",fill:mF,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},LA=S.forwardRef((e,t)=>{var n=Xi(e,bSe),{x:r,y:i,lineHeight:a,capHeight:o,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:h}=n,p=GI(n,uSe),b=S.useMemo(()=>gSe({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:y,dy:k,angle:w,className:_,breakAll:T}=p,O=GI(p,dSe);if(!Ho(r)||!Ho(i)||b.length===0)return null;var j=Number(r)+(et(y)?y:0),C=Number(i)+(et(k)?k:0);if(!Pn(j)||!Pn(C))return null;var M;switch(h){case"start":M=ck("calc(".concat(o,")"));break;case"middle":M=ck("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:M=ck("calc(".concat(b.length-1," * -").concat(a,")"));break}var P=[];if(u){var I=b[0].width,{width:U}=p;P.push("scale(".concat(et(U)&&et(I)?U/I:1,")"))}return w&&P.push("rotate(".concat(w,", ").concat(j,", ").concat(C,")")),P.length&&(O.transform=P.join(" ")),S.createElement("text",CE({},ka(O),{ref:t,x:j,y:C,className:un("recharts-text",_),textAnchor:d,fill:l.includes("url")?mF:l}),b.map((V,q)=>{var H=V.words.join(T?"":" ");return S.createElement("tspan",{x:j,dy:q===0?M:a,key:"".concat(H,"-").concat(q)},H)}))});LA.displayName="Text";var ySe=["labelRef"];function vSe(e,t){if(e==null)return{};var n,r,i=xSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function KI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(n),!0).forEach(function(r){wSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wSe(e,t,n){return(t=_Se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Se(e){var t=SSe(e,"string");return typeof t=="symbol"?t:t+""}function SSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ks.apply(null,arguments)}var pF=S.createContext(null),kSe=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o,children:l}=e,u=S.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o}),[t,n,r,i,a,o]);return S.createElement(pF.Provider,{value:u},l)},gF=()=>{var e=S.useContext(pF),t=Mx();return e||A8(t)},ESe=S.createContext(null),jSe=()=>{var e=S.useContext(ESe),t=it(Wz);return e||t},TSe=e=>{var{value:t,formatter:n}=e,r=Mr(e.children)?t:e.children;return typeof n=="function"?n(r):r},IA=e=>e!=null&&typeof e=="function",ASe=(e,t)=>{var n=va(t-e),r=Math.min(Math.abs(t-e),360);return n*r},NSe=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:p,endAngle:b,clockWise:y}=i,k=(d+h)/2,w=ASe(p,b),_=w>=0?1:-1,T,O;switch(t){case"insideStart":T=p+_*a,O=y;break;case"insideEnd":T=b-_*a,O=!y;break;case"end":T=b+_*a,O=y;break;default:throw new Error("Unsupported position ".concat(t))}O=w<=0?O:!O;var j=Cr(l,u,k,T),C=Cr(l,u,k,T+(O?1:-1)*359),M="M".concat(j.x,",").concat(j.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Mr(e.id)?ap("recharts-radial-line-"):e.id;return S.createElement("text",ks({},r,{dominantBaseline:"central",className:un("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:P,d:M})),S.createElement("textPath",{xlinkHref:"#".concat(P)},n))},OSe=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:u}=e,d=(l+u)/2;if(n==="outside"){var{x:h,y:p}=Cr(r,i,o+t,d);return{x:h,y:p,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(a+o)/2,{x:y,y:k}=Cr(r,i,b,d);return{x:y,y:k,textAnchor:"middle",verticalAnchor:"middle"}},ME=e=>"cx"in e&&et(e.cx),CSe=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!ME(n)&&(a=n);var{x:o,y:l,upperWidth:u,lowerWidth:d,height:h}=t,p=o,b=o+(u-d)/2,y=(p+b)/2,k=(u+d)/2,w=p+u/2,_=h>=0?1:-1,T=_*r,O=_>0?"end":"start",j=_>0?"start":"end",C=u>=0?1:-1,M=C*r,P=C>0?"end":"start",I=C>0?"start":"end";if(i==="top"){var U={x:p+u/2,y:l-T,textAnchor:"middle",verticalAnchor:O};return $n($n({},U),a?{height:Math.max(l-a.y,0),width:u}:{})}if(i==="bottom"){var V={x:b+d/2,y:l+h+T,textAnchor:"middle",verticalAnchor:j};return $n($n({},V),a?{height:Math.max(a.y+a.height-(l+h),0),width:d}:{})}if(i==="left"){var q={x:y-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return $n($n({},q),a?{width:Math.max(q.x-a.x,0),height:h}:{})}if(i==="right"){var H={x:y+k+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"};return $n($n({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:h}:{})}var B=a?{width:k,height:h}:{};return i==="insideLeft"?$n({x:y+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"},B):i==="insideRight"?$n({x:y+k-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},B):i==="insideTop"?$n({x:p+u/2,y:l+T,textAnchor:"middle",verticalAnchor:j},B):i==="insideBottom"?$n({x:b+d/2,y:l+h-T,textAnchor:"middle",verticalAnchor:O},B):i==="insideTopLeft"?$n({x:p+M,y:l+T,textAnchor:I,verticalAnchor:j},B):i==="insideTopRight"?$n({x:p+u-M,y:l+T,textAnchor:P,verticalAnchor:j},B):i==="insideBottomLeft"?$n({x:b+M,y:l+h-T,textAnchor:I,verticalAnchor:O},B):i==="insideBottomRight"?$n({x:b+d-M,y:l+h-T,textAnchor:P,verticalAnchor:O},B):i&&typeof i=="object"&&(et(i.x)||Rs(i.x))&&(et(i.y)||Rs(i.y))?$n({x:o+ec(i.x,k),y:l+ec(i.y,h),textAnchor:"end",verticalAnchor:"end"},B):$n({x:w,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},B)},MSe={angle:0,offset:5,zIndex:Xr.label,position:"middle",textBreakAll:!1};function Ll(e){var t=Xi(e,MSe),{viewBox:n,position:r,value:i,children:a,content:o,className:l="",textBreakAll:u,labelRef:d}=t,h=jSe(),p=gF(),b=r==="center"?p:h??p,y,k,w;if(n==null?y=b:ME(n)?y=n:y=A8(n),!y||Mr(i)&&Mr(a)&&!S.isValidElement(o)&&typeof o!="function")return null;var _=$n($n({},t),{},{viewBox:y});if(S.isValidElement(o)){var{labelRef:T}=_,O=vSe(_,ySe);return S.cloneElement(o,O)}if(typeof o=="function"){if(k=S.createElement(o,_),S.isValidElement(k))return k}else k=TSe(t);var j=ka(t);if(ME(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return NSe(t,r,k,j,y);w=OSe(y,t.offset,t.position)}else w=CSe(t,y);return S.createElement(Zs,{zIndex:t.zIndex},S.createElement(LA,ks({ref:d,className:un("recharts-label",l)},j,w,{textAnchor:hSe(j.textAnchor)?j.textAnchor:w.textAnchor,breakAll:u}),k))}Ll.displayName="Label";var DSe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?S.createElement(Ll,ks({key:"label-implicit"},r)):Ho(e)?S.createElement(Ll,ks({key:"label-implicit",value:e},r)):S.isValidElement(e)?e.type===Ll?S.cloneElement(e,$n({key:"label-implicit"},r)):S.createElement(Ll,ks({key:"label-implicit",content:e},r)):IA(e)?S.createElement(Ll,ks({key:"label-implicit",content:e},r)):e&&typeof e=="object"?S.createElement(Ll,ks({},e,{key:"label-implicit"},r)):null};function PSe(e){var{label:t,labelRef:n}=e,r=gF();return DSe(t,r,n)||null}var uk={},dk={},WI;function RSe(){return WI||(WI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(dk)),dk}var fk={},VI;function LSe(){return VI||(VI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(fk)),fk}var ZI;function ISe(){return ZI||(ZI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RSe(),n=LSe(),r=ET();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(uk)),uk}var hk,XI;function $Se(){return XI||(XI=1,hk=ISe().last),hk}var BSe=$Se();const zSe=Si(BSe);var USe=["valueAccessor"],FSe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(null,arguments)}function JI(e,t){if(e==null)return{};var n,r,i=HSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var GSe=e=>Array.isArray(e.value)?zSe(e.value):e.value,bF=S.createContext(void 0),YSe=bF.Provider,yF=S.createContext(void 0);yF.Provider;function qSe(){return S.useContext(bF)}function KSe(){return S.useContext(yF)}function ry(e){var{valueAccessor:t=GSe}=e,n=JI(e,USe),{dataKey:r,clockWise:i,id:a,textBreakAll:o,zIndex:l}=n,u=JI(n,FSe),d=qSe(),h=KSe(),p=d||h;return!p||!p.length?null:S.createElement(Zs,{zIndex:l??Xr.label},S.createElement(Fo,{className:"recharts-label-list"},p.map((b,y)=>{var k,w=Mr(r)?t(b,y):Fr(b&&b.payload,r),_=Mr(a)?{}:{id:"".concat(a,"-").concat(y)};return S.createElement(Ll,Sv({key:"label-".concat(y)},ka(b),u,_,{fill:(k=n.fill)!==null&&k!==void 0?k:b.fill,parentViewBox:b.parentViewBox,value:w,textBreakAll:o,viewBox:b.viewBox,index:y,zIndex:0}))})))}ry.displayName="LabelList";function WSe(e){var{label:t}=e;return t?t===!0?S.createElement(ry,{key:"labelList-implicit"}):S.isValidElement(t)||IA(t)?S.createElement(ry,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(ry,Sv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(null,arguments)}var vF=e=>{var{cx:t,cy:n,r,className:i}=e,a=un("recharts-dot",i);return et(t)&&et(n)&&et(r)?S.createElement("circle",DE({},oo(e),kT(e),{className:a,cx:t,cy:n,r})):null},VSe={radiusAxis:{},angleAxis:{}},xF=ki({name:"polarAxis",initialState:VSe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:vMe,removeRadiusAxis:xMe,addAngleAxis:wMe,removeAngleAxis:_Me}=xF.actions,ZSe=xF.reducer,mk={exports:{}},Ut={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function XSe(){if(QI)return Ut;QI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,k=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function j(M){if(typeof M=="object"&&M!==null){var P=M.$$typeof;switch(P){case t:switch(M=M.type,M){case u:case d:case r:case a:case i:case p:return M;default:switch(M=M&&M.$$typeof,M){case l:case h:case k:case y:case o:return M;default:return P}}case n:return P}}}function C(M){return j(M)===d}return Ut.AsyncMode=u,Ut.ConcurrentMode=d,Ut.ContextConsumer=l,Ut.ContextProvider=o,Ut.Element=t,Ut.ForwardRef=h,Ut.Fragment=r,Ut.Lazy=k,Ut.Memo=y,Ut.Portal=n,Ut.Profiler=a,Ut.StrictMode=i,Ut.Suspense=p,Ut.isAsyncMode=function(M){return C(M)||j(M)===u},Ut.isConcurrentMode=C,Ut.isContextConsumer=function(M){return j(M)===l},Ut.isContextProvider=function(M){return j(M)===o},Ut.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},Ut.isForwardRef=function(M){return j(M)===h},Ut.isFragment=function(M){return j(M)===r},Ut.isLazy=function(M){return j(M)===k},Ut.isMemo=function(M){return j(M)===y},Ut.isPortal=function(M){return j(M)===n},Ut.isProfiler=function(M){return j(M)===a},Ut.isStrictMode=function(M){return j(M)===i},Ut.isSuspense=function(M){return j(M)===p},Ut.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===d||M===a||M===i||M===p||M===b||typeof M=="object"&&M!==null&&(M.$$typeof===k||M.$$typeof===y||M.$$typeof===o||M.$$typeof===l||M.$$typeof===h||M.$$typeof===_||M.$$typeof===T||M.$$typeof===O||M.$$typeof===w)},Ut.typeOf=j,Ut}var e5;function JSe(){return e5||(e5=1,mk.exports=XSe()),mk.exports}JSe();var wF=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function QSe(e){var{tooltipEntrySettings:t}=e,n=xr(),r=Ei(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(Iwe(t)):i.current!==t&&n($we({prev:i.current,next:t})),i.current=t)},[t,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(Bwe(i.current)),i.current=null)},[n]),null}function eke(e){var{legendPayload:t}=e,n=xr(),r=Ei(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(hge(t)):i.current!==t&&n(mge({prev:i.current,next:t})),i.current=t)},[n,r,t]),S.useLayoutEffect(()=>()=>{i.current&&(n(pge(i.current)),i.current=null)},[n]),null}var pk,tke=()=>{var[e]=S.useState(()=>ap("uid-"));return e},nke=(pk=jY.useId)!==null&&pk!==void 0?pk:tke;function _F(e,t){var n=nke();return t||(e?"".concat(e,"-").concat(n):n)}var rke=S.createContext(void 0),ike=e=>{var{id:t,type:n,children:r}=e,i=_F("recharts-".concat(n),t);return S.createElement(rke.Provider,{value:i},r(i))},ake={cartesianItems:[],polarItems:[]},SF=ki({name:"graphicalItems",initialState:ake,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:gn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=eo(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:gn()},removeCartesianGraphicalItem:{reducer(e,t){var n=eo(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:gn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:gn()},removePolarGraphicalItem:{reducer(e,t){var n=eo(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:gn()}}}),{addCartesianGraphicalItem:oke,replaceCartesianGraphicalItem:ske,removeCartesianGraphicalItem:lke,addPolarGraphicalItem:SMe,removePolarGraphicalItem:kMe}=SF.actions,cke=SF.reducer,uke=e=>{var t=xr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(oke(e)):n.current!==e&&t(ske({prev:n.current,next:e})),n.current=e},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(t(lke(n.current)),n.current=null)},[t]),null},dke=S.memo(uke),fke=["points"];function t5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(n),!0).forEach(function(r){hke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hke(e,t,n){return(t=mke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mke(e){var t=pke(e,"string");return typeof t=="symbol"?t:t+""}function pke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}function gke(e,t){if(e==null)return{};var n,r,i=bke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yke(e){var{option:t,dotProps:n,className:r}=e;if(S.isValidElement(t))return S.cloneElement(t,n);if(typeof t=="function")return t(n);var i=un(r,typeof t!="boolean"?t.className:""),a=n??{},{points:o}=a,l=gke(a,fke);return S.createElement(vF,kv({},l,{className:i}))}function vke(e,t){return e==null?!1:t?!0:e.length===1}function xke(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:o,needClip:l,clipPathId:u,zIndex:d=Xr.scatter}=e;if(!vke(t,n))return null;var h=wF(n),p=Nhe(n),b=t.map((k,w)=>{var _,T,O=gk(gk(gk({r:3},o),p),{},{index:w,cx:(_=k.x)!==null&&_!==void 0?_:void 0,cy:(T=k.y)!==null&&T!==void 0?T:void 0,dataKey:a,value:k.value,payload:k.payload,points:t});return S.createElement(yke,{key:"dot-".concat(w),option:n,dotProps:O,className:i})}),y={};return l&&u!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),S.createElement(Zs,{zIndex:d},S.createElement(Fo,kv({className:r},y),b))}function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(r){wke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wke(e,t,n){return(t=_ke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ke(e){var t=Ske(e,"string");return typeof t=="symbol"?t:t+""}function Ske(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kke={xAxis:{},yAxis:{},zAxis:{}},kF=ki({name:"cartesianAxis",initialState:kke,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:gn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:gn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:gn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:gn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:gn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:gn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:gn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:gn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:gn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);e.yAxis[n]=r5(r5({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:Eke,replaceXAxis:jke,removeXAxis:Tke,addYAxis:Ake,replaceYAxis:Nke,removeYAxis:Oke,addZAxis:EMe,replaceZAxis:jMe,removeZAxis:TMe,updateYAxisWidth:Cke}=kF.actions,Mke=kF.reducer,Dke=xe([Rr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Pke=xe([Dke,Gs,Ys],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),$A=()=>it(Pke),Rke=()=>it(C_e);function i5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(n),!0).forEach(function(r){Lke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lke(e,t,n){return(t=Ike(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ike(e){var t=$ke(e,"string");return typeof t=="symbol"?t:t+""}function $ke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bke=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},u=bk(bk(bk({},l),px(i)),kT(i)),d;return S.isValidElement(i)?d=S.cloneElement(i,u):typeof i=="function"?d=i(u):d=S.createElement(vF,u),S.createElement(Fo,{className:"recharts-active-dot",clipPath:o},d)};function a5(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:o=Xr.activeDot}=e,l=it(yp),u=Rke();if(t==null||u==null)return null;var d=t.find(h=>u.includes(h.payload));return Mr(d)?null:S.createElement(Zs,{zIndex:o},S.createElement(Bke,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var zke={},EF=ki({name:"errorBars",initialState:zke,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:AMe,replaceErrorBar:NMe,removeErrorBar:OMe}=EF.actions,Uke=EF.reducer;function jF(e,t){var n,r,i=it(d=>Ks(d,e)),a=it(d=>Ws(d,t)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:hr.allowDataOverflow,l=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:mr.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function Fke(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=$A(),{needClipX:a,needClipY:o,needClip:l}=jF(t,n);if(!l||!i)return null;var{x:u,y:d,width:h,height:p}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:a?u:u-h/2,y:o?d:d-p/2,width:a?h:h*2,height:o?p:p*2}))}var Hke=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Gke(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function BA(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(Hke.has(r)){if(e[r]==null&&t[r]==null)continue;if(!Wb(e[r],t[r]))return!1}else if(!Gke(e[r],t[r]))return!1;return!0}var Yke=e=>{var{chartData:t}=e,n=xr(),r=Ei();return S.useEffect(()=>r?()=>{}:(n(MI(t)),()=>{n(MI(void 0))}),[t,n,r]),null},o5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},TF=ki({name:"brush",initialState:o5,reducers:{setBrushSettings(e,t){return t.payload==null?o5:t.payload}}}),{setBrushSettings:CMe}=TF.actions,qke=TF.reducer;function Kke(e,t,n){return(t=Wke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wke(e){var t=Vke(e,"string");return typeof t=="symbol"?t:t+""}function Vke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zA{static create(t){return new zA(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}Kke(zA,"EPS",1e-4);function Zke(e){return(e%180+180)%180}var Xke=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Zke(i),o=a*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},Jke={dots:[],areas:[],lines:[]},AF=ki({name:"referenceElements",initialState:Jke,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=eo(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=eo(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=eo(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:MMe,removeDot:DMe,addArea:PMe,removeArea:RMe,addLine:LMe,removeLine:IMe}=AF.actions,Qke=AF.reducer,e2e=S.createContext(void 0),t2e=e=>{var{children:t}=e,[n]=S.useState("".concat(ap("recharts"),"-clip")),r=$A();if(r==null)return null;var{x:i,y:a,width:o,height:l}=r;return S.createElement(e2e.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:a,height:l,width:o}))),t)};function NF(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n}function n2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Xke(r,n)}function r2e(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:l}=e;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function Ev(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function i2e(e,t){return NF(e,t+1)}function a2e(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:l}=t,u=0,d=1,h=o,p=function(){var k=r?.[u];if(k===void 0)return{v:NF(r,d)};var w=u,_,T=()=>(_===void 0&&(_=n(k,w)),_),O=k.coordinate,j=u===0||Ev(e,O,T,h,l);j||(u=0,h=o,d+=1),j&&(h=O+e*(T()/2+i),u+=d)},b;d<=a.length;)if(b=p(),b)return b.v;return[]}function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(n),!0).forEach(function(r){o2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o2e(e,t,n){return(t=s2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s2e(e){var t=l2e(e,"string");return typeof t=="symbol"?t:t+""}function l2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c2e(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:l}=t,{end:u}=t,d=function(b){var y=a[b],k,w=()=>(k===void 0&&(k=n(y,b)),k);if(b===o-1){var _=e*(y.coordinate+e*w()/2-u);a[b]=y=zr(zr({},y),{},{tickCoord:_>0?y.coordinate-_*e:y.coordinate})}else a[b]=y=zr(zr({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var T=Ev(e,y.tickCoord,w,l,u);T&&(u=y.tickCoord-e*(w()/2+i),a[b]=zr(zr({},y),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return a}function u2e(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,{start:u,end:d}=t;if(a){var h=r[l-1],p=n(h,l-1),b=e*(h.coordinate+e*p/2-d);if(o[l-1]=h=zr(zr({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var y=Ev(e,h.tickCoord,()=>p,u,d);y&&(d=h.tickCoord-e*(p/2+i),o[l-1]=zr(zr({},h),{},{isShow:!0}))}}for(var k=a?l-1:l,w=function(O){var j=o[O],C,M=()=>(C===void 0&&(C=n(j,O)),C);if(O===0){var P=e*(j.coordinate-e*M()/2-u);o[O]=j=zr(zr({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[O]=j=zr(zr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var I=Ev(e,j.tickCoord,M,u,d);I&&(u=j.tickCoord+e*(M()/2+i),o[O]=zr(zr({},j),{},{isShow:!0}))}},_=0;_<k;_++)w(_);return o}function UA(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:h,angle:p}=e;if(!i||!i.length||!r)return[];if(et(u)||Rf.isSsr){var b;return(b=i2e(i,et(u)?u:0))!==null&&b!==void 0?b:[]}var y=[],k=l==="top"||l==="bottom"?"width":"height",w=h&&k==="width"?Im(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},_=(j,C)=>{var M=typeof d=="function"?d(j.value,C):j.value;return k==="width"?n2e(Im(M,{fontSize:t,letterSpacing:n}),w,p):Im(M,{fontSize:t,letterSpacing:n})[k]},T=i.length>=2?va(i[1].coordinate-i[0].coordinate):1,O=r2e(a,T,k);return u==="equidistantPreserveStart"?a2e(T,O,_,i,o):(u==="preserveStart"||u==="preserveStartEnd"?y=u2e(T,O,_,i,o,u==="preserveStartEnd"):y=c2e(T,O,_,i,o),y.filter(j=>j.isShow))}var d2e=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>o&&(o=p.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+a,d=o+u+l+(n?r:0);return Math.round(d)}return 0},f2e=["axisLine","width","height","className","hide","ticks","axisType"];function h2e(e,t){if(e==null)return{};var n,r,i=m2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(null,arguments)}function l5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(n),!0).forEach(function(r){p2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p2e(e,t,n){return(t=g2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g2e(e){var t=b2e(e,"string");return typeof t=="symbol"?t:t+""}function b2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Xr.axis};function y2e(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:u}=e;if(!l)return null;var d=Zn(Zn(Zn({},u),oo(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);d=Zn(Zn({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);d=Zn(Zn({},d),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return S.createElement("line",Ou({},d,{className:un("recharts-cartesian-axis-line",yx(l,"className"))}))}function v2e(e,t,n,r,i,a,o,l,u){var d,h,p,b,y,k,w=l?-1:1,_=e.tickSize||o,T=et(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=h=e.coordinate,b=n+ +!l*i,p=b-w*_,k=p-w*u,y=T;break;case"left":p=b=e.coordinate,h=t+ +!l*r,d=h-w*_,y=d-w*u,k=T;break;case"right":p=b=e.coordinate,h=t+ +l*r,d=h+w*_,y=d+w*u,k=T;break;default:d=h=e.coordinate,b=n+ +l*i,p=b+w*_,k=p+w*u,y=T;break}return{line:{x1:d,y1:p,x2:h,y2:b},tick:{x:y,y:k}}}function x2e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function w2e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function _2e(e){var{option:t,tickProps:n,value:r}=e,i,a=un(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))i=S.cloneElement(t,Zn(Zn({},n),{},{className:a}));else if(typeof t=="function")i=t(Zn(Zn({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=un(o,t?.className)),i=S.createElement(LA,Ou({},n,{className:o}),r)}return i}var S2e=S.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:o,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:p,x:b,y,width:k,height:w,tickSize:_,tickMargin:T,fontSize:O,letterSpacing:j,getTicksConfig:C,events:M,axisType:P}=e,I=UA(Zn(Zn({},C),{},{ticks:n}),O,j),U=x2e(h,p),V=w2e(h,p),q=oo(C),H=px(r),B={};typeof i=="object"&&(B=i);var W=Zn(Zn({},q),{},{fill:"none"},B),Z=I.map(J=>Zn({entry:J},v2e(J,b,y,k,w,h,_,p,T))),X=Z.map(J=>{var{entry:Q,line:oe}=J;return S.createElement(Fo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&S.createElement("line",Ou({},W,oe,{className:un("recharts-cartesian-axis-tick-line",yx(i,"className"))})))}),G=Z.map((J,Q)=>{var{entry:oe,tick:le}=J,z=Zn(Zn(Zn(Zn({textAnchor:U,verticalAnchor:V},q),{},{stroke:"none",fill:a},H),le),{},{index:Q,payload:oe,visibleTicksCount:I.length,tickFormatter:o,padding:u},d);return S.createElement(Fo,Ou({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},dme(M,oe,Q)),r&&S.createElement(_2e,{option:r,tickProps:z,value:"".concat(typeof o=="function"?o(oe.value,Q):oe.value).concat(l||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},G.length>0&&S.createElement(Zs,{zIndex:Xr.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},G)),X.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},X))}),k2e=S.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:l,axisType:u}=e,d=h2e(e,f2e),[h,p]=S.useState(""),[b,y]=S.useState(""),k=S.useRef(null);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return d2e({ticks:k.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=S.useCallback(_=>{if(_){var T=_.getElementsByClassName("recharts-cartesian-axis-tick-value");k.current=T;var O=T[0];if(O){var j=window.getComputedStyle(O),C=j.fontSize,M=j.letterSpacing;(C!==h||M!==b)&&(p(C),y(M))}}},[h,b]);return o||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement(Zs,{zIndex:e.zIndex},S.createElement(Fo,{className:un("recharts-cartesian-axis",a)},S.createElement(y2e,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:oo(e)}),S.createElement(S2e,{ref:w,axisType:u,events:d,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),S.createElement(kSe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},S.createElement(PSe,{label:e.label,labelRef:e.labelRef}),e.children)))}),FA=S.forwardRef((e,t)=>{var n=Xi(e,Cs);return S.createElement(k2e,Ou({},n,{ref:t}))});FA.displayName="CartesianAxis";var E2e=["x1","y1","x2","y2","key"],j2e=["offset"],T2e=["xAxisId","yAxisId"],A2e=["xAxisId","yAxisId"];function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(r){N2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N2e(e,t,n){return(t=O2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O2e(e){var t=C2e(e,"string");return typeof t=="symbol"?t:t+""}function C2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(null,arguments)}function jv(e,t){if(e==null)return{};var n,r,i=M2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var D2e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:l}=e;return S.createElement("rect",{x:r,y:i,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function OF(e){var{option:t,lineItemProps:n}=e,r;if(S.isValidElement(t))r=S.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:o,x2:l,y2:u,key:d}=n,h=jv(n,E2e),p=(i=oo(h))!==null&&i!==void 0?i:{},{offset:b}=p,y=jv(p,j2e);r=S.createElement("line",gu({},y,{x1:a,y1:o,x2:l,y2:u,fill:"none",key:d}))}return r}function P2e(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=jv(e,T2e),u=i.map((d,h)=>{var p=Ur(Ur({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return S.createElement(OF,{key:"line-".concat(h),option:r,lineItemProps:p})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function R2e(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=jv(e,A2e),u=i.map((d,h)=>{var p=Ur(Ur({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return S.createElement(OF,{option:r,lineItemProps:p,key:"line-".concat(h)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function L2e(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length||l==null)return null;var d=l.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],k=y?i+o-p:d[b+1]-p;if(k<=0)return null;var w=b%t.length;return S.createElement("rect",{key:"react-".concat(b),y:p,x:r,height:k,width:a,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function I2e(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:l,verticalPoints:u}=e;if(!t||!n||!n.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],k=y?i+o-p:d[b+1]-p;if(k<=0)return null;var w=b%n.length;return S.createElement("rect",{key:"react-".concat(b),x:p,y:a,width:k,height:l,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var $2e=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return x8(UA(Ur(Ur(Ur({},Cs),n),{},{ticks:w8(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},B2e=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return x8(UA(Ur(Ur(Ur({},Cs),n),{},{ticks:w8(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},z2e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Xr.grid};function CF(e){var t=O8(),n=C8(),r=N8(),i=Ur(Ur({},Xi(e,z2e)),{},{x:et(e.x)?e.x:r.left,y:et(e.y)?e.y:r.top,width:et(e.width)?e.width:r.width,height:et(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:l,y:u,width:d,height:h,syncWithTicks:p,horizontalValues:b,verticalValues:y}=i,k=Ei(),w=it(V=>xI(V,"xAxis",a,k)),_=it(V=>xI(V,"yAxis",o,k));if(!Go(d)||!Go(h)||!et(l)||!et(u))return null;var T=i.verticalCoordinatesGenerator||$2e,O=i.horizontalCoordinatesGenerator||B2e,{horizontalPoints:j,verticalPoints:C}=i;if((!j||!j.length)&&typeof O=="function"){var M=b&&b.length,P=O({yAxis:_?Ur(Ur({},_),{},{ticks:M?b:_.ticks}):void 0,width:t??d,height:n??h,offset:r},M?!0:p);tv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(j=P)}if((!C||!C.length)&&typeof T=="function"){var I=y&&y.length,U=T({xAxis:w?Ur(Ur({},w),{},{ticks:I?y:w.ticks}):void 0,width:t??d,height:n??h,offset:r},I?!0:p);tv(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(C=U)}return S.createElement(Zs,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(D2e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(L2e,gu({},i,{horizontalPoints:j})),S.createElement(I2e,gu({},i,{verticalPoints:C})),S.createElement(P2e,gu({},i,{offset:r,horizontalPoints:j,xAxis:w,yAxis:_})),S.createElement(R2e,gu({},i,{offset:r,verticalPoints:C,xAxis:w,yAxis:_}))))}CF.displayName="CartesianGrid";function U2e(e){var t=px(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,o=Number(i),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=r),{r:o,strokeWidth:l}}return{r:n,strokeWidth:r}}var MF=(e,t,n,r)=>MU(e,"xAxis",t,r),DF=(e,t,n,r)=>CU(e,"xAxis",t,r),PF=(e,t,n,r)=>MU(e,"yAxis",n,r),RF=(e,t,n,r)=>CU(e,"yAxis",n,r),F2e=xe([an,MF,PF,DF,RF],(e,t,n,r,i)=>Hs(e,"xAxis")?ev(t,r,!1):ev(n,i,!1)),H2e=(e,t,n,r,i)=>i,LF=xe([eU,H2e],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),G2e=(e,t,n,r,i)=>{var a,o=LF(e,t,n,r,i);if(o!=null){var l=an(e),u=Hs(l,"xAxis"),d;if(u?d=jE(e,"yAxis",n,r):d=jE(e,"xAxis",t,r),d!=null){var{stackId:h}=o,p=pA(o);if(!(h==null||p==null)){var b=(a=d[h])===null||a===void 0?void 0:a.stackedData;return b?.find(y=>y.key===p)}}}},Y2e=xe([an,MF,PF,DF,RF,G2e,oA,F2e,LF,Axe],(e,t,n,r,i,a,o,l,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:b}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:y}=u,k;if(y&&y.length>0?k=y:k=h?.slice(p,b+1),k!=null)return uEe({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:p,areaSettings:u,stackedData:a,displayedData:k,chartBaseValue:d,bandSize:l})}}),q2e=["id"],K2e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Su(){return Su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Su.apply(null,arguments)}function IF(e,t){if(e==null)return{};var n,r,i=W2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function u5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u5(Object(n),!0).forEach(function(r){V2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V2e(e,t,n){return(t=Z2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tv(e,t){return e&&e!=="none"?e:t}var J2e=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:Tv(r,i),value:_8(n,t),payload:e}]},Q2e=S.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:_8(o,t),hide:l,type:d,color:Tv(r,a),unit:u}};return S.createElement(QSe,{tooltipEntrySettings:h})});function eEe(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:a,dataKey:o}=r,l=oo(r);return S.createElement(xke,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function tEe(e){var{showLabels:t,children:n,points:r}=e,i=r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Kd(Kd({},u),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return S.createElement(YSe,{value:t?i:void 0},n)}function d5(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:a}=e,{layout:o,type:l,stroke:u,connectNulls:d,isRange:h}=a,{id:p}=a,b=IF(a,q2e),y=oo(b),k=ka(b);return S.createElement(S.Fragment,null,t?.length>1&&S.createElement(Fo,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(ty,Su({},k,{id:p,points:t,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&S.createElement(ty,Su({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),u!=="none"&&h&&S.createElement(ty,Su({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),S.createElement(eEe,{points:t,props:b,clipPathId:i}))}function nEe(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].y,o=r[r.length-1].y;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.x||0));return et(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.x||0),u)),et(u)?S.createElement("rect",{x:0,y:a<o?a:a-l,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(l)}):null}function rEe(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].x,o=r[r.length-1].x;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.y||0));return et(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.y||0),u)),et(u)?S.createElement("rect",{x:a<o?a:a-l,y:0,width:l,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function iEe(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:a}=e;return n==="vertical"?S.createElement(nEe,{alpha:t,points:r,baseLine:i,strokeWidth:a}):S.createElement(rEe,{alpha:t,points:r,baseLine:i,strokeWidth:a})}function aEe(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=e,{points:o,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:p,onAnimationStart:b,onAnimationEnd:y}=r,k=S.useMemo(()=>({points:o,baseLine:l}),[o,l]),w=G8(k,"recharts-area-"),_=Q0e(),[T,O]=S.useState(!1),j=!T,C=S.useCallback(()=>{typeof y=="function"&&y(),O(!1)},[y]),M=S.useCallback(()=>{typeof b=="function"&&b(),O(!0)},[b]);if(_==null)return null;var P=i.current,I=a.current;return S.createElement(tEe,{showLabels:j,points:o},r.children,S.createElement(H8,{animationId:w,begin:d,duration:h,isActive:u,easing:p,onAnimationEnd:C,onAnimationStart:M,key:w},U=>{if(P){var V=P.length/o.length,q=U===1?o:o.map((B,W)=>{var Z=Math.floor(W*V);if(P[Z]){var X=P[Z];return Kd(Kd({},B),{},{x:Ro(X.x,B.x,U),y:Ro(X.y,B.y,U)})}return B}),H;return et(l)?H=Ro(I,l,U):Mr(l)||so(l)?H=Ro(I,0,U):H=l.map((B,W)=>{var Z=Math.floor(W*V);if(Array.isArray(I)&&I[Z]){var X=I[Z];return Kd(Kd({},B),{},{x:Ro(X.x,B.x,U),y:Ro(X.y,B.y,U)})}return B}),U>0&&(i.current=q,a.current=H),S.createElement(d5,{points:q,baseLine:H,needClip:t,clipPathId:n,props:r})}return U>0&&(i.current=o,a.current=l),S.createElement(Fo,null,u&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(iEe,{alpha:U,points:o,baseLine:l,layout:_,strokeWidth:r.strokeWidth}))),S.createElement(Fo,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(d5,{points:o,baseLine:l,needClip:t,clipPathId:n,props:r})))}),S.createElement(WSe,{label:r.label}))}function oEe(e){var{needClip:t,clipPathId:n,props:r}=e,i=S.useRef(null),a=S.useRef();return S.createElement(aEe,{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class sEe extends S.PureComponent{render(){var{hide:t,dot:n,points:r,className:i,top:a,left:o,needClip:l,xAxisId:u,yAxisId:d,width:h,height:p,id:b,baseLine:y,zIndex:k}=this.props;if(t)return null;var w=un("recharts-area",i),_=b,{r:T,strokeWidth:O}=U2e(n),j=wF(n),C=T*2+O,M=l?"url(#clipPath-".concat(j?"":"dots-").concat(_,")"):void 0;return S.createElement(Zs,{zIndex:k},S.createElement(Fo,{className:w},l&&S.createElement("defs",null,S.createElement(Fke,{clipPathId:_,xAxisId:u,yAxisId:d}),!j&&S.createElement("clipPath",{id:"clipPath-dots-".concat(_)},S.createElement("rect",{x:o-C/2,y:a-C/2,width:h+C,height:p+C}))),S.createElement(oEe,{needClip:l,clipPathId:_,props:this.props})),S.createElement(a5,{points:r,mainColor:Tv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}),this.props.isRange&&Array.isArray(y)&&S.createElement(a5,{points:y,mainColor:Tv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}))}}var $F={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Xr.area};function lEe(e){var t,n=Xi(e,$F),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,fill:d,fillOpacity:h,hide:p,isAnimationActive:b,legendType:y,stroke:k,xAxisId:w,yAxisId:_}=n,T=IF(n,K2e),O=Hp(),j=QU(),{needClip:C}=jF(w,_),M=Ei(),{points:P,isRange:I,baseLine:U}=(t=it(Z=>Y2e(Z,w,_,M,e.id)))!==null&&t!==void 0?t:{},V=$A();if(O!=="horizontal"&&O!=="vertical"||V==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:q,width:H,x:B,y:W}=V;return!P||!P.length?null:S.createElement(sEe,Su({},T,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:U,connectNulls:l,dot:u,fill:d,fillOpacity:h,height:q,hide:p,layout:O,isAnimationActive:b==="auto"?!Rf.isSsr:b,isRange:I,legendType:y,needClip:C,points:P,stroke:k,width:H,left:B,top:W,xAxisId:w,yAxisId:_}))}var cEe=(e,t,n,r,i)=>{var a=n??t;if(et(a))return a;var o=e==="horizontal"?i:r,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function uEe(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:p,yAxisTicks:b,bandSize:y}=e,k=i&&i.length,w=cEe(a,o,n,l,u),_=a==="horizontal",T=!1,O=d.map((C,M)=>{var P;k?P=i[h+M]:(P=Fr(C,r),Array.isArray(P)?T=!0:P=[w,P]);var I=P[1]==null||k&&!t&&Fr(C,r)==null;return _?{x:H3({axis:l,ticks:p,bandSize:y,entry:C,index:M}),y:I?null:u.scale(P[1]),value:P,payload:C}:{x:I?null:l.scale(P[1]),y:H3({axis:u,ticks:b,bandSize:y,entry:C,index:M}),value:P,payload:C}}),j;return k||T?j=O.map(C=>{var M=Array.isArray(C.value)?C.value[0]:null;return _?{x:C.x,y:M!=null&&C.y!=null?u.scale(M):null,payload:C.payload}:{x:M!=null?l.scale(M):null,y:C.y,payload:C.payload}}):j=_?u.scale(w):l.scale(w),{points:O,baseLine:j,isRange:T}}function dEe(e){var t=Xi(e,$F),n=Ei();return S.createElement(ike,{id:t.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(eke,{legendPayload:J2e(t)}),S.createElement(Q2e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),S.createElement(dke,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:p0e(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),S.createElement(lEe,Su({},t,{id:r}))))}var BF=S.memo(dEe,BA);BF.displayName="Area";var fEe=["domain","range"],hEe=["domain","range"];function f5(e,t){if(e==null)return{};var n,r,i=mEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function h5(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function zF(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=f5(e,fEe),{domain:a,range:o}=t,l=f5(t,hEe);return!h5(n,a)||!h5(r,o)?!1:BA(i,l)}var pEe=["dangerouslySetInnerHTML","ticks"],gEe=["id"];function PE(){return PE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PE.apply(null,arguments)}function m5(e,t){if(e==null)return{};var n,r,i=bEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yEe(e){var t=xr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(Eke(e)):n.current!==e&&t(jke({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(Tke(n.current)),n.current=null)},[t]),null}var vEe=e=>{var{xAxisId:t,className:n}=e,r=it(k8),i=Ei(),a="xAxis",o=it(_=>Uf(_,a,t,i)),l=it(_=>OU(_,a,t,i)),u=it(_=>xwe(_,t)),d=it(_=>jwe(_,t)),h=it(_=>Zz(_,t));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:b}=e,y=m5(e,pEe),{id:k}=h,w=m5(h,gEe);return S.createElement(FA,PE({},y,w,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:un("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},xEe={allowDataOverflow:hr.allowDataOverflow,allowDecimals:hr.allowDecimals,allowDuplicatedCategory:hr.allowDuplicatedCategory,angle:hr.angle,axisLine:Cs.axisLine,height:hr.height,hide:!1,includeHidden:hr.includeHidden,interval:hr.interval,minTickGap:hr.minTickGap,mirror:hr.mirror,orientation:hr.orientation,padding:hr.padding,reversed:hr.reversed,scale:hr.scale,tick:hr.tick,tickCount:hr.tickCount,tickLine:Cs.tickLine,tickSize:Cs.tickSize,type:hr.type,xAxisId:0},wEe=e=>{var t=Xi(e,xEe);return S.createElement(S.Fragment,null,S.createElement(yEe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),S.createElement(vEe,t))},UF=S.memo(wEe,zF);UF.displayName="XAxis";var _Ee=["dangerouslySetInnerHTML","ticks"],SEe=["id"];function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RE.apply(null,arguments)}function p5(e,t){if(e==null)return{};var n,r,i=kEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function EEe(e){var t=xr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(Ake(e)):n.current!==e&&t(Nke({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(Oke(n.current)),n.current=null)},[t]),null}var jEe=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=S.useRef(null),o=S.useRef(null),l=it(k8),u=Ei(),d=xr(),h="yAxis",p=it(M=>Uf(M,h,t,u)),b=it(M=>Nwe(M,t)),y=it(M=>Awe(M,t)),k=it(M=>OU(M,h,t,u)),w=it(M=>Xz(M,t));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!b||IA(i)||S.isValidElement(i)||w==null)){var M=a.current;if(M){var P=M.getCalculatedWidth();Math.round(b.width)!==Math.round(P)&&d(Cke({id:t,width:P}))}}},[k,b,d,i,t,r,w]),b==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:T}=e,O=p5(e,_Ee),{id:j}=w,C=p5(w,SEe);return S.createElement(FA,RE({},O,C,{ref:a,labelRef:o,scale:p,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:un("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:k,axisType:h}))},TEe={allowDataOverflow:mr.allowDataOverflow,allowDecimals:mr.allowDecimals,allowDuplicatedCategory:mr.allowDuplicatedCategory,angle:mr.angle,axisLine:Cs.axisLine,hide:!1,includeHidden:mr.includeHidden,interval:mr.interval,minTickGap:mr.minTickGap,mirror:mr.mirror,orientation:mr.orientation,padding:mr.padding,reversed:mr.reversed,scale:mr.scale,tick:mr.tick,tickCount:mr.tickCount,tickLine:Cs.tickLine,tickSize:Cs.tickSize,type:mr.type,width:mr.width,yAxisId:0},AEe=e=>{var t=Xi(e,TEe);return S.createElement(S.Fragment,null,S.createElement(EEe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),S.createElement(jEe,t))},FF=S.memo(AEe,zF);FF.displayName="YAxis";var NEe=(e,t)=>t,HA=xe([NEe,an,Wz,sr,KU,Vs,H_e,Rr],Z_e),GA=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},HF=Ea("mouseClick"),GF=Up();GF.startListening({actionCreator:HF,effect:(e,t)=>{var n=e.payload,r=HA(t.getState(),GA(n));r?.activeIndex!=null&&t.dispatch(Fwe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var LE=Ea("mouseMove"),YF=Up(),Cb=null;YF.startListening({actionCreator:LE,effect:(e,t)=>{var n=e.payload;Cb!==null&&cancelAnimationFrame(Cb);var r=GA(n);Cb=requestAnimationFrame(()=>{var i=t.getState(),a=jA(i,i.tooltip.settings.shared);if(a==="axis"){var o=HA(i,r);o?.activeIndex!=null?t.dispatch(BU({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch($U())}Cb=null})}});var g5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},qF=ki({name:"rootProps",initialState:g5,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:g5.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),OEe=qF.reducer,{updateOptions:CEe}=qF.actions,KF=ki({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Me}=KF.actions,MEe=KF.reducer,WF=Ea("keyDown"),VF=Ea("focus"),YA=Up();YA.startListening({actionCreator:WF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=TA(i,Hf(n),Xp(n),n0(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=Vs(n);if(a==="Enter"){var d=_v(n,"axis","hover",String(i.index));t.dispatch(AE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=Dwe(n),p=h==="left-to-right"?1:-1,b=a==="ArrowRight"?1:-1,y=l+b*p;if(!(u==null||y>=u.length||y<0)){var k=_v(n,"axis","hover",String(y));t.dispatch(AE({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:k}))}}}}}});YA.startListening({actionCreator:VF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=_v(n,"axis","hover",String(a));t.dispatch(AE({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var da=Ea("externalEvent"),ZF=Up(),yk=new Map;ZF.startListening({actionCreator:da,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=yk.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var l=t.getState(),u={activeCoordinate:A_e(l),activeDataKey:j_e(l),activeIndex:yp(l),activeLabel:ZU(l),activeTooltipIndex:yp(l),isTooltipActive:N_e(l)};n(u,r)}finally{yk.delete(i)}});yk.set(i,o)}}});var DEe=xe([Ff],e=>e.tooltipItemPayloads),PEe=xe([DEe,e0,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),XF=Ea("touchMove"),JF=Up();JF.startListening({actionCreator:XF,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=jA(r,r.tooltip.settings.shared);if(i==="axis"){var a=HA(r,GA({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch(BU({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(_0e),h=(o=u.getAttribute(S0e))!==null&&o!==void 0?o:void 0,p=PEe(t.getState(),d,h);t.dispatch(Uwe({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}}});var REe=m4({brush:qke,cartesianAxis:Mke,chartData:A1e,errorBars:Uke,graphicalItems:cke,layout:a0e,legend:gge,options:S1e,polarAxis:ZSe,polarOptions:MEe,referenceElements:Qke,rootProps:OEe,tooltip:Hwe,zIndex:u1e}),LEe=function(t){return Ope({reducer:REe,preloadedState:t,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([GF.middleware,YF.middleware,YA.middleware,ZF.middleware,JF.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(o8({type:"raf"}))},devTools:Rf.devToolsEnabled})};function IEe(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Ei(),a=S.useRef(null);if(i)return n;a.current==null&&(a.current=LEe(t));var o=jT;return S.createElement(S4,{context:o,store:a.current},n)}function $Ee(e){var{layout:t,margin:n}=e,r=xr(),i=Ei();return S.useEffect(()=>{i||(r(n0e(t)),r(t0e(n)))},[r,i,t,n]),null}var BEe=S.memo($Ee,BA);function zEe(e){var t=xr();return S.useEffect(()=>{t(CEe(e))},[t,e]),null}function b5(e){var{zIndex:t,isPanorama:n}=e,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=_F("".concat(r).concat(t)),a=xr();return S.useLayoutEffect(()=>(a(l1e({zIndex:t,elementId:i,isPanorama:n})),()=>{a(c1e({zIndex:t,isPanorama:n}))}),[a,t,i,n]),S.createElement("g",{tabIndex:-1,id:i})}function y5(e){var{children:t,isPanorama:n}=e,r=it(J_e);if(!r||r.length===0)return t;var i=r.filter(o=>o<0),a=r.filter(o=>o>0);return S.createElement(S.Fragment,null,i.map(o=>S.createElement(b5,{key:o,zIndex:o,isPanorama:n})),t,a.map(o=>S.createElement(b5,{key:o,zIndex:o,isPanorama:n})))}var UEe=["children"];function FEe(e,t){if(e==null)return{};var n,r,i=HEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(null,arguments)}var GEe={width:"100%",height:"100%",display:"block"},YEe=S.forwardRef((e,t)=>{var n=O8(),r=C8(),i=B8();if(!Go(n)||!Go(r))return null;var{children:a,otherAttributes:o,title:l,desc:u}=e,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0),S.createElement(p9,Av({},o,{title:l,desc:u,role:h,tabIndex:d,width:n,height:r,style:GEe,ref:t}),a)}),qEe=e=>{var{children:t}=e,n=it(Cx);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return S.createElement(p9,{width:r,height:i,x:o,y:a},t)},v5=S.forwardRef((e,t)=>{var{children:n}=e,r=FEe(e,UEe),i=Ei();return i?S.createElement(qEe,null,S.createElement(y5,{isPanorama:!0},n)):S.createElement(YEe,Av({ref:t},r),S.createElement(y5,{isPanorama:!1},n))});function KEe(){var e=xr(),[t,n]=S.useState(null),r=it(w0e);return S.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Pn(a)&&a!==r&&e(i0e(a))}},[t,e,r]),n}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WEe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(r){VEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VEe(e,t,n){return(t=ZEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZEe(e){var t=XEe(e,"string");return typeof t=="symbol"?t:t+""}function XEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cu(){return Cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(null,arguments)}var JEe=()=>(I1e(),null);function Nv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var QEe=S.forwardRef((e,t)=>{var n,r,i=S.useRef(null),[a,o]=S.useState({containerWidth:Nv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Nv((r=e.style)===null||r===void 0?void 0:r.height)}),l=S.useCallback((d,h)=>{o(p=>{var b=Math.round(d),y=Math.round(h);return p.containerWidth===b&&p.containerHeight===y?p:{containerWidth:b,containerHeight:y}})},[]),u=S.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=d.getBoundingClientRect();l(h,p);var b=k=>{var{width:w,height:_}=k[0].contentRect;l(w,_)},y=new ResizeObserver(b);y.observe(d),i.current=y}},[t,l]);return S.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[l]),S.createElement(S.Fragment,null,S.createElement(Dx,{width:a.containerWidth,height:a.containerHeight}),S.createElement("div",Cu({ref:u},e)))}),eje=S.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=S.useState({containerWidth:Nv(n),containerHeight:Nv(r)}),o=S.useCallback((u,d)=>{a(h=>{var p=Math.round(u),b=Math.round(d);return h.containerWidth===p&&h.containerHeight===b?h:{containerWidth:p,containerHeight:b}})},[]),l=S.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();o(d,h)}},[t,o]);return S.createElement(S.Fragment,null,S.createElement(Dx,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Cu({ref:l},e)))}),tje=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return S.createElement(S.Fragment,null,S.createElement(Dx,{width:n,height:r}),S.createElement("div",Cu({ref:t},e)))}),nje=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return Rs(n)||Rs(r)?S.createElement(eje,Cu({},e,{ref:t})):S.createElement(tje,Cu({},e,{ref:t}))});function rje(e){return e===!0?QEe:nje}var ije=S.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:b,onTouchEnd:y,onTouchMove:k,onTouchStart:w,style:_,width:T,responsive:O,dispatchTouchEvents:j=!0}=e,C=S.useRef(null),M=xr(),[P,I]=S.useState(null),[U,V]=S.useState(null),q=KEe(),H=PT(),B=H?.width>0?H.width:T,W=H?.height>0?H.height:i,Z=S.useCallback(ie=>{q(ie),typeof t=="function"&&t(ie),I(ie),V(ie),ie!=null&&(C.current=ie)},[q,t,I,V]),X=S.useCallback(ie=>{M(HF(ie)),M(da({handler:a,reactEvent:ie}))},[M,a]),G=S.useCallback(ie=>{M(LE(ie)),M(da({handler:d,reactEvent:ie}))},[M,d]),J=S.useCallback(ie=>{M($U()),M(da({handler:h,reactEvent:ie}))},[M,h]),Q=S.useCallback(ie=>{M(LE(ie)),M(da({handler:p,reactEvent:ie}))},[M,p]),oe=S.useCallback(()=>{M(VF())},[M]),le=S.useCallback(ie=>{M(WF(ie.key))},[M]),z=S.useCallback(ie=>{M(da({handler:o,reactEvent:ie}))},[M,o]),K=S.useCallback(ie=>{M(da({handler:l,reactEvent:ie}))},[M,l]),ne=S.useCallback(ie=>{M(da({handler:u,reactEvent:ie}))},[M,u]),re=S.useCallback(ie=>{M(da({handler:b,reactEvent:ie}))},[M,b]),ce=S.useCallback(ie=>{M(da({handler:w,reactEvent:ie}))},[M,w]),ue=S.useCallback(ie=>{j&&M(XF(ie)),M(da({handler:k,reactEvent:ie}))},[M,j,k]),ge=S.useCallback(ie=>{M(da({handler:y,reactEvent:ie}))},[M,y]),ke=rje(O);return S.createElement(iF.Provider,{value:P},S.createElement(Lhe.Provider,{value:U},S.createElement(ke,{width:B??_?.width,height:W??_?.height,className:un("recharts-wrapper",r),style:WEe({position:"relative",cursor:"default",width:B,height:W},_),onClick:X,onContextMenu:z,onDoubleClick:K,onFocus:oe,onKeyDown:le,onMouseDown:ne,onMouseEnter:G,onMouseLeave:J,onMouseMove:Q,onMouseUp:re,onTouchEnd:ge,onTouchMove:ue,onTouchStart:ce,ref:Z},S.createElement(JEe,null),n)))}),aje=["width","height","responsive","children","className","style","compact","title","desc"];function oje(e,t){if(e==null)return{};var n,r,i=sje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sje(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lje=S.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:l,compact:u,title:d,desc:h}=e,p=oje(e,aje),b=oo(p);return u?S.createElement(S.Fragment,null,S.createElement(Dx,{width:n,height:r}),S.createElement(v5,{otherAttributes:b,title:d,desc:h},a)):S.createElement(ije,{className:o,style:l,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(v5,{otherAttributes:b,title:d,desc:h,ref:t},S.createElement(t2e,null,a)))});function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IE.apply(null,arguments)}var cje={top:5,right:5,bottom:5,left:5},uje={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:cje,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},dje=S.forwardRef(function(t,n){var r,i=Xi(t.categoricalChartProps,uje),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=t,h={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return S.createElement(IEe,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},S.createElement(Yke,{chartData:d.data}),S.createElement(BEe,{layout:i.layout,margin:i.margin}),S.createElement(zEe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(lje,IE({},i,{ref:n})))}),fje=["axis"],hje=S.forwardRef((e,t)=>S.createElement(dje,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fje,tooltipPayloadSearcher:w1e,categoricalChartProps:e,ref:t}));function QF(e){return typeof e=="object"&&e!==null}function fu(e,t=0){return typeof e=="number"&&Number.isFinite(e)?e:t}function mje(e,t=""){return typeof e=="string"?e:t}function pje(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){if(!QF(n))continue;const r=mje(n.day),i=fu(n.dau),a=fu(n.total_active_ms);r&&t.push({day:r,dau:i,total_active_ms:a})}return t}function gje(e){return QF(e)?{online_now:fu(e.online_now),active_today:fu(e.active_today),active_7d:fu(e.active_7d),active_30d:fu(e.active_30d),active_365d:fu(e.active_365d),series:pje(e.series)}:null}function bje(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function w5(){const[e,t]=S.useState(30),[n,r]=S.useState(null),[i,a]=S.useState(0),[o,l]=S.useState(!1),[u,d]=S.useState(""),h=S.useRef(!1),p=S.useRef(!1),b=S.useCallback(async()=>{if(!h.current){h.current=!0,l(!0),d("");try{const{data:_,error:T}=await De.rpc("admin_dashboard_stats",{p_days:e});if(T){d(T.message||"RPC error"),r(null);return}const O=gje(_);if(!O){d("   ( )"),r(null);return}r(O),a(O.online_now)}finally{l(!1),h.current=!1}}},[e]),y=S.useCallback(async()=>{if(!p.current){p.current=!0;try{const{data:_,error:T}=await De.rpc("admin_online_now");if(T)return;const O=typeof _=="number"?_:typeof _=="string"?Number(_):0;Number.isFinite(O)&&a(O)}finally{p.current=!1}}},[]);S.useEffect(()=>{b()},[b]),S.useEffect(()=>{y();const _=window.setInterval(()=>void y(),3e4);return()=>window.clearInterval(_)},[y]),S.useEffect(()=>{const _=window.setInterval(()=>void b(),3e5);return()=>window.clearInterval(_)},[b]);const k=S.useMemo(()=>n?.series??[],[n]),w=S.useMemo(()=>k.reduce((_,T)=>_+(T.total_active_ms||0),0),[k]);return g.jsx(Ehe,{allow:["admin","operator","viewer"],children:g.jsxs("div",{className:"p-6 text-white",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:e,onChange:_=>{const T=Number(_.target.value);(T===30||T===60||T===90)&&t(T)},className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",title:"DAU  ",children:[g.jsx("option",{value:30,children:" 30"}),g.jsx("option",{value:60,children:" 60"}),g.jsx("option",{value:90,children:" 90"})]}),g.jsx("button",{type:"button",onClick:()=>void b(),className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer text-sm",children:""})]})]}),u?g.jsx("div",{className:"text-red-400 mb-3",children:u}):null,o?g.jsx("div",{className:"text-neutral-300 mb-3",children:"Loading..."}):null,g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-10",children:[g.jsx(ym,{label:" ",value:i}),g.jsx(ym,{label:" (DAU)",value:n?.active_today??0}),g.jsx(ym,{label:" 7 ",value:n?.active_7d??0}),g.jsx(ym,{label:" 30 ",value:n?.active_30d??0}),g.jsx(ym,{label:" 1 ",value:n?.active_365d??0})]}),g.jsxs("section",{className:"mb-10",children:[g.jsxs("div",{className:"flex items-end justify-between gap-3 mb-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"DAU "}),g.jsx("div",{className:"text-xs text-neutral-400",children:"(     )"})]}),g.jsx(yje,{data:k})]}),g.jsxs("section",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"   ()"}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"series.total_active_ms  (day    )"}),g.jsx("div",{className:"text-2xl font-bold mt-1",children:bje(w)})]})]})]})})}function ym({label:e,value:t}){return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-neutral-400 text-sm",children:e}),g.jsx("div",{className:"text-3xl font-bold mt-1",children:t})]})}function yje({data:e}){return g.jsx("div",{className:"w-full h-64 bg-neutral-900 border border-neutral-700 rounded-lg p-2 text-xs",children:g.jsx(X0e,{width:"100%",height:"100%",children:g.jsxs(hje,{data:e,children:[g.jsx(CF,{strokeDasharray:"3 3"}),g.jsx(UF,{dataKey:"day"}),g.jsx(FF,{}),g.jsx(Y1e,{formatter:(t,n)=>n==="dau"?[t,"DAU"]:[t,n]}),g.jsx(BF,{type:"monotone",dataKey:"dau"})]})})})}function vje(){const[e,t]=S.useState(""),[n,r]=S.useState("ACTIVE"),[i,a]=S.useState("LAST_SEEN_DESC"),[o,l]=S.useState(1),[u,d]=S.useState({});return{search:e,setSearch:t,tab:n,setTab:r,sort:i,setSort:a,page:o,setPage:l,draftByUser:u,setDraftByUser:d,setDraft:(p,b)=>{d(y=>{const k=y[p]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1};return{...y,[p]:{...k,...b}}})}}}const $E=20;function xje(e){return typeof e=="object"&&e!==null}function Oo(e){return typeof e=="string"?e:null}function _5(e){return typeof e=="boolean"?e:null}function vk(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const t=Number(e);return Number.isFinite(t)?t:null}return null}function eH(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function wje(e){return eH(e)?e:null}function _je(e){if(!xje(e))return null;const t=Oo(e.user_id);return t?{user_id:t,name:Oo(e.name),nickname:Oo(e.nickname),email:Oo(e.email),disabled_at:Oo(e.disabled_at),created_at:Oo(e.created_at),plan:wje(e.plan),starts_at:Oo(e.starts_at),expires_at:Oo(e.expires_at),can_use_myo_viewer:_5(e.can_use_myo_viewer),myeongsik_count:vk(e.myeongsik_count),last_seen_at:Oo(e.last_seen_at),last_path:Oo(e.last_path),total_active_ms:vk(e.total_active_ms),online:_5(e.online),total_count:vk(e.total_count)}:null}function S5(e){const t=(e??"").trim();return t.length?t:null}function tH(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return!1;const n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||r<1||r>12)return!1;const a=new Date(Date.UTC(n,r-1,i));return a.getUTCFullYear()===n&&a.getUTCMonth()===r-1&&a.getUTCDate()===i}function Sje(e,t){if(!tH(e))throw new Error(`   : ${e}`);const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)throw new Error(`   : ${e}`);const r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=new Date(Date.UTC(r,i-1,a));o.setUTCDate(o.getUTCDate()+t);const l=String(o.getUTCFullYear()).padStart(4,"0"),u=String(o.getUTCMonth()+1).padStart(2,"0"),d=String(o.getUTCDate()).padStart(2,"0");return`${l}-${u}-${d}`}function k5(e){if(!tH(e))throw new Error(`   : ${e}`);return`${e}T00:00:00.000Z`}function kje(e){return typeof e=="object"&&e!==null}function Eje(e,t){if(console.error(e,t),kje(t)&&console.error(`${e} fields`,{message:t.message,code:t.code,details:t.details,hint:t.hint}),typeof t=="object"&&t!==null)try{console.error(`${e} ownKeys`,Object.getOwnPropertyNames(t))}catch{}try{console.error(`${e} json`,JSON.stringify(t))}catch{}}function jje(){const[e,t]=S.useState([]),[n,r]=S.useState(0),[i,a]=S.useState(!1),[o,l]=S.useState(null),u=S.useCallback(async h=>{const{search:p,tab:b,sort:y,page:k}=h;a(!0),l(null);try{const w=Math.max(0,(Math.max(1,k)-1)*$E),{data:_,error:T}=await De.rpc("admin_list_users",{p_search:p&&p.trim()?p.trim():null,p_tab:b,p_sort:y,p_limit:$E,p_offset:w});if(T)throw T;const j=(Array.isArray(_)?_:[]).map(_je).filter(C=>C!==null);t(j),r(j[0]?.total_count??0)}catch(w){t([]),r(0),l(w instanceof Error?w.message:"  ")}finally{a(!1)}},[]),d=S.useCallback(async(h,p,b,y)=>{if(p){l(null),b(h,{saving:!0});try{if(!eH(p.plan))throw new Error(`  : ${String(p.plan)}`);const k=S5(p.startDate),w=S5(p.endDate),_=k?k5(k):null,T=w?k5(Sje(w,1)):null;if(_&&T){const C=Date.parse(_),M=Date.parse(T);if(!Number.isFinite(C)||!Number.isFinite(M))throw new Error("  ");if(M<=C)throw new Error("  .")}const O={p_target_user_id:h,p_plan:p.plan,p_can_use_myo_viewer:p.myoViewer==="ON",p_starts_at:_,p_expires_at:T},{error:j}=await De.rpc("admin_set_user_entitlements",O);if(j)throw Eje("admin_set_user_entitlements error",j),j;b(h,{saving:!1,lastSavedAt:Date.now()}),await y()}catch(k){throw b(h,{saving:!1}),l(k instanceof Error?k.message:" "),k}}},[]);return{rows:e,totalCount:n,loading:i,error:o,setError:l,fetchList:u,saveEntitlements:d}}const nH=[{value:"FREE",label:"FREE ()"},{value:"BASIC",label:"BASIC (ON)"},{value:"PRO",label:"PRO (OFF)"}];function Tje(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function Aje(e){const t=e??"FREE";return nH.find(n=>n.value===t)?.label??String(t)}function Nje(e){if(!e)return" ";const t=Date.parse(e);if(!Number.isFinite(t))return" ";const n=Date.now()-t,r=Math.floor(n/1e3);if(r<15)return"";if(r<60)return`${r} `;const i=Math.floor(r/60);if(i<60)return`${i} `;const a=Math.floor(i/60);return a<24?`${a} `:`${Math.floor(a/24)} `}function E5(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function Ov(e){if(!e)return"";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toISOString().slice(0,10):""}function Oje(e,t){const n=Ov(e),r=Ov(t);return!n&&!r?" ":n&&!r?`${n} ~`:!n&&r?`~ ${r}`:`${n} ~ ${r}`}function Cje(e,t){const n={...e};for(const r of t){const i=r.plan??"FREE",a=Ov(r.starts_at),o=Ov(r.expires_at),l=r.can_use_myo_viewer===!0?"ON":"OFF",u=n[r.user_id];if(!u){n[r.user_id]={plan:i,startDate:a,endDate:o,myoViewer:l,saving:!1};continue}u.saving||(u.plan!==i||u.startDate!==a||u.endDate!==o||u.myoViewer!==l)&&(n[r.user_id]={...u,plan:i,startDate:a,endDate:o,myoViewer:l})}return n}function Mje(){const e=vje(),{search:t,setSearch:n,tab:r,setTab:i,sort:a,setSort:o,page:l,setPage:u,draftByUser:d,setDraftByUser:h,setDraft:p}=e,{rows:b,totalCount:y,loading:k,error:w,fetchList:_,saveEntitlements:T}=jje(),O=S.useMemo(()=>Math.max(1,Math.ceil(y/$E)),[y]);return S.useEffect(()=>{u(1)},[r,a]),S.useEffect(()=>{_({search:t,tab:r,sort:a,page:l})},[_,t,r,a,l]),S.useEffect(()=>{l>O&&u(O)},[l,O,u]),S.useEffect(()=>{h(j=>Cje(j,b))},[b,h]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Users"}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-4",children:[g.jsx("input",{className:"px-3 py-2 bg-neutral-800 border border-neutral-700 rounded w-full max-w-sm",placeholder:"Search (name, email, userId...)",value:t,onChange:j=>{n(j.target.value),u(1)}}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:r,onChange:j=>{const C=j.target.value;i(C==="DISABLED"?"DISABLED":C==="ALL"?"ALL":"ACTIVE")},children:[g.jsx("option",{value:"ACTIVE",children:""}),g.jsx("option",{value:"DISABLED",children:""}),g.jsx("option",{value:"ALL",children:""})]}),g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:a,onChange:j=>{const C=j.target.value;(C==="LAST_SEEN_DESC"||C==="LAST_SEEN_ASC"||C==="CREATED_DESC"||C==="CREATED_ASC"||C==="PLAN_DESC"||C==="ONLINE_ACTIVE_MS_DESC"||C==="TOTAL_ACTIVE_MS_DESC")&&o(C)},children:[g.jsx("option",{value:"LAST_SEEN_DESC",children:" "}),g.jsx("option",{value:"CREATED_DESC",children:" "}),g.jsx("option",{value:"PLAN_DESC",children:""}),g.jsx("option",{value:"ONLINE_ACTIVE_MS_DESC",children:"+"}),g.jsx("option",{value:"TOTAL_ACTIVE_MS_DESC",children:""}),g.jsx("option",{value:"LAST_SEEN_ASC",children:" "}),g.jsx("option",{value:"CREATED_ASC",children:" "})]})]})]}),w&&g.jsx("div",{className:"text-red-400 mb-2",children:w}),k&&g.jsx("div",{children:"Loading..."}),g.jsx("div",{className:"space-y-3",children:b.map(j=>{const C=j.name||j.nickname||"(no profile)",M=j.email||"",P=d[j.user_id]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1,lastSavedAt:void 0},I=Date.now(),U=(j.starts_at?Date.parse(j.starts_at)<=I:!0)&&(j.expires_at?Date.parse(j.expires_at)>I:!0),V=j.plan??"FREE",q=U?V:"FREE",H=j.can_use_myo_viewer===!0?"ON":"OFF",B=j.last_seen_at??null,W=j.online===!0,Z=j.total_active_ms??null;return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg hover:bg-neutral-800",children:[g.jsxs("div",{className:"font-semibold text-lg flex flex-col desk:flex-row item-start desk:items-center justify-between gap-3",children:[g.jsxs("div",{className:"min-w-0 flex flex-col desk:flex-row item-start desk:items-center gap-2",children:[g.jsx("span",{className:"text-nowrap mr-1",children:C}),M?g.jsxs("span",{className:"text-sm text-neutral-400",children:["(",M,")"]}):null,g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${W?"bg-emerald-900/40 border-emerald-700 text-emerald-300":"bg-neutral-800 border-neutral-700 text-neutral-300"}`,title:B?new Date(B).toLocaleString():" ",children:[W?"":"","  ",Nje(B)]}),g.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-neutral-800 border-neutral-700 text-neutral-300",title:" ",children:[" ",E5(Z)]})]})]}),g.jsx("span",{className:"text-neutral-500 text-sm shrink-0",children:j.user_id})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",j.myeongsik_count??0,"",B?g.jsxs(g.Fragment,{children:["    ",new Date(B).toLocaleString()]}):g.jsx(g.Fragment,{children:"     "}),g.jsxs(g.Fragment,{children:["   ",E5(Z)]})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",Aje(q),"  ",Oje(j.starts_at,j.expires_at),"    ",H,!U&&j.plan&&j.plan!=="FREE"?" ()":""]}),g.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("div",{className:"mb-1",children:[g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.startDate,onChange:X=>p(j.user_id,{startDate:X.target.value})}),g.jsx("span",{className:"text-neutral-500 mx-1",children:"~"}),g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.endDate,onChange:X=>p(j.user_id,{endDate:X.target.value})})]}),g.jsx("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.plan,onChange:X=>{const G=X.target.value;Tje(G)&&p(j.user_id,{plan:G})},children:nH.map(X=>g.jsx("option",{value:X.value,children:X.label},X.value))}),g.jsxs("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.myoViewer,onChange:X=>p(j.user_id,{myoViewer:X.target.value==="ON"?"ON":"OFF"}),children:[g.jsx("option",{value:"ON",children:"  ON"}),g.jsx("option",{value:"OFF",children:"  OFF"})]}),g.jsx("button",{type:"button",disabled:P.saving,onClick:()=>void T(j.user_id,P,e.setDraft,()=>_({search:t,tab:r,sort:a,page:l})),className:"px-3 py-1 rounded bg-purple-600 hover:bg-purple-500 disabled:opacity-50 cursor-pointer",children:P.saving?" ...":""}),g.jsx("button",{type:"button",onClick:()=>location.href=`/admin/user/${j.user_id}`,className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""})]}),P.lastSavedAt!=null?g.jsxs("div",{className:"text-xs text-emerald-400",children:["  ",new Date(P.lastSavedAt).toLocaleString()]}):null]})]},j.user_id)})}),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{disabled:l<=1,onClick:()=>u(j=>j-1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""}),g.jsxs("span",{children:[l," / ",O," ( ",y,")"]}),g.jsx("button",{disabled:l>=O,onClick:()=>u(j=>j+1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""})]})]})}function Dje(){const[e,t]=S.useState(null),[n,r]=S.useState([]),[i,a]=S.useState(!1);return{profile:e,setProfile:t,myeongsikList:n,setMyeongsikList:r,saving:i,setSaving:a}}function Pje(e){return{isDisabled:!!e?.disabled_at,hasProfile:!!e}}async function qA({action:e,targetUserId:t,targetRecordId:n,payload:r={}}){const a=(await De.auth.getSession()).data.session?.user?.id;a&&await De.from("audit_logs").insert({action:e,target_user_id:t??null,target_record_id:n??null,actor_admin_id:a,payload:r})}const Rje=async e=>{const{data:t}=await De.from("profiles").select("*").eq("user_id",e).maybeSingle();return t??null},Lje=async e=>{const{data:t}=await De.from("myeongsik").select("*").eq("user_id",e).order("created_at",{ascending:!1});return t??[]},Ije=async e=>{await De.from("profiles").insert({user_id:e,name:"",nickname:"",email:"",mgr_memo:""})},$je=async(e,t)=>{await De.from("profiles").update({name:t.name,nickname:t.nickname,email:t.email,mgr_memo:t.mgr_memo}).eq("user_id",e)},Bje=async e=>{await De.from("profiles").update({disabled_at:null}).eq("user_id",e),await De.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await qA({action:"restore_account",targetUserId:e,payload:{source:"admin_user_detail"}})},zje=async e=>{await De.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await qA({action:"restore_myeongsik_all",targetUserId:e,payload:{source:"admin_user_detail"}})},j5=async(e,t,n)=>{const{error:r}=await De.rpc("admin_set_myeongsik_deleted",{p_target_user_id:e,p_myeongsik_id:t,p_deleted_at:n});if(r)throw console.error("admin_set_myeongsik_deleted error:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),r;await qA({action:n?"delete_myeongsik":"restore_myeongsik",targetUserId:e,targetRecordId:t,payload:{deleted_at:n,source:"admin_user_detail"}})};function Uje(e,t){if(t&&typeof t=="object"){const n=t;console.error(e,{message:n.message,details:n.details,hint:n.hint,code:n.code});return}console.error(e,t)}function Fje({userId:e,profile:t,setProfile:n,setMyeongsikList:r,setSaving:i}){const a=S.useCallback(async()=>{const _=await Rje(e);n(_)},[e,n]),o=S.useCallback(async()=>{const _=await Lje(e);r(_)},[e,r]);S.useEffect(()=>{a(),o()},[a,o]);const l=S.useCallback(async()=>{if(e){i(!0);try{await Ije(e),await a()}catch(_){throw console.error("handleCreateProfile failed:",_),_}finally{i(!1)}}},[e,i,a]),u=S.useCallback(async()=>{if(e&&t){i(!0);try{await $je(e,t),await a()}catch(_){throw console.error("handleSaveProfile failed:",_),_}finally{i(!1)}}},[e,t,i,a]),d=S.useCallback(async()=>{if(e&&t){i(!0);try{const _=t.disabled_at==null,{data:T,error:O}=await De.rpc("admin_set_profile_disabled",{p_target_user_id:e,p_disabled:_});if(O)throw Uje("admin_set_profile_disabled error:",O),O;n({...t,disabled_at:typeof T=="string"?T:null})}finally{i(!1)}}},[e,t,n,i]),h=S.useCallback(async()=>{if(e){i(!0);try{await Bje(e),await a(),await o()}catch(_){throw console.error("handleRestoreAccount failed:",_),_}finally{i(!1)}}},[e,i,a,o]),p=S.useCallback(async()=>{if(e){i(!0);try{await zje(e),await o()}catch(_){throw console.error("handleRestoreAllMyeongsik failed:",_),_}finally{i(!1)}}},[e,i,o]),b=S.useCallback(async _=>{if(e&&_){i(!0);try{await j5(e,_,null),await o()}catch(T){throw console.error("handleRestoreMyeongsik failed:",T),T}finally{i(!1)}}},[e,i,o]),y=S.useCallback(_=>{const T=typeof window<"u"?window.location.origin:"",O=_?`${T}/impersonate?userId=${e}&myeongsikId=${_}`:`${T}/impersonate?userId=${e}`;window.open(O,"_blank")},[e]),k=S.useCallback(async(_,T)=>{if(!e||!_)return;const O=T?null:new Date().toISOString();i(!0);try{await j5(e,_,O),await o()}catch(j){throw console.error("toggleDeleteMyeongsik failed:",j),j}finally{i(!1)}},[e,i,o]),w=S.useCallback(_=>{window.location.href=_},[]);return{handleCreateProfile:l,handleSaveProfile:u,toggleDisable:d,handleRestoreAccount:h,handleRestoreAllMyeongsik:p,handleRestoreMyeongsik:b,handleViewAsUser:y,toggleDeleteMyeongsik:k,goTo:w}}function Hje({params:e}){const t=e.userId,n=Dje(),r=Pje(n.profile),i=Fje({userId:t,profile:n.profile,setProfile:n.setProfile,setMyeongsikList:n.setMyeongsikList,setSaving:n.setSaving});return g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("button",{className:"mb-4 underline cursor-pointer",onClick:()=>i.goTo("/admin/user"),children:"  "}),g.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg mb-6",children:[g.jsx("div",{className:"flex items-center justify-between mb-3",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:""}),g.jsx("button",{className:"px-3 py-1 bg-blue-700 text-xs rounded cursor-pointer",onClick:()=>i.handleViewAsUser(),children:" ( )"})]})}),!r.hasProfile&&g.jsx("button",{onClick:i.handleCreateProfile,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer",disabled:n.saving,children:" "}),r.hasProfile&&n.profile&&g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.name??"",onChange:a=>n.setProfile({...n.profile,name:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.nickname??"",onChange:a=>n.setProfile({...n.profile,nickname:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Email"}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.email??"",onChange:a=>n.setProfile({...n.profile,email:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:" "}),g.jsx("textarea",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",rows:3,value:n.profile.mgr_memo??"",onChange:a=>n.setProfile({...n.profile,mgr_memo:a.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:i.handleSaveProfile,className:"px-3 py-2 bg-green-600 rounded cursor-pointer text-xs",disabled:n.saving,children:""}),r.isDisabled&&g.jsx("button",{onClick:i.handleRestoreAccount,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer text-xs",disabled:n.saving,children:" + "}),g.jsx("button",{onClick:i.toggleDisable,className:`px-3 py-2 rounded cursor-pointer text-xs ${r.isDisabled?"bg-yellow-600":"bg-gray-600"}`,children:r.isDisabled?" ":" "})]})]})]}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:" "}),g.jsx("button",{className:"px-3 py-2 bg-blue-700 rounded text-xs cursor-pointer",onClick:i.handleRestoreAllMyeongsik,disabled:n.saving,children:"  "})]}),n.myeongsikList.map(a=>g.jsx("div",{className:"p-3 bg-neutral-800 border border-neutral-700 rounded mb-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:a.name||"(no name)"}),g.jsxs("div",{className:"text-sm text-neutral-400",children:["Birth: ",a.birth_json?.birthDay??"-"," "," ",a.created_at?new Date(a.created_at).toLocaleString():"-"]})]}),g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{className:"text-nowrap px-2 py-1 border border-emerald-500 text-emerald-100 rounded cursor-pointer text-xs",onClick:()=>i.handleRestoreMyeongsik(a.id),disabled:n.saving,children:"  "})})]})},a.id)),n.myeongsikList.length===0&&g.jsx("div",{className:"text-neutral-400",children:" ."})]})]})}function Gje({open:e,onClose:t,children:n}){return e?g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center",children:g.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-6 max-w-2xl w-full relative",children:[g.jsx("button",{className:"absolute top-3 right-3 text-neutral-400 hover:text-white",onClick:t,children:""}),g.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:n})]})}):null}const T5=50;function Yje(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState([]),[o,l]=S.useState(1),[u,d]=S.useState("all"),[h,p]=S.useState("all"),[b,y]=S.useState("30"),[k,w]=S.useState(""),[_,T]=S.useState(!1),O=S.useCallback(async C=>{await De.from("audit_logs").delete().eq("id",C),a(M=>M.filter(P=>P.id!==C))},[]),j=S.useCallback(async()=>{T(!0);const C=new Date;b!=="all"&&C.setDate(C.getDate()-Number(b));let M=De.from("audit_logs").select("*").order("created_at",{ascending:!1}).range((o-1)*T5,o*T5-1);b!=="all"&&(M=M.gte("created_at",C.toISOString())),u!=="all"&&(M=M.eq("action",u)),h!=="all"&&(M=M.eq("actor_admin_id",h));const{data:P}=await M;let I=P||[];if(k.trim()!==""){const U=k.toLowerCase();I=I.filter(V=>(JSON.stringify(V).toLowerCase()+(V.payload?JSON.stringify(V.payload).toLowerCase():"")).includes(U))}a(I),T(!1)},[o,u,h,b,k]);return S.useEffect(()=>{j()},[j]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Audit Logs"}),g.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-3",children:[g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:u,onChange:C=>d(C.target.value),children:[g.jsx("option",{value:"all",children:" Action"}),g.jsx("option",{value:"delete_myeongsik",children:" "}),g.jsx("option",{value:"restore_myeongsik",children:" "}),g.jsx("option",{value:"update_profile",children:" "}),g.jsx("option",{value:"impersonate_user",children:""})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:h,onChange:C=>p(C.target.value),children:[g.jsx("option",{value:"all",children:" "}),g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"system",children:"System"})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:b,onChange:C=>y(C.target.value),children:[g.jsx("option",{value:"1",children:"24"}),g.jsx("option",{value:"7",children:"7"}),g.jsx("option",{value:"30",children:"30"}),g.jsx("option",{value:"all",children:""})]}),g.jsx("input",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",placeholder:" (payload )",value:k,onChange:C=>w(C.target.value)})]}),_?g.jsx("div",{children:"Loading..."}):i.map(C=>g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded mb-4 cursor-pointer hover:bg-neutral-800",onClick:()=>{t(C),r(!0)},children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsx("div",{className:"font-semibold text-lg",children:C.action}),g.jsx("button",{className:"px-2 py-1 text-xs bg-red-700 hover:bg-red-600 rounded cursor-pointer",onClick:M=>{M.stopPropagation(),O(C.id)},children:""})]}),g.jsxs("div",{className:"text-sm mt-1 text-neutral-400",children:[g.jsxs("div",{children:["Actor: ",C.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",C.target_user_id||"-"]}),g.jsxs("div",{children:["Target Record: ",C.target_record_id||"-"]}),g.jsxs("div",{children:["Time: ",new Date(C.created_at).toLocaleString()]})]}),C.payload&&g.jsx("pre",{className:"mt-3 text-xs bg-neutral-800 p-2 rounded",children:JSON.stringify(C.payload,null,2)})]},C.id)),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded disabled:opacity-40 cursor-pointer",disabled:o===1,onClick:()=>l(C=>C-1),children:" "}),g.jsxs("span",{className:"text-neutral-400",children:["Page ",o]}),g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded cursor-pointer",onClick:()=>l(C=>C+1),children:" "})]}),g.jsx(Gje,{open:n,onClose:()=>r(!1),children:e&&g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold mb-3",children:e.action}),g.jsxs("div",{className:"text-sm text-neutral-400 space-y-1 mb-4",children:[g.jsxs("div",{children:["Actor: ",e.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",e.target_user_id??"-"]}),g.jsxs("div",{children:["Target Record: ",e.target_record_id??"-"]}),g.jsxs("div",{children:["Time: ",new Date(e.created_at).toLocaleString()]})]}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payload"}),g.jsx("pre",{className:"text-xs bg-neutral-800 p-3 rounded whitespace-pre-wrap",children:JSON.stringify(e.payload,null,2)})]})})]})}const qje="15b517b3-3d97-41a6-ae17-563abd163a36".split(",").map(e=>e.trim()).filter(Boolean);function rH(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1);if(S.useEffect(()=>{(async()=>{const{data:l}=await De.auth.getUser(),u=l.user?.id;r(!!u&&qje.includes(u)),t(!0)})()},[]),!e)return g.jsx("div",{className:"p-6 text-white",children:"  ...!"});if(!n)return g.jsx("div",{className:"p-6 text-white",children:"  "});const i=window.location.pathname;let a=g.jsx(w5,{});if(i.startsWith("/admin/user/")){const o=i.replace("/admin/user/","");a=g.jsx(Hje,{params:{userId:o}})}else i.startsWith("/admin/user")?a=g.jsx(Mje,{}):i.startsWith("/admin/logs")?a=g.jsx(Yje,{}):i.startsWith("/admin/dashboard")&&(a=g.jsx(w5,{}));return g.jsx(She,{children:a})}function Kje({pillarsA:e,pillarsB:t}){const n=Kae(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([r,i])=>i.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:r}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((a,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:a},o))})]},r):null)]})}const Wje=["","","","","","","","","",""],Vje=["","","","","","","","","",""],Zje=["","","","","","","","","","","",""],Xje=["","","","","","","","","","","",""],Jje=new Set([...Wje,...Vje]),Qje=new Set([...Zje,...Xje]);function eTe(e){return typeof e=="object"&&e!==null}function A5(e){return typeof e=="string"&&e.length>=2&&Jje.has(e[0])&&Qje.has(e[1])}function mn(e,...t){if(A5(e))return e;for(const n of t)if(A5(n))return n;return""}function Mb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function tTe(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function N5(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,r,i,a,o]=t,l=new Date(+n,+r-1,+i,+a,+o);return Number.isNaN(l.getTime())?null:l}function Cv(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function nTe(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=0,a=0;const o=e;return typeof o.birthTime=="string"&&o.birthTime.length>=4&&(i=Number(o.birthTime.slice(0,2)),a=Number(o.birthTime.slice(2,4))),{y:t,m:n,d:r,hh:i,mm:a}}function Jx(e){const{y:t,m:n,d:r,hh:i,mm:a}=nTe(e),o=e.corrected instanceof Date&&!Number.isNaN(e.corrected.getTime())?e.corrected:new Date(t,n-1,r,i,a),l=o.getHours(),u=o.getMinutes();return e.calendarType==="lunar"?Zi(t,n,r,l,u):new Date(t,n-1,r,l,u)}function rTe(e){const t=Jx(e);return`${Cv(e)}-${t.toISOString()}`}function Ld(e){const t=e;return typeof t.id=="string"&&t.id?t.id:rTe(e)}function iTe(e){return eTe(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function aTe(e){const t=W6;return iTe(t)?e==="classic"?t.Classic:t.Modern:e}function oTe(e){if(!e)return"";const t=e,n=l=>typeof t[l]=="string"?String(t[l]).trim().toLowerCase():null,r=l=>typeof t[l]=="boolean"?t[l]:null,i=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(l=>!!l);for(const l of i){if(["","","male","m","boy","man"].includes(l))return"";if(["","","female","f","girl","woman"].includes(l))return""}const a=r("isMale"),o=r("isFemale");return a===!0?"":o===!0?"":""}const xk="people_picker_order_v1";function sTe(e,t,n){const r=e.slice(),[i]=r.splice(t,1);return r.splice(n,0,i),r}function O5({open:e,list:t,onSelect:n,onClose:r}){const[i,a]=S.useState("");S.useEffect(()=>{e||a("")},[e]);const o=S.useMemo(()=>t.map(Ld),[t]),l=S.useMemo(()=>new Set(o),[o]),[u,d]=S.useState([]);S.useEffect(()=>{const w=localStorage.getItem(xk),_=w?JSON.parse(w):[],T=_.filter(j=>l.has(j)),O=[...T,...o.filter(j=>!T.includes(j))];d(O),JSON.stringify(O)!==JSON.stringify(_)&&localStorage.setItem(xk,JSON.stringify(O))},[o,l]);const h=w=>{d(w),localStorage.setItem(xk,JSON.stringify(w))},p=S.useMemo(()=>{const w=new Map(t.map(j=>[Ld(j),j])),_=[];for(const j of u){const C=w.get(j);C&&_.push(C)}w.forEach((j,C)=>{u.includes(C)||_.push(j)});const T=[],O=[];for(const j of _)(typeof j.relationship=="string"?j.relationship.trim():"")===""?T.push(j):O.push(j);return[...T,...O]},[t,u]),b=S.useMemo(()=>{const w=i.trim().toLowerCase();return w?p.filter(_=>{const T=typeof _.relationship=="string"?_.relationship.trim():"";return`${Cv(_)} ${T}`.toLowerCase().includes(w)}):p},[p,i]),y=i.trim()==="",k=w=>{const{destination:_,source:T}=w;if(!_||!y||_.index===T.index)return;const O=b.map(Ld),j=sTe(O,T.index,_.index),M=p.map(Ld).filter(I=>!O.includes(I)),P=[...j,...M].filter((I,U,V)=>V.indexOf(I)===U);h(P)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:r}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:r,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"mb-3",children:[g.jsx("input",{value:i,onChange:w=>a(w.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-sm"}),g.jsx("div",{className:"text-[11px] text-neutral-500 mt-1",children:"    ."})]}),g.jsx(Np,{onDragEnd:k,children:g.jsx(Of,{droppableId:"people-picker",children:w=>g.jsxs("ul",{className:"space-y-2",ref:w.innerRef,...w.droppableProps,children:[b.map((_,T)=>{const O=Jx(_),j=typeof _.relationship=="string"?_.relationship.trim():"",C=j||" ",M=Cv(_),P=j&&M===" "?j:M;return g.jsx(Nf,{draggableId:Ld(_),index:T,isDragDisabled:!y,children:I=>g.jsx("li",{ref:I.innerRef,...I.draggableProps,...I.dragHandleProps,className:"flex items-center justify-between gap-2 px-3 py-2 rounded border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:g.jsxs("button",{onClick:()=>n(_),className:"flex-1 text-left cursor-pointer",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-100",children:[g.jsx("span",{children:P}),g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border border-neutral-300 dark:border-neutral-700 ${j?"text-neutral-600 dark:text-neutral-300":"text-neutral-400 dark:text-neutral-500"}`,children:C})]}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Lm(O)})]})})},Ld(_))}),w.placeholder]})})})]})]})}function wk({label:e,gzHour:t,gzDay:n,gzMonth:r,gzYear:i,dayStem:a,cardSettings:o,sinsalBaseBranch:l,sinsalMode:u,sinsalBloom:d}){const h=w=>{const _=o.showSibiUnseong?io(a,w):"",T=o.showSibiSinsal?ao({baseBranch:l,targetBranch:w,era:aTe(u),gaehwa:!!d}):"";return{unseongText:_||void 0,shinsalText:T||void 0}},p=mn(t).charAt(1),b=mn(n).charAt(1),y=mn(r).charAt(1),k=mn(i).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",mn(t),p],["",mn(n),b],["",mn(r),y],["",mn(i),k]].map(([w,_,T])=>{const{unseongText:O,shinsalText:j}=h(T);return g.jsx(Ud,{label:w,gz:_,dayStem:a,settings:tn.getState().settings,unseongText:O,shinsalText:j,hideBranchSipSin:!0,size:"sm"},`${e}-${w}`)})})]})}function Id({label:e,data:t,mode:n,effectiveDate:r,onPick:i}){const a=tn(P=>P.settings),o=S.useMemo(()=>t?Jx(t):null,[t]),l="/",u=mn(o?no(o,l):void 0),d=mn(o?pt(o,l):void 0),h=mn(o?At(o):void 0),p=mn(o?ct(o):void 0),b=S.useMemo(()=>d.charAt(0)||"",[d]),y=o,k=S.useMemo(()=>{const P=t?.birthPlace;return!P||P.name===""||!P.lon?127.5:P.lon},[t]),w=t?.mingSikType??l,_=S.useMemo(()=>{const P=y?pt(y,w).charAt(1):d.charAt(1)||"",I=y?ct(y,k).charAt(1):p.charAt(1)||"";return(a.sinsalBase??"")===""?P:I},[a.sinsalBase,y,w,k,d,p]),T=S.useMemo(()=>{if(n!==""||!o||!t)return null;try{const P=J6(o,u,t.dir,120),I=e7(P,d,t.dir,t.DayChangeRule),U=Dp(o,h,t.dir,120,t?.birthPlace?.lon??127.5),V=t7(U,p,t.dir,t.DayChangeRule,o),q=r;return{si:mn(Mb(P.events,q)?.gz,u),il:mn(Mb(I.events,q)?.gz,d),wl:mn(Mb(U.events,q)?.gz,h),yn:mn(Mb(V.events,q)?.gz,p)}}catch{return null}},[n,o,u,d,h,p,r,t]),O=S.useMemo(()=>{if(n!=="")return null;const P=r;return{si:mn(no(P,l)),il:mn(pt(P,l)),wl:mn(At(P)),yn:mn(ct(P))}},[n,r]),j=t?Cv(t):"",C=o?Lm(o):"",M=t?oTe(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:i,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:"  ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:j}),M&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",M]}),C&&g.jsx("span",{className:"block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:C})]}),n===""&&g.jsx(wk,{label:"",gzHour:u,gzDay:d,gzMonth:h,gzYear:p,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&T&&g.jsx(wk,{label:"",gzHour:T.si,gzDay:T.il,gzMonth:T.wl,gzYear:T.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&O&&g.jsx(wk,{label:"",gzHour:O.si,gzDay:O.il,gzMonth:O.wl,gzYear:O.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:i,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function lTe({people:e=[]}){const[t,n]=S.useState(),[r,i]=S.useState(),[a,o]=S.useState(!1),[l,u]=S.useState(!1),d=S.useRef(new Date),[h,p]=S.useState(()=>tTe(d.current)),b=S.useRef(N5(h)??d.current),y=S.useMemo(()=>{const C=N5(h);return C&&(b.current=C),b.current},[h]),[k,w]=S.useState(!1),[_,T]=S.useState(!1);function O(C){if(!C)return["","","",""];try{const M=Jx(C),P="/",I={hour:mn(no(M,P)),day:mn(pt(M,P)),month:mn(At(M)),year:mn(ct(M))};return[I.year,I.month,I.day,I.hour]}catch{return["","","",""]}}const j=bn(C=>C.canUseMyoViewerNow());return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[j?g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:a,onChange:C=>o(C.target.checked),className:"accent-indigo-500"})," "]}):null,g.jsx("button",{onClick:()=>u(C=>!C),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(Id,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),g.jsx(Id,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),a&&t&&g.jsx(Id,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),a&&r&&g.jsx(Id,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),l&&t&&g.jsx(Id,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),l&&r&&g.jsx(Id,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)})]}),t&&r&&g.jsx("div",{className:"mt-4",children:g.jsx(Kje,{pillarsA:O(t),pillarsB:O(r)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:" /"}),g.jsx("input",{type:"datetime-local",value:h,onChange:C=>p(C.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(O5,{open:k,list:e||[],onSelect:C=>{n(C),w(!1)},onClose:()=>w(!1)}),g.jsx(O5,{open:_,list:e||[],onSelect:C=>{i(C),T(!1)},onClose:()=>T(!1)})]})}function cTe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=async()=>{try{const{data:{user:a}}=await De.auth.getUser();if(!a){alert("  .");return}const o=a.id,l=new Date().toISOString();await De.from("profiles").update({disabled_at:l}).eq("id",o),await De.from("myeongsik").update({deleted_at:l}).eq("user_id",o),await De.auth.signOut(),alert(" .   ."),window.location.href="/"}catch(a){console.error(a),alert("    .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 pb-[calc(64px+env(safe-area-inset-bottom,0px)+var(--bottom-dock,0px))] px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>r(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"     ,    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-1",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsxs("p",{className:"mb-2",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"    /  ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"         "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-1",children:"       ."}),g.jsx("p",{className:"mb-2",children:"   3  ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase /DB    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>r(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["        .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:i,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function uTe(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function _k(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,n,r]=e.split("-"),i=Number(t),a=Number(n),o=Number(r);if(!Number.isFinite(i)||!Number.isFinite(a)||!Number.isFinite(o)||a<1||a>12)return null;const l=new Date(i,a,0).getDate();return o<1||o>l?null:{y:i,m:a,d:o}}function C5(e,t,n){return e<t?t:e>n?n:e}function iH({date:e,onChange:t,min:n="1900-01-01",max:r="2100-12-31",className:i="px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}){const a=S.useMemo(()=>e instanceof Date&&!Number.isNaN(e.getTime())?e:new Date,[e]),o=S.useMemo(()=>uTe(a),[a]),[l,u]=S.useState(o);S.useEffect(()=>{u(o)},[o]);const d=h=>{if(!_k(h))return;const b=C5(h,n,r),{y,m:k,d:w}=_k(b),_=a.getHours(),T=a.getMinutes(),O=a.getSeconds(),j=a.getMilliseconds(),C=new Date(y,k-1,w,_,T,O,j);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:l,min:n,max:r,onChange:h=>{const p=h.target.value;u(p),p&&d(p)},onBlur:()=>{if(!l||!_k(l)){u(o);return}const h=C5(l,n,r);h!==l&&(u(h),d(h))},className:i,"aria-label":" "})}function dTe({ms:e}){const{date:t,setDate:n}=Qr(),r=Fs(),i=S.useMemo(()=>{const d=typeof e.id=="string"?e.id:"";if(d)return d;const h=typeof e.birthDay=="string"||typeof e.birthDay=="number"?String(e.birthDay):"",p=typeof e.birthTime=="string"?e.birthTime:"";return[typeof e.ganji=="string"?e.ganji:"",h,p].filter(Boolean).join("|")},[e]);S.useEffect(()=>{n(new Date)},[i]);const a=lx(e,void 0,void 0,{dstOffsetMinutes:r}),o=t instanceof Date&&!Number.isNaN(t.getTime())?t:new Date,l=S.useMemo(()=>{const d=typeof e.ganji=="string"?e.ganji:"",h=a?.dae?.gz?`${a.dae.gz}`:null,p=a?.se?.gz?`${a.se.gz}`:null,b=a?.wol?.gz?`${a.wol.gz}`:null,y=[h,p,b].filter(Boolean).join(" ");return[d,y].filter(Boolean).join(" + ")},[e.ganji,a]),u=d=>{n(d)};return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto mb-4 px-2 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[l&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:l}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx(iH,{date:o,onChange:u,min:"1900-01-01",max:"2100-12-31"})]})})]})}function fTe({useWoldu:e,useSiju:t,hourRule:n,gender:r,onToggleWoldu:i,onToggleSiju:a,onChangeHourRule:o,onChangeGender:l}){return g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:e,onChange:u=>i(u.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:t,onChange:u=>a(u.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:r==="male",onChange:()=>l("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:r==="female",onChange:()=>l("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]})}function hTe({pillars:e,active:t,canEnterOthers:n,onActivate:r}){return g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([i,a])=>{const o=!n&&!(i==="yearStem"||i==="yearBranch"||i==="dayStem"||i==="dayBranch"),l=t===i;return g.jsxs("button",{onClick:()=>!o&&r(i),disabled:o,className:["border rounded p-2 text-center cursor-pointer",l?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",o?"opacity-50 cursor-not-allowed":""].join(" "),children:[a,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:e[i]??"-"})]},i)})})}function mTe({results:e,selectedRow:t,onSelectRow:n,gender:r}){return e?e.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:e.map((i,a)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${a}`,checked:t===a,onChange:()=>n(a)}),g.jsx("label",{htmlFor:`selectRow-${a}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:i.date}),g.jsx("td",{className:"p-1 text-center",children:i.year}),g.jsx("td",{className:"p-1 text-center",children:i.month}),g.jsx("td",{className:"p-1 text-center",children:i.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:i.hourSlots.map((o,l)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:o.branch})},l))})}),g.jsx("td",{className:"p-1 text-center",children:r==="male"?"":""})]},`${i.date}-${a}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"    ."})}function pTe({toast:e,showToast4:t,searchToast:n,error:r}){return g.jsxs(g.Fragment,{children:[e&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:e})}),t&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),n&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:["  .",g.jsx("br",{}),"   ."]})}),r&&g.jsx("div",{className:"mt-3 text-xs text-red-600 text-center",children:r})]})}function gTe({choices:e,onChoose:t}){return!e||e.length===0?null:g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  ."}),g.jsx("div",{className:"flex gap-2",children:e.map(n=>g.jsx("button",{onClick:()=>t(n),className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:n},n))})]})}const KA=["","","","","","","","","",""],i0=["","","","","","","","","","","",""],bTe={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},aH=["","","","","","","","","","","",""],yTe=i0,vTe=aH,xTe=["23:00~0:59","01:00~2:59","03:00~4:59","05:00~6:59","07:00~8:59","09:00~10:59","11:00~12:59","13:00~14:59","15:00~16:59","17:00~18:59","19:00~20:59","21:00~22:59"],wTe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_Te={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function xp(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const r=bTe[n],i=aH.indexOf(t),a=(r+(i>=0?i:0))%10;return KA[a]}function Qx(e,t){const n=t===""?yTe:vTe,r=e===""||e===""?0:e===""||e===""?2:e===""||e===""?4:e===""||e===""?6:8,i=i0.reduce((a,o)=>(a[o]="",a),{});for(let a=0;a<12;a++){const o=KA[(r+a)%10],l=n[a];i[l]=`${o}${l}`}return i}const STe={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};function kTe(e){return e==="yearStem"?"yearBranch":e==="yearBranch"?"yearStem":e==="monthStem"?"monthBranch":e==="monthBranch"?"monthStem":e==="dayStem"?"dayBranch":e==="dayBranch"?"dayStem":e==="hourStem"?"hourBranch":"hourStem"}function ETe({active:e,pillars:t,activeIsStem:n,activeIsBranch:r,onSelect:i,settingsObj:a}){return e?g.jsxs("div",{className:"w-full",children:[n&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:KA.map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Wi(o,"stem",a)}`,children:o},o))})]}),r&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:i0.filter(o=>{const l=kTe(e),u=t[l];return u?_Te[o]===wTe[u]:!0}).map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Wi(o,"branch",a)}`,children:o},o))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"   ."})}function jTe(){const[e,t]=S.useState({}),[n,r]=S.useState(null),[i,a]=S.useState(null),[o,l]=S.useState(!0),[u,d]=S.useState(!0),[h,p]=S.useState(""),[b,y]=S.useState("male"),[k,w]=S.useState(null),[_,T]=S.useState(!1),[O,j]=S.useState(null),[C,M]=S.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[P,I]=S.useState(!1),[U,V]=S.useState(null),[q,H]=S.useState(null),[B,W]=S.useState(!1),[Z,X]=S.useState(!1),G=J=>{H(J),setTimeout(()=>H(null),1800)};return S.useEffect(()=>{if(!B)return;const J=setTimeout(()=>W(!1),2e3);return()=>clearTimeout(J)},[B]),S.useEffect(()=>{if(!Z)return;const J=setTimeout(()=>X(!1),2e3);return()=>clearTimeout(J)},[Z]),{pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:p,gender:b,setGender:y,results:k,setResults:w,searching:_,setSearching:T,selectedRow:O,setSelectedRow:j,form:C,setForm:M,unknownPlace:P,setUnknownPlace:I,error:U,setError:V,toast:q,showToast4:B,setShowToast:W,searchToast:Z,setSearchToast:X,showToast:G}}function oH(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}function M5(e,t){return i0.filter(n=>xp(e,n)===t)}function D5(e,t,n){if(!n||!e.yearStem)return{next:e,monthBranchChoices:null};const r={...e};if(!r.yearStem)return{next:r,monthBranchChoices:null};if(t==="monthStem"&&r.monthStem){const i=M5(r.yearStem,r.monthStem);return i.length>=2?{next:r,monthBranchChoices:i.slice(0,2)}:(i.length===1&&(r.monthBranch=i[0]),{next:r,monthBranchChoices:null})}if(t==="monthBranch"&&r.monthBranch)return r.monthStem=xp(r.yearStem,r.monthBranch),{next:r,monthBranchChoices:null};if(t==="yearStem")if(r.monthStem&&!r.monthBranch){const i=M5(r.yearStem,r.monthStem);if(i.length>=2)return{next:r,monthBranchChoices:i.slice(0,2)};i.length===1&&(r.monthBranch=i[0])}else r.monthBranch&&!r.monthStem&&(r.monthStem=xp(r.yearStem,r.monthBranch));return{next:r,monthBranchChoices:null}}function TTe(e,t,n,r){if(!n||!e.dayStem)return e;const i={...e};if(!i.dayStem)return i;const a=Qx(i.dayStem,r),o=u=>Object.entries(a).find(([,d])=>d.startsWith(u)),l=u=>a[u];if(t==="hourStem"&&i.hourStem){const u=o(i.hourStem);return u&&(i.hourBranch=u[0]),i}if(t==="hourBranch"&&i.hourBranch){const u=l(i.hourBranch);return u&&(i.hourStem=u.slice(0,1)),i}if(t==="dayStem"){if(i.hourStem&&!i.hourBranch){const u=o(i.hourStem);u&&(i.hourBranch=u[0])}else if(i.hourBranch&&!i.hourStem){const u=l(i.hourBranch);u&&(i.hourStem=u.slice(0,1))}}return i}function ATe(e,t){return!t||!e.yearStem?!1:e.monthBranch&&e.monthStem?xp(e.yearStem,e.monthBranch)!==e.monthStem:!1}function NTe(e,t,n){if(!t||!e.dayStem)return!1;if(e.hourBranch&&e.hourStem){const i=Qx(e.dayStem,n)[e.hourBranch];return i?i.slice(0,1)!==e.hourStem:!1}return!1}function Sk(e,t,n){const i=Qx(e,t)[n];return i?i.slice(0,1):null}function OTe({pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:p,setResults:b,setError:y,showToast:k}){const w=o||u,_=!!(e.yearStem&&e.yearBranch),T=!!(e.dayStem&&e.dayBranch),O=!w||_||T,j=!!n&&n.endsWith("Stem"),C=!!n&&n.endsWith("Branch"),M=S.useMemo(()=>oH(e),[e]);return S.useEffect(()=>{if(!(!u||!e.dayStem||!e.hourBranch)&&(e.hourBranch===""||e.hourBranch==="")){const B=Sk(e.dayStem,h,e.hourBranch);B&&t(W=>({...W,hourStem:B}))}},[h,u,e.dayStem,e.hourBranch,t]),{needStartFromYearOrDay:w,canEnterOthers:O,activeIsStem:j,activeIsBranch:C,filledAll:M,monthBranchChoices:i,handleSelect:B=>{if(!n)return;if(!O&&!(n==="yearStem"||n==="yearBranch"||n==="dayStem"||n==="dayBranch")){y("/      ."),setTimeout(()=>y(null),1500);return}let Z={...e,[n]:B};if(n==="yearStem"||n==="monthStem"||n==="monthBranch"){const J=D5(Z,n,o);Z=J.next,a(J.monthBranchChoices)}(n==="dayStem"||n==="hourStem"||n==="hourBranch")&&(Z=TTe(Z,n,u,h));let X=!1;ATe(Z,o)&&(l(!1),X=!0),NTe(Z,u,h)&&(d(!1),X=!0),X&&k("/  .  ."),t(Z),b(null),r(n==="yearStem"?"yearBranch":n==="yearBranch"?"yearStem":n==="monthStem"?"monthBranch":n==="monthBranch"?"monthStem":n==="dayStem"?"dayBranch":n==="dayBranch"?"dayStem":n==="hourStem"?"hourBranch":"hourStem"),setTimeout(()=>{const J={...Z};if(J.yearStem&&J.yearBranch&&!J.monthStem){r("monthStem");return}if(J.monthStem&&J.monthBranch&&!J.dayStem){r("dayStem");return}if(J.dayStem&&J.dayBranch&&!J.hourStem){r("hourStem");return}},0)},handleMonthBranchChoice:B=>{let W={...e,monthBranch:B};a(null),W=D5(W,"monthBranch",o).next,t(W),r("dayStem")},clearAll:()=>{t({}),b(null),y(null),r(null),a(null)},onToggleWoldu:B=>{b(null),B&&t(W=>{const Z={...W};return Z.yearStem&&Z.monthBranch&&(Z.monthStem=xp(Z.yearStem,Z.monthBranch)),Z}),l(B)},onToggleSiju:B=>{b(null),B&&t(W=>{const Z={...W};if(Z.dayStem&&Z.hourBranch){const X=Sk(Z.dayStem,h,Z.hourBranch);X&&(Z.hourStem=X)}return Z}),d(B)},onChangeHourRule:B=>{if(b(null),p(B),u&&e.dayStem&&e.hourBranch&&(e.hourBranch===""||e.hourBranch==="")){const W=Sk(e.dayStem,B,e.hourBranch);W&&t(Z=>({...Z,hourStem:W}))}}}}function CTe(e){const{selectedRow:t,results:n,gender:r,hourRule:i,form:a,unknownPlace:o}=e,l=t!==null?n?.filter((q,H)=>H===t)??[]:[];if(l.length===0)return{error:"  ."};const u=l[0],d=i===""?"/":"",[h,p,b]=u.date.split("-").map(Number);let y=0,k=0;if(u.hourSlots.length>0){const q=u.hourSlots[0].branch,H=STe[q];H&&(y=H.hh,k=H.mi)}const w=new Date(h,p-1,b,y,k),_=w,T="",O=r==="male"?"":"",j=MTe(u.year.charAt(0),O),C=ct(_,127.5),M=At(_,127.5),P=pt(_,d),I=no(_,d),U=[`: ${C} ${M} ${P}`,I?`${I}`:null].filter(Boolean).join(" ");return{payload:{id:G6(),name:"",birthDay:`${h}${String(p).padStart(2,"0")}${String(b).padStart(2,"0")}`,birthTime:`${String(y).padStart(2,"0")}${String(k).padStart(2,"0")}`,gender:O,birthPlace:o?{name:"",lat:0,lon:127.5}:a.birthPlace??{name:"",lat:0,lon:127.5},relationship:a.relationship??"",memo:a.memo??"",folder:vu(a.folder),mingSikType:a.mingSikType??"/",DayChangeRule:a.mingSikType===""?"":"",calendarType:a.calendarType??"solar",ganjiText:`: ${u.year} ${u.month} ${u.day} ${u.hour}`,ganji:U,dayStem:u.day.charAt(0),dateObj:w,corrected:_,correctedLocal:T,dir:j,favorite:!1}}}function MTe(e,t){const r=["","","","","","","","","",""].includes(e),i=t==="";return r?i?"forward":"backward":i?"backward":"forward"}function DTe(e){En.getState().add(e)}function PTe(e,t,n,r=300){if(!e.yearStem||!e.yearBranch)return[];if(!e.monthStem||!e.monthBranch)return[];if(!e.dayStem||!e.dayBranch)return[];if(!e.hourStem||!e.hourBranch)return[];const i=`${e.yearStem}${e.yearBranch}`,a=`${e.monthStem}${e.monthBranch}`,o=`${e.dayStem}${e.dayBranch}`,l=`${e.hourStem}${e.hourBranch}`,u=[],d=new Date(1900,0,1,12,0,0),h=new Date(2100,11,31,12,0,0);for(let p=d.getTime();p<=h.getTime();p+=24*3600*1e3){const b=new Date(p),y=ct(b);if(y!==i)continue;const k=At(b);if(k!==a)continue;const w=pt(b,n);if(w!==o)continue;const _=Qx(e.dayStem,t),T=[];for(let O=0;O<12;O++){const j=i0[O];_[j]===l&&T.push({branch:j,time:xTe[O]})}if(T.length!==0&&(u.push({date:`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,year:y,month:k,day:w,hour:l,hourSlots:T}),u.length>=r))break}return u}function RTe({pillars:e,hourRule:t,results:n,selectedRow:r,gender:i,form:a,unknownPlace:o,setResults:l,setSearching:u,setError:d,setSearchToast:h,setForm:p,setUnknownPlace:b,showToast:y,onSave:k,onClose:w}){return{doSearch:()=>{if(l(null),d(null),!oH(e)){d(" 4  .");return}u(!0);try{const j=PTe(e,t,t===""?"/":"");j.length===0&&d("  . (: 1900~2100)"),l(j)}catch(O){O instanceof Error?d(O.message):d(String(O))}finally{u(!1)}},handleSave:()=>{const O=CTe({selectedRow:r,results:n,gender:i,hourRule:t,form:a,unknownPlace:o});if("error"in O){h(!0);return}Du.flushSync(()=>{DTe(O.payload)}),k(O.payload),y(" !"),p({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),b(!1),w()}}}function LTe({open:e,onClose:t,onSave:n}){const{settings:r}=tn(),i=jTe(),a=OTe({pillars:i.pillars,setPillars:i.setPillars,active:i.active,setActive:i.setActive,monthBranchChoices:i.monthBranchChoices,setMonthBranchChoices:i.setMonthBranchChoices,useWoldu:i.useWoldu,setUseWoldu:i.setUseWoldu,useSiju:i.useSiju,setUseSiju:i.setUseSiju,hourRule:i.hourRule,setHourRule:i.setHourRule,setResults:i.setResults,setError:i.setError,showToast:i.showToast}),o=RTe({pillars:i.pillars,hourRule:i.hourRule,results:i.results,selectedRow:i.selectedRow,gender:i.gender,form:i.form,unknownPlace:i.unknownPlace,setResults:i.setResults,setSearching:i.setSearching,setError:i.setError,setSearchToast:i.setSearchToast,setForm:i.setForm,setUnknownPlace:i.setUnknownPlace,showToast:i.showToast,onSave:n,onClose:t});return e?g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(yy,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsx(fTe,{useWoldu:i.useWoldu,useSiju:i.useSiju,hourRule:i.hourRule,gender:i.gender,onToggleWoldu:a.onToggleWoldu,onToggleSiju:a.onToggleSiju,onChangeHourRule:a.onChangeHourRule,onChangeGender:i.setGender}),a.needStartFromYearOrDay&&!a.canEnterOthers&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""})," ."]}),g.jsx(hTe,{pillars:i.pillars,active:i.active,canEnterOthers:a.canEnterOthers,onActivate:i.setActive}),g.jsx(gTe,{choices:i.monthBranchChoices,onChoose:a.handleMonthBranchChoice}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:g.jsx(ETe,{active:i.active,pillars:i.pillars,activeIsStem:a.activeIsStem,activeIsBranch:a.activeIsBranch,onSelect:a.handleSelect,settingsObj:r})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!a.filledAll){i.setShowToast(!0);return}o.doSearch()},disabled:i.searching,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:i.searching?"..":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:a.clearAll,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:o.handleSave,className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:g.jsx(mTe,{results:i.results,selectedRow:i.selectedRow,onSelectRow:i.setSelectedRow,gender:i.gender})}),g.jsx(pTe,{toast:i.toast,showToast4:i.showToast4,searchToast:i.searchToast,error:i.error})]})}):null}function ITe(){return g.jsx("div",{className:"flex flex-col desk:flex-row desk:items-center desk:justify-between gap-2",children:g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"AI  "})})}function $Te({sections:e,toggleSection:t}){const n=tn(i=>i.settings.daewoonDisplayBase),r=tn(i=>i.setKey);return g.jsxs("div",{className:"mt-3 border-t pt-3",children:[g.jsxs("div",{className:"text-[11px] font-semibold mb-3 text-neutral-700 dark:text-neutral-200 space-y-0.5",children:[g.jsxs("p",{children:["   ",g.jsx("span",{className:"text-amber-500",children:"(TIP.  AI  . ex.,  )"})]}),g.jsx("p",{className:"text-amber-500",children:"      . (     .)"}),g.jsx("p",{className:"text-amber-500",children:" AI     .  ,   ."}),g.jsx("p",{className:"text-amber-500",children:"  AI ,    .  ."})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"twelveUnseong",label:""},{key:"twelveShinsal",label:""},{key:"shinsal",label:" "},{key:"nabeum",label:""}].map(i=>{const a=e[i.key];return g.jsxs("button",{type:"button",onClick:()=>t(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-[10px] font-medium rounded-full border transition-all cursor-pointer ${a?"bg-neutral-900 border-neutral-900 text-white dark:bg-neutral-100 dark:border-neutral-100 dark:text-black shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50 hover:text-neutral-700 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200"}`,children:[g.jsx("span",{className:a?"":"hidden",children:""}),i.label," "]},i.key)})}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"text-[11px] font-semibold text-neutral-700 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full overflow-hidden border border-neutral-200 dark:border-neutral-700",children:[g.jsx("button",{type:"button",onClick:()=>r("daewoonDisplayBase",""),className:`px-3 py-1 text-xs cursor-pointer transition-colors ${n===""?"bg-neutral-900 text-white dark:bg-neutral-100 dark:text-black":"bg-white text-neutral-600 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>r("daewoonDisplayBase",""),className:`px-3 py-1 text-xs cursor-pointer transition-colors ${n===""?"bg-neutral-900 text-white dark:bg-neutral-100 dark:text-black":"bg-white text-neutral-600 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""})]})]})]})}function BTe({mainCategory:e,subCategory:t,mainCategoryMeta:n,currentSubList:r,onMainCategoryChange:i,onSubCategoryChange:a}){return g.jsxs("div",{className:"hidden flex-wrap gap-2 items-center",children:[g.jsx("select",{value:e,onChange:o=>i(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(n).map(o=>g.jsx("option",{value:o,children:n[o].label},o))}),r.length>0&&g.jsx("select",{value:t,onChange:o=>a(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:r.map(o=>g.jsx("option",{value:o.key,children:o.label},o.key))})]})}function zTe({visible:e,relationMode:t,setRelationMode:n,partnerId:r,setPartnerId:i,partnerOptions:a}){return e?g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>n("solo"),className:`px-3 py-1 cursor-pointer ${t==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>n("couple"),className:`px-3 py-1 cursor-pointer ${t==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),t==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:r,onChange:o=>i(o.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:" "}),a.map(o=>g.jsx("option",{value:o.id,children:o.label},o.id))]})]})]}):null}function UTe({isMultiMode:e,setIsMultiMode:t,canUseMultiMode:n}){const r=!n;return g.jsxs("div",{className:"grid grid-cols-2 p-1 gap-1 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[g.jsx("button",{type:"button",onClick:()=>t(!1),className:`flex items-center justify-center py-2 text-xs font-medium rounded-md transition-all cursor-pointer ${e?"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200":"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm"}`,children:"  ( )"}),g.jsxs("button",{type:"button",onClick:()=>t(!0),disabled:r,title:r?" .":"  ( )",className:`flex items-center justify-center py-2 text-xs font-medium rounded-md transition-all ${r?"text-neutral-400 cursor-not-allowed opacity-50":e?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm cursor-pointer":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 cursor-pointer"}`,children:["  ( ) ",r?"":""]})]})}function FTe({tabs:e,activeTab:t,setActiveTab:n,date:r,setDate:i,canUseLuckTabs:a}){return g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsx("div",{className:"flex items-center gap-1 p-1 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg border border-neutral-100 dark:border-neutral-800 overflow-x-auto",children:e.map((o,l)=>{const d=!a&&!(l===0),h=!d&&t===o;return g.jsxs("button",{type:"button",onClick:()=>{d||n(o)},disabled:d,title:d?"  ":o,className:["flex-1 min-w-[50px] px-3 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap",d?"text-neutral-400 cursor-not-allowed opacity-50":"cursor-pointer",h?"bg-neutral-800 text-white dark:bg-neutral-200 dark:text-black shadow-sm":d?"":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-700"].join(" "),children:[o," ",d?"()":""]},o)})}),g.jsxs("div",{className:"flex flex-col desk:flex-row desk:items-center justify-between gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/30 rounded-lg border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 space-y-0.5",children:[g.jsx("p",{children:"      ."}),g.jsx("p",{children:"     ."})]}),g.jsx("div",{className:"shrink-0",children:g.jsx(iH,{date:r,onChange:i})})]})]})}function HTe({multiTab:e,setMultiTab:t,daeList:n,selectedDaeIdx:r,onToggleDae:i,seStartYear:a,seEndYear:o,onSeStartChange:l,onSeEndChange:u,onSeStartBlur:d,onSeEndBlur:h,seYearsCount:p,wolStartDate:b,wolEndDate:y,onWolStartChange:k,onWolEndChange:w,onWolStartBlur:_,onWolEndBlur:T,wolMonthsCount:O,ilStartDate:j,ilEndDate:C,onIlStartChange:M,onIlEndChange:P,onIlStartBlur:I,onIlEndBlur:U,ilDaysCount:V}){return g.jsxs("div",{className:"space-y-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg mt-2",children:[g.jsx("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["","","",""].map(q=>g.jsx("button",{type:"button",onClick:()=>t(q),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded cursor-pointer transition-all ${e===q?"bg-white dark:bg-neutral-600 text-neutral-900 dark:text-white shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700"}`,children:q},q))}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:n.map((q,H)=>g.jsxs("button",{type:"button",onClick:()=>i(H),className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${r.includes(H)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:q.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[q.age," (",q.startYear,"~",q.endYear,")"]})]},H))})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",value:a,onChange:q=>l(Number(q.target.value)),onBlur:d,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:o,onChange:q=>u(Number(q.target.value)),onBlur:h,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",p,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"month",value:b,onChange:q=>k(q.target.value),onBlur:_,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:y,onChange:q=>w(q.target.value),onBlur:T,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",O,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"date",value:j,onChange:q=>M(q.target.value),onBlur:I,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:C,onChange:q=>P(q.target.value),onBlur:U,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",V,""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",e,"   ."]}),g.jsx("p",{children:"   ."})]})]})}function GTe({value:e,lockSelection:t=!1}){const[n,r]=S.useState(!1);return t?g.jsx("div",{className:"w-full h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 select-none flex items-center justify-center text-center text-neutral-500","aria-readonly":"true",children:"   "}):g.jsxs("div",{children:[g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{readOnly:!0,value:e,placeholder:"   ",className:["w-full text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 resize-none transition-[height] duration-200","desk:h-[270px] desk:overflow-y-auto",n?"h-[270px] overflow-y-auto pointer-events-auto":"h-[150px] overflow-hidden pointer-events-none desk:pointer-events-auto"].join(" ")}),!n&&g.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 rounded-b-md bg-gradient-to-t from-white/95 dark:from-neutral-800/95 to-transparent"})]}),g.jsx("div",{className:"mt-2 mb-3 flex justify-center desk:hidden",children:g.jsx("button",{type:"button",onClick:()=>r(i=>!i),className:"px-3 py-1 rounded-full border text-xs bg-white text-neutral-700 border-neutral-300 dark:bg-neutral-900 dark:text-neutral-200 dark:border-neutral-700",children:n?"":""})})]})}const YTe=["","","","",""],qTe={personality:{label:"    "},lifeFlow:{label:"   "},love:{label:"    "},career:{label:"    "},money:{label:"    "},family:{label:"      "},baby:{label:"    "},health:{label:"    "},move:{label:"     "},social:{label:"  "},compat:{label:"   "},risk:{label:"  "},meta:{label:"    "},etc:{label:"  "}},P5={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:" "},{key:"personality_shadow",label:""},{key:"personality_relationshipStyle",label:" "},{key:"personality_workStyle",label:" "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:"/ "},{key:"love_partner",label:" "},{key:"love_current",label:" /"},{key:"love_breakup",label:" "},{key:"love_marriageChange",label:"/ "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs "},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:" "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:"/ "},{key:"money_asset",label:" "},{key:"money_debt",label:"/ "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"/ "},{key:"family_current",label:" /"},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:"/"},{key:"family_care",label:" "}],baby:[{key:"overview",label:" "},{key:"baby_pregnancy",label:"  "},{key:"baby_birth",label:"  "},{key:"baby_selection",label:"  "}],health:[{key:"overview",label:" "},{key:"health_overall",label:""},{key:"health_physical",label:" "},{key:"health_mental",label:""},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:" "},{key:"move_timing",label:" "},{key:"move_chance",label:" "},{key:"move_targetHouse",label:"  "},{key:"move_environment",label:"  "},{key:"move_finance",label:" "}],social:[{key:"overview",label:"  "},{key:"social_overall",label:" "},{key:"social_friend",label:" "},{key:"social_workspace",label:" "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:" "},{key:"compat_overall",label:"  "},{key:"compat_love",label:"/ "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:"/ "},{key:"compat_family",label:" "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:"/ "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:" "},{key:"meta_usage",label:" "}],etc:[]};function KTe(){const[e,t]=S.useState(null);return S.useEffect(()=>{let n=!0;return De.auth.getUser().then(({data:r})=>{n&&t(r.user?.id??null)}),()=>{n=!1}},[]),e}const WTe={twelveUnseong:!0,twelveShinsal:!0,shinsal:!0,nabeum:!0},Mv=Ko(e=>({sections:WTe,setSections:t=>e({sections:t}),toggleSection:t=>e(n=>({sections:{...n.sections,[t]:!n.sections[t]}}))})),kk=1e3*60*60*24;function Ek(e,t){return(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth())}function Db(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function Pb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function R5(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function L5(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function VTe(){const e=new Date().getFullYear(),[t,n]=S.useState(e),[r,i]=S.useState(e),[a,o]=S.useState(()=>L5()),[l,u]=S.useState(()=>L5()),[d,h]=S.useState(()=>R5()),[p,b]=S.useState(()=>R5()),y=X=>{n(X)},k=X=>{i(X)},w=()=>{const X=t;let G=r;G<X&&(G=X),G-X>9&&(G=X+9),i(G)},_=()=>{let X=t;const G=r;G<X&&(X=G),G-X>9&&(X=G-9),n(X)},T=S.useMemo(()=>{if(!Number.isFinite(t)||!Number.isFinite(r))return 0;const X=r-t+1;return X>0?X:0},[t,r]),O=S.useMemo(()=>{const X=[];if(!Number.isFinite(t)||!Number.isFinite(r))return X;for(let G=t;G<=r&&X.length<10;G++)X.push(G);return X},[t,r]),j=X=>{o(X)},C=X=>{u(X)},M=()=>{const[X,G]=a.split("-").map(Number),[J,Q]=l.split("-").map(Number),oe=new Date(X,G-1),le=new Date(J,Q-1);if(le<oe){u(Db(oe));return}if(Ek(oe,le)>11){const K=new Date(oe);K.setMonth(oe.getMonth()+11),u(Db(K))}},P=()=>{const[X,G]=a.split("-").map(Number),[J,Q]=l.split("-").map(Number),oe=new Date(X,G-1),le=new Date(J,Q-1);if(le<oe){o(Db(le));return}if(Ek(oe,le)>11){const K=new Date(le);K.setMonth(le.getMonth()-11),o(Db(K))}},I=S.useMemo(()=>{const[X,G]=(a||"").split("-").map(Number),[J,Q]=(l||"").split("-").map(Number);if(!Number.isFinite(X)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(Q))return 0;const oe=new Date(X,G-1,1),le=new Date(J,Q-1,1),z=Ek(oe,le)+1;return z>0?z:0},[a,l]),U=S.useMemo(()=>{const X=[],[G,J]=a.split("-").map(Number),[Q,oe]=l.split("-").map(Number),le=new Date(G,J-1),z=new Date(Q,oe-1);if(Number.isNaN(le.getTime())||Number.isNaN(z.getTime()))return X;for(;le<=z&&X.length<12;)X.push(`${le.getFullYear()}-${String(le.getMonth()+1).padStart(2,"0")}`),le.setMonth(le.getMonth()+1);return X},[a,l]),V=X=>{h(X)},q=X=>{b(X)},H=()=>{if(!d||!p)return;const[X,G,J]=d.split("-").map(Number),[Q,oe,le]=p.split("-").map(Number),z=new Date(X,G-1,J,4,0,0),K=new Date(Q,oe-1,le,4,0,0);if(K<z){b(Pb(z));return}if(Math.floor((K.getTime()-z.getTime())/kk)>7){const re=new Date(z);re.setDate(z.getDate()+6),b(Pb(re))}},B=()=>{if(!d||!p)return;const[X,G,J]=d.split("-").map(Number),[Q,oe,le]=p.split("-").map(Number),z=new Date(X,G-1,J,4,0,0),K=new Date(Q,oe-1,le,4,0,0);if(z>K){h(Pb(K));return}if(Math.floor((K.getTime()-z.getTime())/kk)>7){const re=new Date(K);re.setDate(K.getDate()-6),h(Pb(re))}},W=S.useMemo(()=>{const[X,G,J]=(d||"").split("-").map(Number),[Q,oe,le]=(p||"").split("-").map(Number);if(!Number.isFinite(X)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(Q)||!Number.isFinite(oe)||!Number.isFinite(le))return 0;const z=new Date(X,G-1,J,4,0,0),K=new Date(Q,oe-1,le,4,0,0),ne=Math.floor((K.getTime()-z.getTime())/kk)+1;return ne>0?ne:0},[d,p]),Z=S.useMemo(()=>{const X=[],[G,J,Q]=d.split("-").map(Number),[oe,le,z]=p.split("-").map(Number),K=new Date(G,J-1,Q,4,0,0),ne=new Date(oe,le-1,z,4,0,0);if(Number.isNaN(K.getTime())||Number.isNaN(ne.getTime()))return X;const re=new Date(K);for(;re<=ne&&X.length<31;){const ce=re.getFullYear(),ue=String(re.getMonth()+1).padStart(2,"0"),ge=String(re.getDate()).padStart(2,"0");X.push(`${ce}-${ue}-${ge}`),re.setDate(re.getDate()+1)}return X},[d,p]);return{seStartYear:t,seEndYear:r,wolStartYM:a,wolEndYM:l,ilStartDate:d,ilEndDate:p,onSeStartChange:y,onSeEndChange:k,onSeStartBlur:w,onSeEndBlur:_,onWolStartChange:j,onWolEndChange:C,onWolStartBlur:M,onWolEndBlur:P,onIlStartChange:V,onIlEndChange:q,onIlStartBlur:H,onIlEndBlur:B,seYearsCount:T,wolMonthsCount:I,ilDaysCount:W,seYearsList:O,wolMonthsList:U,ilDaysList:Z}}function ZTe({msId:e,canUseMultiMode:t,canUseLuckTabs:n}){const r=Mv(Q=>Q.sections),i=Mv(Q=>Q.toggleSection),[a,o]=S.useState(!1),[l,u]=S.useState(!1),[d,h]=S.useState(""),[p,b]=S.useState("personality"),[y,k]=S.useState("overview"),[w,_]=S.useState("solo"),[T,O]=S.useState(""),[j,C]=S.useState(!1),[M,P]=S.useState(""),[I,U]=S.useState([]),[V,q]=S.useState(""),[H,B]=S.useState([]),W=VTe();S.useEffect(()=>{p!=="love"&&p!=="compat"&&(_("solo"),h(""))},[p]),S.useEffect(()=>{!t&&j&&C(!1)},[t,j]),S.useEffect(()=>{!n&&T!==""&&O("")},[n,T]),S.useEffect(()=>{M!==""&&U([])},[M]),S.useEffect(()=>{q(""),B([])},[e]);function Z(){const Q=V.trim();Q&&(B(oe=>[...oe,Q]),q(""))}function X(Q){B(oe=>oe.filter((le,z)=>z!==Q))}function G(){B([])}function J(Q){U(oe=>oe.includes(Q)?oe.filter(le=>le!==Q):[...oe,Q])}return{sections:r,toggleSection:i,friendMode:a,setFriendMode:o,teacherMode:l,setTeacherMode:u,partnerId:d,setPartnerId:h,mainCategory:p,setMainCategory:b,subCategory:y,setSubCategory:k,relationMode:w,setRelationMode:_,activeTab:T,setActiveTab:O,isMultiMode:j,setIsMultiMode:C,multiTab:M,setMultiTab:P,selectedDaeIdx:I,setSelectedDaeIdx:U,handleToggleDae:J,rangeControls:W,questionDraft:V,setQuestionDraft:q,extraQuestions:H,setExtraQuestions:B,handleAddQuestion:Z,handleRemoveQuestion:X,handleClearQuestions:G}}const sH=Ko(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function lH(e,t){const{mode:n,tab:r,isStudyTone:i}=t,a=(...o)=>e.push(...o);if(n==="single"){if(r===""){a("","##      (  )",">       ,      .","- **  **: ', , , , ' ', , '      , '  , , , , '   .      .","- ** **:   ,     '' .","- ** **:     ,          .","- ** **:   ,       (, , )   .","- ** **: '   '  , '      '    .","- ** **:             .");return}r?(a("","##     ( )","- ** **:         .   '     '  .","- ** **:  '/' , '     '    .","- ****:     , '    ' '    '   ."),i?a("","##  ()",`-  : (${r})  ,    ( + / )  .`,"-     /      ()  ."):a("","##  ()",`-    (${r})   ,         .`,"-   ,          .")):a("","##  ()","-   ,      /  .")}else a("","##     ( )","- ** **:               .","- ** **: '  '   , '       '  ."),i?a("","##  ()","-       .    .","-      (/// )  1~2 ."):a("","##  ()","-  (///)  ,           .");i&&e.push("- (teacherMode)     ,   .","-      (/ / )  1~2 .")}const XTe=!1,I5=e=>e<10?`0${e}`:`${e}`;function JTe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Zi(i,a,o,0,0),u=`${l.getFullYear()}${I5(l.getMonth()+1)}${I5(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}const Am={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Nm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},nc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},QTe=["","","","",""];function $5(e){return QTe.includes(e)}const cH={:"",:"",:"",:"",:""},uH={:"",:"",:"",:"",:""},dH={:"",:"",:"",:"",:""},fH={:"",:"",:"",:"",:""};function BE(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Am[t])return Am[t];if(["","","","","","","","","","","",""].includes(t))return Rb[t]??null;if(Nm[t])return Rb[Nm[t]]??null;const n=t.charAt(0);return Am[n]?Am[n]:["","","","","","","","","",""].includes(n)?n:Nm[n]?Rb[Nm[n]]??null:["","","","","","","","","","","",""].includes(n)?Rb[n]??null:null}function eAe(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=BE(n);i&&(t[i]=(t[i]??0)+r)}return t}function tAe(e){if(!e)return[];const t=BE(e.charAt(0)),n=BE(e.charAt(1));return[t,n].filter(Boolean)}function Lb(e){const t=tAe(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function hH(e,t){const n=nc[e],r=nc[t];if(!n||!r)return"";let i;r===n?i="":r===cH[n]?i="":r===uH[n]?i="":r===dH[n]?i="":r===fH[n]?i="":i="";const a=$5(e)===$5(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function mH(e,t){return t===e?"":t===cH[e]?"":t===uH[e]?"":t===dH[e]?"":t===fH[e]?"":""}function pH(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}const nAe={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""}},rAe=e=>{if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),r=Am[t]??t,i=Nm[n]??n;return`${r}${i}`},Dv=e=>{const t=rAe(e),n=nAe[t];return n?{...n,code:t}:null};function gH(e,t){const n=JTe(e),r=n.birthDay??"",i=r.slice(0,4),a=r.slice(4,6),o=r.slice(6,8);let l="";if(n.corrected instanceof Date&&!Number.isNaN(n.corrected.getTime())){const u=String(n.corrected.getHours()).padStart(2,"0"),d=String(n.corrected.getMinutes()).padStart(2,"0");l=t?"":`${u}:${d}`}return`${i} ${a} ${o}  ${l}`}function iAe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=nc[n];i&&(t[i]+=r)}return t}function aAe(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e)){if(i<=0)continue;const a=hH(t,r);n[a]+=i}return n}function oAe(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const sAe={natal:50,dae:30,se:20,wol:7,il:3};function lAe(e){const t={};for(const{kind:r,bare:i}of e){const a=sAe[r]??0;if(a<=0)continue;const o=pH(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function bH(e,t,n){const r=eAe(e.perStemElementScaled),i=t!==""&&n?.dae?Lb(n.dae):{},a=(t===""||t===""||t==="")&&n?.se?Lb(n.se):{},o=(t===""||t==="")&&n?.wol?Lb(n.wol):{},l=t===""&&n?.il?Lb(n.il):{},u=lAe([{kind:"natal",bare:r},{kind:"dae",bare:i},{kind:"se",bare:a},{kind:"wol",bare:o},{kind:"il",bare:l}]),d=pH(u),h=iAe(d),p=aAe(d,e.dayStem),b=oAe(p);return{perStemAugBare:d,elementPercent:h,totalsSub:p,totalsMain:b}}function yH(e){return!e.birthTime||e.birthTime===""}function vH(e,t){return t[3]?["","","",""]:["","",""]}function cAe(e,t){return e.map((n,r)=>t[r]??"")}const uAe=["","","","","","","","","",""],dAe=["","","","","","","","","",""];function zE(e,t){const n={};for(const i of dAe){const a=hH(t,i);n[a]=i}const r={};for(const i of uAe){const a=n[i],o=a?nc[a]??"":"",l=a?`${i}(${a}${o})`:i;typeof e[i]=="number"&&(r[l]=e[i])}return r}function bu(e,t){return Object.entries(e).filter(([,r])=>r!=null&&`${r}`.trim()!=="").map(([r,i])=>`${r}: ${i}`).join(", ")}function fAe(e){return e.map(t=>String(t??"").trim()).filter(Boolean).join(`
`)}function ha(e){return e.filter(t=>t&&t.pos&&t.gz&&t.value).map(t=>`${t.pos}: [ - ${t.gz}] / ${t.value}`).join(`
`)}function Pv(e){return`: ${e.yang}, : ${e.yin}`}const hAe={si:"",il:"",wol:"",yeon:""};function B5(e){return e.replace(/^#/,"").trim()}function WA(e){const t=[],n=["si","il","wol","yeon"];for(const a of n){const o=e.good?.[a]??[],l=e.bad?.[a]??[];o.length===0&&l.length===0||(t.push(`[${hAe[a]}]`),o.length>0&&t.push(` : ${o.map(B5).join(", ")}`),l.length>0&&t.push(` : ${l.map(B5).join(", ")}`))}const r=e.meta?.voidPair;(r?.day||r?.year)&&(t.push("[]"),r.day?.length&&t.push(` : ${r.day.join("  ")}`),r.year?.length&&t.push(` : ${r.year.join("  ")}`));const i=e.meta?.samjaeYears;return(i?.day||i?.year)&&(t.push("[]"),i.day?.length&&t.push(` : ${i.day.join("")}`),i.year?.length&&t.push(` : ${i.year.join("")}`)),t.join(`
`)}const mAe={cheonganHap:"",cheonganChung:"",jijiSamhap:"",jijiBanhap:"",jijiBanghap:"",jijiYukhap:"",jijiChung:"",jijiHyeong:"",jijiPa:"",jijiHae:"",jijiWonjin:"",jijiGwimun:"",amhap:"",ganjiAmhap:""},pAe=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"],z5=["","","","","","","",""];function gAe(e){return[...e].sort((t,n)=>{const r=z5.indexOf(t),i=z5.indexOf(n);return r===-1&&i===-1?t.localeCompare(n,"ko"):r===-1?1:i===-1?-1:r-i})}function bAe(e){return e.replace(/^#/,"").replace(/_/g," ").replace(/X/g," X ").replace(/\s+/g," ").trim()}function yAe(e){const t=e.replace(/^#/,"").trim();if(!t)return null;const[n,r=""]=t.split("_");return{tokens:n.split("X").filter(Boolean),label:r,human:bAe(t)}}function vAe(e){const t=e.map(yAe).filter(a=>!!a),n=[],r=new Set,i=new Map;t.forEach((a,o)=>{if(a.tokens.length!==2||!a.label)return;const l=i.get(a.label)??[];l.push(o),i.set(a.label,l)});for(const[a,o]of i){const l=new Map;for(const h of o){const p=t[h],[b,y]=p.tokens;l.has(b)||l.set(b,[]),l.has(y)||l.set(y,[]),l.get(b).push(h),l.get(y).push(h)}let u="",d=[];for(const[h,p]of l)p.length>d.length&&(u=h,d=p);if(d.length>=2){const h=d.map(b=>{r.add(b);const[y,k]=t[b].tokens;return y===u?k:y}).filter(Boolean),p=`${gAe(h).join("  ")} X ${u} ${a}`.trim();p&&n.push(p)}}return t.forEach((a,o)=>{r.has(o)||n.push(a.human)}),n}function Rv(e){const t=[];for(const n of pAe){const r=e[n];if(!Array.isArray(r))continue;const i=r.filter(l=>l&&typeof l=="string"&&!l.includes(""));if(i.length===0)continue;const a=vAe(i),o=mAe[n]??n;t.push(`${o} : ${a.join("  ")}`)}return t.join(`
`)}function xAe(e){const t=[];for(const[n,r]of Object.entries(e))!r||!r.gz||!r.nabeum||t.push({pos:n,gz:r.gz,value:r.nabeum});return ha(t)}const Om=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Lv(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Lv(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(Om(e)){const t={};for(const[n,r]of Object.entries(e)){const i=Lv(r);i!==void 0&&(t[n]=i)}return Object.keys(t).length>0?t:void 0}return e}}function xH(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):""}const ws=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean",wAe=e=>typeof e.yang=="number"&&typeof e.yin=="number",_Ae=e=>"good"in e||"bad"in e||"meta"in e,SAe=new Set(["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"]),kAe=e=>Object.keys(e).some(t=>SAe.has(t)),EAe=e=>{const t=Object.keys(e);return!t.includes("")&&!t.includes("")?!1:t.every(n=>n===""||n===""||n==="")},jAe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1},TAe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1};function U5(e){const t=typeof e.pos=="string"?e.pos:"",n=typeof e.gz=="string"?e.gz:"";if(!t||!n)return null;const r=typeof e.unseong=="string"&&e.unseong||typeof e.shinsal=="string"&&e.shinsal||typeof e.nabeum=="string"&&e.nabeum||typeof e.value=="string"&&e.value||"";return r?{pos:t,gz:n,value:r}:null}function iy(e){if(e==null)return"";const t=xH(e);if(t)return t;if(Array.isArray(e)){if(e.length===0)return"";if(e.every(ws))return fAe(e.map(String));const n=[];for(const r of e){if(!Om(r))continue;const i=U5(r);i&&n.push(i)}return n.length>0?ha(n):e.map(r=>iy(r)).filter(Boolean).join(`

`)}if(Om(e)){if(wAe(e))return Pv(e);if(_Ae(e))return WA(e);if(kAe(e))return Rv(e);if(EAe(e)){const u=e.,d=e.;if(ws(u)&&ws(d))return`${u} / : ${d}`;if(ws(u))return String(u);if(ws(d))return`: ${d}`}if(jAe(e)){const u=e.;if(ws(u))return String(u)}if(TAe(e)){const u=e.;if(ws(u))return String(u)}const n=Object.entries(e);if(n.length===0)return"";if(n.every(([,u])=>ws(u)))return bu(e);if(n.every(([,u])=>Array.isArray(u)))return n.map(([d,h])=>{const p=h.map(b=>iy(b)).filter(Boolean).join(`

`);return p?`[${d}]
${p}`:""}).filter(Boolean).join(`
`);if(n.every(([,u])=>u==null||ws(u)||Om(u))){const u=n.map(([d,h])=>{if(h==null)return"";const p=iy(h);if(!p)return"";const b=p.includes(`
`)?`
`:" ";return`${d}:${b}${p}`}).filter(Boolean);if(u.length>0)return u.join(`
`)}if(n.every(([,u])=>!u||Om(u)&&typeof u.gz=="string"))return xAe(e);const l=U5(e);return l?ha([l]):JSON.stringify(e,null,2)}return String(e??"")}function AAe(e,t){const n=Lv(e);if(n===void 0)return"";if(t==="plain")return iy(n);const r=xH(n);return r!==""?r:["```json",JSON.stringify(n,null,2),"```"].join(`
`)}function wH(e,t,n){const r=AAe(t,n);return r.trim()?`## ${e}
${r}`:""}const $o=(e,t)=>wH(e,t,"plain"),_H=(e,t)=>wH(e,t,"fenced"),NAe=(e,t)=>{if(!e)return{};const n=t,r=l=>{if(!l)return;const u={};for(const[d,h]of Object.entries(l)){if(!Array.isArray(h))continue;const p=h.filter(b=>typeof b=="string"&&b.includes(n));p.length>0&&(u[d]=p)}return Object.keys(u).length>0?u:void 0},i=r(e.good),a=r(e.bad),o={};return i&&(o.good=i),a&&(o.bad=a),o},OAe=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[r,i]of Object.entries(e)){if(!Array.isArray(i))continue;const a=Array.from(new Set(i.filter(o=>typeof o=="string"&&o.includes(t))));a.length>0&&(n[r]=a)}return n};function UE(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${n}(${mH(t,n)})`,r]))}const F5={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},CAe=["year","month","day","hour"],MAe=new Set(["","","","",""]),Wd=new Set(["","","","",""]),FE={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},DAe={:5,:7,:5,:-5,:-7,:-5},jk=e=>Math.round(e*10)/10,SH=e=>{const t=jk(e),n=jk(100-e),r=jk(100-Math.abs(t-50)*2),i=t>=55?"":t<=45?"":"";return{yang:t,yin:n,harmony:r,category:i}};function PAe(e){if(!e)return null;let t=0,n=0;Object.entries(e).forEach(([i,a])=>{const o=Number(a)||0;Wd.has(i.charAt(0))?t+=o:n+=o});const r=t+n;return r<=0?null:t/r*100}function Ib(e){if(!e||e.length<2)return null;const t=e.charAt(0),n=e.charAt(1),r=FE[n],i=[t,r].filter(Boolean);return i.length?i.filter(o=>Wd.has(o)).length/i.length*100:null}function VA(e){const{natal:t,perStemElementScaled:n,mode:r="natal"}=e;if(!n||!t||t.length<3)return null;let i=0,a=0;Object.entries(n).forEach(([M,P])=>{const I=Number(P)||0;Wd.has(M.charAt(0))?i+=I:a+=I});const o=i+a>0?(i-a)/(i+a):0;let l=0,u=0,d=0,h=0;t.forEach(M=>{if(!M||M.length<2)return;const P=M[0],I=FE[M[1]];[P,I].forEach(U=>{U&&(MAe.has(U)?l+=1:u+=1,Wd.has(U)?d+=1:h+=1)})});const p=l+u>0?(l-u)/(l+u):0,b=d+h>0?(d-h)/(d+h):0;let y=0,k=0;t.forEach((M,P)=>{if(!M||M.length<2)return;const I=CAe[P],U=F5[I].stem,V=F5[I].branch;Wd.has(M[0])?y+=U:k+=U;const q=FE[M[1]];q&&Wd.has(q)?y+=V:k+=V});const w=y+k>0?(y-k)/(y+k):0,_=t[1]?.charAt(1),T=(DAe[_??""]||0)/100,O=r==="luck"?{essence:.15,nature:.15,base:.7,position:0,season:0}:{essence:.3,nature:.3,base:.2,position:.2,season:1},j=p*O.essence+b*O.nature+o*O.base+w*O.position+T*O.season;if(!Number.isFinite(j))return null;const C=(Math.min(1,Math.max(-1,j))+1)*50;return SH(C)}function RAe(e){const{natal:t,natalScaled:n,chain:r,weights:i}=e;if(!t||t.length<3)return null;const a=VA({natal:t,perStemElementScaled:n,mode:"natal"}),o=a?.yang??PAe(n);if(o==null)return null;const l=[];i.natal>0&&l.push({yang:o,weight:i.natal});const u=Ib(r?.dae??null);u!=null&&(i.dae??0)>0&&l.push({yang:u,weight:i.dae??0});const d=Ib(r?.se??null);d!=null&&(i.se??0)>0&&l.push({yang:d,weight:i.se??0});const h=Ib(r?.wol??null);h!=null&&(i.wol??0)>0&&l.push({yang:h,weight:i.wol??0});const p=Ib(r?.il??null);p!=null&&(i.il??0)>0&&l.push({yang:p,weight:i.il??0});const b=l.reduce((k,w)=>k+w.weight,0);if(b<=0)return a??null;const y=l.reduce((k,w)=>k+w.yang*w.weight,0)/b;return SH(y)}function kH(e){const{ms:t,natal:n,chain:r,basis:i,tab:a,unified:o,percent:l,category:u,sections:d}=e,h=d?.tenGod??!0,p=d?.twelveUnseong??!0,b=d?.twelveShinsal??!0,y=d?.shinsal??!0,k=d?.nabeum??!0,w=yH(t),_=Pe(n[3]??""),T=[Pe(n[0]??""),Pe(n[1]??""),Pe(n[2]??""),_],{shinsalEra:O,shinsalGaehwa:j,shinsalBase:C}=sH.getState(),M=C===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",{flags:P}=J7(T,o.natalFixed.elementScoreRaw),I=`${u} (${l.toFixed(1)}%)  ${[` ${P..||P..||P..||P..?"":""}`,` ${P..||P..||P..||P..?"":""}`,` ${P..||P..?"":""}`].join(", ")}`,U=vH(t,T),V=o.dayStem,q=nc[V]??nc[o.dayStem]??"",H=`: ${t.name??""}  (${gH(t,w)}) 
${t.ganjiText} / : ${t.gender}`,B=(K,ne)=>{const re=(ne??"").trim();return re?`## ${K}
${re}`:""},W=[],Z=[];Z.push(" ver."),Z.push(B("",I));const X=VA({natal:T,perStemElementScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,mode:"natal"});if(X&&Z.push(B("()",Pv(X))),Z.push(B("(  )",bu(UE(o.natalFixed.elementPercent100,q)))),h){const K=zE(o.natalFixed.totalsSub,V);Z.push(B(" ( 10 100)",bu(K)))}if(p){const K=U.map((ne,re)=>{const ce=T[re]??"";return ce?{pos:ne,gz:ce,value:io(V,ce.charAt(1))}:null}).filter(Boolean);K.length>0&&Z.push(B("()",ha(K)))}if(b){const K=U.map((ne,re)=>{const ce=T[re]??"";return ce?{pos:ne,gz:ce,value:ao({baseBranch:M,targetBranch:ce.charAt(1),era:O,gaehwa:j})}:null}).filter(Boolean);K.length>0&&Z.push(B("()",ha(K)))}if(k){const K=U.map((ne,re)=>{const ce=T[re]??"";if(!ce)return null;const ue=Dv(ce);return ue?{pos:ne,gz:ce,value:ue.name}:null}).filter(Boolean);K.length>0&&Z.push(B("",ha(K)))}if(Z.push(B("()",Rv(cx(U.map((K,ne)=>T[ne]??""))))),y){const K=Lp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});Z.push(B("()",WA(K)))}const G=Z.filter(Boolean).join(`

`);G&&W.push(G);const J={:{natal:100},:{natal:70,dae:30},:{natal:60,dae:25,se:15},:{natal:55,dae:20,se:15,wol:10},:{natal:50,dae:20,se:15,wol:10,il:5}},Q=(K,ne)=>{if(K==="")return"";const re=ne??Ip({natal:T,tab:K,chain:r,hourKey:"prompt"}),ce=bH(re,K,r),ue=ce.elementPercent,ge=ce.totalsSub,ke=[];ke.push(`${K} ver.`);const ie={dae:r?.dae?Pe(r.dae):null,se:r?.se?Pe(r.se):null,wol:r?.wol?Pe(r.wol):null,il:r?.il?Pe(r.il):null},Ae=RAe({natal:T,natalScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,chain:ie,weights:J[K]});if(Ae&&ke.push(B(`( + ${K})`,Pv(Ae))),ke.push(B(`( + ${K})`,bu(UE(ue,q)))),h){const Ie=zE(ge,V);ke.push(B(` ( + ${K})`,bu(Ie)))}const Ee=K===""?r?.dae:K===""?r?.se:K===""?r?.wol:K===""?r?.il:null,he=Ee?Pe(Ee):"";if(he&&(ke[0]=`${K} ver.  : ${he}`),he&&p){const Ie=io(V,he.charAt(1));ke.push(B(`(${K})`,ha([{pos:K,gz:he,value:Ie}])))}if(he&&b){const Ie=ao({baseBranch:M,targetBranch:he.charAt(1),era:O,gaehwa:j});ke.push(B(`(${K})`,ha([{pos:K,gz:he,value:Ie}])))}if(he&&k){const Ie=Dv(he);Ie&&ke.push(B("",ha([{pos:K,gz:he,value:Ie.name}])))}const Le=Ul({natal:T,daewoon:K!==""?r?.dae??void 0:void 0,sewoon:K===""||K===""||K===""?r?.se??void 0:void 0,wolwoon:K===""||K===""?r?.wol??void 0:void 0,ilwoon:K===""?r?.il??void 0:void 0});return ke.push(B(`(${K})`,Rv(Le))),ke.filter(Boolean).join(`

`)};if(a!==""){const K=a===""?[""]:a===""?["",""]:a===""?["","",""]:a===""?["","","",""]:[];for(const ne of K){const re=Q(ne,ne===a?o:void 0);re&&W.push(re)}}const oe=W.filter(K=>K&&K.trim().length>0).join(`

`),le=[];lH(le,{mode:"single",tab:a,isStudyTone:e.teacherMode===!0});const z=le.join(`
`).trim();return{header:H,body:oe,guide:z}}function LAe(e){const{header:t,body:n,guide:r}=kH(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function Bo(e){const{scope:t,infoText:n,gz:r,chain:i,natal:a,relationArgs:o,basis:l,unified:u,dayEl:d,baseDayStem:h,show:p,shinsalSettings:b,harmonyMode:y="scope",includeBasicInfo:k=!0}=e,w=bH(u,t,i),_=Ul({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon}),T=p.shinsal?Lp({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon,basis:l}):null,O=p.nabeum?Dv(r):null,j=p.twelveUnseong?io(h,r.charAt(1)):null,C=p.twelveShinsal?ao({baseBranch:b.baseBranch,targetBranch:r.charAt(1),era:b.era,gaehwa:b.gaehwa}):null,M=y==="full"?_:OAe(_,t);return{...k?{:n,:r}:{},:UE(w.elementPercent,d),...p.tenGod?{:w.totalsSub}:{},:M,...p.shinsal?{:NAe(T,t)}:{},...p.nabeum?{:O?{:O.name,:O.element}:null}:{},...p.twelveUnseong?{:{:t,:j}}:{},...p.twelveShinsal?{:{:t,:C}}:{}}}function IAe(e){const{selectedDaeList:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(n.length===0||t.length===0)return[];const h=[];for(const p of t){const b={dae:p.gz,se:null,wol:null,il:null},y=Bo({scope:"",infoText:`${p.age} ${p.gz} (${p.startYear}~${p.endYear})`,gz:p.gz,chain:b,natal:r,relationArgs:{daewoon:p.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"full",includeBasicInfo:!1});h.push($o(`${p.age} ${p.gz} (${p.startYear}~${p.endYear})`,y))}return h.filter(p=>p.trim().length>0)}function ZA(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function EH(e,t){const n=e[t],r=e[t+1];return r?ZA(r):new Date(n.endYear+1,0,1)}function jH(e,t,n,r){return e<r&&t>n}function TH(e,t,n){const r=new Date(t,0,1),i=new Date(n+1,0,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=ZA(l),d=EH(e,o);jH(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function AH(e,t){return TH(e,t,t)}function Iv(e,t,n){const r=new Date(t,n-1,1),i=new Date(t,n,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=ZA(l),d=EH(e,o);jH(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function HE(e,t){if(!Number.isInteger(t)||t<1||t>12)throw new RangeError(`findSeForMonthPairs: month must be 1..12, got ${t}`);const n=new Date(e,t-1,1,0,0,0,0),r=new Date(e,t,1,0,0,0,0),i=pn(e,315),a=[],o=u=>{const d=ct(new Date(u,5,15,12,0,0,0)),h=Pe(d||"");h&&(a.some(p=>p.useYear===u&&p.gz===h)||a.push({useYear:u,gz:h}))};return n<i&&i<r?(o(e-1),o(e)):r<=i?o(e-1):o(e),a}function $Ae(e){const{seYears:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=Array.from(new Set(t)).sort((w,_)=>w-_),p=[],b=h[0],y=h[h.length-1],k=TH(n,b,y);if(k.length>0){const w=b,_=ct(new Date(w,5,15,12,0,0)),T=Pe(_||""),O={:k.map(j=>{const C={dae:j.gz,se:T||null,wol:null,il:null};return Bo({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:T||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};p.push($o("",O))}for(const w of h){const _=new Date(w,5,15,12,0,0),T=ct(_),O=AH(n,w),j=O.length>0?O[0]:null,C=Pe(T||""),M=w,P={dae:j?j.gz:null,se:C||null,wol:null,il:null},I=Bo({scope:"",infoText:`${M} ${C}`,gz:C,chain:P,natal:r,relationArgs:{daewoon:j?.gz,sewoon:C||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push($o(` ${M}`,{:I}))}return p.filter(w=>w.trim().length>0)}function Tk(e){return String(e).padStart(2,"0")}function BAe(e,t){const n=new Date(e,t-1,1,12,0,0,0),r=new Date(e,t,1,12,0,0,0),i=pn(e,315),a=HE(e,t);if(!(n<i&&i<r)){const k=a[a.length-1]??(()=>{const w=Pe(ct(new Date(e,5,15,12,0,0,0))||"");return{useYear:e,gz:w}})();return[{label:`${e}-${Tk(t)}`,repDate:new Date(e,t-1,15,12,0,0,0),se:k}]}const l=1440*60*1e3,u=new Date(i.getTime()-l);u.setHours(12,0,0,0);const d=new Date(i.getTime()+l);d.setHours(12,0,0,0);const h=a.find(k=>k.useYear===e-1)??a[0],p=a.find(k=>k.useYear===e)??a[a.length-1],b=h??{useYear:e-1,gz:Pe(ct(new Date(e-1,5,15,12,0,0,0))||"")},y=p??{useYear:e,gz:Pe(ct(new Date(e,5,15,12,0,0,0))||"")};return[{label:`${e}-${Tk(t)}()`,repDate:u,se:b},{label:`${e}-${Tk(t)}()`,repDate:d,se:y}]}function zAe(e){const{wolMonths:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=[],p=[],b=new Map;for(const O of t){const[j,C]=O.split("-").map(Number),M=Iv(n,j,C);for(const I of M)p.some(U=>U.gz===I.gz&&U.startYear===I.startYear)||p.push(I);const P=HE(j,C);for(const I of P){const U=`${I.useYear}:${I.gz}`;b.has(U)||b.set(U,{year:I.useYear,month:C,gz:I.gz})}}const[y,k]=t[0].split("-").map(Number),w=HE(y,k),_=w[w.length-1]?.gz??Pe(ct(new Date(y,5,15,12,0,0,0))||"");if(p.length>0){const O={:p.map(j=>{const C={dae:j.gz,se:_||null,wol:null,il:null};return Bo({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:_||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push($o("",O))}const T=Array.from(b.keys()).sort((O,j)=>{const C=Number(O.split(":")[0]),M=Number(j.split(":")[0]);return C-M});if(T.length>0){const O={:T.map(j=>{const C=b.get(j),M=C.year,P=C.gz,U=AH(n,M)[0]??p[0]??null,V={dae:U?U.gz:null,se:P,wol:null,il:null};return Bo({scope:"",infoText:`${M} ${P}`,gz:P,chain:V,natal:r,relationArgs:{daewoon:U?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push($o("",O))}for(const O of t){const[j,C]=O.split("-").map(Number),M=Iv(n,j,C),P=M.length>0?M[0]:null,U=BAe(j,C).map(V=>{const q=At(V.repDate),H=Pe(q||""),B={dae:P?P.gz:null,se:V.se.gz||null,wol:H,il:null};return Bo({scope:"",infoText:`${V.label} ${H}  ${V.se.useYear} ${V.se.gz}`,gz:H,chain:B,natal:r,relationArgs:{daewoon:P?.gz,sewoon:V.se.gz||void 0,wolwoon:H,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});h.push($o(` ${O}`,{:U}))}return h.filter(O=>O.trim().length>0)}function Ak(e){const t=e.getFullYear(),n=pn(t,315),r=e<n?t-1:t,i=ct(new Date(r,5,15,12,0,0,0)),a=Pe(i||"");return{useYear:r,gz:a}}function UAe(e){const{ilDays:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,dayBoundaryRule:h}=e;if(t.length===0)return[];const p=[],[b,y,k]=t[0].split("-").map(Number),w=new Date(b,y-1,k,4,0),_=new Date(b,y-1,k,12,0);if(!Number.isNaN(w.getTime())){const T=Iv(n,b,y),O=T.length>0?T[0]:null,j=[];for(const q of t){const[H,B,W]=q.split("-").map(Number),Z=new Date(H,B-1,W,12,0),X=new Date(H,B-1,W,4,0);if(Number.isNaN(Z.getTime())||Number.isNaN(X.getTime()))continue;const G=Ak(Z),J=Pe(At(Z)||""),Q=Pe(pt(X,h)||""),oe=`${G.useYear}|${G.gz}|${J}`;j.some(le=>le.key===oe)||j.push({key:oe,repDateStr:q,seYear:G.useYear,seGZ:G.gz,wolGZ:J,ilGZ:Q})}const C=Pe(pt(w,h)||""),M=Pe(At(_)||""),P=Ak(_),I=j.length>0?j:[{key:`${P.useYear}|${P.gz}|${M}`,repDateStr:t[0],seYear:P.useYear,seGZ:P.gz,wolGZ:M,ilGZ:C}];if(O){const q=I[I.length-1],H={dae:O.gz,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ},B=Bo({scope:"",infoText:`${O.age} ${O.gz} (${O.startYear}~${O.endYear})`,gz:O.gz,chain:H,natal:r,relationArgs:{daewoon:O.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push($o("",B))}const U=I.filter(q=>q.seGZ.trim().length>0).map(q=>{const H={dae:O?O.gz:null,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ};return Bo({scope:"",infoText:`${q.seYear} ${q.seGZ} (${q.repDateStr} )`,gz:q.seGZ,chain:H,natal:r,relationArgs:{daewoon:O?.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});U.length>0&&p.push($o("",{:U}));const V=I.filter(q=>q.wolGZ.trim().length>0).map(q=>{const H={dae:O?O.gz:null,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ};return Bo({scope:"",infoText:`${q.repDateStr} ${q.wolGZ}`,gz:q.wolGZ,chain:H,natal:r,relationArgs:{daewoon:O?.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});V.length>0&&p.push($o("",{:V}))}for(const T of t){const[O,j,C]=T.split("-").map(Number),M=new Date(O,j-1,C,4,0),P=new Date(O,j-1,C,12,0);if(Number.isNaN(M.getTime())||Number.isNaN(P.getTime()))continue;const I=Iv(n,O,j),U=I.length>0?I[0]:null,q=Ak(P).gz,H=At(P),B=Pe(H||""),W=pt(M,h),Z=Pe(W||""),X={dae:U?U.gz:null,se:q||null,wol:B,il:Z},G=Bo({scope:"",infoText:`${T} ${Z}`,gz:Z,chain:X,natal:r,relationArgs:{daewoon:U?.gz,sewoon:q||void 0,wolwoon:B||void 0,ilwoon:Z||void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});p.push($o(` ${T}`,{:G}))}return p.filter(T=>T.trim().length>0)}function NH(e){const{ms:t,natal:n,basis:r,includeTenGod:i,unified:a,percent:o,category:l,selectedDaeList:u,daeList:d,seYears:h,wolMonths:p,ilDays:b,sections:y}=e,k=yH(t),w=Pe(n[3]??""),_=t.mingSikType??"/",T=[Pe(n[0]??""),Pe(n[1]??""),Pe(n[2]??""),w],O=vH(t,T),j=T[2]?.charAt(0)??"",C=nc[j]??nc[a.dayStem]??"",M=!!i&&(y?.tenGod??!0),P=y?.twelveUnseong??!0,I=y?.twelveShinsal??!0,U=y?.shinsal??!0,V=y?.nabeum??!0,{shinsalBase:q,shinsalEra:H,shinsalGaehwa:B}=sH.getState(),W=q===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",Z=`: ${t.name??""}  (${gH(t,k)}) 
${t.ganjiText} / : ${t.gender}`,X=(ue,ge)=>{const ke=(ge??"").trim();return ke?`## ${ue}
${ke}`:""},G=[],{flags:J}=J7(T,a.natalFixed.elementScoreRaw),Q=`${l} (${o.toFixed(1)}%)  ${[` ${J..||J..||J..||J..?"":""}`,` ${J..||J..||J..||J..?"":""}`,` ${J..||J..?"":""}`].join("  ")}`,oe=[];oe.push(" ver."),oe.push(X("",Q));const le=VA({natal:T,perStemElementScaled:a.natalFixed.overlay.perStemAugFull??a.natalFixed.overlay.perStemAugBare,mode:"natal"});if(le&&oe.push(X("()",Pv(le))),oe.push(X("(  )",bu(Object.fromEntries(Object.entries(a.natalFixed.elementPercent100).map(([ue,ge])=>[`${ue}(${mH(C,ue)})`,ge]))))),M){const ue=zE(a.natalFixed.totalsSub,j);oe.push(X(" ( 10 100)",bu(ue)))}if(P){const ue=O.map((ge,ke)=>{const ie=T[ke]??"";return ie?{pos:ge,gz:ie,value:io(j,ie.charAt(1))}:null}).filter(Boolean);ue.length>0&&oe.push(X("()",ha(ue)))}if(I){const ue=O.map((ge,ke)=>{const ie=T[ke]??"";return ie?{pos:ge,gz:ie,value:ao({baseBranch:W,targetBranch:ie.charAt(1),era:H,gaehwa:B})}:null}).filter(Boolean);ue.length>0&&oe.push(X("()",ha(ue)))}if(V){const ue=O.map((ge,ke)=>{const ie=T[ke]??"";if(!ie)return null;const Ae=Dv(ie);return Ae?{pos:ge,gz:ie,value:Ae.name}:null}).filter(Boolean);ue.length>0&&oe.push(X("",ha(ue)))}const z=cx(cAe(O,T));if(oe.push(X("()",Rv(z))),U){const ue=Lp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:r});oe.push(X("()",WA(ue)))}const K=oe.filter(Boolean).join(`

`);K&&G.push(K),d.length>0&&u.length>0&&(G.push(" ver."),G.push(...IAe({selectedDaeList:u,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:V},shinsalSettings:{baseBranch:W,era:H,gaehwa:B}}))),h.length>0&&(G.push(" ver."),G.push(...$Ae({seYears:h,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:V},shinsalSettings:{baseBranch:W,era:H,gaehwa:B}}))),p.length>0&&(G.push(" ver."),G.push(...zAe({wolMonths:p,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:V},shinsalSettings:{baseBranch:W,era:H,gaehwa:B}}))),b.length>0&&(G.push(" ver."),G.push(...UAe({ilDays:b,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:V},shinsalSettings:{baseBranch:W,era:H,gaehwa:B},dayBoundaryRule:_})));const ne=(Lv(G.join(`

`))??"").toString(),re=[];lH(re,{mode:"multi",isStudyTone:e.teacherMode===!0});const ce=re.join(`
`).trim();return{header:Z,body:ne,guide:ce}}function FAe(e){const{header:t,body:n,guide:r}=NH(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function XA(e){if(!e)return null;const t=e.name||"";let n="";if(e.birthDay&&e.birthDay.length===8){const o=e.birthDay.slice(0,4),l=e.birthDay.slice(4,6),u=e.birthDay.slice(6,8);n=`${o}-${l}-${u}`}else e.birthDay&&(n=e.birthDay);let r="";if(e.birthTime&&e.birthTime.trim().length>0){const l=e.birthTime.trim().padEnd(4,"0").slice(0,4),u=l.slice(0,2),d=l.slice(2,4);r=`${u}:${d}`}let i="";e.birthPlace&&typeof e.birthPlace=="object"&&(i=e.birthPlace.name||"");const a=e.ganji||e.ganjiText||"";return{name:t,birthDate:n,birthTime:r,birthPlace:i,ganjiText:a}}function HAe(e){const{header:t,body:n}=kH(e),r=e.relationMode==="couple"?XA(e.partnerMs??null):null,i=r?_H("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function GAe(e){const{header:t,body:n}=NH(e),r=e.relationMode==="couple"?XA(e.partnerMs??null):null,i=r?_H("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function YAe(e){const t=(e??"").trim();if(!t)return"";const n=[/\r?\n-----\s*\r?\n/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/,/\r?\n##\s*\s*/,/\r?\n##\s*/,/\r?\n?###\s*/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/];let r=-1;for(const i of n){const a=t.search(i);a>=0&&(r=r<0?a:Math.min(r,a))}return r>=0?t.slice(0,r).trimEnd():t}function qAe(e){return e?`    .
`:""}function KAe(e){return e?` /  .
`:""}function WAe(e,t){if(e!=="couple")return"";const n=XA(t);return n?["","","[  -   ]","",`-  : ${n.name}`,`-  : ${n.birthDate}`,`-  : ${n.birthTime}`,`-  : ${n.birthPlace}`,`- ${n.ganjiText}`,"","  /  ,","     .",""].join(`
`):""}function JA(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),r=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Zi(t,n,r);t=j.getFullYear(),n=j.getMonth()+1,r=j.getDate()}const i=!e.birthTime||e.birthTime==="",a=i?4:Number(e.birthTime.slice(0,2)),o=i?30:Number(e.birthTime.slice(2,4)),l=new Date(t,n-1,r,a,o,0,0),u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,d=Op(l,u,i),h=e.mingSikType??"/",p=ct(d,u),b=At(d,u),y=pt(d,h),k=i?null:no(d,h),w=Pe(p),_=Pe(b),T=Pe(y),O=k?Pe(k):"";return[w,_,T,O]}function OH(e){const t=new Date(e.corrected),n=JA(e),r=n[0].charAt(0),a=["","","","",""].includes(r),o=e.gender==="",l=o&&a||!o&&!a?"forward":"backward",u=Dp(t,n[1],l,120,e.birthPlace?.lon??127.5),d=u.firstChange;if(!d)return[];const h=[];let p=Pe(u.events[0]?.gz??n[1]);for(let b=0;b<10;b++){const y=new Date(d);if(y.setFullYear(y.getFullYear()+b*10),b>0){const k=u.events[b];k&&(p=Pe(k.gz))}h.push(`${y.getFullYear()} ${String(y.getMonth()+1).padStart(2,"0")} ${p}  `)}return h}function Hl(e){return Pe(e)}function VAe(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function H5(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Pe(n??"");return i||(r<=2?"--":"")})}function CH(e,t){if(!Array.isArray(e)||e.length===0)return null;const n=t.getTime();for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(n>=i.at.getTime())return i.gz}return e[0].gz}function ZAe(e,t){if(!Array.isArray(e)||e.length===0)return null;const n=e.map(r=>{const i=String(r??"").match(/(\d{4})\s*(\d{1,2})\s*([-]{2})/);if(!i)return null;const a=Number(i[1]),o=Number(i[2]),l=Hl(i[3]??"");return!Number.isFinite(a)||!Number.isFinite(o)||!l?null:{at:new Date(a,o-1,1,12,0,0,0),gz:l}}).filter(Boolean);return CH(n,t)}function XAe(e,t,n,r,i){const a=Hl(ct(t)||""),o=Hl(At(t)||""),l=Hl(pt(t,n)||"");let u=e?.dae?Hl(e.dae):null;if(!u&&r)if(i&&i.length>0)u=CH(i,t);else{const d=OH(r);u=ZAe(d,t)}return e?{dae:u,se:e.se??(a||null),wol:e.wol??(o||null),il:e.il??(l||null)}:{dae:u,se:a||null,wol:o||null,il:l||null}}function JAe(e,t){const n=H5(e),r=H5(t);return{solarKo:n,lunarKo:r}}function G5(e,t){if(!t)return e;const n=to(e[2]||"",-1);return[e[0],e[1],n,e[3]]}function GE(e,t,n){const r=[...e];return n&&(!r[3]||r[3]===""||r[3]==="--")&&t&&(r[3]=t.stem+t.branch),r}function QAe(e,t,n){return e?"solar":t?"lunar":"solar"}function eNe(e,t,n,r,i,a,o,l){return GE(e==="lunar"?n?i:t?r:a??["","","",""]:t?r:n?i:a??["","","",""],o,l)}function tNe(e,t){const n=Number(e.birthDay?.slice(0,4)),r=Number(e.birthDay?.slice(4,6)),i=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i))return null;const a=new Date(n,r-1,i,12,4,0,0),o=Hl(ct(a)||""),l=Hl(At(a)||""),u=Hl(pt(a,t)||"");return[o,l,u,""]}function nNe(e,t){return t&&e?e.stem+e.branch:""}function rNe(e,t,n){const i=[...JA(e)];return n&&t&&t.length===2&&(i[3]=t),i}function iNe(e){const t=n9(e,{criteriaMode:"modern",useHarmonyOverlay:!0}),n=dT(t);return{percent:n,category:M7(n)}}function aNe(e,t){const n=e.birthDay?Number(e.birthDay.slice(0,4)):0;return t&&t.length>0?t.slice(0,10).map((i,a)=>{const o=i.at.getFullYear(),l=i.at.getMonth()+1,u=i.at.getDate(),d=n>0?q5(n,o):a*10;return{gz:i.gz,age:d,startYear:o,startMonth:l,startDay:u,endYear:o+10}}):OH(e).slice(0,10).map((i,a)=>{const o=i.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),l=o?Number(o[1]):0,u=o?Number(o[2]):1,d=1,h=o?o[3]:"",p=n>0?q5(n,l):a*10;return{gz:h,age:p,startYear:l,startMonth:u,startDay:d,endYear:l+10}})}function oNe(e,t){return e.filter(n=>n.id!==t).map(n=>{const r=(n.name??"").trim()||" ",i=n.birthDay?n.birthDay:"",a=i?`${r} (${i})`:r;return{id:n.id,label:a}})}function sNe(e,t){if(!e)return"";if(t.length===0)return e;const n=["","-----","     ","",...t.map((r,i)=>`${i+1}. ${r}`)];return`${e}
${n.join(`
`)}`}function Y5(e){return VAe(e)}function q5(e,t){return t-e+1}function lNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1,canUseMultiMode:o,canUseLuckTabs:l,input:u}){const{friendMode:d,teacherMode:h,partnerId:p,mainCategory:b,subCategory:y,relationMode:k,activeTab:w,isMultiMode:_,multiTab:T,selectedDaeIdx:O,rangeControls:j,extraQuestions:C,sections:M}=u,P=En(zn=>zn.list),{date:I,setDate:U}=Qr(),V=Fs();S.useEffect(()=>{U(new Date)},[e.id,U]);const q=S.useMemo(()=>p?P.find(zn=>zn.id===p)??null:null,[p,P]),H=e.mingSikType??"/",B=ac(e,H,100,V),W=S.useMemo(()=>B.slice(1),[B]),Z=S.useMemo(()=>I??new Date,[I]),X=S.useMemo(()=>XAe(r,Z,H,e,W),[r,Z,H,e,W]),G=S.useMemo(()=>l?X:{dae:null,se:null,wol:null,il:null},[l,X]),J=Fi(zn=>zn.manualHour),Q=Fi(zn=>zn.usePrevDay),oe=!e.birthTime||e.birthTime===""||!/^\d{4}$/.test(e.birthTime??""),{solarKo:le,lunarKo:z}=S.useMemo(()=>JAe(t,n),[t,n]),K=S.useMemo(()=>GE(le,J,oe),[le,J,oe]),ne=S.useMemo(()=>GE(z,J,oe),[z,J,oe]),re=S.useMemo(()=>tNe(e,H),[e,H]),ce=Y5(K),ue=Y5(ne),ge=QAe(ce,ue),ke=S.useMemo(()=>eNe(ge,ce,ue,K,ne,re,J,oe),[ge,ce,ue,K,ne,re,J,oe]),ie=S.useMemo(()=>G5(ke,Q),[ke,Q]),Ae=S.useMemo(()=>oe&&J?J.stem+J.branch:ie[3]||"",[J,ie,oe]),Ee=nNe(J,oe),he=S.useMemo(()=>rNe(e,Ee,oe),[e,Ee,oe]),Le=S.useMemo(()=>G5(he,Q),[he,Q]),Ie=l?w:"",tt=b==="love"||b==="compat",Be=tt&&k==="couple"?q??null:null,Ue=tt?k:void 0,nt=S.useMemo(()=>Ip({natal:Le,tab:Ie,chain:G,hourKey:Ae}),[Le,Ie,G,Ae]),{percent:ut,category:yt}=S.useMemo(()=>iNe(Le),[Le]),se=S.useMemo(()=>aNe(e,W),[e,W]),Oe=S.useMemo(()=>oNe(P??[],e.id),[P,e.id]),Ye=S.useMemo(()=>O.map(zn=>se[zn]).filter(zn=>!!zn),[O,se]),qe=S.useMemo(()=>T===""?j.seYearsList:[],[T,j.seYearsList]),Tt=S.useMemo(()=>T===""?j.wolMonthsList:[],[T,j.wolMonthsList]),ht=S.useMemo(()=>T===""?j.ilDaysList:[],[T,j.ilDaysList]),Me=S.useMemo(()=>e?LAe({ms:e,natal:Le,chain:G,basis:i,tab:Ie,unified:nt,percent:ut,category:yt,teacherMode:h,sections:M}):"",[e,i,a,Ie,G,nt,ut,yt,Le,b,y,k,Be,h,M,Z]),ze=S.useMemo(()=>!e||!_||!o?"":FAe({ms:e,natal:Le,basis:i,includeTenGod:a,unified:nt,percent:ut,category:yt,selectedDaeList:Ye,daeList:se,seYears:qe,wolMonths:Tt,ilDays:ht,teacherMode:h,sections:M}),[e,_,o,qe,Ye,se,Tt,ht,Le,i,a,nt,ut,yt,b,y,Ue,Be,h,d,M]),Xe=S.useMemo(()=>WAe(k,q),[k,q]),vt=_?ze:Me,Ot=S.useMemo(()=>KAe(h),[h]),$t=S.useMemo(()=>qAe(d),[d]),Ht=S.useMemo(()=>vt||Xe?`${vt}${Xe}
${Ot}${$t}`:"",[Ot,$t,vt,Xe]),wn=S.useMemo(()=>sNe(Ht,C),[Ht,C]),Tn=S.useMemo(()=>e?_?GAe({ms:e,natal:Le,basis:i,includeTenGod:a,unified:nt,percent:ut,category:yt,selectedDaeList:Ye,daeList:se,seYears:qe,wolMonths:Tt,ilDays:ht,relationMode:Ue,partnerMs:Be,teacherMode:h,sections:M}):HAe({ms:e,natal:Le,chain:G,basis:i,tab:Ie,unified:nt,percent:ut,category:yt,relationMode:k,partnerMs:Be,teacherMode:h,sections:M}):"",[e,_,Le,i,a,nt,ut,yt,Ye,se,qe,Tt,ht,b,y,k,Ue,Be,h,d,M,G,Ie,Z]),Ca=S.useMemo(()=>{const zn=Tn.trim();if(zn)return zn;const Ce=YAe(vt).trim();return Ce||vt.trim()},[Tn,vt]);return{date:I,setDate:U,partnerMs:q,partnerOptions:Oe,daeList:se,tabForLogic:Ie,baseText:vt,basePrompt:Ht,finalText:wn,infoOnlyText:Ca,allowManualHour:oe,activePillars:ie}}function K5(e,t=1200){const[n,r]=S.useState(!1),i=!!(e&&e.trim().length>0),a=S.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),t)}catch{r(!1)}},[i,e,t]);return{copied:n,canCopy:i,onCopy:a}}function cNe(e,t){const{copied:n,canCopy:r,onCopy:i}=K5(e),{copied:a,canCopy:o,onCopy:l}=K5(t);return{copiedAll:n,copiedInfo:a,canCopyAll:r,canCopyInfo:o,onCopyAll:i,onCopyInfoOnly:l}}function uNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1}){const o=En(q=>q._rtUserId),u=KTe()??o??null,d=bn(q=>q.loaded),h=bn(q=>q.userId),p=bn(q=>q.plan),b=S.useMemo(()=>Em(!u||!d||h!==u?"FREE":p??null),[u,d,h,p]),y=S.useMemo(()=>y2(b),[b]),k=y.canUseMultiMode,w=y.canUseLuckTabs,_=y.canUseAllPrompts?"full":"locked",T=ZTe({msId:e.id,canUseMultiMode:k,canUseLuckTabs:w}),O=lNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a,canUseMultiMode:k,canUseLuckTabs:w,input:T}),{copiedAll:j,copiedInfo:C,canCopyAll:M,canCopyInfo:P,onCopyAll:I,onCopyInfoOnly:U}=cNe(O.finalText,O.infoOnlyText);function V(q,H){T.setMainCategory(q),T.setSubCategory(H?.[0]?.key??"overview")}return{sections:T.sections,toggleSection:T.toggleSection,friendMode:T.friendMode,setFriendMode:T.setFriendMode,teacherMode:T.teacherMode,setTeacherMode:T.setTeacherMode,date:O.date,setDate:O.setDate,planTier:b,promptAccess:_,canUseMultiMode:k,canUseLuckTabs:w,partnerId:T.partnerId,setPartnerId:T.setPartnerId,partnerMs:O.partnerMs,mainCategory:T.mainCategory,subCategory:T.subCategory,setSubCategory:T.setSubCategory,relationMode:T.relationMode,setRelationMode:T.setRelationMode,activeTab:T.activeTab,setActiveTab:T.setActiveTab,isMultiMode:T.isMultiMode,setIsMultiMode:T.setIsMultiMode,multiTab:T.multiTab,setMultiTab:T.setMultiTab,selectedDaeIdx:T.selectedDaeIdx,handleToggleDae:T.handleToggleDae,rangeControls:T.rangeControls,partnerOptions:O.partnerOptions,daeList:O.daeList,tabForLogic:O.tabForLogic,baseText:O.baseText,basePrompt:O.basePrompt,finalText:O.finalText,infoOnlyText:O.infoOnlyText,copiedAll:j,copiedInfo:C,canCopyAll:_==="full"&&M,canCopyInfo:_==="full"&&P,onCopyAll:I,onCopyInfoOnly:U,handleMainCategoryChange:V,setQuestionDraft:T.setQuestionDraft,questionDraft:T.questionDraft,extraQuestions:T.extraQuestions,setExtraQuestions:T.setExtraQuestions,handleAddQuestion:T.handleAddQuestion,handleRemoveQuestion:T.handleRemoveQuestion,handleClearQuestions:T.handleClearQuestions,allowManualHour:O.allowManualHour,activePillars:O.activePillars}}function dNe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a=!1}){const o=uNe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a}),l=P5[o.mainCategory];if(!e)return g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"  ."});const u=o.promptAccess!=="full",d=u?"    . ":void 0,h=!u&&o.canCopyAll,p="https://gemini.google.com/app",b="https://chatgpt.com/",y=async k=>{await o.onCopyAll(),!(typeof window>"u")&&window.open(k,"_blank","noopener,noreferrer")};return g.jsxs("div",{className:"relative rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-2 desk:space-y-3",children:[u?g.jsx("div",{className:"absolute inset-0 z-10 rounded-xl bg-white/70 dark:bg-neutral-900/70 backdrop-blur-[1px] flex items-center justify-center p-4",children:g.jsxs("div",{className:"max-w-sm text-center border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-900 px-4 py-3 shadow-sm",children:[g.jsx("div",{className:"text-lg font-semibold",children:"  "}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:["   /  .",g.jsx("br",{}),"    100   ! (  )"]})]})}):null,g.jsx(ITe,{}),g.jsx($Te,{sections:o.sections,toggleSection:o.toggleSection}),g.jsx(BTe,{mainCategory:o.mainCategory,subCategory:o.subCategory,mainCategoryMeta:qTe,currentSubList:l,onMainCategoryChange:k=>o.handleMainCategoryChange(k,P5[k]),onSubCategoryChange:o.setSubCategory}),g.jsx(zTe,{visible:o.mainCategory==="love"||o.mainCategory==="compat",relationMode:o.relationMode,setRelationMode:o.setRelationMode,partnerId:o.partnerId,setPartnerId:o.setPartnerId,partnerOptions:o.partnerOptions}),g.jsx(UTe,{isMultiMode:o.canUseMultiMode?o.isMultiMode:!1,setIsMultiMode:k=>{!o.canUseMultiMode&&k||o.setIsMultiMode(k)},canUseMultiMode:o.canUseMultiMode}),o.isMultiMode?g.jsx(HTe,{multiTab:o.multiTab,setMultiTab:o.setMultiTab,daeList:o.daeList.map(k=>({gz:k.gz,age:k.age,startYear:k.startYear,endYear:k.endYear})),selectedDaeIdx:o.selectedDaeIdx,onToggleDae:o.handleToggleDae,seStartYear:o.rangeControls.seStartYear,seEndYear:o.rangeControls.seEndYear,onSeStartChange:o.rangeControls.onSeStartChange,onSeEndChange:o.rangeControls.onSeEndChange,onSeStartBlur:o.rangeControls.onSeStartBlur,onSeEndBlur:o.rangeControls.onSeEndBlur,seYearsCount:o.rangeControls.seYearsCount,wolStartDate:o.rangeControls.wolStartYM,wolEndDate:o.rangeControls.wolEndYM,onWolStartChange:o.rangeControls.onWolStartChange,onWolEndChange:o.rangeControls.onWolEndChange,onWolStartBlur:o.rangeControls.onWolStartBlur,onWolEndBlur:o.rangeControls.onWolEndBlur,wolMonthsCount:o.rangeControls.wolMonthsCount,ilStartDate:o.rangeControls.ilStartDate,ilEndDate:o.rangeControls.ilEndDate,onIlStartChange:o.rangeControls.onIlStartChange,onIlEndChange:o.rangeControls.onIlEndChange,onIlStartBlur:o.rangeControls.onIlStartBlur,onIlEndBlur:o.rangeControls.onIlEndBlur,ilDaysCount:o.rangeControls.ilDaysCount}):g.jsx(FTe,{tabs:YTe,activeTab:o.tabForLogic,setActiveTab:k=>{!o.canUseLuckTabs&&k!==""||o.setActiveTab(k)},date:o.date,setDate:o.setDate,canUseLuckTabs:o.canUseLuckTabs}),g.jsx(GTe,{value:o.finalText,lockSelection:u}),g.jsx("div",{className:"flex justify-end",children:g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 w-full desk:w-auto",children:[g.jsx("button",{type:"button",onClick:o.onCopyAll,disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",h?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedAll?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"].join(" "),children:o.copiedAll?"":`${h?"":" "}`}),g.jsx("button",{type:"button",onClick:()=>void y(p),disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",h?"cursor-pointer bg-blue-600 text-white dark:bg-blue-500":"cursor-not-allowed opacity-50 bg-blue-600 text-white dark:bg-blue-500"].join(" "),children:`   ${h?"":" "}`}),g.jsx("button",{type:"button",onClick:()=>void y(b),disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",h?"cursor-pointer bg-emerald-600 text-white dark:bg-emerald-500":"cursor-not-allowed opacity-50 bg-emerald-600 text-white dark:bg-emerald-500"].join(" "),children:`   ${h?"":" "}`})]})})]})}function fNe(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o]=S.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin"));return{userId:e,setUserId:t,authChecked:n,setAuthChecked:r,isLoggedIn:i,setIsLoggedIn:a,adminMode:o}}function hNe(){const e=En(r=>r.loading),t=tn(r=>r.loaded),n=bn(r=>r.loaded);return{loading:e,settingsLoaded:t,entLoaded:n}}const W5="app_session_started_at_ms",mNe=7200*1e3;function pNe(){if(typeof window>"u")return null;try{return window.sessionStorage}catch{return null}}function gNe(){const e=pNe();if(!e)return Date.now();const t=e.getItem(W5),n=t?Number(t):NaN;if(!Number.isFinite(n)||n<=0){const r=Date.now();try{e.setItem(W5,String(r))}catch{}return r}return n}function bNe(e=Date.now()){const t=gNe();return Math.max(0,e-t)}function yNe(e,t=Date.now()){return bNe(t)>=e}async function vNe(e,t){const{data:n,error:r}=await De.from("user_settings_kv").select("value").eq("user_id",e).eq("setting_key",t).maybeSingle();if(r)throw r;return n?.value??null}async function xNe(e,t,n){const{error:r}=await De.from("user_settings_kv").upsert({user_id:e,setting_key:t,value:n},{onConflict:"user_id,setting_key"});if(r)throw r}const wNe=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Vd(e){if(e===null)return"null";if(e===void 0)return"undefined";const t=typeof e;return t==="string"?JSON.stringify(e):t==="number"||t==="boolean"?String(e):Array.isArray(e)?`[${e.map(Vd).join(",")}]`:wNe(e)?`{${Object.keys(e).sort().map(i=>`${JSON.stringify(i)}:${Vd(e[i])}`).join(",")}}`:e instanceof Date?`{"$date":${JSON.stringify(e.toISOString())}}`:JSON.stringify(String(e))}function _Ne(e,t){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=null,e(...r)},t)}}function SNe(e,t){const n=t.debounceMs??400;let r=!1,i=null,a=Vd(t.select(t.store.getState()));const o=_Ne(async p=>{try{await xNe(e,t.dbKey,p),a=Vd(p)}catch(b){console.error(`[settings] save failed key=${t.dbKey}`,b)}},n),l=p=>{r=!0;try{t.apply(p),a=Vd(p)}finally{r=!1}},u=p=>{t.validate&&!t.validate(p)||l(p)},d=async()=>{const p=await vNe(e,t.dbKey);p!==null&&u(p)};i=t.store.subscribe(p=>{if(r)return;const b=t.select(p);Vd(b)!==a&&o(b)});const h=()=>{i&&i(),i=null};return{dbKey:t.dbKey,loadFromDb:d,applyRemote:u,stop:h}}function kNe(e){if(typeof e!="object"||e===null)return!1;const t=e;return["twelveUnseong","twelveShinsal","shinsal","nabeum"].every(r=>typeof t[r]=="boolean")}function Nk(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ENe(e){S.useEffect(()=>{if(!e)return;const t=[];t.push(SNe(e,{dbKey:"promptCopy.sections",store:Mv,select:o=>o.sections,apply:o=>Mv.setState({sections:o}),validate:kNe,debounceMs:250})),Promise.all(t.map(o=>o.loadFromDb())).catch(o=>{console.error("[settings] initial load failed",o)});const n=[{table:"user_settings_kv",filterByUserId:!0}],r=new Map,i=(o,l,u)=>{const d=r.get(o);d&&window.clearTimeout(d);const h=window.setTimeout(()=>{r.delete(o),u()},l);r.set(o,h)},a=De.channel(`app-sync:${e}`);for(const o of n)a.on("postgres_changes",{event:"*",schema:"public",table:o.table,...o.filterByUserId?{filter:`user_id=eq.${e}`}:{}},l=>{if(yNe(mNe)){window.location.reload();return}if(o.table==="user_settings_kv"){if(!Nk(l))return;const u=l.new,d=l.old,h=w=>Nk(w)&&typeof w.setting_key=="string"?w.setting_key:null,p=w=>Nk(w)?w.value:null,b=h(u)??h(d);if(!b)return;const y=t.find(w=>w.dbKey===b);if(!y)return;const k=typeof l.eventType=="string"?l.eventType:"";if(k==="INSERT"||k==="UPDATE"){y.applyRemote(p(u));return}y.loadFromDb();return}if(o.onChange){const u=typeof o.debounceMs=="number"?o.debounceMs:0;u>0?i(o.table,u,()=>o.onChange?.(l)):o.onChange(l)}});return a.subscribe(),()=>{for(const o of t)o.stop();for(const[,o]of r)window.clearTimeout(o);r.clear(),De.removeChannel(a)}},[e])}function jNe({setUserId:e,setIsLoggedIn:t,setAuthChecked:n}){S.useEffect(()=>{const r=De;let i=!1,a=null;const o=h=>{const p=h?.user?.id??null;t(!!h),e(p)},l=h=>{o(h),h&&C6(Date.now()),i||(i=!0,n(!0))};(async()=>{const{data:h,error:p}=await r.auth.getSession();if(p){l(null);return}if(h.session){l(h.session);return}a=window.setTimeout(()=>l(null),1200)})();const{data:{subscription:d}}=r.auth.onAuthStateChange((h,p)=>{a!==null&&(window.clearTimeout(a),a=null),l(p),p||En.getState().stopRealtime()});return()=>{a!==null&&window.clearTimeout(a),d.unsubscribe()}},[n,t,e])}function TNe(e){jNe({setUserId:e.setUserId,setIsLoggedIn:e.setIsLoggedIn,setAuthChecked:e.setAuthChecked}),ENe(e.userId)}function ANe(e){const[t,n]=S.useState(()=>e.length>0?e[0].id:""),[r,i]=S.useState(!1),[a,o]=S.useState(!1),[l,u]=S.useState(null),[d,h]=S.useState(!0),[p,b]=S.useState(!1),[y,k]=S.useState(!1);return{currentId:t,setCurrentId:n,wizardOpen:r,setWizardOpen:i,showSidebar:a,setShowSidebar:o,editing:l,setEditing:u,showToday:d,setShowToday:h,showCouple:p,setShowCouple:b,openCustom:y,setOpenCustom:k}}function NNe(e){const t=Qr(i=>i.date),n=Qr(i=>i.rule),r=ac(e);return S.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const i=dx(r,t),a=i>=0?r[i]?.gz??null:null,o=ct(t),l=At(t),u=pt(t,n);return{dae:a,se:o,wol:l,il:u}},[e,r,t,n])}const ONe=e=>typeof e=="string"&&e.length>=2,CNe=e=>Array.isArray(e)&&e.length===4&&e.every(ONe);function MNe({list:e,currentId:t,settings:n,emptyMs:r}){const i=S.useMemo(()=>e.find(b=>b.id===t)??e[0],[e,t]),a=e.length>0&&!!i&&typeof i.birthDay=="string",o=a?i:r,l=S.useMemo(()=>JA(o),[o]),u=NNe(o),d=bn(b=>b.canAddMyeongsik(e.length).ok),h=n.sinsalBase===""?"day":"year",p=n.sinsalBase===""?"day":"year";return{current:i,hasCurrent:a,msForHooks:o,natal:l,chain:u,isValidPillars:CNe,canAdd:d,voidBasis:h,samjaeBasis:p}}function DNe({canAdd:e,hasCurrent:t,current:n,isLoggedIn:r,setWizardOpen:i,setOpenCustom:a,setShowSidebar:o,setShowToday:l,setShowCouple:u,setCurrentId:d,setEditing:h}){const{settings:p,saveToServer:b,loaded:y}=tn();S.useEffect(()=>{!r||!y||b()},[r,y,p,b]);const k=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}i(!0)},[e,i]),w=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}a(!0)},[e,a]),_=S.useCallback(M=>{d(M.id),o(!1),l(!1),u(!1);const P=new Date;P.setHours(12,0,0,0),Qr.getState().setDate(P),t&&n?.id===M.id&&(l(!1),u(!1),o(!1))},[n,t,d,o,l,u]),T=S.useCallback(M=>{h(M),d(M.id),o(!1),l(!1),u(!1)},[h,d,o,l,u]),O=S.useCallback(()=>{const M=En.getState().list[0]?.id??"";d(M),l(!0),u(!1)},[d,l,u]),j=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1),requestAnimationFrame(()=>i(!1))},[d,l,u,o,i]),C=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1)},[d,l,u,o]);return{openAdd:k,openCustomModal:w,handleSidebarView:_,handleSidebarEdit:T,handleSidebarDeleteView:O,handleWizardSave:j,handleCustomSave:C}}function PNe(){return g.jsx("div",{className:"pt-16 pb-24",children:g.jsxs("div",{className:"max-w-[640px] mx-auto px-4",children:[g.jsx("div",{className:"flex items-center justify-between gap-3 mb-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(u4,{className:"w-5 h-5 text-neutral-700 dark:text-neutral-200"}),g.jsx("h2",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"  "})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.   ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.  ",g.jsx("b",{children:""})," ",g.jsx("b",{children:""}),"   .   ,    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:"*"}),"   ",g.jsx("b",{children:" "})," ",g.jsx("b",{children:"8*"}),"  ",g.jsx("b",{children:"    "}),"      ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:" "}),"     ."]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.    . ",g.jsx("b",{children:"*"}),", ",g.jsx("b",{children:"8*"}),"    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:""})," (  8   -  )   ."]}),g.jsxs("p",{className:"mt-2",children:["(    ,    ",g.jsx("b",{children:" "})," .)"]}),g.jsx("p",{className:"mt-2",children:" .    .    ,   ( )     ."})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.     .         ,       ."}),g.jsx("p",{className:"mt-2",children:"    ,      ."}),g.jsxs("p",{className:"mt-2",children:["(   ",g.jsx("b",{children:" "}),"  ^^)",g.jsx("br",{}),g.jsx("a",{href:"https://5seasons.co.kr/",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"   !"})})]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.  ''   ?"}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.      ."}),g.jsx("p",{className:"mt-2",children:"          ^^"}),g.jsx("p",{className:"mt-2",children:g.jsx("a",{href:"https://yavares.tistory.com/345",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"  "})})})]})]})]})]})})}const MH="https://t1.daumcdn.net/kas/static/ba.min.js",RNe="//t1.daumcdn.net/kas/static/ba.min.js";let vm=null,xm=null;function DH(){return typeof window<"u"&&typeof document<"u"}function V5(e){return typeof e=="object"&&e!==null}function PH(){if(!DH())return!1;const e=window;if(!V5(e))return!1;const t=e.adfit;return V5(t)?typeof t.destroy=="function":!1}function RH(){return Array.from(document.querySelectorAll(`script[src="${MH}"], script[src="${RNe}"]`))}function LH(e){return e.getAttribute("data-adfit-scan")==="1"}function LNe(){const t=RH().filter(n=>!LH(n));if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode?.removeChild(r)}}function Z5(){return document.body??document.head??document.documentElement}function Ok(e,t){return new Promise((n,r)=>{let i=!1;const a=()=>{e.removeEventListener("load",u),e.removeEventListener("error",d)},o=()=>{i||(i=!0,a(),n())},l=()=>{i||(i=!0,a(),r(new Error("AdFit script load failed")))},u=()=>o(),d=()=>l();e.addEventListener("load",u),e.addEventListener("error",d),window.setTimeout(()=>{PH(),o()},t)})}function X5(e){const t=document.createElement("script");return t.async=!0,t.type="text/javascript",t.charset="utf-8",t.src=MH,e?t.setAttribute("data-adfit-scan","1"):t.setAttribute("data-adfit-managed","1"),t}function YE(e){return DH()?(e?.mode??"boot")==="boot"?vm||(vm=(async()=>{if(LNe(),PH())return{inserted:!1};const r=RH().filter(a=>!LH(a))[0];if(r)return await Ok(r,2500),{inserted:!1};const i=X5(!1);return Z5().appendChild(i),await Ok(i,4e3),{inserted:!0}})().finally(()=>{vm=null}),vm):xm||(xm=(async()=>{const n=X5(!0);Z5().appendChild(n);try{return await Ok(n,4e3),{inserted:!0}}finally{n.parentNode?.removeChild(n)}})().finally(()=>{xm=null}),xm):Promise.resolve({inserted:!1})}function IH({enabled:e}){return S.useEffect(()=>{e&&YE({mode:"boot"})},[e]),null}function J5(e){return typeof e=="object"&&e!==null}function INe(e){const t=window;if(!J5(t))return;const n=t.adfit;if(!J5(n))return;const r=n.destroy;if(typeof r=="function")try{r.call(n,e)}catch{}}function yu({adUnit:e,width:t,height:n,enabled:r=!0,isVisible:i=!0,className:a,wrapperStyle:o,reserveSpace:l=!0}){const u=S.useRef(!1),d=S.useRef(!1),h=S.useMemo(()=>({...l?{width:"100%",minHeight:n,display:"flex",justifyContent:"center",alignItems:"flex-start"}:{width:"100%"},...o}),[n,l,o]);return S.useEffect(()=>{if(!r||u.current)return;u.current=!0;let p=!1;return(async()=>{try{if(await YE({mode:"boot"}),p)return}catch{}})(),()=>{p=!0}},[r]),S.useEffect(()=>{if(!r||!i||d.current)return;d.current=!0;let p=!1;return(async()=>{try{if(await YE({mode:"scan"}),p)return}catch{}})(),()=>{p=!0}},[r,i]),S.useEffect(()=>()=>{INe(e),u.current=!1,d.current=!1},[e]),r?g.jsx("div",{className:a,style:h,children:g.jsx("div",{style:l?{width:t,height:n}:void 0,children:g.jsx("ins",{className:"kakao_ad_area",style:{display:"none"},"data-ad-unit":e,"data-ad-width":String(t),"data-ad-height":String(n)})})}):null}function $H({enabled:e,adUnit:t,width:n,height:r,showAfterScrollY:i=180,rightPx:a=16,topPx:o=120,breakpointClassName:l="hidden desk:block"}){const[u,d]=S.useState(!1),[h,p]=S.useState(!1);return S.useEffect(()=>{if(!e){d(!1),p(!1);return}p(!0);let b=0;const y=()=>{b||(b=window.requestAnimationFrame(()=>{b=0;const k=window.scrollY||0;d(k>=i)}))};return y(),window.addEventListener("scroll",y,{passive:!0}),()=>{b&&window.cancelAnimationFrame(b),window.removeEventListener("scroll",y)}},[e,i]),e?g.jsx("div",{className:l,style:{position:"fixed",right:a,top:o,zIndex:60,pointerEvents:"none",visibility:u?"visible":"hidden",opacity:u?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:u?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx(yu,{enabled:h,isVisible:u,adUnit:t,width:n,height:r,wrapperStyle:{display:"flex",justifyContent:"center"}})})})}):null}function BH(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o,l]=S.useState(!1),[u,d]=S.useState(!1);S.useEffect(()=>{document.title=" - //";const y=window.setTimeout(()=>t(!0),50),k=window.setTimeout(()=>r(!0),250),w=window.setTimeout(()=>a(!0),450);return()=>{window.clearTimeout(y),window.clearTimeout(k),window.clearTimeout(w)}},[]);const h=()=>u?!0:(ma.error(`   
  .`),!1),p=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await De.auth.signInWithOAuth({provider:"google",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Google Login Error:",w),ma.error("   .");return}if(!k?.url){ma.error(" URL  .");return}window.location.assign(k.url)},b=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await De.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Kakao Login Error:",w),ma.error("   .");return}if(!k?.url){ma.error(" URL  .");return}window.location.assign(k.url)};return g.jsxs("main",{className:`relative py-6 max-h-[70vh] overflow-auto bg-neutral-950 text-white transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("header",{className:`transform transition-all duration-500 mb-8 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} text-center max-w-[680px]`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:""}),g.jsxs("p",{className:"text-sm text-neutral-300 leading-relaxed",children:["      /       .",g.jsx("br",{}),"   /     "]})]}),g.jsxs("section",{className:`w-full max-w-sm mx-auto rounded-2xl bg-neutral-900 p-4 shadow-xl border border-neutral-800 transition-all duration-500 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,"aria-label":"",children:[g.jsx("h2",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-5 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"      "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:u,onChange:()=>d(!u),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>l(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("button",{type:"button",onClick:p,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
              ${u?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]}),g.jsxs("button",{type:"button",onClick:b,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all
              ${u?"bg-[#FEE500] text-black hover:brightness-95 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"/icons/KakaoTalk_logo.png",alt:"KakaoTalk",className:"h-5"}),g.jsx("span",{children:" "})]})]}),g.jsxs("div",{className:"mt-6 border-t border-neutral-800 pt-4 text-xs text-neutral-400 leading-relaxed",children:[g.jsx("p",{className:"font-semibold text-neutral-300 mb-2",children:"    "}),g.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[g.jsx("li",{children:" /  "}),g.jsx("li",{children:"    "}),g.jsx("li",{children:"/ (  )"})]}),g.jsx("p",{className:"mt-3 text-[11px] text-neutral-500",children:": unique950318@gmail.com   "})]})]}),g.jsx(R$,{position:"top-center",toastOptions:{duration:2e3}}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:y=>y.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-2",children:["   ,  (,  )",g.jsx("br",{}),"       ( ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"      ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"           "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition cursor-pointer",children:""})]})})]})}function $Ne(e){switch(e){case"PERSIST_SAVE":return"    !";case"ADD_LIMIT":return"    !";case"HEADER":return"";default:return""}}function BNe(){const e=Es(i=>i.open),t=Es(i=>i.reason),n=Es(i=>i.close),r=S.useMemo(()=>$Ne(t),[t]);return S.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&n()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,n]),S.useEffect(()=>{const{data:i}=De.auth.onAuthStateChange((a,o)=>{o?.user&&(bn.getState().loadFromServer(),tn.getState().loadFromServer(),En.getState().loadFromServer(),Es.getState().close())});return()=>i.subscription.unsubscribe()},[]),e?g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center p-4",onClick:n,role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"w-full max-w-[520px] rounded-2xl bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-800 shadow-xl overflow-hidden",onClick:i=>i.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:r}),g.jsx("button",{type:"button",onClick:n,className:`w-8 h-8 rounded-full flex items-center justify-center
                       bg-neutral-100 hover:bg-neutral-200
                       dark:bg-neutral-800 dark:hover:bg-neutral-700
                       text-neutral-700 dark:text-neutral-200 cursor-pointer`,"aria-label":"",title:"",children:""})]}),g.jsx("div",{className:"p-4",children:g.jsx(BH,{})})]})}):null}function zNe(){const e=Es(t=>t.openWith);return g.jsx("div",{className:"max-w-[640px] mx-auto px-3",children:g.jsxs("div",{className:`rounded-xl border border-amber-300/60 bg-amber-50 text-amber-950
                      dark:border-amber-500/30 dark:bg-amber-950/30 dark:text-amber-100
                      shadow-sm px-4 py-3 flex items-center justify-between gap-3`,children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-sm font-semibold truncate",children:"   "}),g.jsx("div",{className:"text-xs opacity-90 mt-0.5 leading-relaxed",children:" /   ."})]}),g.jsxs("button",{type:"button",onClick:()=>e("PERSIST_SAVE"),className:`shrink-0 inline-flex items-center gap-1.5
                     px-3 py-2 rounded-lg text-xs font-semibold
                     bg-amber-500 hover:bg-amber-600 text-white
                     border border-amber-600/30
                     cursor-pointer`,"aria-label":"",title:"",children:[g.jsx(d4,{size:16}),""]})]})})}const QA="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";let wm=null;function eN(){return typeof window<"u"&&typeof document<"u"}function zH(){return eN()?Array.from(document.querySelectorAll('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')):[]}function UH(e,t){const n=`client=${encodeURIComponent(t)}`;return e.includes(n)||e.includes(`client=${t}`)}function Q5(e){return zH().some(n=>{const r=n.getAttribute("src")??"";return r.includes(QA)&&UH(r,e)})}function Ck(e){const t=zH().filter(n=>{const r=n.getAttribute("src")??"";return r.includes(QA)&&UH(r,e)});if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode&&r.parentNode.removeChild(r)}}function UNe(e){const t=document.createElement("script");return t.async=!0,t.src=`${QA}?client=${encodeURIComponent(e)}`,t.crossOrigin="anonymous",t}function FNe(e){return new Promise((t,n)=>{const r=()=>t(),i=()=>n(new Error("AdSense script failed to load"));e.addEventListener("load",r,{once:!0}),e.addEventListener("error",i,{once:!0})})}function HNe(e){return typeof e!="object"||e===null||!("push"in e)?!1:typeof e.push=="function"}async function e$(e){if(eN()){if(Q5(e)){Ck(e);return}if(wm)return wm;wm=(async()=>{if(Q5(e)){Ck(e);return}const t=UNe(e);document.head.appendChild(t),await FNe(t),Ck(e)})();try{await wm}finally{wm=null}}}function GNe(e={}){if(!eN())return;const t=window.adsbygoogle;if(Array.isArray(t)){t.push(e);return}if(HNe(t)){t.push(e);return}const n=[];n.push(e),window.adsbygoogle=n}function YNe({enabled:e,isVisible:t,clientId:n,slotId:r,width:i,height:a,testMode:o=!1}){const l=S.useRef(!1),u=S.useRef(null);return S.useEffect(()=>{l.current=!1},[n,r,i,a]),S.useEffect(()=>{e&&e$(n).catch(()=>{})},[e,n]),S.useEffect(()=>{if(!e||!t||l.current)return;let d=!0;return(async()=>{try{if(await Promise.resolve(),!d||(await e$(n),!d))return;GNe({}),l.current=!0}catch{console.log()}})(),()=>{d=!1}},[e,t,n]),e?g.jsx("ins",{ref:u,className:"adsbygoogle",style:{display:"inline-block",width:i,height:a},"data-ad-client":n,"data-ad-slot":r,...o?{"data-adtest":"on"}:{}}):null}function FH({enabled:e,clientId:t,slotId:n,width:r,height:i,showAfterScrollY:a=180,side:o="left",sidePx:l=16,topPx:u=120,breakpointClassName:d="hidden desk:block"}){const[h,p]=S.useState(!1),[b,y]=S.useState(!1);return S.useEffect(()=>{if(!e){p(!1),y(!1);return}y(!0);let k=0;const w=()=>{k||(k=window.requestAnimationFrame(()=>{k=0;const _=window.scrollY||0;p(_>=a)}))};return w(),window.addEventListener("scroll",w,{passive:!0}),()=>{k&&window.cancelAnimationFrame(k),window.removeEventListener("scroll",w)}},[e,a]),e?g.jsx("div",{className:d,style:{position:"fixed",...o==="left"?{left:l}:{right:l},top:u,zIndex:60,pointerEvents:"none",visibility:h?"visible":"hidden",opacity:h?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:h?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx("div",{style:{display:"flex",justifyContent:"center"},children:g.jsx(YNe,{enabled:b,isVisible:h,clientId:t,slotId:n,width:r,height:i})})})})}):null}const HH="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";function t$(e){return typeof e=="object"&&e!==null&&"push"in e&&typeof e.push=="function"}function qNe(){return document.querySelector(`script[src^="${HH}"]`)}async function n$(e){qNe()||await new Promise((n,r)=>{const i=document.createElement("script");i.async=!0,i.src=`${HH}?client=${encodeURIComponent(e)}`,i.crossOrigin="anonymous",i.onload=()=>n(),i.onerror=()=>r(new Error("Failed to load adsbygoogle.js")),document.head.appendChild(i)})}function KNe(){const e=window.adsbygoogle;if(t$(e)){e.push({});return}window.adsbygoogle||(window.adsbygoogle=[]);const t=window.adsbygoogle;t$(t)&&t.push({})}function WNe({enabled:e,clientId:t,slotId:n,heightPx:r=100,maxWidthPx:i=750,marginTopPx:a=0,fullWidthResponsive:o=!0,pushOnVisible:l=!0,testMode:u=!1,className:d,style:h}){const p=S.useRef(null),b=S.useRef(!1),y=S.useMemo(()=>`adsense_banner:${t}:${n}`,[t,n]),[k,w]=S.useState(!l);return S.useEffect(()=>{b.current=!1},[t,n]),S.useEffect(()=>{e&&n$(t).catch(()=>{})},[e,t]),S.useEffect(()=>{if(!e||!l)return;const _=p.current;if(!_)return;const T=new IntersectionObserver(O=>{const j=O[0];j&&j.isIntersecting&&w(!0)},{root:null,threshold:.05});return T.observe(_),()=>T.disconnect()},[e,l]),S.useEffect(()=>{if(!e||!k||b.current)return;let _=!0;return(async()=>{try{if(await n$(t),!_||(await Promise.resolve(),!_))return;KNe(),b.current=!0}catch{}})(),()=>{_=!1}},[e,k,t]),e?g.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:a,...h},className:d,children:g.jsx("ins",{ref:p,className:"adsbygoogle",style:{display:"block",width:"100%",height:`${r}px`,maxWidth:`${i}px`},"data-ad-client":t,"data-ad-slot":n,"data-full-width-responsive":o?"true":"false",...u?{"data-adtest":"on"}:{}},y)}):null}const VNe="DAN-GW4jrUdfiXklZ12U",ZNe="DAN-CeRuC0yKzSAs5Gju",XNe="DAN-G16gewnPhZou1D9y",JNe="DAN-rdKe9ZODmrZR4hho",QNe="DAN-INfSKh1pW2cEtWNu",eOe={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function $b(){const e=Hr(),t=rc(),n=fNe();TNe(n);const r=hNe(),i=p=>{if(typeof window>"u")return null;try{return window.sessionStorage.getItem(p)}catch{return null}},a=(p,b)=>{if(!(typeof window>"u"))try{window.sessionStorage.setItem(p,b)}catch{}},[o,l]=S.useState(!1),[u,d]=S.useState(()=>typeof window>"u"?!1:i("app_loading_shown_v1")==="1"),h=!n.authChecked||!r.entLoaded||!r.settingsLoaded;return S.useEffect(()=>{h||l(!0)},[h]),S.useEffect(()=>{n.authChecked&&(n.isLoggedIn||e.pathname==="/"||e.pathname==="/result"||t("/",{replace:!0}))},[n.authChecked,n.isLoggedIn,e.pathname,t]),S.useEffect(()=>{!u&&!o&&h&&(d(!0),a("app_loading_shown_v1","1"))},[u,o,h]),n.authChecked&&n.isLoggedIn&&n.adminMode?g.jsx(rH,{}):!o&&h&&!u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500 animate-pulse",children:n.authChecked?"  ...":"  ..."})}):g.jsx(tOe,{isLoggedIn:n.isLoggedIn})}function tOe({isLoggedIn:e}){const t=Hr(),n=rc(),{list:r}=En(),i=tn(I=>I.settings),a=ANe(r),o=MNe({list:r,currentId:a.currentId,settings:i,emptyMs:eOe}),l=DNe({canAdd:o.canAdd,hasCurrent:o.hasCurrent,current:o.current,isLoggedIn:e,setWizardOpen:a.setWizardOpen,setOpenCustom:a.setOpenCustom,setShowSidebar:a.setShowSidebar,setShowToday:a.setShowToday,setShowCouple:a.setShowCouple,setCurrentId:a.setCurrentId,setEditing:a.setEditing}),[u,d]=S.useState(!1),[h,p]=S.useState(0);S.useEffect(()=>{a.editing&&d(!1)},[a.editing]),S.useEffect(()=>{const I=t.pathname;if(I==="/faq"){d(!0),a.setShowCouple(!1),a.setShowToday(!1);return}if(I==="/couple"){d(!1),a.setShowCouple(!0),a.setShowToday(!1);return}if(I==="/result"){d(!1),a.setShowCouple(!1),a.setShowToday(!1);return}d(!1),a.setShowCouple(!1),a.setShowToday(!0)},[a,t.pathname,a.setShowCouple,a.setShowToday]);const b=bn(I=>I.shouldShowAdsNow()),y=o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,k=a.showToday||!o.hasCurrent&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,w=!e&&o.hasCurrent&&y,_=!e&&!y,[T,O]=S.useState(!1),j=(...I)=>{d(!1),a.setShowToday(!1),a.setShowCouple(!1),n("/result",{replace:!1}),l.handleSidebarView(...I)},C=()=>{a.setOpenCustom(!1),p(I=>I+1)},M=I=>{d(!1),l.handleCustomSave(I)},P=I=>{d(!1),l.handleWizardSave(I),n("/result",{replace:!1})};return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(IH,{enabled:b}),b&&y&&g.jsx(FH,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx($H,{enabled:b,adUnit:QNe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsx(vfe,{isLoggedIn:e,onOpenSidebar:()=>a.setShowSidebar(!0),onAddNew:l.openAdd,onOpenCustom:l.openCustomModal}),g.jsx(BNe,{}),T&&g.jsxs("div",{className:"fixed inset-0 z-[210] bg-black/70 flex items-center justify-center",children:[g.jsx("div",{className:"w-full max-w-[420px] max-h-[90dvh] overflow-auto rounded-2xl",children:g.jsx(BH,{})}),g.jsx("button",{className:"fixed top-4 right-4 text-white text-2xl",onClick:()=>O(!1),children:""})]}),g.jsx(LTe,{open:a.openCustom,onClose:C,onSave:M},h),g.jsx(R$,{position:"top-center"}),g.jsx(she,{open:a.showSidebar,onClose:()=>a.setShowSidebar(!1),onView:j,onAddNew:l.openAdd,onEdit:l.handleSidebarEdit,onDeleteView:l.handleSidebarDeleteView,isLoggedIn:e}),_&&g.jsx("div",{className:"absolute w-full left-0 mt-14 desk:mt-16 text-xs desk:text-base text-amber-500 dark:text-amber-400 text-center",children:" .    ."}),u&&g.jsx(PNe,{}),k&&g.jsx(AX,{}),a.wizardOpen&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(Eie,{onSave:P,onClose:()=>a.setWizardOpen(!1)})})})]}),o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&g.jsxs("div",{className:"pt-16",children:[w&&g.jsx("div",{children:g.jsx(zNe,{})}),g.jsx("div",{className:"pb-4",children:g.jsx(Hse,{data:o.current,hourTable:o.current?.mingSikType??"/"})}),g.jsx(dTe,{ms:o.current}),g.jsx("div",{children:g.jsx(yfe,{data:o.current})}),b&&y&&i.showPromptBox&&g.jsx("div",{className:"max-w-[760px] mx-auto px-3 mt-6 mb-2",children:g.jsx(WNe,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"3868873416",heightPx:100,maxWidthPx:750,marginTopPx:10,fullWidthResponsive:!0,testMode:!1})}),i.showPromptBox&&g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(dNe,{ms:o.current,natal:o.isValidPillars(o.natal)?o.natal:[],chain:o.chain,basis:{voidBasis:o.voidBasis,samjaeBasis:o.samjaeBasis},includeTenGod:!0,lunarPillars:[]})}),b&&y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 pb-6",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(yu,{enabled:!0,adUnit:JNe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(yu,{enabled:!0,adUnit:XNe,width:320,height:50})})]})]}),a.showCouple&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(lTe,{people:r})}),b&&!y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 mt-1 mb-2",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(yu,{enabled:!0,adUnit:ZNe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(yu,{enabled:!0,adUnit:VNe,width:320,height:50})})]}),a.editing&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"overflow-auto bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(_he,{item:a.editing,onClose:()=>a.setEditing(null)})})}),g.jsx(Afe,{}),g.jsx(cTe,{})]})}function nOe(){const e=Hr(),[t,n]=S.useState(null),[r,i]=S.useState(null);return S.useEffect(()=>{if(e.pathname!=="/impersonate")return;const a=new URLSearchParams(e.search);n(a.get("userId")),i(a.get("myeongsikId"))},[e.pathname,e.search]),g.jsxs("div",{className:"p-4 text-white",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"Impersonate"}),g.jsxs("div",{className:"mt-2",children:["userId: ",t??"(none)"]}),g.jsxs("div",{className:"mt-1",children:["myeongsikId: ",r??"(none)"]})]})}function rOe(){const e=Hr(),t=rc(),n=S.useRef(!1),[r,i]=S.useState("  ...");return S.useEffect(()=>{(async()=>{try{console.log("[auth-callback] search =",e.search),console.log("[auth-callback] hash =",e.hash);const o=new URLSearchParams(e.search),l=e.hash.startsWith("#")?e.hash.slice(1):e.hash,u=l.indexOf("?"),d=new URLSearchParams(u>=0?l.slice(u+1):l),h=_=>o.get(_)??d.get(_),p=h("error"),b=h("error_description");if(p){i(` : ${decodeURIComponent(b??p)}`);return}const y=h("code");if(!y){const _=h("access_token"),T=h("refresh_token");if(!_||!T){i(" code . (redirectTo/PKCE  )");return}const{error:O}=await De.auth.setSession({access_token:_,refresh_token:T});if(O){i(`  : ${O.message}`);return}t("/",{replace:!0});return}if(n.current)return;n.current=!0;const{data:{session:k}}=await De.auth.getSession();if(k){t("/",{replace:!0});return}const{error:w}=await De.auth.exchangeCodeForSession(y);if(w){const{data:{session:_}}=await De.auth.getSession();if(_){t("/",{replace:!0});return}i(`  : ${w.message}`);return}t("/",{replace:!0})}catch(o){i(o instanceof Error?o.message:"   ")}})()},[e.search,t,e.hash]),g.jsx("main",{className:"min-h-screen flex items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:r})})}function iOe({yinYang:e,changing:t,onClick:n,showChanging:r=!0}){return g.jsxs("button",{type:"button",onClick:n,className:["w-full select-none","rounded-xl px-3 py-2","border border-neutral-200 dark:border-neutral-800","bg-white hover:bg-neutral-50 dark:bg-neutral-900 dark:hover:bg-neutral-800","flex items-center gap-3",n?"cursor-pointer":"cursor-default"].join(" "),title:n?"  (6789)":void 0,children:[g.jsx("div",{className:"flex-1",children:e===1?g.jsx("div",{className:"h-3 rounded bg-neutral-900 dark:bg-neutral-100"}):g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"}),g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"})]})}),r&&g.jsx("div",{className:"w-8 text-right text-sm font-medium text-neutral-700 dark:text-neutral-300",children:t?"":""})]})}function aOe(e){return e===6||e===9}function ew(e){return e===7||e===9?1:0}function GH(e){return e===6?1:e===9?0:ew(e)}function oOe(e){return e===6?7:e===7?8:e===8?9:6}function YH(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t>>>0}function qH(e){let t=e>>>0;return()=>{t+=1831565813;let n=t;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}}function KH(){return new Date().toISOString()}function WH(){const e=Date.now().toString(36),t=Math.floor(Math.random()*1e9).toString(36);return`ich_${e}_${t}`}function VH(e){const t=[];for(let n=0;n<e.length;n+=1)aOe(e[n].value)&&t.push(n+1);return t}function qE(e){const t=()=>e()<.5?2:3,n=t(),r=t(),i=t(),a=n+r+i;return{value:a===6?6:a===7?7:a===8?8:9,source:"coin",coins:[n,r,i]}}function sOe(e){return e?[e.myeongSikId?`id=${e.myeongSikId}`:"",e.pillarsText?`pillars=${e.pillarsText}`:"",e.birthISO?`birth=${e.birthISO}`:"",e.tz?`tz=${e.tz}`:"",e.luck?.daeun?`daeun=${e.luck.daeun}`:"",e.luck?.seun?`seun=${e.luck.seun}`:"",e.luck?.wolun?`wolun=${e.luck.wolun}`:"",e.luck?.ilun?`ilun=${e.luck.ilun}`:""].filter(Boolean).join("|"):""}const tN=["","","","","","","","","",""],nN=["","","","","","","","","","","",""];function Wl(e,t){const n=e%t;return n<0?n+t:n}function rN(e){const t=e-1984,n=tN[Wl(t,10)],r=nN[Wl(t,12)];return`${n}${r}`}function ZH(e,t){if(t<1||t>12)throw new Error(`month must be 1..12, got ${t}`);const n=Wl(e-1984,10),r=n===0||n===5?2:n===1||n===6?4:n===2||n===7?6:n===3||n===8?8:0,i=t===1?1:t===12?0:t,a=Wl(i-2,12),o=Wl(r+a,10),l=tN[o],u=nN[i];return`${l}${u}`}function lOe(e){const t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=Date.UTC(1984,0,31),a=Date.UTC(t,n,r),o=Math.floor((a-i)/864e5),l=Wl(o,60),u=tN[Wl(l,10)],d=nN[Wl(l,12)];return`${u}${d}`}function Ka(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function pa(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return null;const n=Number(t[1]),r=Number(t[2])-1,i=Number(t[3]);if(![n,r,i].every(o=>Number.isFinite(o)))return null;const a=new Date(n,r,i,9,0,0,0);return a.getFullYear()!==n||a.getMonth()!==r||a.getDate()!==i?null:a}function XH(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function Mu(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),9,0,0,0)}function iN(e,t){return e.getTime()<=t.getTime()?{start:e,end:t}:{start:t,end:e}}function r$(e,t){return e*100+t}function cOe(e,t){const n=[];let r=e.getFullYear(),i=e.getMonth()+1;const a=r$(t.getFullYear(),t.getMonth()+1);for(;r$(r,i)<=a;)n.push({y:r,m1:i}),i+=1,i===13&&(i=1,r+=1);return n}function uOe(e,t=10){const n=pa(e.startYMD)??Mu(),r=pa(e.endYMD)??Mu(),{start:i,end:a}=iN(n,r),o=i.getFullYear(),l=a.getFullYear(),u=[];for(let d=o;d<=l&&!(u.length>=t);d+=1){const h=new Date(d,5,15,9,0,0,0);u.push({year:d,refDateYMD:Ka(h),seun:rN(d)})}return u}function dOe(e,t=12,n=!1){const r=pa(e.startYMD)??Mu(),i=pa(e.endYMD)??Mu(),{start:a,end:o}=iN(r,i),l=cOe(a,o),u=[];for(const d of l){if(u.length>=t)break;if(n&&d.m1===1)continue;const h=new Date(d.y,d.m1-1,15,9,0,0,0),p=new Date(d.y,d.m1-1,15,12,0,0,0),b=ct(p)||rN(d.y),y=At(p)||ZH(d.y,d.m1);u.push({year:d.y,month:d.m1,refDateYMD:Ka(h),seun:b,wolun:y})}return u}function fOe(e,t=7){const n=pa(e.startYMD)??Mu(),r=pa(e.endYMD)??Mu(),{start:i,end:a}=iN(n,r),o=[];let l=new Date(i);for(;l.getTime()<=a.getTime()&&!(o.length>=t);){const u=l.getFullYear(),d=l.getMonth()+1,h=new Date(u,d-1,l.getDate(),12,0,0,0),p=ct(h)||rN(u),b=At(h)||ZH(u,d);o.push({dateYMD:Ka(l),seun:p,wolun:b,ilun:lOe(l)}),l=XH(l,1)}return o}function JH(e,t){const n=pa(t.startYMD)??Mu();if(e==="seun")return new Date(n.getFullYear(),5,15,9,0,0,0);if(e==="wolun"){const r=n.getFullYear(),i=n.getMonth()+1;return new Date(r,i-1,15,9,0,0,0)}return new Date(n.getFullYear(),n.getMonth(),n.getDate(),9,0,0,0)}function Mk(e,t){const n=JH(e,t),r=Ka(n);return e==="seun"?{tab:e,baseDateYMD:r,seun:uOe(t,10),wolun:[],ilun:[]}:e==="wolun"?{tab:e,baseDateYMD:r,seun:[],wolun:dOe(t,12,!1),ilun:[]}:{tab:e,baseDateYMD:r,seun:[],wolun:[],ilun:fOe(t,7)}}function QH(e){return e===7||e===9?1:0}const Ta={:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"111",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"110",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"101",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"100",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"011",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"010",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"001",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"000",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]}},hOe=[{n:1,ko:"",nameHanja:"",upper:"",lower:""},{n:2,ko:"",nameHanja:"",upper:"",lower:""},{n:3,ko:"",nameHanja:"",upper:"",lower:""},{n:4,ko:"",nameHanja:"",upper:"",lower:""},{n:5,ko:"",nameHanja:"",upper:"",lower:""},{n:6,ko:"",nameHanja:"",upper:"",lower:""},{n:7,ko:"",nameHanja:"",upper:"",lower:""},{n:8,ko:"",nameHanja:"",upper:"",lower:""},{n:9,ko:"",nameHanja:"",upper:"",lower:""},{n:10,ko:"",nameHanja:"",upper:"",lower:""},{n:11,ko:"",nameHanja:"",upper:"",lower:""},{n:12,ko:"",nameHanja:"",upper:"",lower:""},{n:13,ko:"",nameHanja:"",upper:"",lower:""},{n:14,ko:"",nameHanja:"",upper:"",lower:""},{n:15,ko:"",nameHanja:"",upper:"",lower:""},{n:16,ko:"",nameHanja:"",upper:"",lower:""},{n:17,ko:"",nameHanja:"",upper:"",lower:""},{n:18,ko:"",nameHanja:"",upper:"",lower:""},{n:19,ko:"",nameHanja:"",upper:"",lower:""},{n:20,ko:"",nameHanja:"",upper:"",lower:""},{n:21,ko:"",nameHanja:"",upper:"",lower:""},{n:22,ko:"",nameHanja:"",upper:"",lower:""},{n:23,ko:"",nameHanja:"",upper:"",lower:""},{n:24,ko:"",nameHanja:"",upper:"",lower:""},{n:25,ko:"",nameHanja:"",upper:"",lower:""},{n:26,ko:"",nameHanja:"",upper:"",lower:""},{n:27,ko:"",nameHanja:"",upper:"",lower:""},{n:28,ko:"",nameHanja:"",upper:"",lower:""},{n:29,ko:"",nameHanja:"",upper:"",lower:""},{n:30,ko:"",nameHanja:"",upper:"",lower:""},{n:31,ko:"",nameHanja:"",upper:"",lower:""},{n:32,ko:"",nameHanja:"",upper:"",lower:""},{n:33,ko:"",nameHanja:"",upper:"",lower:""},{n:34,ko:"",nameHanja:"",upper:"",lower:""},{n:35,ko:"",nameHanja:"",upper:"",lower:""},{n:36,ko:"",nameHanja:"",upper:"",lower:""},{n:37,ko:"",nameHanja:"",upper:"",lower:""},{n:38,ko:"",nameHanja:"",upper:"",lower:""},{n:39,ko:"",nameHanja:"",upper:"",lower:""},{n:40,ko:"",nameHanja:"",upper:"",lower:""},{n:41,ko:"",nameHanja:"",upper:"",lower:""},{n:42,ko:"",nameHanja:"",upper:"",lower:""},{n:43,ko:"",nameHanja:"",upper:"",lower:""},{n:44,ko:"",nameHanja:"",upper:"",lower:""},{n:45,ko:"",nameHanja:"",upper:"",lower:""},{n:46,ko:"",nameHanja:"",upper:"",lower:""},{n:47,ko:"",nameHanja:"",upper:"",lower:""},{n:48,ko:"",nameHanja:"",upper:"",lower:""},{n:49,ko:"",nameHanja:"",upper:"",lower:""},{n:50,ko:"",nameHanja:"",upper:"",lower:""},{n:51,ko:"",nameHanja:"",upper:"",lower:""},{n:52,ko:"",nameHanja:"",upper:"",lower:""},{n:53,ko:"",nameHanja:"",upper:"",lower:""},{n:54,ko:"",nameHanja:"",upper:"",lower:""},{n:55,ko:"",nameHanja:"",upper:"",lower:""},{n:56,ko:"",nameHanja:"",upper:"",lower:""},{n:57,ko:"",nameHanja:"",upper:"",lower:""},{n:58,ko:"",nameHanja:"",upper:"",lower:""},{n:59,ko:"",nameHanja:"",upper:"",lower:""},{n:60,ko:"",nameHanja:"",upper:"",lower:""},{n:61,ko:"",nameHanja:"",upper:"",lower:""},{n:62,ko:"",nameHanja:"",upper:"",lower:""},{n:63,ko:"",nameHanja:"",upper:"",lower:""},{n:64,ko:"",nameHanja:"",upper:"",lower:""}];function $v(e){const t=Object.keys(Ta);for(const n of t)if(Ta[n].bitsBottomUp===e)return n;return null}function mOe(e,t){return`${Ta[t].bitsBottomUp}${Ta[e].bitsBottomUp}`}const pOe=(()=>{const e={};for(const t of hOe){const n=Ta[t.upper],r=Ta[t.lower],i=mOe(t.upper,t.lower);e[i]={number:t.n,titleKo:t.ko,nameHanja:t.nameHanja,titleHanja:`${n.symbolHanja}${r.symbolHanja}${t.nameHanja}`,upperKo:n.ko,lowerKo:r.ko,upperHanja:n.hanja,lowerHanja:r.hanja,upperSymbolHanja:n.symbolHanja,lowerSymbolHanja:r.symbolHanja,bitsBottomUp:i}}return e})();function aN(e){const t=e.join(""),n=pOe[t];if(n)return n;const r=t.slice(0,3),i=t.slice(3,6),a=$v(r),o=$v(i),l=a?Ta[a]:null,u=o?Ta[o]:null;return{number:void 0,titleKo:"",nameHanja:"",titleHanja:u&&l?`${u.symbolHanja}${l.symbolHanja}`:"",upperKo:u?.ko,lowerKo:l?.ko,upperHanja:u?.hanja,lowerHanja:l?.hanja,upperSymbolHanja:u?.symbolHanja,lowerSymbolHanja:l?.symbolHanja,bitsBottomUp:t}}function KE(e){const t=e.map(n=>QH(n.value));return aN(t)}const i$={:[1,44,33,12,20,23,35,14],:[29,60,3,63,49,55,36,7],:[52,22,26,41,38,10,61,53],:[51,16,40,32,46,48,28,17],:[57,9,37,42,25,21,27,18],:[30,56,50,64,4,59,6,13],:[2,24,19,11,34,43,5,8],:[58,47,45,31,39,15,62,54]};function gOe(e){return e===0?"pure":e===1?"1":e===2?"2":e===3?"3":e===4?"4":e===5?"5":e===6?"youhun":"guihun"}function bOe(e){return e==="pure"?6:e==="1"?1:e==="2"?2:e==="3"?3:e==="4"?4:e==="5"?5:e==="youhun"?4:3}function yOe(e){return(e+2)%6+1}function vOe(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""||e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":null}function a$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function o$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function xOe(e,t){return t===e?"":a$(t,e)?"":a$(e,t)?"":o$(t,e)?"":o$(e,t)?"":""}function wOe(e){const t=Object.keys(i$);for(const n of t){const r=i$[n].indexOf(e);if(r>=0)return{palace:n,stage:gOe(r)}}return null}function _Oe(e){const t=e.join(""),n=t.slice(0,3),r=t.slice(3,6),i=$v(n),a=$v(r);if(!i||!a)return[];const o=Ta[i],u=Ta[a].naJiaUpperTopDown,d=o.naJiaLowerTopDown;return[...u,...d]}function WE(e){const t=e.map(k=>QH(k.value)),n=aN(t),r=typeof n.number=="number"?n.number:null,i=_Oe(t),a=r?wOe(r):null,o=a?.palace??null,l=o?Ta[o].element:null,u=a?.stage??"pure",d=bOe(u),h=yOe(d),p=7-d,b=7-h,y=[];if(i.length===6&&l)for(const k of i){const w=vOe(k);if(!w){y.push("");continue}y.push(xOe(l,w))}return{leftTopDown:y.length?y:[],rightTopDown:i.length?i:[],markers:[{text:"",atLineTopDown:p},{text:"",atLineTopDown:b}],palace:o?{key:o,element:Ta[o].element,stage:u}:void 0}}function Dk(e){const t=qH(YH(e)),n=[];for(let r=0;r<6;r+=1)n.push(qE(t));return n}function Pk(e,t,n,r,i){return{id:WH(),kind:"iching_sixyao",createdAtISO:KH(),question:e,seedTextUsed:t,linesBottomUp:n,changingLines:VH(n),baseBitsBottomUp:n.map(a=>ew(a.value)),changedBitsBottomUp:n.map(a=>GH(a.value)),saju:r??void 0,viewMeta:i}}function SOe(e){const{periodTab:t,seunPayload:n,wolunPayload:r,ilunPayload:i,questionText:a,sajuSeedPart:o,saju:l,viewMeta:u}=e,d=[];return t==="seun"&&n?.seun?.length&&n.seun.forEach(h=>{const p=` ${h.year} (${h.seun}`,b=`${a}::${h.refDateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=Dk(y),w=Pk(a,y,k,l,u);d.push({key:`seun-${h.year}`,title:p,dateYMD:h.refDateYMD,record:w})}),t==="wolun"&&r?.wolun?.length&&r.wolun.forEach(h=>{const p=String(h.month).padStart(2,"0"),b=` ${h.year}-${p} (${h.seun} ${h.wolun}`,y=`${a}::${h.refDateYMD}`,k=o?`${y}::SAJU::${o}`:y,w=Dk(k),_=Pk(a,k,w,l,u);d.push({key:`wolun-${h.year}-${p}`,title:b,dateYMD:h.refDateYMD,record:_})}),t==="ilun"&&i?.ilun?.length&&i.ilun.forEach(h=>{const p=` ${h.dateYMD} (${h.seun} ${h.wolun} ${h.ilun}`,b=`${a}::${h.dateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=Dk(y),w=Pk(a,y,k,l,u);d.push({key:`ilun-${h.dateYMD}`,title:p,dateYMD:h.dateYMD,record:w})}),d}function kOe(e){if(!e)return"  ";const t=[e.name?`: ${e.name}`:"",e.gender?`: ${e.gender}`:"",e.pillarsText?`: ${e.pillarsText}`:""].filter(Boolean);return t.length?t.join(`
`):"  "}function EOe(e,t){if(!e||!e.luck)return e;const{daeun:n,seun:r,wolun:i,ilun:a}=e.luck;return{...e,luck:t==="seun"?{daeun:n,seun:r}:t==="wolun"?{daeun:n,seun:r,wolun:i}:{daeun:n,seun:r,wolun:i,ilun:a}}}function jOe(e){const{selectedCardText:t,ready:n,periodCards:r,finalQuestion:i,question:a,baseBits:o,changedBits:l,changingIndexes:u,lineValues:d,lines:h,saju:p,periodTab:b}=e,y=(i.trim()||a.trim()).trim(),k=y||"( )";if(t&&t.trim())return[` : ${k}`,"",t.trim()].join(`
`);if(!n&&r.length===0)return"";const w=o.join(""),_=l.join(""),T=u.length?u.join(", "):"",O=d.join(", "),j=KE(h),C=aN(l),M=typeof j.number=="number"?String(j.number):"",P=j.titleKo||"",I=j.titleHanja||"?",U=j.nameHanja||"?",V=j.upperKo&&j.lowerKo?`${j.upperKo}/${j.lowerKo}`:"",q=j.upperHanja&&j.lowerHanja?`${j.upperHanja}/${j.lowerHanja}`:"",H=typeof C.number=="number"?String(C.number):"",B=C.upperKo&&C.lowerKo?`${C.upperKo}/${C.lowerKo}`:"",W=C.upperHanja&&C.lowerHanja?`${C.upperHanja}/${C.lowerHanja}`:"",Z=WE(h),X=Z.leftTopDown.length?Z.leftTopDown.join(" "):"()",G=Z.rightTopDown.length?Z.rightTopDown.join(" "):"()",J=Z.markers.length?Z.markers.map(ne=>`${ne.text}${ne.atLineTopDown}`).join(", "):"()",Q=kOe(p),oe=r.length>0?[" (  )",...r.flatMap((ne,re)=>{const ce=KE(ne.record.linesBottomUp),ue=WE(ne.record.linesBottomUp),ge=ne.record.baseBitsBottomUp.join(""),ke=ne.record.changedBitsBottomUp.join(""),ie=ne.record.changingLines.length?ne.record.changingLines.join(", "):"",Ae=ne.record.linesBottomUp.map(Ne=>Ne.value).join(", "),Ee=ce.titleKo||"",he=typeof ce.number=="number"?String(ce.number):"",Le=ue.leftTopDown.length?ue.leftTopDown.join(" "):"()",Ie=ue.rightTopDown.length?ue.rightTopDown.join(" "):"()",tt=ue.markers.length?ue.markers.map(Ne=>`${Ne.text}${Ne.atLineTopDown}`).join(", "):"()";return[`${re+1}. ${ne.title}`,`-  /: ${he}  ${Ee}`,`-  (): ${ge}`,`-  (): ${ke}`,`- : ${ie}`,`- (): ${Ae}`,`- (): ${Le}`,`- (): ${Ie}`,`- ///: ${tt}`]}),""]:[],le=n&&h.length===6?[" ()",`-  : ${M}`,`- (): ${P}`,`- (): ${I} (${U})`,`- / : ${V} (${q})`,""," ()",`-  : ${H}`,`- / : ${B} (${W})`,""," ",`-  (): ${w}`,`-  (): ${_}`,`- : ${T}`,`- (): ${O}`,`- (): ${X}`,`- (): ${G}`,`- ///: ${J}`,""]:[" ","- /   ",""],z=n&&r.length===0,K=z?EOe(p??null,b):null;return[" / .        .","",`: ${k}`,"",...le," ",Q,"",...z?["(JSON)",JSON.stringify(K??{},null,2),""]:[],"",...oe,"","-     ","-        ","-    "].join(`
`)}const s$=[`1.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`2.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`3.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`4.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`5.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`6.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`7.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`8.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`9.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`10.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`11.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`12.  () 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`13.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`14.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`15.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`16.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`17.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`18.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`19.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`20.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`21.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`22.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`23.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`24.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`25.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`26.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`27.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`28.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`29.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`30.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + () -  
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`31.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`32.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`33.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`34.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`35.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + () -  
2() - () + ()
() - () +  +  + ()`,`36.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`37.  
 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`38.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + () -  
() - () +  +  + ()`,`39.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`40.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`41.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`42.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`43.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`44.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`45.  () 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`46.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`47.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + () -  
2() - () + ()
() - () +  + ()`,`48.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`49.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + () -  `,`50.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`51.  () (() )  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`52. () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`53.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`54.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + () -  
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`55.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`56.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`57.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`58.  () (() ) 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + () -  
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`59.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`60.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`61.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`62.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`63.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`64.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`];function TOe({saju:e,viewMeta:t,initialQuestion:n="",onBaseDateChange:r}){const[i,a]=S.useState(n),[o,l]=S.useState(""),[u,d]=S.useState("all"),[h,p]=S.useState("seun"),[b,y]=S.useState(()=>{const Ce=new Date,at=new Date(Ce.getFullYear(),0,1,9,0,0,0),Bt=new Date(Ce.getFullYear()+9,11,31,9,0,0,0);return{startYMD:Ka(at),endYMD:Ka(Bt)}}),[k,w]=S.useState(()=>{const Ce=new Date,at=new Date(Ce.getFullYear(),Ce.getMonth(),1,9,0,0,0),Bt=new Date(at);return Bt.setMonth(Bt.getMonth()+11),{startYMD:Ka(at),endYMD:Ka(Bt)}}),[_,T]=S.useState(()=>{const Ce=new Date,at=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate(),9,0,0,0),Bt=XH(at,6);return{startYMD:Ka(at),endYMD:Ka(Bt)}}),[O,j]=S.useState([]),[C,M]=S.useState(null),[P,I]=S.useState([]),[U,V]=S.useState(!1),[q,H]=S.useState(!1),[B,W]=S.useState(null),Z=S.useRef(null),X=S.useRef(null),G=S.useRef(null);S.useEffect(()=>{a(n),l(n)},[n]),S.useEffect(()=>{I([])},[h,b.startYMD,b.endYMD,k.startYMD,k.endYMD,_.startYMD,_.endYMD]),S.useEffect(()=>{if(!B)return;const Ce=window.setTimeout(()=>W(null),2200);return()=>window.clearTimeout(Ce)},[B]);const J=S.useMemo(()=>{const Ce=pa(b.startYMD);if(Ce&&Ce.getMonth()===0){const at=new Date(Ce.getFullYear(),1,1,9,0,0,0);return{...b,startYMD:Ka(at)}}return b},[b]),Q=h,oe=S.useMemo(()=>Q?JH(Q,Q==="seun"?J:Q==="wolun"?k:_):new Date,[Q,_,J,k]);S.useEffect(()=>{r&&r(oe??null)},[oe,r]);const le=S.useMemo(()=>sOe(e),[e]),z=S.useMemo(()=>`${o.trim()}::${oe.toISOString()}`,[oe,o]),K=S.useMemo(()=>le?`${z}::SAJU::${le}`:z,[z,le]),ne=S.useMemo(()=>{const Ce=YH(K);return qH(Ce)},[K]),re=S.useMemo(()=>h==="seun"?Mk("seun",J):null,[h,J]),ce=S.useMemo(()=>h==="wolun"?Mk("wolun",k):null,[h,k]),ue=S.useMemo(()=>h==="ilun"?Mk("ilun",_):null,[h,_]),ge=S.useMemo(()=>{const Ce=pa(b.startYMD);return Ce?String(Ce.getFullYear()):""},[b.startYMD]),ke=S.useMemo(()=>{const Ce=pa(b.endYMD);return Ce?String(Ce.getFullYear()):""},[b.endYMD]),ie=S.useMemo(()=>{const Ce=pa(k.startYMD);if(!Ce)return"";const at=String(Ce.getMonth()+1).padStart(2,"0");return`${Ce.getFullYear()}-${at}`},[k.startYMD]),Ae=S.useMemo(()=>{const Ce=pa(k.endYMD);if(!Ce)return"";const at=String(Ce.getMonth()+1).padStart(2,"0");return`${Ce.getFullYear()}-${at}`},[k.endYMD]),Ee=S.useMemo(()=>{if(h==="seun"){const Ce=re?.seun[0];return Ce?` ${Ce.year} - ${Ce.seun}`:""}if(h==="wolun"){const Ce=ce?.wolun[0];if(!Ce)return"";const at=String(Ce.month).padStart(2,"0");return` ${Ce.year}-${at} - ${Ce.seun} ${Ce.wolun}`}if(h==="ilun"){const Ce=ue?.ilun[0];return Ce?` ${Ce.dateYMD} - ${Ce.seun} ${Ce.wolun} ${Ce.ilun}`:""}return""},[h,re,ce,ue]),he=S.useCallback((Ce,at,Bt)=>{Ce(_r=>({..._r,[at]:Bt}))},[]),Le=S.useCallback((Ce,at)=>{if(!at)return;const Bt=Number(at);if(!Number.isFinite(Bt))return;const _r=Math.trunc(Bt);y(ni=>({...ni,[Ce]:`${_r}-06-15`}))},[]),Ie=S.useCallback((Ce,at)=>{if(!at)return;const Bt=/^(\d{4})-(\d{2})$/.exec(at);Bt&&w(_r=>({..._r,[Ce]:`${Bt[1]}-${Bt[2]}-15`}))},[]),tt=O.length===6,Ne=S.useMemo(()=>O.map(Ce=>ew(Ce.value)),[O]),Be=S.useMemo(()=>O.map(Ce=>GH(Ce.value)),[O]),Ue=S.useMemo(()=>VH(O),[O]),nt=S.useMemo(()=>O.map(Ce=>Ce.value),[O]),ut=O.length>0||!!C,yt=P.length>0,se=o.trim().length>0,Oe=!se||q||yt||tt,Ye=!se||U||ut||yt||q,qe=S.useCallback(()=>{window.setTimeout(()=>{Z.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),Tt=S.useCallback(()=>{window.setTimeout(()=>{X.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),ht=S.useCallback(()=>{j([]),M(null),I([]),V(!1),H(!1),W(null)},[]),Me=S.useCallback(()=>o.trim()?!0:(alert("  !"),window.setTimeout(()=>{G.current?.focus()},0),!1),[o]),ze=S.useCallback(()=>{if(!Me()||Oe)return;V(!0);let Ce=0;j(at=>at.length>=6?at:(Ce=at.length+1,[...at,qE(ne)])),window.setTimeout(()=>{if(V(!1),Ce>=6){qe();return}Ce>0&&W(`${Ce}  !  ${Ce+1} ?`)},350)},[Me,Oe,ne,qe]),Xe=S.useCallback(()=>{if(!Me()||Oe)return;V(!0);const Ce=[];for(let at=0;at<6;at+=1)Ce.push(qE(ne));j(Ce),window.setTimeout(()=>{V(!1),qe()},350)},[Me,Oe,ne,qe]),vt=S.useMemo(()=>{if(O.length!==6)return"";const Ce=KE(O);if(typeof Ce.number!="number")return"";const at=Ce.number-1;return at<0||at>=s$.length?"":s$[at]??""},[O]),Ot=S.useCallback(Ce=>{j(at=>{if(Ce<0||Ce>=at.length)return at;const Bt=[...at],_r=Bt[Ce];return Bt[Ce]={value:oOe(_r.value),source:"manual"},Bt})},[]),$t=S.useCallback(()=>{if(O.length!==6)return;const Ce=(o.trim()||i.trim()).trim(),at={id:WH(),kind:"iching_sixyao",createdAtISO:KH(),question:Ce,seedTextUsed:K,linesBottomUp:O,changingLines:Ue,baseBitsBottomUp:Ne,changedBitsBottomUp:Be,saju:e??void 0,viewMeta:t};M(at)},[Ne,Be,Ue,K,o,O,i,e,t]);S.useEffect(()=>{O.length===6&&$t()},[$t,O.length]);const Ht=S.useMemo(()=>[{value:7,source:"manual"}].concat(Array.from({length:5},()=>({value:7,source:"manual"}))),[]),wn=S.useCallback(()=>{if(!Me()||Ye)return;H(!0);const Ce=(o.trim()||i.trim()).trim(),at=SOe({periodTab:h,seunPayload:re,wolunPayload:ce,ilunPayload:ue,questionText:Ce,sajuSeedPart:le,saju:e,viewMeta:t});I(at),window.setTimeout(()=>{H(!1),Tt()},400)},[Me,Ye,o,ue,h,i,e,le,re,t,ce,Tt]),Tn=S.useMemo(()=>jOe({selectedCardText:vt,ready:tt,periodCards:P,finalQuestion:o,question:i,baseBits:Ne,changedBits:Be,changingIndexes:Ue,lineValues:nt,lines:O,saju:e,periodTab:h}),[vt,tt,P,o,i,Ne,Be,Ue,nt,O,e,oe,re,ce,ue,h]),Ca=S.useCallback(async()=>{if(Tn)try{await navigator.clipboard.writeText(Tn),alert("  !")}catch{alert("  .   .")}},[Tn]),zn=S.useMemo(()=>{if(!tt)return null;const Ce=WE(O),at=Ce.leftTopDown.join(" "),Bt=Ce.rightTopDown.join(" "),_r=Ce.markers.map(ni=>`${ni.text}${ni.atLineTopDown}`).join(", ");return{liuQin:at,zhi:Bt,marks:_r}},[O,tt]);return{saju:e,question:i,setQuestion:a,finalQuestion:o,setFinalQuestion:l,questionInputRef:G,drawMode:u,setDrawMode:d,periodTab:h,setPeriodTab:p,seunRange:b,setSeunRange:y,wolunRange:k,setWolunRange:w,ilunRange:_,setIlunRange:T,seunStartYear:ge,seunEndYear:ke,wolunStartYM:ie,wolunEndYM:Ae,activePeriodLabel:Ee,onRangeChange:he,onSeunYearChange:Le,onWolunMonthChange:Ie,ready:tt,baseBits:Ne,changedBits:Be,changingIndexes:Ue,lineValues:nt,autoSideSummary:zn,selectedCardText:vt,drawOne:ze,drawAll:Xe,reset:ht,onEditLine:Ot,lines:O,record:C,periodCards:P,placeholderLines:Ht,copyPrompt:Ca,isDrawing:U,isPeriodDrawing:q,toast:B,disableSingleDraw:Oe,disablePeriodDraw:Ye,resultRef:Z,periodCardsRef:X,buildPeriodCards:wn}}const AOe="DAN-GW4jrUdfiXklZ12U",NOe="DAN-CeRuC0yKzSAs5Gju";function OOe(e){const{saju:t,question:n,setQuestion:r,finalQuestion:i,setFinalQuestion:a,questionInputRef:o,drawMode:l,setDrawMode:u,lines:d,isDrawing:h,disableSingleDraw:p,selectedCardText:b,drawOne:y,drawAll:k,reset:w,copyPrompt:_,toast:T,resultRef:O}=TOe(e),j=b?b.split(/\r?\n/):[],C=j[0]??"",M=j.slice(1).join("\\n").trim(),P=d.length?[...d].reverse():[],I=j.map(U=>U.trim()).map(U=>{const V=/^(|5|4|3|2|)\((|)\)\s*-\s*(.+)$/.exec(U);if(!V)return null;const q=V[1],H=V[2],B=//.test(V[3]),Z=V[3].replace(/\s*-\s*\s*?/g,"").trim().split(" + ").map(Q=>Q.trim()).filter(Boolean),X=Z.filter(Q=>Q===""||Q===""||Q===""||Q===""),G=Z.find(Q=>/\([]\)/.test(Q))??"",J=Z.find(Q=>/\(.+\)/.test(Q)&&Q!==G)??"";return{label:q,yinYang:H,liuQin:J,zhi:G,markers:X,hasDonghyo:B}}).filter(Boolean);return g.jsxs("div",{className:"w-full max-w-[768px] mx-auto pb-12 desk:pb-4 p-4",children:[g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"   ,     ."}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),t?g.jsxs("div",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.name?t.name:" ",t.gender?`  ${t.gender}`:""]}),t.pillarsText?g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.pillarsText]}):null]}):g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),g.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[g.jsxs("label",{className:"block",children:[g.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200",children:""}),g.jsx("textarea",{ref:o,value:n,onChange:U=>r(U.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm outline-none focus:border-neutral-400 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",placeholder:"      !"})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("button",{type:"button",onClick:()=>a(n.trim()),className:"rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:" "}),g.jsxs("span",{children:[" : ",i.trim()?i:""]})]}),g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="all",onChange:()=>u("all")})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="step",onChange:()=>u("step")})," "]})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:l==="all"?k:y,disabled:p||h,className:"rounded-xl bg-neutral-900 px-4 py-2 text-sm font-semibold text-white hover:bg-neutral-800 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-200 cursor-pointer",children:l==="all"?" ":`1  (${d.length}/6)`}),g.jsx("button",{type:"button",onClick:w,className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:""}),h?g.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("span",{children:" "}),g.jsx("span",{className:"animate-pulse",children:"..."})]}):null]})]})]}),g.jsxs("div",{className:"mt-4",ref:O,children:[g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(yu,{enabled:!0,adUnit:NOe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(yu,{enabled:!0,adUnit:AOe,width:320,height:50})})]}),b?g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-gradient-to-b from-amber-50 to-white p-4 shadow-sm dark:border-neutral-800 dark:from-neutral-900 dark:to-neutral-950",children:g.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[g.jsxs("div",{className:"w-full md:w-[180px]",children:[g.jsx("div",{className:"rounded-xl border border-amber-200 bg-white px-3 py-2 text-sm font-semibold text-amber-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",children:C}),g.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-white px-3 py-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("div",{className:"mt-2 flex flex-col gap-2",children:P.map((U,V)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:6-V}),g.jsx(iOe,{yinYang:ew(U.value),changing:!1,showChanging:!1})]},`line-${V}`))})]})]}),g.jsxs("div",{className:"flex-1 rounded-xl border border-amber-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"space-y-2",children:(I.length?I:[]).map(U=>g.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-amber-100 bg-amber-50/50 px-3 py-2 text-sm dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:[U.label," (",U.yinYang,")"]}),g.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-300",children:[U.liuQin||"-"," ",U.zhi?`  ${U.zhi}`:""]})]}),g.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px] font-semibold text-amber-900 dark:text-neutral-200",children:[U.hasDonghyo&&g.jsx("span",{className:"rounded border border-red-200 bg-red-50 px-1.5 py-0.5 text-red-600 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-300",children:""}),U.markers.map(V=>g.jsx("span",{className:"rounded border border-amber-200 bg-white px-1.5 py-0.5 dark:border-neutral-700 dark:bg-neutral-900",children:V},`${U.label}-${V}`))]})]},U.label))}),!I.length&&g.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-sm text-neutral-800 dark:text-neutral-100",children:M})]})]})}):g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"   ."})]}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsx("div",{className:"mt-1 text-xs text-neutral-600 dark:text-neutral-400",children:"   AI    ."}),b?g.jsx("button",{type:"button",onClick:_,className:"mt-3 w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:"AI   "}):g.jsx("div",{className:"mt-3 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),T?g.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 w-[90%] max-w-sm -translate-x-1/2",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-900 shadow-lg dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",children:T})}):null]})}const COe="DAN-INfSKh1pW2cEtWNu";function Bb(e){return!e?.stem||!e?.branch?"":`${e.stem}${e.branch}`}function MOe(e){const t=[e.year?`${e.year}`:"",e.month?`${e.month}`:"",e.day?`${e.day}`:"",e.hour?`${e.hour}`:""].filter(Boolean);return t.length?t.join(" "):""}function Rk(e){if(typeof e!="string")return!1;const t=e.trim();return t===""||t===""||t===""||t==="self"||t===""||t===""}function DOe({current:e}){const t=Cy(h=>h.useDST),n=e.mingSikType,r=S.useMemo(()=>A2(e,t),[e,t]),[i,a]=S.useState(null),o=Qr(h=>h.date),l=lx(e,n,i??o??void 0),u=S.useMemo(()=>{const h={year:Bb(r.year),month:Bb(r.month),day:Bb(r.day),hour:Bb(r.hour)},p=e.ganjiText?.trim()||e.ganji?.trim()||MOe(h),b={daeun:l.dae.gz||void 0,seun:l.se.gz||void 0,wolun:l.wol.gz||void 0,ilun:l.il.gz||void 0};return{name:e.name||void 0,gender:e.gender||void 0,pillarsText:p,pillars:h,luck:b}},[e,l,r]),d=S.useMemo(()=>({sourceRoute:"/iching",currentId:e.id,currentName:e.name??null}),[e.id,e.name]);return g.jsx("div",{className:"py-2",children:g.jsx(OOe,{saju:u,viewMeta:d,onBaseDateChange:a},e.id)})}function POe(){const e=En(w=>w.list),t=En(w=>w.loading),n=En(w=>w.currentId),r=En(w=>w.setCurrentId),i=rc(),a=S.useRef(!1),[o,l]=S.useState(!1),u=S.useRef(!1),d=bn(w=>w.shouldShowAdsNow()),h=S.useMemo(()=>e.find(_=>Rk(_.relationship))?.id??null,[e]);S.useEffect(()=>{if(t||e.length===0)return;const w=h??e[0]?.id??null;if(!a.current){w&&n!==w&&r(w),a.current=!0;return}n&&!e.some(_=>_.id===n)&&w&&r(w)},[t,e,n,h,r]),S.useEffect(()=>{t&&l(!0)},[t]);const p=S.useMemo(()=>e.find(w=>w.id===n)??null,[e,n]),b=S.useMemo(()=>p||(e.find(_=>Rk(_.relationship))??e[0]??null),[p,e]),y=S.useMemo(()=>{const w=e.find(_=>Rk(_.relationship));return w?[w,...e.filter(_=>_.id!==w.id)]:e},[e]);S.useEffect(()=>{o&&(t||e.length>0||u.current||(u.current=!0,alert("   .  ."),i("/",{replace:!0})))},[o,e.length,t,i]),S.useEffect(()=>{let w=!0;De.auth.getSession().then(({data:T})=>{w&&(T.session?.user||i("/",{replace:!0}))});const{data:_}=De.auth.onAuthStateChange((T,O)=>{O?.user||i("/",{replace:!0})});return()=>{w=!1,_.subscription.unsubscribe()}},[i]);const k=S.useMemo(()=>n||h||(e[0]?.id??""),[n,h,e]);return g.jsxs("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-950",children:[g.jsx(IH,{enabled:d}),d&&g.jsx(FH,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx($H,{enabled:d,adUnit:COe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsxs("div",{className:"w-full max-w-[768px] mx-auto px-4 pt-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"    ."})]}),g.jsx(rj,{to:"/",className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800",children:""})]}),e.length>0&&g.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("select",{className:"w-full sm:w-[320px] rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",value:k,onChange:w=>{const _=w.target.value;_&&r(_)},children:[g.jsx("option",{value:"",disabled:!0,children:""}),y.map(w=>g.jsx("option",{value:w.id,children:w.name?.trim()?w.name:" "},w.id))]})]})]}),t&&e.length===0&&g.jsx("div",{className:"w-full max-w-[768px] mx-auto px-4 py-10",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400",children:" .."})}),b&&g.jsx(DOe,{current:b})]})}function ROe(e){return typeof e=="object"&&e!==null}function LOe(e){if(!ROe(e))return null;const t=typeof e.ok=="boolean"?e.ok:void 0,n=typeof e.total_active_ms=="number"?e.total_active_ms:void 0,r=typeof e.upgraded_to_basic=="boolean"?e.upgraded_to_basic:void 0;return{ok:t,total_active_ms:n,upgraded_to_basic:r}}function eG({enabled:e=!0,intervalMs:t=6e4,path:n,onBasicUnlocked:r,onTotalActiveMs:i}){const a=S.useRef(!1),o=S.useRef(""),l=S.useRef(!1),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),p=S.useRef(0);return S.useEffect(()=>{o.current=n??""},[n]),S.useEffect(()=>{let b=null;return(async()=>{const{data:k}=await De.auth.getSession();u.current=k.session?.user?.id??null;const _=De.auth.onAuthStateChange((T,O)=>{u.current=O?.user?.id??null,l.current=!1}).data?.subscription;_&&typeof _.unsubscribe=="function"&&(b=()=>_.unsubscribe())})(),()=>{b&&b()}},[]),S.useEffect(()=>{if(!e)return;const b=async w=>{if(document.visibilityState!=="visible")return;const _=Date.now();if(!(w!=="init"&&_-p.current<1e4)&&(p.current=_,!a.current)){a.current=!0;try{if(!u.current)return;const O=o.current||null,{data:j,error:C}=await De.rpc("ping_activity",{p_last_path:O});if(C)return;const M=LOe(j);if(!M)return;typeof M.total_active_ms=="number"&&i?.(M.total_active_ms),M.upgraded_to_basic===!0&&!l.current&&(l.current=!0,r?.())}finally{a.current=!1}}};b("init");const y=Math.floor(Math.random()*5e3);h.current=window.setTimeout(()=>{b("interval"),d.current=window.setInterval(()=>void b("interval"),t)},y);const k=()=>{document.visibilityState==="visible"&&b("visible")};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k),h.current!==null&&(window.clearTimeout(h.current),h.current=null),d.current!==null&&(window.clearInterval(d.current),d.current=null)}},[e,t,r,i]),null}function IOe(){const e=En(a=>a.loadFromServer),t=En(a=>a.migrateLocalToServer),n=tn(a=>a.loadFromServer),r=bn(a=>a.loadFromServer),i=S.useCallback(async()=>{await t(),await Promise.all([r(),n(),e()])},[t,r,n,e]);return S.useEffect(()=>{i();const{data:a}=De.auth.onAuthStateChange(o=>{o==="TOKEN_REFRESHED"||o==="INITIAL_SESSION"||i()});return()=>{a.subscription.unsubscribe()}},[i]),null}function $Oe(e){try{const t=localStorage.getItem(e);if(!t)return 0;const n=Number(t);return Number.isFinite(n)?n:0}catch{return 0}}function BOe(e,t){try{localStorage.setItem(e,String(t))}catch{}}function zOe(e){return e<=0?0:Math.floor(Math.random()*e)}function UOe({enabled:e=!0,href:t="https://open.kakao.com/o/sjBRz57h",hintTexts:n=["    !"," .",",  ."," ,   ,  !","  !  ! "],hideHintHours:r=24,cycleMs:i=4200,mobilePaddingX:a=0,bottomDockCssVarName:o="--bottom-dock"}){const l=S.useMemo(()=>"kakao_chat_hint_hide_until",[]),[u,d]=S.useState(!1),[h,p]=S.useState(()=>zOe(n.length)),b=S.useRef(null),y=S.useCallback(_=>{if(typeof document>"u")return;const T=`${Math.max(0,Math.floor(_))}px`;document.documentElement.style.setProperty(o,T)},[o]);if(S.useEffect(()=>{if(n.length<=0){p(0);return}p(_=>_%n.length)},[n.length]),S.useEffect(()=>{if(!e){d(!1);return}const _=$Oe(l),T=Date.now();if(_>T){d(!1);return}const O=window.setTimeout(()=>d(!0),900);return()=>window.clearTimeout(O)},[e,l]),S.useEffect(()=>{if(!e||!u||n.length<=1)return;const _=window.setInterval(()=>{p(T=>T+1>=n.length?0:T+1)},i);return()=>window.clearInterval(_)},[e,u,n.length,i]),S.useEffect(()=>{if(!e||!u){y(0);return}const _=b.current;if(!_){y(0);return}const T=()=>{const O=Math.ceil(_.getBoundingClientRect().height);y(O)};if(T(),typeof ResizeObserver<"u"){const O=new ResizeObserver(T);return O.observe(_),()=>{O.disconnect(),y(0)}}return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T),y(0)}},[e,u,y]),!e)return null;const k=()=>{BOe(l,Date.now()+r*60*60*1e3),d(!1),y(0)},w=n[h]??"";return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:`
        @keyframes hintFadeCycle {
          0%   { opacity: 0; transform: translate3d(0, 6px, 0); }
          14%  { opacity: 1; transform: translate3d(0, 0, 0); }
          78%  { opacity: 1; transform: translate3d(0, 0, 0); }
          100% { opacity: 0; transform: translate3d(0, -2px, 0); }
        }
      `}),u&&n.length>0?g.jsx("div",{ref:b,className:"desk:hidden fixed left-0 right-0 bottom-0 z-[99] pointer-events-none",style:{paddingLeft:a,paddingRight:a,paddingBottom:0},children:g.jsxs("div",{className:"pointer-events-auto w-full border border-neutral-700 bg-neutral-900/95 text-white shadow-lg",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:10,padding:"4px 8px"},children:[g.jsx("div",{className:"min-w-0 text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},title:w,children:w}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("button",{type:"button",onClick:k,"aria-label":" ",title:"",className:"w-8 h-8 rounded-full bg-neutral-800 border border-neutral-700 text-[14px] flex items-center justify-center hover:bg-neutral-700",children:g.jsx(yy,{})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`w-8 h-8 rounded-full bg-neutral-800 hover:bg-neutral-700 border border-neutral-700
                           flex items-center justify-center transition-colors`,children:g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}):null,g.jsxs("div",{className:"hidden desk:block fixed right-5 bottom-5 z-[999]",children:[u&&n.length>0&&g.jsx("div",{className:"absolute bottom-14 right-0 w-max max-w-[260px]",children:g.jsxs("div",{className:"relative rounded-xl bg-neutral-900 text-white border border-neutral-700 shadow-lg px-3 py-2 text-xs whitespace-pre-line",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},children:[w,g.jsx("button",{type:"button",onClick:k,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-neutral-800 border border-neutral-700 text-[12px] flex items-center justify-center hover:bg-neutral-700 cursor-pointer","aria-label":" ",title:"",children:g.jsx(yy,{size:12})}),g.jsx("div",{className:"absolute -bottom-2 right-4 w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-neutral-900"})]})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`flex items-center justify-center w-12 h-12 rounded-full shadow-lg
                     bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 transition-colors`,children:g.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}function FOe(e){const t=["#F87171","#FBBF24","#34D399","#60A5FA","#A78BFA","#F472B6"],n=[];for(let r=0;r<e;r+=1)n.push({leftPct:Math.random()*100,size:6+Math.floor(Math.random()*8),delayMs:Math.floor(Math.random()*300),durationMs:1200+Math.floor(Math.random()*900),rotate:Math.floor(Math.random()*360),driftPx:-40+Math.floor(Math.random()*80),color:t[r%t.length]});return n}function HOe({open:e,onClose:t}){const n=S.useMemo(()=>FOe(48),[]);return S.useEffect(()=>{if(!e)return;const r=a=>{a.key==="Escape"&&t()};window.addEventListener("keydown",r);const i=window.setTimeout(()=>t(),6e3);return()=>{window.removeEventListener("keydown",r),window.clearTimeout(i)}},[e,t]),e?g.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center",children:[g.jsx("style",{children:`
        @keyframes confettiFall {
          0%   { transform: translate3d(var(--dx), -20px, 0) rotate(var(--rot)); opacity: 0; }
          10%  { opacity: 1; }
          100% { transform: translate3d(var(--dx), 560px, 0) rotate(calc(var(--rot) + 360deg)); opacity: 0; }
        }
        @keyframes pop {
          0% { transform: scale(0.98); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
      `}),g.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:n.map((r,i)=>{const a={position:"absolute",top:0,left:`${r.leftPct}%`,width:r.size,height:Math.max(8,r.size+6),background:r.color,borderRadius:2,transform:`rotate(${r.rotate}deg)`,animation:`confettiFall ${r.durationMs}ms ease-out ${r.delayMs}ms forwards`,"--dx":`${r.driftPx}px`,"--rot":`${r.rotate}deg`};return g.jsx("span",{style:a},i)})}),g.jsxs("div",{className:`relative w-[92%] max-w-[420px] rounded-2xl bg-white dark:bg-neutral-950
                   border border-neutral-200 dark:border-neutral-800 shadow-xl p-5`,style:{animation:"pop 160ms ease-out"},children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl mb-2",children:""}),g.jsx("div",{className:"text-xl font-extrabold text-neutral-900 dark:text-neutral-50",children:"BASIC  !"}),g.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:"     ! "})]}),g.jsx("div",{className:"mt-4 flex justify-center gap-2",children:g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-neutral-900 text-white hover:bg-neutral-800 cursor-pointer",children:""})})]})]}):null}function l$(e){if(typeof e!="string")return"FREE";const t=e.toUpperCase();return t==="BASIC"?"BASIC":t==="PRO"?"PRO":"FREE"}function GOe(){const e=Hr(),t=e.pathname+e.search,n=!e.pathname.startsWith("/admin")&&!e.pathname.startsWith("/impersonate")&&!e.pathname.startsWith("/auth/callback"),[r,i]=S.useState(!1),a=bn(b=>b.loaded),o=bn(b=>b.loading),l=bn(b=>b.userId),u=bn(b=>l$(b.plan)),d=S.useRef(!1);S.useEffect(()=>{n&&(a||o||bn.getState().loadFromServer())},[n,a,o]);const h=S.useCallback(async()=>{if(d.current)return;d.current=!0;const{data:b,error:y}=await De.rpc("mark_basic_celebrated");if(y){console.warn("[basic celebration] rpc error:",y.message);return}b===!0&&i(!0)},[]);S.useEffect(()=>{n&&a&&l&&u==="BASIC"&&h()},[n,a,l,u,h]);const p=S.useCallback(()=>{(async()=>(await bn.getState().loadFromServer(),l$(bn.getState().plan)==="BASIC"&&(d.current=!1,await h())))()},[h]);return g.jsxs(g.Fragment,{children:[g.jsx(eG,{enabled:n,path:t,onBasicUnlocked:p}),g.jsx(UOe,{enabled:n}),g.jsx(HOe,{open:r,onClose:()=>i(!1)})]})}function YOe(e){return typeof e=="object"&&e!==null}function qOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!YOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}function KOe(){const e=rc(),t=Hr(),n=S.useRef(!1);return S.useEffect(()=>{const r=async()=>{if(!n.current){n.current=!0;try{const{data:o}=await De.auth.getSession(),l=o.session?.user?.id??null;if(!l)return;const{data:u,error:d}=await De.rpc("get_my_account_status");if(!d){!!qOe(u)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0});return}const{data:h,error:p}=await De.from("profiles").select("disabled_at").eq("user_id",l).maybeSingle();if(p)return;(h?.disabled_at??null)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0})}finally{n.current=!1}}};r();const{data:i}=De.auth.onAuthStateChange(()=>{r()}),a=()=>{document.visibilityState==="visible"&&r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a),i.subscription.unsubscribe()}},[e,t.pathname]),null}function WOe(e){return typeof e=="object"&&e!==null}function VOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!WOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}const ZOe=Ko((e,t)=>({loaded:!1,loading:!1,userId:null,disabledAt:null,reset:()=>{e({loaded:!0,loading:!1,userId:null,disabledAt:null})},loadFromServer:async n=>{if(!t().loading){e({loading:!0,userId:n});try{const{data:i,error:a}=await De.rpc("get_my_account_status");if(!a){const d=VOe(i);e({loaded:!0,loading:!1,disabledAt:d});return}const{data:o,error:l}=await De.from("profiles").select("disabled_at").eq("user_id",n).maybeSingle();if(l){console.error("[accountStatus] load error:",l),e({loaded:!0,loading:!1,disabledAt:null});return}const u=o?.disabled_at??null;e({loaded:!0,loading:!1,disabledAt:typeof u=="string"?u:null})}catch(i){console.error("[accountStatus] exception:",i),e({loaded:!0,loading:!1,disabledAt:null})}}}}));function XOe(e){if(!e)return"-";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toLocaleString():e}function JOe(){const e=ZOe(n=>n.disabledAt),t=S.useCallback(async()=>{try{await De.auth.signOut(),window.location.href="/"}catch(n){console.error("signOut error:",n),window.location.href="/"}},[]);return g.jsx("main",{className:"min-h-screen flex items-center justify-center p-6 text-white",children:g.jsxs("div",{className:"w-full max-w-[520px] bg-neutral-900 border border-neutral-700 rounded-xl p-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-3",children:" "}),g.jsxs("div",{className:"text-sm text-neutral-300 leading-6",children:["        .",g.jsx("span",{className:"font-semibold text-neutral-100",children:XOe(e)})]}),g.jsx("div",{className:"mt-5 p-3 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-300",children:"    ."}),g.jsxs("div",{className:"mt-6 flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 rounded bg-blue-700 hover:bg-blue-600 cursor-pointer",children:""})]})]})})}function QOe(){const e=Hr();return S.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),g.jsxs(g.Fragment,{children:[g.jsx(IOe,{}),g.jsx(GOe,{}),g.jsx(KOe,{}),g.jsx(eG,{}),g.jsxs(vq,{children:[g.jsx(Ha,{path:"/auth/callback",element:g.jsx(rOe,{})}),g.jsx(Ha,{path:"/disabled",element:g.jsx(JOe,{})}),g.jsx(Ha,{path:"/iching",element:g.jsx(POe,{})}),g.jsx(Ha,{path:"/",element:g.jsx($b,{})}),g.jsx(Ha,{path:"/faq",element:g.jsx($b,{})}),g.jsx(Ha,{path:"/couple",element:g.jsx($b,{})}),g.jsx(Ha,{path:"/result",element:g.jsx($b,{})}),g.jsx(Ha,{path:"/admin/*",element:g.jsx(rH,{})}),g.jsx(Ha,{path:"/impersonate",element:g.jsx(nOe,{})}),g.jsx(Ha,{path:"*",element:g.jsx(bq,{to:"/",replace:!0})})]})]})}EY.createRoot(document.getElementById("root")).render(g.jsx(Fq,{children:g.jsx(QOe,{})}));
