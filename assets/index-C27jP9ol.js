function hE(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function pl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Td(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var dg={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function gO(){if(Ow)return Iu;Ow=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=t,Iu.jsx=n,Iu.jsxs=n,Iu}var Dw;function bO(){return Dw||(Dw=1,dg.exports=gO()),dg.exports}var b=bO();const fE="harim.theme",Ab="harim.settings.v1";function mE(){try{const e=localStorage.getItem(fE);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(Ab);if(t){const i=JSON.parse(t)?.theme;if(i==="dark"||i==="light")return i}return null}catch{return null}}function Jf(e){try{localStorage.setItem(fE,e);const t=localStorage.getItem(Ab),n=t?JSON.parse(t):{};localStorage.setItem(Ab,JSON.stringify({...n,theme:e}))}catch{}}function pE(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=mE()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");pE(e)}catch{}})();var hg={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function yO(){if(Cw)return lt;Cw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,A={};function D(H,P,K){this.props=H,this.context=P,this.refs=A,this.updater=K||T}D.prototype.isReactComponent={},D.prototype.setState=function(H,P){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,P,"setState")},D.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function B(){}B.prototype=D.prototype;function N(H,P,K){this.props=H,this.context=P,this.refs=A,this.updater=K||T}var M=N.prototype=new B;M.constructor=N,k(M,D.prototype),M.isPureReactComponent=!0;var R=Array.isArray;function I(){}var G={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function q(H,P,K){var W=K.ref;return{$$typeof:e,type:H,key:P,ref:W!==void 0?W:null,props:K}}function J(H,P){return q(H.type,P,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function Z(H){var P={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(K){return P[K]})}var ee=/\/+/g;function te(H,P){return typeof H=="object"&&H!==null&&H.key!=null?Z(""+H.key):P.toString(36)}function we(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(I,I):(H.status="pending",H.then(function(P){H.status==="pending"&&(H.status="fulfilled",H.value=P)},function(P){H.status==="pending"&&(H.status="rejected",H.reason=P)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function X(H,P,K,W,z){var F=typeof H;(F==="undefined"||F==="boolean")&&(H=null);var oe=!1;if(H===null)oe=!0;else switch(F){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(H.$$typeof){case e:case t:oe=!0;break;case g:return oe=H._init,X(oe(H._payload),P,K,W,z)}}if(oe)return z=z(H),oe=W===""?"."+te(H,0):W,R(z)?(K="",oe!=null&&(K=oe.replace(ee,"$&/")+"/"),X(z,P,K,"",function(ve){return ve})):z!=null&&(V(z)&&(z=J(z,K+(z.key==null||H&&H.key===z.key?"":(""+z.key).replace(ee,"$&/")+"/")+oe)),P.push(z)),1;oe=0;var ce=W===""?".":W+":";if(R(H))for(var le=0;le<H.length;le++)W=H[le],F=ce+te(W,le),oe+=X(W,P,K,F,z);else if(le=w(H),typeof le=="function")for(H=le.call(H),le=0;!(W=H.next()).done;)W=W.value,F=ce+te(W,le++),oe+=X(W,P,K,F,z);else if(F==="object"){if(typeof H.then=="function")return X(we(H),P,K,W,z);throw P=String(H),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return oe}function ae(H,P,K){if(H==null)return H;var W=[],z=0;return X(H,W,"","",function(F){return P.call(K,F,z++)}),W}function ne(H){if(H._status===-1){var P=H._result;P=P(),P.then(function(K){(H._status===0||H._status===-1)&&(H._status=1,H._result=K)},function(K){(H._status===0||H._status===-1)&&(H._status=2,H._result=K)}),H._status===-1&&(H._status=0,H._result=P)}if(H._status===1)return H._result.default;throw H._result}var me=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Q={map:ae,forEach:function(H,P,K){ae(H,function(){P.apply(this,arguments)},K)},count:function(H){var P=0;return ae(H,function(){P++}),P},toArray:function(H){return ae(H,function(P){return P})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return lt.Activity=y,lt.Children=Q,lt.Component=D,lt.Fragment=n,lt.Profiler=a,lt.PureComponent=N,lt.StrictMode=i,lt.Suspense=m,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,lt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return G.H.useMemoCache(H)}},lt.cache=function(H){return function(){return H.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(H,P,K){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var W=k({},H.props),z=H.key;if(P!=null)for(F in P.key!==void 0&&(z=""+P.key),P)!Y.call(P,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&P.ref===void 0||(W[F]=P[F]);var F=arguments.length-2;if(F===1)W.children=K;else if(1<F){for(var oe=Array(F),ce=0;ce<F;ce++)oe[ce]=arguments[ce+2];W.children=oe}return q(H.type,z,W)},lt.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},lt.createElement=function(H,P,K){var W,z={},F=null;if(P!=null)for(W in P.key!==void 0&&(F=""+P.key),P)Y.call(P,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(z[W]=P[W]);var oe=arguments.length-2;if(oe===1)z.children=K;else if(1<oe){for(var ce=Array(oe),le=0;le<oe;le++)ce[le]=arguments[le+2];z.children=ce}if(H&&H.defaultProps)for(W in oe=H.defaultProps,oe)z[W]===void 0&&(z[W]=oe[W]);return q(H,F,z)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(H){return{$$typeof:d,render:H}},lt.isValidElement=V,lt.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:ne}},lt.memo=function(H,P){return{$$typeof:p,type:H,compare:P===void 0?null:P}},lt.startTransition=function(H){var P=G.T,K={};G.T=K;try{var W=H(),z=G.S;z!==null&&z(K,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(I,me)}catch(F){me(F)}finally{P!==null&&K.types!==null&&(P.types=K.types),G.T=P}},lt.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},lt.use=function(H){return G.H.use(H)},lt.useActionState=function(H,P,K){return G.H.useActionState(H,P,K)},lt.useCallback=function(H,P){return G.H.useCallback(H,P)},lt.useContext=function(H){return G.H.useContext(H)},lt.useDebugValue=function(){},lt.useDeferredValue=function(H,P){return G.H.useDeferredValue(H,P)},lt.useEffect=function(H,P){return G.H.useEffect(H,P)},lt.useEffectEvent=function(H){return G.H.useEffectEvent(H)},lt.useId=function(){return G.H.useId()},lt.useImperativeHandle=function(H,P,K){return G.H.useImperativeHandle(H,P,K)},lt.useInsertionEffect=function(H,P){return G.H.useInsertionEffect(H,P)},lt.useLayoutEffect=function(H,P){return G.H.useLayoutEffect(H,P)},lt.useMemo=function(H,P){return G.H.useMemo(H,P)},lt.useOptimistic=function(H,P){return G.H.useOptimistic(H,P)},lt.useReducer=function(H,P,K){return G.H.useReducer(H,P,K)},lt.useRef=function(H){return G.H.useRef(H)},lt.useState=function(H){return G.H.useState(H)},lt.useSyncExternalStore=function(H,P,K){return G.H.useSyncExternalStore(H,P,K)},lt.useTransition=function(){return G.H.useTransition()},lt.version="19.2.1",lt}var Mw;function Um(){return Mw||(Mw=1,hg.exports=yO()),hg.exports}var j=Um();const rn=pl(j);var fg={exports:{}},zu={},mg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function vO(){return Rw||(Rw=1,(function(e){function t(X,ae){var ne=X.length;X.push(ae);e:for(;0<ne;){var me=ne-1>>>1,Q=X[me];if(0<a(Q,ae))X[me]=ae,X[ne]=Q,ne=me;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ae=X[0],ne=X.pop();if(ne!==ae){X[0]=ne;e:for(var me=0,Q=X.length,H=Q>>>1;me<H;){var P=2*(me+1)-1,K=X[P],W=P+1,z=X[W];if(0>a(K,ne))W<Q&&0>a(z,K)?(X[me]=z,X[W]=ne,me=W):(X[me]=K,X[P]=ne,me=P);else if(W<Q&&0>a(z,ne))X[me]=z,X[W]=ne,me=W;else break e}}return ae}function a(X,ae){var ne=X.sortIndex-ae.sortIndex;return ne!==0?ne:X.id-ae.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],g=1,y=null,x=3,w=!1,T=!1,k=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(X){for(var ae=n(p);ae!==null;){if(ae.callback===null)i(p);else if(ae.startTime<=X)i(p),ae.sortIndex=ae.expirationTime,t(m,ae);else break;ae=n(p)}}function R(X){if(k=!1,M(X),!T)if(n(m)!==null)T=!0,I||(I=!0,Z());else{var ae=n(p);ae!==null&&we(R,ae.startTime-X)}}var I=!1,G=-1,Y=5,q=-1;function J(){return A?!0:!(e.unstable_now()-q<Y)}function V(){if(A=!1,I){var X=e.unstable_now();q=X;var ae=!0;try{e:{T=!1,k&&(k=!1,B(G),G=-1),w=!0;var ne=x;try{t:{for(M(X),y=n(m);y!==null&&!(y.expirationTime>X&&J());){var me=y.callback;if(typeof me=="function"){y.callback=null,x=y.priorityLevel;var Q=me(y.expirationTime<=X);if(X=e.unstable_now(),typeof Q=="function"){y.callback=Q,M(X),ae=!0;break t}y===n(m)&&i(m),M(X)}else i(m);y=n(m)}if(y!==null)ae=!0;else{var H=n(p);H!==null&&we(R,H.startTime-X),ae=!1}}break e}finally{y=null,x=ne,w=!1}ae=void 0}}finally{ae?Z():I=!1}}}var Z;if(typeof N=="function")Z=function(){N(V)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=V,Z=function(){te.postMessage(null)}}else Z=function(){D(V,0)};function we(X,ae){G=D(function(){X(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(X){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var ne=x;x=ae;try{return X()}finally{x=ne}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=x;x=X;try{return ae()}finally{x=ne}},e.unstable_scheduleCallback=function(X,ae,ne){var me=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?me+ne:me):ne=me,X){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ne+Q,X={id:g++,callback:ae,priorityLevel:X,startTime:ne,expirationTime:Q,sortIndex:-1},ne>me?(X.sortIndex=ne,t(p,X),n(m)===null&&X===n(p)&&(k?(B(G),G=-1):k=!0,we(R,ne-me))):(X.sortIndex=Q,t(m,X),T||w||(T=!0,I||(I=!0,Z()))),X},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(X){var ae=x;return function(){var ne=x;x=ae;try{return X.apply(this,arguments)}finally{x=ne}}}})(pg)),pg}var Lw;function _O(){return Lw||(Lw=1,mg.exports=vO()),mg.exports}var gg={exports:{}},mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function xO(){if(Bw)return mr;Bw=1;var e=Um();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:m,containerInfo:p,implementation:g}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mr.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,g)},mr.flushSync=function(m){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=g,i.d.f()}},mr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},mr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},mr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:w}):g==="script"&&i.d.X(m,{crossOrigin:y,integrity:x,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},mr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},mr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);i.d.L(m,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},mr.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},mr.requestFormReset=function(m){i.d.r(m)},mr.unstable_batchedUpdates=function(m,p){return m(p)},mr.useFormState=function(m,p,g){return u.H.useFormState(m,p,g)},mr.useFormStatus=function(){return u.H.useHostTransitionStatus()},mr.version="19.2.1",mr}var Pw;function gE(){if(Pw)return gg.exports;Pw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gg.exports=xO(),gg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function wO(){if($w)return zu;$w=1;var e=_O(),t=Um(),n=gE();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,f=s;;){var _=c.return;if(_===null)break;var S=_.alternate;if(S===null){if(f=_.return,f!==null){c=f;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===c)return m(_),r;if(S===f)return m(_),s;S=S.sibling}throw Error(i(188))}if(c.return!==f.return)c=_,f=S;else{for(var C=!1,U=_.child;U;){if(U===c){C=!0,c=_,f=S;break}if(U===f){C=!0,f=_,c=S;break}U=U.sibling}if(!C){for(U=S.child;U;){if(U===c){C=!0,c=S,f=_;break}if(U===f){C=!0,f=S,c=_;break}U=U.sibling}if(!C)throw Error(i(189))}}if(c.alternate!==f)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Symbol.for("react.client.reference");function te(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ee?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case D:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList";case q:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case N:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return s=r.displayName||null,s!==null?s:te(r.type)||"Memo";case Y:s=r._payload,r=r._init;try{return te(r(s))}catch{}}return null}var we=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},me=[],Q=-1;function H(r){return{current:r}}function P(r){0>Q||(r.current=me[Q],me[Q]=null,Q--)}function K(r,s){Q++,me[Q]=r.current,r.current=s}var W=H(null),z=H(null),F=H(null),oe=H(null);function ce(r,s){switch(K(F,s),K(z,r),K(W,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Qx(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Qx(s),r=ew(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}P(W),K(W,r)}function le(){P(W),P(z),P(F)}function ve(r){r.memoizedState!==null&&K(oe,r);var s=W.current,c=ew(s,r.type);s!==c&&(K(z,r),K(W,c))}function Ae(r){z.current===r&&(P(W),P(z)),oe.current===r&&(P(oe),Lu._currentValue=ne)}var je,Ce;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);je=s&&s[1]||"",Ce=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Ce}var $e=!1;function Me(r,s){if(!r||$e)return"";$e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Se){var xe=Se}Reflect.construct(r,[],De)}else{try{De.call()}catch(Se){xe=Se}r.call(De.prototype)}}else{try{throw Error()}catch(Se){xe=Se}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(Se){if(Se&&xe&&typeof Se.stack=="string")return[Se.stack,xe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),C=S[0],U=S[1];if(C&&U){var ie=C.split(`
`),ye=U.split(`
`);for(_=f=0;f<ie.length&&!ie[f].includes("DetermineComponentFrameRoot");)f++;for(;_<ye.length&&!ye[_].includes("DetermineComponentFrameRoot");)_++;if(f===ie.length||_===ye.length)for(f=ie.length-1,_=ye.length-1;1<=f&&0<=_&&ie[f]!==ye[_];)_--;for(;1<=f&&0<=_;f--,_--)if(ie[f]!==ye[_]){if(f!==1||_!==1)do if(f--,_--,0>_||ie[f]!==ye[_]){var ke=`
`+ie[f].replace(" at new "," at ");return r.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",r.displayName)),ke}while(1<=f&&0<=_);break}}}finally{$e=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Pe(r,s){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==s&&s!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Me(r.type,!1);case 11:return Me(r.type.render,!1);case 1:return Me(r.type,!0);case 31:return Ee("Activity");default:return""}}function Ie(r){try{var s="",c=null;do s+=Pe(r,c),c=r,r=r.return;while(r);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var pe=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,ue=e.unstable_cancelCallback,fe=e.unstable_shouldYield,ze=e.unstable_requestPaint,Be=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,at=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,Dn=e.unstable_LowPriority,Tn=e.unstable_IdlePriority,cr=e.log,_r=e.unstable_setDisableYieldValue,dn=null,Mt=null;function yn(r){if(typeof cr=="function"&&_r(r),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(dn,r)}catch{}}var hn=Math.clz32?Math.clz32:Hi,Vr=Math.log,ca=Math.LN2;function Hi(r){return r>>>=0,r===0?32:31-(Vr(r)/ca|0)|0}var kn=256,Cn=262144,us=4194304;function Or(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ur(r,s,c){var f=r.pendingLanes;if(f===0)return 0;var _=0,S=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var U=f&134217727;return U!==0?(f=U&~S,f!==0?_=Or(f):(C&=U,C!==0?_=Or(C):c||(c=U&~r,c!==0&&(_=Or(c))))):(U=f&~S,U!==0?_=Or(U):C!==0?_=Or(C):c||(c=f&~r,c!==0&&(_=Or(c)))),_===0?0:s!==0&&s!==_&&(s&S)===0&&(S=_&-_,c=s&-s,S>=c||S===32&&(c&4194048)!==0)?s:_}function bi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ua(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function io(){var r=us;return us<<=1,(us&62914560)===0&&(us=4194304),r}function so(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function Gi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ao(r,s,c,f,_,S){var C=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var U=r.entanglements,ie=r.expirationTimes,ye=r.hiddenUpdates;for(c=C&~c;0<c;){var ke=31-hn(c),De=1<<ke;U[ke]=0,ie[ke]=-1;var xe=ye[ke];if(xe!==null)for(ye[ke]=null,ke=0;ke<xe.length;ke++){var Se=xe[ke];Se!==null&&(Se.lane&=-536870913)}c&=~De}f!==0&&da(r,f,0),S!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=S&~(C&~s))}function da(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var f=31-hn(s);r.entangledLanes|=s,r.entanglements[f]=r.entanglements[f]|1073741824|c&261930}function oo(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var f=31-hn(c),_=1<<f;_&s|r[f]&s&&(r[f]|=s),c&=~_}}function lo(r,s){var c=s&-s;return c=(c&42)!==0?1:In(c),(c&(r.suspendedLanes|s))!==0?0:c}function In(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ns(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:Sw(r.type))}function Dr(r,s){var c=ae.p;try{return ae.p=r,s()}finally{ae.p=c}}var dr=Math.random().toString(36).slice(2),sn="__reactFiber$"+dr,An="__reactProps$"+dr,Kr="__reactContainer$"+dr,yi="__reactEvents$"+dr,ge="__reactListeners$"+dr,qe="__reactHandles$"+dr,ct="__reactResources$"+dr,gt="__reactMarker$"+dr;function tt(r){delete r[sn],delete r[An],delete r[yi],delete r[ge],delete r[qe]}function ht(r){var s=r[sn];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Kr]||c[sn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=ow(r);r!==null;){if(c=r[sn])return c;r=ow(r)}return s}r=c,c=r.parentNode}return null}function wt(r){if(r=r[sn]||r[Kr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function pt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function zn(r){var s=r[ct];return s||(s=r[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(r){r[gt]=!0}var ha=new Set,co={};function vi(r,s){Qn(r,s),Qn(r+"Capture",s)}function Qn(r,s){for(co[r]=s,r=0;r<s.length;r++)ha.add(s[r])}var Os=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uo={},ho={};function fo(r){return pe.call(ho,r)?!0:pe.call(uo,r)?!1:Os.test(r)?ho[r]=!0:(uo[r]=!0,!1)}function bt(r,s,c){if(fo(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function zt(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function Cr(r,s,c,f){if(f===null)r.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+f)}}function Un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ds(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gc(r,s,c){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,S=f.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return _.call(this)},set:function(C){c=""+C,S.call(this,C)}}),Object.defineProperty(r,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ot(r){if(!r._valueTracker){var s=Ds(r)?"checked":"value";r._valueTracker=Gc(r,s,""+r[s])}}function an(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return r&&(f=Ds(r)?r.checked?"true":"false":r.value),r=f,r!==c?(s.setValue(r),!0):!1}function fa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var _l=/[\n"\\]/g;function en(r){return r.replace(_l,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fc(r,s,c,f,_,S,C,U){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),s!=null?C==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Un(s)):r.value!==""+Un(s)&&(r.value=""+Un(s)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),s!=null?Fi(r,C,Un(s)):c!=null?Fi(r,C,Un(c)):f!=null&&r.removeAttribute("value"),_==null&&S!=null&&(r.defaultChecked=!!S),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+Un(U):r.removeAttribute("name")}function mo(r,s,c,f,_,S,C,U){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.type=S),s!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||s!=null)){ot(r);return}c=c!=null?""+Un(c):"",s=s!=null?""+Un(s):c,U||s===r.value||(r.value=s),r.defaultValue=s}f=f??_,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=U?r.checked:!!f,r.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C),ot(r)}function Fi(r,s,c){s==="number"&&fa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function qt(r,s,c,f){if(r=r.options,s){s={};for(var _=0;_<c.length;_++)s["$"+c[_]]=!0;for(c=0;c<r.length;c++)_=s.hasOwnProperty("$"+r[c].value),r[c].selected!==_&&(r[c].selected=_),_&&f&&(r[c].defaultSelected=!0)}else{for(c=""+Un(c),s=null,_=0;_<r.length;_++){if(r[_].value===c){r[_].selected=!0,f&&(r[_].defaultSelected=!0);return}s!==null||r[_].disabled||(s=r[_])}s!==null&&(s.selected=!0)}}function ds(r,s,c){if(s!=null&&(s=""+Un(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+Un(c):""}function ma(r,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(i(92));if(we(f)){if(1<f.length)throw Error(i(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=Un(s),r.defaultValue=c,f=r.textContent,f===c&&f!==""&&f!==null&&(r.value=f),ot(r)}function _i(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pa(r,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":f?r.setProperty(s,c):typeof c!="number"||c===0||qc.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function xl(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var _ in s)f=s[_],s.hasOwnProperty(_)&&c[_]!==f&&pa(r,_,f)}else for(var S in s)s.hasOwnProperty(S)&&pa(r,S,s[S])}function po(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ga(r){return Yc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Mr(){}var Sl=null;function go(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ba=null,it=null;function Wr(r){var s=wt(r);if(s&&(r=s.stateNode)){var c=r[An]||null;e:switch(r=s.stateNode,s.type){case"input":if(Fc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==r&&f.form===r.form){var _=f[An]||null;if(!_)throw Error(i(90));Fc(f,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===r.form&&an(f)}break e;case"textarea":ds(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&qt(r,!!c.multiple,s,!1)}}}var Bt=!1;function Zc(r,s,c){if(Bt)return r(s,c);Bt=!0;try{var f=r(s);return f}finally{if(Bt=!1,(ba!==null||it!==null)&&(Bh(),ba&&(s=ba,r=it,it=ba=null,Wr(s),r)))for(s=0;s<r.length;s++)Wr(r[s])}}function Cs(r,s){var c=r.stateNode;if(c===null)return null;var f=c[An]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bo=!1;if(Xr)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){bo=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{bo=!1}var xi=null,Ms=null,vn=null;function hs(){if(vn)return vn;var r,s=Ms,c=s.length,f,_="value"in xi?xi.value:xi.textContent,S=_.length;for(r=0;r<c&&s[r]===_[r];r++);var C=c-r;for(f=1;f<=C&&s[c-f]===_[S-f];f++);return vn=_.slice(r,1<f?1-f:void 0)}function yo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function vo(){return!0}function Ud(){return!1}function er(r){function s(c,f,_,S,C){this._reactName=c,this._targetInst=_,this.type=f,this.nativeEvent=S,this.target=C,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(c=r[U],this[U]=c?c(S):S[U]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?vo:Ud,this.isPropagationStopped=Ud,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=er(qi),ya=y({},qi,{view:0,detail:0}),Et=er(ya),Vc,xr,Yi,_o=y({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Yi&&(Yi&&r.type==="mousemove"?(Vc=r.screenX-Yi.screenX,xr=r.screenY-Yi.screenY):xr=Vc=0,Yi=r),Vc)},movementY:function(r){return"movementY"in r?r.movementY:xr}}),Hd=er(_o),Kc=y({},_o,{dataTransfer:0}),xp=er(Kc),Gd=y({},ya,{relatedTarget:0}),Wc=er(Gd),wp=y({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xc=er(wp),Sp=y({},qi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wi=er(Sp),Ep=y({},qi,{data:0}),Jc=er(Ep),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=qd[r])?!!s[r]:!1}function eu(){return Qc}var Yd=y({},ya,{key:function(r){if(r.key){var s=fs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=yo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(r){return r.type==="keypress"?yo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Zd=er(Yd),Tp=y({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=er(Tp),tu=y({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),kp=er(tu),Kd=y({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wd=er(Kd),Tl=y({},_o,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Rs=er(Tl),Ap=y({},qi,{newState:0,oldState:0}),xo=er(Ap),Rr=[9,13,27,32],kl=Xr&&"CompositionEvent"in window,va=null;Xr&&"documentMode"in document&&(va=document.documentMode);var jp=Xr&&"TextEvent"in window&&!va,Al=Xr&&(!kl||va&&8<va&&11>=va),jl=" ",Xd=!1;function Jd(r,s){switch(r){case"keyup":return Rr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nu(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var _a=!1;function Qr(r,s){switch(r){case"compositionend":return nu(s);case"keypress":return s.which!==32?null:(Xd=!0,jl);case"textInput":return r=s.data,r===jl&&Xd?null:r;default:return null}}function xa(r,s){if(_a)return r==="compositionend"||!kl&&Jd(r,s)?(r=hs(),vn=Ms=xi=null,_a=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Al&&s.locale!=="ko"?null:s.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Si(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Np[r.type]:s==="textarea"}function Qd(r,s,c,f){ba?it?it.push(f):it=[f]:ba=f,s=Gh(s,"onChange"),0<s.length&&(c=new El("onChange","change",null,c,f),r.push({event:c,listeners:s}))}var Ei=null,wo=null;function So(r){Zx(r,0)}function Eo(r){var s=pt(r);if(an(s))return r}function To(r,s){if(r==="change")return s}var eh=!1;if(Xr){var Ti;if(Xr){var wa="oninput"in document;if(!wa){var th=document.createElement("div");th.setAttribute("oninput","return;"),wa=typeof th.oninput=="function"}Ti=wa}else Ti=!1;eh=Ti&&(!document.documentMode||9<document.documentMode)}function Nl(){Ei&&(Ei.detachEvent("onpropertychange",nh),wo=Ei=null)}function nh(r){if(r.propertyName==="value"&&Eo(wo)){var s=[];Qd(s,wo,r,go(r)),Zc(So,s)}}function Zi(r,s,c){r==="focusin"?(Nl(),Ei=s,wo=c,Ei.attachEvent("onpropertychange",nh)):r==="focusout"&&Nl()}function Op(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Eo(wo)}function Sa(r,s){if(r==="click")return Eo(s)}function Dp(r,s){if(r==="input"||r==="change")return Eo(s)}function Vi(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Yn=typeof Object.is=="function"?Object.is:Vi;function Ea(r,s){if(Yn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var _=c[f];if(!pe.call(s,_)||!Yn(r[_],s[_]))return!1}return!0}function Ol(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ko(r,s){var c=Ol(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=s&&f>=s)return{node:c,offset:s-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ol(c)}}function Dl(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Dl(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ao(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=fa(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=fa(r.document)}return s}function ms(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Cl=Xr&&"documentMode"in document&&11>=document.documentMode,ps=null,Ml=null,jo=null,Ta=!1;function rh(r,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ta||ps==null||ps!==fa(f)||(f=ps,"selectionStart"in f&&ms(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),jo&&Ea(jo,f)||(jo=f,f=Gh(Ml,"onSelect"),0<f.length&&(s=new El("onSelect","select",null,s,c),r.push({event:s,listeners:f}),s.target=ps)))}function gs(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var ka={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},Rl={},ih={};Xr&&(ih=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Zn(r){if(Rl[r])return Rl[r];if(!ka[r])return r;var s=ka[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in ih)return Rl[r]=s[c];return r}var No=Zn("animationend"),sh=Zn("animationiteration"),Oo=Zn("animationstart"),Cp=Zn("transitionrun"),ah=Zn("transitionstart"),Mp=Zn("transitioncancel"),Aa=Zn("transitionend"),oh=new Map,bs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bs.push("scrollEnd");function Lr(r,s){oh.set(r,s),vi(s,[r])}var Do=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Br=[],hr=0,Ll=0;function Co(){for(var r=hr,s=Ll=hr=0;s<r;){var c=Br[s];Br[s++]=null;var f=Br[s];Br[s++]=null;var _=Br[s];Br[s++]=null;var S=Br[s];if(Br[s++]=null,f!==null&&_!==null){var C=f.pending;C===null?_.next=_:(_.next=C.next,C.next=_),f.pending=_}S!==0&&ja(c,_,S)}}function ys(r,s,c,f){Br[hr++]=r,Br[hr++]=s,Br[hr++]=c,Br[hr++]=f,Ll|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function ru(r,s,c,f){return ys(r,s,c,f),Mo(r)}function ki(r,s){return ys(r,null,null,s),Mo(r)}function ja(r,s,c){r.lanes|=c;var f=r.alternate;f!==null&&(f.lanes|=c);for(var _=!1,S=r.return;S!==null;)S.childLanes|=c,f=S.alternate,f!==null&&(f.childLanes|=c),S.tag===22&&(r=S.stateNode,r===null||r._visibility&1||(_=!0)),r=S,S=S.return;return r.tag===3?(S=r.stateNode,_&&s!==null&&(_=31-hn(c),r=S.hiddenUpdates,f=r[_],f===null?r[_]=[s]:f.push(s),s.lane=c|536870912),S):null}function Mo(r){if(50<ju)throw ju=0,L0=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ls={};function Rp(r,s,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(r,s,c,f){return new Rp(r,s,c,f)}function Bl(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ai(r,s){var c=r.alternate;return c===null?(c=fr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function iu(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Ro(r,s,c,f,_,S){var C=0;if(f=r,typeof r=="function")Bl(r)&&(C=1);else if(typeof r=="string")C=iO(r,c,W.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case q:return r=fr(31,c,s,_),r.elementType=q,r.lanes=S,r;case k:return Bs(c.children,_,S,s);case A:C=8,_|=24;break;case D:return r=fr(12,c,s,_|2),r.elementType=D,r.lanes=S,r;case R:return r=fr(13,c,s,_),r.elementType=R,r.lanes=S,r;case I:return r=fr(19,c,s,_),r.elementType=I,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:C=10;break e;case B:C=9;break e;case M:C=11;break e;case G:C=14;break e;case Y:C=16,f=null;break e}C=29,c=Error(i(130,r===null?"null":typeof r,"")),f=null}return s=fr(C,c,s,_),s.elementType=r,s.type=f,s.lanes=S,s}function Bs(r,s,c,f){return r=fr(7,r,f,s),r.lanes=c,r}function Pl(r,s,c){return r=fr(6,r,null,s),r.lanes=c,r}function su(r){var s=fr(18,null,null,0);return s.stateNode=r,s}function au(r,s,c){return s=fr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var o=new WeakMap;function h(r,s){if(typeof r=="object"&&r!==null){var c=o.get(r);return c!==void 0?c:(s={value:r,source:s,stack:Ie(s)},o.set(r,s),s)}return{value:r,source:s,stack:Ie(s)}}var v=[],E=0,O=null,$=0,re=[],he=0,_e=null,Oe=1,Ge="";function Xe(r,s){v[E++]=$,v[E++]=O,O=r,$=s}function ft(r,s,c){re[he++]=Oe,re[he++]=Ge,re[he++]=_e,_e=r;var f=Oe;r=Ge;var _=32-hn(f)-1;f&=~(1<<_),c+=1;var S=32-hn(s)+_;if(30<S){var C=_-_%5;S=(f&(1<<C)-1).toString(32),f>>=C,_-=C,Oe=1<<32-hn(s)+_|c<<_|f,Ge=S+r}else Oe=1<<S|c<<_|f,Ge=r}function Hn(r){r.return!==null&&(Xe(r,1),ft(r,1,0))}function _n(r){for(;r===O;)O=v[--E],v[E]=null,$=v[--E],v[E]=null;for(;r===_e;)_e=re[--he],re[he]=null,Ge=re[--he],re[he]=null,Oe=re[--he],re[he]=null}function wr(r,s){re[he++]=Oe,re[he++]=Ge,re[he++]=_e,Oe=s.id,Ge=s.overflow,_e=r}var Nt=null,Ot=null,yt=!1,vs=null,Pr=!1,$l=Error(i(519));function _s(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lo(h(s,r)),$l}function ou(r){var s=r.stateNode,c=r.type,f=r.memoizedProps;switch(s[sn]=r,s[An]=f,c){case"dialog":_t("cancel",s),_t("close",s);break;case"iframe":case"object":case"embed":_t("load",s);break;case"video":case"audio":for(c=0;c<Ou.length;c++)_t(Ou[c],s);break;case"source":_t("error",s);break;case"img":case"image":case"link":_t("error",s),_t("load",s);break;case"details":_t("toggle",s);break;case"input":_t("invalid",s),mo(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":_t("invalid",s);break;case"textarea":_t("invalid",s),ma(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||Xx(s.textContent,c)?(f.popover!=null&&(_t("beforetoggle",s),_t("toggle",s)),f.onScroll!=null&&_t("scroll",s),f.onScrollEnd!=null&&_t("scrollend",s),f.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||_s(r,!0)}function fn(r){for(Nt=r.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:Nt=Nt.return}}function Ki(r){if(r!==Nt)return!1;if(!yt)return fn(r),yt=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||W0(r.type,r.memoizedProps)),c=!c),c&&Ot&&_s(r),fn(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=aw(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=aw(r)}else s===27?(s=Ot,Ha(r.type)?(r=tg,tg=null,Ot=r):Ot=s):Ot=Nt?Ni(r.stateNode.nextSibling):null;return!0}function Ps(){Ot=Nt=null,yt=!1}function lu(){var r=vs;return r!==null&&(Ur===null?Ur=r:Ur.push.apply(Ur,r),vs=null),r}function Lo(r){vs===null?vs=[r]:vs.push(r)}var Bo=H(null),xs=null,Wi=null;function Na(r,s,c){K(Bo,s._currentValue),s._currentValue=c}function $s(r){r._currentValue=Bo.current,P(Bo)}function Lp(r,s,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===c)break;r=r.return}}function Bp(r,s,c,f){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var S=_.dependencies;if(S!==null){var C=_.child;S=S.firstContext;e:for(;S!==null;){var U=S;S=_;for(var ie=0;ie<s.length;ie++)if(U.context===s[ie]){S.lanes|=c,U=S.alternate,U!==null&&(U.lanes|=c),Lp(S.return,c,r),f||(C=null);break e}S=U.next}}else if(_.tag===18){if(C=_.return,C===null)throw Error(i(341));C.lanes|=c,S=C.alternate,S!==null&&(S.lanes|=c),Lp(C,c,r),C=null}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===r){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}}function Il(r,s,c,f){r=null;for(var _=s,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var C=_.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var U=_.type;Yn(_.pendingProps.value,C.value)||(r!==null?r.push(U):r=[U])}}else if(_===oe.current){if(C=_.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(Lu):r=[Lu])}_=_.return}r!==null&&Bp(s,r,c,f),s.flags|=262144}function lh(r){for(r=r.firstContext;r!==null;){if(!Yn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Po(r){xs=r,Wi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function tr(r){return Bv(xs,r)}function ch(r,s){return xs===null&&Po(r),Bv(r,s)}function Bv(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Wi===null){if(r===null)throw Error(i(308));Wi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Wi=Wi.next=s;return c}var eN=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,f){r.push(f)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},tN=e.unstable_scheduleCallback,nN=e.unstable_NormalPriority,Mn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pp(){return{controller:new eN,data:new Map,refCount:0}}function cu(r){r.refCount--,r.refCount===0&&tN(nN,function(){r.controller.abort()})}var uu=null,$p=0,zl=0,Ul=null;function rN(r,s){if(uu===null){var c=uu=[];$p=0,zl=U0(),Ul={status:"pending",value:void 0,then:function(f){c.push(f)}}}return $p++,s.then(Pv,Pv),s}function Pv(){if(--$p===0&&uu!==null){Ul!==null&&(Ul.status="fulfilled");var r=uu;uu=null,zl=0,Ul=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function iN(r,s){var c=[],f={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return r.then(function(){f.status="fulfilled",f.value=s;for(var _=0;_<c.length;_++)(0,c[_])(s)},function(_){for(f.status="rejected",f.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),f}var $v=X.S;X.S=function(r,s){xx=Be(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&rN(r,s),$v!==null&&$v(r,s)};var $o=H(null);function Ip(){var r=$o.current;return r!==null?r:Yt.pooledCache}function uh(r,s){s===null?K($o,$o.current):K($o,s.pool)}function Iv(){var r=Ip();return r===null?null:{parent:Mn._currentValue,pool:r}}var Hl=Error(i(460)),zp=Error(i(474)),dh=Error(i(542)),hh={then:function(){}};function zv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Uv(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Gv(r),r;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(f){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=f}},function(f){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Gv(r),r}throw zo=s,Hl}}function Io(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(zo=c,Hl):c}}var zo=null;function Hv(){if(zo===null)throw Error(i(459));var r=zo;return zo=null,r}function Gv(r){if(r===Hl||r===dh)throw Error(i(483))}var Gl=null,du=0;function fh(r){var s=du;return du+=1,Gl===null&&(Gl=[]),Uv(Gl,r,s)}function hu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function mh(r,s){throw s.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Fv(r){function s(de,se){if(r){var be=de.deletions;be===null?(de.deletions=[se],de.flags|=16):be.push(se)}}function c(de,se){if(!r)return null;for(;se!==null;)s(de,se),se=se.sibling;return null}function f(de){for(var se=new Map;de!==null;)de.key!==null?se.set(de.key,de):se.set(de.index,de),de=de.sibling;return se}function _(de,se){return de=Ai(de,se),de.index=0,de.sibling=null,de}function S(de,se,be){return de.index=be,r?(be=de.alternate,be!==null?(be=be.index,be<se?(de.flags|=67108866,se):be):(de.flags|=67108866,se)):(de.flags|=1048576,se)}function C(de){return r&&de.alternate===null&&(de.flags|=67108866),de}function U(de,se,be,Ne){return se===null||se.tag!==6?(se=Pl(be,de.mode,Ne),se.return=de,se):(se=_(se,be),se.return=de,se)}function ie(de,se,be,Ne){var Qe=be.type;return Qe===k?ke(de,se,be.props.children,Ne,be.key):se!==null&&(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===Y&&Io(Qe)===se.type)?(se=_(se,be.props),hu(se,be),se.return=de,se):(se=Ro(be.type,be.key,be.props,null,de.mode,Ne),hu(se,be),se.return=de,se)}function ye(de,se,be,Ne){return se===null||se.tag!==4||se.stateNode.containerInfo!==be.containerInfo||se.stateNode.implementation!==be.implementation?(se=au(be,de.mode,Ne),se.return=de,se):(se=_(se,be.children||[]),se.return=de,se)}function ke(de,se,be,Ne,Qe){return se===null||se.tag!==7?(se=Bs(be,de.mode,Ne,Qe),se.return=de,se):(se=_(se,be),se.return=de,se)}function De(de,se,be){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Pl(""+se,de.mode,be),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return be=Ro(se.type,se.key,se.props,null,de.mode,be),hu(be,se),be.return=de,be;case T:return se=au(se,de.mode,be),se.return=de,se;case Y:return se=Io(se),De(de,se,be)}if(we(se)||Z(se))return se=Bs(se,de.mode,be,null),se.return=de,se;if(typeof se.then=="function")return De(de,fh(se),be);if(se.$$typeof===N)return De(de,ch(de,se),be);mh(de,se)}return null}function xe(de,se,be,Ne){var Qe=se!==null?se.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Qe!==null?null:U(de,se,""+be,Ne);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case w:return be.key===Qe?ie(de,se,be,Ne):null;case T:return be.key===Qe?ye(de,se,be,Ne):null;case Y:return be=Io(be),xe(de,se,be,Ne)}if(we(be)||Z(be))return Qe!==null?null:ke(de,se,be,Ne,null);if(typeof be.then=="function")return xe(de,se,fh(be),Ne);if(be.$$typeof===N)return xe(de,se,ch(de,be),Ne);mh(de,be)}return null}function Se(de,se,be,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return de=de.get(be)||null,U(se,de,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case w:return de=de.get(Ne.key===null?be:Ne.key)||null,ie(se,de,Ne,Qe);case T:return de=de.get(Ne.key===null?be:Ne.key)||null,ye(se,de,Ne,Qe);case Y:return Ne=Io(Ne),Se(de,se,be,Ne,Qe)}if(we(Ne)||Z(Ne))return de=de.get(be)||null,ke(se,de,Ne,Qe,null);if(typeof Ne.then=="function")return Se(de,se,be,fh(Ne),Qe);if(Ne.$$typeof===N)return Se(de,se,be,ch(se,Ne),Qe);mh(se,Ne)}return null}function Ye(de,se,be,Ne){for(var Qe=null,Dt=null,Ke=se,mt=se=0,kt=null;Ke!==null&&mt<be.length;mt++){Ke.index>mt?(kt=Ke,Ke=null):kt=Ke.sibling;var Ct=xe(de,Ke,be[mt],Ne);if(Ct===null){Ke===null&&(Ke=kt);break}r&&Ke&&Ct.alternate===null&&s(de,Ke),se=S(Ct,se,mt),Dt===null?Qe=Ct:Dt.sibling=Ct,Dt=Ct,Ke=kt}if(mt===be.length)return c(de,Ke),yt&&Xe(de,mt),Qe;if(Ke===null){for(;mt<be.length;mt++)Ke=De(de,be[mt],Ne),Ke!==null&&(se=S(Ke,se,mt),Dt===null?Qe=Ke:Dt.sibling=Ke,Dt=Ke);return yt&&Xe(de,mt),Qe}for(Ke=f(Ke);mt<be.length;mt++)kt=Se(Ke,de,mt,be[mt],Ne),kt!==null&&(r&&kt.alternate!==null&&Ke.delete(kt.key===null?mt:kt.key),se=S(kt,se,mt),Dt===null?Qe=kt:Dt.sibling=kt,Dt=kt);return r&&Ke.forEach(function(Za){return s(de,Za)}),yt&&Xe(de,mt),Qe}function nt(de,se,be,Ne){if(be==null)throw Error(i(151));for(var Qe=null,Dt=null,Ke=se,mt=se=0,kt=null,Ct=be.next();Ke!==null&&!Ct.done;mt++,Ct=be.next()){Ke.index>mt?(kt=Ke,Ke=null):kt=Ke.sibling;var Za=xe(de,Ke,Ct.value,Ne);if(Za===null){Ke===null&&(Ke=kt);break}r&&Ke&&Za.alternate===null&&s(de,Ke),se=S(Za,se,mt),Dt===null?Qe=Za:Dt.sibling=Za,Dt=Za,Ke=kt}if(Ct.done)return c(de,Ke),yt&&Xe(de,mt),Qe;if(Ke===null){for(;!Ct.done;mt++,Ct=be.next())Ct=De(de,Ct.value,Ne),Ct!==null&&(se=S(Ct,se,mt),Dt===null?Qe=Ct:Dt.sibling=Ct,Dt=Ct);return yt&&Xe(de,mt),Qe}for(Ke=f(Ke);!Ct.done;mt++,Ct=be.next())Ct=Se(Ke,de,mt,Ct.value,Ne),Ct!==null&&(r&&Ct.alternate!==null&&Ke.delete(Ct.key===null?mt:Ct.key),se=S(Ct,se,mt),Dt===null?Qe=Ct:Dt.sibling=Ct,Dt=Ct);return r&&Ke.forEach(function(pO){return s(de,pO)}),yt&&Xe(de,mt),Qe}function Gt(de,se,be,Ne){if(typeof be=="object"&&be!==null&&be.type===k&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case w:e:{for(var Qe=be.key;se!==null;){if(se.key===Qe){if(Qe=be.type,Qe===k){if(se.tag===7){c(de,se.sibling),Ne=_(se,be.props.children),Ne.return=de,de=Ne;break e}}else if(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===Y&&Io(Qe)===se.type){c(de,se.sibling),Ne=_(se,be.props),hu(Ne,be),Ne.return=de,de=Ne;break e}c(de,se);break}else s(de,se);se=se.sibling}be.type===k?(Ne=Bs(be.props.children,de.mode,Ne,be.key),Ne.return=de,de=Ne):(Ne=Ro(be.type,be.key,be.props,null,de.mode,Ne),hu(Ne,be),Ne.return=de,de=Ne)}return C(de);case T:e:{for(Qe=be.key;se!==null;){if(se.key===Qe)if(se.tag===4&&se.stateNode.containerInfo===be.containerInfo&&se.stateNode.implementation===be.implementation){c(de,se.sibling),Ne=_(se,be.children||[]),Ne.return=de,de=Ne;break e}else{c(de,se);break}else s(de,se);se=se.sibling}Ne=au(be,de.mode,Ne),Ne.return=de,de=Ne}return C(de);case Y:return be=Io(be),Gt(de,se,be,Ne)}if(we(be))return Ye(de,se,be,Ne);if(Z(be)){if(Qe=Z(be),typeof Qe!="function")throw Error(i(150));return be=Qe.call(be),nt(de,se,be,Ne)}if(typeof be.then=="function")return Gt(de,se,fh(be),Ne);if(be.$$typeof===N)return Gt(de,se,ch(de,be),Ne);mh(de,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,se!==null&&se.tag===6?(c(de,se.sibling),Ne=_(se,be),Ne.return=de,de=Ne):(c(de,se),Ne=Pl(be,de.mode,Ne),Ne.return=de,de=Ne),C(de)):c(de,se)}return function(de,se,be,Ne){try{du=0;var Qe=Gt(de,se,be,Ne);return Gl=null,Qe}catch(Ke){if(Ke===Hl||Ke===dh)throw Ke;var Dt=fr(29,Ke,null,de.mode);return Dt.lanes=Ne,Dt.return=de,Dt}finally{}}}var Uo=Fv(!0),qv=Fv(!1),Oa=!1;function Up(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Da(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ca(r,s,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Rt&2)!==0){var _=f.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),f.pending=s,s=Mo(r),ja(r,null,c),s}return ys(r,f,s,c),Mo(r)}function fu(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,oo(r,c)}}function Gp(r,s){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var _=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?_=S=C:S=S.next=C,c=c.next}while(c!==null);S===null?_=S=s:S=S.next=s}else _=S=s;c={baseState:f.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var Fp=!1;function mu(){if(Fp){var r=Ul;if(r!==null)throw r}}function pu(r,s,c,f){Fp=!1;var _=r.updateQueue;Oa=!1;var S=_.firstBaseUpdate,C=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var ie=U,ye=ie.next;ie.next=null,C===null?S=ye:C.next=ye,C=ie;var ke=r.alternate;ke!==null&&(ke=ke.updateQueue,U=ke.lastBaseUpdate,U!==C&&(U===null?ke.firstBaseUpdate=ye:U.next=ye,ke.lastBaseUpdate=ie))}if(S!==null){var De=_.baseState;C=0,ke=ye=ie=null,U=S;do{var xe=U.lane&-536870913,Se=xe!==U.lane;if(Se?(Tt&xe)===xe:(f&xe)===xe){xe!==0&&xe===zl&&(Fp=!0),ke!==null&&(ke=ke.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ye=r,nt=U;xe=s;var Gt=c;switch(nt.tag){case 1:if(Ye=nt.payload,typeof Ye=="function"){De=Ye.call(Gt,De,xe);break e}De=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=nt.payload,xe=typeof Ye=="function"?Ye.call(Gt,De,xe):Ye,xe==null)break e;De=y({},De,xe);break e;case 2:Oa=!0}}xe=U.callback,xe!==null&&(r.flags|=64,Se&&(r.flags|=8192),Se=_.callbacks,Se===null?_.callbacks=[xe]:Se.push(xe))}else Se={lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ke===null?(ye=ke=Se,ie=De):ke=ke.next=Se,C|=xe;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;Se=U,U=Se.next,Se.next=null,_.lastBaseUpdate=Se,_.shared.pending=null}}while(!0);ke===null&&(ie=De),_.baseState=ie,_.firstBaseUpdate=ye,_.lastBaseUpdate=ke,S===null&&(_.shared.lanes=0),Pa|=C,r.lanes=C,r.memoizedState=De}}function Yv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Zv(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)Yv(c[r],s)}var Fl=H(null),ph=H(0);function Vv(r,s){r=Zs,K(ph,r),K(Fl,s),Zs=r|s.baseLanes}function qp(){K(ph,Zs),K(Fl,Fl.current)}function Yp(){Zs=ph.current,P(Fl),P(ph)}var ei=H(null),ji=null;function Ma(r){var s=r.alternate;K(jn,jn.current&1),K(ei,r),ji===null&&(s===null||Fl.current!==null||s.memoizedState!==null)&&(ji=r)}function Zp(r){K(jn,jn.current),K(ei,r),ji===null&&(ji=r)}function Kv(r){r.tag===22?(K(jn,jn.current),K(ei,r),ji===null&&(ji=r)):Ra()}function Ra(){K(jn,jn.current),K(ei,ei.current)}function ti(r){P(ei),ji===r&&(ji=null),P(jn)}var jn=H(0);function gh(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Q0(c)||eg(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Is=0,ut=null,Ut=null,Rn=null,bh=!1,ql=!1,Ho=!1,yh=0,gu=0,Yl=null,sN=0;function xn(){throw Error(i(321))}function Vp(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Yn(r[c],s[c]))return!1;return!0}function Kp(r,s,c,f,_,S){return Is=S,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?C_:u0,Ho=!1,S=c(f,_),Ho=!1,ql&&(S=Xv(s,c,f,_)),Wv(r),S}function Wv(r){X.H=vu;var s=Ut!==null&&Ut.next!==null;if(Is=0,Rn=Ut=ut=null,bh=!1,gu=0,Yl=null,s)throw Error(i(300));r===null||Ln||(r=r.dependencies,r!==null&&lh(r)&&(Ln=!0))}function Xv(r,s,c,f){ut=r;var _=0;do{if(ql&&(Yl=null),gu=0,ql=!1,25<=_)throw Error(i(301));if(_+=1,Rn=Ut=null,r.updateQueue!=null){var S=r.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}X.H=M_,S=s(c,f)}while(ql);return S}function aN(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?bu(s):s,r=r.useState()[0],(Ut!==null?Ut.memoizedState:null)!==r&&(ut.flags|=1024),s}function Wp(){var r=yh!==0;return yh=0,r}function Xp(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Jp(r){if(bh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bh=!1}Is=0,Rn=Ut=ut=null,ql=!1,gu=yh=0,Yl=null}function Sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?ut.memoizedState=Rn=r:Rn=Rn.next=r,Rn}function Nn(){if(Ut===null){var r=ut.alternate;r=r!==null?r.memoizedState:null}else r=Ut.next;var s=Rn===null?ut.memoizedState:Rn.next;if(s!==null)Rn=s,Ut=r;else{if(r===null)throw ut.alternate===null?Error(i(467)):Error(i(310));Ut=r,r={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Rn===null?ut.memoizedState=Rn=r:Rn=Rn.next=r}return Rn}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(r){var s=gu;return gu+=1,Yl===null&&(Yl=[]),r=Uv(Yl,r,s),s=ut,(Rn===null?s.memoizedState:Rn.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?C_:u0),r}function _h(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bu(r);if(r.$$typeof===N)return tr(r)}throw Error(i(438,String(r)))}function Qp(r){var s=null,c=ut.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=ut.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=vh(),ut.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),f=0;f<r;f++)c[f]=J;return s.index++,c}function zs(r,s){return typeof s=="function"?s(r):s}function xh(r){var s=Nn();return e0(s,Ut,r)}function e0(r,s,c){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=c;var _=r.baseQueue,S=f.pending;if(S!==null){if(_!==null){var C=_.next;_.next=S.next,S.next=C}s.baseQueue=_=S,f.pending=null}if(S=r.baseState,_===null)r.memoizedState=S;else{s=_.next;var U=C=null,ie=null,ye=s,ke=!1;do{var De=ye.lane&-536870913;if(De!==ye.lane?(Tt&De)===De:(Is&De)===De){var xe=ye.revertLane;if(xe===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),De===zl&&(ke=!0);else if((Is&xe)===xe){ye=ye.next,xe===zl&&(ke=!0);continue}else De={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ie===null?(U=ie=De,C=S):ie=ie.next=De,ut.lanes|=xe,Pa|=xe;De=ye.action,Ho&&c(S,De),S=ye.hasEagerState?ye.eagerState:c(S,De)}else xe={lane:De,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ie===null?(U=ie=xe,C=S):ie=ie.next=xe,ut.lanes|=De,Pa|=De;ye=ye.next}while(ye!==null&&ye!==s);if(ie===null?C=S:ie.next=U,!Yn(S,r.memoizedState)&&(Ln=!0,ke&&(c=Ul,c!==null)))throw c;r.memoizedState=S,r.baseState=C,r.baseQueue=ie,f.lastRenderedState=S}return _===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function t0(r){var s=Nn(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=c.dispatch,_=c.pending,S=s.memoizedState;if(_!==null){c.pending=null;var C=_=_.next;do S=r(S,C.action),C=C.next;while(C!==_);Yn(S,s.memoizedState)||(Ln=!0),s.memoizedState=S,s.baseQueue===null&&(s.baseState=S),c.lastRenderedState=S}return[S,f]}function Jv(r,s,c){var f=ut,_=Nn(),S=yt;if(S){if(c===void 0)throw Error(i(407));c=c()}else c=s();var C=!Yn((Ut||_).memoizedState,c);if(C&&(_.memoizedState=c,Ln=!0),_=_.queue,i0(t_.bind(null,f,_,r),[r]),_.getSnapshot!==s||C||Rn!==null&&Rn.memoizedState.tag&1){if(f.flags|=2048,Zl(9,{destroy:void 0},e_.bind(null,f,_,c,s),null),Yt===null)throw Error(i(349));S||(Is&127)!==0||Qv(f,s,c)}return c}function Qv(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=ut.updateQueue,s===null?(s=vh(),ut.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function e_(r,s,c,f){s.value=c,s.getSnapshot=f,n_(s)&&r_(r)}function t_(r,s,c){return c(function(){n_(s)&&r_(r)})}function n_(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Yn(r,c)}catch{return!0}}function r_(r){var s=ki(r,2);s!==null&&Hr(s,r,2)}function n0(r){var s=Sr();if(typeof r=="function"){var c=r;if(r=c(),Ho){yn(!0);try{c()}finally{yn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:r},s}function i_(r,s,c,f){return r.baseState=c,e0(r,Ut,typeof f=="function"?f:zs)}function oN(r,s,c,f,_){if(Eh(r))throw Error(i(485));if(r=s.action,r!==null){var S={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){S.listeners.push(C)}};X.T!==null?c(!0):S.isTransition=!1,f(S),c=s.pending,c===null?(S.next=s.pending=S,s_(s,S)):(S.next=c.next,s.pending=c.next=S)}}function s_(r,s){var c=s.action,f=s.payload,_=r.state;if(s.isTransition){var S=X.T,C={};X.T=C;try{var U=c(_,f),ie=X.S;ie!==null&&ie(C,U),a_(r,s,U)}catch(ye){r0(r,s,ye)}finally{S!==null&&C.types!==null&&(S.types=C.types),X.T=S}}else try{S=c(_,f),a_(r,s,S)}catch(ye){r0(r,s,ye)}}function a_(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){o_(r,s,f)},function(f){return r0(r,s,f)}):o_(r,s,c)}function o_(r,s,c){s.status="fulfilled",s.value=c,l_(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,s_(r,c)))}function r0(r,s,c){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,l_(s),s=s.next;while(s!==f)}r.action=null}function l_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function c_(r,s){return s}function u_(r,s){if(yt){var c=Yt.formState;if(c!==null){e:{var f=ut;if(yt){if(Ot){t:{for(var _=Ot,S=Pr;_.nodeType!==8;){if(!S){_=null;break t}if(_=Ni(_.nextSibling),_===null){_=null;break t}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){Ot=Ni(_.nextSibling),f=_.data==="F!";break e}}_s(f)}f=!1}f&&(s=c[0])}}return c=Sr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c_,lastRenderedState:s},c.queue=f,c=N_.bind(null,ut,f),f.dispatch=c,f=n0(!1),S=c0.bind(null,ut,!1,f.queue),f=Sr(),_={state:s,dispatch:null,action:r,pending:null},f.queue=_,c=oN.bind(null,ut,_,S,c),_.dispatch=c,f.memoizedState=r,[s,c,!1]}function d_(r){var s=Nn();return h_(s,Ut,r)}function h_(r,s,c){if(s=e0(r,s,c_)[0],r=xh(zs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=bu(s)}catch(C){throw C===Hl?dh:C}else f=s;s=Nn();var _=s.queue,S=_.dispatch;return c!==s.memoizedState&&(ut.flags|=2048,Zl(9,{destroy:void 0},lN.bind(null,_,c),null)),[f,S,r]}function lN(r,s){r.action=s}function f_(r){var s=Nn(),c=Ut;if(c!==null)return h_(s,c,r);Nn(),s=s.memoizedState,c=Nn();var f=c.queue.dispatch;return c.memoizedState=r,[s,f,!1]}function Zl(r,s,c,f){return r={tag:r,create:c,deps:f,inst:s,next:null},s=ut.updateQueue,s===null&&(s=vh(),ut.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,s.lastEffect=r),r}function m_(){return Nn().memoizedState}function wh(r,s,c,f){var _=Sr();ut.flags|=r,_.memoizedState=Zl(1|s,{destroy:void 0},c,f===void 0?null:f)}function Sh(r,s,c,f){var _=Nn();f=f===void 0?null:f;var S=_.memoizedState.inst;Ut!==null&&f!==null&&Vp(f,Ut.memoizedState.deps)?_.memoizedState=Zl(s,S,c,f):(ut.flags|=r,_.memoizedState=Zl(1|s,S,c,f))}function p_(r,s){wh(8390656,8,r,s)}function i0(r,s){Sh(2048,8,r,s)}function cN(r){ut.flags|=4;var s=ut.updateQueue;if(s===null)s=vh(),ut.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function g_(r){var s=Nn().memoizedState;return cN({ref:s,nextImpl:r}),function(){if((Rt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function b_(r,s){return Sh(4,2,r,s)}function y_(r,s){return Sh(4,4,r,s)}function v_(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function __(r,s,c){c=c!=null?c.concat([r]):null,Sh(4,4,v_.bind(null,s,r),c)}function s0(){}function x_(r,s){var c=Nn();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&Vp(s,f[1])?f[0]:(c.memoizedState=[r,s],r)}function w_(r,s){var c=Nn();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&Vp(s,f[1]))return f[0];if(f=r(),Ho){yn(!0);try{r()}finally{yn(!1)}}return c.memoizedState=[f,s],f}function a0(r,s,c){return c===void 0||(Is&1073741824)!==0&&(Tt&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=Sx(),ut.lanes|=r,Pa|=r,c)}function S_(r,s,c,f){return Yn(c,s)?c:Fl.current!==null?(r=a0(r,c,f),Yn(r,s)||(Ln=!0),r):(Is&42)===0||(Is&1073741824)!==0&&(Tt&261930)===0?(Ln=!0,r.memoizedState=c):(r=Sx(),ut.lanes|=r,Pa|=r,s)}function E_(r,s,c,f,_){var S=ae.p;ae.p=S!==0&&8>S?S:8;var C=X.T,U={};X.T=U,c0(r,!1,s,c);try{var ie=_(),ye=X.S;if(ye!==null&&ye(U,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var ke=iN(ie,f);yu(r,s,ke,ii(r))}else yu(r,s,f,ii(r))}catch(De){yu(r,s,{then:function(){},status:"rejected",reason:De},ii())}finally{ae.p=S,C!==null&&U.types!==null&&(C.types=U.types),X.T=C}}function uN(){}function o0(r,s,c,f){if(r.tag!==5)throw Error(i(476));var _=T_(r).queue;E_(r,_,s,ne,c===null?uN:function(){return k_(r),c(f)})}function T_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:ne},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function k_(r){var s=T_(r);s.next===null&&(s=r.alternate.memoizedState),yu(r,s.next.queue,{},ii())}function l0(){return tr(Lu)}function A_(){return Nn().memoizedState}function j_(){return Nn().memoizedState}function dN(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=ii();r=Da(c);var f=Ca(s,r,c);f!==null&&(Hr(f,s,c),fu(f,s,c)),s={cache:Pp()},r.payload=s;return}s=s.return}}function hN(r,s,c){var f=ii();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Eh(r)?O_(s,c):(c=ru(r,s,c,f),c!==null&&(Hr(c,r,f),D_(c,s,f)))}function N_(r,s,c){var f=ii();yu(r,s,c,f)}function yu(r,s,c,f){var _={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Eh(r))O_(s,_);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=s.lastRenderedReducer,S!==null))try{var C=s.lastRenderedState,U=S(C,c);if(_.hasEagerState=!0,_.eagerState=U,Yn(U,C))return ys(r,s,_,0),Yt===null&&Co(),!1}catch{}finally{}if(c=ru(r,s,_,f),c!==null)return Hr(c,r,f),D_(c,s,f),!0}return!1}function c0(r,s,c,f){if(f={lane:2,revertLane:U0(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Eh(r)){if(s)throw Error(i(479))}else s=ru(r,c,f,2),s!==null&&Hr(s,r,2)}function Eh(r){var s=r.alternate;return r===ut||s!==null&&s===ut}function O_(r,s){ql=bh=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function D_(r,s,c){if((c&4194048)!==0){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,oo(r,c)}}var vu={readContext:tr,use:_h,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};vu.useEffectEvent=xn;var C_={readContext:tr,use:_h,useCallback:function(r,s){return Sr().memoizedState=[r,s===void 0?null:s],r},useContext:tr,useEffect:p_,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,wh(4194308,4,v_.bind(null,s,r),c)},useLayoutEffect:function(r,s){return wh(4194308,4,r,s)},useInsertionEffect:function(r,s){wh(4,2,r,s)},useMemo:function(r,s){var c=Sr();s=s===void 0?null:s;var f=r();if(Ho){yn(!0);try{r()}finally{yn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(r,s,c){var f=Sr();if(c!==void 0){var _=c(s);if(Ho){yn(!0);try{c(s)}finally{yn(!1)}}}else _=s;return f.memoizedState=f.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},f.queue=r,r=r.dispatch=hN.bind(null,ut,r),[f.memoizedState,r]},useRef:function(r){var s=Sr();return r={current:r},s.memoizedState=r},useState:function(r){r=n0(r);var s=r.queue,c=N_.bind(null,ut,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:s0,useDeferredValue:function(r,s){var c=Sr();return a0(c,r,s)},useTransition:function(){var r=n0(!1);return r=E_.bind(null,ut,r.queue,!0,!1),Sr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var f=ut,_=Sr();if(yt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),Yt===null)throw Error(i(349));(Tt&127)!==0||Qv(f,s,c)}_.memoizedState=c;var S={value:c,getSnapshot:s};return _.queue=S,p_(t_.bind(null,f,S,r),[r]),f.flags|=2048,Zl(9,{destroy:void 0},e_.bind(null,f,S,c,s),null),c},useId:function(){var r=Sr(),s=Yt.identifierPrefix;if(yt){var c=Ge,f=Oe;c=(f&~(1<<32-hn(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=yh++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=sN++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:l0,useFormState:u_,useActionState:u_,useOptimistic:function(r){var s=Sr();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=c0.bind(null,ut,!0,c),c.dispatch=s,[r,s]},useMemoCache:Qp,useCacheRefresh:function(){return Sr().memoizedState=dN.bind(null,ut)},useEffectEvent:function(r){var s=Sr(),c={impl:r};return s.memoizedState=c,function(){if((Rt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},u0={readContext:tr,use:_h,useCallback:x_,useContext:tr,useEffect:i0,useImperativeHandle:__,useInsertionEffect:b_,useLayoutEffect:y_,useMemo:w_,useReducer:xh,useRef:m_,useState:function(){return xh(zs)},useDebugValue:s0,useDeferredValue:function(r,s){var c=Nn();return S_(c,Ut.memoizedState,r,s)},useTransition:function(){var r=xh(zs)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:bu(r),s]},useSyncExternalStore:Jv,useId:A_,useHostTransitionStatus:l0,useFormState:d_,useActionState:d_,useOptimistic:function(r,s){var c=Nn();return i_(c,Ut,r,s)},useMemoCache:Qp,useCacheRefresh:j_};u0.useEffectEvent=g_;var M_={readContext:tr,use:_h,useCallback:x_,useContext:tr,useEffect:i0,useImperativeHandle:__,useInsertionEffect:b_,useLayoutEffect:y_,useMemo:w_,useReducer:t0,useRef:m_,useState:function(){return t0(zs)},useDebugValue:s0,useDeferredValue:function(r,s){var c=Nn();return Ut===null?a0(c,r,s):S_(c,Ut.memoizedState,r,s)},useTransition:function(){var r=t0(zs)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:bu(r),s]},useSyncExternalStore:Jv,useId:A_,useHostTransitionStatus:l0,useFormState:f_,useActionState:f_,useOptimistic:function(r,s){var c=Nn();return Ut!==null?i_(c,Ut,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Qp,useCacheRefresh:j_};M_.useEffectEvent=g_;function d0(r,s,c,f){s=r.memoizedState,c=c(f,s),c=c==null?s:y({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var h0={enqueueSetState:function(r,s,c){r=r._reactInternals;var f=ii(),_=Da(f);_.payload=s,c!=null&&(_.callback=c),s=Ca(r,_,f),s!==null&&(Hr(s,r,f),fu(s,r,f))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var f=ii(),_=Da(f);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=Ca(r,_,f),s!==null&&(Hr(s,r,f),fu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=ii(),f=Da(c);f.tag=2,s!=null&&(f.callback=s),s=Ca(r,f,c),s!==null&&(Hr(s,r,c),fu(s,r,c))}};function R_(r,s,c,f,_,S,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,S,C):s.prototype&&s.prototype.isPureReactComponent?!Ea(c,f)||!Ea(_,S):!0}function L_(r,s,c,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==r&&h0.enqueueReplaceState(s,s.state,null)}function Go(r,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(r=r.defaultProps){c===s&&(c=y({},c));for(var _ in r)c[_]===void 0&&(c[_]=r[_])}return c}function B_(r){Do(r)}function P_(r){console.error(r)}function $_(r){Do(r)}function Th(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function I_(r,s,c){try{var f=r.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function f0(r,s,c){return c=Da(c),c.tag=3,c.payload={element:null},c.callback=function(){Th(r,s)},c}function z_(r){return r=Da(r),r.tag=3,r}function U_(r,s,c,f){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var S=f.value;r.payload=function(){return _(S)},r.callback=function(){I_(s,c,f)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){I_(s,c,f),typeof _!="function"&&($a===null?$a=new Set([this]):$a.add(this));var U=f.stack;this.componentDidCatch(f.value,{componentStack:U!==null?U:""})})}function fN(r,s,c,f,_){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&Il(s,c,_,!0),c=ei.current,c!==null){switch(c.tag){case 31:case 13:return ji===null?Ph():c.alternate===null&&wn===0&&(wn=3),c.flags&=-257,c.flags|=65536,c.lanes=_,f===hh?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),$0(r,f,_)),!1;case 22:return c.flags|=65536,f===hh?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),$0(r,f,_)),!1}throw Error(i(435,c.tag))}return $0(r,f,_),Ph(),!1}if(yt)return s=ei.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,f!==$l&&(r=Error(i(422),{cause:f}),Lo(h(r,c)))):(f!==$l&&(s=Error(i(423),{cause:f}),Lo(h(s,c))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,f=h(f,c),_=f0(r.stateNode,f,_),Gp(r,_),wn!==4&&(wn=2)),!1;var S=Error(i(520),{cause:f});if(S=h(S,c),Au===null?Au=[S]:Au.push(S),wn!==4&&(wn=2),s===null)return!0;f=h(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=_&-_,c.lanes|=r,r=f0(c.stateNode,f,r),Gp(c,r),!1;case 1:if(s=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($a===null||!$a.has(S))))return c.flags|=65536,_&=-_,c.lanes|=_,_=z_(_),U_(_,r,c,f),Gp(c,_),!1}c=c.return}while(c!==null);return!1}var m0=Error(i(461)),Ln=!1;function nr(r,s,c,f){s.child=r===null?qv(s,null,c,f):Uo(s,r.child,c,f)}function H_(r,s,c,f,_){c=c.render;var S=s.ref;if("ref"in f){var C={};for(var U in f)U!=="ref"&&(C[U]=f[U])}else C=f;return Po(s),f=Kp(r,s,c,C,S,_),U=Wp(),r!==null&&!Ln?(Xp(r,s,_),Us(r,s,_)):(yt&&U&&Hn(s),s.flags|=1,nr(r,s,f,_),s.child)}function G_(r,s,c,f,_){if(r===null){var S=c.type;return typeof S=="function"&&!Bl(S)&&S.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=S,F_(r,s,S,f,_)):(r=Ro(c.type,null,f,s,s.mode,_),r.ref=s.ref,r.return=s,s.child=r)}if(S=r.child,!w0(r,_)){var C=S.memoizedProps;if(c=c.compare,c=c!==null?c:Ea,c(C,f)&&r.ref===s.ref)return Us(r,s,_)}return s.flags|=1,r=Ai(S,f),r.ref=s.ref,r.return=s,s.child=r}function F_(r,s,c,f,_){if(r!==null){var S=r.memoizedProps;if(Ea(S,f)&&r.ref===s.ref)if(Ln=!1,s.pendingProps=f=S,w0(r,_))(r.flags&131072)!==0&&(Ln=!0);else return s.lanes=r.lanes,Us(r,s,_)}return p0(r,s,c,f,_)}function q_(r,s,c,f){var _=f.children,S=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,r!==null){for(f=s.child=r.child,_=0;f!==null;)_=_|f.lanes|f.childLanes,f=f.sibling;f=_&~S}else f=0,s.child=null;return Y_(r,s,S,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&uh(s,S!==null?S.cachePool:null),S!==null?Vv(s,S):qp(),Kv(s);else return f=s.lanes=536870912,Y_(r,s,S!==null?S.baseLanes|c:c,c,f)}else S!==null?(uh(s,S.cachePool),Vv(s,S),Ra(),s.memoizedState=null):(r!==null&&uh(s,null),qp(),Ra());return nr(r,s,_,c),s.child}function _u(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Y_(r,s,c,f,_){var S=Ip();return S=S===null?null:{parent:Mn._currentValue,pool:S},s.memoizedState={baseLanes:c,cachePool:S},r!==null&&uh(s,null),qp(),Kv(s),r!==null&&Il(r,s,f,!0),s.childLanes=_,null}function kh(r,s){return s=jh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Z_(r,s,c){return Uo(s,r.child,null,c),r=kh(s,s.pendingProps),r.flags|=2,ti(s),s.memoizedState=null,r}function mN(r,s,c){var f=s.pendingProps,_=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(yt){if(f.mode==="hidden")return r=kh(s,f),s.lanes=536870912,_u(null,r);if(Zp(s),(r=Ot)?(r=sw(r,Pr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:_e!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=su(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw _s(s);return s.lanes=536870912,null}return kh(s,f)}var S=r.memoizedState;if(S!==null){var C=S.dehydrated;if(Zp(s),_)if(s.flags&256)s.flags&=-257,s=Z_(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ln||Il(r,s,c,!1),_=(c&r.childLanes)!==0,Ln||_){if(f=Yt,f!==null&&(C=lo(f,c),C!==0&&C!==S.retryLane))throw S.retryLane=C,ki(r,C),Hr(f,r,C),m0;Ph(),s=Z_(r,s,c)}else r=S.treeContext,Ot=Ni(C.nextSibling),Nt=s,yt=!0,vs=null,Pr=!1,r!==null&&wr(s,r),s=kh(s,f),s.flags|=4096;return s}return r=Ai(r.child,{mode:f.mode,children:f.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Ah(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function p0(r,s,c,f,_){return Po(s),c=Kp(r,s,c,f,void 0,_),f=Wp(),r!==null&&!Ln?(Xp(r,s,_),Us(r,s,_)):(yt&&f&&Hn(s),s.flags|=1,nr(r,s,c,_),s.child)}function V_(r,s,c,f,_,S){return Po(s),s.updateQueue=null,c=Xv(s,f,c,_),Wv(r),f=Wp(),r!==null&&!Ln?(Xp(r,s,S),Us(r,s,S)):(yt&&f&&Hn(s),s.flags|=1,nr(r,s,c,S),s.child)}function K_(r,s,c,f,_){if(Po(s),s.stateNode===null){var S=Ls,C=c.contextType;typeof C=="object"&&C!==null&&(S=tr(C)),S=new c(f,S),s.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=h0,s.stateNode=S,S._reactInternals=s,S=s.stateNode,S.props=f,S.state=s.memoizedState,S.refs={},Up(s),C=c.contextType,S.context=typeof C=="object"&&C!==null?tr(C):Ls,S.state=s.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(d0(s,c,C,f),S.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(C=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),C!==S.state&&h0.enqueueReplaceState(S,S.state,null),pu(s,f,S,_),mu(),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(r===null){S=s.stateNode;var U=s.memoizedProps,ie=Go(c,U);S.props=ie;var ye=S.context,ke=c.contextType;C=Ls,typeof ke=="object"&&ke!==null&&(C=tr(ke));var De=c.getDerivedStateFromProps;ke=typeof De=="function"||typeof S.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,ke||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U||ye!==C)&&L_(s,S,f,C),Oa=!1;var xe=s.memoizedState;S.state=xe,pu(s,f,S,_),mu(),ye=s.memoizedState,U||xe!==ye||Oa?(typeof De=="function"&&(d0(s,c,De,f),ye=s.memoizedState),(ie=Oa||R_(s,c,ie,f,xe,ye,C))?(ke||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=ye),S.props=f,S.state=ye,S.context=C,f=ie):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Hp(r,s),C=s.memoizedProps,ke=Go(c,C),S.props=ke,De=s.pendingProps,xe=S.context,ye=c.contextType,ie=Ls,typeof ye=="object"&&ye!==null&&(ie=tr(ye)),U=c.getDerivedStateFromProps,(ye=typeof U=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==De||xe!==ie)&&L_(s,S,f,ie),Oa=!1,xe=s.memoizedState,S.state=xe,pu(s,f,S,_),mu();var Se=s.memoizedState;C!==De||xe!==Se||Oa||r!==null&&r.dependencies!==null&&lh(r.dependencies)?(typeof U=="function"&&(d0(s,c,U,f),Se=s.memoizedState),(ke=Oa||R_(s,c,ke,f,xe,Se,ie)||r!==null&&r.dependencies!==null&&lh(r.dependencies))?(ye||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Se,ie),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Se,ie)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||C===r.memoizedProps&&xe===r.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&xe===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Se),S.props=f,S.state=Se,S.context=ie,f=ke):(typeof S.componentDidUpdate!="function"||C===r.memoizedProps&&xe===r.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&xe===r.memoizedState||(s.flags|=1024),f=!1)}return S=f,Ah(r,s),f=(s.flags&128)!==0,S||f?(S=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:S.render(),s.flags|=1,r!==null&&f?(s.child=Uo(s,r.child,null,_),s.child=Uo(s,null,c,_)):nr(r,s,c,_),s.memoizedState=S.state,r=s.child):r=Us(r,s,_),r}function W_(r,s,c,f){return Ps(),s.flags|=256,nr(r,s,c,f),s.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b0(r){return{baseLanes:r,cachePool:Iv()}}function y0(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=ri),r}function X_(r,s,c){var f=s.pendingProps,_=!1,S=(s.flags&128)!==0,C;if((C=S)||(C=r!==null&&r.memoizedState===null?!1:(jn.current&2)!==0),C&&(_=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,r===null){if(yt){if(_?Ma(s):Ra(),(r=Ot)?(r=sw(r,Pr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:_e!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=su(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw _s(s);return eg(r)?s.lanes=32:s.lanes=536870912,null}var U=f.children;return f=f.fallback,_?(Ra(),_=s.mode,U=jh({mode:"hidden",children:U},_),f=Bs(f,_,c,null),U.return=s,f.return=s,U.sibling=f,s.child=U,f=s.child,f.memoizedState=b0(c),f.childLanes=y0(r,C,c),s.memoizedState=g0,_u(null,f)):(Ma(s),v0(s,U))}var ie=r.memoizedState;if(ie!==null&&(U=ie.dehydrated,U!==null)){if(S)s.flags&256?(Ma(s),s.flags&=-257,s=_0(r,s,c)):s.memoizedState!==null?(Ra(),s.child=r.child,s.flags|=128,s=null):(Ra(),U=f.fallback,_=s.mode,f=jh({mode:"visible",children:f.children},_),U=Bs(U,_,c,null),U.flags|=2,f.return=s,U.return=s,f.sibling=U,s.child=f,Uo(s,r.child,null,c),f=s.child,f.memoizedState=b0(c),f.childLanes=y0(r,C,c),s.memoizedState=g0,s=_u(null,f));else if(Ma(s),eg(U)){if(C=U.nextSibling&&U.nextSibling.dataset,C)var ye=C.dgst;C=ye,f=Error(i(419)),f.stack="",f.digest=C,Lo({value:f,source:null,stack:null}),s=_0(r,s,c)}else if(Ln||Il(r,s,c,!1),C=(c&r.childLanes)!==0,Ln||C){if(C=Yt,C!==null&&(f=lo(C,c),f!==0&&f!==ie.retryLane))throw ie.retryLane=f,ki(r,f),Hr(C,r,f),m0;Q0(U)||Ph(),s=_0(r,s,c)}else Q0(U)?(s.flags|=192,s.child=r.child,s=null):(r=ie.treeContext,Ot=Ni(U.nextSibling),Nt=s,yt=!0,vs=null,Pr=!1,r!==null&&wr(s,r),s=v0(s,f.children),s.flags|=4096);return s}return _?(Ra(),U=f.fallback,_=s.mode,ie=r.child,ye=ie.sibling,f=Ai(ie,{mode:"hidden",children:f.children}),f.subtreeFlags=ie.subtreeFlags&65011712,ye!==null?U=Ai(ye,U):(U=Bs(U,_,c,null),U.flags|=2),U.return=s,f.return=s,f.sibling=U,s.child=f,_u(null,f),f=s.child,U=r.child.memoizedState,U===null?U=b0(c):(_=U.cachePool,_!==null?(ie=Mn._currentValue,_=_.parent!==ie?{parent:ie,pool:ie}:_):_=Iv(),U={baseLanes:U.baseLanes|c,cachePool:_}),f.memoizedState=U,f.childLanes=y0(r,C,c),s.memoizedState=g0,_u(r.child,f)):(Ma(s),c=r.child,r=c.sibling,c=Ai(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,r!==null&&(C=s.deletions,C===null?(s.deletions=[r],s.flags|=16):C.push(r)),s.child=c,s.memoizedState=null,c)}function v0(r,s){return s=jh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function jh(r,s){return r=fr(22,r,null,s),r.lanes=0,r}function _0(r,s,c){return Uo(s,r.child,null,c),r=v0(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function J_(r,s,c){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Lp(r.return,s,c)}function x0(r,s,c,f,_,S){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:_,treeForkCount:S}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=c,C.tailMode=_,C.treeForkCount=S)}function Q_(r,s,c){var f=s.pendingProps,_=f.revealOrder,S=f.tail;f=f.children;var C=jn.current,U=(C&2)!==0;if(U?(C=C&1|2,s.flags|=128):C&=1,K(jn,C),nr(r,s,f,c),f=yt?$:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&J_(r,c,s);else if(r.tag===19)J_(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(c=s.child,_=null;c!==null;)r=c.alternate,r!==null&&gh(r)===null&&(_=c),c=c.sibling;c=_,c===null?(_=s.child,s.child=null):(_=c.sibling,c.sibling=null),x0(s,!1,_,c,S,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=s.child,s.child=null;_!==null;){if(r=_.alternate,r!==null&&gh(r)===null){s.child=_;break}r=_.sibling,_.sibling=c,c=_,_=r}x0(s,!0,c,null,S,f);break;case"together":x0(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Us(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Pa|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Il(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=Ai(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=Ai(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function w0(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&lh(r)))}function pN(r,s,c){switch(s.tag){case 3:ce(s,s.stateNode.containerInfo),Na(s,Mn,r.memoizedState.cache),Ps();break;case 27:case 5:ve(s);break;case 4:ce(s,s.stateNode.containerInfo);break;case 10:Na(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Zp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Ma(s),s.flags|=128,null):(c&s.child.childLanes)!==0?X_(r,s,c):(Ma(s),r=Us(r,s,c),r!==null?r.sibling:null);Ma(s);break;case 19:var _=(r.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(Il(r,s,c,!1),f=(c&s.childLanes)!==0),_){if(f)return Q_(r,s,c);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),K(jn,jn.current),f)break;return null;case 22:return s.lanes=0,q_(r,s,c,s.pendingProps);case 24:Na(s,Mn,r.memoizedState.cache)}return Us(r,s,c)}function ex(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ln=!0;else{if(!w0(r,c)&&(s.flags&128)===0)return Ln=!1,pN(r,s,c);Ln=(r.flags&131072)!==0}else Ln=!1,yt&&(s.flags&1048576)!==0&&ft(s,$,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(r=Io(s.elementType),s.type=r,typeof r=="function")Bl(r)?(f=Go(r,f),s.tag=1,s=K_(null,s,r,f,c)):(s.tag=0,s=p0(null,s,r,f,c));else{if(r!=null){var _=r.$$typeof;if(_===M){s.tag=11,s=H_(null,s,r,f,c);break e}else if(_===G){s.tag=14,s=G_(null,s,r,f,c);break e}}throw s=te(r)||r,Error(i(306,s,""))}}return s;case 0:return p0(r,s,s.type,s.pendingProps,c);case 1:return f=s.type,_=Go(f,s.pendingProps),K_(r,s,f,_,c);case 3:e:{if(ce(s,s.stateNode.containerInfo),r===null)throw Error(i(387));f=s.pendingProps;var S=s.memoizedState;_=S.element,Hp(r,s),pu(s,f,null,c);var C=s.memoizedState;if(f=C.cache,Na(s,Mn,f),f!==S.cache&&Bp(s,[Mn],c,!0),mu(),f=C.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=S,s.memoizedState=S,s.flags&256){s=W_(r,s,f,c);break e}else if(f!==_){_=h(Error(i(424)),s),Lo(_),s=W_(r,s,f,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=Ni(r.firstChild),Nt=s,yt=!0,vs=null,Pr=!0,c=qv(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ps(),f===_){s=Us(r,s,c);break e}nr(r,s,f,c)}s=s.child}return s;case 26:return Ah(r,s),r===null?(c=dw(s.type,null,s.pendingProps,null))?s.memoizedState=c:yt||(c=s.type,r=s.pendingProps,f=Fh(F.current).createElement(c),f[sn]=s,f[An]=r,rr(f,c,r),St(f),s.stateNode=f):s.memoizedState=dw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return ve(s),r===null&&yt&&(f=s.stateNode=lw(s.type,s.pendingProps,F.current),Nt=s,Pr=!0,_=Ot,Ha(s.type)?(tg=_,Ot=Ni(f.firstChild)):Ot=_),nr(r,s,s.pendingProps.children,c),Ah(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&yt&&((_=f=Ot)&&(f=qN(f,s.type,s.pendingProps,Pr),f!==null?(s.stateNode=f,Nt=s,Ot=Ni(f.firstChild),Pr=!1,_=!0):_=!1),_||_s(s)),ve(s),_=s.type,S=s.pendingProps,C=r!==null?r.memoizedProps:null,f=S.children,W0(_,S)?f=null:C!==null&&W0(_,C)&&(s.flags|=32),s.memoizedState!==null&&(_=Kp(r,s,aN,null,null,c),Lu._currentValue=_),Ah(r,s),nr(r,s,f,c),s.child;case 6:return r===null&&yt&&((r=c=Ot)&&(c=YN(c,s.pendingProps,Pr),c!==null?(s.stateNode=c,Nt=s,Ot=null,r=!0):r=!1),r||_s(s)),null;case 13:return X_(r,s,c);case 4:return ce(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=Uo(s,null,f,c):nr(r,s,f,c),s.child;case 11:return H_(r,s,s.type,s.pendingProps,c);case 7:return nr(r,s,s.pendingProps,c),s.child;case 8:return nr(r,s,s.pendingProps.children,c),s.child;case 12:return nr(r,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,Na(s,s.type,f.value),nr(r,s,f.children,c),s.child;case 9:return _=s.type._context,f=s.pendingProps.children,Po(s),_=tr(_),f=f(_),s.flags|=1,nr(r,s,f,c),s.child;case 14:return G_(r,s,s.type,s.pendingProps,c);case 15:return F_(r,s,s.type,s.pendingProps,c);case 19:return Q_(r,s,c);case 31:return mN(r,s,c);case 22:return q_(r,s,c,s.pendingProps);case 24:return Po(s),f=tr(Mn),r===null?(_=Ip(),_===null&&(_=Yt,S=Pp(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=c),_=S),s.memoizedState={parent:f,cache:_},Up(s),Na(s,Mn,_)):((r.lanes&c)!==0&&(Hp(r,s),pu(s,null,null,c),mu()),_=r.memoizedState,S=s.memoizedState,_.parent!==f?(_={parent:f,cache:f},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),Na(s,Mn,f)):(f=S.cache,Na(s,Mn,f),f!==_.cache&&Bp(s,[Mn],c,!0))),nr(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Hs(r){r.flags|=4}function S0(r,s,c,f,_){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(Ax())r.flags|=8192;else throw zo=hh,zp}else r.flags&=-16777217}function tx(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!gw(s))if(Ax())r.flags|=8192;else throw zo=hh,zp}function Nh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?io():536870912,r.lanes|=s,Xl|=s)}function xu(r,s){if(!yt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function tn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(s)for(var _=r.child;_!==null;)c|=_.lanes|_.childLanes,f|=_.subtreeFlags&65011712,f|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)c|=_.lanes|_.childLanes,f|=_.subtreeFlags,f|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=f,r.childLanes=c,s}function gN(r,s,c){var f=s.pendingProps;switch(_n(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return tn(s),null;case 3:return c=s.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),$s(Mn),le(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Ki(s)?Hs(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lu())),tn(s),null;case 26:var _=s.type,S=s.memoizedState;return r===null?(Hs(s),S!==null?(tn(s),tx(s,S)):(tn(s),S0(s,_,null,f,c))):S?S!==r.memoizedState?(Hs(s),tn(s),tx(s,S)):(tn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==f&&Hs(s),tn(s),S0(s,_,r,f,c)),null;case 27:if(Ae(s),c=F.current,_=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&Hs(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return tn(s),null}r=W.current,Ki(s)?ou(s):(r=lw(_,f,c),s.stateNode=r,Hs(s))}return tn(s),null;case 5:if(Ae(s),_=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&Hs(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return tn(s),null}if(S=W.current,Ki(s))ou(s);else{var C=Fh(F.current);switch(S){case 1:S=C.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:S=C.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":S=C.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":S=C.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":S=C.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?S.multiple=!0:f.size&&(S.size=f.size);break;default:S=typeof f.is=="string"?C.createElement(_,{is:f.is}):C.createElement(_)}}S[sn]=s,S[An]=f;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)S.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=S;e:switch(rr(S,_,f),_){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Hs(s)}}return tn(s),S0(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==f&&Hs(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(r=F.current,Ki(s)){if(r=s.stateNode,c=s.memoizedProps,f=null,_=Nt,_!==null)switch(_.tag){case 27:case 5:f=_.memoizedProps}r[sn]=s,r=!!(r.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Xx(r.nodeValue,c)),r||_s(s,!0)}else r=Fh(r).createTextNode(f),r[sn]=s,s.stateNode=r}return tn(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(f=Ki(s),c!==null){if(r===null){if(!f)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[sn]=s}else Ps(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),r=!1}else c=lu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(ti(s),s):(ti(s),null);if((s.flags&128)!==0)throw Error(i(558))}return tn(s),null;case 13:if(f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=Ki(s),f!==null&&f.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[sn]=s}else Ps(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),_=!1}else _=lu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return s.flags&256?(ti(s),s):(ti(s),null)}return ti(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,r=r!==null&&r.memoizedState!==null,c&&(f=s.child,_=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(_=f.alternate.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==_&&(f.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),Nh(s,s.updateQueue),tn(s),null);case 4:return le(),r===null&&q0(s.stateNode.containerInfo),tn(s),null;case 10:return $s(s.type),tn(s),null;case 19:if(P(jn),f=s.memoizedState,f===null)return tn(s),null;if(_=(s.flags&128)!==0,S=f.rendering,S===null)if(_)xu(f,!1);else{if(wn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(S=gh(r),S!==null){for(s.flags|=128,xu(f,!1),r=S.updateQueue,s.updateQueue=r,Nh(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)iu(c,r),c=c.sibling;return K(jn,jn.current&1|2),yt&&Xe(s,f.treeForkCount),s.child}r=r.sibling}f.tail!==null&&Be()>Rh&&(s.flags|=128,_=!0,xu(f,!1),s.lanes=4194304)}else{if(!_)if(r=gh(S),r!==null){if(s.flags|=128,_=!0,r=r.updateQueue,s.updateQueue=r,Nh(s,r),xu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!S.alternate&&!yt)return tn(s),null}else 2*Be()-f.renderingStartTime>Rh&&c!==536870912&&(s.flags|=128,_=!0,xu(f,!1),s.lanes=4194304);f.isBackwards?(S.sibling=s.child,s.child=S):(r=f.last,r!==null?r.sibling=S:s.child=S,f.last=S)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Be(),r.sibling=null,c=jn.current,K(jn,_?c&1|2:c&1),yt&&Xe(s,f.treeForkCount),r):(tn(s),null);case 22:case 23:return ti(s),Yp(),f=s.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),c=s.updateQueue,c!==null&&Nh(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),r!==null&&P($o),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),$s(Mn),tn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function bN(r,s){switch(_n(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return $s(Mn),le(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 31:if(s.memoizedState!==null){if(ti(s),s.alternate===null)throw Error(i(340));Ps()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(ti(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ps()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return P(jn),null;case 4:return le(),null;case 10:return $s(s.type),null;case 22:case 23:return ti(s),Yp(),r!==null&&P($o),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return $s(Mn),null;case 25:return null;default:return null}}function nx(r,s){switch(_n(s),s.tag){case 3:$s(Mn),le();break;case 26:case 27:case 5:Ae(s);break;case 4:le();break;case 31:s.memoizedState!==null&&ti(s);break;case 13:ti(s);break;case 19:P(jn);break;case 10:$s(s.type);break;case 22:case 23:ti(s),Yp(),r!==null&&P($o);break;case 24:$s(Mn)}}function wu(r,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var _=f.next;c=_;do{if((c.tag&r)===r){f=void 0;var S=c.create,C=c.inst;f=S(),C.destroy=f}c=c.next}while(c!==_)}}catch(U){It(s,s.return,U)}}function La(r,s,c){try{var f=s.updateQueue,_=f!==null?f.lastEffect:null;if(_!==null){var S=_.next;f=S;do{if((f.tag&r)===r){var C=f.inst,U=C.destroy;if(U!==void 0){C.destroy=void 0,_=s;var ie=c,ye=U;try{ye()}catch(ke){It(_,ie,ke)}}}f=f.next}while(f!==S)}}catch(ke){It(s,s.return,ke)}}function rx(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{Zv(s,c)}catch(f){It(r,r.return,f)}}}function ix(r,s,c){c.props=Go(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(f){It(r,s,f)}}function Su(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof c=="function"?r.refCleanup=c(f):c.current=f}}catch(_){It(r,s,_)}}function ws(r,s){var c=r.ref,f=r.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(_){It(r,s,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){It(r,s,_)}else c.current=null}function sx(r){var s=r.type,c=r.memoizedProps,f=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(_){It(r,r.return,_)}}function E0(r,s,c){try{var f=r.stateNode;IN(f,r.type,c,s),f[An]=s}catch(_){It(r,r.return,_)}}function ax(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ha(r.type)||r.tag===4}function T0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ax(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ha(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function k0(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(f!==4&&(f===27&&Ha(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(k0(r,s,c),r=r.sibling;r!==null;)k0(r,s,c),r=r.sibling}function Oh(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(f!==4&&(f===27&&Ha(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Oh(r,s,c),r=r.sibling;r!==null;)Oh(r,s,c),r=r.sibling}function ox(r){var s=r.stateNode,c=r.memoizedProps;try{for(var f=r.type,_=s.attributes;_.length;)s.removeAttributeNode(_[0]);rr(s,f,c),s[sn]=r,s[An]=c}catch(S){It(r,r.return,S)}}var Gs=!1,Bn=!1,A0=!1,lx=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function yN(r,s){if(r=r.containerInfo,V0=Xh,r=Ao(r),ms(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var _=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var C=0,U=-1,ie=-1,ye=0,ke=0,De=r,xe=null;t:for(;;){for(var Se;De!==c||_!==0&&De.nodeType!==3||(U=C+_),De!==S||f!==0&&De.nodeType!==3||(ie=C+f),De.nodeType===3&&(C+=De.nodeValue.length),(Se=De.firstChild)!==null;)xe=De,De=Se;for(;;){if(De===r)break t;if(xe===c&&++ye===_&&(U=C),xe===S&&++ke===f&&(ie=C),(Se=De.nextSibling)!==null)break;De=xe,xe=De.parentNode}De=Se}c=U===-1||ie===-1?null:{start:U,end:ie}}else c=null}c=c||{start:0,end:0}}else c=null;for(K0={focusedElem:r,selectionRange:c},Xh=!1,Vn=s;Vn!==null;)if(s=Vn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Vn=r;else for(;Vn!==null;){switch(s=Vn,S=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)_=r[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&S!==null){r=void 0,c=s,_=S.memoizedProps,S=S.memoizedState,f=c.stateNode;try{var Ye=Go(c.type,_);r=f.getSnapshotBeforeUpdate(Ye,S),f.__reactInternalSnapshotBeforeUpdate=r}catch(nt){It(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)J0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":J0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Vn=r;break}Vn=s.return}}function cx(r,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:qs(r,c),f&4&&wu(5,c);break;case 1:if(qs(r,c),f&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(C){It(c,c.return,C)}else{var _=Go(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(_,s,r.__reactInternalSnapshotBeforeUpdate)}catch(C){It(c,c.return,C)}}f&64&&rx(c),f&512&&Su(c,c.return);break;case 3:if(qs(r,c),f&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{Zv(r,s)}catch(C){It(c,c.return,C)}}break;case 27:s===null&&f&4&&ox(c);case 26:case 5:qs(r,c),s===null&&f&4&&sx(c),f&512&&Su(c,c.return);break;case 12:qs(r,c);break;case 31:qs(r,c),f&4&&hx(r,c);break;case 13:qs(r,c),f&4&&fx(r,c),f&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=AN.bind(null,c),ZN(r,c))));break;case 22:if(f=c.memoizedState!==null||Gs,!f){s=s!==null&&s.memoizedState!==null||Bn,_=Gs;var S=Bn;Gs=f,(Bn=s)&&!S?Ys(r,c,(c.subtreeFlags&8772)!==0):qs(r,c),Gs=_,Bn=S}break;case 30:break;default:qs(r,c)}}function ux(r){var s=r.alternate;s!==null&&(r.alternate=null,ux(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&tt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,$r=!1;function Fs(r,s,c){for(c=c.child;c!==null;)dx(r,s,c),c=c.sibling}function dx(r,s,c){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(dn,c)}catch{}switch(c.tag){case 26:Bn||ws(c,s),Fs(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Bn||ws(c,s);var f=on,_=$r;Ha(c.type)&&(on=c.stateNode,$r=!1),Fs(r,s,c),Cu(c.stateNode),on=f,$r=_;break;case 5:Bn||ws(c,s);case 6:if(f=on,_=$r,on=null,Fs(r,s,c),on=f,$r=_,on!==null)if($r)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(S){It(c,s,S)}else try{on.removeChild(c.stateNode)}catch(S){It(c,s,S)}break;case 18:on!==null&&($r?(r=on,rw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),sc(r)):rw(on,c.stateNode));break;case 4:f=on,_=$r,on=c.stateNode.containerInfo,$r=!0,Fs(r,s,c),on=f,$r=_;break;case 0:case 11:case 14:case 15:La(2,c,s),Bn||La(4,c,s),Fs(r,s,c);break;case 1:Bn||(ws(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&ix(c,s,f)),Fs(r,s,c);break;case 21:Fs(r,s,c);break;case 22:Bn=(f=Bn)||c.memoizedState!==null,Fs(r,s,c),Bn=f;break;default:Fs(r,s,c)}}function hx(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{sc(r)}catch(c){It(s,s.return,c)}}}function fx(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{sc(r)}catch(c){It(s,s.return,c)}}function vN(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new lx),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new lx),s;default:throw Error(i(435,r.tag))}}function Dh(r,s){var c=vN(r);s.forEach(function(f){if(!c.has(f)){c.add(f);var _=jN.bind(null,r,f);f.then(_,_)}})}function Ir(r,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var _=c[f],S=r,C=s,U=C;e:for(;U!==null;){switch(U.tag){case 27:if(Ha(U.type)){on=U.stateNode,$r=!1;break e}break;case 5:on=U.stateNode,$r=!1;break e;case 3:case 4:on=U.stateNode.containerInfo,$r=!0;break e}U=U.return}if(on===null)throw Error(i(160));dx(S,C,_),on=null,$r=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)mx(s,r),s=s.sibling}var Xi=null;function mx(r,s){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ir(s,r),zr(r),f&4&&(La(3,r,r.return),wu(3,r),La(5,r,r.return));break;case 1:Ir(s,r),zr(r),f&512&&(Bn||c===null||ws(c,c.return)),f&64&&Gs&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var _=Xi;if(Ir(s,r),zr(r),f&512&&(Bn||c===null||ws(c,c.return)),f&4){var S=c!==null?c.memoizedState:null;if(f=r.memoizedState,c===null)if(f===null)if(r.stateNode===null){e:{f=r.type,c=r.memoizedProps,_=_.ownerDocument||_;t:switch(f){case"title":S=_.getElementsByTagName("title")[0],(!S||S[gt]||S[sn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(f),_.head.insertBefore(S,_.querySelector("head > title"))),rr(S,f,c),S[sn]=r,St(S),f=S;break e;case"link":var C=mw("link","href",_).get(f+(c.href||""));if(C){for(var U=0;U<C.length;U++)if(S=C[U],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(U,1);break t}}S=_.createElement(f),rr(S,f,c),_.head.appendChild(S);break;case"meta":if(C=mw("meta","content",_).get(f+(c.content||""))){for(U=0;U<C.length;U++)if(S=C[U],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(U,1);break t}}S=_.createElement(f),rr(S,f,c),_.head.appendChild(S);break;default:throw Error(i(468,f))}S[sn]=r,St(S),f=S}r.stateNode=f}else pw(_,r.type,r.stateNode);else r.stateNode=fw(_,f,r.memoizedProps);else S!==f?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,f===null?pw(_,r.type,r.stateNode):fw(_,f,r.memoizedProps)):f===null&&r.stateNode!==null&&E0(r,r.memoizedProps,c.memoizedProps)}break;case 27:Ir(s,r),zr(r),f&512&&(Bn||c===null||ws(c,c.return)),c!==null&&f&4&&E0(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Ir(s,r),zr(r),f&512&&(Bn||c===null||ws(c,c.return)),r.flags&32){_=r.stateNode;try{_i(_,"")}catch(Ye){It(r,r.return,Ye)}}f&4&&r.stateNode!=null&&(_=r.memoizedProps,E0(r,_,c!==null?c.memoizedProps:_)),f&1024&&(A0=!0);break;case 6:if(Ir(s,r),zr(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,c=r.stateNode;try{c.nodeValue=f}catch(Ye){It(r,r.return,Ye)}}break;case 3:if(Zh=null,_=Xi,Xi=qh(s.containerInfo),Ir(s,r),Xi=_,zr(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{sc(s.containerInfo)}catch(Ye){It(r,r.return,Ye)}A0&&(A0=!1,px(r));break;case 4:f=Xi,Xi=qh(r.stateNode.containerInfo),Ir(s,r),zr(r),Xi=f;break;case 12:Ir(s,r),zr(r);break;case 31:Ir(s,r),zr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Dh(r,f)));break;case 13:Ir(s,r),zr(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Mh=Be()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Dh(r,f)));break;case 22:_=r.memoizedState!==null;var ie=c!==null&&c.memoizedState!==null,ye=Gs,ke=Bn;if(Gs=ye||_,Bn=ke||ie,Ir(s,r),Bn=ke,Gs=ye,zr(r),f&8192)e:for(s=r.stateNode,s._visibility=_?s._visibility&-2:s._visibility|1,_&&(c===null||ie||Gs||Bn||Fo(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){ie=c=s;try{if(S=ie.stateNode,_)C=S.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{U=ie.stateNode;var De=ie.memoizedProps.style,xe=De!=null&&De.hasOwnProperty("display")?De.display:null;U.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Ye){It(ie,ie.return,Ye)}}}else if(s.tag===6){if(c===null){ie=s;try{ie.stateNode.nodeValue=_?"":ie.memoizedProps}catch(Ye){It(ie,ie.return,Ye)}}}else if(s.tag===18){if(c===null){ie=s;try{var Se=ie.stateNode;_?iw(Se,!0):iw(ie.stateNode,!1)}catch(Ye){It(ie,ie.return,Ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=r.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Dh(r,c))));break;case 19:Ir(s,r),zr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Dh(r,f)));break;case 30:break;case 21:break;default:Ir(s,r),zr(r)}}function zr(r){var s=r.flags;if(s&2){try{for(var c,f=r.return;f!==null;){if(ax(f)){c=f;break}f=f.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var _=c.stateNode,S=T0(r);Oh(r,S,_);break;case 5:var C=c.stateNode;c.flags&32&&(_i(C,""),c.flags&=-33);var U=T0(r);Oh(r,U,C);break;case 3:case 4:var ie=c.stateNode.containerInfo,ye=T0(r);k0(r,ye,ie);break;default:throw Error(i(161))}}catch(ke){It(r,r.return,ke)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function px(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;px(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function qs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cx(r,s.alternate,s),s=s.sibling}function Fo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:La(4,s,s.return),Fo(s);break;case 1:ws(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&ix(s,s.return,c),Fo(s);break;case 27:Cu(s.stateNode);case 26:case 5:ws(s,s.return),Fo(s);break;case 22:s.memoizedState===null&&Fo(s);break;case 30:Fo(s);break;default:Fo(s)}r=r.sibling}}function Ys(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,_=r,S=s,C=S.flags;switch(S.tag){case 0:case 11:case 15:Ys(_,S,c),wu(4,S);break;case 1:if(Ys(_,S,c),f=S,_=f.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ye){It(f,f.return,ye)}if(f=S,_=f.updateQueue,_!==null){var U=f.stateNode;try{var ie=_.shared.hiddenCallbacks;if(ie!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ie.length;_++)Yv(ie[_],U)}catch(ye){It(f,f.return,ye)}}c&&C&64&&rx(S),Su(S,S.return);break;case 27:ox(S);case 26:case 5:Ys(_,S,c),c&&f===null&&C&4&&sx(S),Su(S,S.return);break;case 12:Ys(_,S,c);break;case 31:Ys(_,S,c),c&&C&4&&hx(_,S);break;case 13:Ys(_,S,c),c&&C&4&&fx(_,S);break;case 22:S.memoizedState===null&&Ys(_,S,c),Su(S,S.return);break;case 30:break;default:Ys(_,S,c)}s=s.sibling}}function j0(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&cu(c))}function N0(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cu(r))}function Ji(r,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gx(r,s,c,f),s=s.sibling}function gx(r,s,c,f){var _=s.flags;switch(s.tag){case 0:case 11:case 15:Ji(r,s,c,f),_&2048&&wu(9,s);break;case 1:Ji(r,s,c,f);break;case 3:Ji(r,s,c,f),_&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cu(r)));break;case 12:if(_&2048){Ji(r,s,c,f),r=s.stateNode;try{var S=s.memoizedProps,C=S.id,U=S.onPostCommit;typeof U=="function"&&U(C,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ie){It(s,s.return,ie)}}else Ji(r,s,c,f);break;case 31:Ji(r,s,c,f);break;case 13:Ji(r,s,c,f);break;case 23:break;case 22:S=s.stateNode,C=s.alternate,s.memoizedState!==null?S._visibility&2?Ji(r,s,c,f):Eu(r,s):S._visibility&2?Ji(r,s,c,f):(S._visibility|=2,Vl(r,s,c,f,(s.subtreeFlags&10256)!==0||!1)),_&2048&&j0(C,s);break;case 24:Ji(r,s,c,f),_&2048&&N0(s.alternate,s);break;default:Ji(r,s,c,f)}}function Vl(r,s,c,f,_){for(_=_&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var S=r,C=s,U=c,ie=f,ye=C.flags;switch(C.tag){case 0:case 11:case 15:Vl(S,C,U,ie,_),wu(8,C);break;case 23:break;case 22:var ke=C.stateNode;C.memoizedState!==null?ke._visibility&2?Vl(S,C,U,ie,_):Eu(S,C):(ke._visibility|=2,Vl(S,C,U,ie,_)),_&&ye&2048&&j0(C.alternate,C);break;case 24:Vl(S,C,U,ie,_),_&&ye&2048&&N0(C.alternate,C);break;default:Vl(S,C,U,ie,_)}s=s.sibling}}function Eu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,f=s,_=f.flags;switch(f.tag){case 22:Eu(c,f),_&2048&&j0(f.alternate,f);break;case 24:Eu(c,f),_&2048&&N0(f.alternate,f);break;default:Eu(c,f)}s=s.sibling}}var Tu=8192;function Kl(r,s,c){if(r.subtreeFlags&Tu)for(r=r.child;r!==null;)bx(r,s,c),r=r.sibling}function bx(r,s,c){switch(r.tag){case 26:Kl(r,s,c),r.flags&Tu&&r.memoizedState!==null&&sO(c,Xi,r.memoizedState,r.memoizedProps);break;case 5:Kl(r,s,c);break;case 3:case 4:var f=Xi;Xi=qh(r.stateNode.containerInfo),Kl(r,s,c),Xi=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=Tu,Tu=16777216,Kl(r,s,c),Tu=f):Kl(r,s,c));break;default:Kl(r,s,c)}}function yx(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ku(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Vn=f,_x(f,r)}yx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)vx(r),r=r.sibling}function vx(r){switch(r.tag){case 0:case 11:case 15:ku(r),r.flags&2048&&La(9,r,r.return);break;case 3:ku(r);break;case 12:ku(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Ch(r)):ku(r);break;default:ku(r)}}function Ch(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Vn=f,_x(f,r)}yx(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:La(8,s,s.return),Ch(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Ch(s));break;default:Ch(s)}r=r.sibling}}function _x(r,s){for(;Vn!==null;){var c=Vn;switch(c.tag){case 0:case 11:case 15:La(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:cu(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Vn=f;else e:for(c=r;Vn!==null;){f=Vn;var _=f.sibling,S=f.return;if(ux(f),f===c){Vn=null;break e}if(_!==null){_.return=S,Vn=_;break e}Vn=S}}}var _N={getCacheForType:function(r){var s=tr(Mn),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return tr(Mn).controller.signal}},xN=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Yt=null,vt=null,Tt=0,$t=0,ni=null,Ba=!1,Wl=!1,O0=!1,Zs=0,wn=0,Pa=0,qo=0,D0=0,ri=0,Xl=0,Au=null,Ur=null,C0=!1,Mh=0,xx=0,Rh=1/0,Lh=null,$a=null,Gn=0,Ia=null,Jl=null,Vs=0,M0=0,R0=null,wx=null,ju=0,L0=null;function ii(){return(Rt&2)!==0&&Tt!==0?Tt&-Tt:X.T!==null?U0():Ns()}function Sx(){if(ri===0)if((Tt&536870912)===0||yt){var r=Cn;Cn<<=1,(Cn&3932160)===0&&(Cn=262144),ri=r}else ri=536870912;return r=ei.current,r!==null&&(r.flags|=32),ri}function Hr(r,s,c){(r===Yt&&($t===2||$t===9)||r.cancelPendingCommit!==null)&&(Ql(r,0),za(r,Tt,ri,!1)),Gi(r,c),((Rt&2)===0||r!==Yt)&&(r===Yt&&((Rt&2)===0&&(qo|=c),wn===4&&za(r,Tt,ri,!1)),Ss(r))}function Ex(r,s,c){if((Rt&6)!==0)throw Error(i(327));var f=!c&&(s&127)===0&&(s&r.expiredLanes)===0||bi(r,s),_=f?EN(r,s):P0(r,s,!0),S=f;do{if(_===0){Wl&&!f&&za(r,s,0,!1);break}else{if(c=r.current.alternate,S&&!wN(c)){_=P0(r,s,!1),S=!1;continue}if(_===2){if(S=s,r.errorRecoveryDisabledLanes&S)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var U=r;_=Au;var ie=U.current.memoizedState.isDehydrated;if(ie&&(Ql(U,C).flags|=256),C=P0(U,C,!1),C!==2){if(O0&&!ie){U.errorRecoveryDisabledLanes|=S,qo|=S,_=4;break e}S=Ur,Ur=_,S!==null&&(Ur===null?Ur=S:Ur.push.apply(Ur,S))}_=C}if(S=!1,_!==2)continue}}if(_===1){Ql(r,0),za(r,s,0,!0);break}e:{switch(f=r,S=_,S){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:za(f,s,ri,!Ba);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(_=Mh+300-Be(),10<_)){if(za(f,s,ri,!Ba),ur(f,0,!0)!==0)break e;Vs=s,f.timeoutHandle=tw(Tx.bind(null,f,c,Ur,Lh,C0,s,ri,qo,Xl,Ba,S,"Throttled",-0,0),_);break e}Tx(f,c,Ur,Lh,C0,s,ri,qo,Xl,Ba,S,null,-0,0)}}break}while(!0);Ss(r)}function Tx(r,s,c,f,_,S,C,U,ie,ye,ke,De,xe,Se){if(r.timeoutHandle=-1,De=s.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},bx(s,S,De);var Ye=(S&62914560)===S?Mh-Be():(S&4194048)===S?xx-Be():0;if(Ye=aO(De,Ye),Ye!==null){Vs=S,r.cancelPendingCommit=Ye(Mx.bind(null,r,s,S,c,f,_,C,U,ie,ke,De,null,xe,Se)),za(r,S,C,!ye);return}}Mx(r,s,S,c,f,_,C,U,ie)}function wN(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var _=c[f],S=_.getSnapshot;_=_.value;try{if(!Yn(S(),_))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function za(r,s,c,f){s&=~D0,s&=~qo,r.suspendedLanes|=s,r.pingedLanes&=~s,f&&(r.warmLanes|=s),f=r.expirationTimes;for(var _=s;0<_;){var S=31-hn(_),C=1<<S;f[S]=-1,_&=~C}c!==0&&da(r,c,s)}function Bh(){return(Rt&6)===0?(Nu(0),!1):!0}function B0(){if(vt!==null){if($t===0)var r=vt.return;else r=vt,Wi=xs=null,Jp(r),Gl=null,du=0,r=vt;for(;r!==null;)nx(r.alternate,r),r=r.return;vt=null}}function Ql(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,HN(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Vs=0,B0(),Yt=r,vt=c=Ai(r.current,null),Tt=s,$t=0,ni=null,Ba=!1,Wl=bi(r,s),O0=!1,Xl=ri=D0=qo=Pa=wn=0,Ur=Au=null,C0=!1,(s&8)!==0&&(s|=s&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=s;0<f;){var _=31-hn(f),S=1<<_;s|=r[_],f&=~S}return Zs=s,Co(),c}function kx(r,s){ut=null,X.H=vu,s===Hl||s===dh?(s=Hv(),$t=3):s===zp?(s=Hv(),$t=4):$t=s===m0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ni=s,vt===null&&(wn=1,Th(r,h(s,r.current)))}function Ax(){var r=ei.current;return r===null?!0:(Tt&4194048)===Tt?ji===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?r===ji:!1}function jx(){var r=X.H;return X.H=vu,r===null?vu:r}function Nx(){var r=X.A;return X.A=_N,r}function Ph(){wn=4,Ba||(Tt&4194048)!==Tt&&ei.current!==null||(Wl=!0),(Pa&134217727)===0&&(qo&134217727)===0||Yt===null||za(Yt,Tt,ri,!1)}function P0(r,s,c){var f=Rt;Rt|=2;var _=jx(),S=Nx();(Yt!==r||Tt!==s)&&(Lh=null,Ql(r,s)),s=!1;var C=wn;e:do try{if($t!==0&&vt!==null){var U=vt,ie=ni;switch($t){case 8:B0(),C=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(s=!0);var ye=$t;if($t=0,ni=null,ec(r,U,ie,ye),c&&Wl){C=0;break e}break;default:ye=$t,$t=0,ni=null,ec(r,U,ie,ye)}}SN(),C=wn;break}catch(ke){kx(r,ke)}while(!0);return s&&r.shellSuspendCounter++,Wi=xs=null,Rt=f,X.H=_,X.A=S,vt===null&&(Yt=null,Tt=0,Co()),C}function SN(){for(;vt!==null;)Ox(vt)}function EN(r,s){var c=Rt;Rt|=2;var f=jx(),_=Nx();Yt!==r||Tt!==s?(Lh=null,Rh=Be()+500,Ql(r,s)):Wl=bi(r,s);e:do try{if($t!==0&&vt!==null){s=vt;var S=ni;t:switch($t){case 1:$t=0,ni=null,ec(r,s,S,1);break;case 2:case 9:if(zv(S)){$t=0,ni=null,Dx(s);break}s=function(){$t!==2&&$t!==9||Yt!==r||($t=7),Ss(r)},S.then(s,s);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:zv(S)?($t=0,ni=null,Dx(s)):($t=0,ni=null,ec(r,s,S,7));break;case 5:var C=null;switch(vt.tag){case 26:C=vt.memoizedState;case 5:case 27:var U=vt;if(C?gw(C):U.stateNode.complete){$t=0,ni=null;var ie=U.sibling;if(ie!==null)vt=ie;else{var ye=U.return;ye!==null?(vt=ye,$h(ye)):vt=null}break t}}$t=0,ni=null,ec(r,s,S,5);break;case 6:$t=0,ni=null,ec(r,s,S,6);break;case 8:B0(),wn=6;break e;default:throw Error(i(462))}}TN();break}catch(ke){kx(r,ke)}while(!0);return Wi=xs=null,X.H=f,X.A=_,Rt=c,vt!==null?0:(Yt=null,Tt=0,Co(),wn)}function TN(){for(;vt!==null&&!fe();)Ox(vt)}function Ox(r){var s=ex(r.alternate,r,Zs);r.memoizedProps=r.pendingProps,s===null?$h(r):vt=s}function Dx(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=V_(c,s,s.pendingProps,s.type,void 0,Tt);break;case 11:s=V_(c,s,s.pendingProps,s.type.render,s.ref,Tt);break;case 5:Jp(s);default:nx(c,s),s=vt=iu(s,Zs),s=ex(c,s,Zs)}r.memoizedProps=r.pendingProps,s===null?$h(r):vt=s}function ec(r,s,c,f){Wi=xs=null,Jp(s),Gl=null,du=0;var _=s.return;try{if(fN(r,_,s,c,Tt)){wn=1,Th(r,h(c,r.current)),vt=null;return}}catch(S){if(_!==null)throw vt=_,S;wn=1,Th(r,h(c,r.current)),vt=null;return}s.flags&32768?(yt||f===1?r=!0:Wl||(Tt&536870912)!==0?r=!1:(Ba=r=!0,(f===2||f===9||f===3||f===6)&&(f=ei.current,f!==null&&f.tag===13&&(f.flags|=16384))),Cx(s,r)):$h(s)}function $h(r){var s=r;do{if((s.flags&32768)!==0){Cx(s,Ba);return}r=s.return;var c=gN(s.alternate,s,Zs);if(c!==null){vt=c;return}if(s=s.sibling,s!==null){vt=s;return}vt=s=r}while(s!==null);wn===0&&(wn=5)}function Cx(r,s){do{var c=bN(r.alternate,r);if(c!==null){c.flags&=32767,vt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){vt=r;return}vt=r=c}while(r!==null);wn=6,vt=null}function Mx(r,s,c,f,_,S,C,U,ie){r.cancelPendingCommit=null;do Ih();while(Gn!==0);if((Rt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(S=s.lanes|s.childLanes,S|=Ll,ao(r,c,S,C,U,ie),r===Yt&&(vt=Yt=null,Tt=0),Jl=s,Ia=r,Vs=c,M0=S,R0=_,wx=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,NN(Zt,function(){return $x(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=X.T,X.T=null,_=ae.p,ae.p=2,C=Rt,Rt|=4;try{yN(r,s,c)}finally{Rt=C,ae.p=_,X.T=f}}Gn=1,Rx(),Lx(),Bx()}}function Rx(){if(Gn===1){Gn=0;var r=Ia,s=Jl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var f=ae.p;ae.p=2;var _=Rt;Rt|=4;try{mx(s,r);var S=K0,C=Ao(r.containerInfo),U=S.focusedElem,ie=S.selectionRange;if(C!==U&&U&&U.ownerDocument&&Dl(U.ownerDocument.documentElement,U)){if(ie!==null&&ms(U)){var ye=ie.start,ke=ie.end;if(ke===void 0&&(ke=ye),"selectionStart"in U)U.selectionStart=ye,U.selectionEnd=Math.min(ke,U.value.length);else{var De=U.ownerDocument||document,xe=De&&De.defaultView||window;if(xe.getSelection){var Se=xe.getSelection(),Ye=U.textContent.length,nt=Math.min(ie.start,Ye),Gt=ie.end===void 0?nt:Math.min(ie.end,Ye);!Se.extend&&nt>Gt&&(C=Gt,Gt=nt,nt=C);var de=ko(U,nt),se=ko(U,Gt);if(de&&se&&(Se.rangeCount!==1||Se.anchorNode!==de.node||Se.anchorOffset!==de.offset||Se.focusNode!==se.node||Se.focusOffset!==se.offset)){var be=De.createRange();be.setStart(de.node,de.offset),Se.removeAllRanges(),nt>Gt?(Se.addRange(be),Se.extend(se.node,se.offset)):(be.setEnd(se.node,se.offset),Se.addRange(be))}}}}for(De=[],Se=U;Se=Se.parentNode;)Se.nodeType===1&&De.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<De.length;U++){var Ne=De[U];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Xh=!!V0,K0=V0=null}finally{Rt=_,ae.p=f,X.T=c}}r.current=s,Gn=2}}function Lx(){if(Gn===2){Gn=0;var r=Ia,s=Jl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var f=ae.p;ae.p=2;var _=Rt;Rt|=4;try{cx(r,s.alternate,s)}finally{Rt=_,ae.p=f,X.T=c}}Gn=3}}function Bx(){if(Gn===4||Gn===3){Gn=0,ze();var r=Ia,s=Jl,c=Vs,f=wx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gn=5:(Gn=0,Jl=Ia=null,Px(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&($a=null),Ve(c),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(dn,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=X.T,_=ae.p,ae.p=2,X.T=null;try{for(var S=r.onRecoverableError,C=0;C<f.length;C++){var U=f[C];S(U.value,{componentStack:U.stack})}}finally{X.T=s,ae.p=_}}(Vs&3)!==0&&Ih(),Ss(r),_=r.pendingLanes,(c&261930)!==0&&(_&42)!==0?r===L0?ju++:(ju=0,L0=r):ju=0,Nu(0)}}function Px(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,cu(s)))}function Ih(){return Rx(),Lx(),Bx(),$x()}function $x(){if(Gn!==5)return!1;var r=Ia,s=M0;M0=0;var c=Ve(Vs),f=X.T,_=ae.p;try{ae.p=32>c?32:c,X.T=null,c=R0,R0=null;var S=Ia,C=Vs;if(Gn=0,Jl=Ia=null,Vs=0,(Rt&6)!==0)throw Error(i(331));var U=Rt;if(Rt|=4,vx(S.current),gx(S,S.current,C,c),Rt=U,Nu(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(dn,S)}catch{}return!0}finally{ae.p=_,X.T=f,Px(r,s)}}function Ix(r,s,c){s=h(c,s),s=f0(r.stateNode,s,2),r=Ca(r,s,2),r!==null&&(Gi(r,2),Ss(r))}function It(r,s,c){if(r.tag===3)Ix(r,r,c);else for(;s!==null;){if(s.tag===3){Ix(s,r,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($a===null||!$a.has(f))){r=h(c,r),c=z_(2),f=Ca(s,c,2),f!==null&&(U_(c,f,s,r),Gi(f,2),Ss(f));break}}s=s.return}}function $0(r,s,c){var f=r.pingCache;if(f===null){f=r.pingCache=new xN;var _=new Set;f.set(s,_)}else _=f.get(s),_===void 0&&(_=new Set,f.set(s,_));_.has(c)||(O0=!0,_.add(c),r=kN.bind(null,r,s,c),s.then(r,r))}function kN(r,s,c){var f=r.pingCache;f!==null&&f.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Yt===r&&(Tt&c)===c&&(wn===4||wn===3&&(Tt&62914560)===Tt&&300>Be()-Mh?(Rt&2)===0&&Ql(r,0):D0|=c,Xl===Tt&&(Xl=0)),Ss(r)}function zx(r,s){s===0&&(s=io()),r=ki(r,s),r!==null&&(Gi(r,s),Ss(r))}function AN(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),zx(r,c)}function jN(r,s){var c=0;switch(r.tag){case 31:case 13:var f=r.stateNode,_=r.memoizedState;_!==null&&(c=_.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),zx(r,c)}function NN(r,s){return Le(r,s)}var zh=null,tc=null,I0=!1,Uh=!1,z0=!1,Ua=0;function Ss(r){r!==tc&&r.next===null&&(tc===null?zh=tc=r:tc=tc.next=r),Uh=!0,I0||(I0=!0,DN())}function Nu(r,s){if(!z0&&Uh){z0=!0;do for(var c=!1,f=zh;f!==null;){if(r!==0){var _=f.pendingLanes;if(_===0)var S=0;else{var C=f.suspendedLanes,U=f.pingedLanes;S=(1<<31-hn(42|r)+1)-1,S&=_&~(C&~U),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,Fx(f,S))}else S=Tt,S=ur(f,f===Yt?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(S&3)===0||bi(f,S)||(c=!0,Fx(f,S));f=f.next}while(c);z0=!1}}function ON(){Ux()}function Ux(){Uh=I0=!1;var r=0;Ua!==0&&UN()&&(r=Ua);for(var s=Be(),c=null,f=zh;f!==null;){var _=f.next,S=Hx(f,s);S===0?(f.next=null,c===null?zh=_:c.next=_,_===null&&(tc=c)):(c=f,(r!==0||(S&3)!==0)&&(Uh=!0)),f=_}Gn!==0&&Gn!==5||Nu(r),Ua!==0&&(Ua=0)}function Hx(r,s){for(var c=r.suspendedLanes,f=r.pingedLanes,_=r.expirationTimes,S=r.pendingLanes&-62914561;0<S;){var C=31-hn(S),U=1<<C,ie=_[C];ie===-1?((U&c)===0||(U&f)!==0)&&(_[C]=ua(U,s)):ie<=s&&(r.expiredLanes|=U),S&=~U}if(s=Yt,c=Tt,c=ur(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,c===0||r===s&&($t===2||$t===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ue(f),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||bi(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(f!==null&&ue(f),Ve(c)){case 2:case 8:c=et;break;case 32:c=Zt;break;case 268435456:c=Tn;break;default:c=Zt}return f=Gx.bind(null,r),c=Le(c,f),r.callbackPriority=s,r.callbackNode=c,s}return f!==null&&f!==null&&ue(f),r.callbackPriority=2,r.callbackNode=null,2}function Gx(r,s){if(Gn!==0&&Gn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Ih()&&r.callbackNode!==c)return null;var f=Tt;return f=ur(r,r===Yt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(Ex(r,f,s),Hx(r,Be()),r.callbackNode!=null&&r.callbackNode===c?Gx.bind(null,r):null)}function Fx(r,s){if(Ih())return null;Ex(r,s,!0)}function DN(){GN(function(){(Rt&6)!==0?Le(at,ON):Ux()})}function U0(){if(Ua===0){var r=zl;r===0&&(r=kn,kn<<=1,(kn&261888)===0&&(kn=256)),Ua=r}return Ua}function qx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ga(""+r)}function Yx(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function CN(r,s,c,f,_){if(s==="submit"&&c&&c.stateNode===_){var S=qx((_[An]||null).action),C=f.submitter;C&&(s=(s=C[An]||null)?qx(s.formAction):C.getAttribute("formAction"),s!==null&&(S=s,C=null));var U=new El("action","action",null,f,_);r.push({event:U,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ua!==0){var ie=C?Yx(_,C):new FormData(_);o0(c,{pending:!0,data:ie,method:_.method,action:S},null,ie)}}else typeof S=="function"&&(U.preventDefault(),ie=C?Yx(_,C):new FormData(_),o0(c,{pending:!0,data:ie,method:_.method,action:S},S,ie))},currentTarget:_}]})}}for(var H0=0;H0<bs.length;H0++){var G0=bs[H0],MN=G0.toLowerCase(),RN=G0[0].toUpperCase()+G0.slice(1);Lr(MN,"on"+RN)}Lr(No,"onAnimationEnd"),Lr(sh,"onAnimationIteration"),Lr(Oo,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Cp,"onTransitionRun"),Lr(ah,"onTransitionStart"),Lr(Mp,"onTransitionCancel"),Lr(Aa,"onTransitionEnd"),Qn("onMouseEnter",["mouseout","mouseover"]),Qn("onMouseLeave",["mouseout","mouseover"]),Qn("onPointerEnter",["pointerout","pointerover"]),Qn("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Zx(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],_=f.event;f=f.listeners;e:{var S=void 0;if(s)for(var C=f.length-1;0<=C;C--){var U=f[C],ie=U.instance,ye=U.currentTarget;if(U=U.listener,ie!==S&&_.isPropagationStopped())break e;S=U,_.currentTarget=ye;try{S(_)}catch(ke){Do(ke)}_.currentTarget=null,S=ie}else for(C=0;C<f.length;C++){if(U=f[C],ie=U.instance,ye=U.currentTarget,U=U.listener,ie!==S&&_.isPropagationStopped())break e;S=U,_.currentTarget=ye;try{S(_)}catch(ke){Do(ke)}_.currentTarget=null,S=ie}}}}function _t(r,s){var c=s[yi];c===void 0&&(c=s[yi]=new Set);var f=r+"__bubble";c.has(f)||(Vx(s,r,2,!1),c.add(f))}function F0(r,s,c){var f=0;s&&(f|=4),Vx(c,r,f,s)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function q0(r){if(!r[Hh]){r[Hh]=!0,ha.forEach(function(c){c!=="selectionchange"&&(LN.has(c)||F0(c,!1,r),F0(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Hh]||(s[Hh]=!0,F0("selectionchange",!1,s))}}function Vx(r,s,c,f){switch(Sw(s)){case 2:var _=cO;break;case 8:_=uO;break;default:_=ag}c=_.bind(null,s,c,r),_=void 0,!bo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),f?_!==void 0?r.addEventListener(s,c,{capture:!0,passive:_}):r.addEventListener(s,c,!0):_!==void 0?r.addEventListener(s,c,{passive:_}):r.addEventListener(s,c,!1)}function Y0(r,s,c,f,_){var S=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var U=f.stateNode.containerInfo;if(U===_)break;if(C===4)for(C=f.return;C!==null;){var ie=C.tag;if((ie===3||ie===4)&&C.stateNode.containerInfo===_)return;C=C.return}for(;U!==null;){if(C=ht(U),C===null)return;if(ie=C.tag,ie===5||ie===6||ie===26||ie===27){f=S=C;continue e}U=U.parentNode}}f=f.return}Zc(function(){var ye=S,ke=go(c),De=[];e:{var xe=oh.get(r);if(xe!==void 0){var Se=El,Ye=r;switch(r){case"keypress":if(yo(c)===0)break e;case"keydown":case"keyup":Se=Zd;break;case"focusin":Ye="focus",Se=Wc;break;case"focusout":Ye="blur",Se=Wc;break;case"beforeblur":case"afterblur":Se=Wc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=kp;break;case No:case sh:case Oo:Se=Xc;break;case Aa:Se=Wd;break;case"scroll":case"scrollend":Se=Et;break;case"wheel":Se=Rs;break;case"copy":case"cut":case"paste":Se=wi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Vd;break;case"toggle":case"beforetoggle":Se=xo}var nt=(s&4)!==0,Gt=!nt&&(r==="scroll"||r==="scrollend"),de=nt?xe!==null?xe+"Capture":null:xe;nt=[];for(var se=ye,be;se!==null;){var Ne=se;if(be=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||be===null||de===null||(Ne=Cs(se,de),Ne!=null&&nt.push(Du(se,Ne,be))),Gt)break;se=se.return}0<nt.length&&(xe=new Se(xe,Ye,null,c,ke),De.push({event:xe,listeners:nt}))}}if((s&7)===0){e:{if(xe=r==="mouseover"||r==="pointerover",Se=r==="mouseout"||r==="pointerout",xe&&c!==Sl&&(Ye=c.relatedTarget||c.fromElement)&&(ht(Ye)||Ye[Kr]))break e;if((Se||xe)&&(xe=ke.window===ke?ke:(xe=ke.ownerDocument)?xe.defaultView||xe.parentWindow:window,Se?(Ye=c.relatedTarget||c.toElement,Se=ye,Ye=Ye?ht(Ye):null,Ye!==null&&(Gt=l(Ye),nt=Ye.tag,Ye!==Gt||nt!==5&&nt!==27&&nt!==6)&&(Ye=null)):(Se=null,Ye=ye),Se!==Ye)){if(nt=Hd,Ne="onMouseLeave",de="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(nt=Vd,Ne="onPointerLeave",de="onPointerEnter",se="pointer"),Gt=Se==null?xe:pt(Se),be=Ye==null?xe:pt(Ye),xe=new nt(Ne,se+"leave",Se,c,ke),xe.target=Gt,xe.relatedTarget=be,Ne=null,ht(ke)===ye&&(nt=new nt(de,se+"enter",Ye,c,ke),nt.target=be,nt.relatedTarget=Gt,Ne=nt),Gt=Ne,Se&&Ye)t:{for(nt=BN,de=Se,se=Ye,be=0,Ne=de;Ne;Ne=nt(Ne))be++;Ne=0;for(var Qe=se;Qe;Qe=nt(Qe))Ne++;for(;0<be-Ne;)de=nt(de),be--;for(;0<Ne-be;)se=nt(se),Ne--;for(;be--;){if(de===se||se!==null&&de===se.alternate){nt=de;break t}de=nt(de),se=nt(se)}nt=null}else nt=null;Se!==null&&Kx(De,xe,Se,nt,!1),Ye!==null&&Gt!==null&&Kx(De,Gt,Ye,nt,!0)}}e:{if(xe=ye?pt(ye):window,Se=xe.nodeName&&xe.nodeName.toLowerCase(),Se==="select"||Se==="input"&&xe.type==="file")var Dt=To;else if(Si(xe))if(eh)Dt=Dp;else{Dt=Op;var Ke=Zi}else Se=xe.nodeName,!Se||Se.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ye&&po(ye.elementType)&&(Dt=To):Dt=Sa;if(Dt&&(Dt=Dt(r,ye))){Qd(De,Dt,c,ke);break e}Ke&&Ke(r,xe,ye),r==="focusout"&&ye&&xe.type==="number"&&ye.memoizedProps.value!=null&&Fi(xe,"number",xe.value)}switch(Ke=ye?pt(ye):window,r){case"focusin":(Si(Ke)||Ke.contentEditable==="true")&&(ps=Ke,Ml=ye,jo=null);break;case"focusout":jo=Ml=ps=null;break;case"mousedown":Ta=!0;break;case"contextmenu":case"mouseup":case"dragend":Ta=!1,rh(De,c,ke);break;case"selectionchange":if(Cl)break;case"keydown":case"keyup":rh(De,c,ke)}var mt;if(kl)e:{switch(r){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else _a?Jd(r,c)&&(kt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(kt="onCompositionStart");kt&&(Al&&c.locale!=="ko"&&(_a||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&_a&&(mt=hs()):(xi=ke,Ms="value"in xi?xi.value:xi.textContent,_a=!0)),Ke=Gh(ye,kt),0<Ke.length&&(kt=new Jc(kt,r,null,c,ke),De.push({event:kt,listeners:Ke}),mt?kt.data=mt:(mt=nu(c),mt!==null&&(kt.data=mt)))),(mt=jp?Qr(r,c):xa(r,c))&&(kt=Gh(ye,"onBeforeInput"),0<kt.length&&(Ke=new Jc("onBeforeInput","beforeinput",null,c,ke),De.push({event:Ke,listeners:kt}),Ke.data=mt)),CN(De,r,ye,c,ke)}Zx(De,s)})}function Du(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Gh(r,s){for(var c=s+"Capture",f=[];r!==null;){var _=r,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=Cs(r,c),_!=null&&f.unshift(Du(r,_,S)),_=Cs(r,s),_!=null&&f.push(Du(r,_,S))),r.tag===3)return f;r=r.return}return[]}function BN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Kx(r,s,c,f,_){for(var S=s._reactName,C=[];c!==null&&c!==f;){var U=c,ie=U.alternate,ye=U.stateNode;if(U=U.tag,ie!==null&&ie===f)break;U!==5&&U!==26&&U!==27||ye===null||(ie=ye,_?(ye=Cs(c,S),ye!=null&&C.unshift(Du(c,ye,ie))):_||(ye=Cs(c,S),ye!=null&&C.push(Du(c,ye,ie)))),c=c.return}C.length!==0&&r.push({event:s,listeners:C})}var PN=/\r\n?/g,$N=/\u0000|\uFFFD/g;function Wx(r){return(typeof r=="string"?r:""+r).replace(PN,`
`).replace($N,"")}function Xx(r,s){return s=Wx(s),Wx(r)===s}function Ht(r,s,c,f,_,S){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||_i(r,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&_i(r,""+f);break;case"className":zt(r,"class",f);break;case"tabIndex":zt(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(r,c,f);break;case"style":xl(r,f,S);break;case"data":if(s!=="object"){zt(r,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(c);break}f=ga(""+f),r.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(s!=="input"&&Ht(r,s,"name",_.name,_,null),Ht(r,s,"formEncType",_.formEncType,_,null),Ht(r,s,"formMethod",_.formMethod,_,null),Ht(r,s,"formTarget",_.formTarget,_,null)):(Ht(r,s,"encType",_.encType,_,null),Ht(r,s,"method",_.method,_,null),Ht(r,s,"target",_.target,_,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(c);break}f=ga(""+f),r.setAttribute(c,f);break;case"onClick":f!=null&&(r.onclick=Mr);break;case"onScroll":f!=null&&_t("scroll",r);break;case"onScrollEnd":f!=null&&_t("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}c=ga(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,""+f):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":f===!0?r.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,f):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(c,f):r.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(c):r.setAttribute(c,f);break;case"popover":_t("beforetoggle",r),_t("toggle",r),bt(r,"popover",f);break;case"xlinkActuate":Cr(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Cr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Cr(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Cr(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Cr(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Cr(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Cr(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Cr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Cr(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":bt(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=wl.get(c)||c,bt(r,c,f))}}function Z0(r,s,c,f,_,S){switch(c){case"style":xl(r,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof f=="string"?_i(r,f):(typeof f=="number"||typeof f=="bigint")&&_i(r,""+f);break;case"onScroll":f!=null&&_t("scroll",r);break;case"onScrollEnd":f!=null&&_t("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),s=c.slice(2,_?c.length-7:void 0),S=r[An]||null,S=S!=null?S[c]:null,typeof S=="function"&&r.removeEventListener(s,S,_),typeof f=="function")){typeof S!="function"&&S!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,f,_);break e}c in r?r[c]=f:f===!0?r.setAttribute(c,""):bt(r,c,f)}}}function rr(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",r),_t("load",r);var f=!1,_=!1,S;for(S in c)if(c.hasOwnProperty(S)){var C=c[S];if(C!=null)switch(S){case"src":f=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,S,C,c,null)}}_&&Ht(r,s,"srcSet",c.srcSet,c,null),f&&Ht(r,s,"src",c.src,c,null);return;case"input":_t("invalid",r);var U=S=C=_=null,ie=null,ye=null;for(f in c)if(c.hasOwnProperty(f)){var ke=c[f];if(ke!=null)switch(f){case"name":_=ke;break;case"type":C=ke;break;case"checked":ie=ke;break;case"defaultChecked":ye=ke;break;case"value":S=ke;break;case"defaultValue":U=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,s));break;default:Ht(r,s,f,ke,c,null)}}mo(r,S,U,ie,ye,C,_,!1);return;case"select":_t("invalid",r),f=C=S=null;for(_ in c)if(c.hasOwnProperty(_)&&(U=c[_],U!=null))switch(_){case"value":S=U;break;case"defaultValue":C=U;break;case"multiple":f=U;default:Ht(r,s,_,U,c,null)}s=S,c=C,r.multiple=!!f,s!=null?qt(r,!!f,s,!1):c!=null&&qt(r,!!f,c,!0);return;case"textarea":_t("invalid",r),S=_=f=null;for(C in c)if(c.hasOwnProperty(C)&&(U=c[C],U!=null))switch(C){case"value":f=U;break;case"defaultValue":_=U;break;case"children":S=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:Ht(r,s,C,U,c,null)}ma(r,f,_,S);return;case"option":for(ie in c)if(c.hasOwnProperty(ie)&&(f=c[ie],f!=null))switch(ie){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ht(r,s,ie,f,c,null)}return;case"dialog":_t("beforetoggle",r),_t("toggle",r),_t("cancel",r),_t("close",r);break;case"iframe":case"object":_t("load",r);break;case"video":case"audio":for(f=0;f<Ou.length;f++)_t(Ou[f],r);break;case"image":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"embed":case"source":case"link":_t("error",r),_t("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in c)if(c.hasOwnProperty(ye)&&(f=c[ye],f!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,ye,f,c,null)}return;default:if(po(s)){for(ke in c)c.hasOwnProperty(ke)&&(f=c[ke],f!==void 0&&Z0(r,s,ke,f,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(f=c[U],f!=null&&Ht(r,s,U,f,c,null))}function IN(r,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,C=null,U=null,ie=null,ye=null,ke=null;for(Se in c){var De=c[Se];if(c.hasOwnProperty(Se)&&De!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":ie=De;default:f.hasOwnProperty(Se)||Ht(r,s,Se,null,f,De)}}for(var xe in f){var Se=f[xe];if(De=c[xe],f.hasOwnProperty(xe)&&(Se!=null||De!=null))switch(xe){case"type":S=Se;break;case"name":_=Se;break;case"checked":ye=Se;break;case"defaultChecked":ke=Se;break;case"value":C=Se;break;case"defaultValue":U=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,s));break;default:Se!==De&&Ht(r,s,xe,Se,f,De)}}Fc(r,C,U,ie,ye,ke,S,_);return;case"select":Se=C=U=xe=null;for(S in c)if(ie=c[S],c.hasOwnProperty(S)&&ie!=null)switch(S){case"value":break;case"multiple":Se=ie;default:f.hasOwnProperty(S)||Ht(r,s,S,null,f,ie)}for(_ in f)if(S=f[_],ie=c[_],f.hasOwnProperty(_)&&(S!=null||ie!=null))switch(_){case"value":xe=S;break;case"defaultValue":U=S;break;case"multiple":C=S;default:S!==ie&&Ht(r,s,_,S,f,ie)}s=U,c=C,f=Se,xe!=null?qt(r,!!c,xe,!1):!!f!=!!c&&(s!=null?qt(r,!!c,s,!0):qt(r,!!c,c?[]:"",!1));return;case"textarea":Se=xe=null;for(U in c)if(_=c[U],c.hasOwnProperty(U)&&_!=null&&!f.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Ht(r,s,U,null,f,_)}for(C in f)if(_=f[C],S=c[C],f.hasOwnProperty(C)&&(_!=null||S!=null))switch(C){case"value":xe=_;break;case"defaultValue":Se=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==S&&Ht(r,s,C,_,f,S)}ds(r,xe,Se);return;case"option":for(var Ye in c)if(xe=c[Ye],c.hasOwnProperty(Ye)&&xe!=null&&!f.hasOwnProperty(Ye))switch(Ye){case"selected":r.selected=!1;break;default:Ht(r,s,Ye,null,f,xe)}for(ie in f)if(xe=f[ie],Se=c[ie],f.hasOwnProperty(ie)&&xe!==Se&&(xe!=null||Se!=null))switch(ie){case"selected":r.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Ht(r,s,ie,xe,f,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)xe=c[nt],c.hasOwnProperty(nt)&&xe!=null&&!f.hasOwnProperty(nt)&&Ht(r,s,nt,null,f,xe);for(ye in f)if(xe=f[ye],Se=c[ye],f.hasOwnProperty(ye)&&xe!==Se&&(xe!=null||Se!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,s));break;default:Ht(r,s,ye,xe,f,Se)}return;default:if(po(s)){for(var Gt in c)xe=c[Gt],c.hasOwnProperty(Gt)&&xe!==void 0&&!f.hasOwnProperty(Gt)&&Z0(r,s,Gt,void 0,f,xe);for(ke in f)xe=f[ke],Se=c[ke],!f.hasOwnProperty(ke)||xe===Se||xe===void 0&&Se===void 0||Z0(r,s,ke,xe,f,Se);return}}for(var de in c)xe=c[de],c.hasOwnProperty(de)&&xe!=null&&!f.hasOwnProperty(de)&&Ht(r,s,de,null,f,xe);for(De in f)xe=f[De],Se=c[De],!f.hasOwnProperty(De)||xe===Se||xe==null&&Se==null||Ht(r,s,De,xe,f,Se)}function Jx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var _=c[f],S=_.transferSize,C=_.initiatorType,U=_.duration;if(S&&U&&Jx(C)){for(C=0,U=_.responseEnd,f+=1;f<c.length;f++){var ie=c[f],ye=ie.startTime;if(ye>U)break;var ke=ie.transferSize,De=ie.initiatorType;ke&&Jx(De)&&(ie=ie.responseEnd,C+=ke*(ie<U?1:(U-ye)/(ie-ye)))}if(--f,s+=8*(S+C)/(_.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var V0=null,K0=null;function Fh(r){return r.nodeType===9?r:r.ownerDocument}function Qx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ew(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function W0(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var X0=null;function UN(){var r=window.event;return r&&r.type==="popstate"?r===X0?!1:(X0=r,!0):(X0=null,!1)}var tw=typeof setTimeout=="function"?setTimeout:void 0,HN=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,GN=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(r){return nw.resolve(null).then(r).catch(FN)}:tw;function FN(r){setTimeout(function(){throw r})}function Ha(r){return r==="head"}function rw(r,s){var c=s,f=0;do{var _=c.nextSibling;if(r.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(f===0){r.removeChild(_),sc(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Cu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Cu(c);for(var S=c.firstChild;S;){var C=S.nextSibling,U=S.nodeName;S[gt]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=C}}else c==="body"&&Cu(r.ownerDocument.body);c=_}while(c);sc(s)}function iw(r,s){var c=r;r=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=f}while(c)}function J0(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":J0(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function qN(r,s,c,f){for(;r.nodeType===1;){var _=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[gt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(S=r.getAttribute("rel"),S==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(S!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(S=r.getAttribute("src"),(S!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===S)return r}else return r;if(r=Ni(r.nextSibling),r===null)break}return null}function YN(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Ni(r.nextSibling),r===null))return null;return r}function sw(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ni(r.nextSibling),r===null))return null;return r}function Q0(r){return r.data==="$?"||r.data==="$~"}function eg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function ZN(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var tg=null;function aw(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return Ni(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function ow(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function lw(r,s,c){switch(s=Fh(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Cu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);tt(r)}var Oi=new Map,cw=new Set;function qh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ks=ae.d;ae.d={f:VN,r:KN,D:WN,C:XN,L:JN,m:QN,X:tO,S:eO,M:nO};function VN(){var r=Ks.f(),s=Bh();return r||s}function KN(r){var s=wt(r);s!==null&&s.tag===5&&s.type==="form"?k_(s):Ks.r(r)}var nc=typeof document>"u"?null:document;function uw(r,s,c){var f=nc;if(f&&typeof s=="string"&&s){var _=en(s);_='link[rel="'+r+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),cw.has(_)||(cw.add(_),r={rel:r,crossOrigin:c,href:s},f.querySelector(_)===null&&(s=f.createElement("link"),rr(s,"link",r),St(s),f.head.appendChild(s)))}}function WN(r){Ks.D(r),uw("dns-prefetch",r,null)}function XN(r,s){Ks.C(r,s),uw("preconnect",r,s)}function JN(r,s,c){Ks.L(r,s,c);var f=nc;if(f&&r&&s){var _='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+en(c.imageSizes)+'"]')):_+='[href="'+en(r)+'"]';var S=_;switch(s){case"style":S=rc(r);break;case"script":S=ic(r)}Oi.has(S)||(r=y({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),Oi.set(S,r),f.querySelector(_)!==null||s==="style"&&f.querySelector(Mu(S))||s==="script"&&f.querySelector(Ru(S))||(s=f.createElement("link"),rr(s,"link",r),St(s),f.head.appendChild(s)))}}function QN(r,s){Ks.m(r,s);var c=nc;if(c&&r){var f=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+en(f)+'"][href="'+en(r)+'"]',S=_;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ic(r)}if(!Oi.has(S)&&(r=y({rel:"modulepreload",href:r},s),Oi.set(S,r),c.querySelector(_)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ru(S)))return}f=c.createElement("link"),rr(f,"link",r),St(f),c.head.appendChild(f)}}}function eO(r,s,c){Ks.S(r,s,c);var f=nc;if(f&&r){var _=zn(f).hoistableStyles,S=rc(r);s=s||"default";var C=_.get(S);if(!C){var U={loading:0,preload:null};if(C=f.querySelector(Mu(S)))U.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},c),(c=Oi.get(S))&&ng(r,c);var ie=C=f.createElement("link");St(ie),rr(ie,"link",r),ie._p=new Promise(function(ye,ke){ie.onload=ye,ie.onerror=ke}),ie.addEventListener("load",function(){U.loading|=1}),ie.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Yh(C,s,f)}C={type:"stylesheet",instance:C,count:1,state:U},_.set(S,C)}}}function tO(r,s){Ks.X(r,s);var c=nc;if(c&&r){var f=zn(c).hoistableScripts,_=ic(r),S=f.get(_);S||(S=c.querySelector(Ru(_)),S||(r=y({src:r,async:!0},s),(s=Oi.get(_))&&rg(r,s),S=c.createElement("script"),St(S),rr(S,"link",r),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(_,S))}}function nO(r,s){Ks.M(r,s);var c=nc;if(c&&r){var f=zn(c).hoistableScripts,_=ic(r),S=f.get(_);S||(S=c.querySelector(Ru(_)),S||(r=y({src:r,async:!0,type:"module"},s),(s=Oi.get(_))&&rg(r,s),S=c.createElement("script"),St(S),rr(S,"link",r),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(_,S))}}function dw(r,s,c,f){var _=(_=F.current)?qh(_):null;if(!_)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=rc(c.href),c=zn(_).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=rc(c.href);var S=zn(_).hoistableStyles,C=S.get(r);if(C||(_=_.ownerDocument||_,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(r,C),(S=_.querySelector(Mu(r)))&&!S._p&&(C.instance=S,C.state.loading=5),Oi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Oi.set(r,c),S||rO(_,r,c,C.state))),s&&f===null)throw Error(i(528,""));return C}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ic(c),c=zn(_).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function rc(r){return'href="'+en(r)+'"'}function Mu(r){return'link[rel="stylesheet"]['+r+"]"}function hw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function rO(r,s,c,f){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=r.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),rr(s,"link",c),St(s),r.head.appendChild(s))}function ic(r){return'[src="'+en(r)+'"]'}function Ru(r){return"script[async]"+r}function fw(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=r.querySelector('style[data-href~="'+en(c.href)+'"]');if(f)return s.instance=f,St(f),f;var _=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),St(f),rr(f,"style",_),Yh(f,c.precedence,r),s.instance=f;case"stylesheet":_=rc(c.href);var S=r.querySelector(Mu(_));if(S)return s.state.loading|=4,s.instance=S,St(S),S;f=hw(c),(_=Oi.get(_))&&ng(f,_),S=(r.ownerDocument||r).createElement("link"),St(S);var C=S;return C._p=new Promise(function(U,ie){C.onload=U,C.onerror=ie}),rr(S,"link",f),s.state.loading|=4,Yh(S,c.precedence,r),s.instance=S;case"script":return S=ic(c.src),(_=r.querySelector(Ru(S)))?(s.instance=_,St(_),_):(f=c,(_=Oi.get(S))&&(f=y({},c),rg(f,_)),r=r.ownerDocument||r,_=r.createElement("script"),St(_),rr(_,"link",f),r.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Yh(f,c.precedence,r));return s.instance}function Yh(r,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=f.length?f[f.length-1]:null,S=_,C=0;C<f.length;C++){var U=f[C];if(U.dataset.precedence===s)S=U;else if(S!==_)break}S?S.parentNode.insertBefore(r,S.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function ng(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function rg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Zh=null;function mw(r,s,c){if(Zh===null){var f=new Map,_=Zh=new Map;_.set(c,f)}else _=Zh,f=_.get(c),f||(f=new Map,_.set(c,f));if(f.has(r))return f;for(f.set(r,null),c=c.getElementsByTagName(r),_=0;_<c.length;_++){var S=c[_];if(!(S[gt]||S[sn]||r==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var C=S.getAttribute(s)||"";C=r+C;var U=f.get(C);U?U.push(S):f.set(C,[S])}}return f}function pw(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function iO(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function sO(r,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=rc(f.href),S=s.querySelector(Mu(_));if(S){s=S._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Vh.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=S,St(S);return}S=s.ownerDocument||s,f=hw(f),(_=Oi.get(_))&&ng(f,_),S=S.createElement("link"),St(S);var C=S;C._p=new Promise(function(U,ie){C.onload=U,C.onerror=ie}),rr(S,"link",f),c.instance=S}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Vh.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var ig=0;function aO(r,s){return r.stylesheets&&r.count===0&&Wh(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var f=setTimeout(function(){if(r.stylesheets&&Wh(r,r.stylesheets),r.unsuspend){var S=r.unsuspend;r.unsuspend=null,S()}},6e4+s);0<r.imgBytes&&ig===0&&(ig=62500*zN());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Wh(r,r.stylesheets),r.unsuspend)){var S=r.unsuspend;r.unsuspend=null,S()}},(r.imgBytes>ig?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(_)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Kh=null;function Wh(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Kh=new Map,s.forEach(oO,r),Kh=null,Vh.call(r))}function oO(r,s){if(!(s.state.loading&4)){var c=Kh.get(r);if(c)var f=c.get(null);else{c=new Map,Kh.set(r,c);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var C=_[S];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),f=C)}f&&c.set(null,f)}_=s.instance,C=_.getAttribute("data-precedence"),S=c.get(C)||f,S===f&&c.set(null,_),c.set(C,_),this.count++,f=Vh.bind(this),_.addEventListener("load",f),_.addEventListener("error",f),S?S.parentNode.insertBefore(_,S.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),s.state.loading|=4}}var Lu={$$typeof:N,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function lO(r,s,c,f,_,S,C,U,ie){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=so(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.hiddenUpdates=so(null),this.identifierPrefix=f,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function bw(r,s,c,f,_,S,C,U,ie,ye,ke,De){return r=new lO(r,s,c,C,ie,ye,ke,De,U),s=1,S===!0&&(s|=24),S=fr(3,null,null,s),r.current=S,S.stateNode=r,s=Pp(),s.refCount++,r.pooledCache=s,s.refCount++,S.memoizedState={element:f,isDehydrated:c,cache:s},Up(S),r}function yw(r){return r?(r=Ls,r):Ls}function vw(r,s,c,f,_,S){_=yw(_),f.context===null?f.context=_:f.pendingContext=_,f=Da(s),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),c=Ca(r,f,s),c!==null&&(Hr(c,r,s),fu(c,r,s))}function _w(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function sg(r,s){_w(r,s),(r=r.alternate)&&_w(r,s)}function xw(r){if(r.tag===13||r.tag===31){var s=ki(r,67108864);s!==null&&Hr(s,r,67108864),sg(r,67108864)}}function ww(r){if(r.tag===13||r.tag===31){var s=ii();s=In(s);var c=ki(r,s);c!==null&&Hr(c,r,s),sg(r,s)}}var Xh=!0;function cO(r,s,c,f){var _=X.T;X.T=null;var S=ae.p;try{ae.p=2,ag(r,s,c,f)}finally{ae.p=S,X.T=_}}function uO(r,s,c,f){var _=X.T;X.T=null;var S=ae.p;try{ae.p=8,ag(r,s,c,f)}finally{ae.p=S,X.T=_}}function ag(r,s,c,f){if(Xh){var _=og(f);if(_===null)Y0(r,s,f,Jh,c),Ew(r,f);else if(hO(_,r,s,c,f))f.stopPropagation();else if(Ew(r,f),s&4&&-1<dO.indexOf(r)){for(;_!==null;){var S=wt(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var C=Or(S.pendingLanes);if(C!==0){var U=S;for(U.pendingLanes|=2,U.entangledLanes|=2;C;){var ie=1<<31-hn(C);U.entanglements[1]|=ie,C&=~ie}Ss(S),(Rt&6)===0&&(Rh=Be()+500,Nu(0))}}break;case 31:case 13:U=ki(S,2),U!==null&&Hr(U,S,2),Bh(),sg(S,2)}if(S=og(f),S===null&&Y0(r,s,f,Jh,c),S===_)break;_=S}_!==null&&f.stopPropagation()}else Y0(r,s,f,null,c)}}function og(r){return r=go(r),lg(r)}var Jh=null;function lg(r){if(Jh=null,r=ht(r),r!==null){var s=l(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=u(s),r!==null)return r;r=null}else if(c===31){if(r=d(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Jh=r,null}function Sw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case at:return 2;case et:return 8;case Zt:case Dn:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var cg=!1,Ga=null,Fa=null,qa=null,Bu=new Map,Pu=new Map,Ya=[],dO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ew(r,s){switch(r){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Bu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(s.pointerId)}}function $u(r,s,c,f,_,S){return r===null||r.nativeEvent!==S?(r={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:S,targetContainers:[_]},s!==null&&(s=wt(s),s!==null&&xw(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),r)}function hO(r,s,c,f,_){switch(s){case"focusin":return Ga=$u(Ga,r,s,c,f,_),!0;case"dragenter":return Fa=$u(Fa,r,s,c,f,_),!0;case"mouseover":return qa=$u(qa,r,s,c,f,_),!0;case"pointerover":var S=_.pointerId;return Bu.set(S,$u(Bu.get(S)||null,r,s,c,f,_)),!0;case"gotpointercapture":return S=_.pointerId,Pu.set(S,$u(Pu.get(S)||null,r,s,c,f,_)),!0}return!1}function Tw(r){var s=ht(r.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){r.blockedOn=s,Dr(r.priority,function(){ww(c)});return}}else if(s===31){if(s=d(c),s!==null){r.blockedOn=s,Dr(r.priority,function(){ww(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Qh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=og(r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);Sl=f,c.target.dispatchEvent(f),Sl=null}else return s=wt(c),s!==null&&xw(s),r.blockedOn=c,!1;s.shift()}return!0}function kw(r,s,c){Qh(r)&&c.delete(s)}function fO(){cg=!1,Ga!==null&&Qh(Ga)&&(Ga=null),Fa!==null&&Qh(Fa)&&(Fa=null),qa!==null&&Qh(qa)&&(qa=null),Bu.forEach(kw),Pu.forEach(kw)}function ef(r,s){r.blockedOn===s&&(r.blockedOn=null,cg||(cg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fO)))}var tf=null;function Aw(r){tf!==r&&(tf=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){tf===r&&(tf=null);for(var s=0;s<r.length;s+=3){var c=r[s],f=r[s+1],_=r[s+2];if(typeof f!="function"){if(lg(f||c)===null)continue;break}var S=wt(c);S!==null&&(r.splice(s,3),s-=3,o0(S,{pending:!0,data:_,method:c.method,action:f},f,_))}}))}function sc(r){function s(ie){return ef(ie,r)}Ga!==null&&ef(Ga,r),Fa!==null&&ef(Fa,r),qa!==null&&ef(qa,r),Bu.forEach(s),Pu.forEach(s);for(var c=0;c<Ya.length;c++){var f=Ya[c];f.blockedOn===r&&(f.blockedOn=null)}for(;0<Ya.length&&(c=Ya[0],c.blockedOn===null);)Tw(c),c.blockedOn===null&&Ya.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var _=c[f],S=c[f+1],C=_[An]||null;if(typeof S=="function")C||Aw(c);else if(C){var U=null;if(S&&S.hasAttribute("formAction")){if(_=S,C=S[An]||null)U=C.formAction;else if(lg(_)!==null)continue}else U=C.action;typeof U=="function"?c[f+1]=U:(c.splice(f,3),f-=3),Aw(c)}}}function jw(){function r(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(C){return _=C})},focusReset:"manual",scroll:"manual"})}function s(){_!==null&&(_(),_=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),_!==null&&(_(),_=null)}}}function ug(r){this._internalRoot=r}nf.prototype.render=ug.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,f=ii();vw(c,f,r,s,null,null)},nf.prototype.unmount=ug.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;vw(r.current,2,null,r,null,null),Bh(),s[Kr]=null}};function nf(r){this._internalRoot=r}nf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ns();r={blockedOn:null,target:r,priority:s};for(var c=0;c<Ya.length&&s!==0&&s<Ya[c].priority;c++);Ya.splice(c,0,r),c===0&&Tw(r)}};var Nw=t.version;if(Nw!=="19.2.1")throw Error(i(527,Nw,"19.2.1"));ae.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var mO={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{dn=rf.inject(mO),Mt=rf}catch{}}return zu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var c=!1,f="",_=B_,S=P_,C=$_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=bw(r,1,!1,null,null,c,f,null,_,S,C,jw),r[Kr]=s.current,q0(r),new ug(s)},zu.hydrateRoot=function(r,s,c){if(!a(r))throw Error(i(299));var f=!1,_="",S=B_,C=P_,U=$_,ie=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(ie=c.formState)),s=bw(r,1,!0,s,c??null,f,_,ie,S,C,U,jw),s.context=yw(null),c=s.current,f=ii(),f=In(f),_=Da(f),_.callback=null,Ca(c,_,f),c=f,s.current.lanes=c,Gi(s,c),Ss(s),r[Kr]=s.current,q0(r),new nf(s)},zu.version="19.2.1",zu}var Iw;function SO(){if(Iw)return fg.exports;Iw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fg.exports=wO(),fg.exports}var EO=SO();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zw="popstate";function TO(e={}){function t(a,l){let{pathname:u="/",search:d="",hash:m=""}=gl(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),jb("",{pathname:u,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let u=a.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof l=="string"?l:ud(l))}function i(a,l){Ii(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return AO(t,n,i,e)}function gn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ii(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kO(){return Math.random().toString(36).substring(2,10)}function Uw(e,t){return{usr:e.state,key:e.key,idx:t}}function jb(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?gl(t):t,state:n,key:t&&t.key||i||kO()}}function ud({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function gl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function AO(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,d="POP",m=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){d="POP";let A=g(),D=A==null?null:A-p;p=A,m&&m({action:d,location:k.location,delta:D})}function x(A,D){d="PUSH";let B=jb(k.location,A,D);n&&n(B,A),p=g()+1;let N=Uw(B,p),M=k.createHref(B);try{u.pushState(N,"",M)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(M)}l&&m&&m({action:d,location:k.location,delta:1})}function w(A,D){d="REPLACE";let B=jb(k.location,A,D);n&&n(B,A),p=g();let N=Uw(B,p),M=k.createHref(B);u.replaceState(N,"",M),l&&m&&m({action:d,location:k.location,delta:0})}function T(A){return jO(A)}let k={get action(){return d},get location(){return e(a,u)},listen(A){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(zw,y),m=A,()=>{a.removeEventListener(zw,y),m=null}},createHref(A){return t(a,A)},createURL:T,encodeLocation(A){let D=T(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:x,replace:w,go(A){return u.go(A)}};return k}function jO(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gn(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:ud(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function bE(e,t,n="/"){return NO(e,t,n,!1)}function NO(e,t,n,i){let a=typeof t=="string"?gl(t):t,l=sa(a.pathname||"/",n);if(l==null)return null;let u=yE(e);OO(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let p=UO(l);d=IO(u[m],p,i)}return d}function yE(e,t=[],n=[],i="",a=!1){let l=(u,d,m=a,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&m)return;gn(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=ia([i,g.relativePath]),x=n.concat(g);u.children&&u.children.length>0&&(gn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),yE(u.children,t,x,y,m)),!(u.path==null&&!u.index)&&t.push({path:y,score:PO(y,u.index),routesMeta:x})};return e.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))l(u,d);else for(let m of vE(u.path))l(u,d,!0,m)}),t}function vE(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=vE(i.join("/")),d=[];return d.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...u),d.map(m=>e.startsWith("/")&&m===""?"/":m)}function OO(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$O(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var DO=/^:[\w-]+$/,CO=3,MO=2,RO=1,LO=10,BO=-2,Hw=e=>e==="*";function PO(e,t){let n=e.split("/"),i=n.length;return n.some(Hw)&&(i+=BO),t&&(i+=MO),n.filter(a=>!Hw(a)).reduce((a,l)=>a+(DO.test(l)?CO:l===""?RO:LO),i)}function $O(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function IO(e,t,n=!1){let{routesMeta:i}=e,a={},l="/",u=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,g=l==="/"?t:t.slice(l.length)||"/",y=dm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},g),x=m.route;if(!y&&p&&n&&!i[i.length-1].route.index&&(y=dm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),u.push({params:a,pathname:ia([l,y.pathname]),pathnameBase:YO(ia([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=ia([l,y.pathnameBase]))}return u}function dm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=zO(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},x)=>{if(g==="*"){let T=d[x]||"";u=l.slice(0,l.length-T.length).replace(/(.)\/+$/,"$1")}const w=d[x];return y&&!w?p[g]=void 0:p[g]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:e}}function zO(e,t=!1,n=!0){Ii(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function UO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ii(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function sa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var HO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GO=e=>HO.test(e);function FO(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?gl(e):e,l;if(n)if(GO(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Ii(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?l=Gw(n.substring(1),"/"):l=Gw(n,t)}else l=t;return{pathname:l,search:ZO(i),hash:VO(a)}}function Gw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bg(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _E(e){let t=qO(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function xE(e,t,n,i=!1){let a;typeof e=="string"?a=gl(e):(a={...e},gn(!a.pathname||!a.pathname.includes("?"),bg("?","pathname","search",a)),gn(!a.pathname||!a.pathname.includes("#"),bg("#","pathname","hash",a)),gn(!a.search||!a.search.includes("#"),bg("#","search","hash",a)));let l=e===""||a.pathname==="",u=l?"/":a.pathname,d;if(u==null)d=n;else{let y=t.length-1;if(!i&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}d=y>=0?t[y]:"/"}let m=FO(a,d),p=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||g)&&(m.pathname+="/"),m}var ia=e=>e.join("/").replace(/\/\/+/g,"/"),YO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function WO(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wE=["POST","PUT","PATCH","DELETE"];new Set(wE);var XO=["GET",...wE];new Set(XO);var Lc=j.createContext(null);Lc.displayName="DataRouter";var Hm=j.createContext(null);Hm.displayName="DataRouterState";j.createContext(!1);var SE=j.createContext({isTransitioning:!1});SE.displayName="ViewTransition";var JO=j.createContext(new Map);JO.displayName="Fetchers";var QO=j.createContext(null);QO.displayName="Await";var cs=j.createContext(null);cs.displayName="Navigation";var kd=j.createContext(null);kd.displayName="Location";var oa=j.createContext({outlet:null,matches:[],isDataRoute:!1});oa.displayName="Route";var vy=j.createContext(null);vy.displayName="RouteError";function eD(e,{relative:t}={}){gn(Ad(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=j.useContext(cs),{hash:a,pathname:l,search:u}=jd(e,{relative:t}),d=l;return n!=="/"&&(d=l==="/"?n:ia([n,l])),i.createHref({pathname:d,search:u,hash:a})}function Ad(){return j.useContext(kd)!=null}function bl(){return gn(Ad(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(kd).location}var EE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TE(e){j.useContext(cs).static||j.useLayoutEffect(e)}function tD(){let{isDataRoute:e}=j.useContext(oa);return e?mD():nD()}function nD(){gn(Ad(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(Lc),{basename:t,navigator:n}=j.useContext(cs),{matches:i}=j.useContext(oa),{pathname:a}=bl(),l=JSON.stringify(_E(i)),u=j.useRef(!1);return TE(()=>{u.current=!0}),j.useCallback((m,p={})=>{if(Ii(u.current,EE),!u.current)return;if(typeof m=="number"){n.go(m);return}let g=xE(m,JSON.parse(l),a,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ia([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,l,a,e])}j.createContext(null);function jd(e,{relative:t}={}){let{matches:n}=j.useContext(oa),{pathname:i}=bl(),a=JSON.stringify(_E(n));return j.useMemo(()=>xE(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function rD(e,t){return kE(e,t)}function kE(e,t,n,i,a){gn(Ad(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(cs),{matches:u}=j.useContext(oa),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let B=y&&y.path||"";AE(p,!y||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let x=bl(),w;if(t){let B=typeof t=="string"?gl(t):t;gn(g==="/"||B.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=x;let T=w.pathname||"/",k=T;if(g!=="/"){let B=g.replace(/^\//,"").split("/");k="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let A=bE(e,{pathname:k});Ii(y||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ii(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=lD(A&&A.map(B=>Object.assign({},B,{params:Object.assign({},m,B.params),pathname:ia([g,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:ia([g,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),u,n,i,a);return t&&D?j.createElement(kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},D):D}function iD(){let e=fD(),t=KO(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,u)}var sD=j.createElement(iD,null),aD=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?j.createElement(oa.Provider,{value:this.props.routeContext},j.createElement(vy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oD({routeContext:e,match:t,children:n}){let i=j.useContext(Lc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(oa.Provider,{value:e},n)}function lD(e,t=[],n=null,i=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=n?.errors;if(u!=null){let g=l.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);gn(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,m=-1;if(n)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:x,errors:w}=n,T=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=n&&i?(g,y)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:WO(n.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let w,T=!1,k=null,A=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,k=y.route.errorElement||sD,d&&(m<0&&x===0?(AE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):m===x&&(T=!0,A=y.route.hydrateFallbackElement||null)));let D=t.concat(l.slice(0,x+1)),B=()=>{let N;return w?N=k:T?N=A:y.route.Component?N=j.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=g,j.createElement(oD,{match:y,routeContext:{outlet:g,matches:D,isDataRoute:n!=null},children:N})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?j.createElement(aD,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:B(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:p}):B()},null)}function _y(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cD(e){let t=j.useContext(Lc);return gn(t,_y(e)),t}function uD(e){let t=j.useContext(Hm);return gn(t,_y(e)),t}function dD(e){let t=j.useContext(oa);return gn(t,_y(e)),t}function xy(e){let t=dD(e),n=t.matches[t.matches.length-1];return gn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function hD(){return xy("useRouteId")}function fD(){let e=j.useContext(vy),t=uD("useRouteError"),n=xy("useRouteError");return e!==void 0?e:t.errors?.[n]}function mD(){let{router:e}=cD("useNavigate"),t=xy("useNavigate"),n=j.useRef(!1);return TE(()=>{n.current=!0}),j.useCallback(async(a,l={})=>{Ii(n.current,EE),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var Fw={};function AE(e,t,n){!t&&!Fw[e]&&(Fw[e]=!0,Ii(!1,n))}j.memo(pD);function pD({routes:e,future:t,state:n,unstable_onError:i}){return kE(e,void 0,n,i,t)}function Nb(e){gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gD({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){gn(!Ad(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[d,a,l,u]);typeof n=="string"&&(n=gl(n));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:w="default"}=n,T=j.useMemo(()=>{let k=sa(p,d);return k==null?null:{location:{pathname:k,search:g,hash:y,state:x,key:w},navigationType:i}},[d,p,g,y,x,w,i]);return Ii(T!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:j.createElement(cs.Provider,{value:m},j.createElement(kd.Provider,{children:t,value:T}))}function bD({children:e,location:t}){return rD(Ob(e),t)}function Ob(e,t=[]){let n=[];return j.Children.forEach(e,(i,a)=>{if(!j.isValidElement(i))return;let l=[...t,a];if(i.type===j.Fragment){n.push.apply(n,Ob(i.props.children,l));return}gn(i.type===Nb,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Ob(i.props.children,l)),n.push(u)}),n}var Qf="get",em="application/x-www-form-urlencoded";function Gm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function yD(e){return Gm(e)&&e.tagName.toLowerCase()==="button"}function vD(e){return Gm(e)&&e.tagName.toLowerCase()==="form"}function _D(e){return Gm(e)&&e.tagName.toLowerCase()==="input"}function xD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wD(e,t){return e.button===0&&(!t||t==="_self")&&!xD(e)}var sf=null;function SD(){if(sf===null)try{new FormData(document.createElement("form"),0),sf=!1}catch{sf=!0}return sf}var ED=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yg(e){return e!=null&&!ED.has(e)?(Ii(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${em}"`),null):e}function TD(e,t){let n,i,a,l,u;if(vD(e)){let d=e.getAttribute("action");i=d?sa(d,t):null,n=e.getAttribute("method")||Qf,a=yg(e.getAttribute("enctype"))||em,l=new FormData(e)}else if(yD(e)||_D(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||d.getAttribute("action");if(i=m?sa(m,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||Qf,a=yg(e.getAttribute("formenctype"))||yg(d.getAttribute("enctype"))||em,l=new FormData(d,e),!SD()){let{name:p,type:g,value:y}=e;if(g==="image"){let x=p?`${p}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else p&&l.append(p,y)}}else{if(Gm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qf,i=null,a=em,u=e}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kD(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&sa(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function AD(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function ND(e,t,n){let i=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let u=await AD(l,n);return u.links?u.links():[]}return[]}));return MD(i.flat(1).filter(jD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function qw(e,t,n,i,a,l){let u=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,d=(m,p)=>n[p].pathname!==m.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,p)=>u(m,p)||d(m,p)):l==="data"?t.filter((m,p)=>{let g=i.routes[m.route.id];if(!g||!g.hasLoader)return!1;if(u(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function OD(e,t,{includeHydrateFallback:n}={}){return DD(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function DD(e){return[...new Set(e)]}function CD(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function MD(e,t){let n=new Set;return new Set(t),e.reduce((i,a)=>{let l=JSON.stringify(CD(a));return n.has(l)||(n.add(l),i.push({key:l,link:a})),i},[])}function jE(){let e=j.useContext(Lc);return wy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function RD(){let e=j.useContext(Hm);return wy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Sy=j.createContext(void 0);Sy.displayName="FrameworkContext";function NE(){let e=j.useContext(Sy);return wy(e,"You must render this element inside a <HydratedRouter> element"),e}function LD(e,t){let n=j.useContext(Sy),[i,a]=j.useState(!1),[l,u]=j.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,x=j.useRef(null);j.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let k=D=>{D.forEach(B=>{u(B.isIntersecting)})},A=new IntersectionObserver(k,{threshold:.5});return x.current&&A.observe(x.current),()=>{A.disconnect()}}},[e]),j.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let w=()=>{a(!0)},T=()=>{a(!1),u(!1)};return n?e!=="intent"?[l,x,{}]:[l,x,{onFocus:Uu(d,w),onBlur:Uu(m,T),onMouseEnter:Uu(p,w),onMouseLeave:Uu(g,T),onTouchStart:Uu(y,w)}]:[!1,x,{}]}function Uu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function BD({page:e,...t}){let{router:n}=jE(),i=j.useMemo(()=>bE(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?j.createElement($D,{page:e,matches:i,...t}):null}function PD(e){let{manifest:t,routeModules:n}=NE(),[i,a]=j.useState([]);return j.useEffect(()=>{let l=!1;return ND(e,t,n).then(u=>{l||a(u)}),()=>{l=!0}},[e,t,n]),i}function $D({page:e,matches:t,...n}){let i=bl(),{manifest:a,routeModules:l}=NE(),{basename:u}=jE(),{loaderData:d,matches:m}=RD(),p=j.useMemo(()=>qw(e,t,m,a,i,"data"),[e,t,m,a,i]),g=j.useMemo(()=>qw(e,t,m,a,i,"assets"),[e,t,m,a,i]),y=j.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let T=new Set,k=!1;if(t.forEach(D=>{let B=a.routes[D.route.id];!B||!B.hasLoader||(!p.some(N=>N.route.id===D.route.id)&&D.route.id in d&&l[D.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:T.add(D.route.id))}),T.size===0)return[];let A=kD(e,u,"data");return k&&T.size>0&&A.searchParams.set("_routes",t.filter(D=>T.has(D.route.id)).map(D=>D.route.id).join(",")),[A.pathname+A.search]},[u,d,i,a,p,t,e,l]),x=j.useMemo(()=>OD(g,a),[g,a]),w=PD(g);return j.createElement(j.Fragment,null,y.map(T=>j.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),x.map(T=>j.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),w.map(({key:T,link:k})=>j.createElement("link",{key:T,nonce:n.nonce,...k})))}function ID(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var OE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OE&&(window.__reactRouterVersion="7.10.1")}catch{}function zD({basename:e,children:t,unstable_useTransitions:n,window:i}){let a=j.useRef();a.current==null&&(a.current=TO({window:i,v5Compat:!0}));let l=a.current,[u,d]=j.useState({action:l.action,location:l.location}),m=j.useCallback(p=>{n===!1?d(p):j.startTransition(()=>d(p))},[n]);return j.useLayoutEffect(()=>l.listen(m),[l,m]),j.createElement(gD,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:n===!0})}var DE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CE=j.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:d,target:m,to:p,preventScrollReset:g,viewTransition:y,...x},w){let{basename:T,unstable_useTransitions:k}=j.useContext(cs),A=typeof p=="string"&&DE.test(p),D,B=!1;if(typeof p=="string"&&A&&(D=p,OE))try{let J=new URL(window.location.href),V=p.startsWith("//")?new URL(J.protocol+p):new URL(p),Z=sa(V.pathname,T);V.origin===J.origin&&Z!=null?p=Z+V.search+V.hash:B=!0}catch{Ii(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=eD(p,{relative:a}),[M,R,I]=LD(i,x),G=FD(p,{replace:u,state:d,target:m,preventScrollReset:g,relative:a,viewTransition:y,unstable_useTransitions:k});function Y(J){t&&t(J),J.defaultPrevented||G(J)}let q=j.createElement("a",{...x,...I,href:D||N,onClick:B||l?t:Y,ref:ID(w,R),target:m,"data-discover":!A&&n==="render"?"true":void 0});return M&&!A?j.createElement(j.Fragment,null,q,j.createElement(BD,{page:N})):q});CE.displayName="Link";var UD=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:d,children:m,...p},g){let y=jd(u,{relative:p.relative}),x=bl(),w=j.useContext(Hm),{navigator:T,basename:k}=j.useContext(cs),A=w!=null&&KD(y)&&d===!0,D=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,B=x.pathname,N=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(B=B.toLowerCase(),N=N?N.toLowerCase():null,D=D.toLowerCase()),N&&k&&(N=sa(N,k)||N);const M=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let R=B===D||!a&&B.startsWith(D)&&B.charAt(M)==="/",I=N!=null&&(N===D||!a&&N.startsWith(D)&&N.charAt(D.length)==="/"),G={isActive:R,isPending:I,isTransitioning:A},Y=R?t:void 0,q;typeof i=="function"?q=i(G):q=[i,R?"active":null,I?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let J=typeof l=="function"?l(G):l;return j.createElement(CE,{...p,"aria-current":Y,className:q,ref:g,style:J,to:u,viewTransition:d},typeof m=="function"?m(G):m)});UD.displayName="NavLink";var HD=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:l,method:u=Qf,action:d,onSubmit:m,relative:p,preventScrollReset:g,viewTransition:y,...x},w)=>{let{unstable_useTransitions:T}=j.useContext(cs),k=ZD(),A=VD(d,{relative:p}),D=u.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&DE.test(d),N=M=>{if(m&&m(M),M.defaultPrevented)return;M.preventDefault();let R=M.nativeEvent.submitter,I=R?.getAttribute("formmethod")||u,G=()=>k(R||M.currentTarget,{fetcherKey:t,method:I,navigate:n,replace:a,state:l,relative:p,preventScrollReset:g,viewTransition:y});T&&n!==!1?j.startTransition(()=>G()):G()};return j.createElement("form",{ref:w,method:D,action:A,onSubmit:i?m:N,...x,"data-discover":!B&&e==="render"?"true":void 0})});HD.displayName="Form";function GD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ME(e){let t=j.useContext(Lc);return gn(t,GD(e)),t}function FD(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:l,viewTransition:u,unstable_useTransitions:d}={}){let m=tD(),p=bl(),g=jd(e,{relative:l});return j.useCallback(y=>{if(wD(y,t)){y.preventDefault();let x=n!==void 0?n:ud(p)===ud(g),w=()=>m(e,{replace:x,state:i,preventScrollReset:a,relative:l,viewTransition:u});d?j.startTransition(()=>w()):w()}},[p,m,g,n,i,t,e,a,l,u,d])}var qD=0,YD=()=>`__${String(++qD)}__`;function ZD(){let{router:e}=ME("useSubmit"),{basename:t}=j.useContext(cs),n=hD(),i=e.fetch,a=e.navigate;return j.useCallback(async(l,u={})=>{let{action:d,method:m,encType:p,formData:g,body:y}=TD(l,t);if(u.navigate===!1){let x=u.fetcherKey||YD();await i(x,n,u.action||d,{preventScrollReset:u.preventScrollReset,formData:g,body:y,formMethod:u.method||m,formEncType:u.encType||p,flushSync:u.flushSync})}else await a(u.action||d,{preventScrollReset:u.preventScrollReset,formData:g,body:y,formMethod:u.method||m,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,t,n])}function VD(e,{relative:t}={}){let{basename:n}=j.useContext(cs),i=j.useContext(oa);gn(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...jd(e||".",{relative:t})},u=bl();if(e==null){l.search=u.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(g=>g==="")){d.delete("index"),m.filter(y=>y).forEach(y=>d.append("index",y));let g=d.toString();l.search=g?`?${g}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:ia([n,l.pathname])),ud(l)}function KD(e,{relative:t}={}){let n=j.useContext(SE);gn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ME("useViewTransitionState"),a=jd(e,{relative:t});if(!n.isTransitioning)return!1;let l=sa(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=sa(n.nextLocation.pathname,i)||n.nextLocation.pathname;return dm(a.pathname,u)!=null||dm(a.pathname,l)!=null}var Fm=gE();const WD=pl(Fm);let XD={data:""},JD=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||XD,QD=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,eC=/\/\*[^]*?\*\/|  +/g,Yw=/\n+/g,Wa=(e,t)=>{let n="",i="",a="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":i+=l[1]=="f"?Wa(u,l):l+"{"+Wa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?i+=Wa(u,t?t.replace(/([^,])+/g,d=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,d):d?d+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Wa.p?Wa.p(l,u):l+":"+u+";")}return n+(t&&a?t+"{"+a+"}":a)+i},Ws={},RE=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+RE(e[n]);return t}return e},tC=(e,t,n,i,a)=>{let l=RE(e),u=Ws[l]||(Ws[l]=(m=>{let p=0,g=11;for(;p<m.length;)g=101*g+m.charCodeAt(p++)>>>0;return"go"+g})(l));if(!Ws[u]){let m=l!==e?e:(p=>{let g,y,x=[{}];for(;g=QD.exec(p.replace(eC,""));)g[4]?x.shift():g[3]?(y=g[3].replace(Yw," ").trim(),x.unshift(x[0][y]=x[0][y]||{})):x[0][g[1]]=g[2].replace(Yw," ").trim();return x[0]})(e);Ws[u]=Wa(a?{["@keyframes "+u]:m}:m,n?"":"."+u)}let d=n&&Ws.g?Ws.g:null;return n&&(Ws.g=Ws[u]),((m,p,g,y)=>{y?p.data=p.data.replace(y,m):p.data.indexOf(m)===-1&&(p.data=g?m+p.data:p.data+m)})(Ws[u],t,i,d),u},nC=(e,t,n)=>e.reduce((i,a,l)=>{let u=t[l];if(u&&u.call){let d=u(n),m=d&&d.props&&d.props.className||/^go/.test(d)&&d;u=m?"."+m:d&&typeof d=="object"?d.props?"":Wa(d,""):d===!1?"":d}return i+a+(u??"")},"");function qm(e){let t=this||{},n=e.call?e(t.p):e;return tC(n.unshift?n.raw?nC(n,[].slice.call(arguments,1),t.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):n,JD(t.target),t.g,t.o,t.k)}let LE,Db,Cb;qm.bind({g:1});let aa=qm.bind({k:1});function rC(e,t,n,i){Wa.p=t,LE=e,Db=n,Cb=i}function ro(e,t){let n=this||{};return function(){let i=arguments;function a(l,u){let d=Object.assign({},l),m=d.className||a.className;n.p=Object.assign({theme:Db&&Db()},d),n.o=/ *go\d+/.test(m),d.className=qm.apply(n,i)+(m?" "+m:"");let p=e;return e[0]&&(p=d.as||e,delete d.as),Cb&&p[0]&&Cb(d),LE(p,d)}return a}}var iC=e=>typeof e=="function",hm=(e,t)=>iC(e)?e(t):e,sC=(()=>{let e=0;return()=>(++e).toString()})(),BE=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),aC=20,Ey="default",PE=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:i}=t;return PE(e,{type:e.toasts.find(u=>u.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(u=>u.id===a||a===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},tm=[],$E={toasts:[],pausedAt:void 0,settings:{toastLimit:aC}},As={},IE=(e,t=Ey)=>{As[t]=PE(As[t]||$E,e),tm.forEach(([n,i])=>{n===t&&i(As[t])})},zE=e=>Object.keys(As).forEach(t=>IE(e,t)),oC=e=>Object.keys(As).find(t=>As[t].toasts.some(n=>n.id===e)),Ym=(e=Ey)=>t=>{IE(t,e)},lC={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},cC=(e={},t=Ey)=>{let[n,i]=j.useState(As[t]||$E),a=j.useRef(As[t]);j.useEffect(()=>(a.current!==As[t]&&i(As[t]),tm.push([t,i]),()=>{let u=tm.findIndex(([d])=>d===t);u>-1&&tm.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var d,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((d=e[u.type])==null?void 0:d.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||lC[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},uC=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||sC()}),Nd=e=>(t,n)=>{let i=uC(t,e,n);return Ym(i.toasterId||oC(i.id))({type:2,toast:i}),i.id},qn=(e,t)=>Nd("blank")(e,t);qn.error=Nd("error");qn.success=Nd("success");qn.loading=Nd("loading");qn.custom=Nd("custom");qn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Ym(t)(n):zE(n)};qn.dismissAll=e=>qn.dismiss(void 0,e);qn.remove=(e,t)=>{let n={type:4,toastId:e};t?Ym(t)(n):zE(n)};qn.removeAll=e=>qn.remove(void 0,e);qn.promise=(e,t,n)=>{let i=qn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let l=t.success?hm(t.success,a):void 0;return l?qn.success(l,{id:i,...n,...n?.success}):qn.dismiss(i),a}).catch(a=>{let l=t.error?hm(t.error,a):void 0;l?qn.error(l,{id:i,...n,...n?.error}):qn.dismiss(i)}),e};var dC=1e3,hC=(e,t="default")=>{let{toasts:n,pausedAt:i}=cC(e,t),a=j.useRef(new Map).current,l=j.useCallback((y,x=dC)=>{if(a.has(y))return;let w=setTimeout(()=>{a.delete(y),u({type:4,toastId:y})},x);a.set(y,w)},[]);j.useEffect(()=>{if(i)return;let y=Date.now(),x=n.map(w=>{if(w.duration===1/0)return;let T=(w.duration||0)+w.pauseDuration-(y-w.createdAt);if(T<0){w.visible&&qn.dismiss(w.id);return}return setTimeout(()=>qn.dismiss(w.id,t),T)});return()=>{x.forEach(w=>w&&clearTimeout(w))}},[n,i,t]);let u=j.useCallback(Ym(t),[t]),d=j.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=j.useCallback((y,x)=>{u({type:1,toast:{id:y,height:x}})},[u]),p=j.useCallback(()=>{i&&u({type:6,time:Date.now()})},[i,u]),g=j.useCallback((y,x)=>{let{reverseOrder:w=!1,gutter:T=8,defaultPosition:k}=x||{},A=n.filter(N=>(N.position||k)===(y.position||k)&&N.height),D=A.findIndex(N=>N.id===y.id),B=A.filter((N,M)=>M<D&&N.visible).length;return A.filter(N=>N.visible).slice(...w?[B+1]:[0,B]).reduce((N,M)=>N+(M.height||0)+T,0)},[n]);return j.useEffect(()=>{n.forEach(y=>{if(y.dismissed)l(y.id,y.removeDelay);else{let x=a.get(y.id);x&&(clearTimeout(x),a.delete(y.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:d,endPause:p,calculateOffset:g}}},fC=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mC=aa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pC=aa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gC=ro("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mC} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${pC} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bC=aa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yC=ro("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${bC} 1s linear infinite;
`,vC=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,_C=aa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xC=ro("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${_C} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wC=ro("div")`
  position: absolute;
`,SC=ro("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,EC=aa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TC=ro("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${EC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,kC=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?j.createElement(TC,null,t):t:n==="blank"?null:j.createElement(SC,null,j.createElement(yC,{...i}),n!=="loading"&&j.createElement(wC,null,n==="error"?j.createElement(gC,{...i}):j.createElement(xC,{...i})))},AC=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jC=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,NC="0%{opacity:0;} 100%{opacity:1;}",OC="0%{opacity:1;} 100%{opacity:0;}",DC=ro("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,CC=ro("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,MC=(e,t)=>{let n=e.includes("top")?1:-1,[i,a]=BE()?[NC,OC]:[AC(n),jC(n)];return{animation:t?`${aa(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${aa(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},RC=j.memo(({toast:e,position:t,style:n,children:i})=>{let a=e.height?MC(e.position||t||"top-center",e.visible):{opacity:0},l=j.createElement(kC,{toast:e}),u=j.createElement(CC,{...e.ariaProps},hm(e.message,e));return j.createElement(DC,{className:e.className,style:{...a,...n,...e.style}},typeof i=="function"?i({icon:l,message:u}):j.createElement(j.Fragment,null,l,u))});rC(j.createElement);var LC=({id:e,className:t,style:n,onHeightUpdate:i,children:a})=>{let l=j.useCallback(u=>{if(u){let d=()=>{let m=u.getBoundingClientRect().height;i(e,m)};d(),new MutationObserver(d).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return j.createElement("div",{ref:l,className:t,style:n},a)},BC=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:BE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...a}},PC=qm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,af=16,UE=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:a,toasterId:l,containerStyle:u,containerClassName:d})=>{let{toasts:m,handlers:p}=hC(n,l);return j.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:af,left:af,right:af,bottom:af,pointerEvents:"none",...u},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(g=>{let y=g.position||t,x=p.calculateOffset(g,{reverseOrder:e,gutter:i,defaultPosition:t}),w=BC(y,x);return j.createElement(LC,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?PC:"",style:w},g.type==="custom"?hm(g.message,g):a?a(g):j.createElement(RC,{toast:g,position:y}))}))},$C=qn;function IC(e,t,n,i=0,a=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),d=n+(i+a/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+d+u-1524.5}const zC=864e5;function UC(e){const t=(e-24405875e-1)*zC;return new Date(t)}function HC(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const a=n-2e3;return 63.86+.3345*a-.060374*a*a+.0017275*a**3+651814e-9*a**4+2373599e-11*a**5}if(n>=2005&&n<2050){const a=n-2e3;return 62.92+.32217*a+.005589*a*a}if(n>=2050&&n<=2150){const a=(n-1820)/100;return-20+32*a*a-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const a=(n-1800)/100;return 13.72-33.244*a+68.612*a**2-65.3*a**3-1.653*a**4+.3343*a**5-.012125*a**6+1348e-7*a**7-175e-8*a**8}const i=(n-1820)/100;return-20+32*i*i}function GC(e){const t=Math.floor(e+.5),n=e+.5-t;let i=t;if(t>=2299161){const y=Math.floor((t-186721625e-2)/36524.25);i=t+1+y-Math.floor(y/4)}const a=i+1524,l=Math.floor((a-122.1)/365.25),u=Math.floor(365.25*l),d=Math.floor((a-u)/30.6001),m=a-u-Math.floor(30.6001*d)+n;let p=d-1;p>12&&(p-=12);let g=l-4715;return p>2&&(g-=1),[g,p,m]}const ad=Math.PI,sl=ad/180,FC=180/ad,qC=86400;function YC(e){return e%=360,e<0?e+360:e}function ZC(e,t){return(e-t+540)%360-180}function Zw(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function VC(e){const[t,n]=GC(e);return e+HC(t,Math.round(n))/qC}function Vw(e,t){let n=0,i=1;for(let a=0;a<e.length;a++){let l=0;for(const[u,d,m]of e[a])l+=u*Math.cos(d+m*t);n+=l*i,i*=t}return n*1e-8}function KC(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*sl,i=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*sl,a=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*sl,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*sl,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*sl,d=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[g,y,x,w,T,k,A,D,B]of d){const N=g*n+y*i+x*a+w*l+T*u;m+=(k+A*t)*Math.sin(N),p+=(D+B*t)*Math.cos(N)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function of(e){const t=VC(e),n=(t-2451545)/365250,i=Vw(Kw.L,n),a=Vw(Kw.R,n);let l=i+ad;l>2*ad&&(l-=2*ad);const{dpsi:u}=KC(t),d=u/3600*sl,m=20.4898/(3600*a),p=l+d-m*sl;return YC(p*FC)}function Fn(e,t,n){const i=(t%360+360)%360,a=IC(e,1,1),l=of(a);let u=i-l;u<0&&(u+=360);let d=a+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const w=of(d),T=ZC(i,w);if(Math.abs(T)<m)break;const k=of(d+p),A=of(d-p),D=Zw(k,w),B=Zw(A,w),N=(D-B)/(2*p);d+=T/N}const g=UC(d),y=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(y.getTime()+x*36e5)}return y}const Kw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},Nr=["","","","","","","","","",""],Yr=["","","","","","","","","","","",""],Pi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},pi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},WC=["","","","","","","","","",""],XC=["","","","","","","","","","","",""],JC=["","","","","","","","","","","","","","","","","","","",""],QC=["","","","","","","","","","","","","","","","","","","","","","","",""],Zm=new Set(Nr),Ty=new Set(Yr),Vm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ky={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ay=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],jy={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},HE={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},Ww=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],eM={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},tM={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function nM(e,t=127.5){return(dt(e,t)||"").charAt(0)}const Xw=new Map;function GE(e,t=127.5){const n=`${e}@${t}`,i=Xw.get(n);if(i)return i;const a=Fn(e,315,t);if(!a)throw new Error(`    : year=${e}, lon=${t}`);return Xw.set(n,a),a}const rM=(e,t)=>(e%t+t)%t,FE=e=>e instanceof Date&&!Number.isNaN(e.getTime());function qE(e,t=127.5){if(!FE(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),i=GE(n,t),a=e<i?n-1:n,l=rM(a-4,60);return{useYear:a,index60Num:l}}function dt(e,t=127.5){const{index60Num:n}=qE(e,t);return Ay[n]}const iM=[2,4,6,8,0,2,4,6,8,0];function sM(e,t=127.5){const n=new Array(12);return n[0]=GE(e,t),n[1]=Fn(e,345,t),n[2]=Fn(e,15,t),n[3]=Fn(e,45,t),n[4]=Fn(e,75,t),n[5]=Fn(e,105,t),n[6]=Fn(e,135,t),n[7]=Fn(e,165,t),n[8]=Fn(e,195,t),n[9]=Fn(e,225,t),n[10]=Fn(e,255,t),n[11]=Fn(e+1,285,t),n.map(i=>new Date(i.getTime()+1800*1e3))}function aM(e,t=127.5){const{useYear:n}=qE(e,t),i=sM(n,t);let a=0;for(let u=0;u<12;u++)e>=i[u]&&(a=u);return{monthIndex:a+1,useYear:n,boundaries:i}}function oM(e,t=127.5){const n=nM(e,t),i=Pi..indexOf(n);if(i<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return iM[i]}function lM(e,t,n=127.5){return(oM(e,n)+(t-1))%10}function jt(e,t=127.5){if(!FE(e))return"";const{monthIndex:n}=aM(e,t),i=(2+(n-1))%12,a=Pi.[i],l=lM(e,n,t);return Pi.[l]+a}const YE=(e,t)=>(e%t+t)%t;function ZE(e,t,n,i=0,a=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),d=2-u+Math.floor(u/4),m=(i+a/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+d-1524.5}function cM(e,t){const n=e.getHours(),i=e.getMinutes(),a=n*60+i,l=VE(e);return t===""&&l===""?a>=1380?1:0:t===""&&(l===""||l==="")?a<180?-1:0:(a<0,0)}function uM(e,t){const i=e.getHours()*60+e.getMinutes();return t===""?i>=1380?1:0:t===""&&i<180?-1:0}const fm={JDN:2445731,idx:0};function xt(e,t){const n=cM(e,t),i=new Date(e.getTime());i.setDate(i.getDate()+n);const a=ZE(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),l=Math.floor(a+.5),u=YE(l-fm.JDN+fm.idx,60),d=Ay[u];if(!d)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${a})`);return d}function dM(e,t){const n=new Date(e),i=uM(n,t),a=new Date(e.getTime());a.setDate(a.getDate()+i);const l=ZE(a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes()),u=Math.floor(l+.5),d=YE(u-fm.JDN+fm.idx,60),m=Ay[d];if(!m)throw new Error(`getDayGanZhi: idx=${d} out of range (jdn=${u}, jd=${l})`);return m}function VE(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<Ww.length;n++){const{branch:i,start:a,end:l}=Ww[n];if(a<l){if(t>=a&&t<l)return i}else if(t>=a||t<l)return i}return""}function hM(e,t,n,i){const a=Nr.indexOf(t);if(a<0)return"";let l=(a%5*2+n)%10;const u=e.getHours();return(i===""||i==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),Nr[l]}function zi(e,t,n){e instanceof Date||(e=new Date(e));const i=VE(e),a=Yr.indexOf(i),u=(n??xt(e,t)).charAt(0);return hM(e,u,a,t)+i}const Jw=e=>{let t;const n=new Set,i=(p,g)=>{const y=typeof p=="function"?p(t):p;if(!Object.is(y,t)){const x=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(w=>w(t,x))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(i,a,d);return d},fM=(e=>e?Jw(e):Jw),mM=e=>e;function pM(e,t=mM){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const Qw=e=>{const t=fM(e),n=i=>pM(t,i);return Object.assign(n,t),n},Od=(e=>e?Qw(e):Qw);function gM(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),d=(l=n.getItem(a))!=null?l:null;return d instanceof Promise?d.then(u):u(d)},setItem:(a,l)=>n.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>n.removeItem(a)}}const Mb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return Mb(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Mb(i)(n)}}}},bM=(e,t)=>(n,i,a)=>{let l={storage:gM(()=>localStorage),partialize:k=>k,version:0,merge:(k,A)=>({...A,...k}),...t},u=!1;const d=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},i,a);const g=()=>{const k=l.partialize({...i()});return p.setItem(l.name,{state:k,version:l.version})},y=a.setState;a.setState=(k,A)=>(y(k,A),g());const x=e((...k)=>(n(...k),g()),i,a);a.getInitialState=()=>x;let w;const T=()=>{var k,A;if(!p)return;u=!1,d.forEach(B=>{var N;return B((N=i())!=null?N:x)});const D=((A=l.onRehydrateStorage)==null?void 0:A.call(l,(k=i())!=null?k:x))||void 0;return Mb(p.getItem.bind(p))(l.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==l.version){if(l.migrate){const N=l.migrate(B.state,B.version);return N instanceof Promise?N.then(M=>[!0,M]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var N;const[M,R]=B;if(w=l.merge(R,(N=i())!=null?N:x),n(w,!0),M)return g()}).then(()=>{D?.(w,void 0),w=i(),u=!0,m.forEach(B=>B(w))}).catch(B=>{D?.(void 0,B)})};return a.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(d.add(k),()=>{d.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),w||x},KE=bM;var Xs={},lf={},Rb=function(e,t){return Rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},Rb(e,t)};function WE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Rb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var mm=function(){return mm=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},mm.apply(this,arguments)};function Bc(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function XE(e,t,n,i){var a=arguments.length,l=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,i);else for(var d=e.length-1;d>=0;d--)(u=e[d])&&(l=(a<3?u(l):a>3?u(t,n,l):u(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l}function JE(e,t){return function(n,i){t(n,i,e)}}function QE(e,t,n,i,a,l){function u(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var d=i.kind,m=d==="getter"?"get":d==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,g=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),y,x=!1,w=n.length-1;w>=0;w--){var T={};for(var k in i)T[k]=k==="access"?{}:i[k];for(var k in i.access)T.access[k]=i.access[k];T.addInitializer=function(D){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(D||null))};var A=(0,n[w])(d==="accessor"?{get:g.get,set:g.set}:g[m],T);if(d==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(y=u(A.get))&&(g.get=y),(y=u(A.set))&&(g.set=y),(y=u(A.init))&&a.unshift(y)}else(y=u(A))&&(d==="field"?a.unshift(y):g[m]=y)}p&&Object.defineProperty(p,i.name,g),x=!0}function eT(e,t,n){for(var i=arguments.length>2,a=0;a<t.length;a++)n=i?t[a].call(e,n):t[a].call(e);return i?n:void 0}function tT(e){return typeof e=="symbol"?e:"".concat(e)}function nT(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function rT(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,i){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(g){try{p(i.next(g))}catch(y){u(y)}}function m(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?l(g.value):a(g.value).then(d,m)}p((i=i.apply(e,t||[])).next())})}function iT(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(p){return function(g){return m([p,g])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(g){p=[6,g],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Km=Object.create?(function(e,t,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}):(function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]});function sT(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Km(t,e,n)}function pm(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ny(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),a,l=[],u;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)l.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return l}function aT(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ny(arguments[t]));return e}function oT(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<n;t++)for(var l=arguments[t],u=0,d=l.length;u<d;u++,a++)i[a]=l[u];return i}function lT(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,l;i<a;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}function Ac(e){return this instanceof Ac?(this.v=e,this):new Ac(e)}function cT(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(w){return function(T){return Promise.resolve(T).then(w,y)}}function d(w,T){i[w]&&(a[w]=function(k){return new Promise(function(A,D){l.push([w,k,A,D])>1||m(w,k)})},T&&(a[w]=T(a[w])))}function m(w,T){try{p(i[w](T))}catch(k){x(l[0][3],k)}}function p(w){w.value instanceof Ac?Promise.resolve(w.value.v).then(g,y):x(l[0][2],w)}function g(w){m("next",w)}function y(w){m("throw",w)}function x(w,T){w(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function uT(e){var t,n;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=e[a]?function(u){return(n=!n)?{value:Ac(e[a](u)),done:!1}:l?l(u):u}:l}}function dT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof pm=="function"?pm(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(u){return new Promise(function(d,m){u=e[l](u),a(d,m,u.done,u.value)})}}function a(l,u,d,m){Promise.resolve(m).then(function(p){l({value:p,done:d})},u)}}function hT(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yM=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Lb=function(e){return Lb=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},Lb(e)};function fT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Lb(e),i=0;i<n.length;i++)n[i]!=="default"&&Km(t,e,n[i]);return yM(t,e),t}function mT(e){return e&&e.__esModule?e:{default:e}}function pT(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function gT(e,t,n,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n}function bT(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function yT(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(a=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");a&&(i=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var vM=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function vT(e){function t(l){e.error=e.hasError?new vM(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,i=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(l).then(a,function(u){return t(u),a()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function _T(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,a,l,u){return i?t?".jsx":".js":a&&(!l||!u)?n:a+l+"."+u.toLowerCase()+"js"}):e}const _M={__extends:WE,__assign:mm,__rest:Bc,__decorate:XE,__param:JE,__esDecorate:QE,__runInitializers:eT,__propKey:tT,__setFunctionName:nT,__metadata:rT,__awaiter:Ze,__generator:iT,__createBinding:Km,__exportStar:sT,__values:pm,__read:Ny,__spread:aT,__spreadArrays:oT,__spreadArray:lT,__await:Ac,__asyncGenerator:cT,__asyncDelegator:uT,__asyncValues:dT,__makeTemplateObject:hT,__importStar:fT,__importDefault:mT,__classPrivateFieldGet:pT,__classPrivateFieldSet:gT,__classPrivateFieldIn:bT,__addDisposableResource:yT,__disposeResources:vT,__rewriteRelativeImportExtension:_T},xM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yT,get __assign(){return mm},__asyncDelegator:uT,__asyncGenerator:cT,__asyncValues:dT,__await:Ac,__awaiter:Ze,__classPrivateFieldGet:pT,__classPrivateFieldIn:bT,__classPrivateFieldSet:gT,__createBinding:Km,__decorate:XE,__disposeResources:vT,__esDecorate:QE,__exportStar:sT,__extends:WE,__generator:iT,__importDefault:mT,__importStar:fT,__makeTemplateObject:hT,__metadata:rT,__param:JE,__propKey:tT,__read:Ny,__rest:Bc,__rewriteRelativeImportExtension:_T,__runInitializers:eT,__setFunctionName:nT,__spread:aT,__spreadArray:lT,__spreadArrays:oT,__values:pm,default:_M},Symbol.toStringTag,{value:"Module"})),wM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Wm=class extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}},xT=class extends Wm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Bb=class extends Wm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Pb=class extends Wm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var gm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gm||(gm={}));class SM{constructor(t,{headers:n={},customFetch:i,region:a=gm.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=wM(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,i={}){var a;let l,u;try{const{headers:d,method:m,body:p,signal:g,timeout:y}=i;let x={},{region:w}=i;w||(w=this.region);const T=new URL(`${this.url}/${n}`);w&&w!=="any"&&(x["x-region"]=w,T.searchParams.set("forceFunctionRegion",w));let k;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let A=g;y&&(u=new AbortController,l=setTimeout(()=>u.abort(),y),g?(A=u.signal,g.addEventListener("abort",()=>u.abort())):A=u.signal);const D=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:k,signal:A}).catch(R=>{throw new xT(R)}),B=D.headers.get("x-relay-error");if(B&&B==="true")throw new Bb(D);if(!D.ok)throw new Pb(D);let N=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),M;return N==="application/json"?M=yield D.json():N==="application/octet-stream"||N==="application/pdf"?M=yield D.blob():N==="text/event-stream"?M=D:N==="multipart/form-data"?M=yield D.formData():M=yield D.text(),{data:M,error:null,response:D}}catch(d){return{data:null,error:d,response:d instanceof Pb||d instanceof Bb?d.context:void 0}}finally{l&&clearTimeout(l)}})}}const EM=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return gm},FunctionsClient:SM,FunctionsError:Wm,FunctionsFetchError:xT,FunctionsHttpError:Pb,FunctionsRelayError:Bb},Symbol.toStringTag,{value:"Module"})),wT=Td(EM);var pr={};const Pc=Td(xM);var cf={},uf={},df={},hf={},ff={},mf={},e1;function ST(){if(e1)return mf;e1=1,Object.defineProperty(mf,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return mf.default=e,mf}var t1;function ET(){if(t1)return ff;t1=1,Object.defineProperty(ff,"__esModule",{value:!0});const t=Pc.__importDefault(ST());let n=class{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,g,y,x;let w=null,T=null,k=null,A=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const R=await m.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=R:T=JSON.parse(R))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),M=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");N&&M&&M.length>1&&(k=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(w={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,A=406,D="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const N=await m.text();try{w=JSON.parse(N),Array.isArray(w)&&m.status===404&&(T=[],w=null,A=200,D="OK")}catch{m.status===404&&N===""?(A=204,D="No Content"):w={message:N}}if(w&&this.isMaybeSingle&&(!((x=w?.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,A=200,D="OK"),w&&this.shouldThrowOnError)throw new t.default(w)}return{error:w,data:T,count:k,status:A,statusText:D}});return this.shouldThrowOnError||(d=d.catch(m=>{var p,g,y,x,w,T;let k="";const A=m?.cause;if(A){const D=(p=A?.message)!==null&&p!==void 0?p:"",B=(g=A?.code)!==null&&g!==void 0?g:"";k=`${(y=m?.name)!==null&&y!==void 0?y:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=A?.name)!==null&&x!==void 0?x:"Error"}: ${D}`,B&&(k+=` (${B})`),A?.stack&&(k+=`
${A.stack}`)}else k=(w=m?.stack)!==null&&w!==void 0?w:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}};return ff.default=n,ff}var n1;function TT(){if(n1)return hf;n1=1,Object.defineProperty(hf,"__esModule",{value:!0});const t=Pc.__importDefault(ET());let n=class extends t.default{select(a){let l=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:m=d}={}){const p=m?`${m}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:d=u}={}){const m=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:m=!1,format:p="text"}={}){var g;const y=[a?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return hf.default=n,hf}var r1;function Oy(){if(r1)return df;r1=1,Object.defineProperty(df,"__esModule",{value:!0});const t=Pc.__importDefault(TT()),n=new RegExp("[,()]");let i=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${g}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}};return df.default=i,df}var i1;function kT(){if(i1)return uf;i1=1,Object.defineProperty(uf,"__esModule",{value:!0});const t=Pc.__importDefault(Oy());let n=class{constructor(a,{headers:l={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(a,l){const{head:u=!1,count:d}=l??{},m=u?"HEAD":"GET";let p=!1;const g=(a??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var d;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:m=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(y.length>0){const x=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return uf.default=n,uf}var s1;function TM(){if(s1)return cf;s1=1,Object.defineProperty(cf,"__esModule",{value:!0});const e=Pc,t=e.__importDefault(kT()),n=e.__importDefault(Oy());let i=class AT{constructor(l,{headers:u={},schema:d,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new AT(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:m=!1,count:p}={}){var g;let y;const x=new URL(`${this.url}/rpc/${l}`);let w;d||m?(y=d?"HEAD":"GET",Object.entries(u).filter(([k,A])=>A!==void 0).map(([k,A])=>[k,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([k,A])=>{x.searchParams.append(k,A)})):(y="POST",w=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:y,url:x,headers:T,schema:this.schemaName,body:w,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return cf.default=i,cf}var a1;function jT(){if(a1)return pr;a1=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.PostgrestError=pr.PostgrestBuilder=pr.PostgrestTransformBuilder=pr.PostgrestFilterBuilder=pr.PostgrestQueryBuilder=pr.PostgrestClient=void 0;const e=Pc,t=e.__importDefault(TM());pr.PostgrestClient=t.default;const n=e.__importDefault(kT());pr.PostgrestQueryBuilder=n.default;const i=e.__importDefault(Oy());pr.PostgrestFilterBuilder=i.default;const a=e.__importDefault(TT());pr.PostgrestTransformBuilder=a.default;const l=e.__importDefault(ET());pr.PostgrestBuilder=l.default;const u=e.__importDefault(ST());return pr.PostgrestError=u.default,pr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},pr}class NT{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kM="2.86.2",AM=`realtime-js/${kM}`,OT="1.0.0",jM="2.0.0",o1=OT,$b=1e4,NM=1e3,OM=100;var al;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(al||(al={}));var Pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Pn||(Pn={}));var is;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(is||(is={}));var Ib;(function(e){e.websocket="websocket"})(Ib||(Ib={}));var ol;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ol||(ol={}));class DM{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const a=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,i;const a=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,i){var a,l;const u=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+d.length+u.length+p.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(w),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,d.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,y.length),T.setUint8(k++,n),Array.from(m,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(d,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(u,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(p,D=>T.setUint8(k++,D.charCodeAt(0))),Array.from(y,D=>T.setUint8(k++,D.charCodeAt(0)));var A=new Uint8Array(w.byteLength+i.byteLength);return A.set(new Uint8Array(w),0),A.set(new Uint8Array(i),w.byteLength),A.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[a,l,u,d,m]=i;return n({join_ref:a,ref:l,topic:u,event:d,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,i){const a=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(t.slice(m,m+a));m=m+a;const g=i.decode(t.slice(m,m+l));m=m+l;const y=i.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),w=d===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,T={type:this.BROADCAST_EVENT,event:g,payload:w};return u>0&&(T.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class DT{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const l1=(e,t,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=CM(u,e,t,a),l),{}):{}},CM=(e,t,n,i)=>{const a=t.find(d=>d.name===e),l=a?.type,u=n[e];return l&&!i.includes(l)?CT(l,u):zb(u)},CT=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return BM(t,n)}switch(e){case Kt.bool:return MM(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return RM(t);case Kt.json:case Kt.jsonb:return LM(t);case Kt.timestamp:return PM(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return zb(t);default:return zb(t)}},zb=e=>e,MM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},RM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},LM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BM=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>CT(t,d))}return e},PM=e=>typeof e=="string"?e.replace(" ","T"):e,MT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class vg{constructor(t,n,i={},a=$b){this.channel=t,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ub;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ub||(Ub={}));let RT=class nm{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nm.syncState(this.state,a,l,u),this.pendingDiffs.forEach(m=>{this.state=nm.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=nm.syncDiff(this.state,a,l,u),d())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,a){const l=this.cloneDeep(t),u=this.transformState(n),d={},m={};return this.map(l,(p,g)=>{u[p]||(m[p]=g)}),this.map(u,(p,g)=>{const y=l[p];if(y){const x=g.map(A=>A.presence_ref),w=y.map(A=>A.presence_ref),T=g.filter(A=>w.indexOf(A.presence_ref)<0),k=y.filter(A=>x.indexOf(A.presence_ref)<0);T.length>0&&(d[p]=T),k.length>0&&(m[p]=k)}else d[p]=g}),this.syncDiff(l,{joins:d,leaves:m},i,a)}static syncDiff(t,n,i,a){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(d,m)=>{var p;const g=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(m),g.length>0){const y=t[d].map(w=>w.presence_ref),x=g.filter(w=>y.indexOf(w.presence_ref)<0);t[d].unshift(...x)}i(d,g,m)}),this.map(u,(d,m)=>{let p=t[d];if(!p)return;const g=m.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),t[d]=p,a(d,p,m),p.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const a=t[i];return"metas"in a?n[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Hb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Hb||(Hb={}));var Sc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Sc||(Sc={}));var ks;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ks||(ks={}));const $M=Pn;let LT=class BT{constructor(t,n={config:{}},i){var a,l;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new vg(this,is.join,this.params,this.timeout),this.rejoinTimer=new DT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(is.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new RT(this),this.broadcastEndpointURL=MT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Pn.closed){const{config:{broadcast:u,presence:d,private:m}}=this.params,p=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[Sc.PRESENCE]&&this.bindings[Sc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,y={},x={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>t?.(ks.CHANNEL_ERROR,w)),this._onClose(()=>t?.(ks.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var T;if(this.socket.setAuth(),w===void 0){t?.(ks.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,A=(T=k?.length)!==null&&T!==void 0?T:0,D=[];for(let B=0;B<A;B++){const N=k[B],{filter:{event:M,schema:R,table:I,filter:G}}=N,Y=w&&w[B];if(Y&&Y.event===M&&Y.schema===R&&Y.table===I&&Y.filter===G)D.push(Object.assign(Object.assign({},N),{id:Y.id}));else{this.unsubscribe(),this.state=Pn.errored,t?.(ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(ks.SUBSCRIBED);return}}).receive("error",w=>{this.state=Pn.errored,t?.(ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t?.(ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Pn.joined&&t===Sc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const p=await d.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var i,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(is.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new vg(this,is.leave,{},t),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pn.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new vg(this,t,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>OM){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var a,l;const u=t.toLocaleLowerCase(),{close:d,error:m,leave:p,join:g}=is;if(i&&[d,m,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,n,i);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var T,k,A;return((T=w.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(k=w.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(w=>w.callback(x,i)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var T,k,A,D,B,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const M=w.id,R=(T=w.filter)===null||T===void 0?void 0:T.event;return M&&((k=n.ids)===null||k===void 0?void 0:k.includes(M))&&(R==="*"||R?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const M=(B=(D=w?.filter)===null||D===void 0?void 0:D.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return M==="*"||M===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:A,commit_timestamp:D,type:B,errors:N}=T;x=Object.assign(Object.assign({},{schema:k,table:A,commit_timestamp:D,eventType:B,new:{},old:{},errors:N}),this._getPayloadRecords(T))}w.callback(x,i)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const a=t.toLocaleLowerCase(),l={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&BT.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(is.close,{},t)}_onError(t){this._on(is.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=l1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=l1(t.columns,t.old_record)),n}};const _g=()=>{},pf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IM=[1e3,2e3,5e3,1e4],zM=1e4,UM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let HM=class{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$b,this.transport=null,this.heartbeatIntervalMs=pf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_g,this.ref=0,this.reconnectTimer=null,this.vsn=o1,this.logger=_g,this.conn=null,this.sendBuffer=[],this.serializer=new DM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ib.websocket}`,this.httpEndpoint=MT(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=NT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case al.connecting:return ol.Connecting;case al.open:return ol.Open;case al.closing:return ol.Closing;default:return ol.Closed}}isConnected(){return this.connectionState()===ol.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new LT(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:i,payload:a,ref:l}=t,u=()=>{this.encode(t,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${n} ${i} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(NM,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},pf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:l,ref:u}=n,d=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${a} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(a,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===al.open||this.conn.readyState===al.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(is.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${i}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([UM],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:AM};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(is.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new DT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,a,l,u,d,m,p,g,y,x,w;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:$b,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:pf.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:_g,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:o1,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>IM[T-1]||zM),this.vsn){case OT:this.encode=(g=t?.encode)!==null&&g!==void 0?g:((T,k)=>k(JSON.stringify(T))),this.decode=(y=t?.decode)!==null&&y!==void 0?y:((T,k)=>k(JSON.parse(T)));break;case jM:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(w=t?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const GM=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:$M,get REALTIME_LISTEN_TYPES(){return Sc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Hb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Ub},get REALTIME_SUBSCRIBE_STATES(){return ks},RealtimeChannel:LT,RealtimeClient:HM,RealtimePresence:RT,WebSocketFactory:NT},Symbol.toStringTag,{value:"Module"})),PT=Td(GM);class Dd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class $T extends Dd{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bm extends Dd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Dy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FM=()=>Response,Gb=e=>{if(Array.isArray(e))return e.map(n=>Gb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=Gb(i)}),t},qM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},YM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),xg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},ZM=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const i=yield FM();e instanceof i&&!n?.noResolveJson?e.json().then(a=>{const l=e.status||500,u=a?.statusCode||l+"";t(new $T(xg(a),l,u))}).catch(a=>{t(new bm(xg(a),a))}):t(new bm(xg(e),e))}),VM=(e,t,n,i)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!i?a:(qM(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(i)):a.body=i,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function Cd(e,t,n,i,a,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,d)=>{e(n,VM(t,i,a,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>ZM(m,d,i))})})}function dd(e,t,n,i){return Ze(this,void 0,void 0,function*(){return Cd(e,"GET",t,n,i)})}function rs(e,t,n,i,a){return Ze(this,void 0,void 0,function*(){return Cd(e,"POST",t,i,a,n)})}function Fb(e,t,n,i,a){return Ze(this,void 0,void 0,function*(){return Cd(e,"PUT",t,i,a,n)})}function KM(e,t,n,i){return Ze(this,void 0,void 0,function*(){return Cd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Cy(e,t,n,i,a){return Ze(this,void 0,void 0,function*(){return Cd(e,"DELETE",t,i,a,n)})}class WM{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var IT;class XM{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[IT]="BlobDownloadBuilder",this.promise=null}asStream(){return new WM(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}IT=Symbol.toStringTag;const JM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QM{constructor(t,n={},i,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=Dy(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,a){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},c1),a);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,m&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(t=="PUT"?Fb:rs)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ln(l))return{data:null,error:l};throw l}})}upload(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,a){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:c1.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",p.cacheControl)):(m=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield Fb(this.fetch,d.toString(),m,{headers:g});return{data:{path:l,fullPath:y.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ln(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const l=yield rs(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Dd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}update(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}copy(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield rs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,i){return Ze(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield rs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,i){return Ze(this,void 0,void 0,function*(){try{const a=yield rs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",d=this._getFinalPath(t),m=()=>dd(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new XM(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield dd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gb(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield KM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i)&&i instanceof bm){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),a=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const d=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&a.push(m);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Cy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,i){return Ze(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},JM),n),{prefix:t||""});return{data:yield rs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield rs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const zT="2.86.2",UT={"X-Client-Info":`storage-js/${zT}`};class e3{constructor(t,n={},i,a){this.shouldThrowOnError=!1;const l=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UT),n),this.fetch=Dy(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield dd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield rs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield Fb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Cy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var hd=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function t3(e,t,n){const i=new URL(t,e);if(n)for(const[a,l]of Object.entries(n))l!==void 0&&i.searchParams.set(a,l);return i.toString()}async function n3(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function r3(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:l,headers:u}){const d=t3(e.baseUrl,i,a),m=await n3(e.auth),p=await t(d,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),x=y&&g?JSON.parse(g):g;if(!p.ok){const w=y?x:void 0,T=w?.error;throw new hd(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:w})}return{status:p.status,headers:p.headers,data:x}}}}function gf(e){return e.join("")}var i3=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:gf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gf(e.namespace)}`}),!0}catch(t){if(t instanceof hd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof hd&&n.status===409)return;throw n}}};function ac(e){return e.join("")}var s3=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ac(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof hd&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof hd&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},a3=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=r3({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new i3(this.client,t),this.tableOps=new s3(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class HT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},UT),n),this.fetch=Dy(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),a=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield dd(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Cy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!YM(t))throw new Dd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new a3({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const My={"X-Client-Info":`storage-js/${zT}`,"Content-Type":"application/json"};class Ry extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function qr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class rm extends Ry{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class GT extends Ry{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var qb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(qb||(qb={}));const Xm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o3=()=>Response,FT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},l3=e=>Array.from(new Float32Array(e)),c3=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},u1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u3=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const a=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const d=u?.statusCode||u?.code||a+"";t(new rm(u1(u),a,d))}).catch(()=>{const u=a+"",d=l.statusText||`HTTP ${a} error`;t(new rm(d,a,u))});else{const u=a+"",d=l.statusText||`HTTP ${a} error`;t(new rm(d,a,u))}}else t(new GT(u1(e),e))}),d3=(e,t,n,i)=>{const a={method:e,headers:t?.headers||{}};return i?(FT(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(i)):a.body=i,Object.assign(Object.assign({},a),n)):a};function h3(e,t,n,i,a,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,d)=>{e(n,d3(t,i,a,l)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>u3(m,d,i))})})}function ui(e,t,n,i,a){return Ze(this,void 0,void 0,function*(){return h3(e,"POST",t,i,a,n)})}class qT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},My),n),this.fetch=Xm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield ui(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qr(i))return{data:null,error:i};throw i}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield ui(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qr(i))return{data:null,error:i};throw i}})}}class YT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},My),n),this.fetch=Xm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ui(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ui(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ui(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}}class ZT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},My),n),this.fetch=Xm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield ui(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield ui(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield ui(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qr(n))return{data:null,error:n};throw n}})}}class VT extends ZT{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new KT(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class KT extends qT{constructor(t,n,i,a){super(t,n,a),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new WT(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class WT extends YT{constructor(t,n,i,a,l){super(t,n,l),this.vectorBucketName=i,this.indexName=a}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class f3 extends e3{constructor(t,n={},i,a){super(t,n,i,a)}from(t){return new QM(this.url,this.headers,t,this.fetch)}get vectors(){return new VT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new HT(this.url+"/iceberg",this.headers,this.fetch)}}const m3=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:HT,StorageApiError:$T,StorageClient:f3,StorageError:Dd,StorageUnknownError:bm,StorageVectorsApiError:rm,StorageVectorsClient:VT,StorageVectorsError:Ry,get StorageVectorsErrorCode(){return qb},StorageVectorsUnknownError:GT,VectorBucketApi:ZT,VectorBucketScope:KT,VectorDataApi:YT,VectorIndexApi:qT,VectorIndexScope:WT,isPlainObject:FT,isStorageError:ln,isStorageVectorsError:qr,normalizeToFloat32:l3,resolveFetch:Xm,resolveResponse:o3,validateVectorDimension:c3},Symbol.toStringTag,{value:"Module"})),p3=Td(m3);var wg={},Hu={},d1;function g3(){return d1||(d1=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.version=void 0,Hu.version="2.86.2"),Hu}var h1;function b3(){return h1||(h1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=g3();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(wg)),wg}var Sg={},f1;function y3(){return f1||(f1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=a=>a?(...l)=>a(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const i=(a,l,u)=>{const d=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,g)=>{var y;const x=(y=await l())!==null&&y!==void 0?y:a;let w=new m(g?.headers);return w.has("apikey")||w.set("apikey",a),w.has("Authorization")||w.set("Authorization",`Bearer ${x}`),d(p,Object.assign(Object.assign({},g),{headers:w}))}};e.fetchWithAuth=i})(Sg)),Sg}var Js={},m1;function v3(){if(m1)return Js;m1=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.isBrowser=void 0,Js.uuid=e,Js.ensureTrailingSlash=t,Js.applySettingDefaults=i,Js.validateSupabaseUrl=a;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,d=l=="x"?u:u&3|8;return d.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Js.isBrowser=n;function i(l,u){var d,m;const{db:p,auth:g,realtime:y,global:x}=l,{db:w,auth:T,realtime:k,global:A}=u,D={db:Object.assign(Object.assign({},w),p),auth:Object.assign(Object.assign({},T),g),realtime:Object.assign(Object.assign({},k),y),storage:{},global:Object.assign(Object.assign(Object.assign({},A),x),{headers:Object.assign(Object.assign({},(d=A?.headers)!==null&&d!==void 0?d:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?D.accessToken=l.accessToken:delete D.accessToken,D}function a(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Js}var Gu={};const XT="2.86.2",gc=30*1e3,Yb=3,Eg=Yb*gc,_3="http://localhost:9999",x3="supabase.auth.token",w3={"X-Client-Info":`gotrue-js/${XT}`},Zb="X-Supabase-Api-Version",JT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},S3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,E3=600*1e3;let jc=class extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let QT=class extends jc{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}};function ek(e){return We(e)&&e.name==="AuthApiError"}let Xa=class extends jc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},la=class extends jc{constructor(t,n,i,a){super(t,i,a),this.name=n,this.status=i}},Gr=class extends la{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function tk(e){return We(e)&&e.name==="AuthSessionMissingError"}let tl=class extends la{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Qu=class extends la{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},ed=class extends la{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function nk(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let Vb=class extends la{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ym=class extends la{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function im(e){return We(e)&&e.name==="AuthRetryableFetchError"}let Kb=class extends la{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}};function T3(e){return We(e)&&e.name==="AuthWeakPasswordError"}let vm=class extends la{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const _m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),p1=` 	
\r=`.split(""),k3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<p1.length;t+=1)e[p1[t].charCodeAt(0)]=-2;for(let t=0;t<_m.length;t+=1)e[_m[t].charCodeAt(0)]=t;return e})();function g1(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(_m[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(_m[i]),t.queuedBits-=6}}function rk(e,t,n){const i=k3[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function b1(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{N3(u,i,n)};for(let u=0;u<e.length;u+=1)rk(e.charCodeAt(u),a,l);return t.join("")}function A3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function j3(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}A3(i,t)}}function N3(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ec(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)rk(e.charCodeAt(a),n,i);return new Uint8Array(t)}function O3(e){const t=[];return j3(e,n=>t.push(n)),new Uint8Array(t)}function ll(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};return e.forEach(a=>g1(a,n,i)),g1(null,n,i),t.join("")}function D3(e){return Math.round(Date.now()/1e3)+e}function C3(){return Symbol("auth-callback")}const ar=()=>typeof window<"u"&&typeof document<"u",Yo={tested:!1,writable:!1},ik=()=>{if(!ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yo.tested)return Yo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yo.tested=!0,Yo.writable=!0}catch{Yo.tested=!0,Yo.writable=!1}return Yo.writable};function M3(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return n.searchParams.forEach((i,a)=>{t[a]=i}),t}const sk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),R3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ir=async(e,t)=>{await e.removeItem(t)};class Jm{constructor(){this.promise=new Jm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Jm.promiseConstructor=Promise;function Tg(e){const t=e.split(".");if(t.length!==3)throw new vm("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!S3.test(t[i]))throw new vm("JWT not in base64url format");return{header:JSON.parse(b1(t[0])),payload:JSON.parse(b1(t[1])),signature:Ec(t[2]),raw:{header:t[0],payload:t[1]}}}async function L3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function B3(e,t){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){a(u);return}}})()})}function P3(e){return("0"+e.toString(16)).substr(-2)}function $3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(t),Array.from(t,P3).join("")}async function I3(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function z3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await I3(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oc(e,t,n=!1){const i=$3();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await bc(e,`${t}-code-verifier`,a);const l=await z3(i);return[l,i===l?"plain":"s256"]}const U3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H3(e){const t=e.headers.get(Zb);if(!t||!t.match(U3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function G3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function F3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const q3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lc(e){if(!q3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kg(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Y3(e,t){return new Proxy(e,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,a)}})}function y1(e){return JSON.parse(JSON.stringify(e))}const nl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Z3=[502,503,504];async function v1(e){var t;if(!R3(e))throw new ym(nl(e),0);if(Z3.includes(e.status))throw new ym(nl(e),e.status);let n;try{n=await e.json()}catch(l){throw new Xa(nl(l),l)}let i;const a=H3(e);if(a&&a.getTime()>=JT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Kb(nl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Gr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Kb(nl(n),e.status,n.weak_password.reasons);throw new QT(nl(n),e.status||500,i)}const V3=(e,t,n,i)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function rt(e,t,n,i){var a;const l=Object.assign({},i?.headers);l[Zb]||(l[Zb]=JT["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await K3(e,t,n+d,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function K3(e,t,n,i,a,l){const u=V3(t,i,a,l);let d;try{d=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new ym(nl(m),0)}if(d.ok||await v1(d),i?.noResolveJson)return d;try{return await d.json()}catch(m){await v1(m)}}function ts(e){var t;let n=null;J3(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=D3(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function _1(e){const t=ts(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ja(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function W3(e){return{data:e,error:null}}function X3(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:l}=e,u=Bc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:l},m=Object.assign({},u);return{data:{properties:d,user:m},error:null}}function x1(e){return e}function J3(e){return e.access_token&&e.refresh_token&&e.expires_in}const sm=["global","local","others"];let Ly=class{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=sk(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=sm[0]){if(sm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sm.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ja})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Bc(t,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:X3,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ja})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,a,l,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},g=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:x1});if(g.error)throw g.error;const y=await g.json(),x=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){lc(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ja})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){lc(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ja})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){lc(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ja})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){lc(t.userId);try{const{data:n,error:i}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){lc(t.userId),lc(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,a,l,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},g=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:x1});if(g.error)throw g.error;const y=await g.json(),x=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(We(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function w1(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const rl={debug:!!(globalThis&&ik()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class By extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let ak=class extends By{};class Q3 extends By{}async function ok(e,t,n){rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),rl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw rl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ak(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rl.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const S1={};async function eR(e,t,n){var i;const a=(i=S1[e])!==null&&i!==void 0?i:Promise.resolve(),l=Promise.race([a.catch(()=>null),t>=0?new Promise((u,d)=>{setTimeout(()=>{d(new Q3(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return S1[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await a,null;throw u}),await l}function tR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function nR(e){return parseInt(e,16)}function rR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function iR(e){var t;const{chainId:n,domain:i,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:m,resources:p,scheme:g,uri:y,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const w=lk(e.address),T=g?`${g}://${i}`:i,k=e.statement?`${e.statement}
`:"",A=`${T} wants you to sign in with your Ethereum account:
${w}

${k}`;let D=`URI: ${y}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),d&&(D+=`
Not Before: ${d.toISOString()}`),m&&(D+=`
Request ID: ${m}`),p){let B=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);B+=`
- ${N}`}D+=B}return`${A}
${D}`}class $n extends Error{constructor({message:t,code:n,cause:i,name:a}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=a??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class xm extends $n{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function sR({error:e,options:t}){var n,i,a;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $n({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $n({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new $n({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new $n({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $n({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new $n({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $n({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(ck(u)){if(l.rp.id!==u)return new $n({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new $n({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $n({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function aR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $n({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(ck(i)){if(n.rpId!==i)return new $n({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $n({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class oR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lR=new oR;function cR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,a=Bc(e,["challenge","user","excludeCredentials"]),l=Ec(t).buffer,u=Object.assign(Object.assign({},n),{id:Ec(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];d.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:Ec(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function uR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Bc(e,["challenge","allowCredentials"]),a=Ec(t).buffer,l=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Ec(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function dR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ll(new Uint8Array(e.response.attestationObject)),clientDataJSON:ll(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ll(new Uint8Array(a.authenticatorData)),clientDataJSON:ll(new Uint8Array(a.clientDataJSON)),signature:ll(new Uint8Array(a.signature)),userHandle:a.userHandle?ll(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ck(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function E1(){var e,t;return!!(ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",t)}:{data:null,error:new xm("Empty credential response",t)}}catch(t){return{data:null,error:sR({error:t,options:e})}}}async function mR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xm("Browser returned unexpected credential type",t)}:{data:null,error:new xm("Empty credential response",t)}}catch(t){return{data:null,error:aR({error:t,options:e})}}}const pR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wm(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of e)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(t(u)){const d=i[l];t(d)?i[l]=wm(d,u):i[l]=wm(u)}else i[l]=u}return i}function bR(e,t){return wm(pR,e,t||{})}function yR(e,t){return wm(gR,e,t||{})}class vR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:a},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:d};const m=a??lR.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=bR(u.webauthn.credential_options.publicKey,l?.create),{data:g,error:y}=await fR({publicKey:p,signal:m});return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=yR(u.webauthn.credential_options.publicKey,l?.request),{data:g,error:y}=await mR(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return g?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Xa("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new jc("rpId is required for WebAuthn authentication")};try{if(!E1())return{data:null,error:new Xa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:l});if(!u)return{data:null,error:d};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Xa("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new jc("rpId is required for WebAuthn registration")};try{if(!E1())return{data:null,error:new Xa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Xa("Unexpected error in register",u)}}}}tR();const _R={url:_3,storageKey:x3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:w3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function T1(e,t,n){return await n()}const cc={};let Py=class Wb{get jwks(){var t,n;return(n=(t=cc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){cc[this.storageKey]=Object.assign(Object.assign({},cc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=cc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cc[this.storageKey]=Object.assign(Object.assign({},cc[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},_R),t);if(this.storageKey=l.storageKey,this.instanceID=(n=Wb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Wb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ar()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Ly({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=sk(l.fetch),this.lock=l.lock||T1,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:ar()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=ok:this.lock=T1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:ik()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=w1(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=w1(this.memoryStorage)),ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${XT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(ar()&&(n=M3(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),ar()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),nk(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Xa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,a;try{const l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ts}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,i,a;try{let l;if("email"in t){const{email:g,password:y,options:x}=t;let w=null,T=null;this.flowType==="pkce"&&([w,T]=await oc(this.storage,this.storageKey)),l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:g,password:y,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:T},xform:ts})}else if("phone"in t){const{phone:g,password:y,options:x}=t;l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(a=x?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:ts})}else throw new Qu("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await ir(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:d}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_1})}else if("phone"in t){const{phone:l,password:u,options:d}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_1})}else throw new Qu("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const l=new tl;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,a,l,u,d,m,p,g,y,x;let w,T;if("message"in t)w=t.message,T=t.signature;else{const{chain:k,wallet:A,statement:D,options:B}=t;let N;if(ar())if(typeof A=="object")N=A;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")N=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=A}const M=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href),R=await N.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=lk(R[0]);let G=(i=B?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!G){const q=await N.request({method:"eth_chainId"});G=nR(q)}const Y={domain:M.host,address:I,statement:D,uri:M.href,version:"1",chainId:G,nonce:(a=B?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=B?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=B?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=B?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=B?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=B?.signInWithEthereum)===null||g===void 0?void 0:g.resources};w=iR(Y),T=await N.request({method:"personal_sign",params:[rR(w),I]})}try{const{data:k,error:A}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:T},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ts});if(A)throw A;if(!k||!k.session||!k.user){const D=new tl;return this._returnResult({data:{user:null,session:null},error:D})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:A})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,i,a,l,u,d,m,p,g,y,x,w;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:A,wallet:D,statement:B,options:N}=t;let M;if(ar())if(typeof D=="object")M=D;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))M=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=D}const R=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const I=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),B?{statement:B}:null));let G;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")G=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)G=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)T=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),k=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${R.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(a=(i=N?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((y=(g=N?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...N.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const I=await M.signMessage(new TextEncoder().encode(T),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=I}}try{const{data:A,error:D}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:ll(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ts});if(D)throw D;if(!A||!A.session||!A.user){const B=new tl;return this._returnResult({data:{user:null,session:null},error:B})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:D})}catch(A){if(We(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const n=await Zo(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:ts});if(await ir(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new tl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:i,token:a,access_token:l,nonce:u}=t,d=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ts}),{data:m,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const g=new tl;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,a,l,u;try{if("email"in t){const{email:d,options:m}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await oc(this.storage,this.storageKey));const{error:y}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:d,options:m}=t,{data:p,error:g}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new Qu("You must provide either an email or phone number.")}catch(d){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var n,i;try{let a,l;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:ts});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(a){if(We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,i,a,l,u;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await oc(this.storage,this.storageKey));const p=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:W3});return!((l=p.data)===null||l===void 0)&&l.url&&ar()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Gr;const{error:a}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:a,options:l}=t,{error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:a,options:l}=t,{data:u,error:d}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Qu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Zo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Eg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Zo(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=kg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=Y3(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ja}):await this._useSession(async n=>{var i,a,l;const{data:u,error:d}=n;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gr}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ja})})}catch(n){if(We(n))return tk(n)&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new Gr;const u=a.session;let d=null,m=null;this.flowType==="pkce"&&t.email!=null&&([d,m]=await oc(this.storage,this.storageKey));const{data:p,error:g}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:m}),jwt:u.access_token,xform:Ja});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Gr;const n=Date.now()/1e3;let i=n,a=!0,l=null;const{payload:u}=Tg(t.access_token);if(u.exp&&(i=u.exp,a=i<=n),a){const{data:d,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:d}=n;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Gr;const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ar())throw new ed("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ed(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ed("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vb("No code detected.");const{data:B,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:d,expires_at:m,token_type:p}=t;if(!l||!d||!u||!p)throw new ed("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(d);let x=g+y;m&&(x=parseInt(m));const w=x-g;w*1e3<=gc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const T=x-y;g-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,g):g-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,g);const{data:k,error:A}=await this._getUser(l);if(A)throw A;const D={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:y,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:t.type},error:null})}catch(i){if(We(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Zo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const u=(i=a.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(ek(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=C3(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,a;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await oc(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:a}=await this._useSession(async l=>{var u,d,m,p,g;const{data:y,error:x}=l;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",w,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return ar()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(We(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:u,provider:d,token:m,access_token:p,nonce:g}=t,y=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:m,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ts}),{data:x,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new tl}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(a){if(await ir(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,a;const{data:l,error:u}=n;if(u)throw u;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await B3(async a=>(a>0&&await L3(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ts})),(a,l)=>{const u=200*Math.pow(2,a);return l&&im(l)&&Date.now()+u-i<gc})}catch(i){if(this._debug(n,"error",i),We(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),ar()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Zo(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Zo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await bc(this.userStorage,this.storageKey+"-user",u)),a.user=(t=u?.user)!==null&&t!==void 0?t:kg()}else if(a&&!a.user&&!a.user){const u=await Zo(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await ir(this.storage,this.storageKey+"-user"),await bc(this.storage,this.storageKey,a)):a.user=kg()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Eg;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Eg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),im(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Jm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Gr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),We(l)){const u={data:null,error:l};return im(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,i=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ir(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await bc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=y1(a);await bc(this.storage,this.storageKey,l)}else{const a=y1(n);await bc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ir(this.storage,this.storageKey),await ir(this.storage,this.storageKey+"-code-verifier"),await ir(this.storage,this.storageKey+"-user"),this.userStorage&&await ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ar()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),gc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-t)/gc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${gc}ms, refresh threshold is ${Yb} ticks`),a<=Yb&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof By)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ar()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await oc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,a;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((a=m?.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?dR(t.webauthn.credential_response):hR(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:m}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:cR(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:uR(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Tg(i.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Gr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Gr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ar()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Gr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ar()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Gr})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(d=>d.kid===t);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+E3>a)return i;const{data:l,error:u}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:w,error:T}=await this.getSession();if(T||!w.session)return this._returnResult({data:null,error:T});i=w.session.access_token}const{header:a,payload:l,signature:u,raw:{header:d,payload:m}}=Tg(i);n?.allowExpired||G3(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:l,header:a,signature:u},error:null}}const g=F3(a.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,O3(`${d}.${m}`)))throw new vm("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}};Py.nextInstanceID={};const xR=Ly,wR=Py,SR=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:xR,AuthApiError:QT,AuthClient:wR,AuthError:jc,AuthImplicitGrantRedirectError:ed,AuthInvalidCredentialsError:Qu,AuthInvalidJwtError:vm,AuthInvalidTokenResponseError:tl,AuthPKCEGrantCodeExchangeError:Vb,AuthRetryableFetchError:ym,AuthSessionMissingError:Gr,AuthUnknownError:Xa,AuthWeakPasswordError:Kb,CustomAuthError:la,GoTrueAdminApi:Ly,GoTrueClient:Py,NavigatorLockAcquireTimeoutError:ak,SIGN_OUT_SCOPES:sm,isAuthApiError:ek,isAuthError:We,isAuthImplicitGrantRedirectError:nk,isAuthRetryableFetchError:im,isAuthSessionMissingError:tk,isAuthWeakPasswordError:T3,lockInternals:rl,navigatorLock:ok,processLock:eR},Symbol.toStringTag,{value:"Module"})),uk=Td(SR);var k1;function ER(){if(k1)return Gu;k1=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.SupabaseAuthClient=void 0;const e=uk;let t=class extends e.AuthClient{constructor(i){super(i)}};return Gu.SupabaseAuthClient=t,Gu}var A1;function j1(){if(A1)return lf;A1=1,Object.defineProperty(lf,"__esModule",{value:!0});const e=wT,t=jT(),n=PT,i=p3,a=b3(),l=y3(),u=v3(),d=ER();class m{constructor(g,y,x){var w,T,k;this.supabaseUrl=g,this.supabaseKey=y;const A=(0,u.validateSupabaseUrl)(g);if(!y)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const D=`sb-${A.hostname.split(".")[0]}-auth-token`,B={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:D}),global:a.DEFAULT_GLOBAL_OPTIONS},N=(0,u.applySettingDefaults)(x??{},B);this.storageKey=(w=N.auth.storageKey)!==null&&w!==void 0?w:"",this.headers=(T=N.global.headers)!==null&&T!==void 0?T:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(M,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=N.auth)!==null&&k!==void 0?k:{},this.headers,N.global.fetch),this.fetch=(0,l.fetchWithAuth)(y,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(M=>this.realtime.setAuth(M)).catch(M=>console.warn("Failed to set initial Realtime auth token:",M)),this.rest=new t.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,y={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,y,x)}channel(g,y={config:{}}){return this.realtime.channel(g,y)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,y;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(y=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:y,detectSessionInUrl:x,storage:w,userStorage:T,storageKey:k,flowType:A,lock:D,debug:B,throwOnError:N},M,R){const I={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},I),M),storageKey:k,autoRefreshToken:g,persistSession:y,detectSessionInUrl:x,storage:w,userStorage:T,flowType:A,lock:D,debug:B,throwOnError:N,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(G=>G.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((y,x)=>{this._handleTokenChanged(y,"CLIENT",x?.access_token)})}_handleTokenChanged(g,y,x){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),y=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return lf.default=m,lf}var N1;function TR(){return N1||(N1=1,(function(e){var t=Xs&&Xs.__createBinding||(Object.create?(function(g,y,x,w){w===void 0&&(w=x);var T=Object.getOwnPropertyDescriptor(y,x);(!T||("get"in T?!y.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return y[x]}}),Object.defineProperty(g,w,T)}):(function(g,y,x,w){w===void 0&&(w=x),g[w]=y[x]})),n=Xs&&Xs.__exportStar||function(g,y){for(var x in g)x!=="default"&&!Object.prototype.hasOwnProperty.call(y,x)&&t(y,g,x)},i=Xs&&Xs.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const a=i(j1());n(uk,e);var l=jT();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=wT;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(PT,e);var d=j1();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(d).default}});const m=(g,y,x)=>new a.default(g,y,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const y=g.match(/^v(\d+)\./);return y?parseInt(y[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Xs)),Xs}var dk=TR();const hk=pl(dk),kR=hE({__proto__:null,default:hk},[dk]),{PostgrestError:zG,FunctionsHttpError:UG,FunctionsFetchError:HG,FunctionsRelayError:GG,FunctionsError:FG,FunctionRegion:qG,SupabaseClient:YG,createClient:AR,GoTrueAdminApi:ZG,GoTrueClient:VG,AuthAdminApi:KG,AuthClient:WG,navigatorLock:XG,NavigatorLockAcquireTimeoutError:JG,lockInternals:QG,processLock:eF,SIGN_OUT_SCOPES:tF,AuthError:nF,AuthApiError:rF,AuthUnknownError:iF,CustomAuthError:sF,AuthSessionMissingError:aF,AuthInvalidTokenResponseError:oF,AuthInvalidCredentialsError:lF,AuthImplicitGrantRedirectError:cF,AuthPKCEGrantCodeExchangeError:uF,AuthRetryableFetchError:dF,AuthWeakPasswordError:hF,AuthInvalidJwtError:fF,isAuthError:mF,isAuthApiError:pF,isAuthSessionMissingError:gF,isAuthImplicitGrantRedirectError:bF,isAuthRetryableFetchError:yF,isAuthWeakPasswordError:vF,RealtimePresence:_F,RealtimeChannel:xF,RealtimeClient:wF,REALTIME_LISTEN_TYPES:SF,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:EF,REALTIME_PRESENCE_LISTEN_EVENTS:TF,REALTIME_SUBSCRIBE_STATES:kF,REALTIME_CHANNEL_STATES:AF}=hk||kR,st=AR("https://jouhybyquybxbnqztxum.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),fk="settings_v1",Xb=()=>{try{typeof window<"u"&&window.localStorage.removeItem(fk)}catch{}},cl={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",difficultyMode:!1,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},O1=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],jR=e=>{const t=Array.isArray(e)?e.filter(i=>typeof i=="string"&&O1.includes(i)):[],n=O1.filter(i=>!t.includes(i));return[...t,...n]},Tc=e=>({...cl,...e,sectionOrder:jR(e.sectionOrder)}),NR=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return Tc(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return Tc(n.settings)}}return Tc(e??{})},OR=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};Xb();const Xn=Od()(KE((e,t)=>({settings:cl,syncing:!1,loaded:!1,setSettings:n=>e({settings:Tc(n)}),setKey:(n,i)=>e({settings:Tc({...t().settings,[n]:i})}),reset:()=>e({settings:cl}),loadFromServer:async()=>{try{e({syncing:!0}),Xb();const{data:{user:n},error:i}=await st.auth.getUser();if(i||!n){e({syncing:!1,loaded:!1});return}const{data:a,error:l}=await st.from("user_settings").select("payload").eq("user_id",n.id).single();if(l&&l.code!=="PGRST116"){console.error("loadFromServer(settings) error:",l),e({syncing:!1,loaded:!0});return}if(a?.payload){const u=NR(a.payload);e({settings:u,syncing:!1,loaded:!0}),OR(a.payload)&&await st.from("user_settings").upsert({user_id:n.id,payload:u,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(n){console.error("loadFromServer(settings) exception:",n),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),Xb();const{data:{user:i},error:a}=await st.auth.getUser();if(a||!i){e({syncing:!1});return}const l=Tc(t().settings),{error:u}=await st.from("user_settings").upsert({user_id:i.id,payload:l,updated_at:new Date().toISOString()});u&&console.error("saveToServer(settings) error:",u),e({syncing:!1,loaded:!0})}catch(i){console.error("saveToServer(settings) exception:",i),e({syncing:!1})}}}),{name:fk,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function Jb(e){const t=Nr.indexOf(e);if(t!==-1)return Nr[t];const n=pi..indexOf(e);return n!==-1?Nr[n]:null}function mk(e){const t=Yr.indexOf(e);if(t!==-1)return Yr[t];const n=pi..indexOf(e);return n!==-1?Yr[n]:null}function D1(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function mi(e,t,n){if(t==="stem"){const i=Jb(e);if(!i)return console.warn("Invalid stem:",e),"bg-neutral-700";const a=Nr.indexOf(i),l=a>=0?WC[a]:void 0;return D1(l,n)}else{const i=mk(e);if(!i)return console.warn("Invalid branch:",e),"bg-neutral-700";const a=Yr.indexOf(i),l=a>=0?XC[a]:void 0;return D1(l,n)}}function jr(e,t){const n=Jb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const i=Jb(t.stem);if(!i)throw new Error(`getSipSin: invalid stem ${t.stem}`);return eM[n][i]}if(t.branch){const i=mk(t.branch);if(!i)throw new Error(`getSipSin: invalid branch ${t.branch}`);return tM[n][i]}throw new Error("getSipSin: stem or branch required")}const Qm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},ep={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function td({branch:e,dayStem:t,mode:n="all",mapping:i="classic",variant:a="auto",isUnknownTime:l=!1}){const u=(i==="hgc"?ep:Qm)[e]??[],d=n==="main"?[u[2]]:u,m=a==="white",p=m?"text-white":"text-neutral-800 dark:text-white",g=m?"border-white":"border-neutral-800 dark: border-neutral-200",y=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return b.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:d.map((x,w)=>x==="(-)"||l?b.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${g} ${p} rounded text-center text-nowrap`,children:"(-) ()"},w):b.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${g} ${p} rounded text-center text-nowrap 
            ${n==="main"||w===2?`jeonggi bg-neutral-500/50 ${y} font-bold`:""}`,children:[x," (",jr(t,{stem:x}),")"]},w))})}const Md=Od(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),$y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},pk=Object.fromEntries(Object.entries($y).map(([e,t])=>[t,e])),Iy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},gk=Object.fromEntries(Object.entries(Iy).map(([e,t])=>[t,e]));function C1(e){return Pi..includes(e)}function M1(e){return Pi..includes(e)}function DR(e){return pi..includes(e)}function CR(e){return pi..includes(e)}function R1(e,t,n){return n===""?t==="stem"?$y[e]??e:Iy[e]??e:t==="stem"?pk[e]??e:gk[e]??e}function L1(e){const t=pk[e]??e;return DR(t)?t:""}function MR(e){const t=gk[e]??e;return CR(t)?t:""}function RR(e){if(C1(e))return e;const t=$y[e]??e;return C1(t)?t:""}function LR(e){if(M1(e))return e;const t=Iy[e]??e;return M1(t)?t:""}const BR=new Set(["","","","","","","","","",""]),PR=new Set(["","","","","","","","","","","",""]),$R=e=>BR.has(e),IR=e=>PR.has(e);function yc({label:e,gz:t,dayStem:n,settings:i,unseongText:a,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:d=!1,size:m="sm",variant:p="auto",isUnknownTime:g=!1}){const{manualHour:y}=Md(),x=g&&!y,w=t.charAt(0),T=t.charAt(1),k=R1(w,"stem",i.charType),A=R1(T,"branch",i.charType),D=L1(w),B=MR(T),N=L1(n),M=LR(T),R=RR(n),I=i.showSipSin?jr(N,{stem:D}):null,G=!u&&i.showSipSin?jr(N,{branch:B}):null,Y=i.thinEum&&$R(w)?"font-thin":"font-bold",q=i.thinEum&&IR(T)?"font-thin":"font-bold",J={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},V=!d&&!!i.hiddenStem,Z=i.hiddenStem==="regular"?"main":"all",ee=i.hiddenStemMode==="hgc"?"hgc":"classic",te=p==="white",we=te?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",X=te?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",ae=te?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",ne=te?"text-neutral-500":"text-neutral-400",me=te?"text-neutral-500":"text-neutral-400",{settings:Q}=Xn(),H=x?`bg-white ${ae}`:`${mi(D,"stem",Q)} ${ae}`,P=x?`bg-white ${ae}`:`${mi(B,"branch",Q)} ${ae}`,K=x?"text-black":Q.difficultyMode?Q.theme==="light"?"text-neutral-900":"text-black":"text-white",W=x?"text-black":Q.difficultyMode?Q.theme==="light"?"text-neutral-900":"text-black":"text-white";return b.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${we}`,children:[b.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${X} text-nowrap`,children:e}),b.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[I&&b.jsx("div",{className:`text-[10px] desk:text-xs ${ne} text-nowrap`,children:g&&!y?"-":I}),b.jsx("div",{className:`${J[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${H}`,children:b.jsx("span",{className:`text-2xl md:text-3xl ${K} ${Y}`,children:x?"-":k})}),b.jsx("div",{className:`${J[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${P}`,children:b.jsx("span",{className:`text-2xl md:text-3xl ${W} ${q}`,children:x?"-":A})}),V&&b.jsx(td,{branch:M,dayStem:R,mode:Z,mapping:ee,isUnknownTime:g&&!y&&(e===""||e==="")}),G&&b.jsx("div",{className:`text-[10px] desk:text-xs ${me}`,children:g&&!y?"-":G}),i.showSibiUnseong&&b.jsx("div",{className:`text-[10px] desk:text-xs ${me} text-nowrap`,children:g&&!y?"-":a||""}),i.showSibiSinsal&&b.jsx("div",{className:`text-[10px] desk:text-xs ${me} text-nowrap`,children:g&&!y?"-":l||""})]})]})}const zR=new Set(pi.);function UR(e){return Zm.has(e)?e:zR.has(e)?Vm[e]:""}function HR({label:e,settings:t,hideBranchSipSin:n=!0}){const i=t.showSipSin,a=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,d=t.showSipSin&&!n;return b.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[b.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),b.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[i&&b.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),b.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:b.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),b.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:b.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),a&&b.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>b.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),d&&b.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function GR(){const e=Xn(T=>T.settings),[t,n]=j.useState(new Date),[i,a]=j.useState(!0),[l,u]=j.useState("/"),[d,m]=j.useState(!1);j.useEffect(()=>{if(!i)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[i]);const p=dt(t),g=jt(t),y=xt(t,l),x=zi(t,"/"),w=UR(y.charAt(0));return b.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:b.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[b.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[b.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",b.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",i?"":"",") ",YR(t)]})]}),b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[b.jsx("option",{value:"",children:" ( 23)"}),b.jsx("option",{value:"/",children:"/ ()"}),b.jsx("option",{value:"",children:" ( 3)"})]}),b.jsx("button",{onClick:()=>a(!i),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:i?" ":" "})]})]}),b.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[d?b.jsx(HR,{label:"",settings:e,hideBranchSipSin:!0}):b.jsx(yc,{label:"",gz:x,dayStem:w,settings:e,hideBranchSipSin:!0}),b.jsx(yc,{label:"",gz:y,dayStem:w,settings:e,hideBranchSipSin:!0}),b.jsx(yc,{label:"",gz:g,dayStem:w,settings:e,hideBranchSipSin:!0}),b.jsx(yc,{label:"",gz:p,dayStem:w,settings:e,hideBranchSipSin:!0})]}),b.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[b.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),b.jsx("input",{type:"datetime-local",value:FR(t),disabled:i,onChange:T=>{const k=qR(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),b.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${d?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:d?" ":" "})]})]})})}function FR(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function qR(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[i,a,l]=t.split("-").map(Number),[u,d]=n.split(":").map(Number),m=new Date(i,a-1,l,u,d);return Number.isNaN(m.getTime())?null:m}function YR(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const sr=[];for(let e=0;e<256;++e)sr.push((e+256).toString(16).slice(1));function ZR(e,t=0){return(sr[e[t+0]]+sr[e[t+1]]+sr[e[t+2]]+sr[e[t+3]]+"-"+sr[e[t+4]]+sr[e[t+5]]+"-"+sr[e[t+6]]+sr[e[t+7]]+"-"+sr[e[t+8]]+sr[e[t+9]]+"-"+sr[e[t+10]]+sr[e[t+11]]+sr[e[t+12]]+sr[e[t+13]]+sr[e[t+14]]+sr[e[t+15]]).toLowerCase()}let Ag;const VR=new Uint8Array(16);function KR(){if(!Ag){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ag=crypto.getRandomValues.bind(crypto)}return Ag(VR)}const WR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),B1={randomUUID:WR};function bk(e,t,n){if(B1.randomUUID&&!e)return B1.randomUUID();e=e||{};const i=e.random??e.rng?.()??KR();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,ZR(i)}var nd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var XR=nd.exports,P1;function JR(){return P1||(P1=1,(function(e,t){(function(n,i){i(t)})(XR,(function(n){var i="1.9.4";function a(o){var h,v,E,O;for(v=1,E=arguments.length;v<E;v++){O=arguments[v];for(h in O)o[h]=O[h]}return o}var l=Object.create||(function(){function o(){}return function(h){return o.prototype=h,new o}})();function u(o,h){var v=Array.prototype.slice;if(o.bind)return o.bind.apply(o,v.call(arguments,1));var E=v.call(arguments,2);return function(){return o.apply(h,E.length?E.concat(v.call(arguments)):arguments)}}var d=0;function m(o){return"_leaflet_id"in o||(o._leaflet_id=++d),o._leaflet_id}function p(o,h,v){var E,O,$,re;return re=function(){E=!1,O&&($.apply(v,O),O=!1)},$=function(){E?O=arguments:(o.apply(v,arguments),setTimeout(re,h),E=!0)},$}function g(o,h,v){var E=h[1],O=h[0],$=E-O;return o===E&&v?o:((o-O)%$+$)%$+O}function y(){return!1}function x(o,h){if(h===!1)return o;var v=Math.pow(10,h===void 0?6:h);return Math.round(o*v)/v}function w(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function T(o){return w(o).split(/\s+/)}function k(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var v in h)o.options[v]=h[v];return o.options}function A(o,h,v){var E=[];for(var O in o)E.push(encodeURIComponent(v?O.toUpperCase():O)+"="+encodeURIComponent(o[O]));return(!h||h.indexOf("?")===-1?"?":"&")+E.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function B(o,h){return o.replace(D,function(v,E){var O=h[E];if(O===void 0)throw new Error("No value provided for variable "+v);return typeof O=="function"&&(O=O(h)),O})}var N=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function M(o,h){for(var v=0;v<o.length;v++)if(o[v]===h)return v;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var G=0;function Y(o){var h=+new Date,v=Math.max(0,16-(h-G));return G=h+v,window.setTimeout(o,v)}var q=window.requestAnimationFrame||I("RequestAnimationFrame")||Y,J=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function V(o,h,v){if(v&&q===Y)o.call(h);else return q.call(window,u(o,h))}function Z(o){o&&J.call(window,o)}var ee={__proto__:null,extend:a,create:l,bind:u,get lastId(){return d},stamp:m,throttle:p,wrapNum:g,falseFn:y,formatNum:x,trim:w,splitWords:T,setOptions:k,getParamString:A,template:B,isArray:N,indexOf:M,emptyImageUrl:R,requestFn:q,cancelFn:J,requestAnimFrame:V,cancelAnimFrame:Z};function te(){}te.extend=function(o){var h=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,E=l(v);E.constructor=h,h.prototype=E;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(h[O]=this[O]);return o.statics&&a(h,o.statics),o.includes&&(we(o.includes),a.apply(null,[E].concat(o.includes))),a(E,o),delete E.statics,delete E.includes,E.options&&(E.options=v.options?l(v.options):{},a(E.options,o.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,re=E._initHooks.length;$<re;$++)E._initHooks[$].call(this)}},h},te.include=function(o){var h=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},te.mergeOptions=function(o){return a(this.prototype.options,o),this},te.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),v=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function we(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=N(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(o,h,v){if(typeof o=="object")for(var E in o)this._on(E,o[E],h);else{o=T(o);for(var O=0,$=o.length;O<$;O++)this._on(o[O],h,v)}return this},off:function(o,h,v){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var E in o)this._off(E,o[E],h);else{o=T(o);for(var O=arguments.length===1,$=0,re=o.length;$<re;$++)O?this._off(o[$]):this._off(o[$],h,v)}return this},_on:function(o,h,v,E){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,v)===!1){v===this&&(v=void 0);var O={fn:h,ctx:v};E&&(O.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(O)}},_off:function(o,h,v){var E,O,$;if(this._events&&(E=this._events[o],!!E)){if(arguments.length===1){if(this._firingCount)for(O=0,$=E.length;O<$;O++)E[O].fn=y;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var re=this._listens(o,h,v);if(re!==!1){var he=E[re];this._firingCount&&(he.fn=y,this._events[o]=E=E.slice()),E.splice(re,1)}}},fire:function(o,h,v){if(!this.listens(o,v))return this;var E=a({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var O=this._events[o];if(O){this._firingCount=this._firingCount+1||1;for(var $=0,re=O.length;$<re;$++){var he=O[$],_e=he.fn;he.once&&this.off(o,_e,he.ctx),_e.call(he.ctx||this,E)}this._firingCount--}}return v&&this._propagateEvent(E),this},listens:function(o,h,v,E){typeof o!="string"&&console.warn('"string" type argument expected');var O=h;typeof h!="function"&&(E=!!h,O=void 0,v=void 0);var $=this._events&&this._events[o];if($&&$.length&&this._listens(o,O,v)!==!1)return!0;if(E){for(var re in this._eventParents)if(this._eventParents[re].listens(o,h,v,E))return!0}return!1},_listens:function(o,h,v){if(!this._events)return!1;var E=this._events[o]||[];if(!h)return!!E.length;v===this&&(v=void 0);for(var O=0,$=E.length;O<$;O++)if(E[O].fn===h&&E[O].ctx===v)return O;return!1},once:function(o,h,v){if(typeof o=="object")for(var E in o)this._on(E,o[E],h,!0);else{o=T(o);for(var O=0,$=o.length;O<$;O++)this._on(o[O],h,v,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[m(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[m(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var ae=te.extend(X);function ne(o,h,v){this.x=v?Math.round(o):o,this.y=v?Math.round(h):h}var me=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(o){return this.clone()._add(Q(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Q(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ne(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ne(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(o){o=Q(o);var h=o.x-this.x,v=o.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(o){return o=Q(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Q(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Q(o,h,v){return o instanceof ne?o:N(o)?new ne(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ne(o.x,o.y):new ne(o,h,v)}function H(o,h){if(o)for(var v=h?[o,h]:o,E=0,O=v.length;E<O;E++)this.extend(v[E])}H.prototype={extend:function(o){var h,v;if(!o)return this;if(o instanceof ne||typeof o[0]=="number"||"x"in o)h=v=Q(o);else if(o=P(o),h=o.min,v=o.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(o){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,v;return typeof o[0]=="number"||o instanceof ne?o=Q(o):o=P(o),o instanceof H?(h=o.min,v=o.max):h=v=o,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(o){o=P(o);var h=this.min,v=this.max,E=o.min,O=o.max,$=O.x>=h.x&&E.x<=v.x,re=O.y>=h.y&&E.y<=v.y;return $&&re},overlaps:function(o){o=P(o);var h=this.min,v=this.max,E=o.min,O=o.max,$=O.x>h.x&&E.x<v.x,re=O.y>h.y&&E.y<v.y;return $&&re},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,v=this.max,E=Math.abs(h.x-v.x)*o,O=Math.abs(h.y-v.y)*o;return P(Q(h.x-E,h.y-O),Q(v.x+E,v.y+O))},equals:function(o){return o?(o=P(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function P(o,h){return!o||o instanceof H?o:new H(o,h)}function K(o,h){if(o)for(var v=h?[o,h]:o,E=0,O=v.length;E<O;E++)this.extend(v[E])}K.prototype={extend:function(o){var h=this._southWest,v=this._northEast,E,O;if(o instanceof z)E=o,O=o;else if(o instanceof K){if(E=o._southWest,O=o._northEast,!E||!O)return this}else return o?this.extend(F(o)||W(o)):this;return!h&&!v?(this._southWest=new z(E.lat,E.lng),this._northEast=new z(O.lat,O.lng)):(h.lat=Math.min(E.lat,h.lat),h.lng=Math.min(E.lng,h.lng),v.lat=Math.max(O.lat,v.lat),v.lng=Math.max(O.lng,v.lng)),this},pad:function(o){var h=this._southWest,v=this._northEast,E=Math.abs(h.lat-v.lat)*o,O=Math.abs(h.lng-v.lng)*o;return new K(new z(h.lat-E,h.lng-O),new z(v.lat+E,v.lng+O))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof z||"lat"in o?o=F(o):o=W(o);var h=this._southWest,v=this._northEast,E,O;return o instanceof K?(E=o.getSouthWest(),O=o.getNorthEast()):E=O=o,E.lat>=h.lat&&O.lat<=v.lat&&E.lng>=h.lng&&O.lng<=v.lng},intersects:function(o){o=W(o);var h=this._southWest,v=this._northEast,E=o.getSouthWest(),O=o.getNorthEast(),$=O.lat>=h.lat&&E.lat<=v.lat,re=O.lng>=h.lng&&E.lng<=v.lng;return $&&re},overlaps:function(o){o=W(o);var h=this._southWest,v=this._northEast,E=o.getSouthWest(),O=o.getNorthEast(),$=O.lat>h.lat&&E.lat<v.lat,re=O.lng>h.lng&&E.lng<v.lng;return $&&re},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=W(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function W(o,h){return o instanceof K?o:new K(o,h)}function z(o,h,v){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,v!==void 0&&(this.alt=+v)}z.prototype={equals:function(o,h){if(!o)return!1;o=F(o);var v=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return v<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+x(this.lat,o)+", "+x(this.lng,o)+")"},distanceTo:function(o){return ce.distance(this,F(o))},wrap:function(){return ce.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,v=h/Math.cos(Math.PI/180*this.lat);return W([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new z(this.lat,this.lng,this.alt)}};function F(o,h,v){return o instanceof z?o:N(o)&&typeof o[0]!="object"?o.length===3?new z(o[0],o[1],o[2]):o.length===2?new z(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new z(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new z(o,h,v)}var oe={latLngToPoint:function(o,h){var v=this.projection.project(o),E=this.scale(h);return this.transformation._transform(v,E)},pointToLatLng:function(o,h){var v=this.scale(h),E=this.transformation.untransform(o,v);return this.projection.unproject(E)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(o),E=this.transformation.transform(h.min,v),O=this.transformation.transform(h.max,v);return new H(E,O)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?g(o.lng,this.wrapLng,!0):o.lng,v=this.wrapLat?g(o.lat,this.wrapLat,!0):o.lat,E=o.alt;return new z(v,h,E)},wrapLatLngBounds:function(o){var h=o.getCenter(),v=this.wrapLatLng(h),E=h.lat-v.lat,O=h.lng-v.lng;if(E===0&&O===0)return o;var $=o.getSouthWest(),re=o.getNorthEast(),he=new z($.lat-E,$.lng-O),_e=new z(re.lat-E,re.lng-O);return new K(he,_e)}},ce=a({},oe,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var v=Math.PI/180,E=o.lat*v,O=h.lat*v,$=Math.sin((h.lat-o.lat)*v/2),re=Math.sin((h.lng-o.lng)*v/2),he=$*$+Math.cos(E)*Math.cos(O)*re*re,_e=2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he));return this.R*_e}}),le=6378137,ve={R:le,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,v=this.MAX_LATITUDE,E=Math.max(Math.min(v,o.lat),-v),O=Math.sin(E*h);return new ne(this.R*o.lng*h,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(o){var h=180/Math.PI;return new z((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:(function(){var o=le*Math.PI;return new H([-o,-o],[o,o])})()};function Ae(o,h,v,E){if(N(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=v,this._d=E}Ae.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new ne((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function je(o,h,v,E){return new Ae(o,h,v,E)}var Ce=a({},ce,{code:"EPSG:3857",projection:ve,transformation:(function(){var o=.5/(Math.PI*ve.R);return je(o,.5,-o,.5)})()}),Ee=a({},Ce,{code:"EPSG:900913"});function $e(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Me(o,h){var v="",E,O,$,re,he,_e;for(E=0,$=o.length;E<$;E++){for(he=o[E],O=0,re=he.length;O<re;O++)_e=he[O],v+=(O?"L":"M")+_e.x+" "+_e.y;v+=h?Ve.svg?"z":"x":""}return v||"M0 0"}var Pe=document.documentElement.style,Ie="ActiveXObject"in window,pe=Ie&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),ue=In("webkit"),fe=In("android"),ze=In("android 2")||In("android 3"),Be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ue=fe&&In("Google")&&Be<537&&!("AudioNode"in window),at=!!window.opera,et=!Le&&In("chrome"),Zt=In("gecko")&&!ue&&!at&&!Ie,Dn=!et&&In("safari"),Tn=In("phantom"),cr="OTransition"in Pe,_r=navigator.platform.indexOf("Win")===0,dn=Ie&&"transition"in Pe,Mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ze,yn="MozPerspective"in Pe,hn=!window.L_DISABLE_3D&&(dn||Mt||yn)&&!cr&&!Tn,Vr=typeof orientation<"u"||In("mobile"),ca=Vr&&ue,Hi=Vr&&Mt,kn=!window.PointerEvent&&window.MSPointerEvent,Cn=!!(window.PointerEvent||kn),us="ontouchstart"in window||!!window.TouchEvent,Or=!window.L_NO_TOUCH&&(us||Cn),ur=Vr&&at,bi=Vr&&Zt,ua=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,io=(function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",y,h),window.removeEventListener("testPassiveEventSupport",y,h)}catch{}return o})(),so=(function(){return!!document.createElement("canvas").getContext})(),Gi=!!(document.createElementNS&&$e("svg").createSVGRect),ao=!!Gi&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),da=!Gi&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),oo=navigator.platform.indexOf("Mac")===0,lo=navigator.platform.indexOf("Linux")===0;function In(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ve={ie:Ie,ielt9:pe,edge:Le,webkit:ue,android:fe,android23:ze,androidStock:Ue,opera:at,chrome:et,gecko:Zt,safari:Dn,phantom:Tn,opera12:cr,win:_r,ie3d:dn,webkit3d:Mt,gecko3d:yn,any3d:hn,mobile:Vr,mobileWebkit:ca,mobileWebkit3d:Hi,msPointer:kn,pointer:Cn,touch:Or,touchNative:us,mobileOpera:ur,mobileGecko:bi,retina:ua,passiveEvents:io,canvas:so,svg:Gi,vml:da,inlineSvg:ao,mac:oo,linux:lo},Ns=Ve.msPointer?"MSPointerDown":"pointerdown",Dr=Ve.msPointer?"MSPointerMove":"pointermove",dr=Ve.msPointer?"MSPointerUp":"pointerup",sn=Ve.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:Ns,touchmove:Dr,touchend:dr,touchcancel:sn},Kr={touchstart:zn,touchmove:pt,touchend:pt,touchcancel:pt},yi={},ge=!1;function qe(o,h,v){return h==="touchstart"&&wt(),Kr[h]?(v=Kr[h].bind(this,v),o.addEventListener(An[h],v,!1),v):(console.warn("wrong event specified:",h),y)}function ct(o,h,v){if(!An[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(An[h],v,!1)}function gt(o){yi[o.pointerId]=o}function tt(o){yi[o.pointerId]&&(yi[o.pointerId]=o)}function ht(o){delete yi[o.pointerId]}function wt(){ge||(document.addEventListener(Ns,gt,!0),document.addEventListener(Dr,tt,!0),document.addEventListener(dr,ht,!0),document.addEventListener(sn,ht,!0),ge=!0)}function pt(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in yi)h.touches.push(yi[v]);h.changedTouches=[h],o(h)}}function zn(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&vn(h),pt(o,h)}function St(o){var h={},v,E;for(E in o)v=o[E],h[E]=v&&v.bind?v.bind(o):v;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var ha=200;function co(o,h){o.addEventListener("dblclick",h);var v=0,E;function O($){if($.detail!==1){E=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var re=yo($);if(!(re.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!re.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var he=Date.now();he-v<=ha?(E++,E===2&&h(St($))):E=1,v=he}}}return o.addEventListener("click",O),{dblclick:h,simDblclick:O}}function vi(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Qn=mo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Os=mo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),uo=Os==="webkitTransition"||Os==="OTransition"?Os+"End":"transitionend";function ho(o){return typeof o=="string"?document.getElementById(o):o}function fo(o,h){var v=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(o,null);v=E?E[h]:null}return v==="auto"?null:v}function bt(o,h,v){var E=document.createElement(o);return E.className=h||"",v&&v.appendChild(E),E}function zt(o){var h=o.parentNode;h&&h.removeChild(o)}function Cr(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Un(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Ds(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Gc(o,h){if(o.classList!==void 0)return o.classList.contains(h);var v=_l(o);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function ot(o,h){if(o.classList!==void 0)for(var v=T(h),E=0,O=v.length;E<O;E++)o.classList.add(v[E]);else if(!Gc(o,h)){var $=_l(o);fa(o,($?$+" ":"")+h)}}function an(o,h){o.classList!==void 0?o.classList.remove(h):fa(o,w((" "+_l(o)+" ").replace(" "+h+" "," ")))}function fa(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function _l(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function en(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&Fc(o,h)}function Fc(o,h){var v=!1,E="DXImageTransform.Microsoft.Alpha";try{v=o.filters.item(E)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):o.style.filter+=" progid:"+E+"(opacity="+h+")"}function mo(o){for(var h=document.documentElement.style,v=0;v<o.length;v++)if(o[v]in h)return o[v];return!1}function Fi(o,h,v){var E=h||new ne(0,0);o.style[Qn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(v?" scale("+v+")":"")}function qt(o,h){o._leaflet_pos=h,Ve.any3d?Fi(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function ds(o){return o._leaflet_pos||new ne(0,0)}var ma,_i,qc;if("onselectstart"in document)ma=function(){it(window,"selectstart",vn)},_i=function(){Bt(window,"selectstart",vn)};else{var pa=mo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ma=function(){if(pa){var o=document.documentElement.style;qc=o[pa],o[pa]="none"}},_i=function(){pa&&(document.documentElement.style[pa]=qc,qc=void 0)}}function xl(){it(window,"dragstart",vn)}function po(){Bt(window,"dragstart",vn)}var wl,Yc;function ga(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Mr(),wl=o,Yc=o.style.outlineStyle,o.style.outlineStyle="none",it(window,"keydown",Mr))}function Mr(){wl&&(wl.style.outlineStyle=Yc,wl=void 0,Yc=void 0,Bt(window,"keydown",Mr))}function Sl(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function go(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var ba={__proto__:null,TRANSFORM:Qn,TRANSITION:Os,TRANSITION_END:uo,get:ho,getStyle:fo,create:bt,remove:zt,empty:Cr,toFront:Un,toBack:Ds,hasClass:Gc,addClass:ot,removeClass:an,setClass:fa,getClass:_l,setOpacity:en,testProp:mo,setTransform:Fi,setPosition:qt,getPosition:ds,get disableTextSelection(){return ma},get enableTextSelection(){return _i},disableImageDrag:xl,enableImageDrag:po,preventOutline:ga,restoreOutline:Mr,getSizedParentNode:Sl,getScale:go};function it(o,h,v,E){if(h&&typeof h=="object")for(var O in h)Xr(o,O,h[O],v);else{h=T(h);for(var $=0,re=h.length;$<re;$++)Xr(o,h[$],v,E)}return this}var Wr="_leaflet_events";function Bt(o,h,v,E){if(arguments.length===1)Zc(o),delete o[Wr];else if(h&&typeof h=="object")for(var O in h)bo(o,O,h[O],v);else if(h=T(h),arguments.length===2)Zc(o,function(he){return M(h,he)!==-1});else for(var $=0,re=h.length;$<re;$++)bo(o,h[$],v,E);return this}function Zc(o,h){for(var v in o[Wr]){var E=v.split(/\d/)[0];(!h||h(E))&&bo(o,E,null,null,v)}}var Cs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xr(o,h,v,E){var O=h+m(v)+(E?"_"+m(E):"");if(o[Wr]&&o[Wr][O])return this;var $=function(he){return v.call(E||o,he||window.event)},re=$;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?$=qe(o,h,$):Ve.touch&&h==="dblclick"?$=co(o,$):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Cs[h]||h,$,Ve.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?($=function(he){he=he||window.event,qi(o,he)&&re(he)},o.addEventListener(Cs[h],$,!1)):o.addEventListener(h,re,!1):o.attachEvent("on"+h,$),o[Wr]=o[Wr]||{},o[Wr][O]=$}function bo(o,h,v,E,O){O=O||h+m(v)+(E?"_"+m(E):"");var $=o[Wr]&&o[Wr][O];if(!$)return this;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?ct(o,h,$):Ve.touch&&h==="dblclick"?vi(o,$):"removeEventListener"in o?o.removeEventListener(Cs[h]||h,$,!1):o.detachEvent("on"+h,$),o[Wr][O]=null}function Jr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function xi(o){return Xr(o,"wheel",Jr),this}function Ms(o){return it(o,"mousedown touchstart dblclick contextmenu",Jr),o._leaflet_disable_click=!0,this}function vn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function hs(o){return vn(o),Jr(o),this}function yo(o){if(o.composedPath)return o.composedPath();for(var h=[],v=o.target;v;)h.push(v),v=v.parentNode;return h}function vo(o,h){if(!h)return new ne(o.clientX,o.clientY);var v=go(h),E=v.boundingClientRect;return new ne((o.clientX-E.left)/v.x-h.clientLeft,(o.clientY-E.top)/v.y-h.clientTop)}var Ud=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function er(o){return Ve.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Ud:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function qi(o,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==o;)v=v.parentNode}catch{return!1}return v!==o}var El={__proto__:null,on:it,off:Bt,stopPropagation:Jr,disableScrollPropagation:xi,disableClickPropagation:Ms,preventDefault:vn,stop:hs,getPropagationPath:yo,getMousePosition:vo,getWheelDelta:er,isExternalTarget:qi,addListener:it,removeListener:Bt},ya=ae.extend({run:function(o,h,v,E){this.stop(),this._el=o,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ds(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var v=this._startPos.add(this._offset.multiplyBy(o));h&&v._round(),qt(this._el,v),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Et=ae.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=k(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(F(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Os&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,uo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(F(o),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=a({animate:v.animate},v.zoom),v.pan=a({animate:v.animate,duration:v.duration},v.pan));var E=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,v.zoom):this._tryAnimatedPan(o,v.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,v){var E=this.getZoomScale(h),O=this.getSize().divideBy(2),$=o instanceof ne?o:this.latLngToContainerPoint(o),re=$.subtract(O).multiplyBy(1-1/E),he=this.containerPointToLatLng(O.add(re));return this.setView(he,h,{zoom:v})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():W(o);var v=Q(h.paddingTopLeft||h.padding||[0,0]),E=Q(h.paddingBottomRight||h.padding||[0,0]),O=this.getBoundsZoom(o,!1,v.add(E));if(O=typeof h.maxZoom=="number"?Math.min(h.maxZoom,O):O,O===1/0)return{center:o.getCenter(),zoom:O};var $=E.subtract(v).divideBy(2),re=this.project(o.getSouthWest(),O),he=this.project(o.getNorthEast(),O),_e=this.unproject(re.add(he).divideBy(2).add($),O);return{center:_e,zoom:O}},fitBounds:function(o,h){if(o=W(o),!o.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(o,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=Q(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ya,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,v){if(v=v||{},v.animate===!1||!Ve.any3d)return this.setView(o,h,v);this._stop();var E=this.project(this.getCenter()),O=this.project(o),$=this.getSize(),re=this._zoom;o=F(o),h=h===void 0?re:h;var he=Math.max($.x,$.y),_e=he*this.getZoomScale(re,h),Oe=O.distanceTo(E)||1,Ge=1.42,Xe=Ge*Ge;function ft(fn){var Ki=fn?-1:1,Ps=fn?_e:he,lu=_e*_e-he*he+Ki*Xe*Xe*Oe*Oe,Lo=2*Ps*Xe*Oe,Bo=lu/Lo,xs=Math.sqrt(Bo*Bo+1)-Bo,Wi=xs<1e-9?-18:Math.log(xs);return Wi}function Hn(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function _n(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function wr(fn){return Hn(fn)/_n(fn)}var Nt=ft(0);function Ot(fn){return he*(_n(Nt)/_n(Nt+Ge*fn))}function yt(fn){return he*(_n(Nt)*wr(Nt+Ge*fn)-Hn(Nt))/Xe}function vs(fn){return 1-Math.pow(1-fn,1.5)}var Pr=Date.now(),$l=(ft(1)-Nt)/Ge,_s=v.duration?1e3*v.duration:1e3*$l*.8;function ou(){var fn=(Date.now()-Pr)/_s,Ki=vs(fn)*$l;fn<=1?(this._flyToFrame=V(ou,this),this._move(this.unproject(E.add(O.subtract(E).multiplyBy(yt(Ki)/Oe)),re),this.getScaleZoom(he/Ot(Ki),re),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),ou.call(this),this},flyToBounds:function(o,h){var v=this._getBoundsCenterZoom(o,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(o){return o=W(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var v=this.getCenter(),E=this._limitCenter(v,this._zoom,W(o));return v.equals(E)||this.panTo(E,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var v=Q(h.paddingTopLeft||h.padding||[0,0]),E=Q(h.paddingBottomRight||h.padding||[0,0]),O=this.project(this.getCenter()),$=this.project(o),re=this.getPixelBounds(),he=P([re.min.add(v),re.max.subtract(E)]),_e=he.getSize();if(!he.contains($)){this._enforcingBounds=!0;var Oe=$.subtract(he.getCenter()),Ge=he.extend($).getSize().subtract(_e);O.x+=Oe.x<0?-Ge.x:Ge.x,O.y+=Oe.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(O),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),E=h.divideBy(2).round(),O=v.divideBy(2).round(),$=E.subtract(O);return!$.x&&!$.y?this:(o.animate&&o.pan?this.panBy($):(o.pan&&this._rawPanBy($),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=u(this._handleGeolocationResponse,this),v=u(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,o):navigator.geolocation.getCurrentPosition(h,v,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,v=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,v=o.coords.longitude,E=new z(h,v),O=E.toBounds(o.coords.accuracy*2),$=this._locateOptions;if($.setView){var re=this.getBoundsZoom(O);this.setView(E,$.maxZoom?Math.min(re,$.maxZoom):re)}var he={latlng:E,bounds:O,timestamp:o.timestamp};for(var _e in o.coords)typeof o.coords[_e]=="number"&&(he[_e]=o.coords[_e]);this.fire("locationfound",he)}},addHandler:function(o,h){if(!h)return this;var v=this[o]=new h(this);return this._handlers.push(v),this.options[o]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)zt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var v="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),E=bt("div",v,h||this._mapPane);return o&&(this._panes[o]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),v=this.unproject(o.getTopRight());return new K(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,v){o=W(o),v=Q(v||[0,0]);var E=this.getZoom()||0,O=this.getMinZoom(),$=this.getMaxZoom(),re=o.getNorthWest(),he=o.getSouthEast(),_e=this.getSize().subtract(v),Oe=P(this.project(he,E),this.project(re,E)).getSize(),Ge=Ve.any3d?this.options.zoomSnap:1,Xe=_e.x/Oe.x,ft=_e.y/Oe.y,Hn=h?Math.max(Xe,ft):Math.min(Xe,ft);return E=this.getScaleZoom(Hn,E),Ge&&(E=Math.round(E/(Ge/100))*(Ge/100),E=h?Math.ceil(E/Ge)*Ge:Math.floor(E/Ge)*Ge),Math.max(O,Math.min($,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var v=this._getTopLeftPoint(o,h);return new H(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(o)/v.scale(h)},getScaleZoom:function(o,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var E=v.zoom(o*v.scale(h));return isNaN(E)?1/0:E},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(F(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(Q(o),h)},layerPointToLatLng:function(o){var h=Q(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(F(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(F(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(W(o))},distance:function(o,h){return this.options.crs.distance(F(o),F(h))},containerPointToLayerPoint:function(o){return Q(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Q(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(Q(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(o)))},mouseEventToContainerPoint:function(o){return vo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=ho(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(h,"scroll",this._onScroll,this),this._containerId=m(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,ot(o,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=fo(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(o.markerPane,"leaflet-zoom-hide"),ot(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,v){qt(this._mapPane,new ne(0,0));var E=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var O=this._zoom!==h;this._moveStart(O,v)._move(o,h)._moveEnd(O),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,v,E){h===void 0&&(h=this._zoom);var O=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),E?v&&v.pinch&&this.fire("zoom",v):((O||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){qt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[m(this._container)]=this;var h=o?Bt:it;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var v=[],E,O=h==="mouseout"||h==="mouseover",$=o.target||o.srcElement,re=!1;$;){if(E=this._targets[m($)],E&&(h==="click"||h==="preclick")&&this._draggableMoved(E)){re=!0;break}if(E&&E.listens(h,!0)&&(O&&!qi($,o)||(v.push(E),O))||$===this._container)break;$=$.parentNode}return!v.length&&!re&&!O&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var v=o.type;v==="mousedown"&&ga(h),this._fireDOMEvent(o,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,v){if(o.type==="click"){var E=a({},o);E.type="preclick",this._fireDOMEvent(E,E.type,v)}var O=this._findEventTargets(o,h);if(v){for(var $=[],re=0;re<v.length;re++)v[re].listens(h,!0)&&$.push(v[re]);O=$.concat(O)}if(O.length){h==="contextmenu"&&vn(o);var he=O[0],_e={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Oe=he.getLatLng&&(!he._radius||he._radius<=10);_e.containerPoint=Oe?this.latLngToContainerPoint(he.getLatLng()):this.mouseEventToContainerPoint(o),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Oe?he.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(re=0;re<O.length;re++)if(O[re].fire(h,_e,!0),_e.originalEvent._stopped||O[re].options.bubblingMouseEvents===!1&&M(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return ds(this._mapPane)||new ne(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var v=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var v=this.getSize()._divideBy(2);return this.project(o,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,v){var E=this._getNewPixelOrigin(v,h);return this.project(o,h)._subtract(E)},_latLngBoundsToNewLayerBounds:function(o,h,v){var E=this._getNewPixelOrigin(v,h);return P([this.project(o.getSouthWest(),h)._subtract(E),this.project(o.getNorthWest(),h)._subtract(E),this.project(o.getSouthEast(),h)._subtract(E),this.project(o.getNorthEast(),h)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,v){if(!v)return o;var E=this.project(o,h),O=this.getSize().divideBy(2),$=new H(E.subtract(O),E.add(O)),re=this._getBoundsOffset($,v,h);return Math.abs(re.x)<=1&&Math.abs(re.y)<=1?o:this.unproject(E.add(re),h)},_limitOffset:function(o,h){if(!h)return o;var v=this.getPixelBounds(),E=new H(v.min.add(o),v.max.add(o));return o.add(this._getBoundsOffset(E,h))},_getBoundsOffset:function(o,h,v){var E=P(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),O=E.min.subtract(o.min),$=E.max.subtract(o.max),re=this._rebound(O.x,-$.x),he=this._rebound(O.y,-$.y);return new ne(re,he)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),v=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(o=Math.round(o/E)*E),Math.max(h,Math.min(v,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var v=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var o=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var v=Qn,E=this._proxy.style[v];Fi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),E===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();Fi(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(h),O=this._getCenterOffset(o)._divideBy(1-1/E);return v.animate!==!0&&!this.getSize().contains(O)?!1:(V(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,v,E){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vc(o,h){return new Et(o,h)}var xr=te.extend({options:{position:"topright"},initialize:function(o){k(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),v=this.getPosition(),E=o._controlCorners[v];return ot(h,"leaflet-control"),v.indexOf("bottom")!==-1?E.insertBefore(h,E.firstChild):E.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Yi=function(o){return new xr(o)};Et.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",v=this._controlContainer=bt("div",h+"control-container",this._container);function E(O,$){var re=h+O+" "+h+$;o[O+$]=bt("div",re,v)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)zt(this._controlCorners[o]);zt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _o=xr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,v,E){return v<E?-1:E<v?1:0}},initialize:function(o,h,v){k(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in o)this._addLayer(o[E],E);for(E in h)this._addLayer(h[E],E,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return xr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(m(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=bt("div",o),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Ms(h),xi(h);var E=this._section=bt("section",o+"-list");v&&(this._map.on("click",this.collapse,this),it(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=bt("a",o+"-toggle",h);O.href="#",O.title="Layers",O.setAttribute("role","button"),it(O,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){vn($),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=bt("div",o+"-base",E),this._separator=bt("div",o+"-separator",E),this._overlaysList=bt("div",o+"-overlays",E),h.appendChild(E)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&m(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,v){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(u(function(E,O){return this.options.sortFunction(E.layer,O.layer,E.name,O.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cr(this._baseLayersList),Cr(this._overlaysList),this._layerControlInputs=[];var o,h,v,E,O=0;for(v=0;v<this._layers.length;v++)E=this._layers[v],this._addItem(E),h=h||E.overlay,o=o||!E.overlay,O+=E.overlay?0:1;return this.options.hideSingleBase&&(o=o&&O>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(m(o.target)),v=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(o,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=v,E.firstChild},_addItem:function(o){var h=document.createElement("label"),v=this._map.hasLayer(o.layer),E;o.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=v):E=this._createRadioElement("leaflet-base-layers_"+m(this),v),this._layerControlInputs.push(E),E.layerId=m(o.layer),it(E,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+o.name;var $=document.createElement("span");h.appendChild($),$.appendChild(E),$.appendChild(O);var re=o.overlay?this._overlaysList:this._baseLayersList;return re.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,v,E=[],O=[];this._handlingClick=!0;for(var $=o.length-1;$>=0;$--)h=o[$],v=this._getLayer(h.layerId).layer,h.checked?E.push(v):h.checked||O.push(v);for($=0;$<O.length;$++)this._map.hasLayer(O[$])&&this._map.removeLayer(O[$]);for($=0;$<E.length;$++)this._map.hasLayer(E[$])||this._map.addLayer(E[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,v,E=this._map.getZoom(),O=o.length-1;O>=0;O--)h=o[O],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&E<v.options.minZoom||v.options.maxZoom!==void 0&&E>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,it(o,"click",vn),this.expand();var h=this;setTimeout(function(){Bt(o,"click",vn),h._preventClick=!1})}}),Hd=function(o,h,v){return new _o(o,h,v)},Kc=xr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",v=bt("div",h+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,v,E,O){var $=bt("a",v,E);return $.innerHTML=o,$.href="#",$.title=h,$.setAttribute("role","button"),$.setAttribute("aria-label",h),Ms($),it($,"click",hs),it($,"click",O,this),it($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";an(this._zoomInButton,h),an(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ot(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ot(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kc,this.addControl(this.zoomControl))});var xp=function(o){return new Kc(o)},Gd=xr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",v=bt("div",h),E=this.options;return this._addScales(E,h+"-line",v),o.on(E.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),v},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,v){o.metric&&(this._mScale=bt("div",h,v)),o.imperial&&(this._iScale=bt("div",h,v))},_update:function(){var o=this._map,h=o.getSize().y/2,v=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/o)},_updateImperial:function(o){var h=o*3.2808399,v,E,O;h>5280?(v=h/5280,E=this._getRoundNum(v),this._updateScale(this._iScale,E+" mi",E/v)):(O=this._getRoundNum(h),this._updateScale(this._iScale,O+" ft",O/h))},_updateScale:function(o,h,v){o.style.width=Math.round(this.options.maxWidth*v)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),v=o/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),Wc=function(o){return new Gd(o)},wp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xc=xr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?wp+" ":"")+"Leaflet</a>"},initialize:function(o){k(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Ms(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),o.length&&v.push(o.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new Xc().addTo(this)});var Sp=function(o){return new Xc(o)};xr.Layers=_o,xr.Zoom=Kc,xr.Scale=Gd,xr.Attribution=Xc,Yi.layers=Hd,Yi.zoom=xp,Yi.scale=Wc,Yi.attribution=Sp;var wi=te.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wi.addTo=function(o,h){return o.addHandler(h,this),this};var Ep={Events:X},Jc=Ve.touch?"touchstart mousedown":"mousedown",fs=ae.extend({options:{clickTolerance:3},initialize:function(o,h,v,E){k(this,E),this._element=o,this._dragStartTarget=h||o,this._preventOutline=v},enable:function(){this._enabled||(it(this._dragStartTarget,Jc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fs._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,Jc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Gc(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){fs._dragging===this&&this.finishDrag();return}if(!(fs._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(fs._dragging=this,this._preventOutline&&ga(this._element),xl(),ma(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,v=Sl(this._element);this._startPoint=new ne(h.clientX,h.clientY),this._startPos=ds(this._element),this._parentScale=go(v);var E=o.type==="mousedown";it(document,E?"mousemove":"touchmove",this._onMove,this),it(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,v=new ne(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,vn(o),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),qt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),po(),_i();var h=this._moved&&this._moving;this._moving=!1,fs._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Fd(o,h,v){var E,O=[1,4,2,8],$,re,he,_e,Oe,Ge,Xe,ft;for($=0,Ge=o.length;$<Ge;$++)o[$]._code=Rs(o[$],h);for(he=0;he<4;he++){for(Xe=O[he],E=[],$=0,Ge=o.length,re=Ge-1;$<Ge;re=$++)_e=o[$],Oe=o[re],_e._code&Xe?Oe._code&Xe||(ft=Tl(Oe,_e,Xe,h,v),ft._code=Rs(ft,h),E.push(ft)):(Oe._code&Xe&&(ft=Tl(Oe,_e,Xe,h,v),ft._code=Rs(ft,h),E.push(ft)),E.push(_e));o=E}return o}function qd(o,h){var v,E,O,$,re,he,_e,Oe,Ge;if(!o||o.length===0)throw new Error("latlngs not passed");Rr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Xe=F([0,0]),ft=W(o),Hn=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Hn<1700&&(Xe=Qc(o));var _n=o.length,wr=[];for(v=0;v<_n;v++){var Nt=F(o[v]);wr.push(h.project(F([Nt.lat-Xe.lat,Nt.lng-Xe.lng])))}for(he=_e=Oe=0,v=0,E=_n-1;v<_n;E=v++)O=wr[v],$=wr[E],re=O.y*$.x-$.y*O.x,_e+=(O.x+$.x)*re,Oe+=(O.y+$.y)*re,he+=re*3;he===0?Ge=wr[0]:Ge=[_e/he,Oe/he];var Ot=h.unproject(Q(Ge));return F([Ot.lat+Xe.lat,Ot.lng+Xe.lng])}function Qc(o){for(var h=0,v=0,E=0,O=0;O<o.length;O++){var $=F(o[O]);h+=$.lat,v+=$.lng,E++}return F([h/E,v/E])}var eu={__proto__:null,clipPolygon:Fd,polygonCenter:qd,centroid:Qc};function Yd(o,h){if(!h||!o.length)return o.slice();var v=h*h;return o=kp(o,v),o=Vd(o,v),o}function Zd(o,h,v){return Math.sqrt(xo(o,h,v,!0))}function Tp(o,h,v){return xo(o,h,v)}function Vd(o,h){var v=o.length,E=typeof Uint8Array<"u"?Uint8Array:Array,O=new E(v);O[0]=O[v-1]=1,tu(o,O,h,0,v-1);var $,re=[];for($=0;$<v;$++)O[$]&&re.push(o[$]);return re}function tu(o,h,v,E,O){var $=0,re,he,_e;for(he=E+1;he<=O-1;he++)_e=xo(o[he],o[E],o[O],!0),_e>$&&(re=he,$=_e);$>v&&(h[re]=1,tu(o,h,v,E,re),tu(o,h,v,re,O))}function kp(o,h){for(var v=[o[0]],E=1,O=0,$=o.length;E<$;E++)Ap(o[E],o[O])>h&&(v.push(o[E]),O=E);return O<$-1&&v.push(o[$-1]),v}var Kd;function Wd(o,h,v,E,O){var $=E?Kd:Rs(o,v),re=Rs(h,v),he,_e,Oe;for(Kd=re;;){if(!($|re))return[o,h];if($&re)return!1;he=$||re,_e=Tl(o,h,he,v,O),Oe=Rs(_e,v),he===$?(o=_e,$=Oe):(h=_e,re=Oe)}}function Tl(o,h,v,E,O){var $=h.x-o.x,re=h.y-o.y,he=E.min,_e=E.max,Oe,Ge;return v&8?(Oe=o.x+$*(_e.y-o.y)/re,Ge=_e.y):v&4?(Oe=o.x+$*(he.y-o.y)/re,Ge=he.y):v&2?(Oe=_e.x,Ge=o.y+re*(_e.x-o.x)/$):v&1&&(Oe=he.x,Ge=o.y+re*(he.x-o.x)/$),new ne(Oe,Ge,O)}function Rs(o,h){var v=0;return o.x<h.min.x?v|=1:o.x>h.max.x&&(v|=2),o.y<h.min.y?v|=4:o.y>h.max.y&&(v|=8),v}function Ap(o,h){var v=h.x-o.x,E=h.y-o.y;return v*v+E*E}function xo(o,h,v,E){var O=h.x,$=h.y,re=v.x-O,he=v.y-$,_e=re*re+he*he,Oe;return _e>0&&(Oe=((o.x-O)*re+(o.y-$)*he)/_e,Oe>1?(O=v.x,$=v.y):Oe>0&&(O+=re*Oe,$+=he*Oe)),re=o.x-O,he=o.y-$,E?re*re+he*he:new ne(O,$)}function Rr(o){return!N(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function kl(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rr(o)}function va(o,h){var v,E,O,$,re,he,_e,Oe;if(!o||o.length===0)throw new Error("latlngs not passed");Rr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ge=F([0,0]),Xe=W(o),ft=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ft<1700&&(Ge=Qc(o));var Hn=o.length,_n=[];for(v=0;v<Hn;v++){var wr=F(o[v]);_n.push(h.project(F([wr.lat-Ge.lat,wr.lng-Ge.lng])))}for(v=0,E=0;v<Hn-1;v++)E+=_n[v].distanceTo(_n[v+1])/2;if(E===0)Oe=_n[0];else for(v=0,$=0;v<Hn-1;v++)if(re=_n[v],he=_n[v+1],O=re.distanceTo(he),$+=O,$>E){_e=($-E)/O,Oe=[he.x-_e*(he.x-re.x),he.y-_e*(he.y-re.y)];break}var Nt=h.unproject(Q(Oe));return F([Nt.lat+Ge.lat,Nt.lng+Ge.lng])}var jp={__proto__:null,simplify:Yd,pointToSegmentDistance:Zd,closestPointOnSegment:Tp,clipSegment:Wd,_getEdgeIntersection:Tl,_getBitCode:Rs,_sqClosestPointOnSegment:xo,isFlat:Rr,_flat:kl,polylineCenter:va},Al={project:function(o){return new ne(o.lng,o.lat)},unproject:function(o){return new z(o.y,o.x)},bounds:new H([-180,-90],[180,90])},jl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,v=this.R,E=o.lat*h,O=this.R_MINOR/v,$=Math.sqrt(1-O*O),re=$*Math.sin(E),he=Math.tan(Math.PI/4-E/2)/Math.pow((1-re)/(1+re),$/2);return E=-v*Math.log(Math.max(he,1e-10)),new ne(o.lng*h*v,E)},unproject:function(o){for(var h=180/Math.PI,v=this.R,E=this.R_MINOR/v,O=Math.sqrt(1-E*E),$=Math.exp(-o.y/v),re=Math.PI/2-2*Math.atan($),he=0,_e=.1,Oe;he<15&&Math.abs(_e)>1e-7;he++)Oe=O*Math.sin(re),Oe=Math.pow((1-Oe)/(1+Oe),O/2),_e=Math.PI/2-2*Math.atan($*Oe)-re,re+=_e;return new z(re*h,o.x*h/v)}},Xd={__proto__:null,LonLat:Al,Mercator:jl,SphericalMercator:ve},Jd=a({},ce,{code:"EPSG:3395",projection:jl,transformation:(function(){var o=.5/(Math.PI*jl.R);return je(o,.5,-o,.5)})()}),nu=a({},ce,{code:"EPSG:4326",projection:Al,transformation:je(1/180,1,-1/180,.5)}),_a=a({},oe,{projection:Al,transformation:je(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var v=h.lng-o.lng,E=h.lat-o.lat;return Math.sqrt(v*v+E*E)},infinite:!0});oe.Earth=ce,oe.EPSG3395=Jd,oe.EPSG3857=Ce,oe.EPSG900913=Ee,oe.EPSG4326=nu,oe.Simple=_a;var Qr=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[m(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[m(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=m(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=m(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return m(o)in this._layers},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},_addLayers:function(o){o=o?N(o)?o:[o]:[];for(var h=0,v=o.length;h<v;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[m(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=m(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,v=this._getZoomSpan();for(var E in this._zoomBoundLayers){var O=this._zoomBoundLayers[E].options;o=O.minZoom===void 0?o:Math.min(o,O.minZoom),h=O.maxZoom===void 0?h:Math.max(h,O.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xa=Qr.extend({initialize:function(o,h){k(this,h),this._layers={};var v,E;if(o)for(v=0,E=o.length;v<E;v++)this.addLayer(o[v])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),v,E;for(v in this._layers)E=this._layers[v],E[o]&&E[o].apply(E,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return m(o)}}),Np=function(o,h){return new xa(o,h)},Si=xa.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),xa.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),xa.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new K;for(var h in this._layers){var v=this._layers[h];o.extend(v.getBounds?v.getBounds():v.getLatLng())}return o}}),Qd=function(o,h){return new Si(o,h)},Ei=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){k(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var v=this._getIconUrl(o);if(!v){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(E,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(o,h){var v=this.options,E=v[h+"Size"];typeof E=="number"&&(E=[E,E]);var O=Q(E),$=Q(h==="shadow"&&v.shadowAnchor||v.iconAnchor||O&&O.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(v.className||""),$&&(o.style.marginLeft=-$.x+"px",o.style.marginTop=-$.y+"px"),O&&(o.style.width=O.x+"px",o.style.height=O.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ve.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function wo(o){return new Ei(o)}var So=Ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof So.imagePath!="string"&&(So.imagePath=this._detectIconPath()),(this.options.imagePath||So.imagePath)+Ei.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(v,E,O){var $=E.exec(v);return $&&$[O]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=bt("div","leaflet-default-icon-path",document.body),h=fo(o,"background-image")||fo(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),Eo=wi.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new fs(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,v=h._map,E=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,$=ds(h._icon),re=v.getPixelBounds(),he=v.getPixelOrigin(),_e=P(re.min._subtract(he).add(O),re.max._subtract(he).subtract(O));if(!_e.contains($)){var Oe=Q((Math.max(_e.max.x,$.x)-_e.max.x)/(re.max.x-_e.max.x)-(Math.min(_e.min.x,$.x)-_e.min.x)/(re.min.x-_e.min.x),(Math.max(_e.max.y,$.y)-_e.max.y)/(re.max.y-_e.max.y)-(Math.min(_e.min.y,$.y)-_e.min.y)/(re.min.y-_e.min.y)).multiplyBy(E);v.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),qt(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=V(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,v=h._shadow,E=ds(h._icon),O=h._map.layerPointToLatLng(E);v&&qt(v,E),h._latlng=O,o.latlng=O,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),To=Qr.extend({options:{icon:new So,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){k(this,h),this._latlng=F(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=F(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=o.icon.createIcon(this._icon),E=!1;v!==this._icon&&(this._icon&&this._removeIcon(),E=!0,o.title&&(v.title=o.title),v.tagName==="IMG"&&(v.alt=o.alt||"")),ot(v,h),o.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(v,"focus",this._panOnFocus,this);var O=o.icon.createShadow(this._shadow),$=!1;O!==this._shadow&&(this._removeShadow(),$=!0),O&&(ot(O,h),O.alt=""),this._shadow=O,o.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&$&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),zt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&qt(this._icon,o),this._shadow&&qt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Eo)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Eo(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&en(this._icon,o),this._shadow&&en(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,v=h.iconSize?Q(h.iconSize):Q(0,0),E=h.iconAnchor?Q(h.iconAnchor):Q(0,0);o.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:v.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function eh(o,h){return new To(o,h)}var Ti=Qr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return k(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wa=Ti.extend({options:{fill:!0,radius:10},initialize:function(o,h){k(this,h),this._latlng=F(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=F(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Ti.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,v=this._clickTolerance(),E=[o+v,h+v];this._pxBounds=new H(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function th(o,h){return new wa(o,h)}var Nl=wa.extend({initialize:function(o,h,v){if(typeof h=="number"&&(h=a({},v,{radius:h})),k(this,h),this._latlng=F(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ti.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,v=this._map,E=v.options.crs;if(E.distance===ce.distance){var O=Math.PI/180,$=this._mRadius/ce.R/O,re=v.project([h+$,o]),he=v.project([h-$,o]),_e=re.add(he).divideBy(2),Oe=v.unproject(_e).lat,Ge=Math.acos((Math.cos($*O)-Math.sin(h*O)*Math.sin(Oe*O))/(Math.cos(h*O)*Math.cos(Oe*O)))/O;(isNaN(Ge)||Ge===0)&&(Ge=$/Math.cos(Math.PI/180*h)),this._point=_e.subtract(v.getPixelOrigin()),this._radius=isNaN(Ge)?0:_e.x-v.project([Oe,o-Ge]).x,this._radiusY=_e.y-re.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(Xe).x}this._updateBounds()}});function nh(o,h,v){return new Nl(o,h,v)}var Zi=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){k(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,v=null,E=xo,O,$,re=0,he=this._parts.length;re<he;re++)for(var _e=this._parts[re],Oe=1,Ge=_e.length;Oe<Ge;Oe++){O=_e[Oe-1],$=_e[Oe];var Xe=E(o,O,$,!0);Xe<h&&(h=Xe,v=E(o,O,$))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return va(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=F(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new K,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Rr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],v=Rr(o),E=0,O=o.length;E<O;E++)v?(h[E]=F(o[E]),this._bounds.extend(h[E])):h[E]=this._convertLatLngs(o[E]);return h},_project:function(){var o=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new ne(o,o);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,v){var E=o[0]instanceof z,O=o.length,$,re;if(E){for(re=[],$=0;$<O;$++)re[$]=this._map.latLngToLayerPoint(o[$]),v.extend(re[$]);h.push(re)}else for($=0;$<O;$++)this._projectLatlngs(o[$],h,v)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,E,O,$,re,he,_e;for(v=0,O=0,$=this._rings.length;v<$;v++)for(_e=this._rings[v],E=0,re=_e.length;E<re-1;E++)he=Wd(_e[E],_e[E+1],o,E,!0),he&&(h[O]=h[O]||[],h[O].push(he[0]),(he[1]!==_e[E+1]||E===re-2)&&(h[O].push(he[1]),O++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,v=0,E=o.length;v<E;v++)o[v]=Yd(o[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var v,E,O,$,re,he,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(v=0,$=this._parts.length;v<$;v++)for(he=this._parts[v],E=0,re=he.length,O=re-1;E<re;O=E++)if(!(!h&&E===0)&&Zd(o,he[O],he[E])<=_e)return!0;return!1}});function Op(o,h){return new Zi(o,h)}Zi._flat=kl;var Sa=Zi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=Zi.prototype._convertLatLngs.call(this,o),v=h.length;return v>=2&&h[0]instanceof z&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(o){Zi.prototype._setLatLngs.call(this,o),Rr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,v=new ne(h,h);if(o=new H(o.min.subtract(v),o.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,O=this._rings.length,$;E<O;E++)$=Fd(this._rings[E],o,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,v,E,O,$,re,he,_e,Oe;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for($=0,_e=this._parts.length;$<_e;$++)for(v=this._parts[$],re=0,Oe=v.length,he=Oe-1;re<Oe;he=re++)E=v[re],O=v[he],E.y>o.y!=O.y>o.y&&o.x<(O.x-E.x)*(o.y-E.y)/(O.y-E.y)+E.x&&(h=!h);return h||Zi.prototype._containsPoint.call(this,o,!0)}});function Dp(o,h){return new Sa(o,h)}var Vi=Si.extend({initialize:function(o,h){k(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=N(o)?o:o.features,v,E,O;if(h){for(v=0,E=h.length;v<E;v++)O=h[v],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var $=this.options;if($.filter&&!$.filter(o))return this;var re=Yn(o,$);return re?(re.feature=Cl(o),re.defaultOptions=re.options,this.resetStyle(re),$.onEachFeature&&$.onEachFeature(o,re),this.addLayer(re)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function Yn(o,h){var v=o.type==="Feature"?o.geometry:o,E=v?v.coordinates:null,O=[],$=h&&h.pointToLayer,re=h&&h.coordsToLatLng||Ol,he,_e,Oe,Ge;if(!E&&!v)return null;switch(v.type){case"Point":return he=re(E),Ea($,o,he,h);case"MultiPoint":for(Oe=0,Ge=E.length;Oe<Ge;Oe++)he=re(E[Oe]),O.push(Ea($,o,he,h));return new Si(O);case"LineString":case"MultiLineString":return _e=ko(E,v.type==="LineString"?0:1,re),new Zi(_e,h);case"Polygon":case"MultiPolygon":return _e=ko(E,v.type==="Polygon"?1:2,re),new Sa(_e,h);case"GeometryCollection":for(Oe=0,Ge=v.geometries.length;Oe<Ge;Oe++){var Xe=Yn({geometry:v.geometries[Oe],type:"Feature",properties:o.properties},h);Xe&&O.push(Xe)}return new Si(O);case"FeatureCollection":for(Oe=0,Ge=v.features.length;Oe<Ge;Oe++){var ft=Yn(v.features[Oe],h);ft&&O.push(ft)}return new Si(O);default:throw new Error("Invalid GeoJSON object.")}}function Ea(o,h,v,E){return o?o(h,v):new To(v,E&&E.markersInheritOptions&&E)}function Ol(o){return new z(o[1],o[0],o[2])}function ko(o,h,v){for(var E=[],O=0,$=o.length,re;O<$;O++)re=h?ko(o[O],h-1,v):(v||Ol)(o[O]),E.push(re);return E}function Dl(o,h){return o=F(o),o.alt!==void 0?[x(o.lng,h),x(o.lat,h),x(o.alt,h)]:[x(o.lng,h),x(o.lat,h)]}function Ao(o,h,v,E){for(var O=[],$=0,re=o.length;$<re;$++)O.push(h?Ao(o[$],Rr(o[$])?0:h-1,v,E):Dl(o[$],E));return!h&&v&&O.length>0&&O.push(O[0].slice()),O}function ms(o,h){return o.feature?a({},o.feature,{geometry:h}):Cl(h)}function Cl(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var ps={toGeoJSON:function(o){return ms(this,{type:"Point",coordinates:Dl(this.getLatLng(),o)})}};To.include(ps),Nl.include(ps),wa.include(ps),Zi.include({toGeoJSON:function(o){var h=!Rr(this._latlngs),v=Ao(this._latlngs,h?1:0,!1,o);return ms(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),Sa.include({toGeoJSON:function(o){var h=!Rr(this._latlngs),v=h&&!Rr(this._latlngs[0]),E=Ao(this._latlngs,v?2:h?1:0,!0,o);return h||(E=[E]),ms(this,{type:(v?"Multi":"")+"Polygon",coordinates:E})}}),xa.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(o).geometry.coordinates)}),ms(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var v=h==="GeometryCollection",E=[];return this.eachLayer(function(O){if(O.toGeoJSON){var $=O.toGeoJSON(o);if(v)E.push($.geometry);else{var re=Cl($);re.type==="FeatureCollection"?E.push.apply(E,re.features):E.push(re)}}}),v?ms(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Ml(o,h){return new Vi(o,h)}var jo=Ml,Ta=Qr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,v){this._url=o,this._bounds=W(h),k(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Un(this._image),this},bringToBack:function(){return this._map&&Ds(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=W(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:bt("img");if(ot(h,"leaflet-image-layer"),this._zoomAnimated&&ot(h,"leaflet-zoom-animated"),this.options.className&&ot(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onload=u(this.fire,this,"load"),h.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Fi(this._image,v,h)},_reset:function(){var o=this._image,h=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();qt(o,h.min),o.style.width=v.x+"px",o.style.height=v.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),rh=function(o,h,v){return new Ta(o,h,v)},gs=Ta.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:bt("video");if(ot(h,"leaflet-image-layer"),this._zoomAnimated&&ot(h,"leaflet-zoom-animated"),this.options.className&&ot(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onloadeddata=u(this.fire,this,"load"),o){for(var v=h.getElementsByTagName("source"),E=[],O=0;O<v.length;O++)E.push(v[O].src);this._url=v.length>0?E:[h.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var re=bt("source");re.src=this._url[$],h.appendChild(re)}}});function ka(o,h,v){return new gs(o,h,v)}var Rl=Ta.extend({_initImage:function(){var o=this._image=this._url;ot(o,"leaflet-image-layer"),this._zoomAnimated&&ot(o,"leaflet-zoom-animated"),this.options.className&&ot(o,this.options.className),o.onselectstart=y,o.onmousemove=y}});function ih(o,h,v){return new Rl(o,h,v)}var Zn=Qr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof z||N(o))?(this._latlng=F(o),k(this,h)):(k(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(zt,void 0,this._container),200)):zt(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=F(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Un(this._container),this},bringToBack:function(){return this._map&&Ds(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof Si){h=null;var v=this._source._layers;for(var E in v)if(v[E]._map){h=v[E];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=Q(this.options.offset),v=this._getAnchor();this._zoomAnimated?qt(this._container,o.add(v)):h=h.add(o).add(v);var E=this._containerBottom=-h.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=E+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(o,h,v,E){var O=h;return O instanceof o||(O=new o(E).setContent(h)),v&&O.setLatLng(v),O}}),Qr.include({_initOverlay:function(o,h,v,E){var O=v;return O instanceof o?(k(O,E),O._source=this):(O=h&&!E?h:new o(E,this),O.setContent(v)),O}});var No=Zn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Zn.prototype.openOn.call(this,o)},onAdd:function(o){Zn.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",Jr))},onRemove:function(o){Zn.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",Jr))},getEvents:function(){var o=Zn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=bt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=bt("div",o+"-content-wrapper",h);if(this._contentNode=bt("div",o+"-content",v),Ms(h),xi(this._contentNode),it(h,"contextmenu",Jr),this._tipContainer=bt("div",o+"-tip-container",h),this._tip=bt("div",o+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=bt("a",o+"-close-button",h);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',it(E,"click",function(O){vn(O),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var v=o.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var E=o.offsetHeight,O=this.options.maxHeight,$="leaflet-popup-scrolled";O&&E>O?(h.height=O+"px",ot(o,$)):an(o,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),v=this._getAnchor();qt(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(fo(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,E=this._containerWidth,O=new ne(this._containerLeft,-v-this._containerBottom);O._add(ds(this._container));var $=o.layerPointToContainerPoint(O),re=Q(this.options.autoPanPadding),he=Q(this.options.autoPanPaddingTopLeft||re),_e=Q(this.options.autoPanPaddingBottomRight||re),Oe=o.getSize(),Ge=0,Xe=0;$.x+E+_e.x>Oe.x&&(Ge=$.x+E-Oe.x+_e.x),$.x-Ge-he.x<0&&(Ge=$.x-he.x),$.y+v+_e.y>Oe.y&&(Xe=$.y+v-Oe.y+_e.y),$.y-Xe-he.y<0&&(Xe=$.y-he.y),(Ge||Xe)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ge,Xe]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),sh=function(o,h){return new No(o,h)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(o,h,v){return this._initOverlay(No,o,h,v).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Qr.include({bindPopup:function(o,h){return this._popup=this._initOverlay(No,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Si||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){hs(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Oo=Zn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Zn.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Zn.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Zn.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,v,E=this._map,O=this._container,$=E.latLngToContainerPoint(E.getCenter()),re=E.layerPointToContainerPoint(o),he=this.options.direction,_e=O.offsetWidth,Oe=O.offsetHeight,Ge=Q(this.options.offset),Xe=this._getAnchor();he==="top"?(h=_e/2,v=Oe):he==="bottom"?(h=_e/2,v=0):he==="center"?(h=_e/2,v=Oe/2):he==="right"?(h=0,v=Oe/2):he==="left"?(h=_e,v=Oe/2):re.x<$.x?(he="right",h=0,v=Oe/2):(he="left",h=_e+(Ge.x+Xe.x)*2,v=Oe/2),o=o.subtract(Q(h,v,!0)).add(Ge).add(Xe),an(O,"leaflet-tooltip-right"),an(O,"leaflet-tooltip-left"),an(O,"leaflet-tooltip-top"),an(O,"leaflet-tooltip-bottom"),ot(O,"leaflet-tooltip-"+he),qt(O,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&en(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cp=function(o,h){return new Oo(o,h)};Et.include({openTooltip:function(o,h,v){return this._initOverlay(Oo,o,h,v).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Qr.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Oo,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Si||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(it(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),it(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,v,E;this._tooltip.options.sticky&&o.originalEvent&&(v=this._map.mouseEventToContainerPoint(o.originalEvent),E=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(h)}});var ah=Ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Cr(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var E=Q(v.bgPos);h.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Mp(o){return new ah(o)}Ei.Default=So;var Aa=Qr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){k(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),zt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ds(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ne?o:new ne(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,v=-o(-1/0,1/0),E=0,O=h.length,$;E<O;E++)$=h[E].style.zIndex,h[E]!==this._container&&$&&(v=o(v,+$));isFinite(v)&&(this.options.zIndex=v+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){en(this._container,this.options.opacity);var o=+new Date,h=!1,v=!1;for(var E in this._tiles){var O=this._tiles[E];if(!(!O.current||!O.loaded)){var $=Math.min(1,(o-O.loaded)/200);en(O.el,$),$<1?h=!0:(O.active?v=!0:this._onOpaqueTile(O),O.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(Z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===o?(this._levels[v].el.style.zIndex=h-Math.abs(o-v),this._onUpdateLevel(v)):(zt(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var E=this._levels[o],O=this._map;return E||(E=this._levels[o]={},E.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=h,E.origin=O.project(O.unproject(O.getPixelOrigin()),o).round(),E.zoom=o,this._setZoomTransform(E,O.getCenter(),O.getZoom()),y(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var o,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var E=h.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)zt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,v,E){var O=Math.floor(o/2),$=Math.floor(h/2),re=v-1,he=new ne(+O,+$);he.z=+re;var _e=this._tileCoordsToKey(he),Oe=this._tiles[_e];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),re>E?this._retainParent(O,$,re,E):!1)},_retainChildren:function(o,h,v,E){for(var O=2*o;O<2*o+2;O++)for(var $=2*h;$<2*h+2;$++){var re=new ne(O,$);re.z=v+1;var he=this._tileCoordsToKey(re),_e=this._tiles[he];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);v+1<E&&this._retainChildren(O,$,v+1,E)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,v,E){var O=Math.round(h);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var $=this.options.updateWhenZooming&&O!==this._tileZoom;(!E||$)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(o),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],o,h)},_setZoomTransform:function(o,h,v){var E=this._map.getZoomScale(v,o.zoom),O=o.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(h,v)).round();Ve.any3d?Fi(o.el,O,E):qt(o.el,O)},_resetGrid:function(){var o=this._map,h=o.options.crs,v=this._tileSize=this.getTileSize(),E=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],E).x/v.x),Math.ceil(o.project([0,h.wrapLng[1]],E).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],E).y/v.x),Math.ceil(o.project([h.wrapLat[1],0],E).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),E=h.getZoomScale(v,this._tileZoom),O=h.project(o,this._tileZoom).floor(),$=h.getSize().divideBy(E*2);return new H(O.subtract($),O.add($))},_update:function(o){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(o),O=this._pxBoundsToTileRange(E),$=O.getCenter(),re=[],he=this.options.keepBuffer,_e=new H(O.getBottomLeft().subtract([he,-he]),O.getTopRight().add([he,-he]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ge=this._tiles[Oe].coords;(Ge.z!==this._tileZoom||!_e.contains(new ne(Ge.x,Ge.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(o,v);return}for(var Xe=O.min.y;Xe<=O.max.y;Xe++)for(var ft=O.min.x;ft<=O.max.x;ft++){var Hn=new ne(ft,Xe);if(Hn.z=this._tileZoom,!!this._isValidTile(Hn)){var _n=this._tiles[this._tileCoordsToKey(Hn)];_n?_n.current=!0:re.push(Hn)}}if(re.sort(function(Nt,Ot){return Nt.distanceTo($)-Ot.distanceTo($)}),re.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wr=document.createDocumentFragment();for(ft=0;ft<re.length;ft++)this._addTile(re[ft],wr);this._level.el.appendChild(wr)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(o.x<v.min.x||o.x>v.max.x)||!h.wrapLat&&(o.y<v.min.y||o.y>v.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(o);return W(this.options.bounds).overlaps(E)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,v=this.getTileSize(),E=o.scaleBy(v),O=E.add(v),$=h.unproject(E,o.z),re=h.unproject(O,o.z);return[$,re]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),v=new K(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),v=new ne(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(o){var h=this._tiles[o];h&&(zt(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ot(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=y,o.onmousemove=y,Ve.ielt9&&this.options.opacity<1&&en(o,this.options.opacity)},_addTile:function(o,h){var v=this._getTilePos(o),E=this._tileCoordsToKey(o),O=this.createTile(this._wrapCoords(o),u(this._tileReady,this,o));this._initTile(O),this.createTile.length<2&&V(u(this._tileReady,this,o,null,O)),qt(O,v),this._tiles[E]={el:O,coords:o,current:!0},h.appendChild(O),this.fire("tileloadstart",{tile:O,coords:o})},_tileReady:function(o,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:o});var E=this._tileCoordsToKey(o);v=this._tiles[E],v&&(v.loaded=+new Date,this._map._fadeAnimated?(en(v.el,0),Z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(ot(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new ne(this._wrapX?g(o.x,this._wrapX):o.x,this._wrapY?g(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new H(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function oh(o){return new Aa(o)}var bs=Aa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=k(this,h),h.detectRetina&&Ve.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var v=document.createElement("img");return it(v,"load",u(this._tileOnLoad,this,h,v)),it(v,"error",u(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(o),v},getTileUrl:function(o){var h={r:Ve.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=v),h["-y"]=v}return B(this._url,a(h,this.options))},_tileOnLoad:function(o,h){Ve.ielt9?setTimeout(u(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,v){var E=this.options.errorTileUrl;E&&h.getAttribute("src")!==E&&(h.src=E),o(v,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,E=this.options.zoomOffset;return v&&(o=h-o),o+E},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=y,h.onerror=y,!h.complete)){h.src=R;var v=this._tiles[o].coords;zt(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",R),Aa.prototype._removeTile.call(this,o)},_tileReady:function(o,h,v){if(!(!this._map||v&&v.getAttribute("src")===R))return Aa.prototype._tileReady.call(this,o,h,v)}});function Lr(o,h){return new bs(o,h)}var Do=bs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var v=a({},this.defaultWmsParams);for(var E in h)E in this.options||(v[E]=h[E]);h=k(this,h);var O=h.detectRetina&&Ve.retina?2:1,$=this.getTileSize();v.width=$.x*O,v.height=$.y*O,this.wmsParams=v},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,bs.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),v=this._crs,E=P(v.project(h[0]),v.project(h[1])),O=E.min,$=E.max,re=(this._wmsVersion>=1.3&&this._crs===nu?[O.y,O.x,$.y,$.x]:[O.x,O.y,$.x,$.y]).join(","),he=bs.prototype.getTileUrl.call(this,o);return he+A(this.wmsParams,he,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+re},setParams:function(o,h){return a(this.wmsParams,o),h||this.redraw(),this}});function Br(o,h){return new Do(o,h)}bs.WMS=Do,Lr.wms=Br;var hr=Qr.extend({options:{padding:.1},initialize:function(o){k(this,o),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var v=this._map.getZoomScale(h,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,h),$=E.multiplyBy(-v).add(O).subtract(this._map._getNewPixelOrigin(o,h));Ve.any3d?Fi(this._container,$,v):qt(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new H(v,v.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ll=hr.extend({options:{tolerance:0},getEvents:function(){var o=hr.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");it(o,"mousemove",this._onMouseMove,this),it(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,zt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hr.prototype._update.call(this);var o=this._bounds,h=this._container,v=o.getSize(),E=Ve.retina?2:1;qt(h,o.min),h.width=E*v.x,h.height=E*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){hr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[m(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,v=h.next,E=h.prev;v?v.prev=E:this._drawLast=E,E?E.next=v:this._drawFirst=v,delete o._order,delete this._layers[m(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),v=[],E,O;for(O=0;O<h.length;O++){if(E=Number(h[O]),isNaN(E))return;v.push(E)}o.options._dashArray=v}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)o=E.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var v,E,O,$,re=o._parts,he=re.length,_e=this._ctx;if(he){for(_e.beginPath(),v=0;v<he;v++){for(E=0,O=re[v].length;E<O;E++)$=re[v][E],_e[E?"lineTo":"moveTo"]($.x,$.y);h&&_e.closePath()}this._fillStroke(_e,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,v=this._ctx,E=Math.max(Math.round(o._radius),1),O=(Math.max(Math.round(o._radiusY),1)||E)/E;O!==1&&(v.save(),v.scale(1,O)),v.beginPath(),v.arc(h.x,h.y/O,E,0,Math.PI*2,!1),O!==1&&v.restore(),this._fillStroke(v,o)}},_fillStroke:function(o,h){var v=h.options;v.fill&&(o.globalAlpha=v.fillOpacity,o.fillStyle=v.fillColor||v.color,o.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=v.opacity,o.lineWidth=v.weight,o.strokeStyle=v.color,o.lineCap=v.lineCap,o.lineJoin=v.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),v,E,O=this._drawFirst;O;O=O.next)v=O.layer,v.options.interactive&&v._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(v))&&(E=v);this._fireEvent(E?[E]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(an(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var v,E,O=this._drawFirst;O;O=O.next)v=O.layer,v.options.interactive&&v._containsPoint(h)&&(E=v);E!==this._hoveredLayer&&(this._handleMouseOut(o),E&&(ot(this._container,"leaflet-interactive"),this._fireEvent([E],o,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,v){this._map._fireDOMEvent(h,v||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var v=h.next,E=h.prev;if(v)v.prev=E;else return;E?E.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var v=h.next,E=h.prev;if(E)E.next=v;else return;v?v.prev=E:E&&(this._drawLast=E),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function Co(o){return Ve.canvas?new Ll(o):null}var ys=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ru={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hr.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=ys("shape");ot(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=ys("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;zt(h),o.removeInteractiveTarget(h),delete this._layers[m(o)]},_updateStyle:function(o){var h=o._stroke,v=o._fill,E=o.options,O=o._container;O.stroked=!!E.stroke,O.filled=!!E.fill,E.stroke?(h||(h=o._stroke=ys("stroke")),O.appendChild(h),h.weight=E.weight+"px",h.color=E.color,h.opacity=E.opacity,E.dashArray?h.dashStyle=N(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=E.lineCap.replace("butt","flat"),h.joinstyle=E.lineJoin):h&&(O.removeChild(h),o._stroke=null),E.fill?(v||(v=o._fill=ys("fill")),O.appendChild(v),v.color=E.fillColor||E.color,v.opacity=E.fillOpacity):v&&(O.removeChild(v),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),v=Math.round(o._radius),E=Math.round(o._radiusY||v);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+E+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){Un(o._container)},_bringToBack:function(o){Ds(o._container)}},ki=Ve.vml?ys:$e,ja=hr.extend({_initContainer:function(){this._container=ki("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ki("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hr.prototype._update.call(this);var o=this._bounds,h=o.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),qt(v,o.min),v.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=ki("path");o.options.className&&ot(h,o.options.className),o.options.interactive&&ot(h,"leaflet-interactive"),this._updateStyle(o),this._layers[m(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){zt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[m(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,v=o.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Me(o._parts,h))},_updateCircle:function(o){var h=o._point,v=Math.max(Math.round(o._radius),1),E=Math.max(Math.round(o._radiusY),1)||v,O="a"+v+","+E+" 0 1,0 ",$=o._empty()?"M0 0":"M"+(h.x-v)+","+h.y+O+v*2+",0 "+O+-v*2+",0 ";this._setPath(o,$)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){Un(o._path)},_bringToBack:function(o){Ds(o._path)}});Ve.vml&&ja.include(ru);function Mo(o){return Ve.svg||Ve.vml?new ja(o):null}Et.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&Co(o)||Mo(o)}});var Ls=Sa.extend({initialize:function(o,h){Sa.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=W(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Rp(o,h){return new Ls(o,h)}ja.create=ki,ja.pointsToPath=Me,Vi.geometryToLayer=Yn,Vi.coordsToLatLng=Ol,Vi.coordsToLatLngs=ko,Vi.latLngToCoords=Dl,Vi.latLngsToCoords=Ao,Vi.getFeature=ms,Vi.asFeature=Cl,Et.mergeOptions({boxZoom:!0});var fr=wi.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ma(),xl(),this._startPoint=this._map.mouseEventToContainerPoint(o),it(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new H(this._point,this._startPoint),v=h.getSize();qt(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(zt(this._box),an(this._container,"leaflet-crosshair")),_i(),po(),Bt(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var h=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",fr),Et.mergeOptions({doubleClickZoom:!0});var Bl=wi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,v=h.getZoom(),E=h.options.zoomDelta,O=o.originalEvent.shiftKey?v-E:v+E;h.options.doubleClickZoom==="center"?h.setZoom(O):h.setZoomAround(o.containerPoint,O)}});Et.addInitHook("addHandler","doubleClickZoom",Bl),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ai=wi.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new fs(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=W(this._map.options.maxBounds);this._offsetLimit=P(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),v=this._initialWorldOffset,E=this._draggable._newPos.x,O=(E-h+v)%o+h-v,$=(E+h+v)%o-h-v,re=Math.abs(O+v)<Math.abs($+v)?O:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=re},_onDragEnd:function(o){var h=this._map,v=h.options,E=!v.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),E)h.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,re=v.easeLinearity,he=O.multiplyBy(re/$),_e=he.distanceTo([0,0]),Oe=Math.min(v.inertiaMaxSpeed,_e),Ge=he.multiplyBy(Oe/_e),Xe=Oe/(v.inertiaDeceleration*re),ft=Ge.multiplyBy(-Xe/2).round();!ft.x&&!ft.y?h.fire("moveend"):(ft=h._limitOffset(ft,h.options.maxBounds),V(function(){h.panBy(ft,{duration:Xe,easeLinearity:re,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",Ai),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var iu=wi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),it(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,v=o.scrollTop||h.scrollTop,E=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(E,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},v=this.keyCodes,E,O;for(E=0,O=v.left.length;E<O;E++)h[v.left[E]]=[-1*o,0];for(E=0,O=v.right.length;E<O;E++)h[v.right[E]]=[o,0];for(E=0,O=v.down.length;E<O;E++)h[v.down[E]]=[0,o];for(E=0,O=v.up.length;E<O;E++)h[v.up[E]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},v=this.keyCodes,E,O;for(E=0,O=v.zoomIn.length;E<O;E++)h[v.zoomIn[E]]=o;for(E=0,O=v.zoomOut.length;E<O;E++)h[v.zoomOut[E]]=-o},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,v=this._map,E;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(E=this._panKeys[h],o.shiftKey&&(E=Q(E).multiplyBy(3)),v.options.maxBounds&&(E=v._limitOffset(Q(E),v.options.maxBounds)),v.options.worldCopyJump){var O=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(E)));v.panTo(O)}else v.panBy(E)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;hs(o)}}});Et.addInitHook("addHandler","keyboard",iu),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ro=wi.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=er(o),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var E=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),hs(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),v=this._map.options.zoomSnap||0;o._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,$=v?Math.ceil(O/v)*v:O,re=o._limitZoom(h+(this._delta>0?$:-$))-h;this._delta=0,this._startTime=null,re&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+re):o.setZoomAround(this._lastMousePos,h+re))}});Et.addInitHook("addHandler","scrollWheelZoom",Ro);var Bs=600;Et.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Pl=wi.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new ne(h.clientX,h.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",vn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Bs),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Bt(document,"touchend",vn),Bt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new ne(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var v=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});Et.addInitHook("addHandler","tapHold",Pl),Et.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var su=wi.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(o.touches[0]),E=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(E)._divideBy(2))),this._startDist=v.distanceTo(E),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),vn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(o.touches[0]),E=h.mouseEventToContainerPoint(o.touches[1]),O=v.distanceTo(E)/this._startDist;if(this._zoom=h.getScaleZoom(O,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&O<1||this._zoom>h.getMaxZoom()&&O>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var $=v._add(E)._divideBy(2)._subtract(this._centerPoint);if(O===1&&$.x===0&&$.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var re=u(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(re,this,!0),vn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",su),Et.BoxZoom=fr,Et.DoubleClickZoom=Bl,Et.Drag=Ai,Et.Keyboard=iu,Et.ScrollWheelZoom=Ro,Et.TapHold=Pl,Et.TouchZoom=su,n.Bounds=H,n.Browser=Ve,n.CRS=oe,n.Canvas=Ll,n.Circle=Nl,n.CircleMarker=wa,n.Class=te,n.Control=xr,n.DivIcon=ah,n.DivOverlay=Zn,n.DomEvent=El,n.DomUtil=ba,n.Draggable=fs,n.Evented=ae,n.FeatureGroup=Si,n.GeoJSON=Vi,n.GridLayer=Aa,n.Handler=wi,n.Icon=Ei,n.ImageOverlay=Ta,n.LatLng=z,n.LatLngBounds=K,n.Layer=Qr,n.LayerGroup=xa,n.LineUtil=jp,n.Map=Et,n.Marker=To,n.Mixin=Ep,n.Path=Ti,n.Point=ne,n.PolyUtil=eu,n.Polygon=Sa,n.Polyline=Zi,n.Popup=No,n.PosAnimation=ya,n.Projection=Xd,n.Rectangle=Ls,n.Renderer=hr,n.SVG=ja,n.SVGOverlay=Rl,n.TileLayer=bs,n.Tooltip=Oo,n.Transformation=Ae,n.Util=ee,n.VideoOverlay=gs,n.bind=u,n.bounds=P,n.canvas=Co,n.circle=nh,n.circleMarker=th,n.control=Yi,n.divIcon=Mp,n.extend=a,n.featureGroup=Qd,n.geoJSON=Ml,n.geoJson=jo,n.gridLayer=oh,n.icon=wo,n.imageOverlay=rh,n.latLng=F,n.latLngBounds=W,n.layerGroup=Np,n.map=Vc,n.marker=eh,n.point=Q,n.polygon=Dp,n.polyline=Op,n.popup=sh,n.rectangle=Rp,n.setOptions=k,n.stamp=m,n.svg=Mo,n.svgOverlay=ih,n.tileLayer=Lr,n.tooltip=Cp,n.transformation=je,n.version=i,n.videoOverlay=ka;var au=window.L;n.noConflict=function(){return window.L=au,this},window.L=n}))})(nd,nd.exports)),nd.exports}var QR=JR();const jg=pl(QR),bf=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Vo(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function eL(e){const{buttonId:t,buttonInputId:n,modalId:i,closeMapId:a,mapCloseBtnId:l,searchBoxId:u,suggestionsId:d,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},g=Vo(n),y=Vo(t),x=Vo(i),w=Vo(l),T=Vo(u),k=Vo(d),A=a?Vo(a):null;let D=null,B=null,N=null;const M=Z=>Z.code==="Space"||Z.key===" "||Z.key==="Spacebar"||Z.key==="Space",R=Z=>{M(Z)&&document.activeElement!==T&&(Z.preventDefault(),Z.stopPropagation(),T.focus())},I=()=>{x.style.display="flex",D?setTimeout(()=>D?.invalidateSize(),200):setTimeout(()=>{D=jg.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),jg.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(D),D.invalidateSize()},0),x.addEventListener("keydown",R,!0),x.addEventListener("keyup",R,!0),T.focus()},G=()=>{x.style.display="none",T.value="",k.innerHTML="",N&&(window.clearTimeout(N),N=null),x.removeEventListener("keydown",R,!0),x.removeEventListener("keyup",R,!0)},Y=Z=>{const ee=Z.dataset.name??"",te=Number(Z.dataset.lat??""),we=Number(Z.dataset.lon??"");!Number.isFinite(te)||!Number.isFinite(we)||!D||(B?B.setLatLng([te,we]):B=jg.marker([te,we]).addTo(D),D.flyTo([te,we],14,{duration:.5}),g.value=ee,g.dataset.lat=String(te),g.dataset.lon=String(we),e.onSelected?.({name:ee,lat:te,lon:we}),k.innerHTML="",G())},q=()=>{N&&window.clearTimeout(N);const Z=T.value.trim();if(!Z){k.innerHTML="";return}N=window.setTimeout(async()=>{try{const ee="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(Z),te=await fetch(ee,{headers:{Accept:"application/json"}});if(!te.ok)throw new Error(`HTTP ${te.status}`);const we=await te.json();if(!Array.isArray(we)||we.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const X=we.slice(0,12).map((ae,ne)=>{const me=ae.display_name.split(",").slice(0,3).map(P=>P.trim()).join("  "),Q="padding:8px;cursor:pointer;outline:none;",H=ne===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${bf(me)}"
                    data-lat="${bf(ae.lat)}"
                    data-lon="${bf(ae.lon)}"
                    data-active="${ne===0?"1":"0"}"
                    style="${Q}${H}"
                  >${bf(me)}</li>`}).join("");k.innerHTML=X}catch(ee){console.error(ee),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},J=Z=>{const ee=Z.target;ee.tagName==="LI"&&Y(ee)},V=Z=>{if(Z.key==="Enter"){const ee=k.querySelector('li[data-active="1"]')??k.querySelector("li");ee&&Y(ee)}};return y.addEventListener("click",I),w.addEventListener("click",G),A&&A.addEventListener("click",G),T.addEventListener("input",q),T.addEventListener("keydown",V),k.addEventListener("click",J),()=>{y.removeEventListener("click",I),w.removeEventListener("click",G),A&&A.removeEventListener("click",G),T.removeEventListener("input",q),T.removeEventListener("keydown",V),k.removeEventListener("click",J),x.removeEventListener("keydown",R,!0),x.removeEventListener("keyup",R,!0),N&&(window.clearTimeout(N),N=null),D&&(D.remove(),D=null)}}function uc(){return document.getElementById("suggestions")}function am(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,i)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${i}`)}),t}function Ng(e,t){const n=am(e);if(n.length===0)return;const i=n.length;let a=t;a<0&&(a=i-1),a>=i&&(a=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[a];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function yk({onSelect:e,placeholderText:t="",buttonStyle:n,value:i}){const[a,l]=j.useState(t),[u,d]=j.useState(!1),[m,p]=j.useState(i??""),g=j.useRef(null),y=j.useRef(null),x=j.useRef(null),w=j.useRef(null);return j.useEffect(()=>{i!==void 0&&p(i)},[i]),j.useEffect(()=>{if(!u)return;const T=eL({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:q=>{l(""),p(q.name),g.current&&(g.current.value=q.name),y.current&&(y.current.value=String(q.lat)),x.current&&(x.current.value=String(q.lon)),e?.(q),d(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const A=document.getElementById("mapModal"),D=document.getElementById("searchBox"),B=uc();setTimeout(()=>D?.focus(),0);const N='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',M=q=>{if(q.key==="Escape"){q.preventDefault(),d(!1);return}if(q.key!=="Tab")return;const J=uc();if(J&&J.contains(document.activeElement))return;const V=Array.from(A.querySelectorAll(N)).filter(we=>!we.hasAttribute("disabled")&&we.tabIndex!==-1);if(V.length===0)return;const Z=V[0],ee=V[V.length-1],te=document.activeElement;q.shiftKey?(te===Z||!A.contains(te))&&(q.preventDefault(),ee.focus()):(te===ee||!A.contains(te))&&(q.preventDefault(),Z.focus())};A.addEventListener("keydown",M);const R=q=>{if(q.key!=="ArrowDown")return;const J=uc();!J||am(J).length===0||q.preventDefault()};D?.addEventListener("keydown",R);const I=q=>{if(q.target.value.trim()===""){const V=uc();V&&(V.innerHTML="")}};D?.addEventListener("input",I);const G=q=>{const J=uc();if(!J)return;const V=am(J);if(V.length===0)return;const Z=document.activeElement,ee=Z?V.indexOf(Z):-1;if(ee===-1)return;const te=we=>{q.preventDefault(),Ng(J,ee+we)};switch(q.key){case"Tab":q.preventDefault(),te(q.shiftKey?-1:1);break;case"ArrowDown":q.preventDefault(),te(1);break;case"ArrowUp":q.preventDefault(),te(-1);break;case"Home":q.preventDefault(),Ng(J,0);break;case"End":q.preventDefault(),Ng(J,V.length-1);break;case"Enter":case" ":q.preventDefault(),Z.click();break;case"Backspace":q.preventDefault(),J.innerHTML="",D?.focus();break}q.stopPropagation()};let Y=null;return B&&(B.addEventListener("keydown",G),Y=new MutationObserver(()=>{const q=uc();!q||am(q).length}),Y.observe(B,{childList:!0,subtree:!1})),()=>{A.removeEventListener("keydown",M),D?.removeEventListener("keydown",R),D?.removeEventListener("input",I),B&&B.removeEventListener("keydown",G),Y?.disconnect(),T?.()}},[u,e]),j.useEffect(()=>{u||setTimeout(()=>w.current?.focus(),0)},[u]),b.jsxs("li",{className:"flex items-center gap-2",children:[b.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),b.jsx("button",{ref:w,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>d(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:a}),b.jsx("input",{ref:g,type:"hidden",name:"birthPlace_name",defaultValue:""}),b.jsx("input",{ref:y,type:"hidden",name:"birthPlace_lat",defaultValue:""}),b.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&b.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:b.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[b.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[b.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),b.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>d(!1),children:""})]}),b.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[b.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),b.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),b.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:b.jsx("div",{id:"map",className:"h-full w-full"})}),b.jsxs("div",{className:"gap-2 p-3",children:[b.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[b.jsxs("p",{className:"flex mb-1",children:[b.jsx("span",{className:"mr-1",children:"*"}),b.jsx("span",{children:" ,  ."})]}),b.jsxs("p",{className:"flex",children:[b.jsx("span",{className:"mr-1",children:"*"}),b.jsx("span",{children:"       ,   ."})]})]}),b.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}function Tr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tL=typeof Symbol=="function"&&Symbol.observable||"@@observable",$1=tL,I1=()=>Math.random().toString(36).substring(7).split("").join("."),nL={INIT:`@@redux/INIT${I1()}`,REPLACE:`@@redux/REPLACE${I1()}`},z1=nL;function rL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vk(e,t,n){if(typeof e!="function")throw new Error(Tr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tr(1));return n(vk)(e,t)}let i=e,a=t,l=new Map,u=l,d=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((A,D)=>{u.set(D,A)}))}function g(){if(m)throw new Error(Tr(3));return a}function y(A){if(typeof A!="function")throw new Error(Tr(4));if(m)throw new Error(Tr(5));let D=!0;p();const B=d++;return u.set(B,A),function(){if(D){if(m)throw new Error(Tr(6));D=!1,p(),u.delete(B),l=null}}}function x(A){if(!rL(A))throw new Error(Tr(7));if(typeof A.type>"u")throw new Error(Tr(8));if(typeof A.type!="string")throw new Error(Tr(17));if(m)throw new Error(Tr(9));try{m=!0,a=i(a,A)}finally{m=!1}return(l=u).forEach(B=>{B()}),A}function w(A){if(typeof A!="function")throw new Error(Tr(10));i=A,x({type:z1.REPLACE})}function T(){const A=y;return{subscribe(D){if(typeof D!="object"||D===null)throw new Error(Tr(11));function B(){const M=D;M.next&&M.next(g())}return B(),{unsubscribe:A(B)}},[$1](){return this}}}return x({type:z1.INIT}),{dispatch:x,subscribe:y,getState:g,replaceReducer:w,[$1]:T}}function U1(e,t){return function(...n){return t(e.apply(this,n))}}function H1(e,t){if(typeof e=="function")return U1(e,t);if(typeof e!="object"||e===null)throw new Error(Tr(16));const n={};for(const i in e){const a=e[i];typeof a=="function"&&(n[i]=U1(a,t))}return n}function _k(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function iL(...e){return t=>(n,i)=>{const a=t(n,i);let l=()=>{throw new Error(Tr(15))};const u={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},d=e.map(m=>m(u));return l=_k(...d)(a.dispatch),{...a,dispatch:l}}}var Og={exports:{}},Dg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function sL(){if(G1)return Dg;G1=1;var e=Um();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Dg.useSyncExternalStoreWithSelector=function(m,p,g,y,x){var w=a(null);if(w.current===null){var T={hasValue:!1,value:null};w.current=T}else T=w.current;w=u(function(){function A(R){if(!D){if(D=!0,B=R,R=y(R),x!==void 0&&T.hasValue){var I=T.value;if(x(I,R))return N=I}return N=R}if(I=N,n(B,R))return I;var G=y(R);return x!==void 0&&x(I,G)?(B=R,I):(B=R,N=G)}var D=!1,B,N,M=g===void 0?null:g;return[function(){return A(p())},M===null?void 0:function(){return A(M())}]},[p,g,y,x]);var k=i(m,w[0],w[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),d(k),k},Dg}var F1;function aL(){return F1||(F1=1,Og.exports=sL()),Og.exports}aL();var oL=j.version.startsWith("19"),lL=Symbol.for(oL?"react.transitional.element":"react.element"),cL=Symbol.for("react.portal"),uL=Symbol.for("react.fragment"),dL=Symbol.for("react.strict_mode"),hL=Symbol.for("react.profiler"),fL=Symbol.for("react.consumer"),mL=Symbol.for("react.context"),xk=Symbol.for("react.forward_ref"),pL=Symbol.for("react.suspense"),gL=Symbol.for("react.suspense_list"),zy=Symbol.for("react.memo"),bL=Symbol.for("react.lazy"),yL=xk,vL=zy;function _L(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case lL:switch(e=e.type,e){case uL:case hL:case dL:case pL:case gL:return e;default:switch(e=e&&e.$$typeof,e){case mL:case xk:case bL:case zy:return e;case fL:return e;default:return t}}case cL:return t}}}function xL(e){return _L(e)===zy}function wL(e,t,n,i,{areStatesEqual:a,areOwnPropsEqual:l,areStatePropsEqual:u}){let d=!1,m,p,g,y,x;function w(B,N){return m=B,p=N,g=e(m,p),y=t(i,p),x=n(g,y,p),d=!0,x}function T(){return g=e(m,p),t.dependsOnOwnProps&&(y=t(i,p)),x=n(g,y,p),x}function k(){return e.dependsOnOwnProps&&(g=e(m,p)),t.dependsOnOwnProps&&(y=t(i,p)),x=n(g,y,p),x}function A(){const B=e(m,p),N=!u(B,g);return g=B,N&&(x=n(g,y,p)),x}function D(B,N){const M=!l(N,p),R=!a(B,m,N,p);return m=B,p=N,M&&R?T():M?k():R?A():x}return function(N,M){return d?D(N,M):w(N,M)}}function SL(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:i,...a}){const l=t(e,a),u=n(e,a),d=i(e,a);return wL(l,u,d,e,a)}function EL(e,t){const n={};for(const i in e){const a=e[i];typeof a=="function"&&(n[i]=(...l)=>t(a(...l)))}return n}function Qb(e){return function(n){const i=e(n);function a(){return i}return a.dependsOnOwnProps=!1,a}}function q1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function wk(e,t){return function(i,{displayName:a}){const l=function(d,m){return l.dependsOnOwnProps?l.mapToProps(d,m):l.mapToProps(d,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(d,m){l.mapToProps=e,l.dependsOnOwnProps=q1(e);let p=l(d,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=q1(p),p=l(d,m)),p},l}}function Uy(e,t){return(n,i)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${i.wrappedComponentName}.`)}}function TL(e){return e&&typeof e=="object"?Qb(t=>EL(e,t)):e?typeof e=="function"?wk(e):Uy(e,"mapDispatchToProps"):Qb(t=>({dispatch:t}))}function kL(e){return e?typeof e=="function"?wk(e):Uy(e,"mapStateToProps"):Qb(()=>({}))}function AL(e,t,n){return{...n,...e,...t}}function jL(e){return function(n,{displayName:i,areMergedPropsEqual:a}){let l=!1,u;return function(m,p,g){const y=e(m,p,g);return l?a(y,u)||(u=y):(l=!0,u=y),u}}}function NL(e){return e?typeof e=="function"?jL(e):Uy(e,"mergeProps"):()=>AL}function OL(e){e()}function DL(){let e=null,t=null;return{clear(){e=null,t=null},notify(){OL(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Y1={notify(){},get:()=>[]};function Sk(e,t){let n,i=Y1,a=0,l=!1;function u(k){g();const A=i.subscribe(k);let D=!1;return()=>{D||(D=!0,A(),y())}}function d(){i.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function g(){a++,n||(n=t?t.addNestedSub(m):e.subscribe(m),i=DL())}function y(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=Y1)}function x(){l||(l=!0,g())}function w(){l&&(l=!1,y())}const T={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:w,getListeners:()=>i};return T}var CL=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ML=CL(),RL=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LL=RL(),BL=()=>ML||LL?j.useLayoutEffect:j.useEffect,Sm=BL();function Z1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Cg(e,t){if(Z1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Z1(e[n[a]],t[n[a]]))return!1;return!0}var PL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$L={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},IL={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ek={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zL={[yL]:IL,[vL]:Ek};function V1(e){return xL(e)?Ek:zL[e.$$typeof]||PL}var UL=Object.defineProperty,HL=Object.getOwnPropertyNames,K1=Object.getOwnPropertySymbols,GL=Object.getOwnPropertyDescriptor,FL=Object.getPrototypeOf,W1=Object.prototype;function ey(e,t){if(typeof t!="string"){if(W1){const l=FL(t);l&&l!==W1&&ey(e,l)}let n=HL(t);K1&&(n=n.concat(K1(t)));const i=V1(e),a=V1(t);for(let l=0;l<n.length;++l){const u=n[l];if(!$L[u]&&!(a&&a[u])&&!(i&&i[u])){const d=GL(t,u);try{UL(e,u,d)}catch{}}}}return e}var qL=Symbol.for("react-redux-context"),YL=typeof globalThis<"u"?globalThis:{};function ZL(){if(!j.createContext)return{};const e=YL[qL]??=new Map;let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var Tk=ZL(),VL=[null,null];function KL(e,t,n){Sm(()=>e(...t),n)}function WL(e,t,n,i,a,l){e.current=i,n.current=!1,a.current&&(a.current=null,l())}function XL(e,t,n,i,a,l,u,d,m,p,g){if(!e)return()=>{};let y=!1,x=null;const w=()=>{if(y||!d.current)return;const k=t.getState();let A,D;try{A=i(k,a.current)}catch(B){D=B,x=B}D||(x=null),A===l.current?u.current||p():(l.current=A,m.current=A,u.current=!0,g())};return n.onStateChange=w,n.trySubscribe(),w(),()=>{if(y=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function JL(e,t){return e===t}function QL(e,t,n,{pure:i,areStatesEqual:a=JL,areOwnPropsEqual:l=Cg,areStatePropsEqual:u=Cg,areMergedPropsEqual:d=Cg,forwardRef:m=!1,context:p=Tk}={}){const g=p,y=kL(e),x=TL(t),w=NL(n),T=!!e;return A=>{const D=A.displayName||A.name||"Component",B=`Connect(${D})`,N={shouldHandleStateChanges:T,displayName:B,wrappedComponentName:D,WrappedComponent:A,initMapStateToProps:y,initMapDispatchToProps:x,initMergeProps:w,areStatesEqual:a,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:d};function M(G){const[Y,q,J]=j.useMemo(()=>{const{reactReduxForwardedRef:je,...Ce}=G;return[G.context,je,Ce]},[G]),V=j.useMemo(()=>{let je=g;return Y?.Consumer,je},[Y,g]),Z=j.useContext(V),ee=!!G.store&&!!G.store.getState&&!!G.store.dispatch,te=!!Z&&!!Z.store,we=ee?G.store:Z.store,X=te?Z.getServerState:we.getState,ae=j.useMemo(()=>SL(we.dispatch,N),[we]),[ne,me]=j.useMemo(()=>{if(!T)return VL;const je=Sk(we,ee?void 0:Z.subscription),Ce=je.notifyNestedSubs.bind(je);return[je,Ce]},[we,ee,Z]),Q=j.useMemo(()=>ee?Z:{...Z,subscription:ne},[ee,Z,ne]),H=j.useRef(void 0),P=j.useRef(J),K=j.useRef(void 0),W=j.useRef(!1),z=j.useRef(!1),F=j.useRef(void 0);Sm(()=>(z.current=!0,()=>{z.current=!1}),[]);const oe=j.useMemo(()=>()=>K.current&&J===P.current?K.current:ae(we.getState(),J),[we,J]),ce=j.useMemo(()=>Ce=>ne?XL(T,we,ne,ae,P,H,W,z,K,me,Ce):()=>{},[ne]);KL(WL,[P,H,W,J,K,me]);let le;try{le=j.useSyncExternalStore(ce,oe,X?()=>ae(X(),J):oe)}catch(je){throw F.current&&(je.message+=`
The error may be correlated with this previous error:
${F.current.stack}

`),je}Sm(()=>{F.current=void 0,K.current=void 0,H.current=le});const ve=j.useMemo(()=>j.createElement(A,{...le,ref:q}),[q,A,le]);return j.useMemo(()=>T?j.createElement(V.Provider,{value:Q},ve):ve,[V,ve,Q])}const I=j.memo(M);if(I.WrappedComponent=A,I.displayName=M.displayName=B,m){const Y=j.forwardRef(function(J,V){return j.createElement(I,{...J,reactReduxForwardedRef:V})});return Y.displayName=B,Y.WrappedComponent=A,ey(Y,A)}return ey(I,A)}}var kk=QL;function e5(e){const{children:t,context:n,serverState:i,store:a}=e,l=j.useMemo(()=>{const m=Sk(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),u=j.useMemo(()=>a.getState(),[a]);Sm(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const d=n||Tk;return j.createElement(d.Provider,{value:l},t)}var t5=e5,n5="Invariant failed";function r5(e,t){throw new Error(n5)}var as=function(t){var n=t.top,i=t.right,a=t.bottom,l=t.left,u=i-l,d=a-n,m={top:n,right:i,bottom:a,left:l,width:u,height:d,x:l,y:n,center:{x:(i+l)/2,y:(a+n)/2}};return m},Hy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},X1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},i5=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Mg={top:0,right:0,bottom:0,left:0},Gy=function(t){var n=t.borderBox,i=t.margin,a=i===void 0?Mg:i,l=t.border,u=l===void 0?Mg:l,d=t.padding,m=d===void 0?Mg:d,p=as(Hy(n,a)),g=as(X1(n,u)),y=as(X1(g,m));return{marginBox:p,borderBox:as(n),paddingBox:g,contentBox:y,margin:a,border:u,padding:m}},Di=function(t){var n=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var a=Number(n);return isNaN(a)&&r5(),a},s5=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Em=function(t,n){var i=t.borderBox,a=t.border,l=t.margin,u=t.padding,d=i5(i,n);return Gy({borderBox:d,border:a,margin:l,padding:u})},Tm=function(t,n){return n===void 0&&(n=s5()),Em(t,n)},Ak=function(t,n){var i={top:Di(n.marginTop),right:Di(n.marginRight),bottom:Di(n.marginBottom),left:Di(n.marginLeft)},a={top:Di(n.paddingTop),right:Di(n.paddingRight),bottom:Di(n.paddingBottom),left:Di(n.paddingLeft)},l={top:Di(n.borderTopWidth),right:Di(n.borderRightWidth),bottom:Di(n.borderBottomWidth),left:Di(n.borderLeftWidth)};return Gy({borderBox:t,margin:i,padding:a,border:l})},jk=function(t){var n=t.getBoundingClientRect(),i=window.getComputedStyle(t);return Ak(n,i)},fd=function(t){var n=[],i=null,a=function(){for(var u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];n=d,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,n)}))};return a.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},a};function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},km.apply(null,arguments)}function Nk(e,t){}Nk.bind(null,"warn");Nk.bind(null,"error");function Qa(){}function a5(e,t){return{...e,...t}}function Mi(e,t,n){const i=t.map(a=>{const l=a5(n,a.options);return e.addEventListener(a.eventName,a.fn,l),function(){e.removeEventListener(a.eventName,a.fn,l)}});return function(){i.forEach(l=>{l()})}}const o5="Invariant failed";class Am extends Error{}Am.prototype.toString=function(){return this.message};function He(e,t){throw new Am(o5)}class l5 extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Qa,this.onWindowError=n=>{const i=this.getCallbacks();i.isDragging()&&i.tryAbort(),n.error instanceof Am&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Mi(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Am){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const c5=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,jm=e=>e+1,u5=e=>`
  You have lifted an item in position ${jm(e.source.index)}
`,Ok=(e,t)=>{const n=e.droppableId===t.droppableId,i=jm(e.index),a=jm(t.index);return n?`
      You have moved the item from position ${i}
      to position ${a}
    `:`
    You have moved the item from position ${i}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},Dk=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,d5=e=>{const t=e.destination;if(t)return Ok(e.source,t);const n=e.combine;return n?Dk(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},J1=e=>`
  The item has returned to its starting position
  of ${jm(e.index)}
`,h5=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${J1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Ok(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Dk(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${J1(e.source)}
  `},om={dragHandleUsageInstructions:c5,onDragStart:u5,onDragUpdate:d5,onDragEnd:h5};function f5(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function Ck(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!f5(e[n],t[n]))return!1;return!0}function At(e,t){const n=j.useState(()=>({inputs:t,result:e()}))[0],i=j.useRef(!0),a=j.useRef(n),u=i.current||!!(t&&a.current.inputs&&Ck(t,a.current.inputs))?a.current:{inputs:t,result:e()};return j.useEffect(()=>{i.current=!1,a.current=u},[u]),u.result}function Je(e,t){return At(()=>e,t)}const Jn={x:0,y:0},lr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),di=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),eo=(e,t)=>e.x===t.x&&e.y===t.y,$c=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),hl=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},md=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Q1=(e,t)=>Math.min(...t.map(n=>md(e,n))),Mk=e=>t=>({x:e(t.x),y:e(t.y)});var m5=(e,t)=>{const n=as({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Rd=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),eS=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],p5={top:0,right:0,bottom:0,left:0},g5=(e,t)=>t?Rd(e,t.scroll.diff.displacement):e,b5=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,y5=(e,t)=>t&&t.shouldClipSubject?m5(t.pageMarginBox,e):as(e);var Nc=({page:e,withPlaceholder:t,axis:n,frame:i})=>{const a=g5(e.marginBox,i),l=b5(a,n,t),u=y5(l,i);return{page:e,withPlaceholder:t,active:u}},Fy=(e,t)=>{e.frame||He();const n=e.frame,i=di(t,n.scroll.initial),a=$c(i),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:i,displacement:a},max:n.scroll.max}},u=Nc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Wn(e,t=Ck){let n=null;function i(...a){if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;const l=e.apply(this,a);return n={lastResult:l,lastArgs:a,lastThis:this},l}return i.clear=function(){n=null},i}const Rk=Wn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Lk=Wn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),tp=Wn(e=>Object.values(e)),v5=Wn(e=>Object.values(e));var Ic=Wn((e,t)=>v5(t).filter(i=>e===i.descriptor.droppableId).sort((i,a)=>i.descriptor.index-a.descriptor.index));function qy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function np(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var rp=Wn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),_5=({isMovingForward:e,draggable:t,destination:n,insideDestination:i,previousImpact:a})=>{if(!n.isCombineEnabled||!qy(a))return null;function u(w){const T={type:"COMBINE",combine:{draggableId:w,droppableId:n.descriptor.id}};return{...a,at:T}}const d=a.displaced.all,m=d.length?d[0]:null;if(e)return m?u(m):null;const p=rp(t,i);if(!m){if(!p.length)return null;const w=p[p.length-1];return u(w.descriptor.id)}const g=p.findIndex(w=>w.descriptor.id===m);g===-1&&He();const y=g-1;if(y<0)return null;const x=p[y];return u(x.descriptor.id)},zc=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Bk={point:Jn,value:0},pd={invisible:{},visible:{},all:[]},x5={displaced:pd,displacedBy:Bk,at:null};var $i=(e,t)=>n=>e<=n&&n<=t,Pk=e=>{const t=$i(e.top,e.bottom),n=$i(e.left,e.right);return i=>{if(t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right))return!0;const l=t(i.top)||t(i.bottom),u=n(i.left)||n(i.right);if(l&&u)return!0;const m=i.top<e.top&&i.bottom>e.bottom,p=i.left<e.left&&i.right>e.right;return m&&p?!0:m&&u||p&&l}},w5=e=>{const t=$i(e.top,e.bottom),n=$i(e.left,e.right);return i=>t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right)};const Yy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},$k={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var S5=e=>t=>{const n=$i(t.top,t.bottom),i=$i(t.left,t.right);return a=>e===Yy?n(a.top)&&n(a.bottom):i(a.left)&&i(a.right)};const E5=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Jn;return Rd(e,n)},T5=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,k5=(e,t,n)=>n(t)(e),Zy=({target:e,destination:t,viewport:n,withDroppableDisplacement:i,isVisibleThroughFrameFn:a})=>{const l=i?E5(e,t):e;return T5(l,t,a)&&k5(l,n,a)},A5=e=>Zy({...e,isVisibleThroughFrameFn:Pk}),Ik=e=>Zy({...e,isVisibleThroughFrameFn:w5}),j5=e=>Zy({...e,isVisibleThroughFrameFn:S5(e.destination.axis)}),N5=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:i,visible:a}=t;if(i[e])return!1;const l=a[e];return l?l.shouldAnimate:!0};function O5(e,t){const n=e.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return as(Hy(n,i))}function gd({afterDragging:e,destination:t,displacedBy:n,viewport:i,forceShouldAnimate:a,last:l}){return e.reduce(function(d,m){const p=O5(m,n),g=m.descriptor.id;if(d.all.push(g),!A5({target:p,destination:t,viewport:i,withDroppableDisplacement:!0}))return d.invisible[m.descriptor.id]=!0,d;const x=N5(g,l,a),w={draggableId:g,shouldAnimate:x};return d.visible[g]=w,d},{all:[],visible:{},invisible:{}})}function D5(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function tS({insideDestination:e,inHomeList:t,displacedBy:n,destination:i}){const a=D5(e,{inHomeList:t});return{displaced:pd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function Nm({draggable:e,insideDestination:t,destination:n,viewport:i,displacedBy:a,last:l,index:u,forceShouldAnimate:d}){const m=zc(e,n);if(u==null)return tS({insideDestination:t,inHomeList:m,displacedBy:a,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return tS({insideDestination:t,inHomeList:m,displacedBy:a,destination:n});const g=rp(e,t),y=t.indexOf(p),x=g.slice(y);return{displaced:gd({afterDragging:x,destination:n,displacedBy:a,last:l,viewport:i.frame,forceShouldAnimate:d}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function to(e,t){return!!t.effected[e]}var C5=({isMovingForward:e,destination:t,draggables:n,combine:i,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const l=i.draggableId,d=n[l].descriptor.index;return to(l,a)?e?d:d-1:e?d+1:d},M5=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:i})=>{if(!n.length)return null;const a=i.index,l=e?a+1:a-1,u=n[0].descriptor.index,d=n[n.length-1].descriptor.index,m=t?d:d+1;return l<u||l>m?null:l},R5=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:i,destination:a,insideDestination:l,previousImpact:u,viewport:d,afterCritical:m})=>{const p=u.at;if(p||He(),p.type==="REORDER"){const y=M5({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return y==null?null:Nm({draggable:n,insideDestination:l,destination:a,viewport:d,last:u.displaced,displacedBy:u.displacedBy,index:y})}const g=C5({isMovingForward:e,destination:a,displaced:u.displaced,draggables:i,combine:p.combine,afterCritical:m});return g==null?null:Nm({draggable:n,insideDestination:l,destination:a,viewport:d,last:u.displaced,displacedBy:u.displacedBy,index:g})},L5=({displaced:e,afterCritical:t,combineWith:n,displacedBy:i})=>{const a=!!(e.visible[n]||e.invisible[n]);return to(n,t)?a?Jn:$c(i.point):a?i.point:Jn},B5=({afterCritical:e,impact:t,draggables:n})=>{const i=np(t);i||He();const a=i.draggableId,l=n[a].page.borderBox.center,u=L5({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return lr(l,u)};const zk=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,P5=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Vy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,nS=({axis:e,moveRelativeTo:t,isMoving:n})=>hl(e.line,t.marginBox[e.end]+zk(e,n),Vy(e,t.marginBox,n)),rS=({axis:e,moveRelativeTo:t,isMoving:n})=>hl(e.line,t.marginBox[e.start]-P5(e,n),Vy(e,t.marginBox,n)),$5=({axis:e,moveInto:t,isMoving:n})=>hl(e.line,t.contentBox[e.start]+zk(e,n),Vy(e,t.contentBox,n));var I5=({impact:e,draggable:t,draggables:n,droppable:i,afterCritical:a})=>{const l=Ic(i.descriptor.id,n),u=t.page,d=i.axis;if(!l.length)return $5({axis:d,moveInto:i.page,isMoving:u});const{displaced:m,displacedBy:p}=e,g=m.all[0];if(g){const x=n[g];if(to(g,a))return rS({axis:d,moveRelativeTo:x.page,isMoving:u});const w=Em(x.page,p.point);return rS({axis:d,moveRelativeTo:w,isMoving:u})}const y=l[l.length-1];if(y.descriptor.id===t.descriptor.id)return u.borderBox.center;if(to(y.descriptor.id,a)){const x=Em(y.page,$c(a.displacedBy.point));return nS({axis:d,moveRelativeTo:x,isMoving:u})}return nS({axis:d,moveRelativeTo:y.page,isMoving:u})},ty=(e,t)=>{const n=e.frame;return n?lr(t,n.scroll.diff.displacement):t};const z5=({impact:e,draggable:t,droppable:n,draggables:i,afterCritical:a})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?I5({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:a}):B5({impact:e,draggables:i,afterCritical:a})};var ip=e=>{const t=z5(e),n=e.droppable;return n?ty(n,t):t},Uk=(e,t)=>{const n=di(t,e.scroll.initial),i=$c(n);return{frame:as({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:i}}}};function iS(e,t){return e.map(n=>t[n])}function U5(e,t){for(let n=0;n<t.length;n++){const i=t[n].visible[e];if(i)return i}return null}var H5=({impact:e,viewport:t,destination:n,draggables:i,maxScrollChange:a})=>{const l=Uk(t,lr(t.scroll.current,a)),u=n.frame?Fy(n,lr(n.frame.scroll.current,a)):n,d=e.displaced,m=gd({afterDragging:iS(d.all,i),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:d,forceShouldAnimate:!1}),p=gd({afterDragging:iS(d.all,i),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:d,forceShouldAnimate:!1}),g={},y={},x=[d,m,p];return d.all.forEach(T=>{const k=U5(T,x);if(k){y[T]=k;return}g[T]=!0}),{...e,displaced:{all:d.all,invisible:g,visible:y}}},G5=(e,t)=>lr(e.scroll.diff.displacement,t),Ky=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const i=G5(n,e),a=di(i,t.page.borderBox.center);return lr(t.client.borderBox.center,a)},Hk=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:i,withDroppableDisplacement:a,onlyOnMainAxis:l=!1})=>{const u=di(n,e.page.borderBox.center),m={target:Rd(e.page.borderBox,u),destination:t,withDroppableDisplacement:a,viewport:i};return l?j5(m):Ik(m)},F5=({isMovingForward:e,draggable:t,destination:n,draggables:i,previousImpact:a,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:d,afterCritical:m})=>{if(!n.isEnabled)return null;const p=Ic(n.descriptor.id,i),g=zc(t,n),y=_5({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:a})||R5({isMovingForward:e,isInHomeList:g,draggable:t,draggables:i,destination:n,insideDestination:p,previousImpact:a,viewport:l,afterCritical:m});if(!y)return null;const x=ip({impact:y,draggable:t,droppable:n,draggables:i,afterCritical:m});if(Hk({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Ky({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:y,scrollJumpRequest:null};const T=di(x,u),k=H5({impact:y,viewport:l,destination:n,draggables:i,maxScrollChange:T});return{clientSelection:d,impact:k,scrollJumpRequest:T}};const Er=e=>{const t=e.subject.active;return t||He(),t};var q5=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:a})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,d=$i(l[u.start],l[u.end]),m=tp(i).filter(g=>g!==n).filter(g=>g.isEnabled).filter(g=>!!g.subject.active).filter(g=>Pk(a.frame)(Er(g))).filter(g=>{const y=Er(g);return e?l[u.crossAxisEnd]<y[u.crossAxisEnd]:y[u.crossAxisStart]<l[u.crossAxisStart]}).filter(g=>{const y=Er(g),x=$i(y[u.start],y[u.end]);return d(y[u.start])||d(y[u.end])||x(l[u.start])||x(l[u.end])}).sort((g,y)=>{const x=Er(g)[u.crossAxisStart],w=Er(y)[u.crossAxisStart];return e?x-w:w-x}).filter((g,y,x)=>Er(g)[u.crossAxisStart]===Er(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(g=>$i(Er(g)[u.start],Er(g)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((g,y)=>Er(g)[u.start]-Er(y)[u.start])[0]:m.sort((g,y)=>{const x=Q1(t,eS(Er(g))),w=Q1(t,eS(Er(y)));return x!==w?x-w:Er(g)[u.start]-Er(y)[u.start]})[0]};const sS=(e,t)=>{const n=e.page.borderBox.center;return to(e.descriptor.id,t)?di(n,t.displacedBy.point):n},Y5=(e,t)=>{const n=e.page.borderBox;return to(e.descriptor.id,t)?Rd(n,$c(t.displacedBy.point)):n};var Z5=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:i,afterCritical:a})=>i.filter(u=>Ik({target:Y5(u,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,d)=>{const m=md(e,ty(n,sS(u,a))),p=md(e,ty(n,sS(d,a)));return m<p?-1:p<m?1:u.descriptor.index-d.descriptor.index})[0]||null,Ld=Wn(function(t,n){const i=n[t.line];return{value:i,point:hl(t.line,i)}});const V5=(e,t,n)=>{const i=e.axis;if(e.descriptor.mode==="virtual")return hl(i.line,t[i.line]);const a=e.subject.page.contentBox[i.size],m=Ic(e.descriptor.id,n).reduce((p,g)=>p+g.client.marginBox[i.size],0)+t[i.line]-a;return m<=0?null:hl(i.line,m)},Gk=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Fk=(e,t,n)=>{const i=e.frame;zc(t,e)&&He(),e.subject.withPlaceholder&&He();const a=Ld(e.axis,t.displaceBy).point,l=V5(e,a,n),u={placeholderSize:a,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){const g=Nc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:g}}const d=l?lr(i.scroll.max,l):i.scroll.max,m=Gk(i,d),p=Nc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},K5=e=>{const t=e.subject.withPlaceholder;t||He();const n=e.frame;if(!n){const u=Nc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const i=t.oldFrameMaxScroll;i||He();const a=Gk(n,i),l=Nc({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:l,frame:a}};var W5=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:i,draggables:a,destination:l,viewport:u,afterCritical:d})=>{if(!t){if(n.length)return null;const y={displaced:pd,displacedBy:Bk,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=ip({impact:y,draggable:i,droppable:l,draggables:a,afterCritical:d}),w=zc(i,l)?l:Fk(l,i,a);return Hk({draggable:i,destination:w,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?y:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const y=t.descriptor.index;return t.descriptor.id===i.descriptor.id||m?y:y+1})(),g=Ld(l.axis,i.displaceBy);return Nm({draggable:i,insideDestination:n,destination:l,viewport:u,displacedBy:g,last:pd,index:p})},X5=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:i,draggables:a,droppables:l,viewport:u,afterCritical:d})=>{const m=q5({isMovingForward:e,pageBorderBoxCenter:t,source:i,droppables:l,viewport:u});if(!m)return null;const p=Ic(m.descriptor.id,a),g=Z5({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:d}),y=W5({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:a,moveRelativeTo:g,insideDestination:p,viewport:u,afterCritical:d});if(!y)return null;const x=ip({impact:y,draggable:n,droppable:m,draggables:a,afterCritical:d});return{clientSelection:Ky({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:y,scrollJumpRequest:null}},hi=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const J5=(e,t)=>{const n=hi(e);return n?t[n]:null};var Q5=({state:e,type:t})=>{const n=J5(e.impact,e.dimensions.droppables),i=!!n,a=e.dimensions.droppables[e.critical.droppable.id],l=n||a,u=l.axis.direction,d=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(d&&!i)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],g=e.current.page.borderBoxCenter,{draggables:y,droppables:x}=e.dimensions;return d?F5({isMovingForward:m,previousPageBorderBoxCenter:g,draggable:p,destination:l,draggables:y,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):X5({isMovingForward:m,previousPageBorderBoxCenter:g,draggable:p,isOver:l,draggables:y,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function il(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function qk(e){const t=$i(e.top,e.bottom),n=$i(e.left,e.right);return function(a){return t(a.y)&&n(a.x)}}function eB(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function tB({pageBorderBox:e,draggable:t,candidates:n}){const i=t.page.borderBox.center,a=n.map(l=>{const u=l.axis,d=hl(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:md(i,d)}}).sort((l,u)=>u.distance-l.distance);return a[0]?a[0].id:null}function nB({pageBorderBox:e,draggable:t,droppables:n}){const i=tp(n).filter(a=>{if(!a.isEnabled)return!1;const l=a.subject.active;if(!l||!eB(e,l))return!1;if(qk(l)(e.center))return!0;const u=a.axis,d=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],g=$i(l[u.crossAxisStart],l[u.crossAxisEnd]),y=g(m),x=g(p);return!y&&!x?!0:y?m<d:p>d});return i.length?i.length===1?i[0].descriptor.id:tB({pageBorderBox:e,draggable:t,candidates:i}):null}const Yk=(e,t)=>as(Rd(e,t));var rB=(e,t)=>{const n=e.frame;return n?Yk(t,n.scroll.diff.value):t};function Zk({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function iB({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var sB=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:i,last:a,viewport:l,afterCritical:u})=>{const d=n.axis,m=Ld(n.axis,t.displaceBy),p=m.value,g=e[d.start],y=e[d.end],w=rp(t,i).find(k=>{const A=k.descriptor.id,D=k.page.borderBox.center[d.line],B=to(A,u),N=Zk({displaced:a,id:A});return B?N?y<=D:g<D-p:N?y<=D+p:g<D})||null,T=iB({draggable:t,closest:w,inHomeList:zc(t,n)});return Nm({draggable:t,insideDestination:i,destination:n,viewport:l,last:a,displacedBy:m,index:T})};const aB=4;var oB=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:i,insideDestination:a,afterCritical:l})=>{if(!i.isCombineEnabled)return null;const u=i.axis,d=Ld(i.axis,e.displaceBy),m=d.value,p=t[u.start],g=t[u.end],x=rp(e,a).find(T=>{const k=T.descriptor.id,A=T.page.borderBox,B=A[u.size]/aB,N=to(k,l),M=Zk({displaced:n.displaced,id:k});return N?M?g>A[u.start]+B&&g<A[u.end]-B:p>A[u.start]-m+B&&p<A[u.end]-m-B:M?g>A[u.start]+m+B&&g<A[u.end]+m-B:p>A[u.start]+B&&p<A[u.end]-B});return x?{displacedBy:d,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}}:null},Vk=({pageOffset:e,draggable:t,draggables:n,droppables:i,previousImpact:a,viewport:l,afterCritical:u})=>{const d=Yk(t.page.borderBox,e),m=nB({pageBorderBox:d,draggable:t,droppables:i});if(!m)return x5;const p=i[m],g=Ic(p.descriptor.id,n),y=rB(p,d);return oB({pageBorderBoxWithDroppableScroll:y,draggable:t,previousImpact:a,destination:p,insideDestination:g,afterCritical:u})||sB({pageBorderBoxWithDroppableScroll:y,draggable:t,destination:p,insideDestination:g,last:a.displaced,viewport:l,afterCritical:u})},Wy=(e,t)=>({...e,[t.descriptor.id]:t});const lB=({previousImpact:e,impact:t,droppables:n})=>{const i=hi(e),a=hi(t);if(!i||i===a)return n;const l=n[i];if(!l.subject.withPlaceholder)return n;const u=K5(l);return Wy(n,u)};var cB=({draggable:e,draggables:t,droppables:n,previousImpact:i,impact:a})=>{const l=lB({previousImpact:i,impact:a,droppables:n}),u=hi(a);if(!u)return l;const d=n[u];if(zc(e,d)||d.subject.withPlaceholder)return l;const m=Fk(d,e,t);return Wy(l,m)},od=({state:e,clientSelection:t,dimensions:n,viewport:i,impact:a,scrollJumpRequest:l})=>{const u=i||e.viewport,d=n||e.dimensions,m=t||e.current.client.selection,p=di(m,e.initial.client.selection),g={offset:p,selection:m,borderBoxCenter:lr(e.initial.client.borderBoxCenter,p)},y={selection:lr(g.selection,u.scroll.current),borderBoxCenter:lr(g.borderBoxCenter,u.scroll.current),offset:lr(g.offset,u.scroll.diff.value)},x={client:g,page:y};if(e.phase==="COLLECTING")return{...e,dimensions:d,viewport:u,current:x};const w=d.draggables[e.critical.draggable.id],T=a||Vk({pageOffset:y.offset,draggable:w,draggables:d.draggables,droppables:d.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=cB({draggable:w,impact:T,previousImpact:e.impact,draggables:d.draggables,droppables:d.droppables});return{...e,current:x,dimensions:{draggables:d.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function uB(e,t){return e.map(n=>t[n])}var Kk=({impact:e,viewport:t,draggables:n,destination:i,forceShouldAnimate:a})=>{const l=e.displaced,u=uB(l.all,n),d=gd({afterDragging:u,destination:i,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:l});return{...e,displaced:d}},Wk=({impact:e,draggable:t,droppable:n,draggables:i,viewport:a,afterCritical:l})=>{const u=ip({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:l});return Ky({pageBorderBoxCenter:u,draggable:t,viewport:a})},Xk=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&He();const i=e.impact,a=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:d}=l,m=u[e.critical.draggable.id],p=hi(i);p||He();const g=d[p],y=Kk({impact:i,viewport:a,destination:g,draggables:u}),x=Wk({impact:y,draggable:m,droppable:g,draggables:u,viewport:a,afterCritical:e.afterCritical});return od({impact:y,clientSelection:x,state:e,dimensions:l,viewport:a})},dB=e=>({index:e.index,droppableId:e.droppableId}),Jk=({draggable:e,home:t,draggables:n,viewport:i})=>{const a=Ld(t.axis,e.displaceBy),l=Ic(t.descriptor.id,n),u=l.indexOf(e);u===-1&&He();const d=l.slice(u+1),m=d.reduce((x,w)=>(x[w.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:m};return{impact:{displaced:gd({afterDragging:d,destination:t,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:dB(e.descriptor)}},afterCritical:p}},hB=(e,t)=>({draggables:e.draggables,droppables:Wy(e.droppables,t)}),fB=({draggable:e,offset:t,initialWindowScroll:n})=>{const i=Em(e.client,t),a=Tm(i,n);return{...e,placeholder:{...e.placeholder,client:i},client:i,page:a}},mB=e=>{const t=e.frame;return t||He(),t},pB=({additions:e,updatedDroppables:t,viewport:n})=>{const i=n.scroll.diff.value;return e.map(a=>{const l=a.descriptor.droppableId,u=t[l],m=mB(u).scroll.diff.value,p=lr(i,m);return fB({draggable:a,offset:p,initialWindowScroll:n.scroll.initial})})},gB=({state:e,published:t})=>{const n=t.modified.map(D=>{const B=e.dimensions.droppables[D.droppableId];return Fy(B,D.scroll)}),i={...e.dimensions.droppables,...Rk(n)},a=Lk(pB({additions:t.additions,updatedDroppables:i,viewport:e.viewport})),l={...e.dimensions.draggables,...a};t.removals.forEach(D=>{delete l[D]});const u={droppables:i,draggables:l},d=hi(e.impact),m=d?u.droppables[d]:null,p=u.draggables[e.critical.draggable.id],g=u.droppables[e.critical.droppable.id],{impact:y,afterCritical:x}=Jk({draggable:p,home:g,draggables:l,viewport:e.viewport}),w=m&&m.isCombineEnabled?e.impact:y,T=Vk({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:w,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:y,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const ny=e=>e.movementMode==="SNAP",Rg=(e,t,n)=>{const i=hB(e.dimensions,t);return!ny(e)||n?od({state:e,dimensions:i}):Xk({state:e,dimensions:i})};function Lg(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const aS={phase:"IDLE",completed:null,shouldFlush:!1};var bB=(e=aS,t)=>{if(t.type==="FLUSH")return{...aS,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&He();const{critical:n,clientSelection:i,viewport:a,dimensions:l,movementMode:u}=t.payload,d=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:i,borderBoxCenter:d.client.borderBox.center,offset:Jn},g={client:p,page:{selection:lr(p.selection,a.scroll.initial),borderBoxCenter:lr(p.selection,a.scroll.initial),offset:lr(p.selection,a.scroll.diff.value)}},y=tp(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:w}=Jk({draggable:d,home:m,draggables:l.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:g,current:g,isWindowScrollAllowed:y,impact:x,afterCritical:w,onLiftImpact:x,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&He(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||He(),gB({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;il(e)||He();const{client:n}=t.payload;return eo(n,e.current.client.selection)?e:od({state:e,clientSelection:n,impact:ny(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Lg(e);il(e)||He();const{id:n,newScroll:i}=t.payload,a=e.dimensions.droppables[n];if(!a)return e;const l=Fy(a,i);return Rg(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;il(e)||He();const{id:n,isEnabled:i}=t.payload,a=e.dimensions.droppables[n];a||He(),a.isEnabled===i&&He();const l={...a,isEnabled:i};return Rg(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;il(e)||He();const{id:n,isCombineEnabled:i}=t.payload,a=e.dimensions.droppables[n];a||He(),a.isCombineEnabled===i&&He();const l={...a,isCombineEnabled:i};return Rg(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;il(e)||He(),e.isWindowScrollAllowed||He();const n=t.payload.newScroll;if(eo(e.viewport.scroll.current,n))return Lg(e);const i=Uk(e.viewport,n);return ny(e)?Xk({state:e,viewport:i}):od({state:e,viewport:i})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!il(e))return e;const n=t.payload.maxScroll;if(eo(n,e.viewport.scroll.max))return e;const i={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:i}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&He();const n=Q5({state:e,type:t.type});return n?od({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&He(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:i,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||He(),{phase:"DROP_ANIMATING",completed:n,dropDuration:i,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Pt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const yB=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),vB=e=>({type:"LIFT",payload:e}),_B=e=>({type:"INITIAL_PUBLISH",payload:e}),xB=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),wB=()=>({type:"COLLECTION_STARTING",payload:null}),SB=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),EB=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),TB=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Qk=e=>({type:"MOVE",payload:e}),kB=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),AB=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),jB=()=>({type:"MOVE_UP",payload:null}),NB=()=>({type:"MOVE_DOWN",payload:null}),OB=()=>({type:"MOVE_RIGHT",payload:null}),DB=()=>({type:"MOVE_LEFT",payload:null}),Xy=()=>({type:"FLUSH",payload:null}),CB=e=>({type:"DROP_ANIMATE",payload:e}),Jy=e=>({type:"DROP_COMPLETE",payload:e}),eA=e=>({type:"DROP",payload:e}),MB=e=>({type:"DROP_PENDING",payload:e}),tA=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var RB=e=>({getState:t,dispatch:n})=>i=>a=>{if(!Pt(a,"LIFT")){i(a);return}const{id:l,clientSelection:u,movementMode:d}=a.payload,m=t();m.phase==="DROP_ANIMATING"&&n(Jy({completed:m.completed})),t().phase!=="IDLE"&&He(),n(Xy()),n(yB({draggableId:l,movementMode:d}));const g={draggableId:l,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:y,dimensions:x,viewport:w}=e.startPublishing(g);n(_B({critical:y,dimensions:x,clientSelection:u,movementMode:d,viewport:w}))},LB=e=>()=>t=>n=>{Pt(n,"INITIAL_PUBLISH")&&e.dragging(),Pt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Pt(n,"FLUSH")||Pt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Qy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},bd={opacity:{drop:0,combining:.7},scale:{drop:.75}},nA={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ko=`${nA.outOfTheWay}s ${Qy.outOfTheWay}`,ld={fluid:`opacity ${Ko}`,snap:`transform ${Ko}, opacity ${Ko}`,drop:e=>{const t=`${e}s ${Qy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ko}`,placeholder:`height ${Ko}, width ${Ko}, margin ${Ko}`},oS=e=>eo(e,Jn)?void 0:`translate(${e.x}px, ${e.y}px)`,ry={moveTo:oS,drop:(e,t)=>{const n=oS(e);if(n)return t?`${n} scale(${bd.scale.drop})`:n}},{minDropTime:iy,maxDropTime:rA}=nA,BB=rA-iy,lS=1500,PB=.6;var $B=({current:e,destination:t,reason:n})=>{const i=md(e,t);if(i<=0)return iy;if(i>=lS)return rA;const a=i/lS,l=iy+BB*a,u=n==="CANCEL"?l*PB:l;return Number(u.toFixed(2))},IB=({impact:e,draggable:t,dimensions:n,viewport:i,afterCritical:a})=>{const{draggables:l,droppables:u}=n,d=hi(e),m=d?u[d]:null,p=u[t.descriptor.droppableId],g=Wk({impact:e,draggable:t,draggables:l,afterCritical:a,droppable:m||p,viewport:i});return di(g,t.client.borderBox.center)},zB=({draggables:e,reason:t,lastImpact:n,home:i,viewport:a,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:Kk({draggables:e,impact:l,destination:i,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:pd},didDropInsideDroppable:!0};const UB=({getState:e,dispatch:t})=>n=>i=>{if(!Pt(i,"DROP")){n(i);return}const a=e(),l=i.payload.reason;if(a.phase==="COLLECTING"){t(MB({reason:l}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&He(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||He();const d=a.critical,m=a.dimensions,p=m.draggables[a.critical.draggable.id],{impact:g,didDropInsideDroppable:y}=zB({reason:l,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),x=y?qy(g):null,w=y?np(g):null,T={index:d.draggable.index,droppableId:d.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:a.movementMode,destination:x,combine:w},A=IB({impact:g,draggable:p,dimensions:m,viewport:a.viewport,afterCritical:a.afterCritical}),D={critical:a.critical,afterCritical:a.afterCritical,result:k,impact:g};if(!(!eo(a.current.client.offset,A)||!!k.combine)){t(Jy({completed:D}));return}const N=$B({current:a.current.client.offset,destination:A,reason:l});t(CB({newHomeClientOffset:A,dropDuration:N,completed:D}))};var iA=()=>({x:window.pageXOffset,y:window.pageYOffset});function HB(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function GB({onWindowScroll:e}){function t(){e(iA())}const n=fd(t),i=HB(n);let a=Qa;function l(){return a!==Qa}function u(){l()&&He(),a=Mi(window,[i])}function d(){l()||He(),n.cancel(),a(),a=Qa}return{start:u,stop:d,isActive:l}}const FB=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH"),qB=e=>{const t=GB({onWindowScroll:n=>{e.dispatch(kB({newScroll:n}))}});return n=>i=>{!t.isActive()&&Pt(i,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&FB(i)&&t.stop(),n(i)}};var YB=e=>{let t=!1,n=!1;const i=setTimeout(()=>{n=!0}),a=l=>{t||n||(t=!0,e(l),clearTimeout(i))};return a.wasCalled=()=>t,a},ZB=()=>{const e=[],t=a=>{const l=e.findIndex(d=>d.timerId===a);l===-1&&He();const[u]=e.splice(l,1);u.callback()};return{add:a=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:a};e.push(u)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const VB=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,KB=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,WB=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,i=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&i},Fu=(e,t)=>{t()},yf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Bg(e,t,n,i){if(!e){n(i(t));return}const a=YB(n);e(t,{announce:a}),a.wasCalled()||n(i(t))}var XB=(e,t)=>{const n=ZB();let i=null;const a=(y,x)=>{i&&He(),Fu("onBeforeCapture",()=>{const w=e().onBeforeCapture;w&&w({draggableId:y,mode:x})})},l=(y,x)=>{i&&He(),Fu("onBeforeDragStart",()=>{const w=e().onBeforeDragStart;w&&w(yf(y,x))})},u=(y,x)=>{i&&He();const w=yf(y,x);i={mode:x,lastCritical:y,lastLocation:w.source,lastCombine:null},n.add(()=>{Fu("onDragStart",()=>Bg(e().onDragStart,w,t,om.onDragStart))})},d=(y,x)=>{const w=qy(x),T=np(x);i||He();const k=!WB(y,i.lastCritical);k&&(i.lastCritical=y);const A=!VB(i.lastLocation,w);A&&(i.lastLocation=w);const D=!KB(i.lastCombine,T);if(D&&(i.lastCombine=T),!k&&!A&&!D)return;const B={...yf(y,i.mode),combine:T,destination:w};n.add(()=>{Fu("onDragUpdate",()=>Bg(e().onDragUpdate,B,t,om.onDragUpdate))})},m=()=>{i||He(),n.flush()},p=y=>{i||He(),i=null,Fu("onDragEnd",()=>Bg(e().onDragEnd,y,t,om.onDragEnd))};return{beforeCapture:a,beforeStart:l,start:u,update:d,flush:m,drop:p,abort:()=>{if(!i)return;const y={...yf(i.lastCritical,i.mode),combine:null,destination:null,reason:"CANCEL"};p(y)}}},JB=(e,t)=>{const n=XB(e,t);return i=>a=>l=>{if(Pt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Pt(l,"INITIAL_PUBLISH")){const d=l.payload.critical;n.beforeStart(d,l.payload.movementMode),a(l),n.start(d,l.payload.movementMode);return}if(Pt(l,"DROP_COMPLETE")){const d=l.payload.completed.result;n.flush(),a(l),n.drop(d);return}if(a(l),Pt(l,"FLUSH")){n.abort();return}const u=i.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const QB=e=>t=>n=>{if(!Pt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const i=e.getState();i.phase!=="DROP_ANIMATING"&&He(),e.dispatch(Jy({completed:i.completed}))},eP=e=>{let t=null,n=null;function i(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return a=>l=>{if((Pt(l,"FLUSH")||Pt(l,"DROP_COMPLETE")||Pt(l,"DROP_ANIMATION_FINISHED"))&&i(),a(l),!Pt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(tA())}};n=requestAnimationFrame(()=>{n=null,t=Mi(window,[u])})}};var tP=e=>()=>t=>n=>{(Pt(n,"DROP_COMPLETE")||Pt(n,"FLUSH")||Pt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},nP=e=>{let t=!1;return()=>n=>i=>{if(Pt(i,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(i.payload.critical.draggable.id),n(i),e.tryRestoreFocusRecorded();return}if(n(i),!!t){if(Pt(i,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Pt(i,"DROP_COMPLETE")){t=!1;const a=i.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const rP=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH");var iP=e=>t=>n=>i=>{if(rP(i)){e.stop(),n(i);return}if(Pt(i,"INITIAL_PUBLISH")){n(i);const a=t.getState();a.phase!=="DRAGGING"&&He(),e.start(a);return}n(i),e.scroll(t.getState())};const sP=e=>t=>n=>{if(t(n),!Pt(n,"PUBLISH_WHILE_DRAGGING"))return;const i=e.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||e.dispatch(eA({reason:i.reason})))},aP=_k;var oP=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:i,announce:a,autoScroller:l})=>vk(bB,aP(iL(LB(n),tP(e),RB(e),UB,QB,eP,sP,iP(l),qB,nP(t),JB(i,a))));const Pg=()=>({additions:{},removals:{},modified:{}});function lP({registry:e,callbacks:t}){let n=Pg(),i=null;const a=()=>{i||(t.collectionStarting(),i=requestAnimationFrame(()=>{i=null;const{additions:m,removals:p,modified:g}=n,y=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Jn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(g).map(T=>{const A=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:A}}),w={additions:y,removals:Object.keys(p),modified:x};n=Pg(),t.publish(w)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],a()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],a()},stop:()=>{i&&(cancelAnimationFrame(i),i=null,n=Pg())}}}var sA=({scrollHeight:e,scrollWidth:t,height:n,width:i})=>{const a=di({x:t,y:e},{x:i,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},aA=()=>{const e=document.documentElement;return e||He(),e},oA=()=>{const e=aA();return sA({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},cP=()=>{const e=iA(),t=oA(),n=e.y,i=e.x,a=aA(),l=a.clientWidth,u=a.clientHeight,d=i+l,m=n+u;return{frame:as({top:n,left:i,right:d,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Jn,displacement:Jn}}}},uP=({critical:e,scrollOptions:t,registry:n})=>{const i=cP(),a=i.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(g=>g.callbacks.getDimensionAndWatchScroll(a,t)),d=n.draggable.getAllByType(e.draggable.type).map(g=>g.getDimension(a));return{dimensions:{draggables:Lk(d),droppables:Rk(u)},critical:e,viewport:i}};function cS(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var dP=(e,t)=>{let n=null;const i=lP({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(x,w)=>{e.droppable.exists(x)||He(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:w})},l=(x,w)=>{n&&(e.droppable.exists(x)||He(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:w}))},u=(x,w)=>{n&&(e.droppable.exists(x)||He(),t.updateDroppableScroll({id:x,newScroll:w}))},d=(x,w)=>{n&&e.droppable.getById(x).callbacks.scroll(w)},m=()=>{if(!n)return;i.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(w=>w.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||He();const w=n.critical.draggable;x.type==="ADDITION"&&cS(e,w,x.value)&&i.add(x.value),x.type==="REMOVAL"&&cS(e,w,x.value)&&i.remove(x.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:l,scrollDroppable:d,updateDroppableScroll:u,startPublishing:x=>{n&&He();const w=e.draggable.getById(x.draggableId),T=e.droppable.getById(w.descriptor.droppableId),k={draggable:w.descriptor,droppable:T.descriptor},A=e.subscribe(p);return n={critical:k,unsubscribe:A},uP({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},lA=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",hP=e=>{window.scrollBy(e.x,e.y)};const fP=Wn(e=>tp(e).filter(t=>!(!t.isEnabled||!t.frame))),mP=(e,t)=>fP(t).find(i=>(i.frame||He(),qk(i.frame.pageMarginBox)(e)))||null;var pP=({center:e,destination:t,droppables:n})=>{if(t){const a=n[t];return a.frame?a:null}return mP(e,n)};const yd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var gP=(e,t,n=()=>yd)=>{const i=n(),a=e[t.size]*i.startFromPercentage,l=e[t.size]*i.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:l}},cA=({startOfRange:e,endOfRange:t,current:n})=>{const i=t-e;return i===0?0:(n-e)/i},ev=1,bP=(e,t,n=()=>yd)=>{const i=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return i.maxPixelScroll;if(e===t.startScrollingFrom)return ev;const l=1-cA({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=i.maxPixelScroll*i.ease(l);return Math.ceil(u)},yP=(e,t,n)=>{const i=n(),a=i.durationDampening.accelerateAt,l=i.durationDampening.stopDampeningAt,u=t,d=l,p=Date.now()-u;if(p>=l)return e;if(p<a)return ev;const g=cA({startOfRange:a,endOfRange:d,current:p}),y=e*i.ease(g);return Math.ceil(y)},uS=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const l=bP(e,t,a);return l===0?0:i?Math.max(yP(l,n,a),ev):l},dS=({container:e,distanceToEdges:t,dragStartTime:n,axis:i,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const u=gP(e,i,l);return t[i.end]<t[i.start]?uS({distanceToEdge:t[i.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:l}):-1*uS({distanceToEdge:t[i.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:l})},vP=({container:e,subject:t,proposedScroll:n})=>{const i=t.height>e.height,a=t.width>e.width;return!a&&!i?n:a&&i?null:{x:a?0:n.x,y:i?0:n.y}};const _P=Mk(e=>e===0?0:e);var uA=({dragStartTime:e,container:t,subject:n,center:i,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const u={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},d=dS({container:t,distanceToEdges:u,dragStartTime:e,axis:Yy,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),m=dS({container:t,distanceToEdges:u,dragStartTime:e,axis:$k,shouldUseTimeDampening:a,getAutoScrollerOptions:l}),p=_P({x:m,y:d});if(eo(p,Jn))return null;const g=vP({container:t,subject:n,proposedScroll:p});return g?eo(g,Jn)?null:g:null};const xP=Mk(e=>e===0?0:e>0?1:-1),tv=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:i})=>{const a=lr(t,i),l={x:e(a.x,n.x),y:e(a.y,n.y)};return eo(l,Jn)?null:l}})(),dA=({max:e,current:t,change:n})=>{const i={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=xP(n),l=tv({max:i,current:t,change:a});return!l||a.x!==0&&l.x===0||a.y!==0&&l.y===0},nv=(e,t)=>dA({current:e.scroll.current,max:e.scroll.max,change:t}),wP=(e,t)=>{if(!nv(e,t))return null;const n=e.scroll.max,i=e.scroll.current;return tv({current:i,max:n,change:t})},rv=(e,t)=>{const n=e.frame;return n?dA({current:n.scroll.current,max:n.scroll.max,change:t}):!1},SP=(e,t)=>{const n=e.frame;return!n||!rv(e,t)?null:tv({current:n.scroll.current,max:n.scroll.max,change:t})};var EP=({viewport:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const u=uA({dragStartTime:i,container:e.frame,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return u&&nv(e,u)?u:null},TP=({droppable:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:a,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const d=uA({dragStartTime:i,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:l});return d&&rv(e,d)?d:null},hS=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:i,scrollDroppable:a,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const y=e.viewport,x=EP({dragStartTime:t,viewport:y,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){i(x);return}}const p=pP({center:u,destination:hi(e.impact),droppables:e.dimensions.droppables});if(!p)return;const g=TP({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});g&&a(p.descriptor.id,g)},kP=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>yd})=>{const i=fd(e),a=fd(t);let l=null;const u=p=>{l||He();const{shouldUseTimeDampening:g,dragStartTime:y}=l;hS({state:p,scrollWindow:i,scrollDroppable:a,dragStartTime:y,shouldUseTimeDampening:g,getAutoScrollerOptions:n})};return{start:p=>{l&&He();const g=Date.now();let y=!1;const x=()=>{y=!0};hS({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:g,shouldUseTimeDampening:y},y&&u(p)},stop:()=>{l&&(i.cancel(),a.cancel(),l=null)},scroll:u}},AP=({move:e,scrollDroppable:t,scrollWindow:n})=>{const i=(d,m)=>{const p=lr(d.current.client.selection,m);e({client:p})},a=(d,m)=>{if(!rv(d,m))return m;const p=SP(d,m);if(!p)return t(d.descriptor.id,m),null;const g=di(m,p);return t(d.descriptor.id,g),di(m,g)},l=(d,m,p)=>{if(!d||!nv(m,p))return p;const g=wP(m,p);if(!g)return n(p),null;const y=di(p,g);return n(y),di(p,y)};return d=>{const m=d.scrollJumpRequest;if(!m)return;const p=hi(d.impact);p||He();const g=a(d.dimensions.droppables[p],m);if(!g)return;const y=d.viewport,x=l(d.isWindowScrollAllowed,y,g);x&&i(d,x)}},jP=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:i})=>{const a=kP({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:i}),l=AP({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(i().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){a.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:a.start,stop:a.stop}};const Oc="data-rfd",Dc=(()=>{const e=`${Oc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),sy=(()=>{const e=`${Oc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),NP=(()=>{const e=`${Oc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),fS={contextId:`${Oc}-scroll-container-context-id`},OP=e=>t=>`[${t}="${e}"]`,qu=(e,t)=>e.map(n=>{const i=n.styles[t];return i?`${n.selector} { ${i} }`:""}).join(" "),DP="pointer-events: none;";var CP=e=>{const t=OP(e),n=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Dc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:DP,dropAnimating:d}}})(),i=(()=>{const d=`
      transition: ${ld.outOfTheWay};
    `;return{selector:t(sy.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),a={selector:t(NP.contextId),styles:{always:"overflow-anchor: none;"}},u=[i,n,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:qu(u,"always"),resting:qu(u,"resting"),dragging:qu(u,"dragging"),dropAnimating:qu(u,"dropAnimating"),userCancel:qu(u,"userCancel")}};const fi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,$g=()=>{const e=document.querySelector("head");return e||He(),e},mS=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function MP(e,t){const n=At(()=>CP(e),[e]),i=j.useRef(null),a=j.useRef(null),l=Je(Wn(y=>{const x=a.current;x||He(),x.textContent=y}),[]),u=Je(y=>{const x=i.current;x||He(),x.textContent=y},[]);fi(()=>{!i.current&&!a.current||He();const y=mS(t),x=mS(t);return i.current=y,a.current=x,y.setAttribute(`${Oc}-always`,e),x.setAttribute(`${Oc}-dynamic`,e),$g().appendChild(y),$g().appendChild(x),u(n.always),l(n.resting),()=>{const w=T=>{const k=T.current;k||He(),$g().removeChild(k),T.current=null};w(i),w(a)}},[t,u,l,n.always,n.resting,e]);const d=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(y=>{if(y==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{a.current&&l(n.resting)},[l,n.resting]);return At(()=>({dragging:d,dropping:m,resting:p}),[d,m,p])}function hA(e,t){return Array.from(e.querySelectorAll(t))}var fA=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function sp(e){return e instanceof fA(e).HTMLElement}function RP(e,t){const n=`[${Dc.contextId}="${e}"]`,i=hA(document,n);if(!i.length)return null;const a=i.find(l=>l.getAttribute(Dc.draggableId)===t);return!a||!sp(a)?null:a}function LP(e){const t=j.useRef({}),n=j.useRef(null),i=j.useRef(null),a=j.useRef(!1),l=Je(function(x,w){const T={id:x,focus:w};return t.current[x]=T,function(){const A=t.current;A[x]!==T&&delete A[x]}},[]),u=Je(function(x){const w=RP(e,x);w&&w!==document.activeElement&&w.focus()},[e]),d=Je(function(x,w){n.current===x&&(n.current=w)},[]),m=Je(function(){i.current||a.current&&(i.current=requestAnimationFrame(()=>{i.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const w=document.activeElement;w&&w.getAttribute(Dc.draggableId)===x&&(n.current=x)},[]);return fi(()=>(a.current=!0,function(){a.current=!1;const x=i.current;x&&cancelAnimationFrame(x)}),[]),At(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:d}),[l,p,m,d])}function BP(){const e={draggables:{},droppables:{}},t=[];function n(y){return t.push(y),function(){const w=t.indexOf(y);w!==-1&&t.splice(w,1)}}function i(y){t.length&&t.forEach(x=>x(y))}function a(y){return e.draggables[y]||null}function l(y){const x=a(y);return x||He(),x}const u={register:y=>{e.draggables[y.descriptor.id]=y,i({type:"ADDITION",value:y})},update:(y,x)=>{const w=e.draggables[x.descriptor.id];w&&w.uniqueId===y.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[y.descriptor.id]=y)},unregister:y=>{const x=y.descriptor.id,w=a(x);w&&y.uniqueId===w.uniqueId&&(delete e.draggables[x],e.droppables[y.descriptor.droppableId]&&i({type:"REMOVAL",value:y}))},getById:l,findById:a,exists:y=>!!a(y),getAllByType:y=>Object.values(e.draggables).filter(x=>x.descriptor.type===y)};function d(y){return e.droppables[y]||null}function m(y){const x=d(y);return x||He(),x}const p={register:y=>{e.droppables[y.descriptor.id]=y},unregister:y=>{const x=d(y.descriptor.id);x&&y.uniqueId===x.uniqueId&&delete e.droppables[y.descriptor.id]},getById:m,findById:d,exists:y=>!!d(y),getAllByType:y=>Object.values(e.droppables).filter(x=>x.descriptor.type===y)};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:g}}function PP(){const e=At(BP,[]);return j.useEffect(()=>function(){e.clean()},[e]),e}var iv=rn.createContext(null),Om=()=>{const e=document.body;return e||He(),e};const $P={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},IP=e=>`rfd-announcement-${e}`;function zP(e){const t=At(()=>IP(e),[e]),n=j.useRef(null);return j.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),km(l.style,$P),Om().appendChild(l),function(){setTimeout(function(){const m=Om();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(a=>{const l=n.current;if(l){l.textContent=a;return}},[])}const UP={separator:"::"};function sv(e,t=UP){const n=rn.useId();return At(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function HP({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function GP({contextId:e,text:t}){const n=sv("hidden-text",{separator:"-"}),i=At(()=>HP({contextId:e,uniqueId:n}),[n,e]);return j.useEffect(function(){const l=document.createElement("div");return l.id=i,l.textContent=t,l.style.display="none",Om().appendChild(l),function(){const d=Om();d.contains(l)&&d.removeChild(l)}},[i,t]),i}var ap=rn.createContext(null);function mA(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),t}function FP(){let e=null;function t(){return!!e}function n(u){return u===e}function i(u){e&&He();const d={abandon:u};return e=d,d}function a(){e||He(),e=null}function l(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:n,claim:i,release:a,tryAbandon:l}}function vd(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const qP=9,YP=13,av=27,pA=32,ZP=33,VP=34,KP=35,WP=36,XP=37,JP=38,QP=39,e7=40,t7={[YP]:!0,[qP]:!0};var gA=e=>{t7[e.keyCode]&&e.preventDefault()};const op=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(i=>`on${i}`in document)||e})(),bA=0,pS=5;function n7(e,t){return Math.abs(t.x-e.x)>=pS||Math.abs(t.y-e.y)>=pS}const gS={type:"IDLE"};function r7({cancel:e,completed:t,getPhase:n,setPhase:i}){return[{eventName:"mousemove",fn:a=>{const{button:l,clientX:u,clientY:d}=a;if(l!==bA)return;const m={x:u,y:d},p=n();if(p.type==="DRAGGING"){a.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&He();const g=p.point;if(!n7(g,m))return;a.preventDefault();const y=p.actions.fluidLift(m);i({type:"DRAGGING",actions:y})}},{eventName:"mouseup",fn:a=>{const l=n();if(l.type!=="DRAGGING"){e();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{n().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(n().type==="PENDING"){e();return}if(a.keyCode===av){a.preventDefault(),e();return}gA(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const l=n();if(l.type==="IDLE"&&He(),l.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:op,fn:e}]}function i7(e){const t=j.useRef(gS),n=j.useRef(Qa),i=At(()=>({eventName:"mousedown",fn:function(y){if(y.defaultPrevented||y.button!==bA||y.ctrlKey||y.metaKey||y.shiftKey||y.altKey)return;const x=e.findClosestDraggableId(y);if(!x)return;const w=e.tryGetLock(x,u,{sourceEvent:y});if(!w)return;y.preventDefault();const T={x:y.clientX,y:y.clientY};n.current(),p(w,T)}}),[e]),a=At(()=>({eventName:"webkitmouseforcewillbegin",fn:g=>{if(g.defaultPrevented)return;const y=e.findClosestDraggableId(g);if(!y)return;const x=e.findOptionsForDraggable(y);x&&(x.shouldRespectForcePress||e.canGetLock(y)&&g.preventDefault())}}),[e]),l=Je(function(){const y={passive:!1,capture:!0};n.current=Mi(window,[a,i],y)},[a,i]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=gS,n.current(),l())},[l]),d=Je(()=>{const g=t.current;u(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[u]),m=Je(function(){const y={capture:!0,passive:!1},x=r7({cancel:d,completed:u,getPhase:()=>t.current,setPhase:w=>{t.current=w}});n.current=Mi(window,x,y)},[d,u]),p=Je(function(y,x){t.current.type!=="IDLE"&&He(),t.current={type:"PENDING",point:x,actions:y},m()},[m]);fi(function(){return l(),function(){n.current()}},[l])}function s7(){}const a7={[VP]:!0,[ZP]:!0,[WP]:!0,[KP]:!0};function o7(e,t){function n(){t(),e.cancel()}function i(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===av){a.preventDefault(),n();return}if(a.keyCode===pA){a.preventDefault(),i();return}if(a.keyCode===e7){a.preventDefault(),e.moveDown();return}if(a.keyCode===JP){a.preventDefault(),e.moveUp();return}if(a.keyCode===QP){a.preventDefault(),e.moveRight();return}if(a.keyCode===XP){a.preventDefault(),e.moveLeft();return}if(a7[a.keyCode]){a.preventDefault();return}gA(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:op,fn:n}]}function l7(e){const t=j.useRef(s7),n=At(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==pA)return;const u=e.findClosestDraggableId(l);if(!u)return;const d=e.tryGetLock(u,g,{sourceEvent:l});if(!d)return;l.preventDefault();let m=!0;const p=d.snapLift();t.current();function g(){m||He(),m=!1,t.current(),i()}t.current=Mi(window,o7(p,g),{capture:!0,passive:!1})}}),[e]),i=Je(function(){const l={passive:!1,capture:!0};t.current=Mi(window,[n],l)},[n]);fi(function(){return i(),function(){t.current()}},[i])}const Ig={type:"IDLE"},c7=120,u7=.15;function d7({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===av&&n.preventDefault(),e()}},{eventName:op,fn:e}]}function h7({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:l,clientY:u}=i.touches[0],d={x:l,y:u};i.preventDefault(),a.actions.move(d)}},{eventName:"touchend",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:i=>{if(n().type!=="DRAGGING"){e();return}i.preventDefault(),e()}},{eventName:"touchforcechange",fn:i=>{const a=n();a.type==="IDLE"&&He();const l=i.touches[0];if(!l||!(l.force>=u7))return;const d=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){d&&e();return}if(d){if(a.hasMoved){i.preventDefault();return}e();return}i.preventDefault()}},{eventName:op,fn:e}]}function f7(e){const t=j.useRef(Ig),n=j.useRef(Qa),i=Je(function(){return t.current},[]),a=Je(function(w){t.current=w},[]),l=At(()=>({eventName:"touchstart",fn:function(w){if(w.defaultPrevented)return;const T=e.findClosestDraggableId(w);if(!T)return;const k=e.tryGetLock(T,d,{sourceEvent:w});if(!k)return;const A=w.touches[0],{clientX:D,clientY:B}=A,N={x:D,y:B};n.current(),y(k,N)}}),[e]),u=Je(function(){const w={capture:!0,passive:!1};n.current=Mi(window,[l],w)},[l]),d=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),a(Ig),n.current(),u())},[u,a]),m=Je(()=>{const x=t.current;d(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[d]),p=Je(function(){const w={capture:!0,passive:!1},T={cancel:m,completed:d,getPhase:i},k=Mi(window,h7(T),w),A=Mi(window,d7(T),w);n.current=function(){k(),A()}},[m,i,d]),g=Je(function(){const w=i();w.type!=="PENDING"&&He();const T=w.actions.fluidLift(w.point);a({type:"DRAGGING",actions:T,hasMoved:!1})},[i,a]),y=Je(function(w,T){i().type!=="IDLE"&&He();const k=setTimeout(g,c7);a({type:"PENDING",point:T,actions:w,longPressTimerId:k}),p()},[p,i,a,g]);fi(function(){return u(),function(){n.current();const T=i();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),a(Ig))}},[i,u,a]),fi(function(){return Mi(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const m7=["input","button","textarea","select","option","optgroup","video","audio"];function yA(e,t){if(t==null)return!1;if(m7.includes(t.tagName.toLowerCase()))return!0;const i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===e?!1:yA(e,t.parentElement)}function p7(e,t){const n=t.target;return sp(n)?yA(e,n):!1}var g7=e=>as(e.getBoundingClientRect()).center;function b7(e){return e instanceof fA(e).Element}const y7=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(i=>i in Element.prototype)||e})();function vA(e,t){return e==null?null:e[y7](t)?e:vA(e.parentElement,t)}function v7(e,t){return e.closest?e.closest(t):vA(e,t)}function _7(e){return`[${Dc.contextId}="${e}"]`}function x7(e,t){const n=t.target;if(!b7(n))return null;const i=_7(e),a=v7(n,i);return!a||!sp(a)?null:a}function w7(e,t){const n=x7(e,t);return n?n.getAttribute(Dc.draggableId):null}function S7(e,t){const n=`[${sy.contextId}="${e}"]`,a=hA(document,n).find(l=>l.getAttribute(sy.id)===t);return!a||!sp(a)?null:a}function E7(e){e.preventDefault()}function vf({expected:e,phase:t,isLockActive:n,shouldWarn:i}){return!(!n()||e!==t)}function _A({lockAPI:e,store:t,registry:n,draggableId:i}){if(e.isClaimed())return!1;const a=n.draggable.findById(i);return!(!a||!a.options.isEnabled||!lA(t.getState(),i))}function T7({lockAPI:e,contextId:t,store:n,registry:i,draggableId:a,forceSensorStop:l,sourceEvent:u}){if(!_A({lockAPI:e,store:n,registry:i,draggableId:a}))return null;const m=i.draggable.getById(a),p=S7(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&p7(p,u))return null;const g=e.claim(l||Qa);let y="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function w(){return e.isActive(g)}function T(R,I){vf({expected:R,phase:y,isLockActive:w,shouldWarn:!0})&&n.dispatch(I())}const k=T.bind(null,"DRAGGING");function A(R){function I(){e.release(),y="COMPLETED"}y!=="PRE_DRAG"&&(I(),He()),n.dispatch(vB(R.liftActionArgs)),y="DRAGGING";function G(Y,q={shouldBlockNextClick:!1}){if(R.cleanup(),q.shouldBlockNextClick){const J=Mi(window,[{eventName:"click",fn:E7,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(J)}I(),n.dispatch(eA({reason:Y}))}return{isActive:()=>vf({expected:"DRAGGING",phase:y,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:x,drop:Y=>G("DROP",Y),cancel:Y=>G("CANCEL",Y),...R.actions}}function D(R){const I=fd(Y=>{k(()=>Qk({client:Y}))});return{...A({liftActionArgs:{id:a,clientSelection:R,movementMode:"FLUID"},cleanup:()=>I.cancel(),actions:{move:I}}),move:I}}function B(){const R={moveUp:()=>k(jB),moveRight:()=>k(OB),moveDown:()=>k(NB),moveLeft:()=>k(DB)};return A({liftActionArgs:{id:a,clientSelection:g7(p),movementMode:"SNAP"},cleanup:Qa,actions:R})}function N(){vf({expected:"PRE_DRAG",phase:y,isLockActive:w,shouldWarn:!0})&&e.release()}return{isActive:()=>vf({expected:"PRE_DRAG",phase:y,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:D,snapLift:B,abort:N}}const k7=[i7,l7,f7];function A7({contextId:e,store:t,registry:n,customSensors:i,enableDefaultSensors:a}){const l=[...a?k7:[],...i||[]],u=j.useState(()=>FP())[0],d=Je(function(A,D){vd(A)&&!vd(D)&&u.tryAbandon()},[u]);fi(function(){let A=t.getState();return t.subscribe(()=>{const B=t.getState();d(A,B),A=B})},[u,t,d]),fi(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>_A({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,A,D)=>T7({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:A||null,sourceEvent:D&&D.sourceEvent?D.sourceEvent:null}),[e,u,n,t]),g=Je(k=>w7(e,k),[e]),y=Je(k=>{const A=n.draggable.findById(k);return A?A.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Xy()))},[u,t]),w=Je(()=>u.isClaimed(),[u]),T=At(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:g,findOptionsForDraggable:y,tryReleaseLock:x,isLockClaimed:w}),[m,p,g,y,x,w]);for(let k=0;k<l.length;k++)l[k](T)}const j7=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Fm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),N7=e=>({...yd,...e.autoScrollerOptions,durationDampening:{...yd.durationDampening,...e.autoScrollerOptions}});function Yu(e){return e.current||He(),e.current}function O7(e){const{contextId:t,setCallbacks:n,sensors:i,nonce:a,dragHandleUsageInstructions:l}=e,u=j.useRef(null),d=mA(e),m=Je(()=>j7(d.current),[d]),p=Je(()=>N7(d.current),[d]),g=zP(t),y=GP({contextId:t,text:l}),x=MP(t,a),w=Je(J=>{Yu(u).dispatch(J)},[]),T=At(()=>H1({publishWhileDragging:xB,updateDroppableScroll:SB,updateDroppableIsEnabled:EB,updateDroppableIsCombineEnabled:TB,collectionStarting:wB},w),[w]),k=PP(),A=At(()=>dP(k,T),[k,T]),D=At(()=>jP({scrollWindow:hP,scrollDroppable:A.scrollDroppable,getAutoScrollerOptions:p,...H1({move:Qk},w)}),[A.scrollDroppable,w,p]),B=LP(t),N=At(()=>oP({announce:g,autoScroller:D,dimensionMarshal:A,focusMarshal:B,getResponders:m,styleMarshal:x}),[g,D,A,B,m,x]);u.current=N;const M=Je(()=>{const J=Yu(u);J.getState().phase!=="IDLE"&&J.dispatch(Xy())},[]),R=Je(()=>{const J=Yu(u).getState();return J.phase==="DROP_ANIMATING"?!0:J.phase==="IDLE"?!1:J.isDragging},[]),I=At(()=>({isDragging:R,tryAbort:M}),[R,M]);n(I);const G=Je(J=>lA(Yu(u).getState(),J),[]),Y=Je(()=>il(Yu(u).getState()),[]),q=At(()=>({marshal:A,focus:B,contextId:t,canLift:G,isMovementAllowed:Y,dragHandleUsageInstructionsId:y,registry:k}),[t,A,y,B,G,Y,k]);return A7({contextId:t,store:N,registry:k,customSensors:i||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(()=>M,[M]),rn.createElement(ap.Provider,{value:q},rn.createElement(t5,{context:iv,store:N},e.children))}function D7(){return rn.useId()}function Bd(e){const t=D7(),n=e.dragHandleUsageInstructions||om.dragHandleUsageInstructions;return rn.createElement(l5,null,i=>rn.createElement(O7,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const bS={dragging:5e3,dropAnimating:4500},C7=(e,t)=>t?ld.drop(t.duration):e?ld.snap:ld.fluid,M7=(e,t)=>{if(e)return t?bd.opacity.drop:bd.opacity.combining},R7=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function L7(e){const n=e.dimension.client,{offset:i,combineWith:a,dropping:l}=e,u=!!a,d=R7(e),m=!!l,p=m?ry.drop(i,u):ry.moveTo(i);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:C7(d,l),transform:p,opacity:M7(u,m),zIndex:m?bS.dropAnimating:bS.dragging,pointerEvents:"none"}}function B7(e){return{transform:ry.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function P7(e){return e.type==="DRAGGING"?L7(e):B7(e)}function $7(e,t,n=Jn){const i=window.getComputedStyle(t),a=t.getBoundingClientRect(),l=Ak(a,i),u=Tm(l,n),d={client:l,tagName:t.tagName.toLowerCase(),display:i.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:d,displaceBy:m,client:l,page:u}}function I7(e){const t=sv("draggable"),{descriptor:n,registry:i,getDraggableRef:a,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:d}=e,m=At(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:d}),[l,d,u]),p=Je(w=>{const T=a();return T||He(),$7(n,T,w)},[n,a]),g=At(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),y=j.useRef(g),x=j.useRef(!0);fi(()=>(i.draggable.register(y.current),()=>i.draggable.unregister(y.current)),[i.draggable]),fi(()=>{if(x.current){x.current=!1;return}const w=y.current;y.current=g,i.draggable.update(g,w)},[g,i.draggable])}var ov=rn.createContext(null);function Dm(e){const t=j.useContext(e);return t||He(),t}function z7(e){e.preventDefault()}const U7=e=>{const t=j.useRef(null),n=Je((I=null)=>{t.current=I},[]),i=Je(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:l,registry:u}=Dm(ap),{type:d,droppableId:m}=Dm(ov),p=At(()=>({id:e.draggableId,index:e.index,type:d,droppableId:m}),[e.draggableId,e.index,d,m]),{children:g,draggableId:y,isEnabled:x,shouldRespectForcePress:w,canDragInteractiveElements:T,isClone:k,mapped:A,dropAnimationFinished:D}=e;if(!k){const I=At(()=>({descriptor:p,registry:u,getDraggableRef:i,canDragInteractiveElements:T,shouldRespectForcePress:w,isEnabled:x}),[p,u,i,T,w,x]);I7(I)}const B=At(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":y,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:z7}:null,[a,l,y,x]),N=Je(I=>{A.type==="DRAGGING"&&A.dropping&&I.propertyName==="transform"&&Fm.flushSync(D)},[D,A]),M=At(()=>{const I=P7(A),G=A.type==="DRAGGING"&&A.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":y,style:I,onTransitionEnd:G},dragHandleProps:B}},[a,B,y,A,N,n]),R=At(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return rn.createElement(rn.Fragment,null,g(M,A.snapshot,R))};var xA=(e,t)=>e===t,wA=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const H7=e=>e.combine?e.combine.draggableId:null,G7=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function F7(){const e=Wn((a,l)=>({x:a,y:l})),t=Wn((a,l,u=null,d=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:a,draggingOver:u,combineWith:d,combineTargetFor:null})),n=Wn((a,l,u,d,m=null,p=null,g=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:a,dimension:u,forceShouldAnimate:g,snapshot:t(l,d,m,p,null)}}));return(a,l)=>{if(vd(a)){if(a.critical.draggable.id!==l.draggableId)return null;const u=a.current.client.offset,d=a.dimensions.draggables[l.draggableId],m=hi(a.impact),p=G7(a.impact),g=a.forceShouldAnimate;return n(e(u.x,u.y),a.movementMode,d,l.isClone,m,p,g)}if(a.phase==="DROP_ANIMATING"){const u=a.completed;if(u.result.draggableId!==l.draggableId)return null;const d=l.isClone,m=a.dimensions.draggables[l.draggableId],p=u.result,g=p.mode,y=wA(p),x=H7(p),T={duration:a.dropDuration,curve:Qy.drop,moveTo:a.newHomeClientOffset,opacity:x?bd.opacity.drop:null,scale:x?bd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:m,dropping:T,draggingOver:y,combineWith:x,mode:g,forceShouldAnimate:null,snapshot:t(g,d,y,x,T)}}}return null}}function SA(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const q7={mapped:{type:"SECONDARY",offset:Jn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:SA(null)}};function Y7(){const e=Wn((u,d)=>({x:u,y:d})),t=Wn(SA),n=Wn((u,d=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:d,shouldAnimateDisplacement:m,snapshot:t(d)}})),i=u=>u?n(Jn,u,!0):null,a=(u,d,m,p)=>{const g=m.displaced.visible[u],y=!!(p.inVirtualList&&p.effected[u]),x=np(m),w=x&&x.draggableId===u?d:null;if(!g){if(!y)return i(w);if(m.displaced.invisible[u])return null;const A=$c(p.displacedBy.point),D=e(A.x,A.y);return n(D,w,!0)}if(y)return i(w);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,w,g.shouldAnimate)};return(u,d)=>{if(vd(u))return u.critical.draggable.id===d.draggableId?null:a(d.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===d.draggableId?null:a(d.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const Z7=()=>{const e=F7(),t=Y7();return(i,a)=>e(i,a)||t(i,a)||q7},V7={dropAnimationFinished:tA},K7=kk(Z7,V7,null,{context:iv,areStatePropsEqual:xA})(U7);function EA(e){return Dm(ov).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(K7,e)}function Cc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,i=!!e.shouldRespectForcePress;return rn.createElement(EA,km({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}const TA=e=>t=>e===t,W7=TA("scroll"),X7=TA("auto"),yS=(e,t)=>t(e.overflowX)||t(e.overflowY),J7=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return yS(n,W7)||yS(n,X7)},Q7=()=>!1,kA=e=>e==null?null:e===document.body?Q7()?e:null:e===document.documentElement?null:J7(e)?e:kA(e.parentElement);var ay=e=>({x:e.scrollLeft,y:e.scrollTop});const AA=e=>e?window.getComputedStyle(e).position==="fixed"?!0:AA(e.parentElement):!1;var e4=e=>{const t=kA(e),n=AA(e);return{closestScrollable:t,isFixedOnPage:n}},t4=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:i,direction:a,client:l,page:u,closest:d})=>{const m=(()=>{if(!d)return null;const{scrollSize:x,client:w}=d,T=sA({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:w.paddingBox.height,width:w.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:w,scrollSize:x,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:T,diff:{value:Jn,displacement:Jn}}}})(),p=a==="vertical"?Yy:$k,g=Nc({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:i,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:g}};const n4=(e,t)=>{const n=jk(e);if(!t||e!==t)return n;const i=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,l=i+t.scrollHeight,u=a+t.scrollWidth,m=Hy({top:i,right:u,bottom:l,left:a},n.border);return Gy({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var r4=({ref:e,descriptor:t,env:n,windowScroll:i,direction:a,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:d})=>{const m=n.closestScrollable,p=n4(e,m),g=Tm(p,i),y=(()=>{if(!m)return null;const w=jk(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:w,page:Tm(w,i),scroll:ay(m),scrollSize:T,shouldClipSubject:d}})();return t4({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:a,client:p,page:g,closest:y})};const i4={passive:!1},s4={passive:!0};var vS=e=>e.shouldPublishImmediately?i4:s4;const _f=e=>e&&e.env.closestScrollable||null;function a4(e){const t=j.useRef(null),n=Dm(ap),i=sv("droppable"),{registry:a,marshal:l}=n,u=mA(e),d=At(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=j.useRef(d),p=At(()=>Wn((M,R)=>{t.current||He();const I={x:M,y:R};l.updateDroppableScroll(d.id,I)}),[d.id,l]),g=Je(()=>{const M=t.current;return!M||!M.env.closestScrollable?Jn:ay(M.env.closestScrollable)},[]),y=Je(()=>{const M=g();p(M.x,M.y)},[g,p]),x=At(()=>fd(y),[y]),w=Je(()=>{const M=t.current,R=_f(M);if(M&&R||He(),M.scrollOptions.shouldPublishImmediately){y();return}x()},[x,y]),T=Je((M,R)=>{t.current&&He();const I=u.current,G=I.getDroppableRef();G||He();const Y=e4(G),q={ref:G,descriptor:d,env:Y,scrollOptions:R};t.current=q;const J=r4({ref:G,descriptor:d,env:Y,windowScroll:M,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),V=Y.closestScrollable;return V&&(V.setAttribute(fS.contextId,n.contextId),V.addEventListener("scroll",w,vS(q.scrollOptions))),J},[n.contextId,d,w,u]),k=Je(()=>{const M=t.current,R=_f(M);return M&&R||He(),ay(R)},[]),A=Je(()=>{const M=t.current;M||He();const R=_f(M);t.current=null,R&&(x.cancel(),R.removeAttribute(fS.contextId),R.removeEventListener("scroll",w,vS(M.scrollOptions)))},[w,x]),D=Je(M=>{const R=t.current;R||He();const I=_f(R);I||He(),I.scrollTop+=M.y,I.scrollLeft+=M.x},[]),B=At(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:A,scroll:D}),[A,T,k,D]),N=At(()=>({uniqueId:i,descriptor:d,callbacks:B}),[B,d,i]);fi(()=>(m.current=N.descriptor,a.droppable.register(N),()=>{t.current&&A(),a.droppable.unregister(N)}),[B,d,A,N,l,a.droppable]),fi(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),fi(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function zg(){}const _S={width:0,height:0,margin:p5},o4=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?_S:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},l4=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const i=o4({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?ld.placeholder:null}},c4=e=>{const t=j.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:i,onTransitionEnd:a,onClose:l,contextId:u}=e,[d,m]=j.useState(e.animate==="open");j.useEffect(()=>d?i!=="open"?(n(),m(!1),zg):t.current?zg:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):zg,[i,d,n]);const p=Je(y=>{y.propertyName==="height"&&(a(),i==="close"&&l())},[i,l,a]),g=l4({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:g,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var u4=rn.memo(c4);class d4 extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const h4=e=>{const t=j.useContext(ap);t||He();const{contextId:n,isMovementAllowed:i}=t,a=j.useRef(null),l=j.useRef(null),{children:u,droppableId:d,type:m,mode:p,direction:g,ignoreContainerClipping:y,isDropDisabled:x,isCombineEnabled:w,snapshot:T,useClone:k,updateViewportMaxScroll:A,getContainerForClone:D}=e,B=Je(()=>a.current,[]),N=Je((V=null)=>{a.current=V},[]);Je(()=>l.current,[]);const M=Je((V=null)=>{l.current=V},[]),R=Je(()=>{i()&&A({maxScroll:oA()})},[i,A]);a4({droppableId:d,type:m,mode:p,direction:g,isDropDisabled:x,isCombineEnabled:w,ignoreContainerClipping:y,getDroppableRef:B});const I=At(()=>rn.createElement(d4,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:V,data:Z,animate:ee})=>rn.createElement(u4,{placeholder:Z,onClose:V,innerRef:M,animate:ee,contextId:n,onTransitionEnd:R})),[n,R,e.placeholder,e.shouldAnimatePlaceholder,M]),G=At(()=>({innerRef:N,placeholder:I,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":n}}),[n,d,I,N]),Y=k?k.dragging.draggableId:null,q=At(()=>({droppableId:d,type:m,isUsingCloneFor:Y}),[d,Y,m]);function J(){if(!k)return null;const{dragging:V,render:Z}=k,ee=rn.createElement(EA,{draggableId:V.draggableId,index:V.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(te,we)=>Z(te,we,V));return WD.createPortal(ee,D())}return rn.createElement(ov.Provider,{value:q},u(G,T),J())};function f4(){return document.body||He(),document.body}const xS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:f4},jA=e=>{let t={...e},n;for(n in xS)e[n]===void 0&&(t={...t,[n]:xS[n]});return t},Ug=(e,t)=>e===t.droppable.type,wS=(e,t)=>t.draggables[e.draggable.id],m4=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Wn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),i=Wn((l,u,d,m,p,g)=>{const y=p.descriptor.id;if(p.descriptor.droppableId===l){const T=g?{render:g,dragging:n(p.descriptor)}:null,k={isDraggingOver:d,draggingOverWith:d?y:null,draggingFromThisWith:y,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const w={isDraggingOver:d,draggingOverWith:y,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:w,useClone:null}});return(l,u)=>{const d=jA(u),m=d.droppableId,p=d.type,g=!d.isDropDisabled,y=d.renderClone;if(vd(l)){const x=l.critical;if(!Ug(p,x))return t;const w=wS(x,l.dimensions),T=hi(l.impact)===m;return i(m,g,T,T,w,y)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!Ug(p,x.critical))return t;const w=wS(x.critical,l.dimensions);return i(m,g,wA(x.result)===m,hi(x.impact)===m,w,y)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!Ug(p,x.critical))return t;const w=hi(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return w?T?e:t:k?e:t}return t}},p4={updateViewportMaxScroll:AB},ul=kk(m4,p4,(e,t,n)=>({...jA(n),...e,...t}),{context:iv,areStatePropsEqual:xA})(h4),g4={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function Cm(e,t,n){const i=g4[e];if(!i)return!1;const a=new Date(e,t-1,n,0,0,0,0);return a>=i.start&&a<i.end}function b4(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),a=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),d=e.getUTCSeconds(),m=(l-12)/24+u/1440+d/86400,p=2*Math.PI/365*(a-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function y4(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function yl(e,t,n=!1){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(i.getTime()-1800*1e3);if(t==null||!isFinite(t))return i;let a=t;Math.abs(a)<=Math.PI+1e-6&&(a=a*180/Math.PI),a=(a+540)%360-180;const l=y4(a),u=4*(a-l),d=b4(i);return new Date(i.getTime()+(u+d)*60*1e3)}var lm={exports:{}},v4=lm.exports,SS;function _4(){return SS||(SS=1,(function(e,t){(function(n,i){e.exports=i()})(v4,function(){return(function(n){function i(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,i),u.l=!0,u.exports}var a={};return i.m=n,i.c=a,i.d=function(l,u,d){i.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:d})},i.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(u,"a",u),u},i.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},i.p="",i(i.s=0)})([function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0});var l=a(1),u=(function(d){return d&&d.__esModule?d:{default:d}})(l);i.default=u.default,n.exports=i.default},function(n,i,a){function l(ee){return ee&&ee.__esModule?ee:{default:ee}}Object.defineProperty(i,"__esModule",{value:!0});var u=a(2),d=l(u),m=a(3),p=l(m),g=a(4),y=l(g),x=a(5),w=l(x),T=a(6),k=l(T),A=a(7),D=l(A),B=a(8),N=l(B),M=a(9),R=l(M),I=a(10),G=l(I),Y=a(11),q=l(Y),J=a(12),V=l(J),Z={lunarInfo:d.default,solarMonth:p.default,gan:y.default,zhi:w.default,animals:k.default,lunarTerm:D.default,lTermInfo:N.default,nStr1:R.default,nStr2:G.default,nStr3:q.default,nStr4:V.default,lYearDays:function(ee){var te,we=348;for(te=32768;te>8;te>>=1)we+=Z.lunarInfo[ee-1900]&te?1:0;return we+Z.leapDays(ee)},leapMonth:function(ee){return 15&Z.lunarInfo[ee-1900]},leapDays:function(ee){return Z.leapMonth(ee)?65536&Z.lunarInfo[ee-1900]?30:29:0},monthDays:function(ee,te){return te>12||te<1?-1:Z.lunarInfo[ee-1900]&65536>>te?30:29},solarDays:function(ee,te){if(te>12||te<1)return-1;var we=te-1;return we==1?ee%4==0&&ee%100!=0||ee%400==0?29:28:Z.solarMonth[we]},toGanZhi:function(ee){return Z.gan[ee%10]+Z.zhi[ee%12]},getTerm:function(ee,te){if(ee<1900||ee>2100||te<1||te>24)return-1;var we=Z.lTermInfo[ee-1900],X=[parseInt("0x"+we.substr(0,5)).toString(),parseInt("0x"+we.substr(5,5)).toString(),parseInt("0x"+we.substr(10,5)).toString(),parseInt("0x"+we.substr(15,5)).toString(),parseInt("0x"+we.substr(20,5)).toString(),parseInt("0x"+we.substr(25,5)).toString()],ae=[X[0].substr(0,1),X[0].substr(1,2),X[0].substr(3,1),X[0].substr(4,2),X[1].substr(0,1),X[1].substr(1,2),X[1].substr(3,1),X[1].substr(4,2),X[2].substr(0,1),X[2].substr(1,2),X[2].substr(3,1),X[2].substr(4,2),X[3].substr(0,1),X[3].substr(1,2),X[3].substr(3,1),X[3].substr(4,2),X[4].substr(0,1),X[4].substr(1,2),X[4].substr(3,1),X[4].substr(4,2),X[5].substr(0,1),X[5].substr(1,2),X[5].substr(3,1),X[5].substr(4,2)];return parseInt(ae[te-1])},toChinaYear:function(ee){var te=parseInt(ee/1e3),we=parseInt(ee%1e3/100),X=parseInt(ee%100/10),ae=ee%10;return Z.nStr4[te]+Z.nStr4[we]+Z.nStr4[X]+Z.nStr4[ae]+""},toChinaMonth:function(ee){if(ee>12||ee<1)return-1;var te=Z.nStr3[ee-1];return te+=""},toChinaDay:function(ee){var te;switch(ee){case 10:te="";break;case 20:te="";break;case 30:te="";break;default:te=Z.nStr2[Math.floor(ee/10)],te+=Z.nStr1[ee%10]}return te},getAnimal:function(ee){return Z.animals[(ee-4)%12]},solar2lunar:function(me,Q,H){if(me<1900||me>2100||me==1900&&Q==1&&H<31)return-1;if(me)var X=new Date(me,parseInt(Q)-1,H);else var X=new Date;var ae,ce=0,ne=0,me=X.getFullYear(),Q=X.getMonth()+1,H=X.getDate(),P=(Date.UTC(X.getFullYear(),X.getMonth(),X.getDate())-Date.UTC(1900,0,31))/864e5;for(ae=1900;ae<2101&&P>0;ae++)ne=Z.lYearDays(ae),P-=ne;P<0&&(P+=ne,ae--);var K=new Date,W=!1;K.getFullYear()==me&&K.getMonth()+1==Q&&K.getDate()==H&&(W=!0);var z=X.getDay(),F=Z.nStr1[z];z==0&&(z=7);var oe=ae,ce=Z.leapMonth(ae),le=!1;for(ae=1;ae<13&&P>0;ae++)ce>0&&ae==ce+1&&le==0?(--ae,le=!0,ne=Z.leapDays(oe)):ne=Z.monthDays(oe,ae),le==1&&ae==ce+1&&(le=!1),P-=ne;P==0&&ce>0&&ae==ce+1&&(le?le=!1:(le=!0,--ae)),P<0&&(P+=ne,--ae);var ve=ae,Ae=P+1,je=Q-1,Ce=Z.getTerm(me,3),Ee=Z.toGanZhi(me-4),$e=new Date(me,1,Ce).getTime();new Date(me,je,H).getTime()<$e&&(Ee=Z.toGanZhi(me-5));var Me=Z.getTerm(me,2*Q-1),Pe=Z.getTerm(me,2*Q),Ie=Z.toGanZhi(12*(me-1900)+Q+11);H>=Me&&(Ie=Z.toGanZhi(12*(me-1900)+Q+12));var pe=!1,Le="";Me==H&&(pe=!0,Le=Z.lunarTerm[2*Q-2]),Pe==H&&(pe=!0,Le=Z.lunarTerm[2*Q-1]);var ue=Date.UTC(me,je,1,0,0,0,0)/864e5+25567+10,fe=Z.toGanZhi(ue+H-1);return{lYear:oe,lMonth:ve,lDay:Ae,animal:Z.getAnimal(oe),yearCn:Z.toChinaYear(oe),monthCn:(le&&ce===ve?"":"")+Z.toChinaMonth(ve),dayCn:Z.toChinaDay(Ae),cYear:me,cMonth:Q,cDay:H,gzYear:Ee,gzMonth:Ie,gzDay:fe,isToday:W,isLeap:le,nWeek:z,ncWeek:""+F,isTerm:pe,term:Le}},lunar2solar:function(ee,te,we,X){var ae=Z.leapMonth(ee);if(Z.leapDays(ee),X&&ae!=te||ee==2100&&te==12&&we>1||ee==1900&&te==1&&we<31)return-1;var ne=Z.monthDays(ee,te);if(ee<1900||ee>2100||we>ne)return-1;for(var me=0,Q=1900;Q<ee;Q++)me+=Z.lYearDays(Q);for(var H=0,P=!1,Q=1;Q<te;Q++)H=Z.leapMonth(ee),P||H<=Q&&H>0&&(me+=Z.leapDays(ee),P=!0),me+=Z.monthDays(ee,Q);X&&(me+=ne);var K=Date.UTC(1900,1,30,0,0,0),W=new Date(864e5*(me+we-31)+K),z=W.getUTCFullYear(),F=W.getUTCMonth()+1,oe=W.getUTCDate();return Z.solar2lunar(z,F,oe)}};i.default=Z,n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default}])})})(lm)),lm.exports}var NA=_4();const x4=pl(NA),lv=hE({__proto__:null,default:x4},[NA]);function oy(e){return typeof e=="object"&&e!==null}function w4(e){if(!oy(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,i=t.cMonth,a=t.cDay;if(typeof n!="number"||typeof i!="number"||typeof a!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:i,cDay:a,isLeap:typeof l=="boolean"?l:void 0}}function S4(e){const t=oy(e)&&"default"in e?e.default:e;if(!oy(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(i,a,l)=>w4(n(i,a,l,!1))}const E4=S4(lv);function lp(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),i=Number(e.birthDay.slice(4,6)),a=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const B=E4(n,i,a);n=B.cYear,i=B.cMonth,a=B.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),d=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,i-1,a,u,d,0,0),g=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",y=yl(p,m,g),x=l?"":y.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=dt(y,m),T=jt(y,m),k=xt(y,t),A=l?null:zi(y,t),D=[` : ${w} ${T} ${k}`,A?`${A}`:null].filter(Boolean).join(" ");return{corrected:y,correctedLocal:x,ganji:D}}function cv(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function ES(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(i=>i.endsWith(""));return n&&n.length>0?n.charAt(0):null}function TS(e){const t=cv(e.gender),n=ES(e.ganjiText)??ES(e.ganji);if(!n)return"forward";const a=["","","","",""].includes(n),l=t==="";return a&&!l||!a&&l?"forward":"backward"}function T4(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date(NaN),i={...e,dateObj:t,corrected:n};try{const a=lp(i),l={...i,...a},u=TS(l);return{...l,dir:u}}catch(a){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",a);const l=TS(i);return{...i,dir:l}}}function k4(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),i=typeof n=="number"&&Number.isFinite(n)?n:void 0,a={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:cv(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,sortOrder:i,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return T4(a)}function xf(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5},i=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:cv(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,sort_order:i,updated_at:new Date().toISOString()}}const os=Od((e,t)=>({currentId:null,list:[],loading:!0,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:i}=await st.auth.getUser();if(i||!n){console.error("loadFromServer: user not found / error",i),e({list:[],currentId:null,loading:!1});return}const l=await st.from("myeongsik").select("id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at"+", sort_order").order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1}),u=l.data,d=l.error;if(d||!u){console.error("loadFromServer error:",d),e({loading:!1});return}const p=u.filter(x=>x.user_id===n.id).map(k4),g=t().currentId,y=g&&p.some(x=>x.id===g)?g:p[0]?.id??null;e({list:p,currentId:y,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let i;try{i=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const a=i.state??{},l=Array.isArray(a.list)?a.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:d}=await st.auth.getUser();if(d||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await st.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const g=new Set((m??[]).map(T=>T.id)),y=l.filter(T=>!!T&&!g.has(T.id));if(y.length===0){window.localStorage.removeItem("myeongsik-list");return}const x=y.map(T=>xf(T,u.id)),{error:w}=await st.from("myeongsik").upsert(x,{onConflict:"id"});if(w){console.error("migrateLocalToServer upsert error:",w);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const i=(t().list.length||0)+1,a={...n,sortOrder:n.sortOrder??i},{data:{user:l},error:u}=await st.auth.getUser();if(u||!l){console.error("add: user not found",u);return}e(p=>({list:[...p.list,a],currentId:p.currentId??a.id}));const d=xf(a,l.id),{error:m}=await st.from("myeongsik").upsert(d,{onConflict:"id"});m&&console.error("add upsert error:",m)},update:async(n,i)=>{const a=t().list.find(g=>g.id===n);if(!a)return;const l={...a,...i};e(g=>({list:g.list.map(y=>y.id===n?l:y)}));const{data:{user:u},error:d}=await st.auth.getUser();if(d||!u){console.error("update: user not found",d);return}const m=xf(l,u.id),{error:p}=await st.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(a=>{const l=a.list.filter(d=>d.id!==n),u=a.currentId===n?l[0]?.id??null:a.currentId;return{list:l,currentId:u}});const{error:i}=await st.from("myeongsik").delete().eq("id",n);i&&console.error("remove error:",i)},reorder:async n=>{const i=n.map((m,p)=>({...m,sortOrder:p+1}));e({list:i});const{data:{user:a},error:l}=await st.auth.getUser();if(l||!a){console.error("reorder: user not found",l);return}const u=i.map(m=>xf(m,a.id)),{error:d}=await st.from("myeongsik").upsert(u,{onConflict:"id"});d&&console.error("reorder upsert error:",d)},clear:()=>{e({currentId:null,list:[]})}})),kS="__custom__",AS=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],OA=({value:e,onChange:t})=>{const[n,i]=j.useState(AS),[a,l]=j.useState(""),[u,d]=j.useState(!1),[m,p]=j.useState(""),[g,y]=j.useState(!1),{list:x}=os(),T=x.some(N=>N.relationship==="")?n.filter(N=>N.value!==""):n;j.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=N=>{const M=N.target.value;M===kS?(d(!0),l(""),t?.("")):(d(!1),p(""),l(M),t?.(M))};j.useEffect(()=>{const N=localStorage.getItem("relationshipOptions");N&&i(JSON.parse(N))},[]),j.useEffect(()=>{(async()=>{const{data:{user:M},error:R}=await st.auth.getUser();if(R||!M)return;const{data:I,error:G}=await st.from("user_settings").select("payload").eq("user_id",M.id).single();if(G&&G.code!=="PGRST116"){console.error("load relationships settings error",G.message);return}const Y=I?.payload?.relationshipOptions;if(!Array.isArray(Y))return;const q=Y.map(J=>J&&typeof J=="object"&&typeof J.value=="string"&&typeof J.label=="string"?{value:J.value,label:J.label}:typeof J=="string"?{value:J,label:J}:null).filter(J=>!!J);q.length&&i(J=>{const V=new Set,Z=[...q,...J,...AS].filter(ee=>V.has(ee.value)?!1:(V.add(ee.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(Z)),Z})})()},[]),j.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:M},error:R}=await st.auth.getUser();if(R||!M)return;const{data:I,error:G}=await st.from("user_settings").select("payload").eq("user_id",M.id).single();if(G&&G.code!=="PGRST116"){console.error("load relationships settings error",G.message);return}const Y={...I?.payload??{},relationshipOptions:n},{error:q}=await st.from("user_settings").upsert({user_id:M.id,payload:Y,updated_at:new Date().toISOString()});q&&console.error("save relationships settings error",q.message)})()},[n]);const A=()=>{const N=m.trim();if(!N)return;const M={value:N,label:N};i(R=>[...R,M]),l(N),t?.(N),p(""),d(!1)},D=N=>{i(n.filter(M=>M.value!==N)),a===N&&l("")},B=N=>{if(!N.destination)return;const M=Array.from(n),[R]=M.splice(N.source.index,1);M.splice(N.destination.index,0,R),i(M)};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"rel_set flex items-center gap-2",children:[b.jsxs("select",{name:"relationship",id:"relationship",value:a,onChange:k,children:[b.jsx("option",{value:"",hidden:!0,children:""}),T.map(N=>b.jsx("option",{value:N.value,children:N.label},N.value)),b.jsx("option",{value:kS,children:" "})]}),b.jsx("button",{type:"button",onClick:()=>y(!0),className:"btn_style",children:""})]}),u&&!g&&b.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[b.jsx("input",{type:"text",placeholder:" ",value:m,onChange:N=>p(N.target.value)}),b.jsx("button",{type:"button",onClick:A,className:"btn_style",children:""})]}),g&&b.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[b.jsx("h4",{className:"font-bold mb-2",children:" "}),b.jsx(Bd,{onDragEnd:B,children:b.jsx(ul,{droppableId:"relList",children:N=>b.jsxs("ul",{ref:N.innerRef,...N.droppableProps,className:"space-y-1",children:[n.map((M,R)=>b.jsx(Cc,{draggableId:M.value,index:R,children:I=>b.jsxs("li",{ref:I.innerRef,...I.draggableProps,...I.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[b.jsx("span",{className:"cursor-grab mr-2",children:""}),b.jsx("span",{className:"flex-1 pr-1",children:M.label}),b.jsx("button",{type:"button",className:"text-red-500",onClick:()=>D(M.value),children:""})]})},M.value)),N.placeholder]})})}),b.jsx("button",{type:"button",onClick:()=>y(!1),className:"w-full btn_style mt-2",children:""})]})]})},pn=" ",DA=["","","","","",""],CA="ms_folders",MA="ms_folder_order",jS="ms_folder_favs",ly="ms_disabled_presets",fl="myeoun:folder-updated";function dl(e){if(e!==pn)return e||void 0}function cp(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(i=>typeof i=="string"):[]}catch{return[]}}function uv(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function A4(){const e=cp(ly);return DA.filter(t=>!e.includes(t))}function dv(){return cp(CA)}function hv(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];uv(CA,t),typeof window<"u"&&window.dispatchEvent(new Event(fl))}function cm(){const e=A4(),t=dv(),n=new Set,i=[];for(const a of[...e,...t])n.has(a)||(n.add(a),i.push(a));return i}function j4(){return[pn,...cm()]}function RA(e){const t=e.trim();if(!t||t===pn)return;const n=dv();if(n.includes(t))return;const i=[...n,t];hv(i)}function N4(e){const t=dv(),n=t.filter(i=>i!==e);n.length!==t.length&&hv(n)}function O4(e){const t=cp(ly);if(t.includes(e))return;const n=[...t,e];uv(ly,n),typeof window<"u"&&window.dispatchEvent(new Event(fl))}function um(){return cp(MA)}function vc(e){uv(MA,e),typeof window<"u"&&window.dispatchEvent(new Event(fl))}function rd(e,t){const n=new Set(e),i=[];for(const a of t)n.has(a)&&!i.includes(a)&&i.push(a);for(const a of e)i.includes(a)||i.push(a);return i}function D4(e){return Array.from(new Set(e))}function wf(e){const t=e.filter(n=>n!==pn);return{rest:t,withUnassigned:[pn,...t]}}function C4(e,t){return rd(t,e)}function M4({value:e,onChange:t}){const[n,i]=j.useState([pn]),[a,l]=j.useState(!1),[u,d]=j.useState(""),[m,p]=j.useState(!1),g=j.useCallback(async A=>{const{data:{user:D},error:B}=await st.auth.getUser();if(B||!D)return;const N=A.map((R,I)=>({user_id:D.id,folder_name:R,sort_order:I+1,updated_at:new Date().toISOString()})),{error:M}=await st.from("user_folder_order").upsert(N,{onConflict:"user_id,folder_name"});M&&console.error("save folder order error",M.message)},[]),y=j.useCallback(()=>{if(typeof window>"u")return;const A=D4(j4()),D=A.includes(pn)?A:[pn,...A],{rest:B}=wf(D),N=um(),M=C4(N,B),R=[pn,...M];i(R),N.length===M.length&&N.every((G,Y)=>G===M[Y])||(vc(M),g(M))},[g]);j.useEffect(()=>{if(y(),typeof window<"u"){const A=()=>y();return window.addEventListener(fl,A),()=>window.removeEventListener(fl,A)}},[y]);const x=j.useMemo(()=>e||pn,[e]),w=A=>{const{rest:D}=wf(A);vc(D),g(D)},T=A=>{const{source:D,destination:B}=A;if(!B||B.index===D.index)return;const{rest:N}=wf(n),M=Array.from(N),[R]=M.splice(D.index,1);M.splice(B.index,0,R);const I=[pn,...M];i(I),w(I)},k=A=>{const D=dl(A);D&&(RA(D),y())};return b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:a?"__custom__":x,onChange:A=>{const D=A.target.value;if(D==="__custom__"){l(!0),t(void 0);return}l(!1),t(dl(D))},children:[n.map(A=>b.jsx("option",{value:A,children:A},A)),b.jsx("option",{value:"__custom__",children:"+   "})]}),b.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(A=>!A),children:m?" ":" "})]}),a&&b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),b.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const A=u.trim();A&&(k(A),t(dl(A)),l(!1),d(""))},children:""})]}),m&&b.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[b.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),b.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[b.jsx("span",{className:"opacity-60 select-none",children:""}),b.jsxs("span",{className:"flex-1 px-2",children:[pn," ()"]})]}),b.jsx(Bd,{onDragEnd:T,children:b.jsx(ul,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:A=>b.jsxs("ul",{ref:A.innerRef,...A.droppableProps,className:"space-y-1",children:[wf(n).rest.map((D,B)=>b.jsx(Cc,{draggableId:D,index:B,children:N=>b.jsxs("li",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[b.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),b.jsx("span",{className:"flex-1 pr-1",children:D})]})},D)),A.placeholder]})})})]}),b.jsxs("p",{className:"text-xs text-gray-500",children:['   "',pn,'" .      .']})]})}function LA({message:e,onClose:t,ms:n=2e3}){return j.useEffect(()=>{const i=setTimeout(t,n);return()=>clearTimeout(i)},[t,n]),b.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function up(e){return typeof e=="object"&&e!==null}function R4(e){return up(e)&&"default"in e}function L4(e){return up(e)&&typeof e.lunar2solar=="function"}function B4(e){if(!up(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,a=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof a=="boolean"?a:void 0}}function P4(e){const t=R4(e)?e.default:e;if(!L4(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,a,l,u)=>{const d=t.lunar2solar(i,a,l,u);return B4(d)}}}const $4=P4(lv);function yr(e,t,n,i=4,a=0){const l=$4.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,i,a)}const Zu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],Vu=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],Sf=["","/",""],Ef=["",""];function Hg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function Gg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function I4({onSave:e,onClose:t}){const{add:n}=os(),[i,a]=j.useState(0),[l,u]=j.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[d,m]=j.useState(null),[p,g]=j.useState(!1),[y,x]=j.useState(!1),w=Zu[i],T=M=>m(M);j.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(w.key)){const R=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(R){R.focus();return}}if(w.key==="mingSikType"){const R=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(R){R.focus();return}}if(w.key==="gender"){const R=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(R){R.focus();return}}if(l.birthPlace||y){const R=()=>{const I=document.querySelector(".current-step form button[type='submit']");I&&I.focus()};R(),setTimeout(R,0)}else{const R=document.getElementById("inputBirthPlaceBtn");R&&R.focus()}if(w.key==="relationship"){setTimeout(()=>{const R=document.querySelector(".current-step select");R&&R.focus()},0);return}if(w.key==="folder"){setTimeout(()=>{const R=document.querySelector(".current-step select");R&&R.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[y,i,w.key,l.birthPlace]);const k=j.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const M=Number(l.birthDay.slice(0,4)),R=Number(l.birthDay.slice(4,6)),I=Number(l.birthDay.slice(6,8)),G=yr(M,R,I);return`  ${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}-${String(G.getDate()).padStart(2,"0")}`}catch(M){const R=M instanceof Error?M.message:void 0;return`  ${R?`: ${R}`:""}`}},[l.calendarType,l.birthDay]),A=()=>{const M=Zu[i];if(M.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),M.key==="birthDay"){const R=/^\d{8}$/;if(!l.birthDay||!R.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const I=Number(l.birthDay.substring(0,4)),G=Number(l.birthDay.substring(4,6)),Y=Number(l.birthDay.substring(6,8));if(I<1900||I>2100)return T("  1900~2100  ."),!1;if(G<1||G>12)return T("  01~12  ."),!1;if(Y<1||Y>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const q=new Date(I,G-1,Y);if(q.getFullYear()!==I||q.getMonth()+1!==G||q.getDate()!==Y)return T("  ."),!1}else try{yr(I,G,Y)}catch(q){return T(q instanceof Error?q.message:"   ."),!1}}if(M.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const R=Number(l.birthTime);if(Number.isNaN(R)||R<0||R>2359)return T("  00002359  ."),!1;const I=Number(l.birthTime.slice(0,2)),G=Number(l.birthTime.slice(2,4));if(I>23||G>59)return T("  00002359  ."),!1}}return M.key==="birthPlace"&&!l.birthPlace&&!y?(T("   ''  ."),!1):!0},D=()=>{if(!A())return;if(i<Zu.length-1){a(i+1);return}const M=dl(l.folder),R=!l.birthTime||l.birthTime==="",I=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let G=Number(l.birthDay.slice(0,4)),Y=Number(l.birthDay.slice(4,6)),q=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const F=yr(G,Y,q);G=F.getFullYear(),Y=F.getMonth()+1,q=F.getDate()}const J=R?4:Number(l.birthTime.slice(0,2)),V=R?30:Number(l.birthTime.slice(2,4)),Z=new Date(G,Y-1,q,J,V,0,0),ee=y||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,te=yl(Z,ee,I),we=l.mingSikType??"/",X=R?"":te.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),ae=dt(te,ee),ne=jt(te,ee),me=xt(te,we),Q=R?null:zi(te,we),H=[` : ${ae} ${ne} ${me}`,Q?`${Q}`:null].filter(Boolean).join(" ");function P(F,oe){const le=["","","","","","","","","",""].includes(F),ve=oe==="";return le?ve?"forward":"backward":ve?"backward":"forward"}const K=ae.charAt(0),W=P(K,l.gender??""),z={id:bk(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:R?"":l.birthTime||"",gender:l.gender??"",birthPlace:y?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:M,correctedLocal:X,ganji:H,calendarType:l.calendarType??"solar",dir:W,corrected:te,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(z),e(z),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),g(!1),x(!1),a(0)},B=M=>{if(M.key!=="Enter")return;const R=M.target,I=R.getAttribute("role");if(I==="radio"||I==="checkbox")return;const G=document.getElementById("mapModal");if(G&&G.contains(R))return;const Y=R.tagName.toLowerCase(),q=R instanceof HTMLInputElement?R.type:"";if(Y==="textarea"){if(M.shiftKey)return;M.preventDefault(),D();return}if(q==="radio"||q==="checkbox"){M.preventDefault(),R instanceof HTMLInputElement&&R.click();return}Y==="button"&&R.type!=="submit"||(M.preventDefault(),D())},N=M=>{switch(M){case"birthPlace":return y?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):pn;default:{const I=l[M];return typeof I=="string"?I:I!=null?String(I):""}}};return b.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[d&&b.jsx(LA,{message:d,onClose:()=>m(null)}),Zu.slice(0,i).map((M,R)=>b.jsxs("button",{onClick:()=>a(R),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[b.jsx("span",{className:"font-semibold",children:M.label}),b.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:N(M.key)})]},M.key)),b.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:b.jsxs("form",{onSubmit:M=>{M.preventDefault(),D()},onKeyDown:B,children:[b.jsx("label",{className:"block mb-2 font-bold",children:w.label}),w.key==="name"&&b.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:w.placeholder,value:l.name||"",onChange:M=>u({...l,name:M.target.value})}),w.key==="birthDay"&&b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex gap-1 items-center",children:[b.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:w.placeholder,value:l.birthDay||"",onChange:M=>{const R=M.target.value.replace(/\D/g,"");u({...l,birthDay:R.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),b.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:Vu.map(({value:M,label:R,id:I})=>{const G=l.calendarType===M;return b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{id:I,name:"calendarType",type:"radio",style:{display:"none"}}),b.jsx("label",{htmlFor:I,id:`${I}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:Y=>{if(Y.stopPropagation(),Y.key===" "||Y.key==="Enter"){Y.preventDefault(),u({...l,calendarType:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(Y.key))return;Y.preventDefault();const J=Vu.findIndex(ee=>ee.value===l.calendarType),V=Hg(J<0?0:J,Vu.length,Y.key),Z=Vu[V].value;u({...l,calendarType:Z}),Gg(`${Vu[V].id}_lbl`)},onClick:Y=>{Y.preventDefault(),u({...l,calendarType:M})},children:R})]},M)})})]}),l.calendarType==="lunar"&&b.jsx("div",{className:"flex items-center justify-end",children:b.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const M=Number(l.birthDay.slice(0,4)),R=Number(l.birthDay.slice(4,6)),I=Number(l.birthDay.slice(6,8));return Cm(M,R,I)?b.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),w.key==="birthTime"&&b.jsxs("div",{className:"space-y-2",children:[b.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:w.placeholder,value:p?"":l.birthTime||"",onChange:M=>{const R=M.target.value.replace(/\D/g,"");u({...l,birthTime:R.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),b.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:M=>{M.stopPropagation(),(M.key===" "||M.key==="Enter")&&(M.preventDefault(),g(!p))},onClick:M=>{M.preventDefault(),g(!p)},children:""})]})]}),w.key==="mingSikType"&&b.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:Sf.map(M=>{const R=`ming_${M}`,I=(l.mingSikType??"/")===M;return b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{id:R,name:"mingSikType",type:"radio",style:{display:"none"}}),b.jsxs("label",{htmlFor:R,id:`${R}_lbl`,role:"radio","aria-checked":I,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":I?"true":"false",onKeyDown:G=>{if(G.stopPropagation(),G.key===" "||G.key==="Enter"){G.preventDefault(),u({...l,mingSikType:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(G.key))return;G.preventDefault();const q=l.mingSikType??"/",J=Sf.indexOf(q),V=Hg(J,Sf.length,G.key),Z=Sf[V];u({...l,mingSikType:Z}),Gg(`ming_${Z}_lbl`)},onClick:G=>{G.preventDefault(),u({...l,mingSikType:M})},children:[M,""]})]},M)})}),w.key==="gender"&&b.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:Ef.map(M=>{const R=`gender_${M}`,I=(l.gender??"")===M;return b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{id:R,name:"gender",type:"radio",style:{display:"none"}}),b.jsx("label",{htmlFor:R,id:`${R}_lbl`,role:"radio","aria-checked":I,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":I?"true":"false",onKeyDown:G=>{if(G.stopPropagation(),G.key===" "||G.key==="Enter"){G.preventDefault(),u({...l,gender:M});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(G.key))return;G.preventDefault();const q=l.gender??"",J=Ef.indexOf(q),V=Hg(J,Ef.length,G.key),Z=Ef[V];u({...l,gender:Z}),Gg(`gender_${Z}_lbl`)},onClick:G=>{G.preventDefault(),u({...l,gender:M})},children:M})]},M)})}),w.key==="birthPlace"&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(yk,{onSelect:M=>u({...l,birthPlace:M}),value:y?"":l.birthPlace?.name??""}),b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),b.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":y,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":y?"true":"false",onKeyDown:M=>{M.stopPropagation(),(M.key===" "||M.key==="Enter")&&(M.preventDefault(),x(!y))},onClick:M=>{M.preventDefault(),x(!y)},children:""})]})]}),w.key==="relationship"&&b.jsx(OA,{value:l.relationship||"",onChange:M=>u({...l,relationship:M})}),w.key==="folder"&&b.jsx(M4,{value:dl(l.folder),onChange:M=>u({...l,folder:M})}),w.key==="memo"&&b.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:w.placeholder,value:l.memo||"",onChange:M=>u({...l,memo:M.target.value})}),b.jsxs("div",{className:"flex justify-between gap-2",children:[b.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),b.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:i===Zu.length-1?"":""})]})]})})]})}var Tf={},NS;function z4(){if(NS)return Tf;NS=1,Tf.match=l,Tf.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function l(g,y){return u(g).some(function(x){var w=x.inverse,T=x.type==="all"||y.type===x.type;if(T&&w||!(T||w))return!1;var k=x.expressions.every(function(A){var D=A.feature,B=A.modifier,N=A.value,M=y[D];if(!M)return!1;switch(D){case"orientation":case"scan":return M.toLowerCase()===N.toLowerCase();case"width":case"height":case"device-width":case"device-height":N=p(N),M=p(M);break;case"resolution":N=m(N),M=m(M);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":N=d(N),M=d(M);break;case"grid":case"color":case"color-index":case"monochrome":N=parseInt(N,10)||1,M=parseInt(M,10)||0;break}switch(B){case"min":return M>=N;case"max":return M<=N;default:return M===N}});return k&&!w||!k&&w})}function u(g){return g.split(",").map(function(y){y=y.trim();var x=y.match(e),w=x[1],T=x[2],k=x[3]||"",A={};return A.inverse=!!w&&w.toLowerCase()==="not",A.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],A.expressions=k.map(function(D){var B=D.match(t),N=B[1].toLowerCase().match(n);return{modifier:N[1],feature:N[2],value:B[2]}}),A})}function d(g){var y=Number(g),x;return y||(x=g.match(/^(\d+)\s*\/\s*(\d+)$/),y=x[1]/x[2]),y}function m(g){var y=parseFloat(g),x=String(g).match(a)[1];switch(x){case"dpcm":return y/2.54;case"dppx":return y*96;default:return y}}function p(g){var y=parseFloat(g),x=String(g).match(i)[1];switch(x){case"em":return y*16;case"rem":return y*16;case"cm":return y*96/2.54;case"mm":return y*96/2.54/10;case"in":return y*96;case"pt":return y*72;case"pc":return y*72/12;default:return y}}return Tf}var Fg,OS;function U4(){if(OS)return Fg;OS=1;var e=z4().match,t=typeof window<"u"?window.matchMedia:null;function n(a,l,u){var d=this,m;t&&!u&&(m=t.call(window,a)),m?(this.matches=m.matches,this.media=m.media,m.addListener(y)):(this.matches=e(a,l),this.media=a),this.addListener=p,this.removeListener=g,this.dispose=x;function p(w){m&&m.addListener(w)}function g(w){m&&m.removeListener(w)}function y(w){d.matches=w.matches,d.media=w.media}function x(){m&&m.removeListener(y)}}function i(a,l,u){return new n(a,l,u)}return Fg=i,Fg}var H4=U4();const G4=pl(H4);var F4=/[A-Z]/g,q4=/^ms-/,qg={};function Y4(e){return"-"+e.toLowerCase()}function BA(e){if(qg.hasOwnProperty(e))return qg[e];var t=e.replace(F4,Y4);return qg[e]=q4.test(t)?"-"+t:t}function Z4(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t),a=n.length;if(i.length!==a)return!1;for(let l=0;l<a;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var Yg={exports:{}},Zg,DS;function V4(){if(DS)return Zg;DS=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zg=e,Zg}var Vg,CS;function K4(){if(CS)return Vg;CS=1;var e=V4();function t(){}function n(){}return n.resetWarningCache=t,Vg=function(){function i(u,d,m,p,g,y){if(y!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function a(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Vg}var MS;function W4(){return MS||(MS=1,Yg.exports=K4()()),Yg.exports}var X4=W4();const Lt=pl(X4),Ar=Lt.oneOfType([Lt.string,Lt.number]),PA={all:Lt.bool,grid:Lt.bool,aural:Lt.bool,braille:Lt.bool,handheld:Lt.bool,print:Lt.bool,projection:Lt.bool,screen:Lt.bool,tty:Lt.bool,tv:Lt.bool,embossed:Lt.bool},J4={orientation:Lt.oneOf(["portrait","landscape"]),scan:Lt.oneOf(["progressive","interlace"]),aspectRatio:Lt.string,deviceAspectRatio:Lt.string,height:Ar,deviceHeight:Ar,width:Ar,deviceWidth:Ar,color:Lt.bool,colorIndex:Lt.bool,monochrome:Lt.bool,resolution:Ar,type:Object.keys(PA)},{type:jF,...Q4}=J4,e$={minAspectRatio:Lt.string,maxAspectRatio:Lt.string,minDeviceAspectRatio:Lt.string,maxDeviceAspectRatio:Lt.string,minHeight:Ar,maxHeight:Ar,minDeviceHeight:Ar,maxDeviceHeight:Ar,minWidth:Ar,maxWidth:Ar,minDeviceWidth:Ar,maxDeviceWidth:Ar,minColor:Lt.number,maxColor:Lt.number,minColorIndex:Lt.number,maxColorIndex:Lt.number,minMonochrome:Lt.number,maxMonochrome:Lt.number,minResolution:Ar,maxResolution:Ar,...Q4},t$={...PA,...e$};var n$={all:t$};const r$=e=>`not ${e}`,i$=(e,t)=>{const n=BA(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?r$(n):`(${n}: ${t})`},s$=e=>e.join(" and "),a$=e=>{const t=[];return Object.keys(n$.all).forEach(n=>{const i=e[n];i!=null&&t.push(i$(n,i))}),s$(t)},o$=j.createContext(void 0),l$=e=>e.query||a$(e),RS=e=>e?Object.keys(e).reduce((n,i)=>(n[BA(i)]=e[i],n),{}):void 0,$A=()=>{const e=j.useRef(!1);return j.useEffect(()=>{e.current=!0},[]),e.current},c$=e=>{const t=j.useContext(o$),n=()=>RS(e)||RS(t),[i,a]=j.useState(n);return j.useEffect(()=>{const l=n();Z4(i,l)||a(l)},[e,t]),i},u$=e=>{const t=()=>l$(e),[n,i]=j.useState(t);return j.useEffect(()=>{const a=t();n!==a&&i(a)},[e]),n},d$=(e,t)=>{const n=()=>G4(e,t||{},!!t),[i,a]=j.useState(n),l=$A();return j.useEffect(()=>{if(l){const u=n();return a(u),()=>{u&&u.dispose()}}},[e,t]),i},h$=e=>{const[t,n]=j.useState(e.matches);return j.useEffect(()=>{const i=a=>{n(a.matches)};return e.addListener(i),n(e.matches),()=>{e.removeListener(i)}},[e]),t},f$=(e,t,n)=>{const i=c$(t),a=u$(e);if(!a)throw new Error("Invalid or missing MediaQuery!");const l=d$(a,i),u=h$(l);return $A(),j.useEffect(()=>{},[u]),j.useEffect(()=>()=>{l&&l.dispose()},[]),u},IA=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Nr[t%10]}${Yr[t%12]}`);return e})();function m$(e){const t=IA.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function Mm(e,t,n=1){const i=m$(e),a=t==="forward"?n:-n;return IA[(i+a+60*1e3)%60]}const p$=60*1e3,g$=60*p$,b$=24*g$;function y$(e,t){const n=new Date(e.getTime()),i=n.getFullYear()+t,a=n.getMonth(),l=n.getDate();return new Date(Date.UTC(i,a,l,n.getUTCHours(),n.getUTCMinutes()))}function cy(e){const t=new Date(e);return t.setSeconds(0,0),t}function v$(e,t,n){const i=e.getHours(),a=n==="/"?(Math.floor((i+1)/2)*2-1+24)%24:(Math.floor(i/2)*2+1)%24,l=new Date(e);l.setHours(a,0,0,0);const u=new Date(l);u.setHours(a+2,0,0,0);const d=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?d:m}function zA(e,t,n,i=120,a="/"){const l=cy(e),u=v$(l,n,a),d=cy(new Date(l.getTime()+u*120)),m=y$(e,i).getTime(),p=[];let g=Mm(t,n,1);for(let y=d.getTime();y<=m;y+=10*b$)p.push({at:new Date(y),gz:g}),g=Mm(g,n,1);return{firstChange:d,events:p}}function UA(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return i=>i===n}function HA(e,t,n,i){const a=UA(i,n);let l=t;const u=[];for(const d of e.events){const m=d.gz.charAt(1);a(m)&&(l=Mm(l,n,1),u.push({at:d.at,gz:l}))}return{events:u}}function ls(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],i={deg:315,name:""},a=n.map(d=>({name:d.name,date:Fn(t,d.deg)})).concat([{name:i.name,date:Fn(t+1,i.deg)},{name:"",date:Fn(t+1,285)}]),l=Fn(t,315),u=Fn(t+1,315);return a.filter(d=>d.date>=l&&d.date<u).sort((d,m)=>d.date.getTime()-m.date.getTime())}const _$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},w$=e=>_$[e]??("".includes(e)?e:null),S$=e=>x$[e]??("".includes(e)?e:null);function LS(e){const t=w$(e[0]),n=S$(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function Pd(e,t,n,i=120,a){function l(N){return N instanceof Date||(N=new Date(N)),Math.floor((N.getHours()+1)%24/2)}function u(N){return["","","","","","","","","","","",""][l(N)]}function d(N,M,R){const I=N.charAt(0),G=N.charAt(1),Y=Nr.indexOf(I),q=Yr.indexOf(G),J=M==="forward"?R:-R,V=(Y+J%10+10)%10,Z=(q+J%12+12)%12;return Nr[V]+Yr[Z]}const m=ls(e).sort((N,M)=>N.date.getTime()-M.date.getTime());let p;if(n==="forward"){const N=m.findIndex(M=>M.date>=e);N>=0&&(p=m[N].date)}else{const N=m.filter(M=>M.date<=e);N.length&&(p=N[N.length-1].date)}function g(N,M){const R=u(N),I={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},G=I[R],Y=(G+2)%24,q=new Date(N);if(q.setSeconds(0,0),n==="backward"&&M){const V=u(M),Z=I[V],ee=new Date(M);return ee.setHours(Z,0,0,0),ee}if(n==="forward"&&M){const V=u(M),Z=I[V],ee=new Date(M);if(ee.setHours(Z,0,0,0),ee>q)return ee}const J=new Date(q);return n==="forward"?(J.setHours(Y,0,0,0),J<=q&&J.setDate(J.getDate()+1)):(J.setHours(G,0,0,0),J>=q&&J.setDate(J.getDate()-1)),J}new Date(e).setSeconds(0,0);const x=LS(jt(e,127.5)),w=g(e,p),T=Math.floor(n==="forward"?(w.getTime()-e.getTime())/6e4:(e.getTime()-w.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let A=new Date(e.getTime()+k);try{const N=LS(jt(e,a));(n==="forward"&&x!==N||n==="backward"&&x!==N)&&(A=new Date(e.getTime()+6e4))}catch{}const D=i/10,B=[];for(let N=0;N<D;N++){const M=new Date(A);M.setFullYear(M.getFullYear()+N*10),M.setSeconds(0,0);const R=d(t,n,N+1);B.push({at:M,gz:R})}return{natalMonthPillar:t,firstChange:A,mPillars:[],events:B}}function E$(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(i))}function GA(e,t,n,i,a){const l=UA(i,n);let u=t;const d=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=Mm(u,n,1),d.push({at:m.at,gz:u,age:E$(a,m.at)}))}return{events:d}}function T$(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let a=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(a=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,i,a,l,0,0)}function dp(e){const t=T$(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=yl(t,e.birthPlace?.lon??null,n);return cy(i)}function fv(e,t){const n=e.birthPlace?.lon??127.5,i=dp(e),a=xt(i,t),l=zi(i,t,a.charAt(0));return{year:dt(i,n),month:jt(i,n),day:a,hour:l}}const k$=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Nr[t%10]}${Yr[t%12]}`);return e})(),A$=e=>k$.indexOf(e),Kg=e=>{if(A$(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function mv(e){return typeof e=="object"&&e!==null}function j$(e){return mv(e)&&"default"in e}function N$(e){return mv(e)&&typeof e.lunar2solar=="function"}function O$(e){if(!mv(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,a=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof a=="boolean"?a:void 0}}function D$(e){const t=j$(e)?e.default:e;if(!N$(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,a,l,u)=>{const d=t.lunar2solar(i,a,l,!!u);return O$(d)}}}const C$=D$(lv),BS=e=>e<10?`0${e}`:`${e}`;function pv(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||i!=="lunar")return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),d=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of d){const g=t[p];if(typeof g=="boolean"){m=g;break}if(typeof g=="number"){m=g===1;break}if(typeof g=="string"){m=g==="1"||g.toLowerCase()==="true";break}}try{const p=C$.lunar2solar(a,l,u,m),g=`${p.cYear}${BS(p.cMonth)}${BS(p.cDay)}`;return{...e,birthDay:g,calendarType:"solar"}}catch{return e}}function M$(e,t="/"){const n=j.useMemo(()=>pv(e),[e]),i=j.useMemo(()=>dp(n),[n]),a=j.useMemo(()=>fv(n,t),[n,t]);return j.useMemo(()=>{const l=Pd(i,a.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function d(N,M){let R=null;const I=M.getTime();for(const G of N)if(G.at.getTime()<=I)R=G;else break;return R}const m=d(l.events,u)?.gz??a.month,p=Kg(m),g=u.getFullYear(),y=Fn(g,315),w=y&&u>=y?g:g-1,T=dt(new Date(w,1,10,0,0,0),127.5),k=Kg(T),A=jt(u,127.5),D=Kg(A),B=[];return D&&B.push({key:"wolun",label:"",data:D}),k&&B.push({key:"seun",label:"",data:k}),p&&B.push({key:"daeun",label:"",data:p}),B},[i,n.dir,a.month,n.birthPlace?.lon])}function cd(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function PS(e){return e<10?`0${e}`:`${e}`}function uy(e){return`${PS(e.getHours())}:${PS(e.getMinutes())}`}const Zr=Od()(KE((e,t)=>{const n=new Date,i="/",a=127.5,l=a,u=dt(n,l),d=jt(n,l),m=xt(n,i);return{date:n,scope:"",rule:i,lon:a,yearGZ:u,monthGZ:d,dayGZ:m,setDate:p=>{const{rule:g,lon:y}=t(),x=typeof y=="number"?y:void 0;e({date:p,yearGZ:dt(p,x),monthGZ:jt(p,x),dayGZ:xt(p,g)})},resetDate:()=>{const{rule:p,lon:g}=t(),y=new Date,x=typeof g=="number"?g:void 0;e({date:y,yearGZ:dt(y,x),monthGZ:jt(y,x),dayGZ:xt(y,p)})},resetMonth:()=>{const{lon:p}=t(),g=new Date;e({date:g,monthGZ:jt(g,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:g,lon:y}=t(),x=typeof y=="number"?y:void 0;e({rule:p,yearGZ:dt(g,x),monthGZ:jt(g,x),dayGZ:xt(g,p)})},setLon:p=>{const{date:g,rule:y}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:dt(g,x),monthGZ:jt(g,x),dayGZ:xt(g,y)})},setFromEvent:(p,g)=>{const{rule:y,lon:x}=t(),w=typeof x=="number"?x:void 0;e({date:p.at,scope:g,yearGZ:dt(p.at,w),monthGZ:jt(p.at,w),dayGZ:xt(p.at,y)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),vl={Classic:"",Modern:""};function Jt(e,t){const i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return i?i[t]??"":""}function R$(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function L$(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},a=n[e];return a&&i[a]?i[a][t]??"":""}function B$(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function P$(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},a=n[e];return a&&i[a]?i[a][t]??"":""}function Qt(e){const{baseBranch:t,targetBranch:n,era:i,gaehwa:a}=e;return!t||!n?"":i===""?a?R$(t,n):L$(t,n):a?B$(t,n):P$(t,n)}function $d(e,t="/",n=100){const i=j.useMemo(()=>pv(e),[e]),a=j.useMemo(()=>dp(i),[i]),l=j.useMemo(()=>fv(i,t),[i,t]),u=(d,m)=>{const p=m.getFullYear()-d.getFullYear(),g=m.getMonth()-d.getMonth(),y=m.getDate()-d.getDate(),x=g<0||g===0&&y<0?p-1:p;return Math.max(0,x)};return j.useMemo(()=>Pd(a,l.month,i.dir,n,i.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(a,m.at)})),[a,l.month,i.dir,n,i.birthPlace?.lon])}function Wg(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function $$(e,t){if(!Array.isArray(e)||e.length===0||!Wg(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],d=n[l+1];if(!Wg(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!d||Wg(d.at)&&t.getTime()<d.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const i=n.length-1,a=n[i];return{gz:a.gz??"",at:a.at,index:i}}function gv(e,t,n){const{date:i,rule:a,lon:l}=Zr(),u=j.useMemo(()=>n??i??new Date,[n,i]),d=$d(e,e?.mingSikType),{gz:m}=$$(d,u);return j.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,g=a??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:dt(u,p),at:u},wol:{gz:jt(u,p),at:u},il:{gz:xt(u,g),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,a,l,e,t,m])}const bv={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},yv={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},I$=Object.fromEntries(Object.entries(bv).map(([e,t])=>[t,e])),z$=Object.fromEntries(Object.entries(yv).map(([e,t])=>[t,e])),U$=new Set(["","","","","","","","","",""]),H$=new Set(["","","","","","","","","","","",""]),G$=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],F$=(()=>{const e={};for(const t of G$){const[n,i]=t.keys;e[n]={label:t.label,elem:t.elem},e[i]={label:t.label,elem:t.elem}}return e})();function q$(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const Y$={:1,:2,:3};function Z$(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const V$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function K$(e){switch(V$[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function W$({data:e,hourTable:t}){const{date:n}=Zr(),i=Xn(F=>F.settings),a=i.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:d,solarM:m,solarD:p}=j.useMemo(()=>{let F=Number(e.birthDay?.slice(0,4)??2e3),oe=Number(e.birthDay?.slice(4,6)??1),ce=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const le=yr(F,oe,ce);F=le.getFullYear(),oe=le.getMonth()+1,ce=le.getDate()}return{solarY:F,solarM:oe,solarD:ce}},[e.birthDay,e.calendarType]),[g,y]=j.useState(!1);j.useEffect(()=>{d&&m&&p&&y(Cm(d,m,p))},[d,m,p]);const x=!e.birthTime||e.birthTime==="";function w(F,oe){const ce=!F.birthTime||F.birthTime==="";let le=Number(F.birthDay.slice(0,4)),ve=Number(F.birthDay.slice(4,6)),Ae=Number(F.birthDay.slice(6,8));if(F.calendarType==="lunar"){const Ue=yr(le,ve,Ae);le=Ue.getFullYear(),ve=Ue.getMonth()+1,Ae=Ue.getDate()}const je=ce?4:Number(F.birthTime.slice(0,2)),Ce=ce?30:Number(F.birthTime.slice(2,4)),Ee=new Date(le,ve-1,Ae,je,Ce,0,0),$e=!F.birthPlace||F.birthPlace.name===""||!F.birthPlace.lon,Me=$e?127.5:F.birthPlace.lon,Pe=F.corrected instanceof Date&&!Number.isNaN(F.corrected.getTime());let Ie;Pe?Ie=F.corrected:$e?Ie=Ee:Ie=yl(Ee,Me,ce);const pe=oe?new Date(Ie.getTime()-3600*1e3):Ie,Le=F.mingSikType??"/",ue=dt(pe,Me),fe=jt(pe,Me),ze=xt(pe,Le),Be=ce?null:zi(pe,Le);return{corrected:pe,year:{stem:ue.charAt(0),branch:ue.charAt(1)},month:{stem:fe.charAt(0),branch:fe.charAt(1)},day:{stem:ze.charAt(0),branch:ze.charAt(1)},hour:Be?{stem:Be.charAt(0),branch:Be.charAt(1)}:null}}const[T,k]=j.useState(()=>w(e,g));j.useEffect(()=>{k(w(e,g))},[e,g]);const A=X$(e.correctedLocal,T.corrected,x),D=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,B=T.day.stem,[N,M]=j.useState(null),[R,I]=j.useState(()=>e.mingSikType==="");j.useEffect(()=>{M(null),I(e.mingSikType==="")},[D,e.mingSikType]);const G=j.useMemo(()=>(R?jy:HE)[B]??[],[R,B]),Y=N??T.hour,q=i.sinsalBase===""?T.day.branch:T.year.branch,J=Md(F=>F.setManualHour),V=(F,oe)=>{const ce={stem:F,branch:oe};M(ce),J(ce)},Z=F=>i.showSibiUnseong?Jt(B,F):null,ee=F=>i.showSibiSinsal?Qt({baseBranch:q,targetBranch:F,era:Xg(i.sinsalMode),gaehwa:i.sinsalBloom}):null,te=M$(e,l),we=f$({query:"(min-width: 992px)"}),X=i.hiddenStem==="regular"?"main":"all",ae=i.exposure,ne=ae===""?0:Y$[ae],me=ne===0?[]:te.filter(F=>Z$(F.label)<=ne),Q=Cm(d,m,p),H=()=>y(F=>!F),P=gv(e,t,n),K=P.dae.gz,W=P.se.gz,z=P.wol.gz;return b.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[b.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",b.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),Q&&b.jsxs("button",{onClick:H,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${g?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",g?"ON":"OFF"]})]}),b.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[Q$(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),b.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",A]})]}),b.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),b.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${me.length===0?"grid-cols-1":me.length===1?"grid-cols-[2fr_8fr]":me.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[me.length>0&&(we?b.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[b.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:b.jsx("b",{children:""})}),b.jsx("div",{className:"pb-2",children:b.jsx("div",{className:`grid gap-2 p-3 ${me.length===1?"grid-cols-1":me.length===2?"grid-cols-2":"grid-cols-3"}`,children:me.map(F=>{let oe=F.data.stem,ce=F.data.branch;F.label.includes("")&&K&&(oe=K.charAt(0),ce=K.charAt(1)),F.label.includes("")&&W&&(oe=W.charAt(0),ce=W.charAt(1)),F.label.includes("")&&z&&(oe=z.charAt(0),ce=z.charAt(1));const le=Z(ce),ve=ee(ce);return b.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:F.label}),b.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&b.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:jr(B,{stem:oe})}),b.jsx(Va,{value:oe,kind:"stem",charType:i.charType,thinEum:i.thinEum}),b.jsx(Va,{value:ce,kind:"branch",charType:i.charType,thinEum:i.thinEum}),b.jsx(td,{branch:ce,dayStem:B,mode:X,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||a)&&b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&b.jsx("div",{children:le}),i.showSibiSinsal&&b.jsx("div",{children:ve}),a&&b.jsx(kf,{stem:oe,branch:ce})]})]})]},F.key)})})})]}):b.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[b.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),b.jsx("div",{className:"pb-2",children:b.jsx("div",{className:`grid gap-1 p-0 ${me.length===1?"grid-cols-1":me.length===2?"grid-cols-2":"grid-cols-3"}`,children:me.map(F=>{let oe=F.data.stem,ce=F.data.branch;F.label.includes("")&&K&&(oe=K.charAt(0),ce=K.charAt(1)),F.label.includes("")&&W&&(oe=W.charAt(0),ce=W.charAt(1)),F.label.includes("")&&z&&(oe=z.charAt(0),ce=z.charAt(1));const le=Z(ce),ve=ee(ce);return b.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:F.label}),b.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[i.showSipSin&&b.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:jr(B,{stem:oe})}),b.jsx(Va,{value:oe,kind:"stem",charType:i.charType,thinEum:i.thinEum}),b.jsx(Va,{value:ce,kind:"branch",charType:i.charType,thinEum:i.thinEum}),b.jsx(td,{branch:ce,dayStem:B,mode:X,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||a)&&b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&b.jsx("div",{children:le}),i.showSibiSinsal&&b.jsx("div",{children:ve}),a&&b.jsx(kf,{stem:oe,branch:ce})]})]})]},F.key)})})})]})),we?b.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[b.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:b.jsx("b",{children:""})}),b.jsx("div",{className:"pb-2",children:b.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:Y},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(F=>b.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:F.label}),b.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:F.data?b.jsxs(b.Fragment,{children:[i.showSipSin&&b.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:jr(B,{stem:F.data.stem})}),b.jsx(Va,{value:F.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),b.jsx(Va,{value:F.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),b.jsx(td,{branch:F.data.branch,dayStem:B,mode:X,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||a)&&b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&b.jsx("div",{children:Jt(B,F.data.branch)}),i.showSibiSinsal&&b.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:F.data.branch,era:Xg(i.sinsalMode),gaehwa:i.sinsalBloom})}),a&&b.jsx(kf,{stem:F.data.stem,branch:F.data.branch})]})]}):b.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},F.key))})})]}):b.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[b.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),b.jsx("div",{className:"px-1 pb-2",children:b.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:Y},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(F=>b.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:F.label}),b.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:F.data?b.jsxs(b.Fragment,{children:[i.showSipSin&&b.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:jr(B,{stem:F.data.stem})}),b.jsx(Va,{value:F.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),b.jsx(Va,{value:F.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),b.jsx(td,{branch:F.data.branch,dayStem:B,mode:X,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||a)&&b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&b.jsx("div",{children:Jt(B,F.data.branch)}),i.showSibiSinsal&&b.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:F.data.branch,era:Xg(i.sinsalMode),gaehwa:i.sinsalBloom})}),a&&b.jsx(kf,{stem:F.data.stem,branch:F.data.branch})]})]}):b.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},F.key))})})]})]}),x&&b.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),b.jsx("button",{onClick:()=>I(F=>!F),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:R?" : ":" : "})]}),b.jsx("div",{className:"grid grid-cols-4 gap-2",children:G.map(F=>{const oe=F.charAt(0),ce=F.charAt(1),le=N?.stem===oe&&N?.branch===ce;return b.jsx("button",{onClick:()=>V(oe,ce),className:`p-2 text-xs rounded border cursor-pointer ${le?K$(ce):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${F} ( )`,children:F},F)})})]})]})}function X$(e,t,n){if(n)return"";const i=(e??"").trim();if(i)return i;const a=t instanceof Date?t:new Date(t);return Number.isNaN(a.getTime())?"":uy(a)}function kf({stem:e,branch:t}){const n=bv[e]??e,i=yv[t]??t,a=`${n}${i}`,l=F$[a];if(!l)return null;const u=q$(l.elem);return b.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function J$(e){return up(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Xg(e){const t=vl;return J$(t)?e==="classic"?t.Classic:t.Modern:e}function Va({value:e,kind:t,charType:n,thinEum:i}){const{settings:a}=Xn(),l=mi(e,t,a),u=n===""?t==="stem"?bv[e]??e:yv[e]??e:t==="stem"?I$[e]??e:z$[e]??e,d=t==="stem"?U$.has(e):H$.has(e),m=i&&d?"font-thin":"font-bold";return b.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:b.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function Q$(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),i=e.slice(4,6),a=e.slice(6,8),l=`${n}-${i}-${a}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function no(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,i=Number(e.birthDay?.slice(6,8)),a=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,i,a,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const d=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return yl(u,e.birthPlace?.lon??127.5,d)}function hp(e,t){const n=e.length;if(n===0||!t)return 0;const i=e[0].at.getTime(),a=e[n-1].at.getTime(),l=t.getTime();if(l<=i)return 0;if(l>=a)return n-1;for(let u=0;u<n-1;u+=1){const d=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=d&&l<m)return u}return 0}const FA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},e9=Object.fromEntries(Object.entries(FA).map(([e,t])=>[t,e])),t9=Object.fromEntries(Object.entries(qA).map(([e,t])=>[t,e]));function $S(e,t,n){return n===""?t==="stem"?FA[e]??e:qA[e]??e:t==="stem"?e9[e]??e:t9[e]??e}const n9=new Set(["","","","","","","","","",""]),r9=new Set(["","","","","","","","","","","",""]);function IS(e,t){return t==="stem"?n9.has(e):r9.has(e)}function i9(e){return typeof e=="object"&&e!==null}function s9(e){return i9(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function a9(e){const t=vl;return s9(t)?e==="classic"?t.Classic:t.Modern:e}const o9=!1,zS=e=>e<10?`0${e}`:`${e}`;function l9(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),d=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of d){const g=t[p];if(typeof g=="boolean"){m=g;break}if(typeof g=="number"){m=g===1;break}if(typeof g=="string"){m=g==="1"||g.toLowerCase()==="true";break}}if(i==="lunar")try{const p=yr(a,l,u,0,0),g=`${p.getFullYear()}${zS(p.getMonth()+1)}${zS(p.getDate())}`;return{...e,birthDay:g,calendarType:"solar"}}catch{return e}return e}function c9({data:e}){const t=$d(e),n=j.useMemo(()=>{const R=l9(e);return no(R)},[e]),i=j.useMemo(()=>{const R=e.mingSikType??"/";return xt(n,R).charAt(0)},[n,e.mingSikType]),{date:a,setFromEvent:l}=Zr(),u=j.useMemo(()=>hp(t,a),[t,a]),d=Xn(R=>R.settings),{charType:m,thinEum:p,showSipSin:g,showSibiUnseong:y,showSibiSinsal:x,sinsalBase:w,sinsalMode:T,sinsalBloom:k}=d,A=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,D=e.mingSikType??"/",B=w===""?xt(n,D).charAt(1):dt(n,A).charAt(1),N=R=>y?Jt(i,R):null,M=R=>x?Qt({baseBranch:B,targetBranch:R,era:a9(T),gaehwa:!!k}):null;return b.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),b.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((R,I)=>{const G=R.gz.charAt(0),Y=R.gz.charAt(1),q=u9(n,R.at),J=I===u,V=$S(G,"stem",m),Z=$S(Y,"branch",m),ee=IS(G,"stem"),te=IS(Y,"branch"),we=p&&ee?"font-thin":"font-bold",X=p&&te?"font-thin":"font-bold",ae=N(Y),ne=M(Y);return b.jsxs("div",{onClick:()=>l(R,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${J?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${R.gz}  ${R.at.toLocaleDateString()}`,children:[b.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:q}),b.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[g&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(i,{stem:G})}),b.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${mi(G,"stem",d)}`,children:b.jsx("span",{className:`text-[20px] md:text-xl ${we}`,children:V})}),b.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${mi(Y,"branch",d)}`,children:b.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:Z})}),g&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(i,{branch:Y})}),(y||x)&&b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[y&&b.jsx("div",{children:ae}),x&&b.jsx("div",{children:ne})]})]})]},`${R.gz}-${I}`)})})]})}function u9(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(i))}function fp(e,t){const n=e,i=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,a=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(i||!(a||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const YA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ZA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},d9=Object.fromEntries(Object.entries(YA).map(([e,t])=>[t,e])),h9=Object.fromEntries(Object.entries(ZA).map(([e,t])=>[t,e]));function US(e,t,n){return n===""?t==="stem"?YA[e]??e:ZA[e]??e:t==="stem"?d9[e]??e:h9[e]??e}const f9=new Set(["","","","","","","","","",""]),m9=new Set(["","","","","","","","","","","",""]);function HS(e,t){return t==="stem"?f9.has(e):m9.has(e)}function p9(e){return typeof e=="object"&&e!==null}function g9(e){return p9(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function b9(e){const t=vl;return g9(t)?e==="classic"?t.Classic:t.Modern:e}function Jg(e){return new Date(e,6,2,12,0,0,0)}function y9(e,t){return t-e+1}const v9=!1,GS=e=>e<10?`0${e}`:`${e}`;function _9(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),d=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of d){const g=t[p];if(typeof g=="boolean"){m=g;break}if(typeof g=="number"){m=g===1;break}if(typeof g=="string"){m=g==="1"||g.toLowerCase()==="true";break}}if(i==="lunar")try{const p=yr(a,l,u,0,0),g=`${p.getFullYear()}${GS(p.getMonth()+1)}${GS(p.getDate())}`;return{...e,birthDay:g,calendarType:"solar"}}catch{return e}return e}function x9({data:e,list:t,onSelect:n}){const i=Xn(G=>G.settings),{date:a,setFromEvent:l}=Zr(),[u,d]=j.useState(()=>t);j.useEffect(()=>{t&&t.length>0&&d(t)},[t]);const m=no(e),p=j.useMemo(()=>fp(e,m),[e,m]),g=j.useMemo(()=>p.getFullYear(),[p]),y=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=j.useMemo(()=>{if(!a)return[];const G=a.getFullYear(),Y=Jg(G),q=dt(Y,y);return[{at:Y,gz:q}]},[a,y]),w=t.length>0?t:u.length>0?u:x,T=j.useMemo(()=>[...w].sort((G,Y)=>G.at.getTime()-Y.at.getTime()),[w]),k=j.useMemo(()=>{if(T.length===0)return 0;const G=hp(T,a);return G<0?0:G>=T.length?T.length-1:G},[T,a]),[A,D]=j.useState(null);j.useEffect(()=>{D(null)},[a,T]);const B=A??k,N=j.useMemo(()=>{const G=_9(e);return no(G)},[e]),M=e.mingSikType??"/",R=j.useMemo(()=>xt(N,M).charAt(0),[N,M]),I=j.useMemo(()=>i.sinsalBase===""?xt(p,M).charAt(1):dt(p,y).charAt(1),[p,M,y,i.sinsalBase]);return b.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),b.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((G,Y)=>{const q=G.at.getFullYear(),J=Jg(q),V=dt(J,y),Z=V.charAt(0),ee=V.charAt(1),te=Y===B,we=US(Z,"stem",i.charType),X=US(ee,"branch",i.charType),ae=HS(Z,"stem"),ne=HS(ee,"branch"),me=i.thinEum&&ae?"font-thin":"font-bold",Q=i.thinEum&&ne?"font-thin":"font-bold",H=i.showSibiUnseong?Jt(R,ee):null,P=i.showSibiSinsal?Qt({baseBranch:I,targetBranch:ee,era:b9(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null,K=y9(g,q);return b.jsxs("div",{onClick:()=>{if(Y===0){D(Y);return}D(Y);const W=Jg(q),z=dt(W,y);l({at:W,gz:z},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(q)):Promise.resolve().then(()=>n(q)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${te?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${V}  ${G.at.toLocaleDateString()}  ${K}`,children:[b.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[K,""]}),b.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:q}),b.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(R,{stem:Z})}),b.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${mi(Z,"stem",i)}`,children:b.jsx("span",{className:`text-[20px] md:text-xl ${me}`,children:we})}),b.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${mi(ee,"branch",i)}`,children:b.jsx("span",{className:`text-[20px] md:text-xl ${Q}`,children:X})}),i.showSipSin&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(R,{branch:ee})}),(i.showSibiUnseong||i.showSibiSinsal)&&b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&H&&b.jsx("div",{children:H}),i.showSibiSinsal&&P&&b.jsx("div",{children:P})]})]})]},`${q}-${G.gz||Y}`)})})]})}const w9=new Set(["","","","","","","","","","","",""]);function S9(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),a=[...ls(new Date(n-1,5,15,12,0))??[],...ls(new Date(n,5,15,12,0))??[],...ls(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>w9.has(m.name));let l=a.findIndex((m,p)=>a[p].date<=t&&t<a[p+1]?.date);l<0&&(l=0);const u=a[l],d=a[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(d.date.getFullYear(),d.date.getMonth(),d.date.getDate(),0,0,0,0),cur:u,next:d}}const VA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},KA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},E9=Object.fromEntries(Object.entries(VA).map(([e,t])=>[t,e])),T9=Object.fromEntries(Object.entries(KA).map(([e,t])=>[t,e]));function FS(e,t,n){return n===""?t==="stem"?VA[e]??e:KA[e]??e:t==="stem"?E9[e]??e:T9[e]??e}const k9=new Set(["","","","","","","","","",""]),A9=new Set(["","","","","","","","","","","",""]);function qS(e,t){return t==="stem"?k9.has(e):A9.has(e)}function j9(e){return typeof e=="object"&&e!==null}function N9(e){return j9(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function O9(e){const t=vl;return N9(t)?e==="classic"?t.Classic:t.Modern:e}const D9=new Set(["","","","","","","","","","","",""]);function C9(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function M9(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function Qg(e){return new Date(e,5,15,12,0,0,0)}function R9(e){const n=[...ls(Qg(e-1))??[],...ls(Qg(e))??[],...ls(Qg(e+1))??[]].map(d=>({name:String(d.name),date:new Date(d.date)})).sort((d,m)=>d.date.getTime()-m.date.getTime()).filter(d=>D9.has(d.name)),i=new Date(e,0,1,0,0,0,0),a=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(d=>d.name===""&&d.date>=i&&d.date<a);if(l===-1)return[];const u=[];for(let d=0;d<12;d++){const m=n[l+d];if(!m)break;const p=new Date(m.date),g=C9(p);u.push({name:m.name,termAt:p,at00:g})}return u}const L9=!1,YS=e=>e<10?`0${e}`:`${e}`;function B9(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),d=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of d){const g=t[p];if(typeof g=="boolean"){m=g;break}if(typeof g=="number"){m=g===1;break}if(typeof g=="string"){m=g==="1"||g.toLowerCase()==="true";break}}if(i==="lunar")try{const p=yr(a,l,u,0,0),g=`${p.getFullYear()}${YS(p.getMonth()+1)}${YS(p.getDate())}`;return{...e,birthDay:g,calendarType:"solar"}}catch{return e}return e}function P9({data:e,activeYear:t,onSelect:n,onSelectMonth:i}){const a=Xn(A=>A.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=no(e),d=j.useMemo(()=>fp(e,u),[e,u]),m=j.useMemo(()=>{const A=B9(e);return no(A)},[e]),p=e.mingSikType??"/",g=j.useMemo(()=>xt(m,p).charAt(0),[m,p]),y=a.sinsalBase===""?xt(d,p).charAt(1):dt(d,l).charAt(1),x=j.useMemo(()=>t?R9(t).map(D=>{const B=D.termAt,N=new Date(D.termAt.getTime()+1860*1e3),M=jt(N,l);return{at:B,gz:M,term:D.name,termAt:D.termAt}}):[],[t,l]),{date:w,setFromEvent:T}=Zr(),k=hp(x,w);return b.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),b.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((A,D)=>{const B=A.gz.charAt(0),N=A.gz.charAt(1),M=`${M9(A.at)}`,R=D===k,I=FS(B,"stem",a.charType),G=FS(N,"branch",a.charType),Y=qS(B,"stem"),q=qS(N,"branch"),J=a.thinEum&&Y?"font-thin":"font-bold",V=a.thinEum&&q?"font-thin":"font-bold",Z=a.showSibiUnseong?Jt(g,N):null,ee=a.showSibiSinsal?Qt({baseBranch:y,targetBranch:N,era:O9(a.sinsalMode),gaehwa:!!a.sinsalBloom}):null;return b.jsxs("div",{onClick:()=>{i(A.at);const te=new Date(A.at),{start:we}=S9(te);n?.(we.getFullYear(),we.getMonth()),T({at:te,gz:jt(te,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${R?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${A.term}   ${A.gz}  ${A.termAt.toLocaleString()}`,children:[b.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:M}),b.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[a.showSipSin&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(g,{stem:B})}),b.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${mi(B,"stem",a)}`,children:b.jsx("span",{className:`text-base md:text-xl ${J}`,children:I})}),b.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${mi(N,"branch",a)}`,children:b.jsx("span",{className:`text-base md:text-xl ${V}`,children:G})}),a.showSipSin&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:jr(g,{branch:N})}),(a.showSibiUnseong||a.showSibiSinsal)&&b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[a.showSibiUnseong&&Z&&b.jsx("div",{children:Z}),a.showSibiSinsal&&ee&&b.jsx("div",{children:ee})]}),b.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:A.term})]})]},`${A.term}-${A.at.toISOString()}`)})})]})}const WA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},XA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$9=Object.fromEntries(Object.entries(WA).map(([e,t])=>[t,e])),I9=Object.fromEntries(Object.entries(XA).map(([e,t])=>[t,e]));function ZS(e,t,n){return n===""?t==="stem"?WA[e]??e:XA[e]??e:t==="stem"?$9[e]??e:I9[e]??e}const z9=new Set(["","","","","","","","","",""]),U9=new Set(["","","","","","","","","","","",""]);function VS(e,t){return t==="stem"?z9.has(e):U9.has(e)}function H9(e){return typeof e=="object"&&e!==null}function G9(e){return H9(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function F9(e){const t=vl;return G9(t)?e==="classic"?t.Classic:t.Modern:e}const q9=!1,KS=e=>e<10?`0${e}`:`${e}`;function Y9(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const d=yr(a,l,u,0,0),m=`${d.getFullYear()}${KS(d.getMonth()+1)}${KS(d.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function Z9(e,t){return new Date(e,t,15,12,0,0,0)}function eb(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const V9=new Set(["","","","","","","","","","","",""]);function JA(e){return[...ls(new Date(e-1,5,15,12,0))??[],...ls(new Date(e,5,15,12,0))??[],...ls(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,i)=>n.date.getTime()-i.date.getTime())}function K9(e){const t=JA(e.getFullYear()),n=t.filter(u=>V9.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),d=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(d.date),end:new Date(m.date),cur:d,next:m}}let i=n.findIndex(u=>u.date>e)-1;i<0&&(i=n.length-1);const a=n[i],l=n[(i+1)%n.length];return{start:new Date(a.date),end:new Date(l.date),cur:a,next:l}}function W9({data:e,year:t,month:n,selectedMonth:i}){const a=Xn(q=>q.settings),l=a.ilunRule||"/",u=e?no(e):null,d=e&&u?fp(e,u):null,m=j.useMemo(()=>{const q=Y9(e);return no(q)},[e]),p=j.useMemo(()=>m?xt(m,l).charAt(0):void 0,[m,l]),g=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,y=e&&d?a.sinsalBase===""?xt(d,l).charAt(1):dt(d,g).charAt(1):null,{date:x,setFromEvent:w}=Zr(),T=j.useMemo(()=>Z9(t,n),[t,n]),k=j.useMemo(()=>x?eb(new Date(x)):null,[x]),A=j.useMemo(()=>i?eb(i):null,[i]),D=j.useMemo(()=>k??A??T,[k,A,T]),{start:B,end:N,cur:M,next:R}=j.useMemo(()=>K9(D),[D]),I=j.useMemo(()=>{const q=[],J=new Date(B);for(;J<N;)q.push(new Date(J)),J.setDate(J.getDate()+1);return q},[B,N]),G=j.useMemo(()=>{const q=JA(D.getFullYear()),J=q.filter(Z=>Z.date>=B&&Z.date<N),V=q.find(Z=>Z.date>=N);return V?[...J,V]:J},[D,B,N]),Y=j.useMemo(()=>{const q=[];let J=[];const V=new Date(B).getDay();for(let Z=0;Z<V;Z++)J.push(null);for(const Z of I)J.length===7&&(q.push(J),J=[]),J.push(Z);for(;J.length<7;)J.push(null);return q.push(J),q},[I,B]);return b.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:b.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[M?.name?b.jsxs(b.Fragment,{children:[M.name," ~ ",R?.name??""]}):`${t} ${n}`,G.length>0&&b.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",G.map((q,J)=>b.jsxs("span",{children:[q.name," ",X9(q.date),J<G.length-1?"  ":""]},`${q.name}_${q.date.getTime()}_${J}`)),"]"]})]})}),b.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(q=>b.jsx("div",{className:"py-1",children:q},q))}),b.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:Y.map((q,J)=>q.map((V,Z)=>{if(!V)return b.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${J}-${Z}`);const ee=eb(V),te=new Date,we=ee.getFullYear()===te.getFullYear()&&ee.getMonth()===te.getMonth()&&ee.getDate()===te.getDate(),ae=!!k&&ee.getFullYear()===k.getFullYear()&&ee.getMonth()===k.getMonth()&&ee.getDate()===k.getDate()||!k&&we,ne=dM(ee,l),me=ne.charAt(0),Q=ne.charAt(1),H=ZS(me,"stem",a.charType),P=ZS(Q,"branch",a.charType),K=a.thinEum&&VS(me,"stem")?"font-thin":"font-bold",W=a.thinEum&&VS(Q,"branch")?"font-thin":"font-bold",z=!!p&&a.showSipSin,F=!!p&&a.showSibiUnseong,oe=!!p&&y!=null&&a.showSibiSinsal,ce=z?jr(p,{stem:me}):"",le=z?jr(p,{branch:Q}):"",ve=F?Jt(p,Q):"",Ae=oe?Qt({baseBranch:y,targetBranch:Q,era:F9(a.sinsalMode),gaehwa:!!a.sinsalBloom}):"",je=G.find(Ce=>Ce.date.getFullYear()===ee.getFullYear()&&Ce.date.getMonth()===ee.getMonth()&&Ce.date.getDate()===ee.getDate());return b.jsxs("div",{onClick:()=>w({at:ee},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${ae?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${ne} (${ee.toLocaleDateString()})`,children:[b.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[b.jsx("span",{children:ee.getDate()}),je&&b.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),z&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:ce}),b.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${mi(me,"stem",a)}`,children:b.jsx("span",{className:K,children:H})}),b.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${mi(Q,"branch",a)}`,children:b.jsx("span",{className:W,children:P})}),z&&b.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:le}),(F||oe)&&b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[F&&ve&&b.jsx("div",{children:ve}),oe&&Ae&&b.jsx("div",{children:Ae})]})]},V.toISOString())}))})]})}function X9(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",i="",a="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(i=u.value),u.type==="hour"&&(a=u.value),u.type==="minute"&&(l=u.value);return`${n}/${i} ${a}:${l}`}function WS(e,t){const n=e.at.getFullYear(),i=t?t.at.getFullYear():n+10,a=[];for(let l=n;l<i;l++){const u=Fn(l,315);let d=l;new Date<u&&(d=l-1);const p=dt(new Date(d,1,10));a.push({at:u,gz:p})}return a}function J9({data:e}){const t=$d(e),[n,i]=j.useState(null),[a,l]=j.useState(null),[u,d]=j.useState("il"),[m,p]=j.useState(null);j.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((A,D)=>{const B=t[D+1]?.at;return T>=A.at&&(!B||T<B)});k!==-1&&i(k)},[t]),j.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const A=WS(T,k),D=new Date;A.findIndex((N,M)=>{const R=A[M+1]?.at;return D>=N.at&&(!R||D<R)})!==-1&&l({year:D.getFullYear(),month:D.getMonth()})},[n,t]);const g=gv(e),{date:y}=Zr(),x=y.getMonth()+1===1?y.getFullYear()-1:y.getFullYear(),w=j.useMemo(()=>{if(!g?.dae?.gz)return[];const T=t.findIndex((D,B)=>{const N=t[B+1]?.at;return g.dae.at>=D.at&&(!N||g.dae.at<N)});if(T===-1)return[];const k=t[T],A=t[T+1];return WS(k,A)},[t,g?.dae]);return b.jsxs("div",{className:"w-full space-y-4",children:[b.jsx(c9,{data:e}),u==="se"||u==="wol"||u==="il"?b.jsx(x9,{data:e,list:w,onSelect:()=>{d("wol")}}):null,u==="wol"||u==="il"?b.jsx(P9,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),d("il")},onSelectMonth:p}):null,u==="il"&&a&&b.jsx(W9,{data:e,year:a.year,month:a.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const Q9=new Set(JC),e6=new Set(QC);function XS(e){return typeof e=="string"&&e.length>=2&&Q9.has(e[0])&&e6.has(e[1])}function si(e,...t){if(XS(e))return e;for(const n of t)if(XS(n))return n;return""}const t6={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},QA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},n6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function JS(e){return!!e&&Pi..includes(e)}function r6(e){return QA[e]??e}function QS(e){return n6[e]??e}function i6(e){if(JS(e))return e;const t=QA[e];return JS(t)?t:""}function s6(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function a6(e){const t=vl;return s6(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function Af(e,t){let n=null;const i=t.getTime();for(const a of e)if(a.at.getTime()<=i)n=a;else break;return n}function o6({data:e}){const t=Xn(J=>J.settings),{manualHour:n}=Md(),{showSibiUnseong:i,showSibiSinsal:a,sinsalBase:l,sinsalMode:u,sinsalBloom:d}=t,{date:m}=Zr(),p=j.useMemo(()=>pv(e),[e]),g=j.useMemo(()=>dp(p),[p]),y=j.useMemo(()=>fv(p,"/"),[p]),x=j.useMemo(()=>i6(y.day?.charAt(0)??""),[y.day]),w=!e.birthTime||e.birthTime==="",T=j.useMemo(()=>zA(g,y.hour,e.dir??"forward",120,"/"),[g,y.hour,e.dir]),k=j.useMemo(()=>HA(T,y.day,e.dir??"forward",""),[T,y.day,e.dir]),A=j.useMemo(()=>Pd(g,y.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[g,y.month,e.dir,p.birthPlace?.lon]),D=j.useMemo(()=>GA(A,y.year,e.dir??"forward","",g),[A,y.year,e.dir,g]),B=j.useMemo(()=>{const J=T?.events?.[0];return J?{at:J.at,from:si(y.hour),to:si(J.gz)}:null},[T?.events,y.hour]),N=j.useMemo(()=>{const J=A?.events?.[0];return A?.firstChange?{at:A.firstChange,from:si(y.month),to:si(J?.gz??y.month)}:null},[A?.firstChange,A?.events,y.month]),M=j.useMemo(()=>{const J=w?n?n.stem+n.branch:"":si(Af(T.events,m)?.gz,y.hour);let V;if(w&&n){const Z=m.getFullYear(),ee=m.getMonth(),te=m.getDate(),we=t6[n.branch]??0,X=new Date(Z,ee,te,we,0),ae=xt(X,e.mingSikType??"/");V=si(ae,y.day)}else V=si(Af(k.events,m)?.gz,y.day);return{si:J,il:V,wl:si(Af(A.events,m)?.gz,y.month),yn:si(Af(D.events,m)?.gz,y.year)}},[m,T.events,k.events,A.events,D.events,y,w,n,e.mingSikType]),R=j.useMemo(()=>({si:si(zi(m,"/")),il:si(xt(m,"/")),wl:si(jt(m)),yn:si(dt(m))}),[m]),I=j.useMemo(()=>l===""?y.day.charAt(1):y.year.charAt(1),[l,y.day,y.year]),G=j.useMemo(()=>a6(u),[u]),Y=J=>{if(!J)return{unseong:"",shinsal:""};const V=r6(x),Z=QS(J.charAt(1)),ee=QS(I);return{unseong:i&&Jt(V,Z)||"",shinsal:a&&Qt({baseBranch:ee,targetBranch:Z,era:G,gaehwa:!!d})||""}},q=(J,V,Z="myoun")=>{const ee=V,{unseong:te,shinsal:we}=V?Y(V):{unseong:"",shinsal:""},X=Z==="myoun"&&w&&(J===""||J==="");return b.jsx(yc,{label:J,gz:ee,dayStem:x,settings:t,unseongText:V?te:"",shinsalText:V?we:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:X},`${Z}-${J}`)};return b.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[b.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:b.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",b.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",cd(g),")"]})]})}),b.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),b.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[q("",M.si,"myoun"),q("",M.il,"myoun"),q("",M.wl,"myoun"),q("",M.yn,"myoun")]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),b.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[q("",R.si,"live"),q("",R.il,"live"),q("",R.wl,"live"),q("",R.yn,"live")]})]})]}),b.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[b.jsx("div",{className:"font-semibold",children:"  "}),b.jsxs("div",{children:[":"," ",B?`${cd(B.at)} (${B.from}  ${B.to})`:" "]}),b.jsxs("div",{children:[":"," ",N?`${cd(N.at)} (${N.from}  ${N.to})`:" "]})]})]})}const e2=["","","","","","","","","",""],l6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},c6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},u6={:"",:"",:"",:"",:""},d6={:"",:"",:"",:"",:""},h6={:"",:"",:"",:"",:""},f6={:"",:"",:"",:"",:""};function m6(e,t){switch(e){case"":return t;case"":return u6[t];case"":return h6[t];case"":return f6[t];case"":return d6[t];default:return t}}function p6({data:e,perStemElementScaled:t,elementPercent:n,dayStem:i,width:a=280,height:l=280,revKey:u}){const d=a,m=l,p=d/2,g=m/2,y=Math.min(d,m)*.37,x=j.useMemo(()=>{const N=(i??"").charAt(0);return c6[N]??null},[i]),w=N=>Math.PI/2+2*-Math.PI*N/5,T=j.useMemo(()=>e.map((N,M)=>({...N,x:p+y*Math.cos(w(M)),y:g-y*Math.sin(w(M))})),[e,p,g,y]),[k,A]=j.useState(0),D=j.useRef(""),B=j.useMemo(()=>{const N=e.map(I=>`${I.name}:${I.value}`).join(","),M=e2.map(I=>`${I}:${t?.[I]??0}`).join(","),R=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",N,M,R,i??""].join("||")},[u,e,t,i,n]);return j.useEffect(()=>{B!==D.current&&(D.current=B,A(N=>N+1))},[B]),b.jsx("div",{className:"w-full",children:b.jsxs("svg",{width:d,height:m,className:"mx-auto pt-2",children:[T.map((N,M)=>{const R=T[(M+2)%5];return b.jsx("line",{x1:N.x,y1:N.y,x2:R.x,y2:R.y,stroke:"#94a3b8",strokeWidth:1},`line-${M}`)}),T.map((N,M)=>{const R=T[(M+1)%5],I=(N.x+R.x)/2,G=(N.y+R.y)/2,Y=I-p,q=G-g,J=1.5,V=p+Y*J,Z=g+q*J;return b.jsx("path",{d:`M${N.x},${N.y} Q${V},${Z} ${R.x},${R.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${M}`)}),b.jsx("defs",{children:b.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:b.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(N=>{const M=N.name,R=x?m6(M,x):null,I=R?e2.filter(G=>l6[G]===R).map(G=>[G,t?.[G]??0]):[];return b.jsxs("g",{transform:`translate(${N.x},${N.y})`,children:[b.jsx("circle",{r:33,fill:N.color??"#334155",opacity:N.value===0?.7:1}),b.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[N.name," ",N.value]}),I.map(([G,Y],q)=>b.jsxs("text",{textAnchor:"middle",dy:8+q*11,fontSize:10,className:"fill-white",children:[G," ",Math.round(Y)]},G))]},`${N.name}-${N.value}`)})]},k)})}const g6=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function vv(e){return Math.max(0,Math.min(100,e))}function ej(e){const t=vv(e);return g6.find(i=>t>=i.min&&t<i.max)?.name??""}const b6=[10,20,35,45,55,65,80];function y6({value:e}){const t=j.useMemo(()=>vv(e),[e]),n=j.useMemo(()=>ej(t),[t]);return b.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[b.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[b.jsx("span",{children:""}),b.jsx("span",{children:""}),b.jsx("span",{children:""})]}),b.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[b6.map(i=>b.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${i}%`},title:`${i}%`},i)),b.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),b.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),b.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[b.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),b.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const ta=["","","",""],jf={year:0,month:1,day:2,hour:3},tb="",v6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},tj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const a=v6[i[1]]??i[1],l=tj[i[2]]??i[2];return`${a}${l}`}return""}const Rm=e=>e&&e.length>=1?e[0]:"",na=e=>e&&e.length>=2?e[1]:"",_v=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],xv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],wv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Sv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Ev=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Tv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],kv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Av=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],t2=[{name:"",members:["","",""]},{name:"",members:["","",""]}],jv=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Nv=[{pair:["",""],label:""}],_6=new Set(["","","",""]),_d=new Set(["","","",""]),mp=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],pp=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function En(e,t,n){for(const{pair:[i,a],label:l}of e)if(t===i&&n===a||t===a&&n===i)return l;return null}function Wt(e,t){e.includes(t)||e.push(t)}const Wo=e=>[...e].sort((t,n)=>t-n).map(t=>ta[t]).join("X"),nb=(e,t)=>e===0&&t===3||e===3&&t===0;function n2(e,t){const n=[];for(const i of e)for(const a of t){if(i===a)continue;const l=Math.min(i,a),u=Math.max(i,a);l===0&&u===3||n.push([l,u])}return n.sort((i,a)=>{const l=Math.abs(i[0]-i[1]),u=Math.abs(a[0]-a[1]);return l!==u?l-u:0})}function x6(e){const t=[],n=[...e].sort((i,a)=>i-a);for(let i=0;i<n.length;i++)for(let a=i+1;a<n.length;a++){const l=n[i],u=n[a];l===0&&u===3||t.push([l,u])}return t}const nj=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function w6(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const S6=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function rj(e){for(const t of S6){const i=(e[t]??[]).map(a=>a&&a.normalize("NFKC")).filter(a=>!!a&&!w6(a));e[t]=Array.from(new Set(i))}return e.jijiHyeong=ij(e.jijiHyeong),e}const r2=["","","",""];function ij(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(a=>a?.normalize("NFKC")??""))).filter(Boolean),n=t.some(a=>a.includes("")||a.includes("()")),i=t.some(a=>a.includes("")||a.includes("()"));return t.filter(a=>!(n&&(a.includes("")||a.includes("")||a.includes(""))||i&&(a.includes("")||a.includes("")||a.includes(""))))}function Ov(e,t={}){const{emitGanjiAmhap:n=!0}=t,i=e.map(Fe),a=i.map(x=>Rm(x)),l=i.map(x=>na(x)),d={title:i.map((x,w)=>`${x}${["","","",""][w]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,w,T,k)=>{const A=a.flatMap((B,N)=>B===x?[N]:[]),D=a.flatMap((B,N)=>B===w?[N]:[]);for(const B of A)for(const N of D)B!==N&&Math.abs(B-N)===1&&Wt(k,`#${Wo([B,N])}_${T}`)};_v.forEach(({pair:[x,w],label:T})=>m(x,w,T,d.cheonganHap)),xv.forEach(({pair:[x,w],label:T})=>m(x,w,T,d.cheonganChung));const p=x=>{const w=new Set,T=[];for(const k of x)for(let A=0;A<l.length;A++)if(l[A]===k&&!w.has(A)){w.add(A),T.push(A);break}return T};mp.forEach(({name:x,members:w,wang:T})=>{const k=w.filter(D=>l.includes(D)),A=new Set(k).size;if(A===3){const D=p(w);D.length===3&&Wt(d.jijiSamhap,`#${Wo(D)}_${x}`)}else if(A===2){if(!k.includes(T))return;const[D,B]=k,N=l.flatMap((G,Y)=>G===D?[Y]:[]),M=l.flatMap((G,Y)=>G===B?[Y]:[]),R=n2(N,M),I=R.length>1;for(const[G,Y]of R){const q=nb(G,Y),J=`#${Wo([G,Y])}_${D}${B}${I?"":q?`_${tb}`:""}`;Wt(d.jijiSamhap,J)}}}),pp.forEach(({name:x,members:w})=>{const T=w.filter(A=>l.includes(A));if(new Set(T).size===3){const A=p(w);A.length===3&&Wt(d.jijiBanghap,`#${Wo(A)}_${x}`)}});const g=(x,w,T,k)=>{const A=l.flatMap((M,R)=>M===x?[R]:[]),D=l.flatMap((M,R)=>M===w?[R]:[]),B=n2(A,D),N=B.length>1;for(const[M,R]of B){const I=nb(M,R),G=`#${Wo([M,R])}_${T}${N?"":I?`_${tb}`:""}`;Wt(k,G)}};if(wv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiYukhap)),Sv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiChung)),Ev.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiPa)),Tv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiHae)),kv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiWonjin)),Av.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const w=[],T=new Set;if(x.forEach(k=>{l.forEach((A,D)=>{A===k&&(w.push(D),T.add(k))})}),T.size===3){const k=Array.from(new Set(w)).sort((A,D)=>A-D);Wt(d.jijiHyeong,`#${Wo(k)}_${x.join("")}`)}}),jv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiHyeong)),Nv.forEach(({pair:[x,w],label:T})=>g(x,w,T,d.jijiHyeong)),["","","",""].forEach(x=>{const w=l.flatMap((A,D)=>A===x?[D]:[]),T=x6(w),k=T.length>1;for(const[A,D]of T){const B=nb(A,D),N=`#${Wo([A,D])}_${x}${x}${k?"":B?`_${tb}`:""}`;Wt(d.jijiHyeong,N)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,w],label:T})=>g(x,w,T,d.amhap)),n)for(let x=0;x<4;x++){const w=i[x]??"";if(w.length<2)continue;const T=`${w[0]}${w[1]}`;_d.has(T)&&Wt(d.ganjiAmhap,`#${nj(ta[x])}_${T}`)}return d.jijiHyeong=ij(d.jijiHyeong),rj(d)}function br(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,i=[Fe(e.natal[0]??""),Fe(e.natal[1]??""),Fe(e.natal[2]??""),Fe(e.natal[3]??"")],l=[Fe(e.daewoon??""),Fe(e.sewoon??""),Fe(e.wolwoon??"")].some(g=>g.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let g=0;g<4;g++){const y=i[g]??"";if(y.length<2)continue;const x=`${y[0]}${y[1]}`;_d.has(x)&&Wt(u.ganjiAmhap,`#${nj(ta[g])}_${x}`)}const d=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[g,y]of d){if(!y)continue;const x=Fe(y);if(!x||x.length<2)continue;const w=Rm(x),T=na(x);{const D=`${w}${T}`;_d.has(D)&&Wt(u.ganjiAmhap,`#${g}_${D}`)}for(let D=0;D<4;D++){const B=i[D]??"";if(B.length<2)continue;const N=ta[D],M=Rm(B),R=na(B),I=En(_v,w,M);I&&Wt(u.cheonganHap,`#${g}X${N}_${I}`);const G=En(xv,w,M);G&&Wt(u.cheonganChung,`#${g}X${N}_${G}`);const Y=En(wv,T,R);Y&&Wt(u.jijiYukhap,`#${g}X${N}_${Y}`);const q=En(Sv,T,R);q&&Wt(u.jijiChung,`#${g}X${N}_${q}`);const J=En(Ev,T,R);J&&Wt(u.jijiPa,`#${g}X${N}_${J}`);const V=En(Tv,T,R);V&&Wt(u.jijiHae,`#${g}X${N}_${V}`);const Z=En(kv,T,R);Z&&Wt(u.jijiWonjin,`#${g}X${N}_${Z}`);const ee=En(Av,T,R);ee&&Wt(u.jijiGwimun,`#${g}X${N}_${ee}`);const te=En(jv,T,R);if(te)Wt(u.jijiHyeong,`#${g}X${N}_${te}`);else{const ae=En(Nv,T,R);ae?Wt(u.jijiHyeong,`#${g}X${N}_${ae}`):T===R&&_6.has(T)&&Wt(u.jijiHyeong,`#${g}X${N}_${T}${R}`)}const X=En([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,R);X&&Wt(u.amhap,`#${g}X${N}_${X}`)}const k=i.map(D=>{const B=na(D??"");return tj[B]??B});for(const D of mp){if(!D.members.includes(T))continue;const B=D.members.filter(M=>M!==T),N=k.map((M,R)=>({b:M,pos:ta[R]})).filter(M=>B.includes(M.b));if(new Set(N.map(M=>M.b)).size===2){const[M,R]=N.map(I=>I.pos).sort((I,G)=>["","","",""].indexOf(I)-["","","",""].indexOf(G));Wt(u.jijiSamhap,`#${g}X${M}X${R}_(${D.name})`)}}const A=[...i.map((D,B)=>({b:na(D),pos:ta[B]}))];for(const D of pp){const B=A.filter(N=>D.members.includes(N.b));if(new Set(B.map(N=>N.b)).size===3){const N=B.map(M=>M.pos).join("X");Wt(u.jijiBanghap,`#${N}_(${D.name})`)}}for(const D of t2){if(!D.members.includes(T))continue;const B=D.members.filter(M=>M!==T),N=k.map((M,R)=>({b:M,pos:ta[R]})).filter(M=>B.includes(M.b));if(new Set(N.map(M=>M.b)).size===2){const[M,R]=N.map(I=>I.pos).sort((I,G)=>["","","",""].indexOf(I)-["","","",""].indexOf(G));Wt(u.jijiHyeong,`#${g}X${M}X${R}_${D.name}`),D.name===""&&(m=!0),D.name===""&&(p=!0)}}}{const g=[],y=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,w]of y){const T=Fe(w??"");T.length>=2&&g.push({kind:x,b:na(T)})}if(g.length>=2){const x=i.map((w,T)=>({pos:ta[T],b:na(w)}));for(const w of t2)for(let T=0;T<g.length;T++)for(let k=T+1;k<g.length;k++){const A=g[T],D=g[k];for(const B of x){const N=new Set([B.b,A.b,D.b]);if(N.size===3&&w.members.every(M=>N.has(M))){const M=[A.kind,D.kind].sort((I,G)=>r2.indexOf(I)-r2.indexOf(G)).join("X"),R=`${B.pos}X${M}`;Wt(u.jijiHyeong,`#${R}_${w.name}`),w.name===""&&(m=!0),w.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(g=>!(m&&/(||)/.test(g)||p&&/(||)/.test(g)))),rj(u)}function E6(e,t){const i=e.map(Fe).map(m=>na(m)),a=jf.month,l=i[a],u=m=>{const p=[];for(let g=0;g<4;g++){const y=i[g];y&&m.has(y)&&p.push(g)}return p},d=m=>{const p=[...m].sort((g,y)=>g-y);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of mp){const p=new Set(m.members),g=u(p);if(g.length===3){const y=g.includes(a),x=l===m.wang;y?d(g)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(g.length===2&&g.includes(a)){const y=g[0]===a?g[1]:g[0],x=l===m.wang;y===jf.day&&x?t[m.out]+=8:y===jf.year&&x?t[m.out]+=6:y===jf.hour&&(t[m.out]+=x?4:2)}}for(const m of pp){const p=new Set(m.members),g=u(p);if(g.length===3){const y=g.includes(a),x=l===m.wang;y?d(g)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function i2(e){const t=["","","",""],n=e.map(Fe),i=n.map(d=>Rm(d)),a=n.map(d=>na(d)),l=new Map,u=new Map;for(let d=0;d<4;d++){const m=i[d],p=a[d];m.includes(m)&&l.set(m,[...l.get(m)??[],d]),p.includes(p)&&u.set(p,[...u.get(p)??[],d])}return{stemsByPos:i,brsByPos:a,stemPos:l,brPos:u,names:t}}function Ft(e){return ta[e]}function gr(e,t){t&&(e.includes(t)||e.push(t))}function T6(e,t){const n=i2(e),i=i2(t),a={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let d=0;d<4;d++){const m=n.stemsByPos[d],p=n.brsByPos[d];for(let g=0;g<4;g++){const y=i.stemsByPos[g],x=i.brsByPos[g],w=En(_v,m,y);w&&gr(a.,`${Ft(d)}X${Ft(g)} ${w}`);const T=En(xv,m,y);T&&gr(a.,`${Ft(d)}X${Ft(g)} ${T}`);const k=En(wv,p,x);k&&gr(a.,`${Ft(d)}X${Ft(g)} ${k}`);const A=En(Sv,p,x);A&&gr(a.,`${Ft(d)}X${Ft(g)} ${A}`);const D=En(Ev,p,x);D&&gr(a.,`${Ft(d)}X${Ft(g)} ${D}`);const B=En(Tv,p,x);B&&gr(a.,`${Ft(d)}X${Ft(g)} ${B}`);const N=En(kv,p,x);N&&gr(a.,`${Ft(d)}X${Ft(g)} ${N}`);const M=En(Av,p,x);M&&gr(a.,`${Ft(d)}X${Ft(g)} ${M}`);const I=En([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);I&&gr(a.,`${Ft(d)}X${Ft(g)} ${I}`);const G=`${m}${x}`,Y=`${y}${p}`;_d.has(G)&&gr(a.,`${Ft(d)}X${Ft(g)} ${G}`),_d.has(Y)&&gr(a.,`${Ft(g)}X${Ft(d)} ${Y}`);const q=En(jv,p,x);if(q)gr(a.,`${Ft(d)}X${Ft(g)} ${q}`);else{const J=En(Nv,p,x);J&&gr(a.,`${Ft(d)}X${Ft(g)} ${J}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(i.brsByPos.filter(Boolean));for(const d of mp){if(d.members.every(g=>l.has(g)||u.has(g))){const g=d.members.filter(x=>l.has(x)).length,y=d.members.filter(x=>u.has(x)).length;g>=1&&y>=1&&gr(a.,`${d.name}`)}const p=d.members.filter(g=>l.has(g)||u.has(g));if(p.length===2&&p.includes(d.wang)){const g=p.some(x=>l.has(x)),y=p.some(x=>u.has(x));if(g&&y){const[x,w]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(w)?.[0],k=i.brPos.get(x)?.[0]??i.brPos.get(w)?.[0];T!=null&&k!=null&&gr(a.,`${Ft(T)}X${Ft(k)} ${x}${w}`)}}}for(const d of pp)if(d.members.every(p=>l.has(p)||u.has(p))){const p=d.members.filter(y=>l.has(y)).length,g=d.members.filter(y=>u.has(y)).length;p>=1&&g>=1&&gr(a.,`${d.name}`)}return Object.keys(a).forEach(d=>a[d].sort()),a}function Ku(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Qi({label:e,natal:t,dae:n,se:i,wol:a,il:l}){const u=n.length+i.length+a.length+l.length>0,d=t.length>0?t:["#"],m=u?d.filter(y=>y!=="#"):d,g=m.some(y=>y!=="#")||n.length>0||i.length>0||a.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return b.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[b.jsx("div",{className:g,children:e}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((y,x)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ku(y,"natal"),children:y},`natal-${x}`)),n.map((y,x)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ku(y,"dae"),children:y},`dae-${x}`)),i.map((y,x)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ku(y,"se"),children:y},`se-${x}`)),a.map((y,x)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ku(y,"wol"),children:y},`wol-${x}`)),l.map((y,x)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ku(y,"il"),children:y},`il-${x}`))]})]})}function dy(e){return Array.isArray(e)?e:[]}function Nf(e,t){const n=new Set(dy(e));return dy(t).filter(a=>!n.has(a))}function k6({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:a,tab:l=""}){const u=Ov(e),d=br({natal:e}),m=t?br({natal:e,daewoon:t}):d,p=n?br({natal:e,daewoon:t,sewoon:n}):m,g=i?br({natal:e,daewoon:t,sewoon:n,wolwoon:i}):p,y=a?br({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:a}):g,x=k=>({natal:dy(u[k]),dae:Nf(d[k],m[k]),se:Nf(m[k],p[k]),wol:Nf(p[k],g[k]),il:Nf(g[k],y[k])}),w={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return b.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[b.jsx("div",{className:"text-base font-bold mb-1",children:""}),b.jsx(Qi,{label:"",...T(w.cheonganHap)}),b.jsx(Qi,{label:"",...T(w.cheonganChung)}),b.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),b.jsx(Qi,{label:"",...T(w.jijiSamhap)}),b.jsx(Qi,{label:"",...T(w.jijiBanghap)}),b.jsx(Qi,{label:"",...T(w.jijiYukhap)}),b.jsx(Qi,{label:"",...T(w.amhap)}),b.jsx(Qi,{label:"",...T(w.ganjiAmhap)}),b.jsx(Qi,{label:"",...T(w.jijiChung)}),b.jsx(Qi,{label:"",...T(w.jijiHyeong)}),b.jsx(Qi,{label:"",...T(w.jijiPa)}),b.jsx(Qi,{label:"",...T(w.jijiHae)})]})}const A6={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},j6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function sj(e){const t=j6[e]??"";return A6[t]}const aj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N6={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Id={:"",:"",:"",:"",:""},xd={:"",:"",:"",:"",:""},Uc={:"",:"",:"",:"",:""},O6=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],D6={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function Dv(e){return Math.max(0,Math.min(100,e))}function Mc(e,t,n){return Math.max(t,Math.min(n,e))}function C6(e){const t=Dv(e);return O6.find(n=>t>=n.min&&t<n.max)?.name??""}function M6(e){const t=e?.[2]?.charAt(0)??"";return aj[t]??null}function R6(e){return(e?.[1]?.charAt(1)??"")||null}function gp(e){const t=Object.entries(Uc);for(const[n,i]of t)if(i===e)return n;return""}function L6(e){return e?{peer:e,resource:xd[e],leak:Id[e],wealth:Uc[e],officer:gp(e)}:null}function B6(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=n.charAt(0),a=n.charAt(1),l=aj[i],u=N6[a];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function P6(e){const t=Object.values(e).reduce((i,a)=>i+a,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(i=>{n[i]=e[i]/t*100}),n}function $6(e){if(!e||e.length===0)return null;const t=e.reduce((i,a)=>i+(a?.value??0),0)||0;if(t<=0)return null;const n=i=>e.find(a=>a.name===i)?.value??0;return Dv((n("")+n(""))/t*100)}function I6(e,t){return!e||!t?null:t===e?"":Id[e]===t?"":Uc[e]===t?"":gp(e)===t?"":xd[e]===t?"":null}const rb=24,z6=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function U6(e){for(const[t,n]of z6)if(e>=t)return n;return 1}const Lm=20,s2=(e,t)=>Mc((Lm-(t[e]??0))/Lm,0,1),a2=(e,t)=>Mc(((t[e]??0)-Lm)/Lm,0,1);function H6(e,t,n,i){const a=I6(e,n);if(!e||!a)return 0;const l=Mc((50-t)/50,0,1),u=Mc((t-50)/50,0,1),d=s2(n,i),m=a2(n,i),p=s2(e,i),g=a2(e,i),y=6.5;let x=0;if(l>0)switch(a){case"":x=+(.3+.4*p+.15*d)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-d)+.1*g)*l;break;case"":x=-(.22+.25*(1-d)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-d)+.1*(1-p))*l;break}else if(u>0)switch(a){case"":x=-(.25+.25*(1-d)+.2*g)*u;break;case"":x=-(.28+.2*g)*u;break;case"":x=+(.18+.2*d+.15*g)*u;break;case"":x=+(.22+.25*d+.1*g)*u;break;case"":x=+(.2+.2*d)*u;break}else switch(a){case"":x=.08*(p+d);break;case"":x=.05*p-.03*g;break;case"":x=.02*d-.02*m;break;case"":x=.01*d-.06*m;break;case"":x=-.05*(1-d);break}return Math.round(y*x*10)/10}function G6(e,t,n,i){const a=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(a){const d=Id[e],m=Uc[e],p=gp(e);u[d]+=28,u[m]+=22,u[p]+=20,i.get(d)?.push(":    ()"),i.get(m)?.push(":     "),i.get(p)?.push(":     ")}if(l){const d=xd[e],m=e;u[d]+=28,u[m]+=22,i.get(d)?.push(":     "),i.get(m)?.push(":     ")}return u}function o2(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=D6[e]??{temp:"mild",wet:"normal"},i={:0,:0,:0,:0,:0};return n.temp==="cold"?(i.+=16,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(i.+=14,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),i}function l2(e,t){const n={:0,:0,:0,:0,:0},i=["","","","",""];for(const a of i){const l=Uc[a],u=Math.max(0,(e[a]??0)-(e[l]??0));if(u<=0)continue;const d=Id[a],m=Math.round(u*.35);m>0&&(n[d]+=m,t.get(d)?.push(`: ${a}${l} `))}return n}function c2(e,t){const n={:0,:0,:0,:0,:0},i=Object.entries(e),a=Math.min(...i.map(([,u])=>u)),l=i.filter(([,u])=>u<=Math.max(6,a));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function u2(e,t){const n=M6(e),i=R6(e),a=B6(e),l=P6(a);let u=$6(t);if(u==null)if(!n)u=50;else{const V=n,Z=xd[n],ee=Object.values(a).reduce((te,we)=>te+we,0)||1;u=Dv(((a[V]??0)+(a[Z]??0))/ee*100)}const d=C6(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(V=>[V,[]]));if(n){const V=G6(n,d,a,p);Object.keys(m).forEach(Z=>{m[Z]+=V[Z]??0})}const g=o2(i,p);Object.keys(m).forEach(V=>{m[V]+=g[V]??0});const y=l2(a,p);Object.keys(m).forEach(V=>{m[V]+=y[V]??0});const x=c2(a,p);Object.keys(m).forEach(V=>{m[V]+=x[V]??0});const w=L6(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const V of t)T[V.name]=V.value;if(u>=45&&u<=55&&w){const V=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[w.resource]+=14,p.get(w.resource)?.push(": -"),m[w.peer]+=10,p.get(w.peer)?.push(": -"),m[w.leak]+=6,p.get(w.leak)?.push(": -"),m[w.wealth]+=3,p.get(w.wealth)?.push(": -"),V&&w.officer&&(m[w.officer]=Math.round(m[w.officer]*.8*10)/10,p.get(w.officer)?.push(":   "))):(m[w.leak]+=14,p.get(w.leak)?.push(": -"),m[w.wealth]+=10,p.get(w.wealth)?.push(": -"),w.officer&&(m[w.officer]+=6,p.get(w.officer)?.push(": -")),m[w.resource]+=3,p.get(w.resource)?.push(": -"))}["","","","",""].forEach(V=>{const Z=H6(n,u,V,l);m[V]=Mc(Math.round((m[V]+Z)*10)/10,0,999)});const A=u<50;["","","","",""].forEach(V=>{const Z=l[V]??0,ee=A&&n===V;if(Z>=rb&&!ee){const te=U6(Z);m[V]=Math.round(m[V]*te*10)/10;const we=Math.min(14,Math.max(0,Math.ceil((Z-rb)*.5)));we>0&&(m[V]=Mc(m[V]-we,0,999)),p.get(V)?.push(" ()")}});const D={:[],:[],:[],:[],:[]};if(n){const V=Id[n],Z=Uc[n],ee=gp(n),te=n,we=xd[n];D[V].push(""),D[Z].push(""),D[ee].push(""),D[te].push(""),D[we].push("")}const B={:(a.??0)>0,:(a.??0)>0,:(a.??0)>0,:(a.??0)>0,:(a.??0)>0},N=V=>{const Z=l[V]??0;return Z>=rb&&!(A&&n===V)?Z>=55?4:Z>=45?3:2:B[V]?0:1},M=o2(i,new Map),R=l2(a,new Map),I=c2(a,new Map),G=Object.keys(m).map(V=>({element:V,score:Math.round(m[V]*10)/10,via:F6(V,M,R,I),reasons:(p.get(V)??[]).slice(),tenGodHints:D[V]})).sort((V,Z)=>{const ee=N(V.element),te=N(Z.element);return ee!==te?ee-te:Z.score!==V.score?Z.score-V.score:V.element.localeCompare(Z.element)}),Y=q6(d,M,R,I),q={:0,:0,:0,:0,:0},J=t?t.reduce((V,Z)=>(V[Z.name]=Z.value,V),{...q}):void 0;return{chosenType:Y,ordered:G,debug:{band:d,overallPct:u,elementScore:a,tenGodTotals:J,monthBranch:i??void 0}}}function F6(e,t,n,i){const a=[];return(t[e]??0)>0&&a.push(""),(n[e]??0)>0&&a.push(""),(i[e]??0)>0&&a.push(""),a.length===0&&a.push(""),a}function q6(e,t,n,i){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((g,y)=>g+y,0),u=l(t),d=l(n),m=l(i);return u>Math.max(d,m)?"":d>=m?"":""}const Y6=Object.fromEntries(pi..map((e,t)=>[e,Nr[t]])),Z6=Object.fromEntries(Nr.map((e,t)=>[e,pi.[t]])),V6=Object.fromEntries(pi..map((e,t)=>[e,Yr[t]])),K6=Object.fromEntries(Yr.map((e,t)=>[e,pi.[t]])),W6=e=>Y6[e]??e,X6=e=>V6[e]??e,J6=e=>Z6[e]??e,Q6=e=>K6[e]??e;function e8(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?W6(n):J6(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}function Cv(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?X6(n):Q6(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}const t8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},n8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},oj={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},r8={...oj,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},d2=e8(t8),h2=Cv(n8);Cv(oj);Cv(r8);const i8=["","","","",""],mn={2:4,1:3,3:2,0:1};function Of(e,t,n="classic"){const i=ci(t),a=Xt(t),l=(n==="hgc"?ep:Qm)[a]??[];return[i,...l].includes(e)}const _c={1:4,2:3,0:2,3:1},lj=new Set(Object.keys(Vm)),cj=new Set(Object.keys(ky)),s8=e=>e.slice(0,1),a8=e=>e.slice(-1);function ra(e){return Zm.has(e)?e:lj.has(e)?Vm[e]??e:e}function vr(e){return Ty.has(e)?e:cj.has(e)?ky[e]??e:e}function ci(e){return ra(s8(e))}function Xt(e){return vr(a8(e))}const Te={year:0,month:1,day:2,hour:3};function ib(e,t){const n=vr(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const a of i)if(Xt(t[a])===n)return{pos:a,weight:mn[a]??0};return null}function Mv(e,t,n){return Xt(t[n])===vr(e)?{pos:n,weight:mn[n]}:null}function o8(e,t){const n=ra(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const a of i)if(ci(t[a])===n)return{pos:a,weight:mn[a]??0};return null}const l8=/^#(|||)X\1_/,c8=e=>l8.test(e);function f2(e){const t=new Map;for(const n of e){if(c8(n.name))continue;const i=`${n.name}@${n.pos}`,a=t.get(i);(!a||n.weight>a.weight)&&t.set(i,n)}return Array.from(t.values()).sort((n,i)=>i.weight!==n.weight?i.weight-n.weight:n.name.localeCompare(i.name,"ko"))}function Df(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ml=e=>e===0?"":e===1?"":e===2?"":"",Hc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",u8=(e,t)=>`#X${ml(t)}_${e}`,uj=(e,t)=>t===Te.month?`#_${e}`:`#X${ml(t)}_${e}`,kc=(e,t,n)=>`#${ml(t)}X${ml(n)}_${e}`,d8=(e,t)=>`#${e==="day"?"":""}X${ml(t)}_`,Es=e=>`#_${e}`,Cf=(e,t)=>`#${ml(t)}_${e}`,dc=(e,t)=>`#X${Hc(t)}_${e}`,Wu=(e,t)=>`#X${Hc(t)}_${e}`,sb=(e,t,n)=>`#${Hc(t)}X${ml(n)}_${e}`,h8=(e,t)=>`#${t==="day"?"":""}X${Hc(e)}_`,f8=(e,t)=>`#${t==="day"?"":""}X${Hc(e)}_`,m2=(e,t)=>`#X${Hc(e)}_${t}`;function m8(e){if(!e)return null;const t=Array.from(String(e));let n=null,i=null;for(const a of t)!n&&(Zm.has(a)||lj.has(a))&&(n=ra(a)),(Ty.has(a)||cj.has(a))&&(i=vr(a));return n&&i?{stem:n,branch:i}:null}function ab(e){return e.map(Xt)}const bn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[vr(t),(Array.isArray(n)?n:[n]).map(vr)])),p8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),dj=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),g8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),b8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hj=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),fj=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),mj=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),O8=fj,D8=dj,C8=mj,M8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),R8=hj,L8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P8=bn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),pj=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>vr(t.trim())).filter(Boolean),Ui=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[vr(t),(Array.isArray(n)?n:[n]).map(i=>vr(i))])),p2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},g2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v2=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bp=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[vr(t),pj(n)])),I8=bp({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z8=bp({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),U8=bp({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),H8=bp({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G8=Ui({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),F8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z8=Ui({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),_2=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),W8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),X8=Ui({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),un=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ra(t),pj(n)])),J8=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x2=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Q8=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),eI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),tI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),nI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w2=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),iI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),sI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),aI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),oI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),lI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S2=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),cI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),uI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E2=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),dI=un({:"",:"",:"",:""}),hI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T2=un({:"",:"",:""}),k2=un({:"",:"",:""}),fI=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A2=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j2=un({:"",:"",:"",:"",:"",:"",:""}),ob=[["",""],["",""],["",""],["",""],["",""],["",""]],lb=[["",""],["",""],["",""],["",""],["",""],["",""]],mI=new Set(["","","",""]),N2=[["",""],["",""]],pI=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Xu(e,t,n){const i=vr(t),a=vr(n);for(const[l,u]of e)if(l===i&&u===a||l===a&&u===i)return!0;return!1}function O2(e,t,n){const i=vr(t),a=vr(n);for(const[l,u]of e)if(l===i&&u===a||l===a&&u===i)return`${l}${u}`;return`${i}${a}`}function Mf(e){for(const t of pI)if(t.set.has(e))return t.voids;return null}function cb(e){const t=vr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const i of n)if(i.group.has(t))return Array.from(i.years);return null}function zd(e,t){e.push(t)}function ub(e,t,n,i,a=0){const l=_c[n]>=_c[i]?n:i,u=kc(t,n,i);e.push({name:u,weight:mn[l]+a,pos:l})}function nn(e,t,n,i,a){const l=Xt(e[Te.year]),u=t[l];if(!u)return;const d=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of d){const g=Mv(m,e,p);g&&zd(a,{name:kc(i,Te.year,p),weight:g.weight,pos:p})}}function Rf(e,t,n,i){const a=Xt(e[Te.month]),l=t[a];if(!l)return;const u=ra(l),d=o8(u,e);d&&zd(i,{name:uj(n,d.pos),weight:d.weight,pos:d.pos})}function ai(e,t,n,i,a="ALL"){const l=Xt(e[Te.month]),u=t[l];if(!u)return;const d=a==="YEAR"?[Te.year]:a==="DAY"?[Te.day]:a==="HOUR"?[Te.hour]:a==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of d){const g=Mv(m,e,p);if(!g)continue;const y=p===Te.month?`#_${n}`:uj(n,p);zd(i,{name:y,weight:g.weight,pos:p})}}function Lf(e,t,n,i){const a=Xt(e[Te.month]),l=t[a];if(!l)return;const u=e[Te.day];l.includes(u)&&zd(i,{name:kc(n,Te.month,Te.day),weight:mn[Te.day],pos:Te.day})}function Vt(e,t,n,i,a){const l=ci(e[Te.day]),u=t[l];if(!u)return;const d=a==="DAY"?[Te.day]:a==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of d){const g=Mv(m,e,p);g&&zd(i,{name:u8(n,p),weight:g.weight,pos:p})}}function Fr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:a,basis:l}){const u=ci(e[Te.day]),d=Xt(e[Te.day]),m=Xt(e[Te.month]),p=Xt(e[Te.year]),g=ab(e),y=[],x=[],w=new Set(["","","",""]);if(nn(e,p8,"MONTH","",x),nn(e,dj,"DAY","",x),nn(e,b8,"MONTH","",x),nn(e,y8,"MONTH","",x),nn(e,v8,"ALL","",x),nn(e,_8,"HOUR","",x),nn(e,x8,"ALL","",x),nn(e,w8,"ALL","",x),nn(e,S8,"ALL","",x),nn(e,fj,"ALL","",x),nn(e,E8,"ALL","",x),nn(e,T8,"ALL","",x),nn(e,k8,"ALL","",x),nn(e,A8,"ALL","",x),nn(e,j8,"ALL","",x),nn(e,N8,"ALL","",x),nn(e,mj,"ALL","",x),nn(e,O8,"ALL","",x),nn(e,D8,"ALL","",x),nn(e,C8,"ALL","",x),nn(e,M8,"ALL","",x),nn(e,R8,"ALL","",x),nn(e,L8,"ALL","",x),nn(e,B8,"ALL","",x),nn(e,P8,"ALL","",x),Rf(e,p2,"",y),Rf(e,g2,"",y),Rf(e,b2,"",y),Rf(e,y2,"",y),ai(e,$8,"",x,"ALL"),ai(e,v2,"",x,"YEAR"),ai(e,v2,"",x,"DAY"),Lf(e,I8,"",y),Lf(e,z8,"",x),Lf(e,U8,"",x),Lf(e,H8,"",y),ai(e,G8,"",x,"ALL"),ai(e,F8,"",x,"ALL"),ai(e,q8,"",x,"ALL"),ai(e,Y8,"",x,"ALL"),ai(e,Z8,"",x,"ALL"),ai(e,_2,"",y,"ALL"),ai(e,V8,"",y,"DAY_HOUR"),ai(e,K8,"",y,"DAY_HOUR"),ai(e,W8,"",y,"ALL"),ai(e,X8,"",y,"ALL"),Vt(e,J8,"",y,"ALL"),Vt(e,x2,"",y,"ALL"),Vt(e,Q8,"",y,"ALL"),Vt(e,eI,"",y,"ALL"),Vt(e,tI,"",y,"ALL"),Vt(e,nI,"",y,"ALL"),Vt(e,rI,"",y,"ALL"),Vt(e,w2,"",y,"ALL"),Vt(e,iI,"",y,"ALL"),Vt(e,sI,"",y,"ALL"),Vt(e,aI,"",y,"ALL"),Vt(e,oI,"",y,"ALL"),Vt(e,lI,"",y,"ALL"),Vt(e,S2,"",x,"ALL"),Vt(e,cI,"",x,"ALL"),Vt(e,uI,"",x,"ALL"),Vt(e,E2,"",x,"DAY"),Vt(e,E2,"",x,"HOUR"),Vt(e,T2,"",x,"DAY"),Vt(e,T2,"",x,"HOUR"),Vt(e,k2,"",x,"DAY"),Vt(e,k2,"",x,"HOUR"),Vt(e,dI,"",x,"DAY"),Vt(e,hI,"",x,"ALL"),Vt(e,fI,"",y,"ALL"),Vt(e,A2,"",x,"ALL"),w.has(e[Te.day])){x.push({name:Es(""),weight:mn[Te.day],pos:Te.day});for(const Q of[Te.year,Te.month,Te.hour])e[Q]===e[Te.day]&&x.push({name:Cf("",Q),weight:mn[Q],pos:Q})}const k=j2[u];if(k)for(const Q of[Te.year,Te.month,Te.day,Te.hour]){const H=ci(e[Q]),P=Xt(e[Q]);H===u&&k.includes(P)&&x.push({name:Cf("",Q),weight:mn[Q],pos:Q})}for(const[Q,H]of N2){const P=ib(Q,e),K=ib(H,e);P&&K&&ub(x,"",P.pos,K.pos)}{const Q=new Set(["",""]),H=new Set(["","","",""]);for(let P=0;P<=3;P++){const K=ci(e[P]),W=Xt(e[P]);(Q.has(K)||H.has(W))&&x.push({name:Cf("",P),weight:mn[P],pos:P})}}{const Q=ci(e[Te.day]),H=e[Te.hour],P=(K,W)=>K.includes(Q)&&W.includes(H);P(["",""],["",""])&&x.push({name:Es(""),weight:mn[Te.hour],pos:Te.hour}),P(["",""],["",""])&&x.push({name:Es(""),weight:mn[Te.hour],pos:Te.hour}),P(["",""],["",""])&&x.push({name:Es(""),weight:mn[Te.hour],pos:Te.hour}),P(["",""],["",""])&&x.push({name:Es(""),weight:mn[Te.hour],pos:Te.hour}),P(["",""],["",""])&&x.push({name:Es(""),weight:mn[Te.hour],pos:Te.hour})}{const Q=ab(e);["","","",""].every(P=>Q.includes(P))&&y.push({name:Es(""),weight:mn[Te.day],pos:Te.day})}{const Q=e[Te.day],H=e[Te.hour];(Q===""&&H===""||Q===""&&H==="")&&x.push({name:kc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const Q=Xt(e[Te.year]),H=new Set(ab(e).slice(1)),P=(K,W)=>K.every(z=>H.has(z))&&Q===W;(P(["","",""],"")||P(["","",""],"")||P(["","",""],"")||P(["","",""],""))&&y.push({name:Es(""),weight:mn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&y.push({name:Es(""),weight:mn[Te.day],pos:Te.day});{const Q=ci(e[Te.day]),P={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[Q],K=e.some(F=>Xt(F)===P.rok),z=ci(e[Te.hour])===P.maStem;K&&z&&y.push({name:kc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const Q=ci(e[Te.day]),H=Xt(e[Te.day]),P=Xt(e[Te.hour]),W={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[Q];if(W){const z=H===W.rok,F=P===W.ma,oe=Of(W.rokStem,e[Te.day],"classic")||Of(W.rokStem,e[Te.hour],"classic"),ce=Of(W.maStem,e[Te.day],"classic")||Of(W.maStem,e[Te.hour],"classic");z&&F&&(oe||ce)&&y.push({name:kc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}}{const Q=new Set(["","","","","",""]),H=e.map(ci),P=e.map(Xt),K=H.concat(P).filter(oe=>Q.has(oe)).length,W=t?ci(t):"",z=t?Xt(t):"",F=Q.has(W)||Q.has(z);(K>=4||K===3&&F)&&x.push({name:Es(""),weight:mn[Te.day],pos:Te.day})}{const Q=new Set(["",""]),H=new Set(["",""]);for(let P=0;P<=3;P++){const K=ci(e[P]),W=Xt(e[P]);(Q.has(K)||H.has(W))&&x.push({name:Cf("",P),weight:mn[P],pos:P})}}{const Q=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[H,P]of Q){const K=Xt(e[H]),W=Xt(e[P]);if(Xu(ob,K,W)){const z=O2(ob,K,W);ub(x,`${z}`,H,P)}}}{const Q=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[H,P,K]of Q){const W=Xt(e[H]),z=Xt(e[P]);if(Xu(lb,W,z)){const F=O2(lb,W,z),oe=(K?1:0)+(mI.has(W+z)?1:0);ub(x,`${F}`,H,P,oe)}}}function A(Q){const H=Q.lastIndexOf("_");return H>=0?Q.slice(H+1):Q}const D=new Set(["",""]);function B(Q){return D.has(Q)?!0:Q.endsWith("")||Q.endsWith("")}function N(Q){const H=new Map;for(const K of Q){const W=A(K.name);H.has(W)||H.set(W,[]),H.get(W).push(K)}const P=[];for(const[K,W]of H)if(B(K))P.push(...W);else{const z=W.sort((F,oe)=>_c[F.pos]!==_c[oe.pos]?_c[oe.pos]-_c[F.pos]:oe.weight-F.weight)[0];P.push(z)}return P}const M=Mf(e[Te.day]),R=Mf(e[Te.year]);{const Q=(l?.voidBasis??"day")==="day"?M:R;if(Q){const[H,P]=Q.map(vr),K=[Te.year,Te.month,Te.day,Te.hour];for(const W of K){const z=Xt(e[W]);(z===H||z===P)&&x.push({name:d8(l?.voidBasis??"day",W),weight:mn[W],pos:W})}}}const I=N(f2(y)),G=N(f2(x)),Y={si:[],il:[],yeon:[],wol:[]},q={si:[],il:[],yeon:[],wol:[]};for(const Q of I)Y[Df(Q.pos)].push(Q.name);for(const Q of G)q[Df(Q.pos)].push(Q.name);const J=[],V=[],Z=[],ee=[],te=[],we=[],X=[],ae=[];function ne(Q,H){Q.includes(H)||Q.push(H)}function me(Q,H){const P=m8(H);if(!P)return;const K=P.branch,W=P.stem;let z,F;switch(Q){case"dae":z=J,F=te;break;case"se":z=V,F=we;break;case"wol":z=Z,F=X;break;case"il":z=ee,F=ae;break;default:return}ra(p2[m])===W&&ne(z,Wu("",Q)),ra(g2[m])===W&&ne(z,Wu("",Q)),ra(b2[m])===W&&ne(z,Wu("",Q)),ra(y2[m])===W&&ne(z,Wu("",Q)),_2[m]?.includes(K)&&ne(z,Wu("",Q)),x2[u]?.includes(K)&&ne(z,dc("",Q)),w2[u]?.includes(K)&&ne(z,dc("",Q)),S2[u]?.includes(K)&&ne(F,dc("",Q)),A2[u]?.includes(K)&&ne(F,dc("",Q)),j2[u]?.includes(K)&&ne(F,dc("",Q)),Q==="se"&&(g8[p]?.includes(K)&&ne(F,m2(Q,"")),hj[p]?.includes(K)&&ne(F,m2(Q,"")));for(const ce of g)if(Xu(N2,K,ce)){const le=ib(ce,e)?.pos;le!==void 0&&ne(F,sb("",Q,le));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(K)&&ne(F,dc("",Q));const oe=(l?.voidBasis??"day")==="day"?M:R;oe&&(K===oe[0]||K===oe[1])&&ne(F,h8(Q,l?.voidBasis??"day"));for(let ce=0;ce<=3;ce++){const le=Xt(e[ce]);Xu(ob,K,le)&&ne(F,sb("",Q,ce)),Xu(lb,K,le)&&ne(F,sb("",Q,ce))}if(Q==="se"){const ce=(l?.samjaeBasis??"day")==="day"?d:p,le=ce?cb(ce):null;le&&le.includes(K)&&ne(F,f8(Q,l?.samjaeBasis??"day"))}}return me("dae",t??null),me("se",n??null),me("wol",i??null),me("il",a??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const Q={si:[],il:[],yeon:[],wol:[]};for(const H of I)Q[Df(H.pos)].push(H.name);return Q})(),dae:J,se:V,wolun:Z,ilun:ee},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const Q={si:[],il:[],yeon:[],wol:[]};for(const H of G)Q[Df(H.pos)].push(H.name);return Q})(),dae:te,se:we,wolun:X,ilun:ae},meta:{voidPair:{day:Mf(e[Te.day])??void 0,year:Mf(e[Te.year])??void 0},samjaeYears:{day:cb(d)??void 0,year:cb(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function gI(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function bI({items:e,source:t}){const n=e.length>0?e:["#"];return b.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((i,a)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+gI(i,t),children:i},`${t}-${a}-${i}`))})}function D2({title:e,rows:t}){return b.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[b.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const a=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return b.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[b.jsx("div",{className:a,children:n.label}),b.jsx(bI,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function yI({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:a,tab:l=""}){const{settings:u}=Xn(),[d,m]=j.useState(""),[p,g]=j.useState("");j.useEffect(()=>{u.sinsalBase===""?(m(""),g("")):(m(""),g(""))},[u.sinsalBase]);const y=j.useMemo(()=>({voidBasis:d===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[d,p]),x=j.useMemo(()=>Fr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:a,basis:y}),[e,t,n,i,a,y]),{good:w,bad:T,meta:k}=x,A=J=>J.map(V=>V==="#"?V:` ${V}`),D=(J,V)=>{const Z=["natal"];return V===""&&Z.push("natal"),V===""&&Z.push("natal","dae"),V===""&&Z.push("natal","dae","se"),V===""&&Z.push("natal","dae","se","wol"),V===""&&Z.push("natal","dae","se","wol","il"),J.filter(ee=>Z.includes(ee.source))},B=[{label:"",items:A(w.si),source:"natal"},{label:"",items:A(w.il),source:"natal"},{label:"",items:A(w.wol),source:"natal"},{label:"",items:A(w.yeon),source:"natal"},{label:"",items:w.dae,source:"dae"},{label:"",items:w.se,source:"se"},{label:"",items:w.wolun,source:"wol"},{label:"",items:w.ilun,source:"il"}],N=[{label:"",items:A(T.si),source:"natal"},{label:"",items:A(T.il),source:"natal"},{label:"",items:A(T.wol),source:"natal"},{label:"",items:A(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],M=D(B,l),R=D(N,l),I=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",G=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",Y=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",q=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return b.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[b.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),b.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),b.jsxs("select",{value:d,onChange:J=>m(J.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[b.jsx("option",{value:"",children:I}),b.jsx("option",{value:"",children:G})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),b.jsxs("select",{value:p,onChange:J=>g(J.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[b.jsx("option",{value:"",children:Y}),b.jsx("option",{value:"",children:q})]})]})]}),b.jsxs("div",{className:"desk:flex",children:[b.jsx(D2,{title:"()",rows:M}),b.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),b.jsx(D2,{title:"()",rows:R})]})]})}const Ri={year:0,month:1,day:2,hour:3},gj={[Ri.year]:.3,[Ri.month]:.5,[Ri.day]:.3,[Ri.hour]:.3},bj={[Ri.year]:.15,[Ri.month]:.2,[Ri.day]:0,[Ri.hour]:.15},vI=e=>Ty.has(e)?e:ky[e]??e,_I=e=>Zm.has(e)?e:Vm[e]??e,xI=e=>typeof e=="string"&&e.length>=2?vI(e.slice(-1)):"",wI=e=>typeof e=="string"&&e.length>=1?_I(e.slice(0,1)):"",Sn=(e,t,n,i)=>({han:e,nan:t,jo:n,seup:i}),SI={:Sn(2,0,.5,2),:Sn(2,0,0,2),:Sn(2,0,0,2),:Sn(0,2,2,0),:Sn(0,2,2,0),:Sn(0,2,1,2),:Sn(0,2,2,.5),:Sn(0,2,2,0),:Sn(0,2,2,1),:Sn(2,0,0,2),:Sn(2,0,0,2),:Sn(2,0,1,1)},EI={:Sn(0,1,1,0),:Sn(0,1,1,0),:Sn(0,2,2,0),:Sn(0,2,2,0),:Sn(0,0,1,0),:Sn(0,0,0,1),:Sn(1,0,0,1),:Sn(1,0,0,1),:Sn(2,0,0,2),:Sn(2,0,0,2)},C2=e=>Math.max(0,Math.min(100,e));function M2(e,t){const n=Math.max(0,e),i=Math.max(0,t),a=n+i;return a<=0?50:i/a*100}function TI(e){let t=0,n=0,i=0,a=0;return[Ri.year,Ri.month,Ri.day,Ri.hour].forEach(l=>{const u=SI[xI(e[l])],d=EI[wI(e[l])],m=gj[l],p=bj[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,i+=u.jo*m,a+=u.seup*m),p>0&&d&&(t+=d.han*p,n+=d.nan*p,i+=d.jo*p,a+=d.seup*p)}),{han:t,nan:n,jo:i,seup:a}}function kI(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function AI(e){const t=kI(e);return j.useMemo(()=>{const{han:n,nan:i,jo:a,seup:l}=TI(t),u=M2(n,i),d=M2(l,a);return{hanNanPct:C2(u),joSeupPct:C2(d),raw:{han:n,nan:i,jo:a,seup:l},weights:{branch:gj,stem:bj}}},[t])}function R2({label:e,percent:t,leftHint:n,midHint:i,rightHint:a}){const l=j.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return b.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[b.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[b.jsx("span",{children:n}),b.jsx("span",{children:i}),b.jsx("span",{children:a})]}),b.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(d=>b.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${d}%`},title:`${d}%`},d)),b.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),b.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),b.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[b.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),b.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function jI({natal:e}){const{hanNanPct:t,joSeupPct:n}=AI(e);return b.jsxs("div",{className:"flex gap-2",children:[b.jsx(R2,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),b.jsx(R2,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const NI=Object.fromEntries(pi..map((e,t)=>[e,Nr[t]])),OI=Object.fromEntries(Nr.map((e,t)=>[e,pi.[t]])),DI=Object.fromEntries(pi..map((e,t)=>[e,Yr[t]])),CI=Object.fromEntries(Yr.map((e,t)=>[e,pi.[t]])),MI=e=>NI[e]??e,RI=e=>DI[e]??e,LI=e=>OI[e]??e,BI=e=>CI[e]??e;function yj(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const i=n.charAt(0),a=n.charAt(1),l=/[]/.test(i)||/[]/.test(a)?`${MI(i)}${RI(a)}`:`${LI(i)}${BI(a)}`;t[l]===void 0&&(t[l]=e[n])}return t}const vj={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},PI={...vj,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},$I=yj(vj),II=yj(PI),zI={:"",:"",:"",:"",:""},UI={:"",:"",:"",:"",:""},HI={:"",:"",:"",:"",:""},GI={:"",:"",:"",:"",:""},FI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},YI=e=>FI[e]??e,ZI=e=>qI[e]??e;function _j(e){return!e||e.length<2?"":`${YI(e[0])}${ZI(e[1])}`}const xj=e=>e&&e.length>=1?e[0]:"",wj=e=>e&&e.length>=2?e[1]:"";function Sj(e){return{:e,:zI[e],:UI[e],:HI[e],:GI[e]}}const Ej={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function VI(e,t){const n=(e??[]).slice(0,4).map(_j);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const i=xj(n[2]),a=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(x=>wj(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},d=Ej[i]??[],m=l[1];d.includes(m)&&(u..=!0,u..=!0);const p=l[2];d.includes(p)&&(u..=!0,u..=!0);const g=Sj(a).,y=t[g]??0;return u..=y>=30,{flags:u,monthBranch:m,dayEl:a}}function Tj(e,t){const n=(e??[]).slice(0,4).map(_j);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const i=xj(n[2]),a=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(T=>wj(T)),u={:!1,:!1,:!1},d={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=Ej[i]??[],p=l[1];m.includes(p)&&(d..=!0,d..=!0,d..=!0,d..=!0);const g=l[2];m.includes(g)&&(d..=!0,d..=!0,d..=!0,d..=!0);const y=Sj(a).;return(t[y]??0)>=30&&(d..=!0,d..=!0,d..=!0,d..=!0),{flags:d,monthBranch:p,dayEl:a}}const KI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},WI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},XI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},JI={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},QI=e=>KI[e]??e,ez=e=>WI[e]??e;function tz(e){return!e||e.length<2?"":`${QI(e[0])}${ez(e[1])}`}function Xo(e){return d2[e]??d2[XI[e]??""]}function Jo(e){return h2[e]??h2[JI[e]??""]}const db=["year","month","day","hour"],nz={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},rz={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},iz=new Set(["","","","",""]),sz=new Set(["","","","","",""]),az=new Set(["","","",""]),hb=e=>iz.has(e)?"":"",fb=e=>{const t=sz.has(e)?"":"";return az.has(e)?t===""?"":"":t};function L2(e){const t=e.reduce((d,m)=>d+m,0);if(t<=0)return e.map(()=>0);const n=e.map(d=>d*100/t),i=n.map(d=>Math.floor(d+.5)),a=100-i.reduce((d,m)=>d+m,0);if(a===0)return i;const l=n.map((d,m)=>({i:m,frac:d-Math.floor(d+.5)})).sort((d,m)=>m.frac-d.frac),u=i.slice();if(a>0)for(let d=0;d<a;d++)u[l[d].i]+=1;else for(let d=0;d<-a;d++)u[l[l.length-1-d].i]-=1;return u}function oz(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const Bf={:.15,:.1,:-.15,:-.2,:-.25},Bm={:"",:"",:"",:"",:""},kj={:"",:"",:"",:"",:""},wd={:"",:"",:"",:"",:""},lz={:"",:"",:"",:"",:""};function Pf(e,t){return e===t?"":Bm[t]===e?"":Bm[e]===t?"":wd[e]===t?"":wd[t]===e?"":""}const Ka=e=>e&&e.length>=1?e[0]:"",Qo=e=>e&&e.length>=2?e[1]:"";function cz(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const i=e.map(m=>m/n*t),a=i.map(m=>Math.floor(m));let l=t-a.reduce((m,p)=>m+p,0);const u=i.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),d=a.slice();for(let m=0;m<u.length&&l>0;m++)d[u[m].i]+=1,l-=1;return d}function B2(e,t){switch(e){case"":return t;case"":return Bm[t];case"":return wd[t];case"":return lz[t];case"":return kj[t];default:return t}}function hy(e){const{pillars:t,dayStem:n,mode:i,debug:a,useHarmonyOverlay:l,criteriaMode:u,luck:d}=e,m=u==="modern"?nz:rz,p=i==="classic"?II:$I,g={:0,:0,:0,:0,:0},y={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},w=(t??[]).slice(0,4).map(tz),T=w.length===4&&w[0]&&w[0].length>=2&&w[1]&&w[1].length>=2&&w[2]&&w[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const z=["","","","",""].map(F=>({name:F,value:0,color:"#999999"}));return{overlay:k,totals:z,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:g,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const A=Ka(w[2]),D=n??A,B=D===""||D===""?"":D===""||D===""?"":D===""||D===""?"":D===""||D===""?"":"",N=[{val:0},{val:0},{val:0},{val:0}],M=[[],[],[],[]];for(const z of w){if(!z)continue;const F=z.charAt(0),oe=z.charAt(1);y[F]=(y[F]??0)+50;const ce=x[oe];ce&&(y[ce]=(y[ce]??0)+50)}for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=db[z],ce=Ka(F),le=Qo(F),ve=m[oe],Ae=Xo(ce);Ae&&(g[Ae]+=ve.stem,N[z]={stem:ce,el:Ae,pol:hb(ce),val:ve.stem});const je=Jo(le);je&&(g[je]+=ve.branch,M[z].push({el:je,pol:fb(le),val:ve.branch}))}for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=db[z],ce=p[F]??0;if(ce===0)continue;const le=Ka(F),ve=Xo(le);if(!ve)continue;const Ae=m[oe].stem*ce;g[ve]+=Ae,N[z].val+=Ae}for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=Qo(F),ce=Jo(oe);if(!ce)continue;const le=m[db[z]].branch,ve=fb(oe);let Ae=0;const je=[z];z-1>=0&&je.push(z-1),z+1<=3&&je.push(z+1),z-2>=0&&je.push(z-2),z+2<=3&&je.push(z+2);const Ce=Array.from(new Set(je));for(const Ee of Ce){if(!w[Ee]||w[Ee].length<2)continue;const $e=Ka(w[Ee]),Me=Xo($e);if(!Me||Me!==ce)continue;const Pe=hb($e)===ve,Ie=Math.abs(Ee-z),pe=oz(Ie,Pe);Ae+=le*pe}Ae!==0&&(g[ce]+=Ae,M[z].push({el:ce,pol:ve,val:Ae}))}for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=Ka(F),ce=Xo(oe);if(!ce)continue;let le=0;const ve=Qo(w[z]),Ae=Jo(ve);Ae&&(le+=Bf[Pf(ce,Ae)]);const je=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Ee of je){const $e=Ka(w[Ee]),Me=Xo($e);Me&&(le+=Bf[Pf(ce,Me)])}const Ce=N[z].val;if(Ce!==0&&le!==0){const Ee=Math.round(Ce*(1+le)*10)/10,$e=Ee-Ce;g[ce]+=$e,N[z].val=Ee}}for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=Qo(F),ce=Jo(oe);if(!ce)continue;let le=0;const ve=Ka(w[z]),Ae=Xo(ve);Ae&&(le+=Bf[Pf(ce,Ae)]);const je=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Ee of je){if(!w[Ee]||w[Ee].length<2)continue;const $e=Qo(w[Ee]),Me=Jo($e);Me&&(le+=Bf[Pf(ce,Me)])}const Ce=M[z].reduce((Ee,$e)=>Ee+$e.val,0);if(Ce!==0&&le!==0){const $e=Math.round(Ce*(1+le)*10)/10-Ce;g[ce]+=$e,M[z].length>0&&(M[z][0].val+=$e)}}l&&E6(w,g);const R={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},I=[];if(!(!d||d.tab==="")){let z=function(F,oe){const ce=F?Fe(F):"";if(!ce||ce.length<2)return;const le=Ka(ce),ve=Qo(ce),Ae=Xo(le),je=Jo(ve),Ce=Math.max(1,(g.??0)+(g.??0)+(g.??0)+(g.??0)+(g.??0)),Ee=R[oe];if(Ae){const $e=Math.round(Ce*Ee.stem);g[Ae]+=$e,I.push({stem:le,el:Ae,pol:hb(le),val:$e})}if(je){const $e=Math.round(Ce*Ee.branch);g[je]+=$e,I.push({el:je,pol:fb(ve),val:$e})}};z(d.dae,"dae"),(d.tab===""||d.tab===""||d.tab==="")&&z(d.se,"se"),(d.tab===""||d.tab==="")&&z(d.wol,"wol"),d.tab===""&&z(d.il,"il")}const G={:0,:0,:0,:0,:0};Object.entries(g).forEach(([z,F])=>{const oe=ee(z,B);G[oe]+=F});const Y=["","","","",""],q=L2(Y.map(z=>G[z])),J=sj(D),V=Y.map((z,F)=>({name:z,value:q[F],color:J[z]})),Z={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function ee(z,F){return z===F?"":Bm[F]===z?"":wd[F]===z?"":wd[z]===F?"":kj[F]===z?"":""}function te(z,F){switch(ee(z,B)){case"":Z.+=F*.5,Z.+=F*.5;break;case"":Z.+=F*.5,Z.+=F*.5;break;case"":Z.+=F*.5,Z.+=F*.5;break;case"":Z.+=F*.5,Z.+=F*.5;break;case"":Z.+=F*.5,Z.+=F*.5;break}}Object.entries(g).forEach(([z,F])=>{F>0&&te(z,F)});const we={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const z of Y){const F=V.find(je=>je.name===z)?.value??0,oe=we[z].a,ce=we[z].b,le=Z[oe]??0,ve=Z[ce]??0,Ae=le+ve;if(Ae>0){const je=Math.floor(F*le/Ae+.5),Ce=F-je;we[z].aVal=je,we[z].bVal=Ce}else we[z].aVal=Math.floor(F/2+.5),we[z].bVal=F-we[z].aVal}const{flags:X}=VI(w,g),ae={};N.forEach(z=>{if(z.stem&&z.el&&z.val){const F=`${z.stem}${z.el}`;ae[F]=(ae[F]??0)+z.val}});for(let z=0;z<4;z++){const F=w[z];if(!F||F.length<2)continue;const oe=Qo(F),ce=x[oe],le=Jo(oe);if(!ce||!le)continue;const ve=`${ce}${le}`,Ae=M[z].reduce((je,Ce)=>je+Ce.val,0);ae[ve]=(ae[ve]??0)+Ae}const ne=["","","","","","","","","",""],me={};ne.forEach(z=>{me[z]=0}),Y.forEach(z=>{const F=V.find(Ce=>Ce.name===z)?.value??0,oe=B2(z,B),ce=Object.entries(ae).filter(([Ce])=>Ce.endsWith(oe)),le=ce.map(([Ce])=>Ce),ve=ce.map(([,Ce])=>Ce),Ae=Math.max(0,Math.round(F*10)),je=cz(ve.length?ve:[1,1],Ae);if(le.length===2)me[le[0]]=(je[0]??Math.round(Ae/2))/10,me[le[1]]=(je[1]??Ae-(je[0]??0))/10;else if(le.length===1)me[le[0]]=Ae/10;else{const Ce=oe===""?["",""]:oe===""?["",""]:oe===""?["",""]:oe===""?["",""]:["",""],Ee=Math.floor(Ae/2),$e=Ae-Ee;me[Ce[0]]+=Ee/10,me[Ce[1]]+=$e/10}});const Q=["","","","",""],H={:0,:0,:0,:0,:0};for(const z of V){const F=B2(z.name,B);H[F]+=z.value}const P=L2(Q.map(z=>H[z])),K={:P[0],:P[1],:P[2],:P[3],:P[4]};return a&&console.log({elementScore:g,totals:V,perTenGod:we,perStemRaw:ae,perStemElementScaled:me,elementPercent100:K}),{overlay:{totalsSub:Z,perStemAugBare:ae,perStemAugFull:me},totals:V,perTenGod:we,PerTenGodSub:Z,stemScoreRaw:y,elementScoreRaw:g,deukFlags:X,perStemElement:ae,perStemElementScaled:me,elementPercent100:K}}function uz(e){const t=e.reduce((d,m)=>d+m,0);if(t<=0)return e.map(()=>0);const n=e.map(d=>d*100/t),i=n.map(d=>Math.round(d));let l=100-i.reduce((d,m)=>d+m,0);const u=n.map((d,m)=>({i:m,f:d-Math.round(d)})).sort((d,m)=>m.f-d.f);for(let d=0;d<u.length&&l>0;d++)i[u[d].i]+=1,l-=1;return i}const P2=["","","","",""];function dz(e,t){const n=[Fe(e[0]??""),Fe(e[1]??""),Fe(e[2]??""),Fe(e[3]??"")],{elementScoreRaw:i}=hy({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),a=P2.map(d=>i[d]??0),l=uz(a),u={:0,:0,:0,:0,:0};return P2.forEach((d,m)=>{u[d]=l[m]}),u}function Aj(e,t){const n=dz(e,t),i=Fe(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[i];if(!l)return 0;const u={:"",:"",:"",:"",:""},d=n[l]??0,m=n[u[l]]??0;return d+m*.7}const $f={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},If={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},hz=["","","","",""];function $2(e){return hz.includes(e)}const fz={:"",:"",:"",:"",:""},mz={:"",:"",:"",:"",:""},pz={:"",:"",:"",:"",:""},gz={:"",:"",:"",:"",:""},fy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},bz=["","","","","","","","","",""],yz={natal:50,dae:30,se:20,wol:7,il:3};function Pm(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if($f[t])return $f[t];if(["","","","","","","","","","","",""].includes(t))return zf[t]??null;if(If[t])return zf[If[t]]??null;const n=t.charAt(0);return $f[n]?$f[n]:["","","","","","","","","",""].includes(n)?n:If[n]?zf[If[n]]??null:["","","","","","","","","","","",""].includes(n)?zf[n]??null:null}function vz(e,t){const n=fy[e],i=fy[t];if(!n||!i)return"";let a;i===n?a="":i===fz[n]?a="":i===mz[n]?a="":i===pz[n]?a="":i===gz[n]?a="":a="";const l=$2(e)===$2(t);switch(a){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function $m(e){const t=Object.entries(e),n=t.reduce((p,[,g])=>p+(g>0?g:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,g])=>[p,(g>0?g:0)*100/n]),a=i.map(([p,g])=>[p,Math.round(g)]);let l=a.reduce((p,[,g])=>p+g,0);const u=i.map(([p,g])=>[p,g-Math.round(g)]).sort((p,g)=>g[1]-p[1]),d=Object.fromEntries(a.map(([p,g])=>[p,g]));let m=0;for(;l<100&&m<u.length;)d[u[m][0]]+=1,l+=1,m+=1;return d}function I2(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,a]of Object.entries(e??{})){if(a<=0)continue;const l=Pm(i);if(!l)continue;const u=vz(t,l);n[u]+=a}return $m(n)}function _z(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function z2(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const a=Pm(n);a&&(t[a]=(t[a]??0)+i)}return t}function U2(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of bz){const a=fy[i],l=`${i}${a}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}function H2(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const i of t)typeof e[i]=="number"&&(n[i]=e[i]);return n}function xz(e,t){const n=t?.dae?Uf(t.dae):{},i=t?.se?Uf(t.se):{},a=t?.wol?Uf(t.wol):{},l=t?.il?Uf(t.il):{},u={},d=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:i},{kind:"wol",bare:a},{kind:"il",bare:l}];for(const{kind:p,bare:g}of d){const y=yz[p];if(!g||Object.keys(g).length===0)continue;const x=$m(g);for(const[w,T]of Object.entries(x))u[w]=(u[w]??0)+T*y}const m=Object.values(u).reduce((p,g)=>p+g,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function wz(e){if(!e)return[];const t=Pm(e.charAt(0)),n=Pm(e.charAt(1));return[t,n].filter(Boolean)}function Uf(e){const t=wz(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function jj(e){const{natal:t,tab:n,chain:i,hourKey:a="unified"}=e,l=[Fe(t[0]??""),Fe(t[1]??""),Fe(t[2]??""),Fe(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:d,hiddenStem:m}=cl,p=d==="classic"?"classic":"hgc",g=i?{tab:n,dae:i.dae?Fe(i.dae):void 0,se:(n===""||n===""||n==="")&&i.se?Fe(i.se):void 0,wol:(n===""||n==="")&&i.wol?Fe(i.wol):void 0,il:n===""&&i.il?Fe(i.il):void 0}:{tab:n},y=hy({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:g}),x=hy({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),w=z2(y.perStemElementScaled),T=n===""?w:xz(w,i),k=$m(T),A=I2(T,u),D=_z(A),B=U2(k),N=z2(x.perStemElementScaled),M=I2(N,u),R=$m(N),I=U2(R);return{elementScoreRaw:y.elementScoreRaw,elementPercent100:y.elementPercent100,totals:y.totals,perStemElementScaled:y.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:A,perTenGod:D,overlay:{totalsSub:A,perStemAugBare:T,perStemAugFull:B},natalFixed:{elementScoreRaw:H2(x.elementScoreRaw),elementPercent100:H2(x.elementPercent100),totalsSub:M,overlay:{totalsSub:M,perStemAugBare:N,perStemAugFull:I}}}}const Li={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},js={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Sz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Bi(e){return["","","","",""].includes(e)}function Ez(e){return["","","","","",""].includes(e)}const Nj={:"",:"",:"",:"",:""},Rv={:"",:"",:"",:"",:""},Oj={:"",:"",:"",:"",:""},Dj={:"",:"",:"",:"",:""},mb=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Ci=e=>e&&e.length>=1?e.charAt(0):"",On=e=>e&&e.length>=2?e.charAt(1):"",Tz=e=>Array.from(new Set(e)),kz={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},Az={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function jz(e,t){const n=Az[e];if(!n)return!1;const a=ls(t).find(d=>d.name===n);if(!a)return!1;const l=new Date(a.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const Nz={:["","",""],:["","",""],:["","",""],:["","",""]};function Oz(e,t){const n=Nz[e];return n?n.filter(i=>i!==e).every(i=>t.includes(i)):!1}function ss(e,t){const n=Li[e],i=Li[t];if(!n||!i)return"";let a;i===n?a="":i===Nj[n]?a="":i===Rv[n]?a="":i===Oj[n]?a="":i===Dj[n]?a="":a="";const l=Bi(e)===Bi(t);switch(a){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function Dz(e,t){const n=Li[e],i=js[t];if(!n||!i)return"";let a;i===n?a="":i===Nj[n]?a="":i===Rv[n]?a="":i===Oj[n]?a="":i===Dj[n]?a="":a="";const l=Bi(e)===Ez(t);switch(a){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function Cz(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function my(e,t){const n=Cz(e),i=Bi(e),a={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":a[n]===t?u="":a[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const d=i===Bi(Mz(t));switch(u){case"":return d?"":"";case"":return d?"":"";case"":return d?"":"";case"":return d?"":"";case"":return d?"":""}}function Mz(e){return{:"",:"",:"",:"",:""}[e]}const pb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Cj={:"",:"",:"",:"",:""},Mj={:"",:"",:"",:""},Rz=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],Lz=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const i=Ci(n),a=On(n),l=Li[i],u=js[a];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function Bz(e){const{pillars:t,dayStem:n,monthBranch:i,mapping:a}=e,[l,u,d,m]=(t??[]).slice(0,4),p=[Ci(l),Ci(u),Ci(d),Ci(m)].filter(Boolean),g=[On(l),On(u),On(d),On(m)].filter(Boolean),y=Li[n],x=p.map(fe=>ss(n,fe)),w=[],T=fe=>p.filter(ze=>ze===fe).length,k=fe=>g.filter(ze=>ze===fe).length,A=fe=>fe.every(ze=>g.includes(ze)),D=fe=>x.some(ze=>fe.includes(ze)),B=Ci(u),N=fe=>Bi(fe),M=()=>{const fe=p.map(ze=>Li[ze]);return fe.length===4&&fe.every(ze=>ze===fe[0])},R=()=>{if(p.length!==4)return!1;const fe=p.map(N),ze=fe[0]&&!fe[1]&&fe[2]&&!fe[3],Be=!fe[0]&&fe[1]&&!fe[2]&&fe[3];return ze||Be};Bi(n)&&Cj[n]===i&&w.push("");const I=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[fe,ze]of I)if(n===fe&&i===ze){w.push("");break}!Bi(n)&&Mj[n]===i&&w.push("");const G=pb[n];G&&On(d)===G&&y===js[On(d)]&&w.push(""),G&&On(m)===G&&y===js[On(m)]&&w.push("");const Y=[l,u,d,m].map(Fz),q=[l,u,d,m].map(qz);for(const fe of Y);for(const fe of q);const J=a==="hgc"?ep:Qm;function V(fe){return(J[fe]??[]).filter(ze=>["","","","","","","","","",""].includes(ze))}const Z=[l,u,d,m].filter(Boolean),te=Z.flatMap(fe=>[fe.charAt(0),fe.charAt(1)]).flatMap(fe=>{try{if(["","","","","","","","","",""].includes(fe))return[ss(n,fe)];if(["","","","","","","","","","","",""].includes(fe)){const ze=Dz(n,fe),Be=V(fe).map(Ue=>ss(n,Ue));return[ze,...Be]}return[]}catch{return[]}}),we=fe=>te.some(ze=>fe.includes(ze)),X=(fe,ze)=>{const Be=[],Ue=[];for(const et of Z){const Zt=et.charAt(0),Dn=et.charAt(1);Be.push(ss(n,Zt));const Tn=js[Dn];Tn?Ue.push(my(n,Tn)):Ue.push(null)}const at=(et,Zt)=>!!et&&!!Zt&&(fe.includes(et)&&ze.includes(Zt)||ze.includes(et)&&fe.includes(Zt));for(let et=0;et<Be.length;et++)if(at(Be[et],Ue[et]))return!0;for(let et=0;et<Be.length-1;et++)if(at(Be[et],Be[et+1])||at(Ue[et],Ue[et+1]))return!0;return!1},ae={:["",""],:["",""],:["",""],:["",""]};we([...ae.])&&we([...ae.])&&X([...ae.],[...ae.])&&w.push(""),we([...ae.])&&we([...ae.])&&X([...ae.],[...ae.])&&w.push("");const ne=fe=>x.filter(ze=>fe.includes(ze)).length,me=ne(["",""]),Q=ne([""]),H=ne([""]),P=ne(["",""]),K=ne(["",""]),W=ne(["",""]);Q>=1&&me>=1&&me>=Q&&H<=Q&&w.push("");const z=ne([""]);z>=1&&P>=1&&z>=P&&w.push(""),x.includes("")&&P>=1&&w.push("");const oe=Lz(t),ce=Object.entries(oe).sort((fe,ze)=>ze[1]-fe[1]),le=ce[0];if(le&&le[1]>=60&&w.push(`(${le[0]})`),ce.length>=2){const[fe,ze]=ce[0],[,Be]=ce[1];ze>=75&&ze-Be>=12&&y!==fe&&w.push(`(${fe})`)}for(const fe of Rz){const ze=p.includes(fe.a),Be=p.includes(fe.b);if(!ze||!Be)continue;const Ue=fe.to,at=oe[Ue]??0,et=Li[fe.a],Zt=Li[fe.b],Dn=Math.max(oe[et]??0,oe[Zt]??0),Tn=js[i]===Ue,_r=Object.entries(oe).sort((Mt,yn)=>yn[1]-Mt[1])[0]?.[0]===Ue;let dn=!1;at>=60&&(Tn||_r)&&Dn<=20&&at-Dn>=20&&(w.push(`(${Ue})`),dn=!0),!dn&&at>=50&&(Tn||_r)&&Dn<=25&&(w.push(`(${Ue})`),dn=!0),!dn&&at>=35&&w.push(`(${Ue})`)}const ve=`${Ci(m)}${On(m)}`;["",""].includes(n)&&["","",""].includes(ve)&&w.push(""),["","","",""].includes(On(m))&&w.push(""),["",""].includes(n)&&(On(d)===""||On(u)==="")&&!g.includes("")&&w.push("");const Ae=p.some(fe=>fe===""||fe===""),je=g.some(fe=>fe===""||fe==="");["",""].includes(On(d))&&!Ae&&!je&&w.push(""),["","",""].every(fe=>p.includes(fe))&&w.push(""),["","",""].every(fe=>p.includes(fe))&&w.push(""),["","",""].every(fe=>p.includes(fe))&&w.push("");const Ce=Object.values(oe).sort((fe,ze)=>ze-fe);Ce.length>=3&&Ce[0]-Ce[2]<=8&&Ce[0]+Ce[1]+Ce[2]>=80&&w.push(""),K>=1&&W>=1&&Math.abs(K-W)<=1&&w.push(""),A(["","","",""])&&w.push(""),A(["","","",""])&&w.push(""),A(["","","",""])&&w.push(""),g.length===4&&g.every(fe=>fe===g[0])&&w.push(""),p.length===4&&M()&&R()&&w.push(""),t.every(fe=>fe&&fe===t[0])&&w.push(""),p.length===4&&p.every(fe=>fe===p[0])&&g.length===4&&g.every(fe=>fe===g[0])&&w.push(""),me>=1&&(On(d)===pb[n]||On(m)===pb[n])&&w.push(""),T("")>=3&&A(["","",""])&&["","",""].includes(On(d))&&w.push("");const $e=n===""||n==="",Me=[["","",""],["","",""]],Pe=[["","",""],["","",""]];$e&&(Me.some(fe=>A(fe))||Pe.some(fe=>A(fe)))&&w.push("");const Ie=new Set(["","","","","",""]),pe=`${Ci(d)}${On(d)}`;if(Ie.has(pe)&&k("")>=2&&(D(["",""])||g.includes("")||g.includes("")||D(["",""])||w.push("")),new Set(["","","","","",""]).has(pe)&&k("")>=2&&g.includes("")&&w.push(""),n===""&&`${Ci(m)}${On(m)}`==""){const fe=ss(n,B);!["","","",""].includes(fe)&&D(["",""])&&!g.includes("")&&!g.includes("")&&w.push("")}return new Set(["","",""]).has(pe)&&`${Ci(m)}${On(m)}`==""&&!g.includes("")&&!D(["",""])&&w.push(""),pe===""&&k("")+k("")>=2&&w.push(""),(pe===""||pe==="")&&k("")>=2&&!D(["",""])&&!g.includes("")&&w.push(""),n===""&&A(["","",""])&&w.push(""),pe===""&&`${Ci(m)}${On(m)}`==""&&w.push(""),Tz(w)}function Pz(e){const{dayStem:t,monthBranch:n,date:i,pillars:a,emittedStems:l=[],otherBranches:u=[],isNeutralized:d,mapping:m}=e,p=[],g=kz[n];if(!g)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const y={:g.?{stem:mb(g..stem),w:g..w}:void 0,:g.?{stem:mb(g..stem),w:g..w}:void 0,:{stem:mb(g..stem),w:g..w}},x=y..stem;let w=x;if(["","","",""].includes(n))w=y..stem,p.push(":   ");else if(["","","",""].includes(n)){const Y=[];y.&&Y.push({from:"",stem:y..stem,w:y..w,emitted:l.includes(y..stem)}),y.&&Y.push({from:"",stem:y..stem,w:y..w,emitted:l.includes(y..stem)}),Y.push({from:"",stem:y..stem,w:y..w,emitted:l.includes(y..stem)});const q=Y.filter(J=>J.emitted);q.length===1?(w=q[0].stem,p.push(`: ${q[0].from}  `)):q.length>1?(q.sort((J,V)=>V.w-J.w),w=q[0].stem,p.push(`:      ${q[0].from} `)):(w=y..stem,p.push(":    "))}else["","","",""].includes(n)&&(Oz(n,u)&&y.?(w=y..stem,p.push(":     ")):jz(n,i)&&y.?(w=y..stem,p.push(":  +12    ")):(w=y..stem,p.push(":  +12    ")));const T=w;let k="";const A=Li[T];if(A){const Y=Object.entries(Rv).find(([,q])=>q===A)?.[0]??null;Y&&(k=Object.entries(Li).find(([J,V])=>V===Y&&Bi(J)===Bi(T))?.[0]??"")}d?.(T)&&p.push(":   / ");let D="-";const B=ss(t,T),M=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([Y,q])=>Y===t&&q===n),R=Bi(t)&&Cj[t]===n,I=!Bi(t)&&Mj[t]===n;B===""||B===""?M?(D="",p.push(": /   ")):R?(D="",p.push(":    ")):I?(D="",p.push(":    ")):p.push(": /  "):B===""?D="()":D={:"",:"",:"",:"",:"",:"",:"",:""}[B]??"-";const G=Bz({pillars:a,dayStem:t,monthBranch:n,mapping:m});return{:x,:w,:T,:k,:D,:G,reason:p}}const Re=(e,t)=>`${e}+${t}`,kr=(e,t,n)=>`${e}+${t}+${n}`,$z={[Re("","")]:[""],[kr("","","")]:void 0,[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[kr("","","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""]},Iz={[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:[""],[kr("","","")]:["",""]};function zz(){const e={},t={},n=/[]/g;for(const[i,a]of Object.entries($z)){if(!a)continue;const l=i.match(n);if(!l||l.length<2)continue;const[u,d]=l;e[i]=a.map(m=>`${u}X${d}_${m}`)}for(const[i,a]of Object.entries(Iz)){if(!a)continue;const l=i.match(n);if(!l||l.length<3)continue;const[u,d,m]=l;t[i]=a.map(p=>`${u}X${d}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:gb,newTris:bb}=zz();function Uz(e){const[t,n,i,a]=e,l=w=>Ci(w),u=l(a),d=l(i),m=l(n),p=l(t),g=[],y=[[u,d],[d,m],[m,p]];for(const[w,T]of y){if(!w||!T)continue;const k=Re(w,T),A=gb[k];A&&A.length&&g.push(...A);const D=Re(T,w);D!==k&&gb[D]&&g.push(...gb[D])}const x=[[u,d,m],[d,m,p]];for(const[w,T,k]of x){if(!w||!T||!k)continue;const A=kr(w,T,k),D=bb[A];D&&D.length&&g.push(...D);const B=kr(k,T,w);B!==A&&bb[B]&&g.push(...bb[B])}return Array.from(new Set(g))}const Hz={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},Gz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fz(e){return e?.charAt(0)??""}function qz(e){return e?.charAt(1)??""}function Yz(e,t,n){const[i,a,l,u]=(e??[]).slice(0,4),d=ue=>(ue?.length??0)>=1?ue.charAt(0):"",m=ue=>(ue?.length??0)>=2?ue.charAt(1):"",p=[i,a,l,u].map(d).filter(Boolean),g=[i,a,l,u].map(m).filter(Boolean),y=d(l),x=Hz[y]??!1,w=new Set,T=t==="classic"?Qm:ep,k=new Set(["","","","","","","","","",""]),A=ue=>(T[ue]??[]).filter(fe=>k.has(fe)),D=(ue,fe)=>{const ze=js[fe];if(!ze)throw new Error(`Unknown branch main element: ${fe}`);return my(ue,ze)},B={:0,:0,:0,:0,:0};for(const ue of p){const fe=Li[ue];fe&&(B[fe]+=10)}const N=[];for(const ue of g){const fe=Sz[ue];fe&&N.push(fe);const ze=js[ue];ze&&(B[ze]+=6)}const R=[...p,...N].map(ue=>ss(y,ue)),I={:["",""],:["",""],:["",""],:["",""],:["",""]},G=ue=>R.filter(fe=>fe===ue).length,Y=ue=>R.filter(fe=>I[ue].includes(fe)).length,q=g[1],J=!!y&&Gz[y]===q,V=n.elementPercent100;V.>=20&&V.>=20&&V.>=15&&w.add("");const Z=[i,a,l,u].filter(Boolean),ee=[];for(const ue of Z){const fe=ue.charAt(0),ze=ue.charAt(1);ee.push(ss(y,fe)),ee.push(D(y,ze))}const te=(ue,fe)=>{const ze=(Be,Ue)=>!!Be&&!!Ue&&ue.includes(Be)&&fe.includes(Ue)||fe.includes(Be)&&ue.includes(Ue);for(let Be=0;Be+1<ee.length;Be+=2)if(ze(ee[Be],ee[Be+1]))return!0;return!1},we=ue=>ee.some(fe=>ue.includes(fe)),X=G("")+G(""),ae=G(""),ne=Y(""),me=Y(""),Q=te(["",""],["",""]);if((ae>=1||X>=2)&&ne>=1&&X>ne&&me<=1&&Q&&w.add(""),we(I.)&&we(I.)&&te(I.,I.)){const ue=R.includes("");w.add(ue?"":"")}Y("")>=2&&Y("")>=2&&Math.abs(Y("")-Y(""))<=1&&Y("")<=1&&Y("")<=1&&w.add("");const H=G(""),P=G(""),K=G("")+G(""),W=G("")+G(""),z=Y("");P>=2&&K>=1&&B.+B.>=20&&w.add(""),P>=2&&W>=1&&B.+B.>=20&&w.add(""),P>=2&&W>=1&&B.+B.>=20&&te([""],["",""])&&z<=1&&w.add(""),H>=2&&W>=1&&B.+B.>=20&&te([""],["",""])&&z<=1&&w.add("");const F=(ue,fe)=>{const ze=Li[ue],Be=js[fe];return!!ze&&!!Be&&ze===Be},oe=[i,a,l,u].filter(Boolean),ce=m(l),le=F(y,ce),ve=oe.map(ue=>ue.charAt(0)).filter(ue=>["",""].includes(ss(y,ue)));let Ae=!1;for(const ue of oe){const fe=ue.charAt(0),ze=ue.charAt(1);if(ve.includes(fe)&&F(fe,ze)){Ae=!0;break}}le&&Ae&&w.add(""),Y("")>=3&&Y("")>=.5*(Y("")+Y("")+Y("")+Y(""))&&w.add(""),Y("")>=3&&Y("")>=.5*(Y("")+Y("")+Y("")+Y(""))&&w.add(""),Y("")>=3&&Y("")>=1&&w.add(""),Y("")>=3&&Y("")+Y("")<=1&&w.add("");const je=G("");Y("")+Y("")>=2&&je===1&&Y("")>=1&&w.add(""),je>=2&&K+Y("")>=3&&w.add("");const Ce=H+P;(H>=2||Ce>=2)&&W>=1&&Ce>W&&w.add(""),P>=2&&W>=1&&Ce>W&&w.add("");const Ee=G(""),$e=G("");Ee>=2&&je+$e>=1&&w.add(""),Ee>=2&&je+$e===0&&w.add(""),x&&Ee>=2&&je>=1&&w.add(""),!x&&Ee>=2&&je>=1&&w.add(""),G("")>=2&&G("")>=1&&w.add(""),G("")>=1&&G("")>=1&&te([""],[""])&&w.add(""),J&&je>=1&&Y("")+Y("")>=2&&w.add("");const Me=[m(i),m(a),m(l),m(u)].filter(Boolean),Pe=[i?.charAt(0),a?.charAt(0),u?.charAt(0)].filter(Boolean),Ie=new Set(Pe.map(ue=>ss(y,ue))),pe=new Set(Me.flatMap(ue=>{const fe=js[ue];return fe?[my(y,fe)]:[]})),Le=new Set(Me.flatMap(ue=>A(ue).map(fe=>ss(y,fe))));return["","","","",""].forEach(ue=>{const fe=I[ue],ze=fe.some(at=>Ie.has(at)),Be=fe.some(at=>pe.has(at)),Ue=fe.some(at=>Le.has(at));!ze&&!Be&&!Ue?w.add(`${ue}`):!ze&&!Be&&Ue&&w.add(`${ue}`)}),Array.from(w)}function Zz(e){const{pillars:t,tab:n,birthDate:i,emittedStems:a,otherBranches:l,isNeutralized:u,mapping:d,unified:m}=e,[p,g,y,x]=t,w=te=>te&&te.length>=1?te.charAt(0):"",T=te=>te&&te.length>=2?te.charAt(1):"",k=T(g),A=w(y),D=i instanceof Date&&!Number.isNaN(i.getTime())?i:new Date,B=[w(p),w(g),w(y),w(x)].filter(te=>!!(te&&te.length===1)),N=[T(p),T(y),T(x)].filter(te=>!!(te&&te.length===1)),M=Pz({dayStem:A,monthBranch:k,date:D,pillars:t,emittedStems:a??B,otherBranches:l??N,isNeutralized:u,mapping:d}),R=[` : ${M.||"-"}`,` : ${M.||"-"}`,` : ${M.||"-"}`,` : ${M.||"-"}`],I=[` : ${M.||"-"}`],G=Array.isArray(M.)&&M..length>0?M..map(te=>` : ${te}`):[" : -"],Y=Uz(t),q=[...Y.length?Y.map(te=>`${te}`):[]],V=[...Yz(t,d,m)],Z=({text:te,color:we})=>{const X={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return b.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${X[we]}`,title:te,children:te})},ee=({children:te})=>b.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:te});return b.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${R.join(",")}|${I.join(",")}|${G.join(",")}`,children:[b.jsx("div",{className:"font-bold text-base",children:"   "}),b.jsxs("ul",{className:"space-y-1",children:[b.jsx(ee,{children:R.map(te=>b.jsx(Z,{text:te,color:"violet"},te))}),b.jsx(ee,{children:I.map(te=>b.jsx(Z,{text:te,color:"amber"},te))}),b.jsx(ee,{children:G.map(te=>b.jsx(Z,{text:te,color:"blue"},te))}),b.jsx(ee,{children:q.map(te=>b.jsx(Z,{text:te,color:"green"},te))}),b.jsx(ee,{children:V.map(te=>b.jsx(Z,{text:te,color:"red"},te))})]}),M.reason.length>0&&b.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",M.reason.join(" / ")]})]})}const xc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},wc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vz=["","","","",""];function G2(e){return Vz.includes(e)}const Kz={:"",:"",:"",:"",:""},Wz={:"",:"",:"",:"",:""},Xz={:"",:"",:"",:"",:""},Jz={:"",:"",:"",:"",:""};function Sd(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(xc[t])return xc[t];if(["","","","","","","","","","","",""].includes(t))return Hf[t]??null;if(wc[t])return Hf[wc[t]]??null;const n=t.charAt(0);return xc[n]?xc[n]:["","","","","","","","","",""].includes(n)?n:wc[n]?Hf[wc[n]]??null:["","","","","","","","","","","",""].includes(n)?Hf[n]??null:null}function Qz(e,t){const n=Rc[e],i=Rc[t];if(!n||!i)return"";let a;i===n?a="":i===Kz[n]?a="":i===Wz[n]?a="":i===Xz[n]?a="":i===Jz[n]?a="":a="";const l=G2(e)===G2(t);switch(a){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function eU(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function yp(e){const t=Object.entries(e),n=t.reduce((p,[,g])=>p+(g>0?g:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,g])=>[p,(g>0?g:0)*100/n]),a=i.map(([p,g])=>[p,Math.floor(g)]);let l=a.reduce((p,[,g])=>p+g,0);const u=i.map(([p,g])=>[p,g-Math.floor(g)]).sort((p,g)=>g[1]-p[1]),d=Object.fromEntries(a.map(([p,g])=>[p,g]));let m=0;for(;l<100&&m<u.length;)d[u[m][0]]+=1,l+=1,m+=1;return d}function tU(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e??{})){const a=Rc[Sd(n)];a&&i>0&&(t[a]+=i)}return yp(t)}function nU(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,a]of Object.entries(e??{})){if(a<=0)continue;const l=Sd(i);if(!l)continue;const u=Qz(t,l);n[u]+=a}return n}function rU(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const a=eU(n);t[a]+=i}return yp(t)}function yb(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);return i?`${xc[i[1]]}${wc[i[2]]}`:""}function F2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const a=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=a.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=a.match(/([]).*?([])/);return u?`${xc[u[1]]}${wc[u[2]]}`:i<=2?"--":""})}function iU(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const a=Rc[i.charAt(0)];a&&(n[a]=!0);{const l=Rj[i.charAt(1)];l&&(n[l]=!0)}}return n}function sU(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=Rc[n.charAt(0)],a=Rj[n.charAt(1)];i&&(t[i]+=10),a&&(t[a]+=6)}return t}function vb(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const aU=["","","","","","","","","",""];function oU(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const a=Sd(n);a&&(t[a]=(t[a]??0)+i)}return t}function lU(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of aU){const a=Rc[i],l=`${i}${a}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}const cU={natal:50,dae:30,se:20,wol:7,il:3};function uU(e){const t={};for(const{kind:i,bare:a}of e){const l=cU[i]??0;if(l<=0)continue;const u=yp(a);for(const[d,m]of Object.entries(u))t[d]=(t[d]??0)+m*l}const n=Object.values(t).reduce((i,a)=>i+a,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function dU(e){if(!e)return[];const t=Sd(e.charAt(0)),n=Sd(e.charAt(1));return[t,n].filter(Boolean)}function Gf(e){const t=dU(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function hU({data:e,pillars:t,lunarPillars:n,daewoonGz:i}){const a=Xn(Ee=>Ee.settings),[l,u]=j.useState("   "),[d,m]=j.useState(""),[p,g]=j.useState(!0),{date:y,yearGZ:x,monthGZ:w,dayGZ:T}=Zr(),k=j.useMemo(()=>Fe(x),[x]),A=j.useMemo(()=>Fe(w),[w]),D=j.useMemo(()=>Fe(T),[T]),B=$d(e,e?.mingSikType),N=j.useMemo(()=>{if(!B?.length)return 0;const Ee=B.findIndex(($e,Me)=>{const Pe=B[Me+1]?.at;return y>=$e.at&&(!Pe||y<Pe)});return Ee!==-1?Ee:y<B[0].at?0:B.length-1},[B,y]),M=j.useMemo(()=>{const Ee=i??B?.[N]?.gz??"";return Fe(Ee)||null},[i,B,N]),{manualHour:R}=Md(),I=e.mingSikType??"/",G=j.useMemo(()=>F2(t),[t]),Y=j.useMemo(()=>F2(n),[n]),q=j.useMemo(()=>{const Ee=[...G];return(!Ee[3]||Ee[3]==="")&&R&&(Ee[3]=R.stem+R.branch),Ee},[G,R]),J=j.useMemo(()=>{const Ee=[...Y];return(!Ee[3]||Ee[3]==="")&&R&&(Ee[3]=R.stem+R.branch),Ee},[Y,R]),V=j.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),$e=Number(e.birthDay?.slice(4,6)),Me=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite($e)||!Number.isFinite(Me))return null;const Pe=new Date(Ee,$e-1,Me,12,0,0,0),Ie=yb(dt(Pe)||""),pe=yb(jt(Pe)||""),Le=yb(xt(Pe,I)||"");return[Ie,pe,Le,""]},[e.birthDay,I]),Z=vb(q),ee=vb(J),[te]=j.useState("solar"),we=te==="lunar"?ee?"lunar":Z?"solar":"lunar":Z?"solar":ee?"lunar":"solar",X=j.useMemo(()=>{const $e=[...we==="lunar"?ee?J:Z?q:V??["","","",""]:Z?q:ee?J:V??["","","",""]];return(!$e[3]||$e[3]==="")&&R&&($e[3]=R.stem+R.branch),$e},[we,Z,ee,q,J,V,R]),ae=j.useMemo(()=>R?R.stem+R.branch:X[3]||"",[R,X]),ne=j.useMemo(()=>({dae:d!==""?M??null:null,se:d===""||d===""||d===""?k??null:null,wol:d===""||d===""?A??null:null,il:d===""?D??null:null}),[d,M,k,A,D]),me=j.useMemo(()=>jj({natal:X,tab:d,chain:ne,hourKey:ae}),[X,d,ne,ae]),Q=j.useMemo(()=>{if(!me)return null;const Ee=oU(me.perStemElementScaled),$e=ne.dae?Gf(ne.dae):{},Me=ne.se?Gf(ne.se):{},Pe=ne.wol?Gf(ne.wol):{},Ie=ne.il?Gf(ne.il):{},pe=uU([{kind:"natal",bare:Ee},{kind:"dae",bare:$e},{kind:"se",bare:Me},{kind:"wol",bare:Pe},{kind:"il",bare:Ie}]),Le=yp(pe),ue=lU(Le),fe=nU(pe,me.dayStem),ze=rU(fe),Be=tU(pe);return{perStemAugBare:pe,perStemAugFull:ue,elemPct100:Be,totalsMain:ze,totalsSub:fe}},[me,ne]),H=j.useMemo(()=>iU(X),[X]),P=j.useMemo(()=>["","","","",""].some(Ee=>!H[Ee]),[H]),K=Q?.elemPct100??me?.elementPercent100??sU(X),W=j.useMemo(()=>{if(!me||!Q)return[];const Ee=sj(me.dayStem);return Object.entries(Q.totalsMain).map(([$e,Me])=>({name:$e,value:Me,color:Ee[$e]}))},[me,Q]),z=Q?.elemPct100??{:0,:0,:0,:0,:0},F=Q?.totalsSub??null,oe=j.useMemo(()=>R?R.stem+R.branch:X[3]||"",[R,X]),ce=j.useMemo(()=>[d,M??"",k??"",A??"",D??"",y?.toISOString?.()??"",oe].join("|"),[d,M,k,A,D,y,oe]),le=j.useMemo(()=>{const Ee=F?Object.entries(F).sort(([Me],[Pe])=>Me.localeCompare(Pe)).map(([Me,Pe])=>`${Me}:${Pe}`).join(","):"none",$e=W.map(Me=>`${Me.name}:${Me.value}`).join(",");return`${ce}||${X.join("")}||${$e}||${Ee}`},[ce,X,W,F]),ve=typeof u2=="function"?u2(X,me?.totals):null,Ae=j.useMemo(()=>{const $e=(ve?.ordered??[]).map(Ie=>{const pe=Ie.element??"",Le=/||wood/i.test(pe)?"":/||fire/i.test(pe)?"":/||earth/i.test(pe)?"":/||metal/i.test(pe)?"":/||water/i.test(pe)?"":null,ue=typeof Ie.score=="number"?Ie.score:Le?K[Le]??0:0,fe=Array.isArray(Ie.reasons)?Ie.reasons:[];return{element:pe,elNorm:Le,score:ue,reasons:fe}}),Me=Ie=>Ie?H[Ie]:!1,Pe=p?$e.map(Ie=>Ie.elNorm&&!Me(Ie.elNorm)?{...Ie,score:0,reasons:[...Ie.reasons,":    0"]}:Ie):$e;return Pe.sort((Ie,pe)=>{const Le=Me(Ie.elNorm)?1:0,ue=Me(pe.elNorm)?1:0;return p&&Le!==ue?ue-Le:(pe.score??0)!==(Ie.score??0)?(pe.score??0)-(Ie.score??0):(Ie.elNorm??Ie.element).localeCompare(pe.elNorm??pe.element)}),Pe},[ve,p,K,H]),je=j.useMemo(()=>Math.max(0,...Ae.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[Ae]);function Ce(Ee){return Aj(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return vb(X)?b.jsxs("div",{className:"space-y-4 mb-4",children:[b.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:i8.map(Ee=>b.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(d===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),b.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>b.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&b.jsx(k6,{pillars:X,daewoon:M||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:D||void 0,tab:d},`harm-${d}-${oe}`),l==="   "&&b.jsxs("div",{className:"space-y-4",children:[b.jsx(p6,{data:W,revKey:le,perStemElementScaled:Q?.perStemAugFull,elementPercent:z,dayStem:X[2]?.charAt(0)??null},`pentagon-${le}`),b.jsx(y6,{value:Ce(X)}),b.jsx(jI,{natal:X}),b.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("div",{className:"text-sm font-bold",children:" "}),P&&b.jsxs("button",{type:"button",onClick:()=>g(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),b.jsx("ul",{className:"space-y-2",children:Ae.map((Ee,$e)=>b.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[$e+1,""]}),b.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:b.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),b.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Me,Pe)=>b.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Me},Pe))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&b.jsx(yI,{pillars:X,daewoon:M||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:D||void 0,tab:d},`shin-${d}-${oe}`),l==="  "&&b.jsx(Zz,{unified:me,pillars:X,tab:d,mapping:a.hiddenStemMode},`gyeok-${d}-${oe}`)]}):b.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const fU=!1,q2=e=>e<10?`0${e}`:`${e}`,mU=e=>typeof e=="string"&&e.length>=2,pU=e=>Array.isArray(e)&&e.length===4&&e.every(mU);function gU(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),d=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of d){const g=t[p];if(typeof g=="boolean"){m=g;break}if(typeof g=="number"){m=g===1;break}if(typeof g=="string"){m=g==="1"||g.toLowerCase()==="true";break}}if(i==="lunar")try{const p=yr(a,l,u,0,0),g=`${p.getFullYear()}${q2(p.getMonth()+1)}${q2(p.getDate())}`;return{...e,birthDay:g,calendarType:"solar"}}catch{return e}return e}function bU({data:e}){const[t,n]=j.useState("un"),i=j.useMemo(()=>{try{const d=gU(e);return no(d)}catch{return new Date}},[e]),a=j.useMemo(()=>fp(e,i),[e,i]),l=!e.birthTime||e.birthTime==="",u=j.useMemo(()=>{try{const d=dt(a,e.birthPlace?.lon),m=jt(a,e.birthPlace?.lon),p=xt(a,e.mingSikType),g=l?"":zi(a,e.mingSikType);return[d,m,p,g]}catch{return[]}},[a,e?.mingSikType,e?.birthPlace?.lon,l]);return b.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[b.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[b.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),b.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),b.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&b.jsx(J9,{data:e}),t==="myoun"&&b.jsx(o6,{data:e}),t==="report"&&b.jsx(hU,{data:e,pillars:pU(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),Y2=e=>{const t=vU(e);return t.charAt(0).toUpperCase()+t.slice(1)},Lj=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),_U=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...d},m)=>j.createElement("svg",{ref:m,...xU,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:Lj("lucide",a),...!l&&!_U(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,g])=>j.createElement(p,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=(e,t)=>{const n=j.forwardRef(({className:i,...a},l)=>j.createElement(wU,{ref:l,iconNode:t,className:Lj(`lucide-${yU(Y2(e))}`,`lucide-${e}`,i),...a}));return n.displayName=Y2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],EU=gi("chevron-down",SU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],kU=gi("chevron-up",TU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jU=gi("circle-x",AU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],OU=gi("heart-handshake",NU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],CU=gi("house",DU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RU=gi("log-out",MU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],BU=gi("menu",LU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$U=gi("plus",PU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zU=gi("settings",IU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],HU=gi("square-user",UU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Z2=gi("star",GU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qU=gi("user-plus",FU);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bj=gi("x",YU);function ZU({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return b.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:b.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[b.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:b.jsx(BU,{size:22})}),b.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:b.jsx(qU,{size:18})}),b.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:b.jsx(HU,{size:18})})]})]})})}function VU(e){j.useEffect(()=>{const t=e??mE()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");pE(t),e&&Jf(e)},[e])}const Pj=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function KU(e){return typeof e=="string"&&Pj.includes(e)}function _b(e){const t=Array.isArray(e)?e.filter(KU):[],n=Pj.filter(i=>!t.includes(i));return[...t,...n]}function WU({open:e,onClose:t}){const{settings:n,setSettings:i,saveToServer:a}=Xn(),l=j.useMemo(()=>_b(n.sectionOrder),[n.sectionOrder]),u=j.useMemo(()=>({...cl,...n,sectionOrder:_b(n.sectionOrder)}),[n]),[d,m]=j.useState(l),[p,g]=j.useState(u),[y,x]=j.useState(null),[w,T]=j.useState(!1),k=j.useCallback(()=>x(null),[]),A=p.theme??n.theme??"dark";VU(A),j.useEffect(()=>{Jf(A)},[A]),j.useEffect(()=>{if(!e)return;const R=_b(n.sectionOrder);w||(g({...cl,...n,sectionOrder:R}),m(R),T(!1))},[e,n,w]);const D=(R,I)=>{g(G=>{const Y={...G,[R]:I};return R==="theme"&&Jf(I),T(!0),Y})},B=()=>{const R={...cl,...p,sectionOrder:d};try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}i(R),R.theme&&Jf(R.theme),a(!0),x(" "),T(!1),t()},N=R=>{const{destination:I,source:G}=R;if(!I||I.index===G.index)return;const Y=Array.from(d),[q]=Y.splice(G.index,1);Y.splice(I.index,0,q),m(Y)},M=R=>{switch(R){case"theme":return b.jsx(es,{title:"",children:b.jsx(XU,{value:p.theme??"dark",onChange:I=>D("theme",I)})});case"hiddenStem":return b.jsx(es,{title:"  ",children:b.jsx(hc,{value:p.hiddenStem,onChange:I=>D("hiddenStem",I),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return b.jsx(es,{title:" ",children:b.jsx(hc,{value:p.hiddenStemMode,onChange:I=>D("hiddenStemMode",I),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return b.jsx(es,{title:"",children:b.jsx(hc,{value:p.sinsalMode,onChange:I=>D("sinsalMode",I),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return b.jsx(es,{title:"",children:b.jsx(hc,{value:p.sinsalBase,onChange:I=>D("sinsalBase",I),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return b.jsx(es,{title:" ",children:b.jsx(el,{label:" ",checked:!!p.sinsalBloom,onChange:I=>D("sinsalBloom",I)})});case"exposure":return b.jsx(es,{title:" ",children:b.jsx(hc,{value:p.exposure,onChange:I=>D("exposure",I),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return b.jsx(es,{title:" ",children:b.jsx(hc,{value:p.charType,onChange:I=>D("charType",I),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return b.jsx(es,{title:" ",children:b.jsx(el,{label:" ",checked:!!p.thinEum,onChange:I=>D("thinEum",I)})});case"visibility":return b.jsx(es,{title:" ",children:b.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[b.jsx(el,{label:" ",checked:!!p.showSipSin,onChange:I=>D("showSipSin",I)}),b.jsx(el,{label:" ",checked:!!p.showSibiUnseong,onChange:I=>D("showSibiUnseong",I)}),b.jsx(el,{label:" ",checked:!!p.showSibiSinsal,onChange:I=>D("showSibiSinsal",I)}),b.jsx(el,{label:" ",checked:!!p.showNabeum,onChange:I=>D("showNabeum",I)})]})});case"difficultyMode":return b.jsx(es,{title:" UP ver.",children:b.jsx(el,{label:" UP ",checked:!!p.difficultyMode,onChange:I=>D("difficultyMode",I)})});default:return null}};return b.jsxs(b.Fragment,{children:[b.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),b.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),b.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[b.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("h2",{className:"text-lg font-bold",children:""}),b.jsx("button",{onClick:B,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&b.jsx(Bd,{onDragEnd:N,children:b.jsx(ul,{droppableId:"settings-sections",children:R=>b.jsxs("ul",{ref:R.innerRef,...R.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[d.map((I,G)=>b.jsx(Cc,{draggableId:I,index:G,children:Y=>b.jsxs("li",{ref:Y.innerRef,...Y.draggableProps,...Y.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[b.jsx("span",{className:"mr-2 select-none",children:""}),b.jsx("div",{className:"flex-1 min-w-0",children:M(I)})]})},I)),R.placeholder]})})})]}),y&&b.jsx(LA,{message:y,onClose:k,ms:1800})]})}function XU({value:e,onChange:t}){const n=e==="dark";return b.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[b.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),b.jsx("span",{children:n?"":""})]})}function es({title:e,children:t}){return b.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[b.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),b.jsx("div",{className:"flex justify-center",children:t})]})}function hc({value:e,onChange:t,options:n}){return b.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:i=>i.stopPropagation(),onTouchStart:i=>i.stopPropagation(),children:n.map(i=>{const a=e===i.value;return b.jsx("button",{type:"button",onClick:()=>t(i.value),className:`px-3 py-1 text-sm transition-colors ${a?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:i.label},i.value)})})}function el({label:e,checked:t,onChange:n}){const i=`switch-${e}`;return b.jsxs("label",{"data-no-drag":!0,htmlFor:i,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[b.jsx("span",{children:e}),b.jsx("input",{id:i,type:"checkbox",checked:t,onChange:a=>n(a.target.checked),className:"peer hidden"}),b.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function JU({onShowToday:e,onShowCouple:t}){const[n,i]=j.useState(!1),[a,l]=j.useState(!1),[u,d]=j.useState(!1),m=async()=>{if(!a){l(!0);try{await st.auth.signOut(),window.location.reload()}catch(p){console.error(p),alert(" .  ."),l(!1)}}};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:b.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[b.jsx(Ff,{icon:b.jsx(CU,{size:22}),label:" ",onClick:e}),b.jsx(Ff,{icon:b.jsx(OU,{size:22}),label:"",onClick:t}),b.jsx(Ff,{icon:b.jsx(zU,{size:22}),label:"",onClick:()=>i(!0)}),b.jsx(Ff,{icon:b.jsx(RU,{size:22}),label:"",onClick:()=>d(!0),disabled:a})]})}),b.jsx(WU,{open:n,onClose:()=>i(!1)}),u&&b.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/50",onClick:()=>d(!1),children:b.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 p-6 rounded-xl shadow-xl",onClick:p=>p.stopPropagation(),children:[b.jsx("h3",{className:"text-lg font-bold mb-4",children:" ?"}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{type:"button",className:"flex-1 py-2 rounded-lg bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 cursor-pointer",onClick:()=>d(!1),children:""}),b.jsx("button",{type:"button",className:"flex-1 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 cursor-pointer",onClick:()=>{d(!1),m()},children:""})]})]})})]})}function Ff({icon:e,label:t,onClick:n,disabled:i}){return b.jsxs("button",{onClick:n,disabled:i,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,b.jsx("span",{className:"mt-1",children:t})]})}function QU(e,t){const[n,i]=j.useState(()=>{if(typeof window>"u")return{};try{const Y=localStorage.getItem(jS);return Y?JSON.parse(Y):{}}catch{return{}}});j.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(jS,JSON.stringify(n))}catch{}},[n]);const[a,l]=j.useState({}),[u,d]=j.useState({}),[m,p]=j.useState(""),[g,y]=j.useState(!1),[x,w]=j.useState(()=>{const Y=cm(),q=um();return q.length?rd(Y,q):Y}),T=j.useRef(!1),k=j.useRef(!1);j.useEffect(()=>{(async()=>{if(g)return;const{data:{user:q},error:J}=await st.auth.getUser();if(J||!q)return;try{if(!k.current){const{data:X,error:ae}=await st.from("user_custom_folders").select("folder_name").eq("user_id",q.id);if(ae?.code==="PGRST205")k.current=!0;else if(!ae&&X){const ne=X.map(me=>me.folder_name?me.folder_name.trim():"").filter(me=>me!=="");hv(ne)}else ae&&console.error("load custom folders from server error:",ae)}}catch(X){console.error("load custom folders exception:",X)}const{data:V,error:Z}=await st.from("user_folder_order").select("folder_name, sort_order").eq("user_id",q.id).order("sort_order",{ascending:!0,nullsFirst:!0});if(Z){console.error("load folder order from server error:",Z),y(!0);return}const ee=cm(),te=(V??[]).map(X=>X.folder_name?String(X.folder_name):"").filter(X=>X.trim()!==""),we=te.length?rd(ee,te):rd(ee,um());w(we),te.length&&vc(te),y(!0)})()},[g]);const A=j.useCallback(async Y=>{const{data:{user:q},error:J}=await st.auth.getUser();if(J||!q)return;const V=Y.filter(ee=>typeof ee=="string"&&ee.trim()!=="").map((ee,te)=>({user_id:q.id,folder_name:ee.trim(),sort_order:te+1,updated_at:new Date().toISOString()}));if(!V.length){await st.from("user_folder_order").delete().eq("user_id",q.id);return}const{error:Z}=await st.from("user_folder_order").upsert(V,{onConflict:"user_id,folder_name"});Z&&console.error("save folder order to server error:",Z)},[]),D=j.useCallback(async Y=>{if(k.current)return;const{data:{user:q},error:J}=await st.auth.getUser();if(J||!q)return;const{error:V}=await st.from("user_custom_folders").upsert({user_id:q.id,folder_name:Y,updated_at:new Date().toISOString()});V&&(V.code==="PGRST205"?k.current=!0:console.error("save custom folder error:",V))},[]),B=j.useCallback(async Y=>{if(k.current)return;const{data:{user:q},error:J}=await st.auth.getUser();if(J||!q)return;const{error:V}=await st.from("user_custom_folders").delete().eq("user_id",q.id).eq("folder_name",Y);V&&(V.code==="PGRST205"?k.current=!0:console.error("delete custom folder error:",V))},[]);j.useEffect(()=>{if(typeof window>"u")return;const Y=()=>{if(T.current){T.current=!1;return}const q=cm(),J=um(),V=J.length?rd(q,J):q;w(V)};return window.addEventListener(fl,Y),()=>window.removeEventListener(fl,Y)},[]),j.useEffect(()=>{l(Y=>{const q={...Y};for(const J of x)q[J]===void 0&&(q[J]=!0);return q})},[x]);const{grouped:N,unassignedItems:M}=j.useMemo(()=>{const Y={};x.forEach(V=>{Y[V]=[]});const q=[],J=new Set;for(const V of e){if(!V.id||J.has(V.id))continue;const Z=V.folder;Z&&x.includes(Z)?Y[Z].push(V):q.push(V),J.add(V.id)}return{grouped:Y,unassignedItems:q}},[e,x]),R=j.useCallback(Y=>{const{source:q,destination:J,type:V}=Y;if(!J||V!=="FOLDER")return;const Z=q.index,ee=J.index;Z!==ee&&w(te=>{if(!te.length)return te;const we=[...te],[X]=we.splice(Z,1);return we.splice(ee,0,X),T.current=!0,vc(we),A(we),we})},[A]);return{folderFavMap:n,setFolderFavMap:i,folderOpenMap:a,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:d,newFolderName:m,setNewFolderName:p,orderedFolders:x,grouped:N,unassignedItems:M,handleDragEnd:R,createFolder:Y=>{const q=Y.trim();!q||q===pn||(RA(q),D(q),w(J=>{if(J.includes(q))return J;const V=[...J,q];return vc(V),A(V),A(V),V}))},deleteFolder:Y=>{e.forEach(q=>{q.folder===Y&&t(q.id,{folder:void 0})}),i(q=>{const J={...q};return delete J[Y],J}),w(q=>{const J=q.filter(V=>V!==Y);return vc(J),A(J),A(J),(async()=>{const{data:{user:V},error:Z}=await st.auth.getUser();Z||!V||await st.from("user_folder_order").delete().eq("user_id",V.id).eq("folder_name",Y)})(),J}),DA.includes(Y)?O4(Y):(N4(Y),B(Y))},UNASSIGNED_LABEL:pn}}function V2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),i=e.slice(4,6),a=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${i} ${a} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${i} ${a} ( )`:`${n} ${i} ${a}`}function eH(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(d=>u.some(m=>d.endsWith(m))),i=n(["","",""]),a=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:i&&a?`${i} ${a}`:i||e}function py(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function tH(e,t,n){if(n)return"";if((e??"").trim()){const l=new Date(t);return uy(l)}const a=t instanceof Date?t:new Date(t);return Number.isNaN(a.getTime())?"":uy(a)}const nH="list:__unassigned__",rH=e=>`list:${e}`,K2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},iH="myeoun:folder-updated",W2=()=>{typeof window>"u"||window.dispatchEvent(new Event(iH))};function sH(e){const t=py(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!Cm(i,a,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),d=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+d,g=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(g.getTime()))return t;new Date(g.getTime()-3600*1e3);const y=lp({...e,birthTime:p});return py({...e,...y})}function aH({open:e,onClose:t,onView:n,onAddNew:i,onEdit:a,onDeleteView:l}){const{list:u,remove:d,update:m,reorder:p}=os(),{folderFavMap:g,setFolderFavMap:y,folderOpenMap:x,setFolderOpenMap:w,memoOpenMap:T,setMemoOpenMap:k,newFolderName:A,setNewFolderName:D,orderedFolders:B,grouped:N,unassignedItems:M,handleDragEnd:R,createFolder:I,deleteFolder:G,UNASSIGNED_LABEL:Y}=QU(u,m),[q,J]=j.useState(""),[V,Z]=j.useState("name"),ee=/\S/.test(q),{filteredUnassigned:te,filteredGrouped:we,totalMatches:X}=j.useMemo(()=>{const P=le=>le.toLowerCase().replace(/\s+/g," ").trim();if(!ee)return{filteredUnassigned:M,filteredGrouped:N,totalMatches:M.length+Object.values(N).reduce((le,ve)=>le+ve.length,0)};const K=P(q),W=le=>{const ve=String(le.birthDay??"").trim();let Ae="",je="",Ce="";if(/^\d{8}$/.test(ve))Ae=ve.slice(0,4),je=ve.slice(4,6),Ce=ve.slice(6,8);else{const Ie=new Date(ve);if(!Number.isNaN(Ie.getTime())){const pe=Ie.getFullYear(),Le=Ie.getMonth()+1,ue=Ie.getDate();Ae=String(pe).padStart(4,"0"),je=String(Le).padStart(2,"0"),Ce=String(ue).padStart(2,"0")}}const Ee=Ae&&je&&Ce?`${Ae}${je}${Ce}`:"",$e=Ae&&je&&Ce?`${Ae}-${je}-${Ce}`:"",Me=Ae&&je&&Ce?`${Ae}.${je}.${Ce}`:"",Pe=V2(le.birthDay,le.birthTime);return P([Ee,$e,Me,Pe].filter(Boolean).join(" "))},z=le=>V==="name"?P(le.name??"").includes(K):V==="ganji"?P(py(le)??"").includes(K):W(le).includes(K),F=M.filter(z),oe={};let ce=F.length;for(const le of B){const ve=(N[le]||[]).filter(z);oe[le]=ve,ce+=ve.length}return{filteredUnassigned:F,filteredGrouped:oe,totalMatches:ce}},[q,V,ee,M,N,B]),ae=j.useRef(null),ne=j.useRef(null);j.useEffect(()=>{if(ne.current==null)return;const P=ae.current;P&&(P.scrollTop=ne.current,ne.current=null)},[u,B]);const me=P=>({...P,transition:P?.transform?"transform 0.15s ease":"none"}),Q=(P,K)=>{const W=sH(P),z=eH(P.birthPlace?.name),F=`item:${P.id}`,oe=!!T[P.id],ce=P.gender===""?"":P.gender===""?"":P.gender,le=!P.birthTime||P.birthTime==="",ve=tH(P.correctedLocal,P.corrected,le),Ae=String(P.birthDay).trim();let je=NaN;if(/^\d{8}$/.test(Ae)){const Me=`${Ae.slice(0,4)}-${Ae.slice(4,6)}-${Ae.slice(6,8)}`,Pe=new Date(Me);Number.isNaN(Pe.getTime())||(je=Pe.getFullYear())}else{const Me=new Date(Ae);Number.isNaN(Me.getTime())||(je=Me.getFullYear())}function Ce(Me,Pe){return Number.isNaN(Me)?0:Pe-Me+1}const Ee=new Date().getFullYear(),$e=Ce(je,Ee);return b.jsx(Cc,{draggableId:F,index:K,isDragDisabled:ee,children:Me=>b.jsx("li",{ref:Me.innerRef,...Me.draggableProps,...Me.dragHandleProps,style:me(Me.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:b.jsxs("div",{className:"p-3",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[P.name," (",$e,", ",ce,")"]}),b.jsx("span",{className:"opacity-40",children:""}),b.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P.relationship?P.relationship:" "}),b.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),b.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[V2(P.birthDay,P.birthTime),","," ",P.calendarType==="lunar"?"":""]}),(z||ve)&&b.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[z,ve&&b.jsxs("span",{className:"opacity-70",children:[" "," "," ",le?"":ve]})]}),W&&b.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:W}),P.memo&&P.memo.trim()!==""&&b.jsxs("div",{children:[b.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Pe=>{Pe.stopPropagation(),k(Ie=>({...Ie,[P.id]:!Ie[P.id]}))},children:oe?" ":" "}),b.jsx("div",{className:oe?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:P.memo})]}),b.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[b.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:P.folder??Y,onClick:Pe=>Pe.stopPropagation(),onChange:Pe=>{Pe.stopPropagation();const Ie=Pe.target.value,pe=Ie===Y?void 0:Ie;m(P.id,{folder:pe})},children:[Y,...B].map(Pe=>b.jsx("option",{value:Pe,children:Pe},Pe))}),b.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:P.mingSikType??"/",onClick:Pe=>Pe.stopPropagation(),onChange:Pe=>{Pe.stopPropagation();const Ie=Pe.target.value,pe={...P,mingSikType:Ie},Le=lp(pe);m(P.id,{mingSikType:Ie,...Le}),n({...pe,...Le}),t()},children:[b.jsx("option",{value:"",children:""}),b.jsx("option",{value:"/",children:"/"}),b.jsx("option",{value:"",children:""})]})]}),b.jsxs("div",{className:"flex gap-2 mt-3",children:[b.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),n(P),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),b.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),a?.(P)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),b.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),confirm(`'${P.name}'  ?`)&&(d(P.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),b.jsx("button",{type:"button",onClick:Pe=>{Pe.stopPropagation();const Ie=!P.favorite;m(P.id,{favorite:Ie});const pe=P.folder??"__unassigned__",Le={__unassigned__:[]};B.forEach(Be=>{Le[Be]=[]}),u.forEach(Be=>{const Ue=Be.folder??"__unassigned__";Le[Ue]||(Le[Ue]=[]),Le[Ue].push(Be)});const fe=(Le[pe]??[]).filter(Be=>Be.id!==P.id);Ie?Le[pe]=[{...P,favorite:Ie},...fe]:Le[pe]=[...fe,{...P,favorite:Ie}];const ze=[...Le.__unassigned__,...B.flatMap(Be=>Le[Be]??[])];p(ze)},className:`ml-auto p-1 rounded cursor-pointer ${P.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:b.jsx(Z2,{size:16,fill:P.favorite?"currentColor":"none"})})]})]})})},F)},H=P=>{const{type:K,source:W,destination:z,draggableId:F}=P;if(!z||ee)return;const oe=ae.current;if(oe&&(ne.current=oe.scrollTop),K==="FOLDER"){R(P);return}if(K==="ITEM"){if(!F.replace(/^item:/,""))return;const le=K2(W.droppableId),ve=K2(z.droppableId),Ae=le??"__unassigned__",je=ve??"__unassigned__",Ce={__unassigned__:[...M]};B.forEach(pe=>{Ce[pe]=[...N[pe]||[]]});const Ee=Ce[Ae]??[];if(!Ee[W.index])return;const[$e]=Ee.splice(W.index,1),Me={...$e,folder:ve??void 0},Pe=Ce[je]??[];Pe.splice(z.index,0,Me),Ce[Ae]=Ee,Ce[je]=Pe;const Ie=[...Ce.__unassigned__,...B.flatMap(pe=>Ce[pe]??[])];p(Ie)}};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),b.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[b.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[b.jsx("h2",{className:"text-lg font-bold",children:" "}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("button",{type:"button",onClick:()=>{i(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[b.jsx($U,{size:16})," "]}),b.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:b.jsx(Bj,{size:22})})]})]}),b.jsx(Bd,{onDragEnd:H,children:b.jsxs("div",{ref:ae,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[b.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("select",{value:V,onChange:P=>Z(P.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[b.jsx("option",{value:"name",children:""}),b.jsx("option",{value:"ganji",children:""}),b.jsx("option",{value:"birth",children:""})]}),b.jsxs("div",{className:"relative flex-1",children:[b.jsx("input",{type:"text",value:q,onChange:P=>J(P.target.value),placeholder:V==="name"?" ":V==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),q&&b.jsx("button",{type:"button",onClick:()=>J(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:b.jsx(jU,{size:16})})]}),ee&&b.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[X,""]})]})}),b.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[b.jsx("input",{type:"text",value:A,onChange:P=>D(P.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:P=>P.stopPropagation()}),b.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:P=>{P.stopPropagation();const K=A.trim();K&&(I(K),D(""),W2())},children:""})]}),b.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:ee?"   .":"/      ."}),b.jsx(ul,{droppableId:nH,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:P=>{const K=te;return b.jsx("div",{ref:P.innerRef,...P.droppableProps,className:"mb-6",children:b.jsxs("ul",{className:"flex flex-col gap-2",children:[K.map((W,z)=>Q(W,z)),P.placeholder]})})}}),b.jsx(ul,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:P=>b.jsxs("div",{ref:P.innerRef,...P.droppableProps,children:[B.map((K,W)=>{const z=rH(K),F=we[K]||[],oe=!!x[K],ce=!!g[K];return b.jsx(Cc,{draggableId:`folder-${K}`,index:W,isDragDisabled:ee,children:le=>b.jsxs("div",{ref:le.innerRef,...le.draggableProps,...le.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[b.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("button",{type:"button",onClick:ve=>{ve.stopPropagation(),w(Ae=>({...Ae,[K]:!oe}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[oe?b.jsx(kU,{size:16}):b.jsx(EU,{size:16}),b.jsx("span",{className:"text-sm font-semibold",children:K})]}),b.jsx("button",{type:"button",onClick:ve=>{ve.stopPropagation(),y(Ae=>({...Ae,[K]:!Ae[K]}))},className:`p-1 rounded cursor-pointer ${ce?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:b.jsx(Z2,{size:16,fill:ce?"currentColor":"none"})})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:"opacity-60 text-xs",children:[F.length,""]}),b.jsx("button",{type:"button",onClick:ve=>{if(ve.stopPropagation(),g[K]){alert(`'${K}'    .
   .`);return}confirm(`'${K}'  ?
(   )`)&&(G(K),W2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),oe&&b.jsx(ul,{droppableId:z,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:ve=>b.jsx("div",{ref:ve.innerRef,...ve.droppableProps,className:"mt-2",children:b.jsxs("ul",{className:"flex flex-col gap-2",children:[F.map((Ae,je)=>Q(Ae,je)),ve.placeholder]})})})]})},`folder-${K}`)}),P.placeholder]})})]})})]})]})}const X2="ms_folders",xb="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",oH="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",lH="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Qs="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",cH="text-xs text-neutral-500 dark:text-neutral-400",qf="accent-violet-600 dark:accent-violet-400",J2="accent-violet-600 dark:accent-violet-400",vp="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",uH=`${vp} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,dH=`${vp} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,Q2=`${vp} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,hH=`${vp} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function fH({item:e,onClose:t}){const{list:n,update:i,remove:a}=os(),[l,u]=j.useState(!1),[d,m]=j.useState({...e,calendarType:e.calendarType??"solar"}),[p,g]=j.useState(!e.birthTime||e.birthTime===""),[y,x]=j.useState(!e.birthPlace||e.birthPlace.name===""),w=j.useMemo(()=>["","","","","",""],[]),[T,k]=j.useState([]);j.useEffect(()=>{try{const R=JSON.parse(localStorage.getItem(X2)||"[]");Array.isArray(R)&&k(R)}catch{}},[]);const A=j.useMemo(()=>{const R=Array.from(new Set(n.map(Y=>Y.folder).filter(Boolean))),I=new Set([...w,...T,...R]),G=Array.from(I).sort((Y,q)=>Y.localeCompare(q));return[pn,...G]},[n,T,w]),D=()=>{m({...e,calendarType:e.calendarType??"solar"}),g(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},B=()=>{if(!d.name||d.name.trim()==="")return" .";if(!d.birthDay||!/^\d{8}$/.test(d.birthDay))return" YYYYMMDD  .";const R=Number(d.birthDay.slice(0,4)),I=Number(d.birthDay.slice(4,6)),G=Number(d.birthDay.slice(6,8));if(d.calendarType==="lunar")try{yr(R,I,G)}catch(Y){return Y instanceof Error?Y.message:"   ."}else{const Y=new Date(R,I-1,G);if(Y.getFullYear()!==R||Y.getMonth()+1!==I||Y.getDate()!==G)return"   ."}if(!p){if(!d.birthTime||!/^\d{4}$/.test(d.birthTime))return"  00002359 (4) .";const Y=Number(d.birthTime.slice(0,2)),q=Number(d.birthTime.slice(2,4));if(Y<0||Y>23||q<0||q>59)return"  00002359  ."}return!y&&!d.birthPlace?"   '' .":null},N=()=>{const R=B();if(R){alert(R);return}const I=Number(d.birthDay.slice(0,4)),G=Number(d.birthDay.slice(4,6)),Y=Number(d.birthDay.slice(6,8));let q=I,J=G,V=Y;if(d.calendarType==="lunar"){const F=yr(I,G,Y);q=F.getFullYear(),J=F.getMonth()+1,V=F.getDate()}const Z=p?4:Number((d.birthTime??"0430").slice(0,2)),ee=p?30:Number((d.birthTime??"0430").slice(2,4)),te=y||!d.birthPlace||d.birthPlace.lon===0?127.5:d.birthPlace.lon,we=new Date(q,J-1,V,Z,ee,0,0),X=!d.birthPlace||typeof d.birthPlace=="object"&&d.birthPlace.name==="",ae=yl(we,te,X),me=dt(ae,te).charAt(0),H=((F,oe)=>{const le=["","","","","","","","","",""].includes(F),ve=(oe??"")==="";return le?ve?"forward":"backward":ve?"backward":"forward"})(me,d.gender??""),P=dl(d.folder===pn?void 0:d.folder),K={...e,name:(d.name??"").trim()||"",birthDay:d.birthDay,birthTime:p?"":d.birthTime??"0430",gender:d.gender??"",birthPlace:y?{name:"",lat:0,lon:127.5}:d.birthPlace??{name:"",lat:0,lon:127.5},relationship:d.relationship??"",memo:d.memo??"",folder:P,calendarType:d.calendarType??"solar",mingSikType:d.mingSikType??"/",DayChangeRule:(d.mingSikType??"/")===""?"":"",dir:H,corrected:ae,correctedLocal:"",ganji:""},W=lp(K),z={...K,...W};if(z.folder&&!w.includes(z.folder)&&!T.includes(z.folder)){const F=[...T,z.folder];k(F),localStorage.setItem(X2,JSON.stringify(F))}i(e.id,z),u(!1),t&&t()},M=()=>{confirm(`'${e.name}'  ?`)&&a(e.id)};return l?b.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[b.jsx("h3",{className:"text-lg font-bold",children:" "}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:""}),b.jsx("input",{className:xb,value:d.name||"",onChange:R=>m({...d,name:R.target.value}),placeholder:""})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:" (YYYYMMDD)"}),b.jsx("input",{className:xb,value:d.birthDay||"",onChange:R=>m({...d,birthDay:R.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),b.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{type:"radio",className:qf,name:"calendarType",checked:d.calendarType==="solar",onChange:()=>m({...d,calendarType:"solar"}),id:"editor_calendar_solar"}),b.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{type:"radio",className:qf,name:"calendarType",checked:d.calendarType==="lunar",onChange:()=>m({...d,calendarType:"lunar"}),id:"editor_calendar_lunar"}),b.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),d.calendarType==="lunar"&&d.birthDay?.length===8&&b.jsx("span",{className:cH,children:(()=>{try{const R=Number(d.birthDay.slice(0,4)),I=Number(d.birthDay.slice(4,6)),G=Number(d.birthDay.slice(6,8)),Y=yr(R,I,G);return`  ${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`}catch(R){const I=R instanceof Error?R.message:void 0;return`  ${I?`: ${I}`:""}`}})()})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:"  (HHMM)"}),b.jsx("input",{className:`${xb} disabled:opacity-50`,value:p?"":d.birthTime||"",onChange:R=>m({...d,birthTime:R.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),b.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",className:J2,checked:p,onChange:R=>g(R.target.checked),id:"editor_birthTimeX"}),b.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:" "}),b.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(R=>{const I=`editor_ming_${R}`;return b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{type:"radio",className:qf,name:"mingSikType",checked:(d.mingSikType??"")===R,onChange:()=>m({...d,mingSikType:R}),id:I}),b.jsx("label",{htmlFor:I,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:R})]},R)})})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:""}),b.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(R=>{const I=`editor_gender_${R}`;return b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("input",{type:"radio",className:qf,name:"gender",value:R,checked:d.gender===R,onChange:G=>m({...d,gender:G.target.value}),id:I}),b.jsx("label",{htmlFor:I,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:R})]},R)})})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:" "}),b.jsx(yk,{onSelect:R=>m({...d,birthPlace:R}),value:y?"":d.birthPlace?.name??""}),b.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",className:J2,checked:y,onChange:R=>x(R.target.checked),id:"editor_birthPlaceX"}),b.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:""}),b.jsx(OA,{value:d.relationship||"",onChange:R=>m({...d,relationship:R})})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:""}),b.jsx("select",{className:oH,value:d.folder??pn,onChange:R=>{const I=R.target.value;m(I===pn?{...d,folder:void 0}:{...d,folder:I})},children:A.map(R=>b.jsx("option",{value:R===pn?pn:R,children:R},R))})]}),b.jsxs("div",{children:[b.jsx("label",{className:Qs,children:""}),b.jsx("textarea",{className:lH,value:d.memo||"",onChange:R=>m({...d,memo:R.target.value}),placeholder:" "})]}),b.jsxs("div",{className:"flex gap-2 justify-end",children:[b.jsx("button",{className:Q2,onClick:()=>{D(),u(!1)},children:""}),b.jsx("button",{className:hH,onClick:N,children:""})]})]}):b.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{className:uH,onClick:()=>u(!0),children:""}),b.jsx("button",{className:dH,onClick:M,children:""}),t&&b.jsx("button",{className:Q2,onClick:t,children:""})]})]}),b.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[b.jsxs("div",{children:[": ",e.gender]}),b.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),b.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),b.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),b.jsxs("div",{children:[": ",e.relationship||"-"]}),b.jsxs("div",{children:[": ",e.folder??pn]})]}),e.ganji&&b.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&b.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[b.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}const mH="".split(",").map(e=>e.trim()).filter(Boolean).concat(["15b517b3-3d97-41a6-ae17-563abd163a36"]),wb=20;function $j(){const[e,t]=j.useState(!1),[n,i]=j.useState(!1),[a,l]=j.useState(""),[u,d]=j.useState(1),[m,p]=j.useState(!1),[g,y]=j.useState(null),[x,w]=j.useState([]),[T,k]=j.useState({}),[A,D]=j.useState({}),[B,N]=j.useState({});j.useEffect(()=>{(async()=>{const{data:J}=await st.auth.getUser(),V=J.user?.id;i(!!V&&mH.includes(V)),t(!0)})()},[]);const M=j.useMemo(()=>Math.max(1,Math.ceil(x.length/wb)),[x]),R=j.useCallback(async()=>{p(!0),y(null);try{let q=st.from("myeongsik").select("user_id,name");if(a.trim()){const ee=`%${a.trim()}%`;q=q.or(`name.ilike.${ee},user_id.ilike.${ee}`)}const{data:J,error:V}=await q;if(V)throw new Error(V.message);const Z=Array.from(new Set((J||[]).map(ee=>ee.user_id).filter(Boolean)));w(Z),d(1)}catch(q){const J=q instanceof Error?q.message:"Unknown error";y(J)}p(!1)},[a]),I=j.useMemo(()=>{const q=(u-1)*wb;return x.slice(q,q+wb)},[u,x]),G=j.useCallback(async()=>{if(!I.length){D({}),k({});return}p(!0);try{const q=I.length?I:["__NO_MATCH__"],{data:J}=await st.from("profiles").select("id,user_id,name,email,nickname").in("user_id",q),V={};(J||[]).forEach(te=>{const we=te.user_id||te.id;we&&(V[we]=te)}),k(V);const{data:Z}=await st.from("myeongsik").select("*").in("user_id",q).order("created_at",{ascending:!1}),ee={};(Z||[]).forEach(te=>{ee[te.user_id]||(ee[te.user_id]=[]),ee[te.user_id].push(te)}),D(ee)}catch(q){const J=q instanceof Error?q.message:"Unknown error";y(J)}p(!1)},[I]);j.useEffect(()=>{n&&R()},[n,R]),j.useEffect(()=>{n&&G()},[G,n]);const Y=()=>m?b.jsx("div",{className:"text-neutral-400",children:"Loading..."}):I.length?I.map(q=>{const J=T[q],V=A[q]||[],Z=B[q],ee=J?.name||J?.nickname||J?.email||"(no profile name)";return b.jsxs("div",{className:"rounded-xl border border-neutral-700 bg-neutral-900 shadow",children:[b.jsxs("button",{onClick:()=>N(te=>({...te,[q]:!te[q]})),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-850",children:[b.jsx("div",{className:"flex items-center gap-2",children:b.jsxs("div",{className:"text-white font-semibold",children:[ee,b.jsx("span",{className:"text-xs text-neutral-500 mx-2",children:q}),b.jsxs("span",{className:"text-xs text-neutral-400",children:[" ",V.length,""]})]})}),b.jsx("span",{className:"text-neutral-400",children:Z?"+":"-"})]}),!Z&&b.jsx("ul",{className:"px-4 pb-4 space-y-2",children:V.map(te=>{const we=te.birth_json?.birthDay??"-";return b.jsxs("li",{className:"rounded-lg border border-neutral-800 bg-neutral-950 px-3 py-2",children:[b.jsx("div",{className:"text-white",children:te.name||"(no name)"}),b.jsxs("div",{className:"text-xs text-neutral-500",children:["Birth: ",we,"  Created:"," ",te.created_at?new Date(te.created_at).toLocaleString():"-"]})]},te.id)})})]},q)}):b.jsx("div",{className:"text-neutral-400",children:"No data."});return b.jsx("div",{className:"min-h-screen bg-neutral-950 text-white px-4 py-6",children:b.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[b.jsxs("header",{className:"flex items-center justify-between",children:[b.jsx("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),b.jsx("input",{className:"px-3 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:a,onChange:q=>l(q.target.value),placeholder:"Search user"})]}),!e&&b.jsx("div",{children:"Checking admin"}),e&&!n&&b.jsx("div",{children:"Not admin"}),n&&b.jsxs(b.Fragment,{children:[g&&b.jsx("div",{className:"text-red-400 border border-red-500 p-2 rounded bg-red-500/10",children:g}),b.jsx("div",{className:"space-y-4",children:Y()}),b.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[b.jsx("button",{onClick:()=>d(q=>Math.max(1,q-1)),disabled:u<=1,className:"px-3 py-1 border rounded",children:""}),b.jsxs("span",{children:[u," / ",M]}),b.jsx("button",{onClick:()=>d(q=>Math.min(M,q+1)),disabled:u>=M,className:"px-3 py-1 border rounded",children:""})]})]})]})})}function pH({pillarsA:e,pillarsB:t}){const n=T6(e,t);return b.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[b.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([i,a])=>a.length>0?b.jsxs("div",{className:"flex gap-2 text-xs",children:[b.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:i}),b.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((l,u)=>b.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},i):null)]})}function gH(e){return typeof e=="object"&&e!==null}const bH=["","","","","","","","","","","","","","","","","","","",""],yH=["","","","","","","","","","","","","","","","","","","","","","","",""],vH=new Set(bH),_H=new Set(yH);function eE(e){return typeof e=="string"&&e.length>=2&&vH.has(e[0])&&_H.has(e[1])}function cn(e,...t){if(eE(e))return e;for(const n of t)if(eE(n))return n;return""}function Yf(e,t){let n=null;const i=t.getTime();for(const a of e)if(a.at.getTime()<=i)n=a;else break;return n}function xH(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function tE(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,i,a,l,u]=t,d=new Date(+n,+i-1,+a,+l,+u);return Number.isNaN(d.getTime())?null:d}function Im(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function wH(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let a=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(a=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:i,hh:a,mm:l}}function _p(e){const{y:t,m:n,d:i}=wH(e),a=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?yr(t,n,i,a,l):new Date(t,n-1,i,a,l)}function SH(e){const t=_p(e);return`${Im(e)}-${t.toISOString()}`}function Ju(e){const t=e;return typeof t.id=="string"&&t.id?t.id:SH(e)}function EH(e){return gH(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function TH(e){const t=vl;return EH(t)?e==="classic"?t.Classic:t.Modern:e}const Sb="people_picker_order_v1";function kH(e,t,n){const i=e.slice(),[a]=i.splice(t,1);return i.splice(n,0,a),i}function nE({open:e,list:t,onSelect:n,onClose:i}){const[a,l]=j.useState("");j.useEffect(()=>{e||l("")},[e]);const u=j.useMemo(()=>t.map(Ju),[t]),d=j.useMemo(()=>new Set(u),[u]),[m,p]=j.useState([]);j.useEffect(()=>{const k=localStorage.getItem(Sb),A=k?JSON.parse(k):[],D=A.filter(N=>d.has(N)),B=[...D,...u.filter(N=>!D.includes(N))];p(B),JSON.stringify(B)!==JSON.stringify(A)&&localStorage.setItem(Sb,JSON.stringify(B))},[u,d]);const g=k=>{p(k),localStorage.setItem(Sb,JSON.stringify(k))},y=j.useMemo(()=>{const k=new Map(t.map(D=>[Ju(D),D])),A=[];for(const D of m){const B=k.get(D);B&&A.push(B)}return k.forEach((D,B)=>{m.includes(B)||A.push(D)}),A},[t,m]),x=j.useMemo(()=>{const k=a.trim().toLowerCase();return k?y.filter(A=>Im(A).toLowerCase().includes(k)):y},[y,a]),w=a.trim()==="",T=k=>{const{destination:A,source:D}=k;if(!A||!w||A.index===D.index)return;const B=x.map(Ju),N=kH(B,D.index,A.index),R=y.map(Ju).filter(G=>!B.includes(G)),I=[...N,...R].filter((G,Y,q)=>q.indexOf(G)===Y);g(I)};return b.jsxs(b.Fragment,{children:[b.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),b.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:i}),b.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),b.jsx("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx("input",{placeholder:" ",value:a,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!w&&b.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),b.jsx(Bd,{onDragEnd:T,children:b.jsx(ul,{droppableId:"peopleList",children:k=>b.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((A,D)=>{const B=String(Ju(A)),N=_p(A);return b.jsx(Cc,{draggableId:B,index:D,children:M=>b.jsx("li",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,onClick:()=>n(A),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"mr-2 select-none",children:""}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:Im(A)}),b.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:cd(N)})]})]})})},B)}),k.placeholder]})})})]})]})}function Eb({label:e,gzHour:t,gzDay:n,gzMonth:i,gzYear:a,dayStem:l,cardSettings:u,sinsalBaseBranch:d,sinsalMode:m,sinsalBloom:p}){const g=k=>{const A=u.showSibiUnseong?Jt(l,k):"",D=u.showSibiSinsal?Qt({baseBranch:d,targetBranch:k,era:TH(m),gaehwa:!!p}):"";return{unseongText:A||void 0,shinsalText:D||void 0}},y=cn(t).charAt(1),x=cn(n).charAt(1),w=cn(i).charAt(1),T=cn(a).charAt(1);return b.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[b.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),b.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),y],["",cn(n),x],["",cn(i),w],["",cn(a),T]].map(([k,A,D])=>{const{unseongText:B,shinsalText:N}=g(D);return b.jsx(yc,{label:k,gz:A,dayStem:l,settings:Xn.getState().settings,unseongText:B,shinsalText:N,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function AH(e){if(!e)return"";const t=e,n=d=>typeof t[d]=="string"?String(t[d]).trim().toLowerCase():null,i=d=>typeof t[d]=="boolean"?t[d]:null,a=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(d=>!!d);for(const d of a){if(["","","male","m","boy","man"].includes(d))return"";if(["","","female","f","girl","woman"].includes(d))return""}const l=i("isMale"),u=i("isFemale");return l===!0?"":u===!0?"":""}function fc({label:e,data:t,mode:n,effectiveDate:i,onPick:a}){const l=Xn(R=>R.settings),u=j.useMemo(()=>t?_p(t):null,[t]),d=cn(u?zi(u,"/"):void 0),m=cn(u?xt(u,"/"):void 0),p=cn(u?jt(u):void 0),g=cn(u?dt(u):void 0),y=j.useMemo(()=>m.charAt(0)||"",[m]),x=u,w=j.useMemo(()=>{const R=t?.birthPlace;return!R||R.name===""||!R.lon?127.5:R.lon},[t]),T=t?.mingSikType??"/",k=j.useMemo(()=>{const R=x?xt(x,T).charAt(1):m.charAt(1)||"",I=x?dt(x,w).charAt(1):g.charAt(1)||"";return(l.sinsalBase??"")===""?R:I},[l.sinsalBase,x,T,w,m,g]),A=j.useMemo(()=>{if(n!==""||!u||!t)return null;try{const R=zA(u,d,t.dir,120,t.mingSikType),I=HA(R,m,t.dir,t.DayChangeRule),G=Pd(u,p,t.dir,120,t?.birthPlace?.lon??127.5),Y=GA(G,g,t.dir,t.DayChangeRule,u),q=i;return{si:cn(Yf(R.events,q)?.gz,d),il:cn(Yf(I.events,q)?.gz,m),wl:cn(Yf(G.events,q)?.gz,p),yn:cn(Yf(Y.events,q)?.gz,g)}}catch{return null}},[n,u,d,m,p,g,i,t]),D=j.useMemo(()=>{if(n!=="")return null;const R=i;return{si:cn(zi(R,"/")),il:cn(xt(R,"/")),wl:cn(jt(R)),yn:cn(dt(R))}},[n,i]),B=t?Im(t):"",N=u?cd(u):"",M=t?AH(t):"";return t?b.jsxs("div",{className:"space-y-2",children:[b.jsx("button",{onClick:a,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),b.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[b.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),b.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:B}),M&&b.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",M]}),N&&b.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:N})]}),n===""&&b.jsx(Eb,{label:"",gzHour:d,gzDay:m,gzMonth:p,gzYear:g,dayStem:y,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&A&&b.jsx(Eb,{label:"",gzHour:A.si,gzDay:A.il,gzMonth:A.wl,gzYear:A.yn,dayStem:y,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&D&&b.jsx(Eb,{label:"",gzHour:D.si,gzDay:D.il,gzMonth:D.wl,gzYear:D.yn,dayStem:y,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):b.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:b.jsx("button",{onClick:a,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function jH({people:e=[]}){const[t,n]=j.useState(),[i,a]=j.useState(),[l,u]=j.useState(!1),[d,m]=j.useState(!1),p=j.useRef(new Date),[g,y]=j.useState(()=>xH(p.current)),x=j.useRef(tE(g)??p.current),w=j.useMemo(()=>{const N=tE(g);return N&&(x.current=N),x.current},[g]),[T,k]=j.useState(!1),[A,D]=j.useState(!1);function B(N){if(!N)return["","","",""];try{const M=_p(N),R={hour:cn(zi(M,"/")),day:cn(xt(M,"/")),month:cn(jt(M)),year:cn(dt(M))};return[R.year,R.month,R.day,R.hour]}catch{return["","","",""]}}return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[b.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[b.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),b.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[b.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:l,onChange:N=>u(N.target.checked),className:"accent-indigo-500"})," "]}),b.jsx("button",{onClick:()=>m(N=>!N),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:d?"  ":"  "})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[b.jsx(fc,{label:" A",data:t,mode:"",effectiveDate:w,onPick:()=>k(!0)}),b.jsx(fc,{label:" B",data:i,mode:"",effectiveDate:w,onPick:()=>D(!0)}),l&&t&&b.jsx(fc,{label:" A",data:t,mode:"",effectiveDate:w,onPick:()=>k(!0)}),l&&i&&b.jsx(fc,{label:" B",data:i,mode:"",effectiveDate:w,onPick:()=>D(!0)}),d&&t&&b.jsx(fc,{label:" A",data:t,mode:"",effectiveDate:w,onPick:()=>k(!0)}),d&&i&&b.jsx(fc,{label:" B",data:i,mode:"",effectiveDate:w,onPick:()=>D(!0)})]}),t&&i&&b.jsx("div",{className:"mt-4",children:b.jsx(pH,{pillarsA:B(t),pillarsB:B(i)})}),b.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[b.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),b.jsx("input",{type:"datetime-local",value:g,onChange:N=>y(N.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),b.jsx(nE,{open:T,list:e||[],onSelect:N=>{n(N),k(!1)},onClose:()=>k(!1)}),b.jsx(nE,{open:A,list:e||[],onSelect:N=>{a(N),D(!1)},onClose:()=>D(!1)})]})}function NH(){const[e,t]=j.useState(!1),[n,i]=j.useState(!1),a=async()=>{try{const{data:{user:l}}=await st.auth.getUser();if(!l){alert("  .");return}const u=l.id;await st.from("profiles").delete().eq("id",u),await st.from("myeongsik").delete().eq("user_id",u),await st.auth.admin.deleteUser(u),await st.auth.signOut(),alert(" ."),window.location.href="/"}catch(l){console.error(l),alert("   .")}};return b.jsxs(b.Fragment,{children:[b.jsxs("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700",children:[b.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),b.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[b.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),b.jsx("button",{onClick:()=>i(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:b.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[b.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),b.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[b.jsx("p",{className:"mb-2",children:"( )     ,      ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),b.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),b.jsx("p",{className:"mb-2",children:"                   "}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),b.jsx("p",{className:"mb-2",children:"                 "}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),b.jsx("p",{className:"mb-2",children:"          ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),b.jsx("p",{className:"mb-2",children:" Supabase        ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),b.jsx("p",{children:"   : unique950318@gmail.com"})]}),b.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>i(!1),children:b.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[b.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),b.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["         .",b.jsx("br",{}),"    ."]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:()=>i(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),b.jsx("button",{onClick:a,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function OH({ms:e}){const{date:t,setDate:n}=Zr();j.useEffect(()=>{n(new Date)},[e]);const i=gv(e),a=j.useMemo(()=>{const d=t??new Date,m=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),g=String(d.getDate()).padStart(2,"0");return`${m}-${p}-${g}`},[t]),l=d=>{if(!d)return;const[m,p,g]=d.split("-"),y=Number(m),x=Number(p),w=Number(g);if(!Number.isFinite(y)||!Number.isFinite(x)||!Number.isFinite(w))return;const T=t??new Date,k=T.getHours(),A=T.getMinutes(),D=new Date(y,x,0).getDate(),B=Math.min(w,D),N=new Date(y,x-1,B,k,A,0,0);Number.isNaN(N.getTime())||n(N)},u=j.useMemo(()=>{const d=e.ganji,m=i?.dae?.gz?`${i.dae.gz}`:null,p=i?.se?.gz?`${i.se.gz}`:null,g=i?.wol?.gz?`${i.wol.gz}`:null,y=[m,p,g].filter(Boolean).join(" ");return[d,y].filter(Boolean).join(" + ")},[e,i]);return b.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&b.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),b.jsx("div",{className:"grid grid-cols-1 gap-3",children:b.jsxs("label",{className:"w-full flex justify-center items-center",children:[b.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),b.jsx("input",{type:"date",value:a,onChange:d=>l(d.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const DH=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function CH(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function Zf(e,t){return e&&t?`${e}${t}`:null}function rE(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const MH={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},RH=Pi.,LH=["","","","","","","","","","","",""];function iE(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const i=MH[n],a=LH.indexOf(t),l=(i+(a>=0?a:0))%10;return RH[l]}const BH=Pi..slice(),PH=["","","","","","","","","","","",""];function mc(e,t){const i=(t===""?HE:jy)[e],a=t===""?BH:PH,l=Pi..reduce((u,d)=>(u[d]="",u),{});for(let u=0;u<12;u++)l[a[u]]=i[u];return l}const $H={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},IH={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function zH({open:e,onClose:t,onSave:n}){const{settings:i}=Xn(),[a,l]=j.useState(null),[u,d]=j.useState({}),[m,p]=j.useState(null),[g,y]=j.useState(!0),[x,w]=j.useState(!0),[T,k]=j.useState(""),[A,D]=j.useState("male"),[B,N]=j.useState(null),[M,R]=j.useState(!1),[,I]=j.useState(null),[G,Y]=j.useState(null),[q,J]=j.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[V,Z]=j.useState(!1),[ee,te]=j.useState(null),we=pe=>{te(pe),setTimeout(()=>te(null),1800)},[X,ae]=j.useState(!1),[ne,me]=j.useState(!1);j.useEffect(()=>{if(X){const pe=setTimeout(()=>ae(!1),2e3);return()=>clearTimeout(pe)}},[X]),j.useEffect(()=>{if(ne){const pe=setTimeout(()=>me(!1),2e3);return()=>clearTimeout(pe)}},[ne]);const Q=()=>{const pe=G!==null?B?.filter((kn,Cn)=>Cn===G)??[]:[];if(pe.length===0){alert("  .");return}const Le=T===""?"/":"",ue=pe[0],[fe,ze,Be]=ue.date.split("-").map(Number),Ue={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let at=0,et=0;if(ue.hourSlots.length>0){const kn=ue.hourSlots[0].branch,Cn=Ue[kn];Cn&&(at=Cn.hh,et=Cn.mi)}const Zt=new Date(fe,ze-1,Be,at,et),Dn=Zt,Tn="",cr=A==="male"?"":"";function _r(kn,Cn){const Or=["","","","","","","","","",""].includes(kn),ur=Cn==="";return Or?ur?"forward":"backward":ur?"backward":"forward"}const dn=_r(ue.year.charAt(0),cr),Mt=dt(Dn,127.5),yn=jt(Dn,127.5),hn=xt(Dn,Le),Vr=zi(Dn,Le),ca=[` : ${Mt} ${yn} ${hn}`,Vr?`${Vr}`:null].filter(Boolean).join(" "),Hi={id:bk(),name:"",birthDay:`${fe}${String(ze).padStart(2,"0")}${String(Be).padStart(2,"0")}`,birthTime:`${String(at).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:cr,birthPlace:V?{name:"",lat:0,lon:127.5}:q.birthPlace??{name:"",lat:0,lon:127.5},relationship:q.relationship??"",memo:q.memo??"",folder:dl(q.folder),mingSikType:q.mingSikType??"/",DayChangeRule:q.mingSikType===""?"":"",calendarType:q.calendarType??"solar",yearGZ:ue.year,monthGZ:ue.month,dayGZ:ue.day,hourGZ:ue.hour,ganjiText:` : ${ue.year} ${ue.month} ${ue.day} ${ue.hour}`,ganji:ca,dayStem:ue.day.charAt(0),dateObj:Zt,corrected:Dn,correctedLocal:Tn,dir:dn};Fm.flushSync(()=>{os.getState().add(Hi)}),n(Hi),te(" !"),J({gender:"",mingSikType:"/",calendarType:"solar"}),Z(!1),t()},H=g||x,P=!!(u.yearStem&&u.yearBranch),K=!!(u.dayStem&&u.dayBranch),W=!H||P||K,z=!!m&&m.endsWith("Stem"),F=!!m&&m.endsWith("Branch");function oe(pe){return pe==="yearStem"?"yearBranch":pe==="yearBranch"?"yearStem":pe==="monthStem"?"monthBranch":pe==="monthBranch"?"monthStem":pe==="dayStem"?"dayBranch":pe==="dayBranch"?"dayStem":pe==="hourStem"?"hourBranch":"hourStem"}const ce=j.useCallback((pe,Le)=>{if(!g||!pe.yearStem)return pe;const ue={...pe},fe=jy[pe.yearStem];if(!fe)return ue;const ze=Ue=>fe.filter(at=>at.startsWith(Ue)),Be=Ue=>fe.find(at=>at.endsWith(Ue));if(Le==="monthStem"&&ue.monthStem){const Ue=ze(ue.monthStem).map(at=>at.slice(1));return Ue.length>=2?(l(Ue.slice(0,2)),p("monthBranch"),ue):(Ue.length===1&&(ue.monthBranch=Ue[0],l(null)),ue)}if(Le==="monthBranch"&&ue.monthBranch){const Ue=Be(ue.monthBranch);return Ue&&(ue.monthStem=Ue.slice(0,1),l(null)),ue}if(Le==="yearStem"){if(ue.monthStem&&!ue.monthBranch){const Ue=ze(ue.monthStem).map(at=>at.slice(1));if(Ue.length>=2)return l(Ue.slice(0,2)),p("monthBranch"),ue;Ue.length===1&&(ue.monthBranch=Ue[0])}else if(ue.monthBranch&&!ue.monthStem){const Ue=Be(ue.monthBranch);Ue&&(ue.monthStem=Ue.slice(0,1))}}return ue},[g,p]),le=j.useCallback((pe,Le)=>{if(!x||!pe.dayStem)return pe;const ue={...pe},fe=mc(pe.dayStem,T),ze=Ue=>Object.entries(fe).find(([,at])=>at.startsWith(Ue)),Be=Ue=>fe[Ue];if(Le==="hourStem"&&ue.hourStem){const Ue=ze(ue.hourStem);return Ue&&(ue.hourBranch=Ue[0]),ue}if(Le==="hourBranch"&&ue.hourBranch){const Ue=Be(ue.hourBranch);return Ue&&(ue.hourStem=Ue.slice(0,1)),ue}if(Le==="dayStem"){if(ue.hourStem&&!ue.hourBranch){const Ue=ze(ue.hourStem);Ue&&(ue.hourBranch=Ue[0])}else if(ue.hourBranch&&!ue.hourStem){const Ue=Be(ue.hourBranch);Ue&&(ue.hourStem=Ue.slice(0,1))}}return ue},[x,T]),ve=j.useCallback(pe=>!g||!pe.yearStem?!1:pe.monthBranch&&pe.monthStem?iE(pe.yearStem,pe.monthBranch)!==pe.monthStem:!1,[g]),Ae=j.useCallback(pe=>{if(!x||!pe.dayStem)return!1;if(pe.hourBranch&&pe.hourStem){const ue=mc(pe.dayStem,T)[pe.hourBranch];return ue?ue.slice(0,1)!==pe.hourStem:!1}return!1},[x,T]);j.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Le=mc(u.dayStem,T)[u.hourBranch];Le&&d(ue=>({...ue,hourStem:Le.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=j.useCallback(pe=>{if(!m)return;if(!W&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){I("/  :    ."),setTimeout(()=>I(null),1500);return}let ue={...u,[m]:pe};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(ue=ce(ue,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(ue=le(ue,m)),d(ue);let fe=!1;ve(ue)&&(y(!1),fe=!0),Ae(ue)&&(w(!1),fe=!0),fe&&we("/  .   ."),d(ue),N(null);const ze=oe(m);p(ze),setTimeout(()=>{const Be={...ue};if(Be.yearStem&&Be.yearBranch&&!Be.monthStem){p("monthStem");return}if(Be.monthStem&&Be.monthBranch&&!Be.dayStem){p("dayStem");return}if(Be.dayStem&&Be.dayBranch&&!Be.hourStem){p("hourStem");return}},0)},[m,u,W,ce,le,ve,Ae]),Ce=rE(u),Ee=j.useCallback(async()=>{if(N(null),I(null),!rE(u)){I("   .");return}const pe=Zf(u.yearStem,u.yearBranch),Le=Zf(u.monthStem,u.monthBranch),ue=Zf(u.dayStem,u.dayBranch),fe=Zf(u.hourStem,u.hourBranch),ze=300,Be=[];R(!0);try{const Ue=new Date(1900,0,1,12,0,0),at=new Date(2100,11,31,12,0,0);for(let et=Ue.getTime();et<=at.getTime();et+=24*3600*1e3){const Zt=new Date(et),Dn=T===""?"/":"",Tn=dt(Zt);if(Tn!==pe)continue;const cr=jt(Zt);if(cr!==Le)continue;const _r=xt(Zt,Dn);if(_r!==ue)continue;const dn=mc(u.dayStem,T),Mt=[];for(let yn=0;yn<12;yn++){const hn=Pi.[yn];dn[hn]===fe&&Mt.push({branch:hn,time:DH[yn]})}if(Mt.length!==0&&(Be.push({date:CH(Zt),year:Tn,month:cr,day:_r,hour:fe,hourSlots:Mt}),Be.length>=ze))break}Be.length===0&&I("  . (: 19002100)"),N(Be)}catch(Ue){Ue instanceof Error?I(Ue.message):I(String(Ue))}finally{R(!1)}},[u,T]),$e=()=>{d({}),N(null),I(null),p(null)},Me=pe=>{N(null),pe&&d(Le=>{const ue={...Le};return ue.yearStem&&ue.monthBranch&&(ue.monthStem=iE(ue.yearStem,ue.monthBranch)),ue}),y(pe)},Pe=pe=>{N(null),pe&&d(Le=>{const ue={...Le};if(ue.dayStem&&ue.hourBranch){const ze=mc(ue.dayStem,T)[ue.hourBranch];ze&&(ue.hourStem=ze.slice(0,1))}return ue}),w(pe)};if(!e)return null;const Ie=pe=>{if(N(null),k(pe),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const ue=mc(u.dayStem,pe)[u.hourBranch];ue&&d(fe=>({...fe,hourStem:ue.slice(0,1)}))}};return b.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:b.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[b.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:b.jsx(Bj,{size:20})}),b.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),b.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"font-medium mb-2",children:"/"}),b.jsxs("span",{className:"mr-3 chkContainer",children:[b.jsx("input",{type:"checkbox",id:"useWoldu",checked:g,onChange:pe=>Me(pe.target.checked)}),b.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),b.jsxs("span",{className:"chkContainer",children:[b.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:pe=>Pe(pe.target.checked)}),b.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),b.jsxs("div",{children:[b.jsx("p",{className:"font-medium mb-2",children:" "}),b.jsxs("span",{className:"mr-3 chkContainer",children:[b.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Ie("")}),b.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),b.jsxs("span",{className:"chkContainer",children:[b.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Ie("")}),b.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),b.jsxs("div",{children:[b.jsx("p",{className:"font-medium mb-2",children:""}),b.jsxs("span",{className:"mr-3 chkContainer",children:[b.jsx("input",{type:"radio",id:"male",checked:A==="male",onChange:()=>D("male")}),b.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),b.jsxs("span",{className:"chkContainer",children:[b.jsx("input",{type:"radio",id:"female",checked:A==="female",onChange:()=>D("female")}),b.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),H&&!W&&b.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",b.jsx("br",{}),b.jsx("b",{children:""}),"  ",b.jsx("b",{children:""}),"  ."]}),b.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([pe,Le])=>{const ue=!W&&!(pe==="yearStem"||pe==="yearBranch"||pe==="dayStem"||pe==="dayBranch"),fe=m===pe;return b.jsxs("button",{onClick:()=>!ue&&p(pe),disabled:ue,className:["border rounded p-2 text-center cursor-pointer",fe?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",ue?"opacity-50 cursor-not-allowed":""].join(" "),children:[Le,b.jsx("br",{}),b.jsx("span",{className:"font-bold",children:u[pe]??"-"})]},pe)})}),a&&a.length>0&&b.jsxs("div",{className:"mb-3",children:[b.jsx("p",{className:"text-sm mb-1",children:"  :"}),b.jsx("div",{className:"flex gap-2",children:a.map(pe=>b.jsx("button",{onClick:()=>{let Le={...u,monthBranch:pe};l(null),Le=ce(Le,"monthBranch"),d(Le),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:pe},pe))})]}),b.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?b.jsxs("div",{className:"w-full",children:[z&&b.jsxs("div",{children:[b.jsx("p",{className:"font-medium mb-2",children:""}),b.jsx("div",{className:"grid grid-cols-5 gap-2",children:Pi..map(pe=>b.jsx("button",{onClick:()=>je(pe),className:`border rounded px-2 py-1 cursor-pointer ${mi(pe,"stem",i)}`,children:pe},pe))})]}),F&&b.jsxs("div",{children:[b.jsx("p",{className:"font-medium mb-2",children:""}),b.jsx("div",{className:"grid grid-cols-6 gap-2",children:Pi..filter(pe=>{const Le=oe(m),ue=u[Le];return ue?IH[pe]===$H[ue]:!0}).map(pe=>b.jsx("button",{onClick:()=>je(pe),className:`border rounded px-2 py-1 cursor-pointer ${mi(pe,"branch",i)}`,children:pe},pe))})]})]}):b.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),b.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[b.jsx("span",{children:b.jsx("button",{type:"button",onClick:()=>{if(!Ce){ae(!0);return}Ee()},disabled:M,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:M?" ...":""})}),b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("button",{type:"button",onClick:$e,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),b.jsx("button",{type:"button",onClick:()=>{if((G!==null?B?.filter((Le,ue)=>ue===G)??[]:[]).length===0){me(!0);return}Q()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),b.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:B?B.length===0?b.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):b.jsxs("table",{className:"w-full text-xs",children:[b.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:b.jsxs("tr",{children:[b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""}),b.jsx("th",{className:"p-1 text-center",children:""})]})}),b.jsx("tbody",{children:B.map((pe,Le)=>b.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[b.jsx("td",{className:"p-1 text-center",children:b.jsxs("span",{className:"chkContainer",children:[b.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Le}`,checked:G===Le,onChange:()=>Y(Le)}),b.jsx("label",{htmlFor:`selectRow-${Le}`,children:"ON"})]})}),b.jsx("td",{className:"p-1 text-center",children:pe.date}),b.jsx("td",{className:"p-1 text-center",children:pe.year}),b.jsx("td",{className:"p-1 text-center",children:pe.month}),b.jsx("td",{className:"p-1 text-center",children:pe.day}),b.jsx("td",{className:"p-1 text-center",children:b.jsx("div",{className:"flex flex-wrap gap-1",children:pe.hourSlots.map((ue,fe)=>b.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:b.jsx("b",{children:ue.branch})},fe))})}),b.jsx("td",{className:"p-1 text-center",children:A==="male"?"":""})]},`${pe.date}-${Le}`))})]}):b.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),ee&&b.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:b.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:ee})}),X&&b.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:b.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),ne&&b.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:b.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",b.jsx("br",{})," ,  ."]})})]})})}const Ij=Od(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function zm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),i=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const N=yr(t,n,i);t=N.getFullYear(),n=N.getMonth()+1,i=N.getDate()}const a=!e.birthTime||e.birthTime==="",l=a?4:Number(e.birthTime.slice(0,2)),u=a?30:Number(e.birthTime.slice(2,4)),d=new Date(t,n-1,i,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=yl(d,m,a),g=e.mingSikType??"/",y=dt(p,m),x=jt(p,m),w=xt(p,g),T=a?null:zi(p,g),k=Fe(y),A=Fe(x),D=Fe(w),B=T?Fe(T):"";return[k,A,D,B]}function zj(e){const t=new Date(e.corrected),n=zm(e),i=n[0].charAt(0),l=["","","","",""].includes(i),u=e.gender==="",d=u&&l||!u&&!l?"forward":"backward",m=Pd(t,n[1],d,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const g=[];let y=Fe(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const w=new Date(p);if(w.setFullYear(w.getFullYear()+x*10),x>0){const T=m.events[x];T&&(y=Fe(T.gz))}g.push(`${w.getFullYear()} ${String(w.getMonth()+1).padStart(2,"0")} ${y}  `)}return g}const UH=!1,sE=e=>e<10?`0${e}`:`${e}`;function Uj(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const a=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const d=yr(a,l,u,0,0),m=`${d.getFullYear()}${sE(d.getMonth()+1)}${sE(d.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const id={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},sd={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ed={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},HH=["","","","",""];function aE(e){return HH.includes(e)}const Hj={:"",:"",:"",:"",:""},Gj={:"",:"",:"",:"",:""},Fj={:"",:"",:"",:"",:""},qj={:"",:"",:"",:"",:""};function gy(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(id[t])return id[t];if(["","","","","","","","","","","",""].includes(t))return Vf[t]??null;if(sd[t])return Vf[sd[t]]??null;const n=t.charAt(0);return id[n]?id[n]:["","","","","","","","","",""].includes(n)?n:sd[n]?Vf[sd[n]]??null:["","","","","","","","","","","",""].includes(n)?Vf[n]??null:null}function GH(e,t){const n=Ed[e],i=Ed[t];if(!n||!i)return"";let a;i===n?a="":i===Hj[n]?a="":i===Gj[n]?a="":i===Fj[n]?a="":i===qj[n]?a="":a="";const l=aE(e)===aE(t);switch(a){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function Yj(e){const t=Object.entries(e),n=t.reduce((p,[,g])=>p+(g>0?g:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,g])=>[p,(g>0?g:0)*100/n]),a=i.map(([p,g])=>[p,Math.floor(g)]);let l=a.reduce((p,[,g])=>p+g,0);const u=i.map(([p,g])=>[p,g-Math.floor(g)]).sort((p,g)=>g[1]-p[1]),d=Object.fromEntries(a.map(([p,g])=>[p,g]));let m=0;for(;l<100&&m<u.length;)d[u[m][0]]+=1,l+=1,m+=1;return d}function FH(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const a=gy(n);a&&(t[a]=(t[a]??0)+i)}return t}function qH(e){if(!e)return[];const t=gy(e.charAt(0)),n=gy(e.charAt(1));return[t,n].filter(Boolean)}function Kf(e){const t=qH(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function li(e,t){return t===e?"":t===Hj[e]?"":t===Gj[e]?"":t===Fj[e]?"":t===qj[e]?"":""}const YH={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function ZH(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),i=id[t]??t,a=sd[n]??n;return`${i}${a}`}function or(e){const t=ZH(e),n=YH[t];return n?{...n,code:t}:null}function VH(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const a=Ed[n];a&&(t[a]+=i)}return t}function KH(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,a]of Object.entries(e)){if(a<=0)continue;const l=GH(t,i);n[l]+=a}return n}function WH(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const XH={natal:50,dae:30,se:20,wol:7,il:3};function JH(e){const t={};for(const{kind:i,bare:a}of e){const l=XH[i]??0;if(l<=0)continue;const u=Yj(a);for(const[d,m]of Object.entries(u))t[d]=(t[d]??0)+m*l}const n=Object.values(t).reduce((i,a)=>i+a,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function ns(e,t,n){const i=FH(e.perStemElementScaled),a=t!==""&&n?.dae?Kf(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Kf(n.se):{},u=(t===""||t==="")&&n?.wol?Kf(n.wol):{},d=t===""&&n?.il?Kf(n.il):{},m=JH([{kind:"natal",bare:i},{kind:"dae",bare:a},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:d}]),p=Yj(m),g=VH(p),y=KH(p,e.dayStem),x=WH(y);return{perStemAugBare:p,elementPercent:g,totalsSub:y,totalsMain:x}}function QH(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const Tb=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),by=e=>{if(Array.isArray(e)){const t=e.map(by).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||Tb(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(Tb(e)){const t={};for(const[n,i]of Object.entries(e)){const a=by(i);a!==void 0&&(Array.isArray(a)&&a.length===0||Tb(a)&&Object.keys(a).length===0||(t[n]=a))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},eG=e=>{const t=by(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},oi=(e,t)=>{const n=eG(t);return n?`## ${e}
${n}`:""};function tG(e){const{ms:t,natal:n,chain:i,basis:a,tab:l,unified:u,percent:d,category:m,topic:p,subTopic:g,relationMode:y,teacherMode:x}=e,w=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],T=zj(t).slice(0,10),k=br({natal:w,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),A=Fr({natal:w,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),{shinsalEra:D,shinsalGaehwa:B,shinsalBase:N}=Ij.getState(),M=N===""?w[0]?.charAt(1)??"":w[2]?.charAt(1)??"",R=ns(u,l,i),I=R.elementPercent,G=R.totalsSub,{flags:Y}=Tj(w,u.elementScoreRaw),q=`${m} (${d.toFixed(1)}%)  ${[` ${Y..||Y..||Y..||Y..?"":""}`,` ${Y..||Y..||Y..||Y..?"":""}`,` ${Y..||Y..?"":""}`].join(", ")}`,J=!t.birthTime||t.birthTime==="";function V(P){const W=Uj(P).birthDay??"",z=W.slice(0,4),F=W.slice(4,6),oe=W.slice(6,8);let ce="";if(P.corrected instanceof Date&&!isNaN(P.corrected.getTime())){const le=String(P.corrected.getHours()).padStart(2,"0"),ve=String(P.corrected.getMinutes()).padStart(2,"0");ce=J?"":`${le}:${ve}`}return`${z} ${F} ${oe}  ${ce}`}function Z(P,K){if(!K)return"()";const W=[];return(P===""||P===""||P===""||P==="")&&K.dae&&W.push(`:${Fe(K.dae)}`),(P===""||P===""||P==="")&&K.se&&W.push(`:${Fe(K.se)}`),(P===""||P==="")&&K.wol&&W.push(`:${Fe(K.wol)}`),P===""&&K.il&&W.push(`:${Fe(K.il)}`),W.length>0?W.join(" / "):"()"}const ee=QH(w,t),te=u.dayStem,we=Ed[te],X=[` : ${t.name??""} (${V(t)}) : ${t.gender}`,` ${w[0]} ${w[1]} ${w[2]}`+(w[3]?` ${w[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${Z(l,i)}`].join(`
`),ae=[];if(ae.push(oi("  (10)",T)),ae.push(oi("",q)),ae.push(oi("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([P,K])=>[`${P}(${li(we,P)})`,K])))),l!==""&&ae.push(oi(`(=${l})`,Object.fromEntries(Object.entries(I).map(([P,K])=>[`${P}(${li(we,P)})`,K])))),ae.push(oi(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&ae.push(oi(` ( 10=${l} 100)`,G)),ae.push(oi("(+ )",l===""?w.map((P,K)=>!P||K>=ee.length?null:{pos:ee[K],gz:P,unseong:Jt(w[2]?.charAt(0)??"",P.charAt(1))}).filter(Boolean):[...w.map((P,K)=>!P||K>=ee.length?null:{pos:ee[K],gz:P,unseong:Jt(w[2]?.charAt(0)??"",P.charAt(1))}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,unseong:Jt(w[2]?.charAt(0)??"",i.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,unseong:Jt(w[2]?.charAt(0)??"",i.se.charAt(1))}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,unseong:Jt(w[2]?.charAt(0)??"",i.wol.charAt(1))}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,unseong:Jt(w[2]?.charAt(0)??"",i.il.charAt(1))}]:[]].filter(Boolean))),ae.push(oi("(+  )",l===""?w.map((P,K)=>!P||K>=ee.length?null:{pos:ee[K],gz:P,shinsal:Qt({baseBranch:M,targetBranch:P.charAt(1),era:D,gaehwa:B})}).filter(Boolean):[...w.map((P,K)=>!P||K>=ee.length?null:{pos:ee[K],gz:P,shinsal:Qt({baseBranch:M,targetBranch:P.charAt(1),era:D,gaehwa:B})}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,shinsal:Qt({baseBranch:M,targetBranch:i.dae.charAt(1),era:D,gaehwa:B})}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,shinsal:Qt({baseBranch:M,targetBranch:i.se.charAt(1),era:D,gaehwa:B})}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,shinsal:Qt({baseBranch:M,targetBranch:i.wol.charAt(1),era:D,gaehwa:B})}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,shinsal:Qt({baseBranch:M,targetBranch:i.il.charAt(1),era:D,gaehwa:B})}]:[]].filter(Boolean))),ae.push(oi("(+ )",l===""?w.map((P,K)=>{if(!P||K>=ee.length)return null;const W=or(P);return W?{pos:ee[K],gz:P,nabeum:W.name,element:W.element,code:W.code}:{pos:ee[K],gz:P,nabeum:null}}).filter(Boolean):[...w.map((P,K)=>{if(!P||K>=ee.length)return null;const W=or(P);return W?{pos:ee[K],gz:P,nabeum:W.name,element:W.element,code:W.code}:{pos:ee[K],gz:P,nabeum:null}}).filter(Boolean),...i?.dae?(()=>{const P=or(i.dae);return P?[{pos:"",gz:i.dae,nabeum:P.name,element:P.element,code:P.code}]:[]})():[],...(l===""||l===""||l==="")&&i?.se?(()=>{const P=or(i.se);return P?[{pos:"",gz:i.se,nabeum:P.name,element:P.element,code:P.code}]:[]})():[],...(l===""||l==="")&&i?.wol?(()=>{const P=or(i.wol);return P?[{pos:"",gz:i.wol,nabeum:P.name,element:P.element,code:P.code}]:[]})():[],...l===""&&i?.il?(()=>{const P=or(i.il);return P?[{pos:"",gz:i.il,nabeum:P.name,element:P.element,code:P.code}]:[]})():[]].filter(Boolean))),ae.push(oi("()",Ov(w.filter((P,K)=>K<ee.length)))),ae.push(oi("( :  )",k)),l===""){const P=Fr({natal:w,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:a});ae.push(oi("( )",{good:P.good,bad:P.bad,meta:P.meta}))}else ae.push(oi(`( =${l})`,A));const ne=ae.filter(P=>P&&P.trim().length>0).join(`

`),me=Xj({topic:p,subTopic:g,timeMode:"single",tab:l,relationMode:y,teacherMode:x}),Q=["-----","  ","","1.       (////)  .","2.  ,        ."];me&&Q.push("","  ( )",me);const H=Q.join(`
`);return[X,ne,H].join(`

`)}function nG(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const rG=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Lv(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function Zj(e,t){const n=e[t],i=e[t+1];return i?Lv(i):new Date(n.endYear+1,0,1)}function Vj(e,t,n,i){return e<i&&t>n}function Kj(e,t,n){const i=new Date(t,0,1),a=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const d=e[u],m=Lv(d),p=Zj(e,u);Vj(m,p,i,a)&&(l.some(g=>g.gz===d.gz&&g.startYear===d.startYear)||l.push(d))}return l}function oE(e,t){return Kj(e,t,t)}function Wf(e,t,n){const i=new Date(t,n-1,1),a=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const d=e[u],m=Lv(d),p=Zj(e,u);Vj(m,p,i,a)&&(l.some(g=>g.gz===d.gz&&g.startYear===d.startYear)||l.push(d))}return l}function Wj(e){const t=315569259747e-1,a=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(a);return new Date(l.getTime()+540*60*1e3)}function Xf(e,t){const n=[],i=new Date(e,t-1,15,0,0,0),a=new Date(e,t,1,15,0,0),l=Wj(e),u=dt(new Date(e-1,5,15)),d=dt(new Date(e,5,15)),m=dt(new Date(e+1,5,15));if(a<=l)u&&n.push(Fe(u));else if(i>=l)d&&n.push(Fe(d));else if(u&&n.push(Fe(u)),d){const p=Fe(d);n.includes(p)||n.push(p)}if(t===12&&m){const p=Fe(m);n.includes(p)||n.push(p)}return n}function iG(e,t){const n=Wj(e),i=new Date(e,t-1,1),a=[];return i<n&&a.push(e-1),i>=n&&a.push(e),t===12&&a.push(e+1),a}const Ts=(e,t)=>{if(!e)return{};const n=t,i=d=>{if(!d)return;const m={};for(const[p,g]of Object.entries(d)){if(!Array.isArray(g))continue;const y=g.filter(x=>typeof x=="string"&&x.includes(n));y.length>0&&(m[p]=y)}if(Object.keys(m).length!==0)return m},a=i(e.good),l=i(e.bad),u={};return a&&(u.good=a),l&&(u.bad=l),u};function yy(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>yy(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(rG(e)){const t={};for(const[n,i]of Object.entries(e)){const a=yy(i);a!==void 0&&(t[n]=a)}return Object.keys(t).length>0?t:void 0}return e}}const sG=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),Kn=(e,t)=>{const n=yy(t);if(n===void 0)return"";const i=sG(n);return i.trim()?`## ${e}
${i}`:""},ea=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[i,a]of Object.entries(e)){if(!Array.isArray(a))continue;const l=Array.from(new Set(a.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[i]=l)}return n};function aG(e){const{ms:t,natal:n,basis:i,unified:a,percent:l,category:u,selectedDaeList:d,daeList:m,seYears:p,wolMonths:g,ilDays:y,topic:x,subTopic:w,teacherMode:T}=e,k=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],A=!t.birthTime||t.birthTime==="",D=nG(k,t),B=a.dayStem,N=Ed[B],{shinsalEra:M,shinsalGaehwa:R,shinsalBase:I}=Ij.getState(),G=I===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:Y}=Tj(k,a.elementScoreRaw),q=`${u} (${l.toFixed(1)}%)  ${[` ${Y..||Y..||Y..||Y..?"":""}`,` ${Y..||Y..||Y..||Y..?"":""}`,` ${Y..||Y..?"":""}`].join(", ")}`;function J(ne){const Q=Uj(ne).birthDay??"",H=Q.slice(0,4),P=Q.slice(4,6),K=Q.slice(6,8);let W="";if(ne.corrected instanceof Date&&!isNaN(ne.corrected.getTime())){const z=String(ne.corrected.getHours()).padStart(2,"0"),F=String(ne.corrected.getMinutes()).padStart(2,"0");W=A?"":`${z}:${F}`}return`${H} ${P} ${K}  ${W}`}const V=[` : ${t.name??""} (${J(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),Z=[];Z.push(Kn("",q)),Z.push(Kn("()",Object.fromEntries(Object.entries(a.natalFixed.elementPercent100).map(([ne,me])=>[`${ne}(${li(N,ne)})`,me])))),Z.push(Kn(" ( 10 100)",a.natalFixed.totalsSub)),Z.push(Kn("()",Ov(k.filter((ne,me)=>me<D.length))));const ee=Fr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});if(Z.push(Kn("()",{good:ee.good,bad:ee.bad,meta:ee.meta})),Z.push(Kn("()",k.map((ne,me)=>{if(!ne||me>=D.length)return null;const Q=or(ne);return Q?{pos:D[me],gz:ne,nabeum:Q.name,element:Q.element,code:Q.code}:{pos:D[me],gz:ne,nabeum:null}}).filter(Boolean))),Z.push(Kn("()",k.map((ne,me)=>!ne||me>=D.length?null:{pos:D[me],gz:ne,unseong:Jt(k[2]?.charAt(0)??"",ne.charAt(1))}).filter(Boolean))),Z.push(Kn("()",k.map((ne,me)=>!ne||me>=D.length?null:{pos:D[me],gz:ne,shinsal:Qt({baseBranch:G,targetBranch:ne.charAt(1),era:M,gaehwa:R})}).filter(Boolean))),m.length>0)for(const ne of d){const me={dae:ne.gz,se:null,wol:null,il:null},Q=ns(a,"",me),H=br({natal:k,daewoon:ne.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),P=Fr({natal:k,daewoon:ne.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),K=or(ne.gz),W=Jt(k[2]?.charAt(0)??"",ne.gz.charAt(1)),z=Qt({baseBranch:G,targetBranch:ne.gz.charAt(1),era:M,gaehwa:R});Z.push(Kn(`${ne.age} ${ne.gz} (${ne.startYear}~${ne.endYear})`,{:Object.fromEntries(Object.entries(Q.elementPercent).map(([F,oe])=>[`${F}(${li(N,F)})`,oe])),:Q.totalsSub,:H,:Ts(P,""),:K?{gz:ne.gz,nabeum:K.name,element:K.element,code:K.code}:null,:{pos:"",gz:ne.gz,unseong:W},:{pos:"",gz:ne.gz,shinsal:z}}))}if(p.length>0){const ne=p[0],me=p[p.length-1],Q=Kj(m,ne,me);if(Q.length>0){const H=ne,P=dt(new Date(H,5,15)),K=Fe(P||""),W={:Q.map(z=>{const F={dae:z.gz,se:K||null,wol:null,il:null},oe=ns(a,"",F),ce=br({natal:k,daewoon:z.gz,sewoon:K||void 0,wolwoon:void 0,ilwoon:void 0}),le=Fr({natal:k,daewoon:z.gz,sewoon:K||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),ve=or(z.gz),Ae=Jt(k[2]?.charAt(0)??"",z.gz.charAt(1)),je=Qt({baseBranch:G,targetBranch:z.gz.charAt(1),era:M,gaehwa:R});return{:`${z.age} ${z.gz} (${z.startYear}~${z.endYear})`,:z.gz,:Object.fromEntries(Object.entries(oe.elementPercent).map(([Ce,Ee])=>[`${Ce}(${li(N,Ce)})`,Ee])),:oe.totalsSub,:ea(ce,""),:Ts(le,""),:ve?{gz:z.gz,nabeum:ve.name,element:ve.element,code:ve.code}:null,:{pos:"",gz:z.gz,unseong:Ae},:{pos:"",gz:z.gz,shinsal:je}}})};Z.push(Kn("",W))}for(const H of p){const P=dt(new Date(H,5,15)),K=oE(m,H),W=K.length>0?K[0]:null,z={dae:W?W.gz:null,se:Fe(P||""),wol:null,il:null},F=ns(a,"",z),oe=br({natal:k,daewoon:W?.gz,sewoon:Fe(P||""),wolwoon:void 0,ilwoon:void 0}),ce=Fr({natal:k,daewoon:W?.gz,sewoon:Fe(P||""),wolwoon:void 0,ilwoon:void 0,basis:i}),le=or(Fe(P||"")),ve=Jt(k[2]?.charAt(0)??"",(P||"").charAt(1)),Ae=Qt({baseBranch:G,targetBranch:(P||"").charAt(1),era:M,gaehwa:R}),je={:{:`${H} ${Fe(P||"")}`,:Fe(P||""),:Object.fromEntries(Object.entries(F.elementPercent).map(([Ce,Ee])=>[`${Ce}(${li(N,Ce)})`,Ee])),:F.totalsSub,:ea(oe,""),:Ts(ce,""),:le?{gz:Fe(P||""),nabeum:le.name,element:le.element,code:le.code}:null,:{pos:"",gz:Fe(P||""),unseong:ve},:{pos:"",gz:Fe(P||""),shinsal:Ae}}};Z.push(Kn(` ${H}`,je))}}if(g.length>0){const ne=[],me=new Map;for(const W of g){const[z,F]=W.split("-").map(Number);Wf(m,z,F).forEach(ve=>{ne.some(Ae=>Ae.gz===ve.gz&&Ae.startYear===ve.startYear)||ne.push(ve)});const ce=iG(z,F);Xf(z,F).forEach((ve,Ae)=>{const je=ce[Ae]??ce[ce.length-1];me.has(ve)||me.set(ve,{year:je,month:F})})}const[Q]=g[0].split("-").map(Number),H=dt(new Date(Q,5,15)),P=Fe(H||"");if(ne.length>0){const W={:ne.map(z=>{const F={dae:z.gz,se:P||null,wol:null,il:null},oe=ns(a,"",F),ce=br({natal:k,daewoon:z.gz,sewoon:P||void 0,wolwoon:void 0,ilwoon:void 0}),le=Fr({natal:k,daewoon:z.gz,sewoon:P||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),ve=or(z.gz),Ae=Jt(k[2]?.charAt(0)??"",z.gz.charAt(1)),je=Qt({baseBranch:G,targetBranch:z.gz.charAt(1),era:M,gaehwa:R});return{:`${z.age} ${z.gz} (${z.startYear}~${z.endYear})`,:z.gz,:Object.fromEntries(Object.entries(oe.elementPercent).map(([Ce,Ee])=>[`${Ce}(${li(N,Ce)})`,Ee])),:oe.totalsSub,:ea(ce,""),:Ts(le,""),:ve?{gz:z.gz,nabeum:ve.name,element:ve.element,code:ve.code}:null,:{pos:"",gz:z.gz,unseong:Ae},:{pos:"",gz:z.gz,shinsal:je}}})};Z.push(Kn("",W))}const K=Array.from(me.keys());if(K.length>0){const W={:K.map(z=>{const oe=me.get(z).year,le=oE(m,oe)[0]??ne[0]??null,ve={dae:le?le.gz:null,se:z,wol:null,il:null},Ae=ns(a,"",ve),je=br({natal:k,daewoon:le?.gz,sewoon:z,wolwoon:void 0,ilwoon:void 0}),Ce=Fr({natal:k,daewoon:le?.gz,sewoon:z,wolwoon:void 0,ilwoon:void 0,basis:i}),Ee=or(z),$e=Jt(k[2]?.charAt(0)??"",z.charAt(1)),Me=Qt({baseBranch:G,targetBranch:z.charAt(1),era:M,gaehwa:R});return{:`${oe} ${z}`,:z,:Object.fromEntries(Object.entries(Ae.elementPercent).map(([Pe,Ie])=>[`${Pe}(${li(N,Pe)})`,Ie])),:Ae.totalsSub,:ea(je,""),:Ts(Ce,""),:Ee?{gz:z,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:z,unseong:$e},:{pos:"",gz:z,shinsal:Me}}})};Z.push(Kn("",W))}for(const W of g){const[z,F]=W.split("-").map(Number),oe=new Date(z,F-1,15),ce=jt(oe),le=Wf(m,z,F),ve=le.length>0?le[0]:null,Ae=Xf(z,F),je=Ae.length>0?Ae[Ae.length-1]:"",Ce={dae:ve?ve.gz:null,se:je||null,wol:Fe(ce||""),il:null},Ee=ns(a,"",Ce),$e=br({natal:k,daewoon:ve?.gz,sewoon:je||void 0,wolwoon:Fe(ce||""),ilwoon:void 0}),Me=Fr({natal:k,daewoon:ve?.gz,sewoon:je||void 0,wolwoon:Fe(ce||""),ilwoon:void 0,basis:i}),Pe=or(Fe(ce||"")),Ie=Jt(k[2]?.charAt(0)??"",(ce||"").charAt(1)),pe=Qt({baseBranch:G,targetBranch:(ce||"").charAt(1),era:M,gaehwa:R}),Le={:{:`${W} ${Fe(ce||"")}`,:Fe(ce||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([ue,fe])=>[`${ue}(${li(N,ue)})`,fe])),:Ee.totalsSub,:ea($e,""),:Ts(Me,""),:Pe?{gz:Fe(ce||""),nabeum:Pe.name,element:Pe.element,code:Pe.code}:null,:{pos:"",gz:Fe(ce||""),unseong:Ie},:{pos:"",gz:Fe(ce||""),shinsal:pe}}};Z.push(Kn(` ${W}`,Le))}}if(y.length>0){const ne=t.mingSikType??"/",[me,Q,H]=y[0].split("-").map(Number),P=new Date(me,Q-1,H,4,0);if(!isNaN(P.getTime())){const K=Wf(m,me,Q),W=K.length>0?K[0]:null,z=Xf(me,Q),F=z.length>0?z[z.length-1]:"",oe=jt(new Date(me,Q-1,15)),ce=xt(P,ne),le=Fe(oe||""),ve=Fe(F||""),Ae=Fe(ce||"");if(W){const je={dae:W.gz,se:ve,wol:le,il:Ae},Ce=ns(a,"",je),Ee=br({natal:k,daewoon:W.gz,sewoon:ve,wolwoon:le,ilwoon:Ae}),$e=Fr({natal:k,daewoon:W.gz,sewoon:ve,wolwoon:le,ilwoon:Ae,basis:i}),Me=or(W.gz),Pe=Jt(k[2]?.charAt(0)??"",W.gz.charAt(1)),Ie=Qt({baseBranch:G,targetBranch:W.gz.charAt(1),era:M,gaehwa:R});Z.push(Kn("",{:`${W.age} ${W.gz} (${W.startYear}~${W.endYear})`,:W.gz,:Object.fromEntries(Object.entries(Ce.elementPercent).map(([pe,Le])=>[`${pe}(${li(N,pe)})`,Le])),:Ce.totalsSub,:ea(Ee,""),:Ts($e,""),:Me?{gz:W.gz,nabeum:Me.name,element:Me.element,code:Me.code}:null,:{pos:"",gz:W.gz,unseong:Pe},:{pos:"",gz:W.gz,shinsal:Ie}}))}if(ve){const je={dae:W?W.gz:null,se:ve,wol:le,il:Ae},Ce=ns(a,"",je),Ee=br({natal:k,daewoon:W?.gz,sewoon:ve,wolwoon:le,ilwoon:Ae}),$e=Fr({natal:k,daewoon:W?.gz,sewoon:ve,wolwoon:le,ilwoon:Ae,basis:i}),Me=or(ve),Pe=Jt(k[2]?.charAt(0)??"",ve.charAt(1)),Ie=Qt({baseBranch:G,targetBranch:ve.charAt(1),era:M,gaehwa:R});Z.push(Kn("",{:`${me} ${ve}`,:ve,:Object.fromEntries(Object.entries(Ce.elementPercent).map(([pe,Le])=>[`${pe}(${li(N,pe)})`,Le])),:Ce.totalsSub,:ea(Ee,""),:Ts($e,""),:Me?{gz:ve,nabeum:Me.name,element:Me.element,code:Me.code}:null,:{pos:"",gz:ve,unseong:Pe},:{pos:"",gz:ve,shinsal:Ie}}))}if(le){const je={dae:W?W.gz:null,se:ve,wol:le,il:Ae},Ce=ns(a,"",je),Ee=br({natal:k,daewoon:W?.gz,sewoon:ve,wolwoon:le,ilwoon:Ae}),$e=Fr({natal:k,daewoon:W?.gz,sewoon:ve,wolwoon:le,ilwoon:Ae,basis:i}),Me=or(le),Pe=Jt(k[2]?.charAt(0)??"",le.charAt(1)),Ie=Qt({baseBranch:G,targetBranch:le.charAt(1),era:M,gaehwa:R});Z.push(Kn("",{:`${me}-${String(Q).padStart(2,"0")} ${le}`,:le,:Object.fromEntries(Object.entries(Ce.elementPercent).map(([pe,Le])=>[`${pe}(${li(N,pe)})`,Le])),:Ce.totalsSub,:ea(Ee,""),:Ts($e,""),:Me?{gz:le,nabeum:Me.name,element:Me.element,code:Me.code}:null,:{pos:"",gz:le,unseong:Pe},:{pos:"",gz:le,shinsal:Ie}}))}}for(const K of y){const[W,z,F]=K.split("-").map(Number),oe=new Date(W,z-1,F,4,0);if(isNaN(oe.getTime()))continue;const ce=Wf(m,W,z),le=ce.length>0?ce[0]:null,ve=Xf(W,z),Ae=ve.length>0?ve[ve.length-1]:"",je=jt(new Date(W,z-1,15)),Ce=xt(oe,ne),Ee=Fe(je||""),$e=Fe(Ae||""),Me=Fe(Ce||""),Pe={dae:le?le.gz:null,se:$e||null,wol:Ee,il:Me},Ie=ns(a,"",Pe),pe=br({natal:k,daewoon:le?.gz,sewoon:$e||void 0,wolwoon:Ee||void 0,ilwoon:Me||void 0}),Le=Fr({natal:k,daewoon:le?.gz,sewoon:$e||void 0,wolwoon:Ee||void 0,ilwoon:Me||void 0,basis:i}),ue=or(Me),fe=Jt(k[2]?.charAt(0)??"",Me.charAt(1)),ze=Qt({baseBranch:G,targetBranch:Me.charAt(1),era:M,gaehwa:R}),Be={:{:`${K} ${Me}`,:Me,:Object.fromEntries(Object.entries(Ie.elementPercent).map(([Ue,at])=>[`${Ue}(${li(N,Ue)})`,at])),:Ie.totalsSub,:ea(pe,""),:Ts(Le,""),:ue?{gz:Me,nabeum:ue.name,element:ue.element,code:ue.code}:null,:{pos:"",gz:Me,unseong:fe},:{pos:"",gz:Me,shinsal:ze}}};Z.push(Kn(` ${K}`,Be))}}const te=Z.filter(ne=>ne.trim().length>0).join(`

`),we=Xj({topic:x,subTopic:w,timeMode:"single",teacherMode:T}),X=["-----","  ","","1.       (////)  .","2.  ,        ."];we&&X.push("","  ( )",we);const ae=X.join(`
`);return[V,te,ae].join(`

`)}function Xj(e){const{topic:t,subTopic:n,timeMode:i="single",tab:a,relationMode:l,teacherMode:u}=e;if(!t)return"";const d=[];switch(u===!0?d.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):d.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),i==="single"?a?d.push(`-    (${a})   ,         .`,"-   ,             ."):d.push("-    ,          ."):d.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{d.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&d.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&d.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&d.push("-    ,   ,       /    ."),n==="personality_workStyle"&&d.push("-     ,     /      ."),n==="personality_stressPattern"&&d.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{d.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&d.push("-       ,        .");break}case"love":{d.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&d.push("-      ,     ,       ."),n==="love_timing"&&d.push("-     ,    ,       ."),n==="love_partner"&&d.push("-    ,        ."),n==="love_current"&&d.push("-       ,     ,     ."),n==="love_breakup"&&d.push("- /   ,      ,     ."),n==="love_marriageChange"&&d.push("-          ."),l==="solo"?d.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&d.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{d.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&d.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&d.push("-   (: , ,  ,  )    ."),n==="career_mode"&&d.push("- , , ,        ."),n==="career_jobChange"&&d.push("- /   ,    ,    ."),n==="career_promotion"&&d.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&d.push("- /   ,        .");break}case"money":{d.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&d.push("-   ( ,  ,  )   ."),n==="money_income"&&d.push("- , ,        ( , ,  )  ."),n==="money_spending"&&d.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&d.push("-   ,        ,   ."),n==="money_debt"&&d.push("- /      ,       ."),n==="money_invest"&&d.push("- /   ,          ."),n==="money_bigEvent"&&d.push("- , ,         ,      .");break}case"family":{d.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&d.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&d.push("-     (, ,  )     ."),n==="family_siblings"&&d.push("-   (  , / ) ."),n==="family_children"&&d.push("-   ,            .");break}case"health":{d.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&d.push("-   (:   /     )   ."),n==="health_physical"&&d.push("-    (, ,   )   ."),n==="health_mental"&&d.push("-    (, ,  ) ,        ."),n==="health_stress"&&d.push("-      ,      ."),n==="health_accident"&&d.push("- /   ,    ,   (, ,  )  .");break}case"move":{d.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&d.push("-    ,         ."),n==="move_timing"&&d.push("-    ,           ."),n==="move_targetHouse"&&d.push("-     ,   ,      ,      ."),n==="move_environment"&&d.push("- / (, ,  )     ."),n==="move_finance"&&d.push("- //      ,       .");break}case"social":{d.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&d.push("-       ."),n==="social_friend"&&d.push("-      ,      ."),n==="social_workspace"&&d.push("-      (, ,  ) ."),n==="social_network"&&d.push("-   (  vs   )    ,    ."),n==="social_conflict"&&d.push("-    ,  ,      ,    .");break}case"compat":{d.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&d.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&d.push("- /  ,  ,        ."),n==="compat_work"&&d.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&d.push("- /       ,       .");break}case"risk":{d.push("-   /   .","-  ,        ."),(!n||n==="overview")&&d.push("- , , ,           ."),n==="risk_money"&&d.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&d.push("-      (, ,   )  ."),n==="risk_health"&&d.push("- /  ,        ."),n==="risk_lawsuit"&&d.push("-  //     ,         ."),n==="risk_burnout"&&d.push("- /    ,          .");break}case"meta":{d.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&d.push("-     / ,     ."),n==="meta_cycle"&&d.push("- /   ,     ."),n==="meta_trigger"&&d.push("- , ,           ,   ."),n==="meta_usage"&&d.push("-         ,        .");break}}return d.join(`
`)}function oG({date:e,onChange:t,min:n="1900-01-01",max:i="2100-12-31"}){const a=j.useMemo(()=>{const u=e.getFullYear(),d=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${d}-${m}`},[e]),l=u=>{if(!u)return;const[d,m,p]=u.split("-"),g=Number(d),y=Number(m),x=Number(p),w=e.getHours(),T=e.getMinutes(),k=new Date(g,y,0).getDate(),A=Math.min(x,k),D=new Date(g,y-1,A,w,T);Number.isNaN(D.getTime())||t(D)};return b.jsx("input",{type:"date",value:a,onChange:u=>l(u.target.value),min:n,max:i,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const kb={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},lG=["","","","",""],Jj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Qj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},lE={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},cE={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function pc(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const a=Jj[i[1]],l=Qj[i[2]];return a&&l?`${a}${l}`:""}return""}function uE(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function dE(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const a=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=a.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=a.match(/([]).*?([])/);return u?`${Jj[u[1]]}${Qj[u[2]]}`:i<=2?"--":""})}function cG({ms:e,natal:t,chain:n,basis:i,lunarPillars:a,includeTenGod:l=!1}){const[u,d]=j.useState("analysis"),[m,p]=j.useState(!1),[g,y]=j.useState(!1),{date:x,setDate:w}=Zr();j.useEffect(()=>{w(new Date)},[e.id,w]);const{list:T,currentId:k}=os.getState(),[A,D]=j.useState(""),[B,N]=j.useState("personality"),[M,R]=j.useState("overview"),I=j.useMemo(()=>A?T.find(ge=>ge.id===A)??null:null,[A,T]),[G,Y]=j.useState(""),[q,J]=j.useState("solo");j.useEffect(()=>{B!=="love"&&B!=="compat"&&(J("solo"),D(""))},[B]);const[V,Z]=j.useState(!1),[ee,te]=j.useState(""),[we,X]=j.useState([]),[ae,ne]=j.useState(new Date().getFullYear()),[me,Q]=j.useState(new Date().getFullYear()),[H,P]=j.useState(()=>{const ge=new Date;return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}),[K,W]=j.useState(()=>{const ge=new Date;return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}),[z,F]=j.useState(()=>{const ge=new Date,qe=ge.getFullYear(),ct=String(ge.getMonth()+1).padStart(2,"0"),gt=String(ge.getDate()).padStart(2,"0");return`${qe}-${ct}-${gt}`}),[oe,ce]=j.useState(()=>{const ge=new Date,qe=ge.getFullYear(),ct=String(ge.getMonth()+1).padStart(2,"0"),gt=String(ge.getDate()).padStart(2,"0");return`${qe}-${ct}-${gt}`}),le=1e3*60*60*24;function ve(ge,qe){return(qe.getFullYear()-ge.getFullYear())*12+(qe.getMonth()-ge.getMonth())}function Ae(ge){return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}function je(ge){return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}-${String(ge.getDate()).padStart(2,"0")}`}const Ce=ge=>{ne(ge)},Ee=ge=>{Q(ge)},$e=()=>{const ge=ae;let qe=me;qe<ge&&(qe=ge),qe-ge>9&&(qe=ge+9),Q(qe)},Me=()=>{let ge=ae;const qe=me;qe<ge&&(ge=qe),qe-ge>9&&(ge=qe-9),ne(ge)},Pe=ge=>{P(ge)},Ie=()=>{const[ge,qe]=H.split("-").map(Number),[ct,gt]=K.split("-").map(Number),tt=new Date(ge,qe-1),ht=new Date(ct,gt-1);if(ht<tt){W(Ae(tt));return}if(ve(tt,ht)>11){const pt=new Date(tt);pt.setMonth(tt.getMonth()+11),W(Ae(pt))}},pe=ge=>{W(ge)},Le=()=>{const[ge,qe]=H.split("-").map(Number),[ct,gt]=K.split("-").map(Number),tt=new Date(ge,qe-1),ht=new Date(ct,gt-1);if(ht<tt){P(Ae(ht));return}if(ve(tt,ht)>11){const pt=new Date(ht);pt.setMonth(ht.getMonth()-11),P(Ae(pt))}},ue=ge=>{F(ge)},fe=()=>{if(!z||!oe)return;const[ge,qe,ct]=z.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);if(pt<wt){ce(je(wt));return}if(Math.floor((pt.getTime()-wt.getTime())/le)>7){const St=new Date(wt);St.setDate(wt.getDate()+6),ce(je(St))}},ze=ge=>{ce(ge)},Be=()=>{if(!z||!oe)return;const[ge,qe,ct]=z.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);if(wt>pt){F(je(pt));return}if(Math.floor((pt.getTime()-wt.getTime())/le)>7){const St=new Date(pt);St.setDate(pt.getDate()-6),F(je(St))}},Ue=e.mingSikType??"/",at=j.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const ge=x??new Date,qe=pc(dt(ge)||""),ct=pc(jt(ge)||""),gt=pc(xt(ge,Ue)||"");return{dae:null,se:qe||null,wol:ct||null,il:gt||null}},[n,x,Ue]),et=Md.getState().manualHour,Zt=j.useMemo(()=>dE(t),[t]),Dn=j.useMemo(()=>dE(a),[a]),Tn=j.useMemo(()=>{const ge=[...Zt];return(!ge[3]||ge[3]==="")&&et&&(ge[3]=et.stem+et.branch),ge},[Zt,et]),cr=j.useMemo(()=>{const ge=[...Dn];return(!ge[3]||ge[3]==="")&&et&&(ge[3]=et.stem+et.branch),ge},[Dn,et]),_r=j.useMemo(()=>{const ge=Number(e.birthDay?.slice(0,4)),qe=Number(e.birthDay?.slice(4,6)),ct=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(ge)||!Number.isFinite(qe)||!Number.isFinite(ct))return null;const gt=new Date(ge,qe-1,ct,12,4,0,0),tt=pc(dt(gt)||""),ht=pc(jt(gt)||""),wt=pc(xt(gt,Ue)||"");return[tt,ht,wt,""]},[e.birthDay,Ue]),dn=uE(Tn),Mt=uE(cr),[yn]=j.useState("solar"),hn=yn==="lunar"?Mt?"lunar":dn?"solar":"lunar":dn?"solar":Mt?"lunar":"solar",Vr=j.useMemo(()=>{const qe=[...hn==="lunar"?Mt?cr:dn?Tn:_r??["","","",""]:dn?Tn:Mt?cr:_r??["","","",""]];return(!qe[3]||qe[3]==="")&&et&&(qe[3]=et.stem+et.branch),qe},[hn,dn,Mt,Tn,cr,_r,et]),ca=j.useMemo(()=>et?et.stem+et.branch:Vr[3]||"",[et,Vr]);(!t||t.length===0)&&(t=zm(e));const Hi=et?et.stem+et.branch:"",kn=j.useMemo(()=>{const ge=zm(e);return Hi&&Hi.length===2&&(ge[3]=Hi),ge},[e,Hi]),Cn=j.useMemo(()=>jj({natal:kn,tab:G,chain:at,hourKey:ca}),[kn,G,at,ca]);function us(ge){return Aj(ge,{criteriaMode:"modern",useHarmonyOverlay:!0})}const Or=us(kn),ur=j.useMemo(()=>vv(Or),[Or]),bi=j.useMemo(()=>ej(ur),[ur]),ua=j.useMemo(()=>{const ge=zj(e).slice(0,10),qe=e.birthDay?Number(e.birthDay.slice(0,4)):0;return ge.map((ct,gt)=>{const tt=ct.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),ht=tt?Number(tt[1]):0,wt=tt?Number(tt[2]):1,pt=1,zn=tt?tt[3]:"",St=qe>0?uG(qe,ht):gt*10;return{gz:zn,age:St,startYear:ht,startMonth:wt,startDay:pt,endYear:ht+10}})},[e]),io=cE[B],so=j.useMemo(()=>e?tG({ms:e,natal:kn,chain:at,basis:i,tab:G,unified:Cn,percent:ur,category:bi,topic:B,subTopic:M,relationMode:q,teacherMode:g}):"",[e,i,l,G,at,Cn,ur,bi,kn,B,M,q,I,g]),Gi=j.useMemo(()=>{if(!e||!V)return"";const ge=we.map(tt=>ua[tt]).filter(tt=>tt),qe=ee===""?(()=>{const tt=[];for(let ht=ae;ht<=me&&tt.length<10;ht++)tt.push(ht);return tt})():[],ct=ee===""?(()=>{const tt=[],[ht,wt]=H.split("-").map(Number),[pt,zn]=K.split("-").map(Number),St=new Date(ht,wt-1),ha=new Date(pt,zn-1);for(;St<=ha&&tt.length<12;)tt.push(`${St.getFullYear()}-${String(St.getMonth()+1).padStart(2,"0")}`),St.setMonth(St.getMonth()+1);return tt})():[],gt=ee===""?(()=>{const tt=[],[ht,wt,pt]=z.split("-").map(Number),[zn,St,ha]=oe.split("-").map(Number),co=new Date(ht,wt-1,pt,4,0,0),vi=new Date(zn,St-1,ha,4,0,0);if(isNaN(co.getTime())||isNaN(vi.getTime()))return tt;const Qn=new Date(co);for(;Qn<=vi&&tt.length<31;){const Os=Qn.getFullYear(),uo=String(Qn.getMonth()+1).padStart(2,"0"),ho=String(Qn.getDate()).padStart(2,"0");tt.push(`${Os}-${uo}-${ho}`),Qn.setDate(Qn.getDate()+1)}return tt})():[];return aG({ms:e,natal:kn,basis:i,unified:Cn,percent:ur,category:bi,selectedDaeList:ge,daeList:ua,seYears:qe,wolMonths:ct,ilDays:gt,topic:B,subTopic:M,teacherMode:g})},[e,V,ee,we,ua,ae,me,H,K,z,oe,kn,i,l,Cn,ur,bi,B,M,q,I,g]),ao=j.useMemo(()=>{if(q!=="couple"||!I)return"";const ge=I.name||"";let qe="";if(I.birthDay&&I.birthDay.length===8){const ht=I.birthDay.slice(0,4),wt=I.birthDay.slice(4,6),pt=I.birthDay.slice(6,8);qe=`${ht}-${wt}-${pt}`}else I.birthDay&&(qe=I.birthDay);let ct="";if(I.birthTime&&I.birthTime.trim().length>0){const wt=I.birthTime.trim().padEnd(4,"0").slice(0,4),pt=wt.slice(0,2),zn=wt.slice(2,4);ct=`${pt}:${zn}`}let gt="";I.birthPlace&&typeof I.birthPlace=="object"&&(gt=I.birthPlace.name||"");const tt=I.ganji||I.ganjiText||"";return["","","[  - () ]"," ",`-  : ${ge}`,`-  : ${qe}`,`-   : ${ct}`,`-   : ${gt}`,`- ${tt}`,""," //,       ,","           .",""].join(`
`)},[q,I]),da=V?Gi:so,oo=j.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),lo=m?`   ,   .
`:"",In=j.useMemo(()=>da||ao?`${da}${ao}
${oo}${lo}`:"",[oo,lo,da,ao]),[Ve,Ns]=j.useState(""),[Dr,dr]=j.useState([]);j.useEffect(()=>{Ns(""),dr([])},[e.id]);const sn=j.useMemo(()=>{if(!In)return"";if(Dr.length===0)return In;const ge=["","-----","     ","",...Dr.map((qe,ct)=>`${ct+1}. ${qe}`)];return`${In}
${ge.join(`
`)}`},[In,Dr]),[An,Kr]=j.useState(!1);async function yi(){if(sn)try{await navigator.clipboard.writeText(sn),Kr(!0),setTimeout(()=>Kr(!1),1200)}catch{Kr(!1)}}return e?b.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),b.jsx("button",{onClick:yi,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${An?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:An?"!":" "})]}),b.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[b.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[b.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),b.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(kb).map(ge=>b.jsx("button",{onClick:()=>d(ge),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===ge?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:kb[ge].label},ge))}),b.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:kb[u].desc}),b.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[b.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:ge=>p(ge.target.checked),className:"w-3 h-3"}),b.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",id:"teacherMode",checked:g,onChange:ge=>y(ge.target.checked),className:"w-3 h-3"}),b.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),b.jsx("select",{value:B,onChange:ge=>{const qe=ge.target.value;N(qe);const ct=cE[qe];ct.length>0?R(ct[0].key):R("overview"),qe!=="love"&&qe!=="compat"&&J("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(lE).map(ge=>{const qe=lE[ge];return b.jsx("option",{value:ge,children:qe.label},ge)})}),io.length>0&&b.jsx("select",{value:M,onChange:ge=>R(ge.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:io.map(ge=>b.jsx("option",{value:ge.key,children:ge.label},ge.key))})]}),(B==="love"||B==="compat")&&b.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-semibold",children:" "}),b.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[b.jsx("button",{type:"button",onClick:()=>J("solo"),className:`px-3 py-1 cursor-pointer ${q==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),b.jsx("button",{type:"button",onClick:()=>J("couple"),className:`px-3 py-1 cursor-pointer ${q==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),q==="couple"&&b.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[b.jsx("span",{className:"font-semibold",children:"  "}),b.jsxs("select",{value:A,onChange:ge=>D(ge.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[b.jsx("option",{value:"",children:"  "}),T.filter(ge=>ge.id!==k).map(ge=>b.jsxs("option",{value:ge.id,children:[ge.name||" "," ",ge.birthDay?`(${ge.birthDay})`:""]},ge.id))]})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>Z(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${V?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),b.jsx("button",{onClick:()=>Z(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${V?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!V&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[b.jsx("div",{className:"flex gap-1 flex-wrap",children:lG.map(ge=>b.jsx("button",{onClick:()=>Y(ge),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${G===ge?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:ge},ge))}),b.jsx(oG,{date:x,onChange:w})]}),b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[b.jsx("p",{children:"     ."}),b.jsx("p",{children:"  ,  ."}),b.jsx("p",{children:"   ,   ."})]})]}),V&&b.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[b.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(ge=>b.jsx("button",{onClick:()=>te(ge),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${ee===ge?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:ge},ge))}),ee===""&&b.jsxs("div",{children:[b.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),b.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:ua.map((ge,qe)=>b.jsxs("button",{onClick:()=>{X(ct=>ct.includes(qe)?ct.filter(gt=>gt!==qe):[...ct,qe])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${we.includes(qe)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[b.jsx("div",{className:"font-mono",children:ge.gz}),b.jsxs("div",{className:"text-[10px] opacity-80",children:[ge.age," (",ge.startYear,"~",ge.endYear,")"]})]},qe))})]}),ee===""&&b.jsxs("div",{children:[b.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"number",value:ae,onChange:ge=>Ce(Number(ge.target.value)),onBlur:$e,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),b.jsx("span",{className:"text-xs",children:"~"}),b.jsx("input",{type:"number",value:me,onChange:ge=>Ee(Number(ge.target.value)),onBlur:Me,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",me-ae+1,""]})]}),ee===""&&b.jsxs("div",{children:[b.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"month",value:H,onChange:ge=>Pe(ge.target.value),onBlur:Ie,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),b.jsx("span",{className:"text-xs",children:"~"}),b.jsx("input",{type:"month",value:K,onChange:ge=>pe(ge.target.value),onBlur:Le,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[ge,qe]=H.split("-").map(Number),[ct,gt]=K.split("-").map(Number);return(ct-ge)*12+(gt-qe)+1})(),""]})]}),ee===""&&b.jsxs("div",{children:[b.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"date",value:z,onChange:ge=>ue(ge.target.value),onBlur:fe,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),b.jsx("span",{className:"text-xs",children:"~"}),b.jsx("input",{type:"date",value:oe,onChange:ge=>ze(ge.target.value),onBlur:Be,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),b.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[ge,qe,ct]=z.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);return isNaN(wt.getTime())||isNaN(pt.getTime())||pt<wt?0:Math.floor((pt.getTime()-wt.getTime())/le)+1})(),""]})]}),b.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[b.jsxs("p",{children:[" ",ee,"   ."]}),b.jsx("p",{children:"    ."})]})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center justify-between gap-2",children:[b.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Dr.length>0&&b.jsx("button",{type:"button",onClick:()=>dr([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),b.jsx("textarea",{value:Ve,onChange:ge=>Ns(ge.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-[16px] desk:text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),b.jsxs("div",{className:"mb-4 text-center",children:[b.jsx("button",{type:"button",onClick:()=>{const ge=Ve.trim();ge&&(dr(qe=>[...qe,ge]),Ns(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Dr.length>0&&b.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Dr.length,""]})]}),Dr.length>0&&b.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Dr.map((ge,qe)=>b.jsxs("li",{className:"flex gap-1 items-start",children:[b.jsxs("span",{className:"shrink-0",children:[qe+1,"."]}),b.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:ge}),b.jsx("button",{type:"button",onClick:()=>{dr(ct=>ct.filter((gt,tt)=>tt!==qe))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},qe))})]}),b.jsx("textarea",{readOnly:!0,value:sn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):b.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function uG(e,t){return t-e+1}function dG(e){const t=Zr(a=>a.date),n=Zr(a=>a.rule),i=$d(e);return j.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const a=hp(i,t),l=a>=0?i[a]?.gz??null:null,u=dt(t),d=jt(t),m=xt(t,n);return{dae:l,se:u,wol:d,il:m}},[e,i,t,n])}function hG(){const[e,t]=j.useState(!1),[n,i]=j.useState(!1),[a,l]=j.useState(!1),[u,d]=j.useState(!1),[m,p]=j.useState(!1);j.useEffect(()=>{setTimeout(()=>t(!0),50),setTimeout(()=>i(!0),250),setTimeout(()=>l(!0),450)},[]);const g=async()=>{if(!m){$C.error(`   
  .`);return}const{error:y}=await st.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});y&&(console.error("Google Login Error:",y),alert("   ."))};return b.jsxs("main",{className:`flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4 transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[b.jsxs("div",{className:`transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} absolute top-16 text-center`,children:[b.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:""}),b.jsx("p",{className:"text-sm text-neutral-400",children:"    "})]}),b.jsxs("div",{className:`w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800 transition-all duration-500 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,children:[b.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),b.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",b.jsx("br",{}),"     "]}),b.jsx("div",{className:"mb-5 space-y-2",children:b.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[b.jsx("input",{type:"checkbox",checked:m,onChange:()=>p(!m),className:"mt-[2px]"}),b.jsxs("span",{children:["  .",b.jsx("button",{type:"button",onClick:()=>d(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),b.jsxs("button",{type:"button",onClick:g,"aria-disabled":!m,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
            ${m?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-pointer"}`,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),b.jsx("span",{children:"  "})]})]}),b.jsx(UE,{position:"top-center",toastOptions:{duration:2e3}}),u&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>d(!1),children:b.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:y=>y.stopPropagation(),children:[b.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),b.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[b.jsx("p",{className:"mb-2",children:"( )     ,      ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),b.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),b.jsx("p",{className:"mb-2",children:"                   "}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),b.jsx("p",{className:"mb-2",children:"                 "}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),b.jsx("p",{className:"mb-2",children:"          ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),b.jsx("p",{className:"mb-2",children:" Supabase        ."}),b.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),b.jsx("p",{children:"   : unique950318@gmail.com"})]}),b.jsx("button",{onClick:()=>d(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})})]})}const fG={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function mG(){const[e,t]=j.useState(!1),[n,i]=j.useState(!1),[a,l]=j.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin")),u=os(y=>y.migrateLocalToServer),d=os(y=>y.loadFromServer),m=os(y=>y.loading),p=Xn(y=>y.loaded),g=Xn(y=>y.loadFromServer);return j.useEffect(()=>{const y=()=>{l(window.location.pathname.startsWith("/admin"))};return typeof window<"u"&&window.addEventListener("popstate",y),()=>{typeof window<"u"&&window.removeEventListener("popstate",y)}},[]),j.useEffect(()=>{const y=st;(async()=>{const{data:T,error:k}=await y.auth.getSession();if(k){i(!1),t(!0);return}i(!!T.session),t(!0)})();const{data:{subscription:w}}=y.auth.onAuthStateChange((T,k)=>{i(!!k),t(!0)});return()=>{w.unsubscribe()}},[]),j.useEffect(()=>{n&&(async()=>(await u(),await d(),await g()))()},[n,u,d,g]),e?n?a?b.jsx($j,{}):p?m?b.jsx("main",{className:"flex min-h-screen items-center justify-center",children:b.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})}):b.jsx(pG,{isLoggedIn:n}):b.jsx("main",{className:"flex min-h-screen items-center justify-center",children:b.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})}):b.jsx(hG,{}):b.jsx("main",{className:"flex min-h-screen items-center justify-center",children:b.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})})}function pG({isLoggedIn:e}){const{list:t}=os(),[n,i]=j.useState(()=>t.length>0?t[0].id:""),[a,l]=j.useState(!1),[u,d]=j.useState(!1),[m,p]=j.useState(null),[g,y]=j.useState(!1),[x,w]=j.useState(!1),[T,k]=j.useState(!1);j.useEffect(()=>{y(!0),w(!1)},[]);const A=j.useMemo(()=>t.find(te=>te.id===n)??t[0],[t,n]),D=t.length>0&&!!A&&typeof A.birthDay=="string",B=D?A:fG,N=j.useMemo(()=>zm(B),[B]),M=dG(B),R=te=>typeof te=="string"&&te.length>=2,I=te=>Array.isArray(te)&&te.length===4&&te.every(R),G=()=>l(!0),{settings:Y,loadFromServer:q,saveToServer:J,loaded:V}=Xn();j.useEffect(()=>{e&&q()},[e,q]),j.useEffect(()=>{!e||!V||J()},[e,V,Y,J]);const Z=Y.sinsalBase===""?"day":"year",ee=Y.sinsalBase===""?"day":"year";return b.jsxs("div",{className:"min-h-screen pb-16",children:[b.jsx(ZU,{onOpenSidebar:()=>d(!0),onAddNew:G,onOpenCustom:()=>k(!0)}),b.jsx(zH,{open:T,onClose:()=>k(!1),onSave:te=>{i(te.id),y(!1),w(!1),d(!1)}}),b.jsx(UE,{position:"top-center"}),b.jsx(aH,{open:u,onClose:()=>d(!1),onView:te=>{i(te.id),d(!1),y(!1),w(!1);const we=new Date;we.setHours(12,0,0,0),Zr.getState().setDate(we),D&&A.id===te.id?(y(!1),w(!1),d(!1)):(i(te.id),d(!1),y(!1),w(!1))},onAddNew:G,onEdit:te=>{p(te),i(te.id),d(!1),y(!1),w(!1)},onDeleteView:()=>{const te=os.getState().list[0]?.id??"";i(te),y(!0),w(!1)}}),g&&b.jsx(GR,{}),a&&b.jsxs(b.Fragment,{children:[b.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),b.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:b.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:b.jsx(I4,{onSave:te=>{i(te.id),y(!1),w(!1),d(!1),requestAnimationFrame(()=>l(!1))},onClose:()=>l(!1)})})})]}),D&&!g&&!x&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"pt-18 pb-4",children:b.jsx(W$,{data:A,hourTable:A.mingSikType??"/"})}),b.jsx(OH,{ms:A}),b.jsx("div",{children:b.jsx(bU,{data:A})}),b.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:b.jsx(cG,{ms:A,natal:I(N)?N:[],chain:M,basis:{voidBasis:Z,samjaeBasis:ee},includeTenGod:!0,lunarPillars:[]})})]}),x&&b.jsx("div",{className:"pt-18 pb-4",children:b.jsx(jH,{people:t})}),m&&b.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:b.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:b.jsx(fH,{item:m,onClose:()=>{p(null)}})})}),b.jsx(JU,{onShowToday:()=>{y(!0),w(!1)},onShowCouple:()=>{w(!0),y(!1)}}),b.jsx(NH,{})]})}EO.createRoot(document.getElementById("root")).render(b.jsx(j.StrictMode,{children:b.jsx(zD,{children:b.jsxs(bD,{children:[b.jsx(Nb,{path:"/",element:b.jsx(mG,{})}),b.jsx(Nb,{path:"/admin",element:b.jsx($j,{})})]})})}));
