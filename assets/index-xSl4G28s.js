function D2(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function md(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),n}var Y0={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function bN(){if(tw)return Ou;tw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:e,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Ou.Fragment=t,Ou.jsx=n,Ou.jsxs=n,Ou}var nw;function yN(){return nw||(nw=1,Y0.exports=bN()),Y0.exports}var g=yN();const M2="harim.theme",ab="harim.settings.v1";function C2(){try{const e=localStorage.getItem(M2);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(ab);if(t){const s=JSON.parse(t)?.theme;if(s==="dark"||s==="light")return s}return null}catch{return null}}function $f(e){try{localStorage.setItem(M2,e);const t=localStorage.getItem(ab),n=t?JSON.parse(t):{};localStorage.setItem(ab,JSON.stringify({...n,theme:e}))}catch{}}function R2(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=C2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");R2(e)}catch{}})();var Z0={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function vN(){if(rw)return lt;rw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,A={};function M(U,B,V){this.props=U,this.context=B,this.refs=A,this.updater=V||T}M.prototype.isReactComponent={},M.prototype.setState=function(U,B){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,B,"setState")},M.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function P(){}P.prototype=M.prototype;function N(U,B,V){this.props=U,this.context=B,this.refs=A,this.updater=V||T}var D=N.prototype=new P;D.constructor=N,k(D,M.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function z(){}var F={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function Y(U,B,V){var J=V.ref;return{$$typeof:e,type:U,key:B,ref:J!==void 0?J:null,props:V}}function ne(U,B){return Y(U.type,B,U.props)}function K(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function Z(U){var B={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(V){return B[V]})}var ee=/\/+/g;function Q(U,B){return typeof U=="object"&&U!==null&&U.key!=null?Z(""+U.key):B.toString(36)}function ve(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(z,z):(U.status="pending",U.then(function(B){U.status==="pending"&&(U.status="fulfilled",U.value=B)},function(B){U.status==="pending"&&(U.status="rejected",U.reason=B)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function W(U,B,V,J,I){var G=typeof U;(G==="undefined"||G==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(G){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case e:case t:oe=!0;break;case y:return oe=U._init,W(oe(U._payload),B,V,J,I)}}if(oe)return I=I(U),oe=J===""?"."+Q(U,0):J,R(I)?(V="",oe!=null&&(V=oe.replace(ee,"$&/")+"/"),W(I,B,V,"",function(_e){return _e})):I!=null&&(K(I)&&(I=ne(I,V+(I.key==null||U&&U.key===I.key?"":(""+I.key).replace(ee,"$&/")+"/")+oe)),B.push(I)),1;oe=0;var ce=J===""?".":J+":";if(R(U))for(var le=0;le<U.length;le++)J=U[le],G=ce+Q(J,le),oe+=W(J,B,V,G,I);else if(le=S(U),typeof le=="function")for(U=le.call(U),le=0;!(J=U.next()).done;)J=J.value,G=ce+Q(J,le++),oe+=W(J,B,V,G,I);else if(G==="object"){if(typeof U.then=="function")return W(ve(U),B,V,J,I);throw B=String(U),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return oe}function ie(U,B,V){if(U==null)return U;var J=[],I=0;return W(U,J,"","",function(G){return B.call(V,G,I++)}),J}function te(U){if(U._status===-1){var B=U._result;B=B(),B.then(function(V){(U._status===0||U._status===-1)&&(U._status=1,U._result=V)},function(V){(U._status===0||U._status===-1)&&(U._status=2,U._result=V)}),U._status===-1&&(U._status=0,U._result=B)}if(U._status===1)return U._result.default;throw U._result}var de=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},X={map:ie,forEach:function(U,B,V){ie(U,function(){B.apply(this,arguments)},V)},count:function(U){var B=0;return ie(U,function(){B++}),B},toArray:function(U){return ie(U,function(B){return B})||[]},only:function(U){if(!K(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=_,lt.Children=X,lt.Component=M,lt.Fragment=n,lt.Profiler=o,lt.PureComponent=N,lt.StrictMode=s,lt.Suspense=m,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return F.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,B,V){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var J=k({},U.props),I=U.key;if(B!=null)for(G in B.key!==void 0&&(I=""+B.key),B)!q.call(B,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&B.ref===void 0||(J[G]=B[G]);var G=arguments.length-2;if(G===1)J.children=V;else if(1<G){for(var oe=Array(G),ce=0;ce<G;ce++)oe[ce]=arguments[ce+2];J.children=oe}return Y(U.type,I,J)},lt.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},lt.createElement=function(U,B,V){var J,I={},G=null;if(B!=null)for(J in B.key!==void 0&&(G=""+B.key),B)q.call(B,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(I[J]=B[J]);var oe=arguments.length-2;if(oe===1)I.children=V;else if(1<oe){for(var ce=Array(oe),le=0;le<oe;le++)ce[le]=arguments[le+2];I.children=ce}if(U&&U.defaultProps)for(J in oe=U.defaultProps,oe)I[J]===void 0&&(I[J]=oe[J]);return Y(U,G,I)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:f,render:U}},lt.isValidElement=K,lt.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:te}},lt.memo=function(U,B){return{$$typeof:p,type:U,compare:B===void 0?null:B}},lt.startTransition=function(U){var B=F.T,V={};F.T=V;try{var J=U(),I=F.S;I!==null&&I(V,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(z,de)}catch(G){de(G)}finally{B!==null&&V.types!==null&&(B.types=V.types),F.T=B}},lt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},lt.use=function(U){return F.H.use(U)},lt.useActionState=function(U,B,V){return F.H.useActionState(U,B,V)},lt.useCallback=function(U,B){return F.H.useCallback(U,B)},lt.useContext=function(U){return F.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,B){return F.H.useDeferredValue(U,B)},lt.useEffect=function(U,B){return F.H.useEffect(U,B)},lt.useEffectEvent=function(U){return F.H.useEffectEvent(U)},lt.useId=function(){return F.H.useId()},lt.useImperativeHandle=function(U,B,V){return F.H.useImperativeHandle(U,B,V)},lt.useInsertionEffect=function(U,B){return F.H.useInsertionEffect(U,B)},lt.useLayoutEffect=function(U,B){return F.H.useLayoutEffect(U,B)},lt.useMemo=function(U,B){return F.H.useMemo(U,B)},lt.useOptimistic=function(U,B){return F.H.useOptimistic(U,B)},lt.useReducer=function(U,B,V){return F.H.useReducer(U,B,V)},lt.useRef=function(U){return F.H.useRef(U)},lt.useState=function(U){return F.H.useState(U)},lt.useSyncExternalStore=function(U,B,V){return F.H.useSyncExternalStore(U,B,V)},lt.useTransition=function(){return F.H.useTransition()},lt.version="19.2.1",lt}var sw;function Em(){return sw||(sw=1,Z0.exports=vN()),Z0.exports}var C=Em();const rn=cl(C);var V0={exports:{}},Du={},K0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function _N(){return iw||(iw=1,(function(e){function t(W,ie){var te=W.length;W.push(ie);e:for(;0<te;){var de=te-1>>>1,X=W[de];if(0<o(X,ie))W[de]=ie,W[te]=X,te=de;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var ie=W[0],te=W.pop();if(te!==ie){W[0]=te;e:for(var de=0,X=W.length,U=X>>>1;de<U;){var B=2*(de+1)-1,V=W[B],J=B+1,I=W[J];if(0>o(V,te))J<X&&0>o(I,V)?(W[de]=I,W[J]=te,de=J):(W[de]=V,W[B]=te,de=B);else if(J<X&&0>o(I,te))W[de]=I,W[J]=te,de=J;else break e}}return ie}function o(W,ie){var te=W.sortIndex-ie.sortIndex;return te!==0?te:W.id-ie.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,_=null,x=3,S=!1,T=!1,k=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(W){for(var ie=n(p);ie!==null;){if(ie.callback===null)s(p);else if(ie.startTime<=W)s(p),ie.sortIndex=ie.expirationTime,t(m,ie);else break;ie=n(p)}}function R(W){if(k=!1,D(W),!T)if(n(m)!==null)T=!0,z||(z=!0,Z());else{var ie=n(p);ie!==null&&ve(R,ie.startTime-W)}}var z=!1,F=-1,q=5,Y=-1;function ne(){return A?!0:!(e.unstable_now()-Y<q)}function K(){if(A=!1,z){var W=e.unstable_now();Y=W;var ie=!0;try{e:{T=!1,k&&(k=!1,P(F),F=-1),S=!0;var te=x;try{t:{for(D(W),_=n(m);_!==null&&!(_.expirationTime>W&&ne());){var de=_.callback;if(typeof de=="function"){_.callback=null,x=_.priorityLevel;var X=de(_.expirationTime<=W);if(W=e.unstable_now(),typeof X=="function"){_.callback=X,D(W),ie=!0;break t}_===n(m)&&s(m),D(W)}else s(m);_=n(m)}if(_!==null)ie=!0;else{var U=n(p);U!==null&&ve(R,U.startTime-W),ie=!1}}break e}finally{_=null,x=te,S=!1}ie=void 0}}finally{ie?Z():z=!1}}}var Z;if(typeof N=="function")Z=function(){N(K)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Q=ee.port2;ee.port1.onmessage=K,Z=function(){Q.postMessage(null)}}else Z=function(){M(K,0)};function ve(W,ie){F=M(function(){W(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(W){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var te=x;x=ie;try{return W()}finally{x=te}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(W,ie){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=x;x=W;try{return ie()}finally{x=te}},e.unstable_scheduleCallback=function(W,ie,te){var de=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,W){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,W={id:y++,callback:ie,priorityLevel:W,startTime:te,expirationTime:X,sortIndex:-1},te>de?(W.sortIndex=te,t(p,W),n(m)===null&&W===n(p)&&(k?(P(F),F=-1):k=!0,ve(R,te-de))):(W.sortIndex=X,t(m,W),T||S||(T=!0,z||(z=!0,Z()))),W},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(W){var ie=x;return function(){var te=x;x=ie;try{return W.apply(this,arguments)}finally{x=te}}}})(W0)),W0}var aw;function xN(){return aw||(aw=1,K0.exports=_N()),K0.exports}var X0={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function wN(){if(ow)return fr;ow=1;var e=Em();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fr.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},fr.flushSync=function(m){var p=u.T,y=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=y,s.d.f()}},fr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},fr.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},fr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&s.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},fr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);s.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fr.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},fr.requestFormReset=function(m){s.d.r(m)},fr.unstable_batchedUpdates=function(m,p){return m(p)},fr.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},fr.useFormStatus=function(){return u.H.useHostTransitionStatus()},fr.version="19.2.1",fr}var lw;function L2(){if(lw)return X0.exports;lw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),X0.exports=wN(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function SN(){if(cw)return Du;cw=1;var e=xN(),t=Em(),n=L2();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var c=r,h=i;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return m(v),r;if(w===h)return m(v),i;w=w.sibling}throw Error(s(188))}if(c.return!==h.return)c=v,h=w;else{for(var O=!1,H=v.child;H;){if(H===c){O=!0,c=v,h=w;break}if(H===h){O=!0,h=v,c=w;break}H=H.sibling}if(!O){for(H=w.child;H;){if(H===c){O=!0,c=w,h=v;break}if(H===h){O=!0,h=w,c=v;break}H=H.sibling}if(!O)throw Error(s(189))}}if(c.alternate!==h)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Symbol.for("react.client.reference");function Q(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ee?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case z:return"SuspenseList";case Y:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case N:return r.displayName||"Context";case P:return(r._context.displayName||"Context")+".Consumer";case D:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return i=r.displayName||null,i!==null?i:Q(r.type)||"Memo";case q:i=r._payload,r=r._init;try{return Q(r(i))}catch{}}return null}var ve=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},de=[],X=-1;function U(r){return{current:r}}function B(r){0>X||(r.current=de[X],de[X]=null,X--)}function V(r,i){X++,de[X]=r.current,r.current=i}var J=U(null),I=U(null),G=U(null),oe=U(null);function ce(r,i){switch(V(G,i),V(I,r),V(J,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Ex(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Ex(i),r=Tx(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(J),V(J,r)}function le(){B(J),B(I),B(G)}function _e(r){r.memoizedState!==null&&V(oe,r);var i=J.current,c=Tx(i,r.type);i!==c&&(V(I,r),V(J,c))}function Ae(r){I.current===r&&(B(J),B(I)),oe.current===r&&(B(oe),ku._currentValue=te)}var je,Me;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);je=i&&i[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Me}var $e=!1;function Ce(r,i){if(!r||$e)return"";$e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Se){var we=Se}Reflect.construct(r,[],De)}else{try{De.call()}catch(Se){we=Se}r.call(De.prototype)}}else{try{throw Error()}catch(Se){we=Se}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(Se){if(Se&&we&&typeof Se.stack=="string")return[Se.stack,we.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),O=w[0],H=w[1];if(O&&H){var se=O.split(`
`),ye=H.split(`
`);for(v=h=0;h<se.length&&!se[h].includes("DetermineComponentFrameRoot");)h++;for(;v<ye.length&&!ye[v].includes("DetermineComponentFrameRoot");)v++;if(h===se.length||v===ye.length)for(h=se.length-1,v=ye.length-1;1<=h&&0<=v&&se[h]!==ye[v];)v--;for(;1<=h&&0<=v;h--,v--)if(se[h]!==ye[v]){if(h!==1||v!==1)do if(h--,v--,0>v||se[h]!==ye[v]){var ke=`
`+se[h].replace(" at new "," at ");return r.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",r.displayName)),ke}while(1<=h&&0<=v);break}}}finally{$e=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Pe(r,i){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==i&&i!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ce(r.type,!1);case 11:return Ce(r.type.render,!1);case 1:return Ce(r.type,!0);case 31:return Ee("Activity");default:return""}}function Ie(r){try{var i="",c=null;do i+=Pe(r,c),c=r,r=r.return;while(r);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var pe=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,ue=e.unstable_cancelCallback,me=e.unstable_shouldYield,ze=e.unstable_requestPaint,Be=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,at=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,On=e.unstable_LowPriority,En=e.unstable_IdlePriority,lr=e.log,vr=e.unstable_setDisableYieldValue,dn=null,Ct=null;function bn(r){if(typeof lr=="function"&&vr(r),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(dn,r)}catch{}}var hn=Math.clz32?Math.clz32:zs,Zr=Math.log,ra=Math.LN2;function zs(r){return r>>>=0,r===0?32:31-(Zr(r)/ra|0)|0}var Tn=256,Dn=262144,oi=4194304;function Nr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cr(r,i,c){var h=r.pendingLanes;if(h===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var H=h&134217727;return H!==0?(h=H&~w,h!==0?v=Nr(h):(O&=H,O!==0?v=Nr(O):c||(c=H&~r,c!==0&&(v=Nr(c))))):(H=h&~w,H!==0?v=Nr(H):O!==0?v=Nr(O):c||(c=h&~r,c!==0&&(v=Nr(c)))),v===0?0:i!==0&&i!==v&&(i&w)===0&&(w=v&-v,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:v}function gs(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function sa(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(){var r=oi;return oi<<=1,(oi&62914560)===0&&(oi=4194304),r}function Qa(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Us(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function eo(r,i,c,h,v,w){var O=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var H=r.entanglements,se=r.expirationTimes,ye=r.hiddenUpdates;for(c=O&~c;0<c;){var ke=31-hn(c),De=1<<ke;H[ke]=0,se[ke]=-1;var we=ye[ke];if(we!==null)for(ye[ke]=null,ke=0;ke<we.length;ke++){var Se=we[ke];Se!==null&&(Se.lane&=-536870913)}c&=~De}h!==0&&ia(r,h,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~i))}function ia(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var h=31-hn(i);r.entangledLanes|=i,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function to(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var h=31-hn(c),v=1<<h;v&i|r[h]&i&&(r[h]|=i),c&=~v}}function no(r,i){var c=i&-i;return c=(c&42)!==0?1:$n(c),(c&(r.suspendedLanes|i))!==0?0:c}function $n(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ki(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:Vx(r.type))}function Or(r,i){var c=ie.p;try{return ie.p=r,i()}finally{ie.p=c}}var ur=Math.random().toString(36).slice(2),sn="__reactFiber$"+ur,kn="__reactProps$"+ur,Vr="__reactContainer$"+ur,bs="__reactEvents$"+ur,ge="__reactListeners$"+ur,qe="__reactHandles$"+ur,ct="__reactResources$"+ur,gt="__reactMarker$"+ur;function tt(r){delete r[sn],delete r[kn],delete r[bs],delete r[ge],delete r[qe]}function ht(r){var i=r[sn];if(i)return i;for(var c=r.parentNode;c;){if(i=c[Vr]||c[sn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Mx(r);r!==null;){if(c=r[sn])return c;r=Mx(r)}return i}r=c,c=r.parentNode}return null}function wt(r){if(r=r[sn]||r[Vr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function pt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function In(r){var i=r[ct];return i||(i=r[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function St(r){r[gt]=!0}var aa=new Set,ro={};function ys(r,i){Jn(r,i),Jn(r+"Capture",i)}function Jn(r,i){for(ro[r]=i,r=0;r<i.length;r++)aa.add(i[r])}var Ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},io={};function ao(r){return pe.call(io,r)?!0:pe.call(so,r)?!1:Ai.test(r)?io[r]=!0:(so[r]=!0,!1)}function bt(r,i,c){if(ao(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function zt(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function Dr(r,i,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+h)}}function zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ji(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rc(r,i,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(r,i,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ot(r){if(!r._valueTracker){var i=ji(r)?"checked":"value";r._valueTracker=Rc(r,i,""+r[i])}}function an(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),h="";return r&&(h=ji(r)?r.checked?"true":"false":r.value),r=h,r!==c?(i.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var hl=/[\n"\\]/g;function en(r){return r.replace(hl,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Lc(r,i,c,h,v,w,O,H){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),i!=null?O==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+zn(i)):r.value!==""+zn(i)&&(r.value=""+zn(i)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),i!=null?Hs(r,O,zn(i)):c!=null?Hs(r,O,zn(c)):h!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?r.name=""+zn(H):r.removeAttribute("name")}function oo(r,i,c,h,v,w,O,H){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){ot(r);return}c=c!=null?""+zn(c):"",i=i!=null?""+zn(i):c,H||i===r.value||(r.value=i),r.defaultValue=i}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=H?r.checked:!!h,r.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),ot(r)}function Hs(r,i,c){i==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function qt(r,i,c,h){if(r=r.options,i){i={};for(var v=0;v<c.length;v++)i["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=i.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&h&&(r[c].defaultSelected=!0)}else{for(c=""+zn(c),i=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function li(r,i,c){if(i!=null&&(i=""+zn(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+zn(c):""}function la(r,i,c,h){if(i==null){if(h!=null){if(c!=null)throw Error(s(92));if(ve(h)){if(1<h.length)throw Error(s(93));h=h[0]}c=h}c==null&&(c=""),i=c}c=zn(i),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),ot(r)}function vs(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(r,i,c){var h=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":h?r.setProperty(i,c):typeof c!="number"||c===0||Bc.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function fl(r,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var v in i)h=i[v],i.hasOwnProperty(v)&&c[v]!==h&&ca(r,v,h)}else for(var w in i)i.hasOwnProperty(w)&&ca(r,w,i[w])}function lo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Pc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Mr(){}var pl=null;function co(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var da=null,st=null;function Kr(r){var i=wt(r);if(i&&(r=i.stateNode)){var c=r[kn]||null;e:switch(r=i.stateNode,i.type){case"input":if(Lc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var h=c[i];if(h!==r&&h.form===r.form){var v=h[kn]||null;if(!v)throw Error(s(90));Lc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<c.length;i++)h=c[i],h.form===r.form&&an(h)}break e;case"textarea":li(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&qt(r,!!c.multiple,i,!1)}}}var Bt=!1;function $c(r,i,c){if(Bt)return r(i,c);Bt=!0;try{var h=r(i);return h}finally{if(Bt=!1,(da!==null||st!==null)&&(wh(),da&&(i=da,r=st,st=da=null,Kr(i),r)))for(i=0;i<r.length;i++)Kr(r[i])}}function Ni(r,i){var c=r.stateNode;if(c===null)return null;var h=c[kn]||null;if(h===null)return null;c=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=!1;if(Wr)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){uo=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{uo=!1}var _s=null,Oi=null,yn=null;function ci(){if(yn)return yn;var r,i=Oi,c=i.length,h,v="value"in _s?_s.value:_s.textContent,w=v.length;for(r=0;r<c&&i[r]===v[r];r++);var O=c-r;for(h=1;h<=O&&i[c-h]===v[w-h];h++);return yn=v.slice(r,1<h?1-h:void 0)}function ho(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function fo(){return!0}function Ad(){return!1}function Qn(r){function i(c,h,v,w,O){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var H in r)r.hasOwnProperty(H)&&(c=r[H],this[H]=c?c(w):w[H]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fo:Ad,this.isPropagationStopped=Ad,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),i}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=Qn(Gs),ha=_({},Gs,{view:0,detail:0}),Et=Qn(ha),Ic,_r,Fs,mo=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fs&&(Fs&&r.type==="mousemove"?(Ic=r.screenX-Fs.screenX,_r=r.screenY-Fs.screenY):_r=Ic=0,Fs=r),Ic)},movementY:function(r){return"movementY"in r?r.movementY:_r}}),jd=Qn(mo),zc=_({},mo,{dataTransfer:0}),np=Qn(zc),Nd=_({},ha,{relatedTarget:0}),Uc=Qn(Nd),rp=_({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=Qn(rp),sp=_({},Gs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xs=Qn(sp),ip=_({},Gs,{data:0}),Gc=Qn(ip),ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Dd[r])?!!i[r]:!1}function qc(){return Fc}var Md=_({},ha,{key:function(r){if(r.key){var i=ui[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ho(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Od[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(r){return r.type==="keypress"?ho(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ho(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Cd=Qn(Md),ap=_({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=Qn(ap),Yc=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),op=Qn(Yc),Ld=_({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bd=Qn(Ld),bl=_({},mo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Di=Qn(bl),lp=_({},Gs,{newState:0,oldState:0}),po=Qn(lp),Cr=[9,13,27,32],yl=Wr&&"CompositionEvent"in window,fa=null;Wr&&"documentMode"in document&&(fa=document.documentMode);var cp=Wr&&"TextEvent"in window&&!fa,vl=Wr&&(!yl||fa&&8<fa&&11>=fa),_l=" ",Pd=!1;function $d(r,i){switch(r){case"keyup":return Cr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Jr(r,i){switch(r){case"compositionend":return Zc(i);case"keypress":return i.which!==32?null:(Pd=!0,_l);case"textInput":return r=i.data,r===_l&&Pd?null:r;default:return null}}function pa(r,i){if(ma)return r==="compositionend"||!yl&&$d(r,i)?(r=ci(),yn=Oi=_s=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vl&&i.locale!=="ko"?null:i.data;default:return null}}var up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ws(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!up[r.type]:i==="textarea"}function Id(r,i,c,h){da?st?st.push(h):st=[h]:da=h,i=Nh(i,"onChange"),0<i.length&&(c=new gl("onChange","change",null,c,h),r.push({event:c,listeners:i}))}var Ss=null,go=null;function bo(r){yx(r,0)}function yo(r){var i=pt(r);if(an(i))return r}function vo(r,i){if(r==="change")return i}var zd=!1;if(Wr){var Es;if(Wr){var ga="oninput"in document;if(!ga){var Ud=document.createElement("div");Ud.setAttribute("oninput","return;"),ga=typeof Ud.oninput=="function"}Es=ga}else Es=!1;zd=Es&&(!document.documentMode||9<document.documentMode)}function xl(){Ss&&(Ss.detachEvent("onpropertychange",Hd),go=Ss=null)}function Hd(r){if(r.propertyName==="value"&&yo(go)){var i=[];Id(i,go,r,co(r)),$c(bo,i)}}function qs(r,i,c){r==="focusin"?(xl(),Ss=i,go=c,Ss.attachEvent("onpropertychange",Hd)):r==="focusout"&&xl()}function dp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return yo(go)}function ba(r,i){if(r==="click")return yo(i)}function hp(r,i){if(r==="input"||r==="change")return yo(i)}function Ys(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var qn=typeof Object.is=="function"?Object.is:Ys;function ya(r,i){if(qn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),h=Object.keys(i);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!pe.call(i,v)||!qn(r[v],i[v]))return!1}return!0}function wl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _o(r,i){var c=wl(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=i&&h>=i)return{node:c,offset:i-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=wl(c)}}function Sl(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Sl(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function xo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=oa(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=oa(r.document)}return i}function di(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var El=Wr&&"documentMode"in document&&11>=document.documentMode,hi=null,Tl=null,wo=null,va=!1;function Gd(r,i,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;va||hi==null||hi!==oa(h)||(h=hi,"selectionStart"in h&&di(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),wo&&ya(wo,h)||(wo=h,h=Nh(Tl,"onSelect"),0<h.length&&(i=new gl("onSelect","select",null,i,c),r.push({event:i,listeners:h}),i.target=hi)))}function fi(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var _a={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionrun:fi("Transition","TransitionRun"),transitionstart:fi("Transition","TransitionStart"),transitioncancel:fi("Transition","TransitionCancel"),transitionend:fi("Transition","TransitionEnd")},kl={},Fd={};Wr&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Yn(r){if(kl[r])return kl[r];if(!_a[r])return r;var i=_a[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Fd)return kl[r]=i[c];return r}var So=Yn("animationend"),qd=Yn("animationiteration"),Eo=Yn("animationstart"),fp=Yn("transitionrun"),Yd=Yn("transitionstart"),mp=Yn("transitioncancel"),xa=Yn("transitionend"),Zd=new Map,mi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mi.push("scrollEnd");function Rr(r,i){Zd.set(r,i),ys(i,[r])}var To=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],dr=0,Al=0;function ko(){for(var r=dr,i=Al=dr=0;i<r;){var c=Lr[i];Lr[i++]=null;var h=Lr[i];Lr[i++]=null;var v=Lr[i];Lr[i++]=null;var w=Lr[i];if(Lr[i++]=null,h!==null&&v!==null){var O=h.pending;O===null?v.next=v:(v.next=O.next,O.next=v),h.pending=v}w!==0&&wa(c,v,w)}}function pi(r,i,c,h){Lr[dr++]=r,Lr[dr++]=i,Lr[dr++]=c,Lr[dr++]=h,Al|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Vc(r,i,c,h){return pi(r,i,c,h),Ao(r)}function Ts(r,i){return pi(r,null,null,i),Ao(r)}function wa(r,i,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&i!==null&&(v=31-hn(c),r=w.hiddenUpdates,h=r[v],h===null?r[v]=[i]:h.push(i),i.lane=c|536870912),w):null}function Ao(r){if(50<vu)throw vu=0,g0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Mi={};function pp(r,i,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(r,i,c,h){return new pp(r,i,c,h)}function jl(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ks(r,i){var c=r.alternate;return c===null?(c=hr(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Kc(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function jo(r,i,c,h,v,w){var O=0;if(h=r,typeof r=="function")jl(r)&&(O=1);else if(typeof r=="string")O=iN(r,c,J.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case Y:return r=hr(31,c,i,v),r.elementType=Y,r.lanes=w,r;case k:return Ci(c.children,v,w,i);case A:O=8,v|=24;break;case M:return r=hr(12,c,i,v|2),r.elementType=M,r.lanes=w,r;case R:return r=hr(13,c,i,v),r.elementType=R,r.lanes=w,r;case z:return r=hr(19,c,i,v),r.elementType=z,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:O=10;break e;case P:O=9;break e;case D:O=11;break e;case F:O=14;break e;case q:O=16,h=null;break e}O=29,c=Error(s(130,r===null?"null":typeof r,"")),h=null}return i=hr(O,c,i,v),i.elementType=r,i.type=h,i.lanes=w,i}function Ci(r,i,c,h){return r=hr(7,r,h,i),r.lanes=c,r}function Nl(r,i,c){return r=hr(6,r,null,i),r.lanes=c,r}function Wc(r){var i=hr(18,null,null,0);return i.stateNode=r,i}function Xc(r,i,c){return i=hr(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var a=new WeakMap;function d(r,i){if(typeof r=="object"&&r!==null){var c=a.get(r);return c!==void 0?c:(i={value:r,source:i,stack:Ie(i)},a.set(r,i),i)}return{value:r,source:i,stack:Ie(i)}}var b=[],E=0,j=null,$=0,re=[],fe=0,xe=null,Oe=1,Ge="";function Xe(r,i){b[E++]=$,b[E++]=j,j=r,$=i}function ft(r,i,c){re[fe++]=Oe,re[fe++]=Ge,re[fe++]=xe,xe=r;var h=Oe;r=Ge;var v=32-hn(h)-1;h&=~(1<<v),c+=1;var w=32-hn(i)+v;if(30<w){var O=v-v%5;w=(h&(1<<O)-1).toString(32),h>>=O,v-=O,Oe=1<<32-hn(i)+v|c<<v|h,Ge=w+r}else Oe=1<<w|c<<v|h,Ge=r}function Un(r){r.return!==null&&(Xe(r,1),ft(r,1,0))}function vn(r){for(;r===j;)j=b[--E],b[E]=null,$=b[--E],b[E]=null;for(;r===xe;)xe=re[--fe],re[fe]=null,Ge=re[--fe],re[fe]=null,Oe=re[--fe],re[fe]=null}function xr(r,i){re[fe++]=Oe,re[fe++]=Ge,re[fe++]=xe,Oe=i.id,Ge=i.overflow,xe=r}var Nt=null,Ot=null,yt=!1,gi=null,Br=!1,Ol=Error(s(519));function bi(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw No(d(i,r)),Ol}function Jc(r){var i=r.stateNode,c=r.type,h=r.memoizedProps;switch(i[sn]=r,i[kn]=h,c){case"dialog":_t("cancel",i),_t("close",i);break;case"iframe":case"object":case"embed":_t("load",i);break;case"video":case"audio":for(c=0;c<xu.length;c++)_t(xu[c],i);break;case"source":_t("error",i);break;case"img":case"image":case"link":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"input":_t("invalid",i),oo(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":_t("invalid",i);break;case"textarea":_t("invalid",i),la(i,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||h.suppressHydrationWarning===!0||wx(i.textContent,c)?(h.popover!=null&&(_t("beforetoggle",i),_t("toggle",i)),h.onScroll!=null&&_t("scroll",i),h.onScrollEnd!=null&&_t("scrollend",i),h.onClick!=null&&(i.onclick=Mr),i=!0):i=!1,i||bi(r,!0)}function fn(r){for(Nt=r.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Nt=Nt.return}}function Zs(r){if(r!==Nt)return!1;if(!yt)return fn(r),yt=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||D0(r.type,r.memoizedProps)),c=!c),c&&Ot&&bi(r),fn(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Ot=Dx(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Ot=Dx(r)}else i===27?(i=Ot,Ba(r.type)?(r=B0,B0=null,Ot=r):Ot=i):Ot=Nt?js(r.stateNode.nextSibling):null;return!0}function Ri(){Ot=Nt=null,yt=!1}function Qc(){var r=gi;return r!==null&&(zr===null?zr=r:zr.push.apply(zr,r),gi=null),r}function No(r){gi===null?gi=[r]:gi.push(r)}var Oo=U(null),yi=null,Vs=null;function Sa(r,i,c){V(Oo,i._currentValue),i._currentValue=c}function Li(r){r._currentValue=Oo.current,B(Oo)}function gp(r,i,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===c)break;r=r.return}}function bp(r,i,c,h){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var H=w;w=v;for(var se=0;se<i.length;se++)if(H.context===i[se]){w.lanes|=c,H=w.alternate,H!==null&&(H.lanes|=c),gp(w.return,c,r),h||(O=null);break e}w=H.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(s(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),gp(O,c,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Dl(r,i,c,h){r=null;for(var v=i,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var H=v.type;qn(v.pendingProps.value,O.value)||(r!==null?r.push(H):r=[H])}}else if(v===oe.current){if(O=v.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(ku):r=[ku])}v=v.return}r!==null&&bp(i,r,c,h),i.flags|=262144}function Vd(r){for(r=r.firstContext;r!==null;){if(!qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Do(r){yi=r,Vs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function er(r){return ov(yi,r)}function Kd(r,i){return yi===null&&Do(r),ov(r,i)}function ov(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Vs===null){if(r===null)throw Error(s(308));Vs=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Vs=Vs.next=i;return c}var tj=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},nj=e.unstable_scheduleCallback,rj=e.unstable_NormalPriority,Mn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yp(){return{controller:new tj,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&nj(rj,function(){r.controller.abort()})}var tu=null,vp=0,Ml=0,Cl=null;function sj(r,i){if(tu===null){var c=tu=[];vp=0,Ml=w0(),Cl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return vp++,i.then(lv,lv),i}function lv(){if(--vp===0&&tu!==null){Cl!==null&&(Cl.status="fulfilled");var r=tu;tu=null,Ml=0,Cl=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function ij(r,i){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return r.then(function(){h.status="fulfilled",h.value=i;for(var v=0;v<c.length;v++)(0,c[v])(i)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var cv=W.S;W.S=function(r,i){Y_=Be(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&sj(r,i),cv!==null&&cv(r,i)};var Mo=U(null);function _p(){var r=Mo.current;return r!==null?r:Yt.pooledCache}function Wd(r,i){i===null?V(Mo,Mo.current):V(Mo,i.pool)}function uv(){var r=_p();return r===null?null:{parent:Mn._currentValue,pool:r}}var Rl=Error(s(460)),xp=Error(s(474)),Xd=Error(s(542)),Jd={then:function(){}};function dv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function hv(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(Mr,Mr),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,mv(r),r;default:if(typeof i.status=="string")i.then(Mr,Mr);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(h){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=h}},function(h){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,mv(r),r}throw Ro=i,Rl}}function Co(r){try{var i=r._init;return i(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ro=c,Rl):c}}var Ro=null;function fv(){if(Ro===null)throw Error(s(459));var r=Ro;return Ro=null,r}function mv(r){if(r===Rl||r===Xd)throw Error(s(483))}var Ll=null,nu=0;function Qd(r){var i=nu;return nu+=1,Ll===null&&(Ll=[]),hv(Ll,r,i)}function ru(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function eh(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function pv(r){function i(he,ae){if(r){var be=he.deletions;be===null?(he.deletions=[ae],he.flags|=16):be.push(ae)}}function c(he,ae){if(!r)return null;for(;ae!==null;)i(he,ae),ae=ae.sibling;return null}function h(he){for(var ae=new Map;he!==null;)he.key!==null?ae.set(he.key,he):ae.set(he.index,he),he=he.sibling;return ae}function v(he,ae){return he=ks(he,ae),he.index=0,he.sibling=null,he}function w(he,ae,be){return he.index=be,r?(be=he.alternate,be!==null?(be=be.index,be<ae?(he.flags|=67108866,ae):be):(he.flags|=67108866,ae)):(he.flags|=1048576,ae)}function O(he){return r&&he.alternate===null&&(he.flags|=67108866),he}function H(he,ae,be,Ne){return ae===null||ae.tag!==6?(ae=Nl(be,he.mode,Ne),ae.return=he,ae):(ae=v(ae,be),ae.return=he,ae)}function se(he,ae,be,Ne){var Qe=be.type;return Qe===k?ke(he,ae,be.props.children,Ne,be.key):ae!==null&&(ae.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===q&&Co(Qe)===ae.type)?(ae=v(ae,be.props),ru(ae,be),ae.return=he,ae):(ae=jo(be.type,be.key,be.props,null,he.mode,Ne),ru(ae,be),ae.return=he,ae)}function ye(he,ae,be,Ne){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==be.containerInfo||ae.stateNode.implementation!==be.implementation?(ae=Xc(be,he.mode,Ne),ae.return=he,ae):(ae=v(ae,be.children||[]),ae.return=he,ae)}function ke(he,ae,be,Ne,Qe){return ae===null||ae.tag!==7?(ae=Ci(be,he.mode,Ne,Qe),ae.return=he,ae):(ae=v(ae,be),ae.return=he,ae)}function De(he,ae,be){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Nl(""+ae,he.mode,be),ae.return=he,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return be=jo(ae.type,ae.key,ae.props,null,he.mode,be),ru(be,ae),be.return=he,be;case T:return ae=Xc(ae,he.mode,be),ae.return=he,ae;case q:return ae=Co(ae),De(he,ae,be)}if(ve(ae)||Z(ae))return ae=Ci(ae,he.mode,be,null),ae.return=he,ae;if(typeof ae.then=="function")return De(he,Qd(ae),be);if(ae.$$typeof===N)return De(he,Kd(he,ae),be);eh(he,ae)}return null}function we(he,ae,be,Ne){var Qe=ae!==null?ae.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Qe!==null?null:H(he,ae,""+be,Ne);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case S:return be.key===Qe?se(he,ae,be,Ne):null;case T:return be.key===Qe?ye(he,ae,be,Ne):null;case q:return be=Co(be),we(he,ae,be,Ne)}if(ve(be)||Z(be))return Qe!==null?null:ke(he,ae,be,Ne,null);if(typeof be.then=="function")return we(he,ae,Qd(be),Ne);if(be.$$typeof===N)return we(he,ae,Kd(he,be),Ne);eh(he,be)}return null}function Se(he,ae,be,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return he=he.get(be)||null,H(ae,he,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return he=he.get(Ne.key===null?be:Ne.key)||null,se(ae,he,Ne,Qe);case T:return he=he.get(Ne.key===null?be:Ne.key)||null,ye(ae,he,Ne,Qe);case q:return Ne=Co(Ne),Se(he,ae,be,Ne,Qe)}if(ve(Ne)||Z(Ne))return he=he.get(be)||null,ke(ae,he,Ne,Qe,null);if(typeof Ne.then=="function")return Se(he,ae,be,Qd(Ne),Qe);if(Ne.$$typeof===N)return Se(he,ae,be,Kd(ae,Ne),Qe);eh(ae,Ne)}return null}function Ye(he,ae,be,Ne){for(var Qe=null,Dt=null,Ke=ae,mt=ae=0,kt=null;Ke!==null&&mt<be.length;mt++){Ke.index>mt?(kt=Ke,Ke=null):kt=Ke.sibling;var Mt=we(he,Ke,be[mt],Ne);if(Mt===null){Ke===null&&(Ke=kt);break}r&&Ke&&Mt.alternate===null&&i(he,Ke),ae=w(Mt,ae,mt),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt,Ke=kt}if(mt===be.length)return c(he,Ke),yt&&Xe(he,mt),Qe;if(Ke===null){for(;mt<be.length;mt++)Ke=De(he,be[mt],Ne),Ke!==null&&(ae=w(Ke,ae,mt),Dt===null?Qe=Ke:Dt.sibling=Ke,Dt=Ke);return yt&&Xe(he,mt),Qe}for(Ke=h(Ke);mt<be.length;mt++)kt=Se(Ke,he,mt,be[mt],Ne),kt!==null&&(r&&kt.alternate!==null&&Ke.delete(kt.key===null?mt:kt.key),ae=w(kt,ae,mt),Dt===null?Qe=kt:Dt.sibling=kt,Dt=kt);return r&&Ke.forEach(function(Ua){return i(he,Ua)}),yt&&Xe(he,mt),Qe}function nt(he,ae,be,Ne){if(be==null)throw Error(s(151));for(var Qe=null,Dt=null,Ke=ae,mt=ae=0,kt=null,Mt=be.next();Ke!==null&&!Mt.done;mt++,Mt=be.next()){Ke.index>mt?(kt=Ke,Ke=null):kt=Ke.sibling;var Ua=we(he,Ke,Mt.value,Ne);if(Ua===null){Ke===null&&(Ke=kt);break}r&&Ke&&Ua.alternate===null&&i(he,Ke),ae=w(Ua,ae,mt),Dt===null?Qe=Ua:Dt.sibling=Ua,Dt=Ua,Ke=kt}if(Mt.done)return c(he,Ke),yt&&Xe(he,mt),Qe;if(Ke===null){for(;!Mt.done;mt++,Mt=be.next())Mt=De(he,Mt.value,Ne),Mt!==null&&(ae=w(Mt,ae,mt),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return yt&&Xe(he,mt),Qe}for(Ke=h(Ke);!Mt.done;mt++,Mt=be.next())Mt=Se(Ke,he,mt,Mt.value,Ne),Mt!==null&&(r&&Mt.alternate!==null&&Ke.delete(Mt.key===null?mt:Mt.key),ae=w(Mt,ae,mt),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return r&&Ke.forEach(function(gN){return i(he,gN)}),yt&&Xe(he,mt),Qe}function Gt(he,ae,be,Ne){if(typeof be=="object"&&be!==null&&be.type===k&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case S:e:{for(var Qe=be.key;ae!==null;){if(ae.key===Qe){if(Qe=be.type,Qe===k){if(ae.tag===7){c(he,ae.sibling),Ne=v(ae,be.props.children),Ne.return=he,he=Ne;break e}}else if(ae.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===q&&Co(Qe)===ae.type){c(he,ae.sibling),Ne=v(ae,be.props),ru(Ne,be),Ne.return=he,he=Ne;break e}c(he,ae);break}else i(he,ae);ae=ae.sibling}be.type===k?(Ne=Ci(be.props.children,he.mode,Ne,be.key),Ne.return=he,he=Ne):(Ne=jo(be.type,be.key,be.props,null,he.mode,Ne),ru(Ne,be),Ne.return=he,he=Ne)}return O(he);case T:e:{for(Qe=be.key;ae!==null;){if(ae.key===Qe)if(ae.tag===4&&ae.stateNode.containerInfo===be.containerInfo&&ae.stateNode.implementation===be.implementation){c(he,ae.sibling),Ne=v(ae,be.children||[]),Ne.return=he,he=Ne;break e}else{c(he,ae);break}else i(he,ae);ae=ae.sibling}Ne=Xc(be,he.mode,Ne),Ne.return=he,he=Ne}return O(he);case q:return be=Co(be),Gt(he,ae,be,Ne)}if(ve(be))return Ye(he,ae,be,Ne);if(Z(be)){if(Qe=Z(be),typeof Qe!="function")throw Error(s(150));return be=Qe.call(be),nt(he,ae,be,Ne)}if(typeof be.then=="function")return Gt(he,ae,Qd(be),Ne);if(be.$$typeof===N)return Gt(he,ae,Kd(he,be),Ne);eh(he,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,ae!==null&&ae.tag===6?(c(he,ae.sibling),Ne=v(ae,be),Ne.return=he,he=Ne):(c(he,ae),Ne=Nl(be,he.mode,Ne),Ne.return=he,he=Ne),O(he)):c(he,ae)}return function(he,ae,be,Ne){try{nu=0;var Qe=Gt(he,ae,be,Ne);return Ll=null,Qe}catch(Ke){if(Ke===Rl||Ke===Xd)throw Ke;var Dt=hr(29,Ke,null,he.mode);return Dt.lanes=Ne,Dt.return=he,Dt}finally{}}}var Lo=pv(!0),gv=pv(!1),Ea=!1;function wp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ta(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,i,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Rt&2)!==0){var v=h.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),h.pending=i,i=Ao(r),wa(r,null,c),i}return pi(r,h,i,c),Ao(r)}function su(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var h=i.lanes;h&=r.pendingLanes,c|=h,i.lanes=c,to(r,c)}}function Ep(r,i){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?v=w=i:w=w.next=i}else v=w=i;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var Tp=!1;function iu(){if(Tp){var r=Cl;if(r!==null)throw r}}function au(r,i,c,h){Tp=!1;var v=r.updateQueue;Ea=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var se=H,ye=se.next;se.next=null,O===null?w=ye:O.next=ye,O=se;var ke=r.alternate;ke!==null&&(ke=ke.updateQueue,H=ke.lastBaseUpdate,H!==O&&(H===null?ke.firstBaseUpdate=ye:H.next=ye,ke.lastBaseUpdate=se))}if(w!==null){var De=v.baseState;O=0,ke=ye=se=null,H=w;do{var we=H.lane&-536870913,Se=we!==H.lane;if(Se?(Tt&we)===we:(h&we)===we){we!==0&&we===Ml&&(Tp=!0),ke!==null&&(ke=ke.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ye=r,nt=H;we=i;var Gt=c;switch(nt.tag){case 1:if(Ye=nt.payload,typeof Ye=="function"){De=Ye.call(Gt,De,we);break e}De=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=nt.payload,we=typeof Ye=="function"?Ye.call(Gt,De,we):Ye,we==null)break e;De=_({},De,we);break e;case 2:Ea=!0}}we=H.callback,we!==null&&(r.flags|=64,Se&&(r.flags|=8192),Se=v.callbacks,Se===null?v.callbacks=[we]:Se.push(we))}else Se={lane:we,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ke===null?(ye=ke=Se,se=De):ke=ke.next=Se,O|=we;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;Se=H,H=Se.next,Se.next=null,v.lastBaseUpdate=Se,v.shared.pending=null}}while(!0);ke===null&&(se=De),v.baseState=se,v.firstBaseUpdate=ye,v.lastBaseUpdate=ke,w===null&&(v.shared.lanes=0),Da|=O,r.lanes=O,r.memoizedState=De}}function bv(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function yv(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)bv(c[r],i)}var Bl=U(null),th=U(0);function vv(r,i){r=Fi,V(th,r),V(Bl,i),Fi=r|i.baseLanes}function kp(){V(th,Fi),V(Bl,Bl.current)}function Ap(){Fi=th.current,B(Bl),B(th)}var Qr=U(null),As=null;function Aa(r){var i=r.alternate;V(An,An.current&1),V(Qr,r),As===null&&(i===null||Bl.current!==null||i.memoizedState!==null)&&(As=r)}function jp(r){V(An,An.current),V(Qr,r),As===null&&(As=r)}function _v(r){r.tag===22?(V(An,An.current),V(Qr,r),As===null&&(As=r)):ja()}function ja(){V(An,An.current),V(Qr,Qr.current)}function es(r){B(Qr),As===r&&(As=null),B(An)}var An=U(0);function nh(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||L0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bi=0,ut=null,Ut=null,Cn=null,rh=!1,Pl=!1,Bo=!1,sh=0,ou=0,$l=null,aj=0;function _n(){throw Error(s(321))}function Np(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!qn(r[c],i[c]))return!1;return!0}function Op(r,i,c,h,v,w){return Bi=w,ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=r===null||r.memoizedState===null?r_:qp,Bo=!1,w=c(h,v),Bo=!1,Pl&&(w=wv(i,c,h,v)),xv(r),w}function xv(r){W.H=uu;var i=Ut!==null&&Ut.next!==null;if(Bi=0,Cn=Ut=ut=null,rh=!1,ou=0,$l=null,i)throw Error(s(300));r===null||Rn||(r=r.dependencies,r!==null&&Vd(r)&&(Rn=!0))}function wv(r,i,c,h){ut=r;var v=0;do{if(Pl&&($l=null),ou=0,Pl=!1,25<=v)throw Error(s(301));if(v+=1,Cn=Ut=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}W.H=s_,w=i(c,h)}while(Pl);return w}function oj(){var r=W.H,i=r.useState()[0];return i=typeof i.then=="function"?lu(i):i,r=r.useState()[0],(Ut!==null?Ut.memoizedState:null)!==r&&(ut.flags|=1024),i}function Dp(){var r=sh!==0;return sh=0,r}function Mp(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function Cp(r){if(rh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rh=!1}Bi=0,Cn=Ut=ut=null,Pl=!1,ou=sh=0,$l=null}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ut.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function jn(){if(Ut===null){var r=ut.alternate;r=r!==null?r.memoizedState:null}else r=Ut.next;var i=Cn===null?ut.memoizedState:Cn.next;if(i!==null)Cn=i,Ut=r;else{if(r===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ut=r,r={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Cn===null?ut.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(r){var i=ou;return ou+=1,$l===null&&($l=[]),r=hv($l,r,i),i=ut,(Cn===null?i.memoizedState:Cn.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?r_:qp),r}function ah(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return lu(r);if(r.$$typeof===N)return er(r)}throw Error(s(438,String(r)))}function Rp(r){var i=null,c=ut.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var h=ut.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=ih(),ut.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),h=0;h<r;h++)c[h]=ne;return i.index++,c}function Pi(r,i){return typeof i=="function"?i(r):i}function oh(r){var i=jn();return Lp(i,Ut,r)}function Lp(r,i,c){var h=r.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=c;var v=r.baseQueue,w=h.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}i.baseQueue=v=w,h.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{i=v.next;var H=O=null,se=null,ye=i,ke=!1;do{var De=ye.lane&-536870913;if(De!==ye.lane?(Tt&De)===De:(Bi&De)===De){var we=ye.revertLane;if(we===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),De===Ml&&(ke=!0);else if((Bi&we)===we){ye=ye.next,we===Ml&&(ke=!0);continue}else De={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(H=se=De,O=w):se=se.next=De,ut.lanes|=we,Da|=we;De=ye.action,Bo&&c(w,De),w=ye.hasEagerState?ye.eagerState:c(w,De)}else we={lane:De,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(H=se=we,O=w):se=se.next=we,ut.lanes|=De,Da|=De;ye=ye.next}while(ye!==null&&ye!==i);if(se===null?O=w:se.next=H,!qn(w,r.memoizedState)&&(Rn=!0,ke&&(c=Cl,c!==null)))throw c;r.memoizedState=w,r.baseState=O,r.baseQueue=se,h.lastRenderedState=w}return v===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Bp(r){var i=jn(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var h=c.dispatch,v=c.pending,w=i.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);qn(w,i.memoizedState)||(Rn=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,h]}function Sv(r,i,c){var h=ut,v=jn(),w=yt;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=i();var O=!qn((Ut||v).memoizedState,c);if(O&&(v.memoizedState=c,Rn=!0),v=v.queue,Ip(kv.bind(null,h,v,r),[r]),v.getSnapshot!==i||O||Cn!==null&&Cn.memoizedState.tag&1){if(h.flags|=2048,Il(9,{destroy:void 0},Tv.bind(null,h,v,c,i),null),Yt===null)throw Error(s(349));w||(Bi&127)!==0||Ev(h,i,c)}return c}function Ev(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=ut.updateQueue,i===null?(i=ih(),ut.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Tv(r,i,c,h){i.value=c,i.getSnapshot=h,Av(i)&&jv(r)}function kv(r,i,c){return c(function(){Av(i)&&jv(r)})}function Av(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!qn(r,c)}catch{return!0}}function jv(r){var i=Ts(r,2);i!==null&&Ur(i,r,2)}function Pp(r){var i=wr();if(typeof r=="function"){var c=r;if(r=c(),Bo){bn(!0);try{c()}finally{bn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:r},i}function Nv(r,i,c,h){return r.baseState=c,Lp(r,Ut,typeof h=="function"?h:Pi)}function lj(r,i,c,h,v){if(uh(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};W.T!==null?c(!0):w.isTransition=!1,h(w),c=i.pending,c===null?(w.next=i.pending=w,Ov(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Ov(r,i){var c=i.action,h=i.payload,v=r.state;if(i.isTransition){var w=W.T,O={};W.T=O;try{var H=c(v,h),se=W.S;se!==null&&se(O,H),Dv(r,i,H)}catch(ye){$p(r,i,ye)}finally{w!==null&&O.types!==null&&(w.types=O.types),W.T=w}}else try{w=c(v,h),Dv(r,i,w)}catch(ye){$p(r,i,ye)}}function Dv(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Mv(r,i,h)},function(h){return $p(r,i,h)}):Mv(r,i,c)}function Mv(r,i,c){i.status="fulfilled",i.value=c,Cv(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,Ov(r,c)))}function $p(r,i,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=c,Cv(i),i=i.next;while(i!==h)}r.action=null}function Cv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Rv(r,i){return i}function Lv(r,i){if(yt){var c=Yt.formState;if(c!==null){e:{var h=ut;if(yt){if(Ot){t:{for(var v=Ot,w=Br;v.nodeType!==8;){if(!w){v=null;break t}if(v=js(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Ot=js(v.nextSibling),h=v.data==="F!";break e}}bi(h)}h=!1}h&&(i=c[0])}}return c=wr(),c.memoizedState=c.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rv,lastRenderedState:i},c.queue=h,c=e_.bind(null,ut,h),h.dispatch=c,h=Pp(!1),w=Fp.bind(null,ut,!1,h.queue),h=wr(),v={state:i,dispatch:null,action:r,pending:null},h.queue=v,c=lj.bind(null,ut,v,w,c),v.dispatch=c,h.memoizedState=r,[i,c,!1]}function Bv(r){var i=jn();return Pv(i,Ut,r)}function Pv(r,i,c){if(i=Lp(r,i,Rv)[0],r=oh(Pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=lu(i)}catch(O){throw O===Rl?Xd:O}else h=i;i=jn();var v=i.queue,w=v.dispatch;return c!==i.memoizedState&&(ut.flags|=2048,Il(9,{destroy:void 0},cj.bind(null,v,c),null)),[h,w,r]}function cj(r,i){r.action=i}function $v(r){var i=jn(),c=Ut;if(c!==null)return Pv(i,c,r);jn(),i=i.memoizedState,c=jn();var h=c.queue.dispatch;return c.memoizedState=r,[i,h,!1]}function Il(r,i,c,h){return r={tag:r,create:c,deps:h,inst:i,next:null},i=ut.updateQueue,i===null&&(i=ih(),ut.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,i.lastEffect=r),r}function Iv(){return jn().memoizedState}function lh(r,i,c,h){var v=wr();ut.flags|=r,v.memoizedState=Il(1|i,{destroy:void 0},c,h===void 0?null:h)}function ch(r,i,c,h){var v=jn();h=h===void 0?null:h;var w=v.memoizedState.inst;Ut!==null&&h!==null&&Np(h,Ut.memoizedState.deps)?v.memoizedState=Il(i,w,c,h):(ut.flags|=r,v.memoizedState=Il(1|i,w,c,h))}function zv(r,i){lh(8390656,8,r,i)}function Ip(r,i){ch(2048,8,r,i)}function uj(r){ut.flags|=4;var i=ut.updateQueue;if(i===null)i=ih(),ut.updateQueue=i,i.events=[r];else{var c=i.events;c===null?i.events=[r]:c.push(r)}}function Uv(r){var i=jn().memoizedState;return uj({ref:i,nextImpl:r}),function(){if((Rt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Hv(r,i){return ch(4,2,r,i)}function Gv(r,i){return ch(4,4,r,i)}function Fv(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function qv(r,i,c){c=c!=null?c.concat([r]):null,ch(4,4,Fv.bind(null,i,r),c)}function zp(){}function Yv(r,i){var c=jn();i=i===void 0?null:i;var h=c.memoizedState;return i!==null&&Np(i,h[1])?h[0]:(c.memoizedState=[r,i],r)}function Zv(r,i){var c=jn();i=i===void 0?null:i;var h=c.memoizedState;if(i!==null&&Np(i,h[1]))return h[0];if(h=r(),Bo){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,i],h}function Up(r,i,c){return c===void 0||(Bi&1073741824)!==0&&(Tt&261930)===0?r.memoizedState=i:(r.memoizedState=c,r=V_(),ut.lanes|=r,Da|=r,c)}function Vv(r,i,c,h){return qn(c,i)?c:Bl.current!==null?(r=Up(r,c,h),qn(r,i)||(Rn=!0),r):(Bi&42)===0||(Bi&1073741824)!==0&&(Tt&261930)===0?(Rn=!0,r.memoizedState=c):(r=V_(),ut.lanes|=r,Da|=r,i)}function Kv(r,i,c,h,v){var w=ie.p;ie.p=w!==0&&8>w?w:8;var O=W.T,H={};W.T=H,Fp(r,!1,i,c);try{var se=v(),ye=W.S;if(ye!==null&&ye(H,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var ke=ij(se,h);cu(r,i,ke,rs(r))}else cu(r,i,h,rs(r))}catch(De){cu(r,i,{then:function(){},status:"rejected",reason:De},rs())}finally{ie.p=w,O!==null&&H.types!==null&&(O.types=H.types),W.T=O}}function dj(){}function Hp(r,i,c,h){if(r.tag!==5)throw Error(s(476));var v=Wv(r).queue;Kv(r,v,i,te,c===null?dj:function(){return Xv(r),c(h)})}function Wv(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:te},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Xv(r){var i=Wv(r);i.next===null&&(i=r.alternate.memoizedState),cu(r,i.next.queue,{},rs())}function Gp(){return er(ku)}function Jv(){return jn().memoizedState}function Qv(){return jn().memoizedState}function hj(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=rs();r=Ta(c);var h=ka(i,r,c);h!==null&&(Ur(h,i,c),su(h,i,c)),i={cache:yp()},r.payload=i;return}i=i.return}}function fj(r,i,c){var h=rs();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},uh(r)?t_(i,c):(c=Vc(r,i,c,h),c!==null&&(Ur(c,r,h),n_(c,i,h)))}function e_(r,i,c){var h=rs();cu(r,i,c,h)}function cu(r,i,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(uh(r))t_(i,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var O=i.lastRenderedState,H=w(O,c);if(v.hasEagerState=!0,v.eagerState=H,qn(H,O))return pi(r,i,v,0),Yt===null&&ko(),!1}catch{}finally{}if(c=Vc(r,i,v,h),c!==null)return Ur(c,r,h),n_(c,i,h),!0}return!1}function Fp(r,i,c,h){if(h={lane:2,revertLane:w0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},uh(r)){if(i)throw Error(s(479))}else i=Vc(r,c,h,2),i!==null&&Ur(i,r,2)}function uh(r){var i=r.alternate;return r===ut||i!==null&&i===ut}function t_(r,i){Pl=rh=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function n_(r,i,c){if((c&4194048)!==0){var h=i.lanes;h&=r.pendingLanes,c|=h,i.lanes=c,to(r,c)}}var uu={readContext:er,use:ah,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};uu.useEffectEvent=_n;var r_={readContext:er,use:ah,useCallback:function(r,i){return wr().memoizedState=[r,i===void 0?null:i],r},useContext:er,useEffect:zv,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,lh(4194308,4,Fv.bind(null,i,r),c)},useLayoutEffect:function(r,i){return lh(4194308,4,r,i)},useInsertionEffect:function(r,i){lh(4,2,r,i)},useMemo:function(r,i){var c=wr();i=i===void 0?null:i;var h=r();if(Bo){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,i],h},useReducer:function(r,i,c){var h=wr();if(c!==void 0){var v=c(i);if(Bo){bn(!0);try{c(i)}finally{bn(!1)}}}else v=i;return h.memoizedState=h.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},h.queue=r,r=r.dispatch=fj.bind(null,ut,r),[h.memoizedState,r]},useRef:function(r){var i=wr();return r={current:r},i.memoizedState=r},useState:function(r){r=Pp(r);var i=r.queue,c=e_.bind(null,ut,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:zp,useDeferredValue:function(r,i){var c=wr();return Up(c,r,i)},useTransition:function(){var r=Pp(!1);return r=Kv.bind(null,ut,r.queue,!0,!1),wr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var h=ut,v=wr();if(yt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Yt===null)throw Error(s(349));(Tt&127)!==0||Ev(h,i,c)}v.memoizedState=c;var w={value:c,getSnapshot:i};return v.queue=w,zv(kv.bind(null,h,w,r),[r]),h.flags|=2048,Il(9,{destroy:void 0},Tv.bind(null,h,w,c,i),null),c},useId:function(){var r=wr(),i=Yt.identifierPrefix;if(yt){var c=Ge,h=Oe;c=(h&~(1<<32-hn(h)-1)).toString(32)+c,i="_"+i+"R_"+c,c=sh++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=aj++,i="_"+i+"r_"+c.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Gp,useFormState:Lv,useActionState:Lv,useOptimistic:function(r){var i=wr();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Fp.bind(null,ut,!0,c),c.dispatch=i,[r,i]},useMemoCache:Rp,useCacheRefresh:function(){return wr().memoizedState=hj.bind(null,ut)},useEffectEvent:function(r){var i=wr(),c={impl:r};return i.memoizedState=c,function(){if((Rt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},qp={readContext:er,use:ah,useCallback:Yv,useContext:er,useEffect:Ip,useImperativeHandle:qv,useInsertionEffect:Hv,useLayoutEffect:Gv,useMemo:Zv,useReducer:oh,useRef:Iv,useState:function(){return oh(Pi)},useDebugValue:zp,useDeferredValue:function(r,i){var c=jn();return Vv(c,Ut.memoizedState,r,i)},useTransition:function(){var r=oh(Pi)[0],i=jn().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:Sv,useId:Jv,useHostTransitionStatus:Gp,useFormState:Bv,useActionState:Bv,useOptimistic:function(r,i){var c=jn();return Nv(c,Ut,r,i)},useMemoCache:Rp,useCacheRefresh:Qv};qp.useEffectEvent=Uv;var s_={readContext:er,use:ah,useCallback:Yv,useContext:er,useEffect:Ip,useImperativeHandle:qv,useInsertionEffect:Hv,useLayoutEffect:Gv,useMemo:Zv,useReducer:Bp,useRef:Iv,useState:function(){return Bp(Pi)},useDebugValue:zp,useDeferredValue:function(r,i){var c=jn();return Ut===null?Up(c,r,i):Vv(c,Ut.memoizedState,r,i)},useTransition:function(){var r=Bp(Pi)[0],i=jn().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:Sv,useId:Jv,useHostTransitionStatus:Gp,useFormState:$v,useActionState:$v,useOptimistic:function(r,i){var c=jn();return Ut!==null?Nv(c,Ut,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Rp,useCacheRefresh:Qv};s_.useEffectEvent=Uv;function Yp(r,i,c,h){i=r.memoizedState,c=c(h,i),c=c==null?i:_({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Zp={enqueueSetState:function(r,i,c){r=r._reactInternals;var h=rs(),v=Ta(h);v.payload=i,c!=null&&(v.callback=c),i=ka(r,v,h),i!==null&&(Ur(i,r,h),su(i,r,h))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var h=rs(),v=Ta(h);v.tag=1,v.payload=i,c!=null&&(v.callback=c),i=ka(r,v,h),i!==null&&(Ur(i,r,h),su(i,r,h))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=rs(),h=Ta(c);h.tag=2,i!=null&&(h.callback=i),i=ka(r,h,c),i!==null&&(Ur(i,r,c),su(i,r,c))}};function i_(r,i,c,h,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,O):i.prototype&&i.prototype.isPureReactComponent?!ya(c,h)||!ya(v,w):!0}function a_(r,i,c,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,h),i.state!==r&&Zp.enqueueReplaceState(i,i.state,null)}function Po(r,i){var c=i;if("ref"in i){c={};for(var h in i)h!=="ref"&&(c[h]=i[h])}if(r=r.defaultProps){c===i&&(c=_({},c));for(var v in r)c[v]===void 0&&(c[v]=r[v])}return c}function o_(r){To(r)}function l_(r){console.error(r)}function c_(r){To(r)}function dh(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function u_(r,i,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Vp(r,i,c){return c=Ta(c),c.tag=3,c.payload={element:null},c.callback=function(){dh(r,i)},c}function d_(r){return r=Ta(r),r.tag=3,r}function h_(r,i,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;r.payload=function(){return v(w)},r.callback=function(){u_(i,c,h)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){u_(i,c,h),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var H=h.stack;this.componentDidCatch(h.value,{componentStack:H!==null?H:""})})}function mj(r,i,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=c.alternate,i!==null&&Dl(i,c,v,!0),c=Qr.current,c!==null){switch(c.tag){case 31:case 13:return As===null?Sh():c.alternate===null&&xn===0&&(xn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Jd?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([h]):i.add(h),v0(r,h,v)),!1;case 22:return c.flags|=65536,h===Jd?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([h]):c.add(h)),v0(r,h,v)),!1}throw Error(s(435,c.tag))}return v0(r,h,v),Sh(),!1}if(yt)return i=Qr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,h!==Ol&&(r=Error(s(422),{cause:h}),No(d(r,c)))):(h!==Ol&&(i=Error(s(423),{cause:h}),No(d(i,c))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,h=d(h,c),v=Vp(r.stateNode,h,v),Ep(r,v),xn!==4&&(xn=2)),!1;var w=Error(s(520),{cause:h});if(w=d(w,c),yu===null?yu=[w]:yu.push(w),xn!==4&&(xn=2),i===null)return!0;h=d(h,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=v&-v,c.lanes|=r,r=Vp(c.stateNode,h,r),Ep(c,r),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=d_(v),h_(v,r,c,h),Ep(c,v),!1}c=c.return}while(c!==null);return!1}var Kp=Error(s(461)),Rn=!1;function tr(r,i,c,h){i.child=r===null?gv(i,null,c,h):Lo(i,r.child,c,h)}function f_(r,i,c,h,v){c=c.render;var w=i.ref;if("ref"in h){var O={};for(var H in h)H!=="ref"&&(O[H]=h[H])}else O=h;return Do(i),h=Op(r,i,c,O,w,v),H=Dp(),r!==null&&!Rn?(Mp(r,i,v),$i(r,i,v)):(yt&&H&&Un(i),i.flags|=1,tr(r,i,h,v),i.child)}function m_(r,i,c,h,v){if(r===null){var w=c.type;return typeof w=="function"&&!jl(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,p_(r,i,w,h,v)):(r=jo(c.type,null,h,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!r0(r,v)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:ya,c(O,h)&&r.ref===i.ref)return $i(r,i,v)}return i.flags|=1,r=ks(w,h),r.ref=i.ref,r.return=i,i.child=r}function p_(r,i,c,h,v){if(r!==null){var w=r.memoizedProps;if(ya(w,h)&&r.ref===i.ref)if(Rn=!1,i.pendingProps=h=w,r0(r,v))(r.flags&131072)!==0&&(Rn=!0);else return i.lanes=r.lanes,$i(r,i,v)}return Wp(r,i,c,h,v)}function g_(r,i,c,h){var v=h.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=i.child=r.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,i.child=null;return b_(r,i,w,c,h)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wd(i,w!==null?w.cachePool:null),w!==null?vv(i,w):kp(),_v(i);else return h=i.lanes=536870912,b_(r,i,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Wd(i,w.cachePool),vv(i,w),ja(),i.memoizedState=null):(r!==null&&Wd(i,null),kp(),ja());return tr(r,i,v,c),i.child}function du(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function b_(r,i,c,h,v){var w=_p();return w=w===null?null:{parent:Mn._currentValue,pool:w},i.memoizedState={baseLanes:c,cachePool:w},r!==null&&Wd(i,null),kp(),_v(i),r!==null&&Dl(r,i,h,!0),i.childLanes=v,null}function hh(r,i){return i=mh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function y_(r,i,c){return Lo(i,r.child,null,c),r=hh(i,i.pendingProps),r.flags|=2,es(i),i.memoizedState=null,r}function pj(r,i,c){var h=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(yt){if(h.mode==="hidden")return r=hh(i,h),i.lanes=536870912,du(null,r);if(jp(i),(r=Ot)?(r=Ox(r,Br),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:xe!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Wc(r),c.return=i,i.child=c,Nt=i,Ot=null)):r=null,r===null)throw bi(i);return i.lanes=536870912,null}return hh(i,h)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(jp(i),v)if(i.flags&256)i.flags&=-257,i=y_(r,i,c);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Rn||Dl(r,i,c,!1),v=(c&r.childLanes)!==0,Rn||v){if(h=Yt,h!==null&&(O=no(h,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ts(r,O),Ur(h,r,O),Kp;Sh(),i=y_(r,i,c)}else r=w.treeContext,Ot=js(O.nextSibling),Nt=i,yt=!0,gi=null,Br=!1,r!==null&&xr(i,r),i=hh(i,h),i.flags|=4096;return i}return r=ks(r.child,{mode:h.mode,children:h.children}),r.ref=i.ref,i.child=r,r.return=i,r}function fh(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Wp(r,i,c,h,v){return Do(i),c=Op(r,i,c,h,void 0,v),h=Dp(),r!==null&&!Rn?(Mp(r,i,v),$i(r,i,v)):(yt&&h&&Un(i),i.flags|=1,tr(r,i,c,v),i.child)}function v_(r,i,c,h,v,w){return Do(i),i.updateQueue=null,c=wv(i,h,c,v),xv(r),h=Dp(),r!==null&&!Rn?(Mp(r,i,w),$i(r,i,w)):(yt&&h&&Un(i),i.flags|=1,tr(r,i,c,w),i.child)}function __(r,i,c,h,v){if(Do(i),i.stateNode===null){var w=Mi,O=c.contextType;typeof O=="object"&&O!==null&&(w=er(O)),w=new c(h,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Zp,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=h,w.state=i.memoizedState,w.refs={},wp(i),O=c.contextType,w.context=typeof O=="object"&&O!==null?er(O):Mi,w.state=i.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Yp(i,c,O,h),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Zp.enqueueReplaceState(w,w.state,null),au(i,h,w,v),iu(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(r===null){w=i.stateNode;var H=i.memoizedProps,se=Po(c,H);w.props=se;var ye=w.context,ke=c.contextType;O=Mi,typeof ke=="object"&&ke!==null&&(O=er(ke));var De=c.getDerivedStateFromProps;ke=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function",H=i.pendingProps!==H,ke||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H||ye!==O)&&a_(i,w,h,O),Ea=!1;var we=i.memoizedState;w.state=we,au(i,h,w,v),iu(),ye=i.memoizedState,H||we!==ye||Ea?(typeof De=="function"&&(Yp(i,c,De,h),ye=i.memoizedState),(se=Ea||i_(i,c,se,h,we,ye,O))?(ke||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=ye),w.props=h,w.state=ye,w.context=O,h=se):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,Sp(r,i),O=i.memoizedProps,ke=Po(c,O),w.props=ke,De=i.pendingProps,we=w.context,ye=c.contextType,se=Mi,typeof ye=="object"&&ye!==null&&(se=er(ye)),H=c.getDerivedStateFromProps,(ye=typeof H=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==De||we!==se)&&a_(i,w,h,se),Ea=!1,we=i.memoizedState,w.state=we,au(i,h,w,v),iu();var Se=i.memoizedState;O!==De||we!==Se||Ea||r!==null&&r.dependencies!==null&&Vd(r.dependencies)?(typeof H=="function"&&(Yp(i,c,H,h),Se=i.memoizedState),(ke=Ea||i_(i,c,ke,h,we,Se,se)||r!==null&&r.dependencies!==null&&Vd(r.dependencies))?(ye||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Se,se),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Se,se)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Se),w.props=h,w.state=Se,w.context=se,h=ke):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),h=!1)}return w=h,fh(r,i),h=(i.flags&128)!==0,w||h?(w=i.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&h?(i.child=Lo(i,r.child,null,v),i.child=Lo(i,null,c,v)):tr(r,i,c,v),i.memoizedState=w.state,r=i.child):r=$i(r,i,v),r}function x_(r,i,c,h){return Ri(),i.flags|=256,tr(r,i,c,h),i.child}var Xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jp(r){return{baseLanes:r,cachePool:uv()}}function Qp(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=ns),r}function w_(r,i,c){var h=i.pendingProps,v=!1,w=(i.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),O&&(v=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,r===null){if(yt){if(v?Aa(i):ja(),(r=Ot)?(r=Ox(r,Br),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:xe!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Wc(r),c.return=i,i.child=c,Nt=i,Ot=null)):r=null,r===null)throw bi(i);return L0(r)?i.lanes=32:i.lanes=536870912,null}var H=h.children;return h=h.fallback,v?(ja(),v=i.mode,H=mh({mode:"hidden",children:H},v),h=Ci(h,v,c,null),H.return=i,h.return=i,H.sibling=h,i.child=H,h=i.child,h.memoizedState=Jp(c),h.childLanes=Qp(r,O,c),i.memoizedState=Xp,du(null,h)):(Aa(i),e0(i,H))}var se=r.memoizedState;if(se!==null&&(H=se.dehydrated,H!==null)){if(w)i.flags&256?(Aa(i),i.flags&=-257,i=t0(r,i,c)):i.memoizedState!==null?(ja(),i.child=r.child,i.flags|=128,i=null):(ja(),H=h.fallback,v=i.mode,h=mh({mode:"visible",children:h.children},v),H=Ci(H,v,c,null),H.flags|=2,h.return=i,H.return=i,h.sibling=H,i.child=h,Lo(i,r.child,null,c),h=i.child,h.memoizedState=Jp(c),h.childLanes=Qp(r,O,c),i.memoizedState=Xp,i=du(null,h));else if(Aa(i),L0(H)){if(O=H.nextSibling&&H.nextSibling.dataset,O)var ye=O.dgst;O=ye,h=Error(s(419)),h.stack="",h.digest=O,No({value:h,source:null,stack:null}),i=t0(r,i,c)}else if(Rn||Dl(r,i,c,!1),O=(c&r.childLanes)!==0,Rn||O){if(O=Yt,O!==null&&(h=no(O,c),h!==0&&h!==se.retryLane))throw se.retryLane=h,Ts(r,h),Ur(O,r,h),Kp;R0(H)||Sh(),i=t0(r,i,c)}else R0(H)?(i.flags|=192,i.child=r.child,i=null):(r=se.treeContext,Ot=js(H.nextSibling),Nt=i,yt=!0,gi=null,Br=!1,r!==null&&xr(i,r),i=e0(i,h.children),i.flags|=4096);return i}return v?(ja(),H=h.fallback,v=i.mode,se=r.child,ye=se.sibling,h=ks(se,{mode:"hidden",children:h.children}),h.subtreeFlags=se.subtreeFlags&65011712,ye!==null?H=ks(ye,H):(H=Ci(H,v,c,null),H.flags|=2),H.return=i,h.return=i,h.sibling=H,i.child=h,du(null,h),h=i.child,H=r.child.memoizedState,H===null?H=Jp(c):(v=H.cachePool,v!==null?(se=Mn._currentValue,v=v.parent!==se?{parent:se,pool:se}:v):v=uv(),H={baseLanes:H.baseLanes|c,cachePool:v}),h.memoizedState=H,h.childLanes=Qp(r,O,c),i.memoizedState=Xp,du(r.child,h)):(Aa(i),c=r.child,r=c.sibling,c=ks(c,{mode:"visible",children:h.children}),c.return=i,c.sibling=null,r!==null&&(O=i.deletions,O===null?(i.deletions=[r],i.flags|=16):O.push(r)),i.child=c,i.memoizedState=null,c)}function e0(r,i){return i=mh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function mh(r,i){return r=hr(22,r,null,i),r.lanes=0,r}function t0(r,i,c){return Lo(i,r.child,null,c),r=e0(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function S_(r,i,c){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),gp(r.return,i,c)}function n0(r,i,c,h,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=c,O.tailMode=v,O.treeForkCount=w)}function E_(r,i,c){var h=i.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var O=An.current,H=(O&2)!==0;if(H?(O=O&1|2,i.flags|=128):O&=1,V(An,O),tr(r,i,h,c),h=yt?$:0,!H&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&S_(r,c,i);else if(r.tag===19)S_(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(c=i.child,v=null;c!==null;)r=c.alternate,r!==null&&nh(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=i.child,i.child=null):(v=c.sibling,c.sibling=null),n0(i,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&nh(r)===null){i.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}n0(i,!0,c,null,w,h);break;case"together":n0(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function $i(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),Da|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(Dl(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,c=ks(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=ks(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function r0(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Vd(r)))}function gj(r,i,c){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),Sa(i,Mn,r.memoizedState.cache),Ri();break;case 27:case 5:_e(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:Sa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,jp(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(Aa(i),i.flags|=128,null):(c&i.child.childLanes)!==0?w_(r,i,c):(Aa(i),r=$i(r,i,c),r!==null?r.sibling:null);Aa(i);break;case 19:var v=(r.flags&128)!==0;if(h=(c&i.childLanes)!==0,h||(Dl(r,i,c,!1),h=(c&i.childLanes)!==0),v){if(h)return E_(r,i,c);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),V(An,An.current),h)break;return null;case 22:return i.lanes=0,g_(r,i,c,i.pendingProps);case 24:Sa(i,Mn,r.memoizedState.cache)}return $i(r,i,c)}function T_(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)Rn=!0;else{if(!r0(r,c)&&(i.flags&128)===0)return Rn=!1,gj(r,i,c);Rn=(r.flags&131072)!==0}else Rn=!1,yt&&(i.flags&1048576)!==0&&ft(i,$,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(r=Co(i.elementType),i.type=r,typeof r=="function")jl(r)?(h=Po(r,h),i.tag=1,i=__(null,i,r,h,c)):(i.tag=0,i=Wp(null,i,r,h,c));else{if(r!=null){var v=r.$$typeof;if(v===D){i.tag=11,i=f_(null,i,r,h,c);break e}else if(v===F){i.tag=14,i=m_(null,i,r,h,c);break e}}throw i=Q(r)||r,Error(s(306,i,""))}}return i;case 0:return Wp(r,i,i.type,i.pendingProps,c);case 1:return h=i.type,v=Po(h,i.pendingProps),__(r,i,h,v,c);case 3:e:{if(ce(i,i.stateNode.containerInfo),r===null)throw Error(s(387));h=i.pendingProps;var w=i.memoizedState;v=w.element,Sp(r,i),au(i,h,null,c);var O=i.memoizedState;if(h=O.cache,Sa(i,Mn,h),h!==w.cache&&bp(i,[Mn],c,!0),iu(),h=O.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=x_(r,i,h,c);break e}else if(h!==v){v=d(Error(s(424)),i),No(v),i=x_(r,i,h,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=js(r.firstChild),Nt=i,yt=!0,gi=null,Br=!0,c=gv(i,null,h,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ri(),h===v){i=$i(r,i,c);break e}tr(r,i,h,c)}i=i.child}return i;case 26:return fh(r,i),r===null?(c=Bx(i.type,null,i.pendingProps,null))?i.memoizedState=c:yt||(c=i.type,r=i.pendingProps,h=Oh(G.current).createElement(c),h[sn]=i,h[kn]=r,nr(h,c,r),St(h),i.stateNode=h):i.memoizedState=Bx(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return _e(i),r===null&&yt&&(h=i.stateNode=Cx(i.type,i.pendingProps,G.current),Nt=i,Br=!0,v=Ot,Ba(i.type)?(B0=v,Ot=js(h.firstChild)):Ot=v),tr(r,i,i.pendingProps.children,c),fh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&yt&&((v=h=Ot)&&(h=Yj(h,i.type,i.pendingProps,Br),h!==null?(i.stateNode=h,Nt=i,Ot=js(h.firstChild),Br=!1,v=!0):v=!1),v||bi(i)),_e(i),v=i.type,w=i.pendingProps,O=r!==null?r.memoizedProps:null,h=w.children,D0(v,w)?h=null:O!==null&&D0(v,O)&&(i.flags|=32),i.memoizedState!==null&&(v=Op(r,i,oj,null,null,c),ku._currentValue=v),fh(r,i),tr(r,i,h,c),i.child;case 6:return r===null&&yt&&((r=c=Ot)&&(c=Zj(c,i.pendingProps,Br),c!==null?(i.stateNode=c,Nt=i,Ot=null,r=!0):r=!1),r||bi(i)),null;case 13:return w_(r,i,c);case 4:return ce(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Lo(i,null,h,c):tr(r,i,h,c),i.child;case 11:return f_(r,i,i.type,i.pendingProps,c);case 7:return tr(r,i,i.pendingProps,c),i.child;case 8:return tr(r,i,i.pendingProps.children,c),i.child;case 12:return tr(r,i,i.pendingProps.children,c),i.child;case 10:return h=i.pendingProps,Sa(i,i.type,h.value),tr(r,i,h.children,c),i.child;case 9:return v=i.type._context,h=i.pendingProps.children,Do(i),v=er(v),h=h(v),i.flags|=1,tr(r,i,h,c),i.child;case 14:return m_(r,i,i.type,i.pendingProps,c);case 15:return p_(r,i,i.type,i.pendingProps,c);case 19:return E_(r,i,c);case 31:return pj(r,i,c);case 22:return g_(r,i,c,i.pendingProps);case 24:return Do(i),h=er(Mn),r===null?(v=_p(),v===null&&(v=Yt,w=yp(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),i.memoizedState={parent:h,cache:v},wp(i),Sa(i,Mn,v)):((r.lanes&c)!==0&&(Sp(r,i),au(i,null,null,c),iu()),v=r.memoizedState,w=i.memoizedState,v.parent!==h?(v={parent:h,cache:h},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Sa(i,Mn,h)):(h=w.cache,Sa(i,Mn,h),h!==v.cache&&bp(i,[Mn],c,!0))),tr(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ii(r){r.flags|=4}function s0(r,i,c,h,v){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(J_())r.flags|=8192;else throw Ro=Jd,xp}else r.flags&=-16777217}function k_(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ux(i))if(J_())r.flags|=8192;else throw Ro=Jd,xp}function ph(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ja():536870912,r.lanes|=i,Gl|=i)}function hu(r,i){if(!yt)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function tn(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(i)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=c,i}function bj(r,i,c){var h=i.pendingProps;switch(vn(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(i),null;case 1:return tn(i),null;case 3:return c=i.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Li(Mn),le(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Zs(i)?Ii(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qc())),tn(i),null;case 26:var v=i.type,w=i.memoizedState;return r===null?(Ii(i),w!==null?(tn(i),k_(i,w)):(tn(i),s0(i,v,null,h,c))):w?w!==r.memoizedState?(Ii(i),tn(i),k_(i,w)):(tn(i),i.flags&=-16777217):(r=r.memoizedProps,r!==h&&Ii(i),tn(i),s0(i,v,r,h,c)),null;case 27:if(Ae(i),c=G.current,v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&Ii(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return tn(i),null}r=J.current,Zs(i)?Jc(i):(r=Cx(v,h,c),i.stateNode=r,Ii(i))}return tn(i),null;case 5:if(Ae(i),v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&Ii(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return tn(i),null}if(w=J.current,Zs(i))Jc(i);else{var O=Oh(G.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?O.createElement(v,{is:h.is}):O.createElement(v)}}w[sn]=i,w[kn]=h;e:for(O=i.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===i)break e;for(;O.sibling===null;){if(O.return===null||O.return===i)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}i.stateNode=w;e:switch(nr(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ii(i)}}return tn(i),s0(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,c),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==h&&Ii(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(r=G.current,Zs(i)){if(r=i.stateNode,c=i.memoizedProps,h=null,v=Nt,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}r[sn]=i,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||wx(r.nodeValue,c)),r||bi(i,!0)}else r=Oh(r).createTextNode(h),r[sn]=i,i.stateNode=r}return tn(i),null;case 31:if(c=i.memoizedState,r===null||r.memoizedState!==null){if(h=Zs(i),c!==null){if(r===null){if(!h)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[sn]=i}else Ri(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tn(i),r=!1}else c=Qc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return i.flags&256?(es(i),i):(es(i),null);if((i.flags&128)!==0)throw Error(s(558))}return tn(i),null;case 13:if(h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Zs(i),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[sn]=i}else Ri(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tn(i),v=!1}else v=Qc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(es(i),i):(es(i),null)}return es(i),(i.flags&128)!==0?(i.lanes=c,i):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=i.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==r&&c&&(i.child.flags|=8192),ph(i,i.updateQueue),tn(i),null);case 4:return le(),r===null&&k0(i.stateNode.containerInfo),tn(i),null;case 10:return Li(i.type),tn(i),null;case 19:if(B(An),h=i.memoizedState,h===null)return tn(i),null;if(v=(i.flags&128)!==0,w=h.rendering,w===null)if(v)hu(h,!1);else{if(xn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=nh(r),w!==null){for(i.flags|=128,hu(h,!1),r=w.updateQueue,i.updateQueue=r,ph(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)Kc(c,r),c=c.sibling;return V(An,An.current&1|2),yt&&Xe(i,h.treeForkCount),i.child}r=r.sibling}h.tail!==null&&Be()>_h&&(i.flags|=128,v=!0,hu(h,!1),i.lanes=4194304)}else{if(!v)if(r=nh(w),r!==null){if(i.flags|=128,v=!0,r=r.updateQueue,i.updateQueue=r,ph(i,r),hu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!yt)return tn(i),null}else 2*Be()-h.renderingStartTime>_h&&c!==536870912&&(i.flags|=128,v=!0,hu(h,!1),i.lanes=4194304);h.isBackwards?(w.sibling=i.child,i.child=w):(r=h.last,r!==null?r.sibling=w:i.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Be(),r.sibling=null,c=An.current,V(An,v?c&1|2:c&1),yt&&Xe(i,h.treeForkCount),r):(tn(i),null);case 22:case 23:return es(i),Ap(),h=i.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(c&536870912)!==0&&(i.flags&128)===0&&(tn(i),i.subtreeFlags&6&&(i.flags|=8192)):tn(i),c=i.updateQueue,c!==null&&ph(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048),r!==null&&B(Mo),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Li(Mn),tn(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function yj(r,i){switch(vn(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Li(Mn),le(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ae(i),null;case 31:if(i.memoizedState!==null){if(es(i),i.alternate===null)throw Error(s(340));Ri()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(es(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ri()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return B(An),null;case 4:return le(),null;case 10:return Li(i.type),null;case 22:case 23:return es(i),Ap(),r!==null&&B(Mo),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Li(Mn),null;case 25:return null;default:return null}}function A_(r,i){switch(vn(i),i.tag){case 3:Li(Mn),le();break;case 26:case 27:case 5:Ae(i);break;case 4:le();break;case 31:i.memoizedState!==null&&es(i);break;case 13:es(i);break;case 19:B(An);break;case 10:Li(i.type);break;case 22:case 23:es(i),Ap(),r!==null&&B(Mo);break;case 24:Li(Mn)}}function fu(r,i){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&r)===r){h=void 0;var w=c.create,O=c.inst;h=w(),O.destroy=h}c=c.next}while(c!==v)}}catch(H){It(i,i.return,H)}}function Na(r,i,c){try{var h=i.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&r)===r){var O=h.inst,H=O.destroy;if(H!==void 0){O.destroy=void 0,v=i;var se=c,ye=H;try{ye()}catch(ke){It(v,se,ke)}}}h=h.next}while(h!==w)}}catch(ke){It(i,i.return,ke)}}function j_(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{yv(i,c)}catch(h){It(r,r.return,h)}}}function N_(r,i,c){c.props=Po(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){It(r,i,h)}}function mu(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(v){It(r,i,v)}}function vi(r,i){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){It(r,i,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){It(r,i,v)}else c.current=null}function O_(r){var i=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){It(r,r.return,v)}}function i0(r,i,c){try{var h=r.stateNode;zj(h,r.type,c,i),h[kn]=i}catch(v){It(r,r.return,v)}}function D_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ba(r.type)||r.tag===4}function a0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||D_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ba(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function o0(r,i,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Mr));else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(o0(r,i,c),r=r.sibling;r!==null;)o0(r,i,c),r=r.sibling}function gh(r,i,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(gh(r,i,c),r=r.sibling;r!==null;)gh(r,i,c),r=r.sibling}function M_(r){var i=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);nr(i,h,c),i[sn]=r,i[kn]=c}catch(w){It(r,r.return,w)}}var zi=!1,Ln=!1,l0=!1,C_=typeof WeakSet=="function"?WeakSet:Set,Zn=null;function vj(r,i){if(r=r.containerInfo,N0=Ph,r=xo(r),di(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,H=-1,se=-1,ye=0,ke=0,De=r,we=null;t:for(;;){for(var Se;De!==c||v!==0&&De.nodeType!==3||(H=O+v),De!==w||h!==0&&De.nodeType!==3||(se=O+h),De.nodeType===3&&(O+=De.nodeValue.length),(Se=De.firstChild)!==null;)we=De,De=Se;for(;;){if(De===r)break t;if(we===c&&++ye===v&&(H=O),we===w&&++ke===h&&(se=O),(Se=De.nextSibling)!==null)break;De=we,we=De.parentNode}De=Se}c=H===-1||se===-1?null:{start:H,end:se}}else c=null}c=c||{start:0,end:0}}else c=null;for(O0={focusedElem:r,selectionRange:c},Ph=!1,Zn=i;Zn!==null;)if(i=Zn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Zn=r;else for(;Zn!==null;){switch(i=Zn,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)v=r[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=i,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var Ye=Po(c.type,v);r=h.getSnapshotBeforeUpdate(Ye,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(nt){It(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)C0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":C0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Zn=r;break}Zn=i.return}}function R_(r,i,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hi(r,c),h&4&&fu(5,c);break;case 1:if(Hi(r,c),h&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(O){It(c,c.return,O)}else{var v=Po(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(v,i,r.__reactInternalSnapshotBeforeUpdate)}catch(O){It(c,c.return,O)}}h&64&&j_(c),h&512&&mu(c,c.return);break;case 3:if(Hi(r,c),h&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{yv(r,i)}catch(O){It(c,c.return,O)}}break;case 27:i===null&&h&4&&M_(c);case 26:case 5:Hi(r,c),i===null&&h&4&&O_(c),h&512&&mu(c,c.return);break;case 12:Hi(r,c);break;case 31:Hi(r,c),h&4&&P_(r,c);break;case 13:Hi(r,c),h&4&&$_(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=jj.bind(null,c),Vj(r,c))));break;case 22:if(h=c.memoizedState!==null||zi,!h){i=i!==null&&i.memoizedState!==null||Ln,v=zi;var w=Ln;zi=h,(Ln=i)&&!w?Gi(r,c,(c.subtreeFlags&8772)!==0):Hi(r,c),zi=v,Ln=w}break;case 30:break;default:Hi(r,c)}}function L_(r){var i=r.alternate;i!==null&&(r.alternate=null,L_(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&tt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,Pr=!1;function Ui(r,i,c){for(c=c.child;c!==null;)B_(r,i,c),c=c.sibling}function B_(r,i,c){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(dn,c)}catch{}switch(c.tag){case 26:Ln||vi(c,i),Ui(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ln||vi(c,i);var h=on,v=Pr;Ba(c.type)&&(on=c.stateNode,Pr=!1),Ui(r,i,c),Su(c.stateNode),on=h,Pr=v;break;case 5:Ln||vi(c,i);case 6:if(h=on,v=Pr,on=null,Ui(r,i,c),on=h,Pr=v,on!==null)if(Pr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(w){It(c,i,w)}else try{on.removeChild(c.stateNode)}catch(w){It(c,i,w)}break;case 18:on!==null&&(Pr?(r=on,jx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Xl(r)):jx(on,c.stateNode));break;case 4:h=on,v=Pr,on=c.stateNode.containerInfo,Pr=!0,Ui(r,i,c),on=h,Pr=v;break;case 0:case 11:case 14:case 15:Na(2,c,i),Ln||Na(4,c,i),Ui(r,i,c);break;case 1:Ln||(vi(c,i),h=c.stateNode,typeof h.componentWillUnmount=="function"&&N_(c,i,h)),Ui(r,i,c);break;case 21:Ui(r,i,c);break;case 22:Ln=(h=Ln)||c.memoizedState!==null,Ui(r,i,c),Ln=h;break;default:Ui(r,i,c)}}function P_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Xl(r)}catch(c){It(i,i.return,c)}}}function $_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Xl(r)}catch(c){It(i,i.return,c)}}function _j(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new C_),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new C_),i;default:throw Error(s(435,r.tag))}}function bh(r,i){var c=_j(r);i.forEach(function(h){if(!c.has(h)){c.add(h);var v=Nj.bind(null,r,h);h.then(v,v)}})}function $r(r,i){var c=i.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=r,O=i,H=O;e:for(;H!==null;){switch(H.tag){case 27:if(Ba(H.type)){on=H.stateNode,Pr=!1;break e}break;case 5:on=H.stateNode,Pr=!1;break e;case 3:case 4:on=H.stateNode.containerInfo,Pr=!0;break e}H=H.return}if(on===null)throw Error(s(160));B_(w,O,v),on=null,Pr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)I_(i,r),i=i.sibling}var Ks=null;function I_(r,i){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$r(i,r),Ir(r),h&4&&(Na(3,r,r.return),fu(3,r),Na(5,r,r.return));break;case 1:$r(i,r),Ir(r),h&512&&(Ln||c===null||vi(c,c.return)),h&64&&zi&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Ks;if($r(i,r),Ir(r),h&512&&(Ln||c===null||vi(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[gt]||w[sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),nr(w,h,c),w[sn]=r,St(w),h=w;break e;case"link":var O=Ix("link","href",v).get(h+(c.href||""));if(O){for(var H=0;H<O.length;H++)if(w=O[H],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(H,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;case"meta":if(O=Ix("meta","content",v).get(h+(c.content||""))){for(H=0;H<O.length;H++)if(w=O[H],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(H,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;default:throw Error(s(468,h))}w[sn]=r,St(w),h=w}r.stateNode=h}else zx(v,r.type,r.stateNode);else r.stateNode=$x(v,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?zx(v,r.type,r.stateNode):$x(v,h,r.memoizedProps)):h===null&&r.stateNode!==null&&i0(r,r.memoizedProps,c.memoizedProps)}break;case 27:$r(i,r),Ir(r),h&512&&(Ln||c===null||vi(c,c.return)),c!==null&&h&4&&i0(r,r.memoizedProps,c.memoizedProps);break;case 5:if($r(i,r),Ir(r),h&512&&(Ln||c===null||vi(c,c.return)),r.flags&32){v=r.stateNode;try{vs(v,"")}catch(Ye){It(r,r.return,Ye)}}h&4&&r.stateNode!=null&&(v=r.memoizedProps,i0(r,v,c!==null?c.memoizedProps:v)),h&1024&&(l0=!0);break;case 6:if($r(i,r),Ir(r),h&4){if(r.stateNode===null)throw Error(s(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(Ye){It(r,r.return,Ye)}}break;case 3:if(Ch=null,v=Ks,Ks=Dh(i.containerInfo),$r(i,r),Ks=v,Ir(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Xl(i.containerInfo)}catch(Ye){It(r,r.return,Ye)}l0&&(l0=!1,z_(r));break;case 4:h=Ks,Ks=Dh(r.stateNode.containerInfo),$r(i,r),Ir(r),Ks=h;break;case 12:$r(i,r),Ir(r);break;case 31:$r(i,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 13:$r(i,r),Ir(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(vh=Be()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 22:v=r.memoizedState!==null;var se=c!==null&&c.memoizedState!==null,ye=zi,ke=Ln;if(zi=ye||v,Ln=ke||se,$r(i,r),Ln=ke,zi=ye,Ir(r),h&8192)e:for(i=r.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(c===null||se||zi||Ln||$o(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){se=c=i;try{if(w=se.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{H=se.stateNode;var De=se.memoizedProps.style,we=De!=null&&De.hasOwnProperty("display")?De.display:null;H.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(Ye){It(se,se.return,Ye)}}}else if(i.tag===6){if(c===null){se=i;try{se.stateNode.nodeValue=v?"":se.memoizedProps}catch(Ye){It(se,se.return,Ye)}}}else if(i.tag===18){if(c===null){se=i;try{var Se=se.stateNode;v?Nx(Se,!0):Nx(se.stateNode,!1)}catch(Ye){It(se,se.return,Ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,bh(r,c))));break;case 19:$r(i,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 30:break;case 21:break;default:$r(i,r),Ir(r)}}function Ir(r){var i=r.flags;if(i&2){try{for(var c,h=r.return;h!==null;){if(D_(h)){c=h;break}h=h.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,w=a0(r);gh(r,w,v);break;case 5:var O=c.stateNode;c.flags&32&&(vs(O,""),c.flags&=-33);var H=a0(r);gh(r,H,O);break;case 3:case 4:var se=c.stateNode.containerInfo,ye=a0(r);o0(r,ye,se);break;default:throw Error(s(161))}}catch(ke){It(r,r.return,ke)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function z_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;z_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Hi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)R_(r,i.alternate,i),i=i.sibling}function $o(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Na(4,i,i.return),$o(i);break;case 1:vi(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&N_(i,i.return,c),$o(i);break;case 27:Su(i.stateNode);case 26:case 5:vi(i,i.return),$o(i);break;case 22:i.memoizedState===null&&$o(i);break;case 30:$o(i);break;default:$o(i)}r=r.sibling}}function Gi(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,v=r,w=i,O=w.flags;switch(w.tag){case 0:case 11:case 15:Gi(v,w,c),fu(4,w);break;case 1:if(Gi(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ye){It(h,h.return,ye)}if(h=w,v=h.updateQueue,v!==null){var H=h.stateNode;try{var se=v.shared.hiddenCallbacks;if(se!==null)for(v.shared.hiddenCallbacks=null,v=0;v<se.length;v++)bv(se[v],H)}catch(ye){It(h,h.return,ye)}}c&&O&64&&j_(w),mu(w,w.return);break;case 27:M_(w);case 26:case 5:Gi(v,w,c),c&&h===null&&O&4&&O_(w),mu(w,w.return);break;case 12:Gi(v,w,c);break;case 31:Gi(v,w,c),c&&O&4&&P_(v,w);break;case 13:Gi(v,w,c),c&&O&4&&$_(v,w);break;case 22:w.memoizedState===null&&Gi(v,w,c),mu(w,w.return);break;case 30:break;default:Gi(v,w,c)}i=i.sibling}}function c0(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&eu(c))}function u0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r))}function Ws(r,i,c,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)U_(r,i,c,h),i=i.sibling}function U_(r,i,c,h){var v=i.flags;switch(i.tag){case 0:case 11:case 15:Ws(r,i,c,h),v&2048&&fu(9,i);break;case 1:Ws(r,i,c,h);break;case 3:Ws(r,i,c,h),v&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r)));break;case 12:if(v&2048){Ws(r,i,c,h),r=i.stateNode;try{var w=i.memoizedProps,O=w.id,H=w.onPostCommit;typeof H=="function"&&H(O,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(se){It(i,i.return,se)}}else Ws(r,i,c,h);break;case 31:Ws(r,i,c,h);break;case 13:Ws(r,i,c,h);break;case 23:break;case 22:w=i.stateNode,O=i.alternate,i.memoizedState!==null?w._visibility&2?Ws(r,i,c,h):pu(r,i):w._visibility&2?Ws(r,i,c,h):(w._visibility|=2,zl(r,i,c,h,(i.subtreeFlags&10256)!==0||!1)),v&2048&&c0(O,i);break;case 24:Ws(r,i,c,h),v&2048&&u0(i.alternate,i);break;default:Ws(r,i,c,h)}}function zl(r,i,c,h,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,O=i,H=c,se=h,ye=O.flags;switch(O.tag){case 0:case 11:case 15:zl(w,O,H,se,v),fu(8,O);break;case 23:break;case 22:var ke=O.stateNode;O.memoizedState!==null?ke._visibility&2?zl(w,O,H,se,v):pu(w,O):(ke._visibility|=2,zl(w,O,H,se,v)),v&&ye&2048&&c0(O.alternate,O);break;case 24:zl(w,O,H,se,v),v&&ye&2048&&u0(O.alternate,O);break;default:zl(w,O,H,se,v)}i=i.sibling}}function pu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,h=i,v=h.flags;switch(h.tag){case 22:pu(c,h),v&2048&&c0(h.alternate,h);break;case 24:pu(c,h),v&2048&&u0(h.alternate,h);break;default:pu(c,h)}i=i.sibling}}var gu=8192;function Ul(r,i,c){if(r.subtreeFlags&gu)for(r=r.child;r!==null;)H_(r,i,c),r=r.sibling}function H_(r,i,c){switch(r.tag){case 26:Ul(r,i,c),r.flags&gu&&r.memoizedState!==null&&aN(c,Ks,r.memoizedState,r.memoizedProps);break;case 5:Ul(r,i,c);break;case 3:case 4:var h=Ks;Ks=Dh(r.stateNode.containerInfo),Ul(r,i,c),Ks=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=gu,gu=16777216,Ul(r,i,c),gu=h):Ul(r,i,c));break;default:Ul(r,i,c)}}function G_(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function bu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Zn=h,q_(h,r)}G_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)F_(r),r=r.sibling}function F_(r){switch(r.tag){case 0:case 11:case 15:bu(r),r.flags&2048&&Na(9,r,r.return);break;case 3:bu(r);break;case 12:bu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,yh(r)):bu(r);break;default:bu(r)}}function yh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Zn=h,q_(h,r)}G_(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Na(8,i,i.return),yh(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,yh(i));break;default:yh(i)}r=r.sibling}}function q_(r,i){for(;Zn!==null;){var c=Zn;switch(c.tag){case 0:case 11:case 15:Na(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:eu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Zn=h;else e:for(c=r;Zn!==null;){h=Zn;var v=h.sibling,w=h.return;if(L_(h),h===c){Zn=null;break e}if(v!==null){v.return=w,Zn=v;break e}Zn=w}}}var xj={getCacheForType:function(r){var i=er(Mn),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c},cacheSignal:function(){return er(Mn).controller.signal}},wj=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Yt=null,vt=null,Tt=0,$t=0,ts=null,Oa=!1,Hl=!1,d0=!1,Fi=0,xn=0,Da=0,Io=0,h0=0,ns=0,Gl=0,yu=null,zr=null,f0=!1,vh=0,Y_=0,_h=1/0,xh=null,Ma=null,Hn=0,Ca=null,Fl=null,qi=0,m0=0,p0=null,Z_=null,vu=0,g0=null;function rs(){return(Rt&2)!==0&&Tt!==0?Tt&-Tt:W.T!==null?w0():ki()}function V_(){if(ns===0)if((Tt&536870912)===0||yt){var r=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),ns=r}else ns=536870912;return r=Qr.current,r!==null&&(r.flags|=32),ns}function Ur(r,i,c){(r===Yt&&($t===2||$t===9)||r.cancelPendingCommit!==null)&&(ql(r,0),Ra(r,Tt,ns,!1)),Us(r,c),((Rt&2)===0||r!==Yt)&&(r===Yt&&((Rt&2)===0&&(Io|=c),xn===4&&Ra(r,Tt,ns,!1)),_i(r))}function K_(r,i,c){if((Rt&6)!==0)throw Error(s(327));var h=!c&&(i&127)===0&&(i&r.expiredLanes)===0||gs(r,i),v=h?Tj(r,i):y0(r,i,!0),w=h;do{if(v===0){Hl&&!h&&Ra(r,i,0,!1);break}else{if(c=r.current.alternate,w&&!Sj(c)){v=y0(r,i,!1),w=!1;continue}if(v===2){if(w=i,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var H=r;v=yu;var se=H.current.memoizedState.isDehydrated;if(se&&(ql(H,O).flags|=256),O=y0(H,O,!1),O!==2){if(d0&&!se){H.errorRecoveryDisabledLanes|=w,Io|=w,v=4;break e}w=zr,zr=v,w!==null&&(zr===null?zr=w:zr.push.apply(zr,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){ql(r,0),Ra(r,i,0,!0);break}e:{switch(h=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ra(h,i,ns,!Oa);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=vh+300-Be(),10<v)){if(Ra(h,i,ns,!Oa),cr(h,0,!0)!==0)break e;qi=i,h.timeoutHandle=kx(W_.bind(null,h,c,zr,xh,f0,i,ns,Io,Gl,Oa,w,"Throttled",-0,0),v);break e}W_(h,c,zr,xh,f0,i,ns,Io,Gl,Oa,w,null,-0,0)}}break}while(!0);_i(r)}function W_(r,i,c,h,v,w,O,H,se,ye,ke,De,we,Se){if(r.timeoutHandle=-1,De=i.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},H_(i,w,De);var Ye=(w&62914560)===w?vh-Be():(w&4194048)===w?Y_-Be():0;if(Ye=oN(De,Ye),Ye!==null){qi=w,r.cancelPendingCommit=Ye(sx.bind(null,r,i,w,c,h,v,O,H,se,ke,De,null,we,Se)),Ra(r,w,O,!ye);return}}sx(r,i,w,c,h,v,O,H,se)}function Sj(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!qn(w(),v))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ra(r,i,c,h){i&=~h0,i&=~Io,r.suspendedLanes|=i,r.pingedLanes&=~i,h&&(r.warmLanes|=i),h=r.expirationTimes;for(var v=i;0<v;){var w=31-hn(v),O=1<<w;h[w]=-1,v&=~O}c!==0&&ia(r,c,i)}function wh(){return(Rt&6)===0?(_u(0),!1):!0}function b0(){if(vt!==null){if($t===0)var r=vt.return;else r=vt,Vs=yi=null,Cp(r),Ll=null,nu=0,r=vt;for(;r!==null;)A_(r.alternate,r),r=r.return;vt=null}}function ql(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,Gj(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),qi=0,b0(),Yt=r,vt=c=ks(r.current,null),Tt=i,$t=0,ts=null,Oa=!1,Hl=gs(r,i),d0=!1,Gl=ns=h0=Io=Da=xn=0,zr=yu=null,f0=!1,(i&8)!==0&&(i|=i&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=i;0<h;){var v=31-hn(h),w=1<<v;i|=r[v],h&=~w}return Fi=i,ko(),c}function X_(r,i){ut=null,W.H=uu,i===Rl||i===Xd?(i=fv(),$t=3):i===xp?(i=fv(),$t=4):$t=i===Kp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ts=i,vt===null&&(xn=1,dh(r,d(i,r.current)))}function J_(){var r=Qr.current;return r===null?!0:(Tt&4194048)===Tt?As===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?r===As:!1}function Q_(){var r=W.H;return W.H=uu,r===null?uu:r}function ex(){var r=W.A;return W.A=xj,r}function Sh(){xn=4,Oa||(Tt&4194048)!==Tt&&Qr.current!==null||(Hl=!0),(Da&134217727)===0&&(Io&134217727)===0||Yt===null||Ra(Yt,Tt,ns,!1)}function y0(r,i,c){var h=Rt;Rt|=2;var v=Q_(),w=ex();(Yt!==r||Tt!==i)&&(xh=null,ql(r,i)),i=!1;var O=xn;e:do try{if($t!==0&&vt!==null){var H=vt,se=ts;switch($t){case 8:b0(),O=6;break e;case 3:case 2:case 9:case 6:Qr.current===null&&(i=!0);var ye=$t;if($t=0,ts=null,Yl(r,H,se,ye),c&&Hl){O=0;break e}break;default:ye=$t,$t=0,ts=null,Yl(r,H,se,ye)}}Ej(),O=xn;break}catch(ke){X_(r,ke)}while(!0);return i&&r.shellSuspendCounter++,Vs=yi=null,Rt=h,W.H=v,W.A=w,vt===null&&(Yt=null,Tt=0,ko()),O}function Ej(){for(;vt!==null;)tx(vt)}function Tj(r,i){var c=Rt;Rt|=2;var h=Q_(),v=ex();Yt!==r||Tt!==i?(xh=null,_h=Be()+500,ql(r,i)):Hl=gs(r,i);e:do try{if($t!==0&&vt!==null){i=vt;var w=ts;t:switch($t){case 1:$t=0,ts=null,Yl(r,i,w,1);break;case 2:case 9:if(dv(w)){$t=0,ts=null,nx(i);break}i=function(){$t!==2&&$t!==9||Yt!==r||($t=7),_i(r)},w.then(i,i);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:dv(w)?($t=0,ts=null,nx(i)):($t=0,ts=null,Yl(r,i,w,7));break;case 5:var O=null;switch(vt.tag){case 26:O=vt.memoizedState;case 5:case 27:var H=vt;if(O?Ux(O):H.stateNode.complete){$t=0,ts=null;var se=H.sibling;if(se!==null)vt=se;else{var ye=H.return;ye!==null?(vt=ye,Eh(ye)):vt=null}break t}}$t=0,ts=null,Yl(r,i,w,5);break;case 6:$t=0,ts=null,Yl(r,i,w,6);break;case 8:b0(),xn=6;break e;default:throw Error(s(462))}}kj();break}catch(ke){X_(r,ke)}while(!0);return Vs=yi=null,W.H=h,W.A=v,Rt=c,vt!==null?0:(Yt=null,Tt=0,ko(),xn)}function kj(){for(;vt!==null&&!me();)tx(vt)}function tx(r){var i=T_(r.alternate,r,Fi);r.memoizedProps=r.pendingProps,i===null?Eh(r):vt=i}function nx(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=v_(c,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=v_(c,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:Cp(i);default:A_(c,i),i=vt=Kc(i,Fi),i=T_(c,i,Fi)}r.memoizedProps=r.pendingProps,i===null?Eh(r):vt=i}function Yl(r,i,c,h){Vs=yi=null,Cp(i),Ll=null,nu=0;var v=i.return;try{if(mj(r,v,i,c,Tt)){xn=1,dh(r,d(c,r.current)),vt=null;return}}catch(w){if(v!==null)throw vt=v,w;xn=1,dh(r,d(c,r.current)),vt=null;return}i.flags&32768?(yt||h===1?r=!0:Hl||(Tt&536870912)!==0?r=!1:(Oa=r=!0,(h===2||h===9||h===3||h===6)&&(h=Qr.current,h!==null&&h.tag===13&&(h.flags|=16384))),rx(i,r)):Eh(i)}function Eh(r){var i=r;do{if((i.flags&32768)!==0){rx(i,Oa);return}r=i.return;var c=bj(i.alternate,i,Fi);if(c!==null){vt=c;return}if(i=i.sibling,i!==null){vt=i;return}vt=i=r}while(i!==null);xn===0&&(xn=5)}function rx(r,i){do{var c=yj(r.alternate,r);if(c!==null){c.flags&=32767,vt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){vt=r;return}vt=r=c}while(r!==null);xn=6,vt=null}function sx(r,i,c,h,v,w,O,H,se){r.cancelPendingCommit=null;do Th();while(Hn!==0);if((Rt&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=Al,eo(r,c,w,O,H,se),r===Yt&&(vt=Yt=null,Tt=0),Fl=i,Ca=r,qi=c,m0=w,p0=v,Z_=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Oj(Zt,function(){return cx(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=W.T,W.T=null,v=ie.p,ie.p=2,O=Rt,Rt|=4;try{vj(r,i,c)}finally{Rt=O,ie.p=v,W.T=h}}Hn=1,ix(),ax(),ox()}}function ix(){if(Hn===1){Hn=0;var r=Ca,i=Fl,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=W.T,W.T=null;var h=ie.p;ie.p=2;var v=Rt;Rt|=4;try{I_(i,r);var w=O0,O=xo(r.containerInfo),H=w.focusedElem,se=w.selectionRange;if(O!==H&&H&&H.ownerDocument&&Sl(H.ownerDocument.documentElement,H)){if(se!==null&&di(H)){var ye=se.start,ke=se.end;if(ke===void 0&&(ke=ye),"selectionStart"in H)H.selectionStart=ye,H.selectionEnd=Math.min(ke,H.value.length);else{var De=H.ownerDocument||document,we=De&&De.defaultView||window;if(we.getSelection){var Se=we.getSelection(),Ye=H.textContent.length,nt=Math.min(se.start,Ye),Gt=se.end===void 0?nt:Math.min(se.end,Ye);!Se.extend&&nt>Gt&&(O=Gt,Gt=nt,nt=O);var he=_o(H,nt),ae=_o(H,Gt);if(he&&ae&&(Se.rangeCount!==1||Se.anchorNode!==he.node||Se.anchorOffset!==he.offset||Se.focusNode!==ae.node||Se.focusOffset!==ae.offset)){var be=De.createRange();be.setStart(he.node,he.offset),Se.removeAllRanges(),nt>Gt?(Se.addRange(be),Se.extend(ae.node,ae.offset)):(be.setEnd(ae.node,ae.offset),Se.addRange(be))}}}}for(De=[],Se=H;Se=Se.parentNode;)Se.nodeType===1&&De.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<De.length;H++){var Ne=De[H];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Ph=!!N0,O0=N0=null}finally{Rt=v,ie.p=h,W.T=c}}r.current=i,Hn=2}}function ax(){if(Hn===2){Hn=0;var r=Ca,i=Fl,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=W.T,W.T=null;var h=ie.p;ie.p=2;var v=Rt;Rt|=4;try{R_(r,i.alternate,i)}finally{Rt=v,ie.p=h,W.T=c}}Hn=3}}function ox(){if(Hn===4||Hn===3){Hn=0,ze();var r=Ca,i=Fl,c=qi,h=Z_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Hn=5:(Hn=0,Fl=Ca=null,lx(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ma=null),Ve(c),i=i.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(dn,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=W.T,v=ie.p,ie.p=2,W.T=null;try{for(var w=r.onRecoverableError,O=0;O<h.length;O++){var H=h[O];w(H.value,{componentStack:H.stack})}}finally{W.T=i,ie.p=v}}(qi&3)!==0&&Th(),_i(r),v=r.pendingLanes,(c&261930)!==0&&(v&42)!==0?r===g0?vu++:(vu=0,g0=r):vu=0,_u(0)}}function lx(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,eu(i)))}function Th(){return ix(),ax(),ox(),cx()}function cx(){if(Hn!==5)return!1;var r=Ca,i=m0;m0=0;var c=Ve(qi),h=W.T,v=ie.p;try{ie.p=32>c?32:c,W.T=null,c=p0,p0=null;var w=Ca,O=qi;if(Hn=0,Fl=Ca=null,qi=0,(Rt&6)!==0)throw Error(s(331));var H=Rt;if(Rt|=4,F_(w.current),U_(w,w.current,O,c),Rt=H,_u(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(dn,w)}catch{}return!0}finally{ie.p=v,W.T=h,lx(r,i)}}function ux(r,i,c){i=d(c,i),i=Vp(r.stateNode,i,2),r=ka(r,i,2),r!==null&&(Us(r,2),_i(r))}function It(r,i,c){if(r.tag===3)ux(r,r,c);else for(;i!==null;){if(i.tag===3){ux(i,r,c);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){r=d(c,r),c=d_(2),h=ka(i,c,2),h!==null&&(h_(c,h,i,r),Us(h,2),_i(h));break}}i=i.return}}function v0(r,i,c){var h=r.pingCache;if(h===null){h=r.pingCache=new wj;var v=new Set;h.set(i,v)}else v=h.get(i),v===void 0&&(v=new Set,h.set(i,v));v.has(c)||(d0=!0,v.add(c),r=Aj.bind(null,r,i,c),i.then(r,r))}function Aj(r,i,c){var h=r.pingCache;h!==null&&h.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Yt===r&&(Tt&c)===c&&(xn===4||xn===3&&(Tt&62914560)===Tt&&300>Be()-vh?(Rt&2)===0&&ql(r,0):h0|=c,Gl===Tt&&(Gl=0)),_i(r)}function dx(r,i){i===0&&(i=Ja()),r=Ts(r,i),r!==null&&(Us(r,i),_i(r))}function jj(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),dx(r,c)}function Nj(r,i){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),dx(r,c)}function Oj(r,i){return Le(r,i)}var kh=null,Zl=null,_0=!1,Ah=!1,x0=!1,La=0;function _i(r){r!==Zl&&r.next===null&&(Zl===null?kh=Zl=r:Zl=Zl.next=r),Ah=!0,_0||(_0=!0,Mj())}function _u(r,i){if(!x0&&Ah){x0=!0;do for(var c=!1,h=kh;h!==null;){if(r!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var O=h.suspendedLanes,H=h.pingedLanes;w=(1<<31-hn(42|r)+1)-1,w&=v&~(O&~H),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,px(h,w))}else w=Tt,w=cr(h,h===Yt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||gs(h,w)||(c=!0,px(h,w));h=h.next}while(c);x0=!1}}function Dj(){hx()}function hx(){Ah=_0=!1;var r=0;La!==0&&Hj()&&(r=La);for(var i=Be(),c=null,h=kh;h!==null;){var v=h.next,w=fx(h,i);w===0?(h.next=null,c===null?kh=v:c.next=v,v===null&&(Zl=c)):(c=h,(r!==0||(w&3)!==0)&&(Ah=!0)),h=v}Hn!==0&&Hn!==5||_u(r),La!==0&&(La=0)}function fx(r,i){for(var c=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-hn(w),H=1<<O,se=v[O];se===-1?((H&c)===0||(H&h)!==0)&&(v[O]=sa(H,i)):se<=i&&(r.expiredLanes|=H),w&=~H}if(i=Yt,c=Tt,c=cr(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===i&&($t===2||$t===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ue(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||gs(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(h!==null&&ue(h),Ve(c)){case 2:case 8:c=et;break;case 32:c=Zt;break;case 268435456:c=En;break;default:c=Zt}return h=mx.bind(null,r),c=Le(c,h),r.callbackPriority=i,r.callbackNode=c,i}return h!==null&&h!==null&&ue(h),r.callbackPriority=2,r.callbackNode=null,2}function mx(r,i){if(Hn!==0&&Hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Th()&&r.callbackNode!==c)return null;var h=Tt;return h=cr(r,r===Yt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(K_(r,h,i),fx(r,Be()),r.callbackNode!=null&&r.callbackNode===c?mx.bind(null,r):null)}function px(r,i){if(Th())return null;K_(r,i,!0)}function Mj(){Fj(function(){(Rt&6)!==0?Le(at,Dj):hx()})}function w0(){if(La===0){var r=Ml;r===0&&(r=Tn,Tn<<=1,(Tn&261888)===0&&(Tn=256)),La=r}return La}function gx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function bx(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function Cj(r,i,c,h,v){if(i==="submit"&&c&&c.stateNode===v){var w=gx((v[kn]||null).action),O=h.submitter;O&&(i=(i=O[kn]||null)?gx(i.formAction):O.getAttribute("formAction"),i!==null&&(w=i,O=null));var H=new gl("action","action",null,h,v);r.push({event:H,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(La!==0){var se=O?bx(v,O):new FormData(v);Hp(c,{pending:!0,data:se,method:v.method,action:w},null,se)}}else typeof w=="function"&&(H.preventDefault(),se=O?bx(v,O):new FormData(v),Hp(c,{pending:!0,data:se,method:v.method,action:w},w,se))},currentTarget:v}]})}}for(var S0=0;S0<mi.length;S0++){var E0=mi[S0],Rj=E0.toLowerCase(),Lj=E0[0].toUpperCase()+E0.slice(1);Rr(Rj,"on"+Lj)}Rr(So,"onAnimationEnd"),Rr(qd,"onAnimationIteration"),Rr(Eo,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(fp,"onTransitionRun"),Rr(Yd,"onTransitionStart"),Rr(mp,"onTransitionCancel"),Rr(xa,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function yx(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],v=h.event;h=h.listeners;e:{var w=void 0;if(i)for(var O=h.length-1;0<=O;O--){var H=h[O],se=H.instance,ye=H.currentTarget;if(H=H.listener,se!==w&&v.isPropagationStopped())break e;w=H,v.currentTarget=ye;try{w(v)}catch(ke){To(ke)}v.currentTarget=null,w=se}else for(O=0;O<h.length;O++){if(H=h[O],se=H.instance,ye=H.currentTarget,H=H.listener,se!==w&&v.isPropagationStopped())break e;w=H,v.currentTarget=ye;try{w(v)}catch(ke){To(ke)}v.currentTarget=null,w=se}}}}function _t(r,i){var c=i[bs];c===void 0&&(c=i[bs]=new Set);var h=r+"__bubble";c.has(h)||(vx(i,r,2,!1),c.add(h))}function T0(r,i,c){var h=0;i&&(h|=4),vx(c,r,h,i)}var jh="_reactListening"+Math.random().toString(36).slice(2);function k0(r){if(!r[jh]){r[jh]=!0,aa.forEach(function(c){c!=="selectionchange"&&(Bj.has(c)||T0(c,!1,r),T0(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[jh]||(i[jh]=!0,T0("selectionchange",!1,i))}}function vx(r,i,c,h){switch(Vx(i)){case 2:var v=uN;break;case 8:v=dN;break;default:v=U0}c=v.bind(null,i,c,r),v=void 0,!uo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(i,c,{capture:!0,passive:v}):r.addEventListener(i,c,!0):v!==void 0?r.addEventListener(i,c,{passive:v}):r.addEventListener(i,c,!1)}function A0(r,i,c,h,v){var w=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var H=h.stateNode.containerInfo;if(H===v)break;if(O===4)for(O=h.return;O!==null;){var se=O.tag;if((se===3||se===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;H!==null;){if(O=ht(H),O===null)return;if(se=O.tag,se===5||se===6||se===26||se===27){h=w=O;continue e}H=H.parentNode}}h=h.return}$c(function(){var ye=w,ke=co(c),De=[];e:{var we=Zd.get(r);if(we!==void 0){var Se=gl,Ye=r;switch(r){case"keypress":if(ho(c)===0)break e;case"keydown":case"keyup":Se=Cd;break;case"focusin":Ye="focus",Se=Uc;break;case"focusout":Ye="blur",Se=Uc;break;case"beforeblur":case"afterblur":Se=Uc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=np;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=op;break;case So:case qd:case Eo:Se=Hc;break;case xa:Se=Bd;break;case"scroll":case"scrollend":Se=Et;break;case"wheel":Se=Di;break;case"copy":case"cut":case"paste":Se=xs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Rd;break;case"toggle":case"beforetoggle":Se=po}var nt=(i&4)!==0,Gt=!nt&&(r==="scroll"||r==="scrollend"),he=nt?we!==null?we+"Capture":null:we;nt=[];for(var ae=ye,be;ae!==null;){var Ne=ae;if(be=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||be===null||he===null||(Ne=Ni(ae,he),Ne!=null&&nt.push(wu(ae,Ne,be))),Gt)break;ae=ae.return}0<nt.length&&(we=new Se(we,Ye,null,c,ke),De.push({event:we,listeners:nt}))}}if((i&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Se=r==="mouseout"||r==="pointerout",we&&c!==pl&&(Ye=c.relatedTarget||c.fromElement)&&(ht(Ye)||Ye[Vr]))break e;if((Se||we)&&(we=ke.window===ke?ke:(we=ke.ownerDocument)?we.defaultView||we.parentWindow:window,Se?(Ye=c.relatedTarget||c.toElement,Se=ye,Ye=Ye?ht(Ye):null,Ye!==null&&(Gt=l(Ye),nt=Ye.tag,Ye!==Gt||nt!==5&&nt!==27&&nt!==6)&&(Ye=null)):(Se=null,Ye=ye),Se!==Ye)){if(nt=jd,Ne="onMouseLeave",he="onMouseEnter",ae="mouse",(r==="pointerout"||r==="pointerover")&&(nt=Rd,Ne="onPointerLeave",he="onPointerEnter",ae="pointer"),Gt=Se==null?we:pt(Se),be=Ye==null?we:pt(Ye),we=new nt(Ne,ae+"leave",Se,c,ke),we.target=Gt,we.relatedTarget=be,Ne=null,ht(ke)===ye&&(nt=new nt(he,ae+"enter",Ye,c,ke),nt.target=be,nt.relatedTarget=Gt,Ne=nt),Gt=Ne,Se&&Ye)t:{for(nt=Pj,he=Se,ae=Ye,be=0,Ne=he;Ne;Ne=nt(Ne))be++;Ne=0;for(var Qe=ae;Qe;Qe=nt(Qe))Ne++;for(;0<be-Ne;)he=nt(he),be--;for(;0<Ne-be;)ae=nt(ae),Ne--;for(;be--;){if(he===ae||ae!==null&&he===ae.alternate){nt=he;break t}he=nt(he),ae=nt(ae)}nt=null}else nt=null;Se!==null&&_x(De,we,Se,nt,!1),Ye!==null&&Gt!==null&&_x(De,Gt,Ye,nt,!0)}}e:{if(we=ye?pt(ye):window,Se=we.nodeName&&we.nodeName.toLowerCase(),Se==="select"||Se==="input"&&we.type==="file")var Dt=vo;else if(ws(we))if(zd)Dt=hp;else{Dt=dp;var Ke=qs}else Se=we.nodeName,!Se||Se.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?ye&&lo(ye.elementType)&&(Dt=vo):Dt=ba;if(Dt&&(Dt=Dt(r,ye))){Id(De,Dt,c,ke);break e}Ke&&Ke(r,we,ye),r==="focusout"&&ye&&we.type==="number"&&ye.memoizedProps.value!=null&&Hs(we,"number",we.value)}switch(Ke=ye?pt(ye):window,r){case"focusin":(ws(Ke)||Ke.contentEditable==="true")&&(hi=Ke,Tl=ye,wo=null);break;case"focusout":wo=Tl=hi=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Gd(De,c,ke);break;case"selectionchange":if(El)break;case"keydown":case"keyup":Gd(De,c,ke)}var mt;if(yl)e:{switch(r){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else ma?$d(r,c)&&(kt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(kt="onCompositionStart");kt&&(vl&&c.locale!=="ko"&&(ma||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ma&&(mt=ci()):(_s=ke,Oi="value"in _s?_s.value:_s.textContent,ma=!0)),Ke=Nh(ye,kt),0<Ke.length&&(kt=new Gc(kt,r,null,c,ke),De.push({event:kt,listeners:Ke}),mt?kt.data=mt:(mt=Zc(c),mt!==null&&(kt.data=mt)))),(mt=cp?Jr(r,c):pa(r,c))&&(kt=Nh(ye,"onBeforeInput"),0<kt.length&&(Ke=new Gc("onBeforeInput","beforeinput",null,c,ke),De.push({event:Ke,listeners:kt}),Ke.data=mt)),Cj(De,r,ye,c,ke)}yx(De,i)})}function wu(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Nh(r,i){for(var c=i+"Capture",h=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Ni(r,c),v!=null&&h.unshift(wu(r,v,w)),v=Ni(r,i),v!=null&&h.push(wu(r,v,w))),r.tag===3)return h;r=r.return}return[]}function Pj(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _x(r,i,c,h,v){for(var w=i._reactName,O=[];c!==null&&c!==h;){var H=c,se=H.alternate,ye=H.stateNode;if(H=H.tag,se!==null&&se===h)break;H!==5&&H!==26&&H!==27||ye===null||(se=ye,v?(ye=Ni(c,w),ye!=null&&O.unshift(wu(c,ye,se))):v||(ye=Ni(c,w),ye!=null&&O.push(wu(c,ye,se)))),c=c.return}O.length!==0&&r.push({event:i,listeners:O})}var $j=/\r\n?/g,Ij=/\u0000|\uFFFD/g;function xx(r){return(typeof r=="string"?r:""+r).replace($j,`
`).replace(Ij,"")}function wx(r,i){return i=xx(i),xx(r)===i}function Ht(r,i,c,h,v,w){switch(c){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||vs(r,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&vs(r,""+h);break;case"className":zt(r,"class",h);break;case"tabIndex":zt(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(r,c,h);break;case"style":fl(r,h,w);break;case"data":if(i!=="object"){zt(r,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Ht(r,i,"name",v.name,v,null),Ht(r,i,"formEncType",v.formEncType,v,null),Ht(r,i,"formMethod",v.formMethod,v,null),Ht(r,i,"formTarget",v.formTarget,v,null)):(Ht(r,i,"encType",v.encType,v,null),Ht(r,i,"method",v.method,v,null),Ht(r,i,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"onScroll":h!=null&&_t("scroll",r);break;case"onScrollEnd":h!=null&&_t("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ua(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":_t("beforetoggle",r),_t("toggle",r),bt(r,"popover",h);break;case"xlinkActuate":Dr(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Dr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Dr(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Dr(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Dr(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Dr(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":bt(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=ml.get(c)||c,bt(r,c,h))}}function j0(r,i,c,h,v,w){switch(c){case"style":fl(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=c}}break;case"children":typeof h=="string"?vs(r,h):(typeof h=="number"||typeof h=="bigint")&&vs(r,""+h);break;case"onScroll":h!=null&&_t("scroll",r);break;case"onScrollEnd":h!=null&&_t("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ro.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),i=c.slice(2,v?c.length-7:void 0),w=r[kn]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(i,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,h,v);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):bt(r,c,h)}}}function nr(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",r),_t("load",r);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(r,i,w,O,c,null)}}v&&Ht(r,i,"srcSet",c.srcSet,c,null),h&&Ht(r,i,"src",c.src,c,null);return;case"input":_t("invalid",r);var H=w=O=v=null,se=null,ye=null;for(h in c)if(c.hasOwnProperty(h)){var ke=c[h];if(ke!=null)switch(h){case"name":v=ke;break;case"type":O=ke;break;case"checked":se=ke;break;case"defaultChecked":ye=ke;break;case"value":w=ke;break;case"defaultValue":H=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(s(137,i));break;default:Ht(r,i,h,ke,c,null)}}oo(r,w,H,se,ye,O,v,!1);return;case"select":_t("invalid",r),h=O=w=null;for(v in c)if(c.hasOwnProperty(v)&&(H=c[v],H!=null))switch(v){case"value":w=H;break;case"defaultValue":O=H;break;case"multiple":h=H;default:Ht(r,i,v,H,c,null)}i=w,c=O,r.multiple=!!h,i!=null?qt(r,!!h,i,!1):c!=null&&qt(r,!!h,c,!0);return;case"textarea":_t("invalid",r),w=v=h=null;for(O in c)if(c.hasOwnProperty(O)&&(H=c[O],H!=null))switch(O){case"value":h=H;break;case"defaultValue":v=H;break;case"children":w=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(91));break;default:Ht(r,i,O,H,c,null)}la(r,h,v,w);return;case"option":for(se in c)if(c.hasOwnProperty(se)&&(h=c[se],h!=null))switch(se){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ht(r,i,se,h,c,null)}return;case"dialog":_t("beforetoggle",r),_t("toggle",r),_t("cancel",r),_t("close",r);break;case"iframe":case"object":_t("load",r);break;case"video":case"audio":for(h=0;h<xu.length;h++)_t(xu[h],r);break;case"image":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"embed":case"source":case"link":_t("error",r),_t("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in c)if(c.hasOwnProperty(ye)&&(h=c[ye],h!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(r,i,ye,h,c,null)}return;default:if(lo(i)){for(ke in c)c.hasOwnProperty(ke)&&(h=c[ke],h!==void 0&&j0(r,i,ke,h,c,void 0));return}}for(H in c)c.hasOwnProperty(H)&&(h=c[H],h!=null&&Ht(r,i,H,h,c,null))}function zj(r,i,c,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,H=null,se=null,ye=null,ke=null;for(Se in c){var De=c[Se];if(c.hasOwnProperty(Se)&&De!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":se=De;default:h.hasOwnProperty(Se)||Ht(r,i,Se,null,h,De)}}for(var we in h){var Se=h[we];if(De=c[we],h.hasOwnProperty(we)&&(Se!=null||De!=null))switch(we){case"type":w=Se;break;case"name":v=Se;break;case"checked":ye=Se;break;case"defaultChecked":ke=Se;break;case"value":O=Se;break;case"defaultValue":H=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(137,i));break;default:Se!==De&&Ht(r,i,we,Se,h,De)}}Lc(r,O,H,se,ye,ke,w,v);return;case"select":Se=O=H=we=null;for(w in c)if(se=c[w],c.hasOwnProperty(w)&&se!=null)switch(w){case"value":break;case"multiple":Se=se;default:h.hasOwnProperty(w)||Ht(r,i,w,null,h,se)}for(v in h)if(w=h[v],se=c[v],h.hasOwnProperty(v)&&(w!=null||se!=null))switch(v){case"value":we=w;break;case"defaultValue":H=w;break;case"multiple":O=w;default:w!==se&&Ht(r,i,v,w,h,se)}i=H,c=O,h=Se,we!=null?qt(r,!!c,we,!1):!!h!=!!c&&(i!=null?qt(r,!!c,i,!0):qt(r,!!c,c?[]:"",!1));return;case"textarea":Se=we=null;for(H in c)if(v=c[H],c.hasOwnProperty(H)&&v!=null&&!h.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Ht(r,i,H,null,h,v)}for(O in h)if(v=h[O],w=c[O],h.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":we=v;break;case"defaultValue":Se=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&Ht(r,i,O,v,h,w)}li(r,we,Se);return;case"option":for(var Ye in c)if(we=c[Ye],c.hasOwnProperty(Ye)&&we!=null&&!h.hasOwnProperty(Ye))switch(Ye){case"selected":r.selected=!1;break;default:Ht(r,i,Ye,null,h,we)}for(se in h)if(we=h[se],Se=c[se],h.hasOwnProperty(se)&&we!==Se&&(we!=null||Se!=null))switch(se){case"selected":r.selected=we&&typeof we!="function"&&typeof we!="symbol";break;default:Ht(r,i,se,we,h,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)we=c[nt],c.hasOwnProperty(nt)&&we!=null&&!h.hasOwnProperty(nt)&&Ht(r,i,nt,null,h,we);for(ye in h)if(we=h[ye],Se=c[ye],h.hasOwnProperty(ye)&&we!==Se&&(we!=null||Se!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,i));break;default:Ht(r,i,ye,we,h,Se)}return;default:if(lo(i)){for(var Gt in c)we=c[Gt],c.hasOwnProperty(Gt)&&we!==void 0&&!h.hasOwnProperty(Gt)&&j0(r,i,Gt,void 0,h,we);for(ke in h)we=h[ke],Se=c[ke],!h.hasOwnProperty(ke)||we===Se||we===void 0&&Se===void 0||j0(r,i,ke,we,h,Se);return}}for(var he in c)we=c[he],c.hasOwnProperty(he)&&we!=null&&!h.hasOwnProperty(he)&&Ht(r,i,he,null,h,we);for(De in h)we=h[De],Se=c[De],!h.hasOwnProperty(De)||we===Se||we==null&&Se==null||Ht(r,i,De,we,h,Se)}function Sx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Uj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,O=v.initiatorType,H=v.duration;if(w&&H&&Sx(O)){for(O=0,H=v.responseEnd,h+=1;h<c.length;h++){var se=c[h],ye=se.startTime;if(ye>H)break;var ke=se.transferSize,De=se.initiatorType;ke&&Sx(De)&&(se=se.responseEnd,O+=ke*(se<H?1:(H-ye)/(se-ye)))}if(--h,i+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var N0=null,O0=null;function Oh(r){return r.nodeType===9?r:r.ownerDocument}function Ex(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tx(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function D0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var M0=null;function Hj(){var r=window.event;return r&&r.type==="popstate"?r===M0?!1:(M0=r,!0):(M0=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,Gj=typeof clearTimeout=="function"?clearTimeout:void 0,Ax=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof Ax<"u"?function(r){return Ax.resolve(null).then(r).catch(qj)}:kx;function qj(r){setTimeout(function(){throw r})}function Ba(r){return r==="head"}function jx(r,i){var c=i,h=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(v),Xl(i);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Su(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Su(c);for(var w=c.firstChild;w;){var O=w.nextSibling,H=w.nodeName;w[gt]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&Su(r.ownerDocument.body);c=v}while(c);Xl(i)}function Nx(r,i){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function C0(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":C0(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Yj(r,i,c,h){for(;r.nodeType===1;){var v=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[gt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=js(r.nextSibling),r===null)break}return null}function Zj(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=js(r.nextSibling),r===null))return null;return r}function Ox(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=js(r.nextSibling),r===null))return null;return r}function R0(r){return r.data==="$?"||r.data==="$~"}function L0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Vj(r,i){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||c.readyState!=="loading")i();else{var h=function(){i(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function js(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var B0=null;function Dx(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(i===0)return js(r.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}r=r.nextSibling}return null}function Mx(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return r;i--}else c!=="/$"&&c!=="/&"||i++}r=r.previousSibling}return null}function Cx(r,i,c){switch(i=Oh(c),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Su(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);tt(r)}var Ns=new Map,Rx=new Set;function Dh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yi=ie.d;ie.d={f:Kj,r:Wj,D:Xj,C:Jj,L:Qj,m:eN,X:nN,S:tN,M:rN};function Kj(){var r=Yi.f(),i=wh();return r||i}function Wj(r){var i=wt(r);i!==null&&i.tag===5&&i.type==="form"?Xv(i):Yi.r(r)}var Vl=typeof document>"u"?null:document;function Lx(r,i,c){var h=Vl;if(h&&typeof i=="string"&&i){var v=en(i);v='link[rel="'+r+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Rx.has(v)||(Rx.add(v),r={rel:r,crossOrigin:c,href:i},h.querySelector(v)===null&&(i=h.createElement("link"),nr(i,"link",r),St(i),h.head.appendChild(i)))}}function Xj(r){Yi.D(r),Lx("dns-prefetch",r,null)}function Jj(r,i){Yi.C(r,i),Lx("preconnect",r,i)}function Qj(r,i,c){Yi.L(r,i,c);var h=Vl;if(h&&r&&i){var v='link[rel="preload"][as="'+en(i)+'"]';i==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+en(c.imageSizes)+'"]')):v+='[href="'+en(r)+'"]';var w=v;switch(i){case"style":w=Kl(r);break;case"script":w=Wl(r)}Ns.has(w)||(r=_({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),Ns.set(w,r),h.querySelector(v)!==null||i==="style"&&h.querySelector(Eu(w))||i==="script"&&h.querySelector(Tu(w))||(i=h.createElement("link"),nr(i,"link",r),St(i),h.head.appendChild(i)))}}function eN(r,i){Yi.m(r,i);var c=Vl;if(c&&r){var h=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+en(h)+'"][href="'+en(r)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Wl(r)}if(!Ns.has(w)&&(r=_({rel:"modulepreload",href:r},i),Ns.set(w,r),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tu(w)))return}h=c.createElement("link"),nr(h,"link",r),St(h),c.head.appendChild(h)}}}function tN(r,i,c){Yi.S(r,i,c);var h=Vl;if(h&&r){var v=In(h).hoistableStyles,w=Kl(r);i=i||"default";var O=v.get(w);if(!O){var H={loading:0,preload:null};if(O=h.querySelector(Eu(w)))H.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},c),(c=Ns.get(w))&&P0(r,c);var se=O=h.createElement("link");St(se),nr(se,"link",r),se._p=new Promise(function(ye,ke){se.onload=ye,se.onerror=ke}),se.addEventListener("load",function(){H.loading|=1}),se.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Mh(O,i,h)}O={type:"stylesheet",instance:O,count:1,state:H},v.set(w,O)}}}function nN(r,i){Yi.X(r,i);var c=Vl;if(c&&r){var h=In(c).hoistableScripts,v=Wl(r),w=h.get(v);w||(w=c.querySelector(Tu(v)),w||(r=_({src:r,async:!0},i),(i=Ns.get(v))&&$0(r,i),w=c.createElement("script"),St(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function rN(r,i){Yi.M(r,i);var c=Vl;if(c&&r){var h=In(c).hoistableScripts,v=Wl(r),w=h.get(v);w||(w=c.querySelector(Tu(v)),w||(r=_({src:r,async:!0,type:"module"},i),(i=Ns.get(v))&&$0(r,i),w=c.createElement("script"),St(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Bx(r,i,c,h){var v=(v=G.current)?Dh(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Kl(c.href),c=In(v).hoistableStyles,h=c.get(i),h||(h={type:"style",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Kl(c.href);var w=In(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Eu(r)))&&!w._p&&(O.instance=w,O.state.loading=5),Ns.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ns.set(r,c),w||sN(v,r,c,O.state))),i&&h===null)throw Error(s(528,""));return O}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Wl(c),c=In(v).hoistableScripts,h=c.get(i),h||(h={type:"script",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Kl(r){return'href="'+en(r)+'"'}function Eu(r){return'link[rel="stylesheet"]['+r+"]"}function Px(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function sN(r,i,c,h){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=r.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),nr(i,"link",c),St(i),r.head.appendChild(i))}function Wl(r){return'[src="'+en(r)+'"]'}function Tu(r){return"script[async]"+r}function $x(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var h=r.querySelector('style[data-href~="'+en(c.href)+'"]');if(h)return i.instance=h,St(h),h;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),St(h),nr(h,"style",v),Mh(h,c.precedence,r),i.instance=h;case"stylesheet":v=Kl(c.href);var w=r.querySelector(Eu(v));if(w)return i.state.loading|=4,i.instance=w,St(w),w;h=Px(c),(v=Ns.get(v))&&P0(h,v),w=(r.ownerDocument||r).createElement("link"),St(w);var O=w;return O._p=new Promise(function(H,se){O.onload=H,O.onerror=se}),nr(w,"link",h),i.state.loading|=4,Mh(w,c.precedence,r),i.instance=w;case"script":return w=Wl(c.src),(v=r.querySelector(Tu(w)))?(i.instance=v,St(v),v):(h=c,(v=Ns.get(w))&&(h=_({},c),$0(h,v)),r=r.ownerDocument||r,v=r.createElement("script"),St(v),nr(v,"link",h),r.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,Mh(h,c.precedence,r));return i.instance}function Mh(r,i,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,O=0;O<h.length;O++){var H=h[O];if(H.dataset.precedence===i)w=H;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function P0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function $0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ch=null;function Ix(r,i,c){if(Ch===null){var h=new Map,v=Ch=new Map;v.set(c,h)}else v=Ch,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),v=0;v<c.length;v++){var w=c[v];if(!(w[gt]||w[sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(i)||"";O=r+O;var H=h.get(O);H?H.push(w):h.set(O,[w])}}return h}function zx(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function iN(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ux(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function aN(r,i,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Kl(h.href),w=i.querySelector(Eu(v));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Rh.bind(r),i.then(r,r)),c.state.loading|=4,c.instance=w,St(w);return}w=i.ownerDocument||i,h=Px(h),(v=Ns.get(v))&&P0(h,v),w=w.createElement("link"),St(w);var O=w;O._p=new Promise(function(H,se){O.onload=H,O.onerror=se}),nr(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Rh.bind(r),i.addEventListener("load",c),i.addEventListener("error",c))}}var I0=0;function oN(r,i){return r.stylesheets&&r.count===0&&Bh(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Bh(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&I0===0&&(I0=62500*Uj());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Bh(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>I0?50:800)+i);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lh=null;function Bh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lh=new Map,i.forEach(lN,r),Lh=null,Rh.call(r))}function lN(r,i){if(!(i.state.loading&4)){var c=Lh.get(r);if(c)var h=c.get(null);else{c=new Map,Lh.set(r,c);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),h=O)}h&&c.set(null,h)}v=i.instance,O=v.getAttribute("data-precedence"),w=c.get(O)||h,w===h&&c.set(null,v),c.set(O,v),this.count++,h=Rh.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),i.state.loading|=4}}var ku={$$typeof:N,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function cN(r,i,c,h,v,w,O,H,se){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.hiddenUpdates=Qa(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function Hx(r,i,c,h,v,w,O,H,se,ye,ke,De){return r=new cN(r,i,c,O,se,ye,ke,De,H),i=1,w===!0&&(i|=24),w=hr(3,null,null,i),r.current=w,w.stateNode=r,i=yp(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:i},wp(w),r}function Gx(r){return r?(r=Mi,r):Mi}function Fx(r,i,c,h,v,w){v=Gx(v),h.context===null?h.context=v:h.pendingContext=v,h=Ta(i),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ka(r,h,i),c!==null&&(Ur(c,r,i),su(c,r,i))}function qx(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function z0(r,i){qx(r,i),(r=r.alternate)&&qx(r,i)}function Yx(r){if(r.tag===13||r.tag===31){var i=Ts(r,67108864);i!==null&&Ur(i,r,67108864),z0(r,67108864)}}function Zx(r){if(r.tag===13||r.tag===31){var i=rs();i=$n(i);var c=Ts(r,i);c!==null&&Ur(c,r,i),z0(r,i)}}var Ph=!0;function uN(r,i,c,h){var v=W.T;W.T=null;var w=ie.p;try{ie.p=2,U0(r,i,c,h)}finally{ie.p=w,W.T=v}}function dN(r,i,c,h){var v=W.T;W.T=null;var w=ie.p;try{ie.p=8,U0(r,i,c,h)}finally{ie.p=w,W.T=v}}function U0(r,i,c,h){if(Ph){var v=H0(h);if(v===null)A0(r,i,h,$h,c),Kx(r,h);else if(fN(v,r,i,c,h))h.stopPropagation();else if(Kx(r,h),i&4&&-1<hN.indexOf(r)){for(;v!==null;){var w=wt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=Nr(w.pendingLanes);if(O!==0){var H=w;for(H.pendingLanes|=2,H.entangledLanes|=2;O;){var se=1<<31-hn(O);H.entanglements[1]|=se,O&=~se}_i(w),(Rt&6)===0&&(_h=Be()+500,_u(0))}}break;case 31:case 13:H=Ts(w,2),H!==null&&Ur(H,w,2),wh(),z0(w,2)}if(w=H0(h),w===null&&A0(r,i,h,$h,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else A0(r,i,h,null,c)}}function H0(r){return r=co(r),G0(r)}var $h=null;function G0(r){if($h=null,r=ht(r),r!==null){var i=l(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=u(i),r!==null)return r;r=null}else if(c===31){if(r=f(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return $h=r,null}function Vx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case at:return 2;case et:return 8;case Zt:case On:return 32;case En:return 268435456;default:return 32}default:return 32}}var F0=!1,Pa=null,$a=null,Ia=null,Au=new Map,ju=new Map,za=[],hN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(r,i){switch(r){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Au.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(i.pointerId)}}function Nu(r,i,c,h,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},i!==null&&(i=wt(i),i!==null&&Yx(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function fN(r,i,c,h,v){switch(i){case"focusin":return Pa=Nu(Pa,r,i,c,h,v),!0;case"dragenter":return $a=Nu($a,r,i,c,h,v),!0;case"mouseover":return Ia=Nu(Ia,r,i,c,h,v),!0;case"pointerover":var w=v.pointerId;return Au.set(w,Nu(Au.get(w)||null,r,i,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,ju.set(w,Nu(ju.get(w)||null,r,i,c,h,v)),!0}return!1}function Wx(r){var i=ht(r.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){r.blockedOn=i,Or(r.priority,function(){Zx(c)});return}}else if(i===31){if(i=f(c),i!==null){r.blockedOn=i,Or(r.priority,function(){Zx(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ih(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=H0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);pl=h,c.target.dispatchEvent(h),pl=null}else return i=wt(c),i!==null&&Yx(i),r.blockedOn=c,!1;i.shift()}return!0}function Xx(r,i,c){Ih(r)&&c.delete(i)}function mN(){F0=!1,Pa!==null&&Ih(Pa)&&(Pa=null),$a!==null&&Ih($a)&&($a=null),Ia!==null&&Ih(Ia)&&(Ia=null),Au.forEach(Xx),ju.forEach(Xx)}function zh(r,i){r.blockedOn===i&&(r.blockedOn=null,F0||(F0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mN)))}var Uh=null;function Jx(r){Uh!==r&&(Uh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Uh===r&&(Uh=null);for(var i=0;i<r.length;i+=3){var c=r[i],h=r[i+1],v=r[i+2];if(typeof h!="function"){if(G0(h||c)===null)continue;break}var w=wt(c);w!==null&&(r.splice(i,3),i-=3,Hp(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Xl(r){function i(se){return zh(se,r)}Pa!==null&&zh(Pa,r),$a!==null&&zh($a,r),Ia!==null&&zh(Ia,r),Au.forEach(i),ju.forEach(i);for(var c=0;c<za.length;c++){var h=za[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<za.length&&(c=za[0],c.blockedOn===null);)Wx(c),c.blockedOn===null&&za.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],O=v[kn]||null;if(typeof w=="function")O||Jx(c);else if(O){var H=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[kn]||null)H=O.formAction;else if(G0(v)!==null)continue}else H=O.action;typeof H=="function"?c[h+1]=H:(c.splice(h,3),h-=3),Jx(c)}}}function Qx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function q0(r){this._internalRoot=r}Hh.prototype.render=q0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,h=rs();Fx(c,h,r,i,null,null)},Hh.prototype.unmount=q0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Fx(r.current,2,null,r,null,null),wh(),i[Vr]=null}};function Hh(r){this._internalRoot=r}Hh.prototype.unstable_scheduleHydration=function(r){if(r){var i=ki();r={blockedOn:null,target:r,priority:i};for(var c=0;c<za.length&&i!==0&&i<za[c].priority;c++);za.splice(c,0,r),c===0&&Wx(r)}};var ew=t.version;if(ew!=="19.2.1")throw Error(s(527,ew,"19.2.1"));ie.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var pN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{dn=Gh.inject(pN),Ct=Gh}catch{}}return Du.createRoot=function(r,i){if(!o(r))throw Error(s(299));var c=!1,h="",v=o_,w=l_,O=c_;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError)),i=Hx(r,1,!1,null,null,c,h,null,v,w,O,Qx),r[Vr]=i.current,k0(r),new q0(i)},Du.hydrateRoot=function(r,i,c){if(!o(r))throw Error(s(299));var h=!1,v="",w=o_,O=l_,H=c_,se=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.formState!==void 0&&(se=c.formState)),i=Hx(r,1,!0,i,c??null,h,v,se,w,O,H,Qx),i.context=Gx(null),c=i.current,h=rs(),h=$n(h),v=Ta(h),v.callback=null,ka(c,v,h),c=h,i.current.lanes=c,Us(i,c),_i(i),r[Vr]=i.current,k0(r),new Hh(i)},Du.version="19.2.1",Du}var uw;function EN(){if(uw)return V0.exports;uw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V0.exports=SN(),V0.exports}var TN=EN();let kN={data:""},AN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||kN,jN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,NN=/\/\*[^]*?\*\/|  +/g,dw=/\n+/g,Fa=(e,t)=>{let n="",s="",o="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":s+=l[1]=="f"?Fa(u,l):l+"{"+Fa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?s+=Fa(u,t?t.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Fa.p?Fa.p(l,u):l+":"+u+";")}return n+(t&&o?t+"{"+o+"}":o)+s},Zi={},B2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+B2(e[n]);return t}return e},ON=(e,t,n,s,o)=>{let l=B2(e),u=Zi[l]||(Zi[l]=(m=>{let p=0,y=11;for(;p<m.length;)y=101*y+m.charCodeAt(p++)>>>0;return"go"+y})(l));if(!Zi[u]){let m=l!==e?e:(p=>{let y,_,x=[{}];for(;y=jN.exec(p.replace(NN,""));)y[4]?x.shift():y[3]?(_=y[3].replace(dw," ").trim(),x.unshift(x[0][_]=x[0][_]||{})):x[0][y[1]]=y[2].replace(dw," ").trim();return x[0]})(e);Zi[u]=Fa(o?{["@keyframes "+u]:m}:m,n?"":"."+u)}let f=n&&Zi.g?Zi.g:null;return n&&(Zi.g=Zi[u]),((m,p,y,_)=>{_?p.data=p.data.replace(_,m):p.data.indexOf(m)===-1&&(p.data=y?m+p.data:p.data+m)})(Zi[u],t,s,f),u},DN=(e,t,n)=>e.reduce((s,o,l)=>{let u=t[l];if(u&&u.call){let f=u(n),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=m?"."+m:f&&typeof f=="object"?f.props?"":Fa(f,""):f===!1?"":f}return s+o+(u??"")},"");function Tm(e){let t=this||{},n=e.call?e(t.p):e;return ON(n.unshift?n.raw?DN(n,[].slice.call(arguments,1),t.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(t.p):o),{}):n,AN(t.target),t.g,t.o,t.k)}let P2,ob,lb;Tm.bind({g:1});let ta=Tm.bind({k:1});function MN(e,t,n,s){Fa.p=t,P2=e,ob=n,lb=s}function Xa(e,t){let n=this||{};return function(){let s=arguments;function o(l,u){let f=Object.assign({},l),m=f.className||o.className;n.p=Object.assign({theme:ob&&ob()},f),n.o=/ *go\d+/.test(m),f.className=Tm.apply(n,s)+(m?" "+m:"");let p=e;return e[0]&&(p=f.as||e,delete f.as),lb&&p[0]&&lb(f),P2(p,f)}return o}}var CN=e=>typeof e=="function",Kf=(e,t)=>CN(e)?e(t):e,RN=(()=>{let e=0;return()=>(++e).toString()})(),$2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),LN=20,Kb="default",I2=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:s}=t;return I2(e,{type:e.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},If=[],z2={toasts:[],pausedAt:void 0,settings:{toastLimit:LN}},Ei={},U2=(e,t=Kb)=>{Ei[t]=I2(Ei[t]||z2,e),If.forEach(([n,s])=>{n===t&&s(Ei[t])})},H2=e=>Object.keys(Ei).forEach(t=>U2(e,t)),BN=e=>Object.keys(Ei).find(t=>Ei[t].toasts.some(n=>n.id===e)),km=(e=Kb)=>t=>{U2(t,e)},PN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$N=(e={},t=Kb)=>{let[n,s]=C.useState(Ei[t]||z2),o=C.useRef(Ei[t]);C.useEffect(()=>(o.current!==Ei[t]&&s(Ei[t]),If.push([t,s]),()=>{let u=If.findIndex(([f])=>f===t);u>-1&&If.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var f,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((f=e[u.type])==null?void 0:f.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||PN[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},IN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||RN()}),pd=e=>(t,n)=>{let s=IN(t,e,n);return km(s.toasterId||BN(s.id))({type:2,toast:s}),s.id},Fn=(e,t)=>pd("blank")(e,t);Fn.error=pd("error");Fn.success=pd("success");Fn.loading=pd("loading");Fn.custom=pd("custom");Fn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?km(t)(n):H2(n)};Fn.dismissAll=e=>Fn.dismiss(void 0,e);Fn.remove=(e,t)=>{let n={type:4,toastId:e};t?km(t)(n):H2(n)};Fn.removeAll=e=>Fn.remove(void 0,e);Fn.promise=(e,t,n)=>{let s=Fn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=t.success?Kf(t.success,o):void 0;return l?Fn.success(l,{id:s,...n,...n?.success}):Fn.dismiss(s),o}).catch(o=>{let l=t.error?Kf(t.error,o):void 0;l?Fn.error(l,{id:s,...n,...n?.error}):Fn.dismiss(s)}),e};var zN=1e3,UN=(e,t="default")=>{let{toasts:n,pausedAt:s}=$N(e,t),o=C.useRef(new Map).current,l=C.useCallback((_,x=zN)=>{if(o.has(_))return;let S=setTimeout(()=>{o.delete(_),u({type:4,toastId:_})},x);o.set(_,S)},[]);C.useEffect(()=>{if(s)return;let _=Date.now(),x=n.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(_-S.createdAt);if(T<0){S.visible&&Fn.dismiss(S.id);return}return setTimeout(()=>Fn.dismiss(S.id,t),T)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[n,s,t]);let u=C.useCallback(km(t),[t]),f=C.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=C.useCallback((_,x)=>{u({type:1,toast:{id:_,height:x}})},[u]),p=C.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),y=C.useCallback((_,x)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=x||{},A=n.filter(N=>(N.position||k)===(_.position||k)&&N.height),M=A.findIndex(N=>N.id===_.id),P=A.filter((N,D)=>D<M&&N.visible).length;return A.filter(N=>N.visible).slice(...S?[P+1]:[0,P]).reduce((N,D)=>N+(D.height||0)+T,0)},[n]);return C.useEffect(()=>{n.forEach(_=>{if(_.dismissed)l(_.id,_.removeDelay);else{let x=o.get(_.id);x&&(clearTimeout(x),o.delete(_.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:f,endPause:p,calculateOffset:y}}},HN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GN=ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FN=ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qN=Xa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,YN=ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZN=Xa("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${YN} 1s linear infinite;
`,VN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,KN=ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WN=Xa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${KN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XN=Xa("div")`
  position: absolute;
`,JN=Xa("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,QN=ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eO=Xa("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${QN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tO=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?C.createElement(eO,null,t):t:n==="blank"?null:C.createElement(JN,null,C.createElement(ZN,{...s}),n!=="loading"&&C.createElement(XN,null,n==="error"?C.createElement(qN,{...s}):C.createElement(WN,{...s})))},nO=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rO=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sO="0%{opacity:0;} 100%{opacity:1;}",iO="0%{opacity:1;} 100%{opacity:0;}",aO=Xa("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,oO=Xa("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,lO=(e,t)=>{let n=e.includes("top")?1:-1,[s,o]=$2()?[sO,iO]:[nO(n),rO(n)];return{animation:t?`${ta(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ta(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cO=C.memo(({toast:e,position:t,style:n,children:s})=>{let o=e.height?lO(e.position||t||"top-center",e.visible):{opacity:0},l=C.createElement(tO,{toast:e}),u=C.createElement(oO,{...e.ariaProps},Kf(e.message,e));return C.createElement(aO,{className:e.className,style:{...o,...n,...e.style}},typeof s=="function"?s({icon:l,message:u}):C.createElement(C.Fragment,null,l,u))});MN(C.createElement);var uO=({id:e,className:t,style:n,onHeightUpdate:s,children:o})=>{let l=C.useCallback(u=>{if(u){let f=()=>{let m=u.getBoundingClientRect().height;s(e,m)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return C.createElement("div",{ref:l,className:t,style:n},o)},dO=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...o}},hO=Tm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fh=16,G2=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:o,toasterId:l,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=UN(n,l);return C.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Fh,left:Fh,right:Fh,bottom:Fh,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(y=>{let _=y.position||t,x=p.calculateOffset(y,{reverseOrder:e,gutter:s,defaultPosition:t}),S=dO(_,x);return C.createElement(uO,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?hO:"",style:S},y.type==="custom"?Kf(y.message,y):o?o(y):C.createElement(cO,{toast:y,position:_}))}))},fO=Fn;function mO(e,t,n,s=0,o=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),f=n+(s+o/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+f+u-1524.5}const pO=864e5;function gO(e){const t=(e-24405875e-1)*pO;return new Date(t)}function bO(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const o=n-2e3;return 63.86+.3345*o-.060374*o*o+.0017275*o**3+651814e-9*o**4+2373599e-11*o**5}if(n>=2005&&n<2050){const o=n-2e3;return 62.92+.32217*o+.005589*o*o}if(n>=2050&&n<=2150){const o=(n-1820)/100;return-20+32*o*o-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const o=(n-1800)/100;return 13.72-33.244*o+68.612*o**2-65.3*o**3-1.653*o**4+.3343*o**5-.012125*o**6+1348e-7*o**7-175e-8*o**8}const s=(n-1820)/100;return-20+32*s*s}function yO(e){const t=Math.floor(e+.5),n=e+.5-t;let s=t;if(t>=2299161){const _=Math.floor((t-186721625e-2)/36524.25);s=t+1+_-Math.floor(_/4)}const o=s+1524,l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),f=Math.floor((o-u)/30.6001),m=o-u-Math.floor(30.6001*f)+n;let p=f-1;p>12&&(p-=12);let y=l-4715;return p>2&&(y-=1),[y,p,m]}const Wu=Math.PI,Qo=Wu/180,vO=180/Wu,_O=86400;function xO(e){return e%=360,e<0?e+360:e}function wO(e,t){return(e-t+540)%360-180}function hw(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function SO(e){const[t,n]=yO(e);return e+bO(t,Math.round(n))/_O}function fw(e,t){let n=0,s=1;for(let o=0;o<e.length;o++){let l=0;for(const[u,f,m]of e[o])l+=u*Math.cos(f+m*t);n+=l*s,s*=t}return n*1e-8}function EO(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*Qo,s=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*Qo,o=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*Qo,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*Qo,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*Qo,f=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[y,_,x,S,T,k,A,M,P]of f){const N=y*n+_*s+x*o+S*l+T*u;m+=(k+A*t)*Math.sin(N),p+=(M+P*t)*Math.cos(N)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function qh(e){const t=SO(e),n=(t-2451545)/365250,s=fw(mw.L,n),o=fw(mw.R,n);let l=s+Wu;l>2*Wu&&(l-=2*Wu);const{dpsi:u}=EO(t),f=u/3600*Qo,m=20.4898/(3600*o),p=l+f-m*Qo;return xO(p*vO)}function Gn(e,t,n){const s=(t%360+360)%360,o=mO(e,1,1),l=qh(o);let u=s-l;u<0&&(u+=360);let f=o+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const S=qh(f),T=wO(s,S);if(Math.abs(T)<m)break;const k=qh(f+p),A=qh(f-p),M=hw(k,S),P=hw(A,S),N=(M-P)/(2*p);f+=T/N}const y=gO(f),_=new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(_.getTime()+x*36e5)}return _}const mw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},jr=["","","","","","","","","",""],qr=["","","","","","","","","","","",""],Bs={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},ms={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},TO=["","","","","","","","","",""],kO=["","","","","","","","","","","",""],AO=["","","","","","","","","","","","","","","","","","","",""],jO=["","","","","","","","","","","","","","","","","","","","","","","",""],Am=new Set(jr),Wb=new Set(qr),jm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Xb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Jb=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Qb={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},F2={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},pw=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],NO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},OO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function DO(e,t=127.5){return(dt(e,t)||"").charAt(0)}const gw=new Map;function q2(e,t=127.5){const n=`${e}@${t}`,s=gw.get(n);if(s)return s;const o=Gn(e,315,t);if(!o)throw new Error(`    : year=${e}, lon=${t}`);return gw.set(n,o),o}const MO=(e,t)=>(e%t+t)%t,Y2=e=>e instanceof Date&&!Number.isNaN(e.getTime());function Z2(e,t=127.5){if(!Y2(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),s=q2(n,t),o=e<s?n-1:n,l=MO(o-4,60);return{useYear:o,index60Num:l}}function dt(e,t=127.5){const{index60Num:n}=Z2(e,t);return Jb[n]}const CO=[2,4,6,8,0,2,4,6,8,0];function RO(e,t=127.5){const n=new Array(12);return n[0]=q2(e,t),n[1]=Gn(e,345,t),n[2]=Gn(e,15,t),n[3]=Gn(e,45,t),n[4]=Gn(e,75,t),n[5]=Gn(e,105,t),n[6]=Gn(e,135,t),n[7]=Gn(e,165,t),n[8]=Gn(e,195,t),n[9]=Gn(e,225,t),n[10]=Gn(e,255,t),n[11]=Gn(e+1,285,t),n.map(s=>new Date(s.getTime()+1800*1e3))}function LO(e,t=127.5){const{useYear:n}=Z2(e,t),s=RO(n,t);let o=0;for(let u=0;u<12;u++)e>=s[u]&&(o=u);return{monthIndex:o+1,useYear:n,boundaries:s}}function BO(e,t=127.5){const n=DO(e,t),s=Bs..indexOf(n);if(s<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return CO[s]}function PO(e,t,n=127.5){return(BO(e,n)+(t-1))%10}function jt(e,t=127.5){if(!Y2(e))return"";const{monthIndex:n}=LO(e,t),s=(2+(n-1))%12,o=Bs.[s],l=PO(e,n,t);return Bs.[l]+o}const V2=(e,t)=>(e%t+t)%t;function K2(e,t,n,s=0,o=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),f=2-u+Math.floor(u/4),m=(s+o/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+f-1524.5}function $O(e,t){const n=e.getHours(),s=e.getMinutes(),o=n*60+s,l=W2(e);return t===""&&l===""?o>=1380?1:0:t===""&&(l===""||l==="")?o<180?-1:0:(o<0,0)}function IO(e,t){const s=e.getHours()*60+e.getMinutes();return t===""?s>=1380?1:0:t===""&&s<180?-1:0}const Wf={JDN:2445731,idx:0};function xt(e,t){const n=$O(e,t),s=new Date(e.getTime());s.setDate(s.getDate()+n);const o=K2(s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes()),l=Math.floor(o+.5),u=V2(l-Wf.JDN+Wf.idx,60),f=Jb[u];if(!f)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${o})`);return f}function zO(e,t){const n=new Date(e),s=IO(n,t),o=new Date(e.getTime());o.setDate(o.getDate()+s);const l=K2(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()),u=Math.floor(l+.5),f=V2(u-Wf.JDN+Wf.idx,60),m=Jb[f];if(!m)throw new Error(`getDayGanZhi: idx=${f} out of range (jdn=${u}, jd=${l})`);return m}function W2(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<pw.length;n++){const{branch:s,start:o,end:l}=pw[n];if(o<l){if(t>=o&&t<l)return s}else if(t>=o||t<l)return s}return""}function UO(e,t,n,s){const o=jr.indexOf(t);if(o<0)return"";let l=(o%5*2+n)%10;const u=e.getHours();return(s===""||s==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),jr[l]}function $s(e,t,n){e instanceof Date||(e=new Date(e));const s=W2(e),o=qr.indexOf(s),u=(n??xt(e,t)).charAt(0);return UO(e,u,o,t)+s}const bw=e=>{let t;const n=new Set,s=(p,y)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=y??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(S=>S(t,x))}},o=()=>t,f={setState:s,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(s,o,f);return f},HO=(e=>e?bw(e):bw),GO=e=>e;function FO(e,t=GO){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const yw=e=>{const t=HO(e),n=s=>FO(t,s);return Object.assign(n,t),n},gd=(e=>e?yw(e):yw);function qO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),f=(l=n.getItem(o))!=null?l:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const cb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return cb(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return cb(s)(n)}}}},YO=(e,t)=>(n,s,o)=>{let l={storage:qO(()=>localStorage),partialize:k=>k,version:0,merge:(k,A)=>({...A,...k}),...t},u=!1;const f=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},s,o);const y=()=>{const k=l.partialize({...s()});return p.setItem(l.name,{state:k,version:l.version})},_=o.setState;o.setState=(k,A)=>(_(k,A),y());const x=e((...k)=>(n(...k),y()),s,o);o.getInitialState=()=>x;let S;const T=()=>{var k,A;if(!p)return;u=!1,f.forEach(P=>{var N;return P((N=s())!=null?N:x)});const M=((A=l.onRehydrateStorage)==null?void 0:A.call(l,(k=s())!=null?k:x))||void 0;return cb(p.getItem.bind(p))(l.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==l.version){if(l.migrate){const N=l.migrate(P.state,P.version);return N instanceof Promise?N.then(D=>[!0,D]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var N;const[D,R]=P;if(S=l.merge(R,(N=s())!=null?N:x),n(S,!0),D)return y()}).then(()=>{M?.(S,void 0),S=s(),u=!0,m.forEach(P=>P(S))}).catch(P=>{M?.(void 0,P)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(f.add(k),()=>{f.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),S||x},X2=YO;var Vi={},Yh={},ub=function(e,t){return ub=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},ub(e,t)};function J2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ub(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xf=function(){return Xf=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Xf.apply(this,arguments)};function Ac(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}function Q2(e,t,n,s){var o=arguments.length,l=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,s);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(l=(o<3?u(l):o>3?u(t,n,l):u(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}function eE(e,t){return function(n,s){t(n,s,e)}}function tE(e,t,n,s,o,l){function u(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=s.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!t&&e?s.static?e:e.prototype:null,y=t||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),_,x=!1,S=n.length-1;S>=0;S--){var T={};for(var k in s)T[k]=k==="access"?{}:s[k];for(var k in s.access)T.access[k]=s.access[k];T.addInitializer=function(M){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(M||null))};var A=(0,n[S])(f==="accessor"?{get:y.get,set:y.set}:y[m],T);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(_=u(A.get))&&(y.get=_),(_=u(A.set))&&(y.set=_),(_=u(A.init))&&o.unshift(_)}else(_=u(A))&&(f==="field"?o.unshift(_):y[m]=_)}p&&Object.defineProperty(p,s.name,y),x=!0}function nE(e,t,n){for(var s=arguments.length>2,o=0;o<t.length;o++)n=s?t[o].call(e,n):t[o].call(e);return s?n:void 0}function rE(e){return typeof e=="symbol"?e:"".concat(e)}function sE(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function iE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,s){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(s.next(y))}catch(_){u(_)}}function m(y){try{p(s.throw(y))}catch(_){u(_)}}function p(y){y.done?l(y.value):o(y.value).then(f,m)}p((s=s.apply(e,t||[])).next())})}function aE(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(y){return m([p,y])}}function m(p){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(s=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],o=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Nm=Object.create?(function(e,t,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}):(function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]});function oE(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Nm(t,e,n)}function Jf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ey(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,l=[],u;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(u)throw u.error}}return l}function lE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ey(arguments[t]));return e}function cE(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var s=Array(e),o=0,t=0;t<n;t++)for(var l=arguments[t],u=0,f=l.length;u<f;u++,o++)s[o]=l[u];return s}function uE(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,l;s<o;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))}function vc(e){return this instanceof vc?(this.v=e,this):new vc(e)}function dE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(S){return function(T){return Promise.resolve(T).then(S,_)}}function f(S,T){s[S]&&(o[S]=function(k){return new Promise(function(A,M){l.push([S,k,A,M])>1||m(S,k)})},T&&(o[S]=T(o[S])))}function m(S,T){try{p(s[S](T))}catch(k){x(l[0][3],k)}}function p(S){S.value instanceof vc?Promise.resolve(S.value.v).then(y,_):x(l[0][2],S)}function y(S){m("next",S)}function _(S){m("throw",S)}function x(S,T){S(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function hE(e){var t,n;return t={},s("next"),s("throw",function(o){throw o}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(o,l){t[o]=e[o]?function(u){return(n=!n)?{value:vc(e[o](u)),done:!1}:l?l(u):u}:l}}function fE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jf=="function"?Jf(e):e[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=e[l]&&function(u){return new Promise(function(f,m){u=e[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}function mE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var ZO=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},db=function(e){return db=Object.getOwnPropertyNames||function(t){var n=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[n.length]=s);return n},db(e)};function pE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=db(e),s=0;s<n.length;s++)n[s]!=="default"&&Nm(t,e,n[s]);return ZO(t,e),t}function gE(e){return e&&e.__esModule?e:{default:e}}function bE(e,t,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(e):s?s.value:t.get(e)}function yE(e,t,n,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function vE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function _E(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],n&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:s,async:n})}else n&&e.stack.push({async:!0});return t}var VO=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var s=new Error(n);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function xE(e){function t(l){e.error=e.hasError?new VO(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,s=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&s===1)return s=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(o,function(u){return t(u),o()})}else s|=1}catch(u){t(u)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function wE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,o,l,u){return s?t?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):e}const KO={__extends:J2,__assign:Xf,__rest:Ac,__decorate:Q2,__param:eE,__esDecorate:tE,__runInitializers:nE,__propKey:rE,__setFunctionName:sE,__metadata:iE,__awaiter:Ze,__generator:aE,__createBinding:Nm,__exportStar:oE,__values:Jf,__read:ey,__spread:lE,__spreadArrays:cE,__spreadArray:uE,__await:vc,__asyncGenerator:dE,__asyncDelegator:hE,__asyncValues:fE,__makeTemplateObject:mE,__importStar:pE,__importDefault:gE,__classPrivateFieldGet:bE,__classPrivateFieldSet:yE,__classPrivateFieldIn:vE,__addDisposableResource:_E,__disposeResources:xE,__rewriteRelativeImportExtension:wE},WO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:_E,get __assign(){return Xf},__asyncDelegator:hE,__asyncGenerator:dE,__asyncValues:fE,__await:vc,__awaiter:Ze,__classPrivateFieldGet:bE,__classPrivateFieldIn:vE,__classPrivateFieldSet:yE,__createBinding:Nm,__decorate:Q2,__disposeResources:xE,__esDecorate:tE,__exportStar:oE,__extends:J2,__generator:aE,__importDefault:gE,__importStar:pE,__makeTemplateObject:mE,__metadata:iE,__param:eE,__propKey:rE,__read:ey,__rest:Ac,__rewriteRelativeImportExtension:wE,__runInitializers:nE,__setFunctionName:sE,__spread:lE,__spreadArray:uE,__spreadArrays:cE,__values:Jf,default:KO},Symbol.toStringTag,{value:"Module"})),XO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Om=class extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}},SE=class extends Om{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},hb=class extends Om{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},fb=class extends Om{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Qf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qf||(Qf={}));class JO{constructor(t,{headers:n={},customFetch:s,region:o=Qf.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=XO(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,s={}){var o;let l,u;try{const{headers:f,method:m,body:p,signal:y,timeout:_}=s;let x={},{region:S}=s;S||(S=this.region);const T=new URL(`${this.url}/${n}`);S&&S!=="any"&&(x["x-region"]=S,T.searchParams.set("forceFunctionRegion",S));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let A=y;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),y?(A=u.signal,y.addEventListener("abort",()=>u.abort())):A=u.signal);const M=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:k,signal:A}).catch(R=>{throw new SE(R)}),P=M.headers.get("x-relay-error");if(P&&P==="true")throw new hb(M);if(!M.ok)throw new fb(M);let N=((o=M.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return N==="application/json"?D=yield M.json():N==="application/octet-stream"||N==="application/pdf"?D=yield M.blob():N==="text/event-stream"?D=M:N==="multipart/form-data"?D=yield M.formData():D=yield M.text(),{data:D,error:null,response:M}}catch(f){return{data:null,error:f,response:f instanceof fb||f instanceof hb?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const QO=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Qf},FunctionsClient:JO,FunctionsError:Om,FunctionsFetchError:SE,FunctionsHttpError:fb,FunctionsRelayError:hb},Symbol.toStringTag,{value:"Module"})),EE=md(QO);var mr={};const jc=md(WO);var Zh={},Vh={},Kh={},Wh={},Xh={},Jh={},vw;function TE(){if(vw)return Jh;vw=1,Object.defineProperty(Jh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Jh.default=e,Jh}var _w;function kE(){if(_w)return Xh;_w=1,Object.defineProperty(Xh,"__esModule",{value:!0});const t=jc.__importDefault(TE());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,y,_,x;let S=null,T=null,k=null,A=m.status,M=m.statusText;if(m.ok){if(this.method!=="HEAD"){const R=await m.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=R:T=JSON.parse(R))}const N=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");N&&D&&D.length>1&&(k=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,A=406,M="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const N=await m.text();try{S=JSON.parse(N),Array.isArray(S)&&m.status===404&&(T=[],S=null,A=200,M="OK")}catch{m.status===404&&N===""?(A=204,M="No Content"):S={message:N}}if(S&&this.isMaybeSingle&&(!((x=S?.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,A=200,M="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:k,status:A,statusText:M}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,y,_,x,S,T;let k="";const A=m?.cause;if(A){const M=(p=A?.message)!==null&&p!==void 0?p:"",P=(y=A?.code)!==null&&y!==void 0?y:"";k=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=A?.name)!==null&&x!==void 0?x:"Error"}: ${M}`,P&&(k+=` (${P})`),A?.stack&&(k+=`
${A.stack}`)}else k=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}};return Xh.default=n,Xh}var xw;function AE(){if(xw)return Wh;xw=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=jc.__importDefault(kE());let n=class extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return Wh.default=n,Wh}var ww;function ty(){if(ww)return Kh;ww=1,Object.defineProperty(Kh,"__esModule",{value:!0});const t=jc.__importDefault(AE()),n=new RegExp("[,()]");let s=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}};return Kh.default=s,Kh}var Sw;function jE(){if(Sw)return Vh;Sw=1,Object.defineProperty(Vh,"__esModule",{value:!0});const t=jc.__importDefault(ty());let n=class{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const y=(o??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Vh.default=n,Vh}var Ew;function eD(){if(Ew)return Zh;Ew=1,Object.defineProperty(Zh,"__esModule",{value:!0});const e=jc,t=e.__importDefault(jE()),n=e.__importDefault(ty());let s=class NE{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new NE(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var y;let _;const x=new URL(`${this.url}/rpc/${l}`);let S;f||m?(_=f?"HEAD":"GET",Object.entries(u).filter(([k,A])=>A!==void 0).map(([k,A])=>[k,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([k,A])=>{x.searchParams.append(k,A)})):(_="POST",S=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:_,url:x,headers:T,schema:this.schemaName,body:S,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Zh.default=s,Zh}var Tw;function OE(){if(Tw)return mr;Tw=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.PostgrestError=mr.PostgrestBuilder=mr.PostgrestTransformBuilder=mr.PostgrestFilterBuilder=mr.PostgrestQueryBuilder=mr.PostgrestClient=void 0;const e=jc,t=e.__importDefault(eD());mr.PostgrestClient=t.default;const n=e.__importDefault(jE());mr.PostgrestQueryBuilder=n.default;const s=e.__importDefault(ty());mr.PostgrestFilterBuilder=s.default;const o=e.__importDefault(AE());mr.PostgrestTransformBuilder=o.default;const l=e.__importDefault(kE());mr.PostgrestBuilder=l.default;const u=e.__importDefault(TE());return mr.PostgrestError=u.default,mr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},mr}class DE{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const tD="2.86.2",nD=`realtime-js/${tD}`,ME="1.0.0",rD="2.0.0",kw=ME,mb=1e4,sD=1e3,iD=100;var el;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(el||(el={}));var Bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bn||(Bn={}));var ni;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ni||(ni={}));var pb;(function(e){e.websocket="websocket"})(pb||(pb={}));var tl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tl||(tl={}));class aD{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const o=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,s;const o=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,s){var o,l;const u=t.topic,f=(o=t.ref)!==null&&o!==void 0?o:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(S),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,f.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,_.length),T.setUint8(k++,n),Array.from(m,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(f,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(u,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(p,M=>T.setUint8(k++,M.charCodeAt(0))),Array.from(_,M=>T.setUint8(k++,M.charCodeAt(0)));var A=new Uint8Array(S.byteLength+s.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(s),S.byteLength),A.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[o,l,u,f,m]=s;return n({join_ref:o,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,s){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=s.decode(t.slice(m,m+o));m=m+o;const y=s.decode(t.slice(m,m+l));m=m+l;const _=s.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,T={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class CE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const Aw=(e,t,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=oD(u,e,t,o),l),{}):{}},oD=(e,t,n,s)=>{const o=t.find(f=>f.name===e),l=o?.type,u=n[e];return l&&!s.includes(l)?RE(l,u):gb(u)},RE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return dD(t,n)}switch(e){case Kt.bool:return lD(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return cD(t);case Kt.json:case Kt.jsonb:return uD(t);case Kt.timestamp:return hD(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return gb(t);default:return gb(t)}},gb=e=>e,lD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>RE(t,f))}return e},hD=e=>typeof e=="string"?e.replace(" ","T"):e,LE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class J0{constructor(t,n,s={},o=mb){this.channel=t,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bb||(bb={}));let BE=class zf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zf.syncState(this.state,o,l,u),this.pendingDiffs.forEach(m=>{this.state=zf.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=zf.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,o){const l=this.cloneDeep(t),u=this.transformState(n),f={},m={};return this.map(l,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const _=l[p];if(_){const x=y.map(A=>A.presence_ref),S=_.map(A=>A.presence_ref),T=y.filter(A=>S.indexOf(A.presence_ref)<0),k=_.filter(A=>x.indexOf(A.presence_ref)<0);T.length>0&&(f[p]=T),k.length>0&&(m[p]=k)}else f[p]=y}),this.syncDiff(l,{joins:f,leaves:m},s,o)}static syncDiff(t,n,s,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const y=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(m),y.length>0){const _=t[f].map(S=>S.presence_ref),x=y.filter(S=>_.indexOf(S.presence_ref)<0);t[f].unshift(...x)}s(f,y,m)}),this.map(u,(f,m)=>{let p=t[f];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),t[f]=p,o(f,p,m),p.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const o=t[s];return"metas"in o?n[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var yb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(yb||(yb={}));var pc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(pc||(pc={}));var Si;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Si||(Si={}));const fD=Bn;let PE=class $E{constructor(t,n={config:{}},s){var o,l;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new J0(this,ni.join,this.params,this.timeout),this.rejoinTimer=new CE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ni.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new BE(this),this.broadcastEndpointURL=LE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[pc.PRESENCE]&&this.bindings[pc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Si.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Si.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){t?.(Si.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,A=(T=k?.length)!==null&&T!==void 0?T:0,M=[];for(let P=0;P<A;P++){const N=k[P],{filter:{event:D,schema:R,table:z,filter:F}}=N,q=S&&S[P];if(q&&q.event===D&&q.schema===R&&q.table===z&&q.filter===F)M.push(Object.assign(Object.assign({},N),{id:q.id}));else{this.unsubscribe(),this.state=Bn.errored,t?.(Si.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,t&&t(Si.SUBSCRIBED);return}}).receive("error",S=>{this.state=Bn.errored,t?.(Si.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Si.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===Bn.joined&&t===pc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ni.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new J0(this,ni.leave,{},t),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new J0(this,t,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>iD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var o,l;const u=t.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=ni;if(s&&[f,m,p,y].indexOf(u)>=0&&s!==this._joinRef())return;let x=this._onMessage(u,n,s);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var T,k,A;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(k=S.filter)===null||k===void 0?void 0:k.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(S=>S.callback(x,s)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var T,k,A,M,P,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const D=S.id,R=(T=S.filter)===null||T===void 0?void 0:T.event;return D&&((k=n.ids)===null||k===void 0?void 0:k.includes(D))&&(R==="*"||R?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const D=(P=(M=S?.filter)===null||M===void 0?void 0:M.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return D==="*"||D===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:A,commit_timestamp:M,type:P,errors:N}=T;x=Object.assign(Object.assign({},{schema:k,table:A,commit_timestamp:M,eventType:P,new:{},old:{},errors:N}),this._getPayloadRecords(T))}S.callback(x,s)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&$E.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ni.close,{},t)}_onError(t){this._on(ni.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Aw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Aw(t.columns,t.old_record)),n}};const Q0=()=>{},Qh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mD=[1e3,2e3,5e3,1e4],pD=1e4,gD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let bD=class{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mb,this.transport=null,this.heartbeatIntervalMs=Qh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Q0,this.ref=0,this.reconnectTimer=null,this.vsn=kw,this.logger=Q0,this.conn=null,this.sendBuffer=[],this.serializer=new aD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${pb.websocket}`,this.httpEndpoint=LE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case el.connecting:return tl.Connecting;case el.open:return tl.Open;case el.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new PE(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:s,payload:o,ref:l}=t,u=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===el.open||this.conn.readyState===el.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ni.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${s}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([gD],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:nD};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ni.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new CE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,o,l,u,f,m,p,y,_,x,S;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:mb,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Qh.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Q0,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:kw,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>mD[T-1]||pD),this.vsn){case ME:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((T,k)=>k(JSON.stringify(T))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:((T,k)=>k(JSON.parse(T)));break;case rD:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const yD=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:fD,get REALTIME_LISTEN_TYPES(){return pc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return yb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return bb},get REALTIME_SUBSCRIBE_STATES(){return Si},RealtimeChannel:PE,RealtimeClient:bD,RealtimePresence:BE,WebSocketFactory:DE},Symbol.toStringTag,{value:"Module"})),IE=md(yD);class bd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zE extends bd{constructor(t,n,s){super(t),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class em extends bd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ny=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),vD=()=>Response,vb=e=>{if(Array.isArray(e))return e.map(n=>vb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=vb(s)}),t},_D=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xD=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),eg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},wD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const s=yield vD();e instanceof s&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new zE(eg(o),l,u))}).catch(o=>{t(new em(eg(o),o))}):t(new em(eg(e),e))}),SD=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(_D(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function yd(e,t,n,s,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,SD(t,s,o,l)).then(m=>{if(!m.ok)throw m;return s?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>wD(m,f,s))})})}function ed(e,t,n,s){return Ze(this,void 0,void 0,function*(){return yd(e,"GET",t,n,s)})}function ti(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return yd(e,"POST",t,s,o,n)})}function _b(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return yd(e,"PUT",t,s,o,n)})}function ED(e,t,n,s){return Ze(this,void 0,void 0,function*(){return yd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function ry(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return yd(e,"DELETE",t,s,o,n)})}class TD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var UE;class kD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[UE]="BlobDownloadBuilder",this.promise=null}asStream(){return new TD(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}UE=Symbol.toStringTag;const AD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jD{constructor(t,n={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=s,this.fetch=ny(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,s,o){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},jw),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),_=yield(t=="PUT"?_b:ti)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ln(l))return{data:null,error:l};throw l}})}upload(t,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,s)})}uploadToSignedUrl(t,n,s,o){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:jw.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",p.cacheControl)):(m=s,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const _=yield _b(this.fetch,f.toString(),m,{headers:y});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ln(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield ti(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new bd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ln(s))return{data:null,error:s};throw s}})}update(t,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,s)})}move(t,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}copy(t,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield ti(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,s){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield ti(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,s){return Ze(this,void 0,void 0,function*(){try{const o=yield ti(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(t),m=()=>ed(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new kD(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const s=yield ed(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vb(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ln(s))return{data:null,error:s};throw s}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield ED(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ln(s)&&s instanceof em){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,n){const s=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,s){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},AD),n),{prefix:t||""});return{data:yield ti(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield ti(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ln(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const HE="2.86.2",GE={"X-Client-Info":`storage-js/${HE}`};class ND{constructor(t,n={},s,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GE),n),this.fetch=ny(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield ed(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield ti(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield _b(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ln(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var td=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function OD(e,t,n){const s=new URL(t,e);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function DD(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function MD(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:o,body:l,headers:u}){const f=OD(e.baseUrl,s,o),m=await DD(e.auth),p=await t(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&y?JSON.parse(y):y;if(!p.ok){const S=_?x:void 0,T=S?.error;throw new td(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:p.status,headers:p.headers,data:x}}}}function ef(e){return e.join("")}var CD=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ef(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ef(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ef(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ef(e.namespace)}`}),!0}catch(t){if(t instanceof td&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof td&&n.status===409)return;throw n}}};function Jl(e){return e.join("")}var RD=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof td&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof td&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},LD=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=MD({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new CD(this.client,t),this.tableOps=new RD(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class FE{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GE),n),this.fetch=ny(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const s=n.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield ed(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!xD(t))throw new bd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new LD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const sy={"X-Client-Info":`storage-js/${HE}`,"Content-Type":"application/json"};class iy extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Uf extends iy{constructor(t,n,s){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qE extends iy{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var xb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(xb||(xb={}));const Dm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),BD=()=>Response,YE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},PD=e=>Array.from(new Float32Array(e)),$D=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},Nw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ID=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const o=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";t(new Uf(Nw(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Uf(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new Uf(f,o,u))}}else t(new qE(Nw(e),e))}),zD=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return s?(YE(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),n)):o};function UD(e,t,n,s,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,zD(t,s,o,l)).then(m=>{if(!m.ok)throw m;if(s?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>ID(m,f,s))})})}function cs(e,t,n,s,o){return Ze(this,void 0,void 0,function*(){return UD(e,"POST",t,s,o,n)})}class ZE{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sy),n),this.fetch=Dm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield cs(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fr(s))return{data:null,error:s};throw s}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield cs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fr(s))return{data:null,error:s};throw s}})}}class VE{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sy),n),this.fetch=Dm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield cs(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield cs(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield cs(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class KE{constructor(t,n={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sy),n),this.fetch=Dm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield cs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield cs(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield cs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class WE extends KE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new XE(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class XE extends ZE{constructor(t,n,s,o){super(t,n,o),this.vectorBucketName=s}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new JE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class JE extends VE{constructor(t,n,s,o,l){super(t,n,l),this.vectorBucketName=s,this.indexName=o}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class HD extends ND{constructor(t,n={},s,o){super(t,n,s,o)}from(t){return new jD(this.url,this.headers,t,this.fetch)}get vectors(){return new WE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new FE(this.url+"/iceberg",this.headers,this.fetch)}}const GD=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:FE,StorageApiError:zE,StorageClient:HD,StorageError:bd,StorageUnknownError:em,StorageVectorsApiError:Uf,StorageVectorsClient:WE,StorageVectorsError:iy,get StorageVectorsErrorCode(){return xb},StorageVectorsUnknownError:qE,VectorBucketApi:KE,VectorBucketScope:XE,VectorDataApi:VE,VectorIndexApi:ZE,VectorIndexScope:JE,isPlainObject:YE,isStorageError:ln,isStorageVectorsError:Fr,normalizeToFloat32:PD,resolveFetch:Dm,resolveResponse:BD,validateVectorDimension:$D},Symbol.toStringTag,{value:"Module"})),FD=md(GD);var tg={},Mu={},Ow;function qD(){return Ow||(Ow=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.version=void 0,Mu.version="2.86.2"),Mu}var Dw;function YD(){return Dw||(Dw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=qD();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(tg)),tg}var ng={},Mw;function ZD(){return Mw||(Mw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const s=(o,l,u)=>{const f=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,y)=>{var _;const x=(_=await l())!==null&&_!==void 0?_:o;let S=new m(y?.headers);return S.has("apikey")||S.set("apikey",o),S.has("Authorization")||S.set("Authorization",`Bearer ${x}`),f(p,Object.assign(Object.assign({},y),{headers:S}))}};e.fetchWithAuth=s})(ng)),ng}var Ki={},Cw;function VD(){if(Cw)return Ki;Cw=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.isBrowser=void 0,Ki.uuid=e,Ki.ensureTrailingSlash=t,Ki.applySettingDefaults=s,Ki.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,f=l=="x"?u:u&3|8;return f.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Ki.isBrowser=n;function s(l,u){var f,m;const{db:p,auth:y,realtime:_,global:x}=l,{db:S,auth:T,realtime:k,global:A}=u,M={db:Object.assign(Object.assign({},S),p),auth:Object.assign(Object.assign({},T),y),realtime:Object.assign(Object.assign({},k),_),storage:{},global:Object.assign(Object.assign(Object.assign({},A),x),{headers:Object.assign(Object.assign({},(f=A?.headers)!==null&&f!==void 0?f:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?M.accessToken=l.accessToken:delete M.accessToken,M}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ki}var Cu={};const QE="2.86.2",lc=30*1e3,wb=3,rg=wb*lc,KD="http://localhost:9999",WD="supabase.auth.token",XD={"X-Client-Info":`gotrue-js/${QE}`},Sb="X-Supabase-Api-Version",eT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=600*1e3;let _c=class extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let tT=class extends _c{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}};function nT(e){return We(e)&&e.name==="AuthApiError"}let qa=class extends _c{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},na=class extends _c{constructor(t,n,s,o){super(t,s,o),this.name=n,this.status=s}},Hr=class extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function rT(e){return We(e)&&e.name==="AuthSessionMissingError"}let Ko=class extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Gu=class extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Fu=class extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function sT(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let Eb=class extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},tm=class extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Hf(e){return We(e)&&e.name==="AuthRetryableFetchError"}let Tb=class extends na{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}};function eM(e){return We(e)&&e.name==="AuthWeakPasswordError"}let nm=class extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const rm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rw=` 	
\r=`.split(""),tM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rw.length;t+=1)e[Rw[t].charCodeAt(0)]=-2;for(let t=0;t<rm.length;t+=1)e[rm[t].charCodeAt(0)]=t;return e})();function Lw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(rm[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(rm[s]),t.queuedBits-=6}}function iT(e,t,n){const s=tM[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Bw(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{sM(u,s,n)};for(let u=0;u<e.length;u+=1)iT(e.charCodeAt(u),o,l);return t.join("")}function nM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function rM(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}nM(s,t)}}function sM(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function gc(e){const t=[],n={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)iT(e.charCodeAt(o),n,s);return new Uint8Array(t)}function iM(e){const t=[];return rM(e,n=>t.push(n)),new Uint8Array(t)}function nl(e){const t=[],n={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>Lw(o,n,s)),Lw(null,n,s),t.join("")}function aM(e){return Math.round(Date.now()/1e3)+e}function oM(){return Symbol("auth-callback")}const ir=()=>typeof window<"u"&&typeof document<"u",zo={tested:!1,writable:!1},aT=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zo.tested)return zo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zo.tested=!0,zo.writable=!0}catch{zo.tested=!0,zo.writable=!1}return zo.writable};function lM(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((s,o)=>{t[o]=s}),t}const oT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Uo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rr=async(e,t)=>{await e.removeItem(t)};class Mm{constructor(){this.promise=new Mm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Mm.promiseConstructor=Promise;function sg(e){const t=e.split(".");if(t.length!==3)throw new nm("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!JD.test(t[s]))throw new nm("JWT not in base64url format");return{header:JSON.parse(Bw(t[0])),payload:JSON.parse(Bw(t[1])),signature:gc(t[2]),raw:{header:t[0],payload:t[1]}}}async function uM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dM(e,t){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){s(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function hM(e){return("0"+e.toString(16)).substr(-2)}function fM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,hM).join("")}async function mM(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function pM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await mM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ql(e,t,n=!1){const s=fM();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await cc(e,`${t}-code-verifier`,o);const l=await pM(s);return[l,s===l?"plain":"s256"]}const gM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bM(e){const t=e.headers.get(Sb);if(!t||!t.match(gM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function vM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _M=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(e){if(!_M.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ig(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xM(e,t){return new Proxy(e,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,o)}})}function Pw(e){return JSON.parse(JSON.stringify(e))}const Wo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wM=[502,503,504];async function $w(e){var t;if(!cM(e))throw new tm(Wo(e),0);if(wM.includes(e.status))throw new tm(Wo(e),e.status);let n;try{n=await e.json()}catch(l){throw new qa(Wo(l),l)}let s;const o=bM(e);if(o&&o.getTime()>=eT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Tb(Wo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Hr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Tb(Wo(n),e.status,n.weak_password.reasons);throw new tT(Wo(n),e.status||500,s)}const SM=(e,t,n,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function rt(e,t,n,s){var o;const l=Object.assign({},s?.headers);l[Sb]||(l[Sb]=eT["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await EM(e,t,n+f,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function EM(e,t,n,s,o,l){const u=SM(t,s,o,l);let f;try{f=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new tm(Wo(m),0)}if(f.ok||await $w(f),s?.noResolveJson)return f;try{return await f.json()}catch(m){await $w(m)}}function Qs(e){var t;let n=null;AM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=aM(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function Iw(e){const t=Qs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ya(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function TM(e){return{data:e,error:null}}function kM(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l}=e,u=Ac(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function zw(e){return e}function AM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Gf=["global","local","others"];let ay=class{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=oT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Gf[0]){if(Gf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gf.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ya})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=Ac(t,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:kM,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ya})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:zw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){ec(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ya})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ec(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ya})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){ec(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ya})}catch(s){if(We(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){ec(t.userId);try{const{data:n,error:s}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ec(t.userId),ec(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:zw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(We(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function Uw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Xo={debug:!!(globalThis&&aT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let lT=class extends oy{};class jM extends oy{}async function cT(e,t,n){Xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Xo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Hw={};async function NM(e,t,n){var s;const o=(s=Hw[e])!==null&&s!==void 0?s:Promise.resolve(),l=Promise.race([o.catch(()=>null),t>=0?new Promise((u,f)=>{setTimeout(()=>{f(new jM(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return Hw[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function OM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function uT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function DM(e){return parseInt(e,16)}function MM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function CM(e){var t;const{chainId:n,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:y,uri:_,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=uT(e.address),T=y?`${y}://${s}`:s,k=e.statement?`${e.statement}
`:"",A=`${T} wants you to sign in with your Ethereum account:
${S}

${k}`;let M=`URI: ${_}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(M+=`
Expiration Time: ${o.toISOString()}`),f&&(M+=`
Not Before: ${f.toISOString()}`),m&&(M+=`
Request ID: ${m}`),p){let P=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);P+=`
- ${N}`}M+=P}return`${A}
${M}`}class Pn extends Error{constructor({message:t,code:n,cause:s,name:o}){var l;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class sm extends Pn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function RM({error:e,options:t}){var n,s,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(dT(u)){if(l.rp.id!==u)return new Pn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function LM({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(dT(s)){if(n.rpId!==s)return new Pn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class BM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const PM=new BM;function $M(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,o=Ac(e,["challenge","user","excludeCredentials"]),l=gc(t).buffer,u=Object.assign(Object.assign({},n),{id:gc(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:gc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function IM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=Ac(e,["challenge","allowCredentials"]),o=gc(t).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:gc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function zM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:nl(new Uint8Array(e.response.attestationObject)),clientDataJSON:nl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function UM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:nl(new Uint8Array(o.authenticatorData)),clientDataJSON:nl(new Uint8Array(o.clientDataJSON)),signature:nl(new Uint8Array(o.signature)),userHandle:o.userHandle?nl(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function dT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Gw(){var e,t;return!!(ir()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function HM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:RM({error:t,options:e})}}}async function GM(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sm("Browser returned unexpected credential type",t)}:{data:null,error:new sm("Empty credential response",t)}}catch(t){return{data:null,error:LM({error:t,options:e})}}}const FM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function im(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(t(u)){const f=s[l];t(f)?s[l]=im(f,u):s[l]=im(u)}else s[l]=u}return s}function YM(e,t){return im(FM,e,t||{})}function ZM(e,t){return im(qM,e,t||{})}class VM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:f};const m=o??PM.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=YM(u.webauthn.credential_options.publicKey,l?.create),{data:y,error:_}=await HM({publicKey:p,signal:m});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}case"request":{const p=ZM(u.webauthn.credential_options.publicKey,l?.request),{data:y,error:_}=await GM(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new qa("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new _c("rpId is required for WebAuthn authentication")};try{if(!Gw())return{data:null,error:new qa("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:s,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new qa("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new _c("rpId is required for WebAuthn registration")};try{if(!Gw())return{data:null,error:new qa("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new qa("Unexpected error in register",u)}}}}OM();const KM={url:KD,storageKey:WD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Fw(e,t,n){return await n()}const tc={};let ly=class kb{get jwks(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=tc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tc[this.storageKey]=Object.assign(Object.assign({},tc[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},KM),t);if(this.storageKey=l.storageKey,this.instanceID=(n=kb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,kb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ir()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ay({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=oT(l.fetch),this.lock=l.lock||Fw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:ir()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=cT:this.lock=Fw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:aT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${QE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(ir()&&(n=lM(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),ir()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),sT(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new qa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,o;try{const l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qs}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,s,o;try{let l;if("email"in t){const{email:y,password:_,options:x}=t;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Ql(this.storage,this.storageKey)),l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:y,password:_,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:T},xform:Qs})}else if("phone"in t){const{phone:y,password:_,options:x}=t;l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Qs})}else throw new Gu("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await rr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Iw})}else if("phone"in t){const{phone:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Iw})}else throw new Gu("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Ko;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,o,l,u,f,m,p,y,_,x;let S,T;if("message"in t)S=t.message,T=t.signature;else{const{chain:k,wallet:A,statement:M,options:P}=t;let N;if(ir())if(typeof A=="object")N=A;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")N=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=A}const D=new URL((n=P?.url)!==null&&n!==void 0?n:window.location.href),R=await N.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=uT(R[0]);let F=(s=P?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!F){const Y=await N.request({method:"eth_chainId"});F=DM(Y)}const q={domain:D.host,address:z,statement:M,uri:D.href,version:"1",chainId:F,nonce:(o=P?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=P?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=P?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=P?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=P?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=P?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=CM(q),T=await N.request({method:"personal_sign",params:[MM(S),z]})}try{const{data:k,error:A}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:T},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qs});if(A)throw A;if(!k||!k.session||!k.user){const M=new Ko;return this._returnResult({data:{user:null,session:null},error:M})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:A})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,s,o,l,u,f,m,p,y,_,x,S;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:A,wallet:M,statement:P,options:N}=t;let D;if(ir())if(typeof M=="object")D=M;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=M}const R=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),P?{statement:P}:null));let F;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")F=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)F=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)T=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),k=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${R.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(o=(s=N?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((_=(y=N?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(T),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=z}}try{const{data:A,error:M}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:nl(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Qs});if(M)throw M;if(!A||!A.session||!A.user){const P=new Ko;return this._returnResult({data:{user:null,session:null},error:P})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:M})}catch(A){if(We(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const n=await Uo(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Qs});if(await rr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Ko;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:s,token:o,access_token:l,nonce:u}=t,f=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qs}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Ko;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,o,l,u;try{if("email"in t){const{email:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ql(this.storage,this.storageKey));const{error:_}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:m}=t,{data:p,error:y}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:y})}throw new Gu("You must provide either an email or phone number.")}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,s;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:f}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Qs});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,s,o,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ql(this.storage,this.storageKey));const p=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:TM});return!((l=p.data)===null||l===void 0)&&l.url&&ir()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new Hr;const{error:o}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:l}=t,{error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:s,type:o,options:l}=t,{data:u,error:f}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Gu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<rg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const u=await Uo(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=ig()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=xM(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ya}):await this._useSession(async n=>{var s,o,l;const{data:u,error:f}=n;if(f)throw f;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hr}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Ya})})}catch(n){if(We(n))return rT(n)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Hr;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Ql(this.storage,this.storageKey));const{data:p,error:y}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:Ya});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hr;const n=Date.now()/1e3;let s=n,o=!0,l=null;const{payload:u}=sg(t.access_token);if(u.exp&&(s=u.exp,o=s<=n),o){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:u,error:f}=n;if(f)throw f;t=(s=u.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Hr;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ir())throw new Fu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Eb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Eb("No code detected.");const{data:P,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=t;if(!l||!f||!u||!p)throw new Fu("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(f);let x=y+_;m&&(x=parseInt(m));const S=x-y;S*1e3<=lc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const T=x-_;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,y);const{data:k,error:A}=await this._getUser(l);if(A)throw A;const M={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:t.type},error:null})}catch(s){if(We(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(nT(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=oM(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ql(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:o}=await this._useSession(async l=>{var u,f,m,p,y;const{data:_,error:x}=l;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return ir()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if(We(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:p,nonce:y}=t,_=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Qs}),{data:x,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Ko}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(o){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)throw u;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await dM(async o=>(o>0&&await uM(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qs})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Hf(l)&&Date.now()+u-s<lc})}catch(s){if(this._debug(n,"error",s),We(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),ir()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Uo(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await cc(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:ig()}else if(o&&!o.user&&!o.user){const u=await Uo(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await rr(this.storage,this.storageKey+"-user"),await cc(this.storage,this.storageKey,o)):o.user=ig()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${rg}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Hf(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new Hr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Mm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Hr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),We(l)){const u={data:null,error:l};return Hf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await cc(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Pw(o);await cc(this.storage,this.storageKey,l)}else{const o=Pw(n);await cc(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),lc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/lc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${lc}ms, refresh threshold is ${wb} ticks`),o<=wb&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof oy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ql(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?zM(t.webauthn.credential_response):UM(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:$M(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:IM(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=sg(s.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&ir()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&ir()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(f=>f.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===t),s&&this.jwks_cached_at+QD>o)return s;const{data:l,error:u}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(f=>f.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:S,error:T}=await this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});s=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:m}}=sg(s);n?.allowExpired||yM(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(s);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const y=vM(o.alg),_=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,iM(`${f}.${m}`)))throw new nm("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(We(s))return this._returnResult({data:null,error:s});throw s}}};ly.nextInstanceID={};const WM=ay,XM=ly,JM=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:WM,AuthApiError:tT,AuthClient:XM,AuthError:_c,AuthImplicitGrantRedirectError:Fu,AuthInvalidCredentialsError:Gu,AuthInvalidJwtError:nm,AuthInvalidTokenResponseError:Ko,AuthPKCEGrantCodeExchangeError:Eb,AuthRetryableFetchError:tm,AuthSessionMissingError:Hr,AuthUnknownError:qa,AuthWeakPasswordError:Tb,CustomAuthError:na,GoTrueAdminApi:ay,GoTrueClient:ly,NavigatorLockAcquireTimeoutError:lT,SIGN_OUT_SCOPES:Gf,isAuthApiError:nT,isAuthError:We,isAuthImplicitGrantRedirectError:sT,isAuthRetryableFetchError:Hf,isAuthSessionMissingError:rT,isAuthWeakPasswordError:eM,lockInternals:Xo,navigatorLock:cT,processLock:NM},Symbol.toStringTag,{value:"Module"})),hT=md(JM);var qw;function QM(){if(qw)return Cu;qw=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.SupabaseAuthClient=void 0;const e=hT;let t=class extends e.AuthClient{constructor(s){super(s)}};return Cu.SupabaseAuthClient=t,Cu}var Yw;function Zw(){if(Yw)return Yh;Yw=1,Object.defineProperty(Yh,"__esModule",{value:!0});const e=EE,t=OE(),n=IE,s=FD,o=YD(),l=ZD(),u=VD(),f=QM();class m{constructor(y,_,x){var S,T,k;this.supabaseUrl=y,this.supabaseKey=_;const A=(0,u.validateSupabaseUrl)(y);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const M=`sb-${A.hostname.split(".")[0]}-auth-token`,P={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:M}),global:o.DEFAULT_GLOBAL_OPTIONS},N=(0,u.applySettingDefaults)(x??{},P);this.storageKey=(S=N.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(T=N.global.headers)!==null&&T!==void 0?T:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(D,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=N.auth)!==null&&k!==void 0?k:{},this.headers,N.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(D=>this.realtime.setAuth(D)).catch(D=>console.warn("Failed to set initial Realtime auth token:",D)),this.rest=new t.PostgrestClient(new URL("rest/v1",A).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,_={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,_,x)}channel(y,_={config:{}}){return this.realtime.channel(y,_)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,_;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(_=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,storageKey:k,flowType:A,lock:M,debug:P,throwOnError:N},D,R){const z={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},z),D),storageKey:k,autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,flowType:A,lock:M,debug:P,throwOnError:N,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(F=>F.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,x)=>{this._handleTokenChanged(_,"CLIENT",x?.access_token)})}_handleTokenChanged(y,_,x){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Yh.default=m,Yh}var Vw;function eC(){return Vw||(Vw=1,(function(e){var t=Vi&&Vi.__createBinding||(Object.create?(function(y,_,x,S){S===void 0&&(S=x);var T=Object.getOwnPropertyDescriptor(_,x);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(y,S,T)}):(function(y,_,x,S){S===void 0&&(S=x),y[S]=_[x]})),n=Vi&&Vi.__exportStar||function(y,_){for(var x in y)x!=="default"&&!Object.prototype.hasOwnProperty.call(_,x)&&t(_,y,x)},s=Vi&&Vi.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=s(Zw());n(hT,e);var l=OE();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=EE;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(IE,e);var f=Zw();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return s(f).default}});const m=(y,_,x)=>new o.default(y,_,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const _=y.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Vi)),Vi}var fT=eC();const mT=cl(fT),tC=D2({__proto__:null,default:mT},[fT]),{PostgrestError:bU,FunctionsHttpError:yU,FunctionsFetchError:vU,FunctionsRelayError:_U,FunctionsError:xU,FunctionRegion:wU,SupabaseClient:SU,createClient:nC,GoTrueAdminApi:EU,GoTrueClient:TU,AuthAdminApi:kU,AuthClient:AU,navigatorLock:jU,NavigatorLockAcquireTimeoutError:NU,lockInternals:OU,processLock:DU,SIGN_OUT_SCOPES:MU,AuthError:CU,AuthApiError:RU,AuthUnknownError:LU,CustomAuthError:BU,AuthSessionMissingError:PU,AuthInvalidTokenResponseError:$U,AuthInvalidCredentialsError:IU,AuthImplicitGrantRedirectError:zU,AuthPKCEGrantCodeExchangeError:UU,AuthRetryableFetchError:HU,AuthWeakPasswordError:GU,AuthInvalidJwtError:FU,isAuthError:qU,isAuthApiError:YU,isAuthSessionMissingError:ZU,isAuthImplicitGrantRedirectError:VU,isAuthRetryableFetchError:KU,isAuthWeakPasswordError:WU,RealtimePresence:XU,RealtimeChannel:JU,RealtimeClient:QU,REALTIME_LISTEN_TYPES:eH,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:tH,REALTIME_PRESENCE_LISTEN_EVENTS:nH,REALTIME_SUBSCRIBE_STATES:rH,REALTIME_CHANNEL_STATES:sH}=mT||tC,it=nC("https://jouhybyquybxbnqztxum.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),pT="settings_v1",Ab=()=>{try{typeof window<"u"&&window.localStorage.removeItem(pT)}catch{}},rl={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",difficultyMode:!1,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},Kw=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],rC=e=>{const t=Array.isArray(e)?e.filter(s=>typeof s=="string"&&Kw.includes(s)):[],n=Kw.filter(s=>!t.includes(s));return[...t,...n]},bc=e=>({...rl,...e,sectionOrder:rC(e.sectionOrder)}),sC=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return bc(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return bc(n.settings)}}return bc(e??{})},iC=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};Ab();const Wn=gd()(X2((e,t)=>({settings:rl,syncing:!1,loaded:!1,setSettings:n=>e({settings:bc(n)}),setKey:(n,s)=>e({settings:bc({...t().settings,[n]:s})}),reset:()=>e({settings:rl}),loadFromServer:async()=>{try{e({syncing:!0}),Ab();const{data:{user:n},error:s}=await it.auth.getUser();if(s||!n){e({syncing:!1,loaded:!1});return}const{data:o,error:l}=await it.from("user_settings").select("payload").eq("user_id",n.id).single();if(l&&l.code!=="PGRST116"){console.error("loadFromServer(settings) error:",l),e({syncing:!1,loaded:!0});return}if(o?.payload){const u=sC(o.payload);e({settings:u,syncing:!1,loaded:!0}),iC(o.payload)&&await it.from("user_settings").upsert({user_id:n.id,payload:u,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(n){console.error("loadFromServer(settings) exception:",n),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),Ab();const{data:{user:s},error:o}=await it.auth.getUser();if(o||!s){e({syncing:!1});return}const l=bc(t().settings),{error:u}=await it.from("user_settings").upsert({user_id:s.id,payload:l,updated_at:new Date().toISOString()});u&&console.error("saveToServer(settings) error:",u),e({syncing:!1,loaded:!0})}catch(s){console.error("saveToServer(settings) exception:",s),e({syncing:!1})}}}),{name:pT,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function jb(e){const t=jr.indexOf(e);if(t!==-1)return jr[t];const n=ms..indexOf(e);return n!==-1?jr[n]:null}function gT(e){const t=qr.indexOf(e);if(t!==-1)return qr[t];const n=ms..indexOf(e);return n!==-1?qr[n]:null}function Ww(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function fs(e,t,n){if(t==="stem"){const s=jb(e);if(!s)return console.warn("Invalid stem:",e),"bg-neutral-700";const o=jr.indexOf(s),l=o>=0?TO[o]:void 0;return Ww(l,n)}else{const s=gT(e);if(!s)return console.warn("Invalid branch:",e),"bg-neutral-700";const o=qr.indexOf(s),l=o>=0?kO[o]:void 0;return Ww(l,n)}}function Ar(e,t){const n=jb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const s=jb(t.stem);if(!s)throw new Error(`getSipSin: invalid stem ${t.stem}`);return NO[n][s]}if(t.branch){const s=gT(t.branch);if(!s)throw new Error(`getSipSin: invalid branch ${t.branch}`);return OO[n][s]}throw new Error("getSipSin: stem or branch required")}const Cm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Rm={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function qu({branch:e,dayStem:t,mode:n="all",mapping:s="classic",variant:o="auto",isUnknownTime:l=!1}){const u=(s==="hgc"?Rm:Cm)[e]??[],f=n==="main"?[u[2]]:u,m=o==="white",p=m?"text-white":"text-neutral-800 dark:text-white",y=m?"border-white":"border-neutral-800 dark: border-neutral-200",_=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:f.map((x,S)=>x==="(-)"||l?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap`,children:"(-) ()"},S):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap 
            ${n==="main"||S===2?`jeonggi bg-neutral-500/50 ${_} font-bold`:""}`,children:[x," (",Ar(t,{stem:x}),")"]},S))})}const vd=gd(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),cy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},bT=Object.fromEntries(Object.entries(cy).map(([e,t])=>[t,e])),uy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},yT=Object.fromEntries(Object.entries(uy).map(([e,t])=>[t,e]));function Xw(e){return Bs..includes(e)}function Jw(e){return Bs..includes(e)}function aC(e){return ms..includes(e)}function oC(e){return ms..includes(e)}function Qw(e,t,n){return n===""?t==="stem"?cy[e]??e:uy[e]??e:t==="stem"?bT[e]??e:yT[e]??e}function e1(e){const t=bT[e]??e;return aC(t)?t:""}function lC(e){const t=yT[e]??e;return oC(t)?t:""}function cC(e){if(Xw(e))return e;const t=cy[e]??e;return Xw(t)?t:""}function uC(e){if(Jw(e))return e;const t=uy[e]??e;return Jw(t)?t:""}const dC=new Set(["","","","","","","","","",""]),hC=new Set(["","","","","","","","","","","",""]),fC=e=>dC.has(e),mC=e=>hC.has(e);function uc({label:e,gz:t,dayStem:n,settings:s,unseongText:o,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:f=!1,size:m="sm",variant:p="auto",isUnknownTime:y=!1}){const{manualHour:_}=vd(),x=y&&!_,S=t.charAt(0),T=t.charAt(1),k=Qw(S,"stem",s.charType),A=Qw(T,"branch",s.charType),M=e1(S),P=lC(T),N=e1(n),D=uC(T),R=cC(n),z=s.showSipSin?Ar(N,{stem:M}):null,F=!u&&s.showSipSin?Ar(N,{branch:P}):null,q=s.thinEum&&fC(S)?"font-thin":"font-bold",Y=s.thinEum&&mC(T)?"font-thin":"font-bold",ne={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},K=!f&&!!s.hiddenStem,Z=s.hiddenStem==="regular"?"main":"all",ee=s.hiddenStemMode==="hgc"?"hgc":"classic",Q=p==="white",ve=Q?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",W=Q?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",ie=Q?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",te=Q?"text-neutral-500":"text-neutral-400",de=Q?"text-neutral-500":"text-neutral-400",{settings:X}=Wn(),U=x?`bg-white ${ie}`:`${fs(M,"stem",X)} ${ie}`,B=x?`bg-white ${ie}`:`${fs(P,"branch",X)} ${ie}`,V=x?"text-black":X.difficultyMode?X.theme==="light"?"text-neutral-900":"text-black":"text-white",J=x?"text-black":X.difficultyMode?X.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${ve}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${W} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[z&&g.jsx("div",{className:`text-[10px] desk:text-xs ${te} text-nowrap`,children:y&&!_?"-":z}),g.jsx("div",{className:`${ne[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${U}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${V} ${q}`,children:x?"-":k})}),g.jsx("div",{className:`${ne[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${B}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${J} ${Y}`,children:x?"-":A})}),K&&g.jsx(qu,{branch:D,dayStem:R,mode:Z,mapping:ee,isUnknownTime:y&&!_&&(e===""||e==="")}),F&&g.jsx("div",{className:`text-[10px] desk:text-xs ${de}`,children:y&&!_?"-":F}),s.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${de} text-nowrap`,children:y&&!_?"-":o||""}),s.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${de} text-nowrap`,children:y&&!_?"-":l||""})]})]})}const pC=new Set(ms.);function gC(e){return Am.has(e)?e:pC.has(e)?jm[e]:""}function bC({label:e,settings:t,hideBranchSipSin:n=!0}){const s=t.showSipSin,o=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,f=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[s&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),o&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),f&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function yC(){const e=Wn(T=>T.settings),[t,n]=C.useState(new Date),[s,o]=C.useState(!0),[l,u]=C.useState("/"),[f,m]=C.useState(!1);C.useEffect(()=>{if(!s)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[s]);const p=dt(t),y=jt(t),_=xt(t,l),x=$s(t,"/"),S=gC(_.charAt(0));return g.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",s?"":"",") ",xC(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>o(!s),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:s?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[f?g.jsx(bC,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(uc,{label:"",gz:x,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:_,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:y,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(uc,{label:"",gz:p,dayStem:S,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsx("input",{type:"datetime-local",value:vC(t),disabled:s,onChange:T=>{const k=_C(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${f?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:f?" ":" "})]})]})})}function vC(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function _C(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[s,o,l]=t.split("-").map(Number),[u,f]=n.split(":").map(Number),m=new Date(s,o-1,l,u,f);return Number.isNaN(m.getTime())?null:m}function xC(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const sr=[];for(let e=0;e<256;++e)sr.push((e+256).toString(16).slice(1));function wC(e,t=0){return(sr[e[t+0]]+sr[e[t+1]]+sr[e[t+2]]+sr[e[t+3]]+"-"+sr[e[t+4]]+sr[e[t+5]]+"-"+sr[e[t+6]]+sr[e[t+7]]+"-"+sr[e[t+8]]+sr[e[t+9]]+"-"+sr[e[t+10]]+sr[e[t+11]]+sr[e[t+12]]+sr[e[t+13]]+sr[e[t+14]]+sr[e[t+15]]).toLowerCase()}let ag;const SC=new Uint8Array(16);function EC(){if(!ag){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ag=crypto.getRandomValues.bind(crypto)}return ag(SC)}const TC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),t1={randomUUID:TC};function vT(e,t,n){if(t1.randomUUID&&!e)return t1.randomUUID();e=e||{};const s=e.random??e.rng?.()??EC();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,wC(s)}var Yu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var kC=Yu.exports,n1;function AC(){return n1||(n1=1,(function(e,t){(function(n,s){s(t)})(kC,(function(n){var s="1.9.4";function o(a){var d,b,E,j;for(b=1,E=arguments.length;b<E;b++){j=arguments[b];for(d in j)a[d]=j[d]}return a}var l=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function u(a,d){var b=Array.prototype.slice;if(a.bind)return a.bind.apply(a,b.call(arguments,1));var E=b.call(arguments,2);return function(){return a.apply(d,E.length?E.concat(b.call(arguments)):arguments)}}var f=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function p(a,d,b){var E,j,$,re;return re=function(){E=!1,j&&($.apply(b,j),j=!1)},$=function(){E?j=arguments:(a.apply(b,arguments),setTimeout(re,d),E=!0)},$}function y(a,d,b){var E=d[1],j=d[0],$=E-j;return a===E&&b?a:((a-j)%$+$)%$+j}function _(){return!1}function x(a,d){if(d===!1)return a;var b=Math.pow(10,d===void 0?6:d);return Math.round(a*b)/b}function S(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return S(a).split(/\s+/)}function k(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var b in d)a.options[b]=d[b];return a.options}function A(a,d,b){var E=[];for(var j in a)E.push(encodeURIComponent(b?j.toUpperCase():j)+"="+encodeURIComponent(a[j]));return(!d||d.indexOf("?")===-1?"?":"&")+E.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function P(a,d){return a.replace(M,function(b,E){var j=d[E];if(j===void 0)throw new Error("No value provided for variable "+b);return typeof j=="function"&&(j=j(d)),j})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function D(a,d){for(var b=0;b<a.length;b++)if(a[b]===d)return b;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var F=0;function q(a){var d=+new Date,b=Math.max(0,16-(d-F));return F=d+b,window.setTimeout(a,b)}var Y=window.requestAnimationFrame||z("RequestAnimationFrame")||q,ne=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function K(a,d,b){if(b&&Y===q)a.call(d);else return Y.call(window,u(a,d))}function Z(a){a&&ne.call(window,a)}var ee={__proto__:null,extend:o,create:l,bind:u,get lastId(){return f},stamp:m,throttle:p,wrapNum:y,falseFn:_,formatNum:x,trim:S,splitWords:T,setOptions:k,getParamString:A,template:P,isArray:N,indexOf:D,emptyImageUrl:R,requestFn:Y,cancelFn:ne,requestAnimFrame:K,cancelAnimFrame:Z};function Q(){}Q.extend=function(a){var d=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=d.__super__=this.prototype,E=l(b);E.constructor=d,d.prototype=E;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(d[j]=this[j]);return a.statics&&o(d,a.statics),a.includes&&(ve(a.includes),o.apply(null,[E].concat(a.includes))),o(E,a),delete E.statics,delete E.includes,E.options&&(E.options=b.options?l(b.options):{},o(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,re=E._initHooks.length;$<re;$++)E._initHooks[$].call(this)}},d},Q.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},Q.mergeOptions=function(a){return o(this.prototype.options,a),this},Q.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),b=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function ve(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d);else{a=T(a);for(var j=0,$=a.length;j<$;j++)this._on(a[j],d,b)}return this},off:function(a,d,b){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],d);else{a=T(a);for(var j=arguments.length===1,$=0,re=a.length;$<re;$++)j?this._off(a[$]):this._off(a[$],d,b)}return this},_on:function(a,d,b,E){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,b)===!1){b===this&&(b=void 0);var j={fn:d,ctx:b};E&&(j.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(j)}},_off:function(a,d,b){var E,j,$;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(j=0,$=E.length;j<$;j++)E[j].fn=_;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var re=this._listens(a,d,b);if(re!==!1){var fe=E[re];this._firingCount&&(fe.fn=_,this._events[a]=E=E.slice()),E.splice(re,1)}}},fire:function(a,d,b){if(!this.listens(a,b))return this;var E=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var j=this._events[a];if(j){this._firingCount=this._firingCount+1||1;for(var $=0,re=j.length;$<re;$++){var fe=j[$],xe=fe.fn;fe.once&&this.off(a,xe,fe.ctx),xe.call(fe.ctx||this,E)}this._firingCount--}}return b&&this._propagateEvent(E),this},listens:function(a,d,b,E){typeof a!="string"&&console.warn('"string" type argument expected');var j=d;typeof d!="function"&&(E=!!d,j=void 0,b=void 0);var $=this._events&&this._events[a];if($&&$.length&&this._listens(a,j,b)!==!1)return!0;if(E){for(var re in this._eventParents)if(this._eventParents[re].listens(a,d,b,E))return!0}return!1},_listens:function(a,d,b){if(!this._events)return!1;var E=this._events[a]||[];if(!d)return!!E.length;b===this&&(b=void 0);for(var j=0,$=E.length;j<$;j++)if(E[j].fn===d&&E[j].ctx===b)return j;return!1},once:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d,!0);else{a=T(a);for(var j=0,$=a.length;j<$;j++)this._on(a[j],d,b,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var ie=Q.extend(W);function te(a,d,b){this.x=b?Math.round(a):a,this.y=b?Math.round(d):d}var de=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(a){return this.clone()._add(X(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(X(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new te(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new te(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(a){a=X(a);var d=a.x-this.x,b=a.y-this.y;return Math.sqrt(d*d+b*b)},equals:function(a){return a=X(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=X(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function X(a,d,b){return a instanceof te?a:N(a)?new te(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new te(a.x,a.y):new te(a,d,b)}function U(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}U.prototype={extend:function(a){var d,b;if(!a)return this;if(a instanceof te||typeof a[0]=="number"||"x"in a)d=b=X(a);else if(a=B(a),d=a.min,b=a.max,!d||!b)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=b.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(a){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,b;return typeof a[0]=="number"||a instanceof te?a=X(a):a=B(a),a instanceof U?(d=a.min,b=a.max):d=b=a,d.x>=this.min.x&&b.x<=this.max.x&&d.y>=this.min.y&&b.y<=this.max.y},intersects:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,$=j.x>=d.x&&E.x<=b.x,re=j.y>=d.y&&E.y<=b.y;return $&&re},overlaps:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,$=j.x>d.x&&E.x<b.x,re=j.y>d.y&&E.y<b.y;return $&&re},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,b=this.max,E=Math.abs(d.x-b.x)*a,j=Math.abs(d.y-b.y)*a;return B(X(d.x-E,d.y-j),X(b.x+E,b.y+j))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,d){return!a||a instanceof U?a:new U(a,d)}function V(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}V.prototype={extend:function(a){var d=this._southWest,b=this._northEast,E,j;if(a instanceof I)E=a,j=a;else if(a instanceof V){if(E=a._southWest,j=a._northEast,!E||!j)return this}else return a?this.extend(G(a)||J(a)):this;return!d&&!b?(this._southWest=new I(E.lat,E.lng),this._northEast=new I(j.lat,j.lng)):(d.lat=Math.min(E.lat,d.lat),d.lng=Math.min(E.lng,d.lng),b.lat=Math.max(j.lat,b.lat),b.lng=Math.max(j.lng,b.lng)),this},pad:function(a){var d=this._southWest,b=this._northEast,E=Math.abs(d.lat-b.lat)*a,j=Math.abs(d.lng-b.lng)*a;return new V(new I(d.lat-E,d.lng-j),new I(b.lat+E,b.lng+j))},getCenter:function(){return new I((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new I(this.getNorth(),this.getWest())},getSouthEast:function(){return new I(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof I||"lat"in a?a=G(a):a=J(a);var d=this._southWest,b=this._northEast,E,j;return a instanceof V?(E=a.getSouthWest(),j=a.getNorthEast()):E=j=a,E.lat>=d.lat&&j.lat<=b.lat&&E.lng>=d.lng&&j.lng<=b.lng},intersects:function(a){a=J(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),$=j.lat>=d.lat&&E.lat<=b.lat,re=j.lng>=d.lng&&E.lng<=b.lng;return $&&re},overlaps:function(a){a=J(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),$=j.lat>d.lat&&E.lat<b.lat,re=j.lng>d.lng&&E.lng<b.lng;return $&&re},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=J(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function J(a,d){return a instanceof V?a:new V(a,d)}function I(a,d,b){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,b!==void 0&&(this.alt=+b)}I.prototype={equals:function(a,d){if(!a)return!1;a=G(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return ce.distance(this,G(a))},wrap:function(){return ce.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,b=d/Math.cos(Math.PI/180*this.lat);return J([this.lat-d,this.lng-b],[this.lat+d,this.lng+b])},clone:function(){return new I(this.lat,this.lng,this.alt)}};function G(a,d,b){return a instanceof I?a:N(a)&&typeof a[0]!="object"?a.length===3?new I(a[0],a[1],a[2]):a.length===2?new I(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new I(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new I(a,d,b)}var oe={latLngToPoint:function(a,d){var b=this.projection.project(a),E=this.scale(d);return this.transformation._transform(b,E)},pointToLatLng:function(a,d){var b=this.scale(d),E=this.transformation.untransform(a,b);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,b=this.scale(a),E=this.transformation.transform(d.min,b),j=this.transformation.transform(d.max,b);return new U(E,j)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?y(a.lng,this.wrapLng,!0):a.lng,b=this.wrapLat?y(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new I(b,d,E)},wrapLatLngBounds:function(a){var d=a.getCenter(),b=this.wrapLatLng(d),E=d.lat-b.lat,j=d.lng-b.lng;if(E===0&&j===0)return a;var $=a.getSouthWest(),re=a.getNorthEast(),fe=new I($.lat-E,$.lng-j),xe=new I(re.lat-E,re.lng-j);return new V(fe,xe)}},ce=o({},oe,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var b=Math.PI/180,E=a.lat*b,j=d.lat*b,$=Math.sin((d.lat-a.lat)*b/2),re=Math.sin((d.lng-a.lng)*b/2),fe=$*$+Math.cos(E)*Math.cos(j)*re*re,xe=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*xe}}),le=6378137,_e={R:le,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,b=this.MAX_LATITUDE,E=Math.max(Math.min(b,a.lat),-b),j=Math.sin(E*d);return new te(this.R*a.lng*d,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(a){var d=180/Math.PI;return new I((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=le*Math.PI;return new U([-a,-a],[a,a])})()};function Ae(a,d,b,E){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=b,this._d=E}Ae.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new te((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function je(a,d,b,E){return new Ae(a,d,b,E)}var Me=o({},ce,{code:"EPSG:3857",projection:_e,transformation:(function(){var a=.5/(Math.PI*_e.R);return je(a,.5,-a,.5)})()}),Ee=o({},Me,{code:"EPSG:900913"});function $e(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ce(a,d){var b="",E,j,$,re,fe,xe;for(E=0,$=a.length;E<$;E++){for(fe=a[E],j=0,re=fe.length;j<re;j++)xe=fe[j],b+=(j?"L":"M")+xe.x+" "+xe.y;b+=d?Ve.svg?"z":"x":""}return b||"M0 0"}var Pe=document.documentElement.style,Ie="ActiveXObject"in window,pe=Ie&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),ue=$n("webkit"),me=$n("android"),ze=$n("android 2")||$n("android 3"),Be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ue=me&&$n("Google")&&Be<537&&!("AudioNode"in window),at=!!window.opera,et=!Le&&$n("chrome"),Zt=$n("gecko")&&!ue&&!at&&!Ie,On=!et&&$n("safari"),En=$n("phantom"),lr="OTransition"in Pe,vr=navigator.platform.indexOf("Win")===0,dn=Ie&&"transition"in Pe,Ct="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ze,bn="MozPerspective"in Pe,hn=!window.L_DISABLE_3D&&(dn||Ct||bn)&&!lr&&!En,Zr=typeof orientation<"u"||$n("mobile"),ra=Zr&&ue,zs=Zr&&Ct,Tn=!window.PointerEvent&&window.MSPointerEvent,Dn=!!(window.PointerEvent||Tn),oi="ontouchstart"in window||!!window.TouchEvent,Nr=!window.L_NO_TOUCH&&(oi||Dn),cr=Zr&&at,gs=Zr&&Zt,sa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ja=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,d),window.removeEventListener("testPassiveEventSupport",_,d)}catch{}return a})(),Qa=(function(){return!!document.createElement("canvas").getContext})(),Us=!!(document.createElementNS&&$e("svg").createSVGRect),eo=!!Us&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ia=!Us&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),to=navigator.platform.indexOf("Mac")===0,no=navigator.platform.indexOf("Linux")===0;function $n(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ve={ie:Ie,ielt9:pe,edge:Le,webkit:ue,android:me,android23:ze,androidStock:Ue,opera:at,chrome:et,gecko:Zt,safari:On,phantom:En,opera12:lr,win:vr,ie3d:dn,webkit3d:Ct,gecko3d:bn,any3d:hn,mobile:Zr,mobileWebkit:ra,mobileWebkit3d:zs,msPointer:Tn,pointer:Dn,touch:Nr,touchNative:oi,mobileOpera:cr,mobileGecko:gs,retina:sa,passiveEvents:Ja,canvas:Qa,svg:Us,vml:ia,inlineSvg:eo,mac:to,linux:no},ki=Ve.msPointer?"MSPointerDown":"pointerdown",Or=Ve.msPointer?"MSPointerMove":"pointermove",ur=Ve.msPointer?"MSPointerUp":"pointerup",sn=Ve.msPointer?"MSPointerCancel":"pointercancel",kn={touchstart:ki,touchmove:Or,touchend:ur,touchcancel:sn},Vr={touchstart:In,touchmove:pt,touchend:pt,touchcancel:pt},bs={},ge=!1;function qe(a,d,b){return d==="touchstart"&&wt(),Vr[d]?(b=Vr[d].bind(this,b),a.addEventListener(kn[d],b,!1),b):(console.warn("wrong event specified:",d),_)}function ct(a,d,b){if(!kn[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(kn[d],b,!1)}function gt(a){bs[a.pointerId]=a}function tt(a){bs[a.pointerId]&&(bs[a.pointerId]=a)}function ht(a){delete bs[a.pointerId]}function wt(){ge||(document.addEventListener(ki,gt,!0),document.addEventListener(Or,tt,!0),document.addEventListener(ur,ht,!0),document.addEventListener(sn,ht,!0),ge=!0)}function pt(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var b in bs)d.touches.push(bs[b]);d.changedTouches=[d],a(d)}}function In(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&yn(d),pt(a,d)}function St(a){var d={},b,E;for(E in a)b=a[E],d[E]=b&&b.bind?b.bind(a):b;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var aa=200;function ro(a,d){a.addEventListener("dblclick",d);var b=0,E;function j($){if($.detail!==1){E=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var re=ho($);if(!(re.some(function(xe){return xe instanceof HTMLLabelElement&&xe.attributes.for})&&!re.some(function(xe){return xe instanceof HTMLInputElement||xe instanceof HTMLSelectElement}))){var fe=Date.now();fe-b<=aa?(E++,E===2&&d(St($))):E=1,b=fe}}}return a.addEventListener("click",j),{dblclick:d,simDblclick:j}}function ys(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Jn=oo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ai=oo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=Ai==="webkitTransition"||Ai==="OTransition"?Ai+"End":"transitionend";function io(a){return typeof a=="string"?document.getElementById(a):a}function ao(a,d){var b=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!b||b==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);b=E?E[d]:null}return b==="auto"?null:b}function bt(a,d,b){var E=document.createElement(a);return E.className=d||"",b&&b.appendChild(E),E}function zt(a){var d=a.parentNode;d&&d.removeChild(a)}function Dr(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function zn(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function ji(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Rc(a,d){if(a.classList!==void 0)return a.classList.contains(d);var b=hl(a);return b.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(b)}function ot(a,d){if(a.classList!==void 0)for(var b=T(d),E=0,j=b.length;E<j;E++)a.classList.add(b[E]);else if(!Rc(a,d)){var $=hl(a);oa(a,($?$+" ":"")+d)}}function an(a,d){a.classList!==void 0?a.classList.remove(d):oa(a,S((" "+hl(a)+" ").replace(" "+d+" "," ")))}function oa(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function hl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function en(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Lc(a,d)}function Lc(a,d){var b=!1,E="DXImageTransform.Microsoft.Alpha";try{b=a.filters.item(E)}catch{if(d===1)return}d=Math.round(d*100),b?(b.Enabled=d!==100,b.Opacity=d):a.style.filter+=" progid:"+E+"(opacity="+d+")"}function oo(a){for(var d=document.documentElement.style,b=0;b<a.length;b++)if(a[b]in d)return a[b];return!1}function Hs(a,d,b){var E=d||new te(0,0);a.style[Jn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(b?" scale("+b+")":"")}function qt(a,d){a._leaflet_pos=d,Ve.any3d?Hs(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function li(a){return a._leaflet_pos||new te(0,0)}var la,vs,Bc;if("onselectstart"in document)la=function(){st(window,"selectstart",yn)},vs=function(){Bt(window,"selectstart",yn)};else{var ca=oo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ca){var a=document.documentElement.style;Bc=a[ca],a[ca]="none"}},vs=function(){ca&&(document.documentElement.style[ca]=Bc,Bc=void 0)}}function fl(){st(window,"dragstart",yn)}function lo(){Bt(window,"dragstart",yn)}var ml,Pc;function ua(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Mr(),ml=a,Pc=a.style.outlineStyle,a.style.outlineStyle="none",st(window,"keydown",Mr))}function Mr(){ml&&(ml.style.outlineStyle=Pc,ml=void 0,Pc=void 0,Bt(window,"keydown",Mr))}function pl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function co(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var da={__proto__:null,TRANSFORM:Jn,TRANSITION:Ai,TRANSITION_END:so,get:io,getStyle:ao,create:bt,remove:zt,empty:Dr,toFront:zn,toBack:ji,hasClass:Rc,addClass:ot,removeClass:an,setClass:oa,getClass:hl,setOpacity:en,testProp:oo,setTransform:Hs,setPosition:qt,getPosition:li,get disableTextSelection(){return la},get enableTextSelection(){return vs},disableImageDrag:fl,enableImageDrag:lo,preventOutline:ua,restoreOutline:Mr,getSizedParentNode:pl,getScale:co};function st(a,d,b,E){if(d&&typeof d=="object")for(var j in d)Wr(a,j,d[j],b);else{d=T(d);for(var $=0,re=d.length;$<re;$++)Wr(a,d[$],b,E)}return this}var Kr="_leaflet_events";function Bt(a,d,b,E){if(arguments.length===1)$c(a),delete a[Kr];else if(d&&typeof d=="object")for(var j in d)uo(a,j,d[j],b);else if(d=T(d),arguments.length===2)$c(a,function(fe){return D(d,fe)!==-1});else for(var $=0,re=d.length;$<re;$++)uo(a,d[$],b,E);return this}function $c(a,d){for(var b in a[Kr]){var E=b.split(/\d/)[0];(!d||d(E))&&uo(a,E,null,null,b)}}var Ni={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wr(a,d,b,E){var j=d+m(b)+(E?"_"+m(E):"");if(a[Kr]&&a[Kr][j])return this;var $=function(fe){return b.call(E||a,fe||window.event)},re=$;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?$=qe(a,d,$):Ve.touch&&d==="dblclick"?$=ro(a,$):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ni[d]||d,$,Ve.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?($=function(fe){fe=fe||window.event,Gs(a,fe)&&re(fe)},a.addEventListener(Ni[d],$,!1)):a.addEventListener(d,re,!1):a.attachEvent("on"+d,$),a[Kr]=a[Kr]||{},a[Kr][j]=$}function uo(a,d,b,E,j){j=j||d+m(b)+(E?"_"+m(E):"");var $=a[Kr]&&a[Kr][j];if(!$)return this;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?ct(a,d,$):Ve.touch&&d==="dblclick"?ys(a,$):"removeEventListener"in a?a.removeEventListener(Ni[d]||d,$,!1):a.detachEvent("on"+d,$),a[Kr][j]=null}function Xr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function _s(a){return Wr(a,"wheel",Xr),this}function Oi(a){return st(a,"mousedown touchstart dblclick contextmenu",Xr),a._leaflet_disable_click=!0,this}function yn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function ci(a){return yn(a),Xr(a),this}function ho(a){if(a.composedPath)return a.composedPath();for(var d=[],b=a.target;b;)d.push(b),b=b.parentNode;return d}function fo(a,d){if(!d)return new te(a.clientX,a.clientY);var b=co(d),E=b.boundingClientRect;return new te((a.clientX-E.left)/b.x-d.clientLeft,(a.clientY-E.top)/b.y-d.clientTop)}var Ad=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qn(a){return Ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ad:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Gs(a,d){var b=d.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch{return!1}return b!==a}var gl={__proto__:null,on:st,off:Bt,stopPropagation:Xr,disableScrollPropagation:_s,disableClickPropagation:Oi,preventDefault:yn,stop:ci,getPropagationPath:ho,getMousePosition:fo,getWheelDelta:Qn,isExternalTarget:Gs,addListener:st,removeListener:Bt},ha=ie.extend({run:function(a,d,b,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=li(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,b=this._duration*1e3;d<b?this._runFrame(this._easeOut(d/b),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var b=this._startPos.add(this._offset.multiplyBy(a));d&&b._round(),qt(this._el,b),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Et=ie.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=k(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(G(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ai&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),st(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,b){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(G(a),d,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=o({animate:b.animate},b.zoom),b.pan=o({animate:b.animate,duration:b.duration},b.pan));var E=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,b.zoom):this._tryAnimatedPan(a,b.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,b.pan&&b.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,b){var E=this.getZoomScale(d),j=this.getSize().divideBy(2),$=a instanceof te?a:this.latLngToContainerPoint(a),re=$.subtract(j).multiplyBy(1-1/E),fe=this.containerPointToLatLng(j.add(re));return this.setView(fe,d,{zoom:b})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():J(a);var b=X(d.paddingTopLeft||d.padding||[0,0]),E=X(d.paddingBottomRight||d.padding||[0,0]),j=this.getBoundsZoom(a,!1,b.add(E));if(j=typeof d.maxZoom=="number"?Math.min(d.maxZoom,j):j,j===1/0)return{center:a.getCenter(),zoom:j};var $=E.subtract(b).divideBy(2),re=this.project(a.getSouthWest(),j),fe=this.project(a.getNorthEast(),j),xe=this.unproject(re.add(fe).divideBy(2).add($),j);return{center:xe,zoom:j}},fitBounds:function(a,d){if(a=J(a),!a.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(a,d);return this.setView(b.center,b.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=X(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,b,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,b){if(b=b||{},b.animate===!1||!Ve.any3d)return this.setView(a,d,b);this._stop();var E=this.project(this.getCenter()),j=this.project(a),$=this.getSize(),re=this._zoom;a=G(a),d=d===void 0?re:d;var fe=Math.max($.x,$.y),xe=fe*this.getZoomScale(re,d),Oe=j.distanceTo(E)||1,Ge=1.42,Xe=Ge*Ge;function ft(fn){var Zs=fn?-1:1,Ri=fn?xe:fe,Qc=xe*xe-fe*fe+Zs*Xe*Xe*Oe*Oe,No=2*Ri*Xe*Oe,Oo=Qc/No,yi=Math.sqrt(Oo*Oo+1)-Oo,Vs=yi<1e-9?-18:Math.log(yi);return Vs}function Un(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function vn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function xr(fn){return Un(fn)/vn(fn)}var Nt=ft(0);function Ot(fn){return fe*(vn(Nt)/vn(Nt+Ge*fn))}function yt(fn){return fe*(vn(Nt)*xr(Nt+Ge*fn)-Un(Nt))/Xe}function gi(fn){return 1-Math.pow(1-fn,1.5)}var Br=Date.now(),Ol=(ft(1)-Nt)/Ge,bi=b.duration?1e3*b.duration:1e3*Ol*.8;function Jc(){var fn=(Date.now()-Br)/bi,Zs=gi(fn)*Ol;fn<=1?(this._flyToFrame=K(Jc,this),this._move(this.unproject(E.add(j.subtract(E).multiplyBy(yt(Zs)/Oe)),re),this.getScaleZoom(fe/Ot(Zs),re),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),Jc.call(this),this},flyToBounds:function(a,d){var b=this._getBoundsCenterZoom(a,d);return this.flyTo(b.center,b.zoom,d)},setMaxBounds:function(a){return a=J(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var b=this.getCenter(),E=this._limitCenter(b,this._zoom,J(a));return b.equals(E)||this.panTo(E,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var b=X(d.paddingTopLeft||d.padding||[0,0]),E=X(d.paddingBottomRight||d.padding||[0,0]),j=this.project(this.getCenter()),$=this.project(a),re=this.getPixelBounds(),fe=B([re.min.add(b),re.max.subtract(E)]),xe=fe.getSize();if(!fe.contains($)){this._enforcingBounds=!0;var Oe=$.subtract(fe.getCenter()),Ge=fe.extend($).getSize().subtract(xe);j.x+=Oe.x<0?-Ge.x:Ge.x,j.y+=Oe.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(j),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),E=d.divideBy(2).round(),j=b.divideBy(2).round(),$=E.subtract(j);return!$.x&&!$.y?this:(a.animate&&a.pan?this.panBy($):(a.pan&&this._rawPanBy($),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),b=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,b,a):navigator.geolocation.getCurrentPosition(d,b,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,b=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,b=a.coords.longitude,E=new I(d,b),j=E.toBounds(a.coords.accuracy*2),$=this._locateOptions;if($.setView){var re=this.getBoundsZoom(j);this.setView(E,$.maxZoom?Math.min(re,$.maxZoom):re)}var fe={latlng:E,bounds:j,timestamp:a.timestamp};for(var xe in a.coords)typeof a.coords[xe]=="number"&&(fe[xe]=a.coords[xe]);this.fire("locationfound",fe)}},addHandler:function(a,d){if(!d)return this;var b=this[a]=new d(this);return this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)zt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var b="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=bt("div",b,d||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),b=this.unproject(a.getTopRight());return new V(d,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,b){a=J(a),b=X(b||[0,0]);var E=this.getZoom()||0,j=this.getMinZoom(),$=this.getMaxZoom(),re=a.getNorthWest(),fe=a.getSouthEast(),xe=this.getSize().subtract(b),Oe=B(this.project(fe,E),this.project(re,E)).getSize(),Ge=Ve.any3d?this.options.zoomSnap:1,Xe=xe.x/Oe.x,ft=xe.y/Oe.y,Un=d?Math.max(Xe,ft):Math.min(Xe,ft);return E=this.getScaleZoom(Un,E),Ge&&(E=Math.round(E/(Ge/100))*(Ge/100),E=d?Math.ceil(E/Ge)*Ge:Math.floor(E/Ge)*Ge),Math.max(j,Math.min($,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var b=this._getTopLeftPoint(a,d);return new U(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var b=this.options.crs;return d=d===void 0?this._zoom:d,b.scale(a)/b.scale(d)},getScaleZoom:function(a,d){var b=this.options.crs;d=d===void 0?this._zoom:d;var E=b.zoom(a*b.scale(d));return isNaN(E)?1/0:E},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(G(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(X(a),d)},layerPointToLatLng:function(a){var d=X(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(G(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(G(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(J(a))},distance:function(a,d){return this.options.crs.distance(G(a),G(d))},containerPointToLayerPoint:function(a){return X(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return X(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(X(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(a)))},mouseEventToContainerPoint:function(a){return fo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=io(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");st(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,ot(a,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=ao(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(a.markerPane,"leaflet-zoom-hide"),ot(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,b){qt(this._mapPane,new te(0,0));var E=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var j=this._zoom!==d;this._moveStart(j,b)._move(a,d)._moveEnd(j),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,b,E){d===void 0&&(d=this._zoom);var j=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?b&&b.pinch&&this.fire("zoom",b):((j||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){qt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var d=a?Bt:st;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var b=[],E,j=d==="mouseout"||d==="mouseover",$=a.target||a.srcElement,re=!1;$;){if(E=this._targets[m($)],E&&(d==="click"||d==="preclick")&&this._draggableMoved(E)){re=!0;break}if(E&&E.listens(d,!0)&&(j&&!Gs($,a)||(b.push(E),j))||$===this._container)break;$=$.parentNode}return!b.length&&!re&&!j&&this.listens(d,!0)&&(b=[this]),b},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var b=a.type;b==="mousedown"&&ua(d),this._fireDOMEvent(a,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,b){if(a.type==="click"){var E=o({},a);E.type="preclick",this._fireDOMEvent(E,E.type,b)}var j=this._findEventTargets(a,d);if(b){for(var $=[],re=0;re<b.length;re++)b[re].listens(d,!0)&&$.push(b[re]);j=$.concat(j)}if(j.length){d==="contextmenu"&&yn(a);var fe=j[0],xe={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Oe=fe.getLatLng&&(!fe._radius||fe._radius<=10);xe.containerPoint=Oe?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(a),xe.layerPoint=this.containerPointToLayerPoint(xe.containerPoint),xe.latlng=Oe?fe.getLatLng():this.layerPointToLatLng(xe.layerPoint)}for(re=0;re<j.length;re++)if(j[re].fire(d,xe,!0),xe.originalEvent._stopped||j[re].options.bubblingMouseEvents===!1&&D(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return li(this._mapPane)||new te(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var b=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var b=this.getSize()._divideBy(2);return this.project(a,d)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return this.project(a,d)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return B([this.project(a.getSouthWest(),d)._subtract(E),this.project(a.getNorthWest(),d)._subtract(E),this.project(a.getSouthEast(),d)._subtract(E),this.project(a.getNorthEast(),d)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,b){if(!b)return a;var E=this.project(a,d),j=this.getSize().divideBy(2),$=new U(E.subtract(j),E.add(j)),re=this._getBoundsOffset($,b,d);return Math.abs(re.x)<=1&&Math.abs(re.y)<=1?a:this.unproject(E.add(re),d)},_limitOffset:function(a,d){if(!d)return a;var b=this.getPixelBounds(),E=new U(b.min.add(a),b.max.add(a));return a.add(this._getBoundsOffset(E,d))},_getBoundsOffset:function(a,d,b){var E=B(this.project(d.getNorthEast(),b),this.project(d.getSouthWest(),b)),j=E.min.subtract(a.min),$=E.max.subtract(a.max),re=this._rebound(j.x,-$.x),fe=this._rebound(j.y,-$.y);return new te(re,fe)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),b=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(d,Math.min(b,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var b=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,d),!0)},_createAnimProxy:function(){var a=this._proxy=bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var b=Jn,E=this._proxy.style[b];Hs(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),E===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();Hs(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(d),j=this._getCenterOffset(a)._divideBy(1-1/E);return b.animate!==!0&&!this.getSize().contains(j)?!1:(K(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,b,E){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ic(a,d){return new Et(a,d)}var _r=Q.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),b=this.getPosition(),E=a._controlCorners[b];return ot(d,"leaflet-control"),b.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fs=function(a){return new _r(a)};Et.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",b=this._controlContainer=bt("div",d+"control-container",this._container);function E(j,$){var re=d+j+" "+d+$;a[j+$]=bt("div",re,b)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)zt(this._controlCorners[a]);zt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mo=_r.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,b,E){return b<E?-1:E<b?1:0}},initialize:function(a,d,b){k(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in d)this._addLayer(d[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return _r.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=bt("div",a),b=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Oi(d),_s(d);var E=this._section=bt("section",a+"-list");b&&(this._map.on("click",this.collapse,this),st(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=bt("a",a+"-toggle",d);j.href="#",j.title="Layers",j.setAttribute("role","button"),st(j,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){yn($),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=bt("div",a+"-base",E),this._separator=bt("div",a+"-separator",E),this._overlaysList=bt("div",a+"-overlays",E),d.appendChild(E)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,b){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:b}),this.options.sortLayers&&this._layers.sort(u(function(E,j){return this.options.sortFunction(E.layer,j.layer,E.name,j.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dr(this._baseLayersList),Dr(this._overlaysList),this._layerControlInputs=[];var a,d,b,E,j=0;for(b=0;b<this._layers.length;b++)E=this._layers[b],this._addItem(E),d=d||E.overlay,a=a||!E.overlay,j+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&j>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(m(a.target)),b=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;b&&this._map.fire(b,d)},_createRadioElement:function(a,d){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=b,E.firstChild},_addItem:function(a){var d=document.createElement("label"),b=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=b):E=this._createRadioElement("leaflet-base-layers_"+m(this),b),this._layerControlInputs.push(E),E.layerId=m(a.layer),st(E,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+a.name;var $=document.createElement("span");d.appendChild($),$.appendChild(E),$.appendChild(j);var re=a.overlay?this._overlaysList:this._baseLayersList;return re.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,b,E=[],j=[];this._handlingClick=!0;for(var $=a.length-1;$>=0;$--)d=a[$],b=this._getLayer(d.layerId).layer,d.checked?E.push(b):d.checked||j.push(b);for($=0;$<j.length;$++)this._map.hasLayer(j[$])&&this._map.removeLayer(j[$]);for($=0;$<E.length;$++)this._map.hasLayer(E[$])||this._map.addLayer(E[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,b,E=this._map.getZoom(),j=a.length-1;j>=0;j--)d=a[j],b=this._getLayer(d.layerId).layer,d.disabled=b.options.minZoom!==void 0&&E<b.options.minZoom||b.options.maxZoom!==void 0&&E>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,st(a,"click",yn),this.expand();var d=this;setTimeout(function(){Bt(a,"click",yn),d._preventClick=!1})}}),jd=function(a,d,b){return new mo(a,d,b)},zc=_r.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",b=bt("div",d+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,d+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,d+"-out",b,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,b,E,j){var $=bt("a",b,E);return $.innerHTML=a,$.href="#",$.title=d,$.setAttribute("role","button"),$.setAttribute("aria-label",d),Oi($),st($,"click",ci),st($,"click",j,this),st($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";an(this._zoomInButton,d),an(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ot(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ot(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zc,this.addControl(this.zoomControl))});var np=function(a){return new zc(a)},Nd=_r.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",b=bt("div",d),E=this.options;return this._addScales(E,d+"-line",b),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,b){a.metric&&(this._mScale=bt("div",d,b)),a.imperial&&(this._iScale=bt("div",d,b))},_update:function(){var a=this._map,d=a.getSize().y/2,b=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(b)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),b=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,b,d/a)},_updateImperial:function(a){var d=a*3.2808399,b,E,j;d>5280?(b=d/5280,E=this._getRoundNum(b),this._updateScale(this._iScale,E+" mi",E/b)):(j=this._getRoundNum(d),this._updateScale(this._iScale,j+" ft",j/d))},_updateScale:function(a,d,b){a.style.width=Math.round(this.options.maxWidth*b)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),b=a/d;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,d*b}}),Uc=function(a){return new Nd(a)},rp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hc=_r.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?rp+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=bt("div","leaflet-control-attribution"),Oi(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var b=[];this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new Hc().addTo(this)});var sp=function(a){return new Hc(a)};_r.Layers=mo,_r.Zoom=zc,_r.Scale=Nd,_r.Attribution=Hc,Fs.layers=jd,Fs.zoom=np,Fs.scale=Uc,Fs.attribution=sp;var xs=Q.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xs.addTo=function(a,d){return a.addHandler(d,this),this};var ip={Events:W},Gc=Ve.touch?"touchstart mousedown":"mousedown",ui=ie.extend({options:{clickTolerance:3},initialize:function(a,d,b,E){k(this,E),this._element=a,this._dragStartTarget=d||a,this._preventOutline=b},enable:function(){this._enabled||(st(this._dragStartTarget,Gc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ui._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,Gc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Rc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){ui._dragging===this&&this.finishDrag();return}if(!(ui._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(ui._dragging=this,this._preventOutline&&ua(this._element),fl(),la(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,b=pl(this._element);this._startPoint=new te(d.clientX,d.clientY),this._startPos=li(this._element),this._parentScale=co(b);var E=a.type==="mousedown";st(document,E?"mousemove":"touchmove",this._onMove,this),st(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,b=new te(d.clientX,d.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,yn(a),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),qt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),lo(),vs();var d=this._moved&&this._moving;this._moving=!1,ui._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Od(a,d,b){var E,j=[1,4,2,8],$,re,fe,xe,Oe,Ge,Xe,ft;for($=0,Ge=a.length;$<Ge;$++)a[$]._code=Di(a[$],d);for(fe=0;fe<4;fe++){for(Xe=j[fe],E=[],$=0,Ge=a.length,re=Ge-1;$<Ge;re=$++)xe=a[$],Oe=a[re],xe._code&Xe?Oe._code&Xe||(ft=bl(Oe,xe,Xe,d,b),ft._code=Di(ft,d),E.push(ft)):(Oe._code&Xe&&(ft=bl(Oe,xe,Xe,d,b),ft._code=Di(ft,d),E.push(ft)),E.push(xe));a=E}return a}function Dd(a,d){var b,E,j,$,re,fe,xe,Oe,Ge;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xe=G([0,0]),ft=J(a),Un=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Un<1700&&(Xe=Fc(a));var vn=a.length,xr=[];for(b=0;b<vn;b++){var Nt=G(a[b]);xr.push(d.project(G([Nt.lat-Xe.lat,Nt.lng-Xe.lng])))}for(fe=xe=Oe=0,b=0,E=vn-1;b<vn;E=b++)j=xr[b],$=xr[E],re=j.y*$.x-$.y*j.x,xe+=(j.x+$.x)*re,Oe+=(j.y+$.y)*re,fe+=re*3;fe===0?Ge=xr[0]:Ge=[xe/fe,Oe/fe];var Ot=d.unproject(X(Ge));return G([Ot.lat+Xe.lat,Ot.lng+Xe.lng])}function Fc(a){for(var d=0,b=0,E=0,j=0;j<a.length;j++){var $=G(a[j]);d+=$.lat,b+=$.lng,E++}return G([d/E,b/E])}var qc={__proto__:null,clipPolygon:Od,polygonCenter:Dd,centroid:Fc};function Md(a,d){if(!d||!a.length)return a.slice();var b=d*d;return a=op(a,b),a=Rd(a,b),a}function Cd(a,d,b){return Math.sqrt(po(a,d,b,!0))}function ap(a,d,b){return po(a,d,b)}function Rd(a,d){var b=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,j=new E(b);j[0]=j[b-1]=1,Yc(a,j,d,0,b-1);var $,re=[];for($=0;$<b;$++)j[$]&&re.push(a[$]);return re}function Yc(a,d,b,E,j){var $=0,re,fe,xe;for(fe=E+1;fe<=j-1;fe++)xe=po(a[fe],a[E],a[j],!0),xe>$&&(re=fe,$=xe);$>b&&(d[re]=1,Yc(a,d,b,E,re),Yc(a,d,b,re,j))}function op(a,d){for(var b=[a[0]],E=1,j=0,$=a.length;E<$;E++)lp(a[E],a[j])>d&&(b.push(a[E]),j=E);return j<$-1&&b.push(a[$-1]),b}var Ld;function Bd(a,d,b,E,j){var $=E?Ld:Di(a,b),re=Di(d,b),fe,xe,Oe;for(Ld=re;;){if(!($|re))return[a,d];if($&re)return!1;fe=$||re,xe=bl(a,d,fe,b,j),Oe=Di(xe,b),fe===$?(a=xe,$=Oe):(d=xe,re=Oe)}}function bl(a,d,b,E,j){var $=d.x-a.x,re=d.y-a.y,fe=E.min,xe=E.max,Oe,Ge;return b&8?(Oe=a.x+$*(xe.y-a.y)/re,Ge=xe.y):b&4?(Oe=a.x+$*(fe.y-a.y)/re,Ge=fe.y):b&2?(Oe=xe.x,Ge=a.y+re*(xe.x-a.x)/$):b&1&&(Oe=fe.x,Ge=a.y+re*(fe.x-a.x)/$),new te(Oe,Ge,j)}function Di(a,d){var b=0;return a.x<d.min.x?b|=1:a.x>d.max.x&&(b|=2),a.y<d.min.y?b|=4:a.y>d.max.y&&(b|=8),b}function lp(a,d){var b=d.x-a.x,E=d.y-a.y;return b*b+E*E}function po(a,d,b,E){var j=d.x,$=d.y,re=b.x-j,fe=b.y-$,xe=re*re+fe*fe,Oe;return xe>0&&(Oe=((a.x-j)*re+(a.y-$)*fe)/xe,Oe>1?(j=b.x,$=b.y):Oe>0&&(j+=re*Oe,$+=fe*Oe)),re=a.x-j,fe=a.y-$,E?re*re+fe*fe:new te(j,$)}function Cr(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function yl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(a)}function fa(a,d){var b,E,j,$,re,fe,xe,Oe;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ge=G([0,0]),Xe=J(a),ft=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ft<1700&&(Ge=Fc(a));var Un=a.length,vn=[];for(b=0;b<Un;b++){var xr=G(a[b]);vn.push(d.project(G([xr.lat-Ge.lat,xr.lng-Ge.lng])))}for(b=0,E=0;b<Un-1;b++)E+=vn[b].distanceTo(vn[b+1])/2;if(E===0)Oe=vn[0];else for(b=0,$=0;b<Un-1;b++)if(re=vn[b],fe=vn[b+1],j=re.distanceTo(fe),$+=j,$>E){xe=($-E)/j,Oe=[fe.x-xe*(fe.x-re.x),fe.y-xe*(fe.y-re.y)];break}var Nt=d.unproject(X(Oe));return G([Nt.lat+Ge.lat,Nt.lng+Ge.lng])}var cp={__proto__:null,simplify:Md,pointToSegmentDistance:Cd,closestPointOnSegment:ap,clipSegment:Bd,_getEdgeIntersection:bl,_getBitCode:Di,_sqClosestPointOnSegment:po,isFlat:Cr,_flat:yl,polylineCenter:fa},vl={project:function(a){return new te(a.lng,a.lat)},unproject:function(a){return new I(a.y,a.x)},bounds:new U([-180,-90],[180,90])},_l={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,b=this.R,E=a.lat*d,j=this.R_MINOR/b,$=Math.sqrt(1-j*j),re=$*Math.sin(E),fe=Math.tan(Math.PI/4-E/2)/Math.pow((1-re)/(1+re),$/2);return E=-b*Math.log(Math.max(fe,1e-10)),new te(a.lng*d*b,E)},unproject:function(a){for(var d=180/Math.PI,b=this.R,E=this.R_MINOR/b,j=Math.sqrt(1-E*E),$=Math.exp(-a.y/b),re=Math.PI/2-2*Math.atan($),fe=0,xe=.1,Oe;fe<15&&Math.abs(xe)>1e-7;fe++)Oe=j*Math.sin(re),Oe=Math.pow((1-Oe)/(1+Oe),j/2),xe=Math.PI/2-2*Math.atan($*Oe)-re,re+=xe;return new I(re*d,a.x*d/b)}},Pd={__proto__:null,LonLat:vl,Mercator:_l,SphericalMercator:_e},$d=o({},ce,{code:"EPSG:3395",projection:_l,transformation:(function(){var a=.5/(Math.PI*_l.R);return je(a,.5,-a,.5)})()}),Zc=o({},ce,{code:"EPSG:4326",projection:vl,transformation:je(1/180,1,-1/180,.5)}),ma=o({},oe,{projection:vl,transformation:je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var b=d.lng-a.lng,E=d.lat-a.lat;return Math.sqrt(b*b+E*E)},infinite:!0});oe.Earth=ce,oe.EPSG3395=$d,oe.EPSG3857=Me,oe.EPSG900913=Ee,oe.EPSG4326=Zc,oe.Simple=ma;var Jr=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var b=this.getEvents();d.on(b,this),this.once("remove",function(){d.off(b,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=m(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var d=0,b=a.length;d<b;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=m(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,b=this._getZoomSpan();for(var E in this._zoomBoundLayers){var j=this._zoomBoundLayers[E].options;a=j.minZoom===void 0?a:Math.min(a,j.minZoom),d=j.maxZoom===void 0?d:Math.max(d,j.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pa=Jr.extend({initialize:function(a,d){k(this,d),this._layers={};var b,E;if(a)for(b=0,E=a.length;b<E;b++)this.addLayer(a[b])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),b,E;for(b in this._layers)E=this._layers[b],E[a]&&E[a].apply(E,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),up=function(a,d){return new pa(a,d)},ws=pa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),pa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),pa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new V;for(var d in this._layers){var b=this._layers[d];a.extend(b.getBounds?b.getBounds():b.getLatLng())}return a}}),Id=function(a,d){return new ws(a,d)},Ss=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var b=this._getIconUrl(a);if(!b){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(b,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,d){var b=this.options,E=b[d+"Size"];typeof E=="number"&&(E=[E,E]);var j=X(E),$=X(d==="shadow"&&b.shadowAnchor||b.iconAnchor||j&&j.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(b.className||""),$&&(a.style.marginLeft=-$.x+"px",a.style.marginTop=-$.y+"px"),j&&(a.style.width=j.x+"px",a.style.height=j.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function go(a){return new Ss(a)}var bo=Ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof bo.imagePath!="string"&&(bo.imagePath=this._detectIconPath()),(this.options.imagePath||bo.imagePath)+Ss.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(b,E,j){var $=E.exec(b);return $&&$[j]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=bt("div","leaflet-default-icon-path",document.body),d=ao(a,"background-image")||ao(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),yo=xs.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new ui(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,b=d._map,E=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,$=li(d._icon),re=b.getPixelBounds(),fe=b.getPixelOrigin(),xe=B(re.min._subtract(fe).add(j),re.max._subtract(fe).subtract(j));if(!xe.contains($)){var Oe=X((Math.max(xe.max.x,$.x)-xe.max.x)/(re.max.x-xe.max.x)-(Math.min(xe.min.x,$.x)-xe.min.x)/(re.min.x-xe.min.x),(Math.max(xe.max.y,$.y)-xe.max.y)/(re.max.y-xe.max.y)-(Math.min(xe.min.y,$.y)-xe.min.y)/(re.min.y-xe.min.y)).multiplyBy(E);b.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),qt(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=K(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,b=d._shadow,E=li(d._icon),j=d._map.layerPointToLatLng(E);b&&qt(b,E),d._latlng=j,a.latlng=j,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),vo=Jr.extend({options:{icon:new bo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){k(this,d),this._latlng=G(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=G(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=a.icon.createIcon(this._icon),E=!1;b!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(b.title=a.title),b.tagName==="IMG"&&(b.alt=a.alt||"")),ot(b,d),a.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&st(b,"focus",this._panOnFocus,this);var j=a.icon.createShadow(this._shadow),$=!1;j!==this._shadow&&(this._removeShadow(),$=!0),j&&(ot(j,d),j.alt=""),this._shadow=j,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&$&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),zt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&qt(this._icon,a),this._shadow&&qt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&en(this._icon,a),this._shadow&&en(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,b=d.iconSize?X(d.iconSize):X(0,0),E=d.iconAnchor?X(d.iconAnchor):X(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:b.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zd(a,d){return new vo(a,d)}var Es=Jr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=Es.extend({options:{fill:!0,radius:10},initialize:function(a,d){k(this,d),this._latlng=G(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=G(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Es.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,b=this._clickTolerance(),E=[a+b,d+b];this._pxBounds=new U(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ud(a,d){return new ga(a,d)}var xl=ga.extend({initialize:function(a,d,b){if(typeof d=="number"&&(d=o({},b,{radius:d})),k(this,d),this._latlng=G(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new V(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Es.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,b=this._map,E=b.options.crs;if(E.distance===ce.distance){var j=Math.PI/180,$=this._mRadius/ce.R/j,re=b.project([d+$,a]),fe=b.project([d-$,a]),xe=re.add(fe).divideBy(2),Oe=b.unproject(xe).lat,Ge=Math.acos((Math.cos($*j)-Math.sin(d*j)*Math.sin(Oe*j))/(Math.cos(d*j)*Math.cos(Oe*j)))/j;(isNaN(Ge)||Ge===0)&&(Ge=$/Math.cos(Math.PI/180*d)),this._point=xe.subtract(b.getPixelOrigin()),this._radius=isNaN(Ge)?0:xe.x-b.project([Oe,a-Ge]).x,this._radiusY=xe.y-re.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Hd(a,d,b){return new xl(a,d,b)}var qs=Es.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){k(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,b=null,E=po,j,$,re=0,fe=this._parts.length;re<fe;re++)for(var xe=this._parts[re],Oe=1,Ge=xe.length;Oe<Ge;Oe++){j=xe[Oe-1],$=xe[Oe];var Xe=E(a,j,$,!0);Xe<d&&(d=Xe,b=E(a,j,$))}return b&&(b.distance=Math.sqrt(d)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=G(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new V,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],b=Cr(a),E=0,j=a.length;E<j;E++)b?(d[E]=G(a[E]),this._bounds.extend(d[E])):d[E]=this._convertLatLngs(a[E]);return d},_project:function(){var a=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new te(a,a);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,b){var E=a[0]instanceof I,j=a.length,$,re;if(E){for(re=[],$=0;$<j;$++)re[$]=this._map.latLngToLayerPoint(a[$]),b.extend(re[$]);d.push(re)}else for($=0;$<j;$++)this._projectLatlngs(a[$],d,b)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,b,E,j,$,re,fe,xe;for(b=0,j=0,$=this._rings.length;b<$;b++)for(xe=this._rings[b],E=0,re=xe.length;E<re-1;E++)fe=Bd(xe[E],xe[E+1],a,E,!0),fe&&(d[j]=d[j]||[],d[j].push(fe[0]),(fe[1]!==xe[E+1]||E===re-2)&&(d[j].push(fe[1]),j++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,b=0,E=a.length;b<E;b++)a[b]=Md(a[b],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var b,E,j,$,re,fe,xe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(b=0,$=this._parts.length;b<$;b++)for(fe=this._parts[b],E=0,re=fe.length,j=re-1;E<re;j=E++)if(!(!d&&E===0)&&Cd(a,fe[j],fe[E])<=xe)return!0;return!1}});function dp(a,d){return new qs(a,d)}qs._flat=yl;var ba=qs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=qs.prototype._convertLatLngs.call(this,a),b=d.length;return b>=2&&d[0]instanceof I&&d[0].equals(d[b-1])&&d.pop(),d},_setLatLngs:function(a){qs.prototype._setLatLngs.call(this,a),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,b=new te(d,d);if(a=new U(a.min.subtract(b),a.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,j=this._rings.length,$;E<j;E++)$=Od(this._rings[E],a,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,b,E,j,$,re,fe,xe,Oe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for($=0,xe=this._parts.length;$<xe;$++)for(b=this._parts[$],re=0,Oe=b.length,fe=Oe-1;re<Oe;fe=re++)E=b[re],j=b[fe],E.y>a.y!=j.y>a.y&&a.x<(j.x-E.x)*(a.y-E.y)/(j.y-E.y)+E.x&&(d=!d);return d||qs.prototype._containsPoint.call(this,a,!0)}});function hp(a,d){return new ba(a,d)}var Ys=ws.extend({initialize:function(a,d){k(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=N(a)?a:a.features,b,E,j;if(d){for(b=0,E=d.length;b<E;b++)j=d[b],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var $=this.options;if($.filter&&!$.filter(a))return this;var re=qn(a,$);return re?(re.feature=El(a),re.defaultOptions=re.options,this.resetStyle(re),$.onEachFeature&&$.onEachFeature(a,re),this.addLayer(re)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function qn(a,d){var b=a.type==="Feature"?a.geometry:a,E=b?b.coordinates:null,j=[],$=d&&d.pointToLayer,re=d&&d.coordsToLatLng||wl,fe,xe,Oe,Ge;if(!E&&!b)return null;switch(b.type){case"Point":return fe=re(E),ya($,a,fe,d);case"MultiPoint":for(Oe=0,Ge=E.length;Oe<Ge;Oe++)fe=re(E[Oe]),j.push(ya($,a,fe,d));return new ws(j);case"LineString":case"MultiLineString":return xe=_o(E,b.type==="LineString"?0:1,re),new qs(xe,d);case"Polygon":case"MultiPolygon":return xe=_o(E,b.type==="Polygon"?1:2,re),new ba(xe,d);case"GeometryCollection":for(Oe=0,Ge=b.geometries.length;Oe<Ge;Oe++){var Xe=qn({geometry:b.geometries[Oe],type:"Feature",properties:a.properties},d);Xe&&j.push(Xe)}return new ws(j);case"FeatureCollection":for(Oe=0,Ge=b.features.length;Oe<Ge;Oe++){var ft=qn(b.features[Oe],d);ft&&j.push(ft)}return new ws(j);default:throw new Error("Invalid GeoJSON object.")}}function ya(a,d,b,E){return a?a(d,b):new vo(b,E&&E.markersInheritOptions&&E)}function wl(a){return new I(a[1],a[0],a[2])}function _o(a,d,b){for(var E=[],j=0,$=a.length,re;j<$;j++)re=d?_o(a[j],d-1,b):(b||wl)(a[j]),E.push(re);return E}function Sl(a,d){return a=G(a),a.alt!==void 0?[x(a.lng,d),x(a.lat,d),x(a.alt,d)]:[x(a.lng,d),x(a.lat,d)]}function xo(a,d,b,E){for(var j=[],$=0,re=a.length;$<re;$++)j.push(d?xo(a[$],Cr(a[$])?0:d-1,b,E):Sl(a[$],E));return!d&&b&&j.length>0&&j.push(j[0].slice()),j}function di(a,d){return a.feature?o({},a.feature,{geometry:d}):El(d)}function El(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hi={toGeoJSON:function(a){return di(this,{type:"Point",coordinates:Sl(this.getLatLng(),a)})}};vo.include(hi),xl.include(hi),ga.include(hi),qs.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=xo(this._latlngs,d?1:0,!1,a);return di(this,{type:(d?"Multi":"")+"LineString",coordinates:b})}}),ba.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=d&&!Cr(this._latlngs[0]),E=xo(this._latlngs,b?2:d?1:0,!0,a);return d||(E=[E]),di(this,{type:(b?"Multi":"")+"Polygon",coordinates:E})}}),pa.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(b){d.push(b.toGeoJSON(a).geometry.coordinates)}),di(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var b=d==="GeometryCollection",E=[];return this.eachLayer(function(j){if(j.toGeoJSON){var $=j.toGeoJSON(a);if(b)E.push($.geometry);else{var re=El($);re.type==="FeatureCollection"?E.push.apply(E,re.features):E.push(re)}}}),b?di(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Tl(a,d){return new Ys(a,d)}var wo=Tl,va=Jr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,b){this._url=a,this._bounds=J(d),k(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&ji(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=J(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:bt("img");if(ot(d,"leaflet-image-layer"),this._zoomAnimated&&ot(d,"leaflet-zoom-animated"),this.options.className&&ot(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hs(this._image,b,d)},_reset:function(){var a=this._image,d=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=d.getSize();qt(a,d.min),a.style.width=b.x+"px",a.style.height=b.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Gd=function(a,d,b){return new va(a,d,b)},fi=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:bt("video");if(ot(d,"leaflet-image-layer"),this._zoomAnimated&&ot(d,"leaflet-zoom-animated"),this.options.className&&ot(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onloadeddata=u(this.fire,this,"load"),a){for(var b=d.getElementsByTagName("source"),E=[],j=0;j<b.length;j++)E.push(b[j].src);this._url=b.length>0?E:[d.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var re=bt("source");re.src=this._url[$],d.appendChild(re)}}});function _a(a,d,b){return new fi(a,d,b)}var kl=va.extend({_initImage:function(){var a=this._image=this._url;ot(a,"leaflet-image-layer"),this._zoomAnimated&&ot(a,"leaflet-zoom-animated"),this.options.className&&ot(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Fd(a,d,b){return new kl(a,d,b)}var Yn=Jr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof I||N(a))?(this._latlng=G(a),k(this,d)):(k(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(zt,void 0,this._container),200)):zt(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=G(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&ji(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof ws){d=null;var b=this._source._layers;for(var E in b)if(b[E]._map){d=b[E];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=X(this.options.offset),b=this._getAnchor();this._zoomAnimated?qt(this._container,a.add(b)):d=d.add(a).add(b);var E=this._containerBottom=-d.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=E+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(a,d,b,E){var j=d;return j instanceof a||(j=new a(E).setContent(d)),b&&j.setLatLng(b),j}}),Jr.include({_initOverlay:function(a,d,b,E){var j=b;return j instanceof a?(k(j,E),j._source=this):(j=d&&!E?d:new a(E,this),j.setContent(b)),j}});var So=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Yn.prototype.openOn.call(this,a)},onAdd:function(a){Yn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Es||this._source.on("preclick",Xr))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Es||this._source.off("preclick",Xr))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=bt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=bt("div",a+"-content-wrapper",d);if(this._contentNode=bt("div",a+"-content",b),Oi(d),_s(this._contentNode),st(d,"contextmenu",Xr),this._tipContainer=bt("div",a+"-tip-container",d),this._tip=bt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=bt("a",a+"-close-button",d);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',st(E,"click",function(j){yn(j),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var b=a.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),d.width=b+1+"px",d.whiteSpace="",d.height="";var E=a.offsetHeight,j=this.options.maxHeight,$="leaflet-popup-scrolled";j&&E>j?(d.height=j+"px",ot(a,$)):an(a,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),b=this._getAnchor();qt(this._container,d.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(ao(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+d,E=this._containerWidth,j=new te(this._containerLeft,-b-this._containerBottom);j._add(li(this._container));var $=a.layerPointToContainerPoint(j),re=X(this.options.autoPanPadding),fe=X(this.options.autoPanPaddingTopLeft||re),xe=X(this.options.autoPanPaddingBottomRight||re),Oe=a.getSize(),Ge=0,Xe=0;$.x+E+xe.x>Oe.x&&(Ge=$.x+E-Oe.x+xe.x),$.x-Ge-fe.x<0&&(Ge=$.x-fe.x),$.y+b+xe.y>Oe.y&&(Xe=$.y+b-Oe.y+xe.y),$.y-Xe-fe.y<0&&(Xe=$.y-fe.y),(Ge||Xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ge,Xe]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qd=function(a,d){return new So(a,d)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(a,d,b){return this._initOverlay(So,a,d,b).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Jr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(So,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ws||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){ci(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Es)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Eo=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Yn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=bt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,b,E=this._map,j=this._container,$=E.latLngToContainerPoint(E.getCenter()),re=E.layerPointToContainerPoint(a),fe=this.options.direction,xe=j.offsetWidth,Oe=j.offsetHeight,Ge=X(this.options.offset),Xe=this._getAnchor();fe==="top"?(d=xe/2,b=Oe):fe==="bottom"?(d=xe/2,b=0):fe==="center"?(d=xe/2,b=Oe/2):fe==="right"?(d=0,b=Oe/2):fe==="left"?(d=xe,b=Oe/2):re.x<$.x?(fe="right",d=0,b=Oe/2):(fe="left",d=xe+(Ge.x+Xe.x)*2,b=Oe/2),a=a.subtract(X(d,b,!0)).add(Ge).add(Xe),an(j,"leaflet-tooltip-right"),an(j,"leaflet-tooltip-left"),an(j,"leaflet-tooltip-top"),an(j,"leaflet-tooltip-bottom"),ot(j,"leaflet-tooltip-"+fe),qt(j,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&en(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fp=function(a,d){return new Eo(a,d)};Et.include({openTooltip:function(a,d,b){return this._initOverlay(Eo,a,d,b).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Jr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Eo,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[d](b),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ws||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(st(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),st(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,b,E;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(d)}});var Yd=Ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Dr(d),d.appendChild(b.html)):d.innerHTML=b.html!==!1?b.html:"",b.bgPos){var E=X(b.bgPos);d.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function mp(a){return new Yd(a)}Ss.Default=bo;var xa=Jr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),zt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ji(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof te?a:new te(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,b=-a(-1/0,1/0),E=0,j=d.length,$;E<j;E++)$=d[E].style.zIndex,d[E]!==this._container&&$&&(b=a(b,+$));isFinite(b)&&(this.options.zIndex=b+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){en(this._container,this.options.opacity);var a=+new Date,d=!1,b=!1;for(var E in this._tiles){var j=this._tiles[E];if(!(!j.current||!j.loaded)){var $=Math.min(1,(a-j.loaded)/200);en(j.el,$),$<1?d=!0:(j.active?b=!0:this._onOpaqueTile(j),j.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),d&&(Z(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===a?(this._levels[b].el.style.zIndex=d-Math.abs(a-b),this._onUpdateLevel(b)):(zt(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var E=this._levels[a],j=this._map;return E||(E=this._levels[a]={},E.el=bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=d,E.origin=j.project(j.unproject(j.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,j.getCenter(),j.getZoom()),_(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,d,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var E=d.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)zt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,b,E){var j=Math.floor(a/2),$=Math.floor(d/2),re=b-1,fe=new te(+j,+$);fe.z=+re;var xe=this._tileCoordsToKey(fe),Oe=this._tiles[xe];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),re>E?this._retainParent(j,$,re,E):!1)},_retainChildren:function(a,d,b,E){for(var j=2*a;j<2*a+2;j++)for(var $=2*d;$<2*d+2;$++){var re=new te(j,$);re.z=b+1;var fe=this._tileCoordsToKey(re),xe=this._tiles[fe];if(xe&&xe.active){xe.retain=!0;continue}else xe&&xe.loaded&&(xe.retain=!0);b+1<E&&this._retainChildren(j,$,b+1,E)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,b,E){var j=Math.round(d);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var $=this.options.updateWhenZooming&&j!==this._tileZoom;(!E||$)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(a),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var b in this._levels)this._setZoomTransform(this._levels[b],a,d)},_setZoomTransform:function(a,d,b){var E=this._map.getZoomScale(b,a.zoom),j=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(d,b)).round();Ve.any3d?Hs(a.el,j,E):qt(a.el,j)},_resetGrid:function(){var a=this._map,d=a.options.crs,b=this._tileSize=this.getTileSize(),E=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],E).x/b.x),Math.ceil(a.project([0,d.wrapLng[1]],E).x/b.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],E).y/b.x),Math.ceil(a.project([d.wrapLat[1],0],E).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,b=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),E=d.getZoomScale(b,this._tileZoom),j=d.project(a,this._tileZoom).floor(),$=d.getSize().divideBy(E*2);return new U(j.subtract($),j.add($))},_update:function(a){var d=this._map;if(d){var b=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),j=this._pxBoundsToTileRange(E),$=j.getCenter(),re=[],fe=this.options.keepBuffer,xe=new U(j.getBottomLeft().subtract([fe,-fe]),j.getTopRight().add([fe,-fe]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ge=this._tiles[Oe].coords;(Ge.z!==this._tileZoom||!xe.contains(new te(Ge.x,Ge.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(a,b);return}for(var Xe=j.min.y;Xe<=j.max.y;Xe++)for(var ft=j.min.x;ft<=j.max.x;ft++){var Un=new te(ft,Xe);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var vn=this._tiles[this._tileCoordsToKey(Un)];vn?vn.current=!0:re.push(Un)}}if(re.sort(function(Nt,Ot){return Nt.distanceTo($)-Ot.distanceTo($)}),re.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xr=document.createDocumentFragment();for(ft=0;ft<re.length;ft++)this._addTile(re[ft],xr);this._level.el.appendChild(xr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var b=this._globalTileRange;if(!d.wrapLng&&(a.x<b.min.x||a.x>b.max.x)||!d.wrapLat&&(a.y<b.min.y||a.y>b.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return J(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,b=this.getTileSize(),E=a.scaleBy(b),j=E.add(b),$=d.unproject(E,a.z),re=d.unproject(j,a.z);return[$,re]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),b=new V(d[0],d[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),b=new te(+d[0],+d[1]);return b.z=+d[2],b},_removeTile:function(a){var d=this._tiles[a];d&&(zt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ot(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=_,a.onmousemove=_,Ve.ielt9&&this.options.opacity<1&&en(a,this.options.opacity)},_addTile:function(a,d){var b=this._getTilePos(a),E=this._tileCoordsToKey(a),j=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(j),this.createTile.length<2&&K(u(this._tileReady,this,a,null,j)),qt(j,b),this._tiles[E]={el:j,coords:a,current:!0},d.appendChild(j),this.fire("tileloadstart",{tile:j,coords:a})},_tileReady:function(a,d,b){d&&this.fire("tileerror",{error:d,tile:b,coords:a});var E=this._tileCoordsToKey(a);b=this._tiles[E],b&&(b.loaded=+new Date,this._map._fadeAnimated?(en(b.el,0),Z(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),d||(ot(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new te(this._wrapX?y(a.x,this._wrapX):a.x,this._wrapY?y(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new U(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Zd(a){return new xa(a)}var mi=xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=k(this,d),d.detectRetina&&Ve.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var b=document.createElement("img");return st(b,"load",u(this._tileOnLoad,this,d,b)),st(b,"error",u(this._tileOnError,this,d,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(a),b},getTileUrl:function(a){var d={r:Ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=b),d["-y"]=b}return P(this._url,o(d,this.options))},_tileOnLoad:function(a,d){Ve.ielt9?setTimeout(u(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,b){var E=this.options.errorTileUrl;E&&d.getAttribute("src")!==E&&(d.src=E),a(b,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,b=this.options.zoomReverse,E=this.options.zoomOffset;return b&&(a=d-a),a+E},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=_,d.onerror=_,!d.complete)){d.src=R;var b=this._tiles[a].coords;zt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:b})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",R),xa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,b){if(!(!this._map||b&&b.getAttribute("src")===R))return xa.prototype._tileReady.call(this,a,d,b)}});function Rr(a,d){return new mi(a,d)}var To=mi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var b=o({},this.defaultWmsParams);for(var E in d)E in this.options||(b[E]=d[E]);d=k(this,d);var j=d.detectRetina&&Ve.retina?2:1,$=this.getTileSize();b.width=$.x*j,b.height=$.y*j,this.wmsParams=b},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,mi.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),b=this._crs,E=B(b.project(d[0]),b.project(d[1])),j=E.min,$=E.max,re=(this._wmsVersion>=1.3&&this._crs===Zc?[j.y,j.x,$.y,$.x]:[j.x,j.y,$.x,$.y]).join(","),fe=mi.prototype.getTileUrl.call(this,a);return fe+A(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+re},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function Lr(a,d){return new To(a,d)}mi.WMS=To,Rr.wms=Lr;var dr=Jr.extend({options:{padding:.1},initialize:function(a){k(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var b=this._map.getZoomScale(d,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,d),$=E.multiplyBy(-b).add(j).subtract(this._map._getNewPixelOrigin(a,d));Ve.any3d?Hs(this._container,$,b):qt(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),b=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new U(b,b.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Al=dr.extend({options:{tolerance:0},getEvents:function(){var a=dr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");st(a,"mousemove",this._onMouseMove,this),st(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),st(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,zt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=this._container,b=a.getSize(),E=Ve.retina?2:1;qt(d,a.min),d.width=E*b.x,d.height=E*b.y,d.style.width=b.x+"px",d.style.height=b.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,b=d.next,E=d.prev;b?b.prev=E:this._drawLast=E,E?E.next=b:this._drawFirst=b,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),b=[],E,j;for(j=0;j<d.length;j++){if(E=Number(d[j]),isNaN(E))return;b.push(E)}a.options._dashArray=b}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var b=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var b,E,j,$,re=a._parts,fe=re.length,xe=this._ctx;if(fe){for(xe.beginPath(),b=0;b<fe;b++){for(E=0,j=re[b].length;E<j;E++)$=re[b][E],xe[E?"lineTo":"moveTo"]($.x,$.y);d&&xe.closePath()}this._fillStroke(xe,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,b=this._ctx,E=Math.max(Math.round(a._radius),1),j=(Math.max(Math.round(a._radiusY),1)||E)/E;j!==1&&(b.save(),b.scale(1,j)),b.beginPath(),b.arc(d.x,d.y/j,E,0,Math.PI*2,!1),j!==1&&b.restore(),this._fillStroke(b,a)}},_fillStroke:function(a,d){var b=d.options;b.fill&&(a.globalAlpha=b.fillOpacity,a.fillStyle=b.fillColor||b.color,a.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=b.opacity,a.lineWidth=b.weight,a.strokeStyle=b.color,a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(b))&&(E=b);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(an(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(E=b);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(ot(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,b){this._map._fireDOMEvent(d,b||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(b)b.prev=E;else return;E?E.next=b:b&&(this._drawFirst=b),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(E)E.next=b;else return;b?b.prev=E:E&&(this._drawLast=E),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function ko(a){return Ve.canvas?new Al(a):null}var pi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Vc={_initContainer:function(){this._container=bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=pi("shape");ot(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=pi("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;zt(d),a.removeInteractiveTarget(d),delete this._layers[m(a)]},_updateStyle:function(a){var d=a._stroke,b=a._fill,E=a.options,j=a._container;j.stroked=!!E.stroke,j.filled=!!E.fill,E.stroke?(d||(d=a._stroke=pi("stroke")),j.appendChild(d),d.weight=E.weight+"px",d.color=E.color,d.opacity=E.opacity,E.dashArray?d.dashStyle=N(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=E.lineCap.replace("butt","flat"),d.joinstyle=E.lineJoin):d&&(j.removeChild(d),a._stroke=null),E.fill?(b||(b=a._fill=pi("fill")),j.appendChild(b),b.color=E.fillColor||E.color,b.opacity=E.fillOpacity):b&&(j.removeChild(b),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),b=Math.round(a._radius),E=Math.round(a._radiusY||b);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+b+","+E+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){zn(a._container)},_bringToBack:function(a){ji(a._container)}},Ts=Ve.vml?pi:$e,wa=dr.extend({_initContainer:function(){this._container=Ts("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ts("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,b.setAttribute("width",d.x),b.setAttribute("height",d.y)),qt(b,a.min),b.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ts("path");a.options.className&&ot(d,a.options.className),a.options.interactive&&ot(d,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){zt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,b=a.options;d&&(b.stroke?(d.setAttribute("stroke",b.color),d.setAttribute("stroke-opacity",b.opacity),d.setAttribute("stroke-width",b.weight),d.setAttribute("stroke-linecap",b.lineCap),d.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?d.setAttribute("stroke-dasharray",b.dashArray):d.removeAttribute("stroke-dasharray"),b.dashOffset?d.setAttribute("stroke-dashoffset",b.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),b.fill?(d.setAttribute("fill",b.fillColor||b.color),d.setAttribute("fill-opacity",b.fillOpacity),d.setAttribute("fill-rule",b.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ce(a._parts,d))},_updateCircle:function(a){var d=a._point,b=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||b,j="a"+b+","+E+" 0 1,0 ",$=a._empty()?"M0 0":"M"+(d.x-b)+","+d.y+j+b*2+",0 "+j+-b*2+",0 ";this._setPath(a,$)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){zn(a._path)},_bringToBack:function(a){ji(a._path)}});Ve.vml&&wa.include(Vc);function Ao(a){return Ve.svg||Ve.vml?new wa(a):null}Et.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&ko(a)||Ao(a)}});var Mi=ba.extend({initialize:function(a,d){ba.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=J(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function pp(a,d){return new Mi(a,d)}wa.create=Ts,wa.pointsToPath=Ce,Ys.geometryToLayer=qn,Ys.coordsToLatLng=wl,Ys.coordsToLatLngs=_o,Ys.latLngToCoords=Sl,Ys.latLngsToCoords=xo,Ys.getFeature=di,Ys.asFeature=El,Et.mergeOptions({boxZoom:!0});var hr=xs.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){st(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),fl(),this._startPoint=this._map.mouseEventToContainerPoint(a),st(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=bt("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new U(this._point,this._startPoint),b=d.getSize();qt(this._box,d.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(zt(this._box),an(this._container,"leaflet-crosshair")),vs(),lo(),Bt(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new V(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",hr),Et.mergeOptions({doubleClickZoom:!0});var jl=xs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,b=d.getZoom(),E=d.options.zoomDelta,j=a.originalEvent.shiftKey?b-E:b+E;d.options.doubleClickZoom==="center"?d.setZoom(j):d.setZoomAround(a.containerPoint,j)}});Et.addInitHook("addHandler","doubleClickZoom",jl),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ks=xs.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new ui(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=J(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),b=this._initialWorldOffset,E=this._draggable._newPos.x,j=(E-d+b)%a+d-b,$=(E+d+b)%a-d-b,re=Math.abs(j+b)<Math.abs($+b)?j:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=re},_onDragEnd:function(a){var d=this._map,b=d.options,E=!b.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),E)d.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,re=b.easeLinearity,fe=j.multiplyBy(re/$),xe=fe.distanceTo([0,0]),Oe=Math.min(b.inertiaMaxSpeed,xe),Ge=fe.multiplyBy(Oe/xe),Xe=Oe/(b.inertiaDeceleration*re),ft=Ge.multiplyBy(-Xe/2).round();!ft.x&&!ft.y?d.fire("moveend"):(ft=d._limitOffset(ft,d.options.maxBounds),K(function(){d.panBy(ft,{duration:Xe,easeLinearity:re,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",ks),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kc=xs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),st(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,b=a.scrollTop||d.scrollTop,E=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(E,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},b=this.keyCodes,E,j;for(E=0,j=b.left.length;E<j;E++)d[b.left[E]]=[-1*a,0];for(E=0,j=b.right.length;E<j;E++)d[b.right[E]]=[a,0];for(E=0,j=b.down.length;E<j;E++)d[b.down[E]]=[0,a];for(E=0,j=b.up.length;E<j;E++)d[b.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},b=this.keyCodes,E,j;for(E=0,j=b.zoomIn.length;E<j;E++)d[b.zoomIn[E]]=a;for(E=0,j=b.zoomOut.length;E<j;E++)d[b.zoomOut[E]]=-a},_addHooks:function(){st(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,b=this._map,E;if(d in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(E=this._panKeys[d],a.shiftKey&&(E=X(E).multiplyBy(3)),b.options.maxBounds&&(E=b._limitOffset(X(E),b.options.maxBounds)),b.options.worldCopyJump){var j=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(E)));b.panTo(j)}else b.panBy(E)}else if(d in this._zoomKeys)b.setZoom(b.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;ci(a)}}});Et.addInitHook("addHandler","keyboard",Kc),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var jo=xs.extend({addHooks:function(){st(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Qn(a),b=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),ci(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),b=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,$=b?Math.ceil(j/b)*b:j,re=a._limitZoom(d+(this._delta>0?$:-$))-d;this._delta=0,this._startTime=null,re&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+re):a.setZoomAround(this._lastMousePos,d+re))}});Et.addInitHook("addHandler","scrollWheelZoom",jo);var Ci=600;Et.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Nl=xs.extend({addHooks:function(){st(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new te(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(st(document,"touchend",yn),st(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Ci),st(document,"touchend touchcancel contextmenu",this._cancel,this),st(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Bt(document,"touchend",yn),Bt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new te(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var b=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});b._simulated=!0,d.target.dispatchEvent(b)}});Et.addInitHook("addHandler","tapHold",Nl),Et.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Wc=xs.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),st(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(b.add(E)._divideBy(2))),this._startDist=b.distanceTo(E),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),st(document,"touchmove",this._onTouchMove,this),st(document,"touchend touchcancel",this._onTouchEnd,this),yn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]),j=b.distanceTo(E)/this._startDist;if(this._zoom=d.getScaleZoom(j,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&j<1||this._zoom>d.getMaxZoom()&&j>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var $=b._add(E)._divideBy(2)._subtract(this._centerPoint);if(j===1&&$.x===0&&$.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var re=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(re,this,!0),yn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",Wc),Et.BoxZoom=hr,Et.DoubleClickZoom=jl,Et.Drag=ks,Et.Keyboard=Kc,Et.ScrollWheelZoom=jo,Et.TapHold=Nl,Et.TouchZoom=Wc,n.Bounds=U,n.Browser=Ve,n.CRS=oe,n.Canvas=Al,n.Circle=xl,n.CircleMarker=ga,n.Class=Q,n.Control=_r,n.DivIcon=Yd,n.DivOverlay=Yn,n.DomEvent=gl,n.DomUtil=da,n.Draggable=ui,n.Evented=ie,n.FeatureGroup=ws,n.GeoJSON=Ys,n.GridLayer=xa,n.Handler=xs,n.Icon=Ss,n.ImageOverlay=va,n.LatLng=I,n.LatLngBounds=V,n.Layer=Jr,n.LayerGroup=pa,n.LineUtil=cp,n.Map=Et,n.Marker=vo,n.Mixin=ip,n.Path=Es,n.Point=te,n.PolyUtil=qc,n.Polygon=ba,n.Polyline=qs,n.Popup=So,n.PosAnimation=ha,n.Projection=Pd,n.Rectangle=Mi,n.Renderer=dr,n.SVG=wa,n.SVGOverlay=kl,n.TileLayer=mi,n.Tooltip=Eo,n.Transformation=Ae,n.Util=ee,n.VideoOverlay=fi,n.bind=u,n.bounds=B,n.canvas=ko,n.circle=Hd,n.circleMarker=Ud,n.control=Fs,n.divIcon=mp,n.extend=o,n.featureGroup=Id,n.geoJSON=Tl,n.geoJson=wo,n.gridLayer=Zd,n.icon=go,n.imageOverlay=Gd,n.latLng=G,n.latLngBounds=J,n.layerGroup=up,n.map=Ic,n.marker=zd,n.point=X,n.polygon=hp,n.polyline=dp,n.popup=qd,n.rectangle=pp,n.setOptions=k,n.stamp=m,n.svg=Ao,n.svgOverlay=Fd,n.tileLayer=Rr,n.tooltip=fp,n.transformation=je,n.version=s,n.videoOverlay=_a;var Xc=window.L;n.noConflict=function(){return window.L=Xc,this},window.L=n}))})(Yu,Yu.exports)),Yu.exports}var jC=AC();const og=cl(jC),tf=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Ho(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function NC(e){const{buttonId:t,buttonInputId:n,modalId:s,closeMapId:o,mapCloseBtnId:l,searchBoxId:u,suggestionsId:f,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},y=Ho(n),_=Ho(t),x=Ho(s),S=Ho(l),T=Ho(u),k=Ho(f),A=o?Ho(o):null;let M=null,P=null,N=null;const D=Z=>Z.code==="Space"||Z.key===" "||Z.key==="Spacebar"||Z.key==="Space",R=Z=>{D(Z)&&document.activeElement!==T&&(Z.preventDefault(),Z.stopPropagation(),T.focus())},z=()=>{x.style.display="flex",M?setTimeout(()=>M?.invalidateSize(),200):setTimeout(()=>{M=og.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),og.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(M),M.invalidateSize()},0),x.addEventListener("keydown",R,!0),x.addEventListener("keyup",R,!0),T.focus()},F=()=>{x.style.display="none",T.value="",k.innerHTML="",N&&(window.clearTimeout(N),N=null),x.removeEventListener("keydown",R,!0),x.removeEventListener("keyup",R,!0)},q=Z=>{const ee=Z.dataset.name??"",Q=Number(Z.dataset.lat??""),ve=Number(Z.dataset.lon??"");!Number.isFinite(Q)||!Number.isFinite(ve)||!M||(P?P.setLatLng([Q,ve]):P=og.marker([Q,ve]).addTo(M),M.flyTo([Q,ve],14,{duration:.5}),y.value=ee,y.dataset.lat=String(Q),y.dataset.lon=String(ve),e.onSelected?.({name:ee,lat:Q,lon:ve}),k.innerHTML="",F())},Y=()=>{N&&window.clearTimeout(N);const Z=T.value.trim();if(!Z){k.innerHTML="";return}N=window.setTimeout(async()=>{try{const ee="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(Z),Q=await fetch(ee,{headers:{Accept:"application/json"}});if(!Q.ok)throw new Error(`HTTP ${Q.status}`);const ve=await Q.json();if(!Array.isArray(ve)||ve.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const W=ve.slice(0,12).map((ie,te)=>{const de=ie.display_name.split(",").slice(0,3).map(B=>B.trim()).join("  "),X="padding:8px;cursor:pointer;outline:none;",U=te===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${tf(de)}"
                    data-lat="${tf(ie.lat)}"
                    data-lon="${tf(ie.lon)}"
                    data-active="${te===0?"1":"0"}"
                    style="${X}${U}"
                  >${tf(de)}</li>`}).join("");k.innerHTML=W}catch(ee){console.error(ee),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},ne=Z=>{const ee=Z.target;ee.tagName==="LI"&&q(ee)},K=Z=>{if(Z.key==="Enter"){const ee=k.querySelector('li[data-active="1"]')??k.querySelector("li");ee&&q(ee)}};return _.addEventListener("click",z),S.addEventListener("click",F),A&&A.addEventListener("click",F),T.addEventListener("input",Y),T.addEventListener("keydown",K),k.addEventListener("click",ne),()=>{_.removeEventListener("click",z),S.removeEventListener("click",F),A&&A.removeEventListener("click",F),T.removeEventListener("input",Y),T.removeEventListener("keydown",K),k.removeEventListener("click",ne),x.removeEventListener("keydown",R,!0),x.removeEventListener("keyup",R,!0),N&&(window.clearTimeout(N),N=null),M&&(M.remove(),M=null)}}function nc(){return document.getElementById("suggestions")}function Ff(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,s)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${s}`)}),t}function lg(e,t){const n=Ff(e);if(n.length===0)return;const s=n.length;let o=t;o<0&&(o=s-1),o>=s&&(o=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[o];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function _T({onSelect:e,placeholderText:t="",buttonStyle:n,value:s}){const[o,l]=C.useState(t),[u,f]=C.useState(!1),[m,p]=C.useState(s??""),y=C.useRef(null),_=C.useRef(null),x=C.useRef(null),S=C.useRef(null);return C.useEffect(()=>{s!==void 0&&p(s)},[s]),C.useEffect(()=>{if(!u)return;const T=NC({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:Y=>{l(""),p(Y.name),y.current&&(y.current.value=Y.name),_.current&&(_.current.value=String(Y.lat)),x.current&&(x.current.value=String(Y.lon)),e?.(Y),f(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const A=document.getElementById("mapModal"),M=document.getElementById("searchBox"),P=nc();setTimeout(()=>M?.focus(),0);const N='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',D=Y=>{if(Y.key==="Escape"){Y.preventDefault(),f(!1);return}if(Y.key!=="Tab")return;const ne=nc();if(ne&&ne.contains(document.activeElement))return;const K=Array.from(A.querySelectorAll(N)).filter(ve=>!ve.hasAttribute("disabled")&&ve.tabIndex!==-1);if(K.length===0)return;const Z=K[0],ee=K[K.length-1],Q=document.activeElement;Y.shiftKey?(Q===Z||!A.contains(Q))&&(Y.preventDefault(),ee.focus()):(Q===ee||!A.contains(Q))&&(Y.preventDefault(),Z.focus())};A.addEventListener("keydown",D);const R=Y=>{if(Y.key!=="ArrowDown")return;const ne=nc();!ne||Ff(ne).length===0||Y.preventDefault()};M?.addEventListener("keydown",R);const z=Y=>{if(Y.target.value.trim()===""){const K=nc();K&&(K.innerHTML="")}};M?.addEventListener("input",z);const F=Y=>{const ne=nc();if(!ne)return;const K=Ff(ne);if(K.length===0)return;const Z=document.activeElement,ee=Z?K.indexOf(Z):-1;if(ee===-1)return;const Q=ve=>{Y.preventDefault(),lg(ne,ee+ve)};switch(Y.key){case"Tab":Y.preventDefault(),Q(Y.shiftKey?-1:1);break;case"ArrowDown":Y.preventDefault(),Q(1);break;case"ArrowUp":Y.preventDefault(),Q(-1);break;case"Home":Y.preventDefault(),lg(ne,0);break;case"End":Y.preventDefault(),lg(ne,K.length-1);break;case"Enter":case" ":Y.preventDefault(),Z.click();break;case"Backspace":Y.preventDefault(),ne.innerHTML="",M?.focus();break}Y.stopPropagation()};let q=null;return P&&(P.addEventListener("keydown",F),q=new MutationObserver(()=>{const Y=nc();!Y||Ff(Y).length}),q.observe(P,{childList:!0,subtree:!1})),()=>{A.removeEventListener("keydown",D),M?.removeEventListener("keydown",R),M?.removeEventListener("input",z),P&&P.removeEventListener("keydown",F),q?.disconnect(),T?.()}},[u,e]),C.useEffect(()=>{u||setTimeout(()=>S.current?.focus(),0)},[u]),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),g.jsx("button",{ref:S,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:o}),g.jsx("input",{ref:y,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:_,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>f(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:" ,  ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ,   ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}var Lm=L2();const OC=cl(Lm);function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var DC=typeof Symbol=="function"&&Symbol.observable||"@@observable",r1=DC,s1=()=>Math.random().toString(36).substring(7).split("").join("."),MC={INIT:`@@redux/INIT${s1()}`,REPLACE:`@@redux/REPLACE${s1()}`},i1=MC;function CC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xT(e,t,n){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(xT)(e,t)}let s=e,o=t,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((A,M)=>{u.set(M,A)}))}function y(){if(m)throw new Error(Er(3));return o}function _(A){if(typeof A!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let M=!0;p();const P=f++;return u.set(P,A),function(){if(M){if(m)throw new Error(Er(6));M=!1,p(),u.delete(P),l=null}}}function x(A){if(!CC(A))throw new Error(Er(7));if(typeof A.type>"u")throw new Error(Er(8));if(typeof A.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,o=s(o,A)}finally{m=!1}return(l=u).forEach(P=>{P()}),A}function S(A){if(typeof A!="function")throw new Error(Er(10));s=A,x({type:i1.REPLACE})}function T(){const A=_;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Er(11));function P(){const D=M;D.next&&D.next(y())}return P(),{unsubscribe:A(P)}},[r1](){return this}}}return x({type:i1.INIT}),{dispatch:x,subscribe:_,getState:y,replaceReducer:S,[r1]:T}}function a1(e,t){return function(...n){return t(e.apply(this,n))}}function o1(e,t){if(typeof e=="function")return a1(e,t);if(typeof e!="object"||e===null)throw new Error(Er(16));const n={};for(const s in e){const o=e[s];typeof o=="function"&&(n[s]=a1(o,t))}return n}function wT(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function RC(...e){return t=>(n,s)=>{const o=t(n,s);let l=()=>{throw new Error(Er(15))};const u={getState:o.getState,dispatch:(m,...p)=>l(m,...p)},f=e.map(m=>m(u));return l=wT(...f)(o.dispatch),{...o,dispatch:l}}}var cg={exports:{}},ug={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function LC(){if(l1)return ug;l1=1;var e=Em();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return ug.useSyncExternalStoreWithSelector=function(m,p,y,_,x){var S=o(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=u(function(){function A(R){if(!M){if(M=!0,P=R,R=_(R),x!==void 0&&T.hasValue){var z=T.value;if(x(z,R))return N=z}return N=R}if(z=N,n(P,R))return z;var F=_(R);return x!==void 0&&x(z,F)?(P=R,z):(P=R,N=F)}var M=!1,P,N,D=y===void 0?null:y;return[function(){return A(p())},D===null?void 0:function(){return A(D())}]},[p,y,_,x]);var k=s(m,S[0],S[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),f(k),k},ug}var c1;function BC(){return c1||(c1=1,cg.exports=LC()),cg.exports}BC();var PC=C.version.startsWith("19"),$C=Symbol.for(PC?"react.transitional.element":"react.element"),IC=Symbol.for("react.portal"),zC=Symbol.for("react.fragment"),UC=Symbol.for("react.strict_mode"),HC=Symbol.for("react.profiler"),GC=Symbol.for("react.consumer"),FC=Symbol.for("react.context"),ST=Symbol.for("react.forward_ref"),qC=Symbol.for("react.suspense"),YC=Symbol.for("react.suspense_list"),dy=Symbol.for("react.memo"),ZC=Symbol.for("react.lazy"),VC=ST,KC=dy;function WC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case $C:switch(e=e.type,e){case zC:case HC:case UC:case qC:case YC:return e;default:switch(e=e&&e.$$typeof,e){case FC:case ST:case ZC:case dy:return e;case GC:return e;default:return t}}case IC:return t}}}function XC(e){return WC(e)===dy}function JC(e,t,n,s,{areStatesEqual:o,areOwnPropsEqual:l,areStatePropsEqual:u}){let f=!1,m,p,y,_,x;function S(P,N){return m=P,p=N,y=e(m,p),_=t(s,p),x=n(y,_,p),f=!0,x}function T(){return y=e(m,p),t.dependsOnOwnProps&&(_=t(s,p)),x=n(y,_,p),x}function k(){return e.dependsOnOwnProps&&(y=e(m,p)),t.dependsOnOwnProps&&(_=t(s,p)),x=n(y,_,p),x}function A(){const P=e(m,p),N=!u(P,y);return y=P,N&&(x=n(y,_,p)),x}function M(P,N){const D=!l(N,p),R=!o(P,m,N,p);return m=P,p=N,D&&R?T():D?k():R?A():x}return function(N,D){return f?M(N,D):S(N,D)}}function QC(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...o}){const l=t(e,o),u=n(e,o),f=s(e,o);return JC(l,u,f,e,o)}function e3(e,t){const n={};for(const s in e){const o=e[s];typeof o=="function"&&(n[s]=(...l)=>t(o(...l)))}return n}function Nb(e){return function(n){const s=e(n);function o(){return s}return o.dependsOnOwnProps=!1,o}}function u1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function ET(e,t){return function(s,{displayName:o}){const l=function(f,m){return l.dependsOnOwnProps?l.mapToProps(f,m):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,m){l.mapToProps=e,l.dependsOnOwnProps=u1(e);let p=l(f,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=u1(p),p=l(f,m)),p},l}}function hy(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function t3(e){return e&&typeof e=="object"?Nb(t=>e3(e,t)):e?typeof e=="function"?ET(e):hy(e,"mapDispatchToProps"):Nb(t=>({dispatch:t}))}function n3(e){return e?typeof e=="function"?ET(e):hy(e,"mapStateToProps"):Nb(()=>({}))}function r3(e,t,n){return{...n,...e,...t}}function s3(e){return function(n,{displayName:s,areMergedPropsEqual:o}){let l=!1,u;return function(m,p,y){const _=e(m,p,y);return l?o(_,u)||(u=_):(l=!0,u=_),u}}}function i3(e){return e?typeof e=="function"?s3(e):hy(e,"mergeProps"):()=>r3}function a3(e){e()}function o3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){a3(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!s||e===null||(s=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var d1={notify(){},get:()=>[]};function TT(e,t){let n,s=d1,o=0,l=!1;function u(k){y();const A=s.subscribe(k);let M=!1;return()=>{M||(M=!0,A(),_())}}function f(){s.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function y(){o++,n||(n=t?t.addNestedSub(m):e.subscribe(m),s=o3())}function _(){o--,n&&o===0&&(n(),n=void 0,s.clear(),s=d1)}function x(){l||(l=!0,y())}function S(){l&&(l=!1,_())}const T={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>s};return T}var l3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c3=l3(),u3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",d3=u3(),h3=()=>c3||d3?C.useLayoutEffect:C.useEffect,am=h3();function h1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function dg(e,t){if(h1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!h1(e[n[o]],t[n[o]]))return!1;return!0}var f3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},m3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},p3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},g3={[VC]:p3,[KC]:kT};function f1(e){return XC(e)?kT:g3[e.$$typeof]||f3}var b3=Object.defineProperty,y3=Object.getOwnPropertyNames,m1=Object.getOwnPropertySymbols,v3=Object.getOwnPropertyDescriptor,_3=Object.getPrototypeOf,p1=Object.prototype;function Ob(e,t){if(typeof t!="string"){if(p1){const l=_3(t);l&&l!==p1&&Ob(e,l)}let n=y3(t);m1&&(n=n.concat(m1(t)));const s=f1(e),o=f1(t);for(let l=0;l<n.length;++l){const u=n[l];if(!m3[u]&&!(o&&o[u])&&!(s&&s[u])){const f=v3(t,u);try{b3(e,u,f)}catch{}}}}return e}var x3=Symbol.for("react-redux-context"),w3=typeof globalThis<"u"?globalThis:{};function S3(){if(!C.createContext)return{};const e=w3[x3]??=new Map;let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var AT=S3(),E3=[null,null];function T3(e,t,n){am(()=>e(...t),n)}function k3(e,t,n,s,o,l){e.current=s,n.current=!1,o.current&&(o.current=null,l())}function A3(e,t,n,s,o,l,u,f,m,p,y){if(!e)return()=>{};let _=!1,x=null;const S=()=>{if(_||!f.current)return;const k=t.getState();let A,M;try{A=s(k,o.current)}catch(P){M=P,x=P}M||(x=null),A===l.current?u.current||p():(l.current=A,m.current=A,u.current=!0,y())};return n.onStateChange=S,n.trySubscribe(),S(),()=>{if(_=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function j3(e,t){return e===t}function N3(e,t,n,{pure:s,areStatesEqual:o=j3,areOwnPropsEqual:l=dg,areStatePropsEqual:u=dg,areMergedPropsEqual:f=dg,forwardRef:m=!1,context:p=AT}={}){const y=p,_=n3(e),x=t3(t),S=i3(n),T=!!e;return A=>{const M=A.displayName||A.name||"Component",P=`Connect(${M})`,N={shouldHandleStateChanges:T,displayName:P,wrappedComponentName:M,WrappedComponent:A,initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:f};function D(F){const[q,Y,ne]=C.useMemo(()=>{const{reactReduxForwardedRef:je,...Me}=F;return[F.context,je,Me]},[F]),K=C.useMemo(()=>{let je=y;return q?.Consumer,je},[q,y]),Z=C.useContext(K),ee=!!F.store&&!!F.store.getState&&!!F.store.dispatch,Q=!!Z&&!!Z.store,ve=ee?F.store:Z.store,W=Q?Z.getServerState:ve.getState,ie=C.useMemo(()=>QC(ve.dispatch,N),[ve]),[te,de]=C.useMemo(()=>{if(!T)return E3;const je=TT(ve,ee?void 0:Z.subscription),Me=je.notifyNestedSubs.bind(je);return[je,Me]},[ve,ee,Z]),X=C.useMemo(()=>ee?Z:{...Z,subscription:te},[ee,Z,te]),U=C.useRef(void 0),B=C.useRef(ne),V=C.useRef(void 0),J=C.useRef(!1),I=C.useRef(!1),G=C.useRef(void 0);am(()=>(I.current=!0,()=>{I.current=!1}),[]);const oe=C.useMemo(()=>()=>V.current&&ne===B.current?V.current:ie(ve.getState(),ne),[ve,ne]),ce=C.useMemo(()=>Me=>te?A3(T,ve,te,ie,B,U,J,I,V,de,Me):()=>{},[te]);T3(k3,[B,U,J,ne,V,de]);let le;try{le=C.useSyncExternalStore(ce,oe,W?()=>ie(W(),ne):oe)}catch(je){throw G.current&&(je.message+=`
The error may be correlated with this previous error:
${G.current.stack}

`),je}am(()=>{G.current=void 0,V.current=void 0,U.current=le});const _e=C.useMemo(()=>C.createElement(A,{...le,ref:Y}),[Y,A,le]);return C.useMemo(()=>T?C.createElement(K.Provider,{value:X},_e):_e,[K,_e,X])}const z=C.memo(D);if(z.WrappedComponent=A,z.displayName=D.displayName=P,m){const q=C.forwardRef(function(ne,K){return C.createElement(z,{...ne,reactReduxForwardedRef:K})});return q.displayName=P,q.WrappedComponent=A,Ob(q,A)}return Ob(z,A)}}var jT=N3;function O3(e){const{children:t,context:n,serverState:s,store:o}=e,l=C.useMemo(()=>{const m=TT(o);return{store:o,subscription:m,getServerState:s?()=>s:void 0}},[o,s]),u=C.useMemo(()=>o.getState(),[o]);am(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==o.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=n||AT;return C.createElement(f.Provider,{value:l},t)}var D3=O3,M3="Invariant failed";function C3(e,t){throw new Error(M3)}var si=function(t){var n=t.top,s=t.right,o=t.bottom,l=t.left,u=s-l,f=o-n,m={top:n,right:s,bottom:o,left:l,width:u,height:f,x:l,y:n,center:{x:(s+l)/2,y:(o+n)/2}};return m},fy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},g1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},R3=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},hg={top:0,right:0,bottom:0,left:0},my=function(t){var n=t.borderBox,s=t.margin,o=s===void 0?hg:s,l=t.border,u=l===void 0?hg:l,f=t.padding,m=f===void 0?hg:f,p=si(fy(n,o)),y=si(g1(n,u)),_=si(g1(y,m));return{marginBox:p,borderBox:si(n),paddingBox:y,contentBox:_,margin:o,border:u,padding:m}},Os=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var o=Number(n);return isNaN(o)&&C3(),o},L3=function(){return{x:window.pageXOffset,y:window.pageYOffset}},om=function(t,n){var s=t.borderBox,o=t.border,l=t.margin,u=t.padding,f=R3(s,n);return my({borderBox:f,border:o,margin:l,padding:u})},lm=function(t,n){return n===void 0&&(n=L3()),om(t,n)},NT=function(t,n){var s={top:Os(n.marginTop),right:Os(n.marginRight),bottom:Os(n.marginBottom),left:Os(n.marginLeft)},o={top:Os(n.paddingTop),right:Os(n.paddingRight),bottom:Os(n.paddingBottom),left:Os(n.paddingLeft)},l={top:Os(n.borderTopWidth),right:Os(n.borderRightWidth),bottom:Os(n.borderBottomWidth),left:Os(n.borderLeftWidth)};return my({borderBox:t,margin:s,padding:o,border:l})},OT=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return NT(n,s)},nd=function(t){var n=[],s=null,o=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];n=f,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return o.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},o};function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cm.apply(null,arguments)}function DT(e,t){}DT.bind(null,"warn");DT.bind(null,"error");function Za(){}function B3(e,t){return{...e,...t}}function Ms(e,t,n){const s=t.map(o=>{const l=B3(n,o.options);return e.addEventListener(o.eventName,o.fn,l),function(){e.removeEventListener(o.eventName,o.fn,l)}});return function(){s.forEach(l=>{l()})}}const P3="Invariant failed";class um extends Error{}um.prototype.toString=function(){return this.message};function He(e,t){throw new um(P3)}class $3 extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Za,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof um&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Ms(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof um){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const I3=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,dm=e=>e+1,z3=e=>`
  You have lifted an item in position ${dm(e.source.index)}
`,MT=(e,t)=>{const n=e.droppableId===t.droppableId,s=dm(e.index),o=dm(t.index);return n?`
      You have moved the item from position ${s}
      to position ${o}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},CT=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,U3=e=>{const t=e.destination;if(t)return MT(e.source,t);const n=e.combine;return n?CT(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},b1=e=>`
  The item has returned to its starting position
  of ${dm(e.index)}
`,H3=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${b1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${MT(e.source,t)}
    `:n?`
      You have dropped the item.
      ${CT(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${b1(e.source)}
  `},qf={dragHandleUsageInstructions:I3,onDragStart:z3,onDragUpdate:U3,onDragEnd:H3};function G3(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function RT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!G3(e[n],t[n]))return!1;return!0}function At(e,t){const n=C.useState(()=>({inputs:t,result:e()}))[0],s=C.useRef(!0),o=C.useRef(n),u=s.current||!!(t&&o.current.inputs&&RT(t,o.current.inputs))?o.current:{inputs:t,result:e()};return C.useEffect(()=>{s.current=!1,o.current=u},[u]),u.result}function Je(e,t){return At(()=>e,t)}const Xn={x:0,y:0},or=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),us=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Va=(e,t)=>e.x===t.x&&e.y===t.y,Nc=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),al=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},rd=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),y1=(e,t)=>Math.min(...t.map(n=>rd(e,n))),LT=e=>t=>({x:e(t.x),y:e(t.y)});var F3=(e,t)=>{const n=si({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const _d=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),v1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],q3={top:0,right:0,bottom:0,left:0},Y3=(e,t)=>t?_d(e,t.scroll.diff.displacement):e,Z3=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,V3=(e,t)=>t&&t.shouldClipSubject?F3(t.pageMarginBox,e):si(e);var xc=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const o=Y3(e.marginBox,s),l=Z3(o,n,t),u=V3(l,s);return{page:e,withPlaceholder:t,active:u}},py=(e,t)=>{e.frame||He();const n=e.frame,s=us(t,n.scroll.initial),o=Nc(s),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:o},max:n.scroll.max}},u=xc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Kn(e,t=RT){let n=null;function s(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const l=e.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return s.clear=function(){n=null},s}const BT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),PT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Bm=Kn(e=>Object.values(e)),K3=Kn(e=>Object.values(e));var Oc=Kn((e,t)=>K3(t).filter(s=>e===s.descriptor.droppableId).sort((s,o)=>s.descriptor.index-o.descriptor.index));function gy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Pm(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var $m=Kn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),W3=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:o})=>{if(!n.isCombineEnabled||!gy(o))return null;function u(S){const T={type:"COMBINE",combine:{draggableId:S,droppableId:n.descriptor.id}};return{...o,at:T}}const f=o.displaced.all,m=f.length?f[0]:null;if(e)return m?u(m):null;const p=$m(t,s);if(!m){if(!p.length)return null;const S=p[p.length-1];return u(S.descriptor.id)}const y=p.findIndex(S=>S.descriptor.id===m);y===-1&&He();const _=y-1;if(_<0)return null;const x=p[_];return u(x.descriptor.id)},Dc=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const $T={point:Xn,value:0},sd={invisible:{},visible:{},all:[]},X3={displaced:sd,displacedBy:$T,at:null};var Ps=(e,t)=>n=>e<=n&&n<=t,IT=e=>{const t=Ps(e.top,e.bottom),n=Ps(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const l=t(s.top)||t(s.bottom),u=n(s.left)||n(s.right);if(l&&u)return!0;const m=s.top<e.top&&s.bottom>e.bottom,p=s.left<e.left&&s.right>e.right;return m&&p?!0:m&&u||p&&l}},J3=e=>{const t=Ps(e.top,e.bottom),n=Ps(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const by={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},zT={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Q3=e=>t=>{const n=Ps(t.top,t.bottom),s=Ps(t.left,t.right);return o=>e===by?n(o.top)&&n(o.bottom):s(o.left)&&s(o.right)};const eR=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Xn;return _d(e,n)},tR=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,nR=(e,t,n)=>n(t)(e),yy=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:o})=>{const l=s?eR(e,t):e;return tR(l,t,o)&&nR(l,n,o)},rR=e=>yy({...e,isVisibleThroughFrameFn:IT}),UT=e=>yy({...e,isVisibleThroughFrameFn:J3}),sR=e=>yy({...e,isVisibleThroughFrameFn:Q3(e.destination.axis)}),iR=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:o}=t;if(s[e])return!1;const l=o[e];return l?l.shouldAnimate:!0};function aR(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return si(fy(n,s))}function id({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:o,last:l}){return e.reduce(function(f,m){const p=aR(m,n),y=m.descriptor.id;if(f.all.push(y),!rR({target:p,destination:t,viewport:s,withDroppableDisplacement:!0}))return f.invisible[m.descriptor.id]=!0,f;const x=iR(y,l,o),S={draggableId:y,shouldAnimate:x};return f.visible[y]=S,f},{all:[],visible:{},invisible:{}})}function oR(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function _1({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const o=oR(e,{inHomeList:t});return{displaced:sd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function hm({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:o,last:l,index:u,forceShouldAnimate:f}){const m=Dc(e,n);if(u==null)return _1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return _1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const y=$m(e,t),_=t.indexOf(p),x=y.slice(_);return{displaced:id({afterDragging:x,destination:n,displacedBy:o,last:l,viewport:s.frame,forceShouldAnimate:f}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function Ka(e,t){return!!t.effected[e]}var lR=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const l=s.draggableId,f=n[l].descriptor.index;return Ka(l,o)?e?f:f-1:e?f+1:f},cR=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const o=s.index,l=e?o+1:o-1,u=n[0].descriptor.index,f=n[n.length-1].descriptor.index,m=t?f:f+1;return l<u||l>m?null:l},uR=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:o,insideDestination:l,previousImpact:u,viewport:f,afterCritical:m})=>{const p=u.at;if(p||He(),p.type==="REORDER"){const _=cR({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return _==null?null:hm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:_})}const y=lR({isMovingForward:e,destination:o,displaced:u.displaced,draggables:s,combine:p.combine,afterCritical:m});return y==null?null:hm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:y})},dR=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const o=!!(e.visible[n]||e.invisible[n]);return Ka(n,t)?o?Xn:Nc(s.point):o?s.point:Xn},hR=({afterCritical:e,impact:t,draggables:n})=>{const s=Pm(t);s||He();const o=s.draggableId,l=n[o].page.borderBox.center,u=dR({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return or(l,u)};const HT=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,fR=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,vy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,x1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.end]+HT(e,n),vy(e,t.marginBox,n)),w1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.start]-fR(e,n),vy(e,t.marginBox,n)),mR=({axis:e,moveInto:t,isMoving:n})=>al(e.line,t.contentBox[e.start]+HT(e,n),vy(e,t.contentBox,n));var pR=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:o})=>{const l=Oc(s.descriptor.id,n),u=t.page,f=s.axis;if(!l.length)return mR({axis:f,moveInto:s.page,isMoving:u});const{displaced:m,displacedBy:p}=e,y=m.all[0];if(y){const x=n[y];if(Ka(y,o))return w1({axis:f,moveRelativeTo:x.page,isMoving:u});const S=om(x.page,p.point);return w1({axis:f,moveRelativeTo:S,isMoving:u})}const _=l[l.length-1];if(_.descriptor.id===t.descriptor.id)return u.borderBox.center;if(Ka(_.descriptor.id,o)){const x=om(_.page,Nc(o.displacedBy.point));return x1({axis:f,moveRelativeTo:x,isMoving:u})}return x1({axis:f,moveRelativeTo:_.page,isMoving:u})},Db=(e,t)=>{const n=e.frame;return n?or(t,n.scroll.diff.displacement):t};const gR=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:o})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?pR({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:o}):hR({impact:e,draggables:s,afterCritical:o})};var Im=e=>{const t=gR(e),n=e.droppable;return n?Db(n,t):t},GT=(e,t)=>{const n=us(t,e.scroll.initial),s=Nc(n);return{frame:si({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function S1(e,t){return e.map(n=>t[n])}function bR(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var yR=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:o})=>{const l=GT(t,or(t.scroll.current,o)),u=n.frame?py(n,or(n.frame.scroll.current,o)):n,f=e.displaced,m=id({afterDragging:S1(f.all,s),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),p=id({afterDragging:S1(f.all,s),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:f,forceShouldAnimate:!1}),y={},_={},x=[f,m,p];return f.all.forEach(T=>{const k=bR(T,x);if(k){_[T]=k;return}y[T]=!0}),{...e,displaced:{all:f.all,invisible:y,visible:_}}},vR=(e,t)=>or(e.scroll.diff.displacement,t),_y=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=vR(n,e),o=us(s,t.page.borderBox.center);return or(t.client.borderBox.center,o)},FT=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:o,onlyOnMainAxis:l=!1})=>{const u=us(n,e.page.borderBox.center),m={target:_d(e.page.borderBox,u),destination:t,withDroppableDisplacement:o,viewport:s};return l?sR(m):UT(m)},_R=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:o,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:m})=>{if(!n.isEnabled)return null;const p=Oc(n.descriptor.id,s),y=Dc(t,n),_=W3({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:o})||uR({isMovingForward:e,isInHomeList:y,draggable:t,draggables:s,destination:n,insideDestination:p,previousImpact:o,viewport:l,afterCritical:m});if(!_)return null;const x=Im({impact:_,draggable:t,droppable:n,draggables:s,afterCritical:m});if(FT({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:_y({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:_,scrollJumpRequest:null};const T=us(x,u),k=yR({impact:_,viewport:l,destination:n,draggables:s,maxScrollChange:T});return{clientSelection:f,impact:k,scrollJumpRequest:T}};const Sr=e=>{const t=e.subject.active;return t||He(),t};var xR=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:o})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,f=Ps(l[u.start],l[u.end]),m=Bm(s).filter(y=>y!==n).filter(y=>y.isEnabled).filter(y=>!!y.subject.active).filter(y=>IT(o.frame)(Sr(y))).filter(y=>{const _=Sr(y);return e?l[u.crossAxisEnd]<_[u.crossAxisEnd]:_[u.crossAxisStart]<l[u.crossAxisStart]}).filter(y=>{const _=Sr(y),x=Ps(_[u.start],_[u.end]);return f(_[u.start])||f(_[u.end])||x(l[u.start])||x(l[u.end])}).sort((y,_)=>{const x=Sr(y)[u.crossAxisStart],S=Sr(_)[u.crossAxisStart];return e?x-S:S-x}).filter((y,_,x)=>Sr(y)[u.crossAxisStart]===Sr(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(y=>Ps(Sr(y)[u.start],Sr(y)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((y,_)=>Sr(y)[u.start]-Sr(_)[u.start])[0]:m.sort((y,_)=>{const x=y1(t,v1(Sr(y))),S=y1(t,v1(Sr(_)));return x!==S?x-S:Sr(y)[u.start]-Sr(_)[u.start]})[0]};const E1=(e,t)=>{const n=e.page.borderBox.center;return Ka(e.descriptor.id,t)?us(n,t.displacedBy.point):n},wR=(e,t)=>{const n=e.page.borderBox;return Ka(e.descriptor.id,t)?_d(n,Nc(t.displacedBy.point)):n};var SR=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:o})=>s.filter(u=>UT({target:wR(u,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const m=rd(e,Db(n,E1(u,o))),p=rd(e,Db(n,E1(f,o)));return m<p?-1:p<m?1:u.descriptor.index-f.descriptor.index})[0]||null,xd=Kn(function(t,n){const s=n[t.line];return{value:s,point:al(t.line,s)}});const ER=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return al(s.line,t[s.line]);const o=e.subject.page.contentBox[s.size],m=Oc(e.descriptor.id,n).reduce((p,y)=>p+y.client.marginBox[s.size],0)+t[s.line]-o;return m<=0?null:al(s.line,m)},qT=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),YT=(e,t,n)=>{const s=e.frame;Dc(t,e)&&He(),e.subject.withPlaceholder&&He();const o=xd(e.axis,t.displaceBy).point,l=ER(e,o,n),u={placeholderSize:o,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const y=xc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:y}}const f=l?or(s.scroll.max,l):s.scroll.max,m=qT(s,f),p=xc({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},TR=e=>{const t=e.subject.withPlaceholder;t||He();const n=e.frame;if(!n){const u=xc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const s=t.oldFrameMaxScroll;s||He();const o=qT(n,s),l=xc({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:l,frame:o}};var kR=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:o,destination:l,viewport:u,afterCritical:f})=>{if(!t){if(n.length)return null;const _={displaced:sd,displacedBy:$T,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=Im({impact:_,draggable:s,droppable:l,draggables:o,afterCritical:f}),S=Dc(s,l)?l:YT(l,s,o);return FT({draggable:s,destination:S,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?_:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const _=t.descriptor.index;return t.descriptor.id===s.descriptor.id||m?_:_+1})(),y=xd(l.axis,s.displaceBy);return hm({draggable:s,insideDestination:n,destination:l,viewport:u,displacedBy:y,last:sd,index:p})},AR=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:o,droppables:l,viewport:u,afterCritical:f})=>{const m=xR({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:l,viewport:u});if(!m)return null;const p=Oc(m.descriptor.id,o),y=SR({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:f}),_=kR({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:o,moveRelativeTo:y,insideDestination:p,viewport:u,afterCritical:f});if(!_)return null;const x=Im({impact:_,draggable:n,droppable:m,draggables:o,afterCritical:f});return{clientSelection:_y({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:_,scrollJumpRequest:null}},ds=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const jR=(e,t)=>{const n=ds(e);return n?t[n]:null};var NR=({state:e,type:t})=>{const n=jR(e.impact,e.dimensions.droppables),s=!!n,o=e.dimensions.droppables[e.critical.droppable.id],l=n||o,u=l.axis.direction,f=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(f&&!s)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],y=e.current.page.borderBoxCenter,{draggables:_,droppables:x}=e.dimensions;return f?_R({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,destination:l,draggables:_,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):AR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,isOver:l,draggables:_,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Jo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function ZT(e){const t=Ps(e.top,e.bottom),n=Ps(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function OR(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function DR({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,o=n.map(l=>{const u=l.axis,f=al(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:rd(s,f)}}).sort((l,u)=>u.distance-l.distance);return o[0]?o[0].id:null}function MR({pageBorderBox:e,draggable:t,droppables:n}){const s=Bm(n).filter(o=>{if(!o.isEnabled)return!1;const l=o.subject.active;if(!l||!OR(e,l))return!1;if(ZT(l)(e.center))return!0;const u=o.axis,f=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],y=Ps(l[u.crossAxisStart],l[u.crossAxisEnd]),_=y(m),x=y(p);return!_&&!x?!0:_?m<f:p>f});return s.length?s.length===1?s[0].descriptor.id:DR({pageBorderBox:e,draggable:t,candidates:s}):null}const VT=(e,t)=>si(_d(e,t));var CR=(e,t)=>{const n=e.frame;return n?VT(t,n.scroll.diff.value):t};function KT({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function RR({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var LR=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:o,viewport:l,afterCritical:u})=>{const f=n.axis,m=xd(n.axis,t.displaceBy),p=m.value,y=e[f.start],_=e[f.end],S=$m(t,s).find(k=>{const A=k.descriptor.id,M=k.page.borderBox.center[f.line],P=Ka(A,u),N=KT({displaced:o,id:A});return P?N?_<=M:y<M-p:N?_<=M+p:y<M})||null,T=RR({draggable:t,closest:S,inHomeList:Dc(t,n)});return hm({draggable:t,insideDestination:s,destination:n,viewport:l,last:o,displacedBy:m,index:T})};const BR=4;var PR=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:o,afterCritical:l})=>{if(!s.isCombineEnabled)return null;const u=s.axis,f=xd(s.axis,e.displaceBy),m=f.value,p=t[u.start],y=t[u.end],x=$m(e,o).find(T=>{const k=T.descriptor.id,A=T.page.borderBox,P=A[u.size]/BR,N=Ka(k,l),D=KT({displaced:n.displaced,id:k});return N?D?y>A[u.start]+P&&y<A[u.end]-P:p>A[u.start]-m+P&&p<A[u.end]-m-P:D?y>A[u.start]+m+P&&y<A[u.end]+m-P:p>A[u.start]+P&&p<A[u.end]-P});return x?{displacedBy:f,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:s.descriptor.id}}}:null},WT=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:o,viewport:l,afterCritical:u})=>{const f=VT(t.page.borderBox,e),m=MR({pageBorderBox:f,draggable:t,droppables:s});if(!m)return X3;const p=s[m],y=Oc(p.descriptor.id,n),_=CR(p,f);return PR({pageBorderBoxWithDroppableScroll:_,draggable:t,previousImpact:o,destination:p,insideDestination:y,afterCritical:u})||LR({pageBorderBoxWithDroppableScroll:_,draggable:t,destination:p,insideDestination:y,last:o.displaced,viewport:l,afterCritical:u})},xy=(e,t)=>({...e,[t.descriptor.id]:t});const $R=({previousImpact:e,impact:t,droppables:n})=>{const s=ds(e),o=ds(t);if(!s||s===o)return n;const l=n[s];if(!l.subject.withPlaceholder)return n;const u=TR(l);return xy(n,u)};var IR=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:o})=>{const l=$R({previousImpact:s,impact:o,droppables:n}),u=ds(o);if(!u)return l;const f=n[u];if(Dc(e,f)||f.subject.withPlaceholder)return l;const m=YT(f,e,t);return xy(l,m)},Xu=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:o,scrollJumpRequest:l})=>{const u=s||e.viewport,f=n||e.dimensions,m=t||e.current.client.selection,p=us(m,e.initial.client.selection),y={offset:p,selection:m,borderBoxCenter:or(e.initial.client.borderBoxCenter,p)},_={selection:or(y.selection,u.scroll.current),borderBoxCenter:or(y.borderBoxCenter,u.scroll.current),offset:or(y.offset,u.scroll.diff.value)},x={client:y,page:_};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const S=f.draggables[e.critical.draggable.id],T=o||WT({pageOffset:_.offset,draggable:S,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=IR({draggable:S,impact:T,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function zR(e,t){return e.map(n=>t[n])}var XT=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:o})=>{const l=e.displaced,u=zR(l.all,n),f=id({afterDragging:u,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:l});return{...e,displaced:f}},JT=({impact:e,draggable:t,droppable:n,draggables:s,viewport:o,afterCritical:l})=>{const u=Im({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:l});return _y({pageBorderBoxCenter:u,draggable:t,viewport:o})},QT=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&He();const s=e.impact,o=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:f}=l,m=u[e.critical.draggable.id],p=ds(s);p||He();const y=f[p],_=XT({impact:s,viewport:o,destination:y,draggables:u}),x=JT({impact:_,draggable:m,droppable:y,draggables:u,viewport:o,afterCritical:e.afterCritical});return Xu({impact:_,clientSelection:x,state:e,dimensions:l,viewport:o})},UR=e=>({index:e.index,droppableId:e.droppableId}),ek=({draggable:e,home:t,draggables:n,viewport:s})=>{const o=xd(t.axis,e.displaceBy),l=Oc(t.descriptor.id,n),u=l.indexOf(e);u===-1&&He();const f=l.slice(u+1),m=f.reduce((x,S)=>(x[S.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:m};return{impact:{displaced:id({afterDragging:f,destination:t,displacedBy:o,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:UR(e.descriptor)}},afterCritical:p}},HR=(e,t)=>({draggables:e.draggables,droppables:xy(e.droppables,t)}),GR=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=om(e.client,t),o=lm(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:o}},FR=e=>{const t=e.frame;return t||He(),t},qR=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(o=>{const l=o.descriptor.droppableId,u=t[l],m=FR(u).scroll.diff.value,p=or(s,m);return GR({draggable:o,offset:p,initialWindowScroll:n.scroll.initial})})},YR=({state:e,published:t})=>{const n=t.modified.map(M=>{const P=e.dimensions.droppables[M.droppableId];return py(P,M.scroll)}),s={...e.dimensions.droppables,...BT(n)},o=PT(qR({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),l={...e.dimensions.draggables,...o};t.removals.forEach(M=>{delete l[M]});const u={droppables:s,draggables:l},f=ds(e.impact),m=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],y=u.droppables[e.critical.droppable.id],{impact:_,afterCritical:x}=ek({draggable:p,home:y,draggables:l,viewport:e.viewport}),S=m&&m.isCombineEnabled?e.impact:_,T=WT({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:S,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:_,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Mb=e=>e.movementMode==="SNAP",fg=(e,t,n)=>{const s=HR(e.dimensions,t);return!Mb(e)||n?Xu({state:e,dimensions:s}):QT({state:e,dimensions:s})};function mg(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const T1={phase:"IDLE",completed:null,shouldFlush:!1};var ZR=(e=T1,t)=>{if(t.type==="FLUSH")return{...T1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&He();const{critical:n,clientSelection:s,viewport:o,dimensions:l,movementMode:u}=t.payload,f=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:s,borderBoxCenter:f.client.borderBox.center,offset:Xn},y={client:p,page:{selection:or(p.selection,o.scroll.initial),borderBoxCenter:or(p.selection,o.scroll.initial),offset:or(p.selection,o.scroll.diff.value)}},_=Bm(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:S}=ek({draggable:f,home:m,draggables:l.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:y,current:y,isWindowScrollAllowed:_,impact:x,afterCritical:S,onLiftImpact:x,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&He(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||He(),YR({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Jo(e)||He();const{client:n}=t.payload;return Va(n,e.current.client.selection)?e:Xu({state:e,clientSelection:n,impact:Mb(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return mg(e);Jo(e)||He();const{id:n,newScroll:s}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const l=py(o,s);return fg(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Jo(e)||He();const{id:n,isEnabled:s}=t.payload,o=e.dimensions.droppables[n];o||He(),o.isEnabled===s&&He();const l={...o,isEnabled:s};return fg(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Jo(e)||He();const{id:n,isCombineEnabled:s}=t.payload,o=e.dimensions.droppables[n];o||He(),o.isCombineEnabled===s&&He();const l={...o,isCombineEnabled:s};return fg(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Jo(e)||He(),e.isWindowScrollAllowed||He();const n=t.payload.newScroll;if(Va(e.viewport.scroll.current,n))return mg(e);const s=GT(e.viewport,n);return Mb(e)?QT({state:e,viewport:s}):Xu({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Jo(e))return e;const n=t.payload.maxScroll;if(Va(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&He();const n=NR({state:e,type:t.type});return n?Xu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&He(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||He(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Pt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const VR=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),KR=e=>({type:"LIFT",payload:e}),WR=e=>({type:"INITIAL_PUBLISH",payload:e}),XR=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),JR=()=>({type:"COLLECTION_STARTING",payload:null}),QR=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),e5=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),t5=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),tk=e=>({type:"MOVE",payload:e}),n5=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),r5=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),s5=()=>({type:"MOVE_UP",payload:null}),i5=()=>({type:"MOVE_DOWN",payload:null}),a5=()=>({type:"MOVE_RIGHT",payload:null}),o5=()=>({type:"MOVE_LEFT",payload:null}),wy=()=>({type:"FLUSH",payload:null}),l5=e=>({type:"DROP_ANIMATE",payload:e}),Sy=e=>({type:"DROP_COMPLETE",payload:e}),nk=e=>({type:"DROP",payload:e}),c5=e=>({type:"DROP_PENDING",payload:e}),rk=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var u5=e=>({getState:t,dispatch:n})=>s=>o=>{if(!Pt(o,"LIFT")){s(o);return}const{id:l,clientSelection:u,movementMode:f}=o.payload,m=t();m.phase==="DROP_ANIMATING"&&n(Sy({completed:m.completed})),t().phase!=="IDLE"&&He(),n(wy()),n(VR({draggableId:l,movementMode:f}));const y={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:_,dimensions:x,viewport:S}=e.startPublishing(y);n(WR({critical:_,dimensions:x,clientSelection:u,movementMode:f,viewport:S}))},d5=e=>()=>t=>n=>{Pt(n,"INITIAL_PUBLISH")&&e.dragging(),Pt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Pt(n,"FLUSH")||Pt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Ey={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ad={opacity:{drop:0,combining:.7},scale:{drop:.75}},sk={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Go=`${sk.outOfTheWay}s ${Ey.outOfTheWay}`,Ju={fluid:`opacity ${Go}`,snap:`transform ${Go}, opacity ${Go}`,drop:e=>{const t=`${e}s ${Ey.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Go}`,placeholder:`height ${Go}, width ${Go}, margin ${Go}`},k1=e=>Va(e,Xn)?void 0:`translate(${e.x}px, ${e.y}px)`,Cb={moveTo:k1,drop:(e,t)=>{const n=k1(e);if(n)return t?`${n} scale(${ad.scale.drop})`:n}},{minDropTime:Rb,maxDropTime:ik}=sk,h5=ik-Rb,A1=1500,f5=.6;var m5=({current:e,destination:t,reason:n})=>{const s=rd(e,t);if(s<=0)return Rb;if(s>=A1)return ik;const o=s/A1,l=Rb+h5*o,u=n==="CANCEL"?l*f5:l;return Number(u.toFixed(2))},p5=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:o})=>{const{draggables:l,droppables:u}=n,f=ds(e),m=f?u[f]:null,p=u[t.descriptor.droppableId],y=JT({impact:e,draggable:t,draggables:l,afterCritical:o,droppable:m||p,viewport:s});return us(y,t.client.borderBox.center)},g5=({draggables:e,reason:t,lastImpact:n,home:s,viewport:o,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:XT({draggables:e,impact:l,destination:s,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:sd},didDropInsideDroppable:!0};const b5=({getState:e,dispatch:t})=>n=>s=>{if(!Pt(s,"DROP")){n(s);return}const o=e(),l=s.payload.reason;if(o.phase==="COLLECTING"){t(c5({reason:l}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&He(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||He();const f=o.critical,m=o.dimensions,p=m.draggables[o.critical.draggable.id],{impact:y,didDropInsideDroppable:_}=g5({reason:l,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),x=_?gy(y):null,S=_?Pm(y):null,T={index:f.draggable.index,droppableId:f.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:o.movementMode,destination:x,combine:S},A=p5({impact:y,draggable:p,dimensions:m,viewport:o.viewport,afterCritical:o.afterCritical}),M={critical:o.critical,afterCritical:o.afterCritical,result:k,impact:y};if(!(!Va(o.current.client.offset,A)||!!k.combine)){t(Sy({completed:M}));return}const N=m5({current:o.current.client.offset,destination:A,reason:l});t(l5({newHomeClientOffset:A,dropDuration:N,completed:M}))};var ak=()=>({x:window.pageXOffset,y:window.pageYOffset});function y5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function v5({onWindowScroll:e}){function t(){e(ak())}const n=nd(t),s=y5(n);let o=Za;function l(){return o!==Za}function u(){l()&&He(),o=Ms(window,[s])}function f(){l()||He(),n.cancel(),o(),o=Za}return{start:u,stop:f,isActive:l}}const _5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH"),x5=e=>{const t=v5({onWindowScroll:n=>{e.dispatch(n5({newScroll:n}))}});return n=>s=>{!t.isActive()&&Pt(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&_5(s)&&t.stop(),n(s)}};var w5=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),o=l=>{t||n||(t=!0,e(l),clearTimeout(s))};return o.wasCalled=()=>t,o},S5=()=>{const e=[],t=o=>{const l=e.findIndex(f=>f.timerId===o);l===-1&&He();const[u]=e.splice(l,1);u.callback()};return{add:o=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:o};e.push(u)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const E5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,T5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,k5=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},Ru=(e,t)=>{t()},nf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function pg(e,t,n,s){if(!e){n(s(t));return}const o=w5(n);e(t,{announce:o}),o.wasCalled()||n(s(t))}var A5=(e,t)=>{const n=S5();let s=null;const o=(_,x)=>{s&&He(),Ru("onBeforeCapture",()=>{const S=e().onBeforeCapture;S&&S({draggableId:_,mode:x})})},l=(_,x)=>{s&&He(),Ru("onBeforeDragStart",()=>{const S=e().onBeforeDragStart;S&&S(nf(_,x))})},u=(_,x)=>{s&&He();const S=nf(_,x);s={mode:x,lastCritical:_,lastLocation:S.source,lastCombine:null},n.add(()=>{Ru("onDragStart",()=>pg(e().onDragStart,S,t,qf.onDragStart))})},f=(_,x)=>{const S=gy(x),T=Pm(x);s||He();const k=!k5(_,s.lastCritical);k&&(s.lastCritical=_);const A=!E5(s.lastLocation,S);A&&(s.lastLocation=S);const M=!T5(s.lastCombine,T);if(M&&(s.lastCombine=T),!k&&!A&&!M)return;const P={...nf(_,s.mode),combine:T,destination:S};n.add(()=>{Ru("onDragUpdate",()=>pg(e().onDragUpdate,P,t,qf.onDragUpdate))})},m=()=>{s||He(),n.flush()},p=_=>{s||He(),s=null,Ru("onDragEnd",()=>pg(e().onDragEnd,_,t,qf.onDragEnd))};return{beforeCapture:o,beforeStart:l,start:u,update:f,flush:m,drop:p,abort:()=>{if(!s)return;const _={...nf(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};p(_)}}},j5=(e,t)=>{const n=A5(e,t);return s=>o=>l=>{if(Pt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Pt(l,"INITIAL_PUBLISH")){const f=l.payload.critical;n.beforeStart(f,l.payload.movementMode),o(l),n.start(f,l.payload.movementMode);return}if(Pt(l,"DROP_COMPLETE")){const f=l.payload.completed.result;n.flush(),o(l),n.drop(f);return}if(o(l),Pt(l,"FLUSH")){n.abort();return}const u=s.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const N5=e=>t=>n=>{if(!Pt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&He(),e.dispatch(Sy({completed:s.completed}))},O5=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>l=>{if((Pt(l,"FLUSH")||Pt(l,"DROP_COMPLETE")||Pt(l,"DROP_ANIMATION_FINISHED"))&&s(),o(l),!Pt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(rk())}};n=requestAnimationFrame(()=>{n=null,t=Ms(window,[u])})}};var D5=e=>()=>t=>n=>{(Pt(n,"DROP_COMPLETE")||Pt(n,"FLUSH")||Pt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},M5=e=>{let t=!1;return()=>n=>s=>{if(Pt(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Pt(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Pt(s,"DROP_COMPLETE")){t=!1;const o=s.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const C5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH");var R5=e=>t=>n=>s=>{if(C5(s)){e.stop(),n(s);return}if(Pt(s,"INITIAL_PUBLISH")){n(s);const o=t.getState();o.phase!=="DRAGGING"&&He(),e.start(o);return}n(s),e.scroll(t.getState())};const L5=e=>t=>n=>{if(t(n),!Pt(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(nk({reason:s.reason})))},B5=wT;var P5=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:o,autoScroller:l})=>xT(ZR,B5(RC(d5(n),D5(e),u5(e),b5,N5,O5,L5,R5(l),x5,M5(t),j5(s,o))));const gg=()=>({additions:{},removals:{},modified:{}});function $5({registry:e,callbacks:t}){let n=gg(),s=null;const o=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:m,removals:p,modified:y}=n,_=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Xn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(y).map(T=>{const A=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:A}}),S={additions:_,removals:Object.keys(p),modified:x};n=gg(),t.publish(S)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],o()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],o()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=gg())}}}var ok=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const o=us({x:t,y:e},{x:s,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},lk=()=>{const e=document.documentElement;return e||He(),e},ck=()=>{const e=lk();return ok({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},I5=()=>{const e=ak(),t=ck(),n=e.y,s=e.x,o=lk(),l=o.clientWidth,u=o.clientHeight,f=s+l,m=n+u;return{frame:si({top:n,left:s,right:f,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Xn,displacement:Xn}}}},z5=({critical:e,scrollOptions:t,registry:n})=>{const s=I5(),o=s.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(y=>y.callbacks.getDimensionAndWatchScroll(o,t)),f=n.draggable.getAllByType(e.draggable.type).map(y=>y.getDimension(o));return{dimensions:{draggables:PT(f),droppables:BT(u)},critical:e,viewport:s}};function j1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var U5=(e,t)=>{let n=null;const s=$5({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(x,S)=>{e.droppable.exists(x)||He(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:S})},l=(x,S)=>{n&&(e.droppable.exists(x)||He(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:S}))},u=(x,S)=>{n&&(e.droppable.exists(x)||He(),t.updateDroppableScroll({id:x,newScroll:S}))},f=(x,S)=>{n&&e.droppable.getById(x).callbacks.scroll(S)},m=()=>{if(!n)return;s.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(S=>S.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||He();const S=n.critical.draggable;x.type==="ADDITION"&&j1(e,S,x.value)&&s.add(x.value),x.type==="REMOVAL"&&j1(e,S,x.value)&&s.remove(x.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{n&&He();const S=e.draggable.getById(x.draggableId),T=e.droppable.getById(S.descriptor.droppableId),k={draggable:S.descriptor,droppable:T.descriptor},A=e.subscribe(p);return n={critical:k,unsubscribe:A},z5({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},uk=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",H5=e=>{window.scrollBy(e.x,e.y)};const G5=Kn(e=>Bm(e).filter(t=>!(!t.isEnabled||!t.frame))),F5=(e,t)=>G5(t).find(s=>(s.frame||He(),ZT(s.frame.pageMarginBox)(e)))||null;var q5=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return F5(e,n)};const od={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Y5=(e,t,n=()=>od)=>{const s=n(),o=e[t.size]*s.startFromPercentage,l=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:l}},dk=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},Ty=1,Z5=(e,t,n=()=>od)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return Ty;const l=1-dk({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=s.maxPixelScroll*s.ease(l);return Math.ceil(u)},V5=(e,t,n)=>{const s=n(),o=s.durationDampening.accelerateAt,l=s.durationDampening.stopDampeningAt,u=t,f=l,p=Date.now()-u;if(p>=l)return e;if(p<o)return Ty;const y=dk({startOfRange:o,endOfRange:f,current:p}),_=e*s.ease(y);return Math.ceil(_)},N1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=Z5(e,t,o);return l===0?0:s?Math.max(V5(l,n,o),Ty):l},O1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=Y5(e,s,l);return t[s.end]<t[s.start]?N1({distanceToEdge:t[s.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l}):-1*N1({distanceToEdge:t[s.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l})},K5=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,o=t.width>e.width;return!o&&!s?n:o&&s?null:{x:o?0:n.x,y:s?0:n.y}};const W5=LT(e=>e===0?0:e);var hk=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},f=O1({container:t,distanceToEdges:u,dragStartTime:e,axis:by,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),m=O1({container:t,distanceToEdges:u,dragStartTime:e,axis:zT,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),p=W5({x:m,y:f});if(Va(p,Xn))return null;const y=K5({container:t,subject:n,proposedScroll:p});return y?Va(y,Xn)?null:y:null};const X5=LT(e=>e===0?0:e>0?1:-1),ky=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const o=or(t,s),l={x:e(o.x,n.x),y:e(o.y,n.y)};return Va(l,Xn)?null:l}})(),fk=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=X5(n),l=ky({max:s,current:t,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},Ay=(e,t)=>fk({current:e.scroll.current,max:e.scroll.max,change:t}),J5=(e,t)=>{if(!Ay(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return ky({current:s,max:n,change:t})},jy=(e,t)=>{const n=e.frame;return n?fk({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Q5=(e,t)=>{const n=e.frame;return!n||!jy(e,t)?null:ky({current:n.scroll.current,max:n.scroll.max,change:t})};var eL=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=hk({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return u&&Ay(e,u)?u:null},tL=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const f=hk({dragStartTime:s,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return f&&jy(e,f)?f:null},D1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:o,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const _=e.viewport,x=eL({dragStartTime:t,viewport:_,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){s(x);return}}const p=q5({center:u,destination:ds(e.impact),droppables:e.dimensions.droppables});if(!p)return;const y=tL({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});y&&o(p.descriptor.id,y)},nL=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>od})=>{const s=nd(e),o=nd(t);let l=null;const u=p=>{l||He();const{shouldUseTimeDampening:y,dragStartTime:_}=l;D1({state:p,scrollWindow:s,scrollDroppable:o,dragStartTime:_,shouldUseTimeDampening:y,getAutoScrollerOptions:n})};return{start:p=>{l&&He();const y=Date.now();let _=!1;const x=()=>{_=!0};D1({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:y,shouldUseTimeDampening:_},_&&u(p)},stop:()=>{l&&(s.cancel(),o.cancel(),l=null)},scroll:u}},rL=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(f,m)=>{const p=or(f.current.client.selection,m);e({client:p})},o=(f,m)=>{if(!jy(f,m))return m;const p=Q5(f,m);if(!p)return t(f.descriptor.id,m),null;const y=us(m,p);return t(f.descriptor.id,y),us(m,y)},l=(f,m,p)=>{if(!f||!Ay(m,p))return p;const y=J5(m,p);if(!y)return n(p),null;const _=us(p,y);return n(_),us(p,_)};return f=>{const m=f.scrollJumpRequest;if(!m)return;const p=ds(f.impact);p||He();const y=o(f.dimensions.droppables[p],m);if(!y)return;const _=f.viewport,x=l(f.isWindowScrollAllowed,_,y);x&&s(f,x)}},sL=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const o=nL({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),l=rL({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(s().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){o.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:o.start,stop:o.stop}};const wc="data-rfd",Sc=(()=>{const e=`${wc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Lb=(()=>{const e=`${wc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),iL=(()=>{const e=`${wc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),M1={contextId:`${wc}-scroll-container-context-id`},aL=e=>t=>`[${t}="${e}"]`,Lu=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),oL="pointer-events: none;";var lL=e=>{const t=aL(e),n=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Sc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:oL,dropAnimating:f}}})(),s=(()=>{const f=`
      transition: ${Ju.outOfTheWay};
    `;return{selector:t(Lb.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),o={selector:t(iL.contextId),styles:{always:"overflow-anchor: none;"}},u=[s,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Lu(u,"always"),resting:Lu(u,"resting"),dragging:Lu(u,"dragging"),dropAnimating:Lu(u,"dropAnimating"),userCancel:Lu(u,"userCancel")}};const hs=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect,bg=()=>{const e=document.querySelector("head");return e||He(),e},C1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function cL(e,t){const n=At(()=>lL(e),[e]),s=C.useRef(null),o=C.useRef(null),l=Je(Kn(_=>{const x=o.current;x||He(),x.textContent=_}),[]),u=Je(_=>{const x=s.current;x||He(),x.textContent=_},[]);hs(()=>{!s.current&&!o.current||He();const _=C1(t),x=C1(t);return s.current=_,o.current=x,_.setAttribute(`${wc}-always`,e),x.setAttribute(`${wc}-dynamic`,e),bg().appendChild(_),bg().appendChild(x),u(n.always),l(n.resting),()=>{const S=T=>{const k=T.current;k||He(),bg().removeChild(k),T.current=null};S(s),S(o)}},[t,u,l,n.always,n.resting,e]);const f=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(_=>{if(_==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{o.current&&l(n.resting)},[l,n.resting]);return At(()=>({dragging:f,dropping:m,resting:p}),[f,m,p])}function mk(e,t){return Array.from(e.querySelectorAll(t))}var pk=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function zm(e){return e instanceof pk(e).HTMLElement}function uL(e,t){const n=`[${Sc.contextId}="${e}"]`,s=mk(document,n);if(!s.length)return null;const o=s.find(l=>l.getAttribute(Sc.draggableId)===t);return!o||!zm(o)?null:o}function dL(e){const t=C.useRef({}),n=C.useRef(null),s=C.useRef(null),o=C.useRef(!1),l=Je(function(x,S){const T={id:x,focus:S};return t.current[x]=T,function(){const A=t.current;A[x]!==T&&delete A[x]}},[]),u=Je(function(x){const S=uL(e,x);S&&S!==document.activeElement&&S.focus()},[e]),f=Je(function(x,S){n.current===x&&(n.current=S)},[]),m=Je(function(){s.current||o.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const S=document.activeElement;S&&S.getAttribute(Sc.draggableId)===x&&(n.current=x)},[]);return hs(()=>(o.current=!0,function(){o.current=!1;const x=s.current;x&&cancelAnimationFrame(x)}),[]),At(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:f}),[l,p,m,f])}function hL(){const e={draggables:{},droppables:{}},t=[];function n(_){return t.push(_),function(){const S=t.indexOf(_);S!==-1&&t.splice(S,1)}}function s(_){t.length&&t.forEach(x=>x(_))}function o(_){return e.draggables[_]||null}function l(_){const x=o(_);return x||He(),x}const u={register:_=>{e.draggables[_.descriptor.id]=_,s({type:"ADDITION",value:_})},update:(_,x)=>{const S=e.draggables[x.descriptor.id];S&&S.uniqueId===_.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[_.descriptor.id]=_)},unregister:_=>{const x=_.descriptor.id,S=o(x);S&&_.uniqueId===S.uniqueId&&(delete e.draggables[x],e.droppables[_.descriptor.droppableId]&&s({type:"REMOVAL",value:_}))},getById:l,findById:o,exists:_=>!!o(_),getAllByType:_=>Object.values(e.draggables).filter(x=>x.descriptor.type===_)};function f(_){return e.droppables[_]||null}function m(_){const x=f(_);return x||He(),x}const p={register:_=>{e.droppables[_.descriptor.id]=_},unregister:_=>{const x=f(_.descriptor.id);x&&_.uniqueId===x.uniqueId&&delete e.droppables[_.descriptor.id]},getById:m,findById:f,exists:_=>!!f(_),getAllByType:_=>Object.values(e.droppables).filter(x=>x.descriptor.type===_)};function y(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:y}}function fL(){const e=At(hL,[]);return C.useEffect(()=>function(){e.clean()},[e]),e}var Ny=rn.createContext(null),fm=()=>{const e=document.body;return e||He(),e};const mL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},pL=e=>`rfd-announcement-${e}`;function gL(e){const t=At(()=>pL(e),[e]),n=C.useRef(null);return C.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),cm(l.style,mL),fm().appendChild(l),function(){setTimeout(function(){const m=fm();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(o=>{const l=n.current;if(l){l.textContent=o;return}},[])}const bL={separator:"::"};function Oy(e,t=bL){const n=rn.useId();return At(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function yL({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function vL({contextId:e,text:t}){const n=Oy("hidden-text",{separator:"-"}),s=At(()=>yL({contextId:e,uniqueId:n}),[n,e]);return C.useEffect(function(){const l=document.createElement("div");return l.id=s,l.textContent=t,l.style.display="none",fm().appendChild(l),function(){const f=fm();f.contains(l)&&f.removeChild(l)}},[s,t]),s}var Um=rn.createContext(null);function gk(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),t}function _L(){let e=null;function t(){return!!e}function n(u){return u===e}function s(u){e&&He();const f={abandon:u};return e=f,f}function o(){e||He(),e=null}function l(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:s,release:o,tryAbandon:l}}function ld(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const xL=9,wL=13,Dy=27,bk=32,SL=33,EL=34,TL=35,kL=36,AL=37,jL=38,NL=39,OL=40,DL={[wL]:!0,[xL]:!0};var yk=e=>{DL[e.keyCode]&&e.preventDefault()};const Hm=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),vk=0,R1=5;function ML(e,t){return Math.abs(t.x-e.x)>=R1||Math.abs(t.y-e.y)>=R1}const L1={type:"IDLE"};function CL({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:o=>{const{button:l,clientX:u,clientY:f}=o;if(l!==vk)return;const m={x:u,y:f},p=n();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&He();const y=p.point;if(!ML(y,m))return;o.preventDefault();const _=p.actions.fluidLift(m);s({type:"DRAGGING",actions:_})}},{eventName:"mouseup",fn:o=>{const l=n();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===Dy){o.preventDefault(),e();return}yk(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const l=n();if(l.type==="IDLE"&&He(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Hm,fn:e}]}function RL(e){const t=C.useRef(L1),n=C.useRef(Za),s=At(()=>({eventName:"mousedown",fn:function(_){if(_.defaultPrevented||_.button!==vk||_.ctrlKey||_.metaKey||_.shiftKey||_.altKey)return;const x=e.findClosestDraggableId(_);if(!x)return;const S=e.tryGetLock(x,u,{sourceEvent:_});if(!S)return;_.preventDefault();const T={x:_.clientX,y:_.clientY};n.current(),p(S,T)}}),[e]),o=At(()=>({eventName:"webkitmouseforcewillbegin",fn:y=>{if(y.defaultPrevented)return;const _=e.findClosestDraggableId(y);if(!_)return;const x=e.findOptionsForDraggable(_);x&&(x.shouldRespectForcePress||e.canGetLock(_)&&y.preventDefault())}}),[e]),l=Je(function(){const _={passive:!1,capture:!0};n.current=Ms(window,[o,s],_)},[o,s]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=L1,n.current(),l())},[l]),f=Je(()=>{const y=t.current;u(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[u]),m=Je(function(){const _={capture:!0,passive:!1},x=CL({cancel:f,completed:u,getPhase:()=>t.current,setPhase:S=>{t.current=S}});n.current=Ms(window,x,_)},[f,u]),p=Je(function(_,x){t.current.type!=="IDLE"&&He(),t.current={type:"PENDING",point:x,actions:_},m()},[m]);hs(function(){return l(),function(){n.current()}},[l])}function LL(){}const BL={[EL]:!0,[SL]:!0,[kL]:!0,[TL]:!0};function PL(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===Dy){o.preventDefault(),n();return}if(o.keyCode===bk){o.preventDefault(),s();return}if(o.keyCode===OL){o.preventDefault(),e.moveDown();return}if(o.keyCode===jL){o.preventDefault(),e.moveUp();return}if(o.keyCode===NL){o.preventDefault(),e.moveRight();return}if(o.keyCode===AL){o.preventDefault(),e.moveLeft();return}if(BL[o.keyCode]){o.preventDefault();return}yk(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Hm,fn:n}]}function $L(e){const t=C.useRef(LL),n=At(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==bk)return;const u=e.findClosestDraggableId(l);if(!u)return;const f=e.tryGetLock(u,y,{sourceEvent:l});if(!f)return;l.preventDefault();let m=!0;const p=f.snapLift();t.current();function y(){m||He(),m=!1,t.current(),s()}t.current=Ms(window,PL(p,y),{capture:!0,passive:!1})}}),[e]),s=Je(function(){const l={passive:!1,capture:!0};t.current=Ms(window,[n],l)},[n]);hs(function(){return s(),function(){t.current()}},[s])}const yg={type:"IDLE"},IL=120,zL=.15;function UL({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Dy&&n.preventDefault(),e()}},{eventName:Hm,fn:e}]}function HL({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:l,clientY:u}=s.touches[0],f={x:l,y:u};s.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const o=n();o.type==="IDLE"&&He();const l=s.touches[0];if(!l||!(l.force>=zL))return;const f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&e();return}if(f){if(o.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Hm,fn:e}]}function GL(e){const t=C.useRef(yg),n=C.useRef(Za),s=Je(function(){return t.current},[]),o=Je(function(S){t.current=S},[]),l=At(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const T=e.findClosestDraggableId(S);if(!T)return;const k=e.tryGetLock(T,f,{sourceEvent:S});if(!k)return;const A=S.touches[0],{clientX:M,clientY:P}=A,N={x:M,y:P};n.current(),_(k,N)}}),[e]),u=Je(function(){const S={capture:!0,passive:!1};n.current=Ms(window,[l],S)},[l]),f=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(yg),n.current(),u())},[u,o]),m=Je(()=>{const x=t.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Je(function(){const S={capture:!0,passive:!1},T={cancel:m,completed:f,getPhase:s},k=Ms(window,HL(T),S),A=Ms(window,UL(T),S);n.current=function(){k(),A()}},[m,s,f]),y=Je(function(){const S=s();S.type!=="PENDING"&&He();const T=S.actions.fluidLift(S.point);o({type:"DRAGGING",actions:T,hasMoved:!1})},[s,o]),_=Je(function(S,T){s().type!=="IDLE"&&He();const k=setTimeout(y,IL);o({type:"PENDING",point:T,actions:S,longPressTimerId:k}),p()},[p,s,o,y]);hs(function(){return u(),function(){n.current();const T=s();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),o(yg))}},[s,u,o]),hs(function(){return Ms(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const FL=["input","button","textarea","select","option","optgroup","video","audio"];function _k(e,t){if(t==null)return!1;if(FL.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:_k(e,t.parentElement)}function qL(e,t){const n=t.target;return zm(n)?_k(e,n):!1}var YL=e=>si(e.getBoundingClientRect()).center;function ZL(e){return e instanceof pk(e).Element}const VL=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function xk(e,t){return e==null?null:e[VL](t)?e:xk(e.parentElement,t)}function KL(e,t){return e.closest?e.closest(t):xk(e,t)}function WL(e){return`[${Sc.contextId}="${e}"]`}function XL(e,t){const n=t.target;if(!ZL(n))return null;const s=WL(e),o=KL(n,s);return!o||!zm(o)?null:o}function JL(e,t){const n=XL(e,t);return n?n.getAttribute(Sc.draggableId):null}function QL(e,t){const n=`[${Lb.contextId}="${e}"]`,o=mk(document,n).find(l=>l.getAttribute(Lb.id)===t);return!o||!zm(o)?null:o}function eB(e){e.preventDefault()}function rf({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function wk({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const o=n.draggable.findById(s);return!(!o||!o.options.isEnabled||!uk(t.getState(),s))}function tB({lockAPI:e,contextId:t,store:n,registry:s,draggableId:o,forceSensorStop:l,sourceEvent:u}){if(!wk({lockAPI:e,store:n,registry:s,draggableId:o}))return null;const m=s.draggable.getById(o),p=QL(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&qL(p,u))return null;const y=e.claim(l||Za);let _="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function S(){return e.isActive(y)}function T(R,z){rf({expected:R,phase:_,isLockActive:S,shouldWarn:!0})&&n.dispatch(z())}const k=T.bind(null,"DRAGGING");function A(R){function z(){e.release(),_="COMPLETED"}_!=="PRE_DRAG"&&(z(),He()),n.dispatch(KR(R.liftActionArgs)),_="DRAGGING";function F(q,Y={shouldBlockNextClick:!1}){if(R.cleanup(),Y.shouldBlockNextClick){const ne=Ms(window,[{eventName:"click",fn:eB,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ne)}z(),n.dispatch(nk({reason:q}))}return{isActive:()=>rf({expected:"DRAGGING",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,drop:q=>F("DROP",q),cancel:q=>F("CANCEL",q),...R.actions}}function M(R){const z=nd(q=>{k(()=>tk({client:q}))});return{...A({liftActionArgs:{id:o,clientSelection:R,movementMode:"FLUID"},cleanup:()=>z.cancel(),actions:{move:z}}),move:z}}function P(){const R={moveUp:()=>k(s5),moveRight:()=>k(a5),moveDown:()=>k(i5),moveLeft:()=>k(o5)};return A({liftActionArgs:{id:o,clientSelection:YL(p),movementMode:"SNAP"},cleanup:Za,actions:R})}function N(){rf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!0})&&e.release()}return{isActive:()=>rf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:M,snapLift:P,abort:N}}const nB=[RL,$L,GL];function rB({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:o}){const l=[...o?nB:[],...s||[]],u=C.useState(()=>_L())[0],f=Je(function(A,M){ld(A)&&!ld(M)&&u.tryAbandon()},[u]);hs(function(){let A=t.getState();return t.subscribe(()=>{const P=t.getState();f(A,P),A=P})},[u,t,f]),hs(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>wk({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,A,M)=>tB({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:A||null,sourceEvent:M&&M.sourceEvent?M.sourceEvent:null}),[e,u,n,t]),y=Je(k=>JL(e,k),[e]),_=Je(k=>{const A=n.draggable.findById(k);return A?A.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(wy()))},[u,t]),S=Je(()=>u.isClaimed(),[u]),T=At(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:y,findOptionsForDraggable:_,tryReleaseLock:x,isLockClaimed:S}),[m,p,y,_,x,S]);for(let k=0;k<l.length;k++)l[k](T)}const sB=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Lm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),iB=e=>({...od,...e.autoScrollerOptions,durationDampening:{...od.durationDampening,...e.autoScrollerOptions}});function Bu(e){return e.current||He(),e.current}function aB(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:o,dragHandleUsageInstructions:l}=e,u=C.useRef(null),f=gk(e),m=Je(()=>sB(f.current),[f]),p=Je(()=>iB(f.current),[f]),y=gL(t),_=vL({contextId:t,text:l}),x=cL(t,o),S=Je(ne=>{Bu(u).dispatch(ne)},[]),T=At(()=>o1({publishWhileDragging:XR,updateDroppableScroll:QR,updateDroppableIsEnabled:e5,updateDroppableIsCombineEnabled:t5,collectionStarting:JR},S),[S]),k=fL(),A=At(()=>U5(k,T),[k,T]),M=At(()=>sL({scrollWindow:H5,scrollDroppable:A.scrollDroppable,getAutoScrollerOptions:p,...o1({move:tk},S)}),[A.scrollDroppable,S,p]),P=dL(t),N=At(()=>P5({announce:y,autoScroller:M,dimensionMarshal:A,focusMarshal:P,getResponders:m,styleMarshal:x}),[y,M,A,P,m,x]);u.current=N;const D=Je(()=>{const ne=Bu(u);ne.getState().phase!=="IDLE"&&ne.dispatch(wy())},[]),R=Je(()=>{const ne=Bu(u).getState();return ne.phase==="DROP_ANIMATING"?!0:ne.phase==="IDLE"?!1:ne.isDragging},[]),z=At(()=>({isDragging:R,tryAbort:D}),[R,D]);n(z);const F=Je(ne=>uk(Bu(u).getState(),ne),[]),q=Je(()=>Jo(Bu(u).getState()),[]),Y=At(()=>({marshal:A,focus:P,contextId:t,canLift:F,isMovementAllowed:q,dragHandleUsageInstructionsId:_,registry:k}),[t,A,_,P,F,q,k]);return rB({contextId:t,store:N,registry:k,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),C.useEffect(()=>D,[D]),rn.createElement(Um.Provider,{value:Y},rn.createElement(D3,{context:Ny,store:N},e.children))}function oB(){return rn.useId()}function wd(e){const t=oB(),n=e.dragHandleUsageInstructions||qf.dragHandleUsageInstructions;return rn.createElement($3,null,s=>rn.createElement(aB,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const B1={dragging:5e3,dropAnimating:4500},lB=(e,t)=>t?Ju.drop(t.duration):e?Ju.snap:Ju.fluid,cB=(e,t)=>{if(e)return t?ad.opacity.drop:ad.opacity.combining},uB=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function dB(e){const n=e.dimension.client,{offset:s,combineWith:o,dropping:l}=e,u=!!o,f=uB(e),m=!!l,p=m?Cb.drop(s,u):Cb.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:lB(f,l),transform:p,opacity:cB(u,m),zIndex:m?B1.dropAnimating:B1.dragging,pointerEvents:"none"}}function hB(e){return{transform:Cb.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function fB(e){return e.type==="DRAGGING"?dB(e):hB(e)}function mB(e,t,n=Xn){const s=window.getComputedStyle(t),o=t.getBoundingClientRect(),l=NT(o,s),u=lm(l,n),f={client:l,tagName:t.tagName.toLowerCase(),display:s.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:m,client:l,page:u}}function pB(e){const t=Oy("draggable"),{descriptor:n,registry:s,getDraggableRef:o,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}=e,m=At(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}),[l,f,u]),p=Je(S=>{const T=o();return T||He(),mB(n,T,S)},[n,o]),y=At(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),_=C.useRef(y),x=C.useRef(!0);hs(()=>(s.draggable.register(_.current),()=>s.draggable.unregister(_.current)),[s.draggable]),hs(()=>{if(x.current){x.current=!1;return}const S=_.current;_.current=y,s.draggable.update(y,S)},[y,s.draggable])}var My=rn.createContext(null);function mm(e){const t=C.useContext(e);return t||He(),t}function gB(e){e.preventDefault()}const bB=e=>{const t=C.useRef(null),n=Je((z=null)=>{t.current=z},[]),s=Je(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:l,registry:u}=mm(Um),{type:f,droppableId:m}=mm(My),p=At(()=>({id:e.draggableId,index:e.index,type:f,droppableId:m}),[e.draggableId,e.index,f,m]),{children:y,draggableId:_,isEnabled:x,shouldRespectForcePress:S,canDragInteractiveElements:T,isClone:k,mapped:A,dropAnimationFinished:M}=e;if(!k){const z=At(()=>({descriptor:p,registry:u,getDraggableRef:s,canDragInteractiveElements:T,shouldRespectForcePress:S,isEnabled:x}),[p,u,s,T,S,x]);pB(z)}const P=At(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":_,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:gB}:null,[o,l,_,x]),N=Je(z=>{A.type==="DRAGGING"&&A.dropping&&z.propertyName==="transform"&&Lm.flushSync(M)},[M,A]),D=At(()=>{const z=fB(A),F=A.type==="DRAGGING"&&A.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":_,style:z,onTransitionEnd:F},dragHandleProps:P}},[o,P,_,A,N,n]),R=At(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return rn.createElement(rn.Fragment,null,y(D,A.snapshot,R))};var Sk=(e,t)=>e===t,Ek=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const yB=e=>e.combine?e.combine.draggableId:null,vB=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function _B(){const e=Kn((o,l)=>({x:o,y:l})),t=Kn((o,l,u=null,f=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:o,draggingOver:u,combineWith:f,combineTargetFor:null})),n=Kn((o,l,u,f,m=null,p=null,y=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:o,dimension:u,forceShouldAnimate:y,snapshot:t(l,f,m,p,null)}}));return(o,l)=>{if(ld(o)){if(o.critical.draggable.id!==l.draggableId)return null;const u=o.current.client.offset,f=o.dimensions.draggables[l.draggableId],m=ds(o.impact),p=vB(o.impact),y=o.forceShouldAnimate;return n(e(u.x,u.y),o.movementMode,f,l.isClone,m,p,y)}if(o.phase==="DROP_ANIMATING"){const u=o.completed;if(u.result.draggableId!==l.draggableId)return null;const f=l.isClone,m=o.dimensions.draggables[l.draggableId],p=u.result,y=p.mode,_=Ek(p),x=yB(p),T={duration:o.dropDuration,curve:Ey.drop,moveTo:o.newHomeClientOffset,opacity:x?ad.opacity.drop:null,scale:x?ad.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:T,draggingOver:_,combineWith:x,mode:y,forceShouldAnimate:null,snapshot:t(y,f,_,x,T)}}}return null}}function Tk(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const xB={mapped:{type:"SECONDARY",offset:Xn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Tk(null)}};function wB(){const e=Kn((u,f)=>({x:u,y:f})),t=Kn(Tk),n=Kn((u,f=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:m,snapshot:t(f)}})),s=u=>u?n(Xn,u,!0):null,o=(u,f,m,p)=>{const y=m.displaced.visible[u],_=!!(p.inVirtualList&&p.effected[u]),x=Pm(m),S=x&&x.draggableId===u?f:null;if(!y){if(!_)return s(S);if(m.displaced.invisible[u])return null;const A=Nc(p.displacedBy.point),M=e(A.x,A.y);return n(M,S,!0)}if(_)return s(S);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,S,y.shouldAnimate)};return(u,f)=>{if(ld(u))return u.critical.draggable.id===f.draggableId?null:o(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===f.draggableId?null:o(f.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const SB=()=>{const e=_B(),t=wB();return(s,o)=>e(s,o)||t(s,o)||xB},EB={dropAnimationFinished:rk},TB=jT(SB,EB,null,{context:Ny,areStatePropsEqual:Sk})(bB);function kk(e){return mm(My).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(TB,e)}function Ec(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return rn.createElement(kk,cm({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const Ak=e=>t=>e===t,kB=Ak("scroll"),AB=Ak("auto"),P1=(e,t)=>t(e.overflowX)||t(e.overflowY),jB=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return P1(n,kB)||P1(n,AB)},NB=()=>!1,jk=e=>e==null?null:e===document.body?NB()?e:null:e===document.documentElement?null:jB(e)?e:jk(e.parentElement);var Bb=e=>({x:e.scrollLeft,y:e.scrollTop});const Nk=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Nk(e.parentElement):!1;var OB=e=>{const t=jk(e),n=Nk(e);return{closestScrollable:t,isFixedOnPage:n}},DB=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:o,client:l,page:u,closest:f})=>{const m=(()=>{if(!f)return null;const{scrollSize:x,client:S}=f,T=ok({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:S,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:T,diff:{value:Xn,displacement:Xn}}}})(),p=o==="vertical"?by:zT,y=xc({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:y}};const MB=(e,t)=>{const n=OT(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,l=s+t.scrollHeight,u=o+t.scrollWidth,m=fy({top:s,right:u,bottom:l,left:o},n.border);return my({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var CB=({ref:e,descriptor:t,env:n,windowScroll:s,direction:o,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:f})=>{const m=n.closestScrollable,p=MB(e,m),y=lm(p,s),_=(()=>{if(!m)return null;const S=OT(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:S,page:lm(S,s),scroll:Bb(m),scrollSize:T,shouldClipSubject:f}})();return DB({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:o,client:p,page:y,closest:_})};const RB={passive:!1},LB={passive:!0};var $1=e=>e.shouldPublishImmediately?RB:LB;const sf=e=>e&&e.env.closestScrollable||null;function BB(e){const t=C.useRef(null),n=mm(Um),s=Oy("droppable"),{registry:o,marshal:l}=n,u=gk(e),f=At(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=C.useRef(f),p=At(()=>Kn((D,R)=>{t.current||He();const z={x:D,y:R};l.updateDroppableScroll(f.id,z)}),[f.id,l]),y=Je(()=>{const D=t.current;return!D||!D.env.closestScrollable?Xn:Bb(D.env.closestScrollable)},[]),_=Je(()=>{const D=y();p(D.x,D.y)},[y,p]),x=At(()=>nd(_),[_]),S=Je(()=>{const D=t.current,R=sf(D);if(D&&R||He(),D.scrollOptions.shouldPublishImmediately){_();return}x()},[x,_]),T=Je((D,R)=>{t.current&&He();const z=u.current,F=z.getDroppableRef();F||He();const q=OB(F),Y={ref:F,descriptor:f,env:q,scrollOptions:R};t.current=Y;const ne=CB({ref:F,descriptor:f,env:q,windowScroll:D,direction:z.direction,isDropDisabled:z.isDropDisabled,isCombineEnabled:z.isCombineEnabled,shouldClipSubject:!z.ignoreContainerClipping}),K=q.closestScrollable;return K&&(K.setAttribute(M1.contextId,n.contextId),K.addEventListener("scroll",S,$1(Y.scrollOptions))),ne},[n.contextId,f,S,u]),k=Je(()=>{const D=t.current,R=sf(D);return D&&R||He(),Bb(R)},[]),A=Je(()=>{const D=t.current;D||He();const R=sf(D);t.current=null,R&&(x.cancel(),R.removeAttribute(M1.contextId),R.removeEventListener("scroll",S,$1(D.scrollOptions)))},[S,x]),M=Je(D=>{const R=t.current;R||He();const z=sf(R);z||He(),z.scrollTop+=D.y,z.scrollLeft+=D.x},[]),P=At(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:A,scroll:M}),[A,T,k,M]),N=At(()=>({uniqueId:s,descriptor:f,callbacks:P}),[P,f,s]);hs(()=>(m.current=N.descriptor,o.droppable.register(N),()=>{t.current&&A(),o.droppable.unregister(N)}),[P,f,A,N,l,o.droppable]),hs(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),hs(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function vg(){}const I1={width:0,height:0,margin:q3},PB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?I1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},$B=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=PB({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ju.placeholder:null}},IB=e=>{const t=C.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:o,onClose:l,contextId:u}=e,[f,m]=C.useState(e.animate==="open");C.useEffect(()=>f?s!=="open"?(n(),m(!1),vg):t.current?vg:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):vg,[s,f,n]);const p=Je(_=>{_.propertyName==="height"&&(o(),s==="close"&&l())},[s,l,o]),y=$B({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:y,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var zB=rn.memo(IB);class UB extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const HB=e=>{const t=C.useContext(Um);t||He();const{contextId:n,isMovementAllowed:s}=t,o=C.useRef(null),l=C.useRef(null),{children:u,droppableId:f,type:m,mode:p,direction:y,ignoreContainerClipping:_,isDropDisabled:x,isCombineEnabled:S,snapshot:T,useClone:k,updateViewportMaxScroll:A,getContainerForClone:M}=e,P=Je(()=>o.current,[]),N=Je((K=null)=>{o.current=K},[]);Je(()=>l.current,[]);const D=Je((K=null)=>{l.current=K},[]),R=Je(()=>{s()&&A({maxScroll:ck()})},[s,A]);BB({droppableId:f,type:m,mode:p,direction:y,isDropDisabled:x,isCombineEnabled:S,ignoreContainerClipping:_,getDroppableRef:P});const z=At(()=>rn.createElement(UB,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:K,data:Z,animate:ee})=>rn.createElement(zB,{placeholder:Z,onClose:K,innerRef:D,animate:ee,contextId:n,onTransitionEnd:R})),[n,R,e.placeholder,e.shouldAnimatePlaceholder,D]),F=At(()=>({innerRef:N,placeholder:z,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":n}}),[n,f,z,N]),q=k?k.dragging.draggableId:null,Y=At(()=>({droppableId:f,type:m,isUsingCloneFor:q}),[f,q,m]);function ne(){if(!k)return null;const{dragging:K,render:Z}=k,ee=rn.createElement(kk,{draggableId:K.draggableId,index:K.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Q,ve)=>Z(Q,ve,K));return OC.createPortal(ee,M())}return rn.createElement(My.Provider,{value:Y},u(F,T),ne())};function GB(){return document.body||He(),document.body}const z1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:GB},Ok=e=>{let t={...e},n;for(n in z1)e[n]===void 0&&(t={...t,[n]:z1[n]});return t},_g=(e,t)=>e===t.droppable.type,U1=(e,t)=>t.draggables[e.draggable.id],FB=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Kn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),s=Kn((l,u,f,m,p,y)=>{const _=p.descriptor.id;if(p.descriptor.droppableId===l){const T=y?{render:y,dragging:n(p.descriptor)}:null,k={isDraggingOver:f,draggingOverWith:f?_:null,draggingFromThisWith:_,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const S={isDraggingOver:f,draggingOverWith:_,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(l,u)=>{const f=Ok(u),m=f.droppableId,p=f.type,y=!f.isDropDisabled,_=f.renderClone;if(ld(l)){const x=l.critical;if(!_g(p,x))return t;const S=U1(x,l.dimensions),T=ds(l.impact)===m;return s(m,y,T,T,S,_)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!_g(p,x.critical))return t;const S=U1(x.critical,l.dimensions);return s(m,y,Ek(x.result)===m,ds(x.impact)===m,S,_)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!_g(p,x.critical))return t;const S=ds(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return S?T?e:t:k?e:t}return t}},qB={updateViewportMaxScroll:r5},sl=jT(FB,qB,(e,t,n)=>({...Ok(n),...e,...t}),{context:Ny,areStatePropsEqual:Sk})(HB),YB={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function pm(e,t,n){const s=YB[e];if(!s)return!1;const o=new Date(e,t-1,n,0,0,0,0);return o>=s.start&&o<s.end}function ZB(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),o=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),f=e.getUTCSeconds(),m=(l-12)/24+u/1440+f/86400,p=2*Math.PI/365*(o-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function VB(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function ul(e,t,n=!1){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(s.getTime()-1800*1e3);if(t==null||!isFinite(t))return s;let o=t;Math.abs(o)<=Math.PI+1e-6&&(o=o*180/Math.PI),o=(o+540)%360-180;const l=VB(o),u=4*(o-l),f=ZB(s);return new Date(s.getTime()+(u+f)*60*1e3)}var Yf={exports:{}},KB=Yf.exports,H1;function WB(){return H1||(H1=1,(function(e,t){(function(n,s){e.exports=s()})(KB,function(){return(function(n){function s(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,s),u.l=!0,u.exports}var o={};return s.m=n,s.c=o,s.d=function(l,u,f){s.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:f})},s.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(u,"a",u),u},s.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},s.p="",s(s.s=0)})([function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0});var l=o(1),u=(function(f){return f&&f.__esModule?f:{default:f}})(l);s.default=u.default,n.exports=s.default},function(n,s,o){function l(ee){return ee&&ee.__esModule?ee:{default:ee}}Object.defineProperty(s,"__esModule",{value:!0});var u=o(2),f=l(u),m=o(3),p=l(m),y=o(4),_=l(y),x=o(5),S=l(x),T=o(6),k=l(T),A=o(7),M=l(A),P=o(8),N=l(P),D=o(9),R=l(D),z=o(10),F=l(z),q=o(11),Y=l(q),ne=o(12),K=l(ne),Z={lunarInfo:f.default,solarMonth:p.default,gan:_.default,zhi:S.default,animals:k.default,lunarTerm:M.default,lTermInfo:N.default,nStr1:R.default,nStr2:F.default,nStr3:Y.default,nStr4:K.default,lYearDays:function(ee){var Q,ve=348;for(Q=32768;Q>8;Q>>=1)ve+=Z.lunarInfo[ee-1900]&Q?1:0;return ve+Z.leapDays(ee)},leapMonth:function(ee){return 15&Z.lunarInfo[ee-1900]},leapDays:function(ee){return Z.leapMonth(ee)?65536&Z.lunarInfo[ee-1900]?30:29:0},monthDays:function(ee,Q){return Q>12||Q<1?-1:Z.lunarInfo[ee-1900]&65536>>Q?30:29},solarDays:function(ee,Q){if(Q>12||Q<1)return-1;var ve=Q-1;return ve==1?ee%4==0&&ee%100!=0||ee%400==0?29:28:Z.solarMonth[ve]},toGanZhi:function(ee){return Z.gan[ee%10]+Z.zhi[ee%12]},getTerm:function(ee,Q){if(ee<1900||ee>2100||Q<1||Q>24)return-1;var ve=Z.lTermInfo[ee-1900],W=[parseInt("0x"+ve.substr(0,5)).toString(),parseInt("0x"+ve.substr(5,5)).toString(),parseInt("0x"+ve.substr(10,5)).toString(),parseInt("0x"+ve.substr(15,5)).toString(),parseInt("0x"+ve.substr(20,5)).toString(),parseInt("0x"+ve.substr(25,5)).toString()],ie=[W[0].substr(0,1),W[0].substr(1,2),W[0].substr(3,1),W[0].substr(4,2),W[1].substr(0,1),W[1].substr(1,2),W[1].substr(3,1),W[1].substr(4,2),W[2].substr(0,1),W[2].substr(1,2),W[2].substr(3,1),W[2].substr(4,2),W[3].substr(0,1),W[3].substr(1,2),W[3].substr(3,1),W[3].substr(4,2),W[4].substr(0,1),W[4].substr(1,2),W[4].substr(3,1),W[4].substr(4,2),W[5].substr(0,1),W[5].substr(1,2),W[5].substr(3,1),W[5].substr(4,2)];return parseInt(ie[Q-1])},toChinaYear:function(ee){var Q=parseInt(ee/1e3),ve=parseInt(ee%1e3/100),W=parseInt(ee%100/10),ie=ee%10;return Z.nStr4[Q]+Z.nStr4[ve]+Z.nStr4[W]+Z.nStr4[ie]+""},toChinaMonth:function(ee){if(ee>12||ee<1)return-1;var Q=Z.nStr3[ee-1];return Q+=""},toChinaDay:function(ee){var Q;switch(ee){case 10:Q="";break;case 20:Q="";break;case 30:Q="";break;default:Q=Z.nStr2[Math.floor(ee/10)],Q+=Z.nStr1[ee%10]}return Q},getAnimal:function(ee){return Z.animals[(ee-4)%12]},solar2lunar:function(de,X,U){if(de<1900||de>2100||de==1900&&X==1&&U<31)return-1;if(de)var W=new Date(de,parseInt(X)-1,U);else var W=new Date;var ie,ce=0,te=0,de=W.getFullYear(),X=W.getMonth()+1,U=W.getDate(),B=(Date.UTC(W.getFullYear(),W.getMonth(),W.getDate())-Date.UTC(1900,0,31))/864e5;for(ie=1900;ie<2101&&B>0;ie++)te=Z.lYearDays(ie),B-=te;B<0&&(B+=te,ie--);var V=new Date,J=!1;V.getFullYear()==de&&V.getMonth()+1==X&&V.getDate()==U&&(J=!0);var I=W.getDay(),G=Z.nStr1[I];I==0&&(I=7);var oe=ie,ce=Z.leapMonth(ie),le=!1;for(ie=1;ie<13&&B>0;ie++)ce>0&&ie==ce+1&&le==0?(--ie,le=!0,te=Z.leapDays(oe)):te=Z.monthDays(oe,ie),le==1&&ie==ce+1&&(le=!1),B-=te;B==0&&ce>0&&ie==ce+1&&(le?le=!1:(le=!0,--ie)),B<0&&(B+=te,--ie);var _e=ie,Ae=B+1,je=X-1,Me=Z.getTerm(de,3),Ee=Z.toGanZhi(de-4),$e=new Date(de,1,Me).getTime();new Date(de,je,U).getTime()<$e&&(Ee=Z.toGanZhi(de-5));var Ce=Z.getTerm(de,2*X-1),Pe=Z.getTerm(de,2*X),Ie=Z.toGanZhi(12*(de-1900)+X+11);U>=Ce&&(Ie=Z.toGanZhi(12*(de-1900)+X+12));var pe=!1,Le="";Ce==U&&(pe=!0,Le=Z.lunarTerm[2*X-2]),Pe==U&&(pe=!0,Le=Z.lunarTerm[2*X-1]);var ue=Date.UTC(de,je,1,0,0,0,0)/864e5+25567+10,me=Z.toGanZhi(ue+U-1);return{lYear:oe,lMonth:_e,lDay:Ae,animal:Z.getAnimal(oe),yearCn:Z.toChinaYear(oe),monthCn:(le&&ce===_e?"":"")+Z.toChinaMonth(_e),dayCn:Z.toChinaDay(Ae),cYear:de,cMonth:X,cDay:U,gzYear:Ee,gzMonth:Ie,gzDay:me,isToday:J,isLeap:le,nWeek:I,ncWeek:""+G,isTerm:pe,term:Le}},lunar2solar:function(ee,Q,ve,W){var ie=Z.leapMonth(ee);if(Z.leapDays(ee),W&&ie!=Q||ee==2100&&Q==12&&ve>1||ee==1900&&Q==1&&ve<31)return-1;var te=Z.monthDays(ee,Q);if(ee<1900||ee>2100||ve>te)return-1;for(var de=0,X=1900;X<ee;X++)de+=Z.lYearDays(X);for(var U=0,B=!1,X=1;X<Q;X++)U=Z.leapMonth(ee),B||U<=X&&U>0&&(de+=Z.leapDays(ee),B=!0),de+=Z.monthDays(ee,X);W&&(de+=te);var V=Date.UTC(1900,1,30,0,0,0),J=new Date(864e5*(de+ve-31)+V),I=J.getUTCFullYear(),G=J.getUTCMonth()+1,oe=J.getUTCDate();return Z.solar2lunar(I,G,oe)}};s.default=Z,n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","","",""],n.exports=s.default},function(n,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=["","","","","","","","","","",""],n.exports=s.default}])})})(Yf)),Yf.exports}var Dk=WB();const XB=cl(Dk),Cy=D2({__proto__:null,default:XB},[Dk]);function Pb(e){return typeof e=="object"&&e!==null}function JB(e){if(!Pb(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,s=t.cMonth,o=t.cDay;if(typeof n!="number"||typeof s!="number"||typeof o!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:s,cDay:o,isLeap:typeof l=="boolean"?l:void 0}}function QB(e){const t=Pb(e)&&"default"in e?e.default:e;if(!Pb(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(s,o,l)=>JB(n(s,o,l,!1))}const e7=QB(Cy);function Gm(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),s=Number(e.birthDay.slice(4,6)),o=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const P=e7(n,s,o);n=P.cYear,s=P.cMonth,o=P.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),f=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,s-1,o,u,f,0,0),y=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",_=ul(p,m,y),x=l?"":_.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),S=dt(_,m),T=jt(_,m),k=xt(_,t),A=l?null:$s(_,t),M=[` : ${S} ${T} ${k}`,A?`${A}`:null].filter(Boolean).join(" ");return{corrected:_,correctedLocal:x,ganji:M}}function Ry(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function G1(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(s=>s.endsWith(""));return n&&n.length>0?n.charAt(0):null}function F1(e){const t=Ry(e.gender),n=G1(e.ganjiText)??G1(e.ganji);if(!n)return"forward";const o=["","","","",""].includes(n),l=t==="";return o&&!l||!o&&l?"forward":"backward"}function t7(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date(NaN),s={...e,dateObj:t,corrected:n};try{const o=Gm(s),l={...s,...o},u=F1(l);return{...l,dir:u}}catch(o){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",o);const l=F1(s);return{...s,dir:l}}}function n7(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),s=typeof n=="number"&&Number.isFinite(n)?n:void 0,o={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:Ry(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,sortOrder:s,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return t7(o)}function af(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5},s=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:Ry(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,sort_order:s,updated_at:new Date().toISOString()}}const ii=gd((e,t)=>({currentId:null,list:[],loading:!0,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:s}=await it.auth.getUser();if(s||!n){console.error("loadFromServer: user not found / error",s),e({list:[],currentId:null,loading:!1});return}const l=await it.from("myeongsik").select("id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at"+", sort_order").order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1}),u=l.data,f=l.error;if(f||!u){console.error("loadFromServer error:",f),e({loading:!1});return}const p=u.filter(x=>x.user_id===n.id).map(n7),y=t().currentId,_=y&&p.some(x=>x.id===y)?y:p[0]?.id??null;e({list:p,currentId:_,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let s;try{s=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const o=s.state??{},l=Array.isArray(o.list)?o.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:f}=await it.auth.getUser();if(f||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await it.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const y=new Set((m??[]).map(T=>T.id)),_=l.filter(T=>!!T&&!y.has(T.id));if(_.length===0){window.localStorage.removeItem("myeongsik-list");return}const x=_.map(T=>af(T,u.id)),{error:S}=await it.from("myeongsik").upsert(x,{onConflict:"id"});if(S){console.error("migrateLocalToServer upsert error:",S);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const s=(t().list.length||0)+1,o={...n,sortOrder:n.sortOrder??s},{data:{user:l},error:u}=await it.auth.getUser();if(u||!l){console.error("add: user not found",u);return}e(p=>({list:[...p.list,o],currentId:p.currentId??o.id}));const f=af(o,l.id),{error:m}=await it.from("myeongsik").upsert(f,{onConflict:"id"});m&&console.error("add upsert error:",m)},update:async(n,s)=>{const o=t().list.find(y=>y.id===n);if(!o)return;const l={...o,...s};e(y=>({list:y.list.map(_=>_.id===n?l:_)}));const{data:{user:u},error:f}=await it.auth.getUser();if(f||!u){console.error("update: user not found",f);return}const m=af(l,u.id),{error:p}=await it.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(o=>{const l=o.list.filter(f=>f.id!==n),u=o.currentId===n?l[0]?.id??null:o.currentId;return{list:l,currentId:u}});const{error:s}=await it.from("myeongsik").delete().eq("id",n);s&&console.error("remove error:",s)},reorder:async n=>{const s=n.map((m,p)=>({...m,sortOrder:p+1}));e({list:s});const{data:{user:o},error:l}=await it.auth.getUser();if(l||!o){console.error("reorder: user not found",l);return}const u=s.map(m=>af(m,o.id)),{error:f}=await it.from("myeongsik").upsert(u,{onConflict:"id"});f&&console.error("reorder upsert error:",f)},clear:()=>{e({currentId:null,list:[]})}})),q1="__custom__",Y1=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],Mk=({value:e,onChange:t})=>{const[n,s]=C.useState(Y1),[o,l]=C.useState(""),[u,f]=C.useState(!1),[m,p]=C.useState(""),[y,_]=C.useState(!1),{list:x}=ii(),T=x.some(N=>N.relationship==="")?n.filter(N=>N.value!==""):n;C.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=N=>{const D=N.target.value;D===q1?(f(!0),l(""),t?.("")):(f(!1),p(""),l(D),t?.(D))};C.useEffect(()=>{const N=localStorage.getItem("relationshipOptions");N&&s(JSON.parse(N))},[]),C.useEffect(()=>{(async()=>{const{data:{user:D},error:R}=await it.auth.getUser();if(R||!D)return;const{data:z,error:F}=await it.from("user_settings").select("payload").eq("user_id",D.id).single();if(F&&F.code!=="PGRST116"){console.error("load relationships settings error",F.message);return}const q=z?.payload?.relationshipOptions;if(!Array.isArray(q))return;const Y=q.map(ne=>ne&&typeof ne=="object"&&typeof ne.value=="string"&&typeof ne.label=="string"?{value:ne.value,label:ne.label}:typeof ne=="string"?{value:ne,label:ne}:null).filter(ne=>!!ne);Y.length&&s(ne=>{const K=new Set,Z=[...Y,...ne,...Y1].filter(ee=>K.has(ee.value)?!1:(K.add(ee.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(Z)),Z})})()},[]),C.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:D},error:R}=await it.auth.getUser();if(R||!D)return;const{data:z,error:F}=await it.from("user_settings").select("payload").eq("user_id",D.id).single();if(F&&F.code!=="PGRST116"){console.error("load relationships settings error",F.message);return}const q={...z?.payload??{},relationshipOptions:n},{error:Y}=await it.from("user_settings").upsert({user_id:D.id,payload:q,updated_at:new Date().toISOString()});Y&&console.error("save relationships settings error",Y.message)})()},[n]);const A=()=>{const N=m.trim();if(!N)return;const D={value:N,label:N};s(R=>[...R,D]),l(N),t?.(N),p(""),f(!1)},M=N=>{s(n.filter(D=>D.value!==N)),o===N&&l("")},P=N=>{if(!N.destination)return;const D=Array.from(n),[R]=D.splice(N.source.index,1);D.splice(N.destination.index,0,R),s(D)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:o,onChange:k,children:[g.jsx("option",{value:"",hidden:!0,children:""}),T.map(N=>g.jsx("option",{value:N.value,children:N.label},N.value)),g.jsx("option",{value:q1,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>_(!0),className:"btn_style",children:""})]}),u&&!y&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:" ",value:m,onChange:N=>p(N.target.value)}),g.jsx("button",{type:"button",onClick:A,className:"btn_style",children:""})]}),y&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(wd,{onDragEnd:P,children:g.jsx(sl,{droppableId:"relList",children:N=>g.jsxs("ul",{ref:N.innerRef,...N.droppableProps,className:"space-y-1",children:[n.map((D,R)=>g.jsx(Ec,{draggableId:D.value,index:R,children:z=>g.jsxs("li",{ref:z.innerRef,...z.draggableProps,...z.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:D.label}),g.jsx("button",{type:"button",className:"text-red-500",onClick:()=>M(D.value),children:""})]})},D.value)),N.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full btn_style mt-2",children:""})]})]})},pn=" ",Ck=["","","","","",""],Rk="ms_folders",Lk="ms_folder_order",Z1="ms_folder_favs",$b="ms_disabled_presets",ol="myeoun:folder-updated";function il(e){if(e!==pn)return e||void 0}function Fm(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(s=>typeof s=="string"):[]}catch{return[]}}function Ly(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function r7(){const e=Fm($b);return Ck.filter(t=>!e.includes(t))}function By(){return Fm(Rk)}function Py(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];Ly(Rk,t),typeof window<"u"&&window.dispatchEvent(new Event(ol))}function Zf(){const e=r7(),t=By(),n=new Set,s=[];for(const o of[...e,...t])n.has(o)||(n.add(o),s.push(o));return s}function s7(){return[pn,...Zf()]}function Bk(e){const t=e.trim();if(!t||t===pn)return;const n=By();if(n.includes(t))return;const s=[...n,t];Py(s)}function i7(e){const t=By(),n=t.filter(s=>s!==e);n.length!==t.length&&Py(n)}function a7(e){const t=Fm($b);if(t.includes(e))return;const n=[...t,e];Ly($b,n),typeof window<"u"&&window.dispatchEvent(new Event(ol))}function Vf(){return Fm(Lk)}function dc(e){Ly(Lk,e),typeof window<"u"&&window.dispatchEvent(new Event(ol))}function Zu(e,t){const n=new Set(e),s=[];for(const o of t)n.has(o)&&!s.includes(o)&&s.push(o);for(const o of e)s.includes(o)||s.push(o);return s}function o7(e){return Array.from(new Set(e))}function of(e){const t=e.filter(n=>n!==pn);return{rest:t,withUnassigned:[pn,...t]}}function l7(e,t){return Zu(t,e)}function c7({value:e,onChange:t}){const[n,s]=C.useState([pn]),[o,l]=C.useState(!1),[u,f]=C.useState(""),[m,p]=C.useState(!1),y=C.useCallback(async A=>{const{data:{user:M},error:P}=await it.auth.getUser();if(P||!M)return;const N=A.map((R,z)=>({user_id:M.id,folder_name:R,sort_order:z+1,updated_at:new Date().toISOString()})),{error:D}=await it.from("user_folder_order").upsert(N,{onConflict:"user_id,folder_name"});D&&console.error("save folder order error",D.message)},[]),_=C.useCallback(()=>{if(typeof window>"u")return;const A=o7(s7()),M=A.includes(pn)?A:[pn,...A],{rest:P}=of(M),N=Vf(),D=l7(N,P),R=[pn,...D];s(R),N.length===D.length&&N.every((F,q)=>F===D[q])||(dc(D),y(D))},[y]);C.useEffect(()=>{if(_(),typeof window<"u"){const A=()=>_();return window.addEventListener(ol,A),()=>window.removeEventListener(ol,A)}},[_]);const x=C.useMemo(()=>e||pn,[e]),S=A=>{const{rest:M}=of(A);dc(M),y(M)},T=A=>{const{source:M,destination:P}=A;if(!P||P.index===M.index)return;const{rest:N}=of(n),D=Array.from(N),[R]=D.splice(M.index,1);D.splice(P.index,0,R);const z=[pn,...D];s(z),S(z)},k=A=>{const M=il(A);M&&(Bk(M),_())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:o?"__custom__":x,onChange:A=>{const M=A.target.value;if(M==="__custom__"){l(!0),t(void 0);return}l(!1),t(il(M))},children:[n.map(A=>g.jsx("option",{value:A,children:A},A)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(A=>!A),children:m?" ":" "})]}),o&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:A=>f(A.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const A=u.trim();A&&(k(A),t(il(A)),l(!1),f(""))},children:""})]}),m&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[pn," ()"]})]}),g.jsx(wd,{onDragEnd:T,children:g.jsx(sl,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:A=>g.jsxs("ul",{ref:A.innerRef,...A.droppableProps,className:"space-y-1",children:[of(n).rest.map((M,P)=>g.jsx(Ec,{draggableId:M,index:P,children:N=>g.jsxs("li",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:M})]})},M)),A.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',pn,'" .      .']})]})}function Pk({message:e,onClose:t,ms:n=2e3}){return C.useEffect(()=>{const s=setTimeout(t,n);return()=>clearTimeout(s)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function qm(e){return typeof e=="object"&&e!==null}function u7(e){return qm(e)&&"default"in e}function d7(e){return qm(e)&&typeof e.lunar2solar=="function"}function h7(e){if(!qm(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,s=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof s!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:s,isLeap:typeof o=="boolean"?o:void 0}}function f7(e){const t=u7(e)?e.default:e;if(!d7(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(s,o,l,u)=>{const f=t.lunar2solar(s,o,l,u);return h7(f)}}}const m7=f7(Cy);function br(e,t,n,s=4,o=0){const l=m7.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,s,o)}const Pu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],$u=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],lf=["","/",""],cf=["",""];function xg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function wg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function p7({onSave:e,onClose:t}){const{add:n}=ii(),[s,o]=C.useState(0),[l,u]=C.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[f,m]=C.useState(null),[p,y]=C.useState(!1),[_,x]=C.useState(!1),S=Pu[s],T=D=>m(D);C.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(S.key)){const R=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(R){R.focus();return}}if(S.key==="mingSikType"){const R=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(R){R.focus();return}}if(S.key==="gender"){const R=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(R){R.focus();return}}if(l.birthPlace||_){const R=()=>{const z=document.querySelector(".current-step form button[type='submit']");z&&z.focus()};R(),setTimeout(R,0)}else{const R=document.getElementById("inputBirthPlaceBtn");R&&R.focus()}if(S.key==="relationship"){setTimeout(()=>{const R=document.querySelector(".current-step select");R&&R.focus()},0);return}if(S.key==="folder"){setTimeout(()=>{const R=document.querySelector(".current-step select");R&&R.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[_,s,S.key,l.birthPlace]);const k=C.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const D=Number(l.birthDay.slice(0,4)),R=Number(l.birthDay.slice(4,6)),z=Number(l.birthDay.slice(6,8)),F=br(D,R,z);return`  ${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`}catch(D){const R=D instanceof Error?D.message:void 0;return`  ${R?`: ${R}`:""}`}},[l.calendarType,l.birthDay]),A=()=>{const D=Pu[s];if(D.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),D.key==="birthDay"){const R=/^\d{8}$/;if(!l.birthDay||!R.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const z=Number(l.birthDay.substring(0,4)),F=Number(l.birthDay.substring(4,6)),q=Number(l.birthDay.substring(6,8));if(z<1900||z>2100)return T("  1900~2100  ."),!1;if(F<1||F>12)return T("  01~12  ."),!1;if(q<1||q>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const Y=new Date(z,F-1,q);if(Y.getFullYear()!==z||Y.getMonth()+1!==F||Y.getDate()!==q)return T("  ."),!1}else try{br(z,F,q)}catch(Y){return T(Y instanceof Error?Y.message:"   ."),!1}}if(D.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const R=Number(l.birthTime);if(Number.isNaN(R)||R<0||R>2359)return T("  00002359  ."),!1;const z=Number(l.birthTime.slice(0,2)),F=Number(l.birthTime.slice(2,4));if(z>23||F>59)return T("  00002359  ."),!1}}return D.key==="birthPlace"&&!l.birthPlace&&!_?(T("   ''  ."),!1):!0},M=()=>{if(!A())return;if(s<Pu.length-1){o(s+1);return}const D=il(l.folder),R=!l.birthTime||l.birthTime==="",z=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let F=Number(l.birthDay.slice(0,4)),q=Number(l.birthDay.slice(4,6)),Y=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const G=br(F,q,Y);F=G.getFullYear(),q=G.getMonth()+1,Y=G.getDate()}const ne=R?4:Number(l.birthTime.slice(0,2)),K=R?30:Number(l.birthTime.slice(2,4)),Z=new Date(F,q-1,Y,ne,K,0,0),ee=_||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,Q=ul(Z,ee,z),ve=l.mingSikType??"/",W=R?"":Q.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),ie=dt(Q,ee),te=jt(Q,ee),de=xt(Q,ve),X=R?null:$s(Q,ve),U=[` : ${ie} ${te} ${de}`,X?`${X}`:null].filter(Boolean).join(" ");function B(G,oe){const le=["","","","","","","","","",""].includes(G),_e=oe==="";return le?_e?"forward":"backward":_e?"backward":"forward"}const V=ie.charAt(0),J=B(V,l.gender??""),I={id:vT(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:R?"":l.birthTime||"",gender:l.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:D,correctedLocal:W,ganji:U,calendarType:l.calendarType??"solar",dir:J,corrected:Q,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(I),e(I),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),y(!1),x(!1),o(0)},P=D=>{if(D.key!=="Enter")return;const R=D.target,z=R.getAttribute("role");if(z==="radio"||z==="checkbox")return;const F=document.getElementById("mapModal");if(F&&F.contains(R))return;const q=R.tagName.toLowerCase(),Y=R instanceof HTMLInputElement?R.type:"";if(q==="textarea"){if(D.shiftKey)return;D.preventDefault(),M();return}if(Y==="radio"||Y==="checkbox"){D.preventDefault(),R instanceof HTMLInputElement&&R.click();return}q==="button"&&R.type!=="submit"||(D.preventDefault(),M())},N=D=>{switch(D){case"birthPlace":return _?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):pn;default:{const z=l[D];return typeof z=="string"?z:z!=null?String(z):""}}};return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[f&&g.jsx(Pk,{message:f,onClose:()=>m(null)}),Pu.slice(0,s).map((D,R)=>g.jsxs("button",{onClick:()=>o(R),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:D.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:N(D.key)})]},D.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:D=>{D.preventDefault(),M()},onKeyDown:P,children:[g.jsx("label",{className:"block mb-2 font-bold",children:S.label}),S.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.name||"",onChange:D=>u({...l,name:D.target.value})}),S.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.birthDay||"",onChange:D=>{const R=D.target.value.replace(/\D/g,"");u({...l,birthDay:R.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:$u.map(({value:D,label:R,id:z})=>{const F=l.calendarType===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:z,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:z,id:`${z}_lbl`,role:"radio","aria-checked":F,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":F?"true":"false",onKeyDown:q=>{if(q.stopPropagation(),q.key===" "||q.key==="Enter"){q.preventDefault(),u({...l,calendarType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(q.key))return;q.preventDefault();const ne=$u.findIndex(ee=>ee.value===l.calendarType),K=xg(ne<0?0:ne,$u.length,q.key),Z=$u[K].value;u({...l,calendarType:Z}),wg(`${$u[K].id}_lbl`)},onClick:q=>{q.preventDefault(),u({...l,calendarType:D})},children:R})]},D)})})]}),l.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const D=Number(l.birthDay.slice(0,4)),R=Number(l.birthDay.slice(4,6)),z=Number(l.birthDay.slice(6,8));return pm(D,R,z)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),S.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:p?"":l.birthTime||"",onChange:D=>{const R=D.target.value.replace(/\D/g,"");u({...l,birthTime:R.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),y(!p))},onClick:D=>{D.preventDefault(),y(!p)},children:""})]})]}),S.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:lf.map(D=>{const R=`ming_${D}`,z=(l.mingSikType??"/")===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:R,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:R,id:`${R}_lbl`,role:"radio","aria-checked":z,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":z?"true":"false",onKeyDown:F=>{if(F.stopPropagation(),F.key===" "||F.key==="Enter"){F.preventDefault(),u({...l,mingSikType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(F.key))return;F.preventDefault();const Y=l.mingSikType??"/",ne=lf.indexOf(Y),K=xg(ne,lf.length,F.key),Z=lf[K];u({...l,mingSikType:Z}),wg(`ming_${Z}_lbl`)},onClick:F=>{F.preventDefault(),u({...l,mingSikType:D})},children:[D,""]})]},D)})}),S.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:cf.map(D=>{const R=`gender_${D}`,z=(l.gender??"")===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:R,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:R,id:`${R}_lbl`,role:"radio","aria-checked":z,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":z?"true":"false",onKeyDown:F=>{if(F.stopPropagation(),F.key===" "||F.key==="Enter"){F.preventDefault(),u({...l,gender:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(F.key))return;F.preventDefault();const Y=l.gender??"",ne=cf.indexOf(Y),K=xg(ne,cf.length,F.key),Z=cf[K];u({...l,gender:Z}),wg(`gender_${Z}_lbl`)},onClick:F=>{F.preventDefault(),u({...l,gender:D})},children:D})]},D)})}),S.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(_T,{onSelect:D=>u({...l,birthPlace:D}),value:_?"":l.birthPlace?.name??""}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":_,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":_?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),x(!_))},onClick:D=>{D.preventDefault(),x(!_)},children:""})]})]}),S.key==="relationship"&&g.jsx(Mk,{value:l.relationship||"",onChange:D=>u({...l,relationship:D})}),S.key==="folder"&&g.jsx(c7,{value:il(l.folder),onChange:D=>u({...l,folder:D})}),S.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.memo||"",onChange:D=>u({...l,memo:D.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:s===Pu.length-1?"":""})]})]})})]})}var uf={},V1;function g7(){if(V1)return uf;V1=1,uf.match=l,uf.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,s=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function l(y,_){return u(y).some(function(x){var S=x.inverse,T=x.type==="all"||_.type===x.type;if(T&&S||!(T||S))return!1;var k=x.expressions.every(function(A){var M=A.feature,P=A.modifier,N=A.value,D=_[M];if(!D)return!1;switch(M){case"orientation":case"scan":return D.toLowerCase()===N.toLowerCase();case"width":case"height":case"device-width":case"device-height":N=p(N),D=p(D);break;case"resolution":N=m(N),D=m(D);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":N=f(N),D=f(D);break;case"grid":case"color":case"color-index":case"monochrome":N=parseInt(N,10)||1,D=parseInt(D,10)||0;break}switch(P){case"min":return D>=N;case"max":return D<=N;default:return D===N}});return k&&!S||!k&&S})}function u(y){return y.split(",").map(function(_){_=_.trim();var x=_.match(e),S=x[1],T=x[2],k=x[3]||"",A={};return A.inverse=!!S&&S.toLowerCase()==="not",A.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],A.expressions=k.map(function(M){var P=M.match(t),N=P[1].toLowerCase().match(n);return{modifier:N[1],feature:N[2],value:P[2]}}),A})}function f(y){var _=Number(y),x;return _||(x=y.match(/^(\d+)\s*\/\s*(\d+)$/),_=x[1]/x[2]),_}function m(y){var _=parseFloat(y),x=String(y).match(o)[1];switch(x){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function p(y){var _=parseFloat(y),x=String(y).match(s)[1];switch(x){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}return uf}var Sg,K1;function b7(){if(K1)return Sg;K1=1;var e=g7().match,t=typeof window<"u"?window.matchMedia:null;function n(o,l,u){var f=this,m;t&&!u&&(m=t.call(window,o)),m?(this.matches=m.matches,this.media=m.media,m.addListener(_)):(this.matches=e(o,l),this.media=o),this.addListener=p,this.removeListener=y,this.dispose=x;function p(S){m&&m.addListener(S)}function y(S){m&&m.removeListener(S)}function _(S){f.matches=S.matches,f.media=S.media}function x(){m&&m.removeListener(_)}}function s(o,l,u){return new n(o,l,u)}return Sg=s,Sg}var y7=b7();const v7=cl(y7);var _7=/[A-Z]/g,x7=/^ms-/,Eg={};function w7(e){return"-"+e.toLowerCase()}function $k(e){if(Eg.hasOwnProperty(e))return Eg[e];var t=e.replace(_7,w7);return Eg[e]=x7.test(t)?"-"+t:t}function S7(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),s=Object.keys(t),o=n.length;if(s.length!==o)return!1;for(let l=0;l<o;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var Tg={exports:{}},kg,W1;function E7(){if(W1)return kg;W1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kg=e,kg}var Ag,X1;function T7(){if(X1)return Ag;X1=1;var e=E7();function t(){}function n(){}return n.resetWarningCache=t,Ag=function(){function s(u,f,m,p,y,_){if(_!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function o(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Ag}var J1;function k7(){return J1||(J1=1,Tg.exports=T7()()),Tg.exports}var A7=k7();const Lt=cl(A7),kr=Lt.oneOfType([Lt.string,Lt.number]),Ik={all:Lt.bool,grid:Lt.bool,aural:Lt.bool,braille:Lt.bool,handheld:Lt.bool,print:Lt.bool,projection:Lt.bool,screen:Lt.bool,tty:Lt.bool,tv:Lt.bool,embossed:Lt.bool},j7={orientation:Lt.oneOf(["portrait","landscape"]),scan:Lt.oneOf(["progressive","interlace"]),aspectRatio:Lt.string,deviceAspectRatio:Lt.string,height:kr,deviceHeight:kr,width:kr,deviceWidth:kr,color:Lt.bool,colorIndex:Lt.bool,monochrome:Lt.bool,resolution:kr,type:Object.keys(Ik)},{type:iH,...N7}=j7,O7={minAspectRatio:Lt.string,maxAspectRatio:Lt.string,minDeviceAspectRatio:Lt.string,maxDeviceAspectRatio:Lt.string,minHeight:kr,maxHeight:kr,minDeviceHeight:kr,maxDeviceHeight:kr,minWidth:kr,maxWidth:kr,minDeviceWidth:kr,maxDeviceWidth:kr,minColor:Lt.number,maxColor:Lt.number,minColorIndex:Lt.number,maxColorIndex:Lt.number,minMonochrome:Lt.number,maxMonochrome:Lt.number,minResolution:kr,maxResolution:kr,...N7},D7={...Ik,...O7};var M7={all:D7};const C7=e=>`not ${e}`,R7=(e,t)=>{const n=$k(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?C7(n):`(${n}: ${t})`},L7=e=>e.join(" and "),B7=e=>{const t=[];return Object.keys(M7.all).forEach(n=>{const s=e[n];s!=null&&t.push(R7(n,s))}),L7(t)},P7=C.createContext(void 0),$7=e=>e.query||B7(e),Q1=e=>e?Object.keys(e).reduce((n,s)=>(n[$k(s)]=e[s],n),{}):void 0,zk=()=>{const e=C.useRef(!1);return C.useEffect(()=>{e.current=!0},[]),e.current},I7=e=>{const t=C.useContext(P7),n=()=>Q1(e)||Q1(t),[s,o]=C.useState(n);return C.useEffect(()=>{const l=n();S7(s,l)||o(l)},[e,t]),s},z7=e=>{const t=()=>$7(e),[n,s]=C.useState(t);return C.useEffect(()=>{const o=t();n!==o&&s(o)},[e]),n},U7=(e,t)=>{const n=()=>v7(e,t||{},!!t),[s,o]=C.useState(n),l=zk();return C.useEffect(()=>{if(l){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),s},H7=e=>{const[t,n]=C.useState(e.matches);return C.useEffect(()=>{const s=o=>{n(o.matches)};return e.addListener(s),n(e.matches),()=>{e.removeListener(s)}},[e]),t},G7=(e,t,n)=>{const s=I7(t),o=z7(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const l=U7(o,s),u=H7(l);return zk(),C.useEffect(()=>{},[u]),C.useEffect(()=>()=>{l&&l.dispose()},[]),u},Uk=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${qr[t%12]}`);return e})();function F7(e){const t=Uk.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function gm(e,t,n=1){const s=F7(e),o=t==="forward"?n:-n;return Uk[(s+o+60*1e3)%60]}const q7=60*1e3,Y7=60*q7,Z7=24*Y7;function V7(e,t){const n=new Date(e.getTime()),s=n.getFullYear()+t,o=n.getMonth(),l=n.getDate();return new Date(Date.UTC(s,o,l,n.getUTCHours(),n.getUTCMinutes()))}function Ib(e){const t=new Date(e);return t.setSeconds(0,0),t}function K7(e,t,n){const s=e.getHours(),o=n==="/"?(Math.floor((s+1)/2)*2-1+24)%24:(Math.floor(s/2)*2+1)%24,l=new Date(e);l.setHours(o,0,0,0);const u=new Date(l);u.setHours(o+2,0,0,0);const f=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?f:m}function Hk(e,t,n,s=120,o="/"){const l=Ib(e),u=K7(l,n,o),f=Ib(new Date(l.getTime()+u*120)),m=V7(e,s).getTime(),p=[];let y=gm(t,n,1);for(let _=f.getTime();_<=m;_+=10*Z7)p.push({at:new Date(_),gz:y}),y=gm(y,n,1);return{firstChange:f,events:p}}function Gk(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return s=>s===n}function Fk(e,t,n,s){const o=Gk(s,n);let l=t;const u=[];for(const f of e.events){const m=f.gz.charAt(1);o(m)&&(l=gm(l,n,1),u.push({at:f.at,gz:l}))}return{events:u}}function ai(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],s={deg:315,name:""},o=n.map(f=>({name:f.name,date:Gn(t,f.deg)})).concat([{name:s.name,date:Gn(t+1,s.deg)},{name:"",date:Gn(t+1,285)}]),l=Gn(t,315),u=Gn(t+1,315);return o.filter(f=>f.date>=l&&f.date<u).sort((f,m)=>f.date.getTime()-m.date.getTime())}const W7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},X7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},J7=e=>W7[e]??("".includes(e)?e:null),Q7=e=>X7[e]??("".includes(e)?e:null);function eS(e){const t=J7(e[0]),n=Q7(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function Sd(e,t,n,s=120,o){function l(N){return N instanceof Date||(N=new Date(N)),Math.floor((N.getHours()+1)%24/2)}function u(N){return["","","","","","","","","","","",""][l(N)]}function f(N,D,R){const z=N.charAt(0),F=N.charAt(1),q=jr.indexOf(z),Y=qr.indexOf(F),ne=D==="forward"?R:-R,K=(q+ne%10+10)%10,Z=(Y+ne%12+12)%12;return jr[K]+qr[Z]}const m=ai(e).sort((N,D)=>N.date.getTime()-D.date.getTime());let p;if(n==="forward"){const N=m.findIndex(D=>D.date>=e);N>=0&&(p=m[N].date)}else{const N=m.filter(D=>D.date<=e);N.length&&(p=N[N.length-1].date)}function y(N,D){const R=u(N),z={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},F=z[R],q=(F+2)%24,Y=new Date(N);if(Y.setSeconds(0,0),n==="backward"&&D){const K=u(D),Z=z[K],ee=new Date(D);return ee.setHours(Z,0,0,0),ee}if(n==="forward"&&D){const K=u(D),Z=z[K],ee=new Date(D);if(ee.setHours(Z,0,0,0),ee>Y)return ee}const ne=new Date(Y);return n==="forward"?(ne.setHours(q,0,0,0),ne<=Y&&ne.setDate(ne.getDate()+1)):(ne.setHours(F,0,0,0),ne>=Y&&ne.setDate(ne.getDate()-1)),ne}new Date(e).setSeconds(0,0);const x=eS(jt(e,127.5)),S=y(e,p),T=Math.floor(n==="forward"?(S.getTime()-e.getTime())/6e4:(e.getTime()-S.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let A=new Date(e.getTime()+k);try{const N=eS(jt(e,o));(n==="forward"&&x!==N||n==="backward"&&x!==N)&&(A=new Date(e.getTime()+6e4))}catch{}const M=s/10,P=[];for(let N=0;N<M;N++){const D=new Date(A);D.setFullYear(D.getFullYear()+N*10),D.setSeconds(0,0);const R=f(t,n,N+1);P.push({at:D,gz:R})}return{natalMonthPillar:t,firstChange:A,mPillars:[],events:P}}function e4(e,t){const s=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(s))}function qk(e,t,n,s,o){const l=Gk(s,n);let u=t;const f=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=gm(u,n,1),f.push({at:m.at,gz:u,age:e4(o,m.at)}))}return{events:f}}function t4(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),s=Number(e.birthDay.slice(6,8));let o=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(o=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,s,o,l,0,0)}function Ym(e){const t=t4(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",s=ul(t,e.birthPlace?.lon??null,n);return Ib(s)}function $y(e,t){const n=e.birthPlace?.lon??127.5,s=Ym(e),o=xt(s,t),l=$s(s,t,o.charAt(0));return{year:dt(s,n),month:jt(s,n),day:o,hour:l}}const n4=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${qr[t%12]}`);return e})(),r4=e=>n4.indexOf(e),jg=e=>{if(r4(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Iy(e){return typeof e=="object"&&e!==null}function s4(e){return Iy(e)&&"default"in e}function i4(e){return Iy(e)&&typeof e.lunar2solar=="function"}function a4(e){if(!Iy(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,s=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof s!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:s,isLeap:typeof o=="boolean"?o:void 0}}function o4(e){const t=s4(e)?e.default:e;if(!i4(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(s,o,l,u)=>{const f=t.lunar2solar(s,o,l,!!u);return a4(f)}}}const l4=o4(Cy),tS=e=>e<10?`0${e}`:`${e}`;function zy(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||s!=="lunar")return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}try{const p=l4.lunar2solar(o,l,u,m),y=`${p.cYear}${tS(p.cMonth)}${tS(p.cDay)}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}}function c4(e,t="/"){const n=C.useMemo(()=>zy(e),[e]),s=C.useMemo(()=>Ym(n),[n]),o=C.useMemo(()=>$y(n,t),[n,t]);return C.useMemo(()=>{const l=Sd(s,o.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function f(N,D){let R=null;const z=D.getTime();for(const F of N)if(F.at.getTime()<=z)R=F;else break;return R}const m=f(l.events,u)?.gz??o.month,p=jg(m),y=u.getFullYear(),_=Gn(y,315),S=_&&u>=_?y:y-1,T=dt(new Date(S,1,10,0,0,0),127.5),k=jg(T),A=jt(u,127.5),M=jg(A),P=[];return M&&P.push({key:"wolun",label:"",data:M}),k&&P.push({key:"seun",label:"",data:k}),p&&P.push({key:"daeun",label:"",data:p}),P},[s,n.dir,o.month,n.birthPlace?.lon])}function Qu(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function nS(e){return e<10?`0${e}`:`${e}`}function zb(e){return`${nS(e.getHours())}:${nS(e.getMinutes())}`}const Yr=gd()(X2((e,t)=>{const n=new Date,s="/",o=127.5,l=o,u=dt(n,l),f=jt(n,l),m=xt(n,s);return{date:n,scope:"",rule:s,lon:o,yearGZ:u,monthGZ:f,dayGZ:m,setDate:p=>{const{rule:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({date:p,yearGZ:dt(p,x),monthGZ:jt(p,x),dayGZ:xt(p,y)})},resetDate:()=>{const{rule:p,lon:y}=t(),_=new Date,x=typeof y=="number"?y:void 0;e({date:_,yearGZ:dt(_,x),monthGZ:jt(_,x),dayGZ:xt(_,p)})},resetMonth:()=>{const{lon:p}=t(),y=new Date;e({date:y,monthGZ:jt(y,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({rule:p,yearGZ:dt(y,x),monthGZ:jt(y,x),dayGZ:xt(y,p)})},setLon:p=>{const{date:y,rule:_}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:dt(y,x),monthGZ:jt(y,x),dayGZ:xt(y,_)})},setFromEvent:(p,y)=>{const{rule:_,lon:x}=t(),S=typeof x=="number"?x:void 0;e({date:p.at,scope:y,yearGZ:dt(p.at,S),monthGZ:jt(p.at,S),dayGZ:xt(p.at,_)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),dl={Classic:"",Modern:""};function Jt(e,t){const s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return s?s[t]??"":""}function u4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function d4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&s[o]?s[o][t]??"":""}function h4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function f4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&s[o]?s[o][t]??"":""}function Qt(e){const{baseBranch:t,targetBranch:n,era:s,gaehwa:o}=e;return!t||!n?"":s===""?o?u4(t,n):d4(t,n):o?h4(t,n):f4(t,n)}function Ed(e,t="/",n=100){const s=C.useMemo(()=>zy(e),[e]),o=C.useMemo(()=>Ym(s),[s]),l=C.useMemo(()=>$y(s,t),[s,t]),u=(f,m)=>{const p=m.getFullYear()-f.getFullYear(),y=m.getMonth()-f.getMonth(),_=m.getDate()-f.getDate(),x=y<0||y===0&&_<0?p-1:p;return Math.max(0,x)};return C.useMemo(()=>Sd(o,l.month,s.dir,n,s.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(o,m.at)})),[o,l.month,s.dir,n,s.birthPlace?.lon])}function Ng(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function m4(e,t){if(!Array.isArray(e)||e.length===0||!Ng(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],f=n[l+1];if(!Ng(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!f||Ng(f.at)&&t.getTime()<f.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const s=n.length-1,o=n[s];return{gz:o.gz??"",at:o.at,index:s}}function Uy(e,t,n){const{date:s,rule:o,lon:l}=Yr(),u=C.useMemo(()=>n??s??new Date,[n,s]),f=Ed(e,e?.mingSikType),{gz:m}=m4(f,u);return C.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,y=o??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:dt(u,p),at:u},wol:{gz:jt(u,p),at:u},il:{gz:xt(u,y),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,o,l,e,t,m])}const Hy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Gy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},p4=Object.fromEntries(Object.entries(Hy).map(([e,t])=>[t,e])),g4=Object.fromEntries(Object.entries(Gy).map(([e,t])=>[t,e])),b4=new Set(["","","","","","","","","",""]),y4=new Set(["","","","","","","","","","","",""]),v4=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],_4=(()=>{const e={};for(const t of v4){const[n,s]=t.keys;e[n]={label:t.label,elem:t.elem},e[s]={label:t.label,elem:t.elem}}return e})();function x4(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const w4={:1,:2,:3};function S4(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const E4={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function T4(e){switch(E4[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function k4({data:e,hourTable:t}){const{date:n}=Yr(),s=Wn(G=>G.settings),o=s.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:f,solarM:m,solarD:p}=C.useMemo(()=>{let G=Number(e.birthDay?.slice(0,4)??2e3),oe=Number(e.birthDay?.slice(4,6)??1),ce=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const le=br(G,oe,ce);G=le.getFullYear(),oe=le.getMonth()+1,ce=le.getDate()}return{solarY:G,solarM:oe,solarD:ce}},[e.birthDay,e.calendarType]),[y,_]=C.useState(!1);C.useEffect(()=>{f&&m&&p&&_(pm(f,m,p))},[f,m,p]);const x=!e.birthTime||e.birthTime==="";function S(G,oe){const ce=!G.birthTime||G.birthTime==="";let le=Number(G.birthDay.slice(0,4)),_e=Number(G.birthDay.slice(4,6)),Ae=Number(G.birthDay.slice(6,8));if(G.calendarType==="lunar"){const Ue=br(le,_e,Ae);le=Ue.getFullYear(),_e=Ue.getMonth()+1,Ae=Ue.getDate()}const je=ce?4:Number(G.birthTime.slice(0,2)),Me=ce?30:Number(G.birthTime.slice(2,4)),Ee=new Date(le,_e-1,Ae,je,Me,0,0),$e=!G.birthPlace||G.birthPlace.name===""||!G.birthPlace.lon,Ce=$e?127.5:G.birthPlace.lon,Pe=G.corrected instanceof Date&&!Number.isNaN(G.corrected.getTime());let Ie;Pe?Ie=G.corrected:$e?Ie=Ee:Ie=ul(Ee,Ce,ce);const pe=oe?new Date(Ie.getTime()-3600*1e3):Ie,Le=G.mingSikType??"/",ue=dt(pe,Ce),me=jt(pe,Ce),ze=xt(pe,Le),Be=ce?null:$s(pe,Le);return{corrected:pe,year:{stem:ue.charAt(0),branch:ue.charAt(1)},month:{stem:me.charAt(0),branch:me.charAt(1)},day:{stem:ze.charAt(0),branch:ze.charAt(1)},hour:Be?{stem:Be.charAt(0),branch:Be.charAt(1)}:null}}const[T,k]=C.useState(()=>S(e,y));C.useEffect(()=>{k(S(e,y))},[e,y]);const A=A4(e.correctedLocal,T.corrected,x),M=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,P=T.day.stem,[N,D]=C.useState(null),[R,z]=C.useState(()=>e.mingSikType==="");C.useEffect(()=>{D(null),z(e.mingSikType==="")},[M,e.mingSikType]);const F=C.useMemo(()=>(R?Qb:F2)[P]??[],[R,P]),q=N??T.hour,Y=s.sinsalBase===""?T.day.branch:T.year.branch,ne=vd(G=>G.setManualHour),K=(G,oe)=>{const ce={stem:G,branch:oe};D(ce),ne(ce)},Z=G=>s.showSibiUnseong?Jt(P,G):null,ee=G=>s.showSibiSinsal?Qt({baseBranch:Y,targetBranch:G,era:Og(s.sinsalMode),gaehwa:s.sinsalBloom}):null,Q=c4(e,l),ve=G7({query:"(min-width: 992px)"}),W=s.hiddenStem==="regular"?"main":"all",ie=s.exposure,te=ie===""?0:w4[ie],de=te===0?[]:Q.filter(G=>S4(G.label)<=te),X=pm(f,m,p),U=()=>_(G=>!G),B=Uy(e,t,n),V=B.dae.gz,J=B.se.gz,I=B.wol.gz;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),X&&g.jsxs("button",{onClick:U,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[N4(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",A]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${de.length===0?"grid-cols-1":de.length===1?"grid-cols-[2fr_8fr]":de.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[de.length>0&&(ve?g.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-2 p-3 ${de.length===1?"grid-cols-1":de.length===2?"grid-cols-2":"grid-cols-3"}`,children:de.map(G=>{let oe=G.data.stem,ce=G.data.branch;G.label.includes("")&&V&&(oe=V.charAt(0),ce=V.charAt(1)),G.label.includes("")&&J&&(oe=J.charAt(0),ce=J.charAt(1)),G.label.includes("")&&I&&(oe=I.charAt(0),ce=I.charAt(1));const le=Z(ce),_e=ee(ce);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:G.label}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[s.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(P,{stem:oe})}),g.jsx(Ha,{value:oe,kind:"stem",charType:s.charType,thinEum:s.thinEum}),g.jsx(Ha,{value:ce,kind:"branch",charType:s.charType,thinEum:s.thinEum}),g.jsx(qu,{branch:ce,dayStem:P,mode:W,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&g.jsx("div",{children:le}),s.showSibiSinsal&&g.jsx("div",{children:_e}),o&&g.jsx(df,{stem:oe,branch:ce})]})]})]},G.key)})})})]}):g.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-1 p-0 ${de.length===1?"grid-cols-1":de.length===2?"grid-cols-2":"grid-cols-3"}`,children:de.map(G=>{let oe=G.data.stem,ce=G.data.branch;G.label.includes("")&&V&&(oe=V.charAt(0),ce=V.charAt(1)),G.label.includes("")&&J&&(oe=J.charAt(0),ce=J.charAt(1)),G.label.includes("")&&I&&(oe=I.charAt(0),ce=I.charAt(1));const le=Z(ce),_e=ee(ce);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:G.label}),g.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[s.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(P,{stem:oe})}),g.jsx(Ha,{value:oe,kind:"stem",charType:s.charType,thinEum:s.thinEum}),g.jsx(Ha,{value:ce,kind:"branch",charType:s.charType,thinEum:s.thinEum}),g.jsx(qu,{branch:ce,dayStem:P,mode:W,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&g.jsx("div",{children:le}),s.showSibiSinsal&&g.jsx("div",{children:_e}),o&&g.jsx(df,{stem:oe,branch:ce})]})]})]},G.key)})})})]})),ve?g.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:q},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(G=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:G.label}),g.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:G.data?g.jsxs(g.Fragment,{children:[s.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(P,{stem:G.data.stem})}),g.jsx(Ha,{value:G.data.stem,kind:"stem",charType:s.charType,thinEum:s.thinEum}),g.jsx(Ha,{value:G.data.branch,kind:"branch",charType:s.charType,thinEum:s.thinEum}),g.jsx(qu,{branch:G.data.branch,dayStem:P,mode:W,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&g.jsx("div",{children:Jt(P,G.data.branch)}),s.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:s.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:G.data.branch,era:Og(s.sinsalMode),gaehwa:s.sinsalBloom})}),o&&g.jsx(df,{stem:G.data.stem,branch:G.data.branch})]})]}):g.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},G.key))})})]}):g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"px-1 pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:q},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(G=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:G.label}),g.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:G.data?g.jsxs(g.Fragment,{children:[s.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(P,{stem:G.data.stem})}),g.jsx(Ha,{value:G.data.stem,kind:"stem",charType:s.charType,thinEum:s.thinEum}),g.jsx(Ha,{value:G.data.branch,kind:"branch",charType:s.charType,thinEum:s.thinEum}),g.jsx(qu,{branch:G.data.branch,dayStem:P,mode:W,mapping:s.hiddenStemMode}),(s.showSibiUnseong||s.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[s.showSibiUnseong&&g.jsx("div",{children:Jt(P,G.data.branch)}),s.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:s.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:G.data.branch,era:Og(s.sinsalMode),gaehwa:s.sinsalBloom})}),o&&g.jsx(df,{stem:G.data.stem,branch:G.data.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},G.key))})})]})]}),x&&g.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("button",{onClick:()=>z(G=>!G),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:R?" : ":" : "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:F.map(G=>{const oe=G.charAt(0),ce=G.charAt(1),le=N?.stem===oe&&N?.branch===ce;return g.jsx("button",{onClick:()=>K(oe,ce),className:`p-2 text-xs rounded border cursor-pointer ${le?T4(ce):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${G} ( )`,children:G},G)})})]})]})}function A4(e,t,n){if(n)return"";const s=(e??"").trim();if(s)return s;const o=t instanceof Date?t:new Date(t);return Number.isNaN(o.getTime())?"":zb(o)}function df({stem:e,branch:t}){const n=Hy[e]??e,s=Gy[t]??t,o=`${n}${s}`,l=_4[o];if(!l)return null;const u=x4(l.elem);return g.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function j4(e){return qm(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Og(e){const t=dl;return j4(t)?e==="classic"?t.Classic:t.Modern:e}function Ha({value:e,kind:t,charType:n,thinEum:s}){const{settings:o}=Wn(),l=fs(e,t,o),u=n===""?t==="stem"?Hy[e]??e:Gy[e]??e:t==="stem"?p4[e]??e:g4[e]??e,f=t==="stem"?b4.has(e):y4.has(e),m=s&&f?"font-thin":"font-bold";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function N4(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),s=e.slice(4,6),o=e.slice(6,8),l=`${n}-${s}-${o}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function Wa(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,s=Number(e.birthDay?.slice(6,8)),o=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,s,o,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const f=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return ul(u,e.birthPlace?.lon??127.5,f)}function Zm(e,t){const n=e.length;if(n===0||!t)return 0;const s=e[0].at.getTime(),o=e[n-1].at.getTime(),l=t.getTime();if(l<=s)return 0;if(l>=o)return n-1;for(let u=0;u<n-1;u+=1){const f=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=f&&l<m)return u}return 0}const Yk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},O4=Object.fromEntries(Object.entries(Yk).map(([e,t])=>[t,e])),D4=Object.fromEntries(Object.entries(Zk).map(([e,t])=>[t,e]));function rS(e,t,n){return n===""?t==="stem"?Yk[e]??e:Zk[e]??e:t==="stem"?O4[e]??e:D4[e]??e}const M4=new Set(["","","","","","","","","",""]),C4=new Set(["","","","","","","","","","","",""]);function sS(e,t){return t==="stem"?M4.has(e):C4.has(e)}function R4(e){return typeof e=="object"&&e!==null}function L4(e){return R4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function B4(e){const t=dl;return L4(t)?e==="classic"?t.Classic:t.Modern:e}const P4=!1,iS=e=>e<10?`0${e}`:`${e}`;function $4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(s==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${iS(p.getMonth()+1)}${iS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function I4({data:e}){const t=Ed(e),n=C.useMemo(()=>{const R=$4(e);return Wa(R)},[e]),s=C.useMemo(()=>{const R=e.mingSikType??"/";return xt(n,R).charAt(0)},[n,e.mingSikType]),{date:o,setFromEvent:l}=Yr(),u=C.useMemo(()=>Zm(t,o),[t,o]),f=Wn(R=>R.settings),{charType:m,thinEum:p,showSipSin:y,showSibiUnseong:_,showSibiSinsal:x,sinsalBase:S,sinsalMode:T,sinsalBloom:k}=f,A=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,M=e.mingSikType??"/",P=S===""?xt(n,M).charAt(1):dt(n,A).charAt(1),N=R=>_?Jt(s,R):null,D=R=>x?Qt({baseBranch:P,targetBranch:R,era:B4(T),gaehwa:!!k}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((R,z)=>{const F=R.gz.charAt(0),q=R.gz.charAt(1),Y=z4(n,R.at),ne=z===u,K=rS(F,"stem",m),Z=rS(q,"branch",m),ee=sS(F,"stem"),Q=sS(q,"branch"),ve=p&&ee?"font-thin":"font-bold",W=p&&Q?"font-thin":"font-bold",ie=N(q),te=D(q);return g.jsxs("div",{onClick:()=>l(R,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${ne?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${R.gz}  ${R.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:Y}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(s,{stem:F})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${fs(F,"stem",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${ve}`,children:K})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${fs(q,"branch",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${W}`,children:Z})}),y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(s,{branch:q})}),(_||x)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[_&&g.jsx("div",{children:ie}),x&&g.jsx("div",{children:te})]})]})]},`${R.gz}-${z}`)})})]})}function z4(e,t){const s=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(s))}function Vm(e,t){const n=e,s=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,o=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(s||!(o||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const Vk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Kk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},U4=Object.fromEntries(Object.entries(Vk).map(([e,t])=>[t,e])),H4=Object.fromEntries(Object.entries(Kk).map(([e,t])=>[t,e]));function aS(e,t,n){return n===""?t==="stem"?Vk[e]??e:Kk[e]??e:t==="stem"?U4[e]??e:H4[e]??e}const G4=new Set(["","","","","","","","","",""]),F4=new Set(["","","","","","","","","","","",""]);function oS(e,t){return t==="stem"?G4.has(e):F4.has(e)}function q4(e){return typeof e=="object"&&e!==null}function Y4(e){return q4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Z4(e){const t=dl;return Y4(t)?e==="classic"?t.Classic:t.Modern:e}function Dg(e){return new Date(e,6,2,12,0,0,0)}function V4(e,t){return t-e+1}const K4=!1,lS=e=>e<10?`0${e}`:`${e}`;function W4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(s==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${lS(p.getMonth()+1)}${lS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function X4({data:e,list:t,onSelect:n}){const s=Wn(F=>F.settings),{date:o,setFromEvent:l}=Yr(),[u,f]=C.useState(()=>t);C.useEffect(()=>{t&&t.length>0&&f(t)},[t]);const m=Wa(e),p=C.useMemo(()=>Vm(e,m),[e,m]),y=C.useMemo(()=>p.getFullYear(),[p]),_=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=C.useMemo(()=>{if(!o)return[];const F=o.getFullYear(),q=Dg(F),Y=dt(q,_);return[{at:q,gz:Y}]},[o,_]),S=t.length>0?t:u.length>0?u:x,T=C.useMemo(()=>[...S].sort((F,q)=>F.at.getTime()-q.at.getTime()),[S]),k=C.useMemo(()=>{if(T.length===0)return 0;const F=Zm(T,o);return F<0?0:F>=T.length?T.length-1:F},[T,o]),[A,M]=C.useState(null);C.useEffect(()=>{M(null)},[o,T]);const P=A??k,N=C.useMemo(()=>{const F=W4(e);return Wa(F)},[e]),D=e.mingSikType??"/",R=C.useMemo(()=>xt(N,D).charAt(0),[N,D]),z=C.useMemo(()=>s.sinsalBase===""?xt(p,D).charAt(1):dt(p,_).charAt(1),[p,D,_,s.sinsalBase]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((F,q)=>{const Y=F.at.getFullYear(),ne=Dg(Y),K=dt(ne,_),Z=K.charAt(0),ee=K.charAt(1),Q=q===P,ve=aS(Z,"stem",s.charType),W=aS(ee,"branch",s.charType),ie=oS(Z,"stem"),te=oS(ee,"branch"),de=s.thinEum&&ie?"font-thin":"font-bold",X=s.thinEum&&te?"font-thin":"font-bold",U=s.showSibiUnseong?Jt(R,ee):null,B=s.showSibiSinsal?Qt({baseBranch:z,targetBranch:ee,era:Z4(s.sinsalMode),gaehwa:!!s.sinsalBloom}):null,V=V4(y,Y);return g.jsxs("div",{onClick:()=>{if(q===0){M(q);return}M(q);const J=Dg(Y),I=dt(J,_);l({at:J,gz:I},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(Y)):Promise.resolve().then(()=>n(Y)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${Q?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${K}  ${F.at.toLocaleDateString()}  ${V}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[V,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:Y}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[s.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(R,{stem:Z})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${fs(Z,"stem",s)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${de}`,children:ve})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${fs(ee,"branch",s)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:W})}),s.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(R,{branch:ee})}),(s.showSibiUnseong||s.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[s.showSibiUnseong&&U&&g.jsx("div",{children:U}),s.showSibiSinsal&&B&&g.jsx("div",{children:B})]})]})]},`${Y}-${F.gz||q}`)})})]})}const J4=new Set(["","","","","","","","","","","",""]);function Q4(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),o=[...ai(new Date(n-1,5,15,12,0))??[],...ai(new Date(n,5,15,12,0))??[],...ai(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>J4.has(m.name));let l=o.findIndex((m,p)=>o[p].date<=t&&t<o[p+1]?.date);l<0&&(l=0);const u=o[l],f=o[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(f.date.getFullYear(),f.date.getMonth(),f.date.getDate(),0,0,0,0),cur:u,next:f}}const Wk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Xk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},eP=Object.fromEntries(Object.entries(Wk).map(([e,t])=>[t,e])),tP=Object.fromEntries(Object.entries(Xk).map(([e,t])=>[t,e]));function cS(e,t,n){return n===""?t==="stem"?Wk[e]??e:Xk[e]??e:t==="stem"?eP[e]??e:tP[e]??e}const nP=new Set(["","","","","","","","","",""]),rP=new Set(["","","","","","","","","","","",""]);function uS(e,t){return t==="stem"?nP.has(e):rP.has(e)}function sP(e){return typeof e=="object"&&e!==null}function iP(e){return sP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function aP(e){const t=dl;return iP(t)?e==="classic"?t.Classic:t.Modern:e}const oP=new Set(["","","","","","","","","","","",""]);function lP(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function cP(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function Mg(e){return new Date(e,5,15,12,0,0,0)}function uP(e){const n=[...ai(Mg(e-1))??[],...ai(Mg(e))??[],...ai(Mg(e+1))??[]].map(f=>({name:String(f.name),date:new Date(f.date)})).sort((f,m)=>f.date.getTime()-m.date.getTime()).filter(f=>oP.has(f.name)),s=new Date(e,0,1,0,0,0,0),o=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(f=>f.name===""&&f.date>=s&&f.date<o);if(l===-1)return[];const u=[];for(let f=0;f<12;f++){const m=n[l+f];if(!m)break;const p=new Date(m.date),y=lP(p);u.push({name:m.name,termAt:p,at00:y})}return u}const dP=!1,dS=e=>e<10?`0${e}`:`${e}`;function hP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(s==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${dS(p.getMonth()+1)}${dS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function fP({data:e,activeYear:t,onSelect:n,onSelectMonth:s}){const o=Wn(A=>A.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Wa(e),f=C.useMemo(()=>Vm(e,u),[e,u]),m=C.useMemo(()=>{const A=hP(e);return Wa(A)},[e]),p=e.mingSikType??"/",y=C.useMemo(()=>xt(m,p).charAt(0),[m,p]),_=o.sinsalBase===""?xt(f,p).charAt(1):dt(f,l).charAt(1),x=C.useMemo(()=>t?uP(t).map(M=>{const P=M.termAt,N=new Date(M.termAt.getTime()+1860*1e3),D=jt(N,l);return{at:P,gz:D,term:M.name,termAt:M.termAt}}):[],[t,l]),{date:S,setFromEvent:T}=Yr(),k=Zm(x,S);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((A,M)=>{const P=A.gz.charAt(0),N=A.gz.charAt(1),D=`${cP(A.at)}`,R=M===k,z=cS(P,"stem",o.charType),F=cS(N,"branch",o.charType),q=uS(P,"stem"),Y=uS(N,"branch"),ne=o.thinEum&&q?"font-thin":"font-bold",K=o.thinEum&&Y?"font-thin":"font-bold",Z=o.showSibiUnseong?Jt(y,N):null,ee=o.showSibiSinsal?Qt({baseBranch:_,targetBranch:N,era:aP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{s(A.at);const Q=new Date(A.at),{start:ve}=Q4(Q);n?.(ve.getFullYear(),ve.getMonth()),T({at:Q,gz:jt(Q,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${R?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${A.term}   ${A.gz}  ${A.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:D}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{stem:P})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${fs(P,"stem",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${ne}`,children:z})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${fs(N,"branch",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${K}`,children:F})}),o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{branch:N})}),(o.showSibiUnseong||o.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[o.showSibiUnseong&&Z&&g.jsx("div",{children:Z}),o.showSibiSinsal&&ee&&g.jsx("div",{children:ee})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:A.term})]})]},`${A.term}-${A.at.toISOString()}`)})})]})}const Jk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Qk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},mP=Object.fromEntries(Object.entries(Jk).map(([e,t])=>[t,e])),pP=Object.fromEntries(Object.entries(Qk).map(([e,t])=>[t,e]));function hS(e,t,n){return n===""?t==="stem"?Jk[e]??e:Qk[e]??e:t==="stem"?mP[e]??e:pP[e]??e}const gP=new Set(["","","","","","","","","",""]),bP=new Set(["","","","","","","","","","","",""]);function fS(e,t){return t==="stem"?gP.has(e):bP.has(e)}function yP(e){return typeof e=="object"&&e!==null}function vP(e){return yP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function _P(e){const t=dl;return vP(t)?e==="classic"?t.Classic:t.Modern:e}const xP=!1,mS=e=>e<10?`0${e}`:`${e}`;function wP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(s==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${mS(f.getMonth()+1)}${mS(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function SP(e,t){return new Date(e,t,15,12,0,0,0)}function Cg(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const EP=new Set(["","","","","","","","","","","",""]);function eA(e){return[...ai(new Date(e-1,5,15,12,0))??[],...ai(new Date(e,5,15,12,0))??[],...ai(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,s)=>n.date.getTime()-s.date.getTime())}function TP(e){const t=eA(e.getFullYear()),n=t.filter(u=>EP.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),f=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(f.date),end:new Date(m.date),cur:f,next:m}}let s=n.findIndex(u=>u.date>e)-1;s<0&&(s=n.length-1);const o=n[s],l=n[(s+1)%n.length];return{start:new Date(o.date),end:new Date(l.date),cur:o,next:l}}function kP({data:e,year:t,month:n,selectedMonth:s}){const o=Wn(Y=>Y.settings),l=o.ilunRule||"/",u=e?Wa(e):null,f=e&&u?Vm(e,u):null,m=C.useMemo(()=>{const Y=wP(e);return Wa(Y)},[e]),p=C.useMemo(()=>m?xt(m,l).charAt(0):void 0,[m,l]),y=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&f?o.sinsalBase===""?xt(f,l).charAt(1):dt(f,y).charAt(1):null,{date:x,setFromEvent:S}=Yr(),T=C.useMemo(()=>SP(t,n),[t,n]),k=C.useMemo(()=>x?Cg(new Date(x)):null,[x]),A=C.useMemo(()=>s?Cg(s):null,[s]),M=C.useMemo(()=>k??A??T,[k,A,T]),{start:P,end:N,cur:D,next:R}=C.useMemo(()=>TP(M),[M]),z=C.useMemo(()=>{const Y=[],ne=new Date(P);for(;ne<N;)Y.push(new Date(ne)),ne.setDate(ne.getDate()+1);return Y},[P,N]),F=C.useMemo(()=>{const Y=eA(M.getFullYear()),ne=Y.filter(Z=>Z.date>=P&&Z.date<N),K=Y.find(Z=>Z.date>=N);return K?[...ne,K]:ne},[M,P,N]),q=C.useMemo(()=>{const Y=[];let ne=[];const K=new Date(P).getDay();for(let Z=0;Z<K;Z++)ne.push(null);for(const Z of z)ne.length===7&&(Y.push(ne),ne=[]),ne.push(Z);for(;ne.length<7;)ne.push(null);return Y.push(ne),Y},[z,P]);return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[D?.name?g.jsxs(g.Fragment,{children:[D.name," ~ ",R?.name??""]}):`${t} ${n}`,F.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",F.map((Y,ne)=>g.jsxs("span",{children:[Y.name," ",AP(Y.date),ne<F.length-1?"  ":""]},`${Y.name}_${Y.date.getTime()}_${ne}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(Y=>g.jsx("div",{className:"py-1",children:Y},Y))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:q.map((Y,ne)=>Y.map((K,Z)=>{if(!K)return g.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${ne}-${Z}`);const ee=Cg(K),Q=new Date,ve=ee.getFullYear()===Q.getFullYear()&&ee.getMonth()===Q.getMonth()&&ee.getDate()===Q.getDate(),ie=!!k&&ee.getFullYear()===k.getFullYear()&&ee.getMonth()===k.getMonth()&&ee.getDate()===k.getDate()||!k&&ve,te=zO(ee,l),de=te.charAt(0),X=te.charAt(1),U=hS(de,"stem",o.charType),B=hS(X,"branch",o.charType),V=o.thinEum&&fS(de,"stem")?"font-thin":"font-bold",J=o.thinEum&&fS(X,"branch")?"font-thin":"font-bold",I=!!p&&o.showSipSin,G=!!p&&o.showSibiUnseong,oe=!!p&&_!=null&&o.showSibiSinsal,ce=I?Ar(p,{stem:de}):"",le=I?Ar(p,{branch:X}):"",_e=G?Jt(p,X):"",Ae=oe?Qt({baseBranch:_,targetBranch:X,era:_P(o.sinsalMode),gaehwa:!!o.sinsalBloom}):"",je=F.find(Me=>Me.date.getFullYear()===ee.getFullYear()&&Me.date.getMonth()===ee.getMonth()&&Me.date.getDate()===ee.getDate());return g.jsxs("div",{onClick:()=>S({at:ee},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${ie?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${te} (${ee.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:ee.getDate()}),je&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),I&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:ce}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${fs(de,"stem",o)}`,children:g.jsx("span",{className:V,children:U})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${fs(X,"branch",o)}`,children:g.jsx("span",{className:J,children:B})}),I&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:le}),(G||oe)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[G&&_e&&g.jsx("div",{children:_e}),oe&&Ae&&g.jsx("div",{children:Ae})]})]},K.toISOString())}))})]})}function AP(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",s="",o="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(s=u.value),u.type==="hour"&&(o=u.value),u.type==="minute"&&(l=u.value);return`${n}/${s} ${o}:${l}`}function pS(e,t){const n=e.at.getFullYear(),s=t?t.at.getFullYear():n+10,o=[];for(let l=n;l<s;l++){const u=Gn(l,315);let f=l;new Date<u&&(f=l-1);const p=dt(new Date(f,1,10));o.push({at:u,gz:p})}return o}function jP({data:e}){const t=Ed(e),[n,s]=C.useState(null),[o,l]=C.useState(null),[u,f]=C.useState("il"),[m,p]=C.useState(null);C.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((A,M)=>{const P=t[M+1]?.at;return T>=A.at&&(!P||T<P)});k!==-1&&s(k)},[t]),C.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const A=pS(T,k),M=new Date;A.findIndex((N,D)=>{const R=A[D+1]?.at;return M>=N.at&&(!R||M<R)})!==-1&&l({year:M.getFullYear(),month:M.getMonth()})},[n,t]);const y=Uy(e),{date:_}=Yr(),x=_.getMonth()+1===1?_.getFullYear()-1:_.getFullYear(),S=C.useMemo(()=>{if(!y?.dae?.gz)return[];const T=t.findIndex((M,P)=>{const N=t[P+1]?.at;return y.dae.at>=M.at&&(!N||y.dae.at<N)});if(T===-1)return[];const k=t[T],A=t[T+1];return pS(k,A)},[t,y?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(I4,{data:e}),u==="se"||u==="wol"||u==="il"?g.jsx(X4,{data:e,list:S,onSelect:()=>{f("wol")}}):null,u==="wol"||u==="il"?g.jsx(fP,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),f("il")},onSelectMonth:p}):null,u==="il"&&o&&g.jsx(kP,{data:e,year:o.year,month:o.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const NP=new Set(AO),OP=new Set(jO);function gS(e){return typeof e=="string"&&e.length>=2&&NP.has(e[0])&&OP.has(e[1])}function ss(e,...t){if(gS(e))return e;for(const n of t)if(gS(n))return n;return""}const DP={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},tA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},MP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function bS(e){return!!e&&Bs..includes(e)}function CP(e){return tA[e]??e}function yS(e){return MP[e]??e}function RP(e){if(bS(e))return e;const t=tA[e];return bS(t)?t:""}function LP(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function BP(e){const t=dl;return LP(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function hf(e,t){let n=null;const s=t.getTime();for(const o of e)if(o.at.getTime()<=s)n=o;else break;return n}function PP({data:e}){const t=Wn(ne=>ne.settings),{manualHour:n}=vd(),{showSibiUnseong:s,showSibiSinsal:o,sinsalBase:l,sinsalMode:u,sinsalBloom:f}=t,{date:m}=Yr(),p=C.useMemo(()=>zy(e),[e]),y=C.useMemo(()=>Ym(p),[p]),_=C.useMemo(()=>$y(p,"/"),[p]),x=C.useMemo(()=>RP(_.day?.charAt(0)??""),[_.day]),S=!e.birthTime||e.birthTime==="",T=C.useMemo(()=>Hk(y,_.hour,e.dir??"forward",120,"/"),[y,_.hour,e.dir]),k=C.useMemo(()=>Fk(T,_.day,e.dir??"forward",""),[T,_.day,e.dir]),A=C.useMemo(()=>Sd(y,_.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[y,_.month,e.dir,p.birthPlace?.lon]),M=C.useMemo(()=>qk(A,_.year,e.dir??"forward","",y),[A,_.year,e.dir,y]),P=C.useMemo(()=>{const ne=T?.events?.[0];return ne?{at:ne.at,from:ss(_.hour),to:ss(ne.gz)}:null},[T?.events,_.hour]),N=C.useMemo(()=>{const ne=A?.events?.[0];return A?.firstChange?{at:A.firstChange,from:ss(_.month),to:ss(ne?.gz??_.month)}:null},[A?.firstChange,A?.events,_.month]),D=C.useMemo(()=>{const ne=S?n?n.stem+n.branch:"":ss(hf(T.events,m)?.gz,_.hour);let K;if(S&&n){const Z=m.getFullYear(),ee=m.getMonth(),Q=m.getDate(),ve=DP[n.branch]??0,W=new Date(Z,ee,Q,ve,0),ie=xt(W,e.mingSikType??"/");K=ss(ie,_.day)}else K=ss(hf(k.events,m)?.gz,_.day);return{si:ne,il:K,wl:ss(hf(A.events,m)?.gz,_.month),yn:ss(hf(M.events,m)?.gz,_.year)}},[m,T.events,k.events,A.events,M.events,_,S,n,e.mingSikType]),R=C.useMemo(()=>({si:ss($s(m,"/")),il:ss(xt(m,"/")),wl:ss(jt(m)),yn:ss(dt(m))}),[m]),z=C.useMemo(()=>l===""?_.day.charAt(1):_.year.charAt(1),[l,_.day,_.year]),F=C.useMemo(()=>BP(u),[u]),q=ne=>{if(!ne)return{unseong:"",shinsal:""};const K=CP(x),Z=yS(ne.charAt(1)),ee=yS(z);return{unseong:s&&Jt(K,Z)||"",shinsal:o&&Qt({baseBranch:ee,targetBranch:Z,era:F,gaehwa:!!f})||""}},Y=(ne,K,Z="myoun")=>{const ee=K,{unseong:Q,shinsal:ve}=K?q(K):{unseong:"",shinsal:""},W=Z==="myoun"&&S&&(ne===""||ne==="");return g.jsx(uc,{label:ne,gz:ee,dayStem:x,settings:t,unseongText:K?Q:"",shinsalText:K?ve:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:W},`${Z}-${ne}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Qu(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[Y("",D.si,"myoun"),Y("",D.il,"myoun"),Y("",D.wl,"myoun"),Y("",D.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[Y("",R.si,"live"),Y("",R.il,"live"),Y("",R.wl,"live"),Y("",R.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",P?`${Qu(P.at)} (${P.from}  ${P.to})`:" "]}),g.jsxs("div",{children:[":"," ",N?`${Qu(N.at)} (${N.from}  ${N.to})`:" "]})]})]})}const vS=["","","","","","","","","",""],$P={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},IP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zP={:"",:"",:"",:"",:""},UP={:"",:"",:"",:"",:""},HP={:"",:"",:"",:"",:""},GP={:"",:"",:"",:"",:""};function FP(e,t){switch(e){case"":return t;case"":return zP[t];case"":return HP[t];case"":return GP[t];case"":return UP[t];default:return t}}function qP({data:e,perStemElementScaled:t,elementPercent:n,dayStem:s,width:o=280,height:l=280,revKey:u}){const f=o,m=l,p=f/2,y=m/2,_=Math.min(f,m)*.37,x=C.useMemo(()=>{const N=(s??"").charAt(0);return IP[N]??null},[s]),S=N=>Math.PI/2+2*-Math.PI*N/5,T=C.useMemo(()=>e.map((N,D)=>({...N,x:p+_*Math.cos(S(D)),y:y-_*Math.sin(S(D))})),[e,p,y,_]),[k,A]=C.useState(0),M=C.useRef(""),P=C.useMemo(()=>{const N=e.map(z=>`${z.name}:${z.value}`).join(","),D=vS.map(z=>`${z}:${t?.[z]??0}`).join(","),R=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",N,D,R,s??""].join("||")},[u,e,t,s,n]);return C.useEffect(()=>{P!==M.current&&(M.current=P,A(N=>N+1))},[P]),g.jsx("div",{className:"w-full",children:g.jsxs("svg",{width:f,height:m,className:"mx-auto pt-2",children:[T.map((N,D)=>{const R=T[(D+2)%5];return g.jsx("line",{x1:N.x,y1:N.y,x2:R.x,y2:R.y,stroke:"#94a3b8",strokeWidth:1},`line-${D}`)}),T.map((N,D)=>{const R=T[(D+1)%5],z=(N.x+R.x)/2,F=(N.y+R.y)/2,q=z-p,Y=F-y,ne=1.5,K=p+q*ne,Z=y+Y*ne;return g.jsx("path",{d:`M${N.x},${N.y} Q${K},${Z} ${R.x},${R.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${D}`)}),g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:g.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(N=>{const D=N.name,R=x?FP(D,x):null,z=R?vS.filter(F=>$P[F]===R).map(F=>[F,t?.[F]??0]):[];return g.jsxs("g",{transform:`translate(${N.x},${N.y})`,children:[g.jsx("circle",{r:33,fill:N.color??"#334155",opacity:N.value===0?.7:1}),g.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[N.name," ",N.value]}),z.map(([F,q],Y)=>g.jsxs("text",{textAnchor:"middle",dy:8+Y*11,fontSize:10,className:"fill-white",children:[F," ",Math.round(q)]},F))]},`${N.name}-${N.value}`)})]},k)})}const YP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function Fy(e){return Math.max(0,Math.min(100,e))}function nA(e){const t=Fy(e);return YP.find(s=>t>=s.min&&t<s.max)?.name??""}const ZP=[10,20,35,45,55,65,80];function VP({value:e}){const t=C.useMemo(()=>Fy(e),[e]),n=C.useMemo(()=>nA(t),[t]);return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:""}),g.jsx("span",{children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[ZP.map(s=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${s}%`},title:`${s}%`},s)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const Ji=["","","",""],ff={year:0,month:1,day:2,hour:3},Rg="",KP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);if(s){const o=KP[s[1]]??s[1],l=rA[s[2]]??s[2];return`${o}${l}`}return""}const bm=e=>e&&e.length>=1?e[0]:"",Qi=e=>e&&e.length>=2?e[1]:"",qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Yy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Vy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Ky=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Wy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Xy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Jy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],_S=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],ev=[{pair:["",""],label:""}],WP=new Set(["","","",""]),cd=new Set(["","","",""]),Km=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],Wm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function Sn(e,t,n){for(const{pair:[s,o],label:l}of e)if(t===s&&n===o||t===o&&n===s)return l;return null}function Wt(e,t){e.includes(t)||e.push(t)}const Fo=e=>[...e].sort((t,n)=>t-n).map(t=>Ji[t]).join("X"),Lg=(e,t)=>e===0&&t===3||e===3&&t===0;function xS(e,t){const n=[];for(const s of e)for(const o of t){if(s===o)continue;const l=Math.min(s,o),u=Math.max(s,o);l===0&&u===3||n.push([l,u])}return n.sort((s,o)=>{const l=Math.abs(s[0]-s[1]),u=Math.abs(o[0]-o[1]);return l!==u?l-u:0})}function XP(e){const t=[],n=[...e].sort((s,o)=>s-o);for(let s=0;s<n.length;s++)for(let o=s+1;o<n.length;o++){const l=n[s],u=n[o];l===0&&u===3||t.push([l,u])}return t}const sA=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function JP(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const QP=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function iA(e){for(const t of QP){const s=(e[t]??[]).map(o=>o&&o.normalize("NFKC")).filter(o=>!!o&&!JP(o));e[t]=Array.from(new Set(s))}return e.jijiHyeong=aA(e.jijiHyeong),e}const wS=["","","",""];function aA(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(o=>o?.normalize("NFKC")??""))).filter(Boolean),n=t.some(o=>o.includes("")||o.includes("()")),s=t.some(o=>o.includes("")||o.includes("()"));return t.filter(o=>!(n&&(o.includes("")||o.includes("")||o.includes(""))||s&&(o.includes("")||o.includes("")||o.includes(""))))}function tv(e,t={}){const{emitGanjiAmhap:n=!0}=t,s=e.map(Fe),o=s.map(x=>bm(x)),l=s.map(x=>Qi(x)),f={title:s.map((x,S)=>`${x}${["","","",""][S]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,S,T,k)=>{const A=o.flatMap((P,N)=>P===x?[N]:[]),M=o.flatMap((P,N)=>P===S?[N]:[]);for(const P of A)for(const N of M)P!==N&&Math.abs(P-N)===1&&Wt(k,`#${Fo([P,N])}_${T}`)};qy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganHap)),Yy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganChung));const p=x=>{const S=new Set,T=[];for(const k of x)for(let A=0;A<l.length;A++)if(l[A]===k&&!S.has(A)){S.add(A),T.push(A);break}return T};Km.forEach(({name:x,members:S,wang:T})=>{const k=S.filter(M=>l.includes(M)),A=new Set(k).size;if(A===3){const M=p(S);M.length===3&&Wt(f.jijiSamhap,`#${Fo(M)}_${x}`)}else if(A===2){if(!k.includes(T))return;const[M,P]=k,N=l.flatMap((F,q)=>F===M?[q]:[]),D=l.flatMap((F,q)=>F===P?[q]:[]),R=xS(N,D),z=R.length>1;for(const[F,q]of R){const Y=Lg(F,q),ne=`#${Fo([F,q])}_${M}${P}${z?"":Y?`_${Rg}`:""}`;Wt(f.jijiSamhap,ne)}}}),Wm.forEach(({name:x,members:S})=>{const T=S.filter(A=>l.includes(A));if(new Set(T).size===3){const A=p(S);A.length===3&&Wt(f.jijiBanghap,`#${Fo(A)}_${x}`)}});const y=(x,S,T,k)=>{const A=l.flatMap((D,R)=>D===x?[R]:[]),M=l.flatMap((D,R)=>D===S?[R]:[]),P=xS(A,M),N=P.length>1;for(const[D,R]of P){const z=Lg(D,R),F=`#${Fo([D,R])}_${T}${N?"":z?`_${Rg}`:""}`;Wt(k,F)}};if(Zy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiYukhap)),Vy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiChung)),Ky.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiPa)),Wy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHae)),Xy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiWonjin)),Jy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const S=[],T=new Set;if(x.forEach(k=>{l.forEach((A,M)=>{A===k&&(S.push(M),T.add(k))})}),T.size===3){const k=Array.from(new Set(S)).sort((A,M)=>A-M);Wt(f.jijiHyeong,`#${Fo(k)}_${x.join("")}`)}}),Qy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),ev.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),["","","",""].forEach(x=>{const S=l.flatMap((A,M)=>A===x?[M]:[]),T=XP(S),k=T.length>1;for(const[A,M]of T){const P=Lg(A,M),N=`#${Fo([A,M])}_${x}${x}${k?"":P?`_${Rg}`:""}`;Wt(f.jijiHyeong,N)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,S],label:T})=>y(x,S,T,f.amhap)),n)for(let x=0;x<4;x++){const S=s[x]??"";if(S.length<2)continue;const T=`${S[0]}${S[1]}`;cd.has(T)&&Wt(f.ganjiAmhap,`#${sA(Ji[x])}_${T}`)}return f.jijiHyeong=aA(f.jijiHyeong),iA(f)}function gr(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,s=[Fe(e.natal[0]??""),Fe(e.natal[1]??""),Fe(e.natal[2]??""),Fe(e.natal[3]??"")],l=[Fe(e.daewoon??""),Fe(e.sewoon??""),Fe(e.wolwoon??"")].some(y=>y.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let y=0;y<4;y++){const _=s[y]??"";if(_.length<2)continue;const x=`${_[0]}${_[1]}`;cd.has(x)&&Wt(u.ganjiAmhap,`#${sA(Ji[y])}_${x}`)}const f=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[y,_]of f){if(!_)continue;const x=Fe(_);if(!x||x.length<2)continue;const S=bm(x),T=Qi(x);{const M=`${S}${T}`;cd.has(M)&&Wt(u.ganjiAmhap,`#${y}_${M}`)}for(let M=0;M<4;M++){const P=s[M]??"";if(P.length<2)continue;const N=Ji[M],D=bm(P),R=Qi(P),z=Sn(qy,S,D);z&&Wt(u.cheonganHap,`#${y}X${N}_${z}`);const F=Sn(Yy,S,D);F&&Wt(u.cheonganChung,`#${y}X${N}_${F}`);const q=Sn(Zy,T,R);q&&Wt(u.jijiYukhap,`#${y}X${N}_${q}`);const Y=Sn(Vy,T,R);Y&&Wt(u.jijiChung,`#${y}X${N}_${Y}`);const ne=Sn(Ky,T,R);ne&&Wt(u.jijiPa,`#${y}X${N}_${ne}`);const K=Sn(Wy,T,R);K&&Wt(u.jijiHae,`#${y}X${N}_${K}`);const Z=Sn(Xy,T,R);Z&&Wt(u.jijiWonjin,`#${y}X${N}_${Z}`);const ee=Sn(Jy,T,R);ee&&Wt(u.jijiGwimun,`#${y}X${N}_${ee}`);const Q=Sn(Qy,T,R);if(Q)Wt(u.jijiHyeong,`#${y}X${N}_${Q}`);else{const ie=Sn(ev,T,R);ie?Wt(u.jijiHyeong,`#${y}X${N}_${ie}`):T===R&&WP.has(T)&&Wt(u.jijiHyeong,`#${y}X${N}_${T}${R}`)}const W=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,R);W&&Wt(u.amhap,`#${y}X${N}_${W}`)}const k=s.map(M=>{const P=Qi(M??"");return rA[P]??P});for(const M of Km){if(!M.members.includes(T))continue;const P=M.members.filter(D=>D!==T),N=k.map((D,R)=>({b:D,pos:Ji[R]})).filter(D=>P.includes(D.b));if(new Set(N.map(D=>D.b)).size===2){const[D,R]=N.map(z=>z.pos).sort((z,F)=>["","","",""].indexOf(z)-["","","",""].indexOf(F));Wt(u.jijiSamhap,`#${y}X${D}X${R}_(${M.name})`)}}const A=[...s.map((M,P)=>({b:Qi(M),pos:Ji[P]}))];for(const M of Wm){const P=A.filter(N=>M.members.includes(N.b));if(new Set(P.map(N=>N.b)).size===3){const N=P.map(D=>D.pos).join("X");Wt(u.jijiBanghap,`#${N}_(${M.name})`)}}for(const M of _S){if(!M.members.includes(T))continue;const P=M.members.filter(D=>D!==T),N=k.map((D,R)=>({b:D,pos:Ji[R]})).filter(D=>P.includes(D.b));if(new Set(N.map(D=>D.b)).size===2){const[D,R]=N.map(z=>z.pos).sort((z,F)=>["","","",""].indexOf(z)-["","","",""].indexOf(F));Wt(u.jijiHyeong,`#${y}X${D}X${R}_${M.name}`),M.name===""&&(m=!0),M.name===""&&(p=!0)}}}{const y=[],_=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,S]of _){const T=Fe(S??"");T.length>=2&&y.push({kind:x,b:Qi(T)})}if(y.length>=2){const x=s.map((S,T)=>({pos:Ji[T],b:Qi(S)}));for(const S of _S)for(let T=0;T<y.length;T++)for(let k=T+1;k<y.length;k++){const A=y[T],M=y[k];for(const P of x){const N=new Set([P.b,A.b,M.b]);if(N.size===3&&S.members.every(D=>N.has(D))){const D=[A.kind,M.kind].sort((z,F)=>wS.indexOf(z)-wS.indexOf(F)).join("X"),R=`${P.pos}X${D}`;Wt(u.jijiHyeong,`#${R}_${S.name}`),S.name===""&&(m=!0),S.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(y=>!(m&&/(||)/.test(y)||p&&/(||)/.test(y)))),iA(u)}function e9(e,t){const s=e.map(Fe).map(m=>Qi(m)),o=ff.month,l=s[o],u=m=>{const p=[];for(let y=0;y<4;y++){const _=s[y];_&&m.has(_)&&p.push(y)}return p},f=m=>{const p=[...m].sort((y,_)=>y-_);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of Km){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(y.length===2&&y.includes(o)){const _=y[0]===o?y[1]:y[0],x=l===m.wang;_===ff.day&&x?t[m.out]+=8:_===ff.year&&x?t[m.out]+=6:_===ff.hour&&(t[m.out]+=x?4:2)}}for(const m of Wm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function SS(e){const t=["","","",""],n=e.map(Fe),s=n.map(f=>bm(f)),o=n.map(f=>Qi(f)),l=new Map,u=new Map;for(let f=0;f<4;f++){const m=s[f],p=o[f];m.includes(m)&&l.set(m,[...l.get(m)??[],f]),p.includes(p)&&u.set(p,[...u.get(p)??[],f])}return{stemsByPos:s,brsByPos:o,stemPos:l,brPos:u,names:t}}function Ft(e){return Ji[e]}function pr(e,t){t&&(e.includes(t)||e.push(t))}function t9(e,t){const n=SS(e),s=SS(t),o={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let f=0;f<4;f++){const m=n.stemsByPos[f],p=n.brsByPos[f];for(let y=0;y<4;y++){const _=s.stemsByPos[y],x=s.brsByPos[y],S=Sn(qy,m,_);S&&pr(o.,`${Ft(f)}X${Ft(y)} ${S}`);const T=Sn(Yy,m,_);T&&pr(o.,`${Ft(f)}X${Ft(y)} ${T}`);const k=Sn(Zy,p,x);k&&pr(o.,`${Ft(f)}X${Ft(y)} ${k}`);const A=Sn(Vy,p,x);A&&pr(o.,`${Ft(f)}X${Ft(y)} ${A}`);const M=Sn(Ky,p,x);M&&pr(o.,`${Ft(f)}X${Ft(y)} ${M}`);const P=Sn(Wy,p,x);P&&pr(o.,`${Ft(f)}X${Ft(y)} ${P}`);const N=Sn(Xy,p,x);N&&pr(o.,`${Ft(f)}X${Ft(y)} ${N}`);const D=Sn(Jy,p,x);D&&pr(o.,`${Ft(f)}X${Ft(y)} ${D}`);const z=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);z&&pr(o.,`${Ft(f)}X${Ft(y)} ${z}`);const F=`${m}${x}`,q=`${_}${p}`;cd.has(F)&&pr(o.,`${Ft(f)}X${Ft(y)} ${F}`),cd.has(q)&&pr(o.,`${Ft(y)}X${Ft(f)} ${q}`);const Y=Sn(Qy,p,x);if(Y)pr(o.,`${Ft(f)}X${Ft(y)} ${Y}`);else{const ne=Sn(ev,p,x);ne&&pr(o.,`${Ft(f)}X${Ft(y)} ${ne}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(s.brsByPos.filter(Boolean));for(const f of Km){if(f.members.every(y=>l.has(y)||u.has(y))){const y=f.members.filter(x=>l.has(x)).length,_=f.members.filter(x=>u.has(x)).length;y>=1&&_>=1&&pr(o.,`${f.name}`)}const p=f.members.filter(y=>l.has(y)||u.has(y));if(p.length===2&&p.includes(f.wang)){const y=p.some(x=>l.has(x)),_=p.some(x=>u.has(x));if(y&&_){const[x,S]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(S)?.[0],k=s.brPos.get(x)?.[0]??s.brPos.get(S)?.[0];T!=null&&k!=null&&pr(o.,`${Ft(T)}X${Ft(k)} ${x}${S}`)}}}for(const f of Wm)if(f.members.every(p=>l.has(p)||u.has(p))){const p=f.members.filter(_=>l.has(_)).length,y=f.members.filter(_=>u.has(_)).length;p>=1&&y>=1&&pr(o.,`${f.name}`)}return Object.keys(o).forEach(f=>o[f].sort()),o}function Iu(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Xs({label:e,natal:t,dae:n,se:s,wol:o,il:l}){const u=n.length+s.length+o.length+l.length>0,f=t.length>0?t:["#"],m=u?f.filter(_=>_!=="#"):f,y=m.some(_=>_!=="#")||n.length>0||s.length>0||o.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[g.jsx("div",{className:y,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"natal"),children:_},`natal-${x}`)),n.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"dae"),children:_},`dae-${x}`)),s.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"se"),children:_},`se-${x}`)),o.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"wol"),children:_},`wol-${x}`)),l.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Iu(_,"il"),children:_},`il-${x}`))]})]})}function Ub(e){return Array.isArray(e)?e:[]}function mf(e,t){const n=new Set(Ub(e));return Ub(t).filter(o=>!n.has(o))}function n9({pillars:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,tab:l=""}){const u=tv(e),f=gr({natal:e}),m=t?gr({natal:e,daewoon:t}):f,p=n?gr({natal:e,daewoon:t,sewoon:n}):m,y=s?gr({natal:e,daewoon:t,sewoon:n,wolwoon:s}):p,_=o?gr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o}):y,x=k=>({natal:Ub(u[k]),dae:mf(f[k],m[k]),se:mf(m[k],p[k]),wol:mf(p[k],y[k]),il:mf(y[k],_[k])}),S={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(Xs,{label:"",...T(S.cheonganHap)}),g.jsx(Xs,{label:"",...T(S.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(Xs,{label:"",...T(S.jijiSamhap)}),g.jsx(Xs,{label:"",...T(S.jijiBanghap)}),g.jsx(Xs,{label:"",...T(S.jijiYukhap)}),g.jsx(Xs,{label:"",...T(S.amhap)}),g.jsx(Xs,{label:"",...T(S.ganjiAmhap)}),g.jsx(Xs,{label:"",...T(S.jijiChung)}),g.jsx(Xs,{label:"",...T(S.jijiHyeong)}),g.jsx(Xs,{label:"",...T(S.jijiPa)}),g.jsx(Xs,{label:"",...T(S.jijiHae)})]})}const r9={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},s9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function oA(e){const t=s9[e]??"";return r9[t]}const lA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Td={:"",:"",:"",:"",:""},ud={:"",:"",:"",:"",:""},Mc={:"",:"",:"",:"",:""},a9=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],o9={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function nv(e){return Math.max(0,Math.min(100,e))}function Tc(e,t,n){return Math.max(t,Math.min(n,e))}function l9(e){const t=nv(e);return a9.find(n=>t>=n.min&&t<n.max)?.name??""}function c9(e){const t=e?.[2]?.charAt(0)??"";return lA[t]??null}function u9(e){return(e?.[1]?.charAt(1)??"")||null}function Xm(e){const t=Object.entries(Mc);for(const[n,s]of t)if(s===e)return n;return""}function d9(e){return e?{peer:e,resource:ud[e],leak:Td[e],wealth:Mc[e],officer:Xm(e)}:null}function h9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const s=n.charAt(0),o=n.charAt(1),l=lA[s],u=i9[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function f9(e){const t=Object.values(e).reduce((s,o)=>s+o,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(s=>{n[s]=e[s]/t*100}),n}function m9(e){if(!e||e.length===0)return null;const t=e.reduce((s,o)=>s+(o?.value??0),0)||0;if(t<=0)return null;const n=s=>e.find(o=>o.name===s)?.value??0;return nv((n("")+n(""))/t*100)}function p9(e,t){return!e||!t?null:t===e?"":Td[e]===t?"":Mc[e]===t?"":Xm(e)===t?"":ud[e]===t?"":null}const Bg=24,g9=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function b9(e){for(const[t,n]of g9)if(e>=t)return n;return 1}const ym=20,ES=(e,t)=>Tc((ym-(t[e]??0))/ym,0,1),TS=(e,t)=>Tc(((t[e]??0)-ym)/ym,0,1);function y9(e,t,n,s){const o=p9(e,n);if(!e||!o)return 0;const l=Tc((50-t)/50,0,1),u=Tc((t-50)/50,0,1),f=ES(n,s),m=TS(n,s),p=ES(e,s),y=TS(e,s),_=6.5;let x=0;if(l>0)switch(o){case"":x=+(.3+.4*p+.15*f)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-f)+.1*y)*l;break;case"":x=-(.22+.25*(1-f)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-f)+.1*(1-p))*l;break}else if(u>0)switch(o){case"":x=-(.25+.25*(1-f)+.2*y)*u;break;case"":x=-(.28+.2*y)*u;break;case"":x=+(.18+.2*f+.15*y)*u;break;case"":x=+(.22+.25*f+.1*y)*u;break;case"":x=+(.2+.2*f)*u;break}else switch(o){case"":x=.08*(p+f);break;case"":x=.05*p-.03*y;break;case"":x=.02*f-.02*m;break;case"":x=.01*f-.06*m;break;case"":x=-.05*(1-f);break}return Math.round(_*x*10)/10}function v9(e,t,n,s){const o=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(o){const f=Td[e],m=Mc[e],p=Xm(e);u[f]+=28,u[m]+=22,u[p]+=20,s.get(f)?.push(":    ()"),s.get(m)?.push(":     "),s.get(p)?.push(":     ")}if(l){const f=ud[e],m=e;u[f]+=28,u[m]+=22,s.get(f)?.push(":     "),s.get(m)?.push(":     ")}return u}function kS(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=o9[e]??{temp:"mild",wet:"normal"},s={:0,:0,:0,:0,:0};return n.temp==="cold"?(s.+=16,s.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(s.+=14,s.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(s.+=8,s.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(s.+=8,s.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),s}function AS(e,t){const n={:0,:0,:0,:0,:0},s=["","","","",""];for(const o of s){const l=Mc[o],u=Math.max(0,(e[o]??0)-(e[l]??0));if(u<=0)continue;const f=Td[o],m=Math.round(u*.35);m>0&&(n[f]+=m,t.get(f)?.push(`: ${o}${l} `))}return n}function jS(e,t){const n={:0,:0,:0,:0,:0},s=Object.entries(e),o=Math.min(...s.map(([,u])=>u)),l=s.filter(([,u])=>u<=Math.max(6,o));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function NS(e,t){const n=c9(e),s=u9(e),o=h9(e),l=f9(o);let u=m9(t);if(u==null)if(!n)u=50;else{const K=n,Z=ud[n],ee=Object.values(o).reduce((Q,ve)=>Q+ve,0)||1;u=nv(((o[K]??0)+(o[Z]??0))/ee*100)}const f=l9(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(K=>[K,[]]));if(n){const K=v9(n,f,o,p);Object.keys(m).forEach(Z=>{m[Z]+=K[Z]??0})}const y=kS(s,p);Object.keys(m).forEach(K=>{m[K]+=y[K]??0});const _=AS(o,p);Object.keys(m).forEach(K=>{m[K]+=_[K]??0});const x=jS(o,p);Object.keys(m).forEach(K=>{m[K]+=x[K]??0});const S=d9(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const K of t)T[K.name]=K.value;if(u>=45&&u<=55&&S){const K=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[S.resource]+=14,p.get(S.resource)?.push(": -"),m[S.peer]+=10,p.get(S.peer)?.push(": -"),m[S.leak]+=6,p.get(S.leak)?.push(": -"),m[S.wealth]+=3,p.get(S.wealth)?.push(": -"),K&&S.officer&&(m[S.officer]=Math.round(m[S.officer]*.8*10)/10,p.get(S.officer)?.push(":   "))):(m[S.leak]+=14,p.get(S.leak)?.push(": -"),m[S.wealth]+=10,p.get(S.wealth)?.push(": -"),S.officer&&(m[S.officer]+=6,p.get(S.officer)?.push(": -")),m[S.resource]+=3,p.get(S.resource)?.push(": -"))}["","","","",""].forEach(K=>{const Z=y9(n,u,K,l);m[K]=Tc(Math.round((m[K]+Z)*10)/10,0,999)});const A=u<50;["","","","",""].forEach(K=>{const Z=l[K]??0,ee=A&&n===K;if(Z>=Bg&&!ee){const Q=b9(Z);m[K]=Math.round(m[K]*Q*10)/10;const ve=Math.min(14,Math.max(0,Math.ceil((Z-Bg)*.5)));ve>0&&(m[K]=Tc(m[K]-ve,0,999)),p.get(K)?.push(" ()")}});const M={:[],:[],:[],:[],:[]};if(n){const K=Td[n],Z=Mc[n],ee=Xm(n),Q=n,ve=ud[n];M[K].push(""),M[Z].push(""),M[ee].push(""),M[Q].push(""),M[ve].push("")}const P={:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0},N=K=>{const Z=l[K]??0;return Z>=Bg&&!(A&&n===K)?Z>=55?4:Z>=45?3:2:P[K]?0:1},D=kS(s,new Map),R=AS(o,new Map),z=jS(o,new Map),F=Object.keys(m).map(K=>({element:K,score:Math.round(m[K]*10)/10,via:_9(K,D,R,z),reasons:(p.get(K)??[]).slice(),tenGodHints:M[K]})).sort((K,Z)=>{const ee=N(K.element),Q=N(Z.element);return ee!==Q?ee-Q:Z.score!==K.score?Z.score-K.score:K.element.localeCompare(Z.element)}),q=x9(f,D,R,z),Y={:0,:0,:0,:0,:0},ne=t?t.reduce((K,Z)=>(K[Z.name]=Z.value,K),{...Y}):void 0;return{chosenType:q,ordered:F,debug:{band:f,overallPct:u,elementScore:o,tenGodTotals:ne,monthBranch:s??void 0}}}function _9(e,t,n,s){const o=[];return(t[e]??0)>0&&o.push(""),(n[e]??0)>0&&o.push(""),(s[e]??0)>0&&o.push(""),o.length===0&&o.push(""),o}function x9(e,t,n,s){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((y,_)=>y+_,0),u=l(t),f=l(n),m=l(s);return u>Math.max(f,m)?"":f>=m?"":""}const w9=Object.fromEntries(ms..map((e,t)=>[e,jr[t]])),S9=Object.fromEntries(jr.map((e,t)=>[e,ms.[t]])),E9=Object.fromEntries(ms..map((e,t)=>[e,qr[t]])),T9=Object.fromEntries(qr.map((e,t)=>[e,ms.[t]])),k9=e=>w9[e]??e,A9=e=>E9[e]??e,j9=e=>S9[e]??e,N9=e=>T9[e]??e;function O9(e){const t={...e};for(const n of Object.keys(e)){const s=/[]/.test(n)?k9(n):j9(n);s&&t[s]===void 0&&(t[s]=e[n])}return t}function rv(e){const t={...e};for(const n of Object.keys(e)){const s=/[]/.test(n)?A9(n):N9(n);s&&t[s]===void 0&&(t[s]=e[n])}return t}const D9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},M9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},cA={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},C9={...cA,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},OS=O9(D9),DS=rv(M9);rv(cA);rv(C9);const R9=["","","","",""],mn={2:4,1:3,3:2,0:1};function pf(e,t,n="classic"){const s=ls(t),o=Xt(t),l=(n==="hgc"?Rm:Cm)[o]??[];return[s,...l].includes(e)}const hc={1:4,2:3,0:2,3:1},uA=new Set(Object.keys(jm)),dA=new Set(Object.keys(Xb)),L9=e=>e.slice(0,1),B9=e=>e.slice(-1);function ea(e){return Am.has(e)?e:uA.has(e)?jm[e]??e:e}function yr(e){return Wb.has(e)?e:dA.has(e)?Xb[e]??e:e}function ls(e){return ea(L9(e))}function Xt(e){return yr(B9(e))}const Te={year:0,month:1,day:2,hour:3};function Pg(e,t){const n=yr(e),s=[Te.day,Te.month,Te.hour,Te.year];for(const o of s)if(Xt(t[o])===n)return{pos:o,weight:mn[o]??0};return null}function sv(e,t,n){return Xt(t[n])===yr(e)?{pos:n,weight:mn[n]}:null}function P9(e,t){const n=ea(e),s=[Te.day,Te.month,Te.hour,Te.year];for(const o of s)if(ls(t[o])===n)return{pos:o,weight:mn[o]??0};return null}const $9=/^#(|||)X\1_/,I9=e=>$9.test(e);function MS(e){const t=new Map;for(const n of e){if(I9(n.name))continue;const s=`${n.name}@${n.pos}`,o=t.get(s);(!o||n.weight>o.weight)&&t.set(s,n)}return Array.from(t.values()).sort((n,s)=>s.weight!==n.weight?s.weight-n.weight:n.name.localeCompare(s.name,"ko"))}function gf(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ll=e=>e===0?"":e===1?"":e===2?"":"",Cc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",z9=(e,t)=>`#X${ll(t)}_${e}`,hA=(e,t)=>t===Te.month?`#_${e}`:`#X${ll(t)}_${e}`,yc=(e,t,n)=>`#${ll(t)}X${ll(n)}_${e}`,U9=(e,t)=>`#${e==="day"?"":""}X${ll(t)}_`,xi=e=>`#_${e}`,bf=(e,t)=>`#${ll(t)}_${e}`,rc=(e,t)=>`#X${Cc(t)}_${e}`,zu=(e,t)=>`#X${Cc(t)}_${e}`,$g=(e,t,n)=>`#${Cc(t)}X${ll(n)}_${e}`,H9=(e,t)=>`#${t==="day"?"":""}X${Cc(e)}_`,G9=(e,t)=>`#${t==="day"?"":""}X${Cc(e)}_`,CS=(e,t)=>`#X${Cc(e)}_${t}`;function F9(e){if(!e)return null;const t=Array.from(String(e));let n=null,s=null;for(const o of t)!n&&(Am.has(o)||uA.has(o))&&(n=ea(o)),(Wb.has(o)||dA.has(o))&&(s=yr(o));return n&&s?{stem:n,branch:s}:null}function Ig(e){return e.map(Xt)}const gn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(yr)])),q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),fA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),mA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),W9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),X9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),J9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),pA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),e6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),t6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),n6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),r6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),s6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),i6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),gA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),a6=pA,o6=fA,l6=gA,c6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u6=mA,d6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bA=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>yr(t.trim())).filter(Boolean),Is=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(s=>yr(s))])),RS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},LS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},BS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},PS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},m6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$S=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Jm=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),bA(n)])),p6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),g6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),b6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v6=Is({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),_6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S6=Is({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),IS=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A6=Is({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),un=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ea(t),bA(n)])),j6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),O6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),D6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),M6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),C6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),US=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),R6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),HS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),GS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),U6=un({:"",:"",:"",:""}),H6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),FS=un({:"",:"",:""}),qS=un({:"",:"",:""}),G6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),YS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ZS=un({:"",:"",:"",:"",:"",:"",:""}),zg=[["",""],["",""],["",""],["",""],["",""],["",""]],Ug=[["",""],["",""],["",""],["",""],["",""],["",""]],F6=new Set(["","","",""]),VS=[["",""],["",""]],q6=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Uu(e,t,n){const s=yr(t),o=yr(n);for(const[l,u]of e)if(l===s&&u===o||l===o&&u===s)return!0;return!1}function KS(e,t,n){const s=yr(t),o=yr(n);for(const[l,u]of e)if(l===s&&u===o||l===o&&u===s)return`${l}${u}`;return`${s}${o}`}function yf(e){for(const t of q6)if(t.set.has(e))return t.voids;return null}function Hg(e){const t=yr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const s of n)if(s.group.has(t))return Array.from(s.years);return null}function kd(e,t){e.push(t)}function Gg(e,t,n,s,o=0){const l=hc[n]>=hc[s]?n:s,u=yc(t,n,s);e.push({name:u,weight:mn[l]+o,pos:l})}function nn(e,t,n,s,o){const l=Xt(e[Te.year]),u=t[l];if(!u)return;const f=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=sv(m,e,p);y&&kd(o,{name:yc(s,Te.year,p),weight:y.weight,pos:p})}}function vf(e,t,n,s){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=ea(l),f=P9(u,e);f&&kd(s,{name:hA(n,f.pos),weight:f.weight,pos:f.pos})}function is(e,t,n,s,o="ALL"){const l=Xt(e[Te.month]),u=t[l];if(!u)return;const f=o==="YEAR"?[Te.year]:o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:o==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=sv(m,e,p);if(!y)continue;const _=p===Te.month?`#_${n}`:hA(n,p);kd(s,{name:_,weight:y.weight,pos:p})}}function _f(e,t,n,s){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=e[Te.day];l.includes(u)&&kd(s,{name:yc(n,Te.month,Te.day),weight:mn[Te.day],pos:Te.day})}function Vt(e,t,n,s,o){const l=ls(e[Te.day]),u=t[l];if(!u)return;const f=o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=sv(m,e,p);y&&kd(s,{name:z9(n,p),weight:y.weight,pos:p})}}function Gr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,basis:l}){const u=ls(e[Te.day]),f=Xt(e[Te.day]),m=Xt(e[Te.month]),p=Xt(e[Te.year]),y=Ig(e),_=[],x=[],S=new Set(["","","",""]);if(nn(e,q9,"MONTH","",x),nn(e,fA,"DAY","",x),nn(e,Z9,"MONTH","",x),nn(e,V9,"MONTH","",x),nn(e,K9,"ALL","",x),nn(e,W9,"HOUR","",x),nn(e,X9,"ALL","",x),nn(e,J9,"ALL","",x),nn(e,Q9,"ALL","",x),nn(e,pA,"ALL","",x),nn(e,e6,"ALL","",x),nn(e,t6,"ALL","",x),nn(e,n6,"ALL","",x),nn(e,r6,"ALL","",x),nn(e,s6,"ALL","",x),nn(e,i6,"ALL","",x),nn(e,gA,"ALL","",x),nn(e,a6,"ALL","",x),nn(e,o6,"ALL","",x),nn(e,l6,"ALL","",x),nn(e,c6,"ALL","",x),nn(e,u6,"ALL","",x),nn(e,d6,"ALL","",x),nn(e,h6,"ALL","",x),nn(e,f6,"ALL","",x),vf(e,RS,"",_),vf(e,LS,"",_),vf(e,BS,"",_),vf(e,PS,"",_),is(e,m6,"",x,"ALL"),is(e,$S,"",x,"YEAR"),is(e,$S,"",x,"DAY"),_f(e,p6,"",_),_f(e,g6,"",x),_f(e,b6,"",x),_f(e,y6,"",_),is(e,v6,"",x,"ALL"),is(e,_6,"",x,"ALL"),is(e,x6,"",x,"ALL"),is(e,w6,"",x,"ALL"),is(e,S6,"",x,"ALL"),is(e,IS,"",_,"ALL"),is(e,E6,"",_,"DAY_HOUR"),is(e,T6,"",_,"DAY_HOUR"),is(e,k6,"",_,"ALL"),is(e,A6,"",_,"ALL"),Vt(e,j6,"",_,"ALL"),Vt(e,zS,"",_,"ALL"),Vt(e,N6,"",_,"ALL"),Vt(e,O6,"",_,"ALL"),Vt(e,D6,"",_,"ALL"),Vt(e,M6,"",_,"ALL"),Vt(e,C6,"",_,"ALL"),Vt(e,US,"",_,"ALL"),Vt(e,R6,"",_,"ALL"),Vt(e,L6,"",_,"ALL"),Vt(e,B6,"",_,"ALL"),Vt(e,P6,"",_,"ALL"),Vt(e,$6,"",_,"ALL"),Vt(e,HS,"",x,"ALL"),Vt(e,I6,"",x,"ALL"),Vt(e,z6,"",x,"ALL"),Vt(e,GS,"",x,"DAY"),Vt(e,GS,"",x,"HOUR"),Vt(e,FS,"",x,"DAY"),Vt(e,FS,"",x,"HOUR"),Vt(e,qS,"",x,"DAY"),Vt(e,qS,"",x,"HOUR"),Vt(e,U6,"",x,"DAY"),Vt(e,H6,"",x,"ALL"),Vt(e,G6,"",_,"ALL"),Vt(e,YS,"",x,"ALL"),S.has(e[Te.day])){x.push({name:xi(""),weight:mn[Te.day],pos:Te.day});for(const X of[Te.year,Te.month,Te.hour])e[X]===e[Te.day]&&x.push({name:bf("",X),weight:mn[X],pos:X})}const k=ZS[u];if(k)for(const X of[Te.year,Te.month,Te.day,Te.hour]){const U=ls(e[X]),B=Xt(e[X]);U===u&&k.includes(B)&&x.push({name:bf("",X),weight:mn[X],pos:X})}for(const[X,U]of VS){const B=Pg(X,e),V=Pg(U,e);B&&V&&Gg(x,"",B.pos,V.pos)}{const X=new Set(["",""]),U=new Set(["","","",""]);for(let B=0;B<=3;B++){const V=ls(e[B]),J=Xt(e[B]);(X.has(V)||U.has(J))&&x.push({name:bf("",B),weight:mn[B],pos:B})}}{const X=ls(e[Te.day]),U=e[Te.hour],B=(V,J)=>V.includes(X)&&J.includes(U);B(["",""],["",""])&&x.push({name:xi(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xi(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xi(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xi(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xi(""),weight:mn[Te.hour],pos:Te.hour})}{const X=Ig(e);["","","",""].every(B=>X.includes(B))&&_.push({name:xi(""),weight:mn[Te.day],pos:Te.day})}{const X=e[Te.day],U=e[Te.hour];(X===""&&U===""||X===""&&U==="")&&x.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const X=Xt(e[Te.year]),U=new Set(Ig(e).slice(1)),B=(V,J)=>V.every(I=>U.has(I))&&X===J;(B(["","",""],"")||B(["","",""],"")||B(["","",""],"")||B(["","",""],""))&&_.push({name:xi(""),weight:mn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&_.push({name:xi(""),weight:mn[Te.day],pos:Te.day});{const X=ls(e[Te.day]),B={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[X],V=e.some(G=>Xt(G)===B.rok),I=ls(e[Te.hour])===B.maStem;V&&I&&_.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const X=ls(e[Te.day]),U=Xt(e[Te.day]),B=Xt(e[Te.hour]),J={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[X];if(J){const I=U===J.rok,G=B===J.ma,oe=pf(J.rokStem,e[Te.day],"classic")||pf(J.rokStem,e[Te.hour],"classic"),ce=pf(J.maStem,e[Te.day],"classic")||pf(J.maStem,e[Te.hour],"classic");I&&G&&(oe||ce)&&_.push({name:yc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}}{const X=new Set(["","","","","",""]),U=e.map(ls),B=e.map(Xt),V=U.concat(B).filter(oe=>X.has(oe)).length,J=t?ls(t):"",I=t?Xt(t):"",G=X.has(J)||X.has(I);(V>=4||V===3&&G)&&x.push({name:xi(""),weight:mn[Te.day],pos:Te.day})}{const X=new Set(["",""]),U=new Set(["",""]);for(let B=0;B<=3;B++){const V=ls(e[B]),J=Xt(e[B]);(X.has(V)||U.has(J))&&x.push({name:bf("",B),weight:mn[B],pos:B})}}{const X=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[U,B]of X){const V=Xt(e[U]),J=Xt(e[B]);if(Uu(zg,V,J)){const I=KS(zg,V,J);Gg(x,`${I}`,U,B)}}}{const X=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[U,B,V]of X){const J=Xt(e[U]),I=Xt(e[B]);if(Uu(Ug,J,I)){const G=KS(Ug,J,I),oe=(V?1:0)+(F6.has(J+I)?1:0);Gg(x,`${G}`,U,B,oe)}}}function A(X){const U=X.lastIndexOf("_");return U>=0?X.slice(U+1):X}const M=new Set(["",""]);function P(X){return M.has(X)?!0:X.endsWith("")||X.endsWith("")}function N(X){const U=new Map;for(const V of X){const J=A(V.name);U.has(J)||U.set(J,[]),U.get(J).push(V)}const B=[];for(const[V,J]of U)if(P(V))B.push(...J);else{const I=J.sort((G,oe)=>hc[G.pos]!==hc[oe.pos]?hc[oe.pos]-hc[G.pos]:oe.weight-G.weight)[0];B.push(I)}return B}const D=yf(e[Te.day]),R=yf(e[Te.year]);{const X=(l?.voidBasis??"day")==="day"?D:R;if(X){const[U,B]=X.map(yr),V=[Te.year,Te.month,Te.day,Te.hour];for(const J of V){const I=Xt(e[J]);(I===U||I===B)&&x.push({name:U9(l?.voidBasis??"day",J),weight:mn[J],pos:J})}}}const z=N(MS(_)),F=N(MS(x)),q={si:[],il:[],yeon:[],wol:[]},Y={si:[],il:[],yeon:[],wol:[]};for(const X of z)q[gf(X.pos)].push(X.name);for(const X of F)Y[gf(X.pos)].push(X.name);const ne=[],K=[],Z=[],ee=[],Q=[],ve=[],W=[],ie=[];function te(X,U){X.includes(U)||X.push(U)}function de(X,U){const B=F9(U);if(!B)return;const V=B.branch,J=B.stem;let I,G;switch(X){case"dae":I=ne,G=Q;break;case"se":I=K,G=ve;break;case"wol":I=Z,G=W;break;case"il":I=ee,G=ie;break;default:return}ea(RS[m])===J&&te(I,zu("",X)),ea(LS[m])===J&&te(I,zu("",X)),ea(BS[m])===J&&te(I,zu("",X)),ea(PS[m])===J&&te(I,zu("",X)),IS[m]?.includes(V)&&te(I,zu("",X)),zS[u]?.includes(V)&&te(I,rc("",X)),US[u]?.includes(V)&&te(I,rc("",X)),HS[u]?.includes(V)&&te(G,rc("",X)),YS[u]?.includes(V)&&te(G,rc("",X)),ZS[u]?.includes(V)&&te(G,rc("",X)),X==="se"&&(Y9[p]?.includes(V)&&te(G,CS(X,"")),mA[p]?.includes(V)&&te(G,CS(X,"")));for(const ce of y)if(Uu(VS,V,ce)){const le=Pg(ce,e)?.pos;le!==void 0&&te(G,$g("",X,le));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(V)&&te(G,rc("",X));const oe=(l?.voidBasis??"day")==="day"?D:R;oe&&(V===oe[0]||V===oe[1])&&te(G,H9(X,l?.voidBasis??"day"));for(let ce=0;ce<=3;ce++){const le=Xt(e[ce]);Uu(zg,V,le)&&te(G,$g("",X,ce)),Uu(Ug,V,le)&&te(G,$g("",X,ce))}if(X==="se"){const ce=(l?.samjaeBasis??"day")==="day"?f:p,le=ce?Hg(ce):null;le&&le.includes(V)&&te(G,G9(X,l?.samjaeBasis??"day"))}}return de("dae",t??null),de("se",n??null),de("wol",s??null),de("il",o??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const X={si:[],il:[],yeon:[],wol:[]};for(const U of z)X[gf(U.pos)].push(U.name);return X})(),dae:ne,se:K,wolun:Z,ilun:ee},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const X={si:[],il:[],yeon:[],wol:[]};for(const U of F)X[gf(U.pos)].push(U.name);return X})(),dae:Q,se:ve,wolun:W,ilun:ie},meta:{voidPair:{day:yf(e[Te.day])??void 0,year:yf(e[Te.year])??void 0},samjaeYears:{day:Hg(f)??void 0,year:Hg(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function Y6(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Z6({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((s,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Y6(s,t),children:s},`${t}-${o}-${s}`))})}function WS({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const o=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[g.jsx("div",{className:o,children:n.label}),g.jsx(Z6,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function V6({pillars:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,tab:l=""}){const{settings:u}=Wn(),[f,m]=C.useState(""),[p,y]=C.useState("");C.useEffect(()=>{u.sinsalBase===""?(m(""),y("")):(m(""),y(""))},[u.sinsalBase]);const _=C.useMemo(()=>({voidBasis:f===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[f,p]),x=C.useMemo(()=>Gr({natal:e,daewoon:t,sewoon:n,wolwoon:s,ilwoon:o,basis:_}),[e,t,n,s,o,_]),{good:S,bad:T,meta:k}=x,A=ne=>ne.map(K=>K==="#"?K:` ${K}`),M=(ne,K)=>{const Z=["natal"];return K===""&&Z.push("natal"),K===""&&Z.push("natal","dae"),K===""&&Z.push("natal","dae","se"),K===""&&Z.push("natal","dae","se","wol"),K===""&&Z.push("natal","dae","se","wol","il"),ne.filter(ee=>Z.includes(ee.source))},P=[{label:"",items:A(S.si),source:"natal"},{label:"",items:A(S.il),source:"natal"},{label:"",items:A(S.wol),source:"natal"},{label:"",items:A(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],N=[{label:"",items:A(T.si),source:"natal"},{label:"",items:A(T.il),source:"natal"},{label:"",items:A(T.wol),source:"natal"},{label:"",items:A(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],D=M(P,l),R=M(N,l),z=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",F=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",q=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",Y=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:f,onChange:ne=>m(ne.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:z}),g.jsx("option",{value:"",children:F})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:p,onChange:ne=>y(ne.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:q}),g.jsx("option",{value:"",children:Y})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(WS,{title:"()",rows:D}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(WS,{title:"()",rows:R})]})]})}const Cs={year:0,month:1,day:2,hour:3},yA={[Cs.year]:.3,[Cs.month]:.5,[Cs.day]:.3,[Cs.hour]:.3},vA={[Cs.year]:.15,[Cs.month]:.2,[Cs.day]:0,[Cs.hour]:.15},K6=e=>Wb.has(e)?e:Xb[e]??e,W6=e=>Am.has(e)?e:jm[e]??e,X6=e=>typeof e=="string"&&e.length>=2?K6(e.slice(-1)):"",J6=e=>typeof e=="string"&&e.length>=1?W6(e.slice(0,1)):"",wn=(e,t,n,s)=>({han:e,nan:t,jo:n,seup:s}),Q6={:wn(2,0,.5,2),:wn(2,0,0,2),:wn(2,0,0,2),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,2,1,2),:wn(0,2,2,.5),:wn(0,2,2,0),:wn(0,2,2,1),:wn(2,0,0,2),:wn(2,0,0,2),:wn(2,0,1,1)},e$={:wn(0,1,1,0),:wn(0,1,1,0),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,0,1,0),:wn(0,0,0,1),:wn(1,0,0,1),:wn(1,0,0,1),:wn(2,0,0,2),:wn(2,0,0,2)},XS=e=>Math.max(0,Math.min(100,e));function JS(e,t){const n=Math.max(0,e),s=Math.max(0,t),o=n+s;return o<=0?50:s/o*100}function t$(e){let t=0,n=0,s=0,o=0;return[Cs.year,Cs.month,Cs.day,Cs.hour].forEach(l=>{const u=Q6[X6(e[l])],f=e$[J6(e[l])],m=yA[l],p=vA[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,s+=u.jo*m,o+=u.seup*m),p>0&&f&&(t+=f.han*p,n+=f.nan*p,s+=f.jo*p,o+=f.seup*p)}),{han:t,nan:n,jo:s,seup:o}}function n$(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function r$(e){const t=n$(e);return C.useMemo(()=>{const{han:n,nan:s,jo:o,seup:l}=t$(t),u=JS(n,s),f=JS(l,o);return{hanNanPct:XS(u),joSeupPct:XS(f),raw:{han:n,nan:s,jo:o,seup:l},weights:{branch:yA,stem:vA}}},[t])}function QS({label:e,percent:t,leftHint:n,midHint:s,rightHint:o}){const l=C.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:n}),g.jsx("span",{children:s}),g.jsx("span",{children:o})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(f=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${f}%`},title:`${f}%`},f)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function s$({natal:e}){const{hanNanPct:t,joSeupPct:n}=r$(e);return g.jsxs("div",{className:"flex gap-2",children:[g.jsx(QS,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),g.jsx(QS,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const i$=Object.fromEntries(ms..map((e,t)=>[e,jr[t]])),a$=Object.fromEntries(jr.map((e,t)=>[e,ms.[t]])),o$=Object.fromEntries(ms..map((e,t)=>[e,qr[t]])),l$=Object.fromEntries(qr.map((e,t)=>[e,ms.[t]])),c$=e=>i$[e]??e,u$=e=>o$[e]??e,d$=e=>a$[e]??e,h$=e=>l$[e]??e;function _A(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const s=n.charAt(0),o=n.charAt(1),l=/[]/.test(s)||/[]/.test(o)?`${c$(s)}${u$(o)}`:`${d$(s)}${h$(o)}`;t[l]===void 0&&(t[l]=e[n])}return t}const xA={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},f$={...xA,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},m$=_A(xA),p$=_A(f$),g$={:"",:"",:"",:"",:""},b$={:"",:"",:"",:"",:""},y$={:"",:"",:"",:"",:""},v$={:"",:"",:"",:"",:""},_$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},w$=e=>_$[e]??e,S$=e=>x$[e]??e;function wA(e){return!e||e.length<2?"":`${w$(e[0])}${S$(e[1])}`}const SA=e=>e&&e.length>=1?e[0]:"",EA=e=>e&&e.length>=2?e[1]:"";function TA(e){return{:e,:g$[e],:b$[e],:y$[e],:v$[e]}}const kA={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function E$(e,t){const n=(e??[]).slice(0,4).map(wA);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const s=SA(n[2]),o=s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":"",l=n.map(x=>EA(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},f=kA[s]??[],m=l[1];f.includes(m)&&(u..=!0,u..=!0);const p=l[2];f.includes(p)&&(u..=!0,u..=!0);const y=TA(o).,_=t[y]??0;return u..=_>=30,{flags:u,monthBranch:m,dayEl:o}}function AA(e,t){const n=(e??[]).slice(0,4).map(wA);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const s=SA(n[2]),o=s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":s===""||s===""?"":"",l=n.map(T=>EA(T)),u={:!1,:!1,:!1},f={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=kA[s]??[],p=l[1];m.includes(p)&&(f..=!0,f..=!0,f..=!0,f..=!0);const y=l[2];m.includes(y)&&(f..=!0,f..=!0,f..=!0,f..=!0);const _=TA(o).;return(t[_]??0)>=30&&(f..=!0,f..=!0,f..=!0,f..=!0),{flags:f,monthBranch:p,dayEl:o}}const T$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},k$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},A$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},j$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N$=e=>T$[e]??e,O$=e=>k$[e]??e;function D$(e){return!e||e.length<2?"":`${N$(e[0])}${O$(e[1])}`}function qo(e){return OS[e]??OS[A$[e]??""]}function Yo(e){return DS[e]??DS[j$[e]??""]}const Fg=["year","month","day","hour"],M$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},C$={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},R$=new Set(["","","","",""]),L$=new Set(["","","","","",""]),B$=new Set(["","","",""]),qg=e=>R$.has(e)?"":"",Yg=e=>{const t=L$.has(e)?"":"";return B$.has(e)?t===""?"":"":t};function e2(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),s=n.map(f=>Math.floor(f+.5)),o=100-s.reduce((f,m)=>f+m,0);if(o===0)return s;const l=n.map((f,m)=>({i:m,frac:f-Math.floor(f+.5)})).sort((f,m)=>m.frac-f.frac),u=s.slice();if(o>0)for(let f=0;f<o;f++)u[l[f].i]+=1;else for(let f=0;f<-o;f++)u[l[l.length-1-f].i]-=1;return u}function P$(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const xf={:.15,:.1,:-.15,:-.2,:-.25},vm={:"",:"",:"",:"",:""},jA={:"",:"",:"",:"",:""},dd={:"",:"",:"",:"",:""},$$={:"",:"",:"",:"",:""};function wf(e,t){return e===t?"":vm[t]===e?"":vm[e]===t?"":dd[e]===t?"":dd[t]===e?"":""}const Ga=e=>e&&e.length>=1?e[0]:"",Zo=e=>e&&e.length>=2?e[1]:"";function I$(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const s=e.map(m=>m/n*t),o=s.map(m=>Math.floor(m));let l=t-o.reduce((m,p)=>m+p,0);const u=s.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),f=o.slice();for(let m=0;m<u.length&&l>0;m++)f[u[m].i]+=1,l-=1;return f}function t2(e,t){switch(e){case"":return t;case"":return vm[t];case"":return dd[t];case"":return $$[t];case"":return jA[t];default:return t}}function Hb(e){const{pillars:t,dayStem:n,mode:s,debug:o,useHarmonyOverlay:l,criteriaMode:u,luck:f}=e,m=u==="modern"?M$:C$,p=s==="classic"?p$:m$,y={:0,:0,:0,:0,:0},_={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S=(t??[]).slice(0,4).map(D$),T=S.length===4&&S[0]&&S[0].length>=2&&S[1]&&S[1].length>=2&&S[2]&&S[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const I=["","","","",""].map(G=>({name:G,value:0,color:"#999999"}));return{overlay:k,totals:I,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:y,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const A=Ga(S[2]),M=n??A,P=M===""||M===""?"":M===""||M===""?"":M===""||M===""?"":M===""||M===""?"":"",N=[{val:0},{val:0},{val:0},{val:0}],D=[[],[],[],[]];for(const I of S){if(!I)continue;const G=I.charAt(0),oe=I.charAt(1);_[G]=(_[G]??0)+50;const ce=x[oe];ce&&(_[ce]=(_[ce]??0)+50)}for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Fg[I],ce=Ga(G),le=Zo(G),_e=m[oe],Ae=qo(ce);Ae&&(y[Ae]+=_e.stem,N[I]={stem:ce,el:Ae,pol:qg(ce),val:_e.stem});const je=Yo(le);je&&(y[je]+=_e.branch,D[I].push({el:je,pol:Yg(le),val:_e.branch}))}for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Fg[I],ce=p[G]??0;if(ce===0)continue;const le=Ga(G),_e=qo(le);if(!_e)continue;const Ae=m[oe].stem*ce;y[_e]+=Ae,N[I].val+=Ae}for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Zo(G),ce=Yo(oe);if(!ce)continue;const le=m[Fg[I]].branch,_e=Yg(oe);let Ae=0;const je=[I];I-1>=0&&je.push(I-1),I+1<=3&&je.push(I+1),I-2>=0&&je.push(I-2),I+2<=3&&je.push(I+2);const Me=Array.from(new Set(je));for(const Ee of Me){if(!S[Ee]||S[Ee].length<2)continue;const $e=Ga(S[Ee]),Ce=qo($e);if(!Ce||Ce!==ce)continue;const Pe=qg($e)===_e,Ie=Math.abs(Ee-I),pe=P$(Ie,Pe);Ae+=le*pe}Ae!==0&&(y[ce]+=Ae,D[I].push({el:ce,pol:_e,val:Ae}))}for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Ga(G),ce=qo(oe);if(!ce)continue;let le=0;const _e=Zo(S[I]),Ae=Yo(_e);Ae&&(le+=xf[wf(ce,Ae)]);const je=I===0?[1]:I===3?[2]:[I-1,I+1];for(const Ee of je){const $e=Ga(S[Ee]),Ce=qo($e);Ce&&(le+=xf[wf(ce,Ce)])}const Me=N[I].val;if(Me!==0&&le!==0){const Ee=Math.round(Me*(1+le)*10)/10,$e=Ee-Me;y[ce]+=$e,N[I].val=Ee}}for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Zo(G),ce=Yo(oe);if(!ce)continue;let le=0;const _e=Ga(S[I]),Ae=qo(_e);Ae&&(le+=xf[wf(ce,Ae)]);const je=I===0?[1]:I===3?[2]:[I-1,I+1];for(const Ee of je){if(!S[Ee]||S[Ee].length<2)continue;const $e=Zo(S[Ee]),Ce=Yo($e);Ce&&(le+=xf[wf(ce,Ce)])}const Me=D[I].reduce((Ee,$e)=>Ee+$e.val,0);if(Me!==0&&le!==0){const $e=Math.round(Me*(1+le)*10)/10-Me;y[ce]+=$e,D[I].length>0&&(D[I][0].val+=$e)}}l&&e9(S,y);const R={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},z=[];if(!(!f||f.tab==="")){let I=function(G,oe){const ce=G?Fe(G):"";if(!ce||ce.length<2)return;const le=Ga(ce),_e=Zo(ce),Ae=qo(le),je=Yo(_e),Me=Math.max(1,(y.??0)+(y.??0)+(y.??0)+(y.??0)+(y.??0)),Ee=R[oe];if(Ae){const $e=Math.round(Me*Ee.stem);y[Ae]+=$e,z.push({stem:le,el:Ae,pol:qg(le),val:$e})}if(je){const $e=Math.round(Me*Ee.branch);y[je]+=$e,z.push({el:je,pol:Yg(_e),val:$e})}};I(f.dae,"dae"),(f.tab===""||f.tab===""||f.tab==="")&&I(f.se,"se"),(f.tab===""||f.tab==="")&&I(f.wol,"wol"),f.tab===""&&I(f.il,"il")}const F={:0,:0,:0,:0,:0};Object.entries(y).forEach(([I,G])=>{const oe=ee(I,P);F[oe]+=G});const q=["","","","",""],Y=e2(q.map(I=>F[I])),ne=oA(M),K=q.map((I,G)=>({name:I,value:Y[G],color:ne[I]})),Z={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function ee(I,G){return I===G?"":vm[G]===I?"":dd[G]===I?"":dd[I]===G?"":jA[G]===I?"":""}function Q(I,G){switch(ee(I,P)){case"":Z.+=G*.5,Z.+=G*.5;break;case"":Z.+=G*.5,Z.+=G*.5;break;case"":Z.+=G*.5,Z.+=G*.5;break;case"":Z.+=G*.5,Z.+=G*.5;break;case"":Z.+=G*.5,Z.+=G*.5;break}}Object.entries(y).forEach(([I,G])=>{G>0&&Q(I,G)});const ve={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const I of q){const G=K.find(je=>je.name===I)?.value??0,oe=ve[I].a,ce=ve[I].b,le=Z[oe]??0,_e=Z[ce]??0,Ae=le+_e;if(Ae>0){const je=Math.floor(G*le/Ae+.5),Me=G-je;ve[I].aVal=je,ve[I].bVal=Me}else ve[I].aVal=Math.floor(G/2+.5),ve[I].bVal=G-ve[I].aVal}const{flags:W}=E$(S,y),ie={};N.forEach(I=>{if(I.stem&&I.el&&I.val){const G=`${I.stem}${I.el}`;ie[G]=(ie[G]??0)+I.val}});for(let I=0;I<4;I++){const G=S[I];if(!G||G.length<2)continue;const oe=Zo(G),ce=x[oe],le=Yo(oe);if(!ce||!le)continue;const _e=`${ce}${le}`,Ae=D[I].reduce((je,Me)=>je+Me.val,0);ie[_e]=(ie[_e]??0)+Ae}const te=["","","","","","","","","",""],de={};te.forEach(I=>{de[I]=0}),q.forEach(I=>{const G=K.find(Me=>Me.name===I)?.value??0,oe=t2(I,P),ce=Object.entries(ie).filter(([Me])=>Me.endsWith(oe)),le=ce.map(([Me])=>Me),_e=ce.map(([,Me])=>Me),Ae=Math.max(0,Math.round(G*10)),je=I$(_e.length?_e:[1,1],Ae);if(le.length===2)de[le[0]]=(je[0]??Math.round(Ae/2))/10,de[le[1]]=(je[1]??Ae-(je[0]??0))/10;else if(le.length===1)de[le[0]]=Ae/10;else{const Me=oe===""?["",""]:oe===""?["",""]:oe===""?["",""]:oe===""?["",""]:["",""],Ee=Math.floor(Ae/2),$e=Ae-Ee;de[Me[0]]+=Ee/10,de[Me[1]]+=$e/10}});const X=["","","","",""],U={:0,:0,:0,:0,:0};for(const I of K){const G=t2(I.name,P);U[G]+=I.value}const B=e2(X.map(I=>U[I])),V={:B[0],:B[1],:B[2],:B[3],:B[4]};return o&&console.log({elementScore:y,totals:K,perTenGod:ve,perStemRaw:ie,perStemElementScaled:de,elementPercent100:V}),{overlay:{totalsSub:Z,perStemAugBare:ie,perStemAugFull:de},totals:K,perTenGod:ve,PerTenGodSub:Z,stemScoreRaw:_,elementScoreRaw:y,deukFlags:W,perStemElement:ie,perStemElementScaled:de,elementPercent100:V}}function z$(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),s=n.map(f=>Math.round(f));let l=100-s.reduce((f,m)=>f+m,0);const u=n.map((f,m)=>({i:m,f:f-Math.round(f)})).sort((f,m)=>m.f-f.f);for(let f=0;f<u.length&&l>0;f++)s[u[f].i]+=1,l-=1;return s}const n2=["","","","",""];function U$(e,t){const n=[Fe(e[0]??""),Fe(e[1]??""),Fe(e[2]??""),Fe(e[3]??"")],{elementScoreRaw:s}=Hb({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),o=n2.map(f=>s[f]??0),l=z$(o),u={:0,:0,:0,:0,:0};return n2.forEach((f,m)=>{u[f]=l[m]}),u}function NA(e,t){const n=U$(e,t),s=Fe(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[s];if(!l)return 0;const u={:"",:"",:"",:"",:""},f=n[l]??0,m=n[u[l]]??0;return f+m*.7}const Sf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ef={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Tf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H$=["","","","",""];function r2(e){return H$.includes(e)}const G$={:"",:"",:"",:"",:""},F$={:"",:"",:"",:"",:""},q$={:"",:"",:"",:"",:""},Y$={:"",:"",:"",:"",:""},Gb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Z$=["","","","","","","","","",""],V$={natal:50,dae:30,se:20,wol:7,il:3};function _m(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Sf[t])return Sf[t];if(["","","","","","","","","","","",""].includes(t))return Tf[t]??null;if(Ef[t])return Tf[Ef[t]]??null;const n=t.charAt(0);return Sf[n]?Sf[n]:["","","","","","","","","",""].includes(n)?n:Ef[n]?Tf[Ef[n]]??null:["","","","","","","","","","","",""].includes(n)?Tf[n]??null:null}function K$(e,t){const n=Gb[e],s=Gb[t];if(!n||!s)return"";let o;s===n?o="":s===G$[n]?o="":s===F$[n]?o="":s===q$[n]?o="":s===Y$[n]?o="":o="";const l=r2(e)===r2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function xm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=s.map(([p,y])=>[p,Math.round(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=s.map(([p,y])=>[p,y-Math.round(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function s2(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e??{})){if(o<=0)continue;const l=_m(s);if(!l)continue;const u=K$(t,l);n[u]+=o}return xm(n)}function W$(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function i2(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=_m(n);o&&(t[o]=(t[o]??0)+s)}return t}function a2(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const s of Z$){const o=Gb[s],l=`${s}${o}`;n[l]=Math.max(0,Math.round(e[s]??0))}return n}function o2(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const s of t)typeof e[s]=="number"&&(n[s]=e[s]);return n}function X$(e,t){const n=t?.dae?kf(t.dae):{},s=t?.se?kf(t.se):{},o=t?.wol?kf(t.wol):{},l=t?.il?kf(t.il):{},u={},f=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:s},{kind:"wol",bare:o},{kind:"il",bare:l}];for(const{kind:p,bare:y}of f){const _=V$[p];if(!y||Object.keys(y).length===0)continue;const x=xm(y);for(const[S,T]of Object.entries(x))u[S]=(u[S]??0)+T*_}const m=Object.values(u).reduce((p,y)=>p+y,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function J$(e){if(!e)return[];const t=_m(e.charAt(0)),n=_m(e.charAt(1));return[t,n].filter(Boolean)}function kf(e){const t=J$(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function OA(e){const{natal:t,tab:n,chain:s,hourKey:o="unified"}=e,l=[Fe(t[0]??""),Fe(t[1]??""),Fe(t[2]??""),Fe(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:f,hiddenStem:m}=rl,p=f==="classic"?"classic":"hgc",y=s?{tab:n,dae:s.dae?Fe(s.dae):void 0,se:(n===""||n===""||n==="")&&s.se?Fe(s.se):void 0,wol:(n===""||n==="")&&s.wol?Fe(s.wol):void 0,il:n===""&&s.il?Fe(s.il):void 0}:{tab:n},_=Hb({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:y}),x=Hb({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),S=i2(_.perStemElementScaled),T=n===""?S:X$(S,s),k=xm(T),A=s2(T,u),M=W$(A),P=a2(k),N=i2(x.perStemElementScaled),D=s2(N,u),R=xm(N),z=a2(R);return{elementScoreRaw:_.elementScoreRaw,elementPercent100:_.elementPercent100,totals:_.totals,perStemElementScaled:_.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:A,perTenGod:M,overlay:{totalsSub:A,perStemAugBare:T,perStemAugFull:P},natalFixed:{elementScoreRaw:o2(x.elementScoreRaw),elementPercent100:o2(x.elementPercent100),totalsSub:D,overlay:{totalsSub:D,perStemAugBare:N,perStemAugFull:z}}}}const Rs={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ti={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Q$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Ls(e){return["","","","",""].includes(e)}function e8(e){return["","","","","",""].includes(e)}const DA={:"",:"",:"",:"",:""},iv={:"",:"",:"",:"",:""},MA={:"",:"",:"",:"",:""},CA={:"",:"",:"",:"",:""},Zg=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Ds=e=>e&&e.length>=1?e.charAt(0):"",Nn=e=>e&&e.length>=2?e.charAt(1):"",t8=e=>Array.from(new Set(e)),n8={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},r8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function s8(e,t){const n=r8[e];if(!n)return!1;const o=ai(t).find(f=>f.name===n);if(!o)return!1;const l=new Date(o.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const i8={:["","",""],:["","",""],:["","",""],:["","",""]};function a8(e,t){const n=i8[e];return n?n.filter(s=>s!==e).every(s=>t.includes(s)):!1}function ri(e,t){const n=Rs[e],s=Rs[t];if(!n||!s)return"";let o;s===n?o="":s===DA[n]?o="":s===iv[n]?o="":s===MA[n]?o="":s===CA[n]?o="":o="";const l=Ls(e)===Ls(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function o8(e,t){const n=Rs[e],s=Ti[t];if(!n||!s)return"";let o;s===n?o="":s===DA[n]?o="":s===iv[n]?o="":s===MA[n]?o="":s===CA[n]?o="":o="";const l=Ls(e)===e8(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function l8(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function Fb(e,t){const n=l8(e),s=Ls(e),o={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":o[n]===t?u="":o[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const f=s===Ls(c8(t));switch(u){case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":""}}function c8(e){return{:"",:"",:"",:"",:""}[e]}const Vg={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},RA={:"",:"",:"",:"",:""},LA={:"",:"",:"",:""},u8=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],d8=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const s=Ds(n),o=Nn(n),l=Rs[s],u=Ti[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function h8(e){const{pillars:t,dayStem:n,monthBranch:s,mapping:o}=e,[l,u,f,m]=(t??[]).slice(0,4),p=[Ds(l),Ds(u),Ds(f),Ds(m)].filter(Boolean),y=[Nn(l),Nn(u),Nn(f),Nn(m)].filter(Boolean),_=Rs[n],x=p.map(me=>ri(n,me)),S=[],T=me=>p.filter(ze=>ze===me).length,k=me=>y.filter(ze=>ze===me).length,A=me=>me.every(ze=>y.includes(ze)),M=me=>x.some(ze=>me.includes(ze)),P=Ds(u),N=me=>Ls(me),D=()=>{const me=p.map(ze=>Rs[ze]);return me.length===4&&me.every(ze=>ze===me[0])},R=()=>{if(p.length!==4)return!1;const me=p.map(N),ze=me[0]&&!me[1]&&me[2]&&!me[3],Be=!me[0]&&me[1]&&!me[2]&&me[3];return ze||Be};Ls(n)&&RA[n]===s&&S.push("");const z=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[me,ze]of z)if(n===me&&s===ze){S.push("");break}!Ls(n)&&LA[n]===s&&S.push("");const F=Vg[n];F&&Nn(f)===F&&_===Ti[Nn(f)]&&S.push(""),F&&Nn(m)===F&&_===Ti[Nn(m)]&&S.push("");const q=[l,u,f,m].map(_8),Y=[l,u,f,m].map(x8);for(const me of q);for(const me of Y);const ne=o==="hgc"?Rm:Cm;function K(me){return(ne[me]??[]).filter(ze=>["","","","","","","","","",""].includes(ze))}const Z=[l,u,f,m].filter(Boolean),Q=Z.flatMap(me=>[me.charAt(0),me.charAt(1)]).flatMap(me=>{try{if(["","","","","","","","","",""].includes(me))return[ri(n,me)];if(["","","","","","","","","","","",""].includes(me)){const ze=o8(n,me),Be=K(me).map(Ue=>ri(n,Ue));return[ze,...Be]}return[]}catch{return[]}}),ve=me=>Q.some(ze=>me.includes(ze)),W=(me,ze)=>{const Be=[],Ue=[];for(const et of Z){const Zt=et.charAt(0),On=et.charAt(1);Be.push(ri(n,Zt));const En=Ti[On];En?Ue.push(Fb(n,En)):Ue.push(null)}const at=(et,Zt)=>!!et&&!!Zt&&(me.includes(et)&&ze.includes(Zt)||ze.includes(et)&&me.includes(Zt));for(let et=0;et<Be.length;et++)if(at(Be[et],Ue[et]))return!0;for(let et=0;et<Be.length-1;et++)if(at(Be[et],Be[et+1])||at(Ue[et],Ue[et+1]))return!0;return!1},ie={:["",""],:["",""],:["",""],:["",""]};ve([...ie.])&&ve([...ie.])&&W([...ie.],[...ie.])&&S.push(""),ve([...ie.])&&ve([...ie.])&&W([...ie.],[...ie.])&&S.push("");const te=me=>x.filter(ze=>me.includes(ze)).length,de=te(["",""]),X=te([""]),U=te([""]),B=te(["",""]),V=te(["",""]),J=te(["",""]);X>=1&&de>=1&&de>=X&&U<=X&&S.push("");const I=te([""]);I>=1&&B>=1&&I>=B&&S.push(""),x.includes("")&&B>=1&&S.push("");const oe=d8(t),ce=Object.entries(oe).sort((me,ze)=>ze[1]-me[1]),le=ce[0];if(le&&le[1]>=60&&S.push(`(${le[0]})`),ce.length>=2){const[me,ze]=ce[0],[,Be]=ce[1];ze>=75&&ze-Be>=12&&_!==me&&S.push(`(${me})`)}for(const me of u8){const ze=p.includes(me.a),Be=p.includes(me.b);if(!ze||!Be)continue;const Ue=me.to,at=oe[Ue]??0,et=Rs[me.a],Zt=Rs[me.b],On=Math.max(oe[et]??0,oe[Zt]??0),En=Ti[s]===Ue,vr=Object.entries(oe).sort((Ct,bn)=>bn[1]-Ct[1])[0]?.[0]===Ue;let dn=!1;at>=60&&(En||vr)&&On<=20&&at-On>=20&&(S.push(`(${Ue})`),dn=!0),!dn&&at>=50&&(En||vr)&&On<=25&&(S.push(`(${Ue})`),dn=!0),!dn&&at>=35&&S.push(`(${Ue})`)}const _e=`${Ds(m)}${Nn(m)}`;["",""].includes(n)&&["","",""].includes(_e)&&S.push(""),["","","",""].includes(Nn(m))&&S.push(""),["",""].includes(n)&&(Nn(f)===""||Nn(u)==="")&&!y.includes("")&&S.push("");const Ae=p.some(me=>me===""||me===""),je=y.some(me=>me===""||me==="");["",""].includes(Nn(f))&&!Ae&&!je&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push(""),["","",""].every(me=>p.includes(me))&&S.push("");const Me=Object.values(oe).sort((me,ze)=>ze-me);Me.length>=3&&Me[0]-Me[2]<=8&&Me[0]+Me[1]+Me[2]>=80&&S.push(""),V>=1&&J>=1&&Math.abs(V-J)<=1&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),A(["","","",""])&&S.push(""),y.length===4&&y.every(me=>me===y[0])&&S.push(""),p.length===4&&D()&&R()&&S.push(""),t.every(me=>me&&me===t[0])&&S.push(""),p.length===4&&p.every(me=>me===p[0])&&y.length===4&&y.every(me=>me===y[0])&&S.push(""),de>=1&&(Nn(f)===Vg[n]||Nn(m)===Vg[n])&&S.push(""),T("")>=3&&A(["","",""])&&["","",""].includes(Nn(f))&&S.push("");const $e=n===""||n==="",Ce=[["","",""],["","",""]],Pe=[["","",""],["","",""]];$e&&(Ce.some(me=>A(me))||Pe.some(me=>A(me)))&&S.push("");const Ie=new Set(["","","","","",""]),pe=`${Ds(f)}${Nn(f)}`;if(Ie.has(pe)&&k("")>=2&&(M(["",""])||y.includes("")||y.includes("")||M(["",""])||S.push("")),new Set(["","","","","",""]).has(pe)&&k("")>=2&&y.includes("")&&S.push(""),n===""&&`${Ds(m)}${Nn(m)}`==""){const me=ri(n,P);!["","","",""].includes(me)&&M(["",""])&&!y.includes("")&&!y.includes("")&&S.push("")}return new Set(["","",""]).has(pe)&&`${Ds(m)}${Nn(m)}`==""&&!y.includes("")&&!M(["",""])&&S.push(""),pe===""&&k("")+k("")>=2&&S.push(""),(pe===""||pe==="")&&k("")>=2&&!M(["",""])&&!y.includes("")&&S.push(""),n===""&&A(["","",""])&&S.push(""),pe===""&&`${Ds(m)}${Nn(m)}`==""&&S.push(""),t8(S)}function f8(e){const{dayStem:t,monthBranch:n,date:s,pillars:o,emittedStems:l=[],otherBranches:u=[],isNeutralized:f,mapping:m}=e,p=[],y=n8[n];if(!y)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const _={:y.?{stem:Zg(y..stem),w:y..w}:void 0,:y.?{stem:Zg(y..stem),w:y..w}:void 0,:{stem:Zg(y..stem),w:y..w}},x=_..stem;let S=x;if(["","","",""].includes(n))S=_..stem,p.push(":   ");else if(["","","",""].includes(n)){const q=[];_.&&q.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),_.&&q.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),q.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)});const Y=q.filter(ne=>ne.emitted);Y.length===1?(S=Y[0].stem,p.push(`: ${Y[0].from}  `)):Y.length>1?(Y.sort((ne,K)=>K.w-ne.w),S=Y[0].stem,p.push(`:      ${Y[0].from} `)):(S=_..stem,p.push(":    "))}else["","","",""].includes(n)&&(a8(n,u)&&_.?(S=_..stem,p.push(":     ")):s8(n,s)&&_.?(S=_..stem,p.push(":  +12    ")):(S=_..stem,p.push(":  +12    ")));const T=S;let k="";const A=Rs[T];if(A){const q=Object.entries(iv).find(([,Y])=>Y===A)?.[0]??null;q&&(k=Object.entries(Rs).find(([ne,K])=>K===q&&Ls(ne)===Ls(T))?.[0]??"")}f?.(T)&&p.push(":   / ");let M="-";const P=ri(t,T),D=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([q,Y])=>q===t&&Y===n),R=Ls(t)&&RA[t]===n,z=!Ls(t)&&LA[t]===n;P===""||P===""?D?(M="",p.push(": /   ")):R?(M="",p.push(":    ")):z?(M="",p.push(":    ")):p.push(": /  "):P===""?M="()":M={:"",:"",:"",:"",:"",:"",:"",:""}[P]??"-";const F=h8({pillars:o,dayStem:t,monthBranch:n,mapping:m});return{:x,:S,:T,:k,:M,:F,reason:p}}const Re=(e,t)=>`${e}+${t}`,Tr=(e,t,n)=>`${e}+${t}+${n}`,m8={[Re("","")]:[""],[Tr("","","")]:void 0,[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Tr("","","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""]},p8={[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:["",""]};function g8(){const e={},t={},n=/[]/g;for(const[s,o]of Object.entries(m8)){if(!o)continue;const l=s.match(n);if(!l||l.length<2)continue;const[u,f]=l;e[s]=o.map(m=>`${u}X${f}_${m}`)}for(const[s,o]of Object.entries(p8)){if(!o)continue;const l=s.match(n);if(!l||l.length<3)continue;const[u,f,m]=l;t[s]=o.map(p=>`${u}X${f}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:Kg,newTris:Wg}=g8();function b8(e){const[t,n,s,o]=e,l=S=>Ds(S),u=l(o),f=l(s),m=l(n),p=l(t),y=[],_=[[u,f],[f,m],[m,p]];for(const[S,T]of _){if(!S||!T)continue;const k=Re(S,T),A=Kg[k];A&&A.length&&y.push(...A);const M=Re(T,S);M!==k&&Kg[M]&&y.push(...Kg[M])}const x=[[u,f,m],[f,m,p]];for(const[S,T,k]of x){if(!S||!T||!k)continue;const A=Tr(S,T,k),M=Wg[A];M&&M.length&&y.push(...M);const P=Tr(k,T,S);P!==A&&Wg[P]&&y.push(...Wg[P])}return Array.from(new Set(y))}const y8={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},v8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function _8(e){return e?.charAt(0)??""}function x8(e){return e?.charAt(1)??""}function w8(e,t,n){const[s,o,l,u]=(e??[]).slice(0,4),f=ue=>(ue?.length??0)>=1?ue.charAt(0):"",m=ue=>(ue?.length??0)>=2?ue.charAt(1):"",p=[s,o,l,u].map(f).filter(Boolean),y=[s,o,l,u].map(m).filter(Boolean),_=f(l),x=y8[_]??!1,S=new Set,T=t==="classic"?Cm:Rm,k=new Set(["","","","","","","","","",""]),A=ue=>(T[ue]??[]).filter(me=>k.has(me)),M=(ue,me)=>{const ze=Ti[me];if(!ze)throw new Error(`Unknown branch main element: ${me}`);return Fb(ue,ze)},P={:0,:0,:0,:0,:0};for(const ue of p){const me=Rs[ue];me&&(P[me]+=10)}const N=[];for(const ue of y){const me=Q$[ue];me&&N.push(me);const ze=Ti[ue];ze&&(P[ze]+=6)}const R=[...p,...N].map(ue=>ri(_,ue)),z={:["",""],:["",""],:["",""],:["",""],:["",""]},F=ue=>R.filter(me=>me===ue).length,q=ue=>R.filter(me=>z[ue].includes(me)).length,Y=y[1],ne=!!_&&v8[_]===Y,K=n.elementPercent100;K.>=20&&K.>=20&&K.>=15&&S.add("");const Z=[s,o,l,u].filter(Boolean),ee=[];for(const ue of Z){const me=ue.charAt(0),ze=ue.charAt(1);ee.push(ri(_,me)),ee.push(M(_,ze))}const Q=(ue,me)=>{const ze=(Be,Ue)=>!!Be&&!!Ue&&ue.includes(Be)&&me.includes(Ue)||me.includes(Be)&&ue.includes(Ue);for(let Be=0;Be+1<ee.length;Be+=2)if(ze(ee[Be],ee[Be+1]))return!0;return!1},ve=ue=>ee.some(me=>ue.includes(me)),W=F("")+F(""),ie=F(""),te=q(""),de=q(""),X=Q(["",""],["",""]);if((ie>=1||W>=2)&&te>=1&&W>te&&de<=1&&X&&S.add(""),ve(z.)&&ve(z.)&&Q(z.,z.)){const ue=R.includes("");S.add(ue?"":"")}q("")>=2&&q("")>=2&&Math.abs(q("")-q(""))<=1&&q("")<=1&&q("")<=1&&S.add("");const U=F(""),B=F(""),V=F("")+F(""),J=F("")+F(""),I=q("");B>=2&&V>=1&&P.+P.>=20&&S.add(""),B>=2&&J>=1&&P.+P.>=20&&S.add(""),B>=2&&J>=1&&P.+P.>=20&&Q([""],["",""])&&I<=1&&S.add(""),U>=2&&J>=1&&P.+P.>=20&&Q([""],["",""])&&I<=1&&S.add("");const G=(ue,me)=>{const ze=Rs[ue],Be=Ti[me];return!!ze&&!!Be&&ze===Be},oe=[s,o,l,u].filter(Boolean),ce=m(l),le=G(_,ce),_e=oe.map(ue=>ue.charAt(0)).filter(ue=>["",""].includes(ri(_,ue)));let Ae=!1;for(const ue of oe){const me=ue.charAt(0),ze=ue.charAt(1);if(_e.includes(me)&&G(me,ze)){Ae=!0;break}}le&&Ae&&S.add(""),q("")>=3&&q("")>=.5*(q("")+q("")+q("")+q(""))&&S.add(""),q("")>=3&&q("")>=.5*(q("")+q("")+q("")+q(""))&&S.add(""),q("")>=3&&q("")>=1&&S.add(""),q("")>=3&&q("")+q("")<=1&&S.add("");const je=F("");q("")+q("")>=2&&je===1&&q("")>=1&&S.add(""),je>=2&&V+q("")>=3&&S.add("");const Me=U+B;(U>=2||Me>=2)&&J>=1&&Me>J&&S.add(""),B>=2&&J>=1&&Me>J&&S.add("");const Ee=F(""),$e=F("");Ee>=2&&je+$e>=1&&S.add(""),Ee>=2&&je+$e===0&&S.add(""),x&&Ee>=2&&je>=1&&S.add(""),!x&&Ee>=2&&je>=1&&S.add(""),F("")>=2&&F("")>=1&&S.add(""),F("")>=1&&F("")>=1&&Q([""],[""])&&S.add(""),ne&&je>=1&&q("")+q("")>=2&&S.add("");const Ce=[m(s),m(o),m(l),m(u)].filter(Boolean),Pe=[s?.charAt(0),o?.charAt(0),u?.charAt(0)].filter(Boolean),Ie=new Set(Pe.map(ue=>ri(_,ue))),pe=new Set(Ce.flatMap(ue=>{const me=Ti[ue];return me?[Fb(_,me)]:[]})),Le=new Set(Ce.flatMap(ue=>A(ue).map(me=>ri(_,me))));return["","","","",""].forEach(ue=>{const me=z[ue],ze=me.some(at=>Ie.has(at)),Be=me.some(at=>pe.has(at)),Ue=me.some(at=>Le.has(at));!ze&&!Be&&!Ue?S.add(`${ue}`):!ze&&!Be&&Ue&&S.add(`${ue}`)}),Array.from(S)}function S8(e){const{pillars:t,tab:n,birthDate:s,emittedStems:o,otherBranches:l,isNeutralized:u,mapping:f,unified:m}=e,[p,y,_,x]=t,S=Q=>Q&&Q.length>=1?Q.charAt(0):"",T=Q=>Q&&Q.length>=2?Q.charAt(1):"",k=T(y),A=S(_),M=s instanceof Date&&!Number.isNaN(s.getTime())?s:new Date,P=[S(p),S(y),S(_),S(x)].filter(Q=>!!(Q&&Q.length===1)),N=[T(p),T(_),T(x)].filter(Q=>!!(Q&&Q.length===1)),D=f8({dayStem:A,monthBranch:k,date:M,pillars:t,emittedStems:o??P,otherBranches:l??N,isNeutralized:u,mapping:f}),R=[` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`],z=[` : ${D.||"-"}`],F=Array.isArray(D.)&&D..length>0?D..map(Q=>` : ${Q}`):[" : -"],q=b8(t),Y=[...q.length?q.map(Q=>`${Q}`):[]],K=[...w8(t,f,m)],Z=({text:Q,color:ve})=>{const W={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return g.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${W[ve]}`,title:Q,children:Q})},ee=({children:Q})=>g.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:Q});return g.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${R.join(",")}|${z.join(",")}|${F.join(",")}`,children:[g.jsx("div",{className:"font-bold text-base",children:"   "}),g.jsxs("ul",{className:"space-y-1",children:[g.jsx(ee,{children:R.map(Q=>g.jsx(Z,{text:Q,color:"violet"},Q))}),g.jsx(ee,{children:z.map(Q=>g.jsx(Z,{text:Q,color:"amber"},Q))}),g.jsx(ee,{children:F.map(Q=>g.jsx(Z,{text:Q,color:"blue"},Q))}),g.jsx(ee,{children:Y.map(Q=>g.jsx(Z,{text:Q,color:"green"},Q))}),g.jsx(ee,{children:K.map(Q=>g.jsx(Z,{text:Q,color:"red"},Q))})]}),D.reason.length>0&&g.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",D.reason.join(" / ")]})]})}const fc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},mc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},BA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Af={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},E8=["","","","",""];function l2(e){return E8.includes(e)}const T8={:"",:"",:"",:"",:""},k8={:"",:"",:"",:"",:""},A8={:"",:"",:"",:"",:""},j8={:"",:"",:"",:"",:""};function hd(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(fc[t])return fc[t];if(["","","","","","","","","","","",""].includes(t))return Af[t]??null;if(mc[t])return Af[mc[t]]??null;const n=t.charAt(0);return fc[n]?fc[n]:["","","","","","","","","",""].includes(n)?n:mc[n]?Af[mc[n]]??null:["","","","","","","","","","","",""].includes(n)?Af[n]??null:null}function N8(e,t){const n=kc[e],s=kc[t];if(!n||!s)return"";let o;s===n?o="":s===T8[n]?o="":s===k8[n]?o="":s===A8[n]?o="":s===j8[n]?o="":o="";const l=l2(e)===l2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function O8(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function Qm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=s.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=s.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function D8(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e??{})){const o=kc[hd(n)];o&&s>0&&(t[o]+=s)}return Qm(t)}function M8(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e??{})){if(o<=0)continue;const l=hd(s);if(!l)continue;const u=N8(t,l);n[u]+=o}return n}function C8(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e)){const o=O8(n);t[o]+=s}return Qm(t)}function Xg(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);return s?`${fc[s[1]]}${mc[s[2]]}`:""}function c2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,s)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${fc[u[1]]}${mc[u[2]]}`:s<=2?"--":""})}function R8(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const s of e){if(!s)continue;const o=kc[s.charAt(0)];o&&(n[o]=!0);{const l=BA[s.charAt(1)];l&&(n[l]=!0)}}return n}function L8(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const s=kc[n.charAt(0)],o=BA[n.charAt(1)];s&&(t[s]+=10),o&&(t[o]+=6)}return t}function Jg(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const B8=["","","","","","","","","",""];function P8(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=hd(n);o&&(t[o]=(t[o]??0)+s)}return t}function $8(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const s of B8){const o=kc[s],l=`${s}${o}`;n[l]=Math.max(0,Math.round(e[s]??0))}return n}const I8={natal:50,dae:30,se:20,wol:7,il:3};function z8(e){const t={};for(const{kind:s,bare:o}of e){const l=I8[s]??0;if(l<=0)continue;const u=Qm(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((s,o)=>s+o,0);if(n>0)for(const s of Object.keys(t))t[s]=t[s]/n*100;return t}function U8(e){if(!e)return[];const t=hd(e.charAt(0)),n=hd(e.charAt(1));return[t,n].filter(Boolean)}function jf(e){const t=U8(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function H8({data:e,pillars:t,lunarPillars:n,daewoonGz:s}){const o=Wn(Ee=>Ee.settings),[l,u]=C.useState("   "),[f,m]=C.useState(""),[p,y]=C.useState(!0),{date:_,yearGZ:x,monthGZ:S,dayGZ:T}=Yr(),k=C.useMemo(()=>Fe(x),[x]),A=C.useMemo(()=>Fe(S),[S]),M=C.useMemo(()=>Fe(T),[T]),P=Ed(e,e?.mingSikType),N=C.useMemo(()=>{if(!P?.length)return 0;const Ee=P.findIndex(($e,Ce)=>{const Pe=P[Ce+1]?.at;return _>=$e.at&&(!Pe||_<Pe)});return Ee!==-1?Ee:_<P[0].at?0:P.length-1},[P,_]),D=C.useMemo(()=>{const Ee=s??P?.[N]?.gz??"";return Fe(Ee)||null},[s,P,N]),{manualHour:R}=vd(),z=e.mingSikType??"/",F=C.useMemo(()=>c2(t),[t]),q=C.useMemo(()=>c2(n),[n]),Y=C.useMemo(()=>{const Ee=[...F];return(!Ee[3]||Ee[3]==="")&&R&&(Ee[3]=R.stem+R.branch),Ee},[F,R]),ne=C.useMemo(()=>{const Ee=[...q];return(!Ee[3]||Ee[3]==="")&&R&&(Ee[3]=R.stem+R.branch),Ee},[q,R]),K=C.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),$e=Number(e.birthDay?.slice(4,6)),Ce=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite($e)||!Number.isFinite(Ce))return null;const Pe=new Date(Ee,$e-1,Ce,12,0,0,0),Ie=Xg(dt(Pe)||""),pe=Xg(jt(Pe)||""),Le=Xg(xt(Pe,z)||"");return[Ie,pe,Le,""]},[e.birthDay,z]),Z=Jg(Y),ee=Jg(ne),[Q]=C.useState("solar"),ve=Q==="lunar"?ee?"lunar":Z?"solar":"lunar":Z?"solar":ee?"lunar":"solar",W=C.useMemo(()=>{const $e=[...ve==="lunar"?ee?ne:Z?Y:K??["","","",""]:Z?Y:ee?ne:K??["","","",""]];return(!$e[3]||$e[3]==="")&&R&&($e[3]=R.stem+R.branch),$e},[ve,Z,ee,Y,ne,K,R]),ie=C.useMemo(()=>R?R.stem+R.branch:W[3]||"",[R,W]),te=C.useMemo(()=>({dae:f!==""?D??null:null,se:f===""||f===""||f===""?k??null:null,wol:f===""||f===""?A??null:null,il:f===""?M??null:null}),[f,D,k,A,M]),de=C.useMemo(()=>OA({natal:W,tab:f,chain:te,hourKey:ie}),[W,f,te,ie]),X=C.useMemo(()=>{if(!de)return null;const Ee=P8(de.perStemElementScaled),$e=te.dae?jf(te.dae):{},Ce=te.se?jf(te.se):{},Pe=te.wol?jf(te.wol):{},Ie=te.il?jf(te.il):{},pe=z8([{kind:"natal",bare:Ee},{kind:"dae",bare:$e},{kind:"se",bare:Ce},{kind:"wol",bare:Pe},{kind:"il",bare:Ie}]),Le=Qm(pe),ue=$8(Le),me=M8(pe,de.dayStem),ze=C8(me),Be=D8(pe);return{perStemAugBare:pe,perStemAugFull:ue,elemPct100:Be,totalsMain:ze,totalsSub:me}},[de,te]),U=C.useMemo(()=>R8(W),[W]),B=C.useMemo(()=>["","","","",""].some(Ee=>!U[Ee]),[U]),V=X?.elemPct100??de?.elementPercent100??L8(W),J=C.useMemo(()=>{if(!de||!X)return[];const Ee=oA(de.dayStem);return Object.entries(X.totalsMain).map(([$e,Ce])=>({name:$e,value:Ce,color:Ee[$e]}))},[de,X]),I=X?.elemPct100??{:0,:0,:0,:0,:0},G=X?.totalsSub??null,oe=C.useMemo(()=>R?R.stem+R.branch:W[3]||"",[R,W]),ce=C.useMemo(()=>[f,D??"",k??"",A??"",M??"",_?.toISOString?.()??"",oe].join("|"),[f,D,k,A,M,_,oe]),le=C.useMemo(()=>{const Ee=G?Object.entries(G).sort(([Ce],[Pe])=>Ce.localeCompare(Pe)).map(([Ce,Pe])=>`${Ce}:${Pe}`).join(","):"none",$e=J.map(Ce=>`${Ce.name}:${Ce.value}`).join(",");return`${ce}||${W.join("")}||${$e}||${Ee}`},[ce,W,J,G]),_e=typeof NS=="function"?NS(W,de?.totals):null,Ae=C.useMemo(()=>{const $e=(_e?.ordered??[]).map(Ie=>{const pe=Ie.element??"",Le=/||wood/i.test(pe)?"":/||fire/i.test(pe)?"":/||earth/i.test(pe)?"":/||metal/i.test(pe)?"":/||water/i.test(pe)?"":null,ue=typeof Ie.score=="number"?Ie.score:Le?V[Le]??0:0,me=Array.isArray(Ie.reasons)?Ie.reasons:[];return{element:pe,elNorm:Le,score:ue,reasons:me}}),Ce=Ie=>Ie?U[Ie]:!1,Pe=p?$e.map(Ie=>Ie.elNorm&&!Ce(Ie.elNorm)?{...Ie,score:0,reasons:[...Ie.reasons,":    0"]}:Ie):$e;return Pe.sort((Ie,pe)=>{const Le=Ce(Ie.elNorm)?1:0,ue=Ce(pe.elNorm)?1:0;return p&&Le!==ue?ue-Le:(pe.score??0)!==(Ie.score??0)?(pe.score??0)-(Ie.score??0):(Ie.elNorm??Ie.element).localeCompare(pe.elNorm??pe.element)}),Pe},[_e,p,V,U]),je=C.useMemo(()=>Math.max(0,...Ae.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[Ae]);function Me(Ee){return NA(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return Jg(W)?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:R9.map(Ee=>g.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(f===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),g.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>g.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&g.jsx(n9,{pillars:W,daewoon:D||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:M||void 0,tab:f},`harm-${f}-${oe}`),l==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(qP,{data:J,revKey:le,perStemElementScaled:X?.perStemAugFull,elementPercent:I,dayStem:W[2]?.charAt(0)??null},`pentagon-${le}`),g.jsx(VP,{value:Me(W)}),g.jsx(s$,{natal:W}),g.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"text-sm font-bold",children:" "}),B&&g.jsxs("button",{type:"button",onClick:()=>y(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),g.jsx("ul",{className:"space-y-2",children:Ae.map((Ee,$e)=>g.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[$e+1,""]}),g.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:g.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Ce,Pe)=>g.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Ce},Pe))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&g.jsx(V6,{pillars:W,daewoon:D||void 0,sewoon:k||void 0,wolwoon:A||void 0,ilwoon:M||void 0,tab:f},`shin-${f}-${oe}`),l==="  "&&g.jsx(S8,{unified:de,pillars:W,tab:f,mapping:o.hiddenStemMode},`gyeok-${f}-${oe}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const G8=!1,u2=e=>e<10?`0${e}`:`${e}`,F8=e=>typeof e=="string"&&e.length>=2,q8=e=>Array.isArray(e)&&e.length===4&&e.every(F8);function Y8(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(s==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${u2(p.getMonth()+1)}${u2(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function Z8({data:e}){const[t,n]=C.useState("un"),s=C.useMemo(()=>{try{const f=Y8(e);return Wa(f)}catch{return new Date}},[e]),o=C.useMemo(()=>Vm(e,s),[e,s]),l=!e.birthTime||e.birthTime==="",u=C.useMemo(()=>{try{const f=dt(o,e.birthPlace?.lon),m=jt(o,e.birthPlace?.lon),p=xt(o,e.mingSikType),y=l?"":$s(o,e.mingSikType);return[f,m,p,y]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(jP,{data:e}),t==="myoun"&&g.jsx(PP,{data:e}),t==="report"&&g.jsx(H8,{data:e,pillars:q8(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),d2=e=>{const t=K8(e);return t.charAt(0).toUpperCase()+t.slice(1)},PA=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),W8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...f},m)=>C.createElement("svg",{ref:m,...X8,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:PA("lucide",o),...!l&&!W8(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>C.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=(e,t)=>{const n=C.forwardRef(({className:s,...o},l)=>C.createElement(J8,{ref:l,iconNode:t,className:PA(`lucide-${V8(d2(e))}`,`lucide-${e}`,s),...o}));return n.displayName=d2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],eI=ps("chevron-down",Q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nI=ps("chevron-up",tI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sI=ps("circle-x",rI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],aI=ps("heart-handshake",iI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],lI=ps("house",oI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uI=ps("log-out",cI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],hI=ps("menu",dI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mI=ps("plus",fI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gI=ps("settings",pI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],yI=ps("square-user",bI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],h2=ps("star",vI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xI=ps("user-plus",_I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$A=ps("x",wI);function SI({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(hI,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(xI,{size:18})}),g.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(yI,{size:18})})]})]})})}function EI(e){C.useEffect(()=>{const t=e??C2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");R2(t),e&&$f(e)},[e])}const IA=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function TI(e){return typeof e=="string"&&IA.includes(e)}function Qg(e){const t=Array.isArray(e)?e.filter(TI):[],n=IA.filter(s=>!t.includes(s));return[...t,...n]}function kI({open:e,onClose:t}){const{settings:n,setSettings:s,saveToServer:o}=Wn(),l=C.useMemo(()=>Qg(n.sectionOrder),[n.sectionOrder]),u=C.useMemo(()=>({...rl,...n,sectionOrder:Qg(n.sectionOrder)}),[n]),[f,m]=C.useState(l),[p,y]=C.useState(u),[_,x]=C.useState(null),[S,T]=C.useState(!1),k=C.useCallback(()=>x(null),[]),A=p.theme??n.theme??"dark";EI(A),C.useEffect(()=>{$f(A)},[A]),C.useEffect(()=>{if(!e)return;const R=Qg(n.sectionOrder);S||(y({...rl,...n,sectionOrder:R}),m(R),T(!1))},[e,n,S]);const M=(R,z)=>{y(F=>{const q={...F,[R]:z};return R==="theme"&&$f(z),T(!0),q})},P=()=>{const R={...rl,...p,sectionOrder:f};try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}s(R),R.theme&&$f(R.theme),o(!0),x(" "),T(!1),t()},N=R=>{const{destination:z,source:F}=R;if(!z||z.index===F.index)return;const q=Array.from(f),[Y]=q.splice(F.index,1);q.splice(z.index,0,Y),m(q)},D=R=>{switch(R){case"theme":return g.jsx(Js,{title:"",children:g.jsx(AI,{value:p.theme??"dark",onChange:z=>M("theme",z)})});case"hiddenStem":return g.jsx(Js,{title:"  ",children:g.jsx(sc,{value:p.hiddenStem,onChange:z=>M("hiddenStem",z),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Js,{title:" ",children:g.jsx(sc,{value:p.hiddenStemMode,onChange:z=>M("hiddenStemMode",z),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Js,{title:"",children:g.jsx(sc,{value:p.sinsalMode,onChange:z=>M("sinsalMode",z),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Js,{title:"",children:g.jsx(sc,{value:p.sinsalBase,onChange:z=>M("sinsalBase",z),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Js,{title:" ",children:g.jsx(Vo,{label:" ",checked:!!p.sinsalBloom,onChange:z=>M("sinsalBloom",z)})});case"exposure":return g.jsx(Js,{title:" ",children:g.jsx(sc,{value:p.exposure,onChange:z=>M("exposure",z),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Js,{title:" ",children:g.jsx(sc,{value:p.charType,onChange:z=>M("charType",z),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Js,{title:" ",children:g.jsx(Vo,{label:" ",checked:!!p.thinEum,onChange:z=>M("thinEum",z)})});case"visibility":return g.jsx(Js,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Vo,{label:" ",checked:!!p.showSipSin,onChange:z=>M("showSipSin",z)}),g.jsx(Vo,{label:" ",checked:!!p.showSibiUnseong,onChange:z=>M("showSibiUnseong",z)}),g.jsx(Vo,{label:" ",checked:!!p.showSibiSinsal,onChange:z=>M("showSibiSinsal",z)}),g.jsx(Vo,{label:" ",checked:!!p.showNabeum,onChange:z=>M("showNabeum",z)})]})});case"difficultyMode":return g.jsx(Js,{title:" UP ver.",children:g.jsx(Vo,{label:" UP ",checked:!!p.difficultyMode,onChange:z=>M("difficultyMode",z)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:P,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&g.jsx(wd,{onDragEnd:N,children:g.jsx(sl,{droppableId:"settings-sections",children:R=>g.jsxs("ul",{ref:R.innerRef,...R.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[f.map((z,F)=>g.jsx(Ec,{draggableId:z,index:F,children:q=>g.jsxs("li",{ref:q.innerRef,...q.draggableProps,...q.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsx("div",{className:"flex-1 min-w-0",children:D(z)})]})},z)),R.placeholder]})})})]}),_&&g.jsx(Pk,{message:_,onClose:k,ms:1800})]})}function AI({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Js({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function sc({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),children:n.map(s=>{const o=e===s.value;return g.jsx("button",{type:"button",onClick:()=>t(s.value),className:`px-3 py-1 text-sm transition-colors ${o?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:s.label},s.value)})})}function Vo({label:e,checked:t,onChange:n}){const s=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:s,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:s,type:"checkbox",checked:t,onChange:o=>n(o.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function jI({onShowToday:e,onShowCouple:t}){const[n,s]=C.useState(!1),[o,l]=C.useState(!1),[u,f]=C.useState(!1),m=async()=>{if(!o){l(!0);try{await it.auth.signOut(),window.location.reload()}catch(p){console.error(p),alert(" .  ."),l(!1)}}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(Nf,{icon:g.jsx(lI,{size:22}),label:" ",onClick:e}),g.jsx(Nf,{icon:g.jsx(aI,{size:22}),label:"",onClick:t}),g.jsx(Nf,{icon:g.jsx(gI,{size:22}),label:"",onClick:()=>s(!0)}),g.jsx(Nf,{icon:g.jsx(uI,{size:22}),label:"",onClick:()=>f(!0),disabled:o})]})}),g.jsx(kI,{open:n,onClose:()=>s(!1)}),u&&g.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/50",onClick:()=>f(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 p-6 rounded-xl shadow-xl",onClick:p=>p.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:" ?"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",className:"flex-1 py-2 rounded-lg bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 cursor-pointer",onClick:()=>f(!1),children:""}),g.jsx("button",{type:"button",className:"flex-1 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 cursor-pointer",onClick:()=>{f(!1),m()},children:""})]})]})})]})}function Nf({icon:e,label:t,onClick:n,disabled:s}){return g.jsxs("button",{onClick:n,disabled:s,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}function NI(e,t){const[n,s]=C.useState(()=>{if(typeof window>"u")return{};try{const q=localStorage.getItem(Z1);return q?JSON.parse(q):{}}catch{return{}}});C.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(Z1,JSON.stringify(n))}catch{}},[n]);const[o,l]=C.useState({}),[u,f]=C.useState({}),[m,p]=C.useState(""),[y,_]=C.useState(!1),[x,S]=C.useState(()=>{const q=Zf(),Y=Vf();return Y.length?Zu(q,Y):q}),T=C.useRef(!1),k=C.useRef(!1);C.useEffect(()=>{(async()=>{if(y)return;const{data:{user:Y},error:ne}=await it.auth.getUser();if(ne||!Y)return;try{if(!k.current){const{data:W,error:ie}=await it.from("user_custom_folders").select("folder_name").eq("user_id",Y.id);if(ie?.code==="PGRST205")k.current=!0;else if(!ie&&W){const te=W.map(de=>de.folder_name?de.folder_name.trim():"").filter(de=>de!=="");Py(te)}else ie&&console.error("load custom folders from server error:",ie)}}catch(W){console.error("load custom folders exception:",W)}const{data:K,error:Z}=await it.from("user_folder_order").select("folder_name, sort_order").eq("user_id",Y.id).order("sort_order",{ascending:!0,nullsFirst:!0});if(Z){console.error("load folder order from server error:",Z),_(!0);return}const ee=Zf(),Q=(K??[]).map(W=>W.folder_name?String(W.folder_name):"").filter(W=>W.trim()!==""),ve=Q.length?Zu(ee,Q):Zu(ee,Vf());S(ve),Q.length&&dc(Q),_(!0)})()},[y]);const A=C.useCallback(async q=>{const{data:{user:Y},error:ne}=await it.auth.getUser();if(ne||!Y)return;const K=q.filter(ee=>typeof ee=="string"&&ee.trim()!=="").map((ee,Q)=>({user_id:Y.id,folder_name:ee.trim(),sort_order:Q+1,updated_at:new Date().toISOString()}));if(!K.length){await it.from("user_folder_order").delete().eq("user_id",Y.id);return}const{error:Z}=await it.from("user_folder_order").upsert(K,{onConflict:"user_id,folder_name"});Z&&console.error("save folder order to server error:",Z)},[]),M=C.useCallback(async q=>{if(k.current)return;const{data:{user:Y},error:ne}=await it.auth.getUser();if(ne||!Y)return;const{error:K}=await it.from("user_custom_folders").upsert({user_id:Y.id,folder_name:q,updated_at:new Date().toISOString()});K&&(K.code==="PGRST205"?k.current=!0:console.error("save custom folder error:",K))},[]),P=C.useCallback(async q=>{if(k.current)return;const{data:{user:Y},error:ne}=await it.auth.getUser();if(ne||!Y)return;const{error:K}=await it.from("user_custom_folders").delete().eq("user_id",Y.id).eq("folder_name",q);K&&(K.code==="PGRST205"?k.current=!0:console.error("delete custom folder error:",K))},[]);C.useEffect(()=>{if(typeof window>"u")return;const q=()=>{if(T.current){T.current=!1;return}const Y=Zf(),ne=Vf(),K=ne.length?Zu(Y,ne):Y;S(K)};return window.addEventListener(ol,q),()=>window.removeEventListener(ol,q)},[]),C.useEffect(()=>{l(q=>{const Y={...q};for(const ne of x)Y[ne]===void 0&&(Y[ne]=!0);return Y})},[x]);const{grouped:N,unassignedItems:D}=C.useMemo(()=>{const q={};x.forEach(K=>{q[K]=[]});const Y=[],ne=new Set;for(const K of e){if(!K.id||ne.has(K.id))continue;const Z=K.folder;Z&&x.includes(Z)?q[Z].push(K):Y.push(K),ne.add(K.id)}return{grouped:q,unassignedItems:Y}},[e,x]),R=C.useCallback(q=>{const{source:Y,destination:ne,type:K}=q;if(!ne||K!=="FOLDER")return;const Z=Y.index,ee=ne.index;Z!==ee&&S(Q=>{if(!Q.length)return Q;const ve=[...Q],[W]=ve.splice(Z,1);return ve.splice(ee,0,W),T.current=!0,dc(ve),A(ve),ve})},[A]);return{folderFavMap:n,setFolderFavMap:s,folderOpenMap:o,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:f,newFolderName:m,setNewFolderName:p,orderedFolders:x,grouped:N,unassignedItems:D,handleDragEnd:R,createFolder:q=>{const Y=q.trim();!Y||Y===pn||(Bk(Y),M(Y),S(ne=>{if(ne.includes(Y))return ne;const K=[...ne,Y];return dc(K),A(K),A(K),K}))},deleteFolder:q=>{e.forEach(Y=>{Y.folder===q&&t(Y.id,{folder:void 0})}),s(Y=>{const ne={...Y};return delete ne[q],ne}),S(Y=>{const ne=Y.filter(K=>K!==q);return dc(ne),A(ne),A(ne),(async()=>{const{data:{user:K},error:Z}=await it.auth.getUser();Z||!K||await it.from("user_folder_order").delete().eq("user_id",K.id).eq("folder_name",q)})(),ne}),Ck.includes(q)?a7(q):(i7(q),P(q))},UNASSIGNED_LABEL:pn}}function f2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),s=e.slice(4,6),o=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${s} ${o} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${s} ${o} ( )`:`${n} ${s} ${o}`}function OI(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(f=>u.some(m=>f.endsWith(m))),s=n(["","",""]),o=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:s&&o?`${s} ${o}`:s||e}function qb(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function DI(e,t,n){if(n)return"";if((e??"").trim()){const l=new Date(t);return zb(l)}const o=t instanceof Date?t:new Date(t);return Number.isNaN(o.getTime())?"":zb(o)}const MI="list:__unassigned__",CI=e=>`list:${e}`,m2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},RI="myeoun:folder-updated",p2=()=>{typeof window>"u"||window.dispatchEvent(new Event(RI))};function LI(e){const t=qb(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const s=Number(n.slice(0,4)),o=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!pm(s,o,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),f=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+f,y=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(y.getTime()))return t;new Date(y.getTime()-3600*1e3);const _=Gm({...e,birthTime:p});return qb({...e,..._})}function BI({open:e,onClose:t,onView:n,onAddNew:s,onEdit:o,onDeleteView:l}){const{list:u,remove:f,update:m,reorder:p}=ii(),{folderFavMap:y,setFolderFavMap:_,folderOpenMap:x,setFolderOpenMap:S,memoOpenMap:T,setMemoOpenMap:k,newFolderName:A,setNewFolderName:M,orderedFolders:P,grouped:N,unassignedItems:D,handleDragEnd:R,createFolder:z,deleteFolder:F,UNASSIGNED_LABEL:q}=NI(u,m),[Y,ne]=C.useState(""),[K,Z]=C.useState("name"),ee=/\S/.test(Y),{filteredUnassigned:Q,filteredGrouped:ve,totalMatches:W}=C.useMemo(()=>{const B=le=>le.toLowerCase().replace(/\s+/g," ").trim();if(!ee)return{filteredUnassigned:D,filteredGrouped:N,totalMatches:D.length+Object.values(N).reduce((le,_e)=>le+_e.length,0)};const V=B(Y),J=le=>{const _e=String(le.birthDay??"").trim();let Ae="",je="",Me="";if(/^\d{8}$/.test(_e))Ae=_e.slice(0,4),je=_e.slice(4,6),Me=_e.slice(6,8);else{const Ie=new Date(_e);if(!Number.isNaN(Ie.getTime())){const pe=Ie.getFullYear(),Le=Ie.getMonth()+1,ue=Ie.getDate();Ae=String(pe).padStart(4,"0"),je=String(Le).padStart(2,"0"),Me=String(ue).padStart(2,"0")}}const Ee=Ae&&je&&Me?`${Ae}${je}${Me}`:"",$e=Ae&&je&&Me?`${Ae}-${je}-${Me}`:"",Ce=Ae&&je&&Me?`${Ae}.${je}.${Me}`:"",Pe=f2(le.birthDay,le.birthTime);return B([Ee,$e,Ce,Pe].filter(Boolean).join(" "))},I=le=>K==="name"?B(le.name??"").includes(V):K==="ganji"?B(qb(le)??"").includes(V):J(le).includes(V),G=D.filter(I),oe={};let ce=G.length;for(const le of P){const _e=(N[le]||[]).filter(I);oe[le]=_e,ce+=_e.length}return{filteredUnassigned:G,filteredGrouped:oe,totalMatches:ce}},[Y,K,ee,D,N,P]),ie=C.useRef(null),te=C.useRef(null);C.useEffect(()=>{if(te.current==null)return;const B=ie.current;B&&(B.scrollTop=te.current,te.current=null)},[u,P]);const de=B=>({...B,transition:B?.transform?"transform 0.15s ease":"none"}),X=(B,V)=>{const J=LI(B),I=OI(B.birthPlace?.name),G=`item:${B.id}`,oe=!!T[B.id],ce=B.gender===""?"":B.gender===""?"":B.gender,le=!B.birthTime||B.birthTime==="",_e=DI(B.correctedLocal,B.corrected,le),Ae=String(B.birthDay).trim();let je=NaN;if(/^\d{8}$/.test(Ae)){const Ce=`${Ae.slice(0,4)}-${Ae.slice(4,6)}-${Ae.slice(6,8)}`,Pe=new Date(Ce);Number.isNaN(Pe.getTime())||(je=Pe.getFullYear())}else{const Ce=new Date(Ae);Number.isNaN(Ce.getTime())||(je=Ce.getFullYear())}function Me(Ce,Pe){return Number.isNaN(Ce)?0:Pe-Ce+1}const Ee=new Date().getFullYear(),$e=Me(je,Ee);return g.jsx(Ec,{draggableId:G,index:V,isDragDisabled:ee,children:Ce=>g.jsx("li",{ref:Ce.innerRef,...Ce.draggableProps,...Ce.dragHandleProps,style:de(Ce.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[B.name," (",$e,", ",ce,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:B.relationship?B.relationship:" "}),g.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[f2(B.birthDay,B.birthTime),","," ",B.calendarType==="lunar"?"":""]}),(I||_e)&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[I,_e&&g.jsxs("span",{className:"opacity-70",children:[" "," "," ",le?"":_e]})]}),J&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:J}),B.memo&&B.memo.trim()!==""&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Pe=>{Pe.stopPropagation(),k(Ie=>({...Ie,[B.id]:!Ie[B.id]}))},children:oe?" ":" "}),g.jsx("div",{className:oe?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:B.memo})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.folder??q,onClick:Pe=>Pe.stopPropagation(),onChange:Pe=>{Pe.stopPropagation();const Ie=Pe.target.value,pe=Ie===q?void 0:Ie;m(B.id,{folder:pe})},children:[q,...P].map(Pe=>g.jsx("option",{value:Pe,children:Pe},Pe))}),g.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.mingSikType??"/",onClick:Pe=>Pe.stopPropagation(),onChange:Pe=>{Pe.stopPropagation();const Ie=Pe.target.value,pe={...B,mingSikType:Ie},Le=Gm(pe);m(B.id,{mingSikType:Ie,...Le}),n({...pe,...Le}),t()},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),n(B),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),g.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),o?.(B)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),g.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),confirm(`'${B.name}'  ?`)&&(f(B.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),g.jsx("button",{type:"button",onClick:Pe=>{Pe.stopPropagation();const Ie=!B.favorite;m(B.id,{favorite:Ie});const pe=B.folder??"__unassigned__",Le={__unassigned__:[]};P.forEach(Be=>{Le[Be]=[]}),u.forEach(Be=>{const Ue=Be.folder??"__unassigned__";Le[Ue]||(Le[Ue]=[]),Le[Ue].push(Be)});const me=(Le[pe]??[]).filter(Be=>Be.id!==B.id);Ie?Le[pe]=[{...B,favorite:Ie},...me]:Le[pe]=[...me,{...B,favorite:Ie}];const ze=[...Le.__unassigned__,...P.flatMap(Be=>Le[Be]??[])];p(ze)},className:`ml-auto p-1 rounded cursor-pointer ${B.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(h2,{size:16,fill:B.favorite?"currentColor":"none"})})]})]})})},G)},U=B=>{const{type:V,source:J,destination:I,draggableId:G}=B;if(!I||ee)return;const oe=ie.current;if(oe&&(te.current=oe.scrollTop),V==="FOLDER"){R(B);return}if(V==="ITEM"){if(!G.replace(/^item:/,""))return;const le=m2(J.droppableId),_e=m2(I.droppableId),Ae=le??"__unassigned__",je=_e??"__unassigned__",Me={__unassigned__:[...D]};P.forEach(pe=>{Me[pe]=[...N[pe]||[]]});const Ee=Me[Ae]??[];if(!Ee[J.index])return;const[$e]=Ee.splice(J.index,1),Ce={...$e,folder:_e??void 0},Pe=Me[je]??[];Pe.splice(I.index,0,Ce),Me[Ae]=Ee,Me[je]=Pe;const Ie=[...Me.__unassigned__,...P.flatMap(pe=>Me[pe]??[])];p(Ie)}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:()=>{s(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[g.jsx(mI,{size:16})," "]}),g.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:g.jsx($A,{size:22})})]})]}),g.jsx(wd,{onDragEnd:U,children:g.jsxs("div",{ref:ie,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:K,onChange:B=>Z(B.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:Y,onChange:B=>ne(B.target.value),placeholder:K==="name"?" ":K==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),Y&&g.jsx("button",{type:"button",onClick:()=>ne(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(sI,{size:16})})]}),ee&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[W,""]})]})}),g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:A,onChange:B=>M(B.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:B=>B.stopPropagation()}),g.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:B=>{B.stopPropagation();const V=A.trim();V&&(z(V),M(""),p2())},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:ee?"   .":"/      ."}),g.jsx(sl,{droppableId:MI,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:B=>{const V=Q;return g.jsx("div",{ref:B.innerRef,...B.droppableProps,className:"mb-6",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[V.map((J,I)=>X(J,I)),B.placeholder]})})}}),g.jsx(sl,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:B=>g.jsxs("div",{ref:B.innerRef,...B.droppableProps,children:[P.map((V,J)=>{const I=CI(V),G=ve[V]||[],oe=!!x[V],ce=!!y[V];return g.jsx(Ec,{draggableId:`folder-${V}`,index:J,isDragDisabled:ee,children:le=>g.jsxs("div",{ref:le.innerRef,...le.draggableProps,...le.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:_e=>{_e.stopPropagation(),S(Ae=>({...Ae,[V]:!oe}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[oe?g.jsx(nI,{size:16}):g.jsx(eI,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:V})]}),g.jsx("button",{type:"button",onClick:_e=>{_e.stopPropagation(),_(Ae=>({...Ae,[V]:!Ae[V]}))},className:`p-1 rounded cursor-pointer ${ce?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(h2,{size:16,fill:ce?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[G.length,""]}),g.jsx("button",{type:"button",onClick:_e=>{if(_e.stopPropagation(),y[V]){alert(`'${V}'    .
   .`);return}confirm(`'${V}'  ?
(   )`)&&(F(V),p2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),oe&&g.jsx(sl,{droppableId:I,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:_e=>g.jsx("div",{ref:_e.innerRef,..._e.droppableProps,className:"mt-2",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[G.map((Ae,je)=>X(Ae,je)),_e.placeholder]})})})]})},`folder-${V}`)}),B.placeholder]})})]})})]})]})}const g2="ms_folders",eb="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",PI="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",$I="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Wi="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",II="text-xs text-neutral-500 dark:text-neutral-400",Of="accent-violet-600 dark:accent-violet-400",b2="accent-violet-600 dark:accent-violet-400",ep="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",zI=`${ep} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,UI=`${ep} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,y2=`${ep} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,HI=`${ep} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function GI({item:e,onClose:t}){const{list:n,update:s,remove:o}=ii(),[l,u]=C.useState(!1),[f,m]=C.useState({...e,calendarType:e.calendarType??"solar"}),[p,y]=C.useState(!e.birthTime||e.birthTime===""),[_,x]=C.useState(!e.birthPlace||e.birthPlace.name===""),S=C.useMemo(()=>["","","","","",""],[]),[T,k]=C.useState([]);C.useEffect(()=>{try{const R=JSON.parse(localStorage.getItem(g2)||"[]");Array.isArray(R)&&k(R)}catch{}},[]);const A=C.useMemo(()=>{const R=Array.from(new Set(n.map(q=>q.folder).filter(Boolean))),z=new Set([...S,...T,...R]),F=Array.from(z).sort((q,Y)=>q.localeCompare(Y));return[pn,...F]},[n,T,S]),M=()=>{m({...e,calendarType:e.calendarType??"solar"}),y(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},P=()=>{if(!f.name||f.name.trim()==="")return" .";if(!f.birthDay||!/^\d{8}$/.test(f.birthDay))return" YYYYMMDD  .";const R=Number(f.birthDay.slice(0,4)),z=Number(f.birthDay.slice(4,6)),F=Number(f.birthDay.slice(6,8));if(f.calendarType==="lunar")try{br(R,z,F)}catch(q){return q instanceof Error?q.message:"   ."}else{const q=new Date(R,z-1,F);if(q.getFullYear()!==R||q.getMonth()+1!==z||q.getDate()!==F)return"   ."}if(!p){if(!f.birthTime||!/^\d{4}$/.test(f.birthTime))return"  00002359 (4) .";const q=Number(f.birthTime.slice(0,2)),Y=Number(f.birthTime.slice(2,4));if(q<0||q>23||Y<0||Y>59)return"  00002359  ."}return!_&&!f.birthPlace?"   '' .":null},N=()=>{const R=P();if(R){alert(R);return}const z=Number(f.birthDay.slice(0,4)),F=Number(f.birthDay.slice(4,6)),q=Number(f.birthDay.slice(6,8));let Y=z,ne=F,K=q;if(f.calendarType==="lunar"){const G=br(z,F,q);Y=G.getFullYear(),ne=G.getMonth()+1,K=G.getDate()}const Z=p?4:Number((f.birthTime??"0430").slice(0,2)),ee=p?30:Number((f.birthTime??"0430").slice(2,4)),Q=_||!f.birthPlace||f.birthPlace.lon===0?127.5:f.birthPlace.lon,ve=new Date(Y,ne-1,K,Z,ee,0,0),W=!f.birthPlace||typeof f.birthPlace=="object"&&f.birthPlace.name==="",ie=ul(ve,Q,W),de=dt(ie,Q).charAt(0),U=((G,oe)=>{const le=["","","","","","","","","",""].includes(G),_e=(oe??"")==="";return le?_e?"forward":"backward":_e?"backward":"forward"})(de,f.gender??""),B=il(f.folder===pn?void 0:f.folder),V={...e,name:(f.name??"").trim()||"",birthDay:f.birthDay,birthTime:p?"":f.birthTime??"0430",gender:f.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:f.birthPlace??{name:"",lat:0,lon:127.5},relationship:f.relationship??"",memo:f.memo??"",folder:B,calendarType:f.calendarType??"solar",mingSikType:f.mingSikType??"/",DayChangeRule:(f.mingSikType??"/")===""?"":"",dir:U,corrected:ie,correctedLocal:"",ganji:""},J=Gm(V),I={...V,...J};if(I.folder&&!S.includes(I.folder)&&!T.includes(I.folder)){const G=[...T,I.folder];k(G),localStorage.setItem(g2,JSON.stringify(G))}s(e.id,I),u(!1),t&&t()},D=()=>{confirm(`'${e.name}'  ?`)&&o(e.id)};return l?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:""}),g.jsx("input",{className:eb,value:f.name||"",onChange:R=>m({...f,name:R.target.value}),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:" (YYYYMMDD)"}),g.jsx("input",{className:eb,value:f.birthDay||"",onChange:R=>m({...f,birthDay:R.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"calendarType",checked:f.calendarType==="solar",onChange:()=>m({...f,calendarType:"solar"}),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"calendarType",checked:f.calendarType==="lunar",onChange:()=>m({...f,calendarType:"lunar"}),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),f.calendarType==="lunar"&&f.birthDay?.length===8&&g.jsx("span",{className:II,children:(()=>{try{const R=Number(f.birthDay.slice(0,4)),z=Number(f.birthDay.slice(4,6)),F=Number(f.birthDay.slice(6,8)),q=br(R,z,F);return`  ${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}-${String(q.getDate()).padStart(2,"0")}`}catch(R){const z=R instanceof Error?R.message:void 0;return`  ${z?`: ${z}`:""}`}})()})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:"  (HHMM)"}),g.jsx("input",{className:`${eb} disabled:opacity-50`,value:p?"":f.birthTime||"",onChange:R=>m({...f,birthTime:R.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:b2,checked:p,onChange:R=>y(R.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(R=>{const z=`editor_ming_${R}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"mingSikType",checked:(f.mingSikType??"")===R,onChange:()=>m({...f,mingSikType:R}),id:z}),g.jsx("label",{htmlFor:z,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:R})]},R)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(R=>{const z=`editor_gender_${R}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"gender",value:R,checked:f.gender===R,onChange:F=>m({...f,gender:F.target.value}),id:z}),g.jsx("label",{htmlFor:z,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:R})]},R)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:" "}),g.jsx(_T,{onSelect:R=>m({...f,birthPlace:R}),value:_?"":f.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:b2,checked:_,onChange:R=>x(R.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:""}),g.jsx(Mk,{value:f.relationship||"",onChange:R=>m({...f,relationship:R})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:""}),g.jsx("select",{className:PI,value:f.folder??pn,onChange:R=>{const z=R.target.value;m(z===pn?{...f,folder:void 0}:{...f,folder:z})},children:A.map(R=>g.jsx("option",{value:R===pn?pn:R,children:R},R))})]}),g.jsxs("div",{children:[g.jsx("label",{className:Wi,children:""}),g.jsx("textarea",{className:$I,value:f.memo||"",onChange:R=>m({...f,memo:R.target.value}),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:y2,onClick:()=>{M(),u(!1)},children:""}),g.jsx("button",{className:HI,onClick:N,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:zI,onClick:()=>u(!0),children:""}),g.jsx("button",{className:UI,onClick:D,children:""}),t&&g.jsx("button",{className:y2,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??pn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}const FI="".split(",").map(e=>e.trim()).filter(Boolean).concat(["15b517b3-3d97-41a6-ae17-563abd163a36"]),tb=20;function Df({label:e,value:t,hint:n}){return g.jsxs("div",{className:"flex-1 min-w-[160px] rounded-xl border border-neutral-800 bg-neutral-900 px-4 py-3 text-white shadow",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:e}),g.jsx("div",{className:"text-2xl font-semibold mt-1",children:t}),n&&g.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n})]})}function qI(){const[e,t]=C.useState(!1),[n,s]=C.useState(!1),[o,l]=C.useState(!1),[u,f]=C.useState([]),[m,p]=C.useState(null),[y,_]=C.useState(1),[x,S]=C.useState(""),[T,k]=C.useState(!1),[A,M]=C.useState(null),[P,N]=C.useState({}),[D,R]=C.useState({}),z=C.useMemo(()=>m?Math.max(1,Math.ceil(m/tb)):1,[m]);C.useEffect(()=>{(async()=>{const{data:ve}=await it.auth.getUser(),W=ve.user?.id;s(!!W&&FI.includes(W)),t(!0)})()},[]);const F=async()=>{l(!0),M(null);const Q=(y-1)*tb,ve=Q+tb-1;let W=it.from("myeongsik").select("*",{count:"exact"}).order("user_id",{ascending:!0}).order("created_at",{ascending:!1}).range(Q,ve);if(x.trim()){const B=x.trim();W=W.or([`name.ilike.%${B}%`,`user_id.ilike.%${B}%`,`birth_json->>birthDay.ilike.%${B}%`].join(","))}const{data:ie,error:te,count:de}=await W;if(te){M(te?.message??"Unknown error"),l(!1);return}const X=ie??[];f(X),p(de??null);const U=Array.from(new Set(X.map(B=>B.user_id))).filter(Boolean);if(U.length>0){const{data:B,error:V}=await it.from("profiles").select("id,user_id,name,email,nickname").in("user_id",U);if(!V&&B){const J={};B.forEach(I=>{const G=I.user_id||I.id;G&&(J[G]=I)}),N(J)}else V&&V.code!=="42P01"&&V.code!=="42703"&&M(V.message??"Profile fetch error"),N({})}else N({});l(!1)};C.useEffect(()=>{n&&F()},[y,x,T,n]);const q=C.useMemo(()=>T?u:u.filter(Q=>!Q.deleted_at),[u,T]),Y=C.useMemo(()=>{const Q=new Map;return q.forEach(ve=>{Q.has(ve.user_id)||Q.set(ve.user_id,[]),Q.get(ve.user_id).push(ve)}),Q},[q]),ne=Array.from(Y.entries()),K=C.useMemo(()=>{const Q=ne.length,ve=q.length,W=Q?(ve/Q).toFixed(1):"0",ie=q.map(de=>de.created_at).filter(Boolean).sort().slice(-1)[0],te=u.filter(de=>!!de.deleted_at).length;return{userCount:Q,msCount:ve,avgMs:W,recent:ie?new Date(ie).toLocaleString():"-",deletedCount:te}},[q,ne.length,u]),Z=Q=>{Q<1||Q>z||_(Q)},ee=()=>o?g.jsx("div",{className:"text-neutral-400 text-sm",children:"Loading..."}):!o&&ne.length===0?g.jsx("div",{className:"text-neutral-400 text-sm",children:"No data."}):ne.map(([Q,ve])=>{const W=P[Q],ie=W?.name||W?.nickname||W?.email||"(no profile name)",te=W?.email,de=D[Q];return g.jsxs("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900 shadow",children:[g.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-neutral-850",onClick:()=>R(X=>({...X,[Q]:!X[Q]})),children:[g.jsxs("div",{className:"flex flex-col gap-1",children:[g.jsxs("div",{className:"text-white font-semibold",children:[ie,g.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:Q})]}),g.jsxs("div",{className:"text-xs text-neutral-400 flex flex-wrap gap-2",children:[g.jsxs("span",{className:"rounded-full bg-neutral-800 px-2 py-0.5 border border-neutral-700",children:[" ",ve.length,""]}),te&&g.jsx("span",{className:"rounded-full bg-neutral-800 px-2 py-0.5 border border-neutral-700",children:te})]})]}),g.jsx("span",{className:"text-neutral-400 text-sm",children:de?"+":""})]}),!de&&g.jsx("ul",{className:"px-4 pb-4 space-y-2 text-sm",children:ve.map(X=>{const U=typeof X.birth_json=="object"&&X.birth_json?X.birth_json.birthDay:void 0;return g.jsxs("li",{className:"rounded-lg border border-neutral-800 bg-neutral-950 px-3 py-2 flex justify-between items-center",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("div",{className:"text-white",children:X.name||"(no name)"}),g.jsxs("div",{className:"text-xs text-neutral-500",children:["Birth: ",typeof U=="string"?U:"-","  Created: ",X.created_at?new Date(X.created_at).toLocaleString():"-"]})]}),X.deleted_at&&g.jsx("span",{className:"text-[11px] text-red-400 border border-red-400/50 rounded px-2 py-1",children:"deleted"})]},X.id)})})]},Q)});return g.jsx("div",{className:"min-h-screen bg-neutral-950 text-white px-4 py-6",children:g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[g.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),g.jsx("p",{className:"text-sm text-neutral-400",children:"Users grouped by myeongsik"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-neutral-300",children:[g.jsx("input",{type:"checkbox",checked:T,onChange:Q=>{_(1),k(Q.target.checked)},className:"h-4 w-4 rounded border-neutral-700 bg-neutral-900"}),"Include deleted"]}),g.jsx("input",{type:"text",value:x,onChange:Q=>{_(1),S(Q.target.value)},placeholder:"Search: name / birth / user_id",className:"rounded-lg border border-neutral-800 bg-neutral-900 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"})]})]}),!e&&g.jsx("div",{className:"rounded-md border border-neutral-800 bg-neutral-900 px-3 py-2 text-sm text-neutral-300",children:"Checking admin account..."}),e&&!n&&g.jsx("div",{className:"rounded-md border border-red-500 bg-red-500/10 px-3 py-2 text-sm text-red-100",children:"Not an admin account. Please log in with an admin UUID."}),n&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[g.jsx(Df,{label:"Users",value:K.userCount}),g.jsx(Df,{label:"Myeongsik",value:K.msCount,hint:`Avg per user ${K.avgMs}`}),g.jsx(Df,{label:"Most recent",value:K.recent}),g.jsx(Df,{label:"Deleted (all)",value:K.deletedCount})]}),A&&g.jsx("div",{className:"rounded-md border border-red-500 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:A}),g.jsx("div",{className:"space-y-4",children:ee()}),g.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2",children:[g.jsx("button",{className:"rounded-md border border-neutral-800 bg-neutral-900 px-3 py-1 text-sm text-neutral-200 disabled:opacity-40",onClick:()=>Z(y-1),disabled:y<=1,children:""}),g.jsxs("div",{className:"text-sm text-neutral-400",children:[y," / ",z]}),g.jsx("button",{className:"rounded-md border border-neutral-800 bg-neutral-900 px-3 py-1 text-sm text-neutral-200 disabled:opacity-40",onClick:()=>Z(y+1),disabled:y>=z,children:""})]})]})]})})}function YI({pillarsA:e,pillarsB:t}){const n=t9(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([s,o])=>o.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:s}),g.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((l,u)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},s):null)]})}function ZI(e){return typeof e=="object"&&e!==null}const VI=["","","","","","","","","","","","","","","","","","","",""],KI=["","","","","","","","","","","","","","","","","","","","","","","",""],WI=new Set(VI),XI=new Set(KI);function v2(e){return typeof e=="string"&&e.length>=2&&WI.has(e[0])&&XI.has(e[1])}function cn(e,...t){if(v2(e))return e;for(const n of t)if(v2(n))return n;return""}function Mf(e,t){let n=null;const s=t.getTime();for(const o of e)if(o.at.getTime()<=s)n=o;else break;return n}function JI(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function _2(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,s,o,l,u]=t,f=new Date(+n,+s-1,+o,+l,+u);return Number.isNaN(f.getTime())?null:f}function wm(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function QI(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),s=Number(e.birthDay.slice(6,8));let o=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(o=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:s,hh:o,mm:l}}function tp(e){const{y:t,m:n,d:s}=QI(e),o=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?br(t,n,s,o,l):new Date(t,n-1,s,o,l)}function ez(e){const t=tp(e);return`${wm(e)}-${t.toISOString()}`}function Hu(e){const t=e;return typeof t.id=="string"&&t.id?t.id:ez(e)}function tz(e){return ZI(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function nz(e){const t=dl;return tz(t)?e==="classic"?t.Classic:t.Modern:e}const nb="people_picker_order_v1";function rz(e,t,n){const s=e.slice(),[o]=s.splice(t,1);return s.splice(n,0,o),s}function x2({open:e,list:t,onSelect:n,onClose:s}){const[o,l]=C.useState("");C.useEffect(()=>{e||l("")},[e]);const u=C.useMemo(()=>t.map(Hu),[t]),f=C.useMemo(()=>new Set(u),[u]),[m,p]=C.useState([]);C.useEffect(()=>{const k=localStorage.getItem(nb),A=k?JSON.parse(k):[],M=A.filter(N=>f.has(N)),P=[...M,...u.filter(N=>!M.includes(N))];p(P),JSON.stringify(P)!==JSON.stringify(A)&&localStorage.setItem(nb,JSON.stringify(P))},[u,f]);const y=k=>{p(k),localStorage.setItem(nb,JSON.stringify(k))},_=C.useMemo(()=>{const k=new Map(t.map(M=>[Hu(M),M])),A=[];for(const M of m){const P=k.get(M);P&&A.push(P)}return k.forEach((M,P)=>{m.includes(P)||A.push(M)}),A},[t,m]),x=C.useMemo(()=>{const k=o.trim().toLowerCase();return k?_.filter(A=>wm(A).toLowerCase().includes(k)):_},[_,o]),S=o.trim()==="",T=k=>{const{destination:A,source:M}=k;if(!A||!S||A.index===M.index)return;const P=x.map(Hu),N=rz(P,M.index,A.index),R=_.map(Hu).filter(F=>!P.includes(F)),z=[...N,...R].filter((F,q,Y)=>Y.indexOf(F)===q);y(z)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:s}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:s,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{placeholder:" ",value:o,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!S&&g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),g.jsx(wd,{onDragEnd:T,children:g.jsx(sl,{droppableId:"peopleList",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((A,M)=>{const P=String(Hu(A)),N=tp(A);return g.jsx(Ec,{draggableId:P,index:M,children:D=>g.jsx("li",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,onClick:()=>n(A),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:wm(A)}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Qu(N)})]})]})})},P)}),k.placeholder]})})})]})]})}function rb({label:e,gzHour:t,gzDay:n,gzMonth:s,gzYear:o,dayStem:l,cardSettings:u,sinsalBaseBranch:f,sinsalMode:m,sinsalBloom:p}){const y=k=>{const A=u.showSibiUnseong?Jt(l,k):"",M=u.showSibiSinsal?Qt({baseBranch:f,targetBranch:k,era:nz(m),gaehwa:!!p}):"";return{unseongText:A||void 0,shinsalText:M||void 0}},_=cn(t).charAt(1),x=cn(n).charAt(1),S=cn(s).charAt(1),T=cn(o).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),_],["",cn(n),x],["",cn(s),S],["",cn(o),T]].map(([k,A,M])=>{const{unseongText:P,shinsalText:N}=y(M);return g.jsx(uc,{label:k,gz:A,dayStem:l,settings:Wn.getState().settings,unseongText:P,shinsalText:N,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function sz(e){if(!e)return"";const t=e,n=f=>typeof t[f]=="string"?String(t[f]).trim().toLowerCase():null,s=f=>typeof t[f]=="boolean"?t[f]:null,o=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(f=>!!f);for(const f of o){if(["","","male","m","boy","man"].includes(f))return"";if(["","","female","f","girl","woman"].includes(f))return""}const l=s("isMale"),u=s("isFemale");return l===!0?"":u===!0?"":""}function ic({label:e,data:t,mode:n,effectiveDate:s,onPick:o}){const l=Wn(R=>R.settings),u=C.useMemo(()=>t?tp(t):null,[t]),f=cn(u?$s(u,"/"):void 0),m=cn(u?xt(u,"/"):void 0),p=cn(u?jt(u):void 0),y=cn(u?dt(u):void 0),_=C.useMemo(()=>m.charAt(0)||"",[m]),x=u,S=C.useMemo(()=>{const R=t?.birthPlace;return!R||R.name===""||!R.lon?127.5:R.lon},[t]),T=t?.mingSikType??"/",k=C.useMemo(()=>{const R=x?xt(x,T).charAt(1):m.charAt(1)||"",z=x?dt(x,S).charAt(1):y.charAt(1)||"";return(l.sinsalBase??"")===""?R:z},[l.sinsalBase,x,T,S,m,y]),A=C.useMemo(()=>{if(n!==""||!u||!t)return null;try{const R=Hk(u,f,t.dir,120,t.mingSikType),z=Fk(R,m,t.dir,t.DayChangeRule),F=Sd(u,p,t.dir,120,t?.birthPlace?.lon??127.5),q=qk(F,y,t.dir,t.DayChangeRule,u),Y=s;return{si:cn(Mf(R.events,Y)?.gz,f),il:cn(Mf(z.events,Y)?.gz,m),wl:cn(Mf(F.events,Y)?.gz,p),yn:cn(Mf(q.events,Y)?.gz,y)}}catch{return null}},[n,u,f,m,p,y,s,t]),M=C.useMemo(()=>{if(n!=="")return null;const R=s;return{si:cn($s(R,"/")),il:cn(xt(R,"/")),wl:cn(jt(R)),yn:cn(dt(R))}},[n,s]),P=t?wm(t):"",N=u?Qu(u):"",D=t?sz(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:o,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:P}),D&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",D]}),N&&g.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:N})]}),n===""&&g.jsx(rb,{label:"",gzHour:f,gzDay:m,gzMonth:p,gzYear:y,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&A&&g.jsx(rb,{label:"",gzHour:A.si,gzDay:A.il,gzMonth:A.wl,gzYear:A.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&M&&g.jsx(rb,{label:"",gzHour:M.si,gzDay:M.il,gzMonth:M.wl,gzYear:M.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:o,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function iz({people:e=[]}){const[t,n]=C.useState(),[s,o]=C.useState(),[l,u]=C.useState(!1),[f,m]=C.useState(!1),p=C.useRef(new Date),[y,_]=C.useState(()=>JI(p.current)),x=C.useRef(_2(y)??p.current),S=C.useMemo(()=>{const N=_2(y);return N&&(x.current=N),x.current},[y]),[T,k]=C.useState(!1),[A,M]=C.useState(!1);function P(N){if(!N)return["","","",""];try{const D=tp(N),R={hour:cn($s(D,"/")),day:cn(xt(D,"/")),month:cn(jt(D)),year:cn(dt(D))};return[R.year,R.month,R.day,R.hour]}catch{return["","","",""]}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:N=>u(N.target.checked),className:"accent-indigo-500"})," "]}),g.jsx("button",{onClick:()=>m(N=>!N),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:f?"  ":"  "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),g.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)}),l&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),l&&s&&g.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)}),f&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),f&&s&&g.jsx(ic,{label:" B",data:s,mode:"",effectiveDate:S,onPick:()=>M(!0)})]}),t&&s&&g.jsx("div",{className:"mt-4",children:g.jsx(YI,{pillarsA:P(t),pillarsB:P(s)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),g.jsx("input",{type:"datetime-local",value:y,onChange:N=>_(N.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(x2,{open:T,list:e||[],onSelect:N=>{n(N),k(!1)},onClose:()=>k(!1)}),g.jsx(x2,{open:A,list:e||[],onSelect:N=>{o(N),M(!1)},onClose:()=>M(!1)})]})}function az(){const[e,t]=C.useState(!1),[n,s]=C.useState(!1),o=async()=>{try{const{data:{user:l}}=await it.auth.getUser();if(!l){alert("  .");return}const u=l.id;await it.from("profiles").delete().eq("id",u),await it.from("myeongsik").delete().eq("user_id",u),await it.auth.admin.deleteUser(u),await it.auth.signOut(),alert(" ."),window.location.href="/"}catch(l){console.error(l),alert("   .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>s(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>s(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["         .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>s(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:o,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function oz({ms:e}){const{date:t,setDate:n}=Yr();C.useEffect(()=>{n(new Date)},[e]);const s=Uy(e),o=C.useMemo(()=>{const f=t??new Date,m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),y=String(f.getDate()).padStart(2,"0");return`${m}-${p}-${y}`},[t]),l=f=>{if(!f)return;const[m,p,y]=f.split("-"),_=Number(m),x=Number(p),S=Number(y);if(!Number.isFinite(_)||!Number.isFinite(x)||!Number.isFinite(S))return;const T=t??new Date,k=T.getHours(),A=T.getMinutes(),M=new Date(_,x,0).getDate(),P=Math.min(S,M),N=new Date(_,x-1,P,k,A,0,0);Number.isNaN(N.getTime())||n(N)},u=C.useMemo(()=>{const f=e.ganji,m=s?.dae?.gz?`${s.dae.gz}`:null,p=s?.se?.gz?`${s.se.gz}`:null,y=s?.wol?.gz?`${s.wol.gz}`:null,_=[m,p,y].filter(Boolean).join(" ");return[f,_].filter(Boolean).join(" + ")},[e,s]);return g.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx("input",{type:"date",value:o,onChange:f=>l(f.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const lz=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function cz(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${s}`}function Cf(e,t){return e&&t?`${e}${t}`:null}function w2(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const uz={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},dz=Bs.,hz=["","","","","","","","","","","",""];function S2(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const s=uz[n],o=hz.indexOf(t),l=(s+(o>=0?o:0))%10;return dz[l]}const fz=Bs..slice(),mz=["","","","","","","","","","","",""];function ac(e,t){const s=(t===""?F2:Qb)[e],o=t===""?fz:mz,l=Bs..reduce((u,f)=>(u[f]="",u),{});for(let u=0;u<12;u++)l[o[u]]=s[u];return l}const pz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},gz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function bz({open:e,onClose:t,onSave:n}){const{settings:s}=Wn(),[o,l]=C.useState(null),[u,f]=C.useState({}),[m,p]=C.useState(null),[y,_]=C.useState(!0),[x,S]=C.useState(!0),[T,k]=C.useState(""),[A,M]=C.useState("male"),[P,N]=C.useState(null),[D,R]=C.useState(!1),[,z]=C.useState(null),[F,q]=C.useState(null),[Y,ne]=C.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[K,Z]=C.useState(!1),[ee,Q]=C.useState(null),ve=pe=>{Q(pe),setTimeout(()=>Q(null),1800)},[W,ie]=C.useState(!1),[te,de]=C.useState(!1);C.useEffect(()=>{if(W){const pe=setTimeout(()=>ie(!1),2e3);return()=>clearTimeout(pe)}},[W]),C.useEffect(()=>{if(te){const pe=setTimeout(()=>de(!1),2e3);return()=>clearTimeout(pe)}},[te]);const X=()=>{const pe=F!==null?P?.filter((Tn,Dn)=>Dn===F)??[]:[];if(pe.length===0){alert("  .");return}const Le=T===""?"/":"",ue=pe[0],[me,ze,Be]=ue.date.split("-").map(Number),Ue={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let at=0,et=0;if(ue.hourSlots.length>0){const Tn=ue.hourSlots[0].branch,Dn=Ue[Tn];Dn&&(at=Dn.hh,et=Dn.mi)}const Zt=new Date(me,ze-1,Be,at,et),On=Zt,En="",lr=A==="male"?"":"";function vr(Tn,Dn){const Nr=["","","","","","","","","",""].includes(Tn),cr=Dn==="";return Nr?cr?"forward":"backward":cr?"backward":"forward"}const dn=vr(ue.year.charAt(0),lr),Ct=dt(On,127.5),bn=jt(On,127.5),hn=xt(On,Le),Zr=$s(On,Le),ra=[` : ${Ct} ${bn} ${hn}`,Zr?`${Zr}`:null].filter(Boolean).join(" "),zs={id:vT(),name:"",birthDay:`${me}${String(ze).padStart(2,"0")}${String(Be).padStart(2,"0")}`,birthTime:`${String(at).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:lr,birthPlace:K?{name:"",lat:0,lon:127.5}:Y.birthPlace??{name:"",lat:0,lon:127.5},relationship:Y.relationship??"",memo:Y.memo??"",folder:il(Y.folder),mingSikType:Y.mingSikType??"/",DayChangeRule:Y.mingSikType===""?"":"",calendarType:Y.calendarType??"solar",yearGZ:ue.year,monthGZ:ue.month,dayGZ:ue.day,hourGZ:ue.hour,ganjiText:` : ${ue.year} ${ue.month} ${ue.day} ${ue.hour}`,ganji:ra,dayStem:ue.day.charAt(0),dateObj:Zt,corrected:On,correctedLocal:En,dir:dn};Lm.flushSync(()=>{ii.getState().add(zs)}),n(zs),Q(" !"),ne({gender:"",mingSikType:"/",calendarType:"solar"}),Z(!1),t()},U=y||x,B=!!(u.yearStem&&u.yearBranch),V=!!(u.dayStem&&u.dayBranch),J=!U||B||V,I=!!m&&m.endsWith("Stem"),G=!!m&&m.endsWith("Branch");function oe(pe){return pe==="yearStem"?"yearBranch":pe==="yearBranch"?"yearStem":pe==="monthStem"?"monthBranch":pe==="monthBranch"?"monthStem":pe==="dayStem"?"dayBranch":pe==="dayBranch"?"dayStem":pe==="hourStem"?"hourBranch":"hourStem"}const ce=C.useCallback((pe,Le)=>{if(!y||!pe.yearStem)return pe;const ue={...pe},me=Qb[pe.yearStem];if(!me)return ue;const ze=Ue=>me.filter(at=>at.startsWith(Ue)),Be=Ue=>me.find(at=>at.endsWith(Ue));if(Le==="monthStem"&&ue.monthStem){const Ue=ze(ue.monthStem).map(at=>at.slice(1));return Ue.length>=2?(l(Ue.slice(0,2)),p("monthBranch"),ue):(Ue.length===1&&(ue.monthBranch=Ue[0],l(null)),ue)}if(Le==="monthBranch"&&ue.monthBranch){const Ue=Be(ue.monthBranch);return Ue&&(ue.monthStem=Ue.slice(0,1),l(null)),ue}if(Le==="yearStem"){if(ue.monthStem&&!ue.monthBranch){const Ue=ze(ue.monthStem).map(at=>at.slice(1));if(Ue.length>=2)return l(Ue.slice(0,2)),p("monthBranch"),ue;Ue.length===1&&(ue.monthBranch=Ue[0])}else if(ue.monthBranch&&!ue.monthStem){const Ue=Be(ue.monthBranch);Ue&&(ue.monthStem=Ue.slice(0,1))}}return ue},[y,p]),le=C.useCallback((pe,Le)=>{if(!x||!pe.dayStem)return pe;const ue={...pe},me=ac(pe.dayStem,T),ze=Ue=>Object.entries(me).find(([,at])=>at.startsWith(Ue)),Be=Ue=>me[Ue];if(Le==="hourStem"&&ue.hourStem){const Ue=ze(ue.hourStem);return Ue&&(ue.hourBranch=Ue[0]),ue}if(Le==="hourBranch"&&ue.hourBranch){const Ue=Be(ue.hourBranch);return Ue&&(ue.hourStem=Ue.slice(0,1)),ue}if(Le==="dayStem"){if(ue.hourStem&&!ue.hourBranch){const Ue=ze(ue.hourStem);Ue&&(ue.hourBranch=Ue[0])}else if(ue.hourBranch&&!ue.hourStem){const Ue=Be(ue.hourBranch);Ue&&(ue.hourStem=Ue.slice(0,1))}}return ue},[x,T]),_e=C.useCallback(pe=>!y||!pe.yearStem?!1:pe.monthBranch&&pe.monthStem?S2(pe.yearStem,pe.monthBranch)!==pe.monthStem:!1,[y]),Ae=C.useCallback(pe=>{if(!x||!pe.dayStem)return!1;if(pe.hourBranch&&pe.hourStem){const ue=ac(pe.dayStem,T)[pe.hourBranch];return ue?ue.slice(0,1)!==pe.hourStem:!1}return!1},[x,T]);C.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Le=ac(u.dayStem,T)[u.hourBranch];Le&&f(ue=>({...ue,hourStem:Le.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=C.useCallback(pe=>{if(!m)return;if(!J&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){z("/  :    ."),setTimeout(()=>z(null),1500);return}let ue={...u,[m]:pe};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(ue=ce(ue,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(ue=le(ue,m)),f(ue);let me=!1;_e(ue)&&(_(!1),me=!0),Ae(ue)&&(S(!1),me=!0),me&&ve("/  .   ."),f(ue),N(null);const ze=oe(m);p(ze),setTimeout(()=>{const Be={...ue};if(Be.yearStem&&Be.yearBranch&&!Be.monthStem){p("monthStem");return}if(Be.monthStem&&Be.monthBranch&&!Be.dayStem){p("dayStem");return}if(Be.dayStem&&Be.dayBranch&&!Be.hourStem){p("hourStem");return}},0)},[m,u,J,ce,le,_e,Ae]),Me=w2(u),Ee=C.useCallback(async()=>{if(N(null),z(null),!w2(u)){z("   .");return}const pe=Cf(u.yearStem,u.yearBranch),Le=Cf(u.monthStem,u.monthBranch),ue=Cf(u.dayStem,u.dayBranch),me=Cf(u.hourStem,u.hourBranch),ze=300,Be=[];R(!0);try{const Ue=new Date(1900,0,1,12,0,0),at=new Date(2100,11,31,12,0,0);for(let et=Ue.getTime();et<=at.getTime();et+=24*3600*1e3){const Zt=new Date(et),On=T===""?"/":"",En=dt(Zt);if(En!==pe)continue;const lr=jt(Zt);if(lr!==Le)continue;const vr=xt(Zt,On);if(vr!==ue)continue;const dn=ac(u.dayStem,T),Ct=[];for(let bn=0;bn<12;bn++){const hn=Bs.[bn];dn[hn]===me&&Ct.push({branch:hn,time:lz[bn]})}if(Ct.length!==0&&(Be.push({date:cz(Zt),year:En,month:lr,day:vr,hour:me,hourSlots:Ct}),Be.length>=ze))break}Be.length===0&&z("  . (: 19002100)"),N(Be)}catch(Ue){Ue instanceof Error?z(Ue.message):z(String(Ue))}finally{R(!1)}},[u,T]),$e=()=>{f({}),N(null),z(null),p(null)},Ce=pe=>{N(null),pe&&f(Le=>{const ue={...Le};return ue.yearStem&&ue.monthBranch&&(ue.monthStem=S2(ue.yearStem,ue.monthBranch)),ue}),_(pe)},Pe=pe=>{N(null),pe&&f(Le=>{const ue={...Le};if(ue.dayStem&&ue.hourBranch){const ze=ac(ue.dayStem,T)[ue.hourBranch];ze&&(ue.hourStem=ze.slice(0,1))}return ue}),S(pe)};if(!e)return null;const Ie=pe=>{if(N(null),k(pe),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const ue=ac(u.dayStem,pe)[u.hourBranch];ue&&f(me=>({...me,hourStem:ue.slice(0,1)}))}};return g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx($A,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:y,onChange:pe=>Ce(pe.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:pe=>Pe(pe.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Ie("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Ie("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:A==="male",onChange:()=>M("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:A==="female",onChange:()=>M("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),U&&!J&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""}),"  ."]}),g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([pe,Le])=>{const ue=!J&&!(pe==="yearStem"||pe==="yearBranch"||pe==="dayStem"||pe==="dayBranch"),me=m===pe;return g.jsxs("button",{onClick:()=>!ue&&p(pe),disabled:ue,className:["border rounded p-2 text-center cursor-pointer",me?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",ue?"opacity-50 cursor-not-allowed":""].join(" "),children:[Le,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:u[pe]??"-"})]},pe)})}),o&&o.length>0&&g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  :"}),g.jsx("div",{className:"flex gap-2",children:o.map(pe=>g.jsx("button",{onClick:()=>{let Le={...u,monthBranch:pe};l(null),Le=ce(Le,"monthBranch"),f(Le),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:pe},pe))})]}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?g.jsxs("div",{className:"w-full",children:[I&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:Bs..map(pe=>g.jsx("button",{onClick:()=>je(pe),className:`border rounded px-2 py-1 cursor-pointer ${fs(pe,"stem",s)}`,children:pe},pe))})]}),G&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:Bs..filter(pe=>{const Le=oe(m),ue=u[Le];return ue?gz[pe]===pz[ue]:!0}).map(pe=>g.jsx("button",{onClick:()=>je(pe),className:`border rounded px-2 py-1 cursor-pointer ${fs(pe,"branch",s)}`,children:pe},pe))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!Me){ie(!0);return}Ee()},disabled:D,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:D?" ...":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:$e,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>{if((F!==null?P?.filter((Le,ue)=>ue===F)??[]:[]).length===0){de(!0);return}X()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:P?P.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:P.map((pe,Le)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Le}`,checked:F===Le,onChange:()=>q(Le)}),g.jsx("label",{htmlFor:`selectRow-${Le}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:pe.date}),g.jsx("td",{className:"p-1 text-center",children:pe.year}),g.jsx("td",{className:"p-1 text-center",children:pe.month}),g.jsx("td",{className:"p-1 text-center",children:pe.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:pe.hourSlots.map((ue,me)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:ue.branch})},me))})}),g.jsx("td",{className:"p-1 text-center",children:A==="male"?"":""})]},`${pe.date}-${Le}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),ee&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:ee})}),W&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),te&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",g.jsx("br",{})," ,  ."]})})]})})}const zA=gd(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function Sm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),s=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const N=br(t,n,s);t=N.getFullYear(),n=N.getMonth()+1,s=N.getDate()}const o=!e.birthTime||e.birthTime==="",l=o?4:Number(e.birthTime.slice(0,2)),u=o?30:Number(e.birthTime.slice(2,4)),f=new Date(t,n-1,s,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=ul(f,m,o),y=e.mingSikType??"/",_=dt(p,m),x=jt(p,m),S=xt(p,y),T=o?null:$s(p,y),k=Fe(_),A=Fe(x),M=Fe(S),P=T?Fe(T):"";return[k,A,M,P]}function UA(e){const t=new Date(e.corrected),n=Sm(e),s=n[0].charAt(0),l=["","","","",""].includes(s),u=e.gender==="",f=u&&l||!u&&!l?"forward":"backward",m=Sd(t,n[1],f,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const y=[];let _=Fe(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const S=new Date(p);if(S.setFullYear(S.getFullYear()+x*10),x>0){const T=m.events[x];T&&(_=Fe(T.gz))}y.push(`${S.getFullYear()} ${String(S.getMonth()+1).padStart(2,"0")} ${_}  `)}return y}const yz=!1,E2=e=>e<10?`0${e}`:`${e}`;function HA(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",s=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(s==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${E2(f.getMonth()+1)}${E2(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const Vu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ku={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fd={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vz=["","","","",""];function T2(e){return vz.includes(e)}const GA={:"",:"",:"",:"",:""},FA={:"",:"",:"",:"",:""},qA={:"",:"",:"",:"",:""},YA={:"",:"",:"",:"",:""};function Yb(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Vu[t])return Vu[t];if(["","","","","","","","","","","",""].includes(t))return Rf[t]??null;if(Ku[t])return Rf[Ku[t]]??null;const n=t.charAt(0);return Vu[n]?Vu[n]:["","","","","","","","","",""].includes(n)?n:Ku[n]?Rf[Ku[n]]??null:["","","","","","","","","","","",""].includes(n)?Rf[n]??null:null}function _z(e,t){const n=fd[e],s=fd[t];if(!n||!s)return"";let o;s===n?o="":s===GA[n]?o="":s===FA[n]?o="":s===qA[n]?o="":s===YA[n]?o="":o="";const l=T2(e)===T2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function ZA(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const s=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=s.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=s.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function xz(e){const t={};for(const[n,s]of Object.entries(e??{})){if(s<=0)continue;const o=Yb(n);o&&(t[o]=(t[o]??0)+s)}return t}function wz(e){if(!e)return[];const t=Yb(e.charAt(0)),n=Yb(e.charAt(1));return[t,n].filter(Boolean)}function Lf(e){const t=wz(e),n={};for(const s of t)n[s]=(n[s]??0)+1;return n}function os(e,t){return t===e?"":t===GA[e]?"":t===FA[e]?"":t===qA[e]?"":t===YA[e]?"":""}const Sz={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function Ez(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),s=Vu[t]??t,o=Ku[n]??n;return`${s}${o}`}function ar(e){const t=Ez(e),n=Sz[t];return n?{...n,code:t}:null}function Tz(e){const t={:0,:0,:0,:0,:0};for(const[n,s]of Object.entries(e)){const o=fd[n];o&&(t[o]+=s)}return t}function kz(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[s,o]of Object.entries(e)){if(o<=0)continue;const l=_z(t,s);n[l]+=o}return n}function Az(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const jz={natal:50,dae:30,se:20,wol:7,il:3};function Nz(e){const t={};for(const{kind:s,bare:o}of e){const l=jz[s]??0;if(l<=0)continue;const u=ZA(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((s,o)=>s+o,0);if(n>0)for(const s of Object.keys(t))t[s]=t[s]/n*100;return t}function ei(e,t,n){const s=xz(e.perStemElementScaled),o=t!==""&&n?.dae?Lf(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Lf(n.se):{},u=(t===""||t==="")&&n?.wol?Lf(n.wol):{},f=t===""&&n?.il?Lf(n.il):{},m=Nz([{kind:"natal",bare:s},{kind:"dae",bare:o},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:f}]),p=ZA(m),y=Tz(p),_=kz(p,e.dayStem),x=Az(_);return{perStemAugBare:p,elementPercent:y,totalsSub:_,totalsMain:x}}function Oz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const sb=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Zb=e=>{if(Array.isArray(e)){const t=e.map(Zb).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||sb(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(sb(e)){const t={};for(const[n,s]of Object.entries(e)){const o=Zb(s);o!==void 0&&(Array.isArray(o)&&o.length===0||sb(o)&&Object.keys(o).length===0||(t[n]=o))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},Dz=e=>{const t=Zb(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},as=(e,t)=>{const n=Dz(t);return n?`## ${e}
${n}`:""};function Mz(e){const{ms:t,natal:n,chain:s,basis:o,tab:l,unified:u,percent:f,category:m,topic:p,subTopic:y,relationMode:_,teacherMode:x}=e,S=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],T=UA(t).slice(0,10),k=gr({natal:S,daewoon:l!==""?s?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?s?.se??void 0:void 0,wolwoon:l===""||l===""?s?.wol??void 0:void 0,ilwoon:l===""?s?.il??void 0:void 0}),A=Gr({natal:S,daewoon:l!==""?s?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?s?.se??void 0:void 0,wolwoon:l===""||l===""?s?.wol??void 0:void 0,ilwoon:l===""?s?.il??void 0:void 0}),{shinsalEra:M,shinsalGaehwa:P,shinsalBase:N}=zA.getState(),D=N===""?S[0]?.charAt(1)??"":S[2]?.charAt(1)??"",R=ei(u,l,s),z=R.elementPercent,F=R.totalsSub,{flags:q}=AA(S,u.elementScoreRaw),Y=`${m} (${f.toFixed(1)}%)  ${[` ${q..||q..||q..||q..?"":""}`,` ${q..||q..||q..||q..?"":""}`,` ${q..||q..?"":""}`].join(", ")}`,ne=!t.birthTime||t.birthTime==="";function K(B){const J=HA(B).birthDay??"",I=J.slice(0,4),G=J.slice(4,6),oe=J.slice(6,8);let ce="";if(B.corrected instanceof Date&&!isNaN(B.corrected.getTime())){const le=String(B.corrected.getHours()).padStart(2,"0"),_e=String(B.corrected.getMinutes()).padStart(2,"0");ce=ne?"":`${le}:${_e}`}return`${I} ${G} ${oe}  ${ce}`}function Z(B,V){if(!V)return"()";const J=[];return(B===""||B===""||B===""||B==="")&&V.dae&&J.push(`:${Fe(V.dae)}`),(B===""||B===""||B==="")&&V.se&&J.push(`:${Fe(V.se)}`),(B===""||B==="")&&V.wol&&J.push(`:${Fe(V.wol)}`),B===""&&V.il&&J.push(`:${Fe(V.il)}`),J.length>0?J.join(" / "):"()"}const ee=Oz(S,t),Q=u.dayStem,ve=fd[Q],W=[` : ${t.name??""} (${K(t)}) : ${t.gender}`,` ${S[0]} ${S[1]} ${S[2]}`+(S[3]?` ${S[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${Z(l,s)}`].join(`
`),ie=[];if(ie.push(as("  (10)",T)),ie.push(as("",Y)),ie.push(as("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([B,V])=>[`${B}(${os(ve,B)})`,V])))),l!==""&&ie.push(as(`(=${l})`,Object.fromEntries(Object.entries(z).map(([B,V])=>[`${B}(${os(ve,B)})`,V])))),ie.push(as(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&ie.push(as(` ( 10=${l} 100)`,F)),ie.push(as("(+ )",l===""?S.map((B,V)=>!B||V>=ee.length?null:{pos:ee[V],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean):[...S.map((B,V)=>!B||V>=ee.length?null:{pos:ee[V],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean),...s?.dae?[{pos:"",gz:s.dae,unseong:Jt(S[2]?.charAt(0)??"",s.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&s?.se?[{pos:"",gz:s.se,unseong:Jt(S[2]?.charAt(0)??"",s.se.charAt(1))}]:[],...(l===""||l==="")&&s?.wol?[{pos:"",gz:s.wol,unseong:Jt(S[2]?.charAt(0)??"",s.wol.charAt(1))}]:[],...l===""&&s?.il?[{pos:"",gz:s.il,unseong:Jt(S[2]?.charAt(0)??"",s.il.charAt(1))}]:[]].filter(Boolean))),ie.push(as("(+  )",l===""?S.map((B,V)=>!B||V>=ee.length?null:{pos:ee[V],gz:B,shinsal:Qt({baseBranch:D,targetBranch:B.charAt(1),era:M,gaehwa:P})}).filter(Boolean):[...S.map((B,V)=>!B||V>=ee.length?null:{pos:ee[V],gz:B,shinsal:Qt({baseBranch:D,targetBranch:B.charAt(1),era:M,gaehwa:P})}).filter(Boolean),...s?.dae?[{pos:"",gz:s.dae,shinsal:Qt({baseBranch:D,targetBranch:s.dae.charAt(1),era:M,gaehwa:P})}]:[],...(l===""||l===""||l==="")&&s?.se?[{pos:"",gz:s.se,shinsal:Qt({baseBranch:D,targetBranch:s.se.charAt(1),era:M,gaehwa:P})}]:[],...(l===""||l==="")&&s?.wol?[{pos:"",gz:s.wol,shinsal:Qt({baseBranch:D,targetBranch:s.wol.charAt(1),era:M,gaehwa:P})}]:[],...l===""&&s?.il?[{pos:"",gz:s.il,shinsal:Qt({baseBranch:D,targetBranch:s.il.charAt(1),era:M,gaehwa:P})}]:[]].filter(Boolean))),ie.push(as("(+ )",l===""?S.map((B,V)=>{if(!B||V>=ee.length)return null;const J=ar(B);return J?{pos:ee[V],gz:B,nabeum:J.name,element:J.element,code:J.code}:{pos:ee[V],gz:B,nabeum:null}}).filter(Boolean):[...S.map((B,V)=>{if(!B||V>=ee.length)return null;const J=ar(B);return J?{pos:ee[V],gz:B,nabeum:J.name,element:J.element,code:J.code}:{pos:ee[V],gz:B,nabeum:null}}).filter(Boolean),...s?.dae?(()=>{const B=ar(s.dae);return B?[{pos:"",gz:s.dae,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l===""||l==="")&&s?.se?(()=>{const B=ar(s.se);return B?[{pos:"",gz:s.se,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l==="")&&s?.wol?(()=>{const B=ar(s.wol);return B?[{pos:"",gz:s.wol,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...l===""&&s?.il?(()=>{const B=ar(s.il);return B?[{pos:"",gz:s.il,nabeum:B.name,element:B.element,code:B.code}]:[]})():[]].filter(Boolean))),ie.push(as("()",tv(S.filter((B,V)=>V<ee.length)))),ie.push(as("( :  )",k)),l===""){const B=Gr({natal:S,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:o});ie.push(as("( )",{good:B.good,bad:B.bad,meta:B.meta}))}else ie.push(as(`( =${l})`,A));const te=ie.filter(B=>B&&B.trim().length>0).join(`

`),de=JA({topic:p,subTopic:y,timeMode:"single",tab:l,relationMode:_,teacherMode:x}),X=["-----","  ","","1.       (////)  .","2.  ,        ."];de&&X.push("","  ( )",de);const U=X.join(`
`);return[W,te,U].join(`

`)}function Cz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const Rz=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function av(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function VA(e,t){const n=e[t],s=e[t+1];return s?av(s):new Date(n.endYear+1,0,1)}function KA(e,t,n,s){return e<s&&t>n}function WA(e,t,n){const s=new Date(t,0,1),o=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=av(f),p=VA(e,u);KA(m,p,s,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function k2(e,t){return WA(e,t,t)}function Bf(e,t,n){const s=new Date(t,n-1,1),o=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=av(f),p=VA(e,u);KA(m,p,s,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function XA(e){const t=315569259747e-1,o=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(o);return new Date(l.getTime()+540*60*1e3)}function Pf(e,t){const n=[],s=new Date(e,t-1,15,0,0,0),o=new Date(e,t,1,15,0,0),l=XA(e),u=dt(new Date(e-1,5,15)),f=dt(new Date(e,5,15)),m=dt(new Date(e+1,5,15));if(o<=l)u&&n.push(Fe(u));else if(s>=l)f&&n.push(Fe(f));else if(u&&n.push(Fe(u)),f){const p=Fe(f);n.includes(p)||n.push(p)}if(t===12&&m){const p=Fe(m);n.includes(p)||n.push(p)}return n}function Lz(e,t){const n=XA(e),s=new Date(e,t-1,1),o=[];return s<n&&o.push(e-1),s>=n&&o.push(e),t===12&&o.push(e+1),o}const wi=(e,t)=>{if(!e)return{};const n=t,s=f=>{if(!f)return;const m={};for(const[p,y]of Object.entries(f)){if(!Array.isArray(y))continue;const _=y.filter(x=>typeof x=="string"&&x.includes(n));_.length>0&&(m[p]=_)}if(Object.keys(m).length!==0)return m},o=s(e.good),l=s(e.bad),u={};return o&&(u.good=o),l&&(u.bad=l),u};function Vb(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Vb(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(Rz(e)){const t={};for(const[n,s]of Object.entries(e)){const o=Vb(s);o!==void 0&&(t[n]=o)}return Object.keys(t).length>0?t:void 0}return e}}const Bz=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),Vn=(e,t)=>{const n=Vb(t);if(n===void 0)return"";const s=Bz(n);return s.trim()?`## ${e}
${s}`:""},Xi=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[s,o]of Object.entries(e)){if(!Array.isArray(o))continue;const l=Array.from(new Set(o.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[s]=l)}return n};function Pz(e){const{ms:t,natal:n,basis:s,unified:o,percent:l,category:u,selectedDaeList:f,daeList:m,seYears:p,wolMonths:y,ilDays:_,topic:x,subTopic:S,teacherMode:T}=e,k=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],A=!t.birthTime||t.birthTime==="",M=Cz(k,t),P=o.dayStem,N=fd[P],{shinsalEra:D,shinsalGaehwa:R,shinsalBase:z}=zA.getState(),F=z===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:q}=AA(k,o.elementScoreRaw),Y=`${u} (${l.toFixed(1)}%)  ${[` ${q..||q..||q..||q..?"":""}`,` ${q..||q..||q..||q..?"":""}`,` ${q..||q..?"":""}`].join(", ")}`;function ne(te){const X=HA(te).birthDay??"",U=X.slice(0,4),B=X.slice(4,6),V=X.slice(6,8);let J="";if(te.corrected instanceof Date&&!isNaN(te.corrected.getTime())){const I=String(te.corrected.getHours()).padStart(2,"0"),G=String(te.corrected.getMinutes()).padStart(2,"0");J=A?"":`${I}:${G}`}return`${U} ${B} ${V}  ${J}`}const K=[` : ${t.name??""} (${ne(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),Z=[];Z.push(Vn("",Y)),Z.push(Vn("()",Object.fromEntries(Object.entries(o.natalFixed.elementPercent100).map(([te,de])=>[`${te}(${os(N,te)})`,de])))),Z.push(Vn(" ( 10 100)",o.natalFixed.totalsSub)),Z.push(Vn("()",tv(k.filter((te,de)=>de<M.length))));const ee=Gr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:s});if(Z.push(Vn("()",{good:ee.good,bad:ee.bad,meta:ee.meta})),Z.push(Vn("()",k.map((te,de)=>{if(!te||de>=M.length)return null;const X=ar(te);return X?{pos:M[de],gz:te,nabeum:X.name,element:X.element,code:X.code}:{pos:M[de],gz:te,nabeum:null}}).filter(Boolean))),Z.push(Vn("()",k.map((te,de)=>!te||de>=M.length?null:{pos:M[de],gz:te,unseong:Jt(k[2]?.charAt(0)??"",te.charAt(1))}).filter(Boolean))),Z.push(Vn("()",k.map((te,de)=>!te||de>=M.length?null:{pos:M[de],gz:te,shinsal:Qt({baseBranch:F,targetBranch:te.charAt(1),era:D,gaehwa:R})}).filter(Boolean))),m.length>0)for(const te of f){const de={dae:te.gz,se:null,wol:null,il:null},X=ei(o,"",de),U=gr({natal:k,daewoon:te.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),B=Gr({natal:k,daewoon:te.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),V=ar(te.gz),J=Jt(k[2]?.charAt(0)??"",te.gz.charAt(1)),I=Qt({baseBranch:F,targetBranch:te.gz.charAt(1),era:D,gaehwa:R});Z.push(Vn(`${te.age} ${te.gz} (${te.startYear}~${te.endYear})`,{:Object.fromEntries(Object.entries(X.elementPercent).map(([G,oe])=>[`${G}(${os(N,G)})`,oe])),:X.totalsSub,:U,:wi(B,""),:V?{gz:te.gz,nabeum:V.name,element:V.element,code:V.code}:null,:{pos:"",gz:te.gz,unseong:J},:{pos:"",gz:te.gz,shinsal:I}}))}if(p.length>0){const te=p[0],de=p[p.length-1],X=WA(m,te,de);if(X.length>0){const U=te,B=dt(new Date(U,5,15)),V=Fe(B||""),J={:X.map(I=>{const G={dae:I.gz,se:V||null,wol:null,il:null},oe=ei(o,"",G),ce=gr({natal:k,daewoon:I.gz,sewoon:V||void 0,wolwoon:void 0,ilwoon:void 0}),le=Gr({natal:k,daewoon:I.gz,sewoon:V||void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),_e=ar(I.gz),Ae=Jt(k[2]?.charAt(0)??"",I.gz.charAt(1)),je=Qt({baseBranch:F,targetBranch:I.gz.charAt(1),era:D,gaehwa:R});return{:`${I.age} ${I.gz} (${I.startYear}~${I.endYear})`,:I.gz,:Object.fromEntries(Object.entries(oe.elementPercent).map(([Me,Ee])=>[`${Me}(${os(N,Me)})`,Ee])),:oe.totalsSub,:Xi(ce,""),:wi(le,""),:_e?{gz:I.gz,nabeum:_e.name,element:_e.element,code:_e.code}:null,:{pos:"",gz:I.gz,unseong:Ae},:{pos:"",gz:I.gz,shinsal:je}}})};Z.push(Vn("",J))}for(const U of p){const B=dt(new Date(U,5,15)),V=k2(m,U),J=V.length>0?V[0]:null,I={dae:J?J.gz:null,se:Fe(B||""),wol:null,il:null},G=ei(o,"",I),oe=gr({natal:k,daewoon:J?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0}),ce=Gr({natal:k,daewoon:J?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0,basis:s}),le=ar(Fe(B||"")),_e=Jt(k[2]?.charAt(0)??"",(B||"").charAt(1)),Ae=Qt({baseBranch:F,targetBranch:(B||"").charAt(1),era:D,gaehwa:R}),je={:{:`${U} ${Fe(B||"")}`,:Fe(B||""),:Object.fromEntries(Object.entries(G.elementPercent).map(([Me,Ee])=>[`${Me}(${os(N,Me)})`,Ee])),:G.totalsSub,:Xi(oe,""),:wi(ce,""),:le?{gz:Fe(B||""),nabeum:le.name,element:le.element,code:le.code}:null,:{pos:"",gz:Fe(B||""),unseong:_e},:{pos:"",gz:Fe(B||""),shinsal:Ae}}};Z.push(Vn(` ${U}`,je))}}if(y.length>0){const te=[],de=new Map;for(const J of y){const[I,G]=J.split("-").map(Number);Bf(m,I,G).forEach(_e=>{te.some(Ae=>Ae.gz===_e.gz&&Ae.startYear===_e.startYear)||te.push(_e)});const ce=Lz(I,G);Pf(I,G).forEach((_e,Ae)=>{const je=ce[Ae]??ce[ce.length-1];de.has(_e)||de.set(_e,{year:je,month:G})})}const[X]=y[0].split("-").map(Number),U=dt(new Date(X,5,15)),B=Fe(U||"");if(te.length>0){const J={:te.map(I=>{const G={dae:I.gz,se:B||null,wol:null,il:null},oe=ei(o,"",G),ce=gr({natal:k,daewoon:I.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0}),le=Gr({natal:k,daewoon:I.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0,basis:s}),_e=ar(I.gz),Ae=Jt(k[2]?.charAt(0)??"",I.gz.charAt(1)),je=Qt({baseBranch:F,targetBranch:I.gz.charAt(1),era:D,gaehwa:R});return{:`${I.age} ${I.gz} (${I.startYear}~${I.endYear})`,:I.gz,:Object.fromEntries(Object.entries(oe.elementPercent).map(([Me,Ee])=>[`${Me}(${os(N,Me)})`,Ee])),:oe.totalsSub,:Xi(ce,""),:wi(le,""),:_e?{gz:I.gz,nabeum:_e.name,element:_e.element,code:_e.code}:null,:{pos:"",gz:I.gz,unseong:Ae},:{pos:"",gz:I.gz,shinsal:je}}})};Z.push(Vn("",J))}const V=Array.from(de.keys());if(V.length>0){const J={:V.map(I=>{const oe=de.get(I).year,le=k2(m,oe)[0]??te[0]??null,_e={dae:le?le.gz:null,se:I,wol:null,il:null},Ae=ei(o,"",_e),je=gr({natal:k,daewoon:le?.gz,sewoon:I,wolwoon:void 0,ilwoon:void 0}),Me=Gr({natal:k,daewoon:le?.gz,sewoon:I,wolwoon:void 0,ilwoon:void 0,basis:s}),Ee=ar(I),$e=Jt(k[2]?.charAt(0)??"",I.charAt(1)),Ce=Qt({baseBranch:F,targetBranch:I.charAt(1),era:D,gaehwa:R});return{:`${oe} ${I}`,:I,:Object.fromEntries(Object.entries(Ae.elementPercent).map(([Pe,Ie])=>[`${Pe}(${os(N,Pe)})`,Ie])),:Ae.totalsSub,:Xi(je,""),:wi(Me,""),:Ee?{gz:I,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:I,unseong:$e},:{pos:"",gz:I,shinsal:Ce}}})};Z.push(Vn("",J))}for(const J of y){const[I,G]=J.split("-").map(Number),oe=new Date(I,G-1,15),ce=jt(oe),le=Bf(m,I,G),_e=le.length>0?le[0]:null,Ae=Pf(I,G),je=Ae.length>0?Ae[Ae.length-1]:"",Me={dae:_e?_e.gz:null,se:je||null,wol:Fe(ce||""),il:null},Ee=ei(o,"",Me),$e=gr({natal:k,daewoon:_e?.gz,sewoon:je||void 0,wolwoon:Fe(ce||""),ilwoon:void 0}),Ce=Gr({natal:k,daewoon:_e?.gz,sewoon:je||void 0,wolwoon:Fe(ce||""),ilwoon:void 0,basis:s}),Pe=ar(Fe(ce||"")),Ie=Jt(k[2]?.charAt(0)??"",(ce||"").charAt(1)),pe=Qt({baseBranch:F,targetBranch:(ce||"").charAt(1),era:D,gaehwa:R}),Le={:{:`${J} ${Fe(ce||"")}`,:Fe(ce||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([ue,me])=>[`${ue}(${os(N,ue)})`,me])),:Ee.totalsSub,:Xi($e,""),:wi(Ce,""),:Pe?{gz:Fe(ce||""),nabeum:Pe.name,element:Pe.element,code:Pe.code}:null,:{pos:"",gz:Fe(ce||""),unseong:Ie},:{pos:"",gz:Fe(ce||""),shinsal:pe}}};Z.push(Vn(` ${J}`,Le))}}if(_.length>0){const te=t.mingSikType??"/",[de,X,U]=_[0].split("-").map(Number),B=new Date(de,X-1,U,4,0);if(!isNaN(B.getTime())){const V=Bf(m,de,X),J=V.length>0?V[0]:null,I=Pf(de,X),G=I.length>0?I[I.length-1]:"",oe=jt(new Date(de,X-1,15)),ce=xt(B,te),le=Fe(oe||""),_e=Fe(G||""),Ae=Fe(ce||"");if(J){const je={dae:J.gz,se:_e,wol:le,il:Ae},Me=ei(o,"",je),Ee=gr({natal:k,daewoon:J.gz,sewoon:_e,wolwoon:le,ilwoon:Ae}),$e=Gr({natal:k,daewoon:J.gz,sewoon:_e,wolwoon:le,ilwoon:Ae,basis:s}),Ce=ar(J.gz),Pe=Jt(k[2]?.charAt(0)??"",J.gz.charAt(1)),Ie=Qt({baseBranch:F,targetBranch:J.gz.charAt(1),era:D,gaehwa:R});Z.push(Vn("",{:`${J.age} ${J.gz} (${J.startYear}~${J.endYear})`,:J.gz,:Object.fromEntries(Object.entries(Me.elementPercent).map(([pe,Le])=>[`${pe}(${os(N,pe)})`,Le])),:Me.totalsSub,:Xi(Ee,""),:wi($e,""),:Ce?{gz:J.gz,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:J.gz,unseong:Pe},:{pos:"",gz:J.gz,shinsal:Ie}}))}if(_e){const je={dae:J?J.gz:null,se:_e,wol:le,il:Ae},Me=ei(o,"",je),Ee=gr({natal:k,daewoon:J?.gz,sewoon:_e,wolwoon:le,ilwoon:Ae}),$e=Gr({natal:k,daewoon:J?.gz,sewoon:_e,wolwoon:le,ilwoon:Ae,basis:s}),Ce=ar(_e),Pe=Jt(k[2]?.charAt(0)??"",_e.charAt(1)),Ie=Qt({baseBranch:F,targetBranch:_e.charAt(1),era:D,gaehwa:R});Z.push(Vn("",{:`${de} ${_e}`,:_e,:Object.fromEntries(Object.entries(Me.elementPercent).map(([pe,Le])=>[`${pe}(${os(N,pe)})`,Le])),:Me.totalsSub,:Xi(Ee,""),:wi($e,""),:Ce?{gz:_e,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:_e,unseong:Pe},:{pos:"",gz:_e,shinsal:Ie}}))}if(le){const je={dae:J?J.gz:null,se:_e,wol:le,il:Ae},Me=ei(o,"",je),Ee=gr({natal:k,daewoon:J?.gz,sewoon:_e,wolwoon:le,ilwoon:Ae}),$e=Gr({natal:k,daewoon:J?.gz,sewoon:_e,wolwoon:le,ilwoon:Ae,basis:s}),Ce=ar(le),Pe=Jt(k[2]?.charAt(0)??"",le.charAt(1)),Ie=Qt({baseBranch:F,targetBranch:le.charAt(1),era:D,gaehwa:R});Z.push(Vn("",{:`${de}-${String(X).padStart(2,"0")} ${le}`,:le,:Object.fromEntries(Object.entries(Me.elementPercent).map(([pe,Le])=>[`${pe}(${os(N,pe)})`,Le])),:Me.totalsSub,:Xi(Ee,""),:wi($e,""),:Ce?{gz:le,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:le,unseong:Pe},:{pos:"",gz:le,shinsal:Ie}}))}}for(const V of _){const[J,I,G]=V.split("-").map(Number),oe=new Date(J,I-1,G,4,0);if(isNaN(oe.getTime()))continue;const ce=Bf(m,J,I),le=ce.length>0?ce[0]:null,_e=Pf(J,I),Ae=_e.length>0?_e[_e.length-1]:"",je=jt(new Date(J,I-1,15)),Me=xt(oe,te),Ee=Fe(je||""),$e=Fe(Ae||""),Ce=Fe(Me||""),Pe={dae:le?le.gz:null,se:$e||null,wol:Ee,il:Ce},Ie=ei(o,"",Pe),pe=gr({natal:k,daewoon:le?.gz,sewoon:$e||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0}),Le=Gr({natal:k,daewoon:le?.gz,sewoon:$e||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0,basis:s}),ue=ar(Ce),me=Jt(k[2]?.charAt(0)??"",Ce.charAt(1)),ze=Qt({baseBranch:F,targetBranch:Ce.charAt(1),era:D,gaehwa:R}),Be={:{:`${V} ${Ce}`,:Ce,:Object.fromEntries(Object.entries(Ie.elementPercent).map(([Ue,at])=>[`${Ue}(${os(N,Ue)})`,at])),:Ie.totalsSub,:Xi(pe,""),:wi(Le,""),:ue?{gz:Ce,nabeum:ue.name,element:ue.element,code:ue.code}:null,:{pos:"",gz:Ce,unseong:me},:{pos:"",gz:Ce,shinsal:ze}}};Z.push(Vn(` ${V}`,Be))}}const Q=Z.filter(te=>te.trim().length>0).join(`

`),ve=JA({topic:x,subTopic:S,timeMode:"single",teacherMode:T}),W=["-----","  ","","1.       (////)  .","2.  ,        ."];ve&&W.push("","  ( )",ve);const ie=W.join(`
`);return[K,Q,ie].join(`

`)}function JA(e){const{topic:t,subTopic:n,timeMode:s="single",tab:o,relationMode:l,teacherMode:u}=e;if(!t)return"";const f=[];switch(u===!0?f.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):f.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),s==="single"?o?f.push(`-    (${o})   ,         .`,"-   ,             ."):f.push("-    ,          ."):f.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{f.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&f.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&f.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&f.push("-    ,   ,       /    ."),n==="personality_workStyle"&&f.push("-     ,     /      ."),n==="personality_stressPattern"&&f.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{f.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&f.push("-       ,        .");break}case"love":{f.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&f.push("-      ,     ,       ."),n==="love_timing"&&f.push("-     ,    ,       ."),n==="love_partner"&&f.push("-    ,        ."),n==="love_current"&&f.push("-       ,     ,     ."),n==="love_breakup"&&f.push("- /   ,      ,     ."),n==="love_marriageChange"&&f.push("-          ."),l==="solo"?f.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&f.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{f.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&f.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&f.push("-   (: , ,  ,  )    ."),n==="career_mode"&&f.push("- , , ,        ."),n==="career_jobChange"&&f.push("- /   ,    ,    ."),n==="career_promotion"&&f.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&f.push("- /   ,        .");break}case"money":{f.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&f.push("-   ( ,  ,  )   ."),n==="money_income"&&f.push("- , ,        ( , ,  )  ."),n==="money_spending"&&f.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&f.push("-   ,        ,   ."),n==="money_debt"&&f.push("- /      ,       ."),n==="money_invest"&&f.push("- /   ,          ."),n==="money_bigEvent"&&f.push("- , ,         ,      .");break}case"family":{f.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&f.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&f.push("-     (, ,  )     ."),n==="family_siblings"&&f.push("-   (  , / ) ."),n==="family_children"&&f.push("-   ,            .");break}case"health":{f.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&f.push("-   (:   /     )   ."),n==="health_physical"&&f.push("-    (, ,   )   ."),n==="health_mental"&&f.push("-    (, ,  ) ,        ."),n==="health_stress"&&f.push("-      ,      ."),n==="health_accident"&&f.push("- /   ,    ,   (, ,  )  .");break}case"move":{f.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&f.push("-    ,         ."),n==="move_timing"&&f.push("-    ,           ."),n==="move_targetHouse"&&f.push("-     ,   ,      ,      ."),n==="move_environment"&&f.push("- / (, ,  )     ."),n==="move_finance"&&f.push("- //      ,       .");break}case"social":{f.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&f.push("-       ."),n==="social_friend"&&f.push("-      ,      ."),n==="social_workspace"&&f.push("-      (, ,  ) ."),n==="social_network"&&f.push("-   (  vs   )    ,    ."),n==="social_conflict"&&f.push("-    ,  ,      ,    .");break}case"compat":{f.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&f.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&f.push("- /  ,  ,        ."),n==="compat_work"&&f.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&f.push("- /       ,       .");break}case"risk":{f.push("-   /   .","-  ,        ."),(!n||n==="overview")&&f.push("- , , ,           ."),n==="risk_money"&&f.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&f.push("-      (, ,   )  ."),n==="risk_health"&&f.push("- /  ,        ."),n==="risk_lawsuit"&&f.push("-  //     ,         ."),n==="risk_burnout"&&f.push("- /    ,          .");break}case"meta":{f.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&f.push("-     / ,     ."),n==="meta_cycle"&&f.push("- /   ,     ."),n==="meta_trigger"&&f.push("- , ,           ,   ."),n==="meta_usage"&&f.push("-         ,        .");break}}return f.join(`
`)}function $z({date:e,onChange:t,min:n="1900-01-01",max:s="2100-12-31"}){const o=C.useMemo(()=>{const u=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${f}-${m}`},[e]),l=u=>{if(!u)return;const[f,m,p]=u.split("-"),y=Number(f),_=Number(m),x=Number(p),S=e.getHours(),T=e.getMinutes(),k=new Date(y,_,0).getDate(),A=Math.min(x,k),M=new Date(y,_-1,A,S,T);Number.isNaN(M.getTime())||t(M)};return g.jsx("input",{type:"date",value:o,onChange:u=>l(u.target.value),min:n,max:s,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const ib={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},Iz=["","","","",""],QA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ej={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},A2={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},j2={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function oc(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const s=t.match(/([]).*?([])/);if(s){const o=QA[s[1]],l=ej[s[2]];return o&&l?`${o}${l}`:""}return""}function N2(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function O2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,s)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${QA[u[1]]}${ej[u[2]]}`:s<=2?"--":""})}function zz({ms:e,natal:t,chain:n,basis:s,lunarPillars:o,includeTenGod:l=!1}){const[u,f]=C.useState("analysis"),[m,p]=C.useState(!1),[y,_]=C.useState(!1),{date:x,setDate:S}=Yr();C.useEffect(()=>{S(new Date)},[e.id,S]);const{list:T,currentId:k}=ii.getState(),[A,M]=C.useState(""),[P,N]=C.useState("personality"),[D,R]=C.useState("overview"),z=C.useMemo(()=>A?T.find(ge=>ge.id===A)??null:null,[A,T]),[F,q]=C.useState(""),[Y,ne]=C.useState("solo");C.useEffect(()=>{P!=="love"&&P!=="compat"&&(ne("solo"),M(""))},[P]);const[K,Z]=C.useState(!1),[ee,Q]=C.useState(""),[ve,W]=C.useState([]),[ie,te]=C.useState(new Date().getFullYear()),[de,X]=C.useState(new Date().getFullYear()),[U,B]=C.useState(()=>{const ge=new Date;return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}),[V,J]=C.useState(()=>{const ge=new Date;return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}),[I,G]=C.useState(()=>{const ge=new Date,qe=ge.getFullYear(),ct=String(ge.getMonth()+1).padStart(2,"0"),gt=String(ge.getDate()).padStart(2,"0");return`${qe}-${ct}-${gt}`}),[oe,ce]=C.useState(()=>{const ge=new Date,qe=ge.getFullYear(),ct=String(ge.getMonth()+1).padStart(2,"0"),gt=String(ge.getDate()).padStart(2,"0");return`${qe}-${ct}-${gt}`}),le=1e3*60*60*24;function _e(ge,qe){return(qe.getFullYear()-ge.getFullYear())*12+(qe.getMonth()-ge.getMonth())}function Ae(ge){return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`}function je(ge){return`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}-${String(ge.getDate()).padStart(2,"0")}`}const Me=ge=>{te(ge)},Ee=ge=>{X(ge)},$e=()=>{const ge=ie;let qe=de;qe<ge&&(qe=ge),qe-ge>9&&(qe=ge+9),X(qe)},Ce=()=>{let ge=ie;const qe=de;qe<ge&&(ge=qe),qe-ge>9&&(ge=qe-9),te(ge)},Pe=ge=>{B(ge)},Ie=()=>{const[ge,qe]=U.split("-").map(Number),[ct,gt]=V.split("-").map(Number),tt=new Date(ge,qe-1),ht=new Date(ct,gt-1);if(ht<tt){J(Ae(tt));return}if(_e(tt,ht)>11){const pt=new Date(tt);pt.setMonth(tt.getMonth()+11),J(Ae(pt))}},pe=ge=>{J(ge)},Le=()=>{const[ge,qe]=U.split("-").map(Number),[ct,gt]=V.split("-").map(Number),tt=new Date(ge,qe-1),ht=new Date(ct,gt-1);if(ht<tt){B(Ae(ht));return}if(_e(tt,ht)>11){const pt=new Date(ht);pt.setMonth(ht.getMonth()-11),B(Ae(pt))}},ue=ge=>{G(ge)},me=()=>{if(!I||!oe)return;const[ge,qe,ct]=I.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);if(pt<wt){ce(je(wt));return}if(Math.floor((pt.getTime()-wt.getTime())/le)>7){const St=new Date(wt);St.setDate(wt.getDate()+6),ce(je(St))}},ze=ge=>{ce(ge)},Be=()=>{if(!I||!oe)return;const[ge,qe,ct]=I.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);if(wt>pt){G(je(pt));return}if(Math.floor((pt.getTime()-wt.getTime())/le)>7){const St=new Date(pt);St.setDate(pt.getDate()-6),G(je(St))}},Ue=e.mingSikType??"/",at=C.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const ge=x??new Date,qe=oc(dt(ge)||""),ct=oc(jt(ge)||""),gt=oc(xt(ge,Ue)||"");return{dae:null,se:qe||null,wol:ct||null,il:gt||null}},[n,x,Ue]),et=vd.getState().manualHour,Zt=C.useMemo(()=>O2(t),[t]),On=C.useMemo(()=>O2(o),[o]),En=C.useMemo(()=>{const ge=[...Zt];return(!ge[3]||ge[3]==="")&&et&&(ge[3]=et.stem+et.branch),ge},[Zt,et]),lr=C.useMemo(()=>{const ge=[...On];return(!ge[3]||ge[3]==="")&&et&&(ge[3]=et.stem+et.branch),ge},[On,et]),vr=C.useMemo(()=>{const ge=Number(e.birthDay?.slice(0,4)),qe=Number(e.birthDay?.slice(4,6)),ct=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(ge)||!Number.isFinite(qe)||!Number.isFinite(ct))return null;const gt=new Date(ge,qe-1,ct,12,4,0,0),tt=oc(dt(gt)||""),ht=oc(jt(gt)||""),wt=oc(xt(gt,Ue)||"");return[tt,ht,wt,""]},[e.birthDay,Ue]),dn=N2(En),Ct=N2(lr),[bn]=C.useState("solar"),hn=bn==="lunar"?Ct?"lunar":dn?"solar":"lunar":dn?"solar":Ct?"lunar":"solar",Zr=C.useMemo(()=>{const qe=[...hn==="lunar"?Ct?lr:dn?En:vr??["","","",""]:dn?En:Ct?lr:vr??["","","",""]];return(!qe[3]||qe[3]==="")&&et&&(qe[3]=et.stem+et.branch),qe},[hn,dn,Ct,En,lr,vr,et]),ra=C.useMemo(()=>et?et.stem+et.branch:Zr[3]||"",[et,Zr]);(!t||t.length===0)&&(t=Sm(e));const zs=et?et.stem+et.branch:"",Tn=C.useMemo(()=>{const ge=Sm(e);return zs&&zs.length===2&&(ge[3]=zs),ge},[e,zs]),Dn=C.useMemo(()=>OA({natal:Tn,tab:F,chain:at,hourKey:ra}),[Tn,F,at,ra]);function oi(ge){return NA(ge,{criteriaMode:"modern",useHarmonyOverlay:!0})}const Nr=oi(Tn),cr=C.useMemo(()=>Fy(Nr),[Nr]),gs=C.useMemo(()=>nA(cr),[cr]),sa=C.useMemo(()=>{const ge=UA(e).slice(0,10),qe=e.birthDay?Number(e.birthDay.slice(0,4)):0;return ge.map((ct,gt)=>{const tt=ct.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),ht=tt?Number(tt[1]):0,wt=tt?Number(tt[2]):1,pt=1,In=tt?tt[3]:"",St=qe>0?Uz(qe,ht):gt*10;return{gz:In,age:St,startYear:ht,startMonth:wt,startDay:pt,endYear:ht+10}})},[e]),Ja=j2[P],Qa=C.useMemo(()=>e?Mz({ms:e,natal:Tn,chain:at,basis:s,tab:F,unified:Dn,percent:cr,category:gs,topic:P,subTopic:D,relationMode:Y,teacherMode:y}):"",[e,s,l,F,at,Dn,cr,gs,Tn,P,D,Y,z,y]),Us=C.useMemo(()=>{if(!e||!K)return"";const ge=ve.map(tt=>sa[tt]).filter(tt=>tt),qe=ee===""?(()=>{const tt=[];for(let ht=ie;ht<=de&&tt.length<10;ht++)tt.push(ht);return tt})():[],ct=ee===""?(()=>{const tt=[],[ht,wt]=U.split("-").map(Number),[pt,In]=V.split("-").map(Number),St=new Date(ht,wt-1),aa=new Date(pt,In-1);for(;St<=aa&&tt.length<12;)tt.push(`${St.getFullYear()}-${String(St.getMonth()+1).padStart(2,"0")}`),St.setMonth(St.getMonth()+1);return tt})():[],gt=ee===""?(()=>{const tt=[],[ht,wt,pt]=I.split("-").map(Number),[In,St,aa]=oe.split("-").map(Number),ro=new Date(ht,wt-1,pt,4,0,0),ys=new Date(In,St-1,aa,4,0,0);if(isNaN(ro.getTime())||isNaN(ys.getTime()))return tt;const Jn=new Date(ro);for(;Jn<=ys&&tt.length<31;){const Ai=Jn.getFullYear(),so=String(Jn.getMonth()+1).padStart(2,"0"),io=String(Jn.getDate()).padStart(2,"0");tt.push(`${Ai}-${so}-${io}`),Jn.setDate(Jn.getDate()+1)}return tt})():[];return Pz({ms:e,natal:Tn,basis:s,unified:Dn,percent:cr,category:gs,selectedDaeList:ge,daeList:sa,seYears:qe,wolMonths:ct,ilDays:gt,topic:P,subTopic:D,teacherMode:y})},[e,K,ee,ve,sa,ie,de,U,V,I,oe,Tn,s,l,Dn,cr,gs,P,D,Y,z,y]),eo=C.useMemo(()=>{if(Y!=="couple"||!z)return"";const ge=z.name||"";let qe="";if(z.birthDay&&z.birthDay.length===8){const ht=z.birthDay.slice(0,4),wt=z.birthDay.slice(4,6),pt=z.birthDay.slice(6,8);qe=`${ht}-${wt}-${pt}`}else z.birthDay&&(qe=z.birthDay);let ct="";if(z.birthTime&&z.birthTime.trim().length>0){const wt=z.birthTime.trim().padEnd(4,"0").slice(0,4),pt=wt.slice(0,2),In=wt.slice(2,4);ct=`${pt}:${In}`}let gt="";z.birthPlace&&typeof z.birthPlace=="object"&&(gt=z.birthPlace.name||"");const tt=z.ganji||z.ganjiText||"";return["","","[  - () ]"," ",`-  : ${ge}`,`-  : ${qe}`,`-   : ${ct}`,`-   : ${gt}`,`- ${tt}`,""," //,       ,","           .",""].join(`
`)},[Y,z]),ia=K?Us:Qa,to=C.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),no=m?`   ,   .
`:"",$n=C.useMemo(()=>ia||eo?`${ia}${eo}
${to}${no}`:"",[to,no,ia,eo]),[Ve,ki]=C.useState(""),[Or,ur]=C.useState([]);C.useEffect(()=>{ki(""),ur([])},[e.id]);const sn=C.useMemo(()=>{if(!$n)return"";if(Or.length===0)return $n;const ge=["","-----","     ","",...Or.map((qe,ct)=>`${ct+1}. ${qe}`)];return`${$n}
${ge.join(`
`)}`},[$n,Or]),[kn,Vr]=C.useState(!1);async function bs(){if(sn)try{await navigator.clipboard.writeText(sn),Vr(!0),setTimeout(()=>Vr(!1),1200)}catch{Vr(!1)}}return e?g.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),g.jsx("button",{onClick:bs,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${kn?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:kn?"!":" "})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),g.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(ib).map(ge=>g.jsx("button",{onClick:()=>f(ge),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===ge?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:ib[ge].label},ge))}),g.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:ib[u].desc}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:ge=>p(ge.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:y,onChange:ge=>_(ge.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),g.jsx("select",{value:P,onChange:ge=>{const qe=ge.target.value;N(qe);const ct=j2[qe];ct.length>0?R(ct[0].key):R("overview"),qe!=="love"&&qe!=="compat"&&ne("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(A2).map(ge=>{const qe=A2[ge];return g.jsx("option",{value:ge,children:qe.label},ge)})}),Ja.length>0&&g.jsx("select",{value:D,onChange:ge=>R(ge.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Ja.map(ge=>g.jsx("option",{value:ge.key,children:ge.label},ge.key))})]}),(P==="love"||P==="compat")&&g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>ne("solo"),className:`px-3 py-1 cursor-pointer ${Y==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>ne("couple"),className:`px-3 py-1 cursor-pointer ${Y==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),Y==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:A,onChange:ge=>M(ge.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:"  "}),T.filter(ge=>ge.id!==k).map(ge=>g.jsxs("option",{value:ge.id,children:[ge.name||" "," ",ge.birthDay?`(${ge.birthDay})`:""]},ge.id))]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Z(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${K?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsx("button",{onClick:()=>Z(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${K?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!K&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:Iz.map(ge=>g.jsx("button",{onClick:()=>q(ge),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${F===ge?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:ge},ge))}),g.jsx($z,{date:x,onChange:S})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"     ."}),g.jsx("p",{children:"  ,  ."}),g.jsx("p",{children:"   ,   ."})]})]}),K&&g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(ge=>g.jsx("button",{onClick:()=>Q(ge),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${ee===ge?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:ge},ge))}),ee===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:sa.map((ge,qe)=>g.jsxs("button",{onClick:()=>{W(ct=>ct.includes(qe)?ct.filter(gt=>gt!==qe):[...ct,qe])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${ve.includes(qe)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:ge.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[ge.age," (",ge.startYear,"~",ge.endYear,")"]})]},qe))})]}),ee===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",value:ie,onChange:ge=>Me(Number(ge.target.value)),onBlur:$e,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:de,onChange:ge=>Ee(Number(ge.target.value)),onBlur:Ce,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",de-ie+1,""]})]}),ee===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"month",value:U,onChange:ge=>Pe(ge.target.value),onBlur:Ie,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:V,onChange:ge=>pe(ge.target.value),onBlur:Le,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[ge,qe]=U.split("-").map(Number),[ct,gt]=V.split("-").map(Number);return(ct-ge)*12+(gt-qe)+1})(),""]})]}),ee===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"date",value:I,onChange:ge=>ue(ge.target.value),onBlur:me,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:oe,onChange:ge=>ze(ge.target.value),onBlur:Be,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[ge,qe,ct]=I.split("-").map(Number),[gt,tt,ht]=oe.split("-").map(Number),wt=new Date(ge,qe-1,ct,4,0,0),pt=new Date(gt,tt-1,ht,4,0,0);return isNaN(wt.getTime())||isNaN(pt.getTime())||pt<wt?0:Math.floor((pt.getTime()-wt.getTime())/le)+1})(),""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",ee,"   ."]}),g.jsx("p",{children:"    ."})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Or.length>0&&g.jsx("button",{type:"button",onClick:()=>ur([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:Ve,onChange:ge=>ki(ge.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-[16px] desk:text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:()=>{const ge=Ve.trim();ge&&(ur(qe=>[...qe,ge]),ki(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Or.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Or.length,""]})]}),Or.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Or.map((ge,qe)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[qe+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:ge}),g.jsx("button",{type:"button",onClick:()=>{ur(ct=>ct.filter((gt,tt)=>tt!==qe))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},qe))})]}),g.jsx("textarea",{readOnly:!0,value:sn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function Uz(e,t){return t-e+1}function Hz(e){const t=Yr(o=>o.date),n=Yr(o=>o.rule),s=Ed(e);return C.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const o=Zm(s,t),l=o>=0?s[o]?.gz??null:null,u=dt(t),f=jt(t),m=xt(t,n);return{dae:l,se:u,wol:f,il:m}},[e,s,t,n])}function Gz(){const[e,t]=C.useState(!1),[n,s]=C.useState(!1),[o,l]=C.useState(!1),[u,f]=C.useState(!1),[m,p]=C.useState(!1);C.useEffect(()=>{setTimeout(()=>t(!0),50),setTimeout(()=>s(!0),250),setTimeout(()=>l(!0),450)},[]);const y=async()=>{if(!m){fO.error(`   
  .`);return}const{error:_}=await it.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});_&&(console.error("Google Login Error:",_),alert("   ."))};return g.jsxs("main",{className:`flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4 transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:`transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} absolute top-16 text-center`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:""}),g.jsx("p",{className:"text-sm text-neutral-400",children:"    "})]}),g.jsxs("div",{className:`w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800 transition-all duration-500 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,children:[g.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"     "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:m,onChange:()=>p(!m),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>f(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("button",{type:"button",onClick:y,"aria-disabled":!m,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
            ${m?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-pointer"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]})]}),g.jsx(G2,{position:"top-center",toastOptions:{duration:2e3}}),u&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>f(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:_=>_.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>f(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})})]})}const Fz={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function qz(){const[e,t]=C.useState(!1),[n,s]=C.useState(!1),[o,l]=C.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin")),u=ii(_=>_.migrateLocalToServer),f=ii(_=>_.loadFromServer),m=ii(_=>_.loading),p=Wn(_=>_.loaded),y=Wn(_=>_.loadFromServer);return C.useEffect(()=>{const _=()=>{l(window.location.pathname.startsWith("/admin"))};return typeof window<"u"&&window.addEventListener("popstate",_),()=>{typeof window<"u"&&window.removeEventListener("popstate",_)}},[]),C.useEffect(()=>{const _=it;(async()=>{const{data:T,error:k}=await _.auth.getSession();if(k){s(!1),t(!0);return}s(!!T.session),t(!0)})();const{data:{subscription:S}}=_.auth.onAuthStateChange((T,k)=>{s(!!k),t(!0)});return()=>{S.unsubscribe()}},[]),C.useEffect(()=>{n&&(async()=>(await u(),await f(),await y()))()},[n,u,f,y]),e?n?o?g.jsx(qI,{}):p?m?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})}):g.jsx(Yz,{isLoggedIn:n}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})}):g.jsx(Gz,{}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  .."})})}function Yz({isLoggedIn:e}){const{list:t}=ii(),[n,s]=C.useState(()=>t.length>0?t[0].id:""),[o,l]=C.useState(!1),[u,f]=C.useState(!1),[m,p]=C.useState(null),[y,_]=C.useState(!1),[x,S]=C.useState(!1),[T,k]=C.useState(!1);C.useEffect(()=>{_(!0),S(!1)},[]);const A=C.useMemo(()=>t.find(Q=>Q.id===n)??t[0],[t,n]),M=t.length>0&&!!A&&typeof A.birthDay=="string",P=M?A:Fz,N=C.useMemo(()=>Sm(P),[P]),D=Hz(P),R=Q=>typeof Q=="string"&&Q.length>=2,z=Q=>Array.isArray(Q)&&Q.length===4&&Q.every(R),F=()=>l(!0),{settings:q,loadFromServer:Y,saveToServer:ne,loaded:K}=Wn();C.useEffect(()=>{e&&Y()},[e,Y]),C.useEffect(()=>{!e||!K||ne()},[e,K,q,ne]);const Z=q.sinsalBase===""?"day":"year",ee=q.sinsalBase===""?"day":"year";return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(SI,{onOpenSidebar:()=>f(!0),onAddNew:F,onOpenCustom:()=>k(!0)}),g.jsx(bz,{open:T,onClose:()=>k(!1),onSave:Q=>{s(Q.id),_(!1),S(!1),f(!1)}}),g.jsx(G2,{position:"top-center"}),g.jsx(BI,{open:u,onClose:()=>f(!1),onView:Q=>{s(Q.id),f(!1),_(!1),S(!1);const ve=new Date;ve.setHours(12,0,0,0),Yr.getState().setDate(ve),M&&A.id===Q.id?(_(!1),S(!1),f(!1)):(s(Q.id),f(!1),_(!1),S(!1))},onAddNew:F,onEdit:Q=>{p(Q),s(Q.id),f(!1),_(!1),S(!1)},onDeleteView:()=>{const Q=ii.getState().list[0]?.id??"";s(Q),_(!0),S(!1)}}),y&&g.jsx(yC,{}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(p7,{onSave:Q=>{s(Q.id),_(!1),S(!1),f(!1),requestAnimationFrame(()=>l(!1))},onClose:()=>l(!1)})})})]}),M&&!y&&!x&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(k4,{data:A,hourTable:A.mingSikType??"/"})}),g.jsx(oz,{ms:A}),g.jsx("div",{children:g.jsx(Z8,{data:A})}),g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(zz,{ms:A,natal:z(N)?N:[],chain:D,basis:{voidBasis:Z,samjaeBasis:ee},includeTenGod:!0,lunarPillars:[]})})]}),x&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(iz,{people:t})}),m&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(GI,{item:m,onClose:()=>{p(null)}})})}),g.jsx(jI,{onShowToday:()=>{_(!0),S(!1)},onShowCouple:()=>{S(!0),_(!1)}}),g.jsx(az,{})]})}TN.createRoot(document.getElementById("root")).render(g.jsx(C.StrictMode,{children:g.jsx(qz,{})}));
