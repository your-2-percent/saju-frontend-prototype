function bj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ci(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mp(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var g1={exports:{}},em={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _M;function tq(){if(_M)return em;_M=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return em.Fragment=t,em.jsx=n,em.jsxs=n,em}var SM;function nq(){return SM||(SM=1,g1.exports=tq()),g1.exports}var g=nq();const P$="harim.theme",cE="harim.settings.v1";function R$(){try{const e=localStorage.getItem(P$);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(cE);if(t){const r=JSON.parse(t)?.theme;if(r==="dark"||r==="light")return r}return null}catch{return null}}function L$(e){try{localStorage.setItem(P$,e);const t=localStorage.getItem(cE),n=t?JSON.parse(t):{};localStorage.setItem(cE,JSON.stringify({...n,theme:e}))}catch{}}function I$(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=R$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");I$(e)}catch{}})();var b1={exports:{}},tm={},y1={exports:{}},v1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kM;function rq(){return kM||(kM=1,(function(e){function t(F,Z){var Q=F.length;F.push(Z);e:for(;0<Q;){var le=Q-1>>>1,se=F[le];if(0<i(se,Z))F[le]=Z,F[Q]=se,Q=le;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Z=F[0],Q=F.pop();if(Q!==Z){F[0]=Q;e:for(var le=0,se=F.length,W=se>>>1;le<W;){var re=2*(le+1)-1,ee=F[re],he=re+1,J=F[he];if(0>i(ee,Q))he<se&&0>i(J,ee)?(F[le]=J,F[he]=Q,le=he):(F[le]=ee,F[re]=Q,le=re);else if(he<se&&0>i(J,Q))F[le]=J,F[he]=Q,le=he;else break e}}return Z}function i(F,Z){var Q=F.sortIndex-Z.sortIndex;return Q!==0?Q:F.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,b=3,y=!1,k=!1,w=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function C(F){for(var Z=n(d);Z!==null;){if(Z.callback===null)r(d);else if(Z.startTime<=F)r(d),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(d)}}function M(F){if(w=!1,C(F),!k)if(n(u)!==null)k=!0,P||(P=!0,B());else{var Z=n(d);Z!==null&&V(M,Z.startTime-F)}}var P=!1,I=-1,z=5,K=-1;function G(){return _?!0:!(e.unstable_now()-K<z)}function H(){if(_=!1,P){var F=e.unstable_now();K=F;var Z=!0;try{e:{k=!1,w&&(w=!1,N(I),I=-1),y=!0;var Q=b;try{t:{for(C(F),m=n(u);m!==null&&!(m.expirationTime>F&&G());){var le=m.callback;if(typeof le=="function"){m.callback=null,b=m.priorityLevel;var se=le(m.expirationTime<=F);if(F=e.unstable_now(),typeof se=="function"){m.callback=se,C(F),Z=!0;break t}m===n(u)&&r(u),C(F)}else r(u);m=n(u)}if(m!==null)Z=!0;else{var W=n(d);W!==null&&V(M,W.startTime-F),Z=!1}}break e}finally{m=null,b=Q,y=!1}Z=void 0}}finally{Z?B():P=!1}}}var B;if(typeof j=="function")B=function(){j(H)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=H,B=function(){X.postMessage(null)}}else B=function(){T(H,0)};function V(F,Z){I=T(function(){F(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(F){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var Q=b;b=Z;try{return F()}finally{b=Q}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(F,Z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=b;b=F;try{return Z()}finally{b=Q}},e.unstable_scheduleCallback=function(F,Z,Q){var le=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,F={id:h++,callback:Z,priorityLevel:F,startTime:Q,expirationTime:se,sortIndex:-1},Q>le?(F.sortIndex=Q,t(d,F),n(u)===null&&F===n(d)&&(w?(N(I),I=-1):w=!0,V(M,Q-le))):(F.sortIndex=se,t(u,F),k||y||(k=!0,P||(P=!0,B()))),F},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(F){var Z=b;return function(){var Q=b;b=Z;try{return F.apply(this,arguments)}finally{b=Q}}}})(v1)),v1}var EM;function iq(){return EM||(EM=1,y1.exports=rq()),y1.exports}var x1={exports:{}},ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jM;function aq(){if(jM)return ht;jM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function y(W){return W===null||typeof W!="object"?null:(W=b&&W[b]||W["@@iterator"],typeof W=="function"?W:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(W,re,ee){this.props=W,this.context=re,this.refs=_,this.updater=ee||k}T.prototype.isReactComponent={},T.prototype.setState=function(W,re){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,re,"setState")},T.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function N(){}N.prototype=T.prototype;function j(W,re,ee){this.props=W,this.context=re,this.refs=_,this.updater=ee||k}var C=j.prototype=new N;C.constructor=j,w(C,T.prototype),C.isPureReactComponent=!0;var M=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function K(W,re,ee){var he=ee.ref;return{$$typeof:e,type:W,key:re,ref:he!==void 0?he:null,props:ee}}function G(W,re){return K(W.type,re,W.props)}function H(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function B(W){var re={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ee){return re[ee]})}var q=/\/+/g;function X(W,re){return typeof W=="object"&&W!==null&&W.key!=null?B(""+W.key):re.toString(36)}function V(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(P,P):(W.status="pending",W.then(function(re){W.status==="pending"&&(W.status="fulfilled",W.value=re)},function(re){W.status==="pending"&&(W.status="rejected",W.reason=re)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function F(W,re,ee,he,J){var ae=typeof W;(ae==="undefined"||ae==="boolean")&&(W=null);var me=!1;if(W===null)me=!0;else switch(ae){case"bigint":case"string":case"number":me=!0;break;case"object":switch(W.$$typeof){case e:case t:me=!0;break;case h:return me=W._init,F(me(W._payload),re,ee,he,J)}}if(me)return J=J(W),me=he===""?"."+X(W,0):he,M(J)?(ee="",me!=null&&(ee=me.replace(q,"$&/")+"/"),F(J,re,ee,"",function(je){return je})):J!=null&&(H(J)&&(J=G(J,ee+(J.key==null||W&&W.key===J.key?"":(""+J.key).replace(q,"$&/")+"/")+me)),re.push(J)),1;me=0;var pe=he===""?".":he+":";if(M(W))for(var te=0;te<W.length;te++)he=W[te],ae=pe+X(he,te),me+=F(he,re,ee,ae,J);else if(te=y(W),typeof te=="function")for(W=te.call(W),te=0;!(he=W.next()).done;)he=he.value,ae=pe+X(he,te++),me+=F(he,re,ee,ae,J);else if(ae==="object"){if(typeof W.then=="function")return F(V(W),re,ee,he,J);throw re=String(W),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return me}function Z(W,re,ee){if(W==null)return W;var he=[],J=0;return F(W,he,"","",function(ae){return re.call(ee,ae,J++)}),he}function Q(W){if(W._status===-1){var re=W._result;re=re(),re.then(function(ee){(W._status===0||W._status===-1)&&(W._status=1,W._result=ee)},function(ee){(W._status===0||W._status===-1)&&(W._status=2,W._result=ee)}),W._status===-1&&(W._status=0,W._result=re)}if(W._status===1)return W._result.default;throw W._result}var le=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},se={map:Z,forEach:function(W,re,ee){Z(W,function(){re.apply(this,arguments)},ee)},count:function(W){var re=0;return Z(W,function(){re++}),re},toArray:function(W){return Z(W,function(re){return re})||[]},only:function(W){if(!H(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return ht.Activity=m,ht.Children=se,ht.Component=T,ht.Fragment=n,ht.Profiler=i,ht.PureComponent=j,ht.StrictMode=r,ht.Suspense=u,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ht.__COMPILER_RUNTIME={__proto__:null,c:function(W){return I.H.useMemoCache(W)}},ht.cache=function(W){return function(){return W.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function(W,re,ee){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var he=w({},W.props),J=W.key;if(re!=null)for(ae in re.key!==void 0&&(J=""+re.key),re)!z.call(re,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&re.ref===void 0||(he[ae]=re[ae]);var ae=arguments.length-2;if(ae===1)he.children=ee;else if(1<ae){for(var me=Array(ae),pe=0;pe<ae;pe++)me[pe]=arguments[pe+2];he.children=me}return K(W.type,J,he)},ht.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},ht.createElement=function(W,re,ee){var he,J={},ae=null;if(re!=null)for(he in re.key!==void 0&&(ae=""+re.key),re)z.call(re,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(J[he]=re[he]);var me=arguments.length-2;if(me===1)J.children=ee;else if(1<me){for(var pe=Array(me),te=0;te<me;te++)pe[te]=arguments[te+2];J.children=pe}if(W&&W.defaultProps)for(he in me=W.defaultProps,me)J[he]===void 0&&(J[he]=me[he]);return K(W,ae,J)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(W){return{$$typeof:l,render:W}},ht.isValidElement=H,ht.lazy=function(W){return{$$typeof:h,_payload:{_status:-1,_result:W},_init:Q}},ht.memo=function(W,re){return{$$typeof:d,type:W,compare:re===void 0?null:re}},ht.startTransition=function(W){var re=I.T,ee={};I.T=ee;try{var he=W(),J=I.S;J!==null&&J(ee,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(P,le)}catch(ae){le(ae)}finally{re!==null&&ee.types!==null&&(re.types=ee.types),I.T=re}},ht.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ht.use=function(W){return I.H.use(W)},ht.useActionState=function(W,re,ee){return I.H.useActionState(W,re,ee)},ht.useCallback=function(W,re){return I.H.useCallback(W,re)},ht.useContext=function(W){return I.H.useContext(W)},ht.useDebugValue=function(){},ht.useDeferredValue=function(W,re){return I.H.useDeferredValue(W,re)},ht.useEffect=function(W,re){return I.H.useEffect(W,re)},ht.useEffectEvent=function(W){return I.H.useEffectEvent(W)},ht.useId=function(){return I.H.useId()},ht.useImperativeHandle=function(W,re,ee){return I.H.useImperativeHandle(W,re,ee)},ht.useInsertionEffect=function(W,re){return I.H.useInsertionEffect(W,re)},ht.useLayoutEffect=function(W,re){return I.H.useLayoutEffect(W,re)},ht.useMemo=function(W,re){return I.H.useMemo(W,re)},ht.useOptimistic=function(W,re){return I.H.useOptimistic(W,re)},ht.useReducer=function(W,re,ee){return I.H.useReducer(W,re,ee)},ht.useRef=function(W){return I.H.useRef(W)},ht.useState=function(W){return I.H.useState(W)},ht.useSyncExternalStore=function(W,re,ee){return I.H.useSyncExternalStore(W,re,ee)},ht.useTransition=function(){return I.H.useTransition()},ht.version="19.2.1",ht}var TM;function Nf(){return TM||(TM=1,x1.exports=aq()),x1.exports}var w1={exports:{}},Ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM;function oq(){if(AM)return Ur;AM=1;var e=Nf();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ur.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,h)},Ur.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Ur.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Ur.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ur.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:m,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ur.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Ur.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ur.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Ur.requestFormReset=function(u){r.d.r(u)},Ur.unstable_batchedUpdates=function(u,d){return u(d)},Ur.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Ur.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ur.version="19.2.1",Ur}var NM;function $$(){if(NM)return w1.exports;NM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),w1.exports=oq(),w1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM;function sq(){if(OM)return tm;OM=1;var e=iq(),t=Nf(),n=$$();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,p=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(p=c.return),s=c.return;while(s)}return c.tag===3?p:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function l(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var p=s,x=c;;){var A=p.return;if(A===null)break;var O=A.alternate;if(O===null){if(x=A.return,x!==null){p=x;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===p)return u(A),s;if(O===x)return u(A),c;O=O.sibling}throw Error(r(188))}if(p.return!==x.return)p=A,x=O;else{for(var $=!1,Y=A.child;Y;){if(Y===p){$=!0,p=A,x=O;break}if(Y===x){$=!0,x=A,p=O;break}Y=Y.sibling}if(!$){for(Y=O.child;Y;){if(Y===p){$=!0,p=O,x=A;break}if(Y===x){$=!0,x=O,p=A;break}Y=Y.sibling}if(!$)throw Error(r(189))}}if(p.alternate!==x)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?s:c}function h(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=h(s),c!==null)return c;s=s.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var q=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case K:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case j:return s.displayName||"Context";case N:return(s._context.displayName||"Context")+".Consumer";case C:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return c=s.displayName||null,c!==null?c:X(s.type)||"Memo";case z:c=s._payload,s=s._init;try{return X(s(c))}catch{}}return null}var V=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},le=[],se=-1;function W(s){return{current:s}}function re(s){0>se||(s.current=le[se],le[se]=null,se--)}function ee(s,c){se++,le[se]=s.current,s.current=c}var he=W(null),J=W(null),ae=W(null),me=W(null);function pe(s,c){switch(ee(ae,c),ee(J,s),ee(he,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?YC(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=YC(c),s=qC(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(he),ee(he,s)}function te(){re(he),re(J),re(ae)}function je(s){s.memoizedState!==null&&ee(me,s);var c=he.current,p=qC(c,s.type);c!==p&&(ee(J,s),ee(he,p))}function xe(s){J.current===s&&(re(he),re(J)),me.current===s&&(re(me),Zh._currentValue=Q)}var ue,Ee;function Me(s){if(ue===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);ue=c&&c[1]||"",Ee=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+s+Ee}var Ie=!1;function Ke(s,c){if(!s||Ie)return"";Ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(we){var ve=we}Reflect.construct(s,[],Ne)}else{try{Ne.call()}catch(we){ve=we}s.call(Ne.prototype)}}else{try{throw Error()}catch(we){ve=we}(Ne=s())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=x.DetermineComponentFrameRoot(),$=O[0],Y=O[1];if($&&Y){var ie=$.split(`
`),be=Y.split(`
`);for(A=x=0;x<ie.length&&!ie[x].includes("DetermineComponentFrameRoot");)x++;for(;A<be.length&&!be[A].includes("DetermineComponentFrameRoot");)A++;if(x===ie.length||A===be.length)for(x=ie.length-1,A=be.length-1;1<=x&&0<=A&&ie[x]!==be[A];)A--;for(;1<=x&&0<=A;x--,A--)if(ie[x]!==be[A]){if(x!==1||A!==1)do if(x--,A--,0>A||ie[x]!==be[A]){var ke=`
`+ie[x].replace(" at new "," at ");return s.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",s.displayName)),ke}while(1<=x&&0<=A);break}}}finally{Ie=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?Me(p):""}function mt(s,c){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return s.child!==c&&c!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Ke(s.type,!1);case 11:return Ke(s.type.render,!1);case 1:return Ke(s.type,!0);case 31:return Me("Activity");default:return""}}function pt(s){try{var c="",p=null;do c+=mt(s,p),p=s,s=s.return;while(s);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var De=Object.prototype.hasOwnProperty,ze=e.unstable_scheduleCallback,Ge=e.unstable_cancelCallback,oe=e.unstable_shouldYield,Ce=e.unstable_requestPaint,Ue=e.unstable_now,rt=e.unstable_getCurrentPriorityLevel,xt=e.unstable_ImmediatePriority,st=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Fe=e.unstable_LowPriority,We=e.unstable_IdlePriority,bt=e.log,At=e.unstable_setDisableYieldValue,Nt=null,Mt=null;function Kt(s){if(typeof bt=="function"&&At(s),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Nt,s)}catch{}}var rn=Math.clz32?Math.clz32:Pe,si=Math.log,zn=Math.LN2;function Pe(s){return s>>>=0,s===0?32:31-(si(s)/zn|0)|0}var at=256,zt=262144,Er=4194304;function li(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hu(s,c,p){var x=s.pendingLanes;if(x===0)return 0;var A=0,O=s.suspendedLanes,$=s.pingedLanes;s=s.warmLanes;var Y=x&134217727;return Y!==0?(x=Y&~O,x!==0?A=li(x):($&=Y,$!==0?A=li($):p||(p=Y&~s,p!==0&&(A=li(p))))):(Y=x&~O,Y!==0?A=li(Y):$!==0?A=li($):p||(p=x&~s,p!==0&&(A=li(p)))),A===0?0:c!==0&&c!==A&&(c&O)===0&&(O=A&-A,p=c&-c,O>=p||O===32&&(p&4194048)!==0)?c:A}function bc(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Sw(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0(){var s=Er;return Er<<=1,(Er&62914560)===0&&(Er=4194304),s}function Jf(s){for(var c=[],p=0;31>p;p++)c.push(s);return c}function es(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function kw(s,c,p,x,A,O){var $=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var Y=s.entanglements,ie=s.expirationTimes,be=s.hiddenUpdates;for(p=$&~p;0<p;){var ke=31-rn(p),Ne=1<<ke;Y[ke]=0,ie[ke]=-1;var ve=be[ke];if(ve!==null)for(be[ke]=null,ke=0;ke<ve.length;ke++){var we=ve[ke];we!==null&&(we.lane&=-536870913)}p&=~Ne}x!==0&&b0(s,x,0),O!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=O&~($&~c))}function b0(s,c,p){s.pendingLanes|=c,s.suspendedLanes&=~c;var x=31-rn(c);s.entangledLanes|=c,s.entanglements[x]=s.entanglements[x]|1073741824|p&261930}function y0(s,c){var p=s.entangledLanes|=c;for(s=s.entanglements;p;){var x=31-rn(p),A=1<<x;A&c|s[x]&c&&(s[x]|=c),p&=~A}}function v0(s,c){var p=c&-c;return p=(p&42)!==0?1:ci(p),(p&(s.suspendedLanes|c))!==0?0:p}function ci(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ze(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qf(){var s=Z.p;return s!==0?s:(s=window.event,s===void 0?32:pM(s.type))}function eh(s,c){var p=Z.p;try{return Z.p=s,c()}finally{Z.p=p}}var za=Math.random().toString(36).slice(2),Un="__reactFiber$"+za,ur="__reactProps$"+za,ts="__reactContainer$"+za,mo="__reactEvents$"+za,x0="__reactListeners$"+za,Ew="__reactHandles$"+za,w0="__reactResources$"+za,yc="__reactMarker$"+za;function th(s){delete s[Un],delete s[ur],delete s[mo],delete s[x0],delete s[Ew]}function ns(s){var c=s[Un];if(c)return c;for(var p=s.parentNode;p;){if(c=p[ts]||p[Un]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(s=QC(s);s!==null;){if(p=s[Un])return p;s=QC(s)}return c}s=p,p=s.parentNode}return null}function ol(s){if(s=s[Un]||s[ts]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function po(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function sl(s){var c=s[w0];return c||(c=s[w0]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Fn(s){s[yc]=!0}var _0=new Set,S0={};function rs(s,c){go(s,c),go(s+"Capture",c)}function go(s,c){for(S0[s]=c,s=0;s<c.length;s++)_0.add(c[s])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nh={},rh={};function xc(s){return De.call(rh,s)?!0:De.call(nh,s)?!1:vc.test(s)?rh[s]=!0:(nh[s]=!0,!1)}function wt(s,c,p){if(xc(c))if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+p)}}function Wt(s,c,p){if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+p)}}function ui(s,c,p,x){if(x===null)s.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(c,p,""+x)}}function er(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function is(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ih(s,c,p){var x=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,O=x.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function($){p=""+$,O.call(this,$)}}),Object.defineProperty(s,c,{enumerable:x.enumerable}),{getValue:function(){return p},setValue:function($){p=""+$},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function ft(s){if(!s._valueTracker){var c=is(s)?"checked":"value";s._valueTracker=ih(s,c,""+s[c])}}function hn(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var p=c.getValue(),x="";return s&&(x=is(s)?s.checked?"true":"false":s.value),s=x,s!==p?(c.setValue(s),!0):!1}function ll(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Gu=/[\n"\\]/g;function ln(s){return s.replace(Gu,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ah(s,c,p,x,A,O,$,Y){s.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.type=$:s.removeAttribute("type"),c!=null?$==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+er(c)):s.value!==""+er(c)&&(s.value=""+er(c)):$!=="submit"&&$!=="reset"||s.removeAttribute("value"),c!=null?Ua(s,$,er(c)):p!=null?Ua(s,$,er(p)):x!=null&&s.removeAttribute("value"),A==null&&O!=null&&(s.defaultChecked=!!O),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+er(Y):s.removeAttribute("name")}function wc(s,c,p,x,A,O,$,Y){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.type=O),c!=null||p!=null){if(!(O!=="submit"&&O!=="reset"||c!=null)){ft(s);return}p=p!=null?""+er(p):"",c=c!=null?""+er(c):p,Y||c===s.value||(s.value=c),s.defaultValue=c}x=x??A,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=Y?s.checked:!!x,s.defaultChecked=!!x,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(s.name=$),ft(s)}function Ua(s,c,p){c==="number"&&ll(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function Qt(s,c,p,x){if(s=s.options,c){c={};for(var A=0;A<p.length;A++)c["$"+p[A]]=!0;for(p=0;p<s.length;p++)A=c.hasOwnProperty("$"+s[p].value),s[p].selected!==A&&(s[p].selected=A),A&&x&&(s[p].defaultSelected=!0)}else{for(p=""+er(p),c=null,A=0;A<s.length;A++){if(s[A].value===p){s[A].selected=!0,x&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function bo(s,c,p){if(c!=null&&(c=""+er(c),c!==s.value&&(s.value=c),p==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=p!=null?""+er(p):""}function cl(s,c,p,x){if(c==null){if(x!=null){if(p!=null)throw Error(r(92));if(V(x)){if(1<x.length)throw Error(r(93));x=x[0]}p=x}p==null&&(p=""),c=p}p=er(c),s.defaultValue=p,x=s.textContent,x===p&&x!==""&&x!==null&&(s.value=x),ft(s)}function oa(s,c){if(c){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=c;return}}s.textContent=c}var oh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(s,c,p){var x=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?x?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":x?s.setProperty(c,p):typeof p!="number"||p===0||oh.has(c)?c==="float"?s.cssFloat=p:s[c]=(""+p).trim():s[c]=p+"px"}function Yu(s,c,p){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,p!=null){for(var x in p)!p.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var A in c)x=c[A],c.hasOwnProperty(A)&&p[A]!==x&&ul(s,A,x)}else for(var O in c)c.hasOwnProperty(O)&&ul(s,O,c[O])}function _c(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(s){return sh.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function di(){}var Ku=null;function Sc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fl=null,ct=null;function Pi(s){var c=ol(s);if(c&&(s=c.stateNode)){var p=s[ur]||null;e:switch(s=c.stateNode,c.type){case"input":if(ah(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ln(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var x=p[c];if(x!==s&&x.form===s.form){var A=x[ur]||null;if(!A)throw Error(r(90));ah(x,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<p.length;c++)x=p[c],x.form===s.form&&hn(x)}break e;case"textarea":bo(s,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Qt(s,!!p.multiple,c,!1)}}}var Ut=!1;function lh(s,c,p){if(Ut)return s(c,p);Ut=!0;try{var x=s(c);return x}finally{if(Ut=!1,(fl!==null||ct!==null)&&(vg(),fl&&(c=fl,s=ct,ct=fl=null,Pi(c),s)))for(c=0;c<s.length;c++)Pi(s[c])}}function as(s,c){var p=s.stateNode;if(p===null)return null;var x=p[ur]||null;if(x===null)return null;p=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kc=!1;if(Ri)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){kc=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{kc=!1}var sa=null,os=null,An=null;function yo(){if(An)return An;var s,c=os,p=c.length,x,A="value"in sa?sa.value:sa.textContent,O=A.length;for(s=0;s<p&&c[s]===A[s];s++);var $=p-s;for(x=1;x<=$&&c[p-x]===A[O-x];x++);return An=A.slice(s,1<x?1-x:void 0)}function Ec(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function jc(){return!0}function k0(){return!1}function jr(s){function c(p,x,A,O,$){this._reactName=p,this._targetInst=A,this.type=x,this.nativeEvent=O,this.target=$,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(p=s[Y],this[Y]=p?p(O):O[Y]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?jc:k0,this.isPropagationStopped=k0,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),c}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wu=jr(Fa),hl=m({},Fa,{view:0,detail:0}),Et=jr(hl),ch,Vr,Ha,Tc=m({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ph,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ha&&(Ha&&s.type==="mousemove"?(ch=s.screenX-Ha.screenX,Vr=s.screenY-Ha.screenY):Vr=ch=0,Ha=s),ch)},movementY:function(s){return"movementY"in s?s.movementY:Vr}}),E0=jr(Tc),uh=m({},Tc,{dataTransfer:0}),jw=jr(uh),j0=m({},hl,{relatedTarget:0}),dh=jr(j0),Tw=m({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),fh=jr(Tw),Aw=m({},Fa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),la=jr(Aw),Nw=m({},Fa,{data:0}),hh=jr(Nw),vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=A0[s])?!!c[s]:!1}function ph(){return mh}var N0=m({},hl,{key:function(s){if(s.key){var c=vo[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=Ec(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?T0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ph,charCode:function(s){return s.type==="keypress"?Ec(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ec(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),O0=jr(N0),Ow=m({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C0=jr(Ow),gh=m({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ph}),Cw=jr(gh),M0=m({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),D0=jr(M0),Vu=m({},Tc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ss=jr(Vu),Mw=m({},Fa,{newState:0,oldState:0}),Ac=jr(Mw),fi=[9,13,27,32],Zu=Ri&&"CompositionEvent"in window,ml=null;Ri&&"documentMode"in document&&(ml=document.documentMode);var Dw=Ri&&"TextEvent"in window&&!ml,Xu=Ri&&(!Zu||ml&&8<ml&&11>=ml),Ju=" ",P0=!1;function R0(s,c){switch(s){case"keyup":return fi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var pl=!1;function Ii(s,c){switch(s){case"compositionend":return bh(c);case"keypress":return c.which!==32?null:(P0=!0,Ju);case"textInput":return s=c.data,s===Ju&&P0?null:s;default:return null}}function gl(s,c){if(pl)return s==="compositionend"||!Zu&&R0(s,c)?(s=yo(),An=os=sa=null,pl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Xu&&c.locale!=="ko"?null:c.data;default:return null}}var Pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ca(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Pw[s.type]:c==="textarea"}function L0(s,c,p,x){fl?ct?ct.push(x):ct=[x]:fl=x,c=jg(c,"onChange"),0<c.length&&(p=new Wu("onChange","change",null,p,x),s.push({event:p,listeners:c}))}var ua=null,Nc=null;function Oc(s){BC(s,0)}function Cc(s){var c=po(s);if(hn(c))return s}function Mc(s,c){if(s==="change")return c}var I0=!1;if(Ri){var da;if(Ri){var bl="oninput"in document;if(!bl){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),bl=typeof $0.oninput=="function"}da=bl}else da=!1;I0=da&&(!document.documentMode||9<document.documentMode)}function Qu(){ua&&(ua.detachEvent("onpropertychange",B0),Nc=ua=null)}function B0(s){if(s.propertyName==="value"&&Cc(Nc)){var c=[];L0(c,Nc,s,Sc(s)),lh(Oc,c)}}function Ga(s,c,p){s==="focusin"?(Qu(),ua=c,Nc=p,ua.attachEvent("onpropertychange",B0)):s==="focusout"&&Qu()}function Rw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Cc(Nc)}function yl(s,c){if(s==="click")return Cc(c)}function Lw(s,c){if(s==="input"||s==="change")return Cc(c)}function Ya(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var dr=typeof Object.is=="function"?Object.is:Ya;function vl(s,c){if(dr(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var p=Object.keys(s),x=Object.keys(c);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var A=p[x];if(!De.call(c,A)||!dr(s[A],c[A]))return!1}return!0}function ed(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Dc(s,c){var p=ed(s);s=0;for(var x;p;){if(p.nodeType===3){if(x=s+p.textContent.length,s<=c&&x>=c)return{node:p,offset:c-s};s=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=ed(p)}}function td(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?td(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function Pc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=ll(s.document);c instanceof s.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)s=c.contentWindow;else break;c=ll(s.document)}return c}function xo(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var nd=Ri&&"documentMode"in document&&11>=document.documentMode,wo=null,rd=null,Rc=null,xl=!1;function z0(s,c,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;xl||wo==null||wo!==ll(x)||(x=wo,"selectionStart"in x&&xo(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Rc&&vl(Rc,x)||(Rc=x,x=jg(rd,"onSelect"),0<x.length&&(c=new Wu("onSelect","select",null,c,p),s.push({event:c,listeners:x}),c.target=wo)))}function _o(s,c){var p={};return p[s.toLowerCase()]=c.toLowerCase(),p["Webkit"+s]="webkit"+c,p["Moz"+s]="moz"+c,p}var wl={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionrun:_o("Transition","TransitionRun"),transitionstart:_o("Transition","TransitionStart"),transitioncancel:_o("Transition","TransitionCancel"),transitionend:_o("Transition","TransitionEnd")},id={},U0={};Ri&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function fr(s){if(id[s])return id[s];if(!wl[s])return s;var c=wl[s],p;for(p in c)if(c.hasOwnProperty(p)&&p in U0)return id[s]=c[p];return s}var Lc=fr("animationend"),F0=fr("animationiteration"),Ic=fr("animationstart"),Iw=fr("transitionrun"),H0=fr("transitionstart"),$w=fr("transitioncancel"),_l=fr("transitionend"),G0=new Map,So="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");So.push("scrollEnd");function hi(s,c){G0.set(s,c),rs(c,[s])}var $c=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},mi=[],Br=0,ad=0;function Bc(){for(var s=Br,c=ad=Br=0;c<s;){var p=mi[c];mi[c++]=null;var x=mi[c];mi[c++]=null;var A=mi[c];mi[c++]=null;var O=mi[c];if(mi[c++]=null,x!==null&&A!==null){var $=x.pending;$===null?A.next=A:(A.next=$.next,$.next=A),x.pending=A}O!==0&&Sl(p,A,O)}}function ko(s,c,p,x){mi[Br++]=s,mi[Br++]=c,mi[Br++]=p,mi[Br++]=x,ad|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function yh(s,c,p,x){return ko(s,c,p,x),zc(s)}function fa(s,c){return ko(s,null,null,c),zc(s)}function Sl(s,c,p){s.lanes|=p;var x=s.alternate;x!==null&&(x.lanes|=p);for(var A=!1,O=s.return;O!==null;)O.childLanes|=p,x=O.alternate,x!==null&&(x.childLanes|=p),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(A=!0)),s=O,O=O.return;return s.tag===3?(O=s.stateNode,A&&c!==null&&(A=31-rn(p),s=O.hiddenUpdates,x=s[A],x===null?s[A]=[c]:x.push(c),c.lane=p|536870912),O):null}function zc(s){if(50<Hh)throw Hh=0,z_=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var ls={};function Bw(s,c,p,x){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(s,c,p,x){return new Bw(s,c,p,x)}function od(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ha(s,c){var p=s.alternate;return p===null?(p=zr(s.tag,c,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=c,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,c=s.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function vh(s,c){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,c=p.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Uc(s,c,p,x,A,O){var $=0;if(x=s,typeof s=="function")od(s)&&($=1);else if(typeof s=="string")$=HY(s,p,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case K:return s=zr(31,p,c,A),s.elementType=K,s.lanes=O,s;case w:return cs(p.children,A,O,c);case _:$=8,A|=24;break;case T:return s=zr(12,p,c,A|2),s.elementType=T,s.lanes=O,s;case M:return s=zr(13,p,c,A),s.elementType=M,s.lanes=O,s;case P:return s=zr(19,p,c,A),s.elementType=P,s.lanes=O,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:$=10;break e;case N:$=9;break e;case C:$=11;break e;case I:$=14;break e;case z:$=16,x=null;break e}$=29,p=Error(r(130,s===null?"null":typeof s,"")),x=null}return c=zr($,p,c,A),c.elementType=s,c.type=x,c.lanes=O,c}function cs(s,c,p,x){return s=zr(7,s,x,c),s.lanes=p,s}function sd(s,c,p){return s=zr(6,s,null,c),s.lanes=p,s}function xh(s){var c=zr(18,null,null,0);return c.stateNode=s,c}function wh(s,c,p){return c=zr(4,s.children!==null?s.children:[],s.key,c),c.lanes=p,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var f=new WeakMap;function v(s,c){if(typeof s=="object"&&s!==null){var p=f.get(s);return p!==void 0?p:(c={value:s,source:c,stack:pt(c)},f.set(s,c),c)}return{value:s,source:c,stack:pt(c)}}var E=[],D=0,R=null,U=0,ne=[],fe=0,ye=null,Ae=1,Be="";function Je(s,c){E[D++]=U,E[D++]=R,R=s,U=c}function yt(s,c,p){ne[fe++]=Ae,ne[fe++]=Be,ne[fe++]=ye,ye=s;var x=Ae;s=Be;var A=32-rn(x)-1;x&=~(1<<A),p+=1;var O=32-rn(c)+A;if(30<O){var $=A-A%5;O=(x&(1<<$)-1).toString(32),x>>=$,A-=$,Ae=1<<32-rn(c)+A|p<<A|x,Be=O+s}else Ae=1<<O|p<<A|x,Be=s}function tr(s){s.return!==null&&(Je(s,1),yt(s,1,0))}function Nn(s){for(;s===R;)R=E[--D],E[D]=null,U=E[--D],E[D]=null;for(;s===ye;)ye=ne[--fe],ne[fe]=null,Be=ne[--fe],ne[fe]=null,Ae=ne[--fe],ne[fe]=null}function Zr(s,c){ne[fe++]=Ae,ne[fe++]=Be,ne[fe++]=ye,Ae=c.id,Be=c.overflow,ye=s}var Dt=null,Pt=null,_t=!1,Eo=null,pi=!1,ld=Error(r(519));function jo(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fc(v(c,s)),ld}function _h(s){var c=s.stateNode,p=s.type,x=s.memoizedProps;switch(c[Un]=s,c[ur]=x,p){case"dialog":kt("cancel",c),kt("close",c);break;case"iframe":case"object":case"embed":kt("load",c);break;case"video":case"audio":for(p=0;p<Yh.length;p++)kt(Yh[p],c);break;case"source":kt("error",c);break;case"img":case"image":case"link":kt("error",c),kt("load",c);break;case"details":kt("toggle",c);break;case"input":kt("invalid",c),wc(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":kt("invalid",c);break;case"textarea":kt("invalid",c),cl(c,x.value,x.defaultValue,x.children)}p=x.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||x.suppressHydrationWarning===!0||HC(c.textContent,p)?(x.popover!=null&&(kt("beforetoggle",c),kt("toggle",c)),x.onScroll!=null&&kt("scroll",c),x.onScrollEnd!=null&&kt("scrollend",c),x.onClick!=null&&(c.onclick=di),c=!0):c=!1,c||jo(s,!0)}function Sn(s){for(Dt=s.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:Dt=Dt.return}}function qa(s){if(s!==Dt)return!1;if(!_t)return Sn(s),_t=!0,!1;var c=s.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||t1(s.type,s.memoizedProps)),p=!p),p&&Pt&&jo(s),Sn(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Pt=JC(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Pt=JC(s)}else c===27?(c=Pt,Il(s.type)?(s=o1,o1=null,Pt=s):Pt=c):Pt=Dt?pa(s.stateNode.nextSibling):null;return!0}function us(){Pt=Dt=null,_t=!1}function Sh(){var s=Eo;return s!==null&&(vi===null?vi=s:vi.push.apply(vi,s),Eo=null),s}function Fc(s){Eo===null?Eo=[s]:Eo.push(s)}var Hc=W(null),To=null,Ka=null;function kl(s,c,p){ee(Hc,c._currentValue),c._currentValue=p}function ds(s){s._currentValue=Hc.current,re(Hc)}function zw(s,c,p){for(;s!==null;){var x=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),s===p)break;s=s.return}}function Uw(s,c,p,x){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var O=A.dependencies;if(O!==null){var $=A.child;O=O.firstContext;e:for(;O!==null;){var Y=O;O=A;for(var ie=0;ie<c.length;ie++)if(Y.context===c[ie]){O.lanes|=p,Y=O.alternate,Y!==null&&(Y.lanes|=p),zw(O.return,p,s),x||($=null);break e}O=Y.next}}else if(A.tag===18){if($=A.return,$===null)throw Error(r(341));$.lanes|=p,O=$.alternate,O!==null&&(O.lanes|=p),zw($,p,s),$=null}else $=A.child;if($!==null)$.return=A;else for($=A;$!==null;){if($===s){$=null;break}if(A=$.sibling,A!==null){A.return=$.return,$=A;break}$=$.return}A=$}}function cd(s,c,p,x){s=null;for(var A=c,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var $=A.alternate;if($===null)throw Error(r(387));if($=$.memoizedProps,$!==null){var Y=A.type;dr(A.pendingProps.value,$.value)||(s!==null?s.push(Y):s=[Y])}}else if(A===me.current){if($=A.alternate,$===null)throw Error(r(387));$.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(Zh):s=[Zh])}A=A.return}s!==null&&Uw(c,s,p,x),c.flags|=262144}function Y0(s){for(s=s.firstContext;s!==null;){if(!dr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Gc(s){To=s,Ka=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Tr(s){return AN(To,s)}function q0(s,c){return To===null&&Gc(s),AN(s,c)}function AN(s,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Ka===null){if(s===null)throw Error(r(308));Ka=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Ka=Ka.next=c;return p}var BG=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(p,x){s.push(x)}};this.abort=function(){c.aborted=!0,s.forEach(function(p){return p()})}},zG=e.unstable_scheduleCallback,UG=e.unstable_NormalPriority,Hn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fw(){return{controller:new BG,data:new Map,refCount:0}}function kh(s){s.refCount--,s.refCount===0&&zG(UG,function(){s.controller.abort()})}var Eh=null,Hw=0,ud=0,dd=null;function FG(s,c){if(Eh===null){var p=Eh=[];Hw=0,ud=q_(),dd={status:"pending",value:void 0,then:function(x){p.push(x)}}}return Hw++,c.then(NN,NN),c}function NN(){if(--Hw===0&&Eh!==null){dd!==null&&(dd.status="fulfilled");var s=Eh;Eh=null,ud=0,dd=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function HG(s,c){var p=[],x={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return s.then(function(){x.status="fulfilled",x.value=c;for(var A=0;A<p.length;A++)(0,p[A])(c)},function(A){for(x.status="rejected",x.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),x}var ON=F.S;F.S=function(s,c){hC=Ue(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&FG(s,c),ON!==null&&ON(s,c)};var Yc=W(null);function Gw(){var s=Yc.current;return s!==null?s:en.pooledCache}function K0(s,c){c===null?ee(Yc,Yc.current):ee(Yc,c.pool)}function CN(){var s=Gw();return s===null?null:{parent:Hn._currentValue,pool:s}}var fd=Error(r(460)),Yw=Error(r(474)),W0=Error(r(542)),V0={then:function(){}};function MN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function DN(s,c,p){switch(p=s[p],p===void 0?s.push(c):p!==c&&(c.then(di,di),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,RN(s),s;default:if(typeof c.status=="string")c.then(di,di);else{if(s=en,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(x){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=x}},function(x){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,RN(s),s}throw Kc=c,fd}}function qc(s){try{var c=s._init;return c(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Kc=p,fd):p}}var Kc=null;function PN(){if(Kc===null)throw Error(r(459));var s=Kc;return Kc=null,s}function RN(s){if(s===fd||s===W0)throw Error(r(483))}var hd=null,jh=0;function Z0(s){var c=jh;return jh+=1,hd===null&&(hd=[]),DN(hd,s,c)}function Th(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function X0(s,c){throw c.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function LN(s){function c(de,ce){if(s){var ge=de.deletions;ge===null?(de.deletions=[ce],de.flags|=16):ge.push(ce)}}function p(de,ce){if(!s)return null;for(;ce!==null;)c(de,ce),ce=ce.sibling;return null}function x(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function A(de,ce){return de=ha(de,ce),de.index=0,de.sibling=null,de}function O(de,ce,ge){return de.index=ge,s?(ge=de.alternate,ge!==null?(ge=ge.index,ge<ce?(de.flags|=67108866,ce):ge):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function $(de){return s&&de.alternate===null&&(de.flags|=67108866),de}function Y(de,ce,ge,Te){return ce===null||ce.tag!==6?(ce=sd(ge,de.mode,Te),ce.return=de,ce):(ce=A(ce,ge),ce.return=de,ce)}function ie(de,ce,ge,Te){var nt=ge.type;return nt===w?ke(de,ce,ge.props.children,Te,ge.key):ce!==null&&(ce.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&qc(nt)===ce.type)?(ce=A(ce,ge.props),Th(ce,ge),ce.return=de,ce):(ce=Uc(ge.type,ge.key,ge.props,null,de.mode,Te),Th(ce,ge),ce.return=de,ce)}function be(de,ce,ge,Te){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=wh(ge,de.mode,Te),ce.return=de,ce):(ce=A(ce,ge.children||[]),ce.return=de,ce)}function ke(de,ce,ge,Te,nt){return ce===null||ce.tag!==7?(ce=cs(ge,de.mode,Te,nt),ce.return=de,ce):(ce=A(ce,ge),ce.return=de,ce)}function Ne(de,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=sd(""+ce,de.mode,ge),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return ge=Uc(ce.type,ce.key,ce.props,null,de.mode,ge),Th(ge,ce),ge.return=de,ge;case k:return ce=wh(ce,de.mode,ge),ce.return=de,ce;case z:return ce=qc(ce),Ne(de,ce,ge)}if(V(ce)||B(ce))return ce=cs(ce,de.mode,ge,null),ce.return=de,ce;if(typeof ce.then=="function")return Ne(de,Z0(ce),ge);if(ce.$$typeof===j)return Ne(de,q0(de,ce),ge);X0(de,ce)}return null}function ve(de,ce,ge,Te){var nt=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return nt!==null?null:Y(de,ce,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return ge.key===nt?ie(de,ce,ge,Te):null;case k:return ge.key===nt?be(de,ce,ge,Te):null;case z:return ge=qc(ge),ve(de,ce,ge,Te)}if(V(ge)||B(ge))return nt!==null?null:ke(de,ce,ge,Te,null);if(typeof ge.then=="function")return ve(de,ce,Z0(ge),Te);if(ge.$$typeof===j)return ve(de,ce,q0(de,ge),Te);X0(de,ge)}return null}function we(de,ce,ge,Te,nt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return de=de.get(ge)||null,Y(ce,de,""+Te,nt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return de=de.get(Te.key===null?ge:Te.key)||null,ie(ce,de,Te,nt);case k:return de=de.get(Te.key===null?ge:Te.key)||null,be(ce,de,Te,nt);case z:return Te=qc(Te),we(de,ce,ge,Te,nt)}if(V(Te)||B(Te))return de=de.get(ge)||null,ke(ce,de,Te,nt,null);if(typeof Te.then=="function")return we(de,ce,ge,Z0(Te),nt);if(Te.$$typeof===j)return we(de,ce,ge,q0(ce,Te),nt);X0(ce,Te)}return null}function Ye(de,ce,ge,Te){for(var nt=null,Rt=null,Ve=ce,vt=ce=0,Tt=null;Ve!==null&&vt<ge.length;vt++){Ve.index>vt?(Tt=Ve,Ve=null):Tt=Ve.sibling;var Lt=ve(de,Ve,ge[vt],Te);if(Lt===null){Ve===null&&(Ve=Tt);break}s&&Ve&&Lt.alternate===null&&c(de,Ve),ce=O(Lt,ce,vt),Rt===null?nt=Lt:Rt.sibling=Lt,Rt=Lt,Ve=Tt}if(vt===ge.length)return p(de,Ve),_t&&Je(de,vt),nt;if(Ve===null){for(;vt<ge.length;vt++)Ve=Ne(de,ge[vt],Te),Ve!==null&&(ce=O(Ve,ce,vt),Rt===null?nt=Ve:Rt.sibling=Ve,Rt=Ve);return _t&&Je(de,vt),nt}for(Ve=x(Ve);vt<ge.length;vt++)Tt=we(Ve,de,vt,ge[vt],Te),Tt!==null&&(s&&Tt.alternate!==null&&Ve.delete(Tt.key===null?vt:Tt.key),ce=O(Tt,ce,vt),Rt===null?nt=Tt:Rt.sibling=Tt,Rt=Tt);return s&&Ve.forEach(function(Fl){return c(de,Fl)}),_t&&Je(de,vt),nt}function ot(de,ce,ge,Te){if(ge==null)throw Error(r(151));for(var nt=null,Rt=null,Ve=ce,vt=ce=0,Tt=null,Lt=ge.next();Ve!==null&&!Lt.done;vt++,Lt=ge.next()){Ve.index>vt?(Tt=Ve,Ve=null):Tt=Ve.sibling;var Fl=ve(de,Ve,Lt.value,Te);if(Fl===null){Ve===null&&(Ve=Tt);break}s&&Ve&&Fl.alternate===null&&c(de,Ve),ce=O(Fl,ce,vt),Rt===null?nt=Fl:Rt.sibling=Fl,Rt=Fl,Ve=Tt}if(Lt.done)return p(de,Ve),_t&&Je(de,vt),nt;if(Ve===null){for(;!Lt.done;vt++,Lt=ge.next())Lt=Ne(de,Lt.value,Te),Lt!==null&&(ce=O(Lt,ce,vt),Rt===null?nt=Lt:Rt.sibling=Lt,Rt=Lt);return _t&&Je(de,vt),nt}for(Ve=x(Ve);!Lt.done;vt++,Lt=ge.next())Lt=we(Ve,de,vt,Lt.value,Te),Lt!==null&&(s&&Lt.alternate!==null&&Ve.delete(Lt.key===null?vt:Lt.key),ce=O(Lt,ce,vt),Rt===null?nt=Lt:Rt.sibling=Lt,Rt=Lt);return s&&Ve.forEach(function(eq){return c(de,eq)}),_t&&Je(de,vt),nt}function Xt(de,ce,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===w&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:e:{for(var nt=ge.key;ce!==null;){if(ce.key===nt){if(nt=ge.type,nt===w){if(ce.tag===7){p(de,ce.sibling),Te=A(ce,ge.props.children),Te.return=de,de=Te;break e}}else if(ce.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&qc(nt)===ce.type){p(de,ce.sibling),Te=A(ce,ge.props),Th(Te,ge),Te.return=de,de=Te;break e}p(de,ce);break}else c(de,ce);ce=ce.sibling}ge.type===w?(Te=cs(ge.props.children,de.mode,Te,ge.key),Te.return=de,de=Te):(Te=Uc(ge.type,ge.key,ge.props,null,de.mode,Te),Th(Te,ge),Te.return=de,de=Te)}return $(de);case k:e:{for(nt=ge.key;ce!==null;){if(ce.key===nt)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){p(de,ce.sibling),Te=A(ce,ge.children||[]),Te.return=de,de=Te;break e}else{p(de,ce);break}else c(de,ce);ce=ce.sibling}Te=wh(ge,de.mode,Te),Te.return=de,de=Te}return $(de);case z:return ge=qc(ge),Xt(de,ce,ge,Te)}if(V(ge))return Ye(de,ce,ge,Te);if(B(ge)){if(nt=B(ge),typeof nt!="function")throw Error(r(150));return ge=nt.call(ge),ot(de,ce,ge,Te)}if(typeof ge.then=="function")return Xt(de,ce,Z0(ge),Te);if(ge.$$typeof===j)return Xt(de,ce,q0(de,ge),Te);X0(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ce!==null&&ce.tag===6?(p(de,ce.sibling),Te=A(ce,ge),Te.return=de,de=Te):(p(de,ce),Te=sd(ge,de.mode,Te),Te.return=de,de=Te),$(de)):p(de,ce)}return function(de,ce,ge,Te){try{jh=0;var nt=Xt(de,ce,ge,Te);return hd=null,nt}catch(Ve){if(Ve===fd||Ve===W0)throw Ve;var Rt=zr(29,Ve,null,de.mode);return Rt.lanes=Te,Rt.return=de,Rt}finally{}}}var Wc=LN(!0),IN=LN(!1),El=!1;function qw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kw(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function jl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Tl(s,c,p){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,($t&2)!==0){var A=x.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),x.pending=c,c=zc(s),Sl(s,null,p),c}return ko(s,x,c,p),zc(s)}function Ah(s,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var x=c.lanes;x&=s.pendingLanes,p|=x,c.lanes=p,y0(s,p)}}function Ww(s,c){var p=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var A=null,O=null;if(p=p.firstBaseUpdate,p!==null){do{var $={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};O===null?A=O=$:O=O.next=$,p=p.next}while(p!==null);O===null?A=O=c:O=O.next=c}else A=O=c;p={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:x.shared,callbacks:x.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=c:s.next=c,p.lastBaseUpdate=c}var Vw=!1;function Nh(){if(Vw){var s=dd;if(s!==null)throw s}}function Oh(s,c,p,x){Vw=!1;var A=s.updateQueue;El=!1;var O=A.firstBaseUpdate,$=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var ie=Y,be=ie.next;ie.next=null,$===null?O=be:$.next=be,$=ie;var ke=s.alternate;ke!==null&&(ke=ke.updateQueue,Y=ke.lastBaseUpdate,Y!==$&&(Y===null?ke.firstBaseUpdate=be:Y.next=be,ke.lastBaseUpdate=ie))}if(O!==null){var Ne=A.baseState;$=0,ke=be=ie=null,Y=O;do{var ve=Y.lane&-536870913,we=ve!==Y.lane;if(we?(jt&ve)===ve:(x&ve)===ve){ve!==0&&ve===ud&&(Vw=!0),ke!==null&&(ke=ke.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Ye=s,ot=Y;ve=c;var Xt=p;switch(ot.tag){case 1:if(Ye=ot.payload,typeof Ye=="function"){Ne=Ye.call(Xt,Ne,ve);break e}Ne=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=ot.payload,ve=typeof Ye=="function"?Ye.call(Xt,Ne,ve):Ye,ve==null)break e;Ne=m({},Ne,ve);break e;case 2:El=!0}}ve=Y.callback,ve!==null&&(s.flags|=64,we&&(s.flags|=8192),we=A.callbacks,we===null?A.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},ke===null?(be=ke=we,ie=Ne):ke=ke.next=we,$|=ve;if(Y=Y.next,Y===null){if(Y=A.shared.pending,Y===null)break;we=Y,Y=we.next,we.next=null,A.lastBaseUpdate=we,A.shared.pending=null}}while(!0);ke===null&&(ie=Ne),A.baseState=ie,A.firstBaseUpdate=be,A.lastBaseUpdate=ke,O===null&&(A.shared.lanes=0),Ml|=$,s.lanes=$,s.memoizedState=Ne}}function $N(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function BN(s,c){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)$N(p[s],c)}var md=W(null),J0=W(0);function zN(s,c){s=xs,ee(J0,s),ee(md,c),xs=s|c.baseLanes}function Zw(){ee(J0,xs),ee(md,md.current)}function Xw(){xs=J0.current,re(md),re(J0)}var $i=W(null),ma=null;function Al(s){var c=s.alternate;ee(Rn,Rn.current&1),ee($i,s),ma===null&&(c===null||md.current!==null||c.memoizedState!==null)&&(ma=s)}function Jw(s){ee(Rn,Rn.current),ee($i,s),ma===null&&(ma=s)}function UN(s){s.tag===22?(ee(Rn,Rn.current),ee($i,s),ma===null&&(ma=s)):Nl()}function Nl(){ee(Rn,Rn.current),ee($i,$i.current)}function Bi(s){re($i),ma===s&&(ma=null),re(Rn)}var Rn=W(0);function Q0(s){for(var c=s;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||i1(p)||a1(p)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var fs=0,gt=null,Vt=null,Gn=null,eg=!1,pd=!1,Vc=!1,tg=0,Ch=0,gd=null,GG=0;function On(){throw Error(r(321))}function Qw(s,c){if(c===null)return!1;for(var p=0;p<c.length&&p<s.length;p++)if(!dr(s[p],c[p]))return!1;return!0}function e_(s,c,p,x,A,O){return fs=O,gt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,F.H=s===null||s.memoizedState===null?kO:p_,Vc=!1,O=p(x,A),Vc=!1,pd&&(O=HN(c,p,x,A)),FN(s),O}function FN(s){F.H=Ph;var c=Vt!==null&&Vt.next!==null;if(fs=0,Gn=Vt=gt=null,eg=!1,Ch=0,gd=null,c)throw Error(r(300));s===null||Yn||(s=s.dependencies,s!==null&&Y0(s)&&(Yn=!0))}function HN(s,c,p,x){gt=s;var A=0;do{if(pd&&(gd=null),Ch=0,pd=!1,25<=A)throw Error(r(301));if(A+=1,Gn=Vt=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}F.H=EO,O=c(p,x)}while(pd);return O}function YG(){var s=F.H,c=s.useState()[0];return c=typeof c.then=="function"?Mh(c):c,s=s.useState()[0],(Vt!==null?Vt.memoizedState:null)!==s&&(gt.flags|=1024),c}function t_(){var s=tg!==0;return tg=0,s}function n_(s,c,p){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~p}function r_(s){if(eg){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}eg=!1}fs=0,Gn=Vt=gt=null,pd=!1,Ch=tg=0,gd=null}function Xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?gt.memoizedState=Gn=s:Gn=Gn.next=s,Gn}function Ln(){if(Vt===null){var s=gt.alternate;s=s!==null?s.memoizedState:null}else s=Vt.next;var c=Gn===null?gt.memoizedState:Gn.next;if(c!==null)Gn=c,Vt=s;else{if(s===null)throw gt.alternate===null?Error(r(467)):Error(r(310));Vt=s,s={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Gn===null?gt.memoizedState=Gn=s:Gn=Gn.next=s}return Gn}function ng(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mh(s){var c=Ch;return Ch+=1,gd===null&&(gd=[]),s=DN(gd,s,c),c=gt,(Gn===null?c.memoizedState:Gn.next)===null&&(c=c.alternate,F.H=c===null||c.memoizedState===null?kO:p_),s}function rg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Mh(s);if(s.$$typeof===j)return Tr(s)}throw Error(r(438,String(s)))}function i_(s){var c=null,p=gt.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var x=gt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=ng(),gt.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(s),x=0;x<s;x++)p[x]=G;return c.index++,p}function hs(s,c){return typeof c=="function"?c(s):c}function ig(s){var c=Ln();return a_(c,Vt,s)}function a_(s,c,p){var x=s.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=p;var A=s.baseQueue,O=x.pending;if(O!==null){if(A!==null){var $=A.next;A.next=O.next,O.next=$}c.baseQueue=A=O,x.pending=null}if(O=s.baseState,A===null)s.memoizedState=O;else{c=A.next;var Y=$=null,ie=null,be=c,ke=!1;do{var Ne=be.lane&-536870913;if(Ne!==be.lane?(jt&Ne)===Ne:(fs&Ne)===Ne){var ve=be.revertLane;if(ve===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Ne===ud&&(ke=!0);else if((fs&ve)===ve){be=be.next,ve===ud&&(ke=!0);continue}else Ne={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ie===null?(Y=ie=Ne,$=O):ie=ie.next=Ne,gt.lanes|=ve,Ml|=ve;Ne=be.action,Vc&&p(O,Ne),O=be.hasEagerState?be.eagerState:p(O,Ne)}else ve={lane:Ne,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ie===null?(Y=ie=ve,$=O):ie=ie.next=ve,gt.lanes|=Ne,Ml|=Ne;be=be.next}while(be!==null&&be!==c);if(ie===null?$=O:ie.next=Y,!dr(O,s.memoizedState)&&(Yn=!0,ke&&(p=dd,p!==null)))throw p;s.memoizedState=O,s.baseState=$,s.baseQueue=ie,x.lastRenderedState=O}return A===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function o_(s){var c=Ln(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var x=p.dispatch,A=p.pending,O=c.memoizedState;if(A!==null){p.pending=null;var $=A=A.next;do O=s(O,$.action),$=$.next;while($!==A);dr(O,c.memoizedState)||(Yn=!0),c.memoizedState=O,c.baseQueue===null&&(c.baseState=O),p.lastRenderedState=O}return[O,x]}function GN(s,c,p){var x=gt,A=Ln(),O=_t;if(O){if(p===void 0)throw Error(r(407));p=p()}else p=c();var $=!dr((Vt||A).memoizedState,p);if($&&(A.memoizedState=p,Yn=!0),A=A.queue,c_(KN.bind(null,x,A,s),[s]),A.getSnapshot!==c||$||Gn!==null&&Gn.memoizedState.tag&1){if(x.flags|=2048,bd(9,{destroy:void 0},qN.bind(null,x,A,p,c),null),en===null)throw Error(r(349));O||(fs&127)!==0||YN(x,c,p)}return p}function YN(s,c,p){s.flags|=16384,s={getSnapshot:c,value:p},c=gt.updateQueue,c===null?(c=ng(),gt.updateQueue=c,c.stores=[s]):(p=c.stores,p===null?c.stores=[s]:p.push(s))}function qN(s,c,p,x){c.value=p,c.getSnapshot=x,WN(c)&&VN(s)}function KN(s,c,p){return p(function(){WN(c)&&VN(s)})}function WN(s){var c=s.getSnapshot;s=s.value;try{var p=c();return!dr(s,p)}catch{return!0}}function VN(s){var c=fa(s,2);c!==null&&xi(c,s,2)}function s_(s){var c=Xr();if(typeof s=="function"){var p=s;if(s=p(),Vc){Kt(!0);try{p()}finally{Kt(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:s},c}function ZN(s,c,p,x){return s.baseState=p,a_(s,Vt,typeof x=="function"?x:hs)}function qG(s,c,p,x,A){if(sg(s))throw Error(r(485));if(s=c.action,s!==null){var O={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){O.listeners.push($)}};F.T!==null?p(!0):O.isTransition=!1,x(O),p=c.pending,p===null?(O.next=c.pending=O,XN(c,O)):(O.next=p.next,c.pending=p.next=O)}}function XN(s,c){var p=c.action,x=c.payload,A=s.state;if(c.isTransition){var O=F.T,$={};F.T=$;try{var Y=p(A,x),ie=F.S;ie!==null&&ie($,Y),JN(s,c,Y)}catch(be){l_(s,c,be)}finally{O!==null&&$.types!==null&&(O.types=$.types),F.T=O}}else try{O=p(A,x),JN(s,c,O)}catch(be){l_(s,c,be)}}function JN(s,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(x){QN(s,c,x)},function(x){return l_(s,c,x)}):QN(s,c,p)}function QN(s,c,p){c.status="fulfilled",c.value=p,eO(c),s.state=p,c=s.pending,c!==null&&(p=c.next,p===c?s.pending=null:(p=p.next,c.next=p,XN(s,p)))}function l_(s,c,p){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=p,eO(c),c=c.next;while(c!==x)}s.action=null}function eO(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function tO(s,c){return c}function nO(s,c){if(_t){var p=en.formState;if(p!==null){e:{var x=gt;if(_t){if(Pt){t:{for(var A=Pt,O=pi;A.nodeType!==8;){if(!O){A=null;break t}if(A=pa(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Pt=pa(A.nextSibling),x=A.data==="F!";break e}}jo(x)}x=!1}x&&(c=p[0])}}return p=Xr(),p.memoizedState=p.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tO,lastRenderedState:c},p.queue=x,p=wO.bind(null,gt,x),x.dispatch=p,x=s_(!1),O=m_.bind(null,gt,!1,x.queue),x=Xr(),A={state:c,dispatch:null,action:s,pending:null},x.queue=A,p=qG.bind(null,gt,A,O,p),A.dispatch=p,x.memoizedState=s,[c,p,!1]}function rO(s){var c=Ln();return iO(c,Vt,s)}function iO(s,c,p){if(c=a_(s,c,tO)[0],s=ig(hs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=Mh(c)}catch($){throw $===fd?W0:$}else x=c;c=Ln();var A=c.queue,O=A.dispatch;return p!==c.memoizedState&&(gt.flags|=2048,bd(9,{destroy:void 0},KG.bind(null,A,p),null)),[x,O,s]}function KG(s,c){s.action=c}function aO(s){var c=Ln(),p=Vt;if(p!==null)return iO(c,p,s);Ln(),c=c.memoizedState,p=Ln();var x=p.queue.dispatch;return p.memoizedState=s,[c,x,!1]}function bd(s,c,p,x){return s={tag:s,create:p,deps:x,inst:c,next:null},c=gt.updateQueue,c===null&&(c=ng(),gt.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=s.next=s:(x=p.next,p.next=s,s.next=x,c.lastEffect=s),s}function oO(){return Ln().memoizedState}function ag(s,c,p,x){var A=Xr();gt.flags|=s,A.memoizedState=bd(1|c,{destroy:void 0},p,x===void 0?null:x)}function og(s,c,p,x){var A=Ln();x=x===void 0?null:x;var O=A.memoizedState.inst;Vt!==null&&x!==null&&Qw(x,Vt.memoizedState.deps)?A.memoizedState=bd(c,O,p,x):(gt.flags|=s,A.memoizedState=bd(1|c,O,p,x))}function sO(s,c){ag(8390656,8,s,c)}function c_(s,c){og(2048,8,s,c)}function WG(s){gt.flags|=4;var c=gt.updateQueue;if(c===null)c=ng(),gt.updateQueue=c,c.events=[s];else{var p=c.events;p===null?c.events=[s]:p.push(s)}}function lO(s){var c=Ln().memoizedState;return WG({ref:c,nextImpl:s}),function(){if(($t&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function cO(s,c){return og(4,2,s,c)}function uO(s,c){return og(4,4,s,c)}function dO(s,c){if(typeof c=="function"){s=s();var p=c(s);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function fO(s,c,p){p=p!=null?p.concat([s]):null,og(4,4,dO.bind(null,c,s),p)}function u_(){}function hO(s,c){var p=Ln();c=c===void 0?null:c;var x=p.memoizedState;return c!==null&&Qw(c,x[1])?x[0]:(p.memoizedState=[s,c],s)}function mO(s,c){var p=Ln();c=c===void 0?null:c;var x=p.memoizedState;if(c!==null&&Qw(c,x[1]))return x[0];if(x=s(),Vc){Kt(!0);try{s()}finally{Kt(!1)}}return p.memoizedState=[x,c],x}function d_(s,c,p){return p===void 0||(fs&1073741824)!==0&&(jt&261930)===0?s.memoizedState=c:(s.memoizedState=p,s=pC(),gt.lanes|=s,Ml|=s,p)}function pO(s,c,p,x){return dr(p,c)?p:md.current!==null?(s=d_(s,p,x),dr(s,c)||(Yn=!0),s):(fs&42)===0||(fs&1073741824)!==0&&(jt&261930)===0?(Yn=!0,s.memoizedState=p):(s=pC(),gt.lanes|=s,Ml|=s,c)}function gO(s,c,p,x,A){var O=Z.p;Z.p=O!==0&&8>O?O:8;var $=F.T,Y={};F.T=Y,m_(s,!1,c,p);try{var ie=A(),be=F.S;if(be!==null&&be(Y,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var ke=HG(ie,x);Dh(s,c,ke,Fi(s))}else Dh(s,c,x,Fi(s))}catch(Ne){Dh(s,c,{then:function(){},status:"rejected",reason:Ne},Fi())}finally{Z.p=O,$!==null&&Y.types!==null&&($.types=Y.types),F.T=$}}function VG(){}function f_(s,c,p,x){if(s.tag!==5)throw Error(r(476));var A=bO(s).queue;gO(s,A,c,Q,p===null?VG:function(){return yO(s),p(x)})}function bO(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:Q},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:p},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function yO(s){var c=bO(s);c.next===null&&(c=s.alternate.memoizedState),Dh(s,c.next.queue,{},Fi())}function h_(){return Tr(Zh)}function vO(){return Ln().memoizedState}function xO(){return Ln().memoizedState}function ZG(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var p=Fi();s=jl(p);var x=Tl(c,s,p);x!==null&&(xi(x,c,p),Ah(x,c,p)),c={cache:Fw()},s.payload=c;return}c=c.return}}function XG(s,c,p){var x=Fi();p={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},sg(s)?_O(c,p):(p=yh(s,c,p,x),p!==null&&(xi(p,s,x),SO(p,c,x)))}function wO(s,c,p){var x=Fi();Dh(s,c,p,x)}function Dh(s,c,p,x){var A={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(sg(s))_O(c,A);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=c.lastRenderedReducer,O!==null))try{var $=c.lastRenderedState,Y=O($,p);if(A.hasEagerState=!0,A.eagerState=Y,dr(Y,$))return ko(s,c,A,0),en===null&&Bc(),!1}catch{}finally{}if(p=yh(s,c,A,x),p!==null)return xi(p,s,x),SO(p,c,x),!0}return!1}function m_(s,c,p,x){if(x={lane:2,revertLane:q_(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},sg(s)){if(c)throw Error(r(479))}else c=yh(s,p,x,2),c!==null&&xi(c,s,2)}function sg(s){var c=s.alternate;return s===gt||c!==null&&c===gt}function _O(s,c){pd=eg=!0;var p=s.pending;p===null?c.next=c:(c.next=p.next,p.next=c),s.pending=c}function SO(s,c,p){if((p&4194048)!==0){var x=c.lanes;x&=s.pendingLanes,p|=x,c.lanes=p,y0(s,p)}}var Ph={readContext:Tr,use:rg,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};Ph.useEffectEvent=On;var kO={readContext:Tr,use:rg,useCallback:function(s,c){return Xr().memoizedState=[s,c===void 0?null:c],s},useContext:Tr,useEffect:sO,useImperativeHandle:function(s,c,p){p=p!=null?p.concat([s]):null,ag(4194308,4,dO.bind(null,c,s),p)},useLayoutEffect:function(s,c){return ag(4194308,4,s,c)},useInsertionEffect:function(s,c){ag(4,2,s,c)},useMemo:function(s,c){var p=Xr();c=c===void 0?null:c;var x=s();if(Vc){Kt(!0);try{s()}finally{Kt(!1)}}return p.memoizedState=[x,c],x},useReducer:function(s,c,p){var x=Xr();if(p!==void 0){var A=p(c);if(Vc){Kt(!0);try{p(c)}finally{Kt(!1)}}}else A=c;return x.memoizedState=x.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},x.queue=s,s=s.dispatch=XG.bind(null,gt,s),[x.memoizedState,s]},useRef:function(s){var c=Xr();return s={current:s},c.memoizedState=s},useState:function(s){s=s_(s);var c=s.queue,p=wO.bind(null,gt,c);return c.dispatch=p,[s.memoizedState,p]},useDebugValue:u_,useDeferredValue:function(s,c){var p=Xr();return d_(p,s,c)},useTransition:function(){var s=s_(!1);return s=gO.bind(null,gt,s.queue,!0,!1),Xr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,p){var x=gt,A=Xr();if(_t){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),en===null)throw Error(r(349));(jt&127)!==0||YN(x,c,p)}A.memoizedState=p;var O={value:p,getSnapshot:c};return A.queue=O,sO(KN.bind(null,x,O,s),[s]),x.flags|=2048,bd(9,{destroy:void 0},qN.bind(null,x,O,p,c),null),p},useId:function(){var s=Xr(),c=en.identifierPrefix;if(_t){var p=Be,x=Ae;p=(x&~(1<<32-rn(x)-1)).toString(32)+p,c="_"+c+"R_"+p,p=tg++,0<p&&(c+="H"+p.toString(32)),c+="_"}else p=GG++,c="_"+c+"r_"+p.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:h_,useFormState:nO,useActionState:nO,useOptimistic:function(s){var c=Xr();c.memoizedState=c.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=m_.bind(null,gt,!0,p),p.dispatch=c,[s,c]},useMemoCache:i_,useCacheRefresh:function(){return Xr().memoizedState=ZG.bind(null,gt)},useEffectEvent:function(s){var c=Xr(),p={impl:s};return c.memoizedState=p,function(){if(($t&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},p_={readContext:Tr,use:rg,useCallback:hO,useContext:Tr,useEffect:c_,useImperativeHandle:fO,useInsertionEffect:cO,useLayoutEffect:uO,useMemo:mO,useReducer:ig,useRef:oO,useState:function(){return ig(hs)},useDebugValue:u_,useDeferredValue:function(s,c){var p=Ln();return pO(p,Vt.memoizedState,s,c)},useTransition:function(){var s=ig(hs)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:Mh(s),c]},useSyncExternalStore:GN,useId:vO,useHostTransitionStatus:h_,useFormState:rO,useActionState:rO,useOptimistic:function(s,c){var p=Ln();return ZN(p,Vt,s,c)},useMemoCache:i_,useCacheRefresh:xO};p_.useEffectEvent=lO;var EO={readContext:Tr,use:rg,useCallback:hO,useContext:Tr,useEffect:c_,useImperativeHandle:fO,useInsertionEffect:cO,useLayoutEffect:uO,useMemo:mO,useReducer:o_,useRef:oO,useState:function(){return o_(hs)},useDebugValue:u_,useDeferredValue:function(s,c){var p=Ln();return Vt===null?d_(p,s,c):pO(p,Vt.memoizedState,s,c)},useTransition:function(){var s=o_(hs)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:Mh(s),c]},useSyncExternalStore:GN,useId:vO,useHostTransitionStatus:h_,useFormState:aO,useActionState:aO,useOptimistic:function(s,c){var p=Ln();return Vt!==null?ZN(p,Vt,s,c):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:i_,useCacheRefresh:xO};EO.useEffectEvent=lO;function g_(s,c,p,x){c=s.memoizedState,p=p(x,c),p=p==null?c:m({},c,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var b_={enqueueSetState:function(s,c,p){s=s._reactInternals;var x=Fi(),A=jl(x);A.payload=c,p!=null&&(A.callback=p),c=Tl(s,A,x),c!==null&&(xi(c,s,x),Ah(c,s,x))},enqueueReplaceState:function(s,c,p){s=s._reactInternals;var x=Fi(),A=jl(x);A.tag=1,A.payload=c,p!=null&&(A.callback=p),c=Tl(s,A,x),c!==null&&(xi(c,s,x),Ah(c,s,x))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var p=Fi(),x=jl(p);x.tag=2,c!=null&&(x.callback=c),c=Tl(s,x,p),c!==null&&(xi(c,s,p),Ah(c,s,p))}};function jO(s,c,p,x,A,O,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,O,$):c.prototype&&c.prototype.isPureReactComponent?!vl(p,x)||!vl(A,O):!0}function TO(s,c,p,x){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,x),c.state!==s&&b_.enqueueReplaceState(c,c.state,null)}function Zc(s,c){var p=c;if("ref"in c){p={};for(var x in c)x!=="ref"&&(p[x]=c[x])}if(s=s.defaultProps){p===c&&(p=m({},p));for(var A in s)p[A]===void 0&&(p[A]=s[A])}return p}function AO(s){$c(s)}function NO(s){console.error(s)}function OO(s){$c(s)}function lg(s,c){try{var p=s.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function CO(s,c,p){try{var x=s.onCaughtError;x(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function y_(s,c,p){return p=jl(p),p.tag=3,p.payload={element:null},p.callback=function(){lg(s,c)},p}function MO(s){return s=jl(s),s.tag=3,s}function DO(s,c,p,x){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var O=x.value;s.payload=function(){return A(O)},s.callback=function(){CO(c,p,x)}}var $=p.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(s.callback=function(){CO(c,p,x),typeof A!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var Y=x.stack;this.componentDidCatch(x.value,{componentStack:Y!==null?Y:""})})}function JG(s,c,p,x,A){if(p.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=p.alternate,c!==null&&cd(c,p,A,!0),p=$i.current,p!==null){switch(p.tag){case 31:case 13:return ma===null?xg():p.alternate===null&&Cn===0&&(Cn=3),p.flags&=-257,p.flags|=65536,p.lanes=A,x===V0?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([x]):c.add(x),H_(s,x,A)),!1;case 22:return p.flags|=65536,x===V0?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([x]):p.add(x)),H_(s,x,A)),!1}throw Error(r(435,p.tag))}return H_(s,x,A),xg(),!1}if(_t)return c=$i.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,x!==ld&&(s=Error(r(422),{cause:x}),Fc(v(s,p)))):(x!==ld&&(c=Error(r(423),{cause:x}),Fc(v(c,p))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,x=v(x,p),A=y_(s.stateNode,x,A),Ww(s,A),Cn!==4&&(Cn=2)),!1;var O=Error(r(520),{cause:x});if(O=v(O,p),Fh===null?Fh=[O]:Fh.push(O),Cn!==4&&(Cn=2),c===null)return!0;x=v(x,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,s=A&-A,p.lanes|=s,s=y_(p.stateNode,x,s),Ww(p,s),!1;case 1:if(c=p.type,O=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Dl===null||!Dl.has(O))))return p.flags|=65536,A&=-A,p.lanes|=A,A=MO(A),DO(A,s,p,x),Ww(p,A),!1}p=p.return}while(p!==null);return!1}var v_=Error(r(461)),Yn=!1;function Ar(s,c,p,x){c.child=s===null?IN(c,null,p,x):Wc(c,s.child,p,x)}function PO(s,c,p,x,A){p=p.render;var O=c.ref;if("ref"in x){var $={};for(var Y in x)Y!=="ref"&&($[Y]=x[Y])}else $=x;return Gc(c),x=e_(s,c,p,$,O,A),Y=t_(),s!==null&&!Yn?(n_(s,c,A),ms(s,c,A)):(_t&&Y&&tr(c),c.flags|=1,Ar(s,c,x,A),c.child)}function RO(s,c,p,x,A){if(s===null){var O=p.type;return typeof O=="function"&&!od(O)&&O.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=O,LO(s,c,O,x,A)):(s=Uc(p.type,null,x,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(O=s.child,!T_(s,A)){var $=O.memoizedProps;if(p=p.compare,p=p!==null?p:vl,p($,x)&&s.ref===c.ref)return ms(s,c,A)}return c.flags|=1,s=ha(O,x),s.ref=c.ref,s.return=c,c.child=s}function LO(s,c,p,x,A){if(s!==null){var O=s.memoizedProps;if(vl(O,x)&&s.ref===c.ref)if(Yn=!1,c.pendingProps=x=O,T_(s,A))(s.flags&131072)!==0&&(Yn=!0);else return c.lanes=s.lanes,ms(s,c,A)}return x_(s,c,p,x,A)}function IO(s,c,p,x){var A=x.children,O=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(O=O!==null?O.baseLanes|p:p,s!==null){for(x=c.child=s.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;x=A&~O}else x=0,c.child=null;return $O(s,c,O,p,x)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&K0(c,O!==null?O.cachePool:null),O!==null?zN(c,O):Zw(),UN(c);else return x=c.lanes=536870912,$O(s,c,O!==null?O.baseLanes|p:p,p,x)}else O!==null?(K0(c,O.cachePool),zN(c,O),Nl(),c.memoizedState=null):(s!==null&&K0(c,null),Zw(),Nl());return Ar(s,c,A,p),c.child}function Rh(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function $O(s,c,p,x,A){var O=Gw();return O=O===null?null:{parent:Hn._currentValue,pool:O},c.memoizedState={baseLanes:p,cachePool:O},s!==null&&K0(c,null),Zw(),UN(c),s!==null&&cd(s,c,x,!0),c.childLanes=A,null}function cg(s,c){return c=dg({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function BO(s,c,p){return Wc(c,s.child,null,p),s=cg(c,c.pendingProps),s.flags|=2,Bi(c),c.memoizedState=null,s}function QG(s,c,p){var x=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(_t){if(x.mode==="hidden")return s=cg(c,x),c.lanes=536870912,Rh(null,s);if(Jw(c),(s=Pt)?(s=XC(s,pi),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:ye!==null?{id:Ae,overflow:Be}:null,retryLane:536870912,hydrationErrors:null},p=xh(s),p.return=c,c.child=p,Dt=c,Pt=null)):s=null,s===null)throw jo(c);return c.lanes=536870912,null}return cg(c,x)}var O=s.memoizedState;if(O!==null){var $=O.dehydrated;if(Jw(c),A)if(c.flags&256)c.flags&=-257,c=BO(s,c,p);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(Yn||cd(s,c,p,!1),A=(p&s.childLanes)!==0,Yn||A){if(x=en,x!==null&&($=v0(x,p),$!==0&&$!==O.retryLane))throw O.retryLane=$,fa(s,$),xi(x,s,$),v_;xg(),c=BO(s,c,p)}else s=O.treeContext,Pt=pa($.nextSibling),Dt=c,_t=!0,Eo=null,pi=!1,s!==null&&Zr(c,s),c=cg(c,x),c.flags|=4096;return c}return s=ha(s.child,{mode:x.mode,children:x.children}),s.ref=c.ref,c.child=s,s.return=c,s}function ug(s,c){var p=c.ref;if(p===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(s===null||s.ref!==p)&&(c.flags|=4194816)}}function x_(s,c,p,x,A){return Gc(c),p=e_(s,c,p,x,void 0,A),x=t_(),s!==null&&!Yn?(n_(s,c,A),ms(s,c,A)):(_t&&x&&tr(c),c.flags|=1,Ar(s,c,p,A),c.child)}function zO(s,c,p,x,A,O){return Gc(c),c.updateQueue=null,p=HN(c,x,p,A),FN(s),x=t_(),s!==null&&!Yn?(n_(s,c,O),ms(s,c,O)):(_t&&x&&tr(c),c.flags|=1,Ar(s,c,p,O),c.child)}function UO(s,c,p,x,A){if(Gc(c),c.stateNode===null){var O=ls,$=p.contextType;typeof $=="object"&&$!==null&&(O=Tr($)),O=new p(x,O),c.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=b_,c.stateNode=O,O._reactInternals=c,O=c.stateNode,O.props=x,O.state=c.memoizedState,O.refs={},qw(c),$=p.contextType,O.context=typeof $=="object"&&$!==null?Tr($):ls,O.state=c.memoizedState,$=p.getDerivedStateFromProps,typeof $=="function"&&(g_(c,p,$,x),O.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||($=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),$!==O.state&&b_.enqueueReplaceState(O,O.state,null),Oh(c,x,O,A),Nh(),O.state=c.memoizedState),typeof O.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(s===null){O=c.stateNode;var Y=c.memoizedProps,ie=Zc(p,Y);O.props=ie;var be=O.context,ke=p.contextType;$=ls,typeof ke=="object"&&ke!==null&&($=Tr(ke));var Ne=p.getDerivedStateFromProps;ke=typeof Ne=="function"||typeof O.getSnapshotBeforeUpdate=="function",Y=c.pendingProps!==Y,ke||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y||be!==$)&&TO(c,O,x,$),El=!1;var ve=c.memoizedState;O.state=ve,Oh(c,x,O,A),Nh(),be=c.memoizedState,Y||ve!==be||El?(typeof Ne=="function"&&(g_(c,p,Ne,x),be=c.memoizedState),(ie=El||jO(c,p,ie,x,ve,be,$))?(ke||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=be),O.props=x,O.state=be,O.context=$,x=ie):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{O=c.stateNode,Kw(s,c),$=c.memoizedProps,ke=Zc(p,$),O.props=ke,Ne=c.pendingProps,ve=O.context,be=p.contextType,ie=ls,typeof be=="object"&&be!==null&&(ie=Tr(be)),Y=p.getDerivedStateFromProps,(be=typeof Y=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||($!==Ne||ve!==ie)&&TO(c,O,x,ie),El=!1,ve=c.memoizedState,O.state=ve,Oh(c,x,O,A),Nh();var we=c.memoizedState;$!==Ne||ve!==we||El||s!==null&&s.dependencies!==null&&Y0(s.dependencies)?(typeof Y=="function"&&(g_(c,p,Y,x),we=c.memoizedState),(ke=El||jO(c,p,ke,x,ve,we,ie)||s!==null&&s.dependencies!==null&&Y0(s.dependencies))?(be||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,we,ie),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,we,ie)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||$===s.memoizedProps&&ve===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ve===s.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=we),O.props=x,O.state=we,O.context=ie,x=ke):(typeof O.componentDidUpdate!="function"||$===s.memoizedProps&&ve===s.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ve===s.memoizedState||(c.flags|=1024),x=!1)}return O=x,ug(s,c),x=(c.flags&128)!==0,O||x?(O=c.stateNode,p=x&&typeof p.getDerivedStateFromError!="function"?null:O.render(),c.flags|=1,s!==null&&x?(c.child=Wc(c,s.child,null,A),c.child=Wc(c,null,p,A)):Ar(s,c,p,A),c.memoizedState=O.state,s=c.child):s=ms(s,c,A),s}function FO(s,c,p,x){return us(),c.flags|=256,Ar(s,c,p,x),c.child}var w_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function __(s){return{baseLanes:s,cachePool:CN()}}function S_(s,c,p){return s=s!==null?s.childLanes&~p:0,c&&(s|=Ui),s}function HO(s,c,p){var x=c.pendingProps,A=!1,O=(c.flags&128)!==0,$;if(($=O)||($=s!==null&&s.memoizedState===null?!1:(Rn.current&2)!==0),$&&(A=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,s===null){if(_t){if(A?Al(c):Nl(),(s=Pt)?(s=XC(s,pi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:ye!==null?{id:Ae,overflow:Be}:null,retryLane:536870912,hydrationErrors:null},p=xh(s),p.return=c,c.child=p,Dt=c,Pt=null)):s=null,s===null)throw jo(c);return a1(s)?c.lanes=32:c.lanes=536870912,null}var Y=x.children;return x=x.fallback,A?(Nl(),A=c.mode,Y=dg({mode:"hidden",children:Y},A),x=cs(x,A,p,null),Y.return=c,x.return=c,Y.sibling=x,c.child=Y,x=c.child,x.memoizedState=__(p),x.childLanes=S_(s,$,p),c.memoizedState=w_,Rh(null,x)):(Al(c),k_(c,Y))}var ie=s.memoizedState;if(ie!==null&&(Y=ie.dehydrated,Y!==null)){if(O)c.flags&256?(Al(c),c.flags&=-257,c=E_(s,c,p)):c.memoizedState!==null?(Nl(),c.child=s.child,c.flags|=128,c=null):(Nl(),Y=x.fallback,A=c.mode,x=dg({mode:"visible",children:x.children},A),Y=cs(Y,A,p,null),Y.flags|=2,x.return=c,Y.return=c,x.sibling=Y,c.child=x,Wc(c,s.child,null,p),x=c.child,x.memoizedState=__(p),x.childLanes=S_(s,$,p),c.memoizedState=w_,c=Rh(null,x));else if(Al(c),a1(Y)){if($=Y.nextSibling&&Y.nextSibling.dataset,$)var be=$.dgst;$=be,x=Error(r(419)),x.stack="",x.digest=$,Fc({value:x,source:null,stack:null}),c=E_(s,c,p)}else if(Yn||cd(s,c,p,!1),$=(p&s.childLanes)!==0,Yn||$){if($=en,$!==null&&(x=v0($,p),x!==0&&x!==ie.retryLane))throw ie.retryLane=x,fa(s,x),xi($,s,x),v_;i1(Y)||xg(),c=E_(s,c,p)}else i1(Y)?(c.flags|=192,c.child=s.child,c=null):(s=ie.treeContext,Pt=pa(Y.nextSibling),Dt=c,_t=!0,Eo=null,pi=!1,s!==null&&Zr(c,s),c=k_(c,x.children),c.flags|=4096);return c}return A?(Nl(),Y=x.fallback,A=c.mode,ie=s.child,be=ie.sibling,x=ha(ie,{mode:"hidden",children:x.children}),x.subtreeFlags=ie.subtreeFlags&65011712,be!==null?Y=ha(be,Y):(Y=cs(Y,A,p,null),Y.flags|=2),Y.return=c,x.return=c,x.sibling=Y,c.child=x,Rh(null,x),x=c.child,Y=s.child.memoizedState,Y===null?Y=__(p):(A=Y.cachePool,A!==null?(ie=Hn._currentValue,A=A.parent!==ie?{parent:ie,pool:ie}:A):A=CN(),Y={baseLanes:Y.baseLanes|p,cachePool:A}),x.memoizedState=Y,x.childLanes=S_(s,$,p),c.memoizedState=w_,Rh(s.child,x)):(Al(c),p=s.child,s=p.sibling,p=ha(p,{mode:"visible",children:x.children}),p.return=c,p.sibling=null,s!==null&&($=c.deletions,$===null?(c.deletions=[s],c.flags|=16):$.push(s)),c.child=p,c.memoizedState=null,p)}function k_(s,c){return c=dg({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function dg(s,c){return s=zr(22,s,null,c),s.lanes=0,s}function E_(s,c,p){return Wc(c,s.child,null,p),s=k_(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function GO(s,c,p){s.lanes|=c;var x=s.alternate;x!==null&&(x.lanes|=c),zw(s.return,c,p)}function j_(s,c,p,x,A,O){var $=s.memoizedState;$===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:A,treeForkCount:O}:($.isBackwards=c,$.rendering=null,$.renderingStartTime=0,$.last=x,$.tail=p,$.tailMode=A,$.treeForkCount=O)}function YO(s,c,p){var x=c.pendingProps,A=x.revealOrder,O=x.tail;x=x.children;var $=Rn.current,Y=($&2)!==0;if(Y?($=$&1|2,c.flags|=128):$&=1,ee(Rn,$),Ar(s,c,x,p),x=_t?U:0,!Y&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&GO(s,p,c);else if(s.tag===19)GO(s,p,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(p=c.child,A=null;p!==null;)s=p.alternate,s!==null&&Q0(s)===null&&(A=p),p=p.sibling;p=A,p===null?(A=c.child,c.child=null):(A=p.sibling,p.sibling=null),j_(c,!1,A,p,O,x);break;case"backwards":case"unstable_legacy-backwards":for(p=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&Q0(s)===null){c.child=A;break}s=A.sibling,A.sibling=p,p=A,A=s}j_(c,!0,p,null,O,x);break;case"together":j_(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function ms(s,c,p){if(s!==null&&(c.dependencies=s.dependencies),Ml|=c.lanes,(p&c.childLanes)===0)if(s!==null){if(cd(s,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,p=ha(s,s.pendingProps),c.child=p,p.return=c;s.sibling!==null;)s=s.sibling,p=p.sibling=ha(s,s.pendingProps),p.return=c;p.sibling=null}return c.child}function T_(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Y0(s)))}function eY(s,c,p){switch(c.tag){case 3:pe(c,c.stateNode.containerInfo),kl(c,Hn,s.memoizedState.cache),us();break;case 27:case 5:je(c);break;case 4:pe(c,c.stateNode.containerInfo);break;case 10:kl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Jw(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(Al(c),c.flags|=128,null):(p&c.child.childLanes)!==0?HO(s,c,p):(Al(c),s=ms(s,c,p),s!==null?s.sibling:null);Al(c);break;case 19:var A=(s.flags&128)!==0;if(x=(p&c.childLanes)!==0,x||(cd(s,c,p,!1),x=(p&c.childLanes)!==0),A){if(x)return YO(s,c,p);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ee(Rn,Rn.current),x)break;return null;case 22:return c.lanes=0,IO(s,c,p,c.pendingProps);case 24:kl(c,Hn,s.memoizedState.cache)}return ms(s,c,p)}function qO(s,c,p){if(s!==null)if(s.memoizedProps!==c.pendingProps)Yn=!0;else{if(!T_(s,p)&&(c.flags&128)===0)return Yn=!1,eY(s,c,p);Yn=(s.flags&131072)!==0}else Yn=!1,_t&&(c.flags&1048576)!==0&&yt(c,U,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(s=qc(c.elementType),c.type=s,typeof s=="function")od(s)?(x=Zc(s,x),c.tag=1,c=UO(null,c,s,x,p)):(c.tag=0,c=x_(null,c,s,x,p));else{if(s!=null){var A=s.$$typeof;if(A===C){c.tag=11,c=PO(null,c,s,x,p);break e}else if(A===I){c.tag=14,c=RO(null,c,s,x,p);break e}}throw c=X(s)||s,Error(r(306,c,""))}}return c;case 0:return x_(s,c,c.type,c.pendingProps,p);case 1:return x=c.type,A=Zc(x,c.pendingProps),UO(s,c,x,A,p);case 3:e:{if(pe(c,c.stateNode.containerInfo),s===null)throw Error(r(387));x=c.pendingProps;var O=c.memoizedState;A=O.element,Kw(s,c),Oh(c,x,null,p);var $=c.memoizedState;if(x=$.cache,kl(c,Hn,x),x!==O.cache&&Uw(c,[Hn],p,!0),Nh(),x=$.element,O.isDehydrated)if(O={element:x,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=O,c.memoizedState=O,c.flags&256){c=FO(s,c,x,p);break e}else if(x!==A){A=v(Error(r(424)),c),Fc(A),c=FO(s,c,x,p);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Pt=pa(s.firstChild),Dt=c,_t=!0,Eo=null,pi=!0,p=IN(c,null,x,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(us(),x===A){c=ms(s,c,p);break e}Ar(s,c,x,p)}c=c.child}return c;case 26:return ug(s,c),s===null?(p=rM(c.type,null,c.pendingProps,null))?c.memoizedState=p:_t||(p=c.type,s=c.pendingProps,x=Tg(ae.current).createElement(p),x[Un]=c,x[ur]=s,Nr(x,p,s),Fn(x),c.stateNode=x):c.memoizedState=rM(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return je(c),s===null&&_t&&(x=c.stateNode=eM(c.type,c.pendingProps,ae.current),Dt=c,pi=!0,A=Pt,Il(c.type)?(o1=A,Pt=pa(x.firstChild)):Pt=A),Ar(s,c,c.pendingProps.children,p),ug(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&_t&&((A=x=Pt)&&(x=OY(x,c.type,c.pendingProps,pi),x!==null?(c.stateNode=x,Dt=c,Pt=pa(x.firstChild),pi=!1,A=!0):A=!1),A||jo(c)),je(c),A=c.type,O=c.pendingProps,$=s!==null?s.memoizedProps:null,x=O.children,t1(A,O)?x=null:$!==null&&t1(A,$)&&(c.flags|=32),c.memoizedState!==null&&(A=e_(s,c,YG,null,null,p),Zh._currentValue=A),ug(s,c),Ar(s,c,x,p),c.child;case 6:return s===null&&_t&&((s=p=Pt)&&(p=CY(p,c.pendingProps,pi),p!==null?(c.stateNode=p,Dt=c,Pt=null,s=!0):s=!1),s||jo(c)),null;case 13:return HO(s,c,p);case 4:return pe(c,c.stateNode.containerInfo),x=c.pendingProps,s===null?c.child=Wc(c,null,x,p):Ar(s,c,x,p),c.child;case 11:return PO(s,c,c.type,c.pendingProps,p);case 7:return Ar(s,c,c.pendingProps,p),c.child;case 8:return Ar(s,c,c.pendingProps.children,p),c.child;case 12:return Ar(s,c,c.pendingProps.children,p),c.child;case 10:return x=c.pendingProps,kl(c,c.type,x.value),Ar(s,c,x.children,p),c.child;case 9:return A=c.type._context,x=c.pendingProps.children,Gc(c),A=Tr(A),x=x(A),c.flags|=1,Ar(s,c,x,p),c.child;case 14:return RO(s,c,c.type,c.pendingProps,p);case 15:return LO(s,c,c.type,c.pendingProps,p);case 19:return YO(s,c,p);case 31:return QG(s,c,p);case 22:return IO(s,c,p,c.pendingProps);case 24:return Gc(c),x=Tr(Hn),s===null?(A=Gw(),A===null&&(A=en,O=Fw(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=p),A=O),c.memoizedState={parent:x,cache:A},qw(c),kl(c,Hn,A)):((s.lanes&p)!==0&&(Kw(s,c),Oh(c,null,null,p),Nh()),A=s.memoizedState,O=c.memoizedState,A.parent!==x?(A={parent:x,cache:x},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),kl(c,Hn,x)):(x=O.cache,kl(c,Hn,x),x!==A.cache&&Uw(c,[Hn],p,!0))),Ar(s,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ps(s){s.flags|=4}function A_(s,c,p,x,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(vC())s.flags|=8192;else throw Kc=V0,Yw}else s.flags&=-16777217}function KO(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!lM(c))if(vC())s.flags|=8192;else throw Kc=V0,Yw}function fg(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?g0():536870912,s.lanes|=c,wd|=c)}function Lh(s,c){if(!_t)switch(s.tailMode){case"hidden":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function cn(s){var c=s.alternate!==null&&s.alternate.child===s.child,p=0,x=0;if(c)for(var A=s.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags&65011712,x|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=x,s.childLanes=p,c}function tY(s,c,p){var x=c.pendingProps;switch(Nn(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(c),null;case 1:return cn(c),null;case 3:return p=c.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),ds(Hn),te(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(qa(c)?ps(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Sh())),cn(c),null;case 26:var A=c.type,O=c.memoizedState;return s===null?(ps(c),O!==null?(cn(c),KO(c,O)):(cn(c),A_(c,A,null,x,p))):O?O!==s.memoizedState?(ps(c),cn(c),KO(c,O)):(cn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==x&&ps(c),cn(c),A_(c,A,s,x,p)),null;case 27:if(xe(c),p=ae.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ps(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return cn(c),null}s=he.current,qa(c)?_h(c):(s=eM(A,x,p),c.stateNode=s,ps(c))}return cn(c),null;case 5:if(xe(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ps(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return cn(c),null}if(O=he.current,qa(c))_h(c);else{var $=Tg(ae.current);switch(O){case 1:O=$.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:O=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":O=$.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":O=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":O=$.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof x.is=="string"?$.createElement("select",{is:x.is}):$.createElement("select"),x.multiple?O.multiple=!0:x.size&&(O.size=x.size);break;default:O=typeof x.is=="string"?$.createElement(A,{is:x.is}):$.createElement(A)}}O[Un]=c,O[ur]=x;e:for($=c.child;$!==null;){if($.tag===5||$.tag===6)O.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}c.stateNode=O;e:switch(Nr(O,A,x),A){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&ps(c)}}return cn(c),A_(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,p),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==x&&ps(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(r(166));if(s=ae.current,qa(c)){if(s=c.stateNode,p=c.memoizedProps,x=null,A=Dt,A!==null)switch(A.tag){case 27:case 5:x=A.memoizedProps}s[Un]=c,s=!!(s.nodeValue===p||x!==null&&x.suppressHydrationWarning===!0||HC(s.nodeValue,p)),s||jo(c,!0)}else s=Tg(s).createTextNode(x),s[Un]=c,c.stateNode=s}return cn(c),null;case 31:if(p=c.memoizedState,s===null||s.memoizedState!==null){if(x=qa(c),p!==null){if(s===null){if(!x)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Un]=c}else us(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),s=!1}else p=Sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return c.flags&256?(Bi(c),c):(Bi(c),null);if((c.flags&128)!==0)throw Error(r(558))}return cn(c),null;case 13:if(x=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=qa(c),x!==null&&x.dehydrated!==null){if(s===null){if(!A)throw Error(r(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Un]=c}else us(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),A=!1}else A=Sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Bi(c),c):(Bi(c),null)}return Bi(c),(c.flags&128)!==0?(c.lanes=p,c):(p=x!==null,s=s!==null&&s.memoizedState!==null,p&&(x=c.child,A=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(A=x.alternate.memoizedState.cachePool.pool),O=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(O=x.memoizedState.cachePool.pool),O!==A&&(x.flags|=2048)),p!==s&&p&&(c.child.flags|=8192),fg(c,c.updateQueue),cn(c),null);case 4:return te(),s===null&&Z_(c.stateNode.containerInfo),cn(c),null;case 10:return ds(c.type),cn(c),null;case 19:if(re(Rn),x=c.memoizedState,x===null)return cn(c),null;if(A=(c.flags&128)!==0,O=x.rendering,O===null)if(A)Lh(x,!1);else{if(Cn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(O=Q0(s),O!==null){for(c.flags|=128,Lh(x,!1),s=O.updateQueue,c.updateQueue=s,fg(c,s),c.subtreeFlags=0,s=p,p=c.child;p!==null;)vh(p,s),p=p.sibling;return ee(Rn,Rn.current&1|2),_t&&Je(c,x.treeForkCount),c.child}s=s.sibling}x.tail!==null&&Ue()>bg&&(c.flags|=128,A=!0,Lh(x,!1),c.lanes=4194304)}else{if(!A)if(s=Q0(O),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,fg(c,s),Lh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!O.alternate&&!_t)return cn(c),null}else 2*Ue()-x.renderingStartTime>bg&&p!==536870912&&(c.flags|=128,A=!0,Lh(x,!1),c.lanes=4194304);x.isBackwards?(O.sibling=c.child,c.child=O):(s=x.last,s!==null?s.sibling=O:c.child=O,x.last=O)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=Ue(),s.sibling=null,p=Rn.current,ee(Rn,A?p&1|2:p&1),_t&&Je(c,x.treeForkCount),s):(cn(c),null);case 22:case 23:return Bi(c),Xw(),x=c.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(p&536870912)!==0&&(c.flags&128)===0&&(cn(c),c.subtreeFlags&6&&(c.flags|=8192)):cn(c),p=c.updateQueue,p!==null&&fg(c,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==p&&(c.flags|=2048),s!==null&&re(Yc),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),ds(Hn),cn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function nY(s,c){switch(Nn(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return ds(Hn),te(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return xe(c),null;case 31:if(c.memoizedState!==null){if(Bi(c),c.alternate===null)throw Error(r(340));us()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Bi(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));us()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return re(Rn),null;case 4:return te(),null;case 10:return ds(c.type),null;case 22:case 23:return Bi(c),Xw(),s!==null&&re(Yc),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return ds(Hn),null;case 25:return null;default:return null}}function WO(s,c){switch(Nn(c),c.tag){case 3:ds(Hn),te();break;case 26:case 27:case 5:xe(c);break;case 4:te();break;case 31:c.memoizedState!==null&&Bi(c);break;case 13:Bi(c);break;case 19:re(Rn);break;case 10:ds(c.type);break;case 22:case 23:Bi(c),Xw(),s!==null&&re(Yc);break;case 24:ds(Hn)}}function Ih(s,c){try{var p=c.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var A=x.next;p=A;do{if((p.tag&s)===s){x=void 0;var O=p.create,$=p.inst;x=O(),$.destroy=x}p=p.next}while(p!==A)}}catch(Y){Yt(c,c.return,Y)}}function Ol(s,c,p){try{var x=c.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var O=A.next;x=O;do{if((x.tag&s)===s){var $=x.inst,Y=$.destroy;if(Y!==void 0){$.destroy=void 0,A=c;var ie=p,be=Y;try{be()}catch(ke){Yt(A,ie,ke)}}}x=x.next}while(x!==O)}}catch(ke){Yt(c,c.return,ke)}}function VO(s){var c=s.updateQueue;if(c!==null){var p=s.stateNode;try{BN(c,p)}catch(x){Yt(s,s.return,x)}}}function ZO(s,c,p){p.props=Zc(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(x){Yt(s,c,x)}}function $h(s,c){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof p=="function"?s.refCleanup=p(x):p.current=x}}catch(A){Yt(s,c,A)}}function Ao(s,c){var p=s.ref,x=s.refCleanup;if(p!==null)if(typeof x=="function")try{x()}catch(A){Yt(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){Yt(s,c,A)}else p.current=null}function XO(s){var c=s.type,p=s.memoizedProps,x=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&x.focus();break e;case"img":p.src?x.src=p.src:p.srcSet&&(x.srcset=p.srcSet)}}catch(A){Yt(s,s.return,A)}}function N_(s,c,p){try{var x=s.stateNode;kY(x,s.type,p,c),x[ur]=c}catch(A){Yt(s,s.return,A)}}function JO(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Il(s.type)||s.tag===4}function O_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||JO(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Il(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function C_(s,c,p){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(s),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=di));else if(x!==4&&(x===27&&Il(s.type)&&(p=s.stateNode,c=null),s=s.child,s!==null))for(C_(s,c,p),s=s.sibling;s!==null;)C_(s,c,p),s=s.sibling}function hg(s,c,p){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?p.insertBefore(s,c):p.appendChild(s);else if(x!==4&&(x===27&&Il(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(hg(s,c,p),s=s.sibling;s!==null;)hg(s,c,p),s=s.sibling}function QO(s){var c=s.stateNode,p=s.memoizedProps;try{for(var x=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);Nr(c,x,p),c[Un]=s,c[ur]=p}catch(O){Yt(s,s.return,O)}}var gs=!1,qn=!1,M_=!1,eC=typeof WeakSet=="function"?WeakSet:Set,hr=null;function rY(s,c){if(s=s.containerInfo,Q_=Pg,s=Pc(s),xo(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var A=x.anchorOffset,O=x.focusNode;x=x.focusOffset;try{p.nodeType,O.nodeType}catch{p=null;break e}var $=0,Y=-1,ie=-1,be=0,ke=0,Ne=s,ve=null;t:for(;;){for(var we;Ne!==p||A!==0&&Ne.nodeType!==3||(Y=$+A),Ne!==O||x!==0&&Ne.nodeType!==3||(ie=$+x),Ne.nodeType===3&&($+=Ne.nodeValue.length),(we=Ne.firstChild)!==null;)ve=Ne,Ne=we;for(;;){if(Ne===s)break t;if(ve===p&&++be===A&&(Y=$),ve===O&&++ke===x&&(ie=$),(we=Ne.nextSibling)!==null)break;Ne=ve,ve=Ne.parentNode}Ne=we}p=Y===-1||ie===-1?null:{start:Y,end:ie}}else p=null}p=p||{start:0,end:0}}else p=null;for(e1={focusedElem:s,selectionRange:p},Pg=!1,hr=c;hr!==null;)if(c=hr,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,hr=s;else for(;hr!==null;){switch(c=hr,O=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)A=s[p],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&O!==null){s=void 0,p=c,A=O.memoizedProps,O=O.memoizedState,x=p.stateNode;try{var Ye=Zc(p.type,A);s=x.getSnapshotBeforeUpdate(Ye,O),x.__reactInternalSnapshotBeforeUpdate=s}catch(ot){Yt(p,p.return,ot)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,p=s.nodeType,p===9)r1(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":r1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,hr=s;break}hr=c.return}}function tC(s,c,p){var x=p.flags;switch(p.tag){case 0:case 11:case 15:ys(s,p),x&4&&Ih(5,p);break;case 1:if(ys(s,p),x&4)if(s=p.stateNode,c===null)try{s.componentDidMount()}catch($){Yt(p,p.return,$)}else{var A=Zc(p.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch($){Yt(p,p.return,$)}}x&64&&VO(p),x&512&&$h(p,p.return);break;case 3:if(ys(s,p),x&64&&(s=p.updateQueue,s!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{BN(s,c)}catch($){Yt(p,p.return,$)}}break;case 27:c===null&&x&4&&QO(p);case 26:case 5:ys(s,p),c===null&&x&4&&XO(p),x&512&&$h(p,p.return);break;case 12:ys(s,p);break;case 31:ys(s,p),x&4&&iC(s,p);break;case 13:ys(s,p),x&4&&aC(s,p),x&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=fY.bind(null,p),MY(s,p))));break;case 22:if(x=p.memoizedState!==null||gs,!x){c=c!==null&&c.memoizedState!==null||qn,A=gs;var O=qn;gs=x,(qn=c)&&!O?vs(s,p,(p.subtreeFlags&8772)!==0):ys(s,p),gs=A,qn=O}break;case 30:break;default:ys(s,p)}}function nC(s){var c=s.alternate;c!==null&&(s.alternate=null,nC(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&th(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var mn=null,gi=!1;function bs(s,c,p){for(p=p.child;p!==null;)rC(s,c,p),p=p.sibling}function rC(s,c,p){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Nt,p)}catch{}switch(p.tag){case 26:qn||Ao(p,c),bs(s,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:qn||Ao(p,c);var x=mn,A=gi;Il(p.type)&&(mn=p.stateNode,gi=!1),bs(s,c,p),Kh(p.stateNode),mn=x,gi=A;break;case 5:qn||Ao(p,c);case 6:if(x=mn,A=gi,mn=null,bs(s,c,p),mn=x,gi=A,mn!==null)if(gi)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(p.stateNode)}catch(O){Yt(p,c,O)}else try{mn.removeChild(p.stateNode)}catch(O){Yt(p,c,O)}break;case 18:mn!==null&&(gi?(s=mn,VC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),Nd(s)):VC(mn,p.stateNode));break;case 4:x=mn,A=gi,mn=p.stateNode.containerInfo,gi=!0,bs(s,c,p),mn=x,gi=A;break;case 0:case 11:case 14:case 15:Ol(2,p,c),qn||Ol(4,p,c),bs(s,c,p);break;case 1:qn||(Ao(p,c),x=p.stateNode,typeof x.componentWillUnmount=="function"&&ZO(p,c,x)),bs(s,c,p);break;case 21:bs(s,c,p);break;case 22:qn=(x=qn)||p.memoizedState!==null,bs(s,c,p),qn=x;break;default:bs(s,c,p)}}function iC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Nd(s)}catch(p){Yt(c,c.return,p)}}}function aC(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Nd(s)}catch(p){Yt(c,c.return,p)}}function iY(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new eC),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new eC),c;default:throw Error(r(435,s.tag))}}function mg(s,c){var p=iY(s);c.forEach(function(x){if(!p.has(x)){p.add(x);var A=hY.bind(null,s,x);x.then(A,A)}})}function bi(s,c){var p=c.deletions;if(p!==null)for(var x=0;x<p.length;x++){var A=p[x],O=s,$=c,Y=$;e:for(;Y!==null;){switch(Y.tag){case 27:if(Il(Y.type)){mn=Y.stateNode,gi=!1;break e}break;case 5:mn=Y.stateNode,gi=!1;break e;case 3:case 4:mn=Y.stateNode.containerInfo,gi=!0;break e}Y=Y.return}if(mn===null)throw Error(r(160));rC(O,$,A),mn=null,gi=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)oC(c,s),c=c.sibling}var Wa=null;function oC(s,c){var p=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bi(c,s),yi(s),x&4&&(Ol(3,s,s.return),Ih(3,s),Ol(5,s,s.return));break;case 1:bi(c,s),yi(s),x&512&&(qn||p===null||Ao(p,p.return)),x&64&&gs&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?x:p.concat(x))));break;case 26:var A=Wa;if(bi(c,s),yi(s),x&512&&(qn||p===null||Ao(p,p.return)),x&4){var O=p!==null?p.memoizedState:null;if(x=s.memoizedState,p===null)if(x===null)if(s.stateNode===null){e:{x=s.type,p=s.memoizedProps,A=A.ownerDocument||A;t:switch(x){case"title":O=A.getElementsByTagName("title")[0],(!O||O[yc]||O[Un]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(x),A.head.insertBefore(O,A.querySelector("head > title"))),Nr(O,x,p),O[Un]=s,Fn(O),x=O;break e;case"link":var $=oM("link","href",A).get(x+(p.href||""));if($){for(var Y=0;Y<$.length;Y++)if(O=$[Y],O.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&O.getAttribute("rel")===(p.rel==null?null:p.rel)&&O.getAttribute("title")===(p.title==null?null:p.title)&&O.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){$.splice(Y,1);break t}}O=A.createElement(x),Nr(O,x,p),A.head.appendChild(O);break;case"meta":if($=oM("meta","content",A).get(x+(p.content||""))){for(Y=0;Y<$.length;Y++)if(O=$[Y],O.getAttribute("content")===(p.content==null?null:""+p.content)&&O.getAttribute("name")===(p.name==null?null:p.name)&&O.getAttribute("property")===(p.property==null?null:p.property)&&O.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&O.getAttribute("charset")===(p.charSet==null?null:p.charSet)){$.splice(Y,1);break t}}O=A.createElement(x),Nr(O,x,p),A.head.appendChild(O);break;default:throw Error(r(468,x))}O[Un]=s,Fn(O),x=O}s.stateNode=x}else sM(A,s.type,s.stateNode);else s.stateNode=aM(A,x,s.memoizedProps);else O!==x?(O===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):O.count--,x===null?sM(A,s.type,s.stateNode):aM(A,x,s.memoizedProps)):x===null&&s.stateNode!==null&&N_(s,s.memoizedProps,p.memoizedProps)}break;case 27:bi(c,s),yi(s),x&512&&(qn||p===null||Ao(p,p.return)),p!==null&&x&4&&N_(s,s.memoizedProps,p.memoizedProps);break;case 5:if(bi(c,s),yi(s),x&512&&(qn||p===null||Ao(p,p.return)),s.flags&32){A=s.stateNode;try{oa(A,"")}catch(Ye){Yt(s,s.return,Ye)}}x&4&&s.stateNode!=null&&(A=s.memoizedProps,N_(s,A,p!==null?p.memoizedProps:A)),x&1024&&(M_=!0);break;case 6:if(bi(c,s),yi(s),x&4){if(s.stateNode===null)throw Error(r(162));x=s.memoizedProps,p=s.stateNode;try{p.nodeValue=x}catch(Ye){Yt(s,s.return,Ye)}}break;case 3:if(Og=null,A=Wa,Wa=Ag(c.containerInfo),bi(c,s),Wa=A,yi(s),x&4&&p!==null&&p.memoizedState.isDehydrated)try{Nd(c.containerInfo)}catch(Ye){Yt(s,s.return,Ye)}M_&&(M_=!1,sC(s));break;case 4:x=Wa,Wa=Ag(s.stateNode.containerInfo),bi(c,s),yi(s),Wa=x;break;case 12:bi(c,s),yi(s);break;case 31:bi(c,s),yi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,mg(s,x)));break;case 13:bi(c,s),yi(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(gg=Ue()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,mg(s,x)));break;case 22:A=s.memoizedState!==null;var ie=p!==null&&p.memoizedState!==null,be=gs,ke=qn;if(gs=be||A,qn=ke||ie,bi(c,s),qn=ke,gs=be,yi(s),x&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(p===null||ie||gs||qn||Xc(s)),p=null,c=s;;){if(c.tag===5||c.tag===26){if(p===null){ie=p=c;try{if(O=ie.stateNode,A)$=O.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Y=ie.stateNode;var Ne=ie.memoizedProps.style,ve=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;Y.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(Ye){Yt(ie,ie.return,Ye)}}}else if(c.tag===6){if(p===null){ie=c;try{ie.stateNode.nodeValue=A?"":ie.memoizedProps}catch(Ye){Yt(ie,ie.return,Ye)}}}else if(c.tag===18){if(p===null){ie=c;try{var we=ie.stateNode;A?ZC(we,!0):ZC(ie.stateNode,!1)}catch(Ye){Yt(ie,ie.return,Ye)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=s.updateQueue,x!==null&&(p=x.retryQueue,p!==null&&(x.retryQueue=null,mg(s,p))));break;case 19:bi(c,s),yi(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,mg(s,x)));break;case 30:break;case 21:break;default:bi(c,s),yi(s)}}function yi(s){var c=s.flags;if(c&2){try{for(var p,x=s.return;x!==null;){if(JO(x)){p=x;break}x=x.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var A=p.stateNode,O=O_(s);hg(s,O,A);break;case 5:var $=p.stateNode;p.flags&32&&(oa($,""),p.flags&=-33);var Y=O_(s);hg(s,Y,$);break;case 3:case 4:var ie=p.stateNode.containerInfo,be=O_(s);C_(s,be,ie);break;default:throw Error(r(161))}}catch(ke){Yt(s,s.return,ke)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function sC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;sC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function ys(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)tC(s,c.alternate,c),c=c.sibling}function Xc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:Ol(4,c,c.return),Xc(c);break;case 1:Ao(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&ZO(c,c.return,p),Xc(c);break;case 27:Kh(c.stateNode);case 26:case 5:Ao(c,c.return),Xc(c);break;case 22:c.memoizedState===null&&Xc(c);break;case 30:Xc(c);break;default:Xc(c)}s=s.sibling}}function vs(s,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,A=s,O=c,$=O.flags;switch(O.tag){case 0:case 11:case 15:vs(A,O,p),Ih(4,O);break;case 1:if(vs(A,O,p),x=O,A=x.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(be){Yt(x,x.return,be)}if(x=O,A=x.updateQueue,A!==null){var Y=x.stateNode;try{var ie=A.shared.hiddenCallbacks;if(ie!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ie.length;A++)$N(ie[A],Y)}catch(be){Yt(x,x.return,be)}}p&&$&64&&VO(O),$h(O,O.return);break;case 27:QO(O);case 26:case 5:vs(A,O,p),p&&x===null&&$&4&&XO(O),$h(O,O.return);break;case 12:vs(A,O,p);break;case 31:vs(A,O,p),p&&$&4&&iC(A,O);break;case 13:vs(A,O,p),p&&$&4&&aC(A,O);break;case 22:O.memoizedState===null&&vs(A,O,p),$h(O,O.return);break;case 30:break;default:vs(A,O,p)}c=c.sibling}}function D_(s,c){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&kh(p))}function P_(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&kh(s))}function Va(s,c,p,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)lC(s,c,p,x),c=c.sibling}function lC(s,c,p,x){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Va(s,c,p,x),A&2048&&Ih(9,c);break;case 1:Va(s,c,p,x);break;case 3:Va(s,c,p,x),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&kh(s)));break;case 12:if(A&2048){Va(s,c,p,x),s=c.stateNode;try{var O=c.memoizedProps,$=O.id,Y=O.onPostCommit;typeof Y=="function"&&Y($,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ie){Yt(c,c.return,ie)}}else Va(s,c,p,x);break;case 31:Va(s,c,p,x);break;case 13:Va(s,c,p,x);break;case 23:break;case 22:O=c.stateNode,$=c.alternate,c.memoizedState!==null?O._visibility&2?Va(s,c,p,x):Bh(s,c):O._visibility&2?Va(s,c,p,x):(O._visibility|=2,yd(s,c,p,x,(c.subtreeFlags&10256)!==0||!1)),A&2048&&D_($,c);break;case 24:Va(s,c,p,x),A&2048&&P_(c.alternate,c);break;default:Va(s,c,p,x)}}function yd(s,c,p,x,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var O=s,$=c,Y=p,ie=x,be=$.flags;switch($.tag){case 0:case 11:case 15:yd(O,$,Y,ie,A),Ih(8,$);break;case 23:break;case 22:var ke=$.stateNode;$.memoizedState!==null?ke._visibility&2?yd(O,$,Y,ie,A):Bh(O,$):(ke._visibility|=2,yd(O,$,Y,ie,A)),A&&be&2048&&D_($.alternate,$);break;case 24:yd(O,$,Y,ie,A),A&&be&2048&&P_($.alternate,$);break;default:yd(O,$,Y,ie,A)}c=c.sibling}}function Bh(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=s,x=c,A=x.flags;switch(x.tag){case 22:Bh(p,x),A&2048&&D_(x.alternate,x);break;case 24:Bh(p,x),A&2048&&P_(x.alternate,x);break;default:Bh(p,x)}c=c.sibling}}var zh=8192;function vd(s,c,p){if(s.subtreeFlags&zh)for(s=s.child;s!==null;)cC(s,c,p),s=s.sibling}function cC(s,c,p){switch(s.tag){case 26:vd(s,c,p),s.flags&zh&&s.memoizedState!==null&&GY(p,Wa,s.memoizedState,s.memoizedProps);break;case 5:vd(s,c,p);break;case 3:case 4:var x=Wa;Wa=Ag(s.stateNode.containerInfo),vd(s,c,p),Wa=x;break;case 22:s.memoizedState===null&&(x=s.alternate,x!==null&&x.memoizedState!==null?(x=zh,zh=16777216,vd(s,c,p),zh=x):vd(s,c,p));break;default:vd(s,c,p)}}function uC(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Uh(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var x=c[p];hr=x,fC(x,s)}uC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dC(s),s=s.sibling}function dC(s){switch(s.tag){case 0:case 11:case 15:Uh(s),s.flags&2048&&Ol(9,s,s.return);break;case 3:Uh(s);break;case 12:Uh(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,pg(s)):Uh(s);break;default:Uh(s)}}function pg(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var x=c[p];hr=x,fC(x,s)}uC(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:Ol(8,c,c.return),pg(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,pg(c));break;default:pg(c)}s=s.sibling}}function fC(s,c){for(;hr!==null;){var p=hr;switch(p.tag){case 0:case 11:case 15:Ol(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var x=p.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:kh(p.memoizedState.cache)}if(x=p.child,x!==null)x.return=p,hr=x;else e:for(p=s;hr!==null;){x=hr;var A=x.sibling,O=x.return;if(nC(x),x===p){hr=null;break e}if(A!==null){A.return=O,hr=A;break e}hr=O}}}var aY={getCacheForType:function(s){var c=Tr(Hn),p=c.data.get(s);return p===void 0&&(p=s(),c.data.set(s,p)),p},cacheSignal:function(){return Tr(Hn).controller.signal}},oY=typeof WeakMap=="function"?WeakMap:Map,$t=0,en=null,St=null,jt=0,Gt=0,zi=null,Cl=!1,xd=!1,R_=!1,xs=0,Cn=0,Ml=0,Jc=0,L_=0,Ui=0,wd=0,Fh=null,vi=null,I_=!1,gg=0,hC=0,bg=1/0,yg=null,Dl=null,nr=0,Pl=null,_d=null,ws=0,$_=0,B_=null,mC=null,Hh=0,z_=null;function Fi(){return($t&2)!==0&&jt!==0?jt&-jt:F.T!==null?q_():Qf()}function pC(){if(Ui===0)if((jt&536870912)===0||_t){var s=zt;zt<<=1,(zt&3932160)===0&&(zt=262144),Ui=s}else Ui=536870912;return s=$i.current,s!==null&&(s.flags|=32),Ui}function xi(s,c,p){(s===en&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)&&(Sd(s,0),Rl(s,jt,Ui,!1)),es(s,p),(($t&2)===0||s!==en)&&(s===en&&(($t&2)===0&&(Jc|=p),Cn===4&&Rl(s,jt,Ui,!1)),No(s))}function gC(s,c,p){if(($t&6)!==0)throw Error(r(327));var x=!p&&(c&127)===0&&(c&s.expiredLanes)===0||bc(s,c),A=x?cY(s,c):F_(s,c,!0),O=x;do{if(A===0){xd&&!x&&Rl(s,c,0,!1);break}else{if(p=s.current.alternate,O&&!sY(p)){A=F_(s,c,!1),O=!1;continue}if(A===2){if(O=c,s.errorRecoveryDisabledLanes&O)var $=0;else $=s.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var Y=s;A=Fh;var ie=Y.current.memoizedState.isDehydrated;if(ie&&(Sd(Y,$).flags|=256),$=F_(Y,$,!1),$!==2){if(R_&&!ie){Y.errorRecoveryDisabledLanes|=O,Jc|=O,A=4;break e}O=vi,vi=A,O!==null&&(vi===null?vi=O:vi.push.apply(vi,O))}A=$}if(O=!1,A!==2)continue}}if(A===1){Sd(s,0),Rl(s,c,0,!0);break}e:{switch(x=s,O=A,O){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Rl(x,c,Ui,!Cl);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(A=gg+300-Ue(),10<A)){if(Rl(x,c,Ui,!Cl),Hu(x,0,!0)!==0)break e;ws=c,x.timeoutHandle=KC(bC.bind(null,x,p,vi,yg,I_,c,Ui,Jc,wd,Cl,O,"Throttled",-0,0),A);break e}bC(x,p,vi,yg,I_,c,Ui,Jc,wd,Cl,O,null,-0,0)}}break}while(!0);No(s)}function bC(s,c,p,x,A,O,$,Y,ie,be,ke,Ne,ve,we){if(s.timeoutHandle=-1,Ne=c.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},cC(c,O,Ne);var Ye=(O&62914560)===O?gg-Ue():(O&4194048)===O?hC-Ue():0;if(Ye=YY(Ne,Ye),Ye!==null){ws=O,s.cancelPendingCommit=Ye(EC.bind(null,s,c,O,p,x,A,$,Y,ie,ke,Ne,null,ve,we)),Rl(s,O,$,!be);return}}EC(s,c,O,p,x,A,$,Y,ie)}function sY(s){for(var c=s;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var x=0;x<p.length;x++){var A=p[x],O=A.getSnapshot;A=A.value;try{if(!dr(O(),A))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Rl(s,c,p,x){c&=~L_,c&=~Jc,s.suspendedLanes|=c,s.pingedLanes&=~c,x&&(s.warmLanes|=c),x=s.expirationTimes;for(var A=c;0<A;){var O=31-rn(A),$=1<<O;x[O]=-1,A&=~$}p!==0&&b0(s,p,c)}function vg(){return($t&6)===0?(Gh(0),!1):!0}function U_(){if(St!==null){if(Gt===0)var s=St.return;else s=St,Ka=To=null,r_(s),hd=null,jh=0,s=St;for(;s!==null;)WO(s.alternate,s),s=s.return;St=null}}function Sd(s,c){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,TY(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),ws=0,U_(),en=s,St=p=ha(s.current,null),jt=c,Gt=0,zi=null,Cl=!1,xd=bc(s,c),R_=!1,wd=Ui=L_=Jc=Ml=Cn=0,vi=Fh=null,I_=!1,(c&8)!==0&&(c|=c&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=c;0<x;){var A=31-rn(x),O=1<<A;c|=s[A],x&=~O}return xs=c,Bc(),p}function yC(s,c){gt=null,F.H=Ph,c===fd||c===W0?(c=PN(),Gt=3):c===Yw?(c=PN(),Gt=4):Gt=c===v_?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,zi=c,St===null&&(Cn=1,lg(s,v(c,s.current)))}function vC(){var s=$i.current;return s===null?!0:(jt&4194048)===jt?ma===null:(jt&62914560)===jt||(jt&536870912)!==0?s===ma:!1}function xC(){var s=F.H;return F.H=Ph,s===null?Ph:s}function wC(){var s=F.A;return F.A=aY,s}function xg(){Cn=4,Cl||(jt&4194048)!==jt&&$i.current!==null||(xd=!0),(Ml&134217727)===0&&(Jc&134217727)===0||en===null||Rl(en,jt,Ui,!1)}function F_(s,c,p){var x=$t;$t|=2;var A=xC(),O=wC();(en!==s||jt!==c)&&(yg=null,Sd(s,c)),c=!1;var $=Cn;e:do try{if(Gt!==0&&St!==null){var Y=St,ie=zi;switch(Gt){case 8:U_(),$=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(c=!0);var be=Gt;if(Gt=0,zi=null,kd(s,Y,ie,be),p&&xd){$=0;break e}break;default:be=Gt,Gt=0,zi=null,kd(s,Y,ie,be)}}lY(),$=Cn;break}catch(ke){yC(s,ke)}while(!0);return c&&s.shellSuspendCounter++,Ka=To=null,$t=x,F.H=A,F.A=O,St===null&&(en=null,jt=0,Bc()),$}function lY(){for(;St!==null;)_C(St)}function cY(s,c){var p=$t;$t|=2;var x=xC(),A=wC();en!==s||jt!==c?(yg=null,bg=Ue()+500,Sd(s,c)):xd=bc(s,c);e:do try{if(Gt!==0&&St!==null){c=St;var O=zi;t:switch(Gt){case 1:Gt=0,zi=null,kd(s,c,O,1);break;case 2:case 9:if(MN(O)){Gt=0,zi=null,SC(c);break}c=function(){Gt!==2&&Gt!==9||en!==s||(Gt=7),No(s)},O.then(c,c);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:MN(O)?(Gt=0,zi=null,SC(c)):(Gt=0,zi=null,kd(s,c,O,7));break;case 5:var $=null;switch(St.tag){case 26:$=St.memoizedState;case 5:case 27:var Y=St;if($?lM($):Y.stateNode.complete){Gt=0,zi=null;var ie=Y.sibling;if(ie!==null)St=ie;else{var be=Y.return;be!==null?(St=be,wg(be)):St=null}break t}}Gt=0,zi=null,kd(s,c,O,5);break;case 6:Gt=0,zi=null,kd(s,c,O,6);break;case 8:U_(),Cn=6;break e;default:throw Error(r(462))}}uY();break}catch(ke){yC(s,ke)}while(!0);return Ka=To=null,F.H=x,F.A=A,$t=p,St!==null?0:(en=null,jt=0,Bc(),Cn)}function uY(){for(;St!==null&&!oe();)_C(St)}function _C(s){var c=qO(s.alternate,s,xs);s.memoizedProps=s.pendingProps,c===null?wg(s):St=c}function SC(s){var c=s,p=c.alternate;switch(c.tag){case 15:case 0:c=zO(p,c,c.pendingProps,c.type,void 0,jt);break;case 11:c=zO(p,c,c.pendingProps,c.type.render,c.ref,jt);break;case 5:r_(c);default:WO(p,c),c=St=vh(c,xs),c=qO(p,c,xs)}s.memoizedProps=s.pendingProps,c===null?wg(s):St=c}function kd(s,c,p,x){Ka=To=null,r_(c),hd=null,jh=0;var A=c.return;try{if(JG(s,A,c,p,jt)){Cn=1,lg(s,v(p,s.current)),St=null;return}}catch(O){if(A!==null)throw St=A,O;Cn=1,lg(s,v(p,s.current)),St=null;return}c.flags&32768?(_t||x===1?s=!0:xd||(jt&536870912)!==0?s=!1:(Cl=s=!0,(x===2||x===9||x===3||x===6)&&(x=$i.current,x!==null&&x.tag===13&&(x.flags|=16384))),kC(c,s)):wg(c)}function wg(s){var c=s;do{if((c.flags&32768)!==0){kC(c,Cl);return}s=c.return;var p=tY(c.alternate,c,xs);if(p!==null){St=p;return}if(c=c.sibling,c!==null){St=c;return}St=c=s}while(c!==null);Cn===0&&(Cn=5)}function kC(s,c){do{var p=nY(s.alternate,s);if(p!==null){p.flags&=32767,St=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(s=s.sibling,s!==null)){St=s;return}St=s=p}while(s!==null);Cn=6,St=null}function EC(s,c,p,x,A,O,$,Y,ie){s.cancelPendingCommit=null;do _g();while(nr!==0);if(($t&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(O=c.lanes|c.childLanes,O|=ad,kw(s,p,O,$,Y,ie),s===en&&(St=en=null,jt=0),_d=c,Pl=s,ws=p,$_=O,B_=A,mC=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mY(Oe,function(){return OC(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=F.T,F.T=null,A=Z.p,Z.p=2,$=$t,$t|=4;try{rY(s,c,p)}finally{$t=$,Z.p=A,F.T=x}}nr=1,jC(),TC(),AC()}}function jC(){if(nr===1){nr=0;var s=Pl,c=_d,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=F.T,F.T=null;var x=Z.p;Z.p=2;var A=$t;$t|=4;try{oC(c,s);var O=e1,$=Pc(s.containerInfo),Y=O.focusedElem,ie=O.selectionRange;if($!==Y&&Y&&Y.ownerDocument&&td(Y.ownerDocument.documentElement,Y)){if(ie!==null&&xo(Y)){var be=ie.start,ke=ie.end;if(ke===void 0&&(ke=be),"selectionStart"in Y)Y.selectionStart=be,Y.selectionEnd=Math.min(ke,Y.value.length);else{var Ne=Y.ownerDocument||document,ve=Ne&&Ne.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),Ye=Y.textContent.length,ot=Math.min(ie.start,Ye),Xt=ie.end===void 0?ot:Math.min(ie.end,Ye);!we.extend&&ot>Xt&&($=Xt,Xt=ot,ot=$);var de=Dc(Y,ot),ce=Dc(Y,Xt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var ge=Ne.createRange();ge.setStart(de.node,de.offset),we.removeAllRanges(),ot>Xt?(we.addRange(ge),we.extend(ce.node,ce.offset)):(ge.setEnd(ce.node,ce.offset),we.addRange(ge))}}}}for(Ne=[],we=Y;we=we.parentNode;)we.nodeType===1&&Ne.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ne.length;Y++){var Te=Ne[Y];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Pg=!!Q_,e1=Q_=null}finally{$t=A,Z.p=x,F.T=p}}s.current=c,nr=2}}function TC(){if(nr===2){nr=0;var s=Pl,c=_d,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=F.T,F.T=null;var x=Z.p;Z.p=2;var A=$t;$t|=4;try{tC(s,c.alternate,c)}finally{$t=A,Z.p=x,F.T=p}}nr=3}}function AC(){if(nr===4||nr===3){nr=0,Ce();var s=Pl,c=_d,p=ws,x=mC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?nr=5:(nr=0,_d=Pl=null,NC(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(Dl=null),Ze(p),c=c.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Nt,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=F.T,A=Z.p,Z.p=2,F.T=null;try{for(var O=s.onRecoverableError,$=0;$<x.length;$++){var Y=x[$];O(Y.value,{componentStack:Y.stack})}}finally{F.T=c,Z.p=A}}(ws&3)!==0&&_g(),No(s),A=s.pendingLanes,(p&261930)!==0&&(A&42)!==0?s===z_?Hh++:(Hh=0,z_=s):Hh=0,Gh(0)}}function NC(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,kh(c)))}function _g(){return jC(),TC(),AC(),OC()}function OC(){if(nr!==5)return!1;var s=Pl,c=$_;$_=0;var p=Ze(ws),x=F.T,A=Z.p;try{Z.p=32>p?32:p,F.T=null,p=B_,B_=null;var O=Pl,$=ws;if(nr=0,_d=Pl=null,ws=0,($t&6)!==0)throw Error(r(331));var Y=$t;if($t|=4,dC(O.current),lC(O,O.current,$,p),$t=Y,Gh(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Nt,O)}catch{}return!0}finally{Z.p=A,F.T=x,NC(s,c)}}function CC(s,c,p){c=v(p,c),c=y_(s.stateNode,c,2),s=Tl(s,c,2),s!==null&&(es(s,2),No(s))}function Yt(s,c,p){if(s.tag===3)CC(s,s,p);else for(;c!==null;){if(c.tag===3){CC(c,s,p);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Dl===null||!Dl.has(x))){s=v(p,s),p=MO(2),x=Tl(c,p,2),x!==null&&(DO(p,x,c,s),es(x,2),No(x));break}}c=c.return}}function H_(s,c,p){var x=s.pingCache;if(x===null){x=s.pingCache=new oY;var A=new Set;x.set(c,A)}else A=x.get(c),A===void 0&&(A=new Set,x.set(c,A));A.has(p)||(R_=!0,A.add(p),s=dY.bind(null,s,c,p),c.then(s,s))}function dY(s,c,p){var x=s.pingCache;x!==null&&x.delete(c),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,en===s&&(jt&p)===p&&(Cn===4||Cn===3&&(jt&62914560)===jt&&300>Ue()-gg?($t&2)===0&&Sd(s,0):L_|=p,wd===jt&&(wd=0)),No(s)}function MC(s,c){c===0&&(c=g0()),s=fa(s,c),s!==null&&(es(s,c),No(s))}function fY(s){var c=s.memoizedState,p=0;c!==null&&(p=c.retryLane),MC(s,p)}function hY(s,c){var p=0;switch(s.tag){case 31:case 13:var x=s.stateNode,A=s.memoizedState;A!==null&&(p=A.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(c),MC(s,p)}function mY(s,c){return ze(s,c)}var Sg=null,Ed=null,G_=!1,kg=!1,Y_=!1,Ll=0;function No(s){s!==Ed&&s.next===null&&(Ed===null?Sg=Ed=s:Ed=Ed.next=s),kg=!0,G_||(G_=!0,gY())}function Gh(s,c){if(!Y_&&kg){Y_=!0;do for(var p=!1,x=Sg;x!==null;){if(s!==0){var A=x.pendingLanes;if(A===0)var O=0;else{var $=x.suspendedLanes,Y=x.pingedLanes;O=(1<<31-rn(42|s)+1)-1,O&=A&~($&~Y),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(p=!0,LC(x,O))}else O=jt,O=Hu(x,x===en?O:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(O&3)===0||bc(x,O)||(p=!0,LC(x,O));x=x.next}while(p);Y_=!1}}function pY(){DC()}function DC(){kg=G_=!1;var s=0;Ll!==0&&jY()&&(s=Ll);for(var c=Ue(),p=null,x=Sg;x!==null;){var A=x.next,O=PC(x,c);O===0?(x.next=null,p===null?Sg=A:p.next=A,A===null&&(Ed=p)):(p=x,(s!==0||(O&3)!==0)&&(kg=!0)),x=A}nr!==0&&nr!==5||Gh(s),Ll!==0&&(Ll=0)}function PC(s,c){for(var p=s.suspendedLanes,x=s.pingedLanes,A=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var $=31-rn(O),Y=1<<$,ie=A[$];ie===-1?((Y&p)===0||(Y&x)!==0)&&(A[$]=Sw(Y,c)):ie<=c&&(s.expiredLanes|=Y),O&=~Y}if(c=en,p=jt,p=Hu(s,s===c?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,p===0||s===c&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&Ge(x),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||bc(s,p)){if(c=p&-p,c===s.callbackPriority)return c;switch(x!==null&&Ge(x),Ze(p)){case 2:case 8:p=st;break;case 32:p=Oe;break;case 268435456:p=We;break;default:p=Oe}return x=RC.bind(null,s),p=ze(p,x),s.callbackPriority=c,s.callbackNode=p,c}return x!==null&&x!==null&&Ge(x),s.callbackPriority=2,s.callbackNode=null,2}function RC(s,c){if(nr!==0&&nr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(_g()&&s.callbackNode!==p)return null;var x=jt;return x=Hu(s,s===en?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(gC(s,x,c),PC(s,Ue()),s.callbackNode!=null&&s.callbackNode===p?RC.bind(null,s):null)}function LC(s,c){if(_g())return null;gC(s,c,!0)}function gY(){AY(function(){($t&6)!==0?ze(xt,pY):DC()})}function q_(){if(Ll===0){var s=ud;s===0&&(s=at,at<<=1,(at&261888)===0&&(at=256)),Ll=s}return Ll}function IC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:dl(""+s)}function $C(s,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,s.id&&p.setAttribute("form",s.id),c.parentNode.insertBefore(p,c),s=new FormData(s),p.parentNode.removeChild(p),s}function bY(s,c,p,x,A){if(c==="submit"&&p&&p.stateNode===A){var O=IC((A[ur]||null).action),$=x.submitter;$&&(c=(c=$[ur]||null)?IC(c.formAction):$.getAttribute("formAction"),c!==null&&(O=c,$=null));var Y=new Wu("action","action",null,x,A);s.push({event:Y,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Ll!==0){var ie=$?$C(A,$):new FormData(A);f_(p,{pending:!0,data:ie,method:A.method,action:O},null,ie)}}else typeof O=="function"&&(Y.preventDefault(),ie=$?$C(A,$):new FormData(A),f_(p,{pending:!0,data:ie,method:A.method,action:O},O,ie))},currentTarget:A}]})}}for(var K_=0;K_<So.length;K_++){var W_=So[K_],yY=W_.toLowerCase(),vY=W_[0].toUpperCase()+W_.slice(1);hi(yY,"on"+vY)}hi(Lc,"onAnimationEnd"),hi(F0,"onAnimationIteration"),hi(Ic,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Iw,"onTransitionRun"),hi(H0,"onTransitionStart"),hi($w,"onTransitionCancel"),hi(_l,"onTransitionEnd"),go("onMouseEnter",["mouseout","mouseover"]),go("onMouseLeave",["mouseout","mouseover"]),go("onPointerEnter",["pointerout","pointerover"]),go("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yh));function BC(s,c){c=(c&4)!==0;for(var p=0;p<s.length;p++){var x=s[p],A=x.event;x=x.listeners;e:{var O=void 0;if(c)for(var $=x.length-1;0<=$;$--){var Y=x[$],ie=Y.instance,be=Y.currentTarget;if(Y=Y.listener,ie!==O&&A.isPropagationStopped())break e;O=Y,A.currentTarget=be;try{O(A)}catch(ke){$c(ke)}A.currentTarget=null,O=ie}else for($=0;$<x.length;$++){if(Y=x[$],ie=Y.instance,be=Y.currentTarget,Y=Y.listener,ie!==O&&A.isPropagationStopped())break e;O=Y,A.currentTarget=be;try{O(A)}catch(ke){$c(ke)}A.currentTarget=null,O=ie}}}}function kt(s,c){var p=c[mo];p===void 0&&(p=c[mo]=new Set);var x=s+"__bubble";p.has(x)||(zC(c,s,2,!1),p.add(x))}function V_(s,c,p){var x=0;c&&(x|=4),zC(p,s,x,c)}var Eg="_reactListening"+Math.random().toString(36).slice(2);function Z_(s){if(!s[Eg]){s[Eg]=!0,_0.forEach(function(p){p!=="selectionchange"&&(xY.has(p)||V_(p,!1,s),V_(p,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[Eg]||(c[Eg]=!0,V_("selectionchange",!1,c))}}function zC(s,c,p,x){switch(pM(c)){case 2:var A=WY;break;case 8:A=VY;break;default:A=d1}p=A.bind(null,c,p,s),A=void 0,!kc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),x?A!==void 0?s.addEventListener(c,p,{capture:!0,passive:A}):s.addEventListener(c,p,!0):A!==void 0?s.addEventListener(c,p,{passive:A}):s.addEventListener(c,p,!1)}function X_(s,c,p,x,A){var O=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var Y=x.stateNode.containerInfo;if(Y===A)break;if($===4)for($=x.return;$!==null;){var ie=$.tag;if((ie===3||ie===4)&&$.stateNode.containerInfo===A)return;$=$.return}for(;Y!==null;){if($=ns(Y),$===null)return;if(ie=$.tag,ie===5||ie===6||ie===26||ie===27){x=O=$;continue e}Y=Y.parentNode}}x=x.return}lh(function(){var be=O,ke=Sc(p),Ne=[];e:{var ve=G0.get(s);if(ve!==void 0){var we=Wu,Ye=s;switch(s){case"keypress":if(Ec(p)===0)break e;case"keydown":case"keyup":we=O0;break;case"focusin":Ye="focus",we=dh;break;case"focusout":Ye="blur",we=dh;break;case"beforeblur":case"afterblur":we=dh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Cw;break;case Lc:case F0:case Ic:we=fh;break;case _l:we=D0;break;case"scroll":case"scrollend":we=Et;break;case"wheel":we=ss;break;case"copy":case"cut":case"paste":we=la;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=C0;break;case"toggle":case"beforetoggle":we=Ac}var ot=(c&4)!==0,Xt=!ot&&(s==="scroll"||s==="scrollend"),de=ot?ve!==null?ve+"Capture":null:ve;ot=[];for(var ce=be,ge;ce!==null;){var Te=ce;if(ge=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ge===null||de===null||(Te=as(ce,de),Te!=null&&ot.push(qh(ce,Te,ge))),Xt)break;ce=ce.return}0<ot.length&&(ve=new we(ve,Ye,null,p,ke),Ne.push({event:ve,listeners:ot}))}}if((c&7)===0){e:{if(ve=s==="mouseover"||s==="pointerover",we=s==="mouseout"||s==="pointerout",ve&&p!==Ku&&(Ye=p.relatedTarget||p.fromElement)&&(ns(Ye)||Ye[ts]))break e;if((we||ve)&&(ve=ke.window===ke?ke:(ve=ke.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?(Ye=p.relatedTarget||p.toElement,we=be,Ye=Ye?ns(Ye):null,Ye!==null&&(Xt=a(Ye),ot=Ye.tag,Ye!==Xt||ot!==5&&ot!==27&&ot!==6)&&(Ye=null)):(we=null,Ye=be),we!==Ye)){if(ot=E0,Te="onMouseLeave",de="onMouseEnter",ce="mouse",(s==="pointerout"||s==="pointerover")&&(ot=C0,Te="onPointerLeave",de="onPointerEnter",ce="pointer"),Xt=we==null?ve:po(we),ge=Ye==null?ve:po(Ye),ve=new ot(Te,ce+"leave",we,p,ke),ve.target=Xt,ve.relatedTarget=ge,Te=null,ns(ke)===be&&(ot=new ot(de,ce+"enter",Ye,p,ke),ot.target=ge,ot.relatedTarget=Xt,Te=ot),Xt=Te,we&&Ye)t:{for(ot=wY,de=we,ce=Ye,ge=0,Te=de;Te;Te=ot(Te))ge++;Te=0;for(var nt=ce;nt;nt=ot(nt))Te++;for(;0<ge-Te;)de=ot(de),ge--;for(;0<Te-ge;)ce=ot(ce),Te--;for(;ge--;){if(de===ce||ce!==null&&de===ce.alternate){ot=de;break t}de=ot(de),ce=ot(ce)}ot=null}else ot=null;we!==null&&UC(Ne,ve,we,ot,!1),Ye!==null&&Xt!==null&&UC(Ne,Xt,Ye,ot,!0)}}e:{if(ve=be?po(be):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var Rt=Mc;else if(ca(ve))if(I0)Rt=Lw;else{Rt=Rw;var Ve=Ga}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?be&&_c(be.elementType)&&(Rt=Mc):Rt=yl;if(Rt&&(Rt=Rt(s,be))){L0(Ne,Rt,p,ke);break e}Ve&&Ve(s,ve,be),s==="focusout"&&be&&ve.type==="number"&&be.memoizedProps.value!=null&&Ua(ve,"number",ve.value)}switch(Ve=be?po(be):window,s){case"focusin":(ca(Ve)||Ve.contentEditable==="true")&&(wo=Ve,rd=be,Rc=null);break;case"focusout":Rc=rd=wo=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,z0(Ne,p,ke);break;case"selectionchange":if(nd)break;case"keydown":case"keyup":z0(Ne,p,ke)}var vt;if(Zu)e:{switch(s){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else pl?R0(s,p)&&(Tt="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Tt="onCompositionStart");Tt&&(Xu&&p.locale!=="ko"&&(pl||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&pl&&(vt=yo()):(sa=ke,os="value"in sa?sa.value:sa.textContent,pl=!0)),Ve=jg(be,Tt),0<Ve.length&&(Tt=new hh(Tt,s,null,p,ke),Ne.push({event:Tt,listeners:Ve}),vt?Tt.data=vt:(vt=bh(p),vt!==null&&(Tt.data=vt)))),(vt=Dw?Ii(s,p):gl(s,p))&&(Tt=jg(be,"onBeforeInput"),0<Tt.length&&(Ve=new hh("onBeforeInput","beforeinput",null,p,ke),Ne.push({event:Ve,listeners:Tt}),Ve.data=vt)),bY(Ne,s,be,p,ke)}BC(Ne,c)})}function qh(s,c,p){return{instance:s,listener:c,currentTarget:p}}function jg(s,c){for(var p=c+"Capture",x=[];s!==null;){var A=s,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=as(s,p),A!=null&&x.unshift(qh(s,A,O)),A=as(s,c),A!=null&&x.push(qh(s,A,O))),s.tag===3)return x;s=s.return}return[]}function wY(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function UC(s,c,p,x,A){for(var O=c._reactName,$=[];p!==null&&p!==x;){var Y=p,ie=Y.alternate,be=Y.stateNode;if(Y=Y.tag,ie!==null&&ie===x)break;Y!==5&&Y!==26&&Y!==27||be===null||(ie=be,A?(be=as(p,O),be!=null&&$.unshift(qh(p,be,ie))):A||(be=as(p,O),be!=null&&$.push(qh(p,be,ie)))),p=p.return}$.length!==0&&s.push({event:c,listeners:$})}var _Y=/\r\n?/g,SY=/\u0000|\uFFFD/g;function FC(s){return(typeof s=="string"?s:""+s).replace(_Y,`
`).replace(SY,"")}function HC(s,c){return c=FC(c),FC(s)===c}function Zt(s,c,p,x,A,O){switch(p){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||oa(s,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&oa(s,""+x);break;case"className":Wt(s,"class",x);break;case"tabIndex":Wt(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Wt(s,p,x);break;case"style":Yu(s,x,O);break;case"data":if(c!=="object"){Wt(s,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||p!=="href")){s.removeAttribute(p);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(p);break}x=dl(""+x),s.setAttribute(p,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(p==="formAction"?(c!=="input"&&Zt(s,c,"name",A.name,A,null),Zt(s,c,"formEncType",A.formEncType,A,null),Zt(s,c,"formMethod",A.formMethod,A,null),Zt(s,c,"formTarget",A.formTarget,A,null)):(Zt(s,c,"encType",A.encType,A,null),Zt(s,c,"method",A.method,A,null),Zt(s,c,"target",A.target,A,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(p);break}x=dl(""+x),s.setAttribute(p,x);break;case"onClick":x!=null&&(s.onclick=di);break;case"onScroll":x!=null&&kt("scroll",s);break;case"onScrollEnd":x!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(p=x.__html,p!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}p=dl(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,""+x):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":x===!0?s.setAttribute(p,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,x):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(p,x):s.removeAttribute(p);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(p):s.setAttribute(p,x);break;case"popover":kt("beforetoggle",s),kt("toggle",s),wt(s,"popover",x);break;case"xlinkActuate":ui(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ui(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ui(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ui(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ui(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ui(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ui(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ui(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ui(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":wt(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=qu.get(p)||p,wt(s,p,x))}}function J_(s,c,p,x,A,O){switch(p){case"style":Yu(s,x,O);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(p=x.__html,p!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"children":typeof x=="string"?oa(s,x):(typeof x=="number"||typeof x=="bigint")&&oa(s,""+x);break;case"onScroll":x!=null&&kt("scroll",s);break;case"onScrollEnd":x!=null&&kt("scrollend",s);break;case"onClick":x!=null&&(s.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!S0.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),c=p.slice(2,A?p.length-7:void 0),O=s[ur]||null,O=O!=null?O[p]:null,typeof O=="function"&&s.removeEventListener(c,O,A),typeof x=="function")){typeof O!="function"&&O!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(c,x,A);break e}p in s?s[p]=x:x===!0?s.setAttribute(p,""):wt(s,p,x)}}}function Nr(s,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var x=!1,A=!1,O;for(O in p)if(p.hasOwnProperty(O)){var $=p[O];if($!=null)switch(O){case"src":x=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Zt(s,c,O,$,p,null)}}A&&Zt(s,c,"srcSet",p.srcSet,p,null),x&&Zt(s,c,"src",p.src,p,null);return;case"input":kt("invalid",s);var Y=O=$=A=null,ie=null,be=null;for(x in p)if(p.hasOwnProperty(x)){var ke=p[x];if(ke!=null)switch(x){case"name":A=ke;break;case"type":$=ke;break;case"checked":ie=ke;break;case"defaultChecked":be=ke;break;case"value":O=ke;break;case"defaultValue":Y=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,c));break;default:Zt(s,c,x,ke,p,null)}}wc(s,O,Y,ie,be,$,A,!1);return;case"select":kt("invalid",s),x=$=O=null;for(A in p)if(p.hasOwnProperty(A)&&(Y=p[A],Y!=null))switch(A){case"value":O=Y;break;case"defaultValue":$=Y;break;case"multiple":x=Y;default:Zt(s,c,A,Y,p,null)}c=O,p=$,s.multiple=!!x,c!=null?Qt(s,!!x,c,!1):p!=null&&Qt(s,!!x,p,!0);return;case"textarea":kt("invalid",s),O=A=x=null;for($ in p)if(p.hasOwnProperty($)&&(Y=p[$],Y!=null))switch($){case"value":x=Y;break;case"defaultValue":A=Y;break;case"children":O=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Zt(s,c,$,Y,p,null)}cl(s,x,A,O);return;case"option":for(ie in p)if(p.hasOwnProperty(ie)&&(x=p[ie],x!=null))switch(ie){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Zt(s,c,ie,x,p,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(x=0;x<Yh.length;x++)kt(Yh[x],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in p)if(p.hasOwnProperty(be)&&(x=p[be],x!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Zt(s,c,be,x,p,null)}return;default:if(_c(c)){for(ke in p)p.hasOwnProperty(ke)&&(x=p[ke],x!==void 0&&J_(s,c,ke,x,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(x=p[Y],x!=null&&Zt(s,c,Y,x,p,null))}function kY(s,c,p,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,$=null,Y=null,ie=null,be=null,ke=null;for(we in p){var Ne=p[we];if(p.hasOwnProperty(we)&&Ne!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ie=Ne;default:x.hasOwnProperty(we)||Zt(s,c,we,null,x,Ne)}}for(var ve in x){var we=x[ve];if(Ne=p[ve],x.hasOwnProperty(ve)&&(we!=null||Ne!=null))switch(ve){case"type":O=we;break;case"name":A=we;break;case"checked":be=we;break;case"defaultChecked":ke=we;break;case"value":$=we;break;case"defaultValue":Y=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,c));break;default:we!==Ne&&Zt(s,c,ve,we,x,Ne)}}ah(s,$,Y,ie,be,ke,O,A);return;case"select":we=$=Y=ve=null;for(O in p)if(ie=p[O],p.hasOwnProperty(O)&&ie!=null)switch(O){case"value":break;case"multiple":we=ie;default:x.hasOwnProperty(O)||Zt(s,c,O,null,x,ie)}for(A in x)if(O=x[A],ie=p[A],x.hasOwnProperty(A)&&(O!=null||ie!=null))switch(A){case"value":ve=O;break;case"defaultValue":Y=O;break;case"multiple":$=O;default:O!==ie&&Zt(s,c,A,O,x,ie)}c=Y,p=$,x=we,ve!=null?Qt(s,!!p,ve,!1):!!x!=!!p&&(c!=null?Qt(s,!!p,c,!0):Qt(s,!!p,p?[]:"",!1));return;case"textarea":we=ve=null;for(Y in p)if(A=p[Y],p.hasOwnProperty(Y)&&A!=null&&!x.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Zt(s,c,Y,null,x,A)}for($ in x)if(A=x[$],O=p[$],x.hasOwnProperty($)&&(A!=null||O!=null))switch($){case"value":ve=A;break;case"defaultValue":we=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==O&&Zt(s,c,$,A,x,O)}bo(s,ve,we);return;case"option":for(var Ye in p)if(ve=p[Ye],p.hasOwnProperty(Ye)&&ve!=null&&!x.hasOwnProperty(Ye))switch(Ye){case"selected":s.selected=!1;break;default:Zt(s,c,Ye,null,x,ve)}for(ie in x)if(ve=x[ie],we=p[ie],x.hasOwnProperty(ie)&&ve!==we&&(ve!=null||we!=null))switch(ie){case"selected":s.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:Zt(s,c,ie,ve,x,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in p)ve=p[ot],p.hasOwnProperty(ot)&&ve!=null&&!x.hasOwnProperty(ot)&&Zt(s,c,ot,null,x,ve);for(be in x)if(ve=x[be],we=p[be],x.hasOwnProperty(be)&&ve!==we&&(ve!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,c));break;default:Zt(s,c,be,ve,x,we)}return;default:if(_c(c)){for(var Xt in p)ve=p[Xt],p.hasOwnProperty(Xt)&&ve!==void 0&&!x.hasOwnProperty(Xt)&&J_(s,c,Xt,void 0,x,ve);for(ke in x)ve=x[ke],we=p[ke],!x.hasOwnProperty(ke)||ve===we||ve===void 0&&we===void 0||J_(s,c,ke,ve,x,we);return}}for(var de in p)ve=p[de],p.hasOwnProperty(de)&&ve!=null&&!x.hasOwnProperty(de)&&Zt(s,c,de,null,x,ve);for(Ne in x)ve=x[Ne],we=p[Ne],!x.hasOwnProperty(Ne)||ve===we||ve==null&&we==null||Zt(s,c,Ne,ve,x,we)}function GC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EY(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,p=performance.getEntriesByType("resource"),x=0;x<p.length;x++){var A=p[x],O=A.transferSize,$=A.initiatorType,Y=A.duration;if(O&&Y&&GC($)){for($=0,Y=A.responseEnd,x+=1;x<p.length;x++){var ie=p[x],be=ie.startTime;if(be>Y)break;var ke=ie.transferSize,Ne=ie.initiatorType;ke&&GC(Ne)&&(ie=ie.responseEnd,$+=ke*(ie<Y?1:(Y-be)/(ie-be)))}if(--x,c+=8*(O+$)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Q_=null,e1=null;function Tg(s){return s.nodeType===9?s:s.ownerDocument}function YC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qC(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function t1(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var n1=null;function jY(){var s=window.event;return s&&s.type==="popstate"?s===n1?!1:(n1=s,!0):(n1=null,!1)}var KC=typeof setTimeout=="function"?setTimeout:void 0,TY=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,AY=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(s){return WC.resolve(null).then(s).catch(NY)}:KC;function NY(s){setTimeout(function(){throw s})}function Il(s){return s==="head"}function VC(s,c){var p=c,x=0;do{var A=p.nextSibling;if(s.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"||p==="/&"){if(x===0){s.removeChild(A),Nd(c);return}x--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")x++;else if(p==="html")Kh(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,Kh(p);for(var O=p.firstChild;O;){var $=O.nextSibling,Y=O.nodeName;O[yc]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&O.rel.toLowerCase()==="stylesheet"||p.removeChild(O),O=$}}else p==="body"&&Kh(s.ownerDocument.body);p=A}while(p);Nd(c)}function ZC(s,c){var p=s;s=0;do{var x=p.nextSibling;if(p.nodeType===1?c?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(c?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=x}while(p)}function r1(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":r1(p),th(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function OY(s,c,p,x){for(;s.nodeType===1;){var A=p;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[yc])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(O=s.getAttribute("rel"),O==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(O!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(O=s.getAttribute("src"),(O!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===O)return s}else return s;if(s=pa(s.nextSibling),s===null)break}return null}function CY(s,c,p){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=pa(s.nextSibling),s===null))return null;return s}function XC(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=pa(s.nextSibling),s===null))return null;return s}function i1(s){return s.data==="$?"||s.data==="$~"}function a1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function MY(s,c){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||p.readyState!=="loading")c();else{var x=function(){c(),p.removeEventListener("DOMContentLoaded",x)};p.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function pa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var o1=null;function JC(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(c===0)return pa(s.nextSibling);c--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||c++}s=s.nextSibling}return null}function QC(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(c===0)return s;c--}else p!=="/$"&&p!=="/&"||c++}s=s.previousSibling}return null}function eM(s,c,p){switch(c=Tg(p),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Kh(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);th(s)}var ga=new Map,tM=new Set;function Ag(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _s=Z.d;Z.d={f:DY,r:PY,D:RY,C:LY,L:IY,m:$Y,X:zY,S:BY,M:UY};function DY(){var s=_s.f(),c=vg();return s||c}function PY(s){var c=ol(s);c!==null&&c.tag===5&&c.type==="form"?yO(c):_s.r(s)}var jd=typeof document>"u"?null:document;function nM(s,c,p){var x=jd;if(x&&typeof c=="string"&&c){var A=ln(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),tM.has(A)||(tM.add(A),s={rel:s,crossOrigin:p,href:c},x.querySelector(A)===null&&(c=x.createElement("link"),Nr(c,"link",s),Fn(c),x.head.appendChild(c)))}}function RY(s){_s.D(s),nM("dns-prefetch",s,null)}function LY(s,c){_s.C(s,c),nM("preconnect",s,c)}function IY(s,c,p){_s.L(s,c,p);var x=jd;if(x&&s&&c){var A='link[rel="preload"][as="'+ln(c)+'"]';c==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+ln(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+ln(p.imageSizes)+'"]')):A+='[href="'+ln(s)+'"]';var O=A;switch(c){case"style":O=Td(s);break;case"script":O=Ad(s)}ga.has(O)||(s=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:s,as:c},p),ga.set(O,s),x.querySelector(A)!==null||c==="style"&&x.querySelector(Wh(O))||c==="script"&&x.querySelector(Vh(O))||(c=x.createElement("link"),Nr(c,"link",s),Fn(c),x.head.appendChild(c)))}}function $Y(s,c){_s.m(s,c);var p=jd;if(p&&s){var x=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+ln(x)+'"][href="'+ln(s)+'"]',O=A;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Ad(s)}if(!ga.has(O)&&(s=m({rel:"modulepreload",href:s},c),ga.set(O,s),p.querySelector(A)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Vh(O)))return}x=p.createElement("link"),Nr(x,"link",s),Fn(x),p.head.appendChild(x)}}}function BY(s,c,p){_s.S(s,c,p);var x=jd;if(x&&s){var A=sl(x).hoistableStyles,O=Td(s);c=c||"default";var $=A.get(O);if(!$){var Y={loading:0,preload:null};if($=x.querySelector(Wh(O)))Y.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":c},p),(p=ga.get(O))&&s1(s,p);var ie=$=x.createElement("link");Fn(ie),Nr(ie,"link",s),ie._p=new Promise(function(be,ke){ie.onload=be,ie.onerror=ke}),ie.addEventListener("load",function(){Y.loading|=1}),ie.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Ng($,c,x)}$={type:"stylesheet",instance:$,count:1,state:Y},A.set(O,$)}}}function zY(s,c){_s.X(s,c);var p=jd;if(p&&s){var x=sl(p).hoistableScripts,A=Ad(s),O=x.get(A);O||(O=p.querySelector(Vh(A)),O||(s=m({src:s,async:!0},c),(c=ga.get(A))&&l1(s,c),O=p.createElement("script"),Fn(O),Nr(O,"link",s),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(A,O))}}function UY(s,c){_s.M(s,c);var p=jd;if(p&&s){var x=sl(p).hoistableScripts,A=Ad(s),O=x.get(A);O||(O=p.querySelector(Vh(A)),O||(s=m({src:s,async:!0,type:"module"},c),(c=ga.get(A))&&l1(s,c),O=p.createElement("script"),Fn(O),Nr(O,"link",s),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},x.set(A,O))}}function rM(s,c,p,x){var A=(A=ae.current)?Ag(A):null;if(!A)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=Td(p.href),p=sl(A).hoistableStyles,x=p.get(c),x||(x={type:"style",instance:null,count:0,state:null},p.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=Td(p.href);var O=sl(A).hoistableStyles,$=O.get(s);if($||(A=A.ownerDocument||A,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(s,$),(O=A.querySelector(Wh(s)))&&!O._p&&($.instance=O,$.state.loading=5),ga.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ga.set(s,p),O||FY(A,s,p,$.state))),c&&x===null)throw Error(r(528,""));return $}if(c&&x!==null)throw Error(r(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Ad(p),p=sl(A).hoistableScripts,x=p.get(c),x||(x={type:"script",instance:null,count:0,state:null},p.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Td(s){return'href="'+ln(s)+'"'}function Wh(s){return'link[rel="stylesheet"]['+s+"]"}function iM(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function FY(s,c,p,x){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=s.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),Nr(c,"link",p),Fn(c),s.head.appendChild(c))}function Ad(s){return'[src="'+ln(s)+'"]'}function Vh(s){return"script[async]"+s}function aM(s,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var x=s.querySelector('style[data-href~="'+ln(p.href)+'"]');if(x)return c.instance=x,Fn(x),x;var A=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),Fn(x),Nr(x,"style",A),Ng(x,p.precedence,s),c.instance=x;case"stylesheet":A=Td(p.href);var O=s.querySelector(Wh(A));if(O)return c.state.loading|=4,c.instance=O,Fn(O),O;x=iM(p),(A=ga.get(A))&&s1(x,A),O=(s.ownerDocument||s).createElement("link"),Fn(O);var $=O;return $._p=new Promise(function(Y,ie){$.onload=Y,$.onerror=ie}),Nr(O,"link",x),c.state.loading|=4,Ng(O,p.precedence,s),c.instance=O;case"script":return O=Ad(p.src),(A=s.querySelector(Vh(O)))?(c.instance=A,Fn(A),A):(x=p,(A=ga.get(O))&&(x=m({},p),l1(x,A)),s=s.ownerDocument||s,A=s.createElement("script"),Fn(A),Nr(A,"link",x),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,Ng(x,p.precedence,s));return c.instance}function Ng(s,c,p){for(var x=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=x.length?x[x.length-1]:null,O=A,$=0;$<x.length;$++){var Y=x[$];if(Y.dataset.precedence===c)O=Y;else if(O!==A)break}O?O.parentNode.insertBefore(s,O.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(s,c.firstChild))}function s1(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function l1(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var Og=null;function oM(s,c,p){if(Og===null){var x=new Map,A=Og=new Map;A.set(p,x)}else A=Og,x=A.get(p),x||(x=new Map,A.set(p,x));if(x.has(s))return x;for(x.set(s,null),p=p.getElementsByTagName(s),A=0;A<p.length;A++){var O=p[A];if(!(O[yc]||O[Un]||s==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var $=O.getAttribute(c)||"";$=s+$;var Y=x.get($);Y?Y.push(O):x.set($,[O])}}return x}function sM(s,c,p){s=s.ownerDocument||s,s.head.insertBefore(p,c==="title"?s.querySelector("head > title"):null)}function HY(s,c,p){if(p===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function lM(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function GY(s,c,p,x){if(p.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var A=Td(x.href),O=c.querySelector(Wh(A));if(O){c=O._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=Cg.bind(s),c.then(s,s)),p.state.loading|=4,p.instance=O,Fn(O);return}O=c.ownerDocument||c,x=iM(x),(A=ga.get(A))&&s1(x,A),O=O.createElement("link"),Fn(O);var $=O;$._p=new Promise(function(Y,ie){$.onload=Y,$.onerror=ie}),Nr(O,"link",x),p.instance=O}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,c),(c=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=Cg.bind(s),c.addEventListener("load",p),c.addEventListener("error",p))}}var c1=0;function YY(s,c){return s.stylesheets&&s.count===0&&Dg(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var x=setTimeout(function(){if(s.stylesheets&&Dg(s,s.stylesheets),s.unsuspend){var O=s.unsuspend;s.unsuspend=null,O()}},6e4+c);0<s.imgBytes&&c1===0&&(c1=62500*EY());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Dg(s,s.stylesheets),s.unsuspend)){var O=s.unsuspend;s.unsuspend=null,O()}},(s.imgBytes>c1?50:800)+c);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(x),clearTimeout(A)}}:null}function Cg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mg=null;function Dg(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mg=new Map,c.forEach(qY,s),Mg=null,Cg.call(s))}function qY(s,c){if(!(c.state.loading&4)){var p=Mg.get(s);if(p)var x=p.get(null);else{p=new Map,Mg.set(s,p);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var $=A[O];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(p.set($.dataset.precedence,$),x=$)}x&&p.set(null,x)}A=c.instance,$=A.getAttribute("data-precedence"),O=p.get($)||x,O===x&&p.set(null,A),p.set($,A),this.count++,x=Cg.bind(this),A.addEventListener("load",x),A.addEventListener("error",x),O?O.parentNode.insertBefore(A,O.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var Zh={$$typeof:j,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function KY(s,c,p,x,A,O,$,Y,ie){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.hiddenUpdates=Jf(null),this.identifierPrefix=x,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function cM(s,c,p,x,A,O,$,Y,ie,be,ke,Ne){return s=new KY(s,c,p,$,ie,be,ke,Ne,Y),c=1,O===!0&&(c|=24),O=zr(3,null,null,c),s.current=O,O.stateNode=s,c=Fw(),c.refCount++,s.pooledCache=c,c.refCount++,O.memoizedState={element:x,isDehydrated:p,cache:c},qw(O),s}function uM(s){return s?(s=ls,s):ls}function dM(s,c,p,x,A,O){A=uM(A),x.context===null?x.context=A:x.pendingContext=A,x=jl(c),x.payload={element:p},O=O===void 0?null:O,O!==null&&(x.callback=O),p=Tl(s,x,c),p!==null&&(xi(p,s,c),Ah(p,s,c))}function fM(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<c?p:c}}function u1(s,c){fM(s,c),(s=s.alternate)&&fM(s,c)}function hM(s){if(s.tag===13||s.tag===31){var c=fa(s,67108864);c!==null&&xi(c,s,67108864),u1(s,67108864)}}function mM(s){if(s.tag===13||s.tag===31){var c=Fi();c=ci(c);var p=fa(s,c);p!==null&&xi(p,s,c),u1(s,c)}}var Pg=!0;function WY(s,c,p,x){var A=F.T;F.T=null;var O=Z.p;try{Z.p=2,d1(s,c,p,x)}finally{Z.p=O,F.T=A}}function VY(s,c,p,x){var A=F.T;F.T=null;var O=Z.p;try{Z.p=8,d1(s,c,p,x)}finally{Z.p=O,F.T=A}}function d1(s,c,p,x){if(Pg){var A=f1(x);if(A===null)X_(s,c,x,Rg,p),gM(s,x);else if(XY(A,s,c,p,x))x.stopPropagation();else if(gM(s,x),c&4&&-1<ZY.indexOf(s)){for(;A!==null;){var O=ol(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var $=li(O.pendingLanes);if($!==0){var Y=O;for(Y.pendingLanes|=2,Y.entangledLanes|=2;$;){var ie=1<<31-rn($);Y.entanglements[1]|=ie,$&=~ie}No(O),($t&6)===0&&(bg=Ue()+500,Gh(0))}}break;case 31:case 13:Y=fa(O,2),Y!==null&&xi(Y,O,2),vg(),u1(O,2)}if(O=f1(x),O===null&&X_(s,c,x,Rg,p),O===A)break;A=O}A!==null&&x.stopPropagation()}else X_(s,c,x,null,p)}}function f1(s){return s=Sc(s),h1(s)}var Rg=null;function h1(s){if(Rg=null,s=ns(s),s!==null){var c=a(s);if(c===null)s=null;else{var p=c.tag;if(p===13){if(s=o(c),s!==null)return s;s=null}else if(p===31){if(s=l(c),s!==null)return s;s=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return Rg=s,null}function pM(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case xt:return 2;case st:return 8;case Oe:case Fe:return 32;case We:return 268435456;default:return 32}default:return 32}}var m1=!1,$l=null,Bl=null,zl=null,Xh=new Map,Jh=new Map,Ul=[],ZY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gM(s,c){switch(s){case"focusin":case"focusout":$l=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Xh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(c.pointerId)}}function Qh(s,c,p,x,A,O){return s===null||s.nativeEvent!==O?(s={blockedOn:c,domEventName:p,eventSystemFlags:x,nativeEvent:O,targetContainers:[A]},c!==null&&(c=ol(c),c!==null&&hM(c)),s):(s.eventSystemFlags|=x,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function XY(s,c,p,x,A){switch(c){case"focusin":return $l=Qh($l,s,c,p,x,A),!0;case"dragenter":return Bl=Qh(Bl,s,c,p,x,A),!0;case"mouseover":return zl=Qh(zl,s,c,p,x,A),!0;case"pointerover":var O=A.pointerId;return Xh.set(O,Qh(Xh.get(O)||null,s,c,p,x,A)),!0;case"gotpointercapture":return O=A.pointerId,Jh.set(O,Qh(Jh.get(O)||null,s,c,p,x,A)),!0}return!1}function bM(s){var c=ns(s.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=o(p),c!==null){s.blockedOn=c,eh(s.priority,function(){mM(p)});return}}else if(c===31){if(c=l(p),c!==null){s.blockedOn=c,eh(s.priority,function(){mM(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lg(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var p=f1(s.nativeEvent);if(p===null){p=s.nativeEvent;var x=new p.constructor(p.type,p);Ku=x,p.target.dispatchEvent(x),Ku=null}else return c=ol(p),c!==null&&hM(c),s.blockedOn=p,!1;c.shift()}return!0}function yM(s,c,p){Lg(s)&&p.delete(c)}function JY(){m1=!1,$l!==null&&Lg($l)&&($l=null),Bl!==null&&Lg(Bl)&&(Bl=null),zl!==null&&Lg(zl)&&(zl=null),Xh.forEach(yM),Jh.forEach(yM)}function Ig(s,c){s.blockedOn===c&&(s.blockedOn=null,m1||(m1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,JY)))}var $g=null;function vM(s){$g!==s&&($g=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){$g===s&&($g=null);for(var c=0;c<s.length;c+=3){var p=s[c],x=s[c+1],A=s[c+2];if(typeof x!="function"){if(h1(x||p)===null)continue;break}var O=ol(p);O!==null&&(s.splice(c,3),c-=3,f_(O,{pending:!0,data:A,method:p.method,action:x},x,A))}}))}function Nd(s){function c(ie){return Ig(ie,s)}$l!==null&&Ig($l,s),Bl!==null&&Ig(Bl,s),zl!==null&&Ig(zl,s),Xh.forEach(c),Jh.forEach(c);for(var p=0;p<Ul.length;p++){var x=Ul[p];x.blockedOn===s&&(x.blockedOn=null)}for(;0<Ul.length&&(p=Ul[0],p.blockedOn===null);)bM(p),p.blockedOn===null&&Ul.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(x=0;x<p.length;x+=3){var A=p[x],O=p[x+1],$=A[ur]||null;if(typeof O=="function")$||vM(p);else if($){var Y=null;if(O&&O.hasAttribute("formAction")){if(A=O,$=O[ur]||null)Y=$.formAction;else if(h1(A)!==null)continue}else Y=$.action;typeof Y=="function"?p[x+1]=Y:(p.splice(x,3),x-=3),vM(p)}}}function xM(){function s(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function($){return A=$})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),x||setTimeout(p,20)}function p(){if(!x&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(p,100),function(){x=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function p1(s){this._internalRoot=s}Bg.prototype.render=p1.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var p=c.current,x=Fi();dM(p,x,s,c,null,null)},Bg.prototype.unmount=p1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;dM(s.current,2,null,s,null,null),vg(),c[ts]=null}};function Bg(s){this._internalRoot=s}Bg.prototype.unstable_scheduleHydration=function(s){if(s){var c=Qf();s={blockedOn:null,target:s,priority:c};for(var p=0;p<Ul.length&&c!==0&&c<Ul[p].priority;p++);Ul.splice(p,0,s),p===0&&bM(s)}};var wM=t.version;if(wM!=="19.2.1")throw Error(r(527,wM,"19.2.1"));Z.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(c),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var QY={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zg.isDisabled&&zg.supportsFiber)try{Nt=zg.inject(QY),Mt=zg}catch{}}return tm.createRoot=function(s,c){if(!i(s))throw Error(r(299));var p=!1,x="",A=AO,O=NO,$=OO;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError)),c=cM(s,1,!1,null,null,p,x,null,A,O,$,xM),s[ts]=c.current,Z_(s),new p1(c)},tm.hydrateRoot=function(s,c,p){if(!i(s))throw Error(r(299));var x=!1,A="",O=AO,$=NO,Y=OO,ie=null;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&($=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.formState!==void 0&&(ie=p.formState)),c=cM(s,1,!0,c,p??null,x,A,ie,O,$,Y,xM),c.context=uM(null),p=c.current,x=Fi(),x=ci(x),A=jl(x),A.callback=null,Tl(p,A,x),p=x,c.current.lanes=p,es(c,p),No(c),s[ts]=c.current,Z_(s),new Bg(c)},tm.version="19.2.1",tm}var CM;function lq(){if(CM)return b1.exports;CM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),b1.exports=sq(),b1.exports}var cq=lq(),S=Nf();const on=Ci(S),uq=bj({__proto__:null,default:on},[S]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MM="popstate";function dq(e={}){function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return uE("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:qm(i)}return hq(t,n,null,e)}function wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fq(){return Math.random().toString(36).substring(2,10)}function DM(e,t){return{usr:e.state,key:e.key,idx:t}}function uE(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Of(t):t,state:n,key:t&&t.key||r||fq()}}function qm({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Of(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function hq(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let _=h(),T=_==null?null:_-d;d=_,u&&u({action:l,location:w.location,delta:T})}function b(_,T){l="PUSH";let N=uE(w.location,_,T);d=h()+1;let j=DM(N,d),C=w.createHref(N);try{o.pushState(j,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(C)}a&&u&&u({action:l,location:w.location,delta:1})}function y(_,T){l="REPLACE";let N=uE(w.location,_,T);d=h();let j=DM(N,d),C=w.createHref(N);o.replaceState(j,"",C),a&&u&&u({action:l,location:w.location,delta:0})}function k(_){return mq(_)}let w={get action(){return l},get location(){return e(i,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(MM,m),u=_,()=>{i.removeEventListener(MM,m),u=null}},createHref(_){return t(i,_)},createURL:k,encodeLocation(_){let T=k(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:y,go(_){return o.go(_)}};return w}function mq(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:qm(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function B$(e,t,n="/"){return pq(e,t,n,!1)}function pq(e,t,n,r){let i=typeof t=="string"?Of(t):t,a=Us(i.pathname||"/",n);if(a==null)return null;let o=z$(e);gq(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=Tq(a);l=Eq(o[u],d,r)}return l}function z$(e,t=[],n=[],r="",i=!1){let a=(o,l,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;wn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=Ls([r,h.relativePath]),b=n.concat(h);o.children&&o.children.length>0&&(wn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),z$(o.children,t,b,m,u)),!(o.path==null&&!o.index)&&t.push({path:m,score:Sq(m,o.index),routesMeta:b})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of U$(o.path))a(o,l,!0,u)}),t}function U$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=U$(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function gq(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kq(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bq=/^:[\w-]+$/,yq=3,vq=2,xq=1,wq=10,_q=-2,PM=e=>e==="*";function Sq(e,t){let n=e.split("/"),r=n.length;return n.some(PM)&&(r+=_q),t&&(r+=vq),n.filter(i=>!PM(i)).reduce((i,a)=>i+(bq.test(a)?yq:a===""?xq:wq),r)}function kq(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Eq(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",m=wy({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=wy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ls([a,m.pathname]),pathnameBase:Mq(Ls([a,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(a=Ls([a,m.pathnameBase]))}return o}function wy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=jq(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},b)=>{if(h==="*"){let k=l[b]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const y=l[b];return m&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function jq(e,t=!1,n=!0){Oa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Tq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Oa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Us(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var Aq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nq=e=>Aq.test(e);function Oq(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Of(e):e,a;if(n)if(Nq(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Oa(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=RM(n.substring(1),"/"):a=RM(n,t)}else a=t;return{pathname:a,search:Dq(r),hash:Pq(i)}}function RM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _1(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cq(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function yj(e){let t=Cq(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function vj(e,t,n,r=!1){let i;typeof e=="string"?i=Of(e):(i={...e},wn(!i.pathname||!i.pathname.includes("?"),_1("?","pathname","search",i)),wn(!i.pathname||!i.pathname.includes("#"),_1("#","pathname","hash",i)),wn(!i.search||!i.search.includes("#"),_1("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),m-=1;i.pathname=b.join("/")}l=m>=0?t[m]:"/"}let u=Oq(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ls=e=>e.join("/").replace(/\/\/+/g,"/"),Mq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Pq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Lq(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var F$=["POST","PUT","PATCH","DELETE"];new Set(F$);var Iq=["GET",...F$];new Set(Iq);var Cf=S.createContext(null);Cf.displayName="DataRouter";var ox=S.createContext(null);ox.displayName="DataRouterState";S.createContext(!1);var H$=S.createContext({isTransitioning:!1});H$.displayName="ViewTransition";var $q=S.createContext(new Map);$q.displayName="Fetchers";var Bq=S.createContext(null);Bq.displayName="Await";var Ia=S.createContext(null);Ia.displayName="Navigation";var Dp=S.createContext(null);Dp.displayName="Location";var Xo=S.createContext({outlet:null,matches:[],isDataRoute:!1});Xo.displayName="Route";var xj=S.createContext(null);xj.displayName="RouteError";function zq(e,{relative:t}={}){wn(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Ia),{hash:i,pathname:a,search:o}=Pp(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Ls([n,a])),r.createHref({pathname:l,search:o,hash:i})}function Mf(){return S.useContext(Dp)!=null}function Wr(){return wn(Mf(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Dp).location}var G$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y$(e){S.useContext(Ia).static||S.useLayoutEffect(e)}function dc(){let{isDataRoute:e}=S.useContext(Xo);return e?Qq():Uq()}function Uq(){wn(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Cf),{basename:t,navigator:n}=S.useContext(Ia),{matches:r}=S.useContext(Xo),{pathname:i}=Wr(),a=JSON.stringify(yj(r)),o=S.useRef(!1);return Y$(()=>{o.current=!0}),S.useCallback((u,d={})=>{if(Oa(o.current,G$),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=vj(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ls([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}S.createContext(null);function Pp(e,{relative:t}={}){let{matches:n}=S.useContext(Xo),{pathname:r}=Wr(),i=JSON.stringify(yj(n));return S.useMemo(()=>vj(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function Fq(e,t){return q$(e,t)}function q$(e,t,n,r,i){wn(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(Ia),{matches:o}=S.useContext(Xo),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let N=m&&m.path||"";K$(d,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let b=Wr(),y;if(t){let N=typeof t=="string"?Of(t):t;wn(h==="/"||N.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=b;let k=y.pathname||"/",w=k;if(h!=="/"){let N=h.replace(/^\//,"").split("/");w="/"+k.replace(/^\//,"").split("/").slice(N.length).join("/")}let _=B$(e,{pathname:w});Oa(m||_!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Oa(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Kq(_&&_.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ls([h,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Ls([h,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,n,r,i);return t&&T?S.createElement(Dp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function Hq(){let e=Jq(),t=Rq(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:i},n):null,o)}var Gq=S.createElement(Hq,null),Yq=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(Xo.Provider,{value:this.props.routeContext},S.createElement(xj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qq({routeContext:e,match:t,children:n}){let r=S.useContext(Cf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Xo.Provider,{value:e},n)}function Kq(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);wn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:b,errors:y}=n,k=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||k){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,m)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Lq(n.matches),errorInfo:m})}:void 0;return a.reduceRight((h,m,b)=>{let y,k=!1,w=null,_=null;n&&(y=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||Gq,l&&(u<0&&b===0?(K$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,_=null):u===b&&(k=!0,_=m.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,b+1)),N=()=>{let j;return y?j=w:k?j=_:m.route.Component?j=S.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=h,S.createElement(qq,{match:m,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:j})};return n&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?S.createElement(Yq,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:N(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):N()},null)}function wj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wq(e){let t=S.useContext(Cf);return wn(t,wj(e)),t}function Vq(e){let t=S.useContext(ox);return wn(t,wj(e)),t}function Zq(e){let t=S.useContext(Xo);return wn(t,wj(e)),t}function _j(e){let t=Zq(e),n=t.matches[t.matches.length-1];return wn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Xq(){return _j("useRouteId")}function Jq(){let e=S.useContext(xj),t=Vq("useRouteError"),n=_j("useRouteError");return e!==void 0?e:t.errors?.[n]}function Qq(){let{router:e}=Wq("useNavigate"),t=_j("useNavigate"),n=S.useRef(!1);return Y$(()=>{n.current=!0}),S.useCallback(async(i,a={})=>{Oa(n.current,G$),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var LM={};function K$(e,t,n){!t&&!LM[e]&&(LM[e]=!0,Oa(!1,n))}S.memo(eK);function eK({routes:e,future:t,state:n,unstable_onError:r}){return q$(e,void 0,n,r,t)}function tK({to:e,replace:t,state:n,relative:r}){wn(Mf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=S.useContext(Ia);Oa(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(Xo),{pathname:o}=Wr(),l=dc(),u=vj(e,yj(a),o,r==="path"),d=JSON.stringify(u);return S.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:r})},[l,d,r,t,n]),null}function Xa(e){wn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nK({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){wn(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof n=="string"&&(n=Of(n));let{pathname:d="/",search:h="",hash:m="",state:b=null,key:y="default"}=n,k=S.useMemo(()=>{let w=Us(d,l);return w==null?null:{location:{pathname:w,search:h,hash:m,state:b,key:y},navigationType:r}},[l,d,h,m,b,y,r]);return Oa(k!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:S.createElement(Ia.Provider,{value:u},S.createElement(Dp.Provider,{children:t,value:k}))}function rK({children:e,location:t}){return Fq(dE(e),t)}function dE(e,t=[]){let n=[];return S.Children.forEach(e,(r,i)=>{if(!S.isValidElement(r))return;let a=[...t,i];if(r.type===S.Fragment){n.push.apply(n,dE(r.props.children,a));return}wn(r.type===Xa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dE(r.props.children,a)),n.push(o)}),n}var Jb="get",Qb="application/x-www-form-urlencoded";function sx(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function iK(e){return sx(e)&&e.tagName.toLowerCase()==="button"}function aK(e){return sx(e)&&e.tagName.toLowerCase()==="form"}function oK(e){return sx(e)&&e.tagName.toLowerCase()==="input"}function sK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lK(e,t){return e.button===0&&(!t||t==="_self")&&!sK(e)}var Ug=null;function cK(){if(Ug===null)try{new FormData(document.createElement("form"),0),Ug=!1}catch{Ug=!0}return Ug}var uK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S1(e){return e!=null&&!uK.has(e)?(Oa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qb}"`),null):e}function dK(e,t){let n,r,i,a,o;if(aK(e)){let l=e.getAttribute("action");r=l?Us(l,t):null,n=e.getAttribute("method")||Jb,i=S1(e.getAttribute("enctype"))||Qb,a=new FormData(e)}else if(iK(e)||oK(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(r=u?Us(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Jb,i=S1(e.getAttribute("formenctype"))||S1(l.getAttribute("enctype"))||Qb,a=new FormData(l,e),!cK()){let{name:d,type:h,value:m}=e;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,m)}}else{if(sx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jb,r=null,i=Qb,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sj(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fK(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Us(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function hK(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mK(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pK(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await hK(a,n);return o.links?o.links():[]}return[]}));return vK(r.flat(1).filter(mK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function IM(e,t,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?t.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function gK(e,t,{includeHydrateFallback:n}={}){return bK(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function bK(e){return[...new Set(e)]}function yK(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function vK(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(yK(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function W$(){let e=S.useContext(Cf);return Sj(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xK(){let e=S.useContext(ox);return Sj(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var kj=S.createContext(void 0);kj.displayName="FrameworkContext";function V$(){let e=S.useContext(kj);return Sj(e,"You must render this element inside a <HydratedRouter> element"),e}function wK(e,t){let n=S.useContext(kj),[r,i]=S.useState(!1),[a,o]=S.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=t,b=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=T=>{T.forEach(N=>{o(N.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,b,{}]:[a,b,{onFocus:nm(l,y),onBlur:nm(u,k),onMouseEnter:nm(d,y),onMouseLeave:nm(h,k),onTouchStart:nm(m,y)}]:[!1,b,{}]}function nm(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function _K({page:e,...t}){let{router:n}=W$(),r=S.useMemo(()=>B$(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(kK,{page:e,matches:r,...t}):null}function SK(e){let{manifest:t,routeModules:n}=V$(),[r,i]=S.useState([]);return S.useEffect(()=>{let a=!1;return pK(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function kK({page:e,matches:t,...n}){let r=Wr(),{manifest:i,routeModules:a}=V$(),{basename:o}=W$(),{loaderData:l,matches:u}=xK(),d=S.useMemo(()=>IM(e,t,u,i,r,"data"),[e,t,u,i,r]),h=S.useMemo(()=>IM(e,t,u,i,r,"assets"),[e,t,u,i,r]),m=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,w=!1;if(t.forEach(T=>{let N=i.routes[T.route.id];!N||!N.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in l&&a[T.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:k.add(T.route.id))}),k.size===0)return[];let _=fK(e,o,"data");return w&&k.size>0&&_.searchParams.set("_routes",t.filter(T=>k.has(T.route.id)).map(T=>T.route.id).join(",")),[_.pathname+_.search]},[o,l,r,i,d,t,e,a]),b=S.useMemo(()=>gK(h,i),[h,i]),y=SK(h);return S.createElement(S.Fragment,null,m.map(k=>S.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),b.map(k=>S.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),y.map(({key:k,link:w})=>S.createElement("link",{key:k,nonce:n.nonce,...w})))}function EK(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Z$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z$&&(window.__reactRouterVersion="7.10.1")}catch{}function jK({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=S.useRef();i.current==null&&(i.current=dq({window:r,v5Compat:!0}));let a=i.current,[o,l]=S.useState({action:a.action,location:a.location}),u=S.useCallback(d=>{n===!1?l(d):S.startTransition(()=>l(d))},[n]);return S.useLayoutEffect(()=>a.listen(u),[a,u]),S.createElement(nK,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}var X$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ej=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m,...b},y){let{basename:k,unstable_useTransitions:w}=S.useContext(Ia),_=typeof d=="string"&&X$.test(d),T,N=!1;if(typeof d=="string"&&_&&(T=d,Z$))try{let G=new URL(window.location.href),H=d.startsWith("//")?new URL(G.protocol+d):new URL(d),B=Us(H.pathname,k);H.origin===G.origin&&B!=null?d=B+H.search+H.hash:N=!0}catch{Oa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=zq(d,{relative:i}),[C,M,P]=wK(r,b),I=OK(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m,unstable_useTransitions:w});function z(G){t&&t(G),G.defaultPrevented||I(G)}let K=S.createElement("a",{...b,...P,href:T||j,onClick:N||a?t:z,ref:EK(y,M),target:u,"data-discover":!_&&n==="render"?"true":void 0});return C&&!_?S.createElement(S.Fragment,null,K,S.createElement(_K,{page:j})):K});Ej.displayName="Link";var TK=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let m=Pp(o,{relative:d.relative}),b=Wr(),y=S.useContext(ox),{navigator:k,basename:w}=S.useContext(Ia),_=y!=null&&RK(m)&&l===!0,T=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,N=b.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(N=N.toLowerCase(),j=j?j.toLowerCase():null,T=T.toLowerCase()),j&&w&&(j=Us(j,w)||j);const C=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let M=N===T||!i&&N.startsWith(T)&&N.charAt(C)==="/",P=j!=null&&(j===T||!i&&j.startsWith(T)&&j.charAt(T.length)==="/"),I={isActive:M,isPending:P,isTransitioning:_},z=M?t:void 0,K;typeof r=="function"?K=r(I):K=[r,M?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let G=typeof a=="function"?a(I):a;return S.createElement(Ej,{...d,"aria-current":z,className:K,ref:h,style:G,to:o,viewTransition:l},typeof u=="function"?u(I):u)});TK.displayName="NavLink";var AK=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Jb,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,...b},y)=>{let{unstable_useTransitions:k}=S.useContext(Ia),w=DK(),_=PK(l,{relative:d}),T=o.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&X$.test(l),j=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let M=C.nativeEvent.submitter,P=M?.getAttribute("formmethod")||o,I=()=>w(M||C.currentTarget,{fetcherKey:t,method:P,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m});k&&n!==!1?S.startTransition(()=>I()):I()};return S.createElement("form",{ref:y,method:T,action:_,onSubmit:r?u:j,...b,"data-discover":!N&&e==="render"?"true":void 0})});AK.displayName="Form";function NK(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J$(e){let t=S.useContext(Cf);return wn(t,NK(e)),t}function OK(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let u=dc(),d=Wr(),h=Pp(e,{relative:a});return S.useCallback(m=>{if(lK(m,t)){m.preventDefault();let b=n!==void 0?n:qm(d)===qm(h),y=()=>u(e,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o});l?S.startTransition(()=>y()):y()}},[d,u,h,n,r,t,e,i,a,o,l])}var CK=0,MK=()=>`__${String(++CK)}__`;function DK(){let{router:e}=J$("useSubmit"),{basename:t}=S.useContext(Ia),n=Xq(),r=e.fetch,i=e.navigate;return S.useCallback(async(a,o={})=>{let{action:l,method:u,encType:d,formData:h,body:m}=dK(a,t);if(o.navigate===!1){let b=o.fetcherKey||MK();await r(b,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,t,n])}function PK(e,{relative:t}={}){let{basename:n}=S.useContext(Ia),r=S.useContext(Xo);wn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Pp(e||".",{relative:t})},o=Wr();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ls([n,a.pathname])),qm(a)}function RK(e,{relative:t}={}){let n=S.useContext(H$);wn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=J$("useViewTransitionState"),i=Pp(e,{relative:t});if(!n.isTransitioning)return!1;let a=Us(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Us(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wy(i.pathname,o)!=null||wy(i.pathname,a)!=null}var Bu=$$();const LK=Ci(Bu);let IK={data:""},$K=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||IK,BK=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,zK=/\/\*[^]*?\*\/|  +/g,$M=/\n+/g,Wl=(e,t)=>{let n="",r="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Wl(o,a):a+"{"+Wl(o,a[1]=="k"?"":t)+"}":typeof o=="object"?r+=Wl(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Wl.p?Wl.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Ss={},Q$=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Q$(e[n]);return t}return e},UK=(e,t,n,r,i)=>{let a=Q$(e),o=Ss[a]||(Ss[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!Ss[o]){let u=a!==e?e:(d=>{let h,m,b=[{}];for(;h=BK.exec(d.replace(zK,""));)h[4]?b.shift():h[3]?(m=h[3].replace($M," ").trim(),b.unshift(b[0][m]=b[0][m]||{})):b[0][h[1]]=h[2].replace($M," ").trim();return b[0]})(e);Ss[o]=Wl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Ss.g?Ss.g:null;return n&&(Ss.g=Ss[o]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(Ss[o],t,r,l),o},FK=(e,t,n)=>e.reduce((r,i,a)=>{let o=t[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Wl(l,""):l===!1?"":l}return r+i+(o??"")},"");function lx(e){let t=this||{},n=e.call?e(t.p):e;return UK(n.unshift?n.raw?FK(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,$K(t.target),t.g,t.o,t.k)}let eB,fE,hE;lx.bind({g:1});let Fs=lx.bind({k:1});function HK(e,t,n,r){Wl.p=t,eB=e,fE=n,hE=r}function fc(e,t){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),u=l.className||i.className;n.p=Object.assign({theme:fE&&fE()},l),n.o=/ *go\d+/.test(u),l.className=lx.apply(n,r)+(u?" "+u:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),hE&&d[0]&&hE(l),eB(d,l)}return i}}var GK=e=>typeof e=="function",_y=(e,t)=>GK(e)?e(t):e,YK=(()=>{let e=0;return()=>(++e).toString()})(),tB=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qK=20,jj="default",nB=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return nB(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},ey=[],rB={toasts:[],pausedAt:void 0,settings:{toastLimit:qK}},Bo={},iB=(e,t=jj)=>{Bo[t]=nB(Bo[t]||rB,e),ey.forEach(([n,r])=>{n===t&&r(Bo[t])})},aB=e=>Object.keys(Bo).forEach(t=>iB(e,t)),KK=e=>Object.keys(Bo).find(t=>Bo[t].toasts.some(n=>n.id===e)),cx=(e=jj)=>t=>{iB(t,e)},WK={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VK=(e={},t=jj)=>{let[n,r]=S.useState(Bo[t]||rB),i=S.useRef(Bo[t]);S.useEffect(()=>(i.current!==Bo[t]&&r(Bo[t]),ey.push([t,r]),()=>{let o=ey.findIndex(([l])=>l===t);o>-1&&ey.splice(o,1)}),[t]);let a=n.toasts.map(o=>{var l,u,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((u=e[o.type])==null?void 0:u.duration)||e?.duration||WK[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:a}},ZK=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||YK()}),Rp=e=>(t,n)=>{let r=ZK(t,e,n);return cx(r.toasterId||KK(r.id))({type:2,toast:r}),r.id},Bn=(e,t)=>Rp("blank")(e,t);Bn.error=Rp("error");Bn.success=Rp("success");Bn.loading=Rp("loading");Bn.custom=Rp("custom");Bn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?cx(t)(n):aB(n)};Bn.dismissAll=e=>Bn.dismiss(void 0,e);Bn.remove=(e,t)=>{let n={type:4,toastId:e};t?cx(t)(n):aB(n)};Bn.removeAll=e=>Bn.remove(void 0,e);Bn.promise=(e,t,n)=>{let r=Bn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?_y(t.success,i):void 0;return a?Bn.success(a,{id:r,...n,...n?.success}):Bn.dismiss(r),i}).catch(i=>{let a=t.error?_y(t.error,i):void 0;a?Bn.error(a,{id:r,...n,...n?.error}):Bn.dismiss(r)}),e};var XK=1e3,JK=(e,t="default")=>{let{toasts:n,pausedAt:r}=VK(e,t),i=S.useRef(new Map).current,a=S.useCallback((m,b=XK)=>{if(i.has(m))return;let y=setTimeout(()=>{i.delete(m),o({type:4,toastId:m})},b);i.set(m,y)},[]);S.useEffect(()=>{if(r)return;let m=Date.now(),b=n.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(m-y.createdAt);if(k<0){y.visible&&Bn.dismiss(y.id);return}return setTimeout(()=>Bn.dismiss(y.id,t),k)});return()=>{b.forEach(y=>y&&clearTimeout(y))}},[n,r,t]);let o=S.useCallback(cx(t),[t]),l=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=S.useCallback((m,b)=>{o({type:1,toast:{id:m,height:b}})},[o]),d=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=S.useCallback((m,b)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:w}=b||{},_=n.filter(j=>(j.position||w)===(m.position||w)&&j.height),T=_.findIndex(j=>j.id===m.id),N=_.filter((j,C)=>C<T&&j.visible).length;return _.filter(j=>j.visible).slice(...y?[N+1]:[0,N]).reduce((j,C)=>j+(C.height||0)+k,0)},[n]);return S.useEffect(()=>{n.forEach(m=>{if(m.dismissed)a(m.id,m.removeDelay);else{let b=i.get(m.id);b&&(clearTimeout(b),i.delete(m.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:u,startPause:l,endPause:d,calculateOffset:h}}},QK=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,eW=Fs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tW=Fs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nW=fc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${QK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${eW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${tW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rW=Fs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iW=fc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${rW} 1s linear infinite;
`,aW=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oW=Fs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sW=fc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,lW=fc("div")`
  position: absolute;
`,cW=fc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,uW=Fs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dW=fc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${uW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,fW=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(dW,null,t):t:n==="blank"?null:S.createElement(cW,null,S.createElement(iW,{...r}),n!=="loading"&&S.createElement(lW,null,n==="error"?S.createElement(nW,{...r}):S.createElement(sW,{...r})))},hW=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mW=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,pW="0%{opacity:0;} 100%{opacity:1;}",gW="0%{opacity:1;} 100%{opacity:0;}",bW=fc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,yW=fc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vW=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=tB()?[pW,gW]:[hW(n),mW(n)];return{animation:t?`${Fs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fs(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},xW=S.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?vW(e.position||t||"top-center",e.visible):{opacity:0},a=S.createElement(fW,{toast:e}),o=S.createElement(yW,{...e.ariaProps},_y(e.message,e));return S.createElement(bW,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:a,message:o}):S.createElement(S.Fragment,null,a,o))});HK(S.createElement);var wW=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let a=S.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(e,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:a,className:t,style:n},i)},_W=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:tB()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},SW=lx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fg=16,oB=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:d}=JK(n,a);return S.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Fg,left:Fg,right:Fg,bottom:Fg,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let m=h.position||t,b=d.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=_W(m,b);return S.createElement(wW,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?SW:"",style:y},h.type==="custom"?_y(h.message,h):i?i(h):S.createElement(xW,{toast:h,position:m}))}))},_a=Bn;function kW(e,t,n,r=0,i=0){t<=2&&(e-=1,t+=12);const a=Math.floor(e/100),o=2-a+Math.floor(a/4),l=n+(r+i/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+l+o-1524.5}const EW=864e5;function jW(e){const t=(e-24405875e-1)*EW;return new Date(t)}function TW(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const i=n-2e3;return 63.86+.3345*i-.060374*i*i+.0017275*i**3+651814e-9*i**4+2373599e-11*i**5}if(n>=2005&&n<2050){const i=n-2e3;return 62.92+.32217*i+.005589*i*i}if(n>=2050&&n<=2150){const i=(n-1820)/100;return-20+32*i*i-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const i=(n-1800)/100;return 13.72-33.244*i+68.612*i**2-65.3*i**3-1.653*i**4+.3343*i**5-.012125*i**6+1348e-7*i**7-175e-8*i**8}const r=(n-1820)/100;return-20+32*r*r}function AW(e){const t=Math.floor(e+.5),n=e+.5-t;let r=t;if(t>=2299161){const m=Math.floor((t-186721625e-2)/36524.25);r=t+1+m-Math.floor(m/4)}const i=r+1524,a=Math.floor((i-122.1)/365.25),o=Math.floor(365.25*a),l=Math.floor((i-o)/30.6001),u=i-o-Math.floor(30.6001*l)+n;let d=l-1;d>12&&(d-=12);let h=a-4715;return d>2&&(h-=1),[h,d,u]}const Bm=Math.PI,mu=Bm/180,NW=180/Bm,OW=86400;function CW(e){return e%=360,e<0?e+360:e}function MW(e,t){return(e-t+540)%360-180}function BM(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function DW(e){const[t,n]=AW(e);return e+TW(t,Math.round(n))/OW}function zM(e,t){let n=0,r=1;for(let i=0;i<e.length;i++){let a=0;for(const[o,l,u]of e[i])a+=o*Math.cos(l+u*t);n+=a*r,r*=t}return n*1e-8}function PW(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*mu,r=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*mu,i=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*mu,a=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*mu,o=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*mu,l=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let u=0,d=0;for(const[h,m,b,y,k,w,_,T,N]of l){const j=h*n+m*r+b*i+y*a+k*o;u+=(w+_*t)*Math.sin(j),d+=(T+N*t)*Math.cos(j)}return u*=1e-4,d*=1e-4,{dpsi:u,deps:d}}function Hg(e){const t=DW(e),n=(t-2451545)/365250,r=zM(UM.L,n),i=zM(UM.R,n);let a=r+Bm;a>2*Bm&&(a-=2*Bm);const{dpsi:o}=PW(t),l=o/3600*mu,u=20.4898/(3600*i),d=a+l-u*mu;return CW(d*NW)}function bn(e,t,n){const r=(t%360+360)%360,i=kW(e,1,1),a=Hg(i);let o=r-a;o<0&&(o+=360);let l=i+o/.98564736;const u=1e-6,d=5e-6;for(let b=0;b<25;b++){const y=Hg(l),k=MW(r,y);if(Math.abs(k)<u)break;const w=Hg(l+d),_=Hg(l-d),T=BM(w,y),N=BM(_,y),j=(T-N)/(2*d);l+=k/j}const h=jW(l),m=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),0,0);if(Number.isFinite(n)){const b=n/15-9;if(Math.abs(b)>1e-12)return new Date(m.getTime()+b*36e5)}return m}const UM={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},RW=(e,t)=>(e%t+t)%t,Tj=(e,t)=>(e%t+t)%t,sB=e=>e instanceof Date&&!Number.isNaN(e.getTime()),FM=new Map;function lB(e,t=127.5){const n=`${e}@${t}`,r=FM.get(n);if(r)return r;const i=bn(e,315,t);if(!i)throw new Error(`    : year=${e}, lon=${t}`);return FM.set(n,i),i}function cB(e,t=127.5){if(!sB(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),r=lB(n,t),i=e<r?n-1:n,a=RW(i-4,60);return{useYear:i,index60Num:a}}const ri=["","","","","","","","","",""],Ti=["","","","","","","","","","","",""],mE={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},ho={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},LW=["","","","","","","","","",""],IW=["","","","","","","","","","","",""],$W=["","","","","","","","","","","","","","","","","","","",""],BW=["","","","","","","","","","","","","","","","","","","","","","","",""],hf=new Set(ri),Km=new Set(Ti),Jn={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ar={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wm=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Sy=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],zW={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},UW={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function ut(e,t=127.5){const{index60Num:n}=cB(e,t);return Wm[n]}function FW(e,t=127.5){return(ut(e,t)||"").charAt(0)}const HW=[2,4,6,8,0,2,4,6,8,0];function GW(e,t=127.5){const n=new Array(12);return n[0]=lB(e,t),n[1]=bn(e,345,t),n[2]=bn(e,15,t),n[3]=bn(e,45,t),n[4]=bn(e,75,t),n[5]=bn(e,105,t),n[6]=bn(e,135,t),n[7]=bn(e,165,t),n[8]=bn(e,195,t),n[9]=bn(e,225,t),n[10]=bn(e,255,t),n[11]=bn(e+1,285,t),n.map(r=>new Date(r.getTime()+1800*1e3))}function YW(e,t=127.5){const{useYear:n}=cB(e,t),r=GW(n,t);let i=0;for(let o=0;o<12;o+=1)e>=r[o]&&(i=o);return{monthIndex:i+1,useYear:n,boundaries:r}}function qW(e,t=127.5){const n=FW(e,t),r=mE..indexOf(n);if(r<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return HW[r]}function KW(e,t,n=127.5){return(qW(e,n)+(t-1))%10}function Ot(e,t=127.5){if(!sB(e))return"";const{monthIndex:n}=YW(e,t),r=(2+(n-1))%12,i=mE.[r],a=KW(e,n,t);return mE.[a]+i}const ky={JDN:2445731,idx:0};function uB(e,t,n,r=0,i=0,a=0){t<=2&&(e-=1,t+=12);const o=Math.floor(e/100),l=2-o+Math.floor(o/4),u=(r+i/60+a/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+u+l-1524.5}function WW(e,t){const n=e.getHours(),r=e.getMinutes(),i=n*60+r,a=XW(e);return t===""&&a===""?i>=1380?1:0:t===""&&(a===""||a==="")?i<180?-1:0:(i<0,0)}function VW(e,t){const r=e.getHours()*60+e.getMinutes();return t===""?r>=1380?1:0:t===""&&r<180?-1:0}function dt(e,t){const n=WW(e,t),r=new Date(e.getTime());r.setDate(r.getDate()+n);const i=uB(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes()),a=Math.floor(i+.5),o=Tj(a-ky.JDN+ky.idx,60),l=Wm[o];if(!l)throw new Error(`getDayGanZhi: idx=${o} out of range (jdn=${a}, jd=${i})`);return l}function ta(e,t){if(!e)return e;const n=Wm.indexOf(e);return n<0?e:Wm[Tj(n+t,60)]??e}function ZW(e,t){const n=new Date(e),r=VW(n,t),i=new Date(e.getTime());i.setDate(i.getDate()+r);const a=uB(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),o=Math.floor(a+.5),l=Tj(o-ky.JDN+ky.idx,60),u=Wm[l];if(!u)throw new Error(`getDayGanZhi: idx=${l} out of range (jdn=${o}, jd=${a})`);return u}function XW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<Sy.length;n+=1){const{branch:r,start:i,end:a}=Sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function JW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<Sy.length;n+=1){const{branch:r,start:i,end:a}=Sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function QW(e,t,n,r){const i=ri.indexOf(t);if(i<0)return"";let a=(i%5*2+n)%10;const o=e.getHours();return(r===""||r==="/"&&o>=3)&&(n===0||n===1)&&(a=(a+2)%10),ri[a]}function Ni(e,t,n){e instanceof Date||(e=new Date(e));const r=JW(e),i=Ti.indexOf(r),o=(n??dt(e,t)).charAt(0);return QW(e,o,i,t)+r}const HM=e=>{let t;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const b=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(y=>y(t,b))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,l);return l},eV=(e=>e?HM(e):HM),tV=e=>e;function nV(e,t=tV){const n=on.useSyncExternalStore(e.subscribe,on.useCallback(()=>t(e.getState()),[e,t]),on.useCallback(()=>t(e.getInitialState()),[e,t]));return on.useDebugValue(n),n}const GM=e=>{const t=eV(e),n=r=>nV(t,r);return Object.assign(n,t),n},Jo=(e=>e?GM(e):GM);function rV(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const pE=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return pE(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return pE(r)(n)}}}},iV=(e,t)=>(n,r,i)=>{let a={storage:rV(()=>localStorage),partialize:w=>w,version:0,merge:(w,_)=>({..._,...w}),...t},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},m=i.setState;i.setState=(w,_)=>(m(w,_),h());const b=e((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>b;let y;const k=()=>{var w,_;if(!d)return;o=!1,l.forEach(N=>{var j;return N((j=r())!=null?j:b)});const T=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(w=r())!=null?w:b))||void 0;return pE(d.getItem.bind(d))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate){const j=a.migrate(N.state,N.version);return j instanceof Promise?j.then(C=>[!0,C]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var j;const[C,M]=N;if(y=a.merge(M,(j=r())!=null?j:b),n(y,!0),C)return h()}).then(()=>{T?.(y,void 0),y=r(),o=!0,u.forEach(N=>N(y))}).catch(N=>{T?.(void 0,N)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||k(),y||b},dB=iV;var ks={},Gg={},gE=function(e,t){return gE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gE(e,t)};function fB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");gE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ey=function(){return Ey=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ey.apply(this,arguments)};function Df(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function hB(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function mB(e,t){return function(n,r){t(n,r,e)}}function pB(e,t,n,r,i,a){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),m,b=!1,y=n.length-1;y>=0;y--){var k={};for(var w in r)k[w]=w==="access"?{}:r[w];for(var w in r.access)k.access[w]=r.access[w];k.addInitializer=function(T){if(b)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(T||null))};var _=(0,n[y])(l==="accessor"?{get:h.get,set:h.set}:h[u],k);if(l==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(m=o(_.get))&&(h.get=m),(m=o(_.set))&&(h.set=m),(m=o(_.init))&&i.unshift(m)}else(m=o(_))&&(l==="field"?i.unshift(m):h[u]=m)}d&&Object.defineProperty(d,r.name,h),b=!0}function gB(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function bB(e){return typeof e=="symbol"?e:"".concat(e)}function yB(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function vB(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function qe(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{d(r.next(h))}catch(m){o(m)}}function u(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?a(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function xB(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var ux=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function wB(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ux(t,e,n)}function jy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Aj(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function _B(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Aj(arguments[t]));return e}function SB(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r}function kB(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function mf(e){return this instanceof mf?(this.v=e,this):new mf(e)}function EB(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(k){return Promise.resolve(k).then(y,m)}}function l(y,k){r[y]&&(i[y]=function(w){return new Promise(function(_,T){a.push([y,w,_,T])>1||u(y,w)})},k&&(i[y]=k(i[y])))}function u(y,k){try{d(r[y](k))}catch(w){b(a[0][3],w)}}function d(y){y.value instanceof mf?Promise.resolve(y.value.v).then(h,m):b(a[0][2],y)}function h(y){u("next",y)}function m(y){u("throw",y)}function b(y,k){y(k),a.shift(),a.length&&u(a[0][0],a[0][1])}}function jB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:mf(e[i](o)),done:!1}:a?a(o):o}:a}}function TB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof jy=="function"?jy(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),i(l,u,o.done,o.value)})}}function i(a,o,l,u){Promise.resolve(u).then(function(d){a({value:d,done:l})},o)}}function AB(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var aV=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},bE=function(e){return bE=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},bE(e)};function NB(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=bE(e),r=0;r<n.length;r++)n[r]!=="default"&&ux(t,e,n[r]);return aV(t,e),t}function OB(e){return e&&e.__esModule?e:{default:e}}function CB(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function MB(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function DB(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function PB(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var oV=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function RB(e){function t(a){e.error=e.hasError?new oV(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function LB(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?t?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):e}const sV={__extends:fB,__assign:Ey,__rest:Df,__decorate:hB,__param:mB,__esDecorate:pB,__runInitializers:gB,__propKey:bB,__setFunctionName:yB,__metadata:vB,__awaiter:qe,__generator:xB,__createBinding:ux,__exportStar:wB,__values:jy,__read:Aj,__spread:_B,__spreadArrays:SB,__spreadArray:kB,__await:mf,__asyncGenerator:EB,__asyncDelegator:jB,__asyncValues:TB,__makeTemplateObject:AB,__importStar:NB,__importDefault:OB,__classPrivateFieldGet:CB,__classPrivateFieldSet:MB,__classPrivateFieldIn:DB,__addDisposableResource:PB,__disposeResources:RB,__rewriteRelativeImportExtension:LB},lV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:PB,get __assign(){return Ey},__asyncDelegator:jB,__asyncGenerator:EB,__asyncValues:TB,__await:mf,__awaiter:qe,__classPrivateFieldGet:CB,__classPrivateFieldIn:DB,__classPrivateFieldSet:MB,__createBinding:ux,__decorate:hB,__disposeResources:RB,__esDecorate:pB,__exportStar:wB,__extends:fB,__generator:xB,__importDefault:OB,__importStar:NB,__makeTemplateObject:AB,__metadata:vB,__param:mB,__propKey:bB,__read:Aj,__rest:Df,__rewriteRelativeImportExtension:LB,__runInitializers:gB,__setFunctionName:yB,__spread:_B,__spreadArray:kB,__spreadArrays:SB,__values:jy,default:sV},Symbol.toStringTag,{value:"Module"})),cV=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let dx=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},IB=class extends dx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},yE=class extends dx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},vE=class extends dx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Ty;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ty||(Ty={}));class uV{constructor(t,{headers:n={},customFetch:r,region:i=Ty.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=cV(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return qe(this,arguments,void 0,function*(n,r={}){var i;let a,o;try{const{headers:l,method:u,body:d,signal:h,timeout:m}=r;let b={},{region:y}=r;y||(y=this.region);const k=new URL(`${this.url}/${n}`);y&&y!=="any"&&(b["x-region"]=y,k.searchParams.set("forceFunctionRegion",y));let w;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(b["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(b["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let _=h;m&&(o=new AbortController,a=setTimeout(()=>o.abort(),m),h?(_=o.signal,h.addEventListener("abort",()=>o.abort())):_=o.signal);const T=yield this.fetch(k.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),l),body:w,signal:_}).catch(M=>{throw new IB(M)}),N=T.headers.get("x-relay-error");if(N&&N==="true")throw new yE(T);if(!T.ok)throw new vE(T);let j=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield T.json():j==="application/octet-stream"||j==="application/pdf"?C=yield T.blob():j==="text/event-stream"?C=T:j==="multipart/form-data"?C=yield T.formData():C=yield T.text(),{data:C,error:null,response:T}}catch(l){return{data:null,error:l,response:l instanceof vE||l instanceof yE?l.context:void 0}}finally{a&&clearTimeout(a)}})}}const dV=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ty},FunctionsClient:uV,FunctionsError:dx,FunctionsFetchError:IB,FunctionsHttpError:vE,FunctionsRelayError:yE},Symbol.toStringTag,{value:"Module"})),$B=Mp(dV);var Fr={};const Pf=Mp(lV);var Yg={},qg={},Kg={},Wg={},Vg={},Zg={},YM;function BB(){if(YM)return Zg;YM=1,Object.defineProperty(Zg,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Zg.default=e,Zg}var qM;function zB(){if(qM)return Vg;qM=1,Object.defineProperty(Vg,"__esModule",{value:!0});const t=Pf.__importDefault(BB());let n=class{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,b;let y=null,k=null,w=null,_=u.status,T=u.statusText;if(u.ok){if(this.method!=="HEAD"){const M=await u.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?k=M:k=JSON.parse(M))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),C=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");j&&C&&C.length>1&&(w=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(y={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,w=null,_=406,T="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const j=await u.text();try{y=JSON.parse(j),Array.isArray(y)&&u.status===404&&(k=[],y=null,_=200,T="OK")}catch{u.status===404&&j===""?(_=204,T="No Content"):y={message:j}}if(y&&this.isMaybeSingle&&(!((b=y?.details)===null||b===void 0)&&b.includes("0 rows"))&&(y=null,_=200,T="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:k,count:w,status:_,statusText:T}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,h,m,b,y,k;let w="";const _=u?.cause;if(_){const T=(d=_?.message)!==null&&d!==void 0?d:"",N=(h=_?.code)!==null&&h!==void 0?h:"";w=`${(m=u?.name)!==null&&m!==void 0?m:"FetchError"}: ${u?.message}`,w+=`

Caused by: ${(b=_?.name)!==null&&b!==void 0?b:"Error"}: ${T}`,N&&(w+=` (${N})`),_?.stack&&(w+=`
${_.stack}`)}else w=(y=u?.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(k=u?.name)!==null&&k!==void 0?k:"FetchError"}: ${u?.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}};return Vg.default=n,Vg}var KM;function UB(){if(KM)return Wg;KM=1,Object.defineProperty(Wg,"__esModule",{value:!0});const t=Pf.__importDefault(zB());let n=class extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const m=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),b=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${b}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Wg.default=n,Wg}var WM;function Nj(){if(WM)return Kg;WM=1,Object.defineProperty(Kg,"__esModule",{value:!0});const t=Pf.__importDefault(UB()),n=new RegExp("[,()]");let r=class extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}};return Kg.default=r,Kg}var VM;function FB(){if(VM)return qg;VM=1,Object.defineProperty(qg,"__esModule",{value:!0});const t=Pf.__importDefault(Nj());let n=class{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},u=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((b,y)=>b.concat(Object.keys(y)),[]);if(m.length>0){const b=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return qg.default=n,qg}var ZM;function fV(){if(ZM)return Yg;ZM=1,Object.defineProperty(Yg,"__esModule",{value:!0});const e=Pf,t=e.__importDefault(FB()),n=e.__importDefault(Nj());let r=class HB{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new HB(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:d}={}){var h;let m;const b=new URL(`${this.url}/rpc/${a}`);let y;l||u?(m=l?"HEAD":"GET",Object.entries(o).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{b.searchParams.append(w,_)})):(m="POST",y=o);const k=new Headers(this.headers);return d&&k.set("Prefer",`count=${d}`),new n.default({method:m,url:b,headers:k,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return Yg.default=r,Yg}var XM;function GB(){if(XM)return Fr;XM=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.PostgrestError=Fr.PostgrestBuilder=Fr.PostgrestTransformBuilder=Fr.PostgrestFilterBuilder=Fr.PostgrestQueryBuilder=Fr.PostgrestClient=void 0;const e=Pf,t=e.__importDefault(fV());Fr.PostgrestClient=t.default;const n=e.__importDefault(FB());Fr.PostgrestQueryBuilder=n.default;const r=e.__importDefault(Nj());Fr.PostgrestFilterBuilder=r.default;const i=e.__importDefault(UB());Fr.PostgrestTransformBuilder=i.default;const a=e.__importDefault(zB());Fr.PostgrestBuilder=a.default;const o=e.__importDefault(BB());return Fr.PostgrestError=o.default,Fr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Fr}class YB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const hV="2.86.2",mV=`realtime-js/${hV}`,qB="1.0.0",pV="2.0.0",JM=qB,xE=1e4,gV=1e3,bV=100;var pu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pu||(pu={}));var Wn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wn||(Wn={}));var eo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(eo||(eo={}));var wE;(function(e){e.websocket="websocket"})(wE||(wE={}));var gu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gu||(gu={}));class yV{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,a;const o=t.topic,l=(i=t.ref)!==null&&i!==void 0?i:"",u=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+b);let k=new DataView(y),w=0;k.setUint8(w++,this.KINDS.userBroadcastPush),k.setUint8(w++,u.length),k.setUint8(w++,l.length),k.setUint8(w++,o.length),k.setUint8(w++,d.length),k.setUint8(w++,m.length),k.setUint8(w++,n),Array.from(u,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(l,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(o,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(d,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(m,T=>k.setUint8(w++,T.charCodeAt(0)));var _=new Uint8Array(y.byteLength+r.byteLength);return _.set(new Uint8Array(y),0),_.set(new Uint8Array(r),y.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,o,l,u]=r;return n({join_ref:i,ref:a,topic:o,event:l,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(t.slice(u,u+i));u=u+i;const h=r.decode(t.slice(u,u+a));u=u+a;const m=r.decode(t.slice(u,u+o));u=u+o;const b=t.slice(u,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,k={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(k.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class KB{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var an;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(an||(an={}));const QM=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=vV(o,e,t,i),a),{}):{}},vV=(e,t,n,r)=>{const i=t.find(l=>l.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?WB(a,o):_E(o)},WB=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return SV(t,n)}switch(e){case an.bool:return xV(t);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return wV(t);case an.json:case an.jsonb:return _V(t);case an.timestamp:return kV(t);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return _E(t);default:return _E(t)}},_E=e=>e,xV=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wV=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_V=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},SV=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>WB(t,l))}return e},kV=e=>typeof e=="string"?e.replace(" ","T"):e,VB=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class k1{constructor(t,n,r={},i=xE){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var SE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(SE||(SE={}));let ZB=class ty{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ty.syncState(this.state,i,a,o),this.pendingDiffs.forEach(u=>{this.state=ty.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ty.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),l={},u={};return this.map(a,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const m=a[d];if(m){const b=h.map(_=>_.presence_ref),y=m.map(_=>_.presence_ref),k=h.filter(_=>y.indexOf(_.presence_ref)<0),w=m.filter(_=>b.indexOf(_.presence_ref)<0);k.length>0&&(l[d]=k),w.length>0&&(u[d]=w)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,u)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),h.length>0){const m=t[l].map(y=>y.presence_ref),b=h.filter(y=>m.indexOf(y.presence_ref)<0);t[l].unshift(...b)}r(l,h,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const h=u.map(m=>m.presence_ref);d=d.filter(m=>h.indexOf(m.presence_ref)<0),t[l]=d,i(l,d,u),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var kE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(kE||(kE={}));var af;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(af||(af={}));var Po;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Po||(Po={}));const EV=Wn;let XB=class JB{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new k1(this,eo.join,this.params,this.timeout),this.rejoinTimer=new KB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(eo.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ZB(this),this.broadcastEndpointURL=VB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Wn.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[af.PRESENCE]&&this.bindings[af.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},b={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t?.(Po.CHANNEL_ERROR,y)),this._onClose(()=>t?.(Po.CLOSED)),this.updateJoinPayload(Object.assign({config:b},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket.setAuth(),y===void 0){t?.(Po.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(k=w?.length)!==null&&k!==void 0?k:0,T=[];for(let N=0;N<_;N++){const j=w[N],{filter:{event:C,schema:M,table:P,filter:I}}=j,z=y&&y[N];if(z&&z.event===C&&z.schema===M&&z.table===P&&z.filter===I)T.push(Object.assign(Object.assign({},j),{id:z.id}));else{this.unsubscribe(),this.state=Wn.errored,t?.(Po.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(Po.SUBSCRIBED);return}}).receive("error",y=>{this.state=Wn.errored,t?.(Po.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t?.(Po.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Wn.joined&&t===af.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(eo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new k1(this,eo.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new k1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bV){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=eo;if(r&&[l,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let b=this._onMessage(o,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var k,w,_;return((k=y.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(w=y.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(y=>y.callback(b,r)):(a=this.bindings[o])===null||a===void 0||a.filter(y=>{var k,w,_,T,N,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const C=y.id,M=(k=y.filter)===null||k===void 0?void 0:k.event;return C&&((w=n.ids)===null||w===void 0?void 0:w.includes(C))&&(M==="*"||M?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(N=(T=y?.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return C==="*"||C===((j=n?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:w,table:_,commit_timestamp:T,type:N,errors:j}=k;b=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:T,eventType:N,new:{},old:{},errors:j}),this._getPayloadRecords(k))}y.callback(b,r)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&JB.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(eo.close,{},t)}_onError(t){this._on(eo.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=QM(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=QM(t.columns,t.old_record)),n}};const E1=()=>{},Xg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jV=[1e3,2e3,5e3,1e4],TV=1e4,AV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let NV=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xE,this.transport=null,this.heartbeatIntervalMs=Xg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=E1,this.ref=0,this.reconnectTimer=null,this.vsn=JM,this.logger=E1,this.conn=null,this.sendBuffer=[],this.serializer=new yV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${wE.websocket}`,this.httpEndpoint=VB(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pu.connecting:return gu.Connecting;case pu.open:return gu.Open;case pu.closing:return gu.Closing;default:return gu.Closed}}isConnected(){return this.connectionState()===gu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new XB(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(gV,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,l=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===pu.open||this.conn.readyState===pu.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(eo.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([AV],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:mV};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(eo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new KB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,l,u,d,h,m,b,y;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:xE,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Xg.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:E1,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:JM,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(k=>jV[k-1]||TV),this.vsn){case qB:this.encode=(h=t?.encode)!==null&&h!==void 0?h:((k,w)=>w(JSON.stringify(k))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:((k,w)=>w(JSON.parse(k)));break;case pV:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(y=t?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const OV=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:EV,get REALTIME_LISTEN_TYPES(){return af},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return kE},get REALTIME_PRESENCE_LISTEN_EVENTS(){return SE},get REALTIME_SUBSCRIBE_STATES(){return Po},RealtimeChannel:XB,RealtimeClient:NV,RealtimePresence:ZB,WebSocketFactory:YB},Symbol.toStringTag,{value:"Module"})),QB=Mp(OV);class Lp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class e4 extends Lp{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ay extends Lp{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Oj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),CV=()=>Response,EE=e=>{if(Array.isArray(e))return e.map(n=>EE(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=EE(r)}),t},MV=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},DV=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),j1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},PV=(e,t,n)=>qe(void 0,void 0,void 0,function*(){const r=yield CV();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new e4(j1(i),a,o))}).catch(i=>{t(new Ay(j1(i),i))}):t(new Ay(j1(e),e))}),RV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(MV(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Ip(e,t,n,r,i,a){return qe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,RV(t,r,i,a)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>PV(u,l,r))})})}function Vm(e,t,n,r){return qe(this,void 0,void 0,function*(){return Ip(e,"GET",t,n,r)})}function Qa(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Ip(e,"POST",t,r,i,n)})}function jE(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Ip(e,"PUT",t,r,i,n)})}function LV(e,t,n,r){return qe(this,void 0,void 0,function*(){return Ip(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Cj(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return Ip(e,"DELETE",t,r,i,n)})}class IV{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pn(t))return{data:null,error:t};throw t}})}}var t4;class $V{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[t4]="BlobDownloadBuilder",this.promise=null}asStream(){return new IV(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pn(t))return{data:null,error:t};throw t}})}}t4=Symbol.toStringTag;const BV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zV{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Oj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return qe(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},eD),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),u&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),m=yield(t=="PUT"?jE:Qa)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pn(a))return{data:null,error:a};throw a}})}upload(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return qe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:eD.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const m=yield jE(this.fetch,l.toString(),u,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(pn(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Qa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Lp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}update(t,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:yield Qa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Qa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Qa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=yield Qa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),u=()=>Vm(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new $V(u,this.shouldThrowOnError)}info(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Vm(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:EE(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}exists(t){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield LV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r)&&r instanceof Ay){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}list(t,n,r){return qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},BV),n),{prefix:t||""});return{data:yield Qa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}listV2(t,n){return qe(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Qa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const n4="2.86.2",r4={"X-Client-Info":`storage-js/${n4}`};class UV{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},r4),n),this.fetch=Oj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Vm(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Vm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}createBucket(t){return qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Qa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield jE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Qa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Zm=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function FV(e,t,n){const r=new URL(t,e);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function HV(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function GV(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:o}){const l=FV(e.baseUrl,r,i),u=await HV(e.auth),d=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...u,...o},body:a?JSON.stringify(a):void 0}),h=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),b=m&&h?JSON.parse(h):h;if(!d.ok){const y=m?b:void 0,k=y?.error;throw new Zm(k?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:k?.type,icebergCode:k?.code,details:y})}return{status:d.status,headers:d.headers,data:b}}}}function Jg(e){return e.join("")}var YV=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Jg(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jg(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jg(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jg(e.namespace)}`}),!0}catch(t){if(t instanceof Zm&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Zm&&n.status===409)return;throw n}}};function Od(e){return e.join("")}var qV=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Od(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Zm&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Zm&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},KV=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=GV({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new YV(this.client,t),this.tableOps=new qV(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class i4{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},r4),n),this.fetch=Oj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Qa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBuckets(t){return qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Vm(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}from(t){if(!DV(t))throw new Lp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new KV({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Mj={"X-Client-Info":`storage-js/${n4}`,"Content-Type":"application/json"};class Dj extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ki(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class ny extends Dj{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a4 extends Dj{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var TE;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(TE||(TE={}));const fx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),WV=()=>Response,o4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},VV=e=>Array.from(new Float32Array(e)),ZV=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},tD=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XV=(e,t,n)=>qe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new ny(tD(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new ny(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new ny(l,i,o))}}else t(new a4(tD(e),e))}),JV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(o4(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function QV(e,t,n,r,i,a){return qe(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,JV(t,r,i,a)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>XV(u,l,r))})})}function Wi(e,t,n,r,i){return qe(this,void 0,void 0,function*(){return QV(e,"POST",t,r,i,n)})}class s4{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mj),n),this.fetch=fx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Wi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ki(r))return{data:null,error:r};throw r}})}listIndexes(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return qe(this,void 0,void 0,function*(){try{return{data:(yield Wi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ki(r))return{data:null,error:r};throw r}})}}class l4{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mj),n),this.fetch=fx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Wi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}listVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Wi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}queryVectors(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteVectors(t){return qe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Wi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}}class c4{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mj),n),this.fetch=fx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Wi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}getBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}listBuckets(){return qe(this,arguments,void 0,function*(t={}){try{return{data:yield Wi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qe(this,void 0,void 0,function*(){try{return{data:(yield Wi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ki(n))return{data:null,error:n};throw n}})}}class u4 extends c4{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new d4(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return qe(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return qe(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return qe(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return qe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class d4 extends s4{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return qe(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new f4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class f4 extends l4{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return qe(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class eZ extends UV{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new zV(this.url,this.headers,t,this.fetch)}get vectors(){return new u4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new i4(this.url+"/iceberg",this.headers,this.fetch)}}const tZ=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:i4,StorageApiError:e4,StorageClient:eZ,StorageError:Lp,StorageUnknownError:Ay,StorageVectorsApiError:ny,StorageVectorsClient:u4,StorageVectorsError:Dj,get StorageVectorsErrorCode(){return TE},StorageVectorsUnknownError:a4,VectorBucketApi:c4,VectorBucketScope:d4,VectorDataApi:l4,VectorIndexApi:s4,VectorIndexScope:f4,isPlainObject:o4,isStorageError:pn,isStorageVectorsError:ki,normalizeToFloat32:VV,resolveFetch:fx,resolveResponse:WV,validateVectorDimension:ZV},Symbol.toStringTag,{value:"Module"})),nZ=Mp(tZ);var T1={},rm={},nD;function rZ(){return nD||(nD=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.version=void 0,rm.version="2.86.2"),rm}var rD;function iZ(){return rD||(rD=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=rZ();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(T1)),T1}var A1={},iD;function aZ(){return iD||(iD=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,a,o)=>{const l=(0,e.resolveFetch)(o),u=(0,e.resolveHeadersConstructor)();return async(d,h)=>{var m;const b=(m=await a())!==null&&m!==void 0?m:i;let y=new u(h?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),l(d,Object.assign(Object.assign({},h),{headers:y}))}};e.fetchWithAuth=r})(A1)),A1}var Es={},aD;function oZ(){if(aD)return Es;aD=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.isBrowser=void 0,Es.uuid=e,Es.ensureTrailingSlash=t,Es.applySettingDefaults=r,Es.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var o=Math.random()*16|0,l=a=="x"?o:o&3|8;return l.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";Es.isBrowser=n;function r(a,o){var l,u;const{db:d,auth:h,realtime:m,global:b}=a,{db:y,auth:k,realtime:w,global:_}=o,T={db:Object.assign(Object.assign({},y),d),auth:Object.assign(Object.assign({},k),h),realtime:Object.assign(Object.assign({},w),m),storage:{},global:Object.assign(Object.assign(Object.assign({},_),b),{headers:Object.assign(Object.assign({},(l=_?.headers)!==null&&l!==void 0?l:{}),(u=b?.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return a.accessToken?T.accessToken=a.accessToken:delete T.accessToken,T}function i(a){const o=a?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Es}var im={};const h4="2.86.2",Yd=30*1e3,AE=3,N1=AE*Yd,sZ="http://localhost:9999",lZ="supabase.auth.token",cZ={"X-Client-Info":`gotrue-js/${h4}`},NE="X-Supabase-Api-Version",m4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dZ=600*1e3;let pf=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let p4=class extends pf{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function g4(e){return Xe(e)&&e.name==="AuthApiError"}let Vl=class extends pf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Xs=class extends pf{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},wi=class extends Xs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function b4(e){return Xe(e)&&e.name==="AuthSessionMissingError"}let su=class extends Xs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Om=class extends Xs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Cm=class extends Xs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function y4(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}let OE=class extends Xs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ny=class extends Xs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function ry(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}let CE=class extends Xs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function fZ(e){return Xe(e)&&e.name==="AuthWeakPasswordError"}let Oy=class extends Xs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Cy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oD=` 	
\r=`.split(""),hZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oD.length;t+=1)e[oD[t].charCodeAt(0)]=-2;for(let t=0;t<Cy.length;t+=1)e[Cy[t].charCodeAt(0)]=t;return e})();function sD(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Cy[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Cy[r]),t.queuedBits-=6}}function v4(e,t,n){const r=hZ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lD(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{gZ(o,r,n)};for(let o=0;o<e.length;o+=1)v4(e.charCodeAt(o),i,a);return t.join("")}function mZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}mZ(r,t)}}function gZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function of(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)v4(e.charCodeAt(i),n,r);return new Uint8Array(t)}function bZ(e){const t=[];return pZ(e,n=>t.push(n)),new Uint8Array(t)}function vu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>sD(i,n,r)),sD(null,n,r),t.join("")}function yZ(e){return Math.round(Date.now()/1e3)+e}function vZ(){return Symbol("auth-callback")}const Mr=()=>typeof window<"u"&&typeof document<"u",Qc={tested:!1,writable:!1},x4=()=>{if(!Mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qc.tested)return Qc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qc.tested=!0,Qc.writable=!0}catch{Qc.tested=!0,Qc.writable=!1}return Qc.writable};function xZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const w4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qd=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},eu=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Or=async(e,t)=>{await e.removeItem(t)};class hx{constructor(){this.promise=new hx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}hx.promiseConstructor=Promise;function O1(e){const t=e.split(".");if(t.length!==3)throw new Oy("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!uZ.test(t[r]))throw new Oy("JWT not in base64url format");return{header:JSON.parse(lD(t[0])),payload:JSON.parse(lD(t[1])),signature:of(t[2]),raw:{header:t[0],payload:t[1]}}}async function _Z(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SZ(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function kZ(e){return("0"+e.toString(16)).substr(-2)}function EZ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,kZ).join("")}async function jZ(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function TZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await jZ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cd(e,t,n=!1){const r=EZ();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await qd(e,`${t}-code-verifier`,i);const a=await TZ(r);return[a,r===a?"plain":"s256"]}const AZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NZ(e){const t=e.headers.get(NE);if(!t||!t.match(AZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function OZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Md(e){if(!MZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function C1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function DZ(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function cD(e){return JSON.parse(JSON.stringify(e))}const lu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),PZ=[502,503,504];async function uD(e){var t;if(!wZ(e))throw new Ny(lu(e),0);if(PZ.includes(e.status))throw new Ny(lu(e),e.status);let n;try{n=await e.json()}catch(a){throw new Vl(lu(a),a)}let r;const i=NZ(e);if(i&&i.getTime()>=m4["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new CE(lu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new wi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new CE(lu(n),e.status,n.weak_password.reasons);throw new p4(lu(n),e.status||500,r)}const RZ=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function lt(e,t,n,r){var i;const a=Object.assign({},r?.headers);a[NE]||(a[NE]=m4["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await LZ(e,t,n+l,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function LZ(e,t,n,r,i,a){const o=RZ(t,r,i,a);let l;try{l=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new Ny(lu(u),0)}if(l.ok||await uD(l),r?.noResolveJson)return l;try{return await l.json()}catch(u){await uD(u)}}function Ja(e){var t;let n=null;BZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=yZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function dD(e){const t=Ja(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function IZ(e){return{data:e,error:null}}function $Z(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=Df(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function fD(e){return e}function BZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const iy=["global","local","others"];let Pj=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=w4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=iy[0]){if(iy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${iy.join(", ")}`);try{return await lt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zl})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Df(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:$Z,redirectTo:n?.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zl})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:fD});if(h.error)throw h.error;const m=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Md(t);try{return await lt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zl})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Md(t);try{return await lt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zl})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Md(t);try{return await lt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zl})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Md(t.userId);try{const{data:n,error:r}=await lt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Md(t.userId),Md(t.id);try{return{data:await lt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await lt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:fD});if(h.error)throw h.error;const m=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Xe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await lt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await lt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await lt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}};function hD(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const cu={debug:!!(globalThis&&x4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let _4=class extends Rj{};class zZ extends Rj{}async function S4(e,t,n){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),cu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(cu.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const mD={};async function UZ(e,t,n){var r;const i=(r=mD[e])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new zZ(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return mD[e]=a.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await a}function FZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function k4(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function HZ(e){return parseInt(e,16)}function GZ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function YZ(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:h,uri:m,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=k4(e.address),k=h?`${h}://${r}`:r,w=e.statement?`${e.statement}
`:"",_=`${k} wants you to sign in with your Ethereum account:
${y}

${w}`;let T=`URI: ${m}
Version: ${b}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),l&&(T+=`
Not Before: ${l.toISOString()}`),u&&(T+=`
Request ID: ${u}`),d){let N=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);N+=`
- ${j}`}T+=N}return`${_}
${T}`}class Zn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class My extends Zn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function qZ({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Zn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Zn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Zn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Zn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Zn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Zn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Zn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(E4(o)){if(a.rp.id!==o)return new Zn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Zn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Zn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function KZ({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Zn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(E4(r)){if(n.rpId!==r)return new Zn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Zn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class WZ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const VZ=new WZ;function ZZ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Df(e,["challenge","user","excludeCredentials"]),a=of(t).buffer,o=Object.assign(Object.assign({},n),{id:of(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:of(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function XZ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Df(e,["challenge","allowCredentials"]),i=of(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:of(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function JZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vu(new Uint8Array(e.response.attestationObject)),clientDataJSON:vu(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function QZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vu(new Uint8Array(i.authenticatorData)),clientDataJSON:vu(new Uint8Array(i.clientDataJSON)),signature:vu(new Uint8Array(i.signature)),userHandle:i.userHandle?vu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function E4(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function pD(){var e,t;return!!(Mr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function eX(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new My("Browser returned unexpected credential type",t)}:{data:null,error:new My("Empty credential response",t)}}catch(t){return{data:null,error:qZ({error:t,options:e})}}}async function tX(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new My("Browser returned unexpected credential type",t)}:{data:null,error:new My("Empty credential response",t)}}catch(t){return{data:null,error:KZ({error:t,options:e})}}}const nX={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},rX={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dy(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const l=r[a];t(l)?r[a]=Dy(l,o):r[a]=Dy(o)}else r[a]=o}return r}function iX(e,t){return Dy(nX,e,t||{})}function aX(e,t){return Dy(rX,e,t||{})}class oX{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const u=i??VZ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=iX(o.webauthn.credential_options.publicKey,a?.create),{data:h,error:m}=await eX({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}case"request":{const d=aX(o.webauthn.credential_options.publicKey,a?.request),{data:h,error:m}=await tX(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}}}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Vl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new pf("rpId is required for WebAuthn authentication")};try{if(!pD())return{data:null,error:new Vl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Vl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new pf("rpId is required for WebAuthn registration")};try{if(!pD())return{data:null,error:new Vl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var m;return(m=h.data)===null||m===void 0?void 0:m.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Vl("Unexpected error in register",o)}}}}FZ();const sX={url:sZ,storageKey:lZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function gD(e,t,n){return await n()}const Dd={};let Lj=class ME{get jwks(){var t,n;return(n=(t=Dd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Dd[this.storageKey]=Object.assign(Object.assign({},Dd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Dd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Dd[this.storageKey]=Object.assign(Object.assign({},Dd[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},sX),t);if(this.storageKey=a.storageKey,this.instanceID=(n=ME.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ME.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Mr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Pj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=w4(a.fetch),this.lock=a.lock||gD,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Mr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=S4:this.lock=gD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oX(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:x4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hD(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=hD(this.memoryStorage)),Mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${h4}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Mr()&&(n=xZ(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Mr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),y4(a)){const u=(t=a.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?this._returnResult({error:n}):this._returnResult({error:new Vl("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ja}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(Xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:h,password:m,options:b}=t;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await Cd(this.storage,this.storageKey)),a=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:h,password:m,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:k},xform:Ja})}else if("phone"in t){const{phone:h,password:m,options:b}=t;a=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ja})}else throw new Om("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await Or(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:dD})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:dD})}else throw new Om("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new su;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,l,u,d,h,m,b;let y,k;if("message"in t)y=t.message,k=t.signature;else{const{chain:w,wallet:_,statement:T,options:N}=t;let j;if(Mr())if(typeof _=="object")j=_;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")j=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=_}const C=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=k4(M[0]);let I=(r=N?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const K=await j.request({method:"eth_chainId"});I=HZ(K)}const z={domain:C.host,address:P,statement:T,uri:C.href,version:"1",chainId:I,nonce:(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=YZ(z),k=await j.request({method:"personal_sign",params:[GZ(y),P]})}try{const{data:w,error:_}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:k},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ja});if(_)throw _;if(!w||!w.session||!w.user){const T=new su;return this._returnResult({data:{user:null,session:null},error:T})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(Xe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,a,o,l,u,d,h,m,b,y;let k,w;if("message"in t)k=t.message,w=t.signature;else{const{chain:_,wallet:T,statement:N,options:j}=t;let C;if(Mr())if(typeof T=="object")C=T;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const M=new URL((n=j?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),N?{statement:N}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),w=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=j?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=j?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((m=(h=j?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...j.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(k),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=P}}try{const{data:_,error:T}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:vu(w)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ja});if(T)throw T;if(!_||!_.session||!_.user){const N=new su;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(Xe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await eu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ja});if(await Or(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new su;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,l=await lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Ja}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new su;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Cd(this.storage,this.storageKey));const{error:m}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:h}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new Om("You must provide either an email or phone number.")}catch(l){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ja});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Cd(this.storage,this.storageKey));const d=await lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:IZ});return!((a=d.data)===null||a===void 0)&&a.url&&Mr()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new wi;const{error:i}=await lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await lt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:l}=await lt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new Om("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await eu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<N1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await eu(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=C1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=DZ(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zl}):await this._useSession(async n=>{var r,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Zl})})}catch(n){if(Xe(n))return b4(n)&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new wi;const o=i.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Cd(this.storage,this.storageKey));const{data:d,error:h}=await lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Zl});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new wi;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=O1(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new wi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Mr())throw new Cm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Cm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new OE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new OE("No code detected.");const{data:N,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!a||!l||!o||!d)throw new Cm("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(l);let b=h+m;u&&(b=parseInt(u));const y=b-h;y*1e3<=Yd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const k=b-m;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,h);const{data:w,error:_}=await this._getUser(a);if(_)throw _;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:b,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await eu(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(g4(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=vZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Cd(this.storage,this.storageKey,!0));try{return await lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,l,u,d,h;const{data:m,error:b}=a;if(b)throw b;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await lt(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Mr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:l,token:u,access_token:d,nonce:h}=t,m=await lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Ja}),{data:b,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new su}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:y}))}catch(i){if(await Or(this.storage,`${this.storageKey}-code-verifier`),Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await lt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await SZ(async i=>(i>0&&await _Z(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ja})),(i,a)=>{const o=200*Math.pow(2,i);return a&&ry(a)&&Date.now()+o-r<Yd})}catch(r){if(this._debug(n,"error",r),Xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Mr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await eu(this.storage,this.storageKey);if(i&&this.userStorage){let o=await eu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await qd(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:C1()}else if(i&&!i.user&&!i.user){const o=await eu(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Or(this.storage,this.storageKey+"-user"),await qd(this.storage,this.storageKey,i)):i.user=C1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<N1;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${N1}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),ry(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hx;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new wi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Xe(a)){const o={data:null,error:a};return ry(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Or(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await qd(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=cD(i);await qd(this.storage,this.storageKey,a)}else{const i=cD(n);await qd(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Or(this.storage,this.storageKey),await Or(this.storage,this.storageKey+"-code-verifier"),await Or(this.storage,this.storageKey+"-user"),this.userStorage&&await Or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Yd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Yd}ms, refresh threshold is ${AE} ticks`),i<=AE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Cd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await lt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await lt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?JZ(t.webauthn.credential_response):QZ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ZZ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:XZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=O1(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await lt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new wi})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new wi});const o=await lt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Mr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new wi});const o=await lt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Mr()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await lt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new wi})})}catch(t){if(Xe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await lt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wi})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+dZ>i)return r;const{data:a,error:o}=await lt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:k}=await this.getSession();if(k||!y.session)return this._returnResult({data:null,error:k});r=y.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:u}}=O1(r);n?.allowExpired||OZ(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:a,header:i,signature:o},error:null}}const h=CZ(i.alg),m=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,bZ(`${l}.${u}`)))throw new Oy("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}};Lj.nextInstanceID={};const lX=Pj,cX=Lj,uX=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:lX,AuthApiError:p4,AuthClient:cX,AuthError:pf,AuthImplicitGrantRedirectError:Cm,AuthInvalidCredentialsError:Om,AuthInvalidJwtError:Oy,AuthInvalidTokenResponseError:su,AuthPKCEGrantCodeExchangeError:OE,AuthRetryableFetchError:Ny,AuthSessionMissingError:wi,AuthUnknownError:Vl,AuthWeakPasswordError:CE,CustomAuthError:Xs,GoTrueAdminApi:Pj,GoTrueClient:Lj,NavigatorLockAcquireTimeoutError:_4,SIGN_OUT_SCOPES:iy,isAuthApiError:g4,isAuthError:Xe,isAuthImplicitGrantRedirectError:y4,isAuthRetryableFetchError:ry,isAuthSessionMissingError:b4,isAuthWeakPasswordError:fZ,lockInternals:cu,navigatorLock:S4,processLock:UZ},Symbol.toStringTag,{value:"Module"})),j4=Mp(uX);var bD;function dX(){if(bD)return im;bD=1,Object.defineProperty(im,"__esModule",{value:!0}),im.SupabaseAuthClient=void 0;const e=j4;let t=class extends e.AuthClient{constructor(r){super(r)}};return im.SupabaseAuthClient=t,im}var yD;function vD(){if(yD)return Gg;yD=1,Object.defineProperty(Gg,"__esModule",{value:!0});const e=$B,t=GB(),n=QB,r=nZ,i=iZ(),a=aZ(),o=oZ(),l=dX();class u{constructor(h,m,b){var y,k,w;this.supabaseUrl=h,this.supabaseKey=m;const _=(0,o.validateSupabaseUrl)(h);if(!m)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const T=`sb-${_.hostname.split(".")[0]}-auth-token`,N={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:T}),global:i.DEFAULT_GLOBAL_OPTIONS},j=(0,o.applySettingDefaults)(b??{},N);this.storageKey=(y=j.auth.storageKey)!==null&&y!==void 0?y:"",this.headers=(k=j.global.headers)!==null&&k!==void 0?k:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(C,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((w=j.auth)!==null&&w!==void 0?w:{},this.headers,j.global.fetch),this.fetch=(0,a.fetchWithAuth)(m,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new t.PostgrestClient(new URL("rest/v1",_).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,b?.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,m={},b={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,m,b)}channel(h,m={config:{}}){return this.realtime.channel(h,m)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,m;if(this.accessToken)return await this.accessToken();const{data:b}=await this.auth.getSession();return(m=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:m,detectSessionInUrl:b,storage:y,userStorage:k,storageKey:w,flowType:_,lock:T,debug:N,throwOnError:j},C,M){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),C),storageKey:w,autoRefreshToken:h,persistSession:m,detectSessionInUrl:b,storage:y,userStorage:k,flowType:_,lock:T,debug:N,throwOnError:j,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((m,b)=>{this._handleTokenChanged(m,"CLIENT",b?.access_token)})}_handleTokenChanged(h,m,b){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==b?(this.changedAccessToken=b,this.realtime.setAuth(b)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),m=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Gg.default=u,Gg}var xD;function fX(){return xD||(xD=1,(function(e){var t=ks&&ks.__createBinding||(Object.create?(function(h,m,b,y){y===void 0&&(y=b);var k=Object.getOwnPropertyDescriptor(m,b);(!k||("get"in k?!m.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return m[b]}}),Object.defineProperty(h,y,k)}):(function(h,m,b,y){y===void 0&&(y=b),h[y]=m[b]})),n=ks&&ks.__exportStar||function(h,m){for(var b in h)b!=="default"&&!Object.prototype.hasOwnProperty.call(m,b)&&t(m,h,b)},r=ks&&ks.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(vD());n(j4,e);var a=GB();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var o=$B;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(QB,e);var l=vD();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(l).default}});const u=(h,m,b)=>new i.default(h,m,b);e.createClient=u;function d(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const m=h.match(/^v(\d+)\./);return m?parseInt(m[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ks)),ks}var T4=fX();const A4=Ci(T4),hX=bj({__proto__:null,default:A4},[T4]),{PostgrestError:NMe,FunctionsHttpError:OMe,FunctionsFetchError:CMe,FunctionsRelayError:MMe,FunctionsError:DMe,FunctionRegion:PMe,SupabaseClient:RMe,createClient:mX,GoTrueAdminApi:LMe,GoTrueClient:IMe,AuthAdminApi:$Me,AuthClient:BMe,navigatorLock:zMe,NavigatorLockAcquireTimeoutError:UMe,lockInternals:FMe,processLock:HMe,SIGN_OUT_SCOPES:GMe,AuthError:YMe,AuthApiError:qMe,AuthUnknownError:KMe,CustomAuthError:WMe,AuthSessionMissingError:VMe,AuthInvalidTokenResponseError:ZMe,AuthInvalidCredentialsError:XMe,AuthImplicitGrantRedirectError:JMe,AuthPKCEGrantCodeExchangeError:QMe,AuthRetryableFetchError:eDe,AuthWeakPasswordError:tDe,AuthInvalidJwtError:nDe,isAuthError:rDe,isAuthApiError:iDe,isAuthSessionMissingError:aDe,isAuthImplicitGrantRedirectError:oDe,isAuthRetryableFetchError:sDe,isAuthWeakPasswordError:lDe,RealtimePresence:cDe,RealtimeChannel:uDe,RealtimeClient:dDe,REALTIME_LISTEN_TYPES:fDe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:hDe,REALTIME_PRESENCE_LISTEN_EVENTS:mDe,REALTIME_SUBSCRIBE_STATES:pDe,REALTIME_CHANNEL_STATES:gDe}=A4||hX,pX="https://jouhybyquybxbnqztxum.supabase.co",gX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",bX=!1,Le=mX(pX,gX,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:bX,storage:localStorage}}),N4="settings_v1",DE=()=>{try{typeof window<"u"&&window.localStorage.removeItem(N4)}catch{}},Xl={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",daewoonDisplayBase:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,showEtcShinsal:!0,showRelationBox:!0,showPromptBox:!0,theme:"dark",difficultyMode:!1,sidebarCardsCollapsed:!1,sidebarCardCollapsedMap:{},sidebarCollapseInitDone:!0,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"]},wD=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"],yX=e=>{const t=Array.isArray(e)?e.filter(r=>typeof r=="string"&&wD.includes(r)):[],n=wD.filter(r=>!t.includes(r));return[...t,...n]},sf=e=>({...Xl,...e,sectionOrder:yX(e.sectionOrder)}),vX=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return sf(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return sf(n.settings)}}return sf(e??{})},xX=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};DE();const Jt=Jo()(dB((e,t)=>({settings:Xl,syncing:!1,loaded:!1,setSettings:n=>e({settings:sf(n)}),setKey:(n,r)=>e({settings:sf({...t().settings,[n]:r})}),reset:()=>e({settings:Xl,loaded:!0}),loadFromServer:async n=>{const r=t();if(!r.syncing&&!(!n?.force&&r.loaded))try{e({syncing:!0}),DE();const{data:i,error:a}=await Le.auth.getUser(),o=i?.user??null;if(a||!o){e({settings:Xl,syncing:!1,loaded:!0});return}const l=t();!n?.force&&l.loaded&&l.syncing;const{data:u,error:d}=await Le.from("user_settings").select("payload").eq("user_id",o.id).maybeSingle();if(!u&&!d&&await Le.from("user_settings").upsert({user_id:o.id,payload:{}}),d&&d.code!=="PGRST116"){console.error("loadFromServer(settings) error:",d),e({syncing:!1,loaded:!0});return}if(u?.payload){const h=vX(u.payload),b=u.payload?.sidebarCollapseInitDone===!0;b||(h.sidebarCardsCollapsed=Xl.sidebarCardsCollapsed,h.sidebarCardCollapsedMap={},h.sidebarCollapseInitDone=!0),e({settings:h,syncing:!1,loaded:!0}),(xX(u.payload)||!b)&&await Le.from("user_settings").upsert({user_id:o.id,payload:h,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(i){console.error("loadFromServer(settings) exception:",i),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),DE();const{data:r,error:i}=await Le.auth.getUser(),a=r?.user??null;if(i||!a){e({syncing:!1,loaded:!0,settings:Xl});return}const o=sf(t().settings),{error:l}=await Le.from("user_settings").upsert({user_id:a.id,payload:o,updated_at:new Date().toISOString()});l&&console.error("saveToServer(settings) error:",l),e({syncing:!1,loaded:!0})}catch(r){console.error("saveToServer(settings) exception:",r),e({syncing:!1,loaded:!0})}}}),{name:N4,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function PE(e){const t=ri.indexOf(e);if(t!==-1)return ri[t];const n=ho..indexOf(e);return n!==-1?ri[n]:null}function O4(e){const t=Ti.indexOf(e);if(t!==-1)return Ti[t];const n=ho..indexOf(e);return n!==-1?Ti[n]:null}function _D(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function ii(e,t,n){if(t==="stem"){const r=PE(e);if(!r)return console.warn("Invalid stem:",e),"bg-neutral-700";const i=ri.indexOf(r),a=i>=0?LW[i]:void 0;return _D(a,n)}else{const r=O4(e);if(!r)return console.warn("Invalid branch:",e),"bg-neutral-700";const i=Ti.indexOf(r),a=i>=0?IW[i]:void 0;return _D(a,n)}}function Oi(e,t){const n=PE(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const r=PE(t.stem);if(!r)throw new Error(`getSipSin: invalid stem ${t.stem}`);return zW[n][r]}if(t.branch){const r=O4(t.branch);if(!r)throw new Error(`getSipSin: invalid branch ${t.branch}`);return UW[n][r]}throw new Error("getSipSin: stem or branch required")}const mx={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},px={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function C4({branch:e,dayStem:t,mode:n="all",mapping:r="classic",variant:i="auto",isUnknownTime:a=!1}){const o=(r==="hgc"?px:mx)[e]??[],l=n==="main"?[o[2]]:o,u=i==="white",d=u?"text-white":"text-neutral-800 dark:text-white",h=u?"border-white":"border-neutral-800 dark: border-neutral-200",m=u?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:l.map((b,y)=>b==="(-)"||a?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap`,children:"(-) ()"},y):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap 
            ${n==="main"||y===2?`jeonggi bg-neutral-500/50 ${m} font-bold`:""}`,children:[b," (",Oi(t,{stem:b}),")"]},y))})}const Ei=Jo(e=>({manualHour:null,usePrevDay:!1,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null}),setUsePrevDay:t=>e({usePrevDay:t}),togglePrevDay:()=>e(t=>({usePrevDay:!t.usePrevDay}))})),M4=Object.fromEntries(Object.entries(Jn).map(([e,t])=>[t,e])),D4=Object.fromEntries(Object.entries(ar).map(([e,t])=>[t,e])),wX=new Set(Object.keys(Jn)),_X=new Set(Object.keys(ar)),SX=new Set(["","","","","","","","","",""]),kX=new Set(["","","","","","","","","","","",""]);function Yr(e,t,n){return n===""?t==="stem"?Jn[e]??e:ar[e]??e:t==="stem"?M4[e]??e:D4[e]??e}function SD(e){const t=M4[e]??e;return wX.has(t)?t:""}function EX(e){const t=D4[e]??e;return _X.has(t)?t:""}function gx(e){if(hf.has(e))return e;const t=Jn[e]??e;return hf.has(t)?t:""}function Ij(e){if(Km.has(e))return e;const t=ar[e]??e;return Km.has(t)?t:""}function na(e,t){return t==="stem"?SX.has(e):kX.has(e)}function Vd({label:e,gz:t,dayStem:n,settings:r,unseongText:i,shinsalText:a,hideBranchSipSin:o=!0,hideHiddenStems:l=!1,size:u="sm",variant:d="auto",isUnknownTime:h=!1}){const{manualHour:m}=Ei(),b=h&&!m,y=t.charAt(0),k=t.charAt(1),w=Yr(y,"stem",r.charType),_=Yr(k,"branch",r.charType),T=SD(y),N=EX(k),j=SD(n),C=Ij(k),M=gx(n),P=r.showSipSin?Oi(j,{stem:T}):null,I=!o&&r.showSipSin?Oi(j,{branch:N}):null,z=r.thinEum&&na(y,"stem")?"font-thin":"font-bold",K=r.thinEum&&na(k,"branch")?"font-thin":"font-bold",G={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},H=!l&&!!r.hiddenStem,B=r.hiddenStem==="regular"?"main":"all",q=r.hiddenStemMode==="hgc"?"hgc":"classic",X=d==="white",V=X?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",F=X?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",Z=X?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",Q=X?"text-neutral-500":"text-neutral-400",le=X?"text-neutral-500":"text-neutral-400",{settings:se}=Jt(),W=b?`bg-white ${Z}`:`${ii(T,"stem",se)} ${Z}`,re=b?`bg-white ${Z}`:`${ii(N,"branch",se)} ${Z}`,ee=b?"text-black":se.difficultyMode?se.theme==="light"?"text-neutral-900":"text-black":"text-white",he=b?"text-black":se.difficultyMode?se.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${V}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${F} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[P&&g.jsx("div",{className:`text-[10px] desk:text-xs ${Q} text-nowrap`,children:h&&!m?"-":P}),g.jsx("div",{className:`${G[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${W}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${ee} ${z}`,children:b?"-":w})}),g.jsx("div",{className:`${G[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${re}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${he} ${K}`,children:b?"-":_})}),H&&g.jsx(C4,{branch:C,dayStem:M,mode:B,mapping:q,isUnknownTime:h&&!m&&(e===""||e==="")}),I&&g.jsx("div",{className:`text-[10px] desk:text-xs ${le}`,children:h&&!m?"-":I}),r.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${le} text-nowrap`,children:h&&!m?"-":i||""}),r.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${le} text-nowrap`,children:h&&!m?"-":a||""})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TX=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),kD=e=>{const t=TX(e);return t.charAt(0).toUpperCase()+t.slice(1)},P4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),AX=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...NX,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:P4("lucide",i),...!a&&!AX(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>S.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(e,t)=>{const n=S.forwardRef(({className:r,...i},a)=>S.createElement(OX,{ref:a,iconNode:t,className:P4(`lucide-${jX(kD(e))}`,`lucide-${e}`,r),...i}));return n.displayName=kD(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],MX=Ir("chevron-down",CX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],PX=Ir("chevron-up",DX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],R4=Ir("circle-question-mark",RX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],IX=Ir("circle-x",LX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],BX=Ir("heart-handshake",$X);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],UX=Ir("house",zX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],HX=Ir("info",FX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],L4=Ir("log-in",GX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],qX=Ir("log-out",YX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],WX=Ir("menu",KX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ZX=Ir("plus",VX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JX=Ir("settings",XX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],eJ=Ir("sparkles",QX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],nJ=Ir("square-user",tJ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],I4=Ir("star",rJ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],aJ=Ir("user-plus",iJ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Py=Ir("x",oJ);function sJ(){const[e,t]=S.useState(!1);return g.jsx("div",{className:"z-[60] pointer-events-none mt-2",children:g.jsx("div",{className:"max-w-[700px] w-full mx-auto pb-2 pointer-events-auto",children:g.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white/90 backdrop-blur shadow-sm dark:border-neutral-800 dark:bg-neutral-950/80",children:[g.jsxs("button",{type:"button",onClick:()=>t(n=>!n),className:"w-full flex flex-col desk:flex-row items-center justify-between gap-2 px-3 py-2 cursor-pointer",children:[g.jsx("div",{className:"flex items-center gap-2 min-w-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(HX,{className:"w-4 h-4 text-neutral-600 dark:text-neutral-300 hidden desk:block"}),g.jsx("span",{className:"text-xs text-neutral-700 dark:text-neutral-200",children:"         ."})]})}),g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:e?"":""})]}),e&&g.jsx("div",{className:"px-3 pb-3",children:g.jsxs("div",{className:"text-[12px] leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{className:"mt-1 text-neutral-500 dark:text-neutral-400",children:"  /     ."}),g.jsx("p",{children:g.jsx("a",{href:"https://yavares.tistory.com/1013",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"     !"})})})]})})]})})})}const lJ=new Set(ho.);function cJ(e){return hf.has(e)?e:lJ.has(e)?Jn[e]:""}function uJ(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function dJ({label:e,settings:t,hideBranchSipSin:n=!0}){const r=t.showSipSin,i=!!t.hiddenStem,o=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,l=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[r&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),i&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:o}).map((u,d)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},d))}),l&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function fJ(){const e=Jt(_=>_.settings),[t,n]=S.useState(new Date),[r,i]=S.useState(!0),[a,o]=S.useState("/"),[l,u]=S.useState(!1),[d,h]=S.useState(null);S.useEffect(()=>{if(!r)return;const _=setInterval(()=>n(new Date),1e3);return()=>clearInterval(_)},[r]),S.useEffect(()=>{let _=!0;const T=async()=>{const{data:C}=await Le.auth.getSession(),M=C.session?.user?.id;if(!M){_&&h(null);return}const{data:P,error:I}=await Le.from("user_activity").select("total_active_ms").eq("user_id",M).maybeSingle();if(I){_&&h(null);return}const z=P?.total_active_ms;_&&h(typeof z=="number"?z:null)};T();const N=window.setInterval(()=>void T(),6e4),j=()=>{document.visibilityState==="visible"&&T()};return document.addEventListener("visibilitychange",j),()=>{_=!1,window.clearInterval(N),document.removeEventListener("visibilitychange",j)}},[]);const m=ut(t),b=Ot(t),y=dt(t,a),k=Ni(t,"/"),w=cJ(y.charAt(0));return g.jsx("div",{className:"flex flex-col justify-center items-center pt-20 desk:pt-16 desk:mt-12 w-full h-auto desk:h-[calc(100dvh_-_212px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("div",{className:"mb-3 text-xs desk:text-sm text-neutral-600 dark:text-neutral-300",children:["  :"," ",g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:uJ(d)})]}),g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",r?"":"",") ",pJ(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>u(_=>!_),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                          ${l?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[l?g.jsx(dJ,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(Vd,{label:"",gz:k,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Vd,{label:"",gz:y,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Vd,{label:"",gz:b,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(Vd,{label:"",gz:m,dayStem:w,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"datetime-local",value:hJ(t),disabled:r,onChange:_=>{const T=mJ(_.target.value);T&&n(T)},className:`h-30 rounded px-3 py-1 text-sm transition-colors
                          bg-white dark:bg-neutral-900
                          border border-neutral-300 dark:border-neutral-700
                          text-neutral-900 dark:text-neutral-100
                          focus:outline-none focus:ring-2 focus:ring-amber-500/40
                          ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:r?" ":" "})]})]}),g.jsx(sJ,{})]})})}function hJ(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function mJ(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[r,i,a]=t.split("-").map(Number),[o,l]=n.split(":").map(Number),u=new Date(r,i-1,a,o,l);return Number.isNaN(u.getTime())?null:u}function pJ(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}function gJ({placeholderText:e,value:t}){const[n,r]=S.useState(e),[i,a]=S.useState(!1),[o,l]=S.useState(t??""),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),m=S.useRef(null);return S.useEffect(()=>{t!==void 0&&l(t)},[t]),{btnText:n,setBtnText:r,open:i,setOpen:a,localValue:o,setLocalValue:l,nameRef:u,latRef:d,lonRef:h,triggerBtnRef:m}}var Mm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var bJ=Mm.exports,ED;function yJ(){return ED||(ED=1,(function(e,t){(function(n,r){r(t)})(bJ,(function(n){var r="1.9.4";function i(f){var v,E,D,R;for(E=1,D=arguments.length;E<D;E++){R=arguments[E];for(v in R)f[v]=R[v]}return f}var a=Object.create||(function(){function f(){}return function(v){return f.prototype=v,new f}})();function o(f,v){var E=Array.prototype.slice;if(f.bind)return f.bind.apply(f,E.call(arguments,1));var D=E.call(arguments,2);return function(){return f.apply(v,D.length?D.concat(E.call(arguments)):arguments)}}var l=0;function u(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function d(f,v,E){var D,R,U,ne;return ne=function(){D=!1,R&&(U.apply(E,R),R=!1)},U=function(){D?R=arguments:(f.apply(E,arguments),setTimeout(ne,v),D=!0)},U}function h(f,v,E){var D=v[1],R=v[0],U=D-R;return f===D&&E?f:((f-R)%U+U)%U+R}function m(){return!1}function b(f,v){if(v===!1)return f;var E=Math.pow(10,v===void 0?6:v);return Math.round(f*E)/E}function y(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function k(f){return y(f).split(/\s+/)}function w(f,v){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var E in v)f.options[E]=v[E];return f.options}function _(f,v,E){var D=[];for(var R in f)D.push(encodeURIComponent(E?R.toUpperCase():R)+"="+encodeURIComponent(f[R]));return(!v||v.indexOf("?")===-1?"?":"&")+D.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function N(f,v){return f.replace(T,function(E,D){var R=v[D];if(R===void 0)throw new Error("No value provided for variable "+E);return typeof R=="function"&&(R=R(v)),R})}var j=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function C(f,v){for(var E=0;E<f.length;E++)if(f[E]===v)return E;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var I=0;function z(f){var v=+new Date,E=Math.max(0,16-(v-I));return I=v+E,window.setTimeout(f,E)}var K=window.requestAnimationFrame||P("RequestAnimationFrame")||z,G=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function H(f,v,E){if(E&&K===z)f.call(v);else return K.call(window,o(f,v))}function B(f){f&&G.call(window,f)}var q={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:m,formatNum:b,trim:y,splitWords:k,setOptions:w,getParamString:_,template:N,isArray:j,indexOf:C,emptyImageUrl:M,requestFn:K,cancelFn:G,requestAnimFrame:H,cancelAnimFrame:B};function X(){}X.extend=function(f){var v=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,D=a(E);D.constructor=v,v.prototype=D;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(v[R]=this[R]);return f.statics&&i(v,f.statics),f.includes&&(V(f.includes),i.apply(null,[D].concat(f.includes))),i(D,f),delete D.statics,delete D.includes,D.options&&(D.options=E.options?a(E.options):{},i(D.options,f.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var U=0,ne=D._initHooks.length;U<ne;U++)D._initHooks[U].call(this)}},v},X.include=function(f){var v=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=v,this.mergeOptions(f.options)),this},X.mergeOptions=function(f){return i(this.prototype.options,f),this},X.addInitHook=function(f){var v=Array.prototype.slice.call(arguments,1),E=typeof f=="function"?f:function(){this[f].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function V(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=j(f)?f:[f];for(var v=0;v<f.length;v++)f[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var F={on:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v);else{f=k(f);for(var R=0,U=f.length;R<U;R++)this._on(f[R],v,E)}return this},off:function(f,v,E){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var D in f)this._off(D,f[D],v);else{f=k(f);for(var R=arguments.length===1,U=0,ne=f.length;U<ne;U++)R?this._off(f[U]):this._off(f[U],v,E)}return this},_on:function(f,v,E,D){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(f,v,E)===!1){E===this&&(E=void 0);var R={fn:v,ctx:E};D&&(R.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(R)}},_off:function(f,v,E){var D,R,U;if(this._events&&(D=this._events[f],!!D)){if(arguments.length===1){if(this._firingCount)for(R=0,U=D.length;R<U;R++)D[R].fn=m;delete this._events[f];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ne=this._listens(f,v,E);if(ne!==!1){var fe=D[ne];this._firingCount&&(fe.fn=m,this._events[f]=D=D.slice()),D.splice(ne,1)}}},fire:function(f,v,E){if(!this.listens(f,E))return this;var D=i({},v,{type:f,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var R=this._events[f];if(R){this._firingCount=this._firingCount+1||1;for(var U=0,ne=R.length;U<ne;U++){var fe=R[U],ye=fe.fn;fe.once&&this.off(f,ye,fe.ctx),ye.call(fe.ctx||this,D)}this._firingCount--}}return E&&this._propagateEvent(D),this},listens:function(f,v,E,D){typeof f!="string"&&console.warn('"string" type argument expected');var R=v;typeof v!="function"&&(D=!!v,R=void 0,E=void 0);var U=this._events&&this._events[f];if(U&&U.length&&this._listens(f,R,E)!==!1)return!0;if(D){for(var ne in this._eventParents)if(this._eventParents[ne].listens(f,v,E,D))return!0}return!1},_listens:function(f,v,E){if(!this._events)return!1;var D=this._events[f]||[];if(!v)return!!D.length;E===this&&(E=void 0);for(var R=0,U=D.length;R<U;R++)if(D[R].fn===v&&D[R].ctx===E)return R;return!1},once:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v,!0);else{f=k(f);for(var R=0,U=f.length;R<U;R++)this._on(f[R],v,E,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[u(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[u(f)],this},_propagateEvent:function(f){for(var v in this._eventParents)this._eventParents[v].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};F.addEventListener=F.on,F.removeEventListener=F.clearAllEventListeners=F.off,F.addOneTimeEventListener=F.once,F.fireEvent=F.fire,F.hasEventListeners=F.listens;var Z=X.extend(F);function Q(f,v,E){this.x=E?Math.round(f):f,this.y=E?Math.round(v):v}var le=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(f){return this.clone()._add(se(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(se(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new Q(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new Q(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(f){f=se(f);var v=f.x-this.x,E=f.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(f){return f=se(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=se(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function se(f,v,E){return f instanceof Q?f:j(f)?new Q(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new Q(f.x,f.y):new Q(f,v,E)}function W(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}W.prototype={extend:function(f){var v,E;if(!f)return this;if(f instanceof Q||typeof f[0]=="number"||"x"in f)v=E=se(f);else if(f=re(f),v=f.min,E=f.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(f){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var v,E;return typeof f[0]=="number"||f instanceof Q?f=se(f):f=re(f),f instanceof W?(v=f.min,E=f.max):v=E=f,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(f){f=re(f);var v=this.min,E=this.max,D=f.min,R=f.max,U=R.x>=v.x&&D.x<=E.x,ne=R.y>=v.y&&D.y<=E.y;return U&&ne},overlaps:function(f){f=re(f);var v=this.min,E=this.max,D=f.min,R=f.max,U=R.x>v.x&&D.x<E.x,ne=R.y>v.y&&D.y<E.y;return U&&ne},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var v=this.min,E=this.max,D=Math.abs(v.x-E.x)*f,R=Math.abs(v.y-E.y)*f;return re(se(v.x-D,v.y-R),se(E.x+D,E.y+R))},equals:function(f){return f?(f=re(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function re(f,v){return!f||f instanceof W?f:new W(f,v)}function ee(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}ee.prototype={extend:function(f){var v=this._southWest,E=this._northEast,D,R;if(f instanceof J)D=f,R=f;else if(f instanceof ee){if(D=f._southWest,R=f._northEast,!D||!R)return this}else return f?this.extend(ae(f)||he(f)):this;return!v&&!E?(this._southWest=new J(D.lat,D.lng),this._northEast=new J(R.lat,R.lng)):(v.lat=Math.min(D.lat,v.lat),v.lng=Math.min(D.lng,v.lng),E.lat=Math.max(R.lat,E.lat),E.lng=Math.max(R.lng,E.lng)),this},pad:function(f){var v=this._southWest,E=this._northEast,D=Math.abs(v.lat-E.lat)*f,R=Math.abs(v.lng-E.lng)*f;return new ee(new J(v.lat-D,v.lng-R),new J(E.lat+D,E.lng+R))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof J||"lat"in f?f=ae(f):f=he(f);var v=this._southWest,E=this._northEast,D,R;return f instanceof ee?(D=f.getSouthWest(),R=f.getNorthEast()):D=R=f,D.lat>=v.lat&&R.lat<=E.lat&&D.lng>=v.lng&&R.lng<=E.lng},intersects:function(f){f=he(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),U=R.lat>=v.lat&&D.lat<=E.lat,ne=R.lng>=v.lng&&D.lng<=E.lng;return U&&ne},overlaps:function(f){f=he(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),U=R.lat>v.lat&&D.lat<E.lat,ne=R.lng>v.lng&&D.lng<E.lng;return U&&ne},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,v){return f?(f=he(f),this._southWest.equals(f.getSouthWest(),v)&&this._northEast.equals(f.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(f,v){return f instanceof ee?f:new ee(f,v)}function J(f,v,E){if(isNaN(f)||isNaN(v))throw new Error("Invalid LatLng object: ("+f+", "+v+")");this.lat=+f,this.lng=+v,E!==void 0&&(this.alt=+E)}J.prototype={equals:function(f,v){if(!f)return!1;f=ae(f);var E=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return E<=(v===void 0?1e-9:v)},toString:function(f){return"LatLng("+b(this.lat,f)+", "+b(this.lng,f)+")"},distanceTo:function(f){return pe.distance(this,ae(f))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(f){var v=180*f/40075017,E=v/Math.cos(Math.PI/180*this.lat);return he([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function ae(f,v,E){return f instanceof J?f:j(f)&&typeof f[0]!="object"?f.length===3?new J(f[0],f[1],f[2]):f.length===2?new J(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new J(f.lat,"lng"in f?f.lng:f.lon,f.alt):v===void 0?null:new J(f,v,E)}var me={latLngToPoint:function(f,v){var E=this.projection.project(f),D=this.scale(v);return this.transformation._transform(E,D)},pointToLatLng:function(f,v){var E=this.scale(v),D=this.transformation.untransform(f,E);return this.projection.unproject(D)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(f),D=this.transformation.transform(v.min,E),R=this.transformation.transform(v.max,E);return new W(D,R)},infinite:!1,wrapLatLng:function(f){var v=this.wrapLng?h(f.lng,this.wrapLng,!0):f.lng,E=this.wrapLat?h(f.lat,this.wrapLat,!0):f.lat,D=f.alt;return new J(E,v,D)},wrapLatLngBounds:function(f){var v=f.getCenter(),E=this.wrapLatLng(v),D=v.lat-E.lat,R=v.lng-E.lng;if(D===0&&R===0)return f;var U=f.getSouthWest(),ne=f.getNorthEast(),fe=new J(U.lat-D,U.lng-R),ye=new J(ne.lat-D,ne.lng-R);return new ee(fe,ye)}},pe=i({},me,{wrapLng:[-180,180],R:6371e3,distance:function(f,v){var E=Math.PI/180,D=f.lat*E,R=v.lat*E,U=Math.sin((v.lat-f.lat)*E/2),ne=Math.sin((v.lng-f.lng)*E/2),fe=U*U+Math.cos(D)*Math.cos(R)*ne*ne,ye=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*ye}}),te=6378137,je={R:te,MAX_LATITUDE:85.0511287798,project:function(f){var v=Math.PI/180,E=this.MAX_LATITUDE,D=Math.max(Math.min(E,f.lat),-E),R=Math.sin(D*v);return new Q(this.R*f.lng*v,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(f){var v=180/Math.PI;return new J((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*v,f.x*v/this.R)},bounds:(function(){var f=te*Math.PI;return new W([-f,-f],[f,f])})()};function xe(f,v,E,D){if(j(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=v,this._c=E,this._d=D}xe.prototype={transform:function(f,v){return this._transform(f.clone(),v)},_transform:function(f,v){return v=v||1,f.x=v*(this._a*f.x+this._b),f.y=v*(this._c*f.y+this._d),f},untransform:function(f,v){return v=v||1,new Q((f.x/v-this._b)/this._a,(f.y/v-this._d)/this._c)}};function ue(f,v,E,D){return new xe(f,v,E,D)}var Ee=i({},pe,{code:"EPSG:3857",projection:je,transformation:(function(){var f=.5/(Math.PI*je.R);return ue(f,.5,-f,.5)})()}),Me=i({},Ee,{code:"EPSG:900913"});function Ie(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Ke(f,v){var E="",D,R,U,ne,fe,ye;for(D=0,U=f.length;D<U;D++){for(fe=f[D],R=0,ne=fe.length;R<ne;R++)ye=fe[R],E+=(R?"L":"M")+ye.x+" "+ye.y;E+=v?Ze.svg?"z":"x":""}return E||"M0 0"}var mt=document.documentElement.style,pt="ActiveXObject"in window,De=pt&&!document.addEventListener,ze="msLaunchUri"in navigator&&!("documentMode"in document),Ge=ci("webkit"),oe=ci("android"),Ce=ci("android 2")||ci("android 3"),Ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=oe&&ci("Google")&&Ue<537&&!("AudioNode"in window),xt=!!window.opera,st=!ze&&ci("chrome"),Oe=ci("gecko")&&!Ge&&!xt&&!pt,Fe=!st&&ci("safari"),We=ci("phantom"),bt="OTransition"in mt,At=navigator.platform.indexOf("Win")===0,Nt=pt&&"transition"in mt,Mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ce,Kt="MozPerspective"in mt,rn=!window.L_DISABLE_3D&&(Nt||Mt||Kt)&&!bt&&!We,si=typeof orientation<"u"||ci("mobile"),zn=si&&Ge,Pe=si&&Mt,at=!window.PointerEvent&&window.MSPointerEvent,zt=!!(window.PointerEvent||at),Er="ontouchstart"in window||!!window.TouchEvent,li=!window.L_NO_TOUCH&&(Er||zt),Hu=si&&xt,bc=si&&Oe,Sw=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,g0=(function(){var f=!1;try{var v=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",m,v),window.removeEventListener("testPassiveEventSupport",m,v)}catch{}return f})(),Jf=(function(){return!!document.createElement("canvas").getContext})(),es=!!(document.createElementNS&&Ie("svg").createSVGRect),kw=!!es&&(function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),b0=!es&&(function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var v=f.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),y0=navigator.platform.indexOf("Mac")===0,v0=navigator.platform.indexOf("Linux")===0;function ci(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ze={ie:pt,ielt9:De,edge:ze,webkit:Ge,android:oe,android23:Ce,androidStock:rt,opera:xt,chrome:st,gecko:Oe,safari:Fe,phantom:We,opera12:bt,win:At,ie3d:Nt,webkit3d:Mt,gecko3d:Kt,any3d:rn,mobile:si,mobileWebkit:zn,mobileWebkit3d:Pe,msPointer:at,pointer:zt,touch:li,touchNative:Er,mobileOpera:Hu,mobileGecko:bc,retina:Sw,passiveEvents:g0,canvas:Jf,svg:es,vml:b0,inlineSvg:kw,mac:y0,linux:v0},Qf=Ze.msPointer?"MSPointerDown":"pointerdown",eh=Ze.msPointer?"MSPointerMove":"pointermove",za=Ze.msPointer?"MSPointerUp":"pointerup",Un=Ze.msPointer?"MSPointerCancel":"pointercancel",ur={touchstart:Qf,touchmove:eh,touchend:za,touchcancel:Un},ts={touchstart:sl,touchmove:po,touchend:po,touchcancel:po},mo={},x0=!1;function Ew(f,v,E){return v==="touchstart"&&ol(),ts[v]?(E=ts[v].bind(this,E),f.addEventListener(ur[v],E,!1),E):(console.warn("wrong event specified:",v),m)}function w0(f,v,E){if(!ur[v]){console.warn("wrong event specified:",v);return}f.removeEventListener(ur[v],E,!1)}function yc(f){mo[f.pointerId]=f}function th(f){mo[f.pointerId]&&(mo[f.pointerId]=f)}function ns(f){delete mo[f.pointerId]}function ol(){x0||(document.addEventListener(Qf,yc,!0),document.addEventListener(eh,th,!0),document.addEventListener(za,ns,!0),document.addEventListener(Un,ns,!0),x0=!0)}function po(f,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in mo)v.touches.push(mo[E]);v.changedTouches=[v],f(v)}}function sl(f,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&An(v),po(f,v)}function Fn(f){var v={},E,D;for(D in f)E=f[D],v[D]=E&&E.bind?E.bind(f):E;return f=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var _0=200;function S0(f,v){f.addEventListener("dblclick",v);var E=0,D;function R(U){if(U.detail!==1){D=U.detail;return}if(!(U.pointerType==="mouse"||U.sourceCapabilities&&!U.sourceCapabilities.firesTouchEvents)){var ne=Ec(U);if(!(ne.some(function(ye){return ye instanceof HTMLLabelElement&&ye.attributes.for})&&!ne.some(function(ye){return ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement}))){var fe=Date.now();fe-E<=_0?(D++,D===2&&v(Fn(U))):D=1,E=fe}}}return f.addEventListener("click",R),{dblclick:v,simDblclick:R}}function rs(f,v){f.removeEventListener("dblclick",v.dblclick),f.removeEventListener("click",v.simDblclick)}var go=wc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vc=wc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),nh=vc==="webkitTransition"||vc==="OTransition"?vc+"End":"transitionend";function rh(f){return typeof f=="string"?document.getElementById(f):f}function xc(f,v){var E=f.style[v]||f.currentStyle&&f.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(f,null);E=D?D[v]:null}return E==="auto"?null:E}function wt(f,v,E){var D=document.createElement(f);return D.className=v||"",E&&E.appendChild(D),D}function Wt(f){var v=f.parentNode;v&&v.removeChild(f)}function ui(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function er(f){var v=f.parentNode;v&&v.lastChild!==f&&v.appendChild(f)}function is(f){var v=f.parentNode;v&&v.firstChild!==f&&v.insertBefore(f,v.firstChild)}function ih(f,v){if(f.classList!==void 0)return f.classList.contains(v);var E=Gu(f);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function ft(f,v){if(f.classList!==void 0)for(var E=k(v),D=0,R=E.length;D<R;D++)f.classList.add(E[D]);else if(!ih(f,v)){var U=Gu(f);ll(f,(U?U+" ":"")+v)}}function hn(f,v){f.classList!==void 0?f.classList.remove(v):ll(f,y((" "+Gu(f)+" ").replace(" "+v+" "," ")))}function ll(f,v){f.className.baseVal===void 0?f.className=v:f.className.baseVal=v}function Gu(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function ln(f,v){"opacity"in f.style?f.style.opacity=v:"filter"in f.style&&ah(f,v)}function ah(f,v){var E=!1,D="DXImageTransform.Microsoft.Alpha";try{E=f.filters.item(D)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):f.style.filter+=" progid:"+D+"(opacity="+v+")"}function wc(f){for(var v=document.documentElement.style,E=0;E<f.length;E++)if(f[E]in v)return f[E];return!1}function Ua(f,v,E){var D=v||new Q(0,0);f.style[go]=(Ze.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(E?" scale("+E+")":"")}function Qt(f,v){f._leaflet_pos=v,Ze.any3d?Ua(f,v):(f.style.left=v.x+"px",f.style.top=v.y+"px")}function bo(f){return f._leaflet_pos||new Q(0,0)}var cl,oa,oh;if("onselectstart"in document)cl=function(){ct(window,"selectstart",An)},oa=function(){Ut(window,"selectstart",An)};else{var ul=wc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cl=function(){if(ul){var f=document.documentElement.style;oh=f[ul],f[ul]="none"}},oa=function(){ul&&(document.documentElement.style[ul]=oh,oh=void 0)}}function Yu(){ct(window,"dragstart",An)}function _c(){Ut(window,"dragstart",An)}var qu,sh;function dl(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(di(),qu=f,sh=f.style.outlineStyle,f.style.outlineStyle="none",ct(window,"keydown",di))}function di(){qu&&(qu.style.outlineStyle=sh,qu=void 0,sh=void 0,Ut(window,"keydown",di))}function Ku(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function Sc(f){var v=f.getBoundingClientRect();return{x:v.width/f.offsetWidth||1,y:v.height/f.offsetHeight||1,boundingClientRect:v}}var fl={__proto__:null,TRANSFORM:go,TRANSITION:vc,TRANSITION_END:nh,get:rh,getStyle:xc,create:wt,remove:Wt,empty:ui,toFront:er,toBack:is,hasClass:ih,addClass:ft,removeClass:hn,setClass:ll,getClass:Gu,setOpacity:ln,testProp:wc,setTransform:Ua,setPosition:Qt,getPosition:bo,get disableTextSelection(){return cl},get enableTextSelection(){return oa},disableImageDrag:Yu,enableImageDrag:_c,preventOutline:dl,restoreOutline:di,getSizedParentNode:Ku,getScale:Sc};function ct(f,v,E,D){if(v&&typeof v=="object")for(var R in v)Ri(f,R,v[R],E);else{v=k(v);for(var U=0,ne=v.length;U<ne;U++)Ri(f,v[U],E,D)}return this}var Pi="_leaflet_events";function Ut(f,v,E,D){if(arguments.length===1)lh(f),delete f[Pi];else if(v&&typeof v=="object")for(var R in v)kc(f,R,v[R],E);else if(v=k(v),arguments.length===2)lh(f,function(fe){return C(v,fe)!==-1});else for(var U=0,ne=v.length;U<ne;U++)kc(f,v[U],E,D);return this}function lh(f,v){for(var E in f[Pi]){var D=E.split(/\d/)[0];(!v||v(D))&&kc(f,D,null,null,E)}}var as={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ri(f,v,E,D){var R=v+u(E)+(D?"_"+u(D):"");if(f[Pi]&&f[Pi][R])return this;var U=function(fe){return E.call(D||f,fe||window.event)},ne=U;!Ze.touchNative&&Ze.pointer&&v.indexOf("touch")===0?U=Ew(f,v,U):Ze.touch&&v==="dblclick"?U=S0(f,U):"addEventListener"in f?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?f.addEventListener(as[v]||v,U,Ze.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(U=function(fe){fe=fe||window.event,Fa(f,fe)&&ne(fe)},f.addEventListener(as[v],U,!1)):f.addEventListener(v,ne,!1):f.attachEvent("on"+v,U),f[Pi]=f[Pi]||{},f[Pi][R]=U}function kc(f,v,E,D,R){R=R||v+u(E)+(D?"_"+u(D):"");var U=f[Pi]&&f[Pi][R];if(!U)return this;!Ze.touchNative&&Ze.pointer&&v.indexOf("touch")===0?w0(f,v,U):Ze.touch&&v==="dblclick"?rs(f,U):"removeEventListener"in f?f.removeEventListener(as[v]||v,U,!1):f.detachEvent("on"+v,U),f[Pi][R]=null}function Li(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function sa(f){return Ri(f,"wheel",Li),this}function os(f){return ct(f,"mousedown touchstart dblclick contextmenu",Li),f._leaflet_disable_click=!0,this}function An(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function yo(f){return An(f),Li(f),this}function Ec(f){if(f.composedPath)return f.composedPath();for(var v=[],E=f.target;E;)v.push(E),E=E.parentNode;return v}function jc(f,v){if(!v)return new Q(f.clientX,f.clientY);var E=Sc(v),D=E.boundingClientRect;return new Q((f.clientX-D.left)/E.x-v.clientLeft,(f.clientY-D.top)/E.y-v.clientTop)}var k0=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function jr(f){return Ze.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/k0:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Fa(f,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==f;)E=E.parentNode}catch{return!1}return E!==f}var Wu={__proto__:null,on:ct,off:Ut,stopPropagation:Li,disableScrollPropagation:sa,disableClickPropagation:os,preventDefault:An,stop:yo,getPropagationPath:Ec,getMousePosition:jc,getWheelDelta:jr,isExternalTarget:Fa,addListener:ct,removeListener:Ut},hl=Z.extend({run:function(f,v,E,D){this.stop(),this._el=f,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=bo(f),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(f){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),f):(this._runFrame(1),this._complete())},_runFrame:function(f,v){var E=this._startPos.add(this._offset.multiplyBy(f));v&&E._round(),Qt(this._el,E),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Et=Z.extend({options:{crs:Ee,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,v){v=w(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(ae(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vc&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ct(this._proxy,nh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),f=this._limitCenter(ae(f),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var D=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,v,E.zoom):this._tryAnimatedPan(f,E.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(f,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(f,v){return this._loaded?this.setView(this.getCenter(),f,{zoom:v}):(this._zoom=f,this)},zoomIn:function(f,v){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,v)},zoomOut:function(f,v){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,v)},setZoomAround:function(f,v,E){var D=this.getZoomScale(v),R=this.getSize().divideBy(2),U=f instanceof Q?f:this.latLngToContainerPoint(f),ne=U.subtract(R).multiplyBy(1-1/D),fe=this.containerPointToLatLng(R.add(ne));return this.setView(fe,v,{zoom:E})},_getBoundsCenterZoom:function(f,v){v=v||{},f=f.getBounds?f.getBounds():he(f);var E=se(v.paddingTopLeft||v.padding||[0,0]),D=se(v.paddingBottomRight||v.padding||[0,0]),R=this.getBoundsZoom(f,!1,E.add(D));if(R=typeof v.maxZoom=="number"?Math.min(v.maxZoom,R):R,R===1/0)return{center:f.getCenter(),zoom:R};var U=D.subtract(E).divideBy(2),ne=this.project(f.getSouthWest(),R),fe=this.project(f.getNorthEast(),R),ye=this.unproject(ne.add(fe).divideBy(2).add(U),R);return{center:ye,zoom:R}},fitBounds:function(f,v){if(f=he(f),!f.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(f,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,v){return this.setView(f,this._zoom,{pan:v})},panBy:function(f,v){if(f=se(f).round(),v=v||{},!f.x&&!f.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new hl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){ft(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,v,E){if(E=E||{},E.animate===!1||!Ze.any3d)return this.setView(f,v,E);this._stop();var D=this.project(this.getCenter()),R=this.project(f),U=this.getSize(),ne=this._zoom;f=ae(f),v=v===void 0?ne:v;var fe=Math.max(U.x,U.y),ye=fe*this.getZoomScale(ne,v),Ae=R.distanceTo(D)||1,Be=1.42,Je=Be*Be;function yt(Sn){var qa=Sn?-1:1,us=Sn?ye:fe,Sh=ye*ye-fe*fe+qa*Je*Je*Ae*Ae,Fc=2*us*Je*Ae,Hc=Sh/Fc,To=Math.sqrt(Hc*Hc+1)-Hc,Ka=To<1e-9?-18:Math.log(To);return Ka}function tr(Sn){return(Math.exp(Sn)-Math.exp(-Sn))/2}function Nn(Sn){return(Math.exp(Sn)+Math.exp(-Sn))/2}function Zr(Sn){return tr(Sn)/Nn(Sn)}var Dt=yt(0);function Pt(Sn){return fe*(Nn(Dt)/Nn(Dt+Be*Sn))}function _t(Sn){return fe*(Nn(Dt)*Zr(Dt+Be*Sn)-tr(Dt))/Je}function Eo(Sn){return 1-Math.pow(1-Sn,1.5)}var pi=Date.now(),ld=(yt(1)-Dt)/Be,jo=E.duration?1e3*E.duration:1e3*ld*.8;function _h(){var Sn=(Date.now()-pi)/jo,qa=Eo(Sn)*ld;Sn<=1?(this._flyToFrame=H(_h,this),this._move(this.unproject(D.add(R.subtract(D).multiplyBy(_t(qa)/Ae)),ne),this.getScaleZoom(fe/Pt(qa),ne),{flyTo:!0})):this._move(f,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),_h.call(this),this},flyToBounds:function(f,v){var E=this._getBoundsCenterZoom(f,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(f){return f=he(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var v=this.options.minZoom;return this.options.minZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var v=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,v){this._enforcingBounds=!0;var E=this.getCenter(),D=this._limitCenter(E,this._zoom,he(f));return E.equals(D)||this.panTo(D,v),this._enforcingBounds=!1,this},panInside:function(f,v){v=v||{};var E=se(v.paddingTopLeft||v.padding||[0,0]),D=se(v.paddingBottomRight||v.padding||[0,0]),R=this.project(this.getCenter()),U=this.project(f),ne=this.getPixelBounds(),fe=re([ne.min.add(E),ne.max.subtract(D)]),ye=fe.getSize();if(!fe.contains(U)){this._enforcingBounds=!0;var Ae=U.subtract(fe.getCenter()),Be=fe.extend(U).getSize().subtract(ye);R.x+=Ae.x<0?-Be.x:Be.x,R.y+=Ae.y<0?-Be.y:Be.y,this.panTo(this.unproject(R),v),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),D=v.divideBy(2).round(),R=E.divideBy(2).round(),U=D.subtract(R);return!U.x&&!U.y?this:(f.animate&&f.pan?this.panBy(U):(f.pan&&this._rawPanBy(U),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,f):navigator.geolocation.getCurrentPosition(v,E,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var v=f.code,E=f.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var v=f.coords.latitude,E=f.coords.longitude,D=new J(v,E),R=D.toBounds(f.coords.accuracy*2),U=this._locateOptions;if(U.setView){var ne=this.getBoundsZoom(R);this.setView(D,U.maxZoom?Math.min(ne,U.maxZoom):ne)}var fe={latlng:D,bounds:R,timestamp:f.timestamp};for(var ye in f.coords)typeof f.coords[ye]=="number"&&(fe[ye]=f.coords[ye]);this.fire("locationfound",fe)}},addHandler:function(f,v){if(!v)return this;var E=this[f]=new v(this);return this._handlers.push(E),this.options[f]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Wt(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,v){var E="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),D=wt("div",E,v||this._mapPane);return f&&(this._panes[f]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),v=this.unproject(f.getBottomLeft()),E=this.unproject(f.getTopRight());return new ee(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,v,E){f=he(f),E=se(E||[0,0]);var D=this.getZoom()||0,R=this.getMinZoom(),U=this.getMaxZoom(),ne=f.getNorthWest(),fe=f.getSouthEast(),ye=this.getSize().subtract(E),Ae=re(this.project(fe,D),this.project(ne,D)).getSize(),Be=Ze.any3d?this.options.zoomSnap:1,Je=ye.x/Ae.x,yt=ye.y/Ae.y,tr=v?Math.max(Je,yt):Math.min(Je,yt);return D=this.getScaleZoom(tr,D),Be&&(D=Math.round(D/(Be/100))*(Be/100),D=v?Math.ceil(D/Be)*Be:Math.floor(D/Be)*Be),Math.max(R,Math.min(U,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,v){var E=this._getTopLeftPoint(f,v);return new W(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(f)/E.scale(v)},getScaleZoom:function(f,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var D=E.zoom(f*E.scale(v));return isNaN(D)?1/0:D},project:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(ae(f),v)},unproject:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(se(f),v)},layerPointToLatLng:function(f){var v=se(f).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(f){var v=this.project(ae(f))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(ae(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(he(f))},distance:function(f,v){return this.options.crs.distance(ae(f),ae(v))},containerPointToLayerPoint:function(f){return se(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return se(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var v=this.containerPointToLayerPoint(se(f));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(f)))},mouseEventToContainerPoint:function(f){return jc(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var v=this._container=rh(f);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ct(v,"scroll",this._onScroll,this),this._containerId=u(v)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,ft(f,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=xc(f,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qt(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ft(f.markerPane,"leaflet-zoom-hide"),ft(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,v,E){Qt(this._mapPane,new Q(0,0));var D=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var R=this._zoom!==v;this._moveStart(R,E)._move(f,v)._moveEnd(R),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(f,v){return f&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(f,v,E,D){v===void 0&&(v=this._zoom);var R=this._zoom!==v;return this._zoom=v,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),D?E&&E.pinch&&this.fire("zoom",E):((R||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Qt(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[u(this._container)]=this;var v=f?Ut:ct;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,v){for(var E=[],D,R=v==="mouseout"||v==="mouseover",U=f.target||f.srcElement,ne=!1;U;){if(D=this._targets[u(U)],D&&(v==="click"||v==="preclick")&&this._draggableMoved(D)){ne=!0;break}if(D&&D.listens(v,!0)&&(R&&!Fa(U,f)||(E.push(D),R))||U===this._container)break;U=U.parentNode}return!E.length&&!ne&&!R&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var v=f.target||f.srcElement;if(!(!this._loaded||v._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(v))){var E=f.type;E==="mousedown"&&dl(v),this._fireDOMEvent(f,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,v,E){if(f.type==="click"){var D=i({},f);D.type="preclick",this._fireDOMEvent(D,D.type,E)}var R=this._findEventTargets(f,v);if(E){for(var U=[],ne=0;ne<E.length;ne++)E[ne].listens(v,!0)&&U.push(E[ne]);R=U.concat(R)}if(R.length){v==="contextmenu"&&An(f);var fe=R[0],ye={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var Ae=fe.getLatLng&&(!fe._radius||fe._radius<=10);ye.containerPoint=Ae?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(f),ye.layerPoint=this.containerPointToLayerPoint(ye.containerPoint),ye.latlng=Ae?fe.getLatLng():this.layerPointToLatLng(ye.layerPoint)}for(ne=0;ne<R.length;ne++)if(R[ne].fire(v,ye,!0),ye.originalEvent._stopped||R[ne].options.bubblingMouseEvents===!1&&C(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,v=this._handlers.length;f<v;f++)this._handlers[f].disable()},whenReady:function(f,v){return this._loaded?f.call(v||this,{target:this}):this.on("load",f,v),this},_getMapPanePos:function(){return bo(this._mapPane)||new Q(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,v){var E=f&&v!==void 0?this._getNewPixelOrigin(f,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,v){var E=this.getSize()._divideBy(2);return this.project(f,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return this.project(f,v)._subtract(D)},_latLngBoundsToNewLayerBounds:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return re([this.project(f.getSouthWest(),v)._subtract(D),this.project(f.getNorthWest(),v)._subtract(D),this.project(f.getSouthEast(),v)._subtract(D),this.project(f.getNorthEast(),v)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,v,E){if(!E)return f;var D=this.project(f,v),R=this.getSize().divideBy(2),U=new W(D.subtract(R),D.add(R)),ne=this._getBoundsOffset(U,E,v);return Math.abs(ne.x)<=1&&Math.abs(ne.y)<=1?f:this.unproject(D.add(ne),v)},_limitOffset:function(f,v){if(!v)return f;var E=this.getPixelBounds(),D=new W(E.min.add(f),E.max.add(f));return f.add(this._getBoundsOffset(D,v))},_getBoundsOffset:function(f,v,E){var D=re(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),R=D.min.subtract(f.min),U=D.max.subtract(f.max),ne=this._rebound(R.x,-U.x),fe=this._rebound(R.y,-U.y);return new Q(ne,fe)},_rebound:function(f,v){return f+v>0?Math.round(f-v)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(v))},_limitZoom:function(f){var v=this.getMinZoom(),E=this.getMaxZoom(),D=Ze.any3d?this.options.zoomSnap:1;return D&&(f=Math.round(f/D)*D),Math.max(v,Math.min(E,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){hn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,v){var E=this._getCenterOffset(f)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var f=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(v){var E=go,D=this._proxy.style[E];Ua(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),D===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),v=this.getZoom();Ua(this._proxy,this.project(f,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(v),R=this._getCenterOffset(f)._divideBy(1-1/D);return E.animate!==!0&&!this.getSize().contains(R)?!1:(H(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(f,v,!0)},this),!0)},_animateZoom:function(f,v,E,D){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=v,ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:v,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&hn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ch(f,v){return new Et(f,v)}var Vr=X.extend({options:{position:"topright"},initialize:function(f){w(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var v=this._map;return v&&v.removeControl(this),this.options.position=f,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var v=this._container=this.onAdd(f),E=this.getPosition(),D=f._controlCorners[E];return ft(v,"leaflet-control"),E.indexOf("bottom")!==-1?D.insertBefore(v,D.firstChild):D.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Ha=function(f){return new Vr(f)};Et.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},v="leaflet-",E=this._controlContainer=wt("div",v+"control-container",this._container);function D(R,U){var ne=v+R+" "+v+U;f[R+U]=wt("div",ne,E)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Wt(this._controlCorners[f]);Wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Tc=Vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,v,E,D){return E<D?-1:D<E?1:0}},initialize:function(f,v,E){w(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in f)this._addLayer(f[D],D);for(D in v)this._addLayer(v[D],D,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Vr.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,v){return this._addLayer(f,v),this._map?this._update():this},addOverlay:function(f,v){return this._addLayer(f,v,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var v=this._getLayer(u(f));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(ft(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):hn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return hn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",v=this._container=wt("div",f),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),os(v),sa(v);var D=this._section=wt("section",f+"-list");E&&(this._map.on("click",this.collapse,this),ct(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=wt("a",f+"-toggle",v);R.href="#",R.title="Layers",R.setAttribute("role","button"),ct(R,{keydown:function(U){U.keyCode===13&&this._expandSafely()},click:function(U){An(U),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=wt("div",f+"-base",D),this._separator=wt("div",f+"-separator",D),this._overlaysList=wt("div",f+"-overlays",D),v.appendChild(D)},_getLayer:function(f){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&u(this._layers[v].layer)===f)return this._layers[v]},_addLayer:function(f,v,E){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(D,R){return this.options.sortFunction(D.layer,R.layer,D.name,R.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ui(this._baseLayersList),ui(this._overlaysList),this._layerControlInputs=[];var f,v,E,D,R=0;for(E=0;E<this._layers.length;E++)D=this._layers[E],this._addItem(D),v=v||D.overlay,f=f||!D.overlay,R+=D.overlay?0:1;return this.options.hideSingleBase&&(f=f&&R>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=v&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var v=this._getLayer(u(f.target)),E=v.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(f,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(v?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=E,D.firstChild},_addItem:function(f){var v=document.createElement("label"),E=this._map.hasLayer(f.layer),D;f.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=E):D=this._createRadioElement("leaflet-base-layers_"+u(this),E),this._layerControlInputs.push(D),D.layerId=u(f.layer),ct(D,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+f.name;var U=document.createElement("span");v.appendChild(U),U.appendChild(D),U.appendChild(R);var ne=f.overlay?this._overlaysList:this._baseLayersList;return ne.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,v,E,D=[],R=[];this._handlingClick=!0;for(var U=f.length-1;U>=0;U--)v=f[U],E=this._getLayer(v.layerId).layer,v.checked?D.push(E):v.checked||R.push(E);for(U=0;U<R.length;U++)this._map.hasLayer(R[U])&&this._map.removeLayer(R[U]);for(U=0;U<D.length;U++)this._map.hasLayer(D[U])||this._map.addLayer(D[U]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,v,E,D=this._map.getZoom(),R=f.length-1;R>=0;R--)v=f[R],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&D<E.options.minZoom||E.options.maxZoom!==void 0&&D>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,ct(f,"click",An),this.expand();var v=this;setTimeout(function(){Ut(f,"click",An),v._preventClick=!1})}}),E0=function(f,v,E){return new Tc(f,v,E)},uh=Vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var v="leaflet-control-zoom",E=wt("div",v+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,v,E,D,R){var U=wt("a",E,D);return U.innerHTML=f,U.href="#",U.title=v,U.setAttribute("role","button"),U.setAttribute("aria-label",v),os(U),ct(U,"click",yo),ct(U,"click",R,this),ct(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var f=this._map,v="leaflet-disabled";hn(this._zoomInButton,v),hn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(ft(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(ft(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new uh,this.addControl(this.zoomControl))});var jw=function(f){return new uh(f)},j0=Vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var v="leaflet-control-scale",E=wt("div",v),D=this.options;return this._addScales(D,v+"-line",E),f.on(D.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),E},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,v,E){f.metric&&(this._mScale=wt("div",v,E)),f.imperial&&(this._iScale=wt("div",v,E))},_update:function(){var f=this._map,v=f.getSize().y/2,E=f.distance(f.containerPointToLatLng([0,v]),f.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var v=this._getRoundNum(f),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/f)},_updateImperial:function(f){var v=f*3.2808399,E,D,R;v>5280?(E=v/5280,D=this._getRoundNum(E),this._updateScale(this._iScale,D+" mi",D/E)):(R=this._getRoundNum(v),this._updateScale(this._iScale,R+" ft",R/v))},_updateScale:function(f,v,E){f.style.width=Math.round(this.options.maxWidth*E)+"px",f.innerHTML=v},_getRoundNum:function(f){var v=Math.pow(10,(Math.floor(f)+"").length-1),E=f/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),dh=function(f){return new j0(f)},Tw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fh=Vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?Tw+" ":"")+"Leaflet</a>"},initialize:function(f){w(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),os(this._container);for(var v in f._layers)f._layers[v].getAttribution&&this.addAttribution(f._layers[v].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var v in this._attributions)this._attributions[v]&&f.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),f.length&&E.push(f.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new fh().addTo(this)});var Aw=function(f){return new fh(f)};Vr.Layers=Tc,Vr.Zoom=uh,Vr.Scale=j0,Vr.Attribution=fh,Ha.layers=E0,Ha.zoom=jw,Ha.scale=dh,Ha.attribution=Aw;var la=X.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});la.addTo=function(f,v){return f.addHandler(v,this),this};var Nw={Events:F},hh=Ze.touch?"touchstart mousedown":"mousedown",vo=Z.extend({options:{clickTolerance:3},initialize:function(f,v,E,D){w(this,D),this._element=f,this._dragStartTarget=v||f,this._preventOutline=E},enable:function(){this._enabled||(ct(this._dragStartTarget,hh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vo._dragging===this&&this.finishDrag(!0),Ut(this._dragStartTarget,hh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!ih(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){vo._dragging===this&&this.finishDrag();return}if(!(vo._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(vo._dragging=this,this._preventOutline&&dl(this._element),Yu(),cl(),!this._moving)){this.fire("down");var v=f.touches?f.touches[0]:f,E=Ku(this._element);this._startPoint=new Q(v.clientX,v.clientY),this._startPos=bo(this._element),this._parentScale=Sc(E);var D=f.type==="mousedown";ct(document,D?"mousemove":"touchmove",this._onMove,this),ct(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var v=f.touches&&f.touches.length===1?f.touches[0]:f,E=new Q(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,An(f),this._moved||(this.fire("dragstart"),this._moved=!0,ft(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Qt(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){hn(document.body,"leaflet-dragging"),this._lastTarget&&(hn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ut(document,"mousemove touchmove",this._onMove,this),Ut(document,"mouseup touchend touchcancel",this._onUp,this),_c(),oa();var v=this._moved&&this._moving;this._moving=!1,vo._dragging=!1,v&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function T0(f,v,E){var D,R=[1,4,2,8],U,ne,fe,ye,Ae,Be,Je,yt;for(U=0,Be=f.length;U<Be;U++)f[U]._code=ss(f[U],v);for(fe=0;fe<4;fe++){for(Je=R[fe],D=[],U=0,Be=f.length,ne=Be-1;U<Be;ne=U++)ye=f[U],Ae=f[ne],ye._code&Je?Ae._code&Je||(yt=Vu(Ae,ye,Je,v,E),yt._code=ss(yt,v),D.push(yt)):(Ae._code&Je&&(yt=Vu(Ae,ye,Je,v,E),yt._code=ss(yt,v),D.push(yt)),D.push(ye));f=D}return f}function A0(f,v){var E,D,R,U,ne,fe,ye,Ae,Be;if(!f||f.length===0)throw new Error("latlngs not passed");fi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Je=ae([0,0]),yt=he(f),tr=yt.getNorthWest().distanceTo(yt.getSouthWest())*yt.getNorthEast().distanceTo(yt.getNorthWest());tr<1700&&(Je=mh(f));var Nn=f.length,Zr=[];for(E=0;E<Nn;E++){var Dt=ae(f[E]);Zr.push(v.project(ae([Dt.lat-Je.lat,Dt.lng-Je.lng])))}for(fe=ye=Ae=0,E=0,D=Nn-1;E<Nn;D=E++)R=Zr[E],U=Zr[D],ne=R.y*U.x-U.y*R.x,ye+=(R.x+U.x)*ne,Ae+=(R.y+U.y)*ne,fe+=ne*3;fe===0?Be=Zr[0]:Be=[ye/fe,Ae/fe];var Pt=v.unproject(se(Be));return ae([Pt.lat+Je.lat,Pt.lng+Je.lng])}function mh(f){for(var v=0,E=0,D=0,R=0;R<f.length;R++){var U=ae(f[R]);v+=U.lat,E+=U.lng,D++}return ae([v/D,E/D])}var ph={__proto__:null,clipPolygon:T0,polygonCenter:A0,centroid:mh};function N0(f,v){if(!v||!f.length)return f.slice();var E=v*v;return f=Cw(f,E),f=C0(f,E),f}function O0(f,v,E){return Math.sqrt(Ac(f,v,E,!0))}function Ow(f,v,E){return Ac(f,v,E)}function C0(f,v){var E=f.length,D=typeof Uint8Array<"u"?Uint8Array:Array,R=new D(E);R[0]=R[E-1]=1,gh(f,R,v,0,E-1);var U,ne=[];for(U=0;U<E;U++)R[U]&&ne.push(f[U]);return ne}function gh(f,v,E,D,R){var U=0,ne,fe,ye;for(fe=D+1;fe<=R-1;fe++)ye=Ac(f[fe],f[D],f[R],!0),ye>U&&(ne=fe,U=ye);U>E&&(v[ne]=1,gh(f,v,E,D,ne),gh(f,v,E,ne,R))}function Cw(f,v){for(var E=[f[0]],D=1,R=0,U=f.length;D<U;D++)Mw(f[D],f[R])>v&&(E.push(f[D]),R=D);return R<U-1&&E.push(f[U-1]),E}var M0;function D0(f,v,E,D,R){var U=D?M0:ss(f,E),ne=ss(v,E),fe,ye,Ae;for(M0=ne;;){if(!(U|ne))return[f,v];if(U&ne)return!1;fe=U||ne,ye=Vu(f,v,fe,E,R),Ae=ss(ye,E),fe===U?(f=ye,U=Ae):(v=ye,ne=Ae)}}function Vu(f,v,E,D,R){var U=v.x-f.x,ne=v.y-f.y,fe=D.min,ye=D.max,Ae,Be;return E&8?(Ae=f.x+U*(ye.y-f.y)/ne,Be=ye.y):E&4?(Ae=f.x+U*(fe.y-f.y)/ne,Be=fe.y):E&2?(Ae=ye.x,Be=f.y+ne*(ye.x-f.x)/U):E&1&&(Ae=fe.x,Be=f.y+ne*(fe.x-f.x)/U),new Q(Ae,Be,R)}function ss(f,v){var E=0;return f.x<v.min.x?E|=1:f.x>v.max.x&&(E|=2),f.y<v.min.y?E|=4:f.y>v.max.y&&(E|=8),E}function Mw(f,v){var E=v.x-f.x,D=v.y-f.y;return E*E+D*D}function Ac(f,v,E,D){var R=v.x,U=v.y,ne=E.x-R,fe=E.y-U,ye=ne*ne+fe*fe,Ae;return ye>0&&(Ae=((f.x-R)*ne+(f.y-U)*fe)/ye,Ae>1?(R=E.x,U=E.y):Ae>0&&(R+=ne*Ae,U+=fe*Ae)),ne=f.x-R,fe=f.y-U,D?ne*ne+fe*fe:new Q(R,U)}function fi(f){return!j(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function Zu(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(f)}function ml(f,v){var E,D,R,U,ne,fe,ye,Ae;if(!f||f.length===0)throw new Error("latlngs not passed");fi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Be=ae([0,0]),Je=he(f),yt=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());yt<1700&&(Be=mh(f));var tr=f.length,Nn=[];for(E=0;E<tr;E++){var Zr=ae(f[E]);Nn.push(v.project(ae([Zr.lat-Be.lat,Zr.lng-Be.lng])))}for(E=0,D=0;E<tr-1;E++)D+=Nn[E].distanceTo(Nn[E+1])/2;if(D===0)Ae=Nn[0];else for(E=0,U=0;E<tr-1;E++)if(ne=Nn[E],fe=Nn[E+1],R=ne.distanceTo(fe),U+=R,U>D){ye=(U-D)/R,Ae=[fe.x-ye*(fe.x-ne.x),fe.y-ye*(fe.y-ne.y)];break}var Dt=v.unproject(se(Ae));return ae([Dt.lat+Be.lat,Dt.lng+Be.lng])}var Dw={__proto__:null,simplify:N0,pointToSegmentDistance:O0,closestPointOnSegment:Ow,clipSegment:D0,_getEdgeIntersection:Vu,_getBitCode:ss,_sqClosestPointOnSegment:Ac,isFlat:fi,_flat:Zu,polylineCenter:ml},Xu={project:function(f){return new Q(f.lng,f.lat)},unproject:function(f){return new J(f.y,f.x)},bounds:new W([-180,-90],[180,90])},Ju={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var v=Math.PI/180,E=this.R,D=f.lat*v,R=this.R_MINOR/E,U=Math.sqrt(1-R*R),ne=U*Math.sin(D),fe=Math.tan(Math.PI/4-D/2)/Math.pow((1-ne)/(1+ne),U/2);return D=-E*Math.log(Math.max(fe,1e-10)),new Q(f.lng*v*E,D)},unproject:function(f){for(var v=180/Math.PI,E=this.R,D=this.R_MINOR/E,R=Math.sqrt(1-D*D),U=Math.exp(-f.y/E),ne=Math.PI/2-2*Math.atan(U),fe=0,ye=.1,Ae;fe<15&&Math.abs(ye)>1e-7;fe++)Ae=R*Math.sin(ne),Ae=Math.pow((1-Ae)/(1+Ae),R/2),ye=Math.PI/2-2*Math.atan(U*Ae)-ne,ne+=ye;return new J(ne*v,f.x*v/E)}},P0={__proto__:null,LonLat:Xu,Mercator:Ju,SphericalMercator:je},R0=i({},pe,{code:"EPSG:3395",projection:Ju,transformation:(function(){var f=.5/(Math.PI*Ju.R);return ue(f,.5,-f,.5)})()}),bh=i({},pe,{code:"EPSG:4326",projection:Xu,transformation:ue(1/180,1,-1/180,.5)}),pl=i({},me,{projection:Xu,transformation:ue(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,v){var E=v.lng-f.lng,D=v.lat-f.lat;return Math.sqrt(E*E+D*D)},infinite:!0});me.Earth=pe,me.EPSG3395=R0,me.EPSG3857=Ee,me.EPSG900913=Me,me.EPSG4326=bh,me.Simple=pl;var Ii=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[u(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[u(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var v=f.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var v=u(f);return this._layers[v]?this:(this._layers[v]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var v=u(f);return this._layers[v]?(this._loaded&&f.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return u(f)in this._layers},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},_addLayers:function(f){f=f?j(f)?f:[f]:[];for(var v=0,E=f.length;v<E;v++)this.addLayer(f[v])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[u(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var v=u(f);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,v=-1/0,E=this._getZoomSpan();for(var D in this._zoomBoundLayers){var R=this._zoomBoundLayers[D].options;f=R.minZoom===void 0?f:Math.min(f,R.minZoom),v=R.maxZoom===void 0?v:Math.max(v,R.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=f===1/0?void 0:f,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gl=Ii.extend({initialize:function(f,v){w(this,v),this._layers={};var E,D;if(f)for(E=0,D=f.length;E<D;E++)this.addLayer(f[E])},addLayer:function(f){var v=this.getLayerId(f);return this._layers[v]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var v=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(f){var v=typeof f=="number"?f:this.getLayerId(f);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var v=Array.prototype.slice.call(arguments,1),E,D;for(E in this._layers)D=this._layers[E],D[f]&&D[f].apply(D,v);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return u(f)}}),Pw=function(f,v){return new gl(f,v)},ca=gl.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),gl.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),gl.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ee;for(var v in this._layers){var E=this._layers[v];f.extend(E.getBounds?E.getBounds():E.getLatLng())}return f}}),L0=function(f,v){return new ca(f,v)},ua=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){w(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,v){var E=this._getIconUrl(f);if(!E){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(D,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(f,v){var E=this.options,D=E[v+"Size"];typeof D=="number"&&(D=[D,D]);var R=se(D),U=se(v==="shadow"&&E.shadowAnchor||E.iconAnchor||R&&R.divideBy(2,!0));f.className="leaflet-marker-"+v+" "+(E.className||""),U&&(f.style.marginLeft=-U.x+"px",f.style.marginTop=-U.y+"px"),R&&(f.style.width=R.x+"px",f.style.height=R.y+"px")},_createImg:function(f,v){return v=v||document.createElement("img"),v.src=f,v},_getIconUrl:function(f){return Ze.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Nc(f){return new ua(f)}var Oc=ua.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Oc.imagePath!="string"&&(Oc.imagePath=this._detectIconPath()),(this.options.imagePath||Oc.imagePath)+ua.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var v=function(E,D,R){var U=D.exec(E);return U&&U[R]};return f=v(f,/^url\((['"])?(.+)\1\)$/,2),f&&v(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=wt("div","leaflet-default-icon-path",document.body),v=xc(f,"background-image")||xc(f,"backgroundImage");if(document.body.removeChild(f),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Cc=la.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new vo(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ft(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&hn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var v=this._marker,E=v._map,D=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,U=bo(v._icon),ne=E.getPixelBounds(),fe=E.getPixelOrigin(),ye=re(ne.min._subtract(fe).add(R),ne.max._subtract(fe).subtract(R));if(!ye.contains(U)){var Ae=se((Math.max(ye.max.x,U.x)-ye.max.x)/(ne.max.x-ye.max.x)-(Math.min(ye.min.x,U.x)-ye.min.x)/(ne.min.x-ye.min.x),(Math.max(ye.max.y,U.y)-ye.max.y)/(ne.max.y-ye.max.y)-(Math.min(ye.min.y,U.y)-ye.min.y)/(ne.min.y-ye.min.y)).multiplyBy(D);E.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),Qt(v._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=H(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,f)))},_onDrag:function(f){var v=this._marker,E=v._shadow,D=bo(v._icon),R=v._map.layerPointToLatLng(D);E&&Qt(E,D),v._latlng=R,f.latlng=R,f.oldLatLng=this._oldLatLng,v.fire("move",f).fire("drag",f)},_onDragEnd:function(f){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),Mc=Ii.extend({options:{icon:new Oc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,v){w(this,v),this._latlng=ae(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var v=this._latlng;return this._latlng=ae(f),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=f.icon.createIcon(this._icon),D=!1;E!==this._icon&&(this._icon&&this._removeIcon(),D=!0,f.title&&(E.title=f.title),E.tagName==="IMG"&&(E.alt=f.alt||"")),ft(E,v),f.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(E,"focus",this._panOnFocus,this);var R=f.icon.createShadow(this._shadow),U=!1;R!==this._shadow&&(this._removeShadow(),U=!0),R&&(ft(R,v),R.alt=""),this._shadow=R,f.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&U&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ut(this._icon,"focus",this._panOnFocus,this),Wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wt(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Qt(this._icon,f),this._shadow&&Qt(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cc)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cc(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&ln(this._icon,f),this._shadow&&ln(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var v=this.options.icon.options,E=v.iconSize?se(v.iconSize):se(0,0),D=v.iconAnchor?se(v.iconAnchor):se(0,0);f.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:E.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function I0(f,v){return new Mc(f,v)}var da=Ii.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return w(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bl=da.extend({options:{fill:!0,radius:10},initialize:function(f,v){w(this,v),this._latlng=ae(f),this._radius=this.options.radius},setLatLng:function(f){var v=this._latlng;return this._latlng=ae(f),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var v=f&&f.radius||this._radius;return da.prototype.setStyle.call(this,f),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,v=this._radiusY||f,E=this._clickTolerance(),D=[f+E,v+E];this._pxBounds=new W(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $0(f,v){return new bl(f,v)}var Qu=bl.extend({initialize:function(f,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),w(this,v),this._latlng=ae(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:da.prototype.setStyle,_project:function(){var f=this._latlng.lng,v=this._latlng.lat,E=this._map,D=E.options.crs;if(D.distance===pe.distance){var R=Math.PI/180,U=this._mRadius/pe.R/R,ne=E.project([v+U,f]),fe=E.project([v-U,f]),ye=ne.add(fe).divideBy(2),Ae=E.unproject(ye).lat,Be=Math.acos((Math.cos(U*R)-Math.sin(v*R)*Math.sin(Ae*R))/(Math.cos(v*R)*Math.cos(Ae*R)))/R;(isNaN(Be)||Be===0)&&(Be=U/Math.cos(Math.PI/180*v)),this._point=ye.subtract(E.getPixelOrigin()),this._radius=isNaN(Be)?0:ye.x-E.project([Ae,f-Be]).x,this._radiusY=ye.y-ne.y}else{var Je=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Je).x}this._updateBounds()}});function B0(f,v,E){return new Qu(f,v,E)}var Ga=da.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,v){w(this,v),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var v=1/0,E=null,D=Ac,R,U,ne=0,fe=this._parts.length;ne<fe;ne++)for(var ye=this._parts[ne],Ae=1,Be=ye.length;Ae<Be;Ae++){R=ye[Ae-1],U=ye[Ae];var Je=D(f,R,U,!0);Je<v&&(v=Je,E=D(f,R,U))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ml(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,v){return v=v||this._defaultShape(),f=ae(f),v.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ee,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var v=[],E=fi(f),D=0,R=f.length;D<R;D++)E?(v[D]=ae(f[D]),this._bounds.extend(v[D])):v[D]=this._convertLatLngs(f[D]);return v},_project:function(){var f=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),v=new Q(f,f);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(f,v,E){var D=f[0]instanceof J,R=f.length,U,ne;if(D){for(ne=[],U=0;U<R;U++)ne[U]=this._map.latLngToLayerPoint(f[U]),E.extend(ne[U]);v.push(ne)}else for(U=0;U<R;U++)this._projectLatlngs(f[U],v,E)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,D,R,U,ne,fe,ye;for(E=0,R=0,U=this._rings.length;E<U;E++)for(ye=this._rings[E],D=0,ne=ye.length;D<ne-1;D++)fe=D0(ye[D],ye[D+1],f,D,!0),fe&&(v[R]=v[R]||[],v[R].push(fe[0]),(fe[1]!==ye[D+1]||D===ne-2)&&(v[R].push(fe[1]),R++))}},_simplifyPoints:function(){for(var f=this._parts,v=this.options.smoothFactor,E=0,D=f.length;E<D;E++)f[E]=N0(f[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,v){var E,D,R,U,ne,fe,ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(E=0,U=this._parts.length;E<U;E++)for(fe=this._parts[E],D=0,ne=fe.length,R=ne-1;D<ne;R=D++)if(!(!v&&D===0)&&O0(f,fe[R],fe[D])<=ye)return!0;return!1}});function Rw(f,v){return new Ga(f,v)}Ga._flat=Zu;var yl=Ga.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return A0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var v=Ga.prototype._convertLatLngs.call(this,f),E=v.length;return E>=2&&v[0]instanceof J&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(f){Ga.prototype._setLatLngs.call(this,f),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,v=this.options.weight,E=new Q(v,v);if(f=new W(f.min.subtract(E),f.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,R=this._rings.length,U;D<R;D++)U=T0(this._rings[D],f,!0),U.length&&this._parts.push(U)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var v=!1,E,D,R,U,ne,fe,ye,Ae;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(U=0,ye=this._parts.length;U<ye;U++)for(E=this._parts[U],ne=0,Ae=E.length,fe=Ae-1;ne<Ae;fe=ne++)D=E[ne],R=E[fe],D.y>f.y!=R.y>f.y&&f.x<(R.x-D.x)*(f.y-D.y)/(R.y-D.y)+D.x&&(v=!v);return v||Ga.prototype._containsPoint.call(this,f,!0)}});function Lw(f,v){return new yl(f,v)}var Ya=ca.extend({initialize:function(f,v){w(this,v),this._layers={},f&&this.addData(f)},addData:function(f){var v=j(f)?f:f.features,E,D,R;if(v){for(E=0,D=v.length;E<D;E++)R=v[E],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var U=this.options;if(U.filter&&!U.filter(f))return this;var ne=dr(f,U);return ne?(ne.feature=nd(f),ne.defaultOptions=ne.options,this.resetStyle(ne),U.onEachFeature&&U.onEachFeature(f,ne),this.addLayer(ne)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(v){this._setLayerStyle(v,f)},this)},_setLayerStyle:function(f,v){f.setStyle&&(typeof v=="function"&&(v=v(f.feature)),f.setStyle(v))}});function dr(f,v){var E=f.type==="Feature"?f.geometry:f,D=E?E.coordinates:null,R=[],U=v&&v.pointToLayer,ne=v&&v.coordsToLatLng||ed,fe,ye,Ae,Be;if(!D&&!E)return null;switch(E.type){case"Point":return fe=ne(D),vl(U,f,fe,v);case"MultiPoint":for(Ae=0,Be=D.length;Ae<Be;Ae++)fe=ne(D[Ae]),R.push(vl(U,f,fe,v));return new ca(R);case"LineString":case"MultiLineString":return ye=Dc(D,E.type==="LineString"?0:1,ne),new Ga(ye,v);case"Polygon":case"MultiPolygon":return ye=Dc(D,E.type==="Polygon"?1:2,ne),new yl(ye,v);case"GeometryCollection":for(Ae=0,Be=E.geometries.length;Ae<Be;Ae++){var Je=dr({geometry:E.geometries[Ae],type:"Feature",properties:f.properties},v);Je&&R.push(Je)}return new ca(R);case"FeatureCollection":for(Ae=0,Be=E.features.length;Ae<Be;Ae++){var yt=dr(E.features[Ae],v);yt&&R.push(yt)}return new ca(R);default:throw new Error("Invalid GeoJSON object.")}}function vl(f,v,E,D){return f?f(v,E):new Mc(E,D&&D.markersInheritOptions&&D)}function ed(f){return new J(f[1],f[0],f[2])}function Dc(f,v,E){for(var D=[],R=0,U=f.length,ne;R<U;R++)ne=v?Dc(f[R],v-1,E):(E||ed)(f[R]),D.push(ne);return D}function td(f,v){return f=ae(f),f.alt!==void 0?[b(f.lng,v),b(f.lat,v),b(f.alt,v)]:[b(f.lng,v),b(f.lat,v)]}function Pc(f,v,E,D){for(var R=[],U=0,ne=f.length;U<ne;U++)R.push(v?Pc(f[U],fi(f[U])?0:v-1,E,D):td(f[U],D));return!v&&E&&R.length>0&&R.push(R[0].slice()),R}function xo(f,v){return f.feature?i({},f.feature,{geometry:v}):nd(v)}function nd(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var wo={toGeoJSON:function(f){return xo(this,{type:"Point",coordinates:td(this.getLatLng(),f)})}};Mc.include(wo),Qu.include(wo),bl.include(wo),Ga.include({toGeoJSON:function(f){var v=!fi(this._latlngs),E=Pc(this._latlngs,v?1:0,!1,f);return xo(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),yl.include({toGeoJSON:function(f){var v=!fi(this._latlngs),E=v&&!fi(this._latlngs[0]),D=Pc(this._latlngs,E?2:v?1:0,!0,f);return v||(D=[D]),xo(this,{type:(E?"Multi":"")+"Polygon",coordinates:D})}}),gl.include({toMultiPoint:function(f){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(f).geometry.coordinates)}),xo(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(f){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(f);var E=v==="GeometryCollection",D=[];return this.eachLayer(function(R){if(R.toGeoJSON){var U=R.toGeoJSON(f);if(E)D.push(U.geometry);else{var ne=nd(U);ne.type==="FeatureCollection"?D.push.apply(D,ne.features):D.push(ne)}}}),E?xo(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function rd(f,v){return new Ya(f,v)}var Rc=rd,xl=Ii.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,v,E){this._url=f,this._bounds=he(v),w(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&er(this._image),this},bringToBack:function(){return this._map&&is(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=he(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",v=this._image=f?this._url:wt("img");if(ft(v,"leaflet-image-layer"),this._zoomAnimated&&ft(v,"leaflet-zoom-animated"),this.options.className&&ft(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(f){var v=this._map.getZoomScale(f.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Ua(this._image,E,v)},_reset:function(){var f=this._image,v=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Qt(f,v.min),f.style.width=E.x+"px",f.style.height=E.y+"px"},_updateOpacity:function(){ln(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),z0=function(f,v,E){return new xl(f,v,E)},_o=xl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",v=this._image=f?this._url:wt("video");if(ft(v,"leaflet-image-layer"),this._zoomAnimated&&ft(v,"leaflet-zoom-animated"),this.options.className&&ft(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onloadeddata=o(this.fire,this,"load"),f){for(var E=v.getElementsByTagName("source"),D=[],R=0;R<E.length;R++)D.push(E[R].src);this._url=E.length>0?D:[v.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var U=0;U<this._url.length;U++){var ne=wt("source");ne.src=this._url[U],v.appendChild(ne)}}});function wl(f,v,E){return new _o(f,v,E)}var id=xl.extend({_initImage:function(){var f=this._image=this._url;ft(f,"leaflet-image-layer"),this._zoomAnimated&&ft(f,"leaflet-zoom-animated"),this.options.className&&ft(f,this.options.className),f.onselectstart=m,f.onmousemove=m}});function U0(f,v,E){return new id(f,v,E)}var fr=Ii.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,v){f&&(f instanceof J||j(f))?(this._latlng=ae(f),w(this,v)):(w(this,f),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&ln(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&ln(this._container,1),this.bringToFront(),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(ln(this._container,0),this._removeTimeout=setTimeout(o(Wt,void 0,this._container),200)):Wt(this._container),this.options.interactive&&(hn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=ae(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&er(this._container),this},bringToBack:function(){return this._map&&is(this._container),this},_prepareOpen:function(f){var v=this._source;if(!v._map)return!1;if(v instanceof ca){v=null;var E=this._source._layers;for(var D in E)if(E[D]._map){v=E[D];break}if(!v)return!1;this._source=v}if(!f)if(v.getCenter)f=v.getCenter();else if(v.getLatLng)f=v.getLatLng();else if(v.getBounds)f=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")f.innerHTML=v;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),v=se(this.options.offset),E=this._getAnchor();this._zoomAnimated?Qt(this._container,f.add(E)):v=v.add(f).add(E);var D=this._containerBottom=-v.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=D+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(f,v,E,D){var R=v;return R instanceof f||(R=new f(D).setContent(v)),E&&R.setLatLng(E),R}}),Ii.include({_initOverlay:function(f,v,E,D){var R=E;return R instanceof f?(w(R,D),R._source=this):(R=v&&!D?v:new f(D,this),R.setContent(E)),R}});var Lc=fr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,fr.prototype.openOn.call(this,f)},onAdd:function(f){fr.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof da||this._source.on("preclick",Li))},onRemove:function(f){fr.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof da||this._source.off("preclick",Li))},getEvents:function(){var f=fr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",v=this._container=wt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=wt("div",f+"-content-wrapper",v);if(this._contentNode=wt("div",f+"-content",E),os(v),sa(this._contentNode),ct(v,"contextmenu",Li),this._tipContainer=wt("div",f+"-tip-container",v),this._tip=wt("div",f+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=wt("a",f+"-close-button",v);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',ct(D,"click",function(R){An(R),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,v=f.style;v.width="",v.whiteSpace="nowrap";var E=f.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var D=f.offsetHeight,R=this.options.maxHeight,U="leaflet-popup-scrolled";R&&D>R?(v.height=R+"px",ft(f,U)):hn(f,U),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),E=this._getAnchor();Qt(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,v=parseInt(xc(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,D=this._containerWidth,R=new Q(this._containerLeft,-E-this._containerBottom);R._add(bo(this._container));var U=f.layerPointToContainerPoint(R),ne=se(this.options.autoPanPadding),fe=se(this.options.autoPanPaddingTopLeft||ne),ye=se(this.options.autoPanPaddingBottomRight||ne),Ae=f.getSize(),Be=0,Je=0;U.x+D+ye.x>Ae.x&&(Be=U.x+D-Ae.x+ye.x),U.x-Be-fe.x<0&&(Be=U.x-fe.x),U.y+E+ye.y>Ae.y&&(Je=U.y+E-Ae.y+ye.y),U.y-Je-fe.y<0&&(Je=U.y-fe.y),(Be||Je)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Be,Je]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),F0=function(f,v){return new Lc(f,v)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(f,v,E){return this._initOverlay(Lc,f,v,E).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Ii.include({bindPopup:function(f,v){return this._popup=this._initOverlay(Lc,this._popup,f,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof ca||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){yo(f);var v=f.layer||f.target;if(this._popup._source===v&&!(v instanceof da)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=v,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Ic=fr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){fr.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){fr.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=fr.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",v=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var v,E,D=this._map,R=this._container,U=D.latLngToContainerPoint(D.getCenter()),ne=D.layerPointToContainerPoint(f),fe=this.options.direction,ye=R.offsetWidth,Ae=R.offsetHeight,Be=se(this.options.offset),Je=this._getAnchor();fe==="top"?(v=ye/2,E=Ae):fe==="bottom"?(v=ye/2,E=0):fe==="center"?(v=ye/2,E=Ae/2):fe==="right"?(v=0,E=Ae/2):fe==="left"?(v=ye,E=Ae/2):ne.x<U.x?(fe="right",v=0,E=Ae/2):(fe="left",v=ye+(Be.x+Je.x)*2,E=Ae/2),f=f.subtract(se(v,E,!0)).add(Be).add(Je),hn(R,"leaflet-tooltip-right"),hn(R,"leaflet-tooltip-left"),hn(R,"leaflet-tooltip-top"),hn(R,"leaflet-tooltip-bottom"),ft(R,"leaflet-tooltip-"+fe),Qt(R,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&ln(this._container,f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(v)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Iw=function(f,v){return new Ic(f,v)};Et.include({openTooltip:function(f,v,E){return this._initOverlay(Ic,f,v,E).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Ii.include({bindTooltip:function(f,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ic,this._tooltip,f,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var v=f?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof ca||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&(ct(v,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),ct(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var v=f.latlng,E,D;this._tooltip.options.sticky&&f.originalEvent&&(E=this._map.mouseEventToContainerPoint(f.originalEvent),D=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(v)}});var H0=ua.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var v=f&&f.tagName==="DIV"?f:document.createElement("div"),E=this.options;if(E.html instanceof Element?(ui(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var D=se(E.bgPos);v.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function $w(f){return new H0(f)}ua.Default=Oc;var _l=Ii.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){w(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Wt(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(is(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof Q?f:new Q(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var v=this.getPane().children,E=-f(-1/0,1/0),D=0,R=v.length,U;D<R;D++)U=v[D].style.zIndex,v[D]!==this._container&&U&&(E=f(E,+U));isFinite(E)&&(this.options.zIndex=E+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){ln(this._container,this.options.opacity);var f=+new Date,v=!1,E=!1;for(var D in this._tiles){var R=this._tiles[D];if(!(!R.current||!R.loaded)){var U=Math.min(1,(f-R.loaded)/200);ln(R.el,U),U<1?v=!0:(R.active?E=!0:this._onOpaqueTile(R),R.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,v=this.options.maxZoom;if(f!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===f?(this._levels[E].el.style.zIndex=v-Math.abs(f-E),this._onUpdateLevel(E)):(Wt(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var D=this._levels[f],R=this._map;return D||(D=this._levels[f]={},D.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=v,D.origin=R.project(R.unproject(R.getPixelOrigin()),f).round(),D.zoom=f,this._setZoomTransform(D,R.getCenter(),R.getZoom()),m(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var f,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)v=this._tiles[f],v.retain=v.current;for(f in this._tiles)if(v=this._tiles[f],v.current&&!v.active){var D=v.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var v in this._tiles)this._tiles[v].coords.z===f&&this._removeTile(v)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Wt(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,v,E,D){var R=Math.floor(f/2),U=Math.floor(v/2),ne=E-1,fe=new Q(+R,+U);fe.z=+ne;var ye=this._tileCoordsToKey(fe),Ae=this._tiles[ye];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),ne>D?this._retainParent(R,U,ne,D):!1)},_retainChildren:function(f,v,E,D){for(var R=2*f;R<2*f+2;R++)for(var U=2*v;U<2*v+2;U++){var ne=new Q(R,U);ne.z=E+1;var fe=this._tileCoordsToKey(ne),ye=this._tiles[fe];if(ye&&ye.active){ye.retain=!0;continue}else ye&&ye.loaded&&(ye.retain=!0);E+1<D&&this._retainChildren(R,U,E+1,D)}},_resetView:function(f){var v=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var v=this.options;return v.minNativeZoom!==void 0&&f<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<f?v.maxNativeZoom:f},_setView:function(f,v,E,D){var R=Math.round(v);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var U=this.options.updateWhenZooming&&R!==this._tileZoom;(!D||U)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(f),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(f,v)},_setZoomTransforms:function(f,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],f,v)},_setZoomTransform:function(f,v,E){var D=this._map.getZoomScale(E,f.zoom),R=f.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(v,E)).round();Ze.any3d?Ua(f.el,R,D):Qt(f.el,R)},_resetGrid:function(){var f=this._map,v=f.options.crs,E=this._tileSize=this.getTileSize(),D=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,v.wrapLng[0]],D).x/E.x),Math.ceil(f.project([0,v.wrapLng[1]],D).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([v.wrapLat[0],0],D).y/E.x),Math.ceil(f.project([v.wrapLat[1],0],D).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),D=v.getZoomScale(E,this._tileZoom),R=v.project(f,this._tileZoom).floor(),U=v.getSize().divideBy(D*2);return new W(R.subtract(U),R.add(U))},_update:function(f){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(f===void 0&&(f=v.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(f),R=this._pxBoundsToTileRange(D),U=R.getCenter(),ne=[],fe=this.options.keepBuffer,ye=new W(R.getBottomLeft().subtract([fe,-fe]),R.getTopRight().add([fe,-fe]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Be=this._tiles[Ae].coords;(Be.z!==this._tileZoom||!ye.contains(new Q(Be.x,Be.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(f,E);return}for(var Je=R.min.y;Je<=R.max.y;Je++)for(var yt=R.min.x;yt<=R.max.x;yt++){var tr=new Q(yt,Je);if(tr.z=this._tileZoom,!!this._isValidTile(tr)){var Nn=this._tiles[this._tileCoordsToKey(tr)];Nn?Nn.current=!0:ne.push(tr)}}if(ne.sort(function(Dt,Pt){return Dt.distanceTo(U)-Pt.distanceTo(U)}),ne.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zr=document.createDocumentFragment();for(yt=0;yt<ne.length;yt++)this._addTile(ne[yt],Zr);this._level.el.appendChild(Zr)}}}},_isValidTile:function(f){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(f.x<E.min.x||f.x>E.max.x)||!v.wrapLat&&(f.y<E.min.y||f.y>E.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(f);return he(this.options.bounds).overlaps(D)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var v=this._map,E=this.getTileSize(),D=f.scaleBy(E),R=D.add(E),U=v.unproject(D,f.z),ne=v.unproject(R,f.z);return[U,ne]},_tileCoordsToBounds:function(f){var v=this._tileCoordsToNwSe(f),E=new ee(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var v=f.split(":"),E=new Q(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(f){var v=this._tiles[f];v&&(Wt(v.el),delete this._tiles[f],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){ft(f,"leaflet-tile");var v=this.getTileSize();f.style.width=v.x+"px",f.style.height=v.y+"px",f.onselectstart=m,f.onmousemove=m,Ze.ielt9&&this.options.opacity<1&&ln(f,this.options.opacity)},_addTile:function(f,v){var E=this._getTilePos(f),D=this._tileCoordsToKey(f),R=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(R),this.createTile.length<2&&H(o(this._tileReady,this,f,null,R)),Qt(R,E),this._tiles[D]={el:R,coords:f,current:!0},v.appendChild(R),this.fire("tileloadstart",{tile:R,coords:f})},_tileReady:function(f,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:f});var D=this._tileCoordsToKey(f);E=this._tiles[D],E&&(E.loaded=+new Date,this._map._fadeAnimated?(ln(E.el,0),B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(ft(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var v=new Q(this._wrapX?h(f.x,this._wrapX):f.x,this._wrapY?h(f.y,this._wrapY):f.y);return v.z=f.z,v},_pxBoundsToTileRange:function(f){var v=this.getTileSize();return new W(f.min.unscaleBy(v).floor(),f.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function G0(f){return new _l(f)}var So=_l.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,v){this._url=f,v=w(this,v),v.detectRetina&&Ze.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,v){return this._url===f&&v===void 0&&(v=!0),this._url=f,v||this.redraw(),this},createTile:function(f,v){var E=document.createElement("img");return ct(E,"load",o(this._tileOnLoad,this,v,E)),ct(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(f),E},getTileUrl:function(f){var v={r:Ze.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-f.y;this.options.tms&&(v.y=E),v["-y"]=E}return N(this._url,i(v,this.options))},_tileOnLoad:function(f,v){Ze.ielt9?setTimeout(o(f,this,null,v),0):f(null,v)},_tileOnError:function(f,v,E){var D=this.options.errorTileUrl;D&&v.getAttribute("src")!==D&&(v.src=D),f(E,v)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,D=this.options.zoomOffset;return E&&(f=v-f),f+D},_getSubdomain:function(f){var v=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var f,v;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(v=this._tiles[f].el,v.onload=m,v.onerror=m,!v.complete)){v.src=M;var E=this._tiles[f].coords;Wt(v),delete this._tiles[f],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(f){var v=this._tiles[f];if(v)return v.el.setAttribute("src",M),_l.prototype._removeTile.call(this,f)},_tileReady:function(f,v,E){if(!(!this._map||E&&E.getAttribute("src")===M))return _l.prototype._tileReady.call(this,f,v,E)}});function hi(f,v){return new So(f,v)}var $c=So.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,v){this._url=f;var E=i({},this.defaultWmsParams);for(var D in v)D in this.options||(E[D]=v[D]);v=w(this,v);var R=v.detectRetina&&Ze.retina?2:1,U=this.getTileSize();E.width=U.x*R,E.height=U.y*R,this.wmsParams=E},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,So.prototype.onAdd.call(this,f)},getTileUrl:function(f){var v=this._tileCoordsToNwSe(f),E=this._crs,D=re(E.project(v[0]),E.project(v[1])),R=D.min,U=D.max,ne=(this._wmsVersion>=1.3&&this._crs===bh?[R.y,R.x,U.y,U.x]:[R.x,R.y,U.x,U.y]).join(","),fe=So.prototype.getTileUrl.call(this,f);return fe+_(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ne},setParams:function(f,v){return i(this.wmsParams,f),v||this.redraw(),this}});function mi(f,v){return new $c(f,v)}So.WMS=$c,hi.wms=mi;var Br=Ii.extend({options:{padding:.1},initialize:function(f){w(this,f),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,v){var E=this._map.getZoomScale(v,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,v),U=D.multiplyBy(-E).add(R).subtract(this._map._getNewPixelOrigin(f,v));Ze.any3d?Ua(this._container,U,E):Qt(this._container,U)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-f)).round();this._bounds=new W(E,E.add(v.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ad=Br.extend({options:{tolerance:0},getEvents:function(){var f=Br.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Br.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");ct(f,"mousemove",this._onMouseMove,this),ct(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ct(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Wt(this._container),Ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var v in this._layers)f=this._layers[v],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var f=this._bounds,v=this._container,E=f.getSize(),D=Ze.retina?2:1;Qt(v,f.min),v.width=D*E.x,v.height=D*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Br.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[u(f)]=f;var v=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var v=f._order,E=v.next,D=v.prev;E?E.prev=D:this._drawLast=D,D?D.next=E:this._drawFirst=E,delete f._order,delete this._layers[u(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var v=f.options.dashArray.split(/[, ]+/),E=[],D,R;for(R=0;R<v.length;R++){if(D=Number(v[R]),isNaN(D))return;E.push(D)}f.options._dashArray=E}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var v=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(f._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(f._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var v=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)f=D.layer,(!v||f._pxBounds&&f._pxBounds.intersects(v))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,v){if(this._drawing){var E,D,R,U,ne=f._parts,fe=ne.length,ye=this._ctx;if(fe){for(ye.beginPath(),E=0;E<fe;E++){for(D=0,R=ne[E].length;D<R;D++)U=ne[E][D],ye[D?"lineTo":"moveTo"](U.x,U.y);v&&ye.closePath()}this._fillStroke(ye,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var v=f._point,E=this._ctx,D=Math.max(Math.round(f._radius),1),R=(Math.max(Math.round(f._radiusY),1)||D)/D;R!==1&&(E.save(),E.scale(1,R)),E.beginPath(),E.arc(v.x,v.y/R,D,0,Math.PI*2,!1),R!==1&&E.restore(),this._fillStroke(E,f)}},_fillStroke:function(f,v){var E=v.options;E.fill&&(f.globalAlpha=E.fillOpacity,f.fillStyle=E.fillColor||E.color,f.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(f.setLineDash&&f.setLineDash(v.options&&v.options._dashArray||[]),f.globalAlpha=E.opacity,f.lineWidth=E.weight,f.strokeStyle=E.color,f.lineCap=E.lineCap,f.lineJoin=E.lineJoin,f.stroke())},_onClick:function(f){for(var v=this._map.mouseEventToLayerPoint(f),E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(E))&&(D=E);this._fireEvent(D?[D]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,v)}},_handleMouseOut:function(f){var v=this._hoveredLayer;v&&(hn(this._container,"leaflet-interactive"),this._fireEvent([v],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,v){if(!this._mouseHoverThrottled){for(var E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(D=E);D!==this._hoveredLayer&&(this._handleMouseOut(f),D&&(ft(this._container,"leaflet-interactive"),this._fireEvent([D],f,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,v,E){this._map._fireDOMEvent(v,E||v.type,f)},_bringToFront:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(E)E.prev=D;else return;D?D.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(f)}},_bringToBack:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(D)D.next=E;else return;E?E.prev=D:D&&(this._drawLast=D),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(f)}}});function Bc(f){return Ze.canvas?new ad(f):null}var ko=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),yh={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Br.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var v=f._container=ko("shape");ft(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",f._path=ko("path"),v.appendChild(f._path),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){var v=f._container;this._container.appendChild(v),f.options.interactive&&f.addInteractiveTarget(v)},_removePath:function(f){var v=f._container;Wt(v),f.removeInteractiveTarget(v),delete this._layers[u(f)]},_updateStyle:function(f){var v=f._stroke,E=f._fill,D=f.options,R=f._container;R.stroked=!!D.stroke,R.filled=!!D.fill,D.stroke?(v||(v=f._stroke=ko("stroke")),R.appendChild(v),v.weight=D.weight+"px",v.color=D.color,v.opacity=D.opacity,D.dashArray?v.dashStyle=j(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=D.lineCap.replace("butt","flat"),v.joinstyle=D.lineJoin):v&&(R.removeChild(v),f._stroke=null),D.fill?(E||(E=f._fill=ko("fill")),R.appendChild(E),E.color=D.fillColor||D.color,E.opacity=D.fillOpacity):E&&(R.removeChild(E),f._fill=null)},_updateCircle:function(f){var v=f._point.round(),E=Math.round(f._radius),D=Math.round(f._radiusY||E);this._setPath(f,f._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+D+" 0,"+65535*360)},_setPath:function(f,v){f._path.v=v},_bringToFront:function(f){er(f._container)},_bringToBack:function(f){is(f._container)}},fa=Ze.vml?ko:Ie,Sl=Br.extend({_initContainer:function(){this._container=fa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wt(this._container),Ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var f=this._bounds,v=f.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Qt(E,f.min),E.setAttribute("viewBox",[f.min.x,f.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(f){var v=f._path=fa("path");f.options.className&&ft(v,f.options.className),f.options.interactive&&ft(v,"leaflet-interactive"),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Wt(f._path),f.removeInteractiveTarget(f._path),delete this._layers[u(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var v=f._path,E=f.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(f,v){this._setPath(f,Ke(f._parts,v))},_updateCircle:function(f){var v=f._point,E=Math.max(Math.round(f._radius),1),D=Math.max(Math.round(f._radiusY),1)||E,R="a"+E+","+D+" 0 1,0 ",U=f._empty()?"M0 0":"M"+(v.x-E)+","+v.y+R+E*2+",0 "+R+-E*2+",0 ";this._setPath(f,U)},_setPath:function(f,v){f._path.setAttribute("d",v)},_bringToFront:function(f){er(f._path)},_bringToBack:function(f){is(f._path)}});Ze.vml&&Sl.include(yh);function zc(f){return Ze.svg||Ze.vml?new Sl(f):null}Et.include({getRenderer:function(f){var v=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var v=this._paneRenderers[f];return v===void 0&&(v=this._createRenderer({pane:f}),this._paneRenderers[f]=v),v},_createRenderer:function(f){return this.options.preferCanvas&&Bc(f)||zc(f)}});var ls=yl.extend({initialize:function(f,v){yl.prototype.initialize.call(this,this._boundsToLatLngs(f),v)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=he(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function Bw(f,v){return new ls(f,v)}Sl.create=fa,Sl.pointsToPath=Ke,Ya.geometryToLayer=dr,Ya.coordsToLatLng=ed,Ya.coordsToLatLngs=Dc,Ya.latLngToCoords=td,Ya.latLngsToCoords=Pc,Ya.getFeature=xo,Ya.asFeature=nd,Et.mergeOptions({boxZoom:!0});var zr=la.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cl(),Yu(),this._startPoint=this._map.mouseEventToContainerPoint(f),ct(document,{contextmenu:yo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var v=new W(this._point,this._startPoint),E=v.getSize();Qt(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Wt(this._box),hn(this._container,"leaflet-crosshair")),oa(),_c(),Ut(document,{contextmenu:yo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",zr),Et.mergeOptions({doubleClickZoom:!0});var od=la.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var v=this._map,E=v.getZoom(),D=v.options.zoomDelta,R=f.originalEvent.shiftKey?E-D:E+D;v.options.doubleClickZoom==="center"?v.setZoom(R):v.setZoomAround(f.containerPoint,R)}});Et.addInitHook("addHandler","doubleClickZoom",od),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ha=la.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new vo(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){hn(this._map._container,"leaflet-grab"),hn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=he(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,v){return f-(f-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;f.x<v.min.x&&(f.x=this._viscousLimit(f.x,v.min.x)),f.y<v.min.y&&(f.y=this._viscousLimit(f.y,v.min.y)),f.x>v.max.x&&(f.x=this._viscousLimit(f.x,v.max.x)),f.y>v.max.y&&(f.y=this._viscousLimit(f.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,v=Math.round(f/2),E=this._initialWorldOffset,D=this._draggable._newPos.x,R=(D-v+E)%f+v-E,U=(D+v+E)%f-v-E,ne=Math.abs(R+E)<Math.abs(U+E)?R:U;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ne},_onDragEnd:function(f){var v=this._map,E=v.options,D=!E.inertia||f.noInertia||this._times.length<2;if(v.fire("dragend",f),D)v.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),U=(this._lastTime-this._times[0])/1e3,ne=E.easeLinearity,fe=R.multiplyBy(ne/U),ye=fe.distanceTo([0,0]),Ae=Math.min(E.inertiaMaxSpeed,ye),Be=fe.multiplyBy(Ae/ye),Je=Ae/(E.inertiaDeceleration*ne),yt=Be.multiplyBy(-Je/2).round();!yt.x&&!yt.y?v.fire("moveend"):(yt=v._limitOffset(yt,v.options.maxBounds),H(function(){v.panBy(yt,{duration:Je,easeLinearity:ne,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",ha),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vh=la.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),ct(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,v=document.documentElement,E=f.scrollTop||v.scrollTop,D=f.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(D,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var v=this._panKeys={},E=this.keyCodes,D,R;for(D=0,R=E.left.length;D<R;D++)v[E.left[D]]=[-1*f,0];for(D=0,R=E.right.length;D<R;D++)v[E.right[D]]=[f,0];for(D=0,R=E.down.length;D<R;D++)v[E.down[D]]=[0,f];for(D=0,R=E.up.length;D<R;D++)v[E.up[D]]=[0,-1*f]},_setZoomDelta:function(f){var v=this._zoomKeys={},E=this.keyCodes,D,R;for(D=0,R=E.zoomIn.length;D<R;D++)v[E.zoomIn[D]]=f;for(D=0,R=E.zoomOut.length;D<R;D++)v[E.zoomOut[D]]=-f},_addHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var v=f.keyCode,E=this._map,D;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(D=this._panKeys[v],f.shiftKey&&(D=se(D).multiplyBy(3)),E.options.maxBounds&&(D=E._limitOffset(se(D),E.options.maxBounds)),E.options.worldCopyJump){var R=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(D)));E.panTo(R)}else E.panBy(D)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;yo(f)}}});Et.addInitHook("addHandler","keyboard",vh),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Uc=la.extend({addHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var v=jr(f),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var D=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),yo(f)},_performZoom:function(){var f=this._map,v=f.getZoom(),E=this._map.options.zoomSnap||0;f._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,U=E?Math.ceil(R/E)*E:R,ne=f._limitZoom(v+(this._delta>0?U:-U))-v;this._delta=0,this._startTime=null,ne&&(f.options.scrollWheelZoom==="center"?f.setZoom(v+ne):f.setZoomAround(this._lastMousePos,v+ne))}});Et.addInitHook("addHandler","scrollWheelZoom",Uc);var cs=600;Et.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var sd=la.extend({addHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var v=f.touches[0];this._startPos=this._newPos=new Q(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ct(document,"touchend",An),ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),cs),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Ut(document,"touchend",An),Ut(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Ut(document,"touchend touchcancel contextmenu",this._cancel,this),Ut(document,"touchmove",this._onMove,this)},_onMove:function(f){var v=f.touches[0];this._newPos=new Q(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,v){var E=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});Et.addInitHook("addHandler","tapHold",sd),Et.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var xh=la.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){hn(this._map._container,"leaflet-touch-zoom"),Ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var v=this._map;if(!(!f.touches||f.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(D)._divideBy(2))),this._startDist=E.distanceTo(D),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),An(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]),R=E.distanceTo(D)/this._startDist;if(this._zoom=v.getScaleZoom(R,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&R<1||this._zoom>v.getMaxZoom()&&R>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var U=E._add(D)._divideBy(2)._subtract(this._centerPoint);if(R===1&&U.x===0&&U.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ne=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(ne,this,!0),An(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Ut(document,"touchmove",this._onTouchMove,this),Ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",xh),Et.BoxZoom=zr,Et.DoubleClickZoom=od,Et.Drag=ha,Et.Keyboard=vh,Et.ScrollWheelZoom=Uc,Et.TapHold=sd,Et.TouchZoom=xh,n.Bounds=W,n.Browser=Ze,n.CRS=me,n.Canvas=ad,n.Circle=Qu,n.CircleMarker=bl,n.Class=X,n.Control=Vr,n.DivIcon=H0,n.DivOverlay=fr,n.DomEvent=Wu,n.DomUtil=fl,n.Draggable=vo,n.Evented=Z,n.FeatureGroup=ca,n.GeoJSON=Ya,n.GridLayer=_l,n.Handler=la,n.Icon=ua,n.ImageOverlay=xl,n.LatLng=J,n.LatLngBounds=ee,n.Layer=Ii,n.LayerGroup=gl,n.LineUtil=Dw,n.Map=Et,n.Marker=Mc,n.Mixin=Nw,n.Path=da,n.Point=Q,n.PolyUtil=ph,n.Polygon=yl,n.Polyline=Ga,n.Popup=Lc,n.PosAnimation=hl,n.Projection=P0,n.Rectangle=ls,n.Renderer=Br,n.SVG=Sl,n.SVGOverlay=id,n.TileLayer=So,n.Tooltip=Ic,n.Transformation=xe,n.Util=q,n.VideoOverlay=_o,n.bind=o,n.bounds=re,n.canvas=Bc,n.circle=B0,n.circleMarker=$0,n.control=Ha,n.divIcon=$w,n.extend=i,n.featureGroup=L0,n.geoJSON=rd,n.geoJson=Rc,n.gridLayer=G0,n.icon=Nc,n.imageOverlay=z0,n.latLng=ae,n.latLngBounds=he,n.layerGroup=Pw,n.map=ch,n.marker=I0,n.point=se,n.polygon=Lw,n.polyline=Rw,n.popup=F0,n.rectangle=Bw,n.setOptions=w,n.stamp=u,n.svg=zc,n.svgOverlay=U0,n.tileLayer=hi,n.tooltip=Iw,n.transformation=ue,n.version=r,n.videoOverlay=wl;var wh=window.L;n.noConflict=function(){return window.L=wh,this},window.L=n}))})(Mm,Mm.exports)),Mm.exports}var vJ=yJ();const M1=Ci(vJ),Qg=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function tu(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function xJ(e){const{buttonId:t,buttonInputId:n,modalId:r,closeMapId:i,mapCloseBtnId:a,searchBoxId:o,suggestionsId:l,mapId:u}=e.ids,d=e.initialCenter??{lat:37.5665,lon:126.978},h=tu(n),m=tu(t),b=tu(r),y=tu(a),k=tu(o),w=tu(l),_=i?tu(i):null;let T=null,N=null,j=null;const C=B=>B.code==="Space"||B.key===" "||B.key==="Spacebar"||B.key==="Space",M=B=>{C(B)&&document.activeElement!==k&&(B.preventDefault(),B.stopPropagation(),k.focus())},P=()=>{b.style.display="flex",T?setTimeout(()=>T?.invalidateSize(),200):setTimeout(()=>{T=M1.map(u,{keyboard:!1}).setView([d.lat,d.lon],11),M1.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(T),T.invalidateSize()},0),b.addEventListener("keydown",M,!0),b.addEventListener("keyup",M,!0),k.focus()},I=()=>{b.style.display="none",k.value="",w.innerHTML="",j&&(window.clearTimeout(j),j=null),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0)},z=B=>{const q=B.dataset.name??"",X=Number(B.dataset.lat??""),V=Number(B.dataset.lon??"");!Number.isFinite(X)||!Number.isFinite(V)||!T||(N?N.setLatLng([X,V]):N=M1.marker([X,V]).addTo(T),T.flyTo([X,V],14,{duration:.5}),h.value=q,h.dataset.lat=String(X),h.dataset.lon=String(V),e.onSelected?.({name:q,lat:X,lon:V}),w.innerHTML="",I())},K=()=>{j&&window.clearTimeout(j);const B=k.value.trim();if(!B){w.innerHTML="";return}j=window.setTimeout(async()=>{try{const q="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(B),X=await fetch(q,{headers:{Accept:"application/json"}});if(!X.ok)throw new Error(`HTTP ${X.status}`);const V=await X.json();if(!Array.isArray(V)||V.length===0){w.innerHTML='<li style="padding:8px"> </li>';return}const F=V.slice(0,12).map((Z,Q)=>{const le=Z.display_name.split(",").slice(0,3).map(re=>re.trim()).join("  "),se="padding:8px;cursor:pointer;outline:none;",W=Q===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${Qg(le)}"
                    data-lat="${Qg(Z.lat)}"
                    data-lon="${Qg(Z.lon)}"
                    data-active="${Q===0?"1":"0"}"
                    style="${se}${W}"
                  >${Qg(le)}</li>`}).join("");w.innerHTML=F}catch(q){console.error(q),w.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},G=B=>{const q=B.target;q.tagName==="LI"&&z(q)},H=B=>{if(B.key==="Enter"){const q=w.querySelector('li[data-active="1"]')??w.querySelector("li");q&&z(q)}};return m.addEventListener("click",P),y.addEventListener("click",I),_&&_.addEventListener("click",I),k.addEventListener("input",K),k.addEventListener("keydown",H),w.addEventListener("click",G),()=>{m.removeEventListener("click",P),y.removeEventListener("click",I),_&&_.removeEventListener("click",I),k.removeEventListener("input",K),k.removeEventListener("keydown",H),w.removeEventListener("click",G),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0),j&&(window.clearTimeout(j),j=null),T&&(T.remove(),T=null)}}function Pd(){return document.getElementById("suggestions")}function ay(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,r)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${r}`)}),t}function D1(e,t){const n=ay(e);if(n.length===0)return;const r=n.length;let i=t;i<0&&(i=r-1),i>=r&&(i=0),n.forEach(o=>{o.tabIndex=-1,o.setAttribute("aria-selected","false")});const a=n[i];a.tabIndex=0,a.setAttribute("aria-selected","true"),a.focus()}const wJ='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';function _J({open:e,setOpen:t,setBtnText:n,setLocalValue:r,nameRef:i,latRef:a,lonRef:o,triggerBtnRef:l,onSelect:u}){S.useEffect(()=>{if(!e)return;const d=xJ({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:j=>{n(""),r(j.name),i.current&&(i.current.value=j.name),a.current&&(a.current.value=String(j.lat)),o.current&&(o.current.value=String(j.lon)),u?.(j),t(!1)}}),h=document.getElementById("inputBirthPlaceBtn");h&&h.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const m=document.getElementById("mapModal");if(!m)return;const b=document.getElementById("searchBox"),y=Pd();setTimeout(()=>b?.focus(),0);const k=j=>{if(j.key==="Escape"){j.preventDefault(),t(!1);return}if(j.key!=="Tab")return;const C=Pd();if(C&&C.contains(document.activeElement))return;const M=Array.from(m.querySelectorAll(wJ)).filter(K=>!K.hasAttribute("disabled")&&K.tabIndex!==-1);if(M.length===0)return;const P=M[0],I=M[M.length-1],z=document.activeElement;j.shiftKey?(z===P||!m.contains(z))&&(j.preventDefault(),I.focus()):(z===I||!m.contains(z))&&(j.preventDefault(),P.focus())};m.addEventListener("keydown",k);const w=j=>{if(j.key!=="ArrowDown")return;const C=Pd();!C||ay(C).length===0||j.preventDefault()};b?.addEventListener("keydown",w);const _=j=>{if(j.target.value.trim()===""){const M=Pd();M&&(M.innerHTML="")}};b?.addEventListener("input",_);const T=j=>{const C=Pd();if(!C)return;const M=ay(C);if(M.length===0)return;const P=document.activeElement,I=P?M.indexOf(P):-1;if(I===-1)return;const z=K=>{j.preventDefault(),D1(C,I+K)};switch(j.key){case"Tab":j.preventDefault(),z(j.shiftKey?-1:1);break;case"ArrowDown":j.preventDefault(),z(1);break;case"ArrowUp":j.preventDefault(),z(-1);break;case"Home":j.preventDefault(),D1(C,0);break;case"End":j.preventDefault(),D1(C,M.length-1);break;case"Enter":case" ":j.preventDefault(),P.click();break;case"Backspace":j.preventDefault(),C.innerHTML="",b?.focus();break}j.stopPropagation()};let N=null;return y&&(y.addEventListener("keydown",T),N=new MutationObserver(()=>{const j=Pd();!j||ay(j).length}),N.observe(y,{childList:!0,subtree:!1})),()=>{m.removeEventListener("keydown",k),b?.removeEventListener("keydown",w),b?.removeEventListener("input",_),y&&y.removeEventListener("keydown",T),N?.disconnect(),d?.()}},[e,u,n,r,t,i,a,o]),S.useEffect(()=>{e||setTimeout(()=>l.current?.focus(),0)},[e,l])}function $4({onSelect:e,placeholderText:t=" ",buttonStyle:n,value:r}){const i=gJ({placeholderText:t,value:r});return _J({...i,onSelect:e}),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:i.localValue&&i.localValue.trim()!==""?i.localValue:t}),g.jsx("button",{ref:i.triggerBtnRef,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>i.setOpen(!0),"aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":"mapModal",children:i.btnText}),g.jsx("input",{ref:i.nameRef,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:i.latRef,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:i.lonRef,type:"hidden",name:"birthPlace_lon",defaultValue:""}),i.open&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:" "}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>i.setOpen(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":  / seoul / / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"   ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}function yr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var SJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",jD=SJ,P1=()=>Math.random().toString(36).substring(7).split("").join("."),kJ={INIT:`@@redux/INIT${P1()}`,REPLACE:`@@redux/REPLACE${P1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${P1()}`},Ry=kJ;function $j(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Bj(e,t,n){if(typeof e!="function")throw new Error(yr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yr(1));return n(Bj)(e,t)}let r=e,i=t,a=new Map,o=a,l=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((_,T)=>{o.set(T,_)}))}function h(){if(u)throw new Error(yr(3));return i}function m(_){if(typeof _!="function")throw new Error(yr(4));if(u)throw new Error(yr(5));let T=!0;d();const N=l++;return o.set(N,_),function(){if(T){if(u)throw new Error(yr(6));T=!1,d(),o.delete(N),a=null}}}function b(_){if(!$j(_))throw new Error(yr(7));if(typeof _.type>"u")throw new Error(yr(8));if(typeof _.type!="string")throw new Error(yr(17));if(u)throw new Error(yr(9));try{u=!0,i=r(i,_)}finally{u=!1}return(a=o).forEach(N=>{N()}),_}function y(_){if(typeof _!="function")throw new Error(yr(10));r=_,b({type:Ry.REPLACE})}function k(){const _=m;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(yr(11));function N(){const C=T;C.next&&C.next(h())}return N(),{unsubscribe:_(N)}},[jD](){return this}}}return b({type:Ry.INIT}),{dispatch:b,subscribe:m,getState:h,replaceReducer:y,[jD]:k}}function EJ(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Ry.INIT})>"u")throw new Error(yr(12));if(typeof n(void 0,{type:Ry.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yr(13))})}function B4(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{EJ(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const m=r[h],b=n[m],y=o[m],k=b(y,l);if(typeof k>"u")throw l&&l.type,new Error(yr(14));d[m]=k,u=u||k!==y}return u=u||r.length!==Object.keys(o).length,u?d:o}}function TD(e,t){return function(...n){return t(e.apply(this,n))}}function AD(e,t){if(typeof e=="function")return TD(e,t);if(typeof e!="object"||e===null)throw new Error(yr(16));const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=TD(i,t))}return n}function Xm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function z4(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(yr(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},l=e.map(u=>u(o));return a=Xm(...l)(i.dispatch),{...i,dispatch:a}}}function U4(e){return $j(e)&&"type"in e&&typeof e.type=="string"}var R1={exports:{}},L1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ND;function jJ(){if(ND)return L1;ND=1;var e=Nf();function t(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return L1.useSyncExternalStoreWithSelector=function(u,d,h,m,b){var y=i(null);if(y.current===null){var k={hasValue:!1,value:null};y.current=k}else k=y.current;y=o(function(){function _(M){if(!T){if(T=!0,N=M,M=m(M),b!==void 0&&k.hasValue){var P=k.value;if(b(P,M))return j=P}return j=M}if(P=j,n(N,M))return P;var I=m(M);return b!==void 0&&b(P,I)?(N=M,P):(N=M,j=I)}var T=!1,N,j,C=h===void 0?null:h;return[function(){return _(d())},C===null?void 0:function(){return _(C())}]},[d,h,m,b]);var w=r(u,y[0],y[1]);return a(function(){k.hasValue=!0,k.value=w},[w]),l(w),w},L1}var OD;function TJ(){return OD||(OD=1,R1.exports=jJ()),R1.exports}TJ();var AJ=S.version.startsWith("19"),NJ=Symbol.for(AJ?"react.transitional.element":"react.element"),OJ=Symbol.for("react.portal"),CJ=Symbol.for("react.fragment"),MJ=Symbol.for("react.strict_mode"),DJ=Symbol.for("react.profiler"),PJ=Symbol.for("react.consumer"),RJ=Symbol.for("react.context"),F4=Symbol.for("react.forward_ref"),LJ=Symbol.for("react.suspense"),IJ=Symbol.for("react.suspense_list"),zj=Symbol.for("react.memo"),$J=Symbol.for("react.lazy"),BJ=F4,zJ=zj;function UJ(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case NJ:switch(e=e.type,e){case CJ:case DJ:case MJ:case LJ:case IJ:return e;default:switch(e=e&&e.$$typeof,e){case RJ:case F4:case $J:case zj:return e;case PJ:return e;default:return t}}case OJ:return t}}}function FJ(e){return UJ(e)===zj}function HJ(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let l=!1,u,d,h,m,b;function y(N,j){return u=N,d=j,h=e(u,d),m=t(r,d),b=n(h,m,d),l=!0,b}function k(){return h=e(u,d),t.dependsOnOwnProps&&(m=t(r,d)),b=n(h,m,d),b}function w(){return e.dependsOnOwnProps&&(h=e(u,d)),t.dependsOnOwnProps&&(m=t(r,d)),b=n(h,m,d),b}function _(){const N=e(u,d),j=!o(N,h);return h=N,j&&(b=n(h,m,d)),b}function T(N,j){const C=!a(j,d),M=!i(N,u,j,d);return u=N,d=j,C&&M?k():C?w():M?_():b}return function(j,C){return l?T(j,C):y(j,C)}}function GJ(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const a=t(e,i),o=n(e,i),l=r(e,i);return HJ(a,o,l,e,i)}function YJ(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...a)=>t(i(...a)))}return n}function RE(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function CD(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function H4(e,t){return function(r,{displayName:i}){const a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=e,a.dependsOnOwnProps=CD(e);let d=a(l,u);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=CD(d),d=a(l,u)),d},a}}function Uj(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function qJ(e){return e&&typeof e=="object"?RE(t=>YJ(e,t)):e?typeof e=="function"?H4(e):Uj(e,"mapDispatchToProps"):RE(t=>({dispatch:t}))}function KJ(e){return e?typeof e=="function"?H4(e):Uj(e,"mapStateToProps"):RE(()=>({}))}function WJ(e,t,n){return{...n,...e,...t}}function VJ(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let a=!1,o;return function(u,d,h){const m=e(u,d,h);return a?i(m,o)||(o=m):(a=!0,o=m),o}}}function ZJ(e){return e?typeof e=="function"?VJ(e):Uj(e,"mergeProps"):()=>WJ}function XJ(e){e()}function JJ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){XJ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var MD={notify(){},get:()=>[]};function G4(e,t){let n,r=MD,i=0,a=!1;function o(w){h();const _=r.subscribe(w);let T=!1;return()=>{T||(T=!0,_(),m())}}function l(){r.notify()}function u(){k.onStateChange&&k.onStateChange()}function d(){return a}function h(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=JJ())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=MD)}function b(){a||(a=!0,h())}function y(){a&&(a=!1,m())}const k={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:b,tryUnsubscribe:y,getListeners:()=>r};return k}var QJ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eQ=QJ(),tQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nQ=tQ(),rQ=()=>eQ||nQ?S.useLayoutEffect:S.useEffect,Ly=rQ();function DD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function oy(e,t){if(DD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!DD(e[n[i]],t[n[i]]))return!1;return!0}var iQ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aQ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oQ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Y4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sQ={[BJ]:oQ,[zJ]:Y4};function PD(e){return FJ(e)?Y4:sQ[e.$$typeof]||iQ}var lQ=Object.defineProperty,cQ=Object.getOwnPropertyNames,RD=Object.getOwnPropertySymbols,uQ=Object.getOwnPropertyDescriptor,dQ=Object.getPrototypeOf,LD=Object.prototype;function LE(e,t){if(typeof t!="string"){if(LD){const a=dQ(t);a&&a!==LD&&LE(e,a)}let n=cQ(t);RD&&(n=n.concat(RD(t)));const r=PD(e),i=PD(t);for(let a=0;a<n.length;++a){const o=n[a];if(!aQ[o]&&!(i&&i[o])&&!(r&&r[o])){const l=uQ(t,o);try{lQ(e,o,l)}catch{}}}}return e}var fQ=Symbol.for("react-redux-context"),hQ=typeof globalThis<"u"?globalThis:{};function mQ(){if(!S.createContext)return{};const e=hQ[fQ]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var q4=mQ(),pQ=[null,null];function gQ(e,t,n){Ly(()=>e(...t),n)}function bQ(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function yQ(e,t,n,r,i,a,o,l,u,d,h){if(!e)return()=>{};let m=!1,b=null;const y=()=>{if(m||!l.current)return;const w=t.getState();let _,T;try{_=r(w,i.current)}catch(N){T=N,b=N}T||(b=null),_===a.current?o.current||d():(a.current=_,u.current=_,o.current=!0,h())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,b)throw b}}function vQ(e,t){return e===t}function xQ(e,t,n,{pure:r,areStatesEqual:i=vQ,areOwnPropsEqual:a=oy,areStatePropsEqual:o=oy,areMergedPropsEqual:l=oy,forwardRef:u=!1,context:d=q4}={}){const h=d,m=KJ(e),b=qJ(t),y=ZJ(n),k=!!e;return _=>{const T=_.displayName||_.name||"Component",N=`Connect(${T})`,j={shouldHandleStateChanges:k,displayName:N,wrappedComponentName:T,WrappedComponent:_,initMapStateToProps:m,initMapDispatchToProps:b,initMergeProps:y,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:l};function C(I){const[z,K,G]=S.useMemo(()=>{const{reactReduxForwardedRef:ue,...Ee}=I;return[I.context,ue,Ee]},[I]),H=S.useMemo(()=>{let ue=h;return z?.Consumer,ue},[z,h]),B=S.useContext(H),q=!!I.store&&!!I.store.getState&&!!I.store.dispatch,X=!!B&&!!B.store,V=q?I.store:B.store,F=X?B.getServerState:V.getState,Z=S.useMemo(()=>GJ(V.dispatch,j),[V]),[Q,le]=S.useMemo(()=>{if(!k)return pQ;const ue=G4(V,q?void 0:B.subscription),Ee=ue.notifyNestedSubs.bind(ue);return[ue,Ee]},[V,q,B]),se=S.useMemo(()=>q?B:{...B,subscription:Q},[q,B,Q]),W=S.useRef(void 0),re=S.useRef(G),ee=S.useRef(void 0),he=S.useRef(!1),J=S.useRef(!1),ae=S.useRef(void 0);Ly(()=>(J.current=!0,()=>{J.current=!1}),[]);const me=S.useMemo(()=>()=>ee.current&&G===re.current?ee.current:Z(V.getState(),G),[V,G]),pe=S.useMemo(()=>Ee=>Q?yQ(k,V,Q,Z,re,W,he,J,ee,le,Ee):()=>{},[Q]);gQ(bQ,[re,W,he,G,ee,le]);let te;try{te=S.useSyncExternalStore(pe,me,F?()=>Z(F(),G):me)}catch(ue){throw ae.current&&(ue.message+=`
The error may be correlated with this previous error:
${ae.current.stack}

`),ue}Ly(()=>{ae.current=void 0,ee.current=void 0,W.current=te});const je=S.useMemo(()=>S.createElement(_,{...te,ref:K}),[K,_,te]);return S.useMemo(()=>k?S.createElement(H.Provider,{value:se},je):je,[H,je,se])}const P=S.memo(C);if(P.WrappedComponent=_,P.displayName=C.displayName=N,u){const z=S.forwardRef(function(G,H){return S.createElement(P,{...G,reactReduxForwardedRef:H})});return z.displayName=N,z.WrappedComponent=_,LE(z,_)}return LE(P,_)}}var K4=xQ;function wQ(e){const{children:t,context:n,serverState:r,store:i}=e,a=S.useMemo(()=>{const u=G4(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=S.useMemo(()=>i.getState(),[i]);Ly(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=n||q4;return S.createElement(l.Provider,{value:a},t)}var W4=wQ,_Q="Invariant failed";function SQ(e,t){throw new Error(_Q)}var so=function(t){var n=t.top,r=t.right,i=t.bottom,a=t.left,o=r-a,l=i-n,u={top:n,right:r,bottom:i,left:a,width:o,height:l,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return u},Fj=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},ID=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},kQ=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},I1={top:0,right:0,bottom:0,left:0},Hj=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?I1:r,a=t.border,o=a===void 0?I1:a,l=t.padding,u=l===void 0?I1:l,d=so(Fj(n,i)),h=so(ID(n,o)),m=so(ID(h,u));return{marginBox:d,borderBox:so(n),paddingBox:h,contentBox:m,margin:i,border:o,padding:u}},ba=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&SQ(),i},EQ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Iy=function(t,n){var r=t.borderBox,i=t.border,a=t.margin,o=t.padding,l=kQ(r,n);return Hj({borderBox:l,border:i,margin:a,padding:o})},$y=function(t,n){return n===void 0&&(n=EQ()),Iy(t,n)},V4=function(t,n){var r={top:ba(n.marginTop),right:ba(n.marginRight),bottom:ba(n.marginBottom),left:ba(n.marginLeft)},i={top:ba(n.paddingTop),right:ba(n.paddingRight),bottom:ba(n.paddingBottom),left:ba(n.paddingLeft)},a={top:ba(n.borderTopWidth),right:ba(n.borderRightWidth),bottom:ba(n.borderBottomWidth),left:ba(n.borderLeftWidth)};return Hj({borderBox:t,margin:r,padding:i,border:a})},Z4=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return V4(n,r)},Jm=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(null,arguments)}function X4(e,t){}X4.bind(null,"warn");X4.bind(null,"error");function tc(){}function jQ(e,t){return{...e,...t}}function ka(e,t,n){const r=t.map(i=>{const a=jQ(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(a=>{a()})}}const TQ="Invariant failed";class zy extends Error{}zy.prototype.toString=function(){return this.message};function $e(e,t){throw new zy(TQ)}class AQ extends on.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=tc,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof zy&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ka(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof zy){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const NQ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Uy=e=>e+1,OQ=e=>`
  You have lifted an item in position ${Uy(e.source.index)}
`,J4=(e,t)=>{const n=e.droppableId===t.droppableId,r=Uy(e.index),i=Uy(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},Q4=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,CQ=e=>{const t=e.destination;if(t)return J4(e.source,t);const n=e.combine;return n?Q4(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},$D=e=>`
  The item has returned to its starting position
  of ${Uy(e.index)}
`,MQ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${$D(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${J4(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Q4(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${$D(e.source)}
  `},sy={dragHandleUsageInstructions:NQ,onDragStart:OQ,onDragUpdate:CQ,onDragEnd:MQ};function DQ(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function e6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!DQ(e[n],t[n]))return!1;return!0}function Ct(e,t){const n=S.useState(()=>({inputs:t,result:e()}))[0],r=S.useRef(!0),i=S.useRef(n),o=r.current||!!(t&&i.current.inputs&&e6(t,i.current.inputs))?i.current:{inputs:t,result:e()};return S.useEffect(()=>{r.current=!1,i.current=o},[o]),o.result}function et(e,t){return Ct(()=>e,t)}const _r={x:0,y:0},Dr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Zi=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),nc=(e,t)=>e.x===t.x&&e.y===t.y,Rf=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Ou=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Qm=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),BD=(e,t)=>Math.min(...t.map(n=>Qm(e,n))),t6=e=>t=>({x:e(t.x),y:e(t.y)});var PQ=(e,t)=>{const n=so({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const $p=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),zD=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],RQ={top:0,right:0,bottom:0,left:0},LQ=(e,t)=>t?$p(e,t.scroll.diff.displacement):e,IQ=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,$Q=(e,t)=>t&&t.shouldClipSubject?PQ(t.pageMarginBox,e):so(e);var gf=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=LQ(e.marginBox,r),a=IQ(i,n,t),o=$Q(a,r);return{page:e,withPlaceholder:t,active:o}},Gj=(e,t)=>{e.frame||$e();const n=e.frame,r=Zi(t,n.scroll.initial),i=Rf(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=gf({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function wr(e,t=e6){let n=null;function r(...i){if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;const a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const n6=wr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),r6=wr(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),bx=wr(e=>Object.values(e)),BQ=wr(e=>Object.values(e));var Lf=wr((e,t)=>BQ(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Yj(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function yx(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var vx=wr((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),zQ=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!Yj(i))return null;function o(y){const k={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...i,at:k}}const l=i.displaced.all,u=l.length?l[0]:null;if(e)return u?o(u):null;const d=vx(t,r);if(!u){if(!d.length)return null;const y=d[d.length-1];return o(y.descriptor.id)}const h=d.findIndex(y=>y.descriptor.id===u);h===-1&&$e();const m=h-1;if(m<0)return null;const b=d[m];return o(b.descriptor.id)},If=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const i6={point:_r,value:0},ep={invisible:{},visible:{},all:[]},UQ={displaced:ep,displacedBy:i6,at:null};var Na=(e,t)=>n=>e<=n&&n<=t,a6=e=>{const t=Na(e.top,e.bottom),n=Na(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return u&&d?!0:u&&o||d&&a}},FQ=e=>{const t=Na(e.top,e.bottom),n=Na(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const qj={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},o6={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var HQ=e=>t=>{const n=Na(t.top,t.bottom),r=Na(t.left,t.right);return i=>e===qj?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const GQ=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:_r;return $p(e,n)},YQ=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,qQ=(e,t,n)=>n(t)(e),Kj=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const a=r?GQ(e,t):e;return YQ(a,t,i)&&qQ(a,n,i)},KQ=e=>Kj({...e,isVisibleThroughFrameFn:a6}),s6=e=>Kj({...e,isVisibleThroughFrameFn:FQ}),WQ=e=>Kj({...e,isVisibleThroughFrameFn:HQ(e.destination.axis)}),VQ=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function ZQ(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return so(Fj(n,r))}function tp({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(l,u){const d=ZQ(u,n),h=u.descriptor.id;if(l.all.push(h),!KQ({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[u.descriptor.id]=!0,l;const b=VQ(h,a,i),y={draggableId:h,shouldAnimate:b};return l.visible[h]=y,l},{all:[],visible:{},invisible:{}})}function XQ(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function UD({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=XQ(e,{inHomeList:t});return{displaced:ep,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Fy({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:l}){const u=If(e,n);if(o==null)return UD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const d=t.find(k=>k.descriptor.index===o);if(!d)return UD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const h=vx(e,t),m=t.indexOf(d),b=h.slice(m);return{displaced:tp({afterDragging:b,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function oc(e,t){return!!t.effected[e]}var JQ=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,l=n[a].descriptor.index;return oc(a,i)?e?l:l-1:e?l+1:l},QQ=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,u=t?l:l+1;return a<o||a>u?null:a},eee=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:l,afterCritical:u})=>{const d=o.at;if(d||$e(),d.type==="REORDER"){const m=QQ({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:a});return m==null?null:Fy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:m})}const h=JQ({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:d.combine,afterCritical:u});return h==null?null:Fy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},tee=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return oc(n,t)?i?_r:Rf(r.point):i?r.point:_r},nee=({afterCritical:e,impact:t,draggables:n})=>{const r=yx(t);r||$e();const i=r.draggableId,a=n[i].page.borderBox.center,o=tee({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Dr(a,o)};const l6=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ree=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Wj=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,FD=({axis:e,moveRelativeTo:t,isMoving:n})=>Ou(e.line,t.marginBox[e.end]+l6(e,n),Wj(e,t.marginBox,n)),HD=({axis:e,moveRelativeTo:t,isMoving:n})=>Ou(e.line,t.marginBox[e.start]-ree(e,n),Wj(e,t.marginBox,n)),iee=({axis:e,moveInto:t,isMoving:n})=>Ou(e.line,t.contentBox[e.start]+l6(e,n),Wj(e,t.contentBox,n));var aee=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const a=Lf(r.descriptor.id,n),o=t.page,l=r.axis;if(!a.length)return iee({axis:l,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:d}=e,h=u.all[0];if(h){const b=n[h];if(oc(h,i))return HD({axis:l,moveRelativeTo:b.page,isMoving:o});const y=Iy(b.page,d.point);return HD({axis:l,moveRelativeTo:y,isMoving:o})}const m=a[a.length-1];if(m.descriptor.id===t.descriptor.id)return o.borderBox.center;if(oc(m.descriptor.id,i)){const b=Iy(m.page,Rf(i.displacedBy.point));return FD({axis:l,moveRelativeTo:b,isMoving:o})}return FD({axis:l,moveRelativeTo:m.page,isMoving:o})},IE=(e,t)=>{const n=e.frame;return n?Dr(t,n.scroll.diff.displacement):t};const oee=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type==="REORDER"?aee({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):nee({impact:e,draggables:r,afterCritical:i})};var xx=e=>{const t=oee(e),n=e.droppable;return n?IE(n,t):t},c6=(e,t)=>{const n=Zi(t,e.scroll.initial),r=Rf(n);return{frame:so({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function GD(e,t){return e.map(n=>t[n])}function see(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var lee=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const a=c6(t,Dr(t.scroll.current,i)),o=n.frame?Gj(n,Dr(n.frame.scroll.current,i)):n,l=e.displaced,u=tp({afterDragging:GD(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=tp({afterDragging:GD(l.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),h={},m={},b=[l,u,d];return l.all.forEach(k=>{const w=see(k,b);if(w){m[k]=w;return}h[k]=!0}),{...e,displaced:{all:l.all,invisible:h,visible:m}}},cee=(e,t)=>Dr(e.scroll.diff.displacement,t),Vj=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=cee(n,e),i=Zi(r,t.page.borderBox.center);return Dr(t.client.borderBox.center,i)},u6=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const o=Zi(n,e.page.borderBox.center),u={target:$p(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?WQ(u):s6(u)},uee=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:u})=>{if(!n.isEnabled)return null;const d=Lf(n.descriptor.id,r),h=If(t,n),m=zQ({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:i})||eee({isMovingForward:e,isInHomeList:h,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:i,viewport:a,afterCritical:u});if(!m)return null;const b=xx({impact:m,draggable:t,droppable:n,draggables:r,afterCritical:u});if(u6({draggable:t,destination:n,newPageBorderBoxCenter:b,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Vj({pageBorderBoxCenter:b,draggable:t,viewport:a}),impact:m,scrollJumpRequest:null};const k=Zi(b,o),w=lee({impact:m,viewport:a,destination:n,draggables:r,maxScrollChange:k});return{clientSelection:l,impact:w,scrollJumpRequest:k}};const Jr=e=>{const t=e.subject.active;return t||$e(),t};var dee=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const a=n.subject.active;if(!a)return null;const o=n.axis,l=Na(a[o.start],a[o.end]),u=bx(r).filter(h=>h!==n).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>a6(i.frame)(Jr(h))).filter(h=>{const m=Jr(h);return e?a[o.crossAxisEnd]<m[o.crossAxisEnd]:m[o.crossAxisStart]<a[o.crossAxisStart]}).filter(h=>{const m=Jr(h),b=Na(m[o.start],m[o.end]);return l(m[o.start])||l(m[o.end])||b(a[o.start])||b(a[o.end])}).sort((h,m)=>{const b=Jr(h)[o.crossAxisStart],y=Jr(m)[o.crossAxisStart];return e?b-y:y-b}).filter((h,m,b)=>Jr(h)[o.crossAxisStart]===Jr(b[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const d=u.filter(h=>Na(Jr(h)[o.start],Jr(h)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((h,m)=>Jr(h)[o.start]-Jr(m)[o.start])[0]:u.sort((h,m)=>{const b=BD(t,zD(Jr(h))),y=BD(t,zD(Jr(m)));return b!==y?b-y:Jr(h)[o.start]-Jr(m)[o.start]})[0]};const YD=(e,t)=>{const n=e.page.borderBox.center;return oc(e.descriptor.id,t)?Zi(n,t.displacedBy.point):n},fee=(e,t)=>{const n=e.page.borderBox;return oc(e.descriptor.id,t)?$p(n,Rf(t.displacedBy.point)):n};var hee=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>s6({target:fee(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const u=Qm(e,IE(n,YD(o,i))),d=Qm(e,IE(n,YD(l,i)));return u<d?-1:d<u?1:o.descriptor.index-l.descriptor.index})[0]||null,Bp=wr(function(t,n){const r=n[t.line];return{value:r,point:Ou(t.line,r)}});const mee=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Ou(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=Lf(e.descriptor.id,n).reduce((d,h)=>d+h.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:Ou(r.line,u)},d6=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),f6=(e,t,n)=>{const r=e.frame;If(t,e)&&$e(),e.subject.withPlaceholder&&$e();const i=Bp(e.axis,t.displaceBy).point,a=mee(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const h=gf({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:h}}const l=a?Dr(r.scroll.max,a):r.scroll.max,u=d6(r,l),d=gf({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:d,frame:u}},pee=e=>{const t=e.subject.withPlaceholder;t||$e();const n=e.frame;if(!n){const o=gf({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||$e();const i=d6(n,r),a=gf({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var gee=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const m={displaced:ep,displacedBy:i6,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},b=xx({impact:m,draggable:r,droppable:a,draggables:i,afterCritical:l}),y=If(r,a)?a:f6(a,r,i);return u6({draggable:r,destination:y,newPageBorderBoxCenter:b,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const u=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],d=(()=>{const m=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?m:m+1})(),h=Bp(a.axis,r.displaceBy);return Fy({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:h,last:ep,index:d})},bee=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:l})=>{const u=dee({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!u)return null;const d=Lf(u.descriptor.id,i),h=hee({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:d,afterCritical:l}),m=gee({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:h,insideDestination:d,viewport:o,afterCritical:l});if(!m)return null;const b=xx({impact:m,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:Vj({pageBorderBoxCenter:b,draggable:n,viewport:o}),impact:m,scrollJumpRequest:null}},Ji=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const yee=(e,t)=>{const n=Ji(e);return n?t[n]:null};var vee=({state:e,type:t})=>{const n=yee(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,{draggables:m,droppables:b}=e.dimensions;return l?uee({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,destination:a,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):bee({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,isOver:a,draggables:m,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function uu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function h6(e){const t=Na(e.top,e.bottom),n=Na(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function xee(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function wee({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(a=>{const o=a.axis,l=Ou(a.axis.line,e.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Qm(r,l)}}).sort((a,o)=>o.distance-a.distance);return i[0]?i[0].id:null}function _ee({pageBorderBox:e,draggable:t,droppables:n}){const r=bx(n).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!xee(e,a))return!1;if(h6(a)(e.center))return!0;const o=i.axis,l=a.center[o.crossAxisLine],u=e[o.crossAxisStart],d=e[o.crossAxisEnd],h=Na(a[o.crossAxisStart],a[o.crossAxisEnd]),m=h(u),b=h(d);return!m&&!b?!0:m?u<l:d>l});return r.length?r.length===1?r[0].descriptor.id:wee({pageBorderBox:e,draggable:t,candidates:r}):null}const m6=(e,t)=>so($p(e,t));var See=(e,t)=>{const n=e.frame;return n?m6(t,n.scroll.diff.value):t};function p6({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function kee({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Eee=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{const l=n.axis,u=Bp(n.axis,t.displaceBy),d=u.value,h=e[l.start],m=e[l.end],y=vx(t,r).find(w=>{const _=w.descriptor.id,T=w.page.borderBox.center[l.line],N=oc(_,o),j=p6({displaced:i,id:_});return N?j?m<=T:h<T-d:j?m<=T+d:h<T})||null,k=kee({draggable:t,closest:y,inHomeList:If(t,n)});return Fy({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:u,index:k})};const jee=4;var Tee=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Bp(r.axis,e.displaceBy),u=l.value,d=t[o.start],h=t[o.end],b=vx(e,i).find(k=>{const w=k.descriptor.id,_=k.page.borderBox,N=_[o.size]/jee,j=oc(w,a),C=p6({displaced:n.displaced,id:w});return j?C?h>_[o.start]+N&&h<_[o.end]-N:d>_[o.start]-u+N&&d<_[o.end]-u-N:C?h>_[o.start]+u+N&&h<_[o.end]+u-N:d>_[o.start]+N&&d<_[o.end]-N});return b?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:b.descriptor.id,droppableId:r.descriptor.id}}}:null},g6=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{const l=m6(t.page.borderBox,e),u=_ee({pageBorderBox:l,draggable:t,droppables:r});if(!u)return UQ;const d=r[u],h=Lf(d.descriptor.id,n),m=See(d,l);return Tee({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:i,destination:d,insideDestination:h,afterCritical:o})||Eee({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:d,insideDestination:h,last:i.displaced,viewport:a,afterCritical:o})},Zj=(e,t)=>({...e,[t.descriptor.id]:t});const Aee=({previousImpact:e,impact:t,droppables:n})=>{const r=Ji(e),i=Ji(t);if(!r||r===i)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const o=pee(a);return Zj(n,o)};var Nee=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const a=Aee({previousImpact:r,impact:i,droppables:n}),o=Ji(i);if(!o)return a;const l=n[o];if(If(e,l)||l.subject.withPlaceholder)return a;const u=f6(l,e,t);return Zj(a,u)},zm=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{const o=r||e.viewport,l=n||e.dimensions,u=t||e.current.client.selection,d=Zi(u,e.initial.client.selection),h={offset:d,selection:u,borderBoxCenter:Dr(e.initial.client.borderBoxCenter,d)},m={selection:Dr(h.selection,o.scroll.current),borderBoxCenter:Dr(h.borderBoxCenter,o.scroll.current),offset:Dr(h.offset,o.scroll.diff.value)},b={client:h,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:b};const y=l.draggables[e.critical.draggable.id],k=i||g6({pageOffset:m.offset,draggable:y,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),w=Nee({draggable:y,impact:k,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:b,dimensions:{draggables:l.draggables,droppables:w},impact:k,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function Oee(e,t){return e.map(n=>t[n])}var b6=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const a=e.displaced,o=Oee(a.all,n),l=tp({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:l}},y6=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{const o=xx({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Vj({pageBorderBoxCenter:o,draggable:t,viewport:i})},v6=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&$e();const r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:l}=a,u=o[e.critical.draggable.id],d=Ji(r);d||$e();const h=l[d],m=b6({impact:r,viewport:i,destination:h,draggables:o}),b=y6({impact:m,draggable:u,droppable:h,draggables:o,viewport:i,afterCritical:e.afterCritical});return zm({impact:m,clientSelection:b,state:e,dimensions:a,viewport:i})},Cee=e=>({index:e.index,droppableId:e.droppableId}),x6=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=Bp(t.axis,e.displaceBy),a=Lf(t.descriptor.id,n),o=a.indexOf(e);o===-1&&$e();const l=a.slice(o+1),u=l.reduce((b,y)=>(b[y.descriptor.id]=!0,b),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:tp({afterDragging:l,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Cee(e.descriptor)}},afterCritical:d}},Mee=(e,t)=>({draggables:e.draggables,droppables:Zj(e.droppables,t)}),Dee=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Iy(e.client,t),i=$y(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},Pee=e=>{const t=e.frame;return t||$e(),t},Ree=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,o=t[a],u=Pee(o).scroll.diff.value,d=Dr(r,u);return Dee({draggable:i,offset:d,initialWindowScroll:n.scroll.initial})})},Lee=({state:e,published:t})=>{const n=t.modified.map(T=>{const N=e.dimensions.droppables[T.droppableId];return Gj(N,T.scroll)}),r={...e.dimensions.droppables,...n6(n)},i=r6(Ree({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(T=>{delete a[T]});const o={droppables:r,draggables:a},l=Ji(e.impact),u=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],h=o.droppables[e.critical.droppable.id],{impact:m,afterCritical:b}=x6({draggable:d,home:h,draggables:a,viewport:e.viewport}),y=u&&u.isCombineEnabled?e.impact:m,k=g6({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:b}),w={...e,phase:"DRAGGING",impact:k,onLiftImpact:m,dimensions:o,afterCritical:b,forceShouldAnimate:!1};return e.phase==="COLLECTING"?w:{...w,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const $E=e=>e.movementMode==="SNAP",$1=(e,t,n)=>{const r=Mee(e.dimensions,t);return!$E(e)||n?zm({state:e,dimensions:r}):v6({state:e,dimensions:r})};function B1(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const qD={phase:"IDLE",completed:null,shouldFlush:!1};var Iee=(e=qD,t)=>{if(t.type==="FLUSH")return{...qD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&$e();const{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,l=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:_r},h={client:d,page:{selection:Dr(d.selection,i.scroll.initial),borderBoxCenter:Dr(d.selection,i.scroll.initial),offset:Dr(d.selection,i.scroll.diff.value)}},m=bx(a.droppables).every(w=>!w.isFixedOnPage),{impact:b,afterCritical:y}=x6({draggable:l,home:u,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:h,current:h,isWindowScrollAllowed:m,impact:b,afterCritical:y,onLiftImpact:b,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&$e(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||$e(),Lee({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;uu(e)||$e();const{client:n}=t.payload;return nc(n,e.current.client.selection)?e:zm({state:e,clientSelection:n,impact:$E(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return B1(e);uu(e)||$e();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const a=Gj(i,r);return $1(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;uu(e)||$e();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||$e(),i.isEnabled===r&&$e();const a={...i,isEnabled:r};return $1(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;uu(e)||$e();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||$e(),i.isCombineEnabled===r&&$e();const a={...i,isCombineEnabled:r};return $1(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;uu(e)||$e(),e.isWindowScrollAllowed||$e();const n=t.payload.newScroll;if(nc(e.viewport.scroll.current,n))return B1(e);const r=c6(e.viewport,n);return $E(e)?v6({state:e,viewport:r}):zm({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!uu(e))return e;const n=t.payload.maxScroll;if(nc(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&$e();const n=vee({state:e,type:t.type});return n?zm({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&$e(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||$e(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ht(e,t){return e instanceof Object&&"type"in e&&e.type===t}const $ee=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Bee=e=>({type:"LIFT",payload:e}),zee=e=>({type:"INITIAL_PUBLISH",payload:e}),Uee=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Fee=()=>({type:"COLLECTION_STARTING",payload:null}),Hee=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Gee=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Yee=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),w6=e=>({type:"MOVE",payload:e}),qee=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Kee=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Wee=()=>({type:"MOVE_UP",payload:null}),Vee=()=>({type:"MOVE_DOWN",payload:null}),Zee=()=>({type:"MOVE_RIGHT",payload:null}),Xee=()=>({type:"MOVE_LEFT",payload:null}),Xj=()=>({type:"FLUSH",payload:null}),Jee=e=>({type:"DROP_ANIMATE",payload:e}),Jj=e=>({type:"DROP_COMPLETE",payload:e}),_6=e=>({type:"DROP",payload:e}),Qee=e=>({type:"DROP_PENDING",payload:e}),S6=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ete=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Ht(i,"LIFT")){r(i);return}const{id:a,clientSelection:o,movementMode:l}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(Jj({completed:u.completed})),t().phase!=="IDLE"&&$e(),n(Xj()),n($ee({draggableId:a,movementMode:l}));const h={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:m,dimensions:b,viewport:y}=e.startPublishing(h);n(zee({critical:m,dimensions:b,clientSelection:o,movementMode:l,viewport:y}))},tte=e=>()=>t=>n=>{Ht(n,"INITIAL_PUBLISH")&&e.dragging(),Ht(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ht(n,"FLUSH")||Ht(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Qj={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},np={opacity:{drop:0,combining:.7},scale:{drop:.75}},k6={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},nu=`${k6.outOfTheWay}s ${Qj.outOfTheWay}`,Um={fluid:`opacity ${nu}`,snap:`transform ${nu}, opacity ${nu}`,drop:e=>{const t=`${e}s ${Qj.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${nu}`,placeholder:`height ${nu}, width ${nu}, margin ${nu}`},KD=e=>nc(e,_r)?void 0:`translate(${e.x}px, ${e.y}px)`,BE={moveTo:KD,drop:(e,t)=>{const n=KD(e);if(n)return t?`${n} scale(${np.scale.drop})`:n}},{minDropTime:zE,maxDropTime:E6}=k6,nte=E6-zE,WD=1500,rte=.6;var ite=({current:e,destination:t,reason:n})=>{const r=Qm(e,t);if(r<=0)return zE;if(r>=WD)return E6;const i=r/WD,a=zE+nte*i,o=n==="CANCEL"?a*rte:a;return Number(o.toFixed(2))},ate=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:a,droppables:o}=n,l=Ji(e),u=l?o[l]:null,d=o[t.descriptor.droppableId],h=y6({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:u||d,viewport:r});return Zi(h,t.client.borderBox.center)},ote=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:b6({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:ep},didDropInsideDroppable:!0};const ste=({getState:e,dispatch:t})=>n=>r=>{if(!Ht(r,"DROP")){n(r);return}const i=e(),a=r.payload.reason;if(i.phase==="COLLECTING"){t(Qee({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&$e(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||$e();const l=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:m}=ote({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),b=m?Yj(h):null,y=m?yx(h):null,k={index:l.draggable.index,droppableId:l.droppable.id},w={draggableId:d.descriptor.id,type:d.descriptor.type,source:k,reason:a,mode:i.movementMode,destination:b,combine:y},_=ate({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),T={critical:i.critical,afterCritical:i.afterCritical,result:w,impact:h};if(!(!nc(i.current.client.offset,_)||!!w.combine)){t(Jj({completed:T}));return}const j=ite({current:i.current.client.offset,destination:_,reason:a});t(Jee({newHomeClientOffset:_,dropDuration:j,completed:T}))};var j6=()=>({x:window.pageXOffset,y:window.pageYOffset});function lte(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function cte({onWindowScroll:e}){function t(){e(j6())}const n=Jm(t),r=lte(n);let i=tc;function a(){return i!==tc}function o(){a()&&$e(),i=ka(window,[r])}function l(){a()||$e(),n.cancel(),i(),i=tc}return{start:o,stop:l,isActive:a}}const ute=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH"),dte=e=>{const t=cte({onWindowScroll:n=>{e.dispatch(qee({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ht(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&ute(r)&&t.stop(),n(r)}};var fte=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=()=>t,i},hte=()=>{const e=[],t=i=>{const a=e.findIndex(l=>l.timerId===i);a===-1&&$e();const[o]=e.splice(a,1);o.callback()};return{add:i=>{const a=setTimeout(()=>t(a)),o={timerId:a,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const mte=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,pte=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,gte=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},am=(e,t)=>{t()},eb=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function z1(e,t,n,r){if(!e){n(r(t));return}const i=fte(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var bte=(e,t)=>{const n=hte();let r=null;const i=(m,b)=>{r&&$e(),am("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:m,mode:b})})},a=(m,b)=>{r&&$e(),am("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(eb(m,b))})},o=(m,b)=>{r&&$e();const y=eb(m,b);r={mode:b,lastCritical:m,lastLocation:y.source,lastCombine:null},n.add(()=>{am("onDragStart",()=>z1(e().onDragStart,y,t,sy.onDragStart))})},l=(m,b)=>{const y=Yj(b),k=yx(b);r||$e();const w=!gte(m,r.lastCritical);w&&(r.lastCritical=m);const _=!mte(r.lastLocation,y);_&&(r.lastLocation=y);const T=!pte(r.lastCombine,k);if(T&&(r.lastCombine=k),!w&&!_&&!T)return;const N={...eb(m,r.mode),combine:k,destination:y};n.add(()=>{am("onDragUpdate",()=>z1(e().onDragUpdate,N,t,sy.onDragUpdate))})},u=()=>{r||$e(),n.flush()},d=m=>{r||$e(),r=null,am("onDragEnd",()=>z1(e().onDragEnd,m,t,sy.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:u,drop:d,abort:()=>{if(!r)return;const m={...eb(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(m)}}},yte=(e,t)=>{const n=bte(e,t);return r=>i=>a=>{if(Ht(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ht(a,"INITIAL_PUBLISH")){const l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),i(a),n.start(l,a.payload.movementMode);return}if(Ht(a,"DROP_COMPLETE")){const l=a.payload.completed.result;n.flush(),i(a),n.drop(l);return}if(i(a),Ht(a,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const vte=e=>t=>n=>{if(!Ht(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&$e(),e.dispatch(Jj({completed:r.completed}))},xte=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>a=>{if((Ht(a,"FLUSH")||Ht(a,"DROP_COMPLETE")||Ht(a,"DROP_ANIMATION_FINISHED"))&&r(),i(a),!Ht(a,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(S6())}};n=requestAnimationFrame(()=>{n=null,t=ka(window,[o])})}};var wte=e=>()=>t=>n=>{(Ht(n,"DROP_COMPLETE")||Ht(n,"FLUSH")||Ht(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},_te=e=>{let t=!1;return()=>n=>r=>{if(Ht(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ht(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ht(r,"DROP_COMPLETE")){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Ste=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH");var kte=e=>t=>n=>r=>{if(Ste(r)){e.stop(),n(r);return}if(Ht(r,"INITIAL_PUBLISH")){n(r);const i=t.getState();i.phase!=="DRAGGING"&&$e(),e.start(i);return}n(r),e.scroll(t.getState())};const Ete=e=>t=>n=>{if(t(n),!Ht(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(_6({reason:r.reason})))},jte=Xm;var Tte=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>Bj(Iee,jte(z4(tte(n),wte(e),ete(e),ste,vte,xte,Ete,kte(a),dte,_te(t),yte(r,i))));const U1=()=>({additions:{},removals:{},modified:{}});function Ate({registry:e,callbacks:t}){let n=U1(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:d,modified:h}=n,m=Object.keys(u).map(k=>e.draggable.getById(k).getDimension(_r)).sort((k,w)=>k.descriptor.index-w.descriptor.index),b=Object.keys(h).map(k=>{const _=e.droppable.getById(k).callbacks.getScrollWhileDragging();return{droppableId:k,scroll:_}}),y={additions:m,removals:Object.keys(d),modified:b};n=U1(),t.publish(y)}))};return{add:u=>{const d=u.descriptor.id;n.additions[d]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},remove:u=>{const d=u.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=U1())}}}var T6=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Zi({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},A6=()=>{const e=document.documentElement;return e||$e(),e},N6=()=>{const e=A6();return T6({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Nte=()=>{const e=j6(),t=N6(),n=e.y,r=e.x,i=A6(),a=i.clientWidth,o=i.clientHeight,l=r+a,u=n+o;return{frame:so({top:n,left:r,right:l,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:_r,displacement:_r}}}},Ote=({critical:e,scrollOptions:t,registry:n})=>{const r=Nte(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,t)),l=n.draggable.getAllByType(e.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:r6(l),droppables:n6(o)},critical:e,viewport:r}};function VD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Cte=(e,t)=>{let n=null;const r=Ate({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(b,y)=>{e.droppable.exists(b)||$e(),n&&t.updateDroppableIsEnabled({id:b,isEnabled:y})},a=(b,y)=>{n&&(e.droppable.exists(b)||$e(),t.updateDroppableIsCombineEnabled({id:b,isCombineEnabled:y}))},o=(b,y)=>{n&&(e.droppable.exists(b)||$e(),t.updateDroppableScroll({id:b,newScroll:y}))},l=(b,y)=>{n&&e.droppable.getById(b).callbacks.scroll(y)},u=()=>{if(!n)return;r.stop();const b=n.critical.droppable;e.droppable.getAllByType(b.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},d=b=>{n||$e();const y=n.critical.draggable;b.type==="ADDITION"&&VD(e,y,b.value)&&r.add(b.value),b.type==="REMOVAL"&&VD(e,y,b.value)&&r.remove(b.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:b=>{n&&$e();const y=e.draggable.getById(b.draggableId),k=e.droppable.getById(y.descriptor.droppableId),w={draggable:y.descriptor,droppable:k.descriptor},_=e.subscribe(d);return n={critical:w,unsubscribe:_},Ote({critical:w,registry:e,scrollOptions:b.scrollOptions})},stopPublishing:u}},O6=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Mte=e=>{window.scrollBy(e.x,e.y)};const Dte=wr(e=>bx(e).filter(t=>!(!t.isEnabled||!t.frame))),Pte=(e,t)=>Dte(t).find(r=>(r.frame||$e(),h6(r.frame.pageMarginBox)(e)))||null;var Rte=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return Pte(e,n)};const rp={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Lte=(e,t,n=()=>rp)=>{const r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},C6=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},eT=1,Ite=(e,t,n=()=>rp)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return eT;const a=1-C6({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(a);return Math.ceil(o)},$te=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,l=a,d=Date.now()-o;if(d>=a)return e;if(d<i)return eT;const h=C6({startOfRange:i,endOfRange:l,current:d}),m=e*r.ease(h);return Math.ceil(m)},ZD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=Ite(e,t,i);return a===0?0:r?Math.max($te(a,n,i),eT):a},XD=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=Lte(e,r,a);return t[r.end]<t[r.start]?ZD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*ZD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},Bte=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const zte=t6(e=>e===0?0:e);var M6=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=XD({container:t,distanceToEdges:o,dragStartTime:e,axis:qj,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),u=XD({container:t,distanceToEdges:o,dragStartTime:e,axis:o6,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),d=zte({x:u,y:l});if(nc(d,_r))return null;const h=Bte({container:t,subject:n,proposedScroll:d});return h?nc(h,_r)?null:h:null};const Ute=t6(e=>e===0?0:e>0?1:-1),tT=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Dr(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return nc(a,_r)?null:a}})(),D6=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=Ute(n),a=tT({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},nT=(e,t)=>D6({current:e.scroll.current,max:e.scroll.max,change:t}),Fte=(e,t)=>{if(!nT(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return tT({current:r,max:n,change:t})},rT=(e,t)=>{const n=e.frame;return n?D6({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Hte=(e,t)=>{const n=e.frame;return!n||!rT(e,t)?null:tT({current:n.scroll.current,max:n.scroll.max,change:t})};var Gte=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=M6({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&nT(e,o)?o:null},Yte=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=e.frame;if(!o)return null;const l=M6({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return l&&rT(e,l)?l:null},JD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,b=Gte({dragStartTime:t,viewport:m,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(b){r(b);return}}const d=Rte({center:o,destination:Ji(e.impact),droppables:e.dimensions.droppables});if(!d)return;const h=Yte({dragStartTime:t,droppable:d,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});h&&i(d.descriptor.id,h)},qte=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>rp})=>{const r=Jm(e),i=Jm(t);let a=null;const o=d=>{a||$e();const{shouldUseTimeDampening:h,dragStartTime:m}=a;JD({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:m,shouldUseTimeDampening:h,getAutoScrollerOptions:n})};return{start:d=>{a&&$e();const h=Date.now();let m=!1;const b=()=>{m=!0};JD({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:b,scrollDroppable:b,getAutoScrollerOptions:n}),a={dragStartTime:h,shouldUseTimeDampening:m},m&&o(d)},stop:()=>{a&&(r.cancel(),i.cancel(),a=null)},scroll:o}},Kte=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,u)=>{const d=Dr(l.current.client.selection,u);e({client:d})},i=(l,u)=>{if(!rT(l,u))return u;const d=Hte(l,u);if(!d)return t(l.descriptor.id,u),null;const h=Zi(u,d);return t(l.descriptor.id,h),Zi(u,h)},a=(l,u,d)=>{if(!l||!nT(u,d))return d;const h=Fte(u,d);if(!h)return n(d),null;const m=Zi(d,h);return n(m),Zi(d,m)};return l=>{const u=l.scrollJumpRequest;if(!u)return;const d=Ji(l.impact);d||$e();const h=i(l.dimensions.droppables[d],u);if(!h)return;const m=l.viewport,b=a(l.isWindowScrollAllowed,m,h);b&&r(l,b)}},Wte=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=qte({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=Kte({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:i.start,stop:i.stop}};const bf="data-rfd",yf=(()=>{const e=`${bf}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),UE=(()=>{const e=`${bf}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Vte=(()=>{const e=`${bf}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),QD={contextId:`${bf}-scroll-container-context-id`},Zte=e=>t=>`[${t}="${e}"]`,om=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),Xte="pointer-events: none;";var Jte=e=>{const t=Zte(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(yf.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Xte,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Um.outOfTheWay};
    `;return{selector:t(UE.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),i={selector:t(Vte.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:om(o,"always"),resting:om(o,"resting"),dragging:om(o,"dragging"),dropAnimating:om(o,"dropAnimating"),userCancel:om(o,"userCancel")}};const Qi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,F1=()=>{const e=document.querySelector("head");return e||$e(),e},eP=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Qte(e,t){const n=Ct(()=>Jte(e),[e]),r=S.useRef(null),i=S.useRef(null),a=et(wr(m=>{const b=i.current;b||$e(),b.textContent=m}),[]),o=et(m=>{const b=r.current;b||$e(),b.textContent=m},[]);Qi(()=>{!r.current&&!i.current||$e();const m=eP(t),b=eP(t);return r.current=m,i.current=b,m.setAttribute(`${bf}-always`,e),b.setAttribute(`${bf}-dynamic`,e),F1().appendChild(m),F1().appendChild(b),o(n.always),a(n.resting),()=>{const y=k=>{const w=k.current;w||$e(),F1().removeChild(w),k.current=null};y(r),y(i)}},[t,o,a,n.always,n.resting,e]);const l=et(()=>a(n.dragging),[a,n.dragging]),u=et(m=>{if(m==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=et(()=>{i.current&&a(n.resting)},[a,n.resting]);return Ct(()=>({dragging:l,dropping:u,resting:d}),[l,u,d])}function P6(e,t){return Array.from(e.querySelectorAll(t))}var R6=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function wx(e){return e instanceof R6(e).HTMLElement}function ene(e,t){const n=`[${yf.contextId}="${e}"]`,r=P6(document,n);if(!r.length)return null;const i=r.find(a=>a.getAttribute(yf.draggableId)===t);return!i||!wx(i)?null:i}function tne(e){const t=S.useRef({}),n=S.useRef(null),r=S.useRef(null),i=S.useRef(!1),a=et(function(b,y){const k={id:b,focus:y};return t.current[b]=k,function(){const _=t.current;_[b]!==k&&delete _[b]}},[]),o=et(function(b){const y=ene(e,b);y&&y!==document.activeElement&&y.focus()},[e]),l=et(function(b,y){n.current===b&&(n.current=y)},[]),u=et(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const b=n.current;b&&o(b)}))},[o]),d=et(function(b){n.current=null;const y=document.activeElement;y&&y.getAttribute(yf.draggableId)===b&&(n.current=b)},[]);return Qi(()=>(i.current=!0,function(){i.current=!1;const b=r.current;b&&cancelAnimationFrame(b)}),[]),Ct(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:l}),[a,d,u,l])}function nne(){const e={draggables:{},droppables:{}},t=[];function n(m){return t.push(m),function(){const y=t.indexOf(m);y!==-1&&t.splice(y,1)}}function r(m){t.length&&t.forEach(b=>b(m))}function i(m){return e.draggables[m]||null}function a(m){const b=i(m);return b||$e(),b}const o={register:m=>{e.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,b)=>{const y=e.draggables[b.descriptor.id];y&&y.uniqueId===m.uniqueId&&(delete e.draggables[b.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const b=m.descriptor.id,y=i(b);y&&m.uniqueId===y.uniqueId&&(delete e.draggables[b],e.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:a,findById:i,exists:m=>!!i(m),getAllByType:m=>Object.values(e.draggables).filter(b=>b.descriptor.type===m)};function l(m){return e.droppables[m]||null}function u(m){const b=l(m);return b||$e(),b}const d={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const b=l(m.descriptor.id);b&&m.uniqueId===b.uniqueId&&delete e.droppables[m.descriptor.id]},getById:u,findById:l,exists:m=>!!l(m),getAllByType:m=>Object.values(e.droppables).filter(b=>b.descriptor.type===m)};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:h}}function rne(){const e=Ct(nne,[]);return S.useEffect(()=>function(){e.clean()},[e]),e}var iT=on.createContext(null),Hy=()=>{const e=document.body;return e||$e(),e};const ine={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},ane=e=>`rfd-announcement-${e}`;function one(e){const t=Ct(()=>ane(e),[e]),n=S.useRef(null);return S.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),By(a.style,ine),Hy().appendChild(a),function(){setTimeout(function(){const u=Hy();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[t]),et(i=>{const a=n.current;if(a){a.textContent=i;return}},[])}const sne={separator:"::"};function aT(e,t=sne){const n=on.useId();return Ct(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function lne({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function cne({contextId:e,text:t}){const n=aT("hidden-text",{separator:"-"}),r=Ct(()=>lne({contextId:e,uniqueId:n}),[n,e]);return S.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",Hy().appendChild(a),function(){const l=Hy();l.contains(a)&&l.removeChild(a)}},[r,t]),r}var _x=on.createContext(null);function L6(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),t}function une(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&$e();const l={abandon:o};return e=l,l}function i(){e||$e(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function ip(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const dne=9,fne=13,oT=27,I6=32,hne=33,mne=34,pne=35,gne=36,bne=37,yne=38,vne=39,xne=40,wne={[fne]:!0,[dne]:!0};var $6=e=>{wne[e.keyCode]&&e.preventDefault()};const Sx=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),B6=0,tP=5;function _ne(e,t){return Math.abs(t.x-e.x)>=tP||Math.abs(t.y-e.y)>=tP}const nP={type:"IDLE"};function Sne({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:o,clientY:l}=i;if(a!==B6)return;const u={x:o,y:l},d=n();if(d.type==="DRAGGING"){i.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&$e();const h=d.point;if(!_ne(h,u))return;i.preventDefault();const m=d.actions.fluidLift(u);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===oT){i.preventDefault(),e();return}$6(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=n();if(a.type==="IDLE"&&$e(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:Sx,fn:e}]}function kne(e){const t=S.useRef(nP),n=S.useRef(tc),r=Ct(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==B6||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const b=e.findClosestDraggableId(m);if(!b)return;const y=e.tryGetLock(b,o,{sourceEvent:m});if(!y)return;m.preventDefault();const k={x:m.clientX,y:m.clientY};n.current(),d(y,k)}}),[e]),i=Ct(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const m=e.findClosestDraggableId(h);if(!m)return;const b=e.findOptionsForDraggable(m);b&&(b.shouldRespectForcePress||e.canGetLock(m)&&h.preventDefault())}}),[e]),a=et(function(){const m={passive:!1,capture:!0};n.current=ka(window,[i,r],m)},[i,r]),o=et(()=>{t.current.type!=="IDLE"&&(t.current=nP,n.current(),a())},[a]),l=et(()=>{const h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=et(function(){const m={capture:!0,passive:!1},b=Sne({cancel:l,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ka(window,b,m)},[l,o]),d=et(function(m,b){t.current.type!=="IDLE"&&$e(),t.current={type:"PENDING",point:b,actions:m},u()},[u]);Qi(function(){return a(),function(){n.current()}},[a])}function Ene(){}const jne={[mne]:!0,[hne]:!0,[gne]:!0,[pne]:!0};function Tne(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===oT){i.preventDefault(),n();return}if(i.keyCode===I6){i.preventDefault(),r();return}if(i.keyCode===xne){i.preventDefault(),e.moveDown();return}if(i.keyCode===yne){i.preventDefault(),e.moveUp();return}if(i.keyCode===vne){i.preventDefault(),e.moveRight();return}if(i.keyCode===bne){i.preventDefault(),e.moveLeft();return}if(jne[i.keyCode]){i.preventDefault();return}$6(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Sx,fn:n}]}function Ane(e){const t=S.useRef(Ene),n=Ct(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==I6)return;const o=e.findClosestDraggableId(a);if(!o)return;const l=e.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();let u=!0;const d=l.snapLift();t.current();function h(){u||$e(),u=!1,t.current(),r()}t.current=ka(window,Tne(d,h),{capture:!0,passive:!1})}}),[e]),r=et(function(){const a={passive:!1,capture:!0};t.current=ka(window,[n],a)},[n]);Qi(function(){return r(),function(){t.current()}},[r])}const H1={type:"IDLE"},Nne=120,One=.15;function Cne({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===oT&&n.preventDefault(),e()}},{eventName:Sx,fn:e}]}function Mne({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:o}=r.touches[0],l={x:a,y:o};r.preventDefault(),i.actions.move(l)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&$e();const a=r.touches[0];if(!a||!(a.force>=One))return;const l=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){l&&e();return}if(l){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Sx,fn:e}]}function Dne(e){const t=S.useRef(H1),n=S.useRef(tc),r=et(function(){return t.current},[]),i=et(function(y){t.current=y},[]),a=Ct(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const k=e.findClosestDraggableId(y);if(!k)return;const w=e.tryGetLock(k,l,{sourceEvent:y});if(!w)return;const _=y.touches[0],{clientX:T,clientY:N}=_,j={x:T,y:N};n.current(),m(w,j)}}),[e]),o=et(function(){const y={capture:!0,passive:!1};n.current=ka(window,[a],y)},[a]),l=et(()=>{const b=t.current;b.type!=="IDLE"&&(b.type==="PENDING"&&clearTimeout(b.longPressTimerId),i(H1),n.current(),o())},[o,i]),u=et(()=>{const b=t.current;l(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[l]),d=et(function(){const y={capture:!0,passive:!1},k={cancel:u,completed:l,getPhase:r},w=ka(window,Mne(k),y),_=ka(window,Cne(k),y);n.current=function(){w(),_()}},[u,r,l]),h=et(function(){const y=r();y.type!=="PENDING"&&$e();const k=y.actions.fluidLift(y.point);i({type:"DRAGGING",actions:k,hasMoved:!1})},[r,i]),m=et(function(y,k){r().type!=="IDLE"&&$e();const w=setTimeout(h,Nne);i({type:"PENDING",point:k,actions:y,longPressTimerId:w}),d()},[d,r,i,h]);Qi(function(){return o(),function(){n.current();const k=r();k.type==="PENDING"&&(clearTimeout(k.longPressTimerId),i(H1))}},[r,o,i]),Qi(function(){return ka(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Pne=["input","button","textarea","select","option","optgroup","video","audio"];function z6(e,t){if(t==null)return!1;if(Pne.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:z6(e,t.parentElement)}function Rne(e,t){const n=t.target;return wx(n)?z6(e,n):!1}var Lne=e=>so(e.getBoundingClientRect()).center;function Ine(e){return e instanceof R6(e).Element}const $ne=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function U6(e,t){return e==null?null:e[$ne](t)?e:U6(e.parentElement,t)}function Bne(e,t){return e.closest?e.closest(t):U6(e,t)}function zne(e){return`[${yf.contextId}="${e}"]`}function Une(e,t){const n=t.target;if(!Ine(n))return null;const r=zne(e),i=Bne(n,r);return!i||!wx(i)?null:i}function Fne(e,t){const n=Une(e,t);return n?n.getAttribute(yf.draggableId):null}function Hne(e,t){const n=`[${UE.contextId}="${e}"]`,i=P6(document,n).find(a=>a.getAttribute(UE.id)===t);return!i||!wx(i)?null:i}function Gne(e){e.preventDefault()}function tb({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function F6({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!O6(t.getState(),r))}function Yne({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!F6({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),d=Hne(t,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&Rne(d,o))return null;const h=e.claim(a||tc);let m="PRE_DRAG";function b(){return u.options.shouldRespectForcePress}function y(){return e.isActive(h)}function k(M,P){tb({expected:M,phase:m,isLockActive:y,shouldWarn:!0})&&n.dispatch(P())}const w=k.bind(null,"DRAGGING");function _(M){function P(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(P(),$e()),n.dispatch(Bee(M.liftActionArgs)),m="DRAGGING";function I(z,K={shouldBlockNextClick:!1}){if(M.cleanup(),K.shouldBlockNextClick){const G=ka(window,[{eventName:"click",fn:Gne,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(G)}P(),n.dispatch(_6({reason:z}))}return{isActive:()=>tb({expected:"DRAGGING",phase:m,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,drop:z=>I("DROP",z),cancel:z=>I("CANCEL",z),...M.actions}}function T(M){const P=Jm(z=>{w(()=>w6({client:z}))});return{..._({liftActionArgs:{id:i,clientSelection:M,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function N(){const M={moveUp:()=>w(Wee),moveRight:()=>w(Zee),moveDown:()=>w(Vee),moveLeft:()=>w(Xee)};return _({liftActionArgs:{id:i,clientSelection:Lne(d),movementMode:"SNAP"},cleanup:tc,actions:M})}function j(){tb({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>tb({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,fluidLift:T,snapLift:N,abort:j}}const qne=[kne,Ane,Dne];function Kne({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const a=[...i?qne:[],...r||[]],o=S.useState(()=>une())[0],l=et(function(_,T){ip(_)&&!ip(T)&&o.tryAbandon()},[o]);Qi(function(){let _=t.getState();return t.subscribe(()=>{const N=t.getState();l(_,N),_=N})},[o,t,l]),Qi(()=>o.tryAbandon,[o.tryAbandon]);const u=et(w=>F6({lockAPI:o,registry:n,store:t,draggableId:w}),[o,n,t]),d=et((w,_,T)=>Yne({lockAPI:o,registry:n,contextId:e,store:t,draggableId:w,forceSensorStop:_||null,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null}),[e,o,n,t]),h=et(w=>Fne(e,w),[e]),m=et(w=>{const _=n.draggable.findById(w);return _?_.options:null},[n.draggable]),b=et(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Xj()))},[o,t]),y=et(()=>o.isClaimed(),[o]),k=Ct(()=>({canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:m,tryReleaseLock:b,isLockClaimed:y}),[u,d,h,m,b,y]);for(let w=0;w<a.length;w++)a[w](k)}const Wne=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Bu.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Vne=e=>({...rp,...e.autoScrollerOptions,durationDampening:{...rp.durationDampening,...e.autoScrollerOptions}});function sm(e){return e.current||$e(),e.current}function Zne(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=S.useRef(null),l=L6(e),u=et(()=>Wne(l.current),[l]),d=et(()=>Vne(l.current),[l]),h=one(t),m=cne({contextId:t,text:a}),b=Qte(t,i),y=et(G=>{sm(o).dispatch(G)},[]),k=Ct(()=>AD({publishWhileDragging:Uee,updateDroppableScroll:Hee,updateDroppableIsEnabled:Gee,updateDroppableIsCombineEnabled:Yee,collectionStarting:Fee},y),[y]),w=rne(),_=Ct(()=>Cte(w,k),[w,k]),T=Ct(()=>Wte({scrollWindow:Mte,scrollDroppable:_.scrollDroppable,getAutoScrollerOptions:d,...AD({move:w6},y)}),[_.scrollDroppable,y,d]),N=tne(t),j=Ct(()=>Tte({announce:h,autoScroller:T,dimensionMarshal:_,focusMarshal:N,getResponders:u,styleMarshal:b}),[h,T,_,N,u,b]);o.current=j;const C=et(()=>{const G=sm(o);G.getState().phase!=="IDLE"&&G.dispatch(Xj())},[]),M=et(()=>{const G=sm(o).getState();return G.phase==="DROP_ANIMATING"?!0:G.phase==="IDLE"?!1:G.isDragging},[]),P=Ct(()=>({isDragging:M,tryAbort:C}),[M,C]);n(P);const I=et(G=>O6(sm(o).getState(),G),[]),z=et(()=>uu(sm(o).getState()),[]),K=Ct(()=>({marshal:_,focus:N,contextId:t,canLift:I,isMovementAllowed:z,dragHandleUsageInstructionsId:m,registry:w}),[t,_,m,N,I,z,w]);return Kne({contextId:t,store:j,registry:w,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),S.useEffect(()=>C,[C]),on.createElement(_x.Provider,{value:K},on.createElement(W4,{context:iT,store:j},e.children))}function Xne(){return on.useId()}function zp(e){const t=Xne(),n=e.dragHandleUsageInstructions||sy.dragHandleUsageInstructions;return on.createElement(AQ,null,r=>on.createElement(Zne,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const rP={dragging:5e3,dropAnimating:4500},Jne=(e,t)=>t?Um.drop(t.duration):e?Um.snap:Um.fluid,Qne=(e,t)=>{if(e)return t?np.opacity.drop:np.opacity.combining},ere=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function tre(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:a}=e,o=!!i,l=ere(e),u=!!a,d=u?BE.drop(r,o):BE.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Jne(l,a),transform:d,opacity:Qne(o,u),zIndex:u?rP.dropAnimating:rP.dragging,pointerEvents:"none"}}function nre(e){return{transform:BE.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function rre(e){return e.type==="DRAGGING"?tre(e):nre(e)}function ire(e,t,n=_r){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=V4(i,r),o=$y(a,n),l={client:a,tagName:t.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:u,client:a,page:o}}function are(e){const t=aT("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}=e,u=Ct(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}),[a,l,o]),d=et(y=>{const k=i();return k||$e(),ire(n,k,y)},[n,i]),h=Ct(()=>({uniqueId:t,descriptor:n,options:u,getDimension:d}),[n,d,u,t]),m=S.useRef(h),b=S.useRef(!0);Qi(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),Qi(()=>{if(b.current){b.current=!1;return}const y=m.current;m.current=h,r.draggable.update(h,y)},[h,r.draggable])}var sT=on.createContext(null);function Gy(e){const t=S.useContext(e);return t||$e(),t}function ore(e){e.preventDefault()}const sre=e=>{const t=S.useRef(null),n=et((P=null)=>{t.current=P},[]),r=et(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=Gy(_x),{type:l,droppableId:u}=Gy(sT),d=Ct(()=>({id:e.draggableId,index:e.index,type:l,droppableId:u}),[e.draggableId,e.index,l,u]),{children:h,draggableId:m,isEnabled:b,shouldRespectForcePress:y,canDragInteractiveElements:k,isClone:w,mapped:_,dropAnimationFinished:T}=e;if(!w){const P=Ct(()=>({descriptor:d,registry:o,getDraggableRef:r,canDragInteractiveElements:k,shouldRespectForcePress:y,isEnabled:b}),[d,o,r,k,y,b]);are(P)}const N=Ct(()=>b?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:ore}:null,[i,a,m,b]),j=et(P=>{_.type==="DRAGGING"&&_.dropping&&P.propertyName==="transform"&&Bu.flushSync(T)},[T,_]),C=Ct(()=>{const P=rre(_),I=_.type==="DRAGGING"&&_.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":m,style:P,onTransitionEnd:I},dragHandleProps:N}},[i,N,m,_,j,n]),M=Ct(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return on.createElement(on.Fragment,null,h(C,_.snapshot,M))};var H6=(e,t)=>e===t,G6=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const lre=e=>e.combine?e.combine.draggableId:null,cre=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function ure(){const e=wr((i,a)=>({x:i,y:a})),t=wr((i,a,o=null,l=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null})),n=wr((i,a,o,l,u=null,d=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:h,snapshot:t(a,l,u,d,null)}}));return(i,a)=>{if(ip(i)){if(i.critical.draggable.id!==a.draggableId)return null;const o=i.current.client.offset,l=i.dimensions.draggables[a.draggableId],u=Ji(i.impact),d=cre(i.impact),h=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,l,a.isClone,u,d,h)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==a.draggableId)return null;const l=a.isClone,u=i.dimensions.draggables[a.draggableId],d=o.result,h=d.mode,m=G6(d),b=lre(d),k={duration:i.dropDuration,curve:Qj.drop,moveTo:i.newHomeClientOffset,opacity:b?np.opacity.drop:null,scale:b?np.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:k,draggingOver:m,combineWith:b,mode:h,forceShouldAnimate:null,snapshot:t(h,l,m,b,k)}}}return null}}function Y6(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const dre={mapped:{type:"SECONDARY",offset:_r,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Y6(null)}};function fre(){const e=wr((o,l)=>({x:o,y:l})),t=wr(Y6),n=wr((o,l=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:t(l)}})),r=o=>o?n(_r,o,!0):null,i=(o,l,u,d)=>{const h=u.displaced.visible[o],m=!!(d.inVirtualList&&d.effected[o]),b=yx(u),y=b&&b.draggableId===o?l:null;if(!h){if(!m)return r(y);if(u.displaced.invisible[o])return null;const _=Rf(d.displacedBy.point),T=e(_.x,_.y);return n(T,y,!0)}if(m)return r(y);const k=u.displacedBy.point,w=e(k.x,k.y);return n(w,y,h.shouldAnimate)};return(o,l)=>{if(ip(o))return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const hre=()=>{const e=ure(),t=fre();return(r,i)=>e(r,i)||t(r,i)||dre},mre={dropAnimationFinished:S6},pre=K4(hre,mre,null,{context:iT,areStatePropsEqual:H6})(sre);function q6(e){return Gy(sT).isUsingCloneFor===e.draggableId&&!e.isClone?null:on.createElement(pre,e)}function $f(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return on.createElement(q6,By({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const K6=e=>t=>e===t,gre=K6("scroll"),bre=K6("auto"),iP=(e,t)=>t(e.overflowX)||t(e.overflowY),yre=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return iP(n,gre)||iP(n,bre)},vre=()=>!1,W6=e=>e==null?null:e===document.body?vre()?e:null:e===document.documentElement?null:yre(e)?e:W6(e.parentElement);var FE=e=>({x:e.scrollLeft,y:e.scrollTop});const V6=e=>e?window.getComputedStyle(e).position==="fixed"?!0:V6(e.parentElement):!1;var xre=e=>{const t=W6(e),n=V6(e);return{closestScrollable:t,isFixedOnPage:n}},wre=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:l})=>{const u=(()=>{if(!l)return null;const{scrollSize:b,client:y}=l,k=T6({scrollHeight:b.scrollHeight,scrollWidth:b.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:y,scrollSize:b,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:k,diff:{value:_r,displacement:_r}}}})(),d=i==="vertical"?qj:o6,h=gf({page:o,withPlaceholder:null,axis:d,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:a,page:o,frame:u,subject:h}};const _re=(e,t)=>{const n=Z4(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,u=Fj({top:r,right:o,bottom:a,left:i},n.border);return Hj({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Sre=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:l})=>{const u=n.closestScrollable,d=_re(e,u),h=$y(d,r),m=(()=>{if(!u)return null;const y=Z4(u),k={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:y,page:$y(y,r),scroll:FE(u),scrollSize:k,shouldClipSubject:l}})();return wre({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:h,closest:m})};const kre={passive:!1},Ere={passive:!0};var aP=e=>e.shouldPublishImmediately?kre:Ere;const nb=e=>e&&e.env.closestScrollable||null;function jre(e){const t=S.useRef(null),n=Gy(_x),r=aT("droppable"),{registry:i,marshal:a}=n,o=L6(e),l=Ct(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=S.useRef(l),d=Ct(()=>wr((C,M)=>{t.current||$e();const P={x:C,y:M};a.updateDroppableScroll(l.id,P)}),[l.id,a]),h=et(()=>{const C=t.current;return!C||!C.env.closestScrollable?_r:FE(C.env.closestScrollable)},[]),m=et(()=>{const C=h();d(C.x,C.y)},[h,d]),b=Ct(()=>Jm(m),[m]),y=et(()=>{const C=t.current,M=nb(C);if(C&&M||$e(),C.scrollOptions.shouldPublishImmediately){m();return}b()},[b,m]),k=et((C,M)=>{t.current&&$e();const P=o.current,I=P.getDroppableRef();I||$e();const z=xre(I),K={ref:I,descriptor:l,env:z,scrollOptions:M};t.current=K;const G=Sre({ref:I,descriptor:l,env:z,windowScroll:C,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),H=z.closestScrollable;return H&&(H.setAttribute(QD.contextId,n.contextId),H.addEventListener("scroll",y,aP(K.scrollOptions))),G},[n.contextId,l,y,o]),w=et(()=>{const C=t.current,M=nb(C);return C&&M||$e(),FE(M)},[]),_=et(()=>{const C=t.current;C||$e();const M=nb(C);t.current=null,M&&(b.cancel(),M.removeAttribute(QD.contextId),M.removeEventListener("scroll",y,aP(C.scrollOptions)))},[y,b]),T=et(C=>{const M=t.current;M||$e();const P=nb(M);P||$e(),P.scrollTop+=C.y,P.scrollLeft+=C.x},[]),N=Ct(()=>({getDimensionAndWatchScroll:k,getScrollWhileDragging:w,dragStopped:_,scroll:T}),[_,k,w,T]),j=Ct(()=>({uniqueId:r,descriptor:l,callbacks:N}),[N,l,r]);Qi(()=>(u.current=j.descriptor,i.droppable.register(j),()=>{t.current&&_(),i.droppable.unregister(j)}),[N,l,_,j,a,i.droppable]),Qi(()=>{t.current&&a.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Qi(()=>{t.current&&a.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function G1(){}const oP={width:0,height:0,margin:RQ},Tre=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?oP:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Are=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Tre({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Um.placeholder:null}},Nre=e=>{const t=S.useRef(null),n=et(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[l,u]=S.useState(e.animate==="open");S.useEffect(()=>l?r!=="open"?(n(),u(!1),G1):t.current?G1:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):G1,[r,l,n]);const d=et(m=>{m.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),h=Are({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return on.createElement(e.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var Ore=on.memo(Nre);class Cre extends on.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Mre=e=>{const t=S.useContext(_x);t||$e();const{contextId:n,isMovementAllowed:r}=t,i=S.useRef(null),a=S.useRef(null),{children:o,droppableId:l,type:u,mode:d,direction:h,ignoreContainerClipping:m,isDropDisabled:b,isCombineEnabled:y,snapshot:k,useClone:w,updateViewportMaxScroll:_,getContainerForClone:T}=e,N=et(()=>i.current,[]),j=et((H=null)=>{i.current=H},[]);et(()=>a.current,[]);const C=et((H=null)=>{a.current=H},[]),M=et(()=>{r()&&_({maxScroll:N6()})},[r,_]);jre({droppableId:l,type:u,mode:d,direction:h,isDropDisabled:b,isCombineEnabled:y,ignoreContainerClipping:m,getDroppableRef:N});const P=Ct(()=>on.createElement(Cre,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:H,data:B,animate:q})=>on.createElement(Ore,{placeholder:B,onClose:H,innerRef:C,animate:q,contextId:n,onTransitionEnd:M})),[n,M,e.placeholder,e.shouldAnimatePlaceholder,C]),I=Ct(()=>({innerRef:j,placeholder:P,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,P,j]),z=w?w.dragging.draggableId:null,K=Ct(()=>({droppableId:l,type:u,isUsingCloneFor:z}),[l,z,u]);function G(){if(!w)return null;const{dragging:H,render:B}=w,q=on.createElement(q6,{draggableId:H.draggableId,index:H.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(X,V)=>B(X,V,H));return LK.createPortal(q,T())}return on.createElement(sT.Provider,{value:K},o(I,k),G())};function Dre(){return document.body||$e(),document.body}const sP={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Dre},Z6=e=>{let t={...e},n;for(n in sP)e[n]===void 0&&(t={...t,[n]:sP[n]});return t},Y1=(e,t)=>e===t.droppable.type,lP=(e,t)=>t.draggables[e.draggable.id],Pre=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=wr(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=wr((a,o,l,u,d,h)=>{const m=d.descriptor.id;if(d.descriptor.droppableId===a){const k=h?{render:h,dragging:n(d.descriptor)}:null,w={isDraggingOver:l,draggingOverWith:l?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:w,useClone:k}}if(!o)return t;if(!u)return e;const y={isDraggingOver:l,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(a,o)=>{const l=Z6(o),u=l.droppableId,d=l.type,h=!l.isDropDisabled,m=l.renderClone;if(ip(a)){const b=a.critical;if(!Y1(d,b))return t;const y=lP(b,a.dimensions),k=Ji(a.impact)===u;return r(u,h,k,k,y,m)}if(a.phase==="DROP_ANIMATING"){const b=a.completed;if(!Y1(d,b.critical))return t;const y=lP(b.critical,a.dimensions);return r(u,h,G6(b.result)===u,Ji(b.impact)===u,y,m)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const b=a.completed;if(!Y1(d,b.critical))return t;const y=Ji(b.impact)===u,k=!!(b.impact.at&&b.impact.at.type==="COMBINE"),w=b.critical.droppable.id===u;return y?k?e:t:w?e:t}return t}},Rre={updateViewportMaxScroll:Kee},Bf=K4(Pre,Rre,(e,t,n)=>({...Z6(n),...e,...t}),{context:iT,areStatePropsEqual:H6})(Mre),Lre={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function ap(e,t,n){const r=Lre[e];if(!r)return!1;const i=new Date(e,t-1,n,0,0,0,0);return i>=r.start&&i<r.end}function Ire(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),i=Math.floor((e.getTime()-n)/864e5)+1,a=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds(),u=(a-12)/24+o/1440+l/86400,d=2*Math.PI/365*(i-1+u);return 229.18*(75e-6+.001868*Math.cos(d)-.032077*Math.sin(d)-.014615*Math.cos(2*d)-.040849*Math.sin(2*d))}function $re(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function Up(e,t,n=!1){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(r.getTime()-1800*1e3);if(t==null||!isFinite(t))return r;let i=t;Math.abs(i)<=Math.PI+1e-6&&(i=i*180/Math.PI),i=(i+540)%360-180;const a=$re(i),o=4*(i-a),l=Ire(r);return new Date(r.getTime()+(o+l)*60*1e3)}function X6(e){return e.replace(/\D/g,"")}function Bre(e,t,n){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(n)||e<1800||e>2200||t<1||t>12||n<1||n>31)return!1;const r=new Date(e,t-1,n);return r.getFullYear()===e&&r.getMonth()+1===t&&r.getDate()===n}function zre(e,t){return!(!Number.isFinite(e)||!Number.isFinite(t)||e<0||e>23||t<0||t>59)}function zf(e){const t=X6(e.trim());if(t.length!==8)return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8));return Bre(n,r,i)?{y:n,m:r,d:i}:null}function Fp(e){const t=e.trim();if(!t||t==="")return null;const n=X6(t);if(n.length!==4)return null;const r=Number(n.slice(0,2)),i=Number(n.slice(2,4));return zre(r,i)?{hh:r,mm:i}:null}function kx(e){const t=e.trim(),n=zf(t);if(!n)return t;const r=String(n.y).padStart(4,"0"),i=String(n.m).padStart(2,"0"),a=String(n.d).padStart(2,"0");return`${r}${i}${a}`}function Ex(e){const t=e.trim();if(t==="")return"";const n=Fp(t);if(!n)return t;const r=String(n.hh).padStart(2,"0"),i=String(n.mm).padStart(2,"0");return`${r}${i}`}var ly={exports:{}},Ure=ly.exports,cP;function Fre(){return cP||(cP=1,(function(e,t){(function(n,r){e.exports=r()})(Ure,function(){return(function(n){function r(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var i={};return r.m=n,r.c=i,r.d=function(a,o,l){r.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},r.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(o,"a",o),o},r.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},r.p="",r(r.s=0)})([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(l){return l&&l.__esModule?l:{default:l}})(a);r.default=o.default,n.exports=r.default},function(n,r,i){function a(q){return q&&q.__esModule?q:{default:q}}Object.defineProperty(r,"__esModule",{value:!0});var o=i(2),l=a(o),u=i(3),d=a(u),h=i(4),m=a(h),b=i(5),y=a(b),k=i(6),w=a(k),_=i(7),T=a(_),N=i(8),j=a(N),C=i(9),M=a(C),P=i(10),I=a(P),z=i(11),K=a(z),G=i(12),H=a(G),B={lunarInfo:l.default,solarMonth:d.default,gan:m.default,zhi:y.default,animals:w.default,lunarTerm:T.default,lTermInfo:j.default,nStr1:M.default,nStr2:I.default,nStr3:K.default,nStr4:H.default,lYearDays:function(q){var X,V=348;for(X=32768;X>8;X>>=1)V+=B.lunarInfo[q-1900]&X?1:0;return V+B.leapDays(q)},leapMonth:function(q){return 15&B.lunarInfo[q-1900]},leapDays:function(q){return B.leapMonth(q)?65536&B.lunarInfo[q-1900]?30:29:0},monthDays:function(q,X){return X>12||X<1?-1:B.lunarInfo[q-1900]&65536>>X?30:29},solarDays:function(q,X){if(X>12||X<1)return-1;var V=X-1;return V==1?q%4==0&&q%100!=0||q%400==0?29:28:B.solarMonth[V]},toGanZhi:function(q){return B.gan[q%10]+B.zhi[q%12]},getTerm:function(q,X){if(q<1900||q>2100||X<1||X>24)return-1;var V=B.lTermInfo[q-1900],F=[parseInt("0x"+V.substr(0,5)).toString(),parseInt("0x"+V.substr(5,5)).toString(),parseInt("0x"+V.substr(10,5)).toString(),parseInt("0x"+V.substr(15,5)).toString(),parseInt("0x"+V.substr(20,5)).toString(),parseInt("0x"+V.substr(25,5)).toString()],Z=[F[0].substr(0,1),F[0].substr(1,2),F[0].substr(3,1),F[0].substr(4,2),F[1].substr(0,1),F[1].substr(1,2),F[1].substr(3,1),F[1].substr(4,2),F[2].substr(0,1),F[2].substr(1,2),F[2].substr(3,1),F[2].substr(4,2),F[3].substr(0,1),F[3].substr(1,2),F[3].substr(3,1),F[3].substr(4,2),F[4].substr(0,1),F[4].substr(1,2),F[4].substr(3,1),F[4].substr(4,2),F[5].substr(0,1),F[5].substr(1,2),F[5].substr(3,1),F[5].substr(4,2)];return parseInt(Z[X-1])},toChinaYear:function(q){var X=parseInt(q/1e3),V=parseInt(q%1e3/100),F=parseInt(q%100/10),Z=q%10;return B.nStr4[X]+B.nStr4[V]+B.nStr4[F]+B.nStr4[Z]+""},toChinaMonth:function(q){if(q>12||q<1)return-1;var X=B.nStr3[q-1];return X+=""},toChinaDay:function(q){var X;switch(q){case 10:X="";break;case 20:X="";break;case 30:X="";break;default:X=B.nStr2[Math.floor(q/10)],X+=B.nStr1[q%10]}return X},getAnimal:function(q){return B.animals[(q-4)%12]},solar2lunar:function(le,se,W){if(le<1900||le>2100||le==1900&&se==1&&W<31)return-1;if(le)var F=new Date(le,parseInt(se)-1,W);else var F=new Date;var Z,pe=0,Q=0,le=F.getFullYear(),se=F.getMonth()+1,W=F.getDate(),re=(Date.UTC(F.getFullYear(),F.getMonth(),F.getDate())-Date.UTC(1900,0,31))/864e5;for(Z=1900;Z<2101&&re>0;Z++)Q=B.lYearDays(Z),re-=Q;re<0&&(re+=Q,Z--);var ee=new Date,he=!1;ee.getFullYear()==le&&ee.getMonth()+1==se&&ee.getDate()==W&&(he=!0);var J=F.getDay(),ae=B.nStr1[J];J==0&&(J=7);var me=Z,pe=B.leapMonth(Z),te=!1;for(Z=1;Z<13&&re>0;Z++)pe>0&&Z==pe+1&&te==0?(--Z,te=!0,Q=B.leapDays(me)):Q=B.monthDays(me,Z),te==1&&Z==pe+1&&(te=!1),re-=Q;re==0&&pe>0&&Z==pe+1&&(te?te=!1:(te=!0,--Z)),re<0&&(re+=Q,--Z);var je=Z,xe=re+1,ue=se-1,Ee=B.getTerm(le,3),Me=B.toGanZhi(le-4),Ie=new Date(le,1,Ee).getTime();new Date(le,ue,W).getTime()<Ie&&(Me=B.toGanZhi(le-5));var Ke=B.getTerm(le,2*se-1),mt=B.getTerm(le,2*se),pt=B.toGanZhi(12*(le-1900)+se+11);W>=Ke&&(pt=B.toGanZhi(12*(le-1900)+se+12));var De=!1,ze="";Ke==W&&(De=!0,ze=B.lunarTerm[2*se-2]),mt==W&&(De=!0,ze=B.lunarTerm[2*se-1]);var Ge=Date.UTC(le,ue,1,0,0,0,0)/864e5+25567+10,oe=B.toGanZhi(Ge+W-1);return{lYear:me,lMonth:je,lDay:xe,animal:B.getAnimal(me),yearCn:B.toChinaYear(me),monthCn:(te&&pe===je?"":"")+B.toChinaMonth(je),dayCn:B.toChinaDay(xe),cYear:le,cMonth:se,cDay:W,gzYear:Me,gzMonth:pt,gzDay:oe,isToday:he,isLeap:te,nWeek:J,ncWeek:""+ae,isTerm:De,term:ze}},lunar2solar:function(q,X,V,F){var Z=B.leapMonth(q);if(B.leapDays(q),F&&Z!=X||q==2100&&X==12&&V>1||q==1900&&X==1&&V<31)return-1;var Q=B.monthDays(q,X);if(q<1900||q>2100||V>Q)return-1;for(var le=0,se=1900;se<q;se++)le+=B.lYearDays(se);for(var W=0,re=!1,se=1;se<X;se++)W=B.leapMonth(q),re||W<=se&&W>0&&(le+=B.leapDays(q),re=!0),le+=B.monthDays(q,se);F&&(le+=Q);var ee=Date.UTC(1900,1,30,0,0,0),he=new Date(864e5*(le+V-31)+ee),J=he.getUTCFullYear(),ae=he.getUTCMonth()+1,me=he.getUTCDate();return B.solar2lunar(J,ae,me)}};r.default=B,n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default}])})})(ly)),ly.exports}var J6=Fre();const Hre=Ci(J6),Gre=bj({__proto__:null,default:Hre},[J6]);function lT(e){return typeof e=="object"&&e!==null}function Yre(e){return lT(e)&&"default"in e}function qre(e){return lT(e)&&typeof e.lunar2solar=="function"}function Kre(e){if(!lT(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,r=e.cDay,i=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof r!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:r,isLeap:typeof i=="boolean"?i:void 0}}function Wre(e){const t=Yre(e)?e.default:e;if(!qre(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(r,i,a,o)=>{const l=t.lunar2solar(r,i,a,o);return Kre(l)}}}const Vre=Wre(Gre);function ia(e,t,n,r=4,i=0){const a=Vre.lunar2solar(e,t,n,!1);return new Date(a.cYear,a.cMonth-1,a.cDay,r,i)}const uP=e=>e<10?`0${e}`:`${e}`;function Uf(e){if(e.calendarType!=="lunar")return e;const t=zf(e.birthDay??"");if(!t)return e;try{const n=ia(t.y,t.m,t.d,0,0),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate();return{...e,birthDay:`${r}${uP(i)}${uP(a)}`,calendarType:"solar"}}catch{return e}}function cT(e){const t=e.mingSikType??"/",n=zf(e.birthDay??"");if(!n){const C=e.corrected instanceof Date?e.corrected:new Date(NaN),M=typeof e.ganji=="string"?e.ganji:"",P=typeof e.ganjiText=="string"?e.ganjiText:M,I=typeof e.dayStem=="string"?e.dayStem:"";return{corrected:C,correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganji:M,ganjiText:P,dayStem:I}}let r=n.y,i=n.m,a=n.d;if(e.calendarType==="lunar")try{const C=ia(r,i,a,0,0);r=C.getFullYear(),i=C.getMonth()+1,a=C.getDate()}catch{}const o=Fp(e.birthTime??""),l=!e.birthTime||e.birthTime===""||!o,u=l?4:o.hh,d=l?30:o.mm,h=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,m=new Date(r,i-1,a,u,d,0,0),b=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",y=Up(m,h,b),k=l?"":y.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=ut(y,h),_=Ot(y,h),T=dt(y,t),N=l?null:Ni(y,t),j=[` : ${w} ${_} ${T}`,N?`${N}`:null].filter(Boolean).join(" ");return{corrected:y,correctedLocal:k,ganji:j,ganjiText:j,dayStem:T.charAt(0)}}function dP(e,t){return e instanceof Date&&!Number.isNaN(e.getTime())?e:t}function Hp(e){return(typeof e=="string"?e.trim():"")===""?"":""}function fP(e){if(typeof e!="string")return null;const t=e.match(/\s*:\s*(.)/);return t?t[1]:null}function Zre(e){const t=fP(e.ganjiText)??fP(e.ganji);if(!t)return"forward";const r=["","","","",""].includes(t),i=Hp(e.gender)==="";return r?i?"forward":"backward":i?"backward":"forward"}function op(e){const t={...e,birthDay:kx(e.birthDay??""),birthTime:e.birthTime===""?"":Ex(e.birthTime??""),gender:Hp(e.gender),dateObj:dP(e.dateObj,new Date),corrected:dP(e.corrected,new Date(NaN)),correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganjiText:typeof e.ganjiText=="string"?e.ganjiText:"",ganji:typeof e.ganji=="string"?e.ganji:"",dayStem:typeof e.dayStem=="string"?e.dayStem:"",calendarType:e.calendarType==="lunar"?"lunar":"solar",dir:e.dir==="backward"?"backward":"forward"},n=cT(t),r={...t,...n};return{...r,dir:Zre(r)}}function Xre(e){return e===""||e==="/"||e===""?e:"/"}function Jre(e){return e==="lunar"?"lunar":"solar"}function Qre(e,t){if(t||!e||e.name==="")return{name:"",lat:0,lon:127.5};const n=Number.isFinite(e.lat)?e.lat:0,r=Number.isFinite(e.lon)?e.lon:127.5;return{name:typeof e.name=="string"&&e.name.trim()?e.name.trim():"",lat:n,lon:r}}function eie(e,t){const n=typeof e=="string"?e.trim():"";return n?{ok:!0,value:n}:t?{ok:!1,message:" ."}:{ok:!0,value:""}}function uT(e,t){const r=kx(typeof e=="string"?e:""),i=zf(r);if(!i)return{ok:!1,message:"(YYYYMMDD)  ."};if(i.y<1900||i.y>2100)return{ok:!1,message:"(YYYY) 1900~2100  ."};if(t==="solar"){const a=new Date(i.y,i.m-1,i.d);if(a.getFullYear()!==i.y||a.getMonth()+1!==i.m||a.getDate()!==i.d)return{ok:!1,message:"  ."}}else try{ia(i.y,i.m,i.d,0,0)}catch{return{ok:!1,message:"      ."}}return{ok:!0,value:r}}function dT(e,t){if(t)return{ok:!0,value:""};const r=Ex(typeof e=="string"?e:"");return Fp(r)?{ok:!0,value:r}:{ok:!1,message:"  HHmm  ."}}function Q6(e,t){const n=t?.requireName??!1,r=eie(e.name,n);if(!r.ok)return r;const i=Jre(e.calendarType),a=uT(e.birthDay,i);if(!a.ok)return a;const o=dT(e.birthTime,e.unknownTime);if(!o.ok)return o;const l=Xre(e.mingSikType),u={id:e.id,name:r.value,birthDay:a.value,birthTime:o.value,gender:Hp(e.gender),sortOrder:e.sortOrder,birthPlace:Qre(e.birthPlace,e.unknownPlace),relationship:e.relationship??"",memo:e.memo??"",folder:e.folder,mingSikType:l,DayChangeRule:l===""?"":"",favorite:e.favorite??!1,deletedAt:e.deletedAt??null,dateObj:e.dateObj??new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:i,dir:"forward"};return{ok:!0,value:op(u)}}function Go(e,t=0){const n=Uf(e),r=zf(n.birthDay??"");if(!r)throw new Error(`Invalid date: ${e.birthDay}`);const i=Fp(n.birthTime??""),a=!i,o=a?4:i.hh,l=a?30:i.mm,u=new Date(r.y,r.m-1,r.d,o,l,0,0);if(Number.isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const d=!n.birthPlace||typeof n.birthPlace=="object"&&n.birthPlace.name==="",h=n.birthPlace?.lon??127.5,m=Up(u,h,d);return t!==0?new Date(m.getTime()+t*60*1e3):m}function tie(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function bu(e){return[...e].sort((t,n)=>{const r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:-1,i=typeof n.sortOrder=="number"&&Number.isFinite(n.sortOrder)?n.sortOrder:-1;if(r!==i)return r-i;const a=(t.name??"").toString(),o=(n.name??"").toString(),l=a.localeCompare(o);return l!==0?l:t.id.localeCompare(n.id)})}function HE(e){if(!tie(e))return null;const t=typeof e.id=="string"?e.id:null,n=typeof e.user_id=="string"?e.user_id:null;if(!t||!n)return null;const r=o=>typeof o=="number"&&Number.isFinite(o)?o:null,i=o=>typeof o=="string"?o:null,a=o=>typeof o=="boolean"?o:null;return{id:t,user_id:n,name:i(e.name),birth_day:i(e.birth_day),birth_time:i(e.birth_time),gender:i(e.gender),birth_place_name:i(e.birth_place_name),birth_place_lat:r(e.birth_place_lat),birth_place_lon:r(e.birth_place_lon),relationship:i(e.relationship),memo:i(e.memo),folder:i(e.folder),ming_sik_type:i(e.ming_sik_type),day_change_rule:i(e.day_change_rule),calendar_type:i(e.calendar_type),favorite:a(e.favorite),sort_order:typeof e.sort_order=="string"||typeof e.sort_order=="number"?e.sort_order:null,created_at:i(e.created_at),deleted_at:i(e.deleted_at),updated_at:i(e.updated_at)}}function e7(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),r=typeof n=="number"&&Number.isFinite(n)?n:void 0,i={id:e.id,name:e.name??"",birthDay:kx(e.birth_day??""),birthTime:Ex(e.birth_time??""),gender:Hp(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,deletedAt:e.deleted_at??null,sortOrder:r,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:e.calendar_type==="lunar"?"lunar":"solar",dir:"forward"};return op(i)}function nie(e,t){const n=typeof e.folder=="string"?e.folder.trim():"",r=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,sort_order:r,folder:n||null,favorite:!!e.favorite,updated_at:new Date().toISOString()}}function hP(e,t){const n=kx(e.birthDay??""),r=Ex(e.birthTime??""),i=e.birthPlace??{name:"",lat:0,lon:127.5},a=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:n||null,birth_time:r||null,gender:Hp(e.gender),birth_place_name:i.name??null,birth_place_lat:typeof i.lat=="number"?i.lat:null,birth_place_lon:typeof i.lon=="number"?i.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:typeof e.folder=="string"?e.folder:null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,calendar_type:e.calendarType??"solar",favorite:e.favorite??!1,deleted_at:e.deletedAt??null,sort_order:a,updated_at:new Date().toISOString()}}const GE="hm_session_started_at_ms",rie=7200*1e3;function t7(){return typeof window>"u"?null:window.localStorage}function iie(){const e=t7();if(!e)return Date.now();const t=e.getItem(GE),n=t?Number(t):NaN;if(Number.isFinite(n))return n;const r=Date.now();return e.setItem(GE,String(r)),r}function n7(e=Date.now()){const t=t7();if(t)try{t.setItem(GE,String(e))}catch{}}function aie(e=Date.now()){const t=iie();return e-t>=rie}const rb="myeongsik-list";function oie(e){try{return JSON.parse(e)}catch{return null}}async function sie(e){if(typeof window>"u")return;const t=window.localStorage.getItem(rb);if(!t)return;const n=oie(t);if(!n){window.localStorage.removeItem(rb);return}const r=n.state??{},i=Array.isArray(r.list)?r.list:[];if(i.length===0){window.localStorage.removeItem(rb);return}const a=await e.getUser();if(!a)return;const o=await e.fetchRows(a.id),l=new Set(o.map(d=>d.id)),u=i.filter(d=>!!d&&typeof d.id=="string"&&d.id.trim()!==""&&!l.has(d.id));for(const d of u)await e.upsertOne(a.id,d);window.localStorage.removeItem(rb)}const lie=250;function cie(e){return e.map(t=>{const n=typeof t.folder=="string"?t.folder.trim():"",r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:"",i=t.favorite?1:0;return`${t.id}:${r}:${n}:${i}`}).join("|")}function uie(e){if(typeof window>"u")return;const t=window,n="__hm_reorder_flush_installed__";t[n]!==!0&&(t[n]=!0,window.addEventListener("beforeunload",()=>e()),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}))}function die(e){let t=null,n=null,r=!1,i="";async function a(){if(!r){r=!0;try{for(;n;){const l=n;if(n=null,l.key&&l.key===i){l.resolve();continue}const u=await e.getUser();if(!u){console.warn("reorder flush skipped: no user"),l.resolve();continue}await e.upsertOrderPatch(u.id,l.list),i=l.key,l.resolve()}}finally{r=!1}}}uie(()=>{a()});function o(l,u){const d=cie(l);if(d&&d===i&&!n)return Promise.resolve();if(n)n.key=d,n.list=l;else{let h;const m=new Promise(b=>{h=b});n={key:d,list:l,promise:m,resolve:h}}return typeof window>"u"?(a(),n.promise):(t&&window.clearTimeout(t),u?.immediate?a():t=window.setTimeout(()=>{t=null,a()},lie),n.promise)}return{queue:o,flushNow:a}}const xr="__UNASSIGNED__",fie=[" ",""],rc=e=>typeof e=="string"?e.trim():"",r7=e=>fie.includes(e);function Zd(e,t){const n=[],r=[];for(const i of e){const a=rc(i);a&&(t[a]?n.push(a):r.push(a))}return[...n,...r]}function jx(e,t){const n=new Set(t.map(o=>rc(o)).filter(o=>o!=="")),r=new Set,i=Object.create(null),a=(o,l)=>{i[o]||(i[o]=[]),i[o].push(l)};for(const o of e){const l=String(o.id??"");if(!l||r.has(l))continue;r.add(l);const u=rc(o.folder),d=!u||r7(u)?xr:n.has(u)?u:xr;a(d,o)}i[xr]||(i[xr]=[]);for(const o of t){const l=rc(o);l&&(i[l]||(i[l]=[]))}return i}function fT(e,t){const n=[];for(const i of t){const a=rc(i);if(!a)continue;const o=e[a];Array.isArray(o)&&n.push(...o)}const r=e[xr];return Array.isArray(r)&&r.length&&n.push(...r),n}function hie(e){const{list:t,orderedFolders:n,source:r,destination:i}=e,a=jx(t,n),o=r.droppableId===xr?xr:r.droppableId,l=i.droppableId===xr?xr:i.droppableId,u=[...a[o]??[]],d=o===l?u:[...a[l]??[]],h=u[r.index];if(!h)return{nextList:t,changedIds:[]};u.splice(r.index,1);const b=o!==l&&l===xr,y=Math.max(0,Math.min(i.index,d.length)),k=b?d.length:y;o===l?u.splice(k,0,h):d.splice(k,0,h);const w=String(h.id),_=new Set([w]),T={...h,folder:l===xr?"":l};return a[o]=u,a[l]=o===l?u:d,a[l]=(a[l]??[]).map(N=>String(N.id)===w?T:N),{nextList:fT(a,n),changedIds:Array.from(_)}}function mie(e){const{list:t,orderedFolders:n,targetId:r,nextFolder:i}=e,a=jx(t,n),o=[...n.map(T=>rc(T)),xr].filter(Boolean);let l=null,u=-1;for(const T of o){const j=(a[T]??[]).findIndex(C=>String(C.id)===r);if(j>=0){l=T,u=j;break}}if(!l||u<0)return{nextList:t,changedIds:[]};const d=[...a[l]??[]],h=d[u];if(!h)return{nextList:t,changedIds:[]};d.splice(u,1);const m=rc(i),b=!m||r7(m)?xr:m,y=l!==b,k=y?[...a[b]??[]]:d,w=String(h.id),_={...h,folder:b===xr?"":b};return y?k.push(_):d.splice(u,0,_),a[l]=d,a[b]=y?k:d,{nextList:fT(a,n),changedIds:[w]}}function pie(e){const{list:t,targetId:n,orderedFolders:r}=e,i=jx(t,r);let a=null,o=null;const l=[...r.map(y=>rc(y)),xr].filter(Boolean);for(const y of l){const k=i[y]??[],w=k.findIndex(_=>String(_.id)===n);if(w>=0){a=y,o=k[w]??null;break}}if(!a||!o)return{nextList:t,nextItem:null};const u=[...i[a]??[]],d=u.findIndex(y=>String(y.id)===n);if(d<0)return{nextList:t,nextItem:null};const h=u[d],m=!h.favorite,b={...h,favorite:m};return u.splice(d,1),m?u.unshift(b):u.push(b),i[a]=u,{nextList:fT(i,r),nextItem:b}}function gie(e){const{list:t,folderName:n}=e,r=n.trim();if(!r)return{nextList:t,changedIds:[]};const i=[],a=[],o=[];for(const l of t){if((l.folder??"").trim()!==r){a.push(l);continue}i.push(String(l.id)),o.push({...l,folder:""})}return{nextList:[...a,...o],changedIds:i}}function i7(e){return e.trim().length>0}const lm=e=>e.toLowerCase().replace(/\s+/g," ").trim(),bie=e=>e.replace(/\D/g,""),yie=e=>{const t=typeof e.birthDay=="string"?e.birthDay:"",n=bie(t);if(n.length!==8)return t?[t]:[];const r=n.slice(0,4),i=n.slice(4,6),a=n.slice(6,8);return[n,`${r}-${i}-${a}`,`${r}.${i}.${a}`,`${r}/${i}/${a}`,`${r}${i}${a}`]},vie=e=>{const t=[],n=typeof e.ganji=="string"?e.ganji:"",r=typeof e.ganjiText=="string"?e.ganjiText:"",i=typeof e.dayStem=="string"?e.dayStem:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},xie=e=>{const t=[],n=typeof e.memo=="string"?e.memo:"",r=typeof e.relationship=="string"?e.relationship:"",i=e.birthPlace&&typeof e.birthPlace=="object"&&typeof e.birthPlace.name=="string"?e.birthPlace.name:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},mP=(e,t,n)=>{const r=lm(t);if(!r)return!0;const i=lm(typeof e.name=="string"?e.name:""),a=yie(e).map(lm),o=vie(e).map(lm),l=xie(e).map(lm),u=h=>h.includes(r),d=h=>h.some(u);switch(n){case"name":return u(i);case"birth":return d(a);case"ganji":return d(o);case"memo":return d(l);case"all":default:return u(i)||d(a)||d(o)||d(l)}};function wie(e){const{search:t,searchMode:n,orderedFolders:r,grouped:i,unassignedItems:a}=e;if(!i7(t)){const d={};for(const h of r){const m=typeof h=="string"?h.trim():"";m&&(d[m]=i[m]??[])}return{filteredGrouped:d,filteredUnassigned:a??[],totalMatches:(a?.length??0)+r.reduce((h,m)=>h+(i[m]?.length??0),0)}}const o={};let l=0;for(const d of r){const h=typeof d=="string"?d.trim():"";if(!h)continue;const b=(i[h]??[]).filter(y=>mP(y,t,n));o[h]=b,l+=b.length}const u=(a??[]).filter(d=>mP(d,t,n));return l+=u.length,{filteredGrouped:o,filteredUnassigned:u,totalMatches:l}}function _ie(e){return"source"in e&&"destination"in e?e:{orderedFolders:e.orderedFolders,source:{droppableId:(e.sourceFolder??xr).toString(),index:e.sourceIndex},destination:{droppableId:(e.destinationFolder??xr).toString(),index:e.destinationIndex}}}function Sie(e,t){const n=String(t.eventType??""),r=HE(t.new),i=HE(t.old),a=r??i;if(!a)return e;if(n==="DELETE"||a.deleted_at)return e.filter(d=>d.id!==a.id);const o=e7(a),u=e.some(d=>d.id===o.id)?e.map(d=>d.id===o.id?o:d):[...e,o];return bu(u)}async function kie(e){if(!e)return;const t=Le;if(typeof t.removeChannel=="function"){await t.removeChannel(e);return}if(typeof t.removeSubscription=="function"){await t.removeSubscription(e);return}}function Eie(){return["id","user_id","name","birth_day","birth_time","gender","birth_place_name","birth_place_lat","birth_place_lon","relationship","memo","folder","ming_sik_type","day_change_rule","calendar_type","favorite","deleted_at","created_at","updated_at","sort_order"].join(", ")}function jie(){return{async getUser(){const{data:e,error:t}=await Le.auth.getUser();return t||!e.user?null:{id:e.user.id}},async fetchRows(e){const{data:t,error:n}=await Le.from("myeongsik").select(Eie()).eq("user_id",e).is("deleted_at",null).order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});return n||!t?[]:(Array.isArray(t)?t:[]).map(i=>HE(i)).filter(i=>i!==null).filter(i=>i.user_id===e)},async upsertOne(e,t){const n=hP(t,e),{error:r}=await Le.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik upsert error:",r)},async updateOne(e,t,n){const r=hP(n,e),{error:i}=await Le.from("myeongsik").update(r).eq("id",t);i&&console.error("myeongsik update error:",i)},async softDelete(e){const t=new Date().toISOString(),{error:n}=await Le.from("myeongsik").update({deleted_at:t}).eq("id",e);n&&console.error("myeongsik softDelete error:",n)},async upsertOrderPatch(e,t){const n=t.map(i=>nie(i,e)),{error:r}=await Le.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik orderPatch upsert error:",r)},async subscribe(e,t,n){const r=Le.channel(`myeongsik:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"myeongsik",filter:`user_id=eq.${e}`},a=>{typeof a!="object"||a===null||t(a)}).subscribe(a=>{n&&n(String(a))});return{async unsubscribe(){await kie(r)}}}}}function Tie(e){return e.trim().toLowerCase().replace(/\s+/g,"").replace(/-/g,"_")}function Dm(e){if(!e)return"FREE";const t=Tie(e);return t==="free"?"FREE":t==="basic"?"BASIC":t==="pro"?"PRO":t==="prompt_hidden"||t==="prompt_hide"||t==="hidden"||t==="hide"||t==="prompt_locked"||t==="prompt_lock"||t==="locked"||t==="lock"?"FREE":t==="prompt_full"||t==="full"?"PRO":t==="ms_all"||t==="msall"||t==="basic_3"||t==="basic3"||t==="basic_5"||t==="basic5"||t==="basic_10"||t==="basic10"?"BASIC":t==="pro_select"||t==="proselect"?"PRO":"FREE"}function YE(e){switch(e){case"FREE":return{maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1};case"BASIC":return{maxMyeongsik:9999,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!1};case"PRO":return{maxMyeongsik:null,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!0}}}const ib={plan:"FREE",maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1,canUseMyoViewer:!1,startsAt:null,expiresAt:null};function Aie(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.floor(e);if(typeof e=="string"&&e.trim()!==""){const n=Number(e);return Number.isFinite(n)?Math.floor(n):t}return t}function pP(e){if(typeof e!="string"||e.trim()==="")return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function gP(e,t,n=Date.now()){return!(e&&e.getTime()>n||t&&t.getTime()<=n)}function Nie(e){return e?e.can_use_myo_viewer===!0:!1}async function Oie(e){const{data:t,error:n}=await Le.from("user_entitlements").select("plan,max_myeongsik,starts_at,expires_at,can_use_myo_viewer").eq("user_id",e).maybeSingle();return n?null:t??null}const vn=Jo((e,t)=>({loaded:!1,loading:!1,userId:null,...ib,reset:()=>{e({loaded:!1,loading:!1,userId:null,...ib})},loadFromServer:async n=>{if(!t().loading){e({loading:!0});try{const{data:i,error:a}=await Le.auth.getUser(),o=i.user?.id??null;if(a||!o){e({...ib,loaded:!0,userId:null});return}const l=t();if(!n?.force&&l.loaded&&l.userId===o)return;const u=await Oie(o);if(!u){const N=YE("FREE");e({loaded:!0,userId:o,plan:"FREE",maxMyeongsik:N.maxMyeongsik===null?9999:N.maxMyeongsik,canManageMyeongsik:N.canManageMyeongsik,canUseLuckTabs:N.canUseLuckTabs,canUseMultiMode:N.canUseMultiMode,canUseAllPrompts:N.canUseAllPrompts,canUseAdvancedReport:N.canUseAdvancedReport,canRemoveAds:N.canRemoveAds,canUseMyoViewer:!1,startsAt:null,expiresAt:null});return}const d=pP(u.starts_at??null),h=pP(u.expires_at??null),m=gP(d,h),b=Dm(u.plan??null),y=m?b:"FREE",k=YE(y),w=k.maxMyeongsik===null?9999:k.maxMyeongsik,_=Aie(u.max_myeongsik,w),T=Math.max(1,Math.max(_,w));e({loaded:!0,userId:o,plan:y,maxMyeongsik:T,canManageMyeongsik:k.canManageMyeongsik,canUseLuckTabs:k.canUseLuckTabs,canUseMultiMode:k.canUseMultiMode,canUseAllPrompts:k.canUseAllPrompts,canUseAdvancedReport:k.canUseAdvancedReport,canRemoveAds:k.canRemoveAds,canUseMyoViewer:Nie(u),startsAt:d,expiresAt:h})}catch(i){console.error("loadFromServer(entitlements) exception:",i),e({...ib,loaded:!0,userId:null})}finally{e({loading:!1})}}},isActiveNow:()=>{const{startsAt:n,expiresAt:r}=t();return gP(n,r)},getRemainingMs:n=>{if(!n)return null;const r=n.getTime()-Date.now();return r>0?r:0},formatRemaining:n=>{const r=Math.floor(n/1e3),i=r%60,a=Math.floor(r/60),o=a%60,l=Math.floor(a/60),u=l%24,d=Math.floor(l/24),h=[];return d>0&&h.push(`${d}`),u>0&&h.push(`${u}`),d===0&&o>0&&h.push(`${o}`),h.length===0&&h.push(`${i}`),h.join(" ")},canAddMyeongsik:()=>({ok:!0}),canManageNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canManageMyeongsik},canUseLuckTabsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseLuckTabs},canUseMultiModeNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseMultiMode},canUseAllPromptsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAllPrompts},canUseAdvancedReportNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAdvancedReport},shouldShowAdsNow:()=>{const n=t();return!n.loaded||!n.isActiveNow()?!0:!n.canRemoveAds},canUseMyoViewerNow:()=>{const n=t();return n.loaded&&n.canUseMyoViewer}})),hT="guest_myeongsik_v1";function a7(e){return typeof e=="object"&&e!==null}function qE(e,t){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const n=Number(e);if(Number.isFinite(n))return n}return t}function Gi(e,t=""){return typeof e=="string"?e:t}function Cie(e,t=!1){return typeof e=="boolean"?e:t}function Mie(e){return a7(e)?{name:Gi(e.name,""),lat:qE(e.lat,0),lon:qE(e.lon,0)}:{name:"",lat:0,lon:0}}function Die(e){return{id:e.id,sortOrder:typeof e.sortOrder=="number"?e.sortOrder:1,name:e.name??"",birthDay:e.birthDay??"",birthTime:e.birthTime??"",gender:e.gender??"",birthPlace:e.birthPlace??{name:"",lat:0,lon:0},relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:e.mingSikType??"/",DayChangeRule:e.DayChangeRule??"",favorite:!!e.favorite,calendarType:e.calendarType??"solar",dir:e.dir??"forward"}}function Pie(e){if(!a7(e))return null;const t={id:Gi(e.id,""),sortOrder:qE(e.sortOrder,1),name:Gi(e.name,""),birthDay:Gi(e.birthDay,""),birthTime:Gi(e.birthTime,""),gender:Gi(e.gender,""),birthPlace:Mie(e.birthPlace),relationship:Gi(e.relationship,""),memo:Gi(e.memo,""),folder:Gi(e.folder,""),mingSikType:Gi(e.mingSikType,"/"),DayChangeRule:Gi(e.DayChangeRule,""),favorite:Cie(e.favorite,!1),calendarType:Gi(e.calendarType,"solar"),dir:Gi(e.dir,"forward")};return t.id?op(t):null}function o7(){try{const e=localStorage.getItem(hT);if(!e)return[];const t=JSON.parse(e);if(!Array.isArray(t))return[];const n=t.map(Pie).filter(r=>r!==null);return bu(n)}catch{return[]}}function Hl(e){try{const t=e.map(Die);localStorage.setItem(hT,JSON.stringify(t))}catch{}}function s7(){try{localStorage.removeItem(hT)}catch{}}const Ms=Jo(e=>({open:!1,reason:"HEADER",openWith:t=>e({open:!0,reason:t}),close:()=>e({open:!1})})),Kn=jie(),Rie=die(Kn);function ru(){const t=vn.getState().canManageNow();return t||console.warn("[myeongsik] blocked: canManageNow=false"),t}function Lie(e){const n=vn.getState().canAddMyeongsik(e);return n.ok||console.warn("[myeongsik] blocked: canAddMyeongsik",n.message),n.ok}async function bP(e){const t=o7();if(t.length)try{for(const n of t)await Kn.upsertOne(e,n);s7()}catch(n){console.warn("[myeongsik] migrateGuestListToServerIfAny failed:",n)}}const jn=Jo((e,t)=>({loading:!1,loaded:!1,loadedUserId:null,realtimeReady:!1,list:[],currentId:null,_rtSub:null,_rtUserId:null,getCurrent:()=>{const{list:n,currentId:r}=t();return r?n.find(i=>i.id===r)??null:null},setCurrentId:n=>e({currentId:n}),startRealtime:async()=>{if(typeof window>"u")return;if(aie()){n7(Date.now()),window.location.reload();return}const n=await Kn.getUser();if(!n){await t().stopRealtime(),e({realtimeReady:!1});return}if(t()._rtUserId===n.id&&t()._rtSub){e({realtimeReady:!0});return}await t().stopRealtime();const r=await Kn.subscribe(n.id,i=>{e(a=>({list:Sie(a.list,i)}))},i=>{i==="SUBSCRIBED"&&e({realtimeReady:!0})});e({_rtSub:r,_rtUserId:n.id})},stopRealtime:async()=>{const n=t()._rtSub;if(n)try{await n.unsubscribe()}catch(r){console.warn("stopRealtime error",r)}e({_rtSub:null,_rtUserId:null,realtimeReady:!1})},loadFromServer:async()=>{if(!t().loading){e({loading:!0});try{const n=await Kn.getUser(),r=t();if(n&&r.loaded&&r.loadedUserId===n.id){e({loading:!1});return}if(!n){const u=o7(),d=u[0]?.id??null;e({list:u,currentId:d,loaded:!0,loadedUserId:null}),await t().stopRealtime();return}await bP(n.id);const i=await Kn.fetchRows(n.id),a=bu(i.map(e7)),o=t().currentId,l=o&&a.some(u=>u.id===o)?o:a[0]?.id??null;e({list:a,currentId:l,loaded:!0,loadedUserId:n.id}),await t().startRealtime()}catch(n){console.error("useMyeongSikStore.loadFromServer exception:",n)}finally{e({loading:!1})}}},migrateLocalToServer:async()=>{try{await sie(Kn);const n=await Kn.getUser();n&&await bP(n.id)}catch(n){console.error("useMyeongSikStore.migrateLocalToServer exception:",n)}},add:async n=>{const r=await Kn.getUser(),i=t().list.length;if(!Lie(i)){r||Ms.getState().openWith("ADD_LIMIT");return}const a=(i||0)+1,o={...n,sortOrder:n.sortOrder??a},l=op(o),u=t().list,d=bu([...u,l]),h=t().currentId??l.id;if(e({list:d,currentId:h}),!r){Hl(d),d.length===1&&Ms.getState().openWith("PERSIST_SAVE");return}await Kn.upsertOne(r.id,l)},update:async(n,r)=>{const i=await Kn.getUser();if(i&&!ru())return;const a=t().list.find(u=>u.id===n);if(!a)return;const o=op({...a,...r}),l=bu(t().list.map(u=>u.id===n?o:u));if(e({list:l}),!i){Hl(l);return}await Kn.updateOne(i.id,n,o)},remove:async n=>{const r=await Kn.getUser();if(r&&!ru())return;const a=t().list.filter(l=>l.id!==n),o=t().currentId===n?a[0]?.id??null:t().currentId;if(e({list:a,currentId:o}),!r){Hl(a);return}await Kn.softDelete(n)},moveItemByDnD:async n=>{const r=t().list,i=_ie(n),o=hie({list:r,orderedFolders:i.orderedFolders,source:i.source,destination:i.destination}).nextList;e({list:o});const l=await Kn.getUser();if(l&&!ru()){e({list:r});return}if(!l){Hl(o);return}await t().reorder(o)},applyNextList:async n=>{const r=t().list;e({list:n});const i=await Kn.getUser();if(i&&!ru()){e({list:r});return}if(!i){Hl(n);return}await t().reorder(n)},toggleFavoriteWithReorder:async(n,r)=>{const i=await Kn.getUser();if(i&&!ru())return;const o=pie({list:t().list,targetId:n,orderedFolders:r}).nextList;if(e({list:o}),!i){Hl(o);return}await t().reorder(o)},unsetFolderForFolder:async n=>{const r=await Kn.getUser();if(r&&!ru())return;const i=(n??"").trim();if(!i)return;const a=t().list,o=gie({list:a,folderName:i}),l=bu(o.nextList),u=new Set(o.changedIds);if(u.size===0)return;if(e({list:l}),!r){Hl(l);return}const d=l.filter(h=>u.has(h.id));await Kn.upsertOrderPatch(r.id,d)},reorder:async n=>{const r=await Kn.getUser();if(r&&!ru())return;const i=n.map((o,l)=>({...o,sortOrder:l+1})),a=bu(i);if(e({list:a}),!r){Hl(a);return}await Rie.queue(a)},clear:()=>{e({currentId:null,list:[],loaded:!1,loadedUserId:null}),s7()}})),yP="__custom__",ab=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],l7=({value:e,onChange:t})=>{const[n,r]=S.useState(ab),[i,a]=S.useState(""),[o,l]=S.useState(!1),[u,d]=S.useState(""),[h,m]=S.useState(!1),{list:b}=jn(),y=(e??i??"").trim(),k=y==="",w=b.some(P=>(P.relationship??"").trim()===""),_=w&&!k?n.filter(P=>P.value!==""):n,T=S.useMemo(()=>{const P=_.find(I=>I.value==="");return P?[P,..._.filter(I=>I.value!=="")]:_},[_]);S.useEffect(()=>{e!==void 0&&a(e)},[e]),S.useEffect(()=>{y||w||(a(""),t?.(""))},[y,w,t]);const N=P=>{const I=P.target.value;I===yP?(l(!0),a(""),t?.("")):(l(!1),d(""),a(I),t?.(I))};S.useEffect(()=>{const P=localStorage.getItem("relationshipOptions");if(P)try{const I=JSON.parse(P),z=new Set,K=[...I,...ab].filter(G=>!G||!G.value||z.has(G.value)?!1:(z.add(G.value),!0));r(K)}catch{r(ab)}},[]),S.useEffect(()=>{(async()=>{const{data:{user:I},error:z}=await Le.auth.getUser();if(z||!I)return;const{data:K,error:G}=await Le.from("user_settings").select("payload").eq("user_id",I.id).single();if(G&&G.code!=="PGRST116"){console.error("load relationships settings error",G.message);return}const H=K?.payload?.relationshipOptions;if(!Array.isArray(H))return;const B=H.map(q=>q&&typeof q=="object"&&typeof q.value=="string"&&typeof q.label=="string"?{value:q.value,label:q.label}:typeof q=="string"?{value:q,label:q}:null).filter(q=>!!q);B.length&&r(q=>{const X=new Set,V=[...B,...q,...ab].filter(F=>X.has(F.value)?!1:(X.add(F.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(V)),V})})()},[]),S.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:I},error:z}=await Le.auth.getUser();if(z||!I)return;const{data:K,error:G}=await Le.from("user_settings").select("payload").eq("user_id",I.id).single();if(G&&G.code!=="PGRST116"){console.error("load relationships settings error",G.message);return}const H={...K?.payload??{},relationshipOptions:n},{error:B}=await Le.from("user_settings").upsert({user_id:I.id,payload:H,updated_at:new Date().toISOString()});B&&console.error("save relationships settings error",B.message)})()},[n]);const j=()=>{const P=u.trim();if(!P)return;const I={value:P,label:P};r(z=>[...z,I]),a(P),t?.(P),d(""),l(!1)},C=P=>{r(n.filter(I=>I.value!==P)),i===P&&a("")},M=P=>{if(!P.destination)return;const I=Array.from(n),[z]=I.splice(P.source.index,1);I.splice(P.destination.index,0,z),r(I)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:i,onChange:N,children:[g.jsx("option",{value:"",hidden:!0,children:" "}),T.map(P=>g.jsx("option",{value:P.value,children:P.label},P.value)),g.jsx("option",{value:yP,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>m(!0),className:"btn_style",children:" "})]}),o&&!h&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:"  ",value:u,onChange:P=>d(P.target.value)}),g.jsx("button",{type:"button",onClick:j,className:"btn_style",children:" "})]}),h&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(zp,{onDragEnd:M,children:g.jsx(Bf,{droppableId:"relList",children:P=>g.jsxs("ul",{ref:P.innerRef,...P.droppableProps,className:"space-y-1",children:[n.map((I,z)=>g.jsx($f,{draggableId:I.value,index:z,children:K=>g.jsxs("li",{ref:K.innerRef,...K.draggableProps,...K.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:I.label}),g.jsx("button",{type:"button",className:"text-red-500 cursor-pointer",onClick:()=>C(I.value),children:""})]})},I.value)),P.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full btn_style mt-2",children:""})]})]})},En=" ",c7=["","","","","",""],u7="ms_folders",d7="ms_folder_order",vP="ms_folder_favs",KE="ms_disabled_presets",sc="myeoun:folder-updated";function Eu(e){if(e!==En)return e||void 0}function Tx(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(r=>typeof r=="string"):[]}catch{return[]}}function mT(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function Iie(){const e=Tx(KE);return c7.filter(t=>!e.includes(t))}function pT(){return Tx(u7)}function gT(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];mT(u7,t),typeof window<"u"&&window.dispatchEvent(new Event(sc))}function Yy(){const e=Iie(),t=pT(),n=new Set,r=[];for(const i of[...e,...t])n.has(i)||(n.add(i),r.push(i));return r}function $ie(){return[En,...Yy()]}function f7(e){const t=e.trim();if(!t||t===En)return;const n=pT();if(n.includes(t))return;const r=[...n,t];gT(r)}function Bie(e){const t=pT(),n=t.filter(r=>r!==e);n.length!==t.length&&gT(n)}function zie(e){const t=Tx(KE);if(t.includes(e))return;const n=[...t,e];mT(KE,n),typeof window<"u"&&window.dispatchEvent(new Event(sc))}function qy(){return Tx(d7)}function Xd(e){mT(d7,e),typeof window<"u"&&window.dispatchEvent(new Event(sc))}function Fm(e,t){const n=new Set(e),r=[];for(const i of t)n.has(i)&&!r.includes(i)&&r.push(i);for(const i of e)r.includes(i)||r.push(i);return r}function Uie(e){return Array.from(new Set(e))}function ob(e){const t=e.filter(n=>n!==En);return{rest:t,withUnassigned:[En,...t]}}function Fie(e,t){return Fm(t,e)}function Hie({value:e,onChange:t}){const[n,r]=S.useState([En]),[i,a]=S.useState(!1),[o,l]=S.useState(""),[u,d]=S.useState(!1),h=S.useCallback(async _=>{const{data:{user:T},error:N}=await Le.auth.getUser();if(N||!T)return;const j=_.map((M,P)=>({user_id:T.id,folder_name:M,sort_order:P+1,updated_at:new Date().toISOString()})),{error:C}=await Le.from("user_folder_order").upsert(j,{onConflict:"user_id,folder_name"});C&&console.error("save folder order error",C.message)},[]),m=S.useCallback(()=>{if(typeof window>"u")return;const _=Uie($ie()),T=_.includes(En)?_:[En,..._],{rest:N}=ob(T),j=qy(),C=Fie(j,N),M=[En,...C];r(M),j.length===C.length&&j.every((I,z)=>I===C[z])||(Xd(C),h(C))},[h]);S.useEffect(()=>{if(m(),typeof window<"u"){const _=()=>m();return window.addEventListener(sc,_),()=>window.removeEventListener(sc,_)}},[m]);const b=S.useMemo(()=>e||En,[e]),y=_=>{const{rest:T}=ob(_);Xd(T),h(T)},k=_=>{const{source:T,destination:N}=_;if(!N||N.index===T.index)return;const{rest:j}=ob(n),C=Array.from(j),[M]=C.splice(T.index,1);C.splice(N.index,0,M);const P=[En,...C];r(P),y(P)},w=_=>{const T=Eu(_);T&&(f7(T),m())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:i?"__custom__":b,onChange:_=>{const T=_.target.value;if(T==="__custom__"){a(!0),t(void 0);return}a(!1),t(Eu(T))},children:[n.map(_=>g.jsx("option",{value:_,children:_},_)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>d(_=>!_),children:u?" ":" "})]}),i&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const _=o.trim();_&&(w(_),t(Eu(_)),a(!1),l(""))},children:""})]}),u&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[En," ()"]})]}),g.jsx(zp,{onDragEnd:k,children:g.jsx(Bf,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:_=>g.jsxs("ul",{ref:_.innerRef,..._.droppableProps,className:"space-y-1",children:[ob(n).rest.map((T,N)=>g.jsx($f,{draggableId:T,index:N,children:j=>g.jsxs("li",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:T})]})},T)),_.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',En,'" .      .']})]})}function h7({message:e,onClose:t,ms:n=2e3}){return S.useEffect(()=>{const r=setTimeout(t,n);return()=>clearTimeout(r)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}const xP=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:"",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:"",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],Gie=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],Yie=["","/",""],qie=["",""],m7={gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"};function Kie(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function Wie(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function Vie(){const[e,t]=S.useState(0),[n,r]=S.useState({...m7}),[i,a]=S.useState(null),[o,l]=S.useState(!1),[u,d]=S.useState(!1);return{stepIndex:e,setStepIndex:t,form:n,setForm:r,toast:i,setToast:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d}}function Zie({currentStepKey:e,birthPlace:t,unknownPlace:n,stepIndex:r}){S.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(e)){const a=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(a){a.focus();return}}if(e==="mingSikType"){const a=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="gender"){const a=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="birthPlace"){if(t||n){const a=()=>{const o=document.querySelector(".current-step form button[type='submit']");o&&o.focus()};a(),setTimeout(a,0)}else{const a=document.getElementById("inputBirthPlaceBtn");a&&a.focus()}return}if(e==="relationship"||e==="folder"){setTimeout(()=>{const a=document.querySelector(".current-step select");a&&a.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[n,r,e,t])}function Xie(e,t){if(e!=="lunar"||!t||t.length!==8)return null;try{const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=ia(n,r,i);return` ${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}catch(n){const r=n instanceof Error?n.message:void 0;return` ${r?`: ${r}`:""}`}}function Jie(e,t,n,r){switch(e){case"birthPlace":return r?"":t.birthPlace?.name||"";case"birthTime":return n?"":t.birthTime||"";case"folder":return t.folder?String(t.folder):En;default:{const a=t[e];return typeof a=="string"?a:a!=null?String(a):""}}}function Qie({form:e,unknownTime:t,unknownPlace:n,stepIndex:r}){const i=xP[r],a=S.useMemo(()=>Xie(e.calendarType,e.birthDay),[e.calendarType,e.birthDay]);return{steps:xP,currentStep:i,lunarPreview:a,displayValue:l=>Jie(l,e,t,n),CALENDAR_OPTIONS:Gie,MING_OPTIONS:Yie,GENDER_OPTIONS:qie,nextIndex:Kie,focusById:Wie,isDST:ap}}function eae(){return{add:jn(t=>t.add)}}const Cr=[];for(let e=0;e<256;++e)Cr.push((e+256).toString(16).slice(1));function tae(e,t=0){return(Cr[e[t+0]]+Cr[e[t+1]]+Cr[e[t+2]]+Cr[e[t+3]]+"-"+Cr[e[t+4]]+Cr[e[t+5]]+"-"+Cr[e[t+6]]+Cr[e[t+7]]+"-"+Cr[e[t+8]]+Cr[e[t+9]]+"-"+Cr[e[t+10]]+Cr[e[t+11]]+Cr[e[t+12]]+Cr[e[t+13]]+Cr[e[t+14]]+Cr[e[t+15]]).toLowerCase()}let q1;const nae=new Uint8Array(16);function rae(){if(!q1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");q1=crypto.getRandomValues.bind(crypto)}return q1(nae)}const iae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wP={randomUUID:iae};function p7(e,t,n){if(wP.randomUUID&&!e)return wP.randomUUID();e=e||{};const r=e.random??e.rng?.()??rae();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,tae(r)}function aae(e,t,n){const r=Eu(e.folder);return Q6({id:p7(),name:e.name,birthDay:e.birthDay??"",calendarType:e.calendarType??"solar",birthTime:e.birthTime,unknownTime:t,gender:e.gender,birthPlace:e.birthPlace,unknownPlace:n,relationship:e.relationship,memo:e.memo,folder:r,mingSikType:e.mingSikType,dateObj:e.dateObj||new Date},{requireName:!1})}function oae(e,t,n,r){if(e==="name"&&!t.name)return{ok:!0,message:"  '' .",nextForm:{...t,name:""}};if(e==="birthDay"){const i=uT(t.birthDay??"",t.calendarType??"solar");if(!i.ok)return{ok:!1,message:i.message};if(t.birthDay!==i.value)return{ok:!0,nextForm:{...t,birthDay:i.value}}}if(e==="birthTime"){const i=dT(t.birthTime??"",n);if(!i.ok)return{ok:!1,message:i.message};if(i.value!==""&&t.birthTime!==i.value)return{ok:!0,nextForm:{...t,birthTime:i.value}}}return e==="birthPlace"&&!t.birthPlace&&!r?{ok:!1,message:"  ''  ."}:{ok:!0}}function sae({form:e,setForm:t,stepIndex:n,setStepIndex:r,stepsLength:i,currentStepKey:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d,setToast:h,onSave:m}){const{add:b}=eae(),y=S.useCallback(()=>{const w=oae(a,e,o,u);if(!w.ok){h(w.message??" .");return}if(w.nextForm&&(t(w.nextForm),w.message&&h(w.message)),n<i-1){r(n+1);return}const _=aae(e,o,u);if(!_.ok){h(_.message);return}const T=_.value;b(T),m(T),h(" !"),t({...m7}),l(!1),d(!1),r(0)},[a,e,o,u,h,t,n,i,r,b,m,l,d]),k=S.useCallback(w=>{if(w.key!=="Enter")return;const _=w.target,T=_.getAttribute("role");if(T==="radio"||T==="checkbox")return;const N=document.getElementById("mapModal");if(N&&N.contains(_))return;const j=_.tagName.toLowerCase(),C=_ instanceof HTMLInputElement?_.type:"";if(j==="textarea"){if(w.shiftKey)return;w.preventDefault(),y();return}if(C==="radio"||C==="checkbox"){w.preventDefault(),_ instanceof HTMLInputElement&&_.click();return}j==="button"&&_.type!=="submit"||(w.preventDefault(),y())},[y]);return{handleNext:y,handleFormKeyDown:k}}function lae({onSave:e}){const t=Vie(),n=Qie({form:t.form,unknownTime:t.unknownTime,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});Zie({currentStepKey:n.currentStep.key,birthPlace:t.form.birthPlace,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});const r=sae({form:t.form,setForm:t.setForm,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,stepsLength:n.steps.length,currentStepKey:n.currentStep.key,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,setToast:t.setToast,onSave:e});return{steps:n.steps,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,currentStep:n.currentStep,form:t.form,setForm:t.setForm,toast:t.toast,setToast:t.setToast,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,lunarPreview:n.lunarPreview,handleNext:r.handleNext,handleFormKeyDown:r.handleFormKeyDown,displayValue:n.displayValue,CALENDAR_OPTIONS:n.CALENDAR_OPTIONS,MING_OPTIONS:n.MING_OPTIONS,GENDER_OPTIONS:n.GENDER_OPTIONS,nextIndex:n.nextIndex,focusById:n.focusById,isDST:n.isDST}}function cae({onSave:e,onClose:t}){const n=lae({onSave:e});return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[n.toast&&g.jsx(h7,{message:n.toast,onClose:()=>n.setToast(null)}),n.steps.slice(0,n.stepIndex).map((r,i)=>g.jsxs("button",{onClick:()=>n.setStepIndex(i),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:r.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:n.displayValue(r.key)})]},r.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:r=>{r.preventDefault(),n.handleNext()},onKeyDown:n.handleFormKeyDown,children:[g.jsx("label",{className:"block mb-2 font-bold",children:n.currentStep.label}),n.currentStep.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.name||"",onChange:r=>n.setForm({...n.form,name:r.target.value})}),n.currentStep.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.birthDay||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthDay:i.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:n.CALENDAR_OPTIONS.map(({value:r,label:i,id:a})=>{const o=n.form.calendarType===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:a,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:a,id:`${a}_lbl`,role:"radio","aria-checked":o,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":o?"true":"false",onKeyDown:l=>{if(l.stopPropagation(),l.key===" "||l.key==="Enter"){l.preventDefault(),n.setForm({...n.form,calendarType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(l.key))return;l.preventDefault();const d=n.CALENDAR_OPTIONS.findIndex(b=>b.value===n.form.calendarType),h=n.nextIndex(d<0?0:d,n.CALENDAR_OPTIONS.length,l.key),m=n.CALENDAR_OPTIONS[h].value;n.setForm({...n.form,calendarType:m}),n.focusById(`${n.CALENDAR_OPTIONS[h].id}_lbl`)},onClick:l=>{l.preventDefault(),n.setForm({...n.form,calendarType:r})},children:i})]},r)})})]}),n.form.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:n.lunarPreview})}),n.form.birthDay&&n.form.birthDay.length===8&&(()=>{const r=Number(n.form.birthDay.slice(0,4)),i=Number(n.form.birthDay.slice(4,6)),a=Number(n.form.birthDay.slice(6,8));return n.isDST(r,i,a)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"  ."}):null})()]}),n.currentStep.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.unknownTime?"":n.form.birthTime||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthTime:i.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:n.unknownTime}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":n.unknownTime,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownTime?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownTime(!n.unknownTime))},onClick:r=>{r.preventDefault(),n.setUnknownTime(!n.unknownTime)},children:""})]})]}),n.currentStep.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:n.MING_OPTIONS.map(r=>{const i=`ming_${r}`,a=(n.form.mingSikType??"/")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,mingSikType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.mingSikType??"/",d=n.MING_OPTIONS.indexOf(u),h=n.nextIndex(d,n.MING_OPTIONS.length,o.key),m=n.MING_OPTIONS[h];n.setForm({...n.form,mingSikType:m}),n.focusById(`ming_${m}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,mingSikType:r})},children:[r," "]})]},r)})}),n.currentStep.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:n.GENDER_OPTIONS.map(r=>{const i=`gender_${r}`,a=(n.form.gender??"")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,gender:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.gender??"",d=n.GENDER_OPTIONS.indexOf(u),h=n.nextIndex(d,n.GENDER_OPTIONS.length,o.key),m=n.GENDER_OPTIONS[h];n.setForm({...n.form,gender:m}),n.focusById(`gender_${m}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,gender:r})},children:r})]},r)})}),n.currentStep.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx($4,{onSelect:r=>n.setForm({...n.form,birthPlace:r}),value:n.unknownPlace?"":n.form.birthPlace?.name??""}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":n.unknownPlace,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownPlace?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownPlace(!n.unknownPlace))},onClick:r=>{r.preventDefault(),n.setUnknownPlace(!n.unknownPlace)},children:""})]})]}),n.currentStep.key==="relationship"&&g.jsx(l7,{value:n.form.relationship||"",onChange:r=>n.setForm({...n.form,relationship:r})}),n.currentStep.key==="folder"&&g.jsx(Hie,{value:Eu(n.form.folder),onChange:r=>n.setForm({...n.form,folder:r})}),n.currentStep.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.memo||"",onChange:r=>n.setForm({...n.form,memo:r.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:n.stepIndex===n.steps.length-1?"":""})]})]})})]})}var sb={},_P;function uae(){if(_P)return sb;_P=1,sb.match=a,sb.parse=o;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function a(h,m){return o(h).some(function(b){var y=b.inverse,k=b.type==="all"||m.type===b.type;if(k&&y||!(k||y))return!1;var w=b.expressions.every(function(_){var T=_.feature,N=_.modifier,j=_.value,C=m[T];if(!C)return!1;switch(T){case"orientation":case"scan":return C.toLowerCase()===j.toLowerCase();case"width":case"height":case"device-width":case"device-height":j=d(j),C=d(C);break;case"resolution":j=u(j),C=u(C);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":j=l(j),C=l(C);break;case"grid":case"color":case"color-index":case"monochrome":j=parseInt(j,10)||1,C=parseInt(C,10)||0;break}switch(N){case"min":return C>=j;case"max":return C<=j;default:return C===j}});return w&&!y||!w&&y})}function o(h){return h.split(",").map(function(m){m=m.trim();var b=m.match(e),y=b[1],k=b[2],w=b[3]||"",_={};return _.inverse=!!y&&y.toLowerCase()==="not",_.type=k?k.toLowerCase():"all",w=w.match(/\([^\)]+\)/g)||[],_.expressions=w.map(function(T){var N=T.match(t),j=N[1].toLowerCase().match(n);return{modifier:j[1],feature:j[2],value:N[2]}}),_})}function l(h){var m=Number(h),b;return m||(b=h.match(/^(\d+)\s*\/\s*(\d+)$/),m=b[1]/b[2]),m}function u(h){var m=parseFloat(h),b=String(h).match(i)[1];switch(b){case"dpcm":return m/2.54;case"dppx":return m*96;default:return m}}function d(h){var m=parseFloat(h),b=String(h).match(r)[1];switch(b){case"em":return m*16;case"rem":return m*16;case"cm":return m*96/2.54;case"mm":return m*96/2.54/10;case"in":return m*96;case"pt":return m*72;case"pc":return m*72/12;default:return m}}return sb}var K1,SP;function dae(){if(SP)return K1;SP=1;var e=uae().match,t=typeof window<"u"?window.matchMedia:null;function n(i,a,o){var l=this,u;t&&!o&&(u=t.call(window,i)),u?(this.matches=u.matches,this.media=u.media,u.addListener(m)):(this.matches=e(i,a),this.media=i),this.addListener=d,this.removeListener=h,this.dispose=b;function d(y){u&&u.addListener(y)}function h(y){u&&u.removeListener(y)}function m(y){l.matches=y.matches,l.media=y.media}function b(){u&&u.removeListener(m)}}function r(i,a,o){return new n(i,a,o)}return K1=r,K1}var fae=dae();const hae=Ci(fae);var mae=/[A-Z]/g,pae=/^ms-/,W1={};function gae(e){return"-"+e.toLowerCase()}function g7(e){if(W1.hasOwnProperty(e))return W1[e];var t=e.replace(mae,gae);return W1[e]=pae.test(t)?"-"+t:t}function bae(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let a=0;a<i;a++){const o=n[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}var V1={exports:{}},Z1,kP;function yae(){if(kP)return Z1;kP=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Z1=e,Z1}var X1,EP;function vae(){if(EP)return X1;EP=1;var e=yae();function t(){}function n(){}return n.resetWarningCache=t,X1=function(){function r(o,l,u,d,h,m){if(m!==e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},X1}var jP;function xae(){return jP||(jP=1,V1.exports=vae()()),V1.exports}var wae=xae();const Bt=Ci(wae),Qr=Bt.oneOfType([Bt.string,Bt.number]),b7={all:Bt.bool,grid:Bt.bool,aural:Bt.bool,braille:Bt.bool,handheld:Bt.bool,print:Bt.bool,projection:Bt.bool,screen:Bt.bool,tty:Bt.bool,tv:Bt.bool,embossed:Bt.bool},_ae={orientation:Bt.oneOf(["portrait","landscape"]),scan:Bt.oneOf(["progressive","interlace"]),aspectRatio:Bt.string,deviceAspectRatio:Bt.string,height:Qr,deviceHeight:Qr,width:Qr,deviceWidth:Qr,color:Bt.bool,colorIndex:Bt.bool,monochrome:Bt.bool,resolution:Qr,type:Object.keys(b7)},{type:bDe,...Sae}=_ae,kae={minAspectRatio:Bt.string,maxAspectRatio:Bt.string,minDeviceAspectRatio:Bt.string,maxDeviceAspectRatio:Bt.string,minHeight:Qr,maxHeight:Qr,minDeviceHeight:Qr,maxDeviceHeight:Qr,minWidth:Qr,maxWidth:Qr,minDeviceWidth:Qr,maxDeviceWidth:Qr,minColor:Bt.number,maxColor:Bt.number,minColorIndex:Bt.number,maxColorIndex:Bt.number,minMonochrome:Bt.number,maxMonochrome:Bt.number,minResolution:Qr,maxResolution:Qr,...Sae},Eae={...b7,...kae};var jae={all:Eae};const Tae=e=>`not ${e}`,Aae=(e,t)=>{const n=g7(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?Tae(n):`(${n}: ${t})`},Nae=e=>e.join(" and "),Oae=e=>{const t=[];return Object.keys(jae.all).forEach(n=>{const r=e[n];r!=null&&t.push(Aae(n,r))}),Nae(t)},Cae=S.createContext(void 0),Mae=e=>e.query||Oae(e),TP=e=>e?Object.keys(e).reduce((n,r)=>(n[g7(r)]=e[r],n),{}):void 0,y7=()=>{const e=S.useRef(!1);return S.useEffect(()=>{e.current=!0},[]),e.current},Dae=e=>{const t=S.useContext(Cae),n=()=>TP(e)||TP(t),[r,i]=S.useState(n);return S.useEffect(()=>{const a=n();bae(r,a)||i(a)},[e,t]),r},Pae=e=>{const t=()=>Mae(e),[n,r]=S.useState(t);return S.useEffect(()=>{const i=t();n!==i&&r(i)},[e]),n},Rae=(e,t)=>{const n=()=>hae(e,t||{},!!t),[r,i]=S.useState(n),a=y7();return S.useEffect(()=>{if(a){const o=n();return i(o),()=>{o&&o.dispose()}}},[e,t]),r},Lae=e=>{const[t,n]=S.useState(e.matches);return S.useEffect(()=>{const r=i=>{n(i.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},Iae=(e,t,n)=>{const r=Dae(t),i=Pae(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const a=Rae(i,r),o=Lae(a);return y7(),S.useEffect(()=>{},[o]),S.useEffect(()=>()=>{a&&a.dispose()},[]),o},v7={Classic:"",Modern:""};function Ca(e,t){const r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return r?r[t]??"":""}function $ae(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function Bae(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function zae(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function Uae(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function Ma(e){const{baseBranch:t,targetBranch:n,era:r,gaehwa:i}=e;return!t||!n?"":r===""?i?$ae(t,n):Bae(t,n):i?zae(t,n):Uae(t,n)}const Kr=Jo()(dB((e,t)=>{const n=new Date,r="/",i=!0,a=127.5,o=0,l=(y,k)=>k?new Date(y.getTime()+k*60*1e3):y,u=a,d=l(n,o),h=ut(d,u),m=Ot(d,u),b=dt(d,r);return{date:n,scope:"",rule:r,showSiwoon:i,lon:a,dstOffsetMinutes:o,yearGZ:h,monthGZ:m,dayGZ:b,setDate:y=>{const{rule:k,lon:w,dstOffsetMinutes:_}=t(),T=typeof w=="number"?w:void 0,N=l(y,_);e({date:y,yearGZ:ut(N,T),monthGZ:Ot(N,T),dayGZ:dt(N,k)})},resetDate:()=>{const{rule:y,lon:k,dstOffsetMinutes:w}=t(),_=new Date,T=typeof k=="number"?k:void 0,N=l(_,w);e({date:_,yearGZ:ut(N,T),monthGZ:Ot(N,T),dayGZ:dt(N,y)})},resetMonth:()=>{const{lon:y,dstOffsetMinutes:k}=t(),w=new Date,_=typeof y=="number"?y:void 0,T=l(w,k);e({date:w,monthGZ:Ot(T,_)})},setScope:y=>e({scope:y}),setRule:y=>{const{date:k,lon:w,dstOffsetMinutes:_}=t(),T=typeof w=="number"?w:void 0,N=l(k,_);e({rule:y,yearGZ:ut(N,T),monthGZ:Ot(N,T),dayGZ:dt(N,y)})},setShowSiwoon:y=>e({showSiwoon:y}),setLon:y=>{const{date:k,rule:w,dstOffsetMinutes:_}=t(),T=typeof y=="number"?y:void 0,N=l(k,_);e({lon:y,yearGZ:ut(N,T),monthGZ:Ot(N,T),dayGZ:dt(N,w)})},setDstOffsetMinutes:y=>{const{date:k,rule:w,lon:_}=t(),T=typeof _=="number"?_:void 0,N=l(k,y);e({dstOffsetMinutes:y,yearGZ:ut(N,T),monthGZ:Ot(N,T),dayGZ:dt(N,w)})},setFromEvent:(y,k)=>{const{rule:w,lon:_,dstOffsetMinutes:T}=t(),N=typeof _=="number"?_:void 0,j=l(y.at,T);e({date:y.at,scope:k,yearGZ:ut(j,N),monthGZ:Ot(j,N),dayGZ:dt(j,w)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),Fae=60*1e3,x7=60*Fae,Hae=24*x7,Gae=(e,t)=>{const n=new Date(e.getTime()),r=n.getFullYear()+t,i=n.getMonth(),a=n.getDate();return new Date(Date.UTC(r,i,a,n.getUTCHours(),n.getUTCMinutes()))},sp=e=>{const t=new Date(e);return t.setSeconds(0,0),t},cy={HOUR:x7,DAY:Hae},w7=[315,345,15,45,75,105,135,165,195,225,255,285],Yae=e=>{const t=e.getFullYear(),n=[];for(const r of[t-1,t])for(const i of w7){const a=bn(r,i);a.getTime()<=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>i.getTime()-r.getTime()),sp(n[0])},qae=e=>{const t=e.getFullYear(),n=[];for(const r of[t,t+1])for(const i of w7){const a=bn(r,i);a.getTime()>=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>r.getTime()-i.getTime()),sp(n[0])},Ai=e=>{const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],r={deg:315,name:""},i=n.map(l=>({name:l.name,date:bn(t,l.deg)})).concat([{name:r.name,date:bn(t+1,r.deg)},{name:"",date:bn(t+1,285)}]),a=bn(t,315),o=bn(t+1,315);return i.filter(l=>l.date>=a&&l.date<o).sort((l,u)=>l.date.getTime()-u.date.getTime())},_7=(()=>{const e=[];for(let t=0;t<60;t+=1)e.push(`${ri[t%10]}${Ti[t%12]}`);return e})(),Kae=e=>{const t=_7.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t},lp=(e,t,n=1)=>{const r=Kae(e),i=t==="forward"?n:-n;return _7[(r+i+60*1e3)%60]},Rd=2*cy.HOUR,AP=e=>(Math.floor((e+1)/2)*2-1+24)%24,Wae=(e,t)=>{const n=e.getHours(),r=AP(n),i=new Date(e);i.setHours(r,0,0,0),i.getTime()>e.getTime()&&i.setTime(i.getTime()-Rd);const a=new Date(i.getTime()+Rd),o=e.getTime()-i.getTime(),l=a.getTime()-e.getTime();if(o<0||o>Rd||l<0||l>Rd){const u=new Date(e);for(u.setHours(AP(e.getHours()),0,0,0);u.getTime()>e.getTime();)u.setTime(u.getTime()-Rd);const d=new Date(u.getTime()+Rd),h=e.getTime()-u.getTime(),m=d.getTime()-e.getTime();return t==="backward"?h:m}return t==="backward"?o:l},S7=(e,t,n,r=120)=>{const i=sp(e),a=Wae(i,n),o=10*cy.DAY/(2*cy.HOUR),l=sp(new Date(i.getTime()+a*o)),u=Gae(e,r).getTime(),d=[];let h=lp(t,n,1);for(let m=l.getTime();m<=u;m+=10*cy.DAY)d.push({at:new Date(m),gz:h}),h=lp(h,n,1);return{firstChange:l,events:d}},k7=(e,t)=>{const n=t==="forward"?e===""?"":"":e===""?"":"";return r=>r===n},E7=(e,t,n,r)=>{const i=k7(r,n);let a=t;const o=[];for(const l of e.events){const u=l.gz.charAt(1);i(u)&&(a=lp(a,n,1),o.push({at:l.at,gz:a}))}return{events:o}},WE=7200*1e3,Vae=(e,t,n)=>{const r=e.charAt(0),i=e.charAt(1),a=ri.indexOf(r),o=Ti.indexOf(i),l=t==="forward"?n:-n,u=(a+l%10+10)%10,d=(o+l%12+12)%12;return ri[u]+Ti[d]},Zae=e=>(Math.floor((e+1)/2)*2-1+24)%24,Xae=e=>{const t=e.getHours(),n=Zae(t),r=new Date(e);return r.setHours(n,0,0,0),r.getTime()>e.getTime()&&r.setTime(r.getTime()-WE),r},Jae=(e,t)=>{const n=Ai(e).sort((m,b)=>m.date.getTime()-b.date.getTime()),r=e.getTime();let i;if(t==="forward"){let m=n.find(b=>b.date.getTime()>r);if(!m){const b=new Date(e.getFullYear()+1,0,2,12,0,0,0);m=Ai(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).find(k=>k.date.getTime()>r)}if(!m)throw new Error("    .");i=m.date}else{let m=n.filter(b=>b.date.getTime()<r);if(m.length===0){const b=new Date(e.getFullYear()-1,11,31,12,0,0,0);m=Ai(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).filter(k=>k.date.getTime()<r)}if(m.length===0)throw new Error("    .");i=m[m.length-1].date}const a=Xae(e),o=t==="forward"?WE:-WE,l=i.getTime();let u=new Date(a.getTime()),d=0;const h=365*24/2;for(;d<h;){const m=u.getTime();if(t==="forward"){if(m>=l)return u}else if(m<=l)return u;u=new Date(u.getTime()+o),d++}throw new Error("     .")},Qae=(e,t)=>{const i=Math.abs(t.getTime()-e.getTime())*120;return new Date(e.getTime()+i)},Gp=(e,t,n,r=120,i)=>{console.log(i);const a=Jae(e,n),o=Qae(e,a),l=Math.floor(r/10),u=[];for(let d=0;d<l;d++){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const m=Vae(t,n,d+1);u.push({at:h,gz:m})}return u.sort((d,h)=>d.at.getTime()-h.at.getTime()),{natalMonthPillar:t,firstChange:o,mPillars:[],events:u}},eoe=(e,t)=>{const r=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(r))},j7=(e,t,n,r,i)=>{const a=k7(r,n);let o=t;const l=[];for(const u of e.events){const d=u.gz.charAt(1);a(d)&&(o=lp(o,n,1),l.push({at:u.at,gz:o,age:eoe(i,u.at)}))}return{events:l}},toe=e=>{const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=12,a=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(i=Number(e.birthTime.slice(0,2)),a=Number(e.birthTime.slice(2,4))),new Date(t,n-1,r,i,a,0,0)},Ax=(e,t)=>{const n=toe(e),r=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=Up(n,e.birthPlace?.lon??null,r),a=t?.dstOffsetMinutes??0,o=a!==0?new Date(i.getTime()+a*60*1e3):i;return sp(o)},bT=(e,t,n)=>{const r=e.birthPlace?.lon??127.5,i=Ax(e,n),a=dt(i,t),o=Ni(i,t,a.charAt(0));return{year:ut(i,r),month:Ot(i,r),day:a,hour:o}},noe=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${ri[t%10]}${Ti[t%12]}`);return e})(),roe=e=>noe.indexOf(e),J1=e=>{if(roe(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function ioe(e,t="/",n=0){const r=S.useMemo(()=>Uf(e),[e]),i=S.useMemo(()=>Ax(r,{dstOffsetMinutes:n}),[r,n]),a=S.useMemo(()=>bT(r,t,{dstOffsetMinutes:n}),[r,t,n]);return S.useMemo(()=>{const o=Gp(i,a.month,r.dir,120,r?.birthPlace?.lon??127.5),l=new Date;function u(C,M){let P=null;const I=M.getTime();for(const z of C)if(z.at.getTime()<=I)P=z;else break;return P}const d=u(o.events,l)?.gz??a.month,h=J1(d),m=l.getFullYear(),b=bn(m,315),k=b&&l>=b?m:m-1,w=ut(new Date(k,1,10,0,0,0),127.5),_=J1(w),T=Ot(l,127.5),N=J1(T),j=[];return N&&j.push({key:"wolun",label:"",data:N}),_&&j.push({key:"seun",label:"",data:_}),h&&j.push({key:"daeun",label:"",data:h}),j},[i,r.dir,a.month,r.birthPlace?.lon])}const aoe=365.2425*24*60*60*1e3,ooe=1440*60*1e3,soe=(e,t)=>(t.getTime()-e.getTime())/aoe,loe=e=>e<1?1+e:e,NP=e=>Math.floor(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())/ooe),coe=(e,t)=>{try{const n=t==="forward"?qae(e):Yae(e),r=Math.abs(NP(n)-NP(e));return(t==="forward"?r+1:r)/3}catch{return 0}},uoe=(e,t,n,r)=>{const i=coe(e,n),a=Math.max(1,Math.floor(i+1e-9)),o=new Date(e.getFullYear()+Math.max(0,a-1),0,1,12,0,0,0),l=Math.max(0,Math.floor(r/10)),u=[];for(let d=0;d<l;d+=1){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const m=lp(t,n,d+1);u.push({at:h,gz:m})}return{baseAge:a,events:u}};function hc(e,t="/",n=100,r=0){const i=Jt(d=>d.settings.daewoonDisplayBase),a=S.useMemo(()=>Uf(e),[e]),o=S.useMemo(()=>Ax(a,{dstOffsetMinutes:r}),[a,r]),l=S.useMemo(()=>bT(a,t,{dstOffsetMinutes:r}),[a,t,r]),u=a.dir==="backward"?"backward":"forward";return S.useMemo(()=>{const d=(k,w)=>k.map((_,T)=>{const N=T===0?1:w+(T-1)*10,j=_.at.getFullYear();return{..._,age:N,startYear:j}});if(i===""){const k=uoe(o,l.month,u,n),w={at:o,gz:l.month};return d([w,...k.events],k.baseAge)}const h=Gp(o,l.month,u,n,a.birthPlace?.lon??127.5),m={at:o,gz:h.natalMonthPillar},b=h.events[0]?soe(o,h.events[0].at):0,y=loe(b);return d([m,...h.events],y)},[o,l.month,u,n,a.birthPlace?.lon,i])}function Q1(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function doe(e,t){if(!Array.isArray(e)||e.length===0||!Q1(t))return{gz:"",at:t,index:-1};const n=e;for(let a=0;a<n.length;a++){const o=n[a],l=n[a+1];if(!Q1(o.at))continue;if(t.getTime()>=o.at.getTime()&&(!l||Q1(l.at)&&t.getTime()<l.at.getTime()))return{gz:o.gz??"",at:o.at,index:a}}if(t.getTime()<n[0].at.getTime()){const a=n[0];return{gz:a.gz??"",at:a.at,index:0}}const r=n.length-1,i=n[r];return{gz:i.gz??"",at:i.at,index:r}}function Nx(e,t,n,r){const{date:i,rule:a,lon:o}=Kr(),l=S.useMemo(()=>n??i??new Date,[n,i]),u=r?.dstOffsetMinutes??0,d=hc(e,e?.mingSikType,100,u),h=u!==0?new Date(l.getTime()+u*60*1e3):l,{gz:m}=doe(d,h);return S.useMemo(()=>{try{const b=o??e?.birthPlace?.lon??127.5,y=a??e?.mingSikType??t??"/";return{dae:{gz:m,at:h},se:{gz:ut(h,b),at:h},wol:{gz:Ot(h,b),at:h},il:{gz:dt(h,y),at:h},si:{gz:Ni(h,y),at:h}}}catch{const b=new Date;return{dae:{gz:"",at:b},se:{gz:"",at:b},wol:{gz:"",at:b},il:{gz:"",at:b},si:{gz:"",at:b}}}},[a,o,e,t,m,h])}const Ky=Jo(e=>({useDST:!1,setUseDST:t=>e({useDST:t}),toggleDST:()=>e(t=>({useDST:!t.useDST}))})),Qo=()=>Ky(e=>e.useDST?-60:0),kn=["","","",""],OP={month:1},CP=["","","",""],Yp=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],T7=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],MP=[{name:"",members:["","",""]},{name:"",members:["","",""]}],foe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},VE={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Re(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const r=t.match(/([]).*?([])/);if(r){const i=foe[r[1]]??r[1],a=VE[r[2]]??r[2];return`${i}${a}`}return""}const Wy=e=>e&&e.length>=1?e[0]:"",qi=e=>e&&e.length>=2?e[1]:"",yT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],vT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],xT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],wT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],_T=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],ST=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],kT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],ET=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],jT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],TT=[{pair:["",""],label:""}],AT=new Set(["","","",""]),Vy=new Set(["","","",""]),NT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],A7=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}];function _i(e,t,n){for(const{pair:[r,i],label:a}of e)if(t===r&&n===i||t===i&&n===r)return a;return null}function un(e,t){e.includes(t)||e.push(t)}const hoe=e=>[...e].sort((t,n)=>t-n).map(t=>kn[t]).join("X");function moe(e,t){const n=[];for(const r of e)for(const i of t){if(r===i)continue;const a=Math.min(r,i),o=Math.max(r,i);n.push([a,o])}return n.sort((r,i)=>{const a=Math.abs(r[0]-r[1]),o=Math.abs(i[0]-i[1]);return a!==o?a-o:0})}function poe(e){const t=[],n=[...e].sort((r,i)=>r-i);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const a=n[r],o=n[i];t.push([a,o])}return t}const N7=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function goe(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const O7=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function boe(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(i=>i?.normalize("NFKC")??""))).filter(Boolean),n=t.some(i=>i.includes("")||i.includes("()")),r=t.some(i=>i.includes("")||i.includes("()"));return t.filter(i=>!(n&&(i.includes("")||i.includes("")||i.includes(""))||r&&(i.includes("")||i.includes("")||i.includes(""))))}function C7(e){for(const t of O7){const r=(e[t]??[]).map(i=>i&&i.normalize("NFKC")).filter(i=>!!i&&!goe(i));e[t]=Array.from(new Set(r))}return e.jijiHyeong=boe(e.jijiHyeong),e}function yoe(e,t){for(let n=0;n<e.length;n++)if((e[n]??"").includes(t))return n;return-1}function voe(e,t){for(const n of Yp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function DP(e,t,n){yoe(e,n)<0&&un(e,t)}function Ox(e,t={}){const{emitGanjiAmhap:n=!0,fillNone:r=!0}=t,i=[Re(e[0]??""),Re(e[1]??""),Re(e[2]??""),Re(e[3]??"")],a={title:"",cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},o=i.map(b=>Wy(b)),l=i.map(b=>qi(b));function u(b,y){if(b===y)return;const k=o[b],w=o[y];if(!k||!w)return;const _=_i(yT,k,w);_&&un(a.cheonganHap,`#${kn[b]}X${kn[y]}_${_}`);const T=_i(vT,k,w);T&&un(a.cheonganChung,`#${kn[b]}X${kn[y]}_${T}`)}for(let b=0;b<4;b++)for(let y=b+1;y<4;y++)u(b,y);function d(b,y,k,w,_=!0){const T=[],N=[];for(let C=0;C<4;C++)l[C]===b&&T.push(C),l[C]===y&&N.push(C);const j=moe(T,N);for(const[C,M]of j){const P=`#${kn[C]}X${kn[M]}_${k}`;_?DP(w,P,k):un(w,P)}}const h=(b,y)=>{for(const{pair:[k,w],label:_}of b)d(k,w,_,y)};h(xT,a.jijiYukhap),h(wT,a.jijiChung),h(_T,a.jijiPa),h(ST,a.jijiHae),h(kT,a.jijiWonjin),h(ET,a.jijiGwimun);for(const b of Yp){if(!b.members.every(_=>l.includes(_)))continue;const k=[];for(let _=0;_<4;_++)b.members.includes(l[_])&&k.push(_);const w=hoe(k);un(a.jijiSamhap,`#${w}_${b.name}`)}for(const{pair:[b,y],label:k}of A7)voe(b,y)&&d(b,y,k,a.jijiBanhap,!1);for(const{pair:[b,y],label:k}of jT)d(b,y,k,a.jijiHyeong);for(const{pair:[b,y],label:k}of TT)d(b,y,k,a.jijiHyeong);for(const b of AT){const y=l.map((k,w)=>k===b?w:-1).filter(k=>k>=0);if(!(y.length<2))for(const[k,w]of poe(y)){const _=`#${kn[k]}X${kn[w]}_${b}`;DP(a.jijiHyeong,_,`${b}`)}}for(const{pair:[b,y],label:k}of NT)d(b,y,k,a.amhap);if(n)for(let b=0;b<4;b++){const y=i[b]??"";if(y.length<2)continue;const k=`${y[0]}${y[1]}`;Vy.has(k)&&un(a.ganjiAmhap,`#${N7(kn[b])}_${k}`)}const m=C7(a);if(r)for(const b of Object.keys(m)){if(b==="title")continue;const y=m[b];Array.isArray(y)&&y.length===0&&(m[b]=["#"])}return m}function xoe(e,t){for(const n of Yp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function woe(e,t){const n=[],r=new Set;for(const i of e)for(const a of t){if(i===a)continue;const o=Math.min(i,a),l=Math.max(i,a),u=`${o}-${l}`;r.has(u)||(r.add(u),n.push([o,l]))}return n}function Jl(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,r=[Re(e.natal[0]??""),Re(e.natal[1]??""),Re(e.natal[2]??""),Re(e.natal[3]??"")],a=[Re(e.daewoon??""),Re(e.sewoon??""),Re(e.wolwoon??"")].some(m=>m.length>=2),o={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},l=r.map(m=>{const b=qi(m??"");return VE[b]??b});for(const{pair:[m,b],label:y}of A7){if(!xoe(m,b))continue;const k=[],w=[];for(let T=0;T<4;T++)l[T]===m&&k.push(T),l[T]===b&&w.push(T);const _=woe(k,w);for(const[T,N]of _){const j=`#${kn[T]}X${kn[N]}_${y}`;un(o.jijiBanhap,j)}}if(n&&a)for(let m=0;m<4;m++){const b=r[m]??"";if(b.length<2)continue;const y=`${b[0]}${b[1]}`;Vy.has(y)&&un(o.ganjiAmhap,`#${N7(kn[m])}_${y}`)}const u=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let d=!1,h=!1;for(const[m,b]of u){if(!b)continue;const y=Re(b);if(!y||y.length<2)continue;const k=Wy(y),w=qi(y);{const T=`${k}${w}`;Vy.has(T)&&un(o.ganjiAmhap,`#${m}_${T}`)}for(let T=0;T<4;T++){const N=r[T]??"";if(N.length<2)continue;const j=kn[T],C=Wy(N),M=qi(N),P=_i(yT,k,C);P&&un(o.cheonganHap,`#${m}X${j}_${P}`);const I=_i(vT,k,C);I&&un(o.cheonganChung,`#${m}X${j}_${I}`);const z=_i(xT,w,M);z&&un(o.jijiYukhap,`#${m}X${j}_${z}`);const K=_i(wT,w,M);K&&un(o.jijiChung,`#${m}X${j}_${K}`);const G=_i(_T,w,M);G&&un(o.jijiPa,`#${m}X${j}_${G}`);const H=_i(ST,w,M);H&&un(o.jijiHae,`#${m}X${j}_${H}`);const B=_i(kT,w,M);B&&un(o.jijiWonjin,`#${m}X${j}_${B}`);const q=_i(ET,w,M);q&&un(o.jijiGwimun,`#${m}X${j}_${q}`);const X=_i(jT,w,M);if(X)un(o.jijiHyeong,`#${m}X${j}_${X}`);else{const F=_i(TT,w,M);F?un(o.jijiHyeong,`#${m}X${j}_${F}`):w===M&&AT.has(w)&&un(o.jijiHyeong,`#${m}X${j}_${w}${M}`)}const V=_i(NT,w,M);V&&un(o.amhap,`#${m}X${j}_${V}`)}for(const T of Yp){if(!T.members.includes(w))continue;const N=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:kn[M]})).filter(C=>C.b&&N.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>kn.indexOf(P)-kn.indexOf(I));un(o.jijiSamhap,`#${m}X${C}X${M}_(${T.name})`)}}for(const T of MP){if(!T.members.includes(w))continue;const N=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:kn[M]})).filter(C=>C.b&&N.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>kn.indexOf(P)-kn.indexOf(I));un(o.jijiHyeong,`#${m}X${C}X${M}_${T.name}`),T.name===""&&(d=!0),T.name===""&&(h=!0)}}const _=[...r.map((T,N)=>({b:VE[qi(T)]??qi(T),pos:kn[N]}))];for(const T of T7){const N=_.filter(j=>T.members.includes(j.b));if(new Set(N.map(j=>j.b)).size===3){const j=N.map(C=>C.pos).join("X");un(o.jijiBanghap,`#${j}_(${T.name})`)}}}{const m=[],b=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[y,k]of b){const w=Re(k??"");w.length>=2&&m.push({kind:y,b:qi(w)})}if(m.length>=2){const y=r.map((k,w)=>({pos:kn[w],b:qi(k)}));for(const k of MP)for(let w=0;w<m.length;w++)for(let _=w+1;_<m.length;_++){const T=m[w],N=m[_];for(const j of y){const C=new Set([j.b,T.b,N.b]);if(C.size===3&&k.members.every(M=>C.has(M))){const M=[T.kind,N.kind].sort((I,z)=>CP.indexOf(I)-CP.indexOf(z)).join("X"),P=`${j.pos}X${M}`;un(o.jijiHyeong,`#${P}_${k.name}`),k.name===""&&(d=!0),k.name===""&&(h=!0)}}}}}return(d||h)&&(o.jijiHyeong=o.jijiHyeong.filter(m=>!(d&&/(||)/.test(m)||h&&/(||)/.test(m)))),C7(_oe(o))}function _oe(e){const t=/(|||)X(|||)/,n={...e};for(const r of Object.keys(e)){if(r==="title")continue;const i=e[r];Array.isArray(i)&&(n[r]=i.filter(a=>!t.test(a??"")))}return n}const Soe={:"",:"",:"",:"",:""},PP={:"",:"",:"",:"",:""},koe={:"",:"",:"",:"",:""},Eoe={:"",:"",:"",:"",:""},joe={:.15,:.1,:-.15,:-.2,:-.25};function Toe(e,t){const n=Array.from(new Set(t)).sort((r,i)=>r-i);if(n.length<3)return!1;for(let r=0;r<n.length;r++){const i=n[r],a=n[r+1],o=n[r+2];if(!(a==null||o==null)&&o-i<=2&&(e===i||e===a||e===o))return!0}return!1}function Aoe(e){const t=e.includes(OP.month),n=Toe(OP.month,e)||e.length>=3;return t&&n?"":t||e.length>=2?"":""}function Noe(e,t,n,r){const i=r===""?2:r===""?1:.5;e[t]=(e[t]??0)-i,e[n]=(e[n]??0)+i}function Ooe(e,t,n={}){const{includeBanghap:r=!0,includeSamhap:i=!0}=n,a=[Re(e[0]??""),Re(e[1]??""),Re(e[2]??""),Re(e[3]??"")],o=a.map(h=>qi(h)).filter(Boolean),l=[],u={...t},d=(h,m)=>{const b=[];for(let T=0;T<a.length;T++){const N=qi(a[T]??"");m.members.includes(N)&&b.push(T)}if(!m.members.every(T=>o.includes(T)))return;const k=Aoe(b),w=m.out,_=PP[w];Noe(u,_,w,k),l.push({type:h,name:m.name,out:m.out,strength:k})};if(i)for(const h of Yp)d("",h);if(r)for(const h of T7)d("",h);return{applied:l,score:u,strengthAdj:joe,shengNext:Soe,shengPrev:PP,ke:koe,keInv:Eoe}}function Zy(e){return kn[e]}function RP(e){const t=new Map,n=new Map;for(let r=0;r<4;r++){const i=Re(e[r]??""),a=Wy(i),o=qi(i);a&&t.set(a,[...t.get(a)??[],r]),o&&n.set(o,[...n.get(o)??[],r])}return{stemPos:t,branchPos:n}}function cm(e,t,n){const r=[];for(const i of t)for(const a of n)r.push(`#${Zy(i)}X${Zy(a)}_${e}`);return r}function Coe(e,t){const n=RP(e),r=RP(t),i={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]},a=(l,u)=>{l.includes(u)||l.push(u)};for(const{pair:[l,u],label:d}of yT){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],m=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&m.length)for(const b of cm(d,h,m))a(i.,b)}for(const{pair:[l,u],label:d}of vT){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],m=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&m.length)for(const b of cm(d,h,m))a(i.,b)}const o=(l,u)=>{const d=Array.from(n.branchPos.keys()),h=Array.from(r.branchPos.keys());for(const m of d)for(const b of h){const y=_i(u,m,b);if(!y)continue;const k=n.branchPos.get(m)??[],w=r.branchPos.get(b)??[];for(const _ of cm(y,k,w))a(i[l],_)}};o("",xT),o("",wT),o("",_T),o("",ST),o("",kT),o("",ET),o("",jT),o("",TT);for(const l of AT){const u=n.branchPos.get(l)??[],d=r.branchPos.get(l)??[];if(!(!u.length||!d.length))for(const h of cm(`${l}`,u,d))a(i.,h)}for(const{label:l,pair:[u,d]}of NT){const h=[...n.branchPos.get(u)??[],...n.branchPos.get(d)??[]],m=[...r.branchPos.get(u)??[],...r.branchPos.get(d)??[]];if(!(!h.length||!m.length))for(const b of cm(l,h,m))a(i.,b)}{const l=Array.from(n.stemPos.keys()),u=Array.from(r.stemPos.keys());for(const d of l)for(const h of u){const m=n.stemPos.get(d)??[],b=r.stemPos.get(h)??[];for(const y of m){const k=qi(Re(e[y]??"")),w=`${d}${k}`;if(Vy.has(w))for(const _ of b){const T=qi(Re(t[_]??""));`${h}${T}`===w&&a(i.,`#${Zy(y)}X${Zy(_)}_${w}`)}}}}return i}const M7=new Set(Object.keys(Jn)),D7=new Set(Object.keys(ar)),Moe=e=>e.slice(0,1),Doe=e=>e.slice(-1);function Ds(e){return hf.has(e)?e:M7.has(e)?Jn[e]??e:e}function Lr(e){return Km.has(e)?e:D7.has(e)?ar[e]??e:e}function Ro(e){return Ds(Moe(e))}function tn(e){return Lr(Doe(e))}function Poe(e){if(!e)return null;const t=Array.from(String(e));let n=null,r=null;for(const i of t)!n&&(hf.has(i)||M7.has(i))&&(n=Ds(i)),(Km.has(i)||D7.has(i))&&(r=Lr(i));return n&&r?{stem:n,branch:r}:null}function Roe(e){return e.map(tn)}function lb(e,t,n="classic"){const r=Ro(t),i=tn(t),a=(n==="hgc"?px:mx)[i]??[];return[r,...a].includes(e)}const ZE=[["",""],["",""],["",""],["",""],["",""],["",""]],XE=[["",""],["",""],["",""],["",""],["",""],["",""]],Loe=new Set(["","","",""]),P7=[["",""],["",""]],Ioe=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Hm(e,t,n){const r=Lr(t),i=Lr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return!0;return!1}function LP(e,t,n){const r=Lr(t),i=Lr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return`${a}${o}`;return`${r}${i}`}function Xy(e){for(const t of Ioe)if(t.set.has(e))return t.voids;return null}function JE(e){const t=Lr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const r of n)if(r.group.has(t))return Array.from(r.years);return null}const rr={2:4,1:3,3:2,0:1},Jd={1:4,2:3,0:2,3:1},Se={year:0,month:1,day:2,hour:3};function $oe(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const Cu=e=>e===0?"":e===1?"":e===2?"":"",Ff=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",Boe=(e,t)=>`#X${Cu(t)}_${e}`,lf=(e,t,n)=>t===Se.month&&n===Se.day?`#X_${e}`:t===Se.year&&n===Se.month?`#X_${e}`:t===Se.year&&n===Se.day?`#X_${e}`:t===Se.month&&n===Se.hour?`#X_${e}`:t===Se.day&&n===Se.hour?`#X_${e}`:`#${Cu(t)}X${Cu(n)}_${e}`,cb=(e,t)=>`#${Cu(t)}_${e}`,R7=(e,t)=>`#X${Cu(t)}_${e}`,zoe=(e,t)=>`#(${e==="day"?"":""})X${Cu(t)}_`,Ld=e=>`#_${e}`,Id=(e,t)=>`#X${Ff(t)}_${e}`,um=(e,t)=>`#X${Ff(t)}_${e}`,eS=(e,t,n)=>`#${Cu(n)}X${Ff(t)}_${e}`,Uoe=(e,t)=>`#(${t==="day"?"":""})_${Ff(e)}_`,Foe=(e,t)=>`#(${t==="day"?"":""})X${Ff(e)}_`,IP=(e,t)=>`#X${Ff(e)}_${t}`;function QE(e,t){const n=Lr(e),r=[Se.day,Se.month,Se.hour,Se.year];for(const i of r)if(tn(t[i])===n)return{pos:i,weight:rr[i]??0};return null}function OT(e,t,n){return tn(t[n])===Lr(e)?{pos:n,weight:rr[n]}:null}function Hoe(e,t){const n=Ds(e),r=[Se.day,Se.month,Se.hour,Se.year];for(const i of r)if(Ro(t[i])===n)return{pos:i,weight:rr[i]??0};return null}const Goe=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Lr(t.trim())).filter(Boolean),_n=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Ds(t),Goe(n)])),Yoe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L7=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),qoe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Koe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Woe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Voe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Zoe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I7=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Xoe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Joe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Qoe=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ese=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),tse=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$7=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),nse=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rse=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$P=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ise=_n({:"",:"",:"",:"",:""}),ase=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),BP=_n({:"",:"",:""}),zP=_n({:"",:"",:""}),ose=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B7=_n({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z7=_n({:"",:"",:"",:"",:"",:"",:""}),sse=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Lr(t.trim())).filter(Boolean),$a=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Lr(t),(Array.isArray(n)?n:[n]).map(r=>Lr(r))])),Cx=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Lr(t),sse(n)])),U7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},F7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},G7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},lse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),UP=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),cse=Cx({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),use=Cx({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),dse=Cx({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),fse=Cx({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hse=$a({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),mse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),pse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),gse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bse=$a({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),Y7=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),yse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),vse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),xse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),wse=$a({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Tn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Lr(t),(Array.isArray(n)?n:[n]).map(r=>Lr(r))])),_se=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q7=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Sse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),kse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ese=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K7=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),jse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Tse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ase=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Nse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ose=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),W7=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Cse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Mse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Dse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Pse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Rse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Lse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V7=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ise=W7,$se=q7,Bse=V7,zse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Use=K7,Fse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Hse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Gse=Tn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""});function qp(e,t){e.push(t)}function tS(e,t,n,r,i=0){const a=Jd[n]>=Jd[r]?n:r;e.push({name:lf(t,n,r),weight:rr[a]+i,pos:a})}function Yse(e,t,n,r,i){const a=tn(e[Se.year]),o=t[a];if(!o)return;const l=n==="MONTH"?[Se.month]:n==="DAY"?[Se.day]:n==="HOUR"?[Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=OT(u,e,d);h&&qp(i,{name:lf(r,Se.year,d),weight:h.weight,pos:d})}}function qse(e,t,n,r){const i=tn(e[Se.month]),a=t[i];if(!a)return;const o=Ds(a),l=Hoe(o,e);l&&qp(r,{name:R7(n,l.pos),weight:l.weight,pos:l.pos})}function FP(e,t,n,r,i="ALL"){const a=tn(e[Se.month]),o=t[a];if(!o)return;const l=i==="YEAR"?[Se.year]:i==="DAY"?[Se.day]:i==="HOUR"?[Se.hour]:i==="DAY_HOUR"?[Se.day,Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=OT(u,e,d);if(!h)continue;const m=d===Se.month?`#_${n}`:R7(n,d);qp(r,{name:m,weight:h.weight,pos:d})}}function HP(e,t,n,r){const i=tn(e[Se.month]),a=t[i];if(!a)return;const o=e[Se.day];a.includes(o)&&qp(r,{name:lf(n,Se.month,Se.day),weight:rr[Se.day],pos:Se.day})}function GP(e,t,n,r,i){const a=Ro(e[Se.day]),o=t[a];if(!o)return;const l=i==="DAY"?[Se.day]:i==="HOUR"?[Se.hour]:[Se.year,Se.month,Se.day,Se.hour];for(const u of o)for(const d of l){const h=OT(u,e,d);h&&qp(r,{name:Boe(n,d),weight:h.weight,pos:d})}}function Kse({natal:e,daewoon:t,basis:n}){const r=Ro(e[Se.day]),i=tn(e[Se.day]),a=tn(e[Se.month]),o=tn(e[Se.year]),l=Roe(e),u=[],d=[],h=[[_se,"MONTH",""],[q7,"DAY",""],[kse,"MONTH",""],[Ese,"MONTH",""],[jse,"ALL",""],[Tse,"HOUR",""],[Ase,"ALL",""],[Nse,"ALL",""],[Ose,"ALL",""],[W7,"ALL",""],[Cse,"ALL",""],[Mse,"ALL",""],[Dse,"ALL",""],[Pse,"ALL",""],[Rse,"ALL",""],[Lse,"ALL",""],[V7,"ALL",""],[Ise,"ALL",""],[$se,"ALL",""],[Bse,"ALL",""],[zse,"ALL",""],[Use,"ALL",""],[Fse,"ALL",""],[Hse,"ALL",""],[Gse,"ALL",""]];for(const[C,M,P]of h)Yse(e,C,M,P,d);const m=[[U7,""],[F7,""],[H7,""],[G7,""]];for(const[C,M]of m)qse(e,C,M,u);const b=[[lse,"","ALL"],[UP,"","YEAR"],[UP,"","DAY"],[hse,"","ALL"],[mse,"","ALL"],[pse,"","ALL"],[gse,"","ALL"],[bse,"","ALL"]];for(const[C,M,P]of b)FP(e,C,M,d,P);const y=[[Y7,"","ALL"],[yse,"","DAY_HOUR"],[vse,"","DAY_HOUR"],[xse,"","ALL"],[wse,"","ALL"]];for(const[C,M,P]of y)FP(e,C,M,u,P);const k=[[cse,""],[fse,""]];for(const[C,M]of k)HP(e,C,M,u);const w=[[use,""],[dse,""]];for(const[C,M]of w)HP(e,C,M,d);const _=[[Yoe,"","ALL"],[L7,"","ALL"],[qoe,"","ALL"],[Koe,"","ALL"],[Woe,"","ALL"],[Voe,"","ALL"],[Zoe,"","ALL"],[I7,"","ALL"],[Xoe,"","ALL"],[Joe,"","ALL"],[Qoe,"","ALL"],[ese,"","ALL"],[tse,"","ALL"],[ose,"","ALL"]];for(const[C,M,P]of _)GP(e,C,M,u,P);const T=[[$7,"","ALL"],[nse,"","ALL"],[rse,"","ALL"],[$P,"","DAY"],[$P,"","HOUR"],[BP,"","DAY"],[BP,"","HOUR"],[zP,"","DAY"],[zP,"","HOUR"],[ise,"","DAY"],[ase,"","ALL"],[B7,"","ALL"]];for(const[C,M,P]of T)GP(e,C,M,d,P);if(new Set(["","","",""]).has(e[Se.day])){d.push({name:Ld(""),weight:rr[Se.day],pos:Se.day});for(const M of[Se.year,Se.month,Se.hour])e[M]===e[Se.day]&&d.push({name:cb("",M),weight:rr[M],pos:M})}{const C=z7[r];if(C)for(const M of[Se.year,Se.month,Se.day,Se.hour]){const P=Ro(e[M]),I=tn(e[M]);P===r&&C.includes(I)&&d.push({name:cb("",M),weight:rr[M],pos:M})}}for(const[C,M]of P7){const P=QE(C,e),I=QE(M,e);P&&I&&tS(d,"",P.pos,I.pos)}{const C=new Set(["",""]),M=new Set(["","","",""]);for(let P=0;P<=3;P++){const I=Ro(e[P]),z=tn(e[P]);(C.has(I)||M.has(z))&&d.push({name:cb("",P),weight:rr[P],pos:P})}}{const C=e[Se.hour],M=(I,z)=>I.includes(r)&&z.includes(C);(M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""]))&&d.push({name:Ld(""),weight:rr[Se.hour],pos:Se.hour})}["","","",""].every(C=>l.includes(C))&&u.push({name:Ld(""),weight:rr[Se.day],pos:Se.day});{const C=e[Se.day],M=e[Se.hour];(C===""&&M===""||C===""&&M==="")&&d.push({name:lf("",Se.day,Se.hour),weight:rr[Se.hour],pos:Se.hour})}{const C=tn(e[Se.year]),M=new Set(l.slice(1)),P=(z,K)=>z.every(G=>M.has(G))&&C===K;(P(["","",""],"")||P(["","",""],"")||P(["","",""],"")||P(["","",""],""))&&u.push({name:Ld(""),weight:rr[Se.day],pos:Se.day})}(e[Se.day]===""||e[Se.day]==="")&&u.push({name:Ld(""),weight:rr[Se.day],pos:Se.day});{const M={:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""}}[r];M&&e.some(I=>tn(I)===M.rok)&&Ro(e[Se.hour])===M.maStem&&u.push({name:lf("",Se.day,Se.hour),weight:rr[Se.hour],pos:Se.hour})}{const C=tn(e[Se.hour]),P={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[r];if(P){const I=i===P.rok,z=C===P.ma,K=lb(P.rokStem,e[Se.day],"classic")||lb(P.rokStem,e[Se.hour],"classic"),G=lb(P.maStem,e[Se.day],"classic")||lb(P.maStem,e[Se.hour],"classic");I&&z&&(K||G)&&u.push({name:lf("",Se.day,Se.hour),weight:rr[Se.hour],pos:Se.hour})}}{const C=new Set(["","","","","",""]),M=e.map(Ro),P=e.map(tn),I=M.concat(P).filter(H=>C.has(H)).length,z=t?Ro(t):"",K=t?tn(t):"",G=C.has(z)||C.has(K);(I>=4||I===3&&G)&&d.push({name:Ld(""),weight:rr[Se.day],pos:Se.day})}{const C=new Set(["",""]),M=new Set(["",""]);for(let P=0;P<=3;P++){const I=Ro(e[P]),z=tn(e[P]);(C.has(I)||M.has(z))&&d.push({name:cb("",P),weight:rr[P],pos:P})}}{const C=[[Se.year,Se.month],[Se.year,Se.day],[Se.month,Se.day],[Se.month,Se.hour],[Se.day,Se.hour]];for(const[M,P]of C){const I=tn(e[M]),z=tn(e[P]);if(Hm(ZE,I,z)){const K=LP(ZE,I,z);tS(d,`${K}`,M,P)}}}{const C=[[Se.year,Se.month,0],[Se.month,Se.day,1],[Se.month,Se.hour,0],[Se.day,Se.hour,0]];for(const[M,P,I]of C){const z=tn(e[M]),K=tn(e[P]);if(Hm(XE,z,K)){const G=LP(XE,z,K),H=(I?1:0)+(Loe.has(z+K)?1:0);tS(d,`${G}`,M,P,H)}}}const N=Xy(e[Se.day]),j=Xy(e[Se.year]);{const C=(n?.voidBasis??"day")==="day"?N:j;if(C){const[M,P]=C.map(Lr);for(const I of[Se.year,Se.month,Se.day,Se.hour]){const z=tn(e[I]);(z===M||z===P)&&d.push({name:zoe(n?.voidBasis??"day",I),weight:rr[I],pos:I})}}}return{goodPos:u,badPos:d,dayVoid:N,yearVoid:j,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l}}function ub({src:e,luck:t,natal:n,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l,dayVoid:u,yearVoid:d,basis:h}){const m=[],b=[],y=(N,j)=>{N.includes(j)||N.push(j)},k=Poe(t??null);if(!k)return{good:m,bad:b};const w=k.branch,_=k.stem;Ds(U7[a]??"")===_&&y(m,um("",e)),Ds(F7[a]??"")===_&&y(m,um("",e)),Ds(H7[a]??"")===_&&y(m,um("",e)),Ds(G7[a]??"")===_&&y(m,um("",e)),Y7[a]?.includes(w)&&y(m,um("",e)),L7[r]?.includes(w)&&y(m,Id("",e)),I7[r]?.includes(w)&&y(m,Id("",e)),$7[r]?.includes(w)&&y(b,Id("",e)),B7[r]?.includes(w)&&y(b,Id("",e)),z7[r]?.includes(w)&&y(b,Id("",e)),e==="se"&&(Sse[o]?.includes(w)&&y(b,IP(e,"")),K7[o]?.includes(w)&&y(b,IP(e,"")));for(const N of l)if(Hm(P7,w,N)){const j=QE(N,n)?.pos;j!==void 0&&y(b,eS("",e,j));break}new Set(["",""]).has(r)&&new Set(["","","",""]).has(w)&&y(b,Id("",e));const T=(h?.voidBasis??"day")==="day"?u:d;T&&(w===T[0]||w===T[1])&&y(b,Uoe(e,h?.voidBasis??"day"));for(let N=0;N<=3;N++){const j=tn(n[N]);Hm(ZE,w,j)&&y(b,eS("",e,N)),Hm(XE,w,j)&&y(b,eS("",e,N))}if(e==="se"){const N=(h?.samjaeBasis??"day")==="day"?i:o,j=N?JE(N):null;j&&j.includes(w)&&y(b,Foe(e,h?.samjaeBasis??"day"))}return{good:m,bad:b}}const Wse=/^#(|||)X\1_/,Vse=e=>Wse.test(e);function YP(e){const t=new Map;for(const n of e){if(Vse(n.name))continue;const r=`${n.name}@${n.pos}`,i=t.get(r);(!i||n.weight>i.weight)&&t.set(r,n)}return Array.from(t.values()).sort((n,r)=>r.weight!==n.weight?r.weight-n.weight:n.name.localeCompare(r.name,"ko"))}function Zse(e){const t=e.lastIndexOf("_");return t>=0?e.slice(t+1):e}const Xse=new Set(["",""]);function Jse(e){return Xse.has(e)?!0:e.endsWith("")||e.endsWith("")}function qP(e){const t=new Map;for(const r of e){const i=Zse(r.name);t.has(i)||t.set(i,[]),t.get(i).push(r)}const n=[];for(const[r,i]of t)if(Jse(r))n.push(...i);else{const a=i.sort((o,l)=>Jd[o.pos]!==Jd[l.pos]?Jd[l.pos]-Jd[o.pos]:l.weight-o.weight)[0];n.push(a)}return n}function KP(e,t){const n={si:[],il:[],yeon:[],wol:[]},r=$oe;for(const i of e)n[r(i.pos)].push(i.name);return n}function Kp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:a}){const{goodPos:o,badPos:l,dayVoid:u,yearVoid:d,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k}=Kse({natal:e,daewoon:t,basis:a}),w=qP(YP(o)),_=qP(YP(l)),T=KP(w),N=KP(_),j=ub({src:"dae",luck:t??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),C=ub({src:"se",luck:n??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),M=ub({src:"wol",luck:r??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),P=ub({src:"il",luck:i??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a});return{good:{...T,dae:j.good,se:C.good,wolun:M.good,ilun:P.good},bad:{...N,dae:j.bad,se:C.bad,wolun:M.bad,ilun:P.bad},meta:{voidPair:{day:Xy(e[Se.day])??void 0,year:Xy(e[Se.year])??void 0},samjaeYears:{day:JE(tn(e[Se.day]))??void 0,year:JE(tn(e[Se.year]))??void 0},currentBasis:{voidBasis:a?.voidBasis??"day",samjaeBasis:a?.samjaeBasis??"day"}}}}function Qse(e){return typeof e=="object"&&e!==null}function zu(e){const t=v7;return Qse(t)&&("Classic"in t||"Modern"in t||"classic"in t||"modern"in t)?e==="classic"?t.Classic:t.Modern:e}const WP=["","","","","","","","","",""],VP=["","","","","","","","","","","",""],ele=["","","","","","","","","","","",""];function tle(e){const t=gx(e);return t===""||t===""?0:t===""||t===""?2:t===""||t===""?4:t===""||t===""?6:8}function nle(e,t){const n=tle(e);return(t?ele:VP).map(i=>{const a=VP.indexOf(i);let o=(n+(a<0?0:a))%10;return t&&(i===""||i==="")&&(o=(o+2)%10),`${WP[o]??WP[0]}${i}`})}function Gm(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function ZP(e){return e<10?`0${e}`:`${e}`}function e2(e){return`${ZP(e.getHours())}:${ZP(e.getMinutes())}`}function CT(e){return!e||e===""?!0:!/^\d{4}$/.test(e)}function XP(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),a=`${n}-${r}-${i}`;return!t||CT(t)?a:`${a} ${t.slice(0,2)}:${t.slice(2,4)}`}function rle(e,t,n){if(n)return"";const r=(e??"").trim();if(r)return r;const i=t instanceof Date?t:new Date(t);return Number.isNaN(i.getTime())?"":e2(i)}const JP=["","/",""],ile="/";function Z7(e,t){return e&&JP.includes(e)?e:t&&JP.includes(t)?t:ile}function QP(e){return e===""}function ale(e){return e===""?"":""}function ole(e){switch(e){case"":return 1;case"":return 2;case"":return 3;case"":default:return 0}}const sle=e=>e instanceof Date&&!Number.isNaN(e.getTime());function t2(e,t){const n=CT(e.birthTime);let r=Number(e.birthDay?.slice(0,4)??2e3),i=Number(e.birthDay?.slice(4,6)??1),a=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=ia(r,i,a);r=j.getFullYear(),i=j.getMonth()+1,a=j.getDate()}const o=n?4:Number(e.birthTime?.slice(0,2)??4),l=n?30:Number(e.birthTime?.slice(2,4)??30),u=new Date(r,i-1,a,o,l,0,0),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon,h=d?127.5:e.birthPlace.lon,m=sle(e.corrected);let b;m?b=e.corrected:d?b=u:b=Up(u,h,n);const y=t?new Date(b.getTime()-3600*1e3):b,k=Z7(e.mingSikType),w=ut(y,h),_=Ot(y,h),T=dt(y,k),N=n?null:Ni(y,k);return{corrected:y,year:{stem:w.charAt(0),branch:w.charAt(1)},month:{stem:_.charAt(0),branch:_.charAt(1)},day:{stem:T.charAt(0),branch:T.charAt(1)},hour:N?{stem:N.charAt(0),branch:N.charAt(1)}:null}}const lle=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],cle=(()=>{const e={};for(const t of lle){const[n,r]=t.keys;e[n]={label:t.label,elem:t.elem},e[r]={label:t.label,elem:t.elem}}return e})(),ule={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function dle(e,t){const n=`${gx(e)}${Ij(t)}`;return cle[n]??null}function fle(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}function hle(e){switch(ule[Ij(e)]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function mle({stem:e,branch:t}){const n=dle(e,t);if(!n)return null;const r=fle(n.elem);return g.jsx("span",{className:`inline-block mt-1 px-1.5 py-[2px] rounded ${r} border border-white/10 text-nowrap`,title:`${n.label}  ${n.elem}`,children:n.label})}function eR({value:e,kind:t,charType:n,thinEum:r,highlighted:i}){const{settings:a}=Jt(),o=ii(e,t,a),l=Yr(e,t,n),u=na(e,t),d=r&&u?"font-thin":"font-bold",h=i?"border-purple-500 border-3":"border-neutral-200 dark:border-neutral-800";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${o}
                  flex items-center justify-center border ${h}`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${d} `,children:l})})}function X7({title:e,data:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:y="regular",highlightedStem:k=!1,highlightedBranch:w=!1}){const _=y==="compact"?"py-1 text-center text-xs tracking-wider":"px-2 py-1 text-center text-xs tracking-wider",T=y==="compact"?"py-2":"p-2";return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:`${_} bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300`,children:e}),g.jsx("div",{className:`${T} flex flex-col items-center gap-1`,children:t?g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Oi(n,{stem:t.stem})}),g.jsx(eR,{value:t.stem,kind:"stem",charType:r,thinEum:i,highlighted:k}),g.jsx(eR,{value:t.branch,kind:"branch",charType:r,thinEum:i,highlighted:w}),g.jsx(C4,{branch:t.branch,dayStem:n,mode:d,mapping:h}),(o||l||u)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 w-full",children:[o&&g.jsx("div",{children:m(t.branch)}),l&&g.jsx("div",{children:b(t.branch)}),u&&g.jsx(mle,{stem:t.stem,branch:t.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]})}const ple=(e,t,n,r)=>{let i=e.data.stem,a=e.data.branch;return e.key==="daeun"&&t&&(i=t.charAt(0),a=t.charAt(1)),e.key==="seun"&&n&&(i=n.charAt(0),a=n.charAt(1)),e.key==="wolun"&&r&&(i=r.charAt(0),a=r.charAt(1)),{stem:i,branch:a}};function gle({cards:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,daeGz:y,seGz:k,wolGz:w,highlightMap:_={}}){const T=t?"regular":"compact",N=e.length===1?"grid-cols-1":e.length===2?"grid-cols-2":"grid-cols-3",j="rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",C=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",M=t?`grid gap-2 p-3 ${N}`:`grid gap-1 p-0 ${N}`;return g.jsxs("div",{className:j,children:[g.jsx("div",{className:C,children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:M,children:e.map(P=>{const I=ple(P,y,k,w),z=_[P.key]??{stem:!1,branch:!1};return g.jsx(X7,{title:P.label,data:I,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:T,highlightedStem:z.stem,highlightedBranch:z.branch},P.key)})})})]})}function ble({pillars:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,highlightMap:y={}}){const k=t?"regular":"compact",w=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",_=t?"grid grid-cols-4 gap-2 p-3":"grid grid-cols-4 gap-1";return g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:w,children:g.jsx("b",{children:""})}),g.jsx("div",{className:t?"pb-2":"px-1 pb-2",children:g.jsx("div",{className:_,children:e.map(T=>{const N=y[T.key]??{stem:!1,branch:!1};return g.jsx(X7,{title:T.label,data:T.data,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:k,highlightedStem:N.stem,highlightedBranch:N.branch},T.key)})})})]})}function yle({hourCandidates:e,useInsi:t,onToggleRule:n,usePrevDay:r,onTogglePrevDay:i,canSelectHourBranch:a,manualHour:o,onSelectHour:l}){return g.jsxs("div",{className:"my-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:n,className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:t?" : ":" : "}),g.jsx("button",{onClick:i,className:`px-2 py-1 text-xs rounded border cursor-pointer ${r?"bg-amber-500 text-white border-amber-500":"bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600"}`,children:""})]})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map(u=>{const d=u.charAt(0),h=u.charAt(1),m=o?.stem===d&&o?.branch===h,b=a?!a(h):!1;return g.jsx("button",{onClick:()=>l(d,h),disabled:b,className:`p-2 text-xs rounded border ${m?hle(h):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"} ${b?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,title:`${u} ( )`,children:u},u)})})]})}function vle(e){const i=e.trim().replace(/^#?(|||)(X(|||))?_/u,"").replace(/\((|||)\)$/u,"").replace(/\s+/g," ").trim(),a=i.includes("_")?i.split("_").pop()??i:i;return a.includes("")?"":a.includes("")?"":a.includes("")?"":a===""||a===""||a===""?"":a}const dm={:{title:"()",kind:"",oneLine:"     .",bullets:["  ,   ."]},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   :   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" ,    ."},:{title:"()",kind:"",oneLine:"  (  ) ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"  / ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"()   ."},:{title:"()",kind:"",oneLine:"  ()  ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"+     ."},:{title:"()",kind:"",oneLine:"///   ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"/        ."},:{title:"()",kind:"",oneLine:" 3      .",bullets:["    ."]},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"   : //."},:{title:"",kind:"",oneLine:"  :   ."},:{title:"",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" //  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:": /  ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  ."},:{title:"()",kind:"",oneLine:" / :   ."},:{title:"()",kind:"",oneLine:"()  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" / :    ."},:{title:"()",kind:"",oneLine:" :   / ."},:{title:"",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"() //  ."},:{title:"()",kind:"",oneLine:" :      ."},:{title:"()",kind:"",oneLine:" ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//    ."},:{title:"()",kind:"",oneLine:"    : ."},:{title:"",kind:"",oneLine:"  : //."},:{title:"()",kind:"",oneLine:"/  ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:" : /  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:" () ."},:{title:"()",kind:"",oneLine:"  ,    ."},:{title:"",kind:"",oneLine:":  ."},:{title:"",kind:"",oneLine:" /  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"      :    ."},:{title:"",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" .       ."},:{title:"()",kind:"",oneLine:" .     ."},:{title:"()",kind:"",oneLine:"  .      ."},:{title:"()",kind:"",oneLine:" :  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:" :  /,   ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"/  :    ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"  : /  ."},:{title:"()",kind:"",oneLine:"  : // ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:"//   ."},:{title:"()",kind:"",oneLine:"/  :  ."},:{title:"()",kind:"",oneLine:"/    ."},:{title:"()",kind:"",oneLine:" :    ,  /  ."}};function xle(e){const t=vle(e),n=dm[t];if(n)return n;if(t.endsWith("")){const r=t.replace(/$/,"");if(dm[r])return dm[r]}else{const r=`${t}`;if(dm[r])return dm[r]}return{title:t||"",kind:"",oneLine:" "}}function wle(e){const t=`${e.title}  ${e.kind}`,n=e.oneLine,r=(e.bullets??[]).map(i=>`- ${i}`).join(`
`);return r?`${t}
${n}
${r}`:`${t}
${n}`}function Oo({columnKey:e,title:t,goodTags:n,badTags:r,isDesktop:i,openTagKey:a,setOpenTagKey:o}){const l=n2(n,Jy),u=n2(r,Jy),d=i||l.length>0,h=i||u.length>0;return!i&&l.length===0&&u.length===0?null:g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:t}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[d&&g.jsx("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mb-1",children:""}),g.jsx(tR,{tags:n,idPrefix:`${e}-good`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]}),g.jsxs("div",{children:[h&&g.jsx("div",{className:"text-[10px] text-rose-600 dark:text-rose-400 mb-1",children:""}),g.jsx(tR,{tags:r,idPrefix:`${e}-bad`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]})]})]})}function tR({tags:e,idPrefix:t,isDesktop:n,openTagKey:r,setOpenTagKey:i}){const a=n2(e,Jy);return a.length===0?n?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):null:g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:a.map((o,l)=>{const u=`${t}-${l}`;return g.jsx(_le,{tag:o,id:u,openTagKey:r,setOpenTagKey:i},u)})})}function _le({tag:e,id:t,openTagKey:n,setOpenTagKey:r}){const i=n===t,a=xle(e),o=a?wle(a):"",l=Jy(e),u=S.useRef(null),d=S.useRef(null),[h,m]=S.useState("center");return S.useLayoutEffect(()=>{if(!i)return;const b=d.current;if(!b)return;const y=b.getBoundingClientRect(),w=Math.min(300,window.innerWidth-16*2),_=y.left,T=window.innerWidth-y.right;T<w/2&&_>T?m("right"):_<w/2&&T>_?m("left"):m("center")},[i]),S.useLayoutEffect(()=>{if(!i)return;const b=y=>{const k=y.target;!u.current||k&&u.current.contains(k)||r(null)};return document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b)}},[i,r]),g.jsxs("div",{ref:u,className:"relative",children:[g.jsx("button",{ref:d,type:"button",onClick:()=>r(i?null:t),className:["px-2 py-1 text-[12px] desk:text-[11px] text-center  rounded border desk:break-keep w-full cursor-pointer ",i?"bg-purple-500/20 text-purple-200 border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:l,children:l}),a&&i&&g.jsx("div",{className:["absolute top-full mt-2 z-50",h==="left"?"left-0":h==="right"?"right-0":"left-1/2 -translate-x-1/2"].join(" "),children:g.jsx("div",{className:"relative whitespace-pre-wrap break-words break-keep rounded-md border border-neutral-700 bg-neutral-900 text-neutral-100 text-[10px] leading-4 p-2 shadow-lg text-center",style:{width:"min(190px, calc(100vw - 24px))"},children:o})})]})}function Jy(e){const t=e.replace(/^#/,""),n=t.split("_"),r=n.length>1?n[n.length-1]:t,i=r.split(" ").filter(Boolean);return i.length>0?i[i.length-1]:r}function n2(e,t){const n=new Set,r=[];for(const i of e){const a=t(i);n.has(a)||(n.add(a),r.push(i))}return r}const Sle=[{level:0,label:" "},{level:1,label:" "},{level:2,label:" "},{level:3,label:" "}];function kle({isDesktop:e,exposureLevel:t,relationApplyLevel:n,maxRelationApplyLevel:r,onChangeRelationApplyLevel:i,relationChips:a,relationByPillar:o,activeRelationTag:l,onToggleRelationTag:u,showRelationBox:d,showEtcShinsalBox:h,etcShinsalGood:m,etcShinsalBad:b}){const[y,k]=S.useState(!0),[w,_]=S.useState(!0),[T,N]=S.useState(null);return g.jsxs(g.Fragment,{children:[d&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>k(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",y?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:y?"":""})]}),y&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 mb-2",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:Sle.filter(j=>j.level<=r).map(j=>{const C=n===j.level;return g.jsx("button",{type:"button",onClick:()=>i(j.level),className:["px-2 py-1 text-[11px] rounded border transition cursor-pointer",C?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),children:j.label},j.level)})})}),g.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 pl-1 mb-2",children:"     ."}),a.length===0?g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."}):g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?n>=3?"4fr 5fr":n>=2?"3.5fr 6.5fr":n>=1?"2fr 8fr":"1fr":void 0},children:[n>=1&&g.jsx("div",{className:"border-t desk:border-0 border-neutral-200 dark:border-neutral-800 pt-2 desk:pt-0 order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${n>=3?3:n>=2?2:1}, minmax(60px, 1fr))`:void 0},children:(e?[n>=3&&g.jsx(Co,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol"),n>=2&&g.jsx(Co,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=1&&g.jsx(Co,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae")]:[n>=1&&g.jsx(Co,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae"),n>=2&&g.jsx(Co,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=3&&g.jsx(Co,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2 desk:pl-0 desk:border-t-0 desk:border-l-0",children:[g.jsx(Co,{title:"",tags:o.natal.hour,activeTag:l,onToggle:u}),g.jsx(Co,{title:"",tags:o.natal.day,activeTag:l,onToggle:u}),g.jsx(Co,{title:"",tags:o.natal.month,activeTag:l,onToggle:u}),g.jsx(Co,{title:"",tags:o.natal.year,activeTag:l,onToggle:u})]})]})]})]})}),h&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>_(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",w?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:w?"":""})]}),w&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 text-[11px] text-amber-600 dark:text-amber-300 mb-2",children:"       ."}),nR(m)||nR(b)?g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?t>=3?"4fr 5fr":t>=2?"3.5fr 6.5fr":t>=1?"2fr 8fr":"1fr":void 0},children:[g.jsx("div",{className:"order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${t>=3?3:t>=2?2:t>=1?1:0}, minmax(60px, 1fr))`:void 0},children:(e?[t>=3&&g.jsx(Oo,{columnKey:"etc-luck-wol",title:"",goodTags:m.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-wol"),t>=2&&g.jsx(Oo,{columnKey:"etc-luck-se",title:"",goodTags:m.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-se"),t>=1&&g.jsx(Oo,{columnKey:"etc-luck-dae",title:"",goodTags:m.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-dae")]:[t>=1&&g.jsx(Oo,{columnKey:"etc-luck-dae",title:"",goodTags:m.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-dae"),t>=2&&g.jsx(Oo,{columnKey:"etc-luck-se",title:"",goodTags:m.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-se"),t>=3&&g.jsx(Oo,{columnKey:"etc-luck-wol",title:"",goodTags:m.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:N},"luck-wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2",children:[g.jsx(Oo,{columnKey:"etc-natal-hour",title:"",goodTags:m.natal.hour,badTags:b.natal.hour,isDesktop:e,openTagKey:T,setOpenTagKey:N}),g.jsx(Oo,{columnKey:"etc-natal-day",title:"",goodTags:m.natal.day,badTags:b.natal.day,isDesktop:e,openTagKey:T,setOpenTagKey:N}),g.jsx(Oo,{columnKey:"etc-natal-month",title:"",goodTags:m.natal.month,badTags:b.natal.month,isDesktop:e,openTagKey:T,setOpenTagKey:N}),g.jsx(Oo,{columnKey:"etc-natal-year",title:"",goodTags:m.natal.year,badTags:b.natal.year,isDesktop:e,openTagKey:T,setOpenTagKey:N})]})]}):g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."})]})]})})]})}function Co({title:e,tags:t,activeTag:n,onToggle:r}){return g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:e}),t.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:t.map(i=>{const a=n===i;return g.jsx("button",{type:"button",onClick:()=>r(a?null:i),className:["px-2 py-1 text-[12px] desk:text-[11px] rounded border transition desk:break-keep cursor-pointer",a?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:i,children:Ele(i)},i)})})]})}function Ele(e){const t=e.replace(/^#/,""),n=t.split("_");return(n.length>1?n.slice(1).join("_"):t).replace(/_/g," ")}function nR(e){const{natal:t,luck:n}=e;return t.hour.length>0||t.day.length>0||t.month.length>0||t.year.length>0||n.dae.length>0||n.se.length>0||n.wol.length>0}function rR(e){return String(e).padStart(2,"0")}function jle(e,t,n){if(!e||e.length<8)return XP(e,t);const r=XP(e,t);if(n!=="lunar")return r;try{const i=Number(e.slice(0,4)),a=Number(e.slice(4,6)),o=Number(e.slice(6,8)),l=ia(i,a,o);return` ${`${l.getFullYear()}.${rR(l.getMonth()+1)}.${rR(l.getDate())}`} ( ${r})`}catch{return` ${r}`}}function Tle({data:e,hourTable:t}){const{date:n,setDstOffsetMinutes:r}=Kr(),i=Jt(Oe=>Oe.settings),a=i.showNabeum??!0,o=i.showRelationBox??!0,l=i.showEtcShinsal??!0,u=Z7(e.mingSikType,t),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:h,solarM:m,solarD:b}=S.useMemo(()=>{let Oe=Number(e.birthDay?.slice(0,4)??2e3),Fe=Number(e.birthDay?.slice(4,6)??1),We=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const bt=ia(Oe,Fe,We);Oe=bt.getFullYear(),Fe=bt.getMonth()+1,We=bt.getDate()}return{solarY:Oe,solarM:Fe,solarD:We}},[e.birthDay,e.calendarType]),y=Ky(Oe=>Oe.useDST),k=Ky(Oe=>Oe.setUseDST);S.useEffect(()=>{h&&m&&b&&k(ap(h,m,b))},[h,m,b,k]),S.useEffect(()=>{r(y?-60:0)},[y,r]);const w=CT(e.birthTime),[_,T]=S.useState(()=>t2(e,y));S.useEffect(()=>{T(t2(e,y))},[e,y]);const N=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,j=Ei(Oe=>Oe.usePrevDay),C=Ei(Oe=>Oe.setUsePrevDay),M=S.useMemo(()=>{const Oe=`${_.day.stem}${_.day.branch}`,Fe=j?ta(Oe,-1):Oe;return{stem:Fe.charAt(0),branch:Fe.charAt(1)}},[_.day.stem,_.day.branch,j]),P=_.day.stem,I=M.stem,[z,K]=S.useState(null),[G,H]=S.useState(()=>QP(e.mingSikType)),B=Ei(Oe=>Oe.clearManualHour);S.useEffect(()=>{K(null),B(),H(QP(e.mingSikType)),C(!1)},[N,e.mingSikType,B,C]);const q=j&&G?I:P,X=S.useMemo(()=>nle(q,G),[G,q]),V=z??_.hour,F=Ei(Oe=>Oe.setManualHour),Z=S.useCallback(Oe=>j?G?Oe===""||Oe==="":Oe==="":!0,[j,G]);S.useEffect(()=>{z&&(Z(z.branch)||(K(null),B()))},[z,Z,B]);const Q=(Oe,Fe)=>{if(!Z(Fe))return;if(z?.stem===Oe&&z?.branch===Fe){K(null),B();return}const We={stem:Oe,branch:Fe};K(We),F(We)},le=ale(i.sinsalBase)===""?M.branch:_.year.branch,se=Oe=>i.showSibiUnseong?Ca(I,Oe):null,W=Oe=>i.showSibiSinsal?Ma({baseBranch:le,targetBranch:Oe,era:zu(i.sinsalMode),gaehwa:i.sinsalBloom}):null,re=y?-60:0,ee=ioe(e,u,re),he=Iae({query:"(min-width: 992px)"}),J=i.hiddenStem==="regular"?"main":"all",ae=ole(i.exposure),me=ae===0?[]:ee.filter(Oe=>(Oe.key==="daeun"?1:Oe.key==="seun"?2:3)<=ae),pe=ap(h,m,b),te=()=>k(!y),je=S.useMemo(()=>{const Oe=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??""));return Number.isNaN(Oe.getTime())?_.corrected:Oe},[e.corrected,_.corrected]),xe=S.useMemo(()=>je&&(pe&&y?new Date(je.getTime()-3600*1e3):je),[je,pe,y]),ue=S.useMemo(()=>{const Oe=pe&&y?"":e.correctedLocal;return rle(Oe,xe??new Date,w)},[e.correctedLocal,xe,w,pe,y]),Ee=Nx(e,t,n,{dstOffsetMinutes:re}),Me=Ee.dae.gz,Ie=Ee.se.gz,Ke=Ee.wol.gz,mt=S.useMemo(()=>ae>=3&&Ke?3:ae>=2&&Ie?2:ae>=1&&Me?1:0,[ae,Me,Ie,Ke]),[pt,De]=S.useState(mt),[ze,Ge]=S.useState(null);S.useEffect(()=>{De(mt),Ge(null)},[N,mt]);const oe=S.useMemo(()=>{const Oe=Nt=>Nt?.stem&&Nt?.branch?`${Nt.stem}${Nt.branch}`:"",Fe=[Oe(_.year),Oe(_.month),Oe(M),Oe(V)],We=Jl({natal:[...Fe],daewoon:pt>=1?Me??void 0:void 0,sewoon:pt>=2?Ie??void 0:void 0,wolwoon:pt>=3?Ke??void 0:void 0}),bt=Ox([...Fe],{fillNone:!1}),At={...We};for(const Nt of O7)At[Nt]=Array.from(new Set([...At[Nt]??[],...bt[Nt]??[]]));return At},[_,M,V,Me,Ie,Ke,pt]),Ce=S.useMemo(()=>{const Oe=[...oe.cheonganHap,...oe.cheonganChung,...oe.jijiSamhap,...oe.jijiBanhap,...oe.jijiBanghap,...oe.jijiYukhap,...oe.jijiChung,...oe.jijiHyeong,...oe.jijiPa,...oe.jijiHae,...oe.amhap,...oe.ganjiAmhap].filter(Fe=>Fe&&Fe!=="#");return Array.from(new Set(Oe))},[oe]);S.useEffect(()=>{ze&&!Ce.includes(ze)&&Ge(null)},[ze,Ce]);const Ue=S.useMemo(()=>{const Oe=(We,bt)=>{We.includes(bt)||We.push(bt)},Fe={luck:{wol:[],se:[],dae:[]},natal:{hour:[],day:[],month:[],year:[]}};for(const We of Ce){const At=(We.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean);At.includes("")&&Oe(Fe.luck.wol,We),At.includes("")&&Oe(Fe.luck.se,We),At.includes("")&&Oe(Fe.luck.dae,We),At.includes("")&&Oe(Fe.natal.hour,We),At.includes("")&&Oe(Fe.natal.day,We),At.includes("")&&Oe(Fe.natal.month,We),At.includes("")&&Oe(Fe.natal.year,We)}return Fe},[Ce]),rt=S.useMemo(()=>{const Oe=bt=>bt?.stem&&bt?.branch?`${bt.stem}${bt.branch}`:"",Fe=Kp({natal:[Oe(_.year),Oe(_.month),Oe(M),Oe(V)],daewoon:ae>=1?Me??void 0:void 0,sewoon:ae>=2?Ie??void 0:void 0,wolwoon:ae>=3?Ke??void 0:void 0}),We=bt=>Array.from(new Set(bt.filter(At=>At&&At!=="#")));return{good:{natal:{hour:We(Fe.good.si??[]),day:We(Fe.good.il??[]),month:We(Fe.good.wol??[]),year:We(Fe.good.yeon??[])},luck:{dae:We(Fe.good.dae??[]),se:We(Fe.good.se??[]),wol:We(Fe.good.wolun??[])}},bad:{natal:{hour:We(Fe.bad.si??[]),day:We(Fe.bad.il??[]),month:We(Fe.bad.wol??[]),year:We(Fe.bad.yeon??[])},luck:{dae:We(Fe.bad.dae??[]),se:We(Fe.bad.se??[]),wol:We(Fe.bad.wolun??[])}}}},[_,M,V,Me,Ie,Ke,ae]),xt=S.useMemo(()=>{const Oe={},Fe=(We,bt)=>{for(const At of We)Oe[At]=bt};return Fe(oe.cheonganHap,"stem"),Fe(oe.cheonganChung,"stem"),Fe(oe.jijiSamhap,"branch"),Fe(oe.jijiBanhap,"branch"),Fe(oe.jijiBanghap,"branch"),Fe(oe.jijiYukhap,"branch"),Fe(oe.jijiChung,"branch"),Fe(oe.jijiHyeong,"branch"),Fe(oe.jijiPa,"branch"),Fe(oe.jijiHae,"branch"),Fe(oe.amhap,"branch"),Fe(oe.ganjiAmhap,"both"),Oe},[oe]),st=S.useMemo(()=>{if(!ze)return{};const Oe=xt[ze]??"branch",We=(ze.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean),bt={:"year",:"month",:"day",:"hour",:"daeun",:"seun",:"wolun",:"ilun"},At={};for(const Nt of We){const Mt=bt[Nt];if(!Mt)continue;const Kt=At[Mt]??{stem:!1,branch:!1};Oe==="stem"?Kt.stem=!0:(Oe==="branch"||(Kt.stem=!0),Kt.branch=!0),At[Mt]=Kt}return At},[ze,xt]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),pe&&g.jsxs("button",{onClick:te,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-xs desk:text-sm text-neutral-600 dark:text-neutral-400",children:[jle(e.birthDay,e.birthTime,e.calendarType)," : ",ue]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[e.birthPlace?.name?`: ${e.birthPlace.name}`:""," /  : ",d.toFixed(2),"  ",u," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${me.length===0?"grid-cols-1":me.length===1?"grid-cols-[2fr_8fr]":me.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[me.length>0&&g.jsx(gle,{cards:me,isDesktop:he,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:J,hiddenStemMode:i.hiddenStemMode,calcUnseong:se,calcShinsal:W,daeGz:Me,seGz:Ie,wolGz:Ke,highlightMap:st}),g.jsx(ble,{isDesktop:he,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:J,hiddenStemMode:i.hiddenStemMode,calcUnseong:se,calcShinsal:W,highlightMap:st,pillars:[{key:"hour",label:"",data:V},{key:"day",label:"",data:M},{key:"month",label:"",data:_.month},{key:"year",label:"",data:_.year}]})]}),w&&g.jsx(yle,{hourCandidates:X,useInsi:G,onToggleRule:()=>H(Oe=>!Oe),usePrevDay:j,onTogglePrevDay:()=>C(!j),canSelectHourBranch:Z,manualHour:z,onSelectHour:Q}),g.jsx(kle,{isDesktop:he,exposureLevel:ae,relationApplyLevel:pt,maxRelationApplyLevel:mt,onChangeRelationApplyLevel:De,relationChips:Ce,relationByPillar:Ue,activeRelationTag:ze,onToggleRelationTag:Ge,showRelationBox:o,showEtcShinsalBox:l,etcShinsalGood:rt.good,etcShinsalBad:rt.bad})]})}function Yo(e,t){const n=e,r=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,i=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),a=typeof n.birthHour=="number",o=typeof n.birthMinute=="number";if(r||!(i||a||o)){const u=new Date(t);return u.setHours(4,30,0,0),u}return t}function Mx(e,t){const n=e.length;if(n===0||!t)return 0;const r=e[0].at.getTime(),i=e[n-1].at.getTime(),a=t.getTime();if(a<=r)return 0;if(a>=i)return n-1;for(let o=0;o<n-1;o+=1){const l=e[o].at.getTime(),u=e[o+1].at.getTime();if(a>=l&&a<u)return o}return 0}function Ale({data:e}){const t=Qo(),n=hc(e,e.mingSikType,100,t),r=Ei(G=>G.usePrevDay),i=S.useMemo(()=>{const G=Uf(e);return Go(G,t)},[e,t]),a=S.useMemo(()=>Yo(e,i),[e,i]),o=S.useMemo(()=>{const G=e.mingSikType??"/",H=dt(a,G);return(r?ta(H,-1):H).charAt(0)},[a,e.mingSikType,r]),{date:l,setFromEvent:u}=Kr(),d=S.useMemo(()=>Mx(n,l),[n,l]),h=Jt(G=>G.settings),m=Jt(G=>G.setKey),{charType:b,thinEum:y,showSipSin:k,showSibiUnseong:w,showSibiSinsal:_,sinsalBase:T,sinsalMode:N,sinsalBloom:j,daewoonDisplayBase:C}=h,M=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,P=e.mingSikType??"/",I=T===""?(r?ta(dt(a,P),-1):dt(a,P)).charAt(1):ut(a,M).charAt(1),z=G=>w?Ca(o,G):null,K=G=>_?Ma({baseBranch:I,targetBranch:G,era:zu(N),gaehwa:!!j}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsxs("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300 flex items-center justify-between gap-2",children:[g.jsx("span",{children:""}),g.jsxs("div",{className:"inline-flex rounded-md overflow-hidden border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("button",{type:"button",onClick:()=>m("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>m("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""})]})]}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:n.map((G,H)=>{const B=G.gz.charAt(0),q=G.gz.charAt(1),X=Nle(G.age),V=H===d,F=Yr(B,"stem",b),Z=Yr(q,"branch",b),Q=na(B,"stem"),le=na(q,"branch"),se=y&&Q?"font-thin":"font-bold",W=y&&le?"font-thin":"font-bold",re=z(q),ee=K(q);return g.jsxs("div",{onClick:()=>u(G,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${V?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${G.gz}  ${G.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:X}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(o,{stem:B})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${ii(B,"stem",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${se}`,children:F})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${ii(q,"branch",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${W}`,children:Z})}),k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(o,{branch:q})}),(w||_)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[w&&g.jsx("div",{children:re}),_&&g.jsx("div",{children:ee})]})]})]},`${G.gz}-${H}`)})})]})}function Nle(e){return e>=2?String(Math.floor(e)):Number.isInteger(e)?String(e):e.toFixed(4).replace(/\.?0+$/,"")}const Ole=!1,iR=e=>e<10?`0${e}`:`${e}`;function Dx(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8)),l=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let u=!1;for(const d of l){const h=t[d];if(typeof h=="boolean"){u=h;break}if(typeof h=="number"){u=h===1;break}if(typeof h=="string"){u=h==="1"||h.toLowerCase()==="true";break}}if(r==="lunar")try{const d=ia(i,a,o,0,0),h=`${d.getFullYear()}${iR(d.getMonth()+1)}${iR(d.getDate())}`;return{...e,birthDay:h,calendarType:"solar"}}catch{return e}return e}function nS(e){return new Date(e,6,2,12,0,0,0)}function Cle(e,t){return t-e+1}function Mle({data:e,list:t,onSelect:n}){const r=Jt(G=>G.settings),{date:i,setFromEvent:a}=Kr(),o=Qo(),l=Ei(G=>G.usePrevDay),[u,d]=S.useState(()=>t);S.useEffect(()=>{t&&t.length>0&&d(t)},[t]);const h=Go(e,o),m=S.useMemo(()=>Yo(e,h),[e,h]),b=S.useMemo(()=>m.getFullYear(),[m]),y=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,k=S.useMemo(()=>{if(!i)return[];const G=i.getFullYear(),H=nS(G),B=ut(H,y);return[{at:H,gz:B}]},[i,y]),w=t.length>0?t:u.length>0?u:k,_=S.useMemo(()=>[...w].sort((G,H)=>G.at.getTime()-H.at.getTime()),[w]),T=S.useMemo(()=>{if(_.length===0)return 0;const G=Mx(_,i);return G<0?0:G>=_.length?_.length-1:G},[_,i]),[N,j]=S.useState(null);S.useEffect(()=>{j(null)},[i,_]);const C=N??T,M=S.useMemo(()=>{const G=Dx(e);return Go(G,o)},[e,o]),P=S.useMemo(()=>Yo(e,M),[e,M]),I=e.mingSikType??"/",z=S.useMemo(()=>{const G=dt(P,I);return(l?ta(G,-1):G).charAt(0)},[P,I,l]),K=S.useMemo(()=>r.sinsalBase===""?(l?ta(dt(m,I),-1):dt(m,I)).charAt(1):ut(m,y).charAt(1),[m,I,y,r.sinsalBase,l]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:_.map((G,H)=>{const B=G.at.getFullYear(),q=nS(B),X=ut(q,y),V=X.charAt(0),F=X.charAt(1),Z=H===C,Q=Yr(V,"stem",r.charType),le=Yr(F,"branch",r.charType),se=na(V,"stem"),W=na(F,"branch"),re=r.thinEum&&se?"font-thin":"font-bold",ee=r.thinEum&&W?"font-thin":"font-bold",he=r.showSibiUnseong?Ca(z,F):null,J=r.showSibiSinsal?Ma({baseBranch:K,targetBranch:F,era:zu(r.sinsalMode),gaehwa:!!r.sinsalBloom}):null,ae=Cle(b,B);return g.jsxs("div",{onClick:()=>{j(H);const me=nS(B),pe=ut(me,y);a({at:me,gz:pe},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(B)):Promise.resolve().then(()=>n(B)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${Z?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${X}  ${G.at.toLocaleDateString()}  ${ae}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[ae,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(z,{stem:V})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${ii(V,"stem",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${re}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${ii(F,"branch",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${ee}`,children:le})}),r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(z,{branch:F})}),(r.showSibiUnseong||r.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[r.showSibiUnseong&&he&&g.jsx("div",{children:he}),r.showSibiSinsal&&J&&g.jsx("div",{children:J})]})]})]},`${B}-${G.gz||H}`)})})]})}const Dle=new Set(["","","","","","","","","","","",""]);function Ple(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),i=[...Ai(new Date(n-1,5,15,12,0))??[],...Ai(new Date(n,5,15,12,0))??[],...Ai(new Date(n+1,5,15,12,0))??[]].map(u=>({name:String(u.name),date:new Date(u.date)})).sort((u,d)=>u.date.getTime()-d.date.getTime()).filter(u=>Dle.has(u.name));let a=i.findIndex((u,d)=>i[d].date<=t&&t<i[d+1]?.date);a<0&&(a=0);const o=i[a],l=i[a+1];return{start:new Date(o.date.getFullYear(),o.date.getMonth(),o.date.getDate(),0,0,0,0),end:new Date(l.date.getFullYear(),l.date.getMonth(),l.date.getDate(),0,0,0,0),cur:o,next:l}}const Rle=new Set(["","","","","","","","","","","",""]);function Lle(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function Ile(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function rS(e){return new Date(e,5,15,12,0,0,0)}function $le(e){const n=[...Ai(rS(e-1))??[],...Ai(rS(e))??[],...Ai(rS(e+1))??[]].map(l=>({name:String(l.name),date:new Date(l.date)})).sort((l,u)=>l.date.getTime()-u.date.getTime()).filter(l=>Rle.has(l.name)),r=new Date(e,0,1,0,0,0,0),i=new Date(e+1,0,1,0,0,0,0),a=n.findIndex(l=>l.name===""&&l.date>=r&&l.date<i);if(a===-1)return[];const o=[];for(let l=0;l<12;l++){const u=n[a+l];if(!u)break;const d=new Date(u.date),h=Lle(d);o.push({name:u.name,termAt:d,at00:h})}return o}function Ble({data:e,activeYear:t,onSelect:n,onSelectMonth:r}){const i=Jt(j=>j.settings),a=Qo(),o=Ei(j=>j.usePrevDay),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Go(e,a),d=S.useMemo(()=>Yo(e,u),[e,u]),h=S.useMemo(()=>{const j=Dx(e);return Go(j,a)},[e,a]),m=S.useMemo(()=>Yo(e,h),[e,h]),b=e.mingSikType??"/",y=S.useMemo(()=>{const j=dt(m,b);return(o?ta(j,-1):j).charAt(0)},[m,b,o]),k=i.sinsalBase===""?(o?ta(dt(d,b),-1):dt(d,b)).charAt(1):ut(d,l).charAt(1),w=S.useMemo(()=>t?$le(t).map(C=>{const M=C.termAt,P=new Date(C.termAt.getTime()+1860*1e3),I=Ot(P,l);return{at:M,gz:I,term:C.name,termAt:C.termAt}}):[],[t,l]),{date:_,setFromEvent:T}=Kr(),N=Mx(w,_);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:w.map((j,C)=>{const M=j.gz.charAt(0),P=j.gz.charAt(1),I=`${Ile(j.at)}`,z=C===N,K=Yr(M,"stem",i.charType),G=Yr(P,"branch",i.charType),H=na(M,"stem"),B=na(P,"branch"),q=i.thinEum&&H?"font-thin":"font-bold",X=i.thinEum&&B?"font-thin":"font-bold",V=i.showSibiUnseong?Ca(y,P):null,F=i.showSibiSinsal?Ma({baseBranch:k,targetBranch:P,era:zu(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{r(j.at);const Z=new Date(j.at),{start:Q}=Ple(Z);n?.(Q.getFullYear(),Q.getMonth()),T({at:Z,gz:Ot(Z,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${z?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${j.term}   ${j.gz}  ${j.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:I}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(y,{stem:M})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${ii(M,"stem",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${q}`,children:K})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${ii(P,"branch",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${X}`,children:G})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(y,{branch:P})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&V&&g.jsx("div",{children:V}),i.showSibiSinsal&&F&&g.jsx("div",{children:F})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:j.term})]})]},`${j.term}-${j.at.toISOString()}`)})})]})}function zle(){const e=Jt(r=>r.settings),{date:t,setFromEvent:n}=Kr();return{settings:e,pickedDate:t,setFromEvent:n}}const Ule=(e,t)=>new Date(e,t,15,12,0,0,0),r2=e=>{const t=new Date(e);return t.setHours(23,59,0,0),t},Fle=new Set(["","","","","","","","","","","",""]),J7=e=>[...Ai(new Date(e-1,5,15,12,0))??[],...Ai(new Date(e,5,15,12,0))??[],...Ai(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,r)=>n.date.getTime()-r.date.getTime()),Hle=e=>{const t=J7(e.getFullYear()),n=t.filter(o=>Fle.has(o.name));if(n.length<12){const o=t.findIndex(d=>d.date>e),l=t[Math.max(0,o-1)],u=t[Math.min(t.length-1,o)];return{start:new Date(l.date),end:new Date(u.date),cur:l,next:u}}let r=n.findIndex(o=>o.date>e)-1;r<0&&(r=n.length-1);const i=n[r],a=n[(r+1)%n.length];return{start:new Date(i.date),end:new Date(a.date),cur:i,next:a}},Gle=e=>{if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",r="",i="",a="";for(const o of t)o.type==="month"&&(n=o.value),o.type==="day"&&(r=o.value),o.type==="hour"&&(i=o.value),o.type==="minute"&&(a=o.value);return`${n}/${r} ${i}:${a}`};function Yle({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i=0,settings:a,pickedDate:o}){const l=Ei(B=>B.usePrevDay),u=a.ilunRule||"/",d=e.mingSikType??"/",h=S.useMemo(()=>{const B=Dx(e);return Go(B,i)},[e,i]),m=S.useMemo(()=>Yo(e,h),[e,h]),b=S.useMemo(()=>{if(!m)return;const B=dt(m,d);return(l?ta(B,-1):B).charAt(0)},[m,d,l]),y=S.useMemo(()=>e?Go(e,i):null,[e,i]),k=S.useMemo(()=>e&&y?Yo(e,y):null,[e,y]),w=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&k?a.sinsalBase===""?(l?ta(dt(k,d),-1):dt(k,d)).charAt(1):ut(k,w).charAt(1):null,T=S.useMemo(()=>Ule(t,n),[t,n]),N=S.useMemo(()=>o?r2(new Date(o)):null,[o]),j=S.useMemo(()=>r?r2(r):null,[r]),C=S.useMemo(()=>N??j??T,[N,j,T]),{start:M,end:P,cur:I,next:z}=S.useMemo(()=>Hle(C),[C]),K=S.useMemo(()=>{const B=[],q=new Date(M);for(;q<P;)B.push(new Date(q)),q.setDate(q.getDate()+1);return B},[M,P]),G=S.useMemo(()=>{const B=J7(C.getFullYear()),q=B.filter(V=>V.date>=M&&V.date<P),X=B.find(V=>V.date>=P);return X?[...q,X]:q},[C,M,P]),H=S.useMemo(()=>{const B=[];let q=[];const X=new Date(M).getDay();for(let V=0;V<X;V+=1)q.push(null);for(const V of K)q.length===7&&(B.push(q),q=[]),q.push(V);for(;q.length<7;)q.push(null);return B.push(q),B},[K,M]);return{rule:u,dayStem:b,baseBranch:_,pickerNoon:N,termMarks:G,weeks:H,cur:I??null,next:z??null}}function qle({setFromEvent:e}){return{handleDayClick:S.useCallback(n=>{e({at:n},"")},[e])}}function Kle({data:e,year:t,month:n,selectedMonth:r,onSelectDay:i,showSiwoon:a=!0,onToggleSiwoon:o}){const l=Qo(),u=zle(),d=Yle({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:l,settings:u.settings,pickedDate:u.pickedDate}),h=qle({setFromEvent:u.setFromEvent});return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-start",children:[g.jsx("div",{}),g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[d.cur?.name?g.jsxs(g.Fragment,{children:[d.cur.name," "," ~ ",d.next?.name??""]}):`${t} ${n}`,d.termMarks.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",d.termMarks.map((m,b)=>g.jsxs("span",{children:[m.name," ",Gle(m.date),b<d.termMarks.length-1?"  ":""]},`${m.name}_${m.date.getTime()}_${b}`)),"]"]})]}),g.jsx("div",{className:"flex justify-end",children:o?g.jsx("button",{type:"button",onClick:o,className:"h-9 desk:h-30 px-3 desk:px-2 text-xs desk:text-xs font-medium rounded-md desk:rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800",children:a?" ":" "}):null})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(m=>g.jsx("div",{className:"py-1",children:m},m))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:d.weeks.map((m,b)=>m.map((y,k)=>{if(!y)return g.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800"},`${b}-${k}`);const w=r2(y),_=new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0),T=new Date,N=w.getFullYear()===T.getFullYear()&&w.getMonth()===T.getMonth()&&w.getDate()===T.getDate(),C=!!d.pickerNoon&&w.getFullYear()===d.pickerNoon.getFullYear()&&w.getMonth()===d.pickerNoon.getMonth()&&w.getDate()===d.pickerNoon.getDate()||!d.pickerNoon&&N,M=l!==0?new Date(_.getTime()+l*60*1e3):_,P=ZW(M,d.rule),I=P.charAt(0),z=P.charAt(1),K=Yr(I,"stem",u.settings.charType),G=Yr(z,"branch",u.settings.charType),H=u.settings.thinEum&&na(I,"stem")?"font-thin":"font-bold",B=u.settings.thinEum&&na(z,"branch")?"font-thin":"font-bold",q=!!d.dayStem&&u.settings.showSipSin,X=!!d.dayStem&&u.settings.showSibiUnseong,V=!!d.dayStem&&d.baseBranch!=null&&u.settings.showSibiSinsal,F=q?Oi(d.dayStem,{stem:I}):"",Z=q?Oi(d.dayStem,{branch:z}):"",Q=X?Ca(d.dayStem,z):"",le=V?Ma({baseBranch:d.baseBranch,targetBranch:z,era:zu(u.settings.sinsalMode),gaehwa:!!u.settings.sinsalBloom}):"",se=d.termMarks.find(W=>W.date.getFullYear()===w.getFullYear()&&W.date.getMonth()===w.getMonth()&&W.date.getDate()===w.getDate());return g.jsxs("div",{onClick:()=>{h.handleDayClick(_),i?.(_)},className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${C?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${P} (${w.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:w.getDate()}),se&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:se.name})]}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:F}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${ii(I,"stem",u.settings)}`,children:g.jsx("span",{className:H,children:K})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${ii(z,"branch",u.settings)}`,children:g.jsx("span",{className:B,children:G})}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:Z}),(X||V)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[X&&Q&&g.jsx("div",{children:Q}),V&&le&&g.jsx("div",{children:le})]})]},y.toISOString())}))})]})}const Wle=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),Q7=[23,1,3,5,7,9,11,13,15,17,19,21],Vle=e=>{const t=Wle(e);return Q7.map((n,r)=>{const i=new Date(t);return r===0&&i.setDate(i.getDate()-1),i.setHours(n,0,0,0),i})};function Zle({data:e,selectedDay:t}){const n=Jt(j=>j.settings),{date:r,setFromEvent:i}=Kr(),a=Qo(),o=Ei(j=>j.usePrevDay),l=e.mingSikType??"/",u=S.useMemo(()=>{const j=t??r??new Date;return j instanceof Date&&!Number.isNaN(j.getTime())?j:new Date},[t,r]),d=S.useMemo(()=>Vle(u).map(j=>({at:j,gz:Ni(j,l)})),[u,l]),h=S.useMemo(()=>Ni(r,l),[r,l]),m=S.useMemo(()=>{const j=d.findIndex(C=>C.gz===h);return j>=0?j:0},[d,h]),b=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,y=Go(e,a),k=S.useMemo(()=>Yo(e,y),[e,y]),w=S.useMemo(()=>{const j=Dx(e);return Go(j,a)},[e,a]),_=S.useMemo(()=>Yo(e,w),[e,w]),T=S.useMemo(()=>{const j=dt(_,l);return(o?ta(j,-1):j).charAt(0)},[_,l,o]),N=S.useMemo(()=>n.sinsalBase===""?(o?ta(dt(k,l),-1):dt(k,l)).charAt(1):ut(k,b).charAt(1),[n.sinsalBase,o,k,l,b]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 p-2",children:d.map((j,C)=>{const M=j.gz.charAt(0),P=j.gz.charAt(1),I=C===m,z=Yr(M,"stem",n.charType),K=Yr(P,"branch",n.charType),G=na(M,"stem"),H=na(P,"branch"),B=n.thinEum&&G?"font-thin":"font-bold",q=n.thinEum&&H?"font-thin":"font-bold",X=n.showSibiUnseong?Ca(T,P):null,V=n.showSibiSinsal?Ma({baseBranch:N,targetBranch:P,era:zu(n.sinsalMode),gaehwa:!!n.sinsalBloom}):null,Z=`${Q7[C]??j.at.getHours()}`;return g.jsxs("div",{onClick:()=>i({at:j.at,gz:j.gz},""),className:`min-w-0 flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${I?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${Z}  ${j.gz}`,children:[g.jsx("div",{className:"px-0.5 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300 whitespace-nowrap",children:Z}),g.jsxs("div",{className:"p-1.5 flex flex-col items-center gap-1",children:[n.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(T,{stem:M})}),g.jsx("div",{className:`w-7 h-7 md:w-8 md:h-8 rounded-sm flex items-center justify-center border ${ii(M,"stem",n)}`,children:g.jsx("span",{className:`text-base md:text-lg ${B}`,children:z})}),g.jsx("div",{className:`w-7 h-7 md:w-8 md:h-8 rounded-sm flex items-center justify-center border ${ii(P,"branch",n)}`,children:g.jsx("span",{className:`text-base md:text-lg ${q}`,children:K})}),n.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Oi(T,{branch:P})}),(n.showSibiUnseong||n.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[n.showSibiUnseong&&X&&g.jsx("div",{children:X}),n.showSibiSinsal&&V&&g.jsx("div",{children:V})]})]})]},j.at.toISOString())})})]})}function aR(e,t){const n=e.startYear??e.at.getFullYear(),r=t?t.startYear??t.at.getFullYear():n+10,i=[];for(let a=n;a<r;a++){const o=bn(a,315),l=ut(new Date(a,1,10));i.push({at:o,gz:l})}return i}function Xle({data:e}){const t=Qo(),n=hc(e,e.mingSikType,100,t),{date:r,showSiwoon:i,setShowSiwoon:a}=Kr(),[o,l]=S.useState(null),[u,d]=S.useState(null),[h,m]=S.useState(i?"si":"il"),[b,y]=S.useState(null),[k,w]=S.useState(null);S.useEffect(()=>{!i&&h==="si"&&m("il")},[i,h]),S.useEffect(()=>{if(!n.length)return;const C=new Date,M=n.findIndex((P,I)=>{const z=n[I+1]?.at;return C>=P.at&&(!z||C<z)});M!==-1&&l(M)},[n]);const _=S.useCallback(C=>C<=0&&n.length>1?1:C,[n.length]);S.useEffect(()=>{if(o===null)return;const C=_(o),M=n[C],P=n[C+1];if(!M)return;const I=aR(M,P);if(!Array.isArray(I)||I.length===0)return;const z=I.filter(B=>!!B&&B.at instanceof Date&&!Number.isNaN(B.at.getTime()));if(!z.length)return;const K=new Date,G=K.getTime();z.findIndex((B,q)=>{const X=z[q+1]?.at,V=B.at.getTime(),F=X?X.getTime():null;return G>=V&&(F===null||G<F)})!==-1&&d({year:K.getFullYear(),month:K.getMonth()})},[o,n,_]);const T=Nx(e,void 0,void 0,{dstOffsetMinutes:t}),N=r.getMonth()+1===1?r.getFullYear()-1:r.getFullYear(),j=S.useMemo(()=>{if(!T?.dae?.gz)return[];const C=n.findIndex((K,G)=>{const H=n[G+1]?.at;return T.dae.at>=K.at&&(!H||T.dae.at<H)});if(C===-1)return[];const M=_(C),P=n[M],I=n[M+1],z=aR(P,I);return Array.isArray(z)?z.filter(K=>!!K&&K.at instanceof Date&&!Number.isNaN(K.at.getTime())):[]},[n,T?.dae,_]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(Ale,{data:e}),h==="se"||h==="wol"||h==="il"||h==="si"?g.jsx(Mle,{data:e,list:j,onSelect:()=>{m("wol")}}):null,h==="wol"||h==="il"||h==="si"?g.jsx(Ble,{data:e,activeYear:N,onSelect:(C,M)=>{d({year:C,month:M}),w(null),m("il")},onSelectMonth:y}):null,(h==="il"||h==="si")&&u&&g.jsx(Kle,{data:e,year:u.year,month:u.month+1,selectedMonth:b,showSiwoon:i,onToggleSiwoon:()=>{const C=!i;a(C),m(C?"si":"il")},onSelectDay:C=>{w(C),m(i?"si":"il")}}),h==="si"&&i&&g.jsx(Zle,{data:e,selectedDay:k})]})}const Jle=new Set($W),Qle=new Set(BW);function oR(e){return typeof e=="string"&&e.length>=2&&Jle.has(e[0])&&Qle.has(e[1])}function Hi(e,...t){if(oR(e))return e;for(const n of t)if(oR(n))return n;return""}const ece={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},sR=e=>e===""?"":"";function db(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function tce({data:e}){const t=Jt(V=>V.settings),{manualHour:n}=Ei(),{showSibiUnseong:r,showSibiSinsal:i,sinsalBase:a,sinsalMode:o,sinsalBloom:l}=t,{date:u}=Kr(),d=Qo(),[h,m]=S.useState(()=>sR(e.mingSikType));S.useEffect(()=>{m(sR(e.mingSikType))},[e.id,e.mingSikType]);const b=h===""?"":"",y=h===""?"":"",k=S.useMemo(()=>Uf(e),[e]),w=S.useMemo(()=>Ax(k,{dstOffsetMinutes:d}),[k,d]),_=S.useMemo(()=>bT(k,b,{dstOffsetMinutes:d}),[k,d,b]),T=S.useMemo(()=>gx(_.day?.charAt(0)??""),[_.day]),N=!e.birthTime||e.birthTime==="",j=S.useMemo(()=>S7(w,_.hour,e.dir??"forward",120),[w,_.hour,e.dir]),C=S.useMemo(()=>E7(j,_.day,e.dir??"forward",y),[j,_.day,e.dir,y]),M=S.useMemo(()=>Gp(w,_.month,e.dir??"forward",120,k.birthPlace?.lon??127.5),[w,_.month,e.dir,k.birthPlace?.lon]),P=S.useMemo(()=>j7(M,_.year,e.dir??"forward",y,w),[M,_.year,e.dir,w,y]),I=S.useMemo(()=>{const V=j?.events?.[0];return V?{at:V.at,from:Hi(_.hour),to:Hi(V.gz)}:null},[j?.events,_.hour]),z=S.useMemo(()=>{const V=M?.events?.[0];return M?.firstChange?{at:M.firstChange,from:Hi(_.month),to:Hi(V?.gz??_.month)}:null},[M?.firstChange,M?.events,_.month]),K=S.useMemo(()=>{const V=N?n?n.stem+n.branch:"":Hi(db(j.events,u)?.gz,_.hour);let F;if(N&&n){const Z=u.getFullYear(),Q=u.getMonth(),le=u.getDate(),se=ece[n.branch]??0,W=new Date(Z,Q,le,se,0),re=dt(W,b);F=Hi(re,_.day)}else F=Hi(db(C.events,u)?.gz,_.day);return{si:V,il:F,wl:Hi(db(M.events,u)?.gz,_.month),yn:Hi(db(P.events,u)?.gz,_.year)}},[u,j.events,C.events,M.events,P.events,_,N,n,b]),G=S.useMemo(()=>({si:Hi(Ni(u,b)),il:Hi(dt(u,b)),wl:Hi(Ot(u)),yn:Hi(ut(u))}),[u,b]),H=S.useMemo(()=>a===""?_.day.charAt(1):_.year.charAt(1),[a,_.day,_.year]),B=S.useMemo(()=>zu(o),[o]),q=V=>{if(!V)return{unseong:"",shinsal:""};const F=Yr(T,"stem",""),Z=Yr(V.charAt(1),"branch",""),Q=Yr(H,"branch","");return{unseong:r&&Ca(F,Z)||"",shinsal:i&&Ma({baseBranch:Q,targetBranch:Z,era:B,gaehwa:!!l})||""}},X=(V,F,Z="myoun")=>{const Q=F,{unseong:le,shinsal:se}=F?q(F):{unseong:"",shinsal:""},W=Z==="myoun"&&N&&(V===""||V==="");return g.jsx(Vd,{label:V,gz:Q,dayStem:T,settings:t,unseongText:F?le:"",shinsalText:F?se:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:W},`${Z}-${V}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Gm(w),")"]})]})}),g.jsxs("div",{className:"mb-3 flex items-center justify-end gap-2",children:[g.jsx("label",{htmlFor:"myoun-base-rule",className:"text-xs text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{id:"myoun-base-rule",value:h,onChange:V=>m(V.target.value),className:"h-9 desk:h-30 text-sm desk:text-xs rounded-md desk:rounded px-3 desk:px-2 py-1.5 desk:py-1 font-medium cursor-pointer bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40",children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"",children:""})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[X("",K.si,"myoun"),X("",K.il,"myoun"),X("",K.wl,"myoun"),X("",K.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[X("",G.si,"live"),X("",G.il,"live"),X("",G.wl,"live"),X("",G.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",I?`${Gm(I.at)} (${I.from}  ${I.to})`:" "]}),g.jsxs("div",{children:[":"," ",z?`${Gm(z.at)} (${z.from}  ${z.to})`:" "]})]})]})}const nce=["","","","","","","","","",""],rce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ice={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},e9={:"",:"",:"",:"",:""},t9={:"",:"",:"",:"",:""},n9={:"",:"",:"",:"",:""};function ace(e,t){switch(e){case"":return t;case"":return e9[t];case"":return t9[t];case"":return n9[t];case"":return r9[t];default:return t}}const r9={:"",:"",:"",:"",:""};function oce(e,t){const n=Math.max(0,Math.round(t));if(e.length===0)return[];const r=e[0],i=e[1]??[r[0],0],a=Math.max(0,Number(r[1]??0)),o=Math.max(0,Number(i[1]??0)),l=a+o;if(n<=0)return[[r[0],0],[i[0],0]];if(l<=0)return[[r[0],n],[i[0],0]];const u=a/l*n,d=o/l*n;let h=Math.floor(u),m=Math.floor(d),b=n-(h+m);return b>0&&(u-h>=d-m?h+=1:m+=1,b-=1),b>0&&(h+=b),[[r[0],h],[i[0],m]]}function sce({data:e,perStemElementScaled:t,dayStem:n,yongshinTop:r,yongshinKind:i,width:a=340,height:o=360}){const l=a/2,u=o/2-20,d=Math.min(a,o)*.33,h=S.useMemo(()=>{const w=(n??"").charAt(0);return ice[w]??null},[n]),m=S.useMemo(()=>e.map((w,_)=>{const T=Math.PI/2+2*-Math.PI*_/5;return{...w,angle:T,x:l+d*Math.cos(T),y:u-d*Math.sin(T)}}),[e,l,u,d]),b=w=>w?w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":null:null,y=(w,_)=>_===w?"":e9[w]===_?"":t9[w]===_?"":n9[w]===_?"":r9[w]===_?"":"",k=S.useMemo(()=>{if(!e||e.length===0)return null;const w=[...e].sort((P,I)=>I.value-P.value),_=w[0],N=w[w.length-1]?.name??"",j=b(r),C=h&&j?y(h,j):N;return{summary:i==="GYEOKGUK"?`${_.name}   ,    ${_.name}  .`:`${_.name}   ,  ${C}     .`,advice:_.value>45?`${_.name}         .`:"       ."}},[e,h,r,i]);return g.jsxs("div",{className:"w-full flex flex-col items-center p-6 bg-white dark:bg-neutral-900 rounded-[2.5rem] border border-neutral-100 dark:border-neutral-800 shadow-xl tracking-tighter transition-colors",children:[g.jsx("div",{className:"text-center mb-4",children:g.jsxs("h3",{className:"text-lg font-black text-neutral-800 dark:text-neutral-100",children:[n,"  "]})}),g.jsxs("svg",{width:a,height:o,className:"overflow-visible",children:[g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:g.jsx("path",{d:"M0,0 L10,3.5 L0,7 Z",fill:"#94a3b8",opacity:"0.4"})})}),m.map((w,_)=>{const T=m[(_+2)%5];return g.jsx("line",{x1:w.x,y1:w.y,x2:T.x,y2:T.y,stroke:"currentColor",className:"text-neutral-200 dark:text-neutral-800",strokeWidth:1.5,strokeDasharray:"4 4"},`line-ke-${_}`)}),m.map((w,_)=>{const T=m[(_+1)%5],N=(w.x+T.x)/2,j=(w.y+T.y)/2,C=N-l,M=j-u,P=l+C*1.45,I=u+M*1.45;return g.jsx("path",{d:`M${w.x},${w.y} Q${P},${I} ${T.x},${T.y}`,stroke:"#94a3b8",strokeWidth:2,strokeOpacity:.25,fill:"none",markerEnd:"url(#arrow)"},`path-sheng-${_}`)}),m.map(w=>{const _=w.name,T=h?ace(_,h):null,N=T?nce.filter(C=>rce[C]===T).map(C=>[C,t?.[C]??0]):[],j=oce(N,w.value);return g.jsxs("g",{transform:`translate(${w.x},${w.y})`,children:[g.jsx("circle",{r:40,fill:w.color,className:"stroke-white/20 dark:stroke-black/20",strokeWidth:1}),g.jsx("circle",{r:40,fill:"black",opacity:.05}),g.jsx("text",{textAnchor:"middle",dy:"-5",fontSize:15,className:"fill-white font-black",children:w.name}),g.jsxs("text",{textAnchor:"middle",dy:"15",fontSize:13,className:"fill-white/90 font-bold",children:[w.value,"%"]}),g.jsx("g",{transform:"translate(0, 48)",children:j.map(([C,M],P)=>{const I=C.charAt(0),z=Math.round(M),K=z===0;return g.jsxs("g",{transform:`translate(${(P===0?-1:1)*25}, 0)`,children:[g.jsx("rect",{x:"-21",y:"0",width:"42",height:"21",rx:"10.5",fill:K?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.3)"}),g.jsxs("text",{textAnchor:"middle",y:"14.5",fontSize:12,className:`font-black ${K?"fill-neutral-400 dark:fill-neutral-500":"fill-white"}`,children:[g.jsx("tspan",{children:I}),g.jsx("tspan",{dx:"1",children:z})]})]},C)})})]},w.name)})]}),k&&g.jsxs("div",{className:"w-full mt-6 space-y-3",children:[g.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800 text-center",children:g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold",children:k.summary})}),g.jsx("div",{className:"px-4 py-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl border border-blue-100/30 text-center",children:g.jsxs("p",{className:"text-[11.5px] text-blue-700 dark:text-blue-300 font-bold",children:[" ",k.advice]})})]})]})}const lce=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function MT(e){return Math.max(0,Math.min(100,e))}function i9(e){const t=MT(e);return lce.find(r=>t>=r.min&&t<r.max)?.name??""}const cce=[10,20,35,45,55,65,80];function uce({value:e,deukFlags:t,strongestOpponent:n}){const[r,i]=S.useState(!1),a=S.useMemo(()=>MT(e),[e]),o=S.useMemo(()=>i9(a),[a]);S.useEffect(()=>{i(!0)},[]);const l=S.useMemo(()=>a>=80?{tag:"",desc:"      .",advice:"  () ()   ."}:a>=55?{tag:"",desc:"      .",advice:"      ."}:a>=45?{tag:"",desc:"        .",advice:"      ."}:a>=20?{tag:"",desc:"       .",advice:"() ()       ."}:{tag:"",desc:"       .",advice:"        ."},[a]),u=S.useMemo(()=>{if(!t)return null;const d=a>=50,h=[];if(d){h.push("      ,");const m=[];t.&&m.push("()"),t.&&m.push("()"),t.&&m.push(""),m.length>0?h.push(`${m.join("")}    .`):h.push("   .")}else{const m=n||"";h.push(`${m}  `),t.||h.push(","),t.||h.push(""),h.push("   .")}return h.join(" ").replace(" ,",",")},[a,t,n]);return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-lg border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-end mb-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"    "}),g.jsx("p",{className:"text-[10px] text-neutral-400 uppercase tracking-tighter",children:"  "})]}),g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:"text-2xl font-black text-neutral-800 dark:text-white",children:a.toFixed(0)}),g.jsx("span",{className:"text-xs font-bold text-neutral-500",children:"%"})]})]}),g.jsxs("div",{className:"relative mb-8 pt-4",children:[g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-2 px-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"translate-x-1",children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-3 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-emerald-400 via-yellow-400 to-red-500 opacity-80"}),cce.map(d=>g.jsx("div",{className:"absolute top-0 h-3 w-[1.5px] bg-white/30 dark:bg-black/20",style:{left:`${d}%`}},d)),g.jsx("div",{className:"absolute left-1/2 top-0 w-0.5 h-3 bg-white/50 -translate-x-1/2 z-10"}),g.jsx("div",{className:"absolute -top-1.5 h-6 w-3 bg-white dark:bg-neutral-100 rounded-full shadow-[0_2px_8px_rgba(0,0,0,0.3)] border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:r?`${a}%`:"50%",transform:"translateX(-50%)"},children:g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsx("div",{className:"w-1 h-2 bg-neutral-300 rounded-full"})})})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:`px-3 py-1 rounded-full text-[11px] font-black border-2 ${a>=55?"border-red-500/20 bg-red-50 text-red-600":a>=45?"border-emerald-500/20 bg-emerald-50 text-emerald-600":"border-blue-500/20 bg-blue-50 text-blue-600"}`,children:[l.tag," (",o,")"]}),g.jsx("div",{className:"h-[1px] flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsxs("div",{className:"px-1",children:[g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold leading-snug mb-1",children:l.desc}),g.jsxs("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed italic",children:[" ",l.advice]})]}),u&&g.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11px] text-neutral-600 dark:text-neutral-400 leading-relaxed",children:[g.jsx("span",{className:"font-bold text-neutral-500 mr-1",children:":"}),u]})})]})]})}const lR={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},dce=["year","month","day","hour"],fce=new Set(["","","","",""]),fb=new Set(["","","","",""]),cR={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},hce={:5,:7,:5,:-5,:-7,:-5};function mce({natal:e,perStemElementScaled:t}){const[n,r]=S.useState(!1);S.useEffect(()=>{const b=setTimeout(()=>r(!0),100);return()=>clearTimeout(b)},[e]);const i=S.useMemo(()=>{if(!t||!e||e.length<4)return null;let b=0,y=0;Object.entries(t).forEach(([q,X])=>{fb.has(q.charAt(0))?b+=X:y+=X});const k=b+y>0?(b-y)/(b+y):0;let w=0,_=0,T=0,N=0;e.forEach(q=>{[q[0],cR[q[1]]].forEach(X=>{X&&(fce.has(X)?w+=1:_+=1,fb.has(X)?T+=1:N+=1)})});const j=w+_>0?(w-_)/(w+_):0,C=T+N>0?(T-N)/(T+N):0;let M=0,P=0;e.forEach((q,X)=>{const V=dce[X],F=lR[V].stem,Z=lR[V].branch;fb.has(q[0])?M+=F:P+=F;const Q=cR[q[1]];Q&&fb.has(Q)?M+=Z:P+=Z});const I=M+P>0?(M-P)/(M+P):0,z=e[1]?.charAt(1),K=(hce[z]||0)/100,G=j*.3+C*.3+k*.2+I*.2+K,H=(Math.min(1,Math.max(-1,G))+1)*50,B=100-Math.abs(H-50)*2;return{yang:H,yin:100-H,essencePos:(j+1)*50,naturePos:(C+1)*50,harmony:B,category:H>=55?"":H<=45?"":""}},[e,t]),a=S.useMemo(()=>{if(!i)return null;const{yang:b,essencePos:y,naturePos:k,category:w,harmony:_}=i,T=Math.abs(y-k);let N="";w===""?N="              .":w===""?N=b>75?"    .       .":"         .":N=b<25?"    .         .":"   .         .";let j="";T<15?j="     .      .":T<40?j="       .    .":j="        .      .";let C="";return _>85?C="    .   .":w===""?C="         .":C="          .",{natureDetail:N,consistencyDetail:j,advice:C}},[i]);if(!i||!a)return null;const{yang:o,yin:l,essencePos:u,naturePos:d,harmony:h,category:m}=i;return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-start mb-10",children:[g.jsx("div",{children:g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"   "})}),g.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-xl text-center border border-emerald-100 dark:border-emerald-800/50",children:[g.jsx("div",{className:"text-[9px] font-bold text-emerald-600 mb-0.5 uppercase",children:""}),g.jsxs("div",{className:"text-base font-black text-emerald-500 leading-none",children:[h.toFixed(0),"%"]})]})]}),g.jsxs("div",{className:"relative mb-14",children:[n&&g.jsxs("div",{className:"absolute -top-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${u}%`,transform:"translateX(-50%)"},children:[g.jsx("span",{className:"text-[10px] font-bold text-blue-500 mb-1",children:""}),g.jsx("div",{className:"w-[1.5px] h-3 bg-blue-500/40 rounded-full"})]}),g.jsxs("div",{className:"relative w-full h-8 bg-neutral-100 dark:bg-neutral-800 rounded-2xl flex overflow-hidden shadow-inner border-[3px] border-white dark:border-neutral-900",children:[g.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000 ease-out",style:{width:n?`${l}%`:"50%"}}),g.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-out",style:{width:n?`${o}%`:"50%"}}),g.jsx("div",{className:"absolute left-1/2 top-0 w-[1px] h-full bg-white/30 -translate-x-1/2 z-10"})]}),n&&g.jsxs("div",{className:"absolute -bottom-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${d}%`,transform:"translateX(-50%)"},children:[g.jsx("div",{className:"w-[1.5px] h-3 bg-red-500/40 rounded-full"}),g.jsx("span",{className:"text-[10px] font-bold text-red-500 mt-1",children:""})]})]}),g.jsxs("div",{className:"space-y-3 mb-5 mt-6",children:[g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.natureDetail})]}),g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-blue-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.consistencyDetail})]})]}),g.jsxs("div",{className:`text-center py-3 rounded-xl text-[11px] font-bold tracking-tight shadow-sm ${m===""?"bg-red-50 text-red-600 dark:bg-red-950/20":m===""?"bg-blue-50 text-blue-600 dark:bg-blue-950/20":"bg-emerald-50 text-emerald-600 dark:bg-emerald-950/20"}`,children:[" ",a.advice]})]})}function fm(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function ya({label:e,natal:t,dae:n,se:r,wol:i,il:a}){const o=n.length+r.length+i.length+a.length>0,l=t.length>0?t:["#"],u=o?l.filter(m=>m!=="#"):l,h=u.some(m=>m!=="#")||n.length>0||r.length>0||i.length>0||a.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:h,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+fm(m,"natal"),children:m},`natal-${b}`)),n.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+fm(m,"dae"),children:m},`dae-${b}`)),r.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+fm(m,"se"),children:m},`se-${b}`)),i.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+fm(m,"wol"),children:m},`wol-${b}`)),a.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+fm(m,"il"),children:m},`il-${b}`))]})]})}function i2(e){return Array.isArray(e)?e:[]}function hb(e,t){const n=new Set(i2(e));return i2(t).filter(i=>!n.has(i))}function pce({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const o=Ox(e),l=Jl({natal:e}),u=t?Jl({natal:e,daewoon:t}):l,d=n?Jl({natal:e,daewoon:t,sewoon:n}):u,h=r?Jl({natal:e,daewoon:t,sewoon:n,wolwoon:r}):d,m=i?Jl({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i}):h,b=w=>({natal:i2(o[w]),dae:hb(l[w],u[w]),se:hb(u[w],d[w]),wol:hb(d[w],h[w]),il:hb(h[w],m[w])}),y={cheonganHap:b("cheonganHap"),cheonganChung:b("cheonganChung"),jijiSamhap:b("jijiSamhap"),jijiBanhap:b("jijiBanhap"),jijiBanghap:b("jijiBanghap"),jijiYukhap:b("jijiYukhap"),amhap:b("amhap"),ganjiAmhap:b("ganjiAmhap"),jijiChung:b("jijiChung"),jijiHyeong:b("jijiHyeong"),jijiPa:b("jijiPa"),jijiHae:b("jijiHae")},k=w=>a===""?{natal:w.natal,dae:[],se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:w.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(ya,{label:"",...k(y.cheonganHap)}),g.jsx(ya,{label:"",...k(y.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(ya,{label:"",...k(y.jijiSamhap)}),g.jsx(ya,{label:"",...k(y.jijiBanhap)}),g.jsx(ya,{label:"",...k(y.jijiBanghap)}),g.jsx(ya,{label:"",...k(y.jijiYukhap)}),g.jsx(ya,{label:"",...k(y.amhap)}),g.jsx(ya,{label:"",...k(y.ganjiAmhap)}),g.jsx(ya,{label:"",...k(y.jijiChung)}),g.jsx(ya,{label:"",...k(y.jijiHyeong)}),g.jsx(ya,{label:"",...k(y.jijiPa)}),g.jsx(ya,{label:"",...k(y.jijiHae)})]})}function gce(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function bce({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((r,i)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+gce(r,t),children:r},`${t}-${i}-${r}`))})}function uR({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const i=n.items.some(a=>a!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:i,children:n.label}),g.jsx(bce,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function yce({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const{settings:o}=Jt(),[l,u]=S.useState(""),[d,h]=S.useState("");S.useEffect(()=>{o.sinsalBase===""?(u(""),h("")):(u(""),h(""))},[o.sinsalBase]);const m=S.useMemo(()=>({voidBasis:l===""?"day":"year",samjaeBasis:d===""?"day":"year"}),[l,d]),b=S.useMemo(()=>Kp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:m}),[e,t,n,r,i,m]),{good:y,bad:k,meta:w}=b,_=G=>G.map(H=>H==="#"?H:` ${H}`),T=(G,H)=>{const B=["natal"];return H===""&&B.push("natal"),H===""&&B.push("natal","dae"),H===""&&B.push("natal","dae","se"),H===""&&B.push("natal","dae","se","wol"),H===""&&B.push("natal","dae","se","wol","il"),G.filter(q=>B.includes(q.source))},N=[{label:"",items:_(y.si),source:"natal"},{label:"",items:_(y.il),source:"natal"},{label:"",items:_(y.wol),source:"natal"},{label:"",items:_(y.yeon),source:"natal"},{label:"",items:y.dae,source:"dae"},{label:"",items:y.se,source:"se"},{label:"",items:y.wolun,source:"wol"},{label:"",items:y.ilun,source:"il"}],j=[{label:"",items:_(k.si),source:"natal"},{label:"",items:_(k.il),source:"natal"},{label:"",items:_(k.wol),source:"natal"},{label:"",items:_(k.yeon),source:"natal"},{label:"",items:k.dae,source:"dae"},{label:"",items:k.se,source:"se"},{label:"",items:k.wolun,source:"wol"},{label:"",items:k.ilun,source:"il"}],C=T(N,a),M=T(j,a),P=w.voidPair.day?`(${w.voidPair.day.join("")})`:"()",I=w.voidPair.year?`(${w.voidPair.year.join("")})`:"()",z=w.samjaeYears.day?`(${w.samjaeYears.day.join("")})`:"()",K=w.samjaeYears.year?`(${w.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:l,onChange:G=>u(G.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:P}),g.jsx("option",{value:"",children:I})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:d,onChange:G=>h(G.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:z}),g.jsx("option",{value:"",children:K})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(uR,{title:"()",rows:C}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(uR,{title:"()",rows:M})]})]})}const Ea={year:0,month:1,day:2,hour:3},a9={[Ea.year]:.3,[Ea.month]:.5,[Ea.day]:.3,[Ea.hour]:.3},o9={[Ea.year]:.15,[Ea.month]:.2,[Ea.day]:0,[Ea.hour]:.15},vce=e=>Km.has(e)?e:ar[e]??e,xce=e=>hf.has(e)?e:Jn[e]??e,wce=e=>typeof e=="string"&&e.length>=2?vce(e.slice(-1)):"",_ce=e=>typeof e=="string"&&e.length>=1?xce(e.slice(0,1)):"",Mn=(e,t,n,r)=>({han:e,nan:t,jo:n,seup:r}),Sce={:Mn(2,0,.5,2),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,2,1,2),:Mn(0,2,2,.5),:Mn(0,2,2,0),:Mn(0,2,2,1),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(2,0,1,1)},kce={:Mn(0,1,1,0),:Mn(0,1,1,0),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,0,1,0),:Mn(0,0,0,1),:Mn(1,0,0,1),:Mn(1,0,0,1),:Mn(2,0,0,2),:Mn(2,0,0,2)},dR=e=>Math.max(0,Math.min(100,e));function fR(e,t){const n=Math.max(0,e),r=Math.max(0,t),i=n+r;return i<=0?50:r/i*100}function Ece(e){let t=0,n=0,r=0,i=0;return[Ea.year,Ea.month,Ea.day,Ea.hour].forEach(a=>{const o=Sce[wce(e[a])],l=kce[_ce(e[a])],u=a9[a],d=o9[a];u>0&&o&&(t+=o.han*u,n+=o.nan*u,r+=o.jo*u,i+=o.seup*u),d>0&&l&&(t+=l.han*d,n+=l.nan*d,r+=l.jo*d,i+=l.seup*d)}),{han:t,nan:n,jo:r,seup:i}}function s9(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function l9(e){const{han:t,nan:n,jo:r,seup:i}=Ece(e),a=fR(t,n),o=fR(r,i);return{hanNanPct:dR(a),joSeupPct:dR(o),raw:{han:t,nan:n,jo:r,seup:i},weights:{branch:a9,stem:o9}}}function jce(e){return l9(s9(e))}function Tce(e){const t=s9(e);return S.useMemo(()=>l9(t),[t])}function hR({label:e,percent:t,leftHint:n,midHint:r,rightHint:i,gradientClass:a}){const[o,l]=S.useState(!1),u=S.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),d=[20,35,50,65,80];return S.useEffect(()=>{l(!0)},[]),g.jsxs("div",{className:"flex-1 p-4 bg-white dark:bg-neutral-900 rounded-3xl shadow-sm border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("span",{className:"text-[11px] font-black text-neutral-400 uppercase",children:e}),g.jsxs("span",{className:"text-sm font-black dark:text-white",children:[u.toFixed(0),"%"]})]}),g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-1.5 px-0.5",children:[g.jsx("span",{children:n}),g.jsx("span",{children:r}),g.jsx("span",{children:i})]}),g.jsxs("div",{className:"relative h-2.5 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:`absolute inset-0 rounded-full opacity-80 ${a}`}),d.map(h=>g.jsx("div",{className:"absolute top-0 h-2.5 w-[1px] bg-white/20 dark:bg-black/10",style:{left:`${h}%`}},h)),g.jsx("div",{className:"absolute -top-1.5 h-5 w-2.5 bg-white dark:bg-neutral-100 rounded-full shadow-md border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:o?`${u}%`:"50%",transform:"translateX(-50%)"}})]})]})}const Ace={:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""},:{el:"",season:"",name:""}};function Nce(e){const t=new Set(e);return t.has("")&&t.has("")?"   ":t.has("")&&t.has("")?"   ":t.has("")&&t.has("")?"   ":t.has("")&&t.has("")?"   ":""}function Oce(e,t,n){const r=e[1]?.charAt(1)||"",i=Ace[r],a=e.map(u=>u.charAt(1)).filter(Boolean);let o="",l="";if(i){o=`${i.season} (${i.name})  , `;const u=Nce(a);u&&(o+=`${u} `),t>=60?o+="()  .":t<=40?o+="()  .":o+="   ."}else o="   .";return n>=60?l="()      .":n<=40?l="()       .":l="() ()      .",{tempDesc:o,wetDesc:l}}function Cce({natal:e}){const{hanNanPct:t,joSeupPct:n}=Tce(e),r=S.useMemo(()=>{let o="";return t>60?o+="   , ":t<40?o+="   , ":o+="    , ",n>60?o+="      .":n<40?o+="     .":o+="     .",o},[t,n]),{tempDesc:i,wetDesc:a}=S.useMemo(()=>Oce(e,t,n),[e,t,n]);return g.jsxs("div",{className:"w-full space-y-3",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx(hR,{label:" ()",percent:t,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-blue-500 via-neutral-200 to-red-500"}),g.jsx(hR,{label:" ()",percent:n,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-orange-600 via-neutral-200 to-teal-600"})]}),g.jsxs("div",{className:"space-y-2 p-4 bg-neutral-50 dark:bg-neutral-800/30 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("p",{className:"text-[11px] text-neutral-600 dark:text-neutral-400 leading-relaxed",children:[g.jsx("span",{className:"font-bold text-blue-500 mr-1",children:":"}),i]}),g.jsx("div",{className:"h-px bg-neutral-200 dark:bg-neutral-700/50"}),g.jsxs("p",{className:"text-[11px] text-neutral-600 dark:text-neutral-400 leading-relaxed",children:[g.jsx("span",{className:"font-bold text-teal-600 mr-1",children:":"}),a]}),g.jsx("div",{className:"h-px bg-neutral-200 dark:bg-neutral-700/50"}),g.jsxs("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-500 leading-relaxed italic",children:[g.jsx("span",{className:"font-bold mr-1",children:":"}),r.replace(/, $/,".")]})]})]})}const ei={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},no={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Mce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Qy={:"",:"",:"",:"",:""},c9={:"",:"",:"",:"",:""},cp={:"",:"",:"",:"",:""},u9={:"",:"",:"",:"",:""},Dce={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}}},Pce={:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}}};function DT(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}function d9(e){return(typeof e=="string"?e.trim().toLowerCase():"")==="hgc"?"hgc":"classic"}function PT(e){return e==="hgc"?Pce:Dce}const Rce={:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""]},iS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},f9={:"",:"",:"",:"",:""},h9={:"",:"",:"",:""},Lce=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],Ice=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],$ce={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},Qe=(e,t)=>`${e}${t}`,Yi=(e,t,n)=>`${e}${t}${n}`,Bce={:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]},mR={[Qe("","")]:[""],[Qe("","")]:["",""],[Qe("","")]:["",""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:["",""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:["",""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""],[Qe("","")]:[""]},pR={[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:[""],[Yi("","","")]:["",""]},zce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function ja(e){return["","","","",""].includes(e)}function Uce(e){return["","","","","",""].includes(e)}const aS=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,xa=e=>e&&e.length>=1?e.charAt(0):"",In=e=>e&&e.length>=2?e.charAt(1):"",Fce=e=>Array.from(new Set(e));function Hce(e,t){const n=Rce[e];if(!n)return!1;const r=new Set(t.filter(Boolean));return n.filter(a=>a!==e).every(a=>r.has(a))}function Gce(e){return ei[e]??""}function ro(e,t){const n=ei[e],r=ei[t];if(!n||!r)return"";let i;r===n?i="":r===Qy[n]?i="":r===cp[n]?i="":r===u9[n]?i="":r===c9[n]?i="":i="";const a=ja(e)===ja(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function Yce(e,t){const n=ei[e],r=no[t];if(!n||!r)return"";let i;r===n?i="":r===Qy[n]?i="":r===cp[n]?i="":r===u9[n]?i="":r===c9[n]?i="":i="";const a=Uce(t)===ja(e);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function qce(e){return{:"",:"",:"",:"",:""}[e]??""}function a2(e,t){const n=Gce(e),r=ja(e);let i;t===n?i="":Qy[n]===t?i="":Qy[t]===n?i="":cp[n]===t?i="":cp[t]===n?i="":i="";const a=r===ja(qce(t));switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}const Kce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wce=e=>/^(|||||||||)$/.test(e);function Vce(e){return e?Wce(e)?e:Kce[e]??"":""}function mb(e){return Vce(xa(e))}function Zce(e){return e?.charAt(0)??""}function Xce(e){return e?.charAt(1)??""}function Jce(e,t,n){const[r,i,a,o]=(e??[]).slice(0,4),l=oe=>(oe?.length??0)>=1?oe.charAt(0):"",u=oe=>(oe?.length??0)>=2?oe.charAt(1):"",d=[r,i,a,o].map(l).filter(Boolean),h=new Set(Object.keys(no)),m=[r,i,a,o].map(u).filter(oe=>!!oe&&h.has(oe)),b=l(a),y=$ce[b]??!1,k=new Set,w=t==="classic"?mx:px,_=new Set(["","","","","","","","","",""]),T=oe=>(w[oe]??[]).filter(Ce=>_.has(Ce)),N=(oe,Ce)=>{const Ue=no[Ce];return Ue?a2(oe,Ue):null},j={:0,:0,:0,:0,:0};for(const oe of d){const Ce=ei[oe];Ce&&(j[Ce]+=10)}const C=[];for(const oe of m){const Ce=Mce[oe];Ce&&C.push(Ce);const Ue=no[oe];Ue&&(j[Ue]+=6)}const P=[...d,...C].map(oe=>ro(b,oe)),I={:["",""],:["",""],:["",""],:["",""],:["",""]},z=oe=>P.filter(Ce=>Ce===oe).length,K=oe=>P.filter(Ce=>I[oe].includes(Ce)).length,G=m[1],H=!!b&&zce[b]===G,B=n.elementPercent100;B.>=20&&B.>=20&&B.>=15&&k.add("");const q=[r,i,a,o].filter(Boolean),X=[];for(const oe of q){const Ce=oe.charAt(0),Ue=oe.charAt(1);X.push(ro(b,Ce)),X.push(N(b,Ue))}const V=(oe,Ce)=>{const Ue=(rt,xt)=>!!rt&&!!xt&&oe.includes(rt)&&Ce.includes(xt)||Ce.includes(rt)&&oe.includes(xt);for(let rt=0;rt+1<X.length;rt+=2)if(Ue(X[rt],X[rt+1]))return!0;return!1},F=oe=>X.some(Ce=>!!Ce&&oe.includes(Ce)),Z=z("")+z(""),Q=z(""),le=K(""),se=K(""),W=V(["",""],["",""]);if((Q>=1||Z>=2)&&le>=1&&Z>le&&se<=1&&W&&k.add(""),F(I.)&&F(I.)&&V(I.,I.)){const oe=P.includes("");k.add(oe?"":"")}K("")>=2&&K("")>=2&&Math.abs(K("")-K(""))<=1&&K("")<=1&&K("")<=1&&k.add("");const re=z(""),ee=z(""),he=z("")+z(""),J=z("")+z(""),ae=K("");ee>=2&&he>=1&&j.+j.>=20&&k.add(""),ee>=2&&J>=1&&j.+j.>=20&&k.add(""),ee>=2&&J>=1&&j.+j.>=20&&V([""],["",""])&&ae<=1&&k.add(""),re>=2&&J>=1&&j.+j.>=20&&V([""],["",""])&&ae<=1&&k.add("");const me=(oe,Ce)=>{const Ue=ei[oe],rt=no[Ce];return!!Ue&&!!rt&&Ue===rt},pe=[r,i,a,o].filter(Boolean),te=u(a),je=me(b,te),xe=pe.map(oe=>oe.charAt(0)).filter(oe=>["",""].includes(ro(b,oe)));let ue=!1;for(const oe of pe){const Ce=oe.charAt(0),Ue=oe.charAt(1);if(xe.includes(Ce)&&me(Ce,Ue)){ue=!0;break}}je&&ue&&k.add(""),K("")>=3&&K("")>=.5*(K("")+K("")+K("")+K(""))&&k.add(""),K("")>=3&&K("")>=.5*(K("")+K("")+K("")+K(""))&&k.add(""),K("")>=3&&K("")>=1&&k.add(""),K("")>=3&&K("")+K("")<=1&&k.add("");const Ee=z("");K("")+K("")>=2&&Ee===1&&K("")>=1&&k.add(""),Ee>=2&&he+K("")>=3&&k.add("");const Me=re+ee;(re>=2||Me>=2)&&J>=1&&Me>J&&k.add(""),ee>=2&&J>=1&&Me>J&&k.add("");const Ie=z(""),Ke=z("");Ie>=2&&Ee+Ke>=1&&k.add(""),Ie>=2&&Ee+Ke===0&&k.add(""),y&&Ie>=2&&Ee>=1&&k.add(""),!y&&Ie>=2&&Ee>=1&&k.add(""),z("")>=2&&z("")>=1&&k.add(""),z("")>=1&&z("")>=1&&V([""],[""])&&k.add(""),H&&Ee>=1&&K("")+K("")>=2&&k.add("");const mt=[u(r),u(i),u(a),u(o)].filter(Boolean),pt=[r?.charAt(0),i?.charAt(0),o?.charAt(0)].filter(Boolean),De=new Set(pt.map(oe=>ro(b,oe))),ze=new Set(mt.flatMap(oe=>{const Ce=no[oe];return Ce?[a2(b,Ce)]:[]})),Ge=new Set(mt.flatMap(oe=>T(oe).map(Ce=>ro(b,Ce))));return["","","","",""].forEach(oe=>{const Ce=I[oe],Ue=Ce.some(st=>De.has(st)),rt=Ce.some(st=>ze.has(st)),xt=Ce.some(st=>Ge.has(st));!Ue&&!rt&&!xt?k.add(`${oe}`):!Ue&&!rt&&xt&&k.add(`${oe}`)}),Array.from(k)}const Qce=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const r=xa(n),i=In(n),a=ei[r],o=no[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t};function eue(e){const{pillars:t,dayStem:n,monthBranch:r,mapping:i}=e,[a,o,l,u]=(t??[]).slice(0,4),d=[xa(a),xa(o),xa(l),xa(u)].filter(Boolean),h=[In(a),In(o),In(l),In(u)].filter(Boolean),m=ei[n],b=d.map(oe=>ro(n,oe)),y=[],k=oe=>d.filter(Ce=>Ce===oe).length,w=oe=>h.filter(Ce=>Ce===oe).length,_=oe=>oe.every(Ce=>h.includes(Ce)),T=oe=>b.some(Ce=>oe.includes(Ce)),N=xa(o),j=oe=>ja(oe),C=()=>{const oe=d.map(Ce=>ei[Ce]);return oe.length===4&&oe.every(Ce=>Ce===oe[0])},M=()=>{if(d.length!==4)return!1;const oe=d.map(j),Ce=oe[0]&&!oe[1]&&oe[2]&&!oe[3],Ue=!oe[0]&&oe[1]&&!oe[2]&&oe[3];return Ce||Ue};ja(n)&&f9[n]===r&&y.push("");const P=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[oe,Ce]of P)if(n===oe&&r===Ce){y.push("");break}!ja(n)&&h9[n]===r&&y.push("");const I=iS[n];I&&In(l)===I&&m===no[In(l)]&&y.push(""),I&&In(u)===I&&m===no[In(u)]&&y.push("");const z=[a,o,l,u].map(Zce),K=[a,o,l,u].map(Xce);for(const oe of z);for(const oe of K);const G=i==="hgc"?px:mx;function H(oe){return(G[oe]??[]).filter(Ce=>["","","","","","","","","",""].includes(Ce))}const B=[a,o,l,u].filter(Boolean),X=B.flatMap(oe=>[oe.charAt(0),oe.charAt(1)]).flatMap(oe=>{try{if(["","","","","","","","","",""].includes(oe))return[ro(n,oe)];if(["","","","","","","","","","","",""].includes(oe)){const Ce=Yce(n,oe),Ue=H(oe).map(rt=>ro(n,rt));return[Ce,...Ue]}return[]}catch{return[]}}),V=oe=>X.some(Ce=>oe.includes(Ce)),F=(oe,Ce)=>{const Ue=[],rt=[];for(const st of B){const Oe=st.charAt(0),Fe=st.charAt(1);Ue.push(ro(n,Oe));const We=no[Fe];We?rt.push(a2(n,We)):rt.push(null)}const xt=(st,Oe)=>!!st&&!!Oe&&(oe.includes(st)&&Ce.includes(Oe)||Ce.includes(st)&&oe.includes(Oe));for(let st=0;st<Ue.length;st++)if(xt(Ue[st],rt[st]))return!0;for(let st=0;st<Ue.length-1;st++)if(xt(Ue[st],Ue[st+1])||xt(rt[st],rt[st+1]))return!0;return!1},Z={:["",""],:["",""],:["",""],:["",""]};V([...Z.])&&V([...Z.])&&F([...Z.],[...Z.])&&y.push(""),V([...Z.])&&V([...Z.])&&F([...Z.],[...Z.])&&y.push("");const Q=oe=>b.filter(Ce=>oe.includes(Ce)).length,le=Q(["",""]),se=Q([""]),W=Q([""]),re=Q(["",""]),ee=Q(["",""]),he=Q(["",""]);se>=1&&le>=1&&le>=se&&W<=se&&y.push("");const J=Q([""]);J>=1&&re>=1&&J>=re&&y.push(""),b.includes("")&&re>=1&&y.push("");const me=Qce(t),pe=Object.entries(me).sort((oe,Ce)=>Ce[1]-oe[1]),te=pe[0];if(te&&te[1]>=60&&y.push(`(${te[0]})`),pe.length>=2){const[oe,Ce]=pe[0],[,Ue]=pe[1];Ce>=75&&Ce-Ue>=12&&m!==oe&&y.push(`(${oe})`)}for(const oe of Lce){const Ce=d.includes(oe.a),Ue=d.includes(oe.b);if(!Ce||!Ue)continue;const rt=oe.to,xt=me[rt]??0,st=ei[oe.a],Oe=ei[oe.b],Fe=Math.max(me[st]??0,me[Oe]??0),We=no[r]===rt,At=Object.entries(me).sort((Mt,Kt)=>Kt[1]-Mt[1])[0]?.[0]===rt;let Nt=!1;xt>=60&&(We||At)&&Fe<=20&&xt-Fe>=20&&(y.push(`(${rt})`),Nt=!0),!Nt&&xt>=50&&(We||At)&&Fe<=25&&(y.push(`(${rt})`),Nt=!0),!Nt&&xt>=35&&y.push(`(${rt})`)}const je=`${xa(u)}${In(u)}`;["",""].includes(n)&&["","",""].includes(je)&&y.push(""),["","","",""].includes(In(u))&&y.push(""),["",""].includes(n)&&(In(l)===""||In(o)==="")&&!h.includes("")&&y.push("");const xe=d.some(oe=>oe===""||oe===""),ue=h.some(oe=>oe===""||oe==="");["",""].includes(In(l))&&!xe&&!ue&&y.push(""),["","",""].every(oe=>d.includes(oe))&&y.push(""),["","",""].every(oe=>d.includes(oe))&&y.push(""),["","",""].every(oe=>d.includes(oe))&&y.push("");const Ee=Object.values(me).sort((oe,Ce)=>Ce-oe);Ee.length>=3&&Ee[0]-Ee[2]<=8&&Ee[0]+Ee[1]+Ee[2]>=80&&y.push(""),ee>=1&&he>=1&&Math.abs(ee-he)<=1&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),h.length===4&&h.every(oe=>oe===h[0])&&y.push(""),d.length===4&&C()&&M()&&y.push(""),t.every(oe=>oe&&oe===t[0])&&y.push(""),d.length===4&&d.every(oe=>oe===d[0])&&h.length===4&&h.every(oe=>oe===h[0])&&y.push(""),le>=1&&(In(l)===iS[n]||In(u)===iS[n])&&y.push(""),k("")>=3&&_(["","",""])&&["","",""].includes(In(l))&&y.push("");const Ie=n===""||n==="",Ke=[["","",""],["","",""]],mt=[["","",""],["","",""]];Ie&&(Ke.some(oe=>_(oe))||mt.some(oe=>_(oe)))&&y.push("");const pt=new Set(["","","","","",""]),De=`${xa(l)}${In(l)}`;if(pt.has(De)&&w("")>=2&&(T(["",""])||h.includes("")||h.includes("")||T(["",""])||y.push("")),new Set(["","","","","",""]).has(De)&&w("")>=2&&h.includes("")&&y.push(""),n===""&&`${xa(u)}${In(u)}`==""){const oe=ro(n,N);!["","","",""].includes(oe)&&T(["",""])&&!h.includes("")&&!h.includes("")&&y.push("")}return new Set(["","",""]).has(De)&&`${xa(u)}${In(u)}`==""&&!h.includes("")&&!T(["",""])&&y.push(""),De===""&&w("")+w("")>=2&&y.push(""),(De===""||De==="")&&w("")>=2&&!T(["",""])&&!h.includes("")&&y.push(""),n===""&&_(["","",""])&&y.push(""),De===""&&`${xa(u)}${In(u)}`==""&&y.push(""),Fce(y)}function tue(e){const t=[];for(const n of e)switch(n.kind){case"BUNIL_PICK":t.push(`: ${n.from} `);break;case"WANGJI_FIXED_JUNGI":t.push(":   ");break;case"SAENGJI_EMITTED_ONE":t.push(`: ${n.from}  `);break;case"SAENGJI_EMITTED_MULTI":t.push(`:      ${n.from} `);break;case"SAENGJI_NOT_EMITTED_USE_JUNGI":t.push(":    ");break;case"GOJI_SAMHAP_USE_JUNGI":t.push(":     ");break;case"GOJI_EARLY_JEOLIP_USE_CHOGI":t.push(":  +12    ");break;case"GOJI_LATE_JEOLIP_USE_JUNGI":t.push(":  +12    ");break;case"NEUTRALIZED":t.push(":   / ");break;case"EX_GEONLOK":t.push(": /   ");break;case"EX_YANGIN":t.push(":    ");break;case"EX_WOLGEOP":t.push(":    ");break;case"EX_EXCLUDED_BIGEOP":t.push(": /  ");break}return t}function nue(e){return e===""?"()":{:"",:"",:"",:"",:"",:"",:"",:""}[e]??"-"}const gR=1e3*60*60*24;function pb(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function rue(e){let t=Ai(e);const n=t[0]?.date;if(n&&e.getTime()<n.getTime()){const r=new Date(e);r.setFullYear(e.getFullYear()-1),t=Ai(r)}return t}function iue(e){const t=Bce[e];return Array.isArray(t)&&t.length>0?t[0]:null}function aue(e,t){const n=iue(e);if(!n)return null;const r=rue(t),i=r.findIndex(d=>d.name===n);if(i<0)return null;const a=r[i]?.date,o=r[i+1]?.date;if(!a)return null;const l=Math.floor((pb(t)-pb(a))/gR)+1,u=o?Math.max(1,Math.floor((pb(o)-pb(a))/gR)):30;return{dayIdx:l<1?1:l,spanDays:u}}function oue(e){return(e.?.w??0)+(e.?.w??0)+e..w}function sue(e,t,n){const r=Math.max(1,oue(e)),i=Math.max(1,Math.min(n,t)),a=Math.max(1,Math.min(r,Math.ceil(i*r/n))),o=e.?.w??0,l=e.?.w??0;return e.&&a<=o?{stem:e..stem,from:""}:e.&&a<=o+l?{stem:e..stem,from:""}:{stem:e..stem,from:""}}function m9(e){const{dayStem:t,monthBranch:n,date:r,pillars:i,emittedStems:a=[],otherBranches:o=[],isNeutralized:l,mapping:u}=e,d=[],h=d9(u),m=PT(h);if(!DT(n))return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const b=m[n];if(!b)return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const y={:b.?{stem:aS(b..stem),w:b..w}:void 0,:b.?{stem:aS(b..stem),w:b..w}:void 0,:{stem:aS(b..stem),w:b..w}},k=y..stem;let w=k;const _=aue(n,r);if(["","","",""].includes(n)&&Hce(n,o)&&y.)w=y..stem,d.push({kind:"GOJI_SAMHAP_USE_JUNGI"});else if(_){const B=sue(y,_.dayIdx,_.spanDays);w=B.stem,d.push({kind:"BUNIL_PICK",from:B.from})}else w=k,d.push({kind:"BUNIL_FALLBACK_USE_WOLRYEONG"});function T(B,q){if(!B)return!1;if(q.includes(B))return!0;const X=ei[B];return X?q.some(V=>ei[V]===X):!1}let N="";w&&T(w,a)&&!l?.(w)?(N=w,d.push({kind:"DANRYEONG_CONFIRMED_BY_EMIT"})):w&&l?.(w)&&d.push({kind:"NEUTRALIZED"});const j=N||k;let C="";const M=ei[j];if(M){const B=Object.entries(cp).find(([,q])=>q===M)?.[0]??null;B&&(C=Object.entries(ei).find(([X,V])=>V===B&&ja(X)===ja(j))?.[0]??"")}let P="-";const I=ro(t,j),z=Ice.some(([B,q])=>B===t&&q===n),K=ja(t)&&f9[t]===n,G=!ja(t)&&h9[t]===n;I===""||I===""?z?(P="",d.push({kind:"EX_GEONLOK"})):K?(P="",d.push({kind:"EX_YANGIN"})):G?(P="",d.push({kind:"EX_WOLGEOP"})):d.push({kind:"EX_EXCLUDED_BIGEOP"}):P=nue(I);const H=eue({pillars:i,dayStem:t,monthBranch:n,mapping:u});return{:k,:w,:N||"-",:j||"-",:C||"-",:P,:H,reason:tue(d),reasonTokens:d}}function lue(e){const[t,n,r,i]=e,a=mb(i),o=mb(r),l=mb(n),u=mb(t),d=[],h=[[a,o],[o,l],[l,u]];for(const[b,y]of h){if(!b||!y)continue;const k=Qe(b,y),w=mR[k];w?.length&&d.push(...w);const _=Qe(y,b);if(_!==k){const T=mR[_];T?.length&&d.push(...T)}}const m=[[a,o,l],[o,l,u]];for(const[b,y,k]of m){if(!b||!y||!k)continue;const w=Yi(b,y,k),_=pR[w];_?.length&&d.push(..._);const T=Yi(k,y,b);if(T!==w){const N=pR[T];N?.length&&d.push(...N)}}return Array.from(new Set(d))}const cue=["","","","",""];function uue(e){return cue.includes(e)}function due(e){const t=/^(.+?)\((.+)\)$/.exec(e.trim());return t?{base:t[1].trim(),inner:t[2].trim()}:{base:e.trim()}}function hm(e,t){if(!t)return e;const n=(uue(t),t);return`${e}(${n})`}const fue={:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:" 3    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."}},hue={:e=>({title:hm("",e),short:"     ."}),:e=>({title:hm("",e),short:"   ."}),:e=>({title:hm("",e),short:"   ."}),:e=>({title:hm("",e),short:"    ."}),:e=>({title:hm("",e),short:"    ."})};function mue(e){const{base:t,inner:n}=due(e);return t===""||t===""||t===""||t===""||t===""?hue[t](n):fue[t]}function pue(e){const t=mue(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const gue=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),bR={:"   .   .",:"   .",:"  .",:"    .",:"  .",:"  .  .",:"   .",:"  .   .",:"   .",:"  .",:"   .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"   .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"   .",:"  .  .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"      .",:"  .",:"  .",:"    .",:"  .",:"  .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"  .",:"    .",:"   .",:"  .",:"    .",:"     .",:"   .",:"  .",:"     .",:"    .",:"   .",:"    .",:"    .",:"   .",:"   .",:" .",:"   .",:"   .",:"   .",:"   ."};function bue(e){if(gue(bR,e))return bR[e]}const yR={:"(/)",:"(/)",:"(/)",:"(/)",:"(/)"},yue={:{title:"",short:"    .",detail:"       ."},:{title:"",short:"      .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +  ."},:{title:"",short:"      .",detail:"     ."},:{title:"",short:"    ."},:{title:"",short:"    .",detail:"  +    ."},:{title:"",short:"()    .",hint:"     "},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"  +    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"       ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."}};function vue(e){const t=/^(|)(||||)$/.exec(e);if(!t)return null;const n=t[1],r=t[2];return n===""?{kind:"",group:r}:{kind:"",group:r}}function xue(e,t){return e===""?{title:`${t}`,short:`${yR[t]}() //   .`,hint:"( ) +  +   "}:{title:`${t}`,short:`${yR[t]}()     .`,hint:" X /  O"}}function wue(e){const t=vue(e);return t?xue(t.kind,t.group):yue[e]}function _ue(e){const t=wue(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Sue={:{title:"",text:"()  /  .   ."},:{title:"",text:" (//)     .  ."},:{title:"",text:"       .     ."},:{title:"",text:" (/)    ( ).    ."},:{title:"",text:" (/)   ,           ."}};function kue(e){return Sue[e]?.text}const Eue=e=>{switch(e){case"":return"( )";case"":return"";case"":return"()"}},jue={BUNIL_PICK:{title:"",text:"    //     ."},BUNIL_FALLBACK_USE_WOLRYEONG:{title:" ",text:"    ()    ."},DANRYEONG_CONFIRMED_BY_EMIT:{title:" ",text:"      ."},WANGJI_FIXED_JUNGI:{title:"",text:"       ."},SAENGJI_EMITTED_ONE:{title:" ",text:"        ."},SAENGJI_EMITTED_MULTI:{title:"  ",text:"          ."},SAENGJI_NOT_EMITTED_USE_JUNGI:{title:" ",text:"        ."},GOJI_SAMHAP_USE_JUNGI:{title:" + ",text:"      ."},GOJI_EARLY_JEOLIP_USE_CHOGI:{title:" +  ",text:"   12    ."},GOJI_LATE_JEOLIP_USE_JUNGI:{title:" +  ",text:"   12    ."},NEUTRALIZED:{title:"",text:"       ."},EX_GEONLOK:{title:" ",text:"       ."},EX_YANGIN:{title:" ",text:"       ."},EX_WOLGEOP:{title:" ",text:"        ."},EX_EXCLUDED_BIGEOP:{title:" ",text:"   ."}},Tue={:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},"()":{title:"()",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"/       ."},:{title:"",text:"/        ."},:{title:"",text:"/       ."}},Aue=e=>e.replace(/^\s*:\s*/,"").trim();function Nue(e){const t=Aue(e);return Tue[t]}function Oue(e){const t=jue[e.kind];if(t)return"from"in e?{...t,text:`${t.text} ( : ${Eue(e.from)})`}:t}const iu=S.memo(({text:e,color:t,onClick:n})=>{const r={violet:"bg-violet-50 text-violet-700 border-violet-200 dark:bg-violet-900/20 dark:text-violet-300 dark:border-violet-800",amber:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800",blue:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800",green:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-800",red:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800"};return g.jsx("button",{type:"button",onClick:n,className:`px-2.5 py-1 text-[11px] font-bold rounded-lg border shadow-sm whitespace-nowrap active:scale-95 transition-transform cursor-pointer ${r[t]}`,children:e})}),$d=({text:e})=>g.jsxs("div",{className:"absolute z-50 left-0 top-full mt-2 w-[220px] p-3 bg-white dark:bg-neutral-800 rounded-xl shadow-xl border border-neutral-200 dark:border-neutral-700 text-[11px] leading-relaxed text-left text-neutral-700 dark:text-neutral-200 pointer-events-none transition-none",children:[g.jsx("div",{className:"absolute -top-1 left-4 w-2 h-2 bg-white dark:bg-neutral-800 border-t border-l border-neutral-200 dark:border-neutral-700 rotate-45"}),e]}),gb=S.memo(({title:e,children:t})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-[10px] font-black text-neutral-400 dark:text-neutral-500 uppercase pl-1",children:e}),g.jsx("div",{className:"flex flex-wrap gap-1.5",children:t})]}));function Cue({pillars:e,tab:t,birthDate:n,emittedStems:r,otherBranches:i,isNeutralized:a,mapping:o,unified:l}){const[u,d]=S.useState(null);S.useEffect(()=>{d(null)},[t,e]);const h=S.useMemo(()=>{const[w,_,T,N]=e,j=z=>z&&z.length>=1?z.charAt(0):"",C=z=>z&&z.length>=2?z.charAt(1):"",M=n instanceof Date&&!Number.isNaN(n.getTime())?n:new Date,P=[j(w),j(_),j(T),j(N)].filter(z=>!!z),I=[C(w),C(T),C(N)].filter(z=>!!z);return m9({dayStem:j(T),monthBranch:C(_),date:M,pillars:e,emittedStems:r??P,otherBranches:i??I,isNeutralized:a,mapping:o})},[e,n,r,i,a,o]),m=S.useMemo(()=>lue(e),[e]),b=S.useMemo(()=>Jce(e,o,l),[e,o,l]),y=w=>{d(_=>_===w?null:w)},k=[{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.}];return g.jsxs("div",{className:"p-6 rounded-[2rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-sm space-y-6 overflow-visible",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"font-black text-lg text-neutral-800 dark:text-neutral-100 italic",children:"   "}),g.jsx("span",{className:"text-[10px] bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-0.5 rounded-full font-bold",children:"     "})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsx(gb,{title:"////",children:k.map(({key:w,value:_})=>g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:`${w}: ${_||"-"}`,color:"violet",onClick:()=>y(`env-${w}`)}),u===`env-${w}`&&g.jsx($d,{text:kue(w)??" ."})]},w))}),g.jsxs(gb,{title:"",children:[g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:`: ${h.||"-"}`,color:"amber",onClick:()=>y("naegyeok")}),u==="naegyeok"&&g.jsx($d,{text:Nue(h.||"")?.text??"  ."})]}),h.reasonTokens?.map((w,_)=>{const T=Oue(w),N=`reason-${_}`;return g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:T?.title??(h.reason[_]||w.kind),color:"amber",onClick:()=>y(N)}),u===N&&g.jsx($d,{text:T?.text??"  ."})]},N)})]}),g.jsx(gb,{title:"",children:h.&&h..length>0?h..map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:`: ${w}`,color:"blue",onClick:()=>y(`outer-${_}`)}),u===`outer-${_}`&&g.jsx($d,{text:pue(w)??" "})]},`outer-${_}`)):g.jsx(iu,{text:": -",color:"blue"})}),(m.length>0||b.length>0)&&g.jsxs(gb,{title:"  ",children:[m.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:w,color:"green",onClick:()=>y(`mul-${_}`)}),u===`mul-${_}`&&g.jsx($d,{text:bue(w)??" "})]},`mul-${_}`)),b.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(iu,{text:w,color:"red",onClick:()=>y(`str-${_}`)}),u===`str-${_}`&&g.jsx($d,{text:_ue(w)??" "})]},`str-${_}`))]})]}),!h.reasonTokens?.length&&h.reason.length>0&&g.jsx("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11px] text-neutral-500 leading-relaxed font-medium",children:[g.jsx("span",{className:"font-bold mr-1 text-neutral-400",children:"  :"}),h.reason.join(" / ")]})})]})}const Mue=Object.fromEntries(ho..map((e,t)=>[e,ri[t]])),Due=Object.fromEntries(ri.map((e,t)=>[e,ho.[t]])),Pue=Object.fromEntries(ho..map((e,t)=>[e,Ti[t]])),Rue=Object.fromEntries(Ti.map((e,t)=>[e,ho.[t]])),Lue=e=>Mue[e]??e,Iue=e=>Pue[e]??e,$ue=e=>Due[e]??e,Bue=e=>Rue[e]??e;function zue(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Lue(n):$ue(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}function RT(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Iue(n):Bue(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}const Uue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Fue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},p9={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},Hue={...p9,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},vR=zue(Uue),Is=RT(Fue),Gue=RT(p9);RT(Hue);const Yue=["","","","",""];function que(){const[e,t]=S.useState("   "),[n,r]=S.useState(""),[i,a]=S.useState(!0);return{bigTab:e,setBigTab:t,blendTab:n,setBlendTab:r,demoteAbsent:i,setDemoteAbsent:a}}const Kue={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},Wue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function o2(e){const t=Wue[e]??"";return Kue[t]}const Vue=Object.fromEntries(ho..map((e,t)=>[e,ri[t]])),Zue=Object.fromEntries(ri.map((e,t)=>[e,ho.[t]])),Xue=Object.fromEntries(ho..map((e,t)=>[e,Ti[t]])),Jue=Object.fromEntries(Ti.map((e,t)=>[e,ho.[t]])),Que=e=>Vue[e]??e,ede=e=>Xue[e]??e,tde=e=>Zue[e]??e,nde=e=>Jue[e]??e;function g9(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const r=n.charAt(0),i=n.charAt(1),a=/[]/.test(r)||/[]/.test(i)?`${Que(r)}${ede(i)}`:`${tde(r)}${nde(i)}`;t[a]===void 0&&(t[a]=e[n])}return t}const b9={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},rde={...b9,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},ide=g9(b9),ade=g9(rde),Ns={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ev={:"",:"",:"",:"",:""},up={:"",:"",:"",:"",:""},dp={:"",:"",:"",:"",:""},fp={:"",:"",:"",:"",:""},ode=e=>Jn[e]??e,sde=e=>ar[e]??e;function y9(e){return!e||e.length<2?"":`${ode(e[0])}${sde(e[1])}`}const Px=e=>e&&e.length>=1?e[0]:"",cf=e=>e&&e.length>=2?e[1]:"";function lde(e){return{:e,:ev[e],:up[e],:dp[e],:fp[e]}}function v9(e,t){if(!e)return!1;const n=Is[e];return!!n&&n===t}const x9=30,cde=24,w9=[.8,1.35,1.25,.8],_9=[.85,1.6,1.4,1.05],S9=[.55,1.05,.95,.7],uy=.2,ude=new Set(["","","","",""]),oS=new Set(["","","",""]),sS=new Set(["","","",""]);function xR(e){return ude.has(e)}function dy(e){return Number.isFinite(e)?Math.max(0,Math.min(1,e)):0}function fy(e){const t=Gue[e]??[];return Array.isArray(t)?t:[]}function lS(e,t){const n=Ns[e],r=Ns[t];if(!n||!r)return"";const i=xR(e)===xR(t);return r===n?i?"":"":r===ev[n]?i?"":"":r===up[n]?i?"":"":r===dp[n]?i?"":"":r===fp[n]?i?"":"":i?"":""}function k9(e){const t=Object.values(e).reduce((n,r)=>n+Math.max(0,r),0);return t<=0?{:0,:0,:0,:0,:0}:{:Math.max(0,e.??0)/t*100,:Math.max(0,e.??0)/t*100,:Math.max(0,e.??0)/t*100,:Math.max(0,e.??0)/t*100,:Math.max(0,e.??0)/t*100}}function dde(e,t){let n=0,r=0,i=0,a=0;for(let o=0;o<4;o++){const l=e[o];if(!l||l.length<2)continue;const u=Px(l),d=cf(l);Ns[u]===t&&(r+=1,n+=w9[o]??0,(o===1||o===2)&&(a+=1));let m=!1;Is[d]===t&&(m=!0,n+=_9[o]??0);const y=fy(d);for(const k of y){if(Ns[k.stem]!==t)continue;const _=dy(k.ratio);_<uy||(m=!0,n+=(S9[o]??0)*_)}m&&(i+=1,(o===1||o===2)&&(a+=1))}return{supportScore:n,stemHits:r,branchHits:i,coreHits:a}}function E9(e,t,n,r){const i=k9(t),a=up[r],o=dp[r],l=fp[r],u=cf(e[1]??""),d=Is[u]??null,h=fy(u),m=cf(e[2]??""),b=Is[m],y=fy(m),k=d===r||d===a,w=b===r||y.some(q=>Ns[q.stem]===r&&dy(q.ratio)>=uy),_=h.some(q=>Ns[q.stem]===r&&dy(q.ratio)>=uy);let T=0,N=0,j=0,C=0,M=0,P=0;const I=new Set;for(let q=0;q<4;q++){const X=e[q];if(!X||X.length<2)continue;const V=Px(X),F=cf(X),Z=w9[q]??0,Q=_9[q]??0,le=S9[q]??0;if(Ns[V]){const ee=lS(n,V);oS.has(ee)&&(T+=Z,j+=1),sS.has(ee)&&(N+=Z),ee===""&&(C+=1,M+=Z),ee===""&&(P+=Z)}const se=fy(F),W=se.find(ee=>ee.main)??se[0];if(W?.stem&&Ns[W.stem]){const ee=lS(n,W.stem);oS.has(ee)&&(T+=Q,j+=1),sS.has(ee)&&(N+=Q),ee===""&&(C+=1,M+=Q),ee===""&&(P+=Q)}let re=Is[F]===r;for(const ee of se){if(!ee?.stem)continue;const he=Ns[ee.stem];if(!he)continue;const J=dy(ee.ratio);if(J<=0)continue;he===r&&J>=uy&&(re=!0);const ae=lS(n,ee.stem),me=le*J*.85;me<=0||(oS.has(ae)&&(T+=me,J>=.35&&(j+=1)),sS.has(ae)&&(N+=me),ae===""&&(M+=me,J>=.55&&(C+=1)),ae===""&&(P+=me))}re&&I.add(q)}const z=i[r],K=z+i[a],G=i[o]+i[l],H=z>=14&&z<=58&&K>=32&&K<=78,B=T>=N+.8||K>=G+6;return{dayStem:n,dayEl:r,dayPct:z,allyPct:K,enemyPct:G,allyScore:T,enemyScore:N,allyRepeatCount:j,sameYinYangPeerCount:C,sameYinYangPeerScore:M,geobScore:P,monthSupport:k,deukJi:w,monthTonggeun:_,rootCount:I.size,stableBody:H,allyDominant:B}}function fde(e){if(e.dayPct>=x9)return!0;const t=e.sameYinYangPeerCount>=2||e.sameYinYangPeerScore>=2.8,n=e.allyRepeatCount>=3||e.allyScore>=4,r=e.monthSupport&&e.deukJi&&n,i=(e.monthSupport||e.monthTonggeun)&&e.rootCount>=1&&e.stableBody,a=e.dayPct>=18&&e.dayPct<=60;return!!(r&&e.allyDominant&&i||t&&e.allyDominant&&a&&e.rootCount>=1||t&&e.allyDominant&&n&&e.dayPct>=20||e.rootCount>=2&&e.allyDominant&&i&&e.allyPct>=35)}function hy(e,t,n,r){const a=k9(t)[n]??0;if(a>=x9||r&&n===r.dayEl&&fde(r))return!0;const o=dde(e,n);return a>=cde&&o.supportScore>=3.2||o.coreHits>=2&&o.stemHits>=2&&o.branchHits>=1||o.supportScore>=3.6&&(o.stemHits>=2||o.branchHits>=3)}function j9(e,t){const n=(e??[]).slice(0,4).map(y9);if(n.length!==4||n.some(b=>b.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const r=Px(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(b=>cf(b)),o={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},l=a[1],u=Is[l],d=E9(n,t,r,i),h=lde(i),m=a[2];return Object.keys(o).forEach(b=>{const y=h[b];u&&u===y&&(o[b].=!0),v9(m,y)&&(o[b].=!0),o[b].=hy(n,t,y,d)}),{flags:o,monthBranch:l,dayEl:i}}function T9(e,t){const n=(e??[]).slice(0,4).map(y9);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const y={:!1,:!1,:!1};return{flags:{:{...y},:{...y},:{...y},:{...y},:{...y},:{...y},:{...y},:{...y},:{...y},:{...y}},monthBranch:"",dayEl:""}}const r=Px(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(y=>cf(y)),o={:!1,:!1,:!1},l={:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o}},u=a[1],d=Is[u],h=a[2],m=E9(n,t,r,i),b={:i,:i,:ev[i],:ev[i],:dp[i],:dp[i],:fp[i],:fp[i],:up[i],:up[i]};return Object.keys(l).forEach(y=>{const k=b[y];if(d&&d===k&&(l[y].=!0),v9(h,k)&&(l[y].=!0),y===""){const w=hy(n,t,k,m),_=m.sameYinYangPeerCount>=2||m.sameYinYangPeerScore>=2.2;l[y].=w&&_;return}if(y===""){const w=hy(n,t,k,m),_=m.geobScore>=1.2;l[y].=w&&_;return}l[y].=hy(n,t,k,m)}),{flags:l,monthBranch:u,dayEl:i}}const hde=Object.fromEntries(Object.entries(Jn).map(([e,t])=>[t,e])),mde=Object.fromEntries(Object.entries(ar).map(([e,t])=>[t,e])),pde=e=>Jn[e]??e,gde=e=>ar[e]??e;function bde(e){return!e||e.length<2?"":`${pde(e[0])}${gde(e[1])}`}function au(e){return vR[e]??vR[hde[e]??""]}function Gl(e){return Is[e]??Is[mde[e]??""]}const cS=["year","month","day","hour"],yde={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},vde={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},xde=new Set(["","","","",""]),wde=new Set(["","","","","",""]),_de=new Set(["","","",""]),uS=e=>xde.has(e)?"":"",dS=e=>{const t=wde.has(e)?"":"";return _de.has(e)?t===""?"":"":t};function wR(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.floor(l+.5)),i=100-r.reduce((l,u)=>l+u,0);if(i===0)return r;const a=n.map((l,u)=>({i:u,frac:l-Math.floor(l+.5)})).sort((l,u)=>u.frac-l.frac),o=r.slice();if(i>0)for(let l=0;l<i;l++)o[a[l].i]+=1;else for(let l=0;l<-i;l++)o[a[a.length-1-l].i]-=1;return o}function Sde(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const bb={:.15,:.1,:-.15,:-.2,:-.25},Hs={:"",:"",:"",:"",:""},Mu={:"",:"",:"",:"",:""},qo={:"",:"",:"",:"",:""},Rx={:"",:"",:"",:"",:""};function yb(e,t){return e===t?"":Hs[t]===e?"":Hs[e]===t?"":qo[e]===t?"":qo[t]===e?"":""}const ou=e=>e&&e.length>=1?e[0]:"",Yl=e=>e&&e.length>=2?e[1]:"";function kde(e,t){const n=e.reduce((u,d)=>u+d,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const r=e.map(u=>u/n*t),i=r.map(u=>Math.floor(u));let a=t-i.reduce((u,d)=>u+d,0);const o=r.map((u,d)=>({i:d,frac:u-Math.floor(u)})).sort((u,d)=>d.frac-u.frac),l=i.slice();for(let u=0;u<o.length&&a>0;u++)l[o[u].i]+=1,a-=1;return l}function _R(e,t){switch(e){case"":return t;case"":return Hs[t];case"":return qo[t];case"":return Rx[t];case"":return Mu[t];default:return t}}const SR={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ede=["","","","",""],jde={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},kR={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},Tde={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}};function Ade(e){return e.length===4&&!!e[0]&&e[0].length>=2&&!!e[1]&&e[1].length>=2&&!!e[2]&&e[2].length>=2}function Nde(e){const t=Ede.map(n=>({name:n,value:0,color:"#999999"}));return{overlay:{totalsSub:{...kR},perStemAugBare:{},perStemAugFull:{}},totals:t,perTenGod:{...jde},PerTenGodSub:{...kR},elementScoreRaw:e,deukFlags:{...Tde},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}function Ode(e,t){const n=e[2]?.[0]??"",r=t??n;return{dayStem:r,dayEl:r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":""}}const mr={threeHarmony:20,halfStrong:12,halfMedium:8,halfWeak:4,monthBranch:10,maxPerElement:30};function Cde(e){const t=e.map(i=>i&&i.length>1?i[1]:""),n=new Set(t),r=[];return n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:mr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:mr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:mr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:mr.threeHarmony}),n.has("")&&n.has("")?r.push({element:"",score:mr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:mr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:mr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:mr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:mr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:mr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:mr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:mr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:mr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:mr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:mr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:mr.halfWeak}),r}function tv(e){const{pillars:t,dayStem:n,mode:r,debug:i,useHarmonyOverlay:a,criteriaMode:o,luck:l}=e,u=o==="modern"?yde:vde,d=r==="classic"?ade:ide,h={:0,:0,:0,:0,:0},m={},b=(t??[]).slice(0,4).map(bde);if(!Ade(b))return Nde(h);const{dayStem:y,dayEl:k}=Ode(b,n),w=[{val:0},{val:0},{val:0},{val:0}],_=[[],[],[],[]];for(const J of b){if(!J)continue;const ae=J.charAt(0),me=J.charAt(1);m[ae]=(m[ae]??0)+50;const pe=SR[me];pe&&(m[pe]=(m[pe]??0)+50)}for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=cS[J],pe=ou(ae),te=Yl(ae),je=u[me],xe=au(pe);xe&&(h[xe]+=je.stem,w[J]={stem:pe,el:xe,pol:uS(pe),val:je.stem});const ue=Gl(te);ue&&(h[ue]+=je.branch,_[J].push({el:ue,pol:dS(te),val:je.branch}))}for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=cS[J],pe=d[ae]??0;if(pe===0)continue;const te=ou(ae),je=au(te);if(!je)continue;const xe=u[me].stem*pe;h[je]+=xe,w[J].val+=xe}for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=Yl(ae),pe=Gl(me);if(!pe)continue;const te=u[cS[J]].branch,je=dS(me);let xe=0;const ue=[J];J-1>=0&&ue.push(J-1),J+1<=3&&ue.push(J+1),J-2>=0&&ue.push(J-2),J+2<=3&&ue.push(J+2);const Ee=Array.from(new Set(ue));for(const Me of Ee){if(!b[Me]||b[Me].length<2)continue;const Ie=ou(b[Me]),Ke=au(Ie);if(!Ke||Ke!==pe)continue;const mt=uS(Ie)===je,pt=Math.abs(Me-J),De=Sde(pt,mt);xe+=te*De}xe!==0&&(h[pe]+=xe,_[J].push({el:pe,pol:je,val:xe}))}for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=ou(ae),pe=au(me);if(!pe)continue;let te=0;const je=Yl(b[J]),xe=Gl(je);xe&&(te+=bb[yb(pe,xe)]);const ue=J===0?[1]:J===3?[2]:[J-1,J+1];for(const Me of ue){const Ie=ou(b[Me]),Ke=au(Ie);Ke&&(te+=bb[yb(pe,Ke)])}const Ee=w[J].val;if(Ee!==0&&te!==0){const Me=Math.round(Ee*(1+te)*10)/10,Ie=Me-Ee;h[pe]+=Ie,w[J].val=Me}}for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=Yl(ae),pe=Gl(me);if(!pe)continue;let te=0;const je=ou(b[J]),xe=au(je);xe&&(te+=bb[yb(pe,xe)]);const ue=J===0?[1]:J===3?[2]:[J-1,J+1];for(const Me of ue){if(!b[Me]||b[Me].length<2)continue;const Ie=Yl(b[Me]),Ke=Gl(Ie);Ke&&(te+=bb[yb(pe,Ke)])}const Ee=_[J].reduce((Me,Ie)=>Me+Ie.val,0);if(Ee!==0&&te!==0){const Ie=Math.round(Ee*(1+te)*10)/10-Ee;h[pe]+=Ie,_[J].length>0&&(_[J][0].val+=Ie)}}a&&Ooe(b,h);const T={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},N=[];if(!(!l||l.tab==="")){let J=function(ae,me){const pe=ae?Re(ae):"";if(!pe||pe.length<2)return;const te=ou(pe),je=Yl(pe),xe=au(te),ue=Gl(je),Ee=Math.max(1,(h.??0)+(h.??0)+(h.??0)+(h.??0)+(h.??0)),Me=T[me];if(xe){const Ie=Math.round(Ee*Me.stem);h[xe]+=Ie,N.push({stem:te,el:xe,pol:uS(te),val:Ie})}if(ue){const Ie=Math.round(Ee*Me.branch);h[ue]+=Ie,N.push({el:ue,pol:dS(je),val:Ie})}};J(l.dae,"dae"),(l.tab===""||l.tab===""||l.tab==="")&&J(l.se,"se"),(l.tab===""||l.tab==="")&&J(l.wol,"wol"),l.tab===""&&J(l.il,"il")}const j=Cde(b),C=b[1]?Yl(b[1]):"",M=Gl(C),P={:0,:0,:0,:0,:0};for(const J of j)P[J.element]+=J.score;M&&(P[M]+=mr.monthBranch),["","","","",""].forEach(J=>{const ae=Math.min(mr.maxPerElement,P[J]);ae>0&&(h[J]+=ae)});const I={:0,:0,:0,:0,:0};Object.entries(h).forEach(([J,ae])=>{const me=q(J,k);I[me]+=ae});const z=["","","","",""],K=wR(z.map(J=>I[J])),G=o2(y),H=z.map((J,ae)=>({name:J,value:K[ae],color:G[J]})),B={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function q(J,ae){return J===ae?"":Hs[ae]===J?"":qo[ae]===J?"":qo[J]===ae?"":Mu[ae]===J?"":""}function X(J,ae){switch(q(J,k)){case"":B.+=ae*.5,B.+=ae*.5;break;case"":B.+=ae*.5,B.+=ae*.5;break;case"":B.+=ae*.5,B.+=ae*.5;break;case"":B.+=ae*.5,B.+=ae*.5;break;case"":B.+=ae*.5,B.+=ae*.5;break}}Object.entries(h).forEach(([J,ae])=>{ae>0&&X(J,ae)});const V={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const J of z){const ae=H.find(ue=>ue.name===J)?.value??0,me=V[J].a,pe=V[J].b,te=B[me]??0,je=B[pe]??0,xe=te+je;if(xe>0){const ue=Math.floor(ae*te/xe+.5),Ee=ae-ue;V[J].aVal=ue,V[J].bVal=Ee}else V[J].aVal=Math.floor(ae/2+.5),V[J].bVal=ae-V[J].aVal}const{flags:F}=j9(b,h),Z={};w.forEach(J=>{if(J.stem&&J.el&&J.val){const ae=`${J.stem}${J.el}`;Z[ae]=(Z[ae]??0)+J.val}});for(let J=0;J<4;J++){const ae=b[J];if(!ae||ae.length<2)continue;const me=Yl(ae),pe=SR[me],te=Gl(me);if(!pe||!te)continue;const je=`${pe}${te}`,xe=_[J].reduce((ue,Ee)=>ue+Ee.val,0);Z[je]=(Z[je]??0)+xe}const Q=["","","","","","","","","",""],le={};Q.forEach(J=>{le[J]=0}),z.forEach(J=>{const ae=H.find(Ee=>Ee.name===J)?.value??0,me=_R(J,k),pe=Object.entries(Z).filter(([Ee])=>Ee.endsWith(me)),te=pe.map(([Ee])=>Ee),je=pe.map(([,Ee])=>Ee),xe=Math.max(0,Math.round(ae*10)),ue=kde(je.length?je:[1,1],xe);if(te.length===2)le[te[0]]=(ue[0]??Math.round(xe/2))/10,le[te[1]]=(ue[1]??xe-(ue[0]??0))/10;else if(te.length===1)le[te[0]]=xe/10;else{const Ee=me===""?["",""]:me===""?["",""]:me===""?["",""]:me===""?["",""]:["",""],Me=Math.floor(xe/2),Ie=xe-Me;le[Ee[0]]+=Me/10,le[Ee[1]]+=Ie/10}});const se=["","","","",""],W={:0,:0,:0,:0,:0};for(const J of H){const ae=_R(J.name,k);W[ae]+=J.value}const re=wR(se.map(J=>W[J])),ee={:re[0],:re[1],:re[2],:re[3],:re[4]};return i&&console.log({elementScore:h,totals:H,perTenGod:V,perStemRaw:Z,perStemElementScaled:le,elementPercent100:ee}),{overlay:{totalsSub:B,perStemAugBare:Z,perStemAugFull:le},totals:H,perTenGod:V,PerTenGodSub:B,stemScoreRaw:m,elementScoreRaw:h,deukFlags:F,perStemElement:Z,perStemElementScaled:le,elementPercent100:ee}}const vb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Mde=["","","","",""];function ER(e){return Mde.includes(e)}const A9={:"",:"",:"",:"",:""},N9={:"",:"",:"",:"",:""},O9={:"",:"",:"",:"",:""},C9={:"",:"",:"",:"",:""},nv={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Dde=["","","","","","","","","",""],Pde={natal:50,dae:30,se:20,wol:7,il:3};function rv(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Jn[t])return Jn[t];if(["","","","","","","","","","","",""].includes(t))return vb[t]??null;if(ar[t])return vb[ar[t]]??null;const n=t.charAt(0);return Jn[n]?Jn[n]:["","","","","","","","","",""].includes(n)?n:ar[n]?vb[ar[n]]??null:["","","","","","","","","","","",""].includes(n)?vb[n]??null:null}function Rde(e,t){const n=nv[e],r=nv[t];if(!n||!r)return"";let i;r===n?i="":r===A9[n]?i="":r===N9[n]?i="":r===O9[n]?i="":r===C9[n]?i="":i="";const a=ER(e)===ER(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function iv(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.round(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.round(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function jR(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=rv(r);if(!a)continue;const o=Rde(t,a);n[o]+=i}return iv(n)}function Lde(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function TR(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=rv(n);i&&(t[i]=(t[i]??0)+r)}return t}function AR(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of Dde){const i=nv[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}function NR(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const r of t)typeof e[r]=="number"&&(n[r]=e[r]);return n}function Ide(e,t){const n=nv[e];if(!n)return"";let r;return t===n?r="":t===A9[n]?r="":t===N9[n]?r="":t===O9[n]?r="":t===C9[n]?r="":r="",r}function $de(e,t){const n=t?.dae?xb(t.dae):{},r=t?.se?xb(t.se):{},i=t?.wol?xb(t.wol):{},a=t?.il?xb(t.il):{},o={},l=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:r},{kind:"wol",bare:i},{kind:"il",bare:a}];for(const{kind:d,bare:h}of l){const m=Pde[d];if(!h||Object.keys(h).length===0)continue;const b=iv(h);for(const[y,k]of Object.entries(b))o[y]=(o[y]??0)+k*m}const u=Object.values(o).reduce((d,h)=>d+h,0);if(u>0)for(const d of Object.keys(o))o[d]=o[d]/u*100;return o}function Bde(e){if(!e)return[];const t=rv(e.charAt(0)),n=rv(e.charAt(1));return[t,n].filter(Boolean)}function xb(e){const t=Bde(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function Wp(e){const{natal:t,tab:n,chain:r,hourKey:i="unified"}=e,a=[Re(t[0]??""),Re(t[1]??""),Re(t[2]??""),Re(t[3]??"")],o=a[2]?.charAt(0)??"",{hiddenStemMode:l,hiddenStem:u}=Xl,d=l==="classic"?"classic":"hgc",h=r?{tab:n,dae:r.dae?Re(r.dae):void 0,se:(n===""||n===""||n==="")&&r.se?Re(r.se):void 0,wol:(n===""||n==="")&&r.wol?Re(r.wol):void 0,il:n===""&&r.il?Re(r.il):void 0}:{tab:n},m=tv({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:h}),b=tv({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),y=TR(m.perStemElementScaled),k=n===""?y:$de(y,r),w=iv(k),_=jR(k,o),T=Lde(_),N=AR(w),j=TR(b.perStemElementScaled),C=jR(j,o),M=iv(j),P=AR(M);return{elementScoreRaw:m.elementScoreRaw,elementPercent100:m.elementPercent100,totals:m.totals,perStemElementScaled:m.perStemElementScaled,dayStem:o,mergedStems:w,perTenGodSub:_,perTenGod:T,overlay:{totalsSub:_,perStemAugBare:k,perStemAugFull:N},natalFixed:{elementScoreRaw:NR(b.elementScoreRaw),elementPercent100:NR(b.elementPercent100),totalsSub:C,overlay:{totalsSub:C,perStemAugBare:j,perStemAugFull:P}}}}const Lo=["","","","",""],lc={:0,:0,:0,:0,:0},zde=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],Ude={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}},fS=24,Fde=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]],av=20;Object.fromEntries(Object.entries(Jn).map(([e,t])=>[t,e]));Object.fromEntries(Object.entries(ar).map(([e,t])=>[t,e]));const M9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Hde={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function D9(e){return Math.max(0,Math.min(100,e))}function vf(e,t,n){return Math.max(t,Math.min(n,e))}function Gde(e){const t=D9(e);return zde.find(n=>t>=n.min&&t<n.max)?.name??""}function Yde(e){const t=e?.[2]?.charAt(0)??"";return M9[t]??null}function qde(e){return(e?.[1]?.charAt(1)??"")||null}function P9(e){return Rx[e]}function Kde(e){return e?{peer:e,resource:Mu[e],leak:Hs[e],wealth:qo[e],officer:P9(e)}:null}function Wde(e){const t={...lc};for(const n of e){if(!n)continue;const r=n.charAt(0),i=n.charAt(1),a=M9[r],o=Hde[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t}function Vde(e){const t=Object.values(e).reduce((r,i)=>r+i,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={...lc};return Lo.forEach(r=>{n[r]=e[r]/t*100}),n}function Zde(e){if(!e||e.length===0)return null;const t=e.reduce((r,i)=>r+(i?.value??0),0)||0;if(t<=0)return null;const n=r=>e.find(i=>i.name===r)?.value??0;return D9((n("")+n(""))/t*100)}function Xde(e,t){return!e||!t?null:t===e?"":Hs[e]===t?"":qo[e]===t?"":P9(e)===t?"":Mu[e]===t?"":null}function Jde(e){for(const[t,n]of Fde)if(e>=t)return n;return 1}const OR=(e,t)=>vf((av-(t[e]??0))/av,0,1),CR=(e,t)=>vf(((t[e]??0)-av)/av,0,1);function Qde(e,t,n,r){const i=Xde(e,n);if(!e||!i)return 0;const a=vf((50-t)/50,0,1),o=vf((t-50)/50,0,1),l=OR(n,r),u=CR(n,r),d=OR(e,r),h=CR(e,r),m=6.5;let b=0;if(a>0)switch(i){case"":b=+(.3+.4*d+.15*l)*a;break;case"":b=+(.18+.45*d)*a;break;case"":b=-(.08+.2*(1-l)+.1*h)*a;break;case"":b=-(.22+.25*(1-l)+.1*(1-d))*a;break;case"":b=-(.35+.25*(1-l)+.1*(1-d))*a;break}else if(o>0)switch(i){case"":b=-(.25+.25*(1-l)+.2*h)*o;break;case"":b=-(.28+.2*h)*o;break;case"":b=+(.18+.2*l+.15*h)*o;break;case"":b=+(.22+.25*l+.1*h)*o;break;case"":b=+(.2+.2*l)*o;break}else switch(i){case"":b=.08*(d+l);break;case"":b=.05*d-.03*h;break;case"":b=.02*l-.02*u;break;case"":b=.01*l-.06*u;break;case"":b=-.05*(1-l);break}return Math.round(m*b*10)/10}function efe(e,t,n){const r=["","",""].includes(t),i=["","","",""].includes(t),a={...lc};if(r){const o=Hs[e],l=qo[e],u=Rx[e];a[o]+=28,a[l]+=22,a[u]+=20,n.get(o)?.push(":    ()"),n.get(l)?.push(":     "),n.get(u)?.push(":     ")}if(i){const o=Mu[e],l=e;a[o]+=28,a[l]+=22,n.get(o)?.push(":     "),n.get(l)?.push(":     ")}return a}function MR(e,t){if(!e)return{...lc};const n=Ude[e]??{temp:"mild",wet:"normal"},r={...lc};return n.temp==="cold"?(r.+=16,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(r.+=14,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),r}function DR(e,t){const n={...lc};for(const r of Lo){const i=qo[r],a=Math.max(0,(e[r]??0)-(e[i]??0));if(a<=0)continue;const o=Hs[r],l=Math.round(a*.35);l>0&&(n[o]+=l,t.get(o)?.push(`: ${r}${i} `))}return n}function PR(e,t){const n={...lc},r=Object.entries(e),i=Math.min(...r.map(([,o])=>o)),a=r.filter(([,o])=>o<=Math.max(6,i));for(const[o]of a)n[o]+=12,t.get(o)?.push(":  ");return n}const wb=()=>new Map(Lo.map(e=>[e,[]]));function xf(e,t){const n=Yde(e),r=qde(e),i=Wde(e),a=Vde(i);let o=Zde(t);if(o==null)if(!n)o=50;else{const H=n,B=Mu[n],q=Object.values(i).reduce((X,V)=>X+V,0)||1;o=Math.min(100,Math.max(0,((i[H]??0)+(i[B]??0))/q*100))}const l=Gde(o),u={...lc},d=wb();if(n){const H=efe(n,l,d);Lo.forEach(B=>{u[B]+=H[B]??0})}const h=MR(r,d);Lo.forEach(H=>{u[H]+=h[H]??0});const m=DR(i,d);Lo.forEach(H=>{u[H]+=m[H]??0});const b=PR(i,d);Lo.forEach(H=>{u[H]+=b[H]??0});const y=Kde(n),k={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const H of t)k[H.name]=H.value;if(o>=45&&o<=55&&y){const H=k.>=30||k.>=Math.max(k.,k.,k.,k.)+5;o<=50?(u[y.resource]+=14,d.get(y.resource)?.push(": -"),u[y.peer]+=10,d.get(y.peer)?.push(": -"),u[y.leak]+=6,d.get(y.leak)?.push(": -"),u[y.wealth]+=3,d.get(y.wealth)?.push(": -"),H&&(u[y.officer]=Math.round(u[y.officer]*.8*10)/10,d.get(y.officer)?.push(":   "))):(u[y.leak]+=14,d.get(y.leak)?.push(": -"),u[y.wealth]+=10,d.get(y.wealth)?.push(": -"),u[y.officer]+=6,d.get(y.officer)?.push(": -"),u[y.resource]+=3,d.get(y.resource)?.push(": -"))}Lo.forEach(H=>{const B=Qde(n,o,H,a);u[H]=vf(Math.round((u[H]+B)*10)/10,0,999)});const _=o<50;Lo.forEach(H=>{const B=a[H]??0,q=_&&n===H;if(B>=fS&&!q){const X=Jde(B);u[H]=Math.round(u[H]*X*10)/10;const V=Math.min(14,Math.max(0,Math.ceil((B-fS)*.5)));V>0&&(u[H]=vf(u[H]-V,0,999)),d.get(H)?.push(" ()")}});const T={:[],:[],:[],:[],:[]};if(n){const H=Hs[n],B=qo[n],q=Rx[n],X=n,V=Mu[n];T[H].push(""),T[B].push(""),T[q].push(""),T[X].push(""),T[V].push("")}const N={:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0},j=H=>{const B=a[H]??0;return B>=fS&&!(_&&n===H)?B>=55?4:B>=45?3:2:N[H]?0:1},C=MR(r,wb()),M=DR(i,wb()),P=PR(i,wb()),I=Lo.map(H=>({element:H,score:Math.round(u[H]*10)/10,via:tfe(H,C,M,P),reasons:(d.get(H)??[]).slice(),tenGodHints:T[H]})).sort((H,B)=>{const q=j(H.element),X=j(B.element);return q!==X?q-X:B.score!==H.score?B.score-H.score:H.element.localeCompare(B.element)}),z=nfe(l,C,M,P),K={:0,:0,:0,:0,:0},G=t?t.reduce((H,B)=>(H[B.name]=B.value,H),{...K}):void 0;return{chosenType:z,ordered:I,debug:{band:l,overallPct:o,elementScore:i,tenGodTotals:G,monthBranch:r??void 0}}}function tfe(e,t,n,r){const i=[];return(t[e]??0)>0&&i.push(""),(n[e]??0)>0&&i.push(""),(r[e]??0)>0&&i.push(""),i.length===0&&i.push(""),i}function nfe(e,t,n,r){if(["","","",""].includes(e))return"";const a=d=>Object.values(d).reduce((h,m)=>h+m,0),o=a(t),l=a(n),u=a(r);return o>Math.max(l,u)?"":l>=u?"":""}function RR(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.round(l));let a=100-r.reduce((l,u)=>l+u,0);const o=n.map((l,u)=>({i:u,f:l-Math.round(l)})).sort((l,u)=>u.f-l.f);for(let l=0;l<o.length&&a>0;l++)r[o[l].i]+=1,a-=1;return r}const Kd=["","","","",""],Vn={threeHarmony:20,halfStrong:12,halfMedium:8,halfWeak:4,monthBranch:10,maxPerElement:30},rfe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function R9(e){return rfe[e]??e}function L9(e){const t=(e||"").trim().slice(-1),n=R9(t);return"".includes(n)?"":"".includes(n)?"":"".includes(n)?"":"".includes(n)?"":"".includes(n)?"":null}function I9(e){const t=e.map(i=>i&&i.length>1?R9(i[1]):""),n=new Set(t),r=[];return n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:Vn.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:Vn.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:Vn.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",score:Vn.threeHarmony}),n.has("")&&n.has("")?r.push({element:"",score:Vn.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:Vn.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:Vn.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:Vn.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:Vn.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:Vn.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:Vn.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:Vn.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:Vn.halfWeak}),n.has("")&&n.has("")?r.push({element:"",score:Vn.halfStrong}):n.has("")&&n.has("")?r.push({element:"",score:Vn.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",score:Vn.halfWeak}),r}function ife(e,t){const n=[Re(e[0]??""),Re(e[1]??""),Re(e[2]??""),Re(e[3]??"")],{elementScoreRaw:r}=tv({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),i=Kd.map(y=>r[y]??0),a=RR(i),o={:0,:0,:0,:0,:0};Kd.forEach((y,k)=>{o[y]=a[k]});const l=I9(n),u=L9(n[1]),d={:0,:0,:0,:0,:0};for(const y of l)d[y.element]+=y.score;u&&(d[u]+=Vn.monthBranch);for(const y of Kd)o[y]=(o[y]??0)+Math.min(Vn.maxPerElement,d[y]??0);const h=Kd.map(y=>o[y]??0),m=RR(h),b={:0,:0,:0,:0,:0};return Kd.forEach((y,k)=>{b[y]=m[k]}),b}function afe(e,t){const n=[Re(e[0]??""),Re(e[1]??""),Re(e[2]??""),Re(e[3]??"")],{elementScoreRaw:r}=tv({pillars:n,criteriaMode:"modern",useHarmonyOverlay:!0,luck:void 0}),i=I9(n),a=L9(n[1]),o={...r},l={:0,:0,:0,:0,:0};for(const u of i)l[u.element]+=u.score;a&&(l[a]+=Vn.monthBranch);for(const u of Kd)o[u]=(o[u]??0)+Math.min(Vn.maxPerElement,l[u]??0);return{:o.??0,:o.??0,:o.??0,:o.??0,:o.??0}}function $9(e,t){const n=ife(e,t),r=Re(e[2]??"").charAt(0),a={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[r];if(!a)return 0;const o={:"",:"",:"",:"",:""},l=n[a]??0,u=n[o[a]]??0;return l+u*.7}const wf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},B9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_b={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ofe=["","","","",""];function LR(e){return ofe.includes(e)}const sfe={:"",:"",:"",:"",:""},lfe={:"",:"",:"",:"",:""},cfe={:"",:"",:"",:"",:""},ufe={:"",:"",:"",:"",:""};function hp(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Jn[t])return Jn[t];if(["","","","","","","","","","","",""].includes(t))return _b[t]??null;if(ar[t])return _b[ar[t]]??null;const n=t.charAt(0);return Jn[n]?Jn[n]:["","","","","","","","","",""].includes(n)?n:ar[n]?_b[ar[n]]??null:["","","","","","","","","","","",""].includes(n)?_b[n]??null:null}function dfe(e,t){const n=wf[e],r=wf[t];if(!n||!r)return"";let i;r===n?i="":r===sfe[n]?i="":r===lfe[n]?i="":r===cfe[n]?i="":r===ufe[n]?i="":i="";const a=LR(e)===LR(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function ffe(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function uf(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function hfe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e??{})){const i=wf[hp(n)];i&&r>0&&(t[i]+=r)}return uf(t)}function mfe(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=hp(r);if(!a)continue;const o=dfe(t,a);n[o]+=i}return n}function pfe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=ffe(n);t[i]+=r}return uf(t)}function IR(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Re(n??"");return i||(r<=2?"--":"")})}function z9(e,t){const n=!!t?.includeBranches,r={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const a=wf[i.charAt(0)];if(a&&(r[a]=!0),n){const o=B9[i.charAt(1)];o&&(r[o]=!0)}}return r}function U9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const r=wf[n.charAt(0)],i=B9[n.charAt(1)];r&&(t[r]+=10),i&&(t[i]+=6)}return t}function hS(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const gfe=["","","","","","","","","",""];function bfe(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=hp(n);i&&(t[i]=(t[i]??0)+r)}return t}function $R(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of gfe){const i=wf[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}const yfe={natal:50,dae:30,se:20,wol:7,il:3};function vfe(e){const t={};for(const{kind:r,bare:i}of e){const a=yfe[r]??0;if(a<=0)continue;const o=uf(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function xfe(e){if(!e)return[];const t=hp(e.charAt(0)),n=hp(e.charAt(1));return[t,n].filter(Boolean)}function Sb(e){const t=xfe(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}const $s=["","","","",""],pr={threeHarmony:20,halfStrong:12,halfMedium:8,halfWeak:4,monthBranch:10,maxPerElement:30};function wfe(e){const t=(e??"").trim(),n=t?t[t.length-1]:"";return["","",""].includes(n)?"WINTER":["","",""].includes(n)?"SUMMER":["","",""].includes(n)?"SPRING":["","",""].includes(n)?"AUTUMN":"UNKNOWN"}const _fe=30;function F9(e){return e<=40?"cold":e>=60?"hot":"mild"}function Sfe(e){return e>=60?"wet":e<=40?"dry":"normal"}function ov(e){return Math.abs(e-50)>=_fe}function kfe(e,t){if(!t)return e==="WINTER"||e==="SUMMER"?.85:.55;const n=ov(t.hanNanPct),r=ov(t.joSeupPct);if(!(n||r))return e==="WINTER"||e==="SUMMER"?.55:.45;const a=F9(t.hanNanPct),o=e==="WINTER"?"cold":e==="SUMMER"?"hot":"mild",l=a==="mild"||o==="mild"||a===o;return e==="WINTER"||e==="SUMMER"?l?1.5:.8:.65}function Efe(e,t){const n=$s.filter(u=>t[u]),r=n.map(u=>e[u]??0),i=r.length?Math.max(...r):0,a=r.length?Math.min(...r):0,o=Math.round(i-a),l=n.length>=3&&o<=12;return{presentEls:n,spread:o,balancedPresent:l}}function LT(e){return/||wood/i.test(e)?"":/||fire/i.test(e)?"":/||earth/i.test(e)?"":/||metal/i.test(e)?"":/||water/i.test(e)?"":null}function mp(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function mS(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function sv(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function jfe(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function Tfe(e){const n=[["",""],["",""],["",""],["",""],["",""]],r=[];for(const[i,a]of n){const o=e[i]??0,l=e[a]??0;if(o<24||l<24||Math.min(o,l)/Math.max(o,l)<.6)continue;let d=null,h=null;if(sv(i)===a)d=i,h=a;else if(sv(a)===i)d=a,h=i;else continue;const m=mp(d),b=`${d}()${h}    ${m}( )`;r.push({a:i,b:a,controller:d,controlled:h,mediator:m,reason:b})}return r}function IT(e,t){const n=Math.max(.1,1-t/120);return Math.max(0,Math.round(e*n))}function mm(e,t,n){return n?e.map(r=>!r.elNorm||t[r.elNorm]?r:{...r,score:0,reasons:[...r.reasons,":    0"]}):e}function pm(e,t,n){const r=i=>i?t[i]:!1;return[...e].sort((i,a)=>{if(n){const o=r(i.elNorm)?1:0,l=r(a.elNorm)?1:0;if(o!==l)return l-o}return a.score!==i.score?a.score-i.score:(i.elNorm??i.element).localeCompare(a.elNorm??a.element,"ko")})}function Afe(e,t,n){const r=(e??"").trim(),i=r?r[r.length-1]:"",a=new Set(["","",""]),o=new Set(["","",""]),l=new Set(["","",""]),u=new Set(["","",""]),d=Object.fromEntries($s.map(w=>[w,0])),h=Object.fromEntries($s.map(w=>[w,[]])),m=(w,_,T)=>{d[w]+=_,h[w].push(T)},b=w=>{for(const _ of w)m(_.el,_.base,_.why)};let y=null,k=!1;if(n){const w=ov(n.hanNanPct),_=ov(n.joSeupPct);if(w||_){k=!0;const T=F9(n.hanNanPct),N=Sfe(n.joSeupPct),j=Math.abs(n.hanNanPct-50),C=Math.abs(n.joSeupPct-50),M=Math.min(1,j/35),P=Math.min(1,C/35),I=Math.round(100-n.hanNanPct),z=Math.round(n.hanNanPct),K=Math.round(n.joSeupPct),G=Math.round(100-n.joSeupPct);if(w){const H=Math.round(80+50*M),B=Math.round(40+25*M);T==="cold"?(m("",H,`( ${I}%):   -> `),m("",B," :   -> "),y=""):T==="hot"&&(m("",H,`( ${z}%):   -> `),m("",B," :  -> "),y="")}if(_){const H=Math.round(55+35*P),B=Math.round(25+20*P);N==="wet"?(m("",H,`( ${K}%):   -> `),y!==""&&m("",B," :   -> ")):N==="dry"&&(y!==""&&m("",H,`( ${G}%):   -> `),m("",B," :  -> "))}}}if(!k){let w=[];a.has(i)?w=[{el:"",base:110,why:"():     "},{el:"",base:60,why:" :      "}]:o.has(i)?w=[{el:"",base:110,why:"():     "},{el:"",base:70,why:" :   () "}]:l.has(i)?w=[{el:"",base:90,why:"():     /"},{el:"",base:55,why:" : ()    "}]:u.has(i)?w=[{el:"",base:85,why:"():     "},{el:"",base:75,why:"():     "}]:w=[{el:"",base:60,why:":       ()"},{el:"",base:60,why:":       ()"}],b(w)}return $s.filter(w=>d[w]>0).map(w=>({element:w,elNorm:w,score:IT(d[w],t[w]??0),reasons:[...h[w],` ${w}  ${Math.round(t[w]??0)}%`]}))}function Nfe(e){const t=Tfe(e);if(!t.length)return{applicable:!1,items:[],note:"       "};const n=new Map;for(const i of t){const a=e[i.a]??0,o=e[i.b]??0,l=Math.min(a,o),u=95+Math.round(l/2),d=n.get(i.mediator),h=[i.reason,`(${i.a} ${Math.round(a)}%  ${i.b} ${Math.round(o)}%)`,` : ${i.controller}${i.mediator}${i.controlled}`];d?n.set(i.mediator,{score:Math.max(d.score,u),reasons:[...d.reasons,...h]}):n.set(i.mediator,{score:u,reasons:h})}return{applicable:!0,items:Array.from(n.entries()).map(([i,a])=>({element:i,elNorm:i,score:IT(a.score,e[i]??0),reasons:a.reasons})),note:"////       ( )  "}}function Ofe(e,t){let n="",r=e.??0;for(const d of $s){const h=e[d]??0;h<r&&(r=h,n=d)}const i=$s.some(d=>!t[d]);if(!(i||r<=8))return{applicable:!1,items:[],note:"    ( )  "};const l=IT((i?85:70)+Math.round((8-Math.min(8,r))*6),e[n]??0);return{applicable:!0,items:[{element:n,elNorm:n,score:l,reasons:[i?"():  /  ":"():      ",`  ${n} = ${Math.round(r)}%`]}],note:" ()  ( 8% )      "}}function Cfe(e){let t="",n=-1;for(const r of $s){const i=e[r]??0;i>n&&(n=i,t=r)}return{el:t,pct:n}}function Mfe(e){const t=e[2]?.charAt(0);return t?"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":null:null}function H9(e){const t=(e||"").trim().slice(-1);return"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":"".includes(t)?"":null}function Dfe(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??e}function G9(e){const t=e.map(i=>i&&i.length>1?Dfe(i[1]):""),n=new Set(t),r=[];return n.has("")&&n.has("")&&n.has("")&&r.push({element:"",name:" ",score:pr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",name:" ",score:pr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",name:" ",score:pr.threeHarmony}),n.has("")&&n.has("")&&n.has("")&&r.push({element:"",name:" ",score:pr.threeHarmony}),n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",name:" ()",score:pr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",name:" ()",score:pr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",name:" ()",score:pr.halfWeak}),n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfStrong}):n.has("")&&n.has("")?r.push({element:"",name:" ()",score:pr.halfMedium}):n.has("")&&n.has("")&&r.push({element:"",name:" ()",score:pr.halfWeak}),r}function Pfe(e){const t=Object.values(e).reduce((r,i)=>r+i,0);if(t<=.001)return e;const n={...e};for(const r of $s)n[r]=n[r]/t*100;return n}function Y9(e,t,n){const r=H9(t),i=G9(n),a={...e},o={:0,:0,:0,:0,:0};for(const l of i)o[l.element]+=l.score;r&&(o[r]+=pr.monthBranch);for(const l of $s)a[l]=(a[l]??0)+Math.min(pr.maxPerElement,o[l]);return Pfe(a)}function Rfe(e,t){return e===t?"":mp(e)===t?"":sv(e)===t?"":sv(t)===e?"":mp(t)===e?"":""}function $T(e){const{eokbuList:t,monthGz:n,elemPct:r,presentMap:i,demoteAbsent:a,gyeokgukList:o,pillars:l}=e,u=jce(l),d=Mfe(l),h=wfe(n),m=G9(l),b=Y9(r,n,l),y=[];for(const pe of m)y.push(pe.name);const k=H9(n);k&&y.push(`(${k}) `);const w=Cfe(b),_=w.el,T=w.pct;let N=[...t],j="1.  /()  ",C=!1;if(d){const pe=b[d]??0,te=b[mS(d)]??0;C=pe+te>=45}if(T>=30&&d){let pe=null,te="";switch(Rfe(d,_)){case"":if(d===""&&h==="WINTER")pe="",te=` (${d})     ()  `;else{const xe=mp(d);pe=xe,te=`(${d})  (${xe}) `}break;case"":pe=jfe(_),te=`(${_})  (${pe}) ()`;break;case"":pe=mS(d),te=`(${_})  (${pe})  ()`;break;case"":pe=d,te=`(${_})  (${pe})  ()`;break;case"":C?(pe=mp(d),te=`(${_})  (${pe}) ()`):(pe=mS(d),te=`(${_})  (${pe}) ()`);break}if(pe){const xe=y.length>0?`[${y.join(", ")}] `:" ";N=[{element:pe,elNorm:pe,score:150,reasons:[te,xe]},...t.filter(ue=>ue.elNorm!==pe)],j=` : ${te}`}}const M=pm(mm(N,i,a),i,a),P=pm(mm(Afe(n,r,u),i,a),i,a),I=Efe(r,i),z=kfe(h,u),K=1.25,G=Nfe(r),H=pm(mm(G.items,i,a),i,a),B=Ofe(r,i),q=pm(mm(B.items,i,a),i,a),X=Array.isArray(o)?o:[],V=X.length>0,F=pm(mm(X,i,a),i,a),Z=w.pct>=60,Q=Z?1.6:.55,le=Z?"     ( )  ":V?"/     ":"  ",se=pe=>Math.max(0,...pe.map(te=>Number.isFinite(te.score)?te.score:0)),re=[{kind:"EOKBU",title:"",marker:"",priority:1,weight:K,applicable:M.length>0,note:j,candidates:M},{kind:"JOHU",title:"",marker:"",priority:2,weight:z,applicable:!0,note:h==="WINTER"?"2. ()   ":h==="SUMMER"?"2. ()   ":"2.    ,   ",candidates:P},{kind:"TONGGWAN",title:"",marker:"",priority:3,weight:.7,applicable:G.applicable,note:G.note,candidates:H},{kind:"BYEONGYAK",title:"",marker:"",priority:3,weight:.7,applicable:B.applicable,note:B.note,candidates:q},{kind:"GYEOKGUK",title:"",marker:"",priority:4,weight:Q,applicable:V,note:le,candidates:F}].map(pe=>{const te=pe.candidates.map(Ee=>{if(!pe.applicable)return{...Ee,finalScore:0};let Me=Ee.score*pe.weight;if(pe.kind==="EOKBU")if(I.balancedPresent)Me*=.75;else{const Ie=Math.min(35,Math.round(I.spread*.9));Me+=Ie}return Ee.elNorm&&!i[Ee.elNorm]&&(Me*=.25),Me=Math.min(99,Me*.55),{...Ee,finalScore:Math.round(Me)}});te.sort((Ee,Me)=>(Me.finalScore??0)-(Ee.finalScore??0));const xe=te[0]?.finalScore??0,ue=se(te);return{...pe,maxScore:ue,fitScore:xe,finalScore:xe,candidates:te}}).sort((pe,te)=>pe.priority-te.priority),ee=[...re].filter(pe=>pe.applicable&&pe.candidates.length>0).sort((pe,te)=>te.fitScore!==pe.fitScore?te.fitScore-pe.fitScore:pe.priority-te.priority)[0],he=Math.max(0,...re.map(pe=>pe.fitScore)),J=ee?.kind??null,ae=re.map(pe=>{if(!J)return pe;if(pe.kind===J){const te=pe.fitScore<he?he+1:pe.fitScore;return{...pe,finalScore:te}}return{...pe,finalScore:pe.fitScore}}),me=J?ae.find(pe=>pe.kind===J)??null:null;return{bestKind:J,best:me,groups:ae,adjustedElemPct:b}}const Lfe={:"",:"",:"",:"",:""},Ife={:"",:"",:"",:"",:""},$fe={:"",:"",:"",:"",:""},Bfe={:"",:"",:"",:"",:""};function pS(e){switch(e){case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";default:return null}}function zfe(e){const t=(e||"").trim();return!t||t==="-"?null:t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":null}function Ufe(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":""}function Ffe(e,t){switch(t){case"":return e;case"":return Lfe[e];case"":return $fe[e];case"":return Bfe[e];case"":return Ife[e]}}function Hfe(e,t){const n=new Map,r=(u,d,h)=>{if(!u)return;const m=n.get(u);if(!m){n.set(u,{element:u,score:d,reasons:[h]});return}m.score=Math.max(m.score,d),m.reasons=m.reasons.includes(h)?m.reasons:[...m.reasons,h]},i=pS(t),a=zfe(e.);if(i&&a){const u=Ufe(a),d=Ffe(i,u);r(d,92,` ${e.}  ${u} (${d})`)}const o=pS(e.);o&&r(o,86,` ${e.}  (${o})`);const l=pS(e.);return l&&r(l,70,` ${e.}  (${l})`),Array.from(n.values()).sort((u,d)=>d.score-u.score)}const gm=e=>e&&e.length>=1?e.charAt(0):"",kb=e=>e&&e.length>=2?e.charAt(1):"",Gfe={:["",""],:["",""],:["",""],:["",""],:["",""]};function Yfe(e){const t=String(e??"");if(!/^\d{8}$/.test(t))return new Date;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i,12,0,0,0);return Number.isNaN(a.getTime())?new Date:a}function qfe({data:e,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:i,demoteAbsent:a}){const{date:o,yearGZ:l,monthGZ:u,dayGZ:d}=Kr(),h=S.useMemo(()=>Re(l),[l]),m=S.useMemo(()=>Re(u),[u]),b=S.useMemo(()=>Re(d),[d]),y=hc(e,e?.mingSikType),k=S.useMemo(()=>{if(!y?.length)return 0;const De=y.findIndex((ze,Ge)=>{const oe=y[Ge+1]?.at;return o>=ze.at&&(!oe||o<oe)});return De!==-1?De:o<y[0].at?0:y.length-1},[y,o]),w=S.useMemo(()=>{const De=r??y?.[k]?.gz??"";return Re(De)||null},[r,y,k]),{manualHour:_,usePrevDay:T}=Ei(),N=e.mingSikType??"/",j=S.useMemo(()=>IR(t),[t]),C=S.useMemo(()=>IR(n),[n]),M=S.useMemo(()=>{const De=[...j];return(!De[3]||De[3]===""||De[3]==="--")&&_&&(De[3]=_.stem+_.branch),De},[j,_]),P=S.useMemo(()=>{const De=[...C];return(!De[3]||De[3]===""||De[3]==="--")&&_&&(De[3]=_.stem+_.branch),De},[C,_]),I=S.useMemo(()=>{const De=Number(e.birthDay?.slice(0,4)),ze=Number(e.birthDay?.slice(4,6)),Ge=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(De)||!Number.isFinite(ze)||!Number.isFinite(Ge))return null;const oe=new Date(De,ze-1,Ge,12,0,0,0),Ce=Re(ut(oe)||""),Ue=Re(Ot(oe)||""),rt=Re(dt(oe,N)||"");return[Ce,Ue,rt,""]},[e.birthDay,N]),z=hS(M),K=hS(P),H=(e.calendarType==="lunar"?"lunar":"solar")==="lunar"?K?"lunar":z?"solar":"lunar":z?"solar":K?"lunar":"solar",B=S.useMemo(()=>{const ze=[...H==="lunar"?K?P:z?M:I??["","","",""]:z?M:K?P:I??["","","",""]];if((!ze[3]||ze[3]===""||ze[3]==="--")&&_&&(ze[3]=_.stem+_.branch),ze[3]==="--"&&(ze[3]=""),!T)return ze;const Ge=ta(ze[2]||"",-1);return[ze[0],ze[1],Ge,ze[3]]},[H,z,K,M,P,I,_,T]),q=S.useMemo(()=>gm(B[2]??""),[B]),X=S.useMemo(()=>kb(B[1]??""),[B]),V=S.useMemo(()=>Yfe(e.birthDay),[e.birthDay]),F=S.useMemo(()=>_?_.stem+_.branch:B[3]||"",[_,B]),Z=S.useMemo(()=>({dae:i!==""?w??null:null,se:i===""||i===""||i===""?h??null:null,wol:i===""||i===""?m??null:null,il:i===""?b??null:null}),[i,w,h,m,b]),Q=S.useMemo(()=>Wp({natal:B,tab:i,chain:Z,hourKey:F}),[B,i,Z,F]),le=S.useMemo(()=>{if(!Q)return null;const De=bfe(Q.perStemElementScaled),ze=Z.dae?Sb(Z.dae):{},Ge=Z.se?Sb(Z.se):{},oe=Z.wol?Sb(Z.wol):{},Ce=Z.il?Sb(Z.il):{},Ue=vfe([{kind:"natal",bare:De},{kind:"dae",bare:ze},{kind:"se",bare:Ge},{kind:"wol",bare:oe},{kind:"il",bare:Ce}]),rt=uf(Ue),xt=$R(rt),st=mfe(Ue,Q.dayStem),Oe=pfe(st),Fe=hfe(Ue);return{perStemAugBare:Ue,perStemAugFull:xt,elemPct100:Fe,totalsMain:Oe,totalsSub:st}},[Q,Z]),se=S.useMemo(()=>z9(B,{includeBranches:!0}),[B]),W=S.useMemo(()=>["","","","",""].some(De=>!se[De]),[se]),re=le?.elemPct100??Q?.elementPercent100??U9(B),ee=S.useMemo(()=>{if(!Q||!le)return[];const De=o2(Q.dayStem);return Object.entries(le.totalsMain).map(([ze,Ge])=>({name:ze,value:Ge,color:De[ze]}))},[Q,le]),he=le?.elemPct100??{:0,:0,:0,:0,:0},J=le?.totalsSub??Q?.perTenGodSub??null,ae=S.useMemo(()=>[i,w??"",h??"",m??"",b??"",o?.toISOString?.()??"",F].join("|"),[i,w,h,m,b,o,F]),me=typeof xf=="function"?xf(B,Q?.totals):null,pe=S.useMemo(()=>(me?.ordered??[]).map(ze=>{const Ge=ze.element??"",oe=/||wood/i.test(Ge)?"":/||fire/i.test(Ge)?"":/||earth/i.test(Ge)?"":/||metal/i.test(Ge)?"":/||water/i.test(Ge)?"":null,Ce=typeof ze.score=="number"?ze.score:oe?re[oe]??0:0,Ue=Array.isArray(ze.reasons)?ze.reasons:[];return{element:Ge,elNorm:oe,score:Ce,reasons:Ue}}),[me,re]),te=S.useMemo(()=>pe.map(De=>({element:De.element,elNorm:De.elNorm,score:De.score,reasons:De.reasons})),[pe]),je=S.useMemo(()=>{if(!q||!X)return[];const[De,ze,Ge,oe]=B,Ce=[gm(De),gm(ze),gm(Ge),gm(oe)].filter(Boolean),Ue=[kb(De),kb(Ge),kb(oe)].filter(Boolean),rt=m9({dayStem:q,monthBranch:X,date:V,pillars:B,emittedStems:Ce,otherBranches:Ue}),xt=Hfe(rt,q),st=Oe=>/||wood/i.test(Oe)?"":/||fire/i.test(Oe)?"":/||earth/i.test(Oe)?"":/||metal/i.test(Oe)?"":/||water/i.test(Oe)?"":null;return(xt??[]).map(Oe=>({element:Oe.element,elNorm:st(Oe.element),score:Number.isFinite(Oe.score)?Oe.score:0,reasons:Array.isArray(Oe.reasons)?Oe.reasons:[]}))},[B,q,X,V]),xe=S.useMemo(()=>{const De=B[1]||"";return $T({eokbuList:te,monthGz:De,elemPct:re,presentMap:se,demoteAbsent:a,pillars:B,gyeokgukList:je})},[B,te,re,se,a,je]),ue=S.useMemo(()=>{const De=xe.adjustedElemPct;return De?uf({:De.??0,:De.??0,:De.??0,:De.??0,:De.??0}):null},[xe.adjustedElemPct]),Ee=S.useMemo(()=>{if(!q||!ue)return ee;const De={:0,:0,:0,:0,:0};for(const oe of["","","","",""]){const Ce=Ide(q,oe);De[Ce]+=ue[oe]??0}const ze=uf(De),Ge=o2(q);return Object.entries(ze).map(([oe,Ce])=>({name:oe,value:Ce,color:Ge[oe]}))},[ue,ee,q]),Me=S.useMemo(()=>{const De=le?.perStemAugFull;if(!De||!ue)return De;const ze=De,Ge={};for(const oe of["","","","",""]){const[Ce,Ue]=Gfe[oe],rt=`${Ce}${oe}`,xt=`${Ue}${oe}`,st=Math.max(0,Number(ze[rt]??0)),Oe=Math.max(0,Number(ze[xt]??0)),Fe=st+Oe,We=Math.max(0,Number(ue[oe]??0));if(We<=0){Ge[Ce]=0,Ge[Ue]=0;continue}if(Fe<=0){Ge[Ce]=Math.round(We),Ge[Ue]=0;continue}const bt=st/Fe*We,At=Oe/Fe*We,Nt=Math.floor(bt),Mt=Math.floor(At);let Kt=Math.round(We)-(Nt+Mt),rn=Nt,si=Mt;Kt>0&&(bt-Nt>=At-Mt?rn+=1:si+=1,Kt-=1),Kt>0&&(rn+=Kt),Ge[Ce]=rn,Ge[Ue]=si}return $R(Ge)},[ue,le?.perStemAugFull]),Ie=S.useMemo(()=>{const De=J?Object.entries(J).sort(([Ge],[oe])=>Ge.localeCompare(oe)).map(([Ge,oe])=>`${Ge}:${oe}`).join(","):"none",ze=Ee.map(Ge=>`${Ge.name}:${Ge.value}`).join(",");return`${ae}||${B.join("")}||${ze}||${De}`},[ae,B,Ee,J]),Ke=S.useMemo(()=>{const De=xe.best;return De?.candidates?.length?De.candidates.map(ze=>({element:ze.element,elNorm:ze.elNorm,score:ze.score,reasons:ze.reasons})):pe},[xe,pe]),mt=S.useMemo(()=>Math.max(0,...Ke.map(De=>Number.isFinite(De.score)?De.score:0)),[Ke]),pt=S.useMemo(()=>$9(B,{criteriaMode:"modern",useHarmonyOverlay:!0}),[B]);return{seGz:h,wolGz:m,ilGz:b,daewoonGz:w,activePillars:B,chain:Z,unified:Q,overlay:le,chartData:Ee,pentagonPerStemScaled:Me,elementPct:he,tenSubTotals100:J,hourKeyForUi:F,revKey:Ie,yongshinMulti:xe,yongshinRecommend:xe,yongshinList:Ke,maxScore:mt,hasAbsent:W,dayElementPercent:pt,isValidActive:hS(B)}}function Kfe(e){if(typeof e!="object"||e===null)return!1;const t=e,n=t.at,r=t.gz;return n instanceof Date&&!Number.isNaN(n.getTime())&&typeof r=="string"}function Wfe(e){const t=new Date(e,1,15,12,0,0,0);return Re(ut(t)||"")}function Vfe(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=LT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}const Zfe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function lv(e){return Zfe[e]??null}function Xfe(e,t){const n={:!1,:!1,:!1,:!1,:!1},r=PT(t);for(const i of e){const a=i?.charAt(0)??"",o=i?.charAt(1)??"",l=lv(a);if(l&&(n[l]=!0),DT(o)){const u=r[o],d=[u.,u.,u.].filter(Boolean);for(const h of d){const m=lv(h.stem);m&&h.w>0&&(n[m]=!0)}}}return n}function Jfe(e,t){const n=PT(t),r={:0,:0,:0,:0,:0};for(const o of e){const l=o?.charAt(0)??"",u=o?.charAt(1)??"",d=lv(l);if(d&&(r[d]+=50),DT(u)){const h=n[u],m=[h.,h.,h.].filter(Boolean),b=m.reduce((k,w)=>k+(Number.isFinite(w.w)?w.w:0),0),y=b>0?b:1;for(const k of m){const w=lv(k.stem);w&&(r[w]+=50*k.w/y)}}}const i=r.+r.+r.+r.+r.,a=i>0?i:1;return{:r./a*100,:r./a*100,:r./a*100,:r./a*100,:r./a*100}}function Qfe(e,t,n){return e||Jfe(t,n)}function ehe(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,gyeokgukList:a,hiddenStemMode:o}=e,l=S.useMemo(()=>d9(o),[o]),u=hc(t,t?.mingSikType),d=S.useMemo(()=>Array.isArray(u)?u.filter(Kfe).slice(0,10):[],[u]),[h,m]=S.useState(0),[b,y]=S.useState(0),k=Math.max(0,Math.min(d.length-1,h)),w=d[k]??null,_=S.useMemo(()=>{if(!w)return[];const K=w.at.getFullYear();return Array.from({length:10},(G,H)=>{const B=K+H;return{year:B,gz:Wfe(B)}})},[w]),T=b==null?null:Math.max(0,Math.min(_.length-1,b)),N=T==null?null:_[T]??null,j=S.useMemo(()=>Xfe(n,l),[n,l]),C=S.useMemo(()=>["","","","",""].some(K=>!j[K]),[j]),M=S.useMemo(()=>{const K=w?Re(w.gz):null,G=N?Re(N.gz):null;return{dae:K||null,se:G||null,wol:null,il:null}},[w,N]),P=S.useMemo(()=>M.se?"":"",[M.se]),I=S.useMemo(()=>{const K=w?`${w.at.getFullYear()}~ ${Re(w.gz)}`:" -",G=N?` / ${N.year} ${Re(N.gz)}`:"";return`${K}${G}`},[w,N]),z=S.useMemo(()=>{if(!w)return null;const K=Wp({natal:n,tab:P,chain:M,hourKey:r}),G=Qfe(K?.elementPercent100,n,l),H=typeof xf=="function"?xf(n,K?.totals):null,B=Vfe(H,G);return $T({eokbuList:B,monthGz:n[1]||"",elemPct:G,presentMap:j,demoteAbsent:i,pillars:n,gyeokgukList:Array.isArray(a)?a:null})},[w,n,P,M,r,j,i,a,l]);return{daeIndex:k,setDaeIndex:m,seIndex:T,setSeIndex:y,dae10:d,se10:_,chain:M,tab:P,label:I,recommend:z,presentMap:j,hasAbsent:C}}const the={EOKBU:"",JOHU:"",TONGGWAN:"",BYEONGYAK:"",GYEOKGUK:""};function s2(e){return e?the[e]??e:""}function nhe(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.at instanceof Date&&!Number.isNaN(t.at.getTime())&&typeof t.gz=="string"}function rhe(e){const t=new Date(e,1,15,12,0,0,0);return Re(ut(t)||"")}function gS(e){const t=e?.best??null,n=t?.candidates?.[0]??null,r=t?.kind??null,i=n?.element??null,a=n?.elNorm??(n?.element?LT(n.element):null),o=typeof t?.fitScore=="number"?t.fitScore:0,l=r&&i?`${s2(r)}:${i}`:r?`${s2(r)}:`:"";return{kind:r,top1:i,top1ElNorm:a,fit:o,label:l,result:e}}function ihe(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=LT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}function BR(e){const{pillars:t,hourKey:n,chain:r,tab:i,demoteAbsent:a,presentMap:o,gyeokgukList:l}=e,u=Wp({natal:t,tab:i,chain:r,hourKey:n}),d=u?.elementPercent100??U9(t),h=typeof xf=="function"?xf(t,u?.totals):null,m=ihe(h,d);return $T({eokbuList:m,monthGz:t[1]||"",elemPct:d,presentMap:o,demoteAbsent:a,pillars:t,gyeokgukList:Array.isArray(l)?l:null})}function ahe(e){const t=[];for(const n of e){const r=t[t.length-1];if(!r){t.push({fromYear:n.year,toYear:n.year,snap:n.snap});continue}r.snap.label===n.snap.label?r.toYear=n.year:t.push({fromYear:n.year,toYear:n.year,snap:n.snap})}return t}const Io=({text:e,tone:t="base",onClick:n,title:r})=>{const i=t==="pick"?"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":t==="diff"?"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800 cursor-pointer":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700",a=g.jsx("span",{className:`inline-flex items-center text-[11px] px-2 py-0.5 rounded-full border whitespace-nowrap ${i}`,title:r,children:e});return n?g.jsx("button",{type:"button",className:"inline-flex",onClick:n,title:r,children:a}):a};function zR({snap:e}){const t=e.result?.best??null,n=t?.candidates?.slice(0,3)??[];return t?g.jsxs("div",{className:"mt-2 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Io,{text:`: ${s2(t.kind)}`,tone:"pick"}),g.jsx(Io,{text:` ${t.fitScore}`}),n[0]?.element?g.jsx(Io,{text:`1 ${n[0].element}`,tone:"diff"}):null]}),t.note?g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:t.note}):null,n.length?g.jsx("ul",{className:"mt-2 space-y-2",children:n.map((r,i)=>g.jsx("li",{className:"text-xs",children:g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Io,{text:`${i+1} ${r.element}`}),g.jsx(Io,{text:` ${r.score}`}),(r.reasons??[]).slice(0,4).map((a,o)=>g.jsx(Io,{text:a},o))]})},`${r.elNorm??r.element}-${i}`))}):g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:" "})]}):g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "})}function ohe(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:a}=e,o=S.useMemo(()=>z9(n,{includeBranches:!0}),[n]),l=hc(t,t?.mingSikType),u=S.useMemo(()=>Array.isArray(l)?l.filter(nhe).slice(0,10):[],[l]),d=S.useMemo(()=>gS(a),[a]),[h,m]=S.useState(null),b=w=>m(_=>_===w?null:w),y=S.useMemo(()=>u.map((w,_)=>{const T=Re(w.gz)||"",j=BR({pillars:n,hourKey:r,chain:{dae:T||null,se:null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),C=gS(j),M=w.at.getFullYear(),P=Array.from({length:10},(H,B)=>{const q=M+B,X=rhe(q),F=BR({pillars:n,hourKey:r,chain:{dae:T||null,se:X||null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),Z=gS(F);return{year:q,snap:Z}}),z=ahe(P).filter(H=>H.snap.top1ElNorm!==C.top1ElNorm),K=C.top1ElNorm!==d.top1ElNorm,G=K||z.length>0;return{idx:_,dae:w,daeLabel:`${M}~ ${T||""}`,daeSnap:C,daeDiffFromNatal:K,segDiffOnly:z,hasAnyChange:G}}).filter(w=>w.hasAnyChange),[u,n,r,i,o,d.top1ElNorm]),k=S.useMemo(()=>y.some(w=>w.hasAnyChange),[y]);return g.jsxs("div",{className:"rounded-xl bg-neutral-100 dark:bg-neutral-900 p-4 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-bold",children:"  "}),g.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:["(): ",d.label," /  ",d.fit]})]}),k?g.jsx("div",{className:"space-y-3",children:y.map(w=>{const _=`dae:${w.idx}`,T=h===_;return g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Io,{text:` ${w.daeLabel}`,tone:"base"}),g.jsx(Io,{text:` ${w.daeSnap.label} ( ${w.daeSnap.fit})`,tone:w.daeDiffFromNatal?"diff":"base",onClick:()=>b(_),title:" (top3) "}),w.daeDiffFromNatal?g.jsx(Io,{text:" ",tone:"diff"}):null]}),w.segDiffOnly.length?g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.segDiffOnly.map((N,j)=>{const C=`seg:${w.idx}:${j}`,M=h===C,P=N.fromYear===N.toYear?`${N.fromYear}`:`${N.fromYear}~${N.toYear}`;return g.jsxs("div",{className:"inline-flex flex-col",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx(Io,{text:` ${P}  ${N.snap.label} ( ${N.snap.fit})`,tone:"diff",onClick:()=>b(C),title:" (top3) "})}),M?g.jsx(zR,{snap:N.snap}):null]},C)})}):null,T?g.jsx(zR,{snap:w.daeSnap}):null]},_)})}):g.jsx("div",{className:"w-full p-3 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-400 text-center",children:"  ."})]})}const cv=({children:e,variant:t="neutral"})=>{const n={neutral:"bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-400",violet:"bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-300",amber:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",indigo:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"};return g.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold tracking-tight shadow-sm ${n[t]}`,children:e})};function she(e,t){if(t<=0)return"12%";const n=Math.round(e/t*100);return`${Math.max(5,Math.min(100,n))}%`}function lhe({pct:e}){const t=["","","","",""],n={:"bg-green-500",:"bg-red-500",:"bg-yellow-500",:"bg-gray-400",:"bg-black"};return g.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-100 dark:border-neutral-800",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:g.jsx("span",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider",children:"   (/ )"})}),g.jsx("div",{className:"flex h-2.5 w-full rounded-full overflow-hidden bg-neutral-100 dark:bg-neutral-800 shadow-inner",children:t.map(r=>{const i=e[r]||0;return i<=0?null:g.jsx("div",{className:`h-full ${n[r]} transition-all duration-500`,style:{width:`${i}%`}},r)})}),g.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5",children:t.map(r=>{const i=e[r]||0;return i<=0?null:g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${n[r]}`}),g.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 font-medium",children:[r," ",Math.round(i),"%"]})]},r)})})]})}function che({g:e,isBest:t,demoteAbsent:n,hasAbsent:r,onDemoteAbsentChange:i}){const a=e.candidates.slice(0,3);return g.jsxs("details",{open:t,className:`group rounded-2xl border transition-all duration-300 ${t?"border-violet-200 dark:border-violet-800 bg-white dark:bg-neutral-900 shadow-md":"border-neutral-200 dark:border-neutral-800 bg-neutral-50/50 dark:bg-neutral-900/50"}`,children:[g.jsx("summary",{className:"list-none cursor-pointer p-4 select-none",children:g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:`text-sm ${t?"font-black text-violet-600":"font-bold text-neutral-700 dark:text-neutral-300"}`,children:[e.marker," ",e.title]}),t&&g.jsx(cv,{variant:"violet",children:" "}),!e.applicable&&g.jsx(cv,{variant:"neutral",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] font-medium text-neutral-400",children:""}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:e.fitScore}),g.jsx("span",{className:"text-neutral-300 group-open:rotate-180 transition-transform",children:""})]})]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed whitespace-normal break-words pr-4",children:e.note})]})}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[a.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 py-2 text-center border-t border-neutral-100 dark:border-neutral-800",children:"  ."}):g.jsx("div",{className:"space-y-2 border-t border-neutral-100 dark:border-neutral-800 pt-3",children:a.map((o,l)=>g.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[40px]",children:[g.jsxs("span",{className:"text-[9px] font-bold text-neutral-400 uppercase",children:[l+1,"st"]}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:o.element})]}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-2 w-full rounded-full bg-neutral-200 dark:bg-neutral-700 overflow-hidden shadow-inner",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-700 ${t?"bg-gradient-to-r from-violet-400 to-indigo-500":"bg-neutral-400"}`,style:{width:she(o.score??0,e.maxScore)}})}),g.jsx("div",{className:"flex flex-wrap gap-1",children:(o.reasons??[]).slice(0,4).map((u,d)=>g.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-white dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400 border border-neutral-100 dark:border-neutral-600 shadow-sm",children:u},d))})]})]},`${e.kind}-${o.element}-${l}`))}),r&&g.jsxs("button",{type:"button",onClick:()=>i?.(!n),className:`px-2 py-1 rounded-full text-[10px] font-bold border transition cursor-pointer ${n?"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800":"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-800 dark:text-neutral-400 dark:border-neutral-700"}`,"aria-pressed":n,children:[" ",n?"ON":"OFF"]})]})]})}function uhe({result:e}){const n=e.groups.filter(l=>l.applicable).flatMap(l=>l.candidates.map(u=>({...u,groupTitle:l.title,groupKind:l.kind,sortScore:u.finalScore??0}))).sort((l,u)=>u.sortScore-l.sortScore).slice(0,3),r=n[0];let i="  ",a=0,o="";if(r){a=r.sortScore,o=e.best?.note??"";const l=n[1],u=l&&r.sortScore-l.sortScore<=5,d=l&&r.groupKind!==l.groupKind;if(u&&d){const h=r.groupTitle.replace("",""),m=l.groupTitle;i=`${h} & ${m}`}else i=r.groupTitle}return g.jsxs("div",{className:"relative overflow-hidden rounded-[2rem] border border-violet-200 dark:border-violet-800 p-6 bg-gradient-to-br from-violet-50 to-white dark:from-violet-950/20 dark:to-neutral-900 shadow-sm",children:[g.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-violet-100 dark:bg-violet-900/20 rounded-full blur-3xl"}),g.jsxs("div",{className:"relative z-10 flex flex-col gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(cv,{variant:"indigo",children:" "}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("span",{className:"text-[10px] text-neutral-400 font-bold uppercase",children:" "}),g.jsx("span",{className:"text-lg font-black text-violet-600 dark:text-violet-400",children:a})]})]}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("h4",{className:"text-2xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter",children:e.best?`${e.best.marker} ${i}`:"  "}),n.length>0&&g.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:n.map((l,u)=>g.jsxs("div",{className:"flex items-center gap-1.5 bg-white/60 dark:bg-black/20 px-2.5 py-1.5 rounded-lg border border-violet-100 dark:border-violet-900/30",children:[g.jsxs("span",{className:"text-[10px] font-bold text-neutral-500",children:[u+1,""]}),g.jsx("span",{className:"text-sm font-black text-indigo-600 dark:text-indigo-400",children:l.element}),g.jsxs("span",{className:"text-[9px] text-neutral-400",children:["(",l.groupTitle.replace("",""),")"]})]},`${l.element}-${u}`))})]}),o&&g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 leading-relaxed font-medium mt-1",children:o}),e.adjustedElemPct&&g.jsx(lhe,{pct:e.adjustedElemPct})]})]})}function dhe({recommend:e,data:t,pillars:n,hourKey:r,demoteAbsent:i,onDemoteAbsentChange:a,hasAbsent:o,hiddenStemMode:l}){const u=ehe({data:t,pillars:n,hourKey:r,demoteAbsent:i,hiddenStemMode:l}),d=o??u.hasAbsent;return g.jsxs("div",{className:"w-full p-6 rounded-[2.5rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-xl space-y-8",children:[g.jsxs("div",{className:"flex items-center justify-between px-2",children:[g.jsx("div",{className:"space-y-1",children:g.jsx("h2",{className:"text-xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter uppercase",children:" "})}),d&&g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx(cv,{variant:"amber",children:"  "}),i&&g.jsx("span",{className:"text-[9px] text-amber-500 font-bold mt-1",children:" "})]})]}),g.jsx(uhe,{result:e}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 px-2",children:[g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"}),g.jsx("span",{className:"text-[10px] font-black text-neutral-300 dark:text-neutral-600 uppercase tracking-widest",children:" "}),g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsx("div",{className:"grid gap-3",children:e.groups.map(h=>g.jsx(che,{g:h,isBest:e.bestKind===h.kind,demoteAbsent:i,hasAbsent:d,onDemoteAbsentChange:a},h.kind))})]}),g.jsx("div",{className:"pt-2",children:g.jsx(ohe,{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:e})})]})}const UR=e=>e<10?`0${e}`:`${e}`;function fhe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=ia(i,a,o),u=`${l.getFullYear()}${UR(l.getMonth()+1)}${UR(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}function hhe(e){if(typeof e!="number"&&typeof e!="string")return null;const t=String(e);if(!/^\d{8}$/.test(t))return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i);return Number.isNaN(a.getTime())?null:a}const mhe=["  ","   ","","",""];function phe(e){return e==="  "||e===""}function ghe({data:e,pillars:t,lunarPillars:n,daewoonGz:r}){const i=Jt(y=>y.settings),a=que(),o=fhe(e),l=hhe(o.birthDay)||void 0,u=vn(y=>y.canUseAdvancedReportNow()),d=qfe({data:o,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:a.blendTab,demoteAbsent:a.demoteAbsent}),h=S.useMemo(()=>"    100   ! (  )",[]),m=S.useMemo(()=>{if(!d.activePillars)return null;const y=afe(d.activePillars);return j9(d.activePillars,y)},[d.activePillars]),b=S.useMemo(()=>{if(!d.chartData)return;const y=d.chartData.filter(k=>["","",""].includes(k.name));return y.sort((k,w)=>w.value-k.value),y[0]?.name},[d.chartData]);return d.isValidActive?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsxs("div",{className:"flex flex-col items-center mb-8",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap mb-4",children:Yue.map(y=>{const k=a.blendTab===y;return g.jsx("button",{onClick:()=>a.setBlendTab(y),className:`
                  px-4 py-1.5 text-[11px] font-bold rounded-full transition-all duration-200 active:scale-95 cursor-pointer
                  ${k?"bg-amber-400 text-amber-950 shadow-[0_2px_10px_rgba(251,191,36,0.4)] border border-amber-300":"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 border border-transparent hover:bg-neutral-200 dark:hover:bg-neutral-700"}
                `,children:y},y)})}),g.jsxs("div",{className:"flex items-start gap-2 px-4 py-2 bg-amber-50/50 dark:bg-amber-900/10 rounded-xl border border-amber-100/50 dark:border-amber-900/20",children:[g.jsx("span",{className:"text-amber-500 text-[12px] mt-0.5",children:""}),g.jsxs("p",{className:"text-[10.5px] text-amber-700 dark:text-amber-400/80 leading-relaxed font-medium",children:["    ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "})," ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "}),"   ."]})]})]}),g.jsx("div",{className:"flex gap-2 mb-8 justify-center flex-wrap",children:mhe.map(y=>{const k=!u&&phe(y),w=a.bigTab===y;return g.jsxs("button",{title:k?h:void 0,onClick:()=>a.setBigTab(y),className:`
                relative px-4 py-2 text-sm font-bold rounded-2xl border transition-all duration-300 active:scale-95 flex items-center gap-1.5 cursor-pointer
                ${w?"bg-violet-600 text-white border-violet-500 shadow-[0_4px_12px_rgba(139,92,246,0.3)] z-10":"bg-white dark:bg-neutral-900 text-neutral-500 dark:text-neutral-400 border-neutral-200 dark:border-neutral-800 hover:border-violet-300 dark:hover:border-violet-700"}
                ${k?"opacity-70 bg-neutral-50 dark:bg-neutral-900/50":""}
              `,children:[g.jsx("span",{className:k?"mr-1":"",children:y}),k&&g.jsx("span",{className:"flex items-center justify-center w-4 h-4 bg-neutral-200 dark:bg-neutral-800 rounded-full text-[10px]",children:""}),w&&!k&&g.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]},y)})}),a.bigTab===""&&g.jsx(pce,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`harm-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(sce,{data:d.chartData,perStemElementScaled:d.overlay?.perStemAugFull,dayStem:d.activePillars[2]?.charAt(0)??null,yongshinTop:d.yongshinMulti?.best?.candidates?.[0]?.element??null,yongshinKind:d.yongshinMulti?.bestKind??null},`pentagon-${d.revKey}`),g.jsx(mce,{natal:d.activePillars,perStemElementScaled:d.overlay?.perStemAugFull}),g.jsx(uce,{value:d.dayElementPercent,deukFlags:m?.flags.,strongestOpponent:b}),g.jsx(Cce,{natal:d.activePillars})]}),a.bigTab===""&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:""}),"   .   100  !"]}),a.bigTab===""&&u&&g.jsx(dhe,{recommend:d.yongshinMulti,data:o,pillars:d.activePillars,hourKey:d.hourKeyForUi,demoteAbsent:a.demoteAbsent,onDemoteAbsentChange:a.setDemoteAbsent,hasAbsent:d.hasAbsent,hiddenStemMode:i.hiddenStemMode},`yongshin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab===""&&g.jsx(yce,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`shin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="  "&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:"  "}),"   .   100  !"]}),a.bigTab==="  "&&u&&g.jsx(Cue,{unified:d.unified,pillars:d.activePillars,tab:a.blendTab,mapping:i.hiddenStemMode,birthDate:l},`gyeok-${a.blendTab}-${d.hourKeyForUi}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const Eb=e=>typeof e=="string"&&e.length>=2,bhe=e=>!Array.isArray(e)||e.length!==4?!1:Eb(e[0])&&Eb(e[1])&&Eb(e[2])&&(e[3]===""||Eb(e[3]));function yhe({data:e}){const[t,n]=S.useState("un"),r=Qo(),i=vn(d=>d.canUseMyoViewerNow());S.useEffect(()=>{t==="myoun"&&!i&&n("un")},[t,i]);const a=S.useMemo(()=>{try{const d=Uf(e);return Go(d,r)}catch{return new Date}},[e,r]),o=S.useMemo(()=>Yo(e,a),[e,a]),l=!e.birthTime||e.birthTime==="",u=S.useMemo(()=>{try{const d=ut(o,e.birthPlace?.lon),h=Ot(o,e.birthPlace?.lon),m=dt(o,e.mingSikType),b=l?"":Ni(o,e.mingSikType);return[d,h,m,b]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),i?g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}):null,g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(Xle,{data:e}),t==="myoun"&&i&&g.jsx(tce,{data:e}),t==="report"&&g.jsx(ghe,{data:e,pillars:bhe(u)?u:[]})]})}function vhe({onOpenSidebar:e,onAddNew:t,onOpenCustom:n,isLoggedIn:r}){const i=jn(C=>C.list.length),a=vn(C=>C.canAddMyeongsik),[o,l]=S.useState(!1);S.useEffect(()=>{let C=!0;Le.auth.getSession().then(({data:P})=>{C&&l(!!P.session?.user)});const{data:M}=Le.auth.onAuthStateChange((P,I)=>{l(!!I?.user)});return()=>{C=!1,M.subscription.unsubscribe()}},[]);const u=r||o,d=a(i),h=!d.ok,m=h?d.message:"",b=()=>{if(h){_a(m||"   ");return}t()},y=()=>{if(h){_a(m||"   ");return}n()},k=()=>{Ms.getState().openWith("HEADER")},w=async()=>{const{error:C}=await Le.auth.signOut();if(C){console.error(C),_a("  ");return}_a(" ")},_="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors",T="bg-purple-600 hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 cursor-pointer",N="bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 cursor-pointer",j="bg-neutral-300 dark:bg-neutral-800 text-neutral-100 cursor-not-allowed opacity-80";return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(WX,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("button",{type:"button",onClick:b,"aria-label":" ",disabled:h,title:" ",className:`${_} ${h?j:T}`,children:[g.jsx(aJ,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),g.jsxs("button",{type:"button",onClick:y,"aria-label":"  ",disabled:h,title:"  ",className:`${_} ${h?j:N}`,children:[g.jsx(nJ,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),u?g.jsx("button",{type:"button",onClick:w,"aria-label":"",title:"",className:"inline-flex items-center gap-1 text-xs cursor-pointer text-neutral-700 dark:text-neutral-200 hover:text-purple-600 dark:hover:text-purple-400",children:g.jsx("ins",{children:""})}):g.jsx("button",{type:"button",onClick:k,"aria-label":"",title:"",className:"text-xs cursor-pointer",children:g.jsx("ins",{children:""})})]})]})})}function xhe(e){S.useEffect(()=>{const t=e??R$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");I$(t),e&&L$(e)},[e])}const q9=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function whe(e){return typeof e=="string"&&q9.includes(e)}function l2(e){const t=Array.isArray(e)?e.filter(whe):[],n=q9.filter(r=>!t.includes(r));return[...t,...n]}function c2(e){return{...Xl,...e,sectionOrder:l2(e.sectionOrder)}}function _he(e,t){return e.theme??t.theme??"dark"}function She({open:e,settings:t}){const n=S.useMemo(()=>l2(t.sectionOrder),[t.sectionOrder]),r=S.useMemo(()=>c2(t),[t]),[i,a]=S.useState(n),[o,l]=S.useState(r),[u,d]=S.useState(null),[h,m]=S.useState(!1);return S.useEffect(()=>{if(!e||h)return;const y=l2(t.sectionOrder);l({...c2(t),sectionOrder:y}),a(y),m(!1)},[e,t,h]),{order:i,setOrder:a,localSettings:o,setLocalSettings:l,updateSetting:(y,k)=>{l(w=>{const _={...w,[y]:k};return m(!0),_})},toastMessage:u,setToastMessage:d,dirty:h,setDirty:m}}function khe(){try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}}function K9(e){L$(e)}function Ehe({setSettings:e,saveToServer:t}){return{applyChanges:S.useCallback(async(r,i,a)=>{const o={...c2(r),sectionOrder:i};khe(),S.startTransition(()=>{e(o)}),o.theme&&K9(o.theme),a(),t(!0)},[e,t])}}function jhe({open:e,onClose:t}){const{settings:n,setSettings:r,saveToServer:i}=Jt(),a=She({open:e,settings:n}),o=Ehe({setSettings:r,saveToServer:i}),l=()=>a.setToastMessage(null),u=_he(a.localSettings,n);xhe(u),S.useEffect(()=>{K9(u)},[u]);const d=()=>{o.applyChanges(a.localSettings,a.order,()=>{a.setToastMessage(" "),a.setDirty(!1),t()})},h=b=>{const{destination:y,source:k}=b;if(!y||y.index===k.index)return;const w=Array.from(a.order),[_]=w.splice(k.index,1);w.splice(y.index,0,_),a.setOrder(w)},m=b=>{switch(b){case"theme":return g.jsx(Za,{title:"",children:g.jsx(The,{value:a.localSettings.theme??"dark",onChange:y=>a.updateSetting("theme",y)})});case"hiddenStem":return g.jsx(Za,{title:"  ",children:g.jsx(Bd,{value:a.localSettings.hiddenStem,onChange:y=>a.updateSetting("hiddenStem",y),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Za,{title:" ",children:g.jsx(Bd,{value:a.localSettings.hiddenStemMode,onChange:y=>a.updateSetting("hiddenStemMode",y),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Za,{title:"",children:g.jsx(Bd,{value:a.localSettings.sinsalMode,onChange:y=>a.updateSetting("sinsalMode",y),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Za,{title:"",children:g.jsx(Bd,{value:a.localSettings.sinsalBase,onChange:y=>a.updateSetting("sinsalBase",y),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Za,{title:" ",children:g.jsx(Mo,{label:" ",checked:!!a.localSettings.sinsalBloom,onChange:y=>a.updateSetting("sinsalBloom",y)})});case"exposure":return g.jsx(Za,{title:" ",children:g.jsx(Bd,{value:a.localSettings.exposure,onChange:y=>a.updateSetting("exposure",y),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Za,{title:" ",children:g.jsx(Bd,{value:a.localSettings.charType,onChange:y=>a.updateSetting("charType",y),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Za,{title:" ",children:g.jsx(Mo,{label:" ",checked:!!a.localSettings.thinEum,onChange:y=>a.updateSetting("thinEum",y)})});case"visibility":return g.jsx(Za,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Mo,{label:" ",checked:!!a.localSettings.showSipSin,onChange:y=>a.updateSetting("showSipSin",y)}),g.jsx(Mo,{label:" ",checked:!!a.localSettings.showSibiUnseong,onChange:y=>a.updateSetting("showSibiUnseong",y)}),g.jsx(Mo,{label:" ",checked:!!a.localSettings.showSibiSinsal,onChange:y=>a.updateSetting("showSibiSinsal",y)}),g.jsx(Mo,{label:" ",checked:!!a.localSettings.showNabeum,onChange:y=>a.updateSetting("showNabeum",y)}),g.jsx(Mo,{label:" BOX ",checked:!!a.localSettings.showEtcShinsal,onChange:y=>a.updateSetting("showEtcShinsal",y)}),g.jsx(Mo,{label:" BOX ",checked:!!a.localSettings.showRelationBox,onChange:y=>a.updateSetting("showRelationBox",y)}),g.jsx(Mo,{label:" BOX ",checked:!!a.localSettings.showPromptBox,onChange:y=>a.updateSetting("showPromptBox",y)})]})});case"difficultyMode":return g.jsx(Za,{title:" UP ver.",children:g.jsx(Mo,{label:" UP ",checked:!!a.localSettings.difficultyMode,onChange:y=>a.updateSetting("difficultyMode",y)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:d,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]}),e&&g.jsx(zp,{onDragEnd:h,children:g.jsx(Bf,{droppableId:"settings-sections",children:b=>g.jsxs("ul",{ref:b.innerRef,...b.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[a.order.map((y,k)=>g.jsx($f,{draggableId:y,index:k,children:w=>g.jsxs("li",{ref:w.innerRef,...w.draggableProps,...w.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none text-neutral-500",children:"::"}),g.jsx("div",{className:"flex-1 min-w-0",children:m(y)})]})},y)),b.placeholder]})})})]}),a.toastMessage&&g.jsx(h7,{message:a.toastMessage,onClose:l,ms:1800})]})}function The({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Za({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function Bd({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:r=>r.stopPropagation(),onTouchStart:r=>r.stopPropagation(),children:n.map(r=>{const i=e===r.value;return g.jsx("button",{type:"button",onClick:()=>t(r.value),className:`px-3 py-1 text-sm transition-colors ${i?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:r.label},r.value)})})}function Mo({label:e,checked:t,onChange:n}){const r=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:r,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:r,type:"checkbox",checked:t,onChange:i=>n(i.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-indigo-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-indigo-600"})]})}function Ahe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=jn(h=>h.list),a=dc();S.useEffect(()=>{r(jn.getState().loading);const h=jn.subscribe(m=>{r(m.loading)});return()=>h()},[]);const o=()=>{if(!n){if(i.length===0){alert("    !");return}a("/iching")}},d={bottom:"var(--bottom-dock, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] px-2 box-border left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",style:d,children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(bm,{icon:g.jsx(UX,{size:22}),label:"",onClick:()=>a("/")}),g.jsx(bm,{icon:g.jsx(BX,{size:22}),label:"",onClick:()=>a("/couple")}),g.jsx(bm,{icon:g.jsx(R4,{size:22}),label:"FAQ",onClick:()=>a("/faq")}),g.jsx(bm,{icon:g.jsx(JX,{size:22}),label:"",onClick:()=>t(!0)}),g.jsx(bm,{icon:g.jsx(eJ,{size:22}),label:"",onClick:o})]})}),g.jsx(jhe,{open:e,onClose:()=>t(!1)})]})}function bm({icon:e,label:t,onClick:n,disabled:r}){return g.jsxs("button",{onClick:n,disabled:r,className:"flex flex-1 flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}const W9=e=>e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t!==""),uv=e=>W9(e).join(""),Nhe=()=>{const[e,t]=S.useState(()=>{if(typeof window>"u")return{};try{const u=localStorage.getItem(vP);return u?JSON.parse(u):{}}catch{return{}}});S.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(vP,JSON.stringify(e))}catch{}},[e]);const[n,r]=S.useState({}),[i,a]=S.useState(""),[o,l]=S.useState(()=>{const u=Yy(),d=qy(),h=d.length?Fm(u,d):u;return Zd(h,e)});return S.useEffect(()=>{l(u=>{const d=Zd(u,e);return uv(d)===uv(u)?u:d})},[e]),S.useEffect(()=>{r(u=>{const d={...u};for(const h of o)d[h]===void 0&&(d[h]=!0);return d})},[o]),{folderFavMap:e,setFolderFavMap:t,folderOpenMap:n,setFolderOpenMap:r,newFolderName:i,setNewFolderName:a,orderedFolders:o,setOrderedFolders:l}},Ohe=({list:e,orderedFolders:t})=>{const{grouped:n,unassignedItems:r}=S.useMemo(()=>{const i=jx(e,t),a={};for(const o of t)a[o]=i[o]??[];return{grouped:a,unassignedItems:i[xr]??[]}},[e,t]);return{grouped:n,unassignedItems:r}},ym=async()=>{const{data:e,error:t}=await Le.auth.getUser();return t||!e.user?null:e.user.id},Che=async e=>{const{data:t,error:n}=await Le.from("user_custom_folders").select("folder_name").eq("user_id",e);return n&&n.code==="PGRST205"?{data:[],error:n,disabled:!0}:n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?a.folder_name.trim():"").filter(a=>a!==""),error:null}},Mhe=async e=>{const{data:t,error:n}=await Le.from("user_folder_order").select("folder_name, sort_order").eq("user_id",e).order("sort_order",{ascending:!0,nullsFirst:!0});return n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?String(a.folder_name):"").filter(a=>a.trim()!==""),error:null}},Dhe=async(e,t)=>{const n=t.filter(i=>typeof i=="string"&&i.trim()!=="").map((i,a)=>({user_id:e,folder_name:i.trim(),sort_order:a+1,updated_at:new Date().toISOString()}));if(!n.length){const{error:i}=await Le.from("user_folder_order").delete().eq("user_id",e);return{data:null,error:i}}const{error:r}=await Le.from("user_folder_order").upsert(n,{onConflict:"user_id,folder_name"});return{data:null,error:r}},Phe=async(e,t)=>{const{error:n}=await Le.from("user_folder_order").delete().eq("user_id",e).eq("folder_name",t);return{data:null,error:n}},Rhe=async(e,t)=>{const{error:n}=await Le.from("user_custom_folders").upsert({user_id:e,folder_name:t,updated_at:new Date().toISOString()});return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Lhe=async(e,t)=>{const{error:n}=await Le.from("user_custom_folders").delete().eq("user_id",e).eq("folder_name",t);return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Ihe=({folderFavMap:e,setFolderFavMap:t,setOrderedFolders:n,unsetFolderForFolder:r})=>{const[i,a]=S.useState(!1),o=S.useRef(e),l=S.useRef(!1),u=S.useRef(!1);S.useEffect(()=>{o.current=e},[e]),S.useEffect(()=>{(async()=>{if(i)return;const N=await ym();if(!N)return;try{if(!u.current){const I=await Che(N);I.disabled&&(u.current=!0),I.error?console.error("load custom folders from server error:",I.error):I.data.length&&gT(I.data)}}catch(I){console.error("load custom folders exception:",I)}const j=await Mhe(N);if(j.error){console.error("load folder order from server error:",j.error),a(!0);return}const C=Yy(),M=j.data,P=M.length?Fm(C,M):Fm(C,qy());n(Zd(P,o.current)),M.length&&Xd(M),a(!0)})()},[i,n]);const d=S.useCallback(async T=>{const N=await ym();if(!N)return;const j=await Dhe(N,T);j.error&&console.error("save folder order to server error:",j.error)},[]),h=S.useRef(null),m=S.useRef(null),b=S.useRef(""),y=S.useCallback((T,N)=>{const j=W9(T),C=uv(j);if(C&&C===b.current)return;h.current=j;const M=async()=>{const P=h.current;if(h.current=null,!P)return;const I=uv(P);I&&I===b.current||(await d(P),b.current=I)};if(N?.immediate){m.current&&(window.clearTimeout(m.current),m.current=null),M();return}m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{m.current=null,M()},300)},[d]);S.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=null);const T=h.current;h.current=null,T&&T.length&&d(T)},[d]),S.useEffect(()=>{if(typeof window>"u")return;const T=()=>{if(l.current){l.current=!1;return}const N=Yy(),j=qy(),C=j.length?Fm(N,j):N;n(Zd(C,o.current))};return window.addEventListener(sc,T),()=>window.removeEventListener(sc,T)},[n]);const k=S.useCallback(T=>{const{source:N,destination:j,type:C}=T;if(!j||C!=="FOLDER")return;const M=N.index,P=j.index;M!==P&&n(I=>{if(!I.length)return I;const z=[...I],[K]=z.splice(M,1);z.splice(P,0,K);const G=Zd(z,o.current);return l.current=!0,Xd(G),y(G),G})},[y,n]),w=S.useCallback(T=>{const N=T.trim();!N||N===En||(f7(N),(async()=>{if(u.current)return;const j=await ym();if(!j)return;const C=await Rhe(j,N);C.disabled&&(u.current=!0),C.error&&console.error("save custom folder error:",C.error)})(),n(j=>{if(j.includes(N))return j;const C=[...j,N],M=Zd(C,o.current);return Xd(M),y(M,{immediate:!0}),M}))},[y,n]),_=S.useCallback(T=>{r(T),t(N=>{const j={...N};return delete j[T],j}),n(N=>{const j=N.filter(C=>C!==T);return Xd(j),y(j,{immediate:!0}),(async()=>{const C=await ym();if(!C)return;const M=await Phe(C,T);M.error&&console.error("delete folder order entry error:",M.error)})(),j}),c7.includes(T)?zie(T):(Bie(T),(async()=>{if(u.current)return;const N=await ym();if(!N)return;const j=await Lhe(N,T);j.disabled&&(u.current=!0),j.error&&console.error("delete custom folder error:",j.error)})())},[y,t,n,r]);return{handleDragEnd:k,createFolder:w,deleteFolder:_,UNASSIGNED_LABEL:En}};function $he(e,t){const n=Nhe(),r=Ohe({list:e,orderedFolders:n.orderedFolders}),i=Ihe({folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,setOrderedFolders:n.setOrderedFolders,unsetFolderForFolder:t.unsetFolderForFolder});return{folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,folderOpenMap:n.folderOpenMap,setFolderOpenMap:n.setFolderOpenMap,newFolderName:n.newFolderName,setNewFolderName:n.setNewFolderName,orderedFolders:n.orderedFolders,grouped:r.grouped,unassignedItems:r.unassignedItems,handleDragEnd:i.handleDragEnd,createFolder:i.createFolder,deleteFolder:i.deleteFolder,UNASSIGNED_LABEL:i.UNASSIGNED_LABEL}}function Bhe({onClose:e,onAddNew:t,isLoggedIn:n,onLogin:r}){const i=jn(m=>m.list.length),o=vn(m=>m.canAddMyeongsik)(i),l=!o.ok,u=l?o.message:"",d=()=>{if(l){_a(u||"  ");return}t()},h=async()=>{const{error:m}=await Le.auth.signOut();if(m){console.error(m),_a(" ");return}_a(" ")};return g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h2",{className:"text-lg font-bold",children:" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n?g.jsxs("button",{type:"button",onClick:h,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(qX,{size:16})," "]}):g.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(L4,{size:16})," "]}),g.jsxs("button",{type:"button",onClick:d,disabled:l,title:u,className:l?"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-80":"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer bg-purple-600 hover:bg-purple-500 text-white",children:[g.jsx(ZX,{size:16}),"  ",l?"":""]}),g.jsx("button",{type:"button",onClick:e,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900","aria-label":" ",title:"",children:g.jsx(Py,{size:22})})]})]})}function zhe({search:e,setSearch:t,searchMode:n,setSearchMode:r,isFiltering:i,totalMatches:a}){return g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"h-30 text-xs rounded px-2 py-1 cursor-pointer bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40",children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:e,onChange:o=>t(o.target.value),placeholder:n==="name"?" ":n==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:"w-full pl-7 pr-8 py-1 h-30 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-[16px] text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-amber-500/40"}),e&&g.jsx("button",{type:"button",onClick:()=>t(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(IX,{size:16})})]}),i&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[a,""]})]})})}function Uhe({newFolderName:e,setNewFolderName:t,onCreate:n,isFiltering:r,totalCount:i,collapsed:a,onToggleCollapse:o}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),placeholder:"  ",className:"flex-1 w-[60%] px-2 py-1 rounded h-30 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500",onClick:l=>l.stopPropagation()}),g.jsx("button",{type:"button",className:"px-3 rounded h-30 text-sm cursor-pointer bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700",onClick:l=>{l.stopPropagation(),n()},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-1",children:r?"   .":"/      ."}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"  "}),g.jsx("span",{className:"mx-1",children:""}),g.jsxs("span",{className:"font-semibold text-amber-500 dark:text-amber-600",children:[i,""]})]}),g.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-xs text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:a?"  ":"  "})]}),g.jsx("div",{className:"text-xs mb-2 text-neutral-900 dark:text-neutral-100",children:"         !"})]})}function FR({droppableId:e,items:t,isDropDisabled:n,className:r}){return g.jsx(Bf,{droppableId:e,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:n,children:i=>g.jsx("div",{ref:i.innerRef,...i.droppableProps,className:r,children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[t,i.placeholder]})})})}function Fhe({folderName:e,folderIndex:t,isOpen:n,isFavorite:r,itemCount:i,isDragDisabled:a,onToggleOpen:o,onToggleFavorite:l,onDelete:u,inner:d}){return g.jsx($f,{draggableId:`folder-${e}`,index:t,isDragDisabled:a,children:h=>g.jsxs("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:"flex items-center justify-between px-2 py-2 rounded bg-neutral-50 dark:bg-neutral-900/70 border border-neutral-200 dark:border-neutral-800 text-neutral-800 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:m=>{m.stopPropagation(),o()},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[n?g.jsx(PX,{size:16}):g.jsx(MX,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:e})]}),g.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),l()},className:`p-1 rounded cursor-pointer ${r?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":"  ",title:r?" ":"",children:g.jsx(I4,{size:16,fill:r?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[i,""]}),g.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),u()},className:"px-2 py-1 rounded text-xs cursor-pointer border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30",children:""})]})]}),n?d:null]})},`folder-${e}`)}const Hhe=()=>({canManage:vn(()=>!0)}),pp="";function Ghe(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${r} ${i} ${t.slice(0,2)}:${t.slice(2,4)}`:t===pp?`${n} ${r} ${i} ( )`:`${n} ${r} ${i}`}function Yhe(e){if(!e||e==="")return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=o=>t.find(l=>o.some(u=>l.endsWith(u))),r=n(["","","","",""]),i=n(["","","","","",""]);return t.length===1||!n(["","","","","","","","","","",""])&&!n(["","","","","",""])?e:r&&i?`${r} ${i}`:r||e}function HR(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function qhe(e,t){const n=zf(e),r=Fp(t);if(!n||!r)return null;const i=new Date(n.y,n.m-1,n.d,r.hh,r.mm,0,0),a=new Date(i.getTime()-3600*1e3),o=String(a.getFullYear()).padStart(4,"0"),l=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0"),h=String(a.getMinutes()).padStart(2,"0");return{birthDay:`${o}${l}${u}`,birthTime:`${d}${h}`}}function Khe(e){const t=HR(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const r=Number(n.slice(0,4)),i=Number(n.slice(4,6)),a=Number(n.slice(6,8));if(!ap(r,i,a)||!e.birthTime||e.birthTime===pp)return t;const o=qhe(n,e.birthTime);if(!o)return t;const l=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(l.getTime()))return t;const u=new Date(l.getTime()-3600*1e3),d=cT({...e,birthDay:o.birthDay,birthTime:o.birthTime,corrected:u});return HR({...e,...d})}function Whe(e){const t=String(e??"").trim();if(/^\d{8}$/.test(t)){const r=Number(t.slice(0,4));return Number.isFinite(r)?r:NaN}const n=new Date(t);return Number.isNaN(n.getTime())?NaN:n.getFullYear()}function Vhe(e,t){return Number.isNaN(e)?0:t-e+1}function Zhe(e){return{...e,transition:e?.transform?"transform 0.15s ease":"none"}}function Xhe(e){return e===""?"":e===""?"":e??""}function Jhe(e){const t=e.trim(),n=/^(\d{1,2}):(\d{2})$/.exec(t);if(!n)return null;const r=Number(n[1]),i=Number(n[2]);if(!Number.isFinite(r)||!Number.isFinite(i)||r<0||r>23||i<0||i>59)return null;const a=r-1<0?23:r-1;return`${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function Qhe(e,t){if(t)return pp;const n=String(e.birthDay??"").trim(),r=String(e.correctedLocal??"").trim(),i=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??"")),a=!Number.isNaN(i.getTime()),o=r||(a?e2(i):"");if(!/^\d{8}$/.test(n))return o;const l=Number(n.slice(0,4)),u=Number(n.slice(4,6)),d=Number(n.slice(6,8));if(!ap(l,u,d)||!e.birthTime||e.birthTime===pp)return o;if(a){const m=new Date(i.getTime()-36e5);return e2(m)}return Jhe(r)??o}function eme({m:e,memoOpen:t,isDragDisabled:n}){const r=n,i=`item:${e.id}`,a=Khe(e),o=Yhe(e.birthPlace?.name),l=e.relationship?.trim()?e.relationship:" ",u=Xhe(e.gender),d=!e.birthTime||e.birthTime===pp,h=Qhe(e,d),m=!!(o||h),b=Ghe(e.birthDay,e.birthTime),y=e.calendarType==="lunar"?"":"",k=Whe(e.birthDay),w=Vhe(k,new Date().getFullYear()),_=!!(e.memo&&e.memo.trim()!==""),T=t?" ":" ",N=e.mingSikType??"/",j=r?" ":"::",C=e.favorite?" ":"";return{keyId:i,dragDisabled:r,dragHandleLabel:j,ganji:a,placeDisplay:o,relationshipLabel:l,genderLabel:u,birthDisplay:b,calendarLabel:y,correctedLabel:h,showMetaLine:m,showMemo:_,memoToggleLabel:T,age:w,mingSikTypeValue:N,favoriteLabel:C,editLabel:"",deleteLabel:"",getDragStyle:Zhe}}const tme=({m:e,unassignedLabel:t,onToggleMemo:n,onChangeFolder:r,onChangeMingSikType:i,onView:a,onEdit:o,onDelete:l,onToggleFavorite:u})=>{const d=S.useCallback(_=>{_?.stopPropagation(),n(e.id)},[n,e.id]),h=S.useCallback(_=>{_?.stopPropagation(),a(e)},[a,e]),m=S.useCallback(_=>{_?.stopPropagation(),o(e)},[o,e]),b=S.useCallback(_=>{_?.stopPropagation(),l(e)},[l,e]),y=S.useCallback(_=>{_?.stopPropagation(),u(e.id)},[u,e.id]),k=S.useCallback(_=>{const T=_===t?void 0:_;r(e.id,T)},[r,e.id,t]),w=S.useCallback(_=>{i(e,_)},[i,e]);return{handleToggleMemo:d,handleView:h,handleEdit:m,handleDelete:b,handleToggleFavorite:y,handleFolderChange:k,handleMingSikTypeChange:w}};function GR({m:e,index:t,orderedFolders:n,unassignedLabel:r,isDragDisabled:i,collapsed:a,memoOpen:o,onToggleMemo:l,onToggleCollapsed:u,onChangeFolder:d,onChangeMingSikType:h,onView:m,onEdit:b,onDelete:y,onToggleFavorite:k}){Hhe();const w=eme({m:e,memoOpen:o,isDragDisabled:i}),_=a,T=tme({m:e,unassignedLabel:r,onToggleMemo:l,onChangeFolder:d,onChangeMingSikType:h,onView:m,onEdit:b,onDelete:y,onToggleFavorite:k});return g.jsx($f,{draggableId:w.keyId,index:t,isDragDisabled:i,children:N=>g.jsx("li",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,style:N.draggableProps.style,className:`list-none select-none rounded-xl border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-neutral-100 ${i?"cursor-default":"cursor-grab active:cursor-grabbing"}`,onClick:()=>{_&&T.handleView()},children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[e.name," (",w.age,"",w.genderLabel,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 text-nowrap",children:w.relationshipLabel}),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("span",{className:"opacity-50 select-none",children:w.dragHandleLabel}),g.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u()},className:"text-xs px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:_?" ":" "})]})]}),!_&&g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[w.birthDisplay,", ",w.calendarLabel]}),!_&&w.showMetaLine&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[w.placeDisplay,w.correctedLabel&&g.jsxs("span",{className:"opacity-70",children:["  ",w.correctedLabel]})]}),w.ganji&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:w.ganji}),!_&&w.showMemo&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:T.handleToggleMemo,children:w.memoToggleLabel}),g.jsx("div",{className:o?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:e.memo})]}),!_&&g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:e.folder??r,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleFolderChange(j.target.value)},children:[r,...n].map(j=>g.jsx("option",{value:j,children:j},j))}),g.jsxs("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:w.mingSikTypeValue,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleMingSikTypeChange(j.target.value)},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),!_&&g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{type:"button",onClick:T.handleView,className:"px-3 py-1 rounded text-white text-sm cursor-pointer bg-indigo-600 hover:bg-indigo-500",children:""}),g.jsx("button",{type:"button",title:"",onClick:T.handleEdit,className:"px-3 py-1 rounded text-white text-sm bg-amber-600 hover:bg-amber-500 cursor-pointer",children:w.editLabel}),g.jsx("button",{type:"button",title:"",onClick:T.handleDelete,className:"px-3 py-1 rounded text-white text-sm bg-red-600 hover:bg-red-500 cursor-pointer",children:w.deleteLabel}),g.jsx("button",{type:"button",title:w.favoriteLabel,onClick:T.handleToggleFavorite,className:`ml-auto p-1 rounded cursor-pointer ${e.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":w.favoriteLabel,children:g.jsx(I4,{size:16,fill:e.favorite?"currentColor":"none"})})]})]})})},w.keyId)}const nme="list:__unassigned__",rme=e=>`list:${e}`,YR=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},ime=({search:e,searchMode:t,orderedFolders:n,grouped:r,unassignedItems:i})=>{const a=i7(e),{filteredUnassigned:o,filteredGrouped:l,totalMatches:u}=S.useMemo(()=>wie({search:e,searchMode:t,orderedFolders:n,unassignedItems:i,grouped:r}),[e,t,n,i,r]);return{isFiltering:a,filteredUnassigned:o,filteredGrouped:l,totalMatches:u}},ame=({list:e,orderedFolders:t})=>{const[n,r]=S.useState(""),[i,a]=S.useState("name"),[o,l]=S.useState({}),u=S.useRef(null),d=S.useRef(null);return S.useEffect(()=>{if(d.current==null)return;const b=u.current;b&&(b.scrollTop=d.current,d.current=null)},[e,t]),{search:n,setSearch:r,searchMode:i,setSearchMode:a,memoOpenMap:o,toggleMemo:b=>{l(y=>({...y,[b]:!y[b]}))},scrollRef:u,stashScrollTop:()=>{const b=u.current;b&&(d.current=b.scrollTop)}}},qR=()=>{typeof window>"u"||window.dispatchEvent(new Event(sc))},ome=({list:e,orderedFolders:t,isFiltering:n,handleFolderDragEnd:r,moveItemByDnD:i,applyNextList:a,update:o,remove:l,onView:u,onClose:d,onDeleteView:h,folderFavMap:m,setFolderFavMap:b,setFolderOpenMap:y,createFolder:k,deleteFolder:w,newFolderName:_,setNewFolderName:T,stashScrollTop:N})=>{const j=S.useCallback((B,q)=>{const{nextList:X}=mie({list:e,orderedFolders:t,targetId:B,nextFolder:q??""});a(X)},[e,t,a]),C=S.useCallback((B,q)=>{const X={...B,mingSikType:q},V=cT(X);o(B.id,{mingSikType:q,...V}),u({...X,...V}),d()},[o,u,d]),M=S.useCallback(B=>{u(B),d()},[u,d]),P=S.useCallback(B=>{confirm(`'${B.name}'  ?`)&&(l(B.id),h&&h())},[l,h]),I=S.useCallback(()=>{const B=_.trim();B&&(k(B),T(""),qR())},[_,k,T]),z=S.useCallback(B=>{if(m[B]){alert(`'${B}'   .
   .`);return}confirm(`'${B}'  ?
(   )`)&&(w(B),qR())},[m,w]),K=S.useCallback(B=>{y(q=>({...q,[B]:!q[B]}))},[y]),G=S.useCallback(B=>{b(q=>({...q,[B]:!q[B]}))},[b]);return{handleDrop:S.useCallback(B=>{const{type:q,source:X,destination:V,draggableId:F}=B;if(V&&!n){if(N(),q==="FOLDER"){r(B);return}if(q==="ITEM"){if(!F.replace(/^item:/,""))return;const Q=YR(X.droppableId),le=YR(V.droppableId);i({orderedFolders:t,sourceFolder:Q,sourceIndex:X.index,destinationFolder:le,destinationIndex:V.index})}}},[n,N,r,i,t]),changeFolder:j,changeMingSikType:C,viewAndClose:M,requestDelete:P,createFolderAndNotify:I,requestDeleteFolder:z,toggleFolderOpen:K,toggleFolderFavorite:G}};function sme({open:e,onClose:t,onView:n,onAddNew:r,onEdit:i,onDeleteView:a,isLoggedIn:o}){const[l,u]=S.useState(!1),d=Jt(xe=>xe.settings),h=Jt(xe=>xe.setKey),m=Jt(xe=>xe.saveToServer),{list:b,remove:y,update:k,moveItemByDnD:w,toggleFavoriteWithReorder:_,unsetFolderForFolder:T,applyNextList:N}=jn(),{folderFavMap:j,setFolderFavMap:C,folderOpenMap:M,setFolderOpenMap:P,newFolderName:I,setNewFolderName:z,orderedFolders:K,grouped:G,unassignedItems:H,handleDragEnd:B,createFolder:q,deleteFolder:X,UNASSIGNED_LABEL:V}=$he(b,{unsetFolderForFolder:T}),F=ame({list:b,orderedFolders:K}),Z=d.sidebarCardsCollapsed,Q=d.sidebarCardCollapsedMap,le=xe=>Q[xe]??Z,se=xe=>{h("sidebarCardCollapsedMap",xe),m()},W=xe=>{h("sidebarCardsCollapsed",xe);const ue=b.reduce((Ee,Me)=>(Ee[Me.id]=xe,Ee),{});se(ue)},re=xe=>{se({...Q,[xe]:!(Q[xe]??!0)})},{isFiltering:ee,filteredUnassigned:he,filteredGrouped:J,totalMatches:ae}=ime({search:F.search,searchMode:F.searchMode,orderedFolders:K,unassignedItems:H,grouped:G}),me=ome({list:b,applyNextList:N,orderedFolders:K,isFiltering:ee,handleFolderDragEnd:B,moveItemByDnD:w,update:k,remove:y,onView:n,onClose:t,onDeleteView:a,folderFavMap:j,setFolderFavMap:C,setFolderOpenMap:P,createFolder:q,deleteFolder:X,newFolderName:I,setNewFolderName:z,stashScrollTop:F.stashScrollTop}),pe=()=>{u(!0)},te=xe=>{Bu.flushSync(()=>{u(!1),me.handleDrop(xe)})},je=()=>{Ms.getState().openWith("HEADER")};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-100 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-101 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsx(Bhe,{onClose:t,onAddNew:()=>{r(),t()},onLogin:()=>{je()},isLoggedIn:o}),g.jsx(zp,{onBeforeDragStart:pe,onDragEnd:te,children:g.jsxs("div",{ref:F.scrollRef,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:l?"none":"pan-y"},children:[g.jsxs(g.Fragment,{children:[g.jsx(zhe,{search:F.search,setSearch:F.setSearch,searchMode:F.searchMode,setSearchMode:F.setSearchMode,isFiltering:ee,totalMatches:ae}),g.jsx(Uhe,{newFolderName:I,setNewFolderName:z,isFiltering:ee,onCreate:me.createFolderAndNotify,totalCount:b.length,collapsed:Z,onToggleCollapse:()=>W(!Z)})]}),g.jsx(FR,{droppableId:nme,isDropDisabled:ee,className:"mb-6",items:he.map((xe,ue)=>g.jsx(GR,{m:xe,index:ue,orderedFolders:K,unassignedLabel:V,isDragDisabled:ee,collapsed:le(xe.id),memoOpen:!!F.memoOpenMap[xe.id],onToggleMemo:F.toggleMemo,onToggleCollapsed:()=>re(xe.id),onChangeFolder:me.changeFolder,onChangeMingSikType:me.changeMingSikType,onView:me.viewAndClose,onEdit:Ee=>i(Ee),onDelete:me.requestDelete,onToggleFavorite:Ee=>void _(Ee,K)},xe.id))}),g.jsx(Bf,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:ee,children:xe=>g.jsxs("div",{ref:xe.innerRef,...xe.droppableProps,children:[K.map((ue,Ee)=>{const Me=rme(ue),Ie=J[ue]||[],Ke=!!M[ue],mt=!!j[ue];return g.jsx(Fhe,{folderName:ue,folderIndex:Ee,isOpen:Ke,isFavorite:mt,itemCount:Ie.length,isDragDisabled:ee,onToggleOpen:()=>me.toggleFolderOpen(ue),onToggleFavorite:()=>me.toggleFolderFavorite(ue),onDelete:()=>me.requestDeleteFolder(ue),inner:g.jsx(FR,{droppableId:Me,isDropDisabled:ee,className:"mt-2",items:Ie.map((pt,De)=>g.jsx(GR,{m:pt,index:De,orderedFolders:K,unassignedLabel:V,isDragDisabled:ee,collapsed:le(pt.id),memoOpen:!!F.memoOpenMap[pt.id],onToggleMemo:F.toggleMemo,onToggleCollapsed:()=>re(pt.id),onChangeFolder:me.changeFolder,onChangeMingSikType:me.changeMingSikType,onView:me.viewAndClose,onEdit:ze=>i(ze),onDelete:me.requestDelete,onToggleFavorite:ze=>void _(ze,K)},pt.id))})},`folder-${ue}`)}),xe.placeholder]})})]})})]})]})}function KR(e){return{...e,calendarType:e.calendarType??"solar"}}function WR(e){return!e.birthTime||e.birthTime===""}function VR(e){return!e.birthPlace||e.birthPlace.name===""}function lme(e,t){if(t!=="lunar"||!e||e.length!==8)return null;try{const n=Number(e.slice(0,4)),r=Number(e.slice(4,6)),i=Number(e.slice(6,8)),a=ia(n,r,i),o=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`  ${a.getFullYear()}-${o}-${l}`}catch(n){const r=n instanceof Error?n.message:void 0;return`  ${r?`: ${r}`:""}`}}const V9="ms_folders";function cme(){try{const e=JSON.parse(localStorage.getItem(V9)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function ume(e){localStorage.setItem(V9,JSON.stringify(e))}function dme(e){const[t,n]=S.useState(!1),[r,i]=S.useState(()=>KR(e)),[a,o]=S.useState(WR(e)),[l,u]=S.useState(VR(e)),[d,h]=S.useState([]);return S.useEffect(()=>{h(cme())},[]),{isEditing:t,setIsEditing:n,form:r,setForm:i,updateForm:(y,k)=>{i(w=>({...w,[y]:k}))},unknownTime:a,setUnknownTime:o,unknownPlace:l,setUnknownPlace:u,customFolders:d,setCustomFolders:h,resetForm:()=>{i(KR(e)),o(WR(e)),u(VR(e))}}}const Z9=["","","","","",""];function fme(e,t){const n=Array.from(new Set(e.map(a=>a.folder).filter(Boolean))),r=new Set([...Z9,...t,...n]),i=Array.from(r).sort((a,o)=>a.localeCompare(o));return[En,...i]}function hme({list:e,customFolders:t,form:n}){const r=S.useMemo(()=>fme(e,t),[e,t]),i=S.useMemo(()=>lme(n.birthDay,n.calendarType),[n.birthDay,n.calendarType]);return{folderOptions:r,lunarPreview:i}}function mme(e,t,n){if(!e.name||e.name.trim()==="")return"";const r=uT(e.birthDay??"",e.calendarType??"solar");if(!r.ok)return r.message;const i=dT(e.birthTime??"",t);return i.ok?!n&&!e.birthPlace?"":null:i.message}function pme({item:e,form:t,unknownTime:n,unknownPlace:r,customFolders:i,setCustomFolders:a,update:o,remove:l,onClose:u,onSaved:d}){return{save:()=>{const b=mme(t,n,r);if(b){alert(b);return}const y=Eu(t.folder===En?void 0:t.folder),k=Q6({id:e.id,name:t.name,birthDay:t.birthDay??"",calendarType:t.calendarType??"solar",birthTime:t.birthTime,unknownTime:n,gender:t.gender,birthPlace:t.birthPlace,unknownPlace:r,relationship:t.relationship,memo:t.memo,folder:y,mingSikType:t.mingSikType,favorite:e.favorite,deletedAt:e.deletedAt??null,sortOrder:e.sortOrder,dateObj:e.dateObj},{requireName:!0});if(!k.ok){alert(k.message);return}const w={...e,...k.value};if(w.folder&&!Z9.includes(w.folder)&&!i.includes(w.folder)){const _=[...i,w.folder];a(_),ume(_)}o(e.id,w),d?.(),u?.()},removeThis:()=>{confirm(`'${e.name}'  ?`)&&l(e.id)}}}const bS="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",gme="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",bme="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",js="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",yme="text-xs text-neutral-500 dark:text-neutral-400",jb="accent-violet-600 dark:accent-violet-400",ZR="accent-violet-600 dark:accent-violet-400",Lx="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",vme=`${Lx} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,xme=`${Lx} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,XR=`${Lx} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,wme=`${Lx} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function _me({item:e,onClose:t}){const{list:n,update:r,remove:i}=jn(),a=dme(e),o=hme({list:n,customFolders:a.customFolders,form:a.form}),l=pme({item:e,form:a.form,unknownTime:a.unknownTime,unknownPlace:a.unknownPlace,customFolders:a.customFolders,setCustomFolders:a.setCustomFolders,update:r,remove:i,onClose:t,onSaved:()=>a.setIsEditing(!1)});return a.isEditing?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:""}),g.jsx("input",{className:bS,value:a.form.name||"",onChange:u=>a.updateForm("name",u.target.value),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:js,children:" (YYYYMMDD)"}),g.jsx("input",{className:bS,value:a.form.birthDay||"",onChange:u=>a.updateForm("birthDay",u.target.value.replace(/\D/g,"").slice(0,8)),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jb,name:"calendarType",checked:a.form.calendarType==="solar",onChange:()=>a.updateForm("calendarType","solar"),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jb,name:"calendarType",checked:a.form.calendarType==="lunar",onChange:()=>a.updateForm("calendarType","lunar"),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),o.lunarPreview&&g.jsx("span",{className:yme,children:o.lunarPreview})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:"  (HHMM)"}),g.jsx("input",{className:`${bS} disabled:opacity-50`,value:a.unknownTime?"":a.form.birthTime||"",onChange:u=>a.updateForm("birthTime",u.target.value.replace(/\D/g,"").slice(0,4)),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:a.unknownTime}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:ZR,checked:a.unknownTime,onChange:u=>a.setUnknownTime(u.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:js,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(u=>{const d=`editor_ming_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jb,name:"mingSikType",checked:(a.form.mingSikType??"")===u,onChange:()=>a.updateForm("mingSikType",u),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(u=>{const d=`editor_gender_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:jb,name:"gender",value:u,checked:a.form.gender===u,onChange:h=>a.updateForm("gender",h.target.value),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:" "}),g.jsx($4,{onSelect:u=>a.updateForm("birthPlace",u),value:a.unknownPlace?"":a.form.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:ZR,checked:a.unknownPlace,onChange:u=>a.setUnknownPlace(u.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:""}),g.jsx(l7,{value:a.form.relationship||"",onChange:u=>a.updateForm("relationship",u)})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:""}),g.jsx("select",{className:gme,value:a.form.folder??En,onChange:u=>{const d=u.target.value;d===En?a.updateForm("folder",void 0):a.updateForm("folder",d)},children:o.folderOptions.map(u=>g.jsx("option",{value:u===En?En:u,children:u},u))})]}),g.jsxs("div",{children:[g.jsx("label",{className:js,children:""}),g.jsx("textarea",{className:bme,value:a.form.memo||"",onChange:u=>a.updateForm("memo",u.target.value),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:XR,onClick:()=>{a.resetForm(),a.setIsEditing(!1)},children:""}),g.jsx("button",{className:wme,onClick:l.save,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:vme,onClick:()=>a.setIsEditing(!0),children:""}),g.jsx("button",{className:xme,onClick:l.removeThis,children:""}),t&&g.jsx("button",{className:XR,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??En]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function Sme({children:e}){const t=Wr(),[n,r]=S.useState(!1),i=[{label:" ",href:"/admin/dashboard"},{label:"  ",href:"/admin/user"},{label:"  ",href:"/admin/logs"}];return g.jsxs("div",{className:"flex min-h-screen bg-neutral-950 text-white",children:[g.jsxs("aside",{className:`
          fixed top-0 left-0 h-full bg-neutral-900 border-r border-neutral-800 
          transition-all z-50

          desk:w-60 desk:translate-x-0
          ${n?"w-60 translate-x-0":"-translate-x-full"}
        `,children:[g.jsxs("div",{className:"p-4 font-bold text-lg flex items-center justify-between",children:[g.jsx("span",{className:"desk:block hidden",children:""}),g.jsx("button",{className:"desk:hidden text-neutral-400 hover:text-white",onClick:()=>r(!1),children:""})]}),g.jsx("nav",{className:"mt-4 flex flex-col gap-1 px-2",children:i.map(a=>{const o=t.pathname.startsWith(a.href);return g.jsx("a",{href:a.href,className:`
                  block px-3 py-2 rounded-md text-sm
                  ${o?"bg-neutral-800 text-yellow-400":"text-neutral-300 hover:bg-neutral-800"}
                `,children:a.label},a.href)})})]}),g.jsxs("main",{className:"flex-1 flex flex-col desk:ml-60",children:[g.jsxs("header",{className:"h-14 border-b border-neutral-800 bg-neutral-900 flex items-center px-4 justify-between",children:[g.jsx("button",{className:"desk:hidden text-neutral-300",onClick:()=>r(!0),children:""}),g.jsx("div",{className:"font-semibold",children:" "}),g.jsx("button",{className:"text-sm text-neutral-400 hover:text-white cursor-pointer",onClick:()=>window.location.href="/",children:" "})]}),g.jsx("div",{className:"flex-1",children:e})]})]})}function kme(){const[e,t]=S.useState(null),[n,r]=S.useState(!0);return S.useEffect(()=>{(async()=>{const{data:a}=await Le.auth.getUser(),o=a.user?.id;if(!o){t(null),r(!1);return}const{data:l}=await Le.from("admin_roles").select("role").eq("user_id",o).maybeSingle();t(l?.role??null),r(!1)})()},[]),{role:e,loading:n}}function Eme({allow:e,children:t}){const{role:n,loading:r}=kme();return r?g.jsx("div",{className:"text-white p-6",children:"Checking permission..."}):!n||!e.includes(n)?g.jsx("div",{className:"text-red-400 p-6",children:" ."}):g.jsx(g.Fragment,{children:t})}function X9(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=X9(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=X9(e))&&(r&&(r+=" "),r+=t);return r}var jme=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BT(e){if(typeof e!="string")return!1;var t=jme;return t.includes(e)}var Tme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ame=new Set(Tme);function J9(e){return typeof e!="string"?!1:Ame.has(e)}function Q9(e){return typeof e=="string"&&e.startsWith("data-")}function co(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(J9(n)||Q9(n))&&(t[n]=e[n]);return t}function Ix(e){if(e==null)return null;if(S.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return co(t)}return typeof e=="object"&&!Array.isArray(e)?co(e):null}function Da(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(J9(n)||Q9(n)||BT(n))&&(t[n]=e[n]);return t}function Nme(e){return e==null?null:S.isValidElement(e)?Da(e.props):typeof e=="object"&&!Array.isArray(e)?Da(e):null}var Ome=["children","width","height","viewBox","className","style","title","desc"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u2.apply(null,arguments)}function Cme(e,t){if(e==null)return{};var n,r,i=Mme(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mme(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var e8=S.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:l,title:u,desc:d}=e,h=Cme(e,Ome),m=a||{width:r,height:i,x:0,y:0},b=fn("recharts-surface",o);return S.createElement("svg",u2({},Da(h),{className:b,width:r,height:i,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),S.createElement("title",null,u),S.createElement("desc",null,d),n)}),Dme=["children","className"];function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d2.apply(null,arguments)}function Pme(e,t){if(e==null)return{};var n,r,i=Rme(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rme(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ko=S.forwardRef((e,t)=>{var{children:n,className:r}=e,i=Pme(e,Dme),a=fn("recharts-layer",r);return S.createElement("g",d2({className:a},Da(i),{ref:t}),n)}),Lme=S.createContext(null);function Dn(e){return function(){return e}}const f2=Math.PI,h2=2*f2,du=1e-6,Ime=h2-du;function t8(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $me(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return t8;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Bme{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?t8:$me(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-t,d=i-n,h=o-t,m=l-n,b=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>du)if(!(Math.abs(m*u-d*h)>du)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=r-o,k=i-l,w=u*u+d*d,_=y*y+k*k,T=Math.sqrt(w),N=Math.sqrt(b),j=a*Math.tan((f2-Math.acos((w+b-_)/(2*T*N)))/2),C=j/N,M=j/T;Math.abs(C-1)>du&&this._append`L${t+C*h},${n+C*m}`,this._append`A${a},${a},0,0,${+(m*y>h*k)},${this._x1=t+M*u},${this._y1=n+M*d}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=t+l,h=n+u,m=1^o,b=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>du||Math.abs(this._y1-h)>du)&&this._append`L${d},${h}`,r&&(b<0&&(b=b%h2+h2),b>Ime?this._append`A${r},${r},0,1,${m},${t-l},${n-u}A${r},${r},0,1,${m},${this._x1=d},${this._y1=h}`:b>du&&this._append`A${r},${r},0,${+(b>=f2)},${m},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function n8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Bme(t)}function zT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function r8(e){this._context=e}r8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $x(e){return new r8(e)}function i8(e){return e[0]}function a8(e){return e[1]}function o8(e,t){var n=Dn(!0),r=null,i=$x,a=null,o=n8(l);e=typeof e=="function"?e:e===void 0?i8:Dn(e),t=typeof t=="function"?t:t===void 0?a8:Dn(t);function l(u){var d,h=(u=zT(u)).length,m,b=!1,y;for(r==null&&(a=i(y=o())),d=0;d<=h;++d)!(d<h&&n(m=u[d],d,u))===b&&((b=!b)?a.lineStart():a.lineEnd()),b&&a.point(+e(m,d,u),+t(m,d,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Dn(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Dn(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function Tb(e,t,n){var r=null,i=Dn(!0),a=null,o=$x,l=null,u=n8(d);e=typeof e=="function"?e:e===void 0?i8:Dn(+e),t=typeof t=="function"?t:Dn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?a8:Dn(+n);function d(m){var b,y,k,w=(m=zT(m)).length,_,T=!1,N,j=new Array(w),C=new Array(w);for(a==null&&(l=o(N=u())),b=0;b<=w;++b){if(!(b<w&&i(_=m[b],b,m))===T)if(T=!T)y=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),k=b-1;k>=y;--k)l.point(j[k],C[k]);l.lineEnd(),l.areaEnd()}T&&(j[b]=+e(_,b,m),C[b]=+t(_,b,m),l.point(r?+r(_,b,m):j[b],n?+n(_,b,m):C[b]))}if(N)return l=null,N+""||null}function h(){return o8().defined(i).curve(o).context(a)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Dn(+m),r=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Dn(+m),d):e},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Dn(+m),d):r},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Dn(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Dn(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Dn(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Dn(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,a!=null&&(l=o(a)),d):o},d.context=function(m){return arguments.length?(m==null?a=l=null:l=o(a=m),d):a},d}class s8{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function zme(e){return new s8(e,!0)}function Ume(e){return new s8(e,!1)}function dv(){}function fv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function l8(e){this._context=e}l8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fme(e){return new l8(e)}function c8(e){this._context=e}c8.prototype={areaStart:dv,areaEnd:dv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hme(e){return new c8(e)}function u8(e){this._context=e}u8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gme(e){return new u8(e)}function d8(e){this._context=e}d8.prototype={areaStart:dv,areaEnd:dv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Yme(e){return new d8(e)}function JR(e){return e<0?-1:1}function QR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(JR(a)+JR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function e3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yS(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function hv(e){this._context=e}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yS(this,this._t0,e3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yS(this,e3(this,n=QR(this,e,t)),n);break;default:yS(this,this._t0,n=QR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function f8(e){this._context=new h8(e)}(f8.prototype=Object.create(hv.prototype)).point=function(e,t){hv.prototype.point.call(this,t,e)};function h8(e){this._context=e}h8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function qme(e){return new hv(e)}function Kme(e){return new f8(e)}function m8(e){this._context=e}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=t3(e),i=t3(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function t3(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Wme(e){return new m8(e)}function Bx(e,t){this._context=e,this._t=t}Bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Vme(e){return new Bx(e,.5)}function Zme(e){return new Bx(e,0)}function Xme(e){return new Bx(e,1)}function _f(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function m2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Jme(e,t){return e[t]}function Qme(e){const t=[];return t.key=e,t}function epe(){var e=Dn([]),t=m2,n=_f,r=Jme;function i(a){var o=Array.from(e.apply(this,arguments),Qme),l,u=o.length,d=-1,h;for(const m of a)for(l=0,++d;l<u;++l)(o[l][d]=[0,+r(m,o[l].key,d,a)]).data=m;for(l=0,h=zT(t(o));l<u;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Dn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Dn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?m2:typeof a=="function"?a:Dn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??_f,i):n},i}function tpe(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}_f(e,t)}}function npe(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}_f(e,t)}}function rpe(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,u=0,d=0;l<o;++l){for(var h=e[t[l]],m=h[r][1]||0,b=h[r-1][1]||0,y=(m-b)/2,k=0;k<l;++k){var w=e[t[k]],_=w[r][1]||0,T=w[r-1][1]||0;y+=_-T}u+=m,d+=y*m}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,_f(e,t)}}var vS={},xS={},n3;function ipe(){return n3||(n3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(xS)),xS}var wS={},r3;function p8(){return r3||(r3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(wS)),wS}var _S={},i3;function UT(){return i3||(i3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(_S)),_S}var SS={},kS={},a3;function ape(){return a3||(a3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(kS)),kS}var o3;function FT(){return o3||(o3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ape(),n=UT();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const m=i[l];d?m==="\\"&&l+1<o?(l++,u+=i[l]):m===d?d="":u+=m:h?m==='"'||m==="'"?d=m:m==="]"?(h=!1,a.push(u),u=""):u+=m:m==="["?(h=!0,u&&(a.push(u),u="")):m==="."?u&&(a.push(u),u=""):u+=m,l++}return u&&a.push(u),a}e.toPath=r})(SS)),SS}var s3;function HT(){return s3||(s3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ipe(),n=p8(),r=UT(),i=FT();function a(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?n.isDeepKey(u)?a(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function o(l,u,d){if(u.length===0)return d;let h=l;for(let m=0;m<u.length;m++){if(h==null||t.isUnsafeProperty(u[m]))return d;h=h[u[m]]}return h===void 0?d:h}e.get=a})(vS)),vS}var ES,l3;function ope(){return l3||(l3=1,ES=HT().get),ES}var spe=ope();const zx=Ci(spe);var Ta=e=>e===0?0:e>0?1:-1,uo=e=>typeof e=="number"&&e!=+e,Gs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,tt=e=>(typeof e=="number"||e instanceof Number)&&!uo(e),Wo=e=>tt(e)||typeof e=="string",lpe=0,gp=e=>{var t=++lpe;return"".concat(e||"").concat(t)},cc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!tt(t)&&typeof t!="string")return r;var a;if(Gs(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return uo(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},g8=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function $o(e,t,n){return tt(e)&&tt(t)?e+n*(t-e):t}function b8(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):zx(r,t))===n)}var Rr=e=>e===null||typeof e>"u",GT=e=>Rr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function cpe(e){return e!=null}function Vp(){}var y8=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,YT=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{BT(i)&&(r[i]=(a=>n[i](n,a)))}),r},upe=(e,t,n)=>r=>(e(t,n,r),null),dpe=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];BT(i)&&typeof a=="function"&&(r||(r={}),r[i]=upe(a,t,n))}),r};function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fpe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(r){hpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hpe(e,t,n){return(t=mpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mpe(e){var t=ppe(e,"string");return typeof t=="symbol"?t:t+""}function ppe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aa(e,t){var n=fpe({},e),r=t,i=Object.keys(t),a=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return a}var jS={},TS={},u3;function gpe(){return u3||(u3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],l=r(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})(TS)),TS}var AS={},d3;function v8(){return d3||(d3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(AS)),AS}var NS={},OS={},CS={},f3;function bpe(){return f3||(f3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(CS)),CS}var h3;function qT(){return h3||(h3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bpe();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(OS)),OS}var MS={},m3;function ype(){return m3||(m3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(MS)),MS}var p3;function vpe(){return p3||(p3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qT(),n=ype();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(NS)),NS}var DS={},PS={},g3;function xpe(){return g3||(g3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HT();function n(r){return function(i){return t.get(i,r)}}e.property=n})(PS)),PS}var RS={},LS={},IS={},$S={},b3;function x8(){return b3||(b3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})($S)),$S}var BS={},y3;function w8(){return y3||(y3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(BS)),BS}var zS={},v3;function _8(){return v3||(v3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(zS)),zS}var x3;function wpe(){return x3||(x3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x8(),n=w8(),r=_8();function i(h,m,b){return typeof b!="function"?i(h,m,()=>{}):a(h,m,function y(k,w,_,T,N,j){const C=b(k,w,_,T,N,j);return C!==void 0?!!C:a(k,w,y,j)},new Map)}function a(h,m,b,y){if(m===h)return!0;switch(typeof m){case"object":return o(h,m,b,y);case"function":return Object.keys(m).length>0?a(h,{...m},b,y):r.eq(h,m);default:return t.isObject(h)?typeof m=="string"?m==="":!0:r.eq(h,m)}}function o(h,m,b,y){if(m==null)return!0;if(Array.isArray(m))return u(h,m,b,y);if(m instanceof Map)return l(h,m,b,y);if(m instanceof Set)return d(h,m,b,y);const k=Object.keys(m);if(h==null)return k.length===0;if(k.length===0)return!0;if(y?.has(m))return y.get(m)===h;y?.set(m,h);try{for(let w=0;w<k.length;w++){const _=k[w];if(!n.isPrimitive(h)&&!(_ in h)||m[_]===void 0&&h[_]!==void 0||m[_]===null&&h[_]!==null||!b(h[_],m[_],_,h,m,y))return!1}return!0}finally{y?.delete(m)}}function l(h,m,b,y){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[k,w]of m.entries()){const _=h.get(k);if(b(_,w,k,h,m,y)===!1)return!1}return!0}function u(h,m,b,y){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const k=new Set;for(let w=0;w<m.length;w++){const _=m[w];let T=!1;for(let N=0;N<h.length;N++){if(k.has(N))continue;const j=h[N];let C=!1;if(b(j,_,w,h,m,y)&&(C=!0),C){k.add(N),T=!0;break}}if(!T)return!1}return!0}function d(h,m,b,y){return m.size===0?!0:h instanceof Set?u([...h],[...m],b,y):!1}e.isMatchWith=i,e.isSetMatch=d})(IS)),IS}var w3;function S8(){return w3||(w3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wpe();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(LS)),LS}var US={},FS={},HS={},_3;function _pe(){return _3||(_3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(HS)),HS}var GS={},S3;function k8(){return S3||(S3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(GS)),GS}var YS={},k3;function E8(){return k3||(k3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",b="[object ArrayBuffer]",y="[object Object]",k="[object Error]",w="[object DataView]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",N="[object Uint16Array]",j="[object Uint32Array]",C="[object BigUint64Array]",M="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",z="[object BigInt64Array]",K="[object Float32Array]",G="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=z,e.bigUint64ArrayTag=C,e.booleanTag=i,e.dataViewTag=w,e.dateTag=l,e.errorTag=k,e.float32ArrayTag=K,e.float64ArrayTag=G,e.functionTag=m,e.int16ArrayTag=P,e.int32ArrayTag=I,e.int8ArrayTag=M,e.mapTag=u,e.numberTag=r,e.objectTag=y,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=j,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=T})(YS)),YS}var qS={},E3;function Spe(){return E3||(E3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(qS)),qS}var j3;function j8(){return j3||(j3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_pe(),n=k8(),r=E8(),i=w8(),a=Spe();function o(h,m){return l(h,void 0,h,new Map,m)}function l(h,m,b,y=new Map,k=void 0){const w=k?.(h,m,b,y);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const _=new Array(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return Object.hasOwn(h,"index")&&(_.index=h.index),Object.hasOwn(h,"input")&&(_.input=h.input),_}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const _=new RegExp(h.source,h.flags);return _.lastIndex=h.lastIndex,_}if(h instanceof Map){const _=new Map;y.set(h,_);for(const[T,N]of h)_.set(T,l(N,T,b,y,k));return _}if(h instanceof Set){const _=new Set;y.set(h,_);for(const T of h)_.add(l(T,void 0,b,y,k));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const _=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return _}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const _=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,_),u(_,h,b,y,k),_}if(typeof File<"u"&&h instanceof File){const _=new File([h],h.name,{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(typeof Blob<"u"&&h instanceof Blob){const _=new Blob([h],{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Error){const _=new h.constructor;return y.set(h,_),_.message=h.message,_.name=h.name,_.stack=h.stack,_.cause=h.cause,u(_,h,b,y,k),_}if(h instanceof Boolean){const _=new Boolean(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Number){const _=new Number(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof String){const _=new String(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(typeof h=="object"&&d(h)){const _=Object.create(Object.getPrototypeOf(h));return y.set(h,_),u(_,h,b,y,k),_}return h}function u(h,m,b=h,y,k){const w=[...Object.keys(m),...t.getSymbols(m)];for(let _=0;_<w.length;_++){const T=w[_],N=Object.getOwnPropertyDescriptor(h,T);(N==null||N.writable)&&(h[T]=l(m[T],T,b,y,k))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=u})(FS)),FS}var T3;function kpe(){return T3||(T3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j8();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(US)),US}var A3;function Epe(){return A3||(A3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S8(),n=kpe();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(RS)),RS}var KS={},WS={},VS={},N3;function jpe(){return N3||(N3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j8(),n=E8();function r(i,a){return t.cloneDeepWith(i,(o,l,u,d)=>{const h=a?.(o,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(VS)),VS}var O3;function Tpe(){return O3||(O3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jpe();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(WS)),WS}var ZS={},XS={},C3;function T8(){return C3||(C3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(XS)),XS}var JS={},M3;function Ape(){return M3||(M3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k8();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(JS)),JS}var D3;function Npe(){return D3||(D3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p8(),n=T8(),r=Ape(),i=FT();function a(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let h=0;h<u.length;h++){const m=u[h];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}e.has=a})(ZS)),ZS}var P3;function Ope(){return P3||(P3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S8(),n=UT(),r=Tpe(),i=HT(),a=Npe();function o(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?a.has(d,l):u===void 0?h===void 0:t.isMatch(h,u)}}e.matchesProperty=o})(KS)),KS}var R3;function Cpe(){return R3||(R3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v8(),n=xpe(),r=Epe(),i=Ope();function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(DS)),DS}var L3;function Mpe(){return L3||(L3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gpe(),n=v8(),r=vpe(),i=Cpe();function a(o,l=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(l)):[]}e.uniqBy=a})(jS)),jS}var QS,I3;function Dpe(){return I3||(I3=1,QS=Mpe().uniqBy),QS}var Ppe=Dpe();const $3=Ci(Ppe);function Rpe(e,t,n){return t===!0?$3(e,n):typeof t=="function"?$3(e,t):e}var ek={exports:{}},tk={},nk={exports:{}},rk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B3;function Lpe(){if(B3)return rk;B3=1;var e=Nf();function t(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(m,b){var y=b(),k=r({inst:{value:y,getSnapshot:b}}),w=k[0].inst,_=k[1];return a(function(){w.value=y,w.getSnapshot=b,u(w)&&_({inst:w})},[m,y,b]),i(function(){return u(w)&&_({inst:w}),m(function(){u(w)&&_({inst:w})})},[m]),o(y),y}function u(m){var b=m.getSnapshot;m=m.value;try{var y=b();return!n(m,y)}catch{return!0}}function d(m,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return rk.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,rk}var z3;function Ipe(){return z3||(z3=1,nk.exports=Lpe()),nk.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U3;function $pe(){if(U3)return tk;U3=1;var e=Nf(),t=Ipe();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return tk.useSyncExternalStoreWithSelector=function(d,h,m,b,y){var k=a(null);if(k.current===null){var w={hasValue:!1,value:null};k.current=w}else w=k.current;k=l(function(){function T(P){if(!N){if(N=!0,j=P,P=b(P),y!==void 0&&w.hasValue){var I=w.value;if(y(I,P))return C=I}return C=P}if(I=C,r(j,P))return I;var z=b(P);return y!==void 0&&y(I,z)?(j=P,I):(j=P,C=z)}var N=!1,j,C,M=m===void 0?null:m;return[function(){return T(h())},M===null?void 0:function(){return T(M())}]},[h,m,b,y]);var _=i(d,k[0],k[1]);return o(function(){w.hasValue=!0,w.value=_},[_]),u(_),_},tk}var F3;function Bpe(){return F3||(F3=1,ek.exports=$pe()),ek.exports}var zpe=Bpe(),KT=S.createContext(null),Upe=e=>e,Sr=()=>{var e=S.useContext(KT);return e?e.store.dispatch:Upe},my=()=>{},Fpe=()=>my,Hpe=(e,t)=>e===t;function it(e){var t=S.useContext(KT);return zpe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Fpe,t?t.store.getState:my,t?t.store.getState:my,t?e:my,Hpe)}function Gpe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ype(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function qpe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var H3=e=>Array.isArray(e)?e:[e];function Kpe(e){const t=Array.isArray(e[0])?e[0]:e;return qpe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Wpe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Vpe=class{constructor(e){this.value=e}deref(){return this.value}},Zpe=typeof WeakRef<"u"?WeakRef:Vpe,Xpe=0,G3=1;function Ab(){return{s:Xpe,v:void 0,o:null,p:null}}function A8(e,t={}){let n=Ab();const{resultEqualityCheck:r}=t;let i,a=0;function o(){let l=n;const{length:u}=arguments;for(let m=0,b=u;m<b;m++){const y=arguments[m];if(typeof y=="function"||typeof y=="object"&&y!==null){let k=l.o;k===null&&(l.o=k=new WeakMap);const w=k.get(y);w===void 0?(l=Ab(),k.set(y,l)):l=w}else{let k=l.p;k===null&&(l.p=k=new Map);const w=k.get(y);w===void 0?(l=Ab(),k.set(y,l)):l=w}}const d=l;let h;if(l.s===G3)h=l.v;else if(h=e.apply(null,arguments),a++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Zpe(h):h}return d.s=G3,d.v=h,h}return o.clearCache=()=>{n=Ab(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Jpe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),Gpe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...u},{memoize:m,memoizeOptions:b=[],argsMemoize:y=A8,argsMemoizeOptions:k=[]}=h,w=H3(b),_=H3(k),T=Kpe(i),N=m(function(){return a++,d.apply(null,arguments)},...w),j=y(function(){o++;const M=Wpe(T,arguments);return l=N.apply(null,M),l},..._);return Object.assign(j,{resultFunc:d,memoizedResultFunc:N,dependencies:T,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var _e=Jpe(A8),Qpe=Object.assign((e,t=_e)=>{Ype(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>Qpe}),ik={},ak={},ok={},Y3;function e0e(){return Y3||(Y3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),l=t(i);if(o===l&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=n})(ok)),ok}var sk={},lk={},q3;function N8(){return q3||(q3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(lk)),lk}var K3;function t0e(){return K3||(K3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N8(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(sk)),sk}var W3;function n0e(){return W3||(W3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e0e(),n=t0e(),r=FT();function i(a,o,l,u){if(a==null)return[];l=u?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,k)=>{let w=y;for(let _=0;_<k.length&&w!=null;++_)w=w[k[_]];return w},h=(y,k)=>k==null||y==null?k:typeof y=="object"&&"key"in y?Object.hasOwn(k,y.key)?k[y.key]:d(k,y.path):typeof y=="function"?y(k):Array.isArray(y)?d(k,y):typeof k=="object"?k[y]:k,m=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:m.map(k=>h(k,y))})).slice().sort((y,k)=>{for(let w=0;w<m.length;w++){const _=t.compareValues(y.criteria[w],k.criteria[w],l[w]);if(_!==0)return _}return 0}).map(y=>y.original)}e.orderBy=i})(ak)),ak}var ck={},V3;function r0e(){return V3||(V3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<a?o(h,u+1):i.push(h)}};return o(n,0),i}e.flatten=t})(ck)),ck}var uk={},Z3;function O8(){return Z3||(Z3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T8(),n=qT(),r=x8(),i=_8();function a(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&t.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],o):!1}e.isIterateeCall=a})(uk)),uk}var X3;function i0e(){return X3||(X3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n0e(),n=r0e(),r=O8();function i(a,...o){const l=o.length;return l>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(ik)),ik}var dk,J3;function a0e(){return J3||(J3=1,dk=i0e().sortBy),dk}var o0e=a0e();const Ux=Ci(o0e);var C8=e=>e.legend.settings,s0e=e=>e.legend.size,l0e=e=>e.legend.payload;_e([l0e,C8],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Ux(r,n):r});var Nb=1;function c0e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>Nb||Math.abs(o.left-t.left)>Nb||Math.abs(o.top-t.top)>Nb||Math.abs(o.width-t.width)>Nb)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var M8=Symbol.for("immer-nothing"),Q3=Symbol.for("immer-draftable"),ai=Symbol.for("immer-state");function io(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xi=Object,Sf=Xi.getPrototypeOf,mv="constructor",Fx="prototype",p2="configurable",pv="enumerable",py="writable",bp="value",Ys=e=>!!e&&!!e[ai];function fo(e){return e?D8(e)||Hx(e)||!!e[Q3]||!!e[mv]?.[Q3]||Gx(e)||Yx(e):!1}var u0e=Xi[Fx][mv].toString(),eL=new WeakMap;function D8(e){if(!e||!WT(e))return!1;const t=Sf(e);if(t===null||t===Xi[Fx])return!0;const n=Xi.hasOwnProperty.call(t,mv)&&t[mv];if(n===Object)return!0;if(!Wd(n))return!1;let r=eL.get(n);return r===void 0&&(r=Function.toString.call(n),eL.set(n,r)),r===u0e}function Zp(e,t,n=!0){Xp(e)===0?(n?Reflect.ownKeys(e):Xi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Xp(e){const t=e[ai];return t?t.type_:Hx(e)?1:Gx(e)?2:Yx(e)?3:0}var tL=(e,t,n=Xp(e))=>n===2?e.has(t):Xi[Fx].hasOwnProperty.call(e,t),g2=(e,t,n=Xp(e))=>n===2?e.get(t):e[t],gv=(e,t,n,r=Xp(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function d0e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Hx=Array.isArray,Gx=e=>e instanceof Map,Yx=e=>e instanceof Set,WT=e=>typeof e=="object",Wd=e=>typeof e=="function",fk=e=>typeof e=="boolean",As=e=>e.copy_||e.base_,VT=e=>e.modified_?e.copy_:e.base_;function b2(e,t){if(Gx(e))return new Map(e);if(Yx(e))return new Set(e);if(Hx(e))return Array[Fx].slice.call(e);const n=D8(e);if(t===!0||t==="class_only"&&!n){const r=Xi.getOwnPropertyDescriptors(e);delete r[ai];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l[py]===!1&&(l[py]=!0,l[p2]=!0),(l.get||l.set)&&(r[o]={[p2]:!0,[py]:!0,[pv]:l[pv],[bp]:e[o]})}return Xi.create(Sf(e),r)}else{const r=Sf(e);if(r!==null&&n)return{...e};const i=Xi.create(r);return Xi.assign(i,e)}}function ZT(e,t=!1){return qx(e)||Ys(e)||!fo(e)||(Xp(e)>1&&Xi.defineProperties(e,{set:Ob,add:Ob,clear:Ob,delete:Ob}),Xi.freeze(e),t&&Zp(e,(n,r)=>{ZT(r,!0)},!1)),e}function f0e(){io(2)}var Ob={[bp]:f0e};function qx(e){return e===null||!WT(e)?!0:Xi.isFrozen(e)}var bv="MapSet",y2="Patches",P8={};function kf(e){const t=P8[e];return t||io(0,e),t}var h0e=e=>!!P8[e],yp,R8=()=>yp,m0e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:h0e(bv)?kf(bv):void 0});function nL(e,t){t&&(e.patchPlugin_=kf(y2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function v2(e){x2(e),e.drafts_.forEach(p0e),e.drafts_=null}function x2(e){e===yp&&(yp=e.parent_)}var rL=e=>yp=m0e(yp,e);function p0e(e){const t=e[ai];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function iL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[ai].modified_&&(v2(t),io(4)),fo(e)&&(e=aL(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[ai].base_,e,t)}else e=aL(t,n);return g0e(t,e,!0),v2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==M8?e:void 0}function aL(e,t){if(qx(t))return t;const n=t[ai];if(!n)return XT(t,e.handledSet_,e);if(!Kx(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);$8(n,e)}return n.copy_}function g0e(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ZT(t,n)}function L8(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Kx=(e,t)=>e.scope_===t,b0e=[];function I8(e,t,n,r){const i=As(e),a=e.type_;if(r!==void 0&&g2(i,r,a)===t){gv(i,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Zp(i,(u,d)=>{if(Ys(d)){const h=l.get(d)||[];h.push(u),l.set(d,h)}})}const o=e.draftLocations_.get(t)??b0e;for(const l of o)gv(i,l,n,a)}function y0e(e,t,n){e.callbacks_.push(function(i){const a=t;if(!a||!Kx(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const o=VT(a);I8(e,a.draft_??a,o,n),$8(a,i)})}function $8(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}L8(e)}}function v0e(e,t,n){const{scope_:r}=e;if(Ys(n)){const i=n[ai];Kx(i,r)&&i.callbacks_.push(function(){gy(e);const o=VT(i);I8(e,n,o,t)})}else fo(n)&&e.callbacks_.push(function(){const a=As(e);g2(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&XT(g2(e.copy_,t,e.type_),r.handledSet_,r)})}function XT(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ys(e)||t.has(e)||!fo(e)||qx(e)||(t.add(e),Zp(e,(r,i)=>{if(Ys(i)){const a=i[ai];if(Kx(a,n)){const o=VT(a);gv(e,r,o,e.type_),L8(a)}}else fo(i)&&XT(i,t,n)})),e}function x0e(e,t){const n=Hx(e),r={type_:n?1:0,scope_:t?t.scope_:R8(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=JT;n&&(i=[r],a=vp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,[l,r]}var JT={get(e,t){if(t===ai)return e;const n=As(e);if(!tL(n,t,e.type_))return w0e(e,n,t);const r=n[t];if(e.finalized_||!fo(r))return r;if(r===hk(e.base_,t)){gy(e);const i=e.type_===1?+t:t,a=_2(e.scope_,r,e,i);return e.copy_[i]=a}return r},has(e,t){return t in As(e)},ownKeys(e){return Reflect.ownKeys(As(e))},set(e,t,n){const r=B8(As(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=hk(As(e),t),a=i?.[ai];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(d0e(n,i)&&(n!==void 0||tL(e.base_,t,e.type_)))return!0;gy(e),w2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),v0e(e,t,n)),!0},deleteProperty(e,t){return gy(e),hk(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),w2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=As(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[py]:!0,[p2]:e.type_!==1||t!=="length",[pv]:r[pv],[bp]:n[t]}},defineProperty(){io(11)},getPrototypeOf(e){return Sf(e.base_)},setPrototypeOf(){io(12)}},vp={};Zp(JT,(e,t)=>{vp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});vp.deleteProperty=function(e,t){return vp.set.call(this,e,t,void 0)};vp.set=function(e,t,n){return JT.set.call(this,e[0],t,n,e[0])};function hk(e,t){const n=e[ai];return(n?As(n):e)[t]}function w0e(e,t,n){const r=B8(t,n);return r?bp in r?r[bp]:r.get?.call(e.draft_):void 0}function B8(e,t){if(!(t in e))return;let n=Sf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Sf(n)}}function w2(e){e.modified_||(e.modified_=!0,e.parent_&&w2(e.parent_))}function gy(e){e.copy_||(e.assigned_=new Map,e.copy_=b2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _0e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Wd(n)&&!Wd(r)){const o=r;r=n;const l=this;return function(d=o,...h){return l.produce(d,m=>r.call(this,m,...h))}}Wd(r)||io(6),i!==void 0&&!Wd(i)&&io(7);let a;if(fo(n)){const o=rL(this),l=_2(o,n,void 0);let u=!0;try{a=r(l),u=!1}finally{u?v2(o):x2(o)}return nL(o,i),iL(a,o)}else if(!n||!WT(n)){if(a=r(n),a===void 0&&(a=n),a===M8&&(a=void 0),this.autoFreeze_&&ZT(a,!0),i){const o=[],l=[];kf(y2).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:l}),i(o,l)}return a}else io(1,n)},this.produceWithPatches=(n,r)=>{if(Wd(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let i,a;return[this.produce(n,r,(l,u)=>{i=l,a=u}),i,a]},fk(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),fk(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),fk(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){fo(t)||io(8),Ys(t)&&(t=lo(t));const n=rL(this),r=_2(n,t,void 0);return r[ai].isManual_=!0,x2(n),r}finishDraft(t,n){const r=t&&t[ai];(!r||!r.isManual_)&&io(9);const{scope_:i}=r;return nL(i,n),iL(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=kf(y2).applyPatches_;return Ys(t)?i(t,n):this.produce(t,a=>i(a,n))}};function _2(e,t,n,r){const[i,a]=Gx(t)?kf(bv).proxyMap_(t,n):Yx(t)?kf(bv).proxySet_(t,n):x0e(t,n);return(n?.scope_??R8()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?y0e(n,a,r):a.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:d}=u;a.modified_&&d&&d.generatePatches_(a,[],u)}),i}function lo(e){return Ys(e)||io(10,e),z8(e)}function z8(e){if(!fo(e)||qx(e))return e;const t=e[ai];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=b2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=b2(e,!0);return Zp(n,(i,a)=>{gv(n,i,z8(a))},r),t&&(t.finalized_=!1),n}var S0e=new _0e,U8=S0e.produce;function F8(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var k0e=F8(),E0e=F8,j0e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xm:Xm.apply(null,arguments)};function Pa(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ea(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>U4(r)&&r.type===e,n}var H8=class Pm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pm.prototype)}static get[Symbol.species](){return Pm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pm(...t[0].concat(this)):new Pm(...t.concat(this))}};function oL(e){return fo(e)?U8(e,()=>{}):e}function Cb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function T0e(e){return typeof e=="boolean"}var A0e=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new H8;return n&&(T0e(n)?o.push(k0e):o.push(E0e(n.extraArgument))),o},G8="RTK_autoBatch",yn=()=>e=>({payload:e,meta:{[G8]:!0}}),sL=e=>t=>{setTimeout(t,e)},Y8=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:sL(10):e.type==="callback"?e.queueNotification:sL(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),b=r.subscribe(m);return l.add(h),()=>{b(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[G8],a=!i,a&&(o||(o=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},N0e=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new H8(e);return r&&i.push(Y8(typeof r=="object"?r:void 0)),i};function O0e(e){const t=A0e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if($j(n))l=B4(n);else throw new Error(ea(1));let u;typeof r=="function"?u=r(t):u=t();let d=Xm;i&&(d=j0e({trace:!1,...typeof i=="object"&&i}));const h=z4(...u),m=N0e(h);let b=typeof o=="function"?o(m):m();const y=d(...b);return Bj(l,a,y)}function q8(e){const t={},n=[];let r;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(ea(28));if(l in t)throw new Error(ea(29));return t[l]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function C0e(e){return typeof e=="function"}function M0e(e,t){let[n,r,i]=q8(t),a;if(C0e(e))a=()=>oL(e());else{const l=oL(e);a=()=>l}function o(l=a(),u){let d=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,m)=>{if(m)if(Ys(h)){const y=m(h,u);return y===void 0?h:y}else{if(fo(h))return U8(h,b=>m(b,u));{const b=m(h,u);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},l)}return o.getInitialState=a,o}var D0e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",P0e=(e=21)=>{let t="",n=e;for(;n--;)t+=D0e[Math.random()*64|0];return t},R0e=Symbol.for("rtk-slice-createasyncthunk");function L0e(e,t){return`${e}/${t}`}function I0e({creators:e}={}){const t=e?.asyncThunk?.[R0e];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ea(11));const o=(typeof r.reducers=="function"?r.reducers(B0e()):r.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,C){const M=typeof j=="string"?j:j.type;if(!M)throw new Error(ea(12));if(M in u.sliceCaseReducersByType)throw new Error(ea(13));return u.sliceCaseReducersByType[M]=C,d},addMatcher(j,C){return u.sliceMatchers.push({matcher:j,reducer:C}),d},exposeAction(j,C){return u.actionCreators[j]=C,d},exposeCaseReducer(j,C){return u.sliceCaseReducersByName[j]=C,d}};l.forEach(j=>{const C=o[j],M={reducerName:j,type:L0e(i,j),createNotation:typeof r.reducers=="function"};U0e(C)?H0e(M,C,d,t):z0e(M,C,d)});function h(){const[j={},C=[],M=void 0]=typeof r.extraReducers=="function"?q8(r.extraReducers):[r.extraReducers],P={...j,...u.sliceCaseReducersByType};return M0e(r.initialState,I=>{for(let z in P)I.addCase(z,P[z]);for(let z of u.sliceMatchers)I.addMatcher(z.matcher,z.reducer);for(let z of C)I.addMatcher(z.matcher,z.reducer);M&&I.addDefaultCase(M)})}const m=j=>j,b=new Map,y=new WeakMap;let k;function w(j,C){return k||(k=h()),k(j,C)}function _(){return k||(k=h()),k.getInitialState()}function T(j,C=!1){function M(I){let z=I[j];return typeof z>"u"&&C&&(z=Cb(y,M,_)),z}function P(I=m){const z=Cb(b,C,()=>new WeakMap);return Cb(z,I,()=>{const K={};for(const[G,H]of Object.entries(r.selectors??{}))K[G]=$0e(H,I,()=>Cb(y,I,_),C);return K})}return{reducerPath:j,getSelectors:P,get selectors(){return P(M)},selectSlice:M}}const N={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...T(a),injectInto(j,{reducerPath:C,...M}={}){const P=C??a;return j.inject({reducerPath:P,reducer:w},M),{...N,...T(P,!0)}}};return N}}function $0e(e,t,n,r){function i(a,...o){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var Mi=I0e();function B0e(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function z0e({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!F0e(r))throw new Error(ea(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Pa(e,o):Pa(e))}function U0e(e){return e._reducerDefinitionType==="asyncThunk"}function F0e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function H0e({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ea(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:d,options:h}=n,m=i(e,a,h);r.exposeAction(t,m),o&&r.addCase(m.fulfilled,o),l&&r.addCase(m.pending,l),u&&r.addCase(m.rejected,u),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Mb,pending:l||Mb,rejected:u||Mb,settled:d||Mb})}function Mb(){}var G0e="task",K8="listener",W8="completed",QT="cancelled",Y0e=`task-${QT}`,q0e=`task-${W8}`,S2=`${K8}-${QT}`,K0e=`${K8}-${W8}`,Wx=class{constructor(e){this.code=e,this.message=`${G0e} ${QT} (reason: ${e})`}name="TaskAbortError";message},eA=(e,t)=>{if(typeof e!="function")throw new TypeError(ea(32))},yv=()=>{},V8=(e,t=yv)=>(e.catch(t),e),Z8=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ju=e=>{if(e.aborted)throw new Wx(e.reason)};function X8(e,t){let n=yv;return new Promise((r,i)=>{const a=()=>i(new Wx(e.reason));if(e.aborted){a();return}n=Z8(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=yv})}var W0e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Wx?"cancelled":"rejected",error:n}}finally{t?.()}},vv=e=>t=>V8(X8(e,t).then(n=>(ju(e),n))),J8=e=>{const t=vv(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:df}=Object,lL={},Vx="listenerMiddleware",V0e=(e,t)=>{const n=r=>Z8(e,()=>r.abort(e.reason));return(r,i)=>{eA(r);const a=new AbortController;n(a);const o=W0e(async()=>{ju(e),ju(a.signal);const l=await r({pause:vv(a.signal),delay:J8(a.signal),signal:a.signal});return ju(a.signal),l},()=>a.abort(q0e));return i?.autoJoin&&t.push(o.catch(yv)),{result:vv(e)(o),cancel(){a.abort(Y0e)}}}},Z0e=(e,t)=>{const n=async(r,i)=>{ju(t);let a=()=>{};const l=[new Promise((u,d)=>{let h=e({predicate:r,effect:(m,b)=>{b.unsubscribe(),u([m,b.getState(),b.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await X8(t,Promise.race(l));return ju(t),u}finally{a()}};return(r,i)=>V8(n(r,i))},Q8=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=Pa(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ea(21));return eA(a),{predicate:i,type:t,effect:a}},ez=df(e=>{const{type:t,predicate:n,effect:r}=Q8(e);return{id:P0e(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ea(22))}}},{withTypes:()=>ez}),cL=(e,t)=>{const{type:n,effect:r,predicate:i}=Q8(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},k2=e=>{e.pending.forEach(t=>{t.abort(S2)})},X0e=(e,t)=>()=>{for(const n of t.keys())k2(n);e.clear()},uL=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},tz=df(Pa(`${Vx}/add`),{withTypes:()=>tz}),J0e=Pa(`${Vx}/removeAll`),nz=df(Pa(`${Vx}/remove`),{withTypes:()=>nz}),Q0e=(...e)=>{console.error(`${Vx}/error`,...e)},Jp=(e={})=>{const t=new Map,n=new Map,r=y=>{const k=n.get(y)??0;n.set(y,k+1)},i=y=>{const k=n.get(y)??1;k===1?n.delete(y):n.set(y,k-1)},{extra:a,onError:o=Q0e}=e;eA(o);const l=y=>(y.unsubscribe=()=>t.delete(y.id),t.set(y.id,y),k=>{y.unsubscribe(),k?.cancelActive&&k2(y)}),u=y=>{const k=cL(t,y)??ez(y);return l(k)};df(u,{withTypes:()=>u});const d=y=>{const k=cL(t,y);return k&&(k.unsubscribe(),y.cancelActive&&k2(k)),!!k};df(d,{withTypes:()=>d});const h=async(y,k,w,_)=>{const T=new AbortController,N=Z0e(u,T.signal),j=[];try{y.pending.add(T),r(y),await Promise.resolve(y.effect(k,df({},w,{getOriginalState:_,condition:(C,M)=>N(C,M).then(Boolean),take:N,delay:J8(T.signal),pause:vv(T.signal),extra:a,signal:T.signal,fork:V0e(T.signal,j),unsubscribe:y.unsubscribe,subscribe:()=>{t.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((C,M,P)=>{C!==T&&(C.abort(S2),P.delete(C))})},cancel:()=>{T.abort(S2),y.pending.delete(T)},throwIfCancelled:()=>{ju(T.signal)}})))}catch(C){C instanceof Wx||uL(o,C,{raisedBy:"effect"})}finally{await Promise.all(j),T.abort(K0e),i(y),y.pending.delete(T)}},m=X0e(t,n);return{middleware:y=>k=>w=>{if(!U4(w))return k(w);if(tz.match(w))return u(w.payload);if(J0e.match(w)){m();return}if(nz.match(w))return d(w.payload);let _=y.getState();const T=()=>{if(_===lL)throw new Error(ea(23));return _};let N;try{if(N=k(w),t.size>0){const j=y.getState(),C=Array.from(t.values());for(const M of C){let P=!1;try{P=M.predicate(w,j,_)}catch(I){P=!1,uL(o,I,{raisedBy:"predicate"})}P&&h(M,w,y,T)}}}finally{_=lL}return N},startListening:u,stopListening:d,clearListeners:m}};function ea(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ege={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},rz=Mi({name:"chartLayout",initialState:ege,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:tge,setLayout:nge,setChartSize:rge,setScale:ige}=rz.actions,age=rz.reducer;function iz(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function dL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(n),!0).forEach(function(r){oge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oge(e,t,n){return(t=sge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sge(e){var t=lge(e,"string");return typeof t=="symbol"?t:t+""}function lge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qr(e,t,n){return Rr(e)||Rr(t)?n:Wo(t)?zx(e,t,n):typeof t=="function"?t(e):n}var cge=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&tt(e[a]))return Qd(Qd({},e),{},{[a]:e[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&tt(e[o]))return Qd(Qd({},e),{},{[o]:e[o]+(i||0)})}return e},Js=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",az=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var i,a,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||o.push(t),a||o.push(n),o},oz=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:m,niceTicks:b,axisType:y}=e;if(!o)return null;var k=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/k:0;if(w=y==="angleAxis"&&a&&a.length>=2?Ta(a[0]-a[1])*2*w:w,m||b){var _=(m||b||[]).map((T,N)=>{var j=r?r.indexOf(T):T;return{coordinate:o(j)+w,value:T,offset:w,index:N}});return _.filter(T=>!uo(T.coordinate))}return u&&d?d.map((T,N)=>({coordinate:o(T)+w,value:T,index:N,offset:w})):o.ticks&&h!=null?o.ticks(h).map((T,N)=>({coordinate:o(T)+w,value:T,offset:w,index:N})):o.domain().map((T,N)=>({coordinate:o(T)+w,value:r?r[T]:T,index:N,offset:w}))},fL=1e-4,uge=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-fL,a=Math.max(r[0],r[1])+fL,o=e(t[0]),l=e(t[n-1]);(o<i||o>a||l<i||l>a)&&e.domain([t[0],t[n-1]])}},dge=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var l=uo(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1])}},fge=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=uo(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},hge={sign:dge,expand:tpe,none:_f,silhouette:npe,wiggle:rpe,positive:fge},mge=(e,t,n)=>{var r=hge[n],i=epe().keys(t).value((a,o)=>Number(qr(a,o,0))).order(m2).offset(r);return i(e)};function pge(e){return e==null?void 0:String(e)}function hL(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Rr(i[t.dataKey])){var l=b8(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=qr(i,Rr(o)?t.dataKey:o);return Rr(u)?null:t.scale(u)}var gge=e=>{var t=e.flat(2).filter(tt);return[Math.min(...t),Math.max(...t)]},bge=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],yge=(e,t,n)=>{if(e!=null)return bge(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,l=o.reduce((u,d)=>{var h=iz(d,t,n),m=gge(h);return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},mL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Ux(t,h=>h.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function gL(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Qd(Qd({},t),{},{dataKey:n,payload:r,value:i,name:a})}function sz(e,t){if(e)return String(e);if(typeof t=="string")return t}var vge=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},xge=(e,t)=>t==="centric"?e.angle:e.radius,Qs=e=>e.layout.width,el=e=>e.layout.height,wge=e=>e.layout.scale,lz=e=>e.layout.margin,Zx=_e(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Xx=_e(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),_ge="data-recharts-item-index",Sge="data-recharts-item-data-key",Qp=60;function bL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Db(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bL(Object(n),!0).forEach(function(r){kge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kge(e,t,n){return(t=Ege(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ege(e){var t=jge(e,"string");return typeof t=="symbol"?t:t+""}function jge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tge=e=>e.brush.height;function Age(e){var t=Xx(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Qp;return n+i}return n},0)}function Nge(e){var t=Xx(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Qp;return n+i}return n},0)}function Oge(e){var t=Zx(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Cge(e){var t=Zx(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var $r=_e([Qs,el,lz,Tge,Age,Nge,Oge,Cge,C8,s0e],(e,t,n,r,i,a,o,l,u,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},m={top:(n.top||0)+o,bottom:(n.bottom||0)+l},b=Db(Db({},m),h),y=b.bottom;b.bottom+=r,b=cge(b,u,d);var k=e-b.left-b.right,w=t-b.top-b.bottom;return Db(Db({brushBottom:y},b),{},{width:Math.max(k,0),height:Math.max(w,0)})}),Mge=_e($r,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),cz=_e(Qs,el,(e,t)=>({x:0,y:0,width:e,height:t})),Dge=S.createContext(null),Di=()=>S.useContext(Dge)!=null,Jx=e=>e.brush,Qx=_e([Jx,$r,lz],(e,t,n)=>({height:e.height,x:tt(e.x)?e.x:t.left,y:tt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:tt(e.width)?e.width:t.width})),mk={},pk={},gk={},yL;function Pge(){return yL||(yL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,l=null;const u=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},m=()=>{d&&h(),w()};let b=null;const y=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,m()},r)},k=()=>{b!==null&&(clearTimeout(b),b=null)},w=()=>{k(),o=void 0,l=null},_=()=>{h()},T=function(...N){if(i?.aborted)return;o=this,l=N;const j=b==null;y(),u&&j&&h()};return T.schedule=y,T.cancel=w,T.flush=_,i?.addEventListener("abort",w,{once:!0}),T}e.debounce=t})(gk)),gk}var vL;function Rge(){return vL||(vL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pge();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:u}=a,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let h,m=null;const b=t.debounce(function(...w){h=r.apply(this,w),m=null},i,{edges:d}),y=function(...w){return u!=null&&(m===null&&(m=Date.now()),Date.now()-m>=u)?(h=r.apply(this,w),m=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,w),h)},k=()=>(b.flush(),h);return y.cancel=b.cancel,y.flush=k,y}e.debounce=n})(pk)),pk}var xL;function Lge(){return xL||(xL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rge();function n(r,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(mk)),mk}var bk,wL;function Ige(){return wL||(wL=1,bk=Lge().throttle),bk}var $ge=Ige();const Bge=Ci($ge);var wv=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},uz=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,l=Gs(r)?e:Number(r),u=Gs(i)?t:Number(i);return a&&a>0&&(l?u=l/a:u&&(l=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},zge={width:0,height:0,overflow:"visible"},Uge={width:0,overflowX:"visible"},Fge={height:0,overflowY:"visible"},Hge={},Gge=e=>{var{width:t,height:n}=e,r=Gs(t),i=Gs(n);return r&&i?zge:r?Uge:i?Fge:Hge};function Yge(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Pn(e){return Number.isFinite(e)}function Vo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E2.apply(null,arguments)}function _L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_L(Object(n),!0).forEach(function(r){qge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qge(e,t,n){return(t=Kge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kge(e){var t=Wge(e,"string");return typeof t=="symbol"?t:t+""}function Wge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dz=S.createContext({width:-1,height:-1});function Vge(e){return Vo(e.width)&&Vo(e.height)}function fz(e){var{children:t,width:n,height:r}=e,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return Vge(i)?S.createElement(dz.Provider,{value:i},t):null}var tA=()=>S.useContext(dz),Zge=S.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:m,className:b,onResize:y,style:k={}}=e,w=S.useRef(null),_=S.useRef();_.current=y,S.useImperativeHandle(t,()=>w.current);var[T,N]=S.useState({containerWidth:r.width,containerHeight:r.height}),j=S.useCallback((z,K)=>{N(G=>{var H=Math.round(z),B=Math.round(K);return G.containerWidth===H&&G.containerHeight===B?G:{containerWidth:H,containerHeight:B}})},[]);S.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Vp;var z=B=>{var q,{width:X,height:V}=B[0].contentRect;j(X,V),(q=_.current)===null||q===void 0||q.call(_,X,V)};h>0&&(z=Bge(z,h,{trailing:!0,leading:!1}));var K=new ResizeObserver(z),{width:G,height:H}=w.current.getBoundingClientRect();return j(G,H),K.observe(w.current),()=>{K.disconnect()}},[j,h]);var{containerWidth:C,containerHeight:M}=T;wv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:I}=uz(C,M,{width:i,height:a,aspect:n,maxHeight:u});return wv(P!=null&&P>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,I,i,a,o,l,n),S.createElement("div",{id:m?"".concat(m):void 0,className:fn("recharts-responsive-container",b),style:SL(SL({},k),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:u}),ref:w},S.createElement("div",{style:Gge({width:i,height:a})},S.createElement(fz,{width:P,height:I},d)))}),Xge=S.forwardRef((e,t)=>{var n=tA();if(Vo(n.width)&&Vo(n.height))return e.children;var{width:r,height:i}=Yge({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=uz(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return tt(a)&&tt(o)?S.createElement(fz,{width:a,height:o},e.children):S.createElement(Zge,E2({},e,{width:r,height:i,ref:t}))});function hz(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ew=()=>{var e,t=Di(),n=it(Mge),r=it(Qx),i=(e=it(Jx))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Jge={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},mz=()=>{var e;return(e=it($r))!==null&&e!==void 0?e:Jge},pz=()=>it(Qs),gz=()=>it(el),sn=e=>e.layout.layoutType,e0=()=>it(sn),Qge=()=>{var e=e0();if(e==="horizontal"||e==="vertical")return e},ebe=()=>{var e=e0();return e!==void 0},tw=e=>{var t=Sr(),n=Di(),{width:r,height:i}=e,a=tA(),o=r,l=i;return a&&(o=a.width>0?a.width:r,l=a.height>0?a.height:i),S.useEffect(()=>{!n&&Vo(o)&&Vo(l)&&t(rge({width:o,height:l}))},[t,n,o,l]),null},bz=Symbol.for("immer-nothing"),kL=Symbol.for("immer-draftable"),ra=Symbol.for("immer-state");function ao(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xp=Object.getPrototypeOf;function Ef(e){return!!e&&!!e[ra]}function Du(e){return e?yz(e)||Array.isArray(e)||!!e[kL]||!!e.constructor?.[kL]||t0(e)||rw(e):!1}var tbe=Object.prototype.constructor.toString(),EL=new WeakMap;function yz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=EL.get(n);return r===void 0&&(r=Function.toString.call(n),EL.set(n,r)),r===tbe}function _v(e,t,n=!0){nw(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function nw(e){const t=e[ra];return t?t.type_:Array.isArray(e)?1:t0(e)?2:rw(e)?3:0}function j2(e,t){return nw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vz(e,t,n){const r=nw(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nbe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function t0(e){return e instanceof Map}function rw(e){return e instanceof Set}function fu(e){return e.copy_||e.base_}function T2(e,t){if(t0(e))return new Map(e);if(rw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=yz(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ra];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(xp(e),r)}else{const r=xp(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function nA(e,t=!1){return iw(e)||Ef(e)||!Du(e)||(nw(e)>1&&Object.defineProperties(e,{set:Pb,add:Pb,clear:Pb,delete:Pb}),Object.freeze(e),t&&Object.values(e).forEach(n=>nA(n,!0))),e}function rbe(){ao(2)}var Pb={value:rbe};function iw(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var ibe={};function Pu(e){const t=ibe[e];return t||ao(0,e),t}var wp;function xz(){return wp}function abe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jL(e,t){t&&(Pu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function A2(e){N2(e),e.drafts_.forEach(obe),e.drafts_=null}function N2(e){e===wp&&(wp=e.parent_)}function TL(e){return wp=abe(wp,e)}function obe(e){const t=e[ra];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function AL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ra].modified_&&(A2(t),ao(4)),Du(e)&&(e=Sv(t,e),t.parent_||kv(t,e)),t.patches_&&Pu("Patches").generateReplacementPatches_(n[ra].base_,e,t.patches_,t.inversePatches_)):e=Sv(t,n,[]),A2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bz?e:void 0}function Sv(e,t,n){if(iw(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[ra];if(!i)return _v(t,(a,o)=>NL(e,i,t,a,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return kv(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),_v(o,(u,d)=>NL(e,i,a,u,d,n,l),r),kv(e,a,!1),n&&e.patches_&&Pu("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function NL(e,t,n,r,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=iw(i);if(!(l&&!o)){if(Ef(i)){const u=a&&t&&t.type_!==3&&!j2(t.assigned_,r)?a.concat(r):void 0,d=Sv(e,i,u);if(vz(n,r,d),Ef(d))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Du(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&l)return;Sv(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(t0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&kv(e,i)}}}function kv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nA(t,n)}function sbe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:xz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=rA;n&&(i=[r],a=_p);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,l}var rA={get(e,t){if(t===ra)return e;const n=fu(e);if(!j2(n,t))return lbe(e,n,t);const r=n[t];return e.finalized_||!Du(r)?r:r===yk(e.base_,t)?(vk(e),e.copy_[t]=C2(r,e)):r},has(e,t){return t in fu(e)},ownKeys(e){return Reflect.ownKeys(fu(e))},set(e,t,n){const r=wz(fu(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=yk(fu(e),t),a=i?.[ra];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nbe(n,i)&&(n!==void 0||j2(e.base_,t)))return!0;vk(e),O2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yk(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vk(e),O2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=fu(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ao(11)},getPrototypeOf(e){return xp(e.base_)},setPrototypeOf(){ao(12)}},_p={};_v(rA,(e,t)=>{_p[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_p.deleteProperty=function(e,t){return _p.set.call(this,e,t,void 0)};_p.set=function(e,t,n){return rA.set.call(this,e[0],t,n,e[0])};function yk(e,t){const n=e[ra];return(n?fu(n):e)[t]}function lbe(e,t,n){const r=wz(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function wz(e,t){if(!(t in e))return;let n=xp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=xp(n)}}function O2(e){e.modified_||(e.modified_=!0,e.parent_&&O2(e.parent_))}function vk(e){e.copy_||(e.copy_=T2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cbe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(u=a,...d){return o.produce(u,h=>n.call(this,h,...d))}}typeof n!="function"&&ao(6),r!==void 0&&typeof r!="function"&&ao(7);let i;if(Du(t)){const a=TL(this),o=C2(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?A2(a):N2(a)}return jL(a,r),AL(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===bz&&(i=void 0),this.autoFreeze_&&nA(i,!0),r){const a=[],o=[];Pu("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else ao(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let r,i;return[this.produce(t,n,(o,l)=>{r=o,i=l}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Du(e)||ao(8),Ef(e)&&(e=ube(e));const t=TL(this),n=C2(e,void 0);return n[ra].isManual_=!0,N2(t),n}finishDraft(e,t){const n=e&&e[ra];(!n||!n.isManual_)&&ao(9);const{scope_:r}=n;return jL(r,t),AL(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Pu("Patches").applyPatches_;return Ef(e)?r(e,t):this.produce(e,i=>r(i,t))}};function C2(e,t){const n=t0(e)?Pu("MapSet").proxyMap_(e,t):rw(e)?Pu("MapSet").proxySet_(e,t):sbe(e,t);return(t?t.scope_:xz()).drafts_.push(n),n}function ube(e){return Ef(e)||ao(10,e),_z(e)}function _z(e){if(!Du(e)||iw(e))return e;const t=e[ra];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=T2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=T2(e,!0);return _v(n,(i,a)=>{vz(n,i,_z(a))},r),t&&(t.finalized_=!1),n}var dbe=new cbe;dbe.produce;var fbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Sz=Mi({name:"legend",initialState:fbe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:yn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=lo(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:yn()},removeLegendPayload:{reducer(e,t){var n=lo(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:yn()}}}),{setLegendSize:vDe,setLegendSettings:xDe,addLegendPayload:hbe,replaceLegendPayload:mbe,removeLegendPayload:pbe}=Sz.actions,gbe=Sz.reducer;function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M2.apply(null,arguments)}function OL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(n),!0).forEach(function(r){bbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bbe(e,t,n){return(t=ybe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ybe(e){var t=vbe(e,"string");return typeof t=="symbol"?t:t+""}function vbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xbe(e){return Array.isArray(e)&&Wo(e[0])&&Wo(e[1])?e.join(" ~ "):e}var wbe=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:m,accessibilityLayer:b=!1}=e,y=()=>{if(a&&a.length){var M={padding:0,margin:0},P=(l?Ux(a,l):a).map((I,z)=>{if(I.type==="none")return null;var K=I.formatter||o||xbe,{value:G,name:H}=I,B=G,q=H;if(K){var X=K(G,H,I,z,a);if(Array.isArray(X))[B,q]=X;else if(X!=null)B=X;else return null}var V=xk({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:V},Wo(q)?S.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Wo(q)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},B),S.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:M},P)}return null},k=xk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=xk({margin:0},i),_=!Rr(h),T=_?h:"",N=fn("recharts-default-tooltip",u),j=fn("recharts-tooltip-label",d);_&&m&&a!==void 0&&a!==null&&(T=m(h,a));var C=b?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",M2({className:N,style:k},C),S.createElement("p",{className:j,style:w},S.isValidElement(T)?T:"".concat(T)),y())},vm="recharts-tooltip-wrapper",_be={visibility:"hidden"};function Sbe(e){var{coordinate:t,translateX:n,translateY:r}=e;return fn(vm,{["".concat(vm,"-right")]:tt(n)&&t&&tt(t.x)&&n>=t.x,["".concat(vm,"-left")]:tt(n)&&t&&tt(t.x)&&n<t.x,["".concat(vm,"-bottom")]:tt(r)&&t&&tt(t.y)&&r>=t.y,["".concat(vm,"-top")]:tt(r)&&t&&tt(t.y)&&r<t.y})}function CL(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=e;if(a&&tt(a[r]))return a[r];var h=n[r]-l-(i>0?i:0),m=n[r]+i;if(t[r])return o[r]?h:m;var b=u[r];if(b==null)return 0;if(o[r]){var y=h,k=b;return y<k?Math.max(m,b):Math.max(h,b)}if(d==null)return 0;var w=m+l,_=b+d;return w>_?Math.max(h,b):Math.max(m,b)}function kbe(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Ebe(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:u}=e,d,h,m;return o.height>0&&o.width>0&&n?(h=CL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),m=CL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=kbe({translateX:h,translateY:m,useTranslate3d:l})):d=_be,{cssProperties:d,cssClasses:Sbe({translateX:h,translateY:m,coordinate:n})}}function ML(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(n),!0).forEach(function(r){D2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D2(e,t,n){return(t=jbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jbe(e){var t=Tbe(e,"string");return typeof t=="symbol"?t:t+""}function Tbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Abe extends S.PureComponent{constructor(){super(...arguments),D2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),D2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:m,useTranslate3d:b,viewBox:y,wrapperStyle:k,lastBoundingBox:w,innerRef:_,hasPortalFromProps:T}=this.props,{cssClasses:N,cssProperties:j}=Ebe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:m,tooltipBox:{height:w.height,width:w.width},useTranslate3d:b,viewBox:y}),C=T?{}:Rb(Rb({transition:u&&t?"transform ".concat(r,"ms ").concat(i):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),M=Rb(Rb({},C),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},k);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:M,ref:_},a)}}var kz=()=>{var e;return(e=it(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function P2(){return P2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P2.apply(null,arguments)}function DL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(n),!0).forEach(function(r){Nbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nbe(e,t,n){return(t=Obe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Obe(e){var t=Cbe(e,"string");return typeof t=="symbol"?t:t+""}function Cbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RL={curveBasisClosed:Hme,curveBasisOpen:Gme,curveBasis:Fme,curveBumpX:zme,curveBumpY:Ume,curveLinearClosed:Yme,curveLinear:$x,curveMonotoneX:qme,curveMonotoneY:Kme,curveNatural:Wme,curveStep:Vme,curveStepAfter:Xme,curveStepBefore:Zme},Ev=e=>Pn(e.x)&&Pn(e.y),LL=e=>e.base!=null&&Ev(e.base)&&Ev(e),xm=e=>e.x,wm=e=>e.y,Mbe=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(GT(e));return(n==="curveMonotone"||n==="curveBump")&&t?RL["".concat(n).concat(t==="vertical"?"Y":"X")]:RL[n]||$x},Dbe=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=Mbe(t,i),l=a?n.filter(Ev):n,u;if(Array.isArray(r)){var d=n.map((y,k)=>PL(PL({},y),{},{base:r[k]}));i==="vertical"?u=Tb().y(wm).x1(xm).x0(y=>y.base.x):u=Tb().x(xm).y1(wm).y0(y=>y.base.y);var h=u.defined(LL).curve(o),m=a?d.filter(LL):d;return h(m)}i==="vertical"&&tt(r)?u=Tb().y(wm).x1(xm).x0(r):tt(r)?u=Tb().x(xm).y1(wm).y0(r):u=o8().x(xm).y(wm);var b=u.defined(Ev).curve(o);return b(l)},by=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Dbe(e):r;return S.createElement("path",P2({},co(e),YT(e),{className:fn("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Pbe=["x","y","top","left","width","height","className"];function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R2.apply(null,arguments)}function IL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rbe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(n),!0).forEach(function(r){Lbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lbe(e,t,n){return(t=Ibe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ibe(e){var t=$be(e,"string");return typeof t=="symbol"?t:t+""}function $be(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bbe(e,t){if(e==null)return{};var n,r,i=zbe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zbe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ube=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),Fbe=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:l}=e,u=Bbe(e,Pbe),d=Rbe({x:t,y:n,top:r,left:i,width:a,height:o},u);return!tt(t)||!tt(n)||!tt(a)||!tt(o)||!tt(r)||!tt(i)?null:S.createElement("path",R2({},Da(d),{className:fn("recharts-cross",l),d:Ube(t,n,a,o,r,i)}))};function Hbe(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function $L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$L(Object(n),!0).forEach(function(r){Gbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$L(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gbe(e,t,n){return(t=Ybe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ybe(e){var t=qbe(e,"string");return typeof t=="symbol"?t:t+""}function qbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kbe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Wbe=(e,t,n)=>e.map(r=>"".concat(Kbe(r)," ").concat(t,"ms ").concat(n)).join(","),Vbe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Sp=(e,t)=>Object.keys(t).reduce((n,r)=>BL(BL({},n),{},{[r]:e(r,t[r])}),{});function zL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(n),!0).forEach(function(r){Zbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zbe(e,t,n){return(t=Xbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xbe(e){var t=Jbe(e,"string");return typeof t=="symbol"?t:t+""}function Jbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jv=(e,t,n)=>e+(t-e)*n,L2=e=>{var{from:t,to:n}=e;return t!==n},Ez=(e,t,n)=>{var r=Sp((i,a)=>{if(L2(a)){var[o,l]=e(a.from,a.to,a.velocity);return ir(ir({},a),{},{from:o,velocity:l})}return a},t);return n<1?Sp((i,a)=>L2(a)?ir(ir({},a),{},{velocity:jv(a.velocity,r[i].velocity,n),from:jv(a.from,r[i].from,n)}):a,t):Ez(e,r,n-1)};function Qbe(e,t,n,r,i,a){var o,l=r.reduce((b,y)=>ir(ir({},b),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),u=()=>Sp((b,y)=>y.from,l),d=()=>!Object.values(l).filter(L2).length,h=null,m=b=>{o||(o=b);var y=b-o,k=y/n.dt;l=Ez(n,l,k),i(ir(ir(ir({},e),t),u())),o=b,d()||(h=a.setTimeout(m))};return()=>(h=a.setTimeout(m),()=>{var b;(b=h)===null||b===void 0||b()})}function eye(e,t,n,r,i,a,o){var l=null,u=i.reduce((m,b)=>ir(ir({},m),{},{[b]:[e[b],t[b]]}),{}),d,h=m=>{d||(d=m);var b=(m-d)/r,y=Sp((w,_)=>jv(..._,n(b)),u);if(a(ir(ir(ir({},e),t),y)),b<1)l=o.setTimeout(h);else{var k=Sp((w,_)=>jv(..._,n(1)),u);a(ir(ir(ir({},e),t),k))}};return()=>(l=o.setTimeout(h),()=>{var m;(m=l)===null||m===void 0||m()})}const tye=(e,t,n,r,i,a)=>{var o=Vbe(e,t);return n==null?()=>(i(ir(ir({},e),t)),()=>{}):n.isStepper===!0?Qbe(e,t,n,o,i,a):eye(e,t,n,r,o,i,a)};var Tv=1e-4,jz=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Tz=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),UL=(e,t)=>n=>{var r=jz(e,t);return Tz(r,n)},nye=(e,t)=>n=>{var r=jz(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return Tz(i,n)},rye=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var o=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return n.length===4?n:[0,0,1,1]},iye=(e,t,n,r)=>{var i=UL(e,n),a=UL(t,r),o=nye(e,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,m=h,b=0;b<8;++b){var y=i(m)-h,k=o(m);if(Math.abs(y-h)<Tv||k<Tv)return a(m);m=l(m-y/k)}return a(m)};return u.isStepper=!1,u},FL=function(){return iye(...rye(...arguments))},aye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,l,u)=>{var d=-(o-l)*n,h=u*r,m=u+(d-h)*i/1e3,b=u*i/1e3+o;return Math.abs(b-l)<Tv&&Math.abs(m)<Tv?[l,0]:[b,m]};return a.isStepper=!0,a.dt=i,a},oye=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FL(e);case"spring":return aye();default:if(e.split("(")[0]==="cubic-bezier")return FL(e)}return typeof e=="function"?e:null};function sye(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){i=e.setTimeout(a.bind(null,d),u);return}a(u),i=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class lye{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function cye(){return sye(new lye)}var uye=S.createContext(cye);function dye(e,t){var n=S.useContext(uye);return S.useMemo(()=>t??n(e),[e,t,n])}var fye=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Hf={devToolsEnabled:!1,isSsr:fye()},hye={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},HL={t:0},wk={t:1};function Az(e){var t=aa(e,hye),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=t,h=n==="auto"?!Hf.isSsr:n,m=dye(t.animationId,t.animationManager),[b,y]=S.useState(h?HL:wk),k=S.useRef(null);return S.useEffect(()=>{h||y(wk)},[h]),S.useEffect(()=>{if(!h||!r)return Vp;var w=tye(HL,wk,oye(a),i,y,m.getTimeoutController()),_=()=>{k.current=w()};return m.start([u,o,_,i,l]),()=>{m.stop(),k.current&&k.current(),l()}},[h,r,i,a,o,u,l,m]),d(b.t)}function Nz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(gp(t)),r=S.useRef(e);return r.current!==e&&(n.current=gp(t),r.current=e),n.current}var mye=["radius"],pye=["radius"];function GL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GL(Object(n),!0).forEach(function(r){gye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gye(e,t,n){return(t=bye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bye(e){var t=yye(e,"string");return typeof t=="symbol"?t:t+""}function yye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(null,arguments)}function qL(e,t){if(e==null)return{};var n,r,i=vye(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var KL=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,b=4;m<b;m++)h[m]=i[m]>a?a:i[m];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(t)),d+="L ".concat(e+n-l*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(t+o*h[1])),d+="L ".concat(e+n,",").concat(t+r-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-l*h[2],",").concat(t+r)),d+="L ".concat(e+l*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+r-o*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+n-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n,",").concat(t+o*y,`
            L `).concat(e+n,",").concat(t+r-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n-l*y,",").concat(t+r,`
            L `).concat(e+l*y,",").concat(t+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(t+r-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},WL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xye=e=>{var t=aa(e,WL),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&i(Z)}catch{}},[]);var{x:a,y:o,width:l,height:u,radius:d,className:h}=t,{animationEasing:m,animationDuration:b,animationBegin:y,isAnimationActive:k,isUpdateAnimationActive:w}=t,_=S.useRef(l),T=S.useRef(u),N=S.useRef(a),j=S.useRef(o),C=S.useMemo(()=>({x:a,y:o,width:l,height:u,radius:d}),[a,o,l,u,d]),M=Nz(C,"rectangle-");if(a!==+a||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var P=fn("recharts-rectangle",h);if(!w){var I=Da(t),{radius:z}=I,K=qL(I,mye);return S.createElement("path",Av({},K,{radius:typeof d=="number"?d:void 0,className:P,d:KL(a,o,l,u,d)}))}var G=_.current,H=T.current,B=N.current,q=j.current,X="0px ".concat(r===-1?1:r,"px"),V="".concat(r,"px 0px"),F=Wbe(["strokeDasharray"],b,typeof m=="string"?m:WL.animationEasing);return S.createElement(Az,{animationId:M,key:M,canBegin:r>0,duration:b,easing:m,isActive:w,begin:y},Z=>{var Q=$o(G,l,Z),le=$o(H,u,Z),se=$o(B,a,Z),W=$o(q,o,Z);n.current&&(_.current=Q,T.current=le,N.current=se,j.current=W);var re;k?Z>0?re={transition:F,strokeDasharray:V}:re={strokeDasharray:X}:re={strokeDasharray:V};var ee=Da(t),{radius:he}=ee,J=qL(ee,pye);return S.createElement("path",Av({},J,{radius:typeof d=="number"?d:void 0,className:P,d:KL(se,W,Q,le,d),ref:n,style:YL(YL({},re),t.style)}))})};function VL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(n),!0).forEach(function(r){wye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wye(e,t,n){return(t=_ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ye(e){var t=Sye(e,"string");return typeof t=="symbol"?t:t+""}function Sye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nv=Math.PI/180,kye=e=>e*180/Math.PI,Pr=(e,t,n,r)=>({x:e+Math.cos(-Nv*r)*n,y:t+Math.sin(-Nv*r)*n}),Eye=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},jye=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},Tye=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=jye({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>a&&(u=2*Math.PI-u),{radius:o,angle:kye(u),angleInRadian:u}},Aye=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},Nye=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},Oye=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=Tye({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:d}=Aye(t),h=a,m;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;m=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=u}return m?ZL(ZL({},t),{},{radius:i,angle:Nye(h,t)}):null};function Oz(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=Pr(t,n,r,i),l=Pr(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function I2(){return I2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I2.apply(null,arguments)}var Cye=(e,t)=>{var n=Ta(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Lb=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:u}=e,d=l*(o?1:-1)+r,h=Math.asin(l/d)/Nv,m=u?i:i+a*h,b=Pr(t,n,d,m),y=Pr(t,n,r,m),k=u?i-a*h:i,w=Pr(t,n,d*Math.cos(h*Nv),k);return{center:b,circleTangency:y,lineTangency:w,theta:h}},Cz=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,l=Cye(a,o),u=a+l,d=Pr(t,n,i,a),h=Pr(t,n,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var b=Pr(t,n,r,a),y=Pr(t,n,r,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(b.x,",").concat(b.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},Mye=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=e,h=Ta(d-u),{circleTangency:m,lineTangency:b,theta:y}=Lb({cx:t,cy:n,radius:i,angle:u,sign:h,cornerRadius:a,cornerIsExternal:l}),{circleTangency:k,lineTangency:w,theta:_}=Lb({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:l}),T=l?Math.abs(u-d):Math.abs(u-d)-y-_;if(T<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Cz({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var N="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:j,lineTangency:C,theta:M}=Lb({cx:t,cy:n,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:P,lineTangency:I,theta:z}=Lb({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),K=l?Math.abs(u-d):Math.abs(u-d)-M-z;if(K<0&&a===0)return"".concat(N,"L").concat(t,",").concat(n,"Z");N+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(K>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(t,",").concat(n,"Z");return N},Dye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Pye=e=>{var t=aa(e,Dye),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:m}=t;if(a<i||d===h)return null;var b=fn("recharts-sector",m),y=a-i,k=cc(o,y,0,!0),w;return k>0&&Math.abs(d-h)<360?w=Mye({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(k,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):w=Cz({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),S.createElement("path",I2({},Da(t),{className:b,d:w}))};function Rye(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(y8(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:o,angle:l}=t,u=Pr(r,i,a,l),d=Pr(r,i,o,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return Oz(t)}}var _k={},Sk={},kk={},XL;function Lye(){return XL||(XL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N8();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(kk)),kk}var JL;function Iye(){return JL||(JL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lye();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Sk)),Sk}var QL;function $ye(){return QL||(QL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O8(),n=Iye();function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=o;return u}e.range=r})(_k)),_k}var Ek,eI;function Bye(){return eI||(eI=1,Ek=$ye().range),Ek}var zye=Bye();const Mz=Ci(zye);function ic(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Uye(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iA(e){let t,n,r;e.length!==2?(t=ic,n=(l,u)=>ic(e(l),u),r=(l,u)=>e(l)-u):(t=e===ic||e===Uye?e:Fye,n=e,r=e);function i(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const m=d+h>>>1;n(l[m],u)<0?d=m+1:h=m}while(d<h)}return d}function a(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const m=d+h>>>1;n(l[m],u)<=0?d=m+1:h=m}while(d<h)}return d}function o(l,u,d=0,h=l.length){const m=i(l,u,d,h-1);return m>d&&r(l[m-1],u)>-r(l[m],u)?m-1:m}return{left:i,center:o,right:a}}function Fye(){return 0}function Dz(e){return e===null?NaN:+e}function*Hye(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Gye=iA(ic),n0=Gye.right;iA(Dz).center;class tI extends Map{constructor(t,n=Kye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nI(this,t))}has(t){return super.has(nI(this,t))}set(t,n){return super.set(Yye(this,t),n)}delete(t){return super.delete(qye(this,t))}}function nI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Yye({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qye({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Kye(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wye(e=ic){if(e===ic)return Pz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Pz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Vye=Math.sqrt(50),Zye=Math.sqrt(10),Xye=Math.sqrt(2);function Ov(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Vye?10:a>=Zye?5:a>=Xye?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=n&&n<2?Ov(e,t,n*2):[l,u,d]}function $2(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Ov(t,e,n):Ov(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)u[d]=(a-d)/-o;else for(let d=0;d<l;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(i+d)/-o;else for(let d=0;d<l;++d)u[d]=(i+d)*o;return u}function B2(e,t,n){return t=+t,e=+e,n=+n,Ov(e,t,n)[2]}function z2(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?B2(t,e,n):B2(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function rI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function iI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Rz(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Pz:Wye(i);r>n;){if(r-n>600){const u=r-n+1,d=t-n+1,h=Math.log(u),m=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*m*(u-m)/u)*(d-u/2<0?-1:1),y=Math.max(n,Math.floor(t-d*m/u+b)),k=Math.min(r,Math.floor(t+(u-d)*m/u+b));Rz(e,t,y,k,i)}const a=e[t];let o=n,l=r;for(_m(e,n,t),i(e[r],a)>0&&_m(e,n,r);o<l;){for(_m(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?_m(e,n,l):(++l,_m(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function _m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Jye(e,t,n){if(e=Float64Array.from(Hye(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return iI(e);if(t>=1)return rI(e);var r,i=(r-1)*t,a=Math.floor(i),o=rI(Rz(e,a).subarray(0,a+1)),l=iI(e.subarray(a+1));return o+(l-o)*(i-a)}}function Qye(e,t,n=Dz){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function eve(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function tl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const U2=Symbol("implicit");function aA(){var e=new tI,t=[],n=[],r=U2;function i(a){let o=e.get(a);if(o===void 0){if(r!==U2)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new tI;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return aA(t,n).unknown(r)},Ba.apply(i,arguments),i}function oA(){var e=aA().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,u=0,d=0,h=.5;delete e.unknown;function m(){var b=t().length,y=i<r,k=y?i:r,w=y?r:i;a=(w-k)/Math.max(1,b-u+d*2),l&&(a=Math.floor(a)),k+=(w-k-a*(b-u))*h,o=a*(1-u),l&&(k=Math.round(k),o=Math.round(o));var _=eve(b).map(function(T){return k+a*T});return n(y?_.reverse():_)}return e.domain=function(b){return arguments.length?(t(b),m()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(b){return arguments.length?(l=!!b,m()):l},e.padding=function(b){return arguments.length?(u=Math.min(1,d=+b),m()):u},e.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),m()):u},e.paddingOuter=function(b){return arguments.length?(d=+b,m()):d},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),m()):h},e.copy=function(){return oA(t(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},Ba.apply(m(),arguments)}function Lz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Lz(t())},e}function tve(){return Lz(oA.apply(null,arguments).paddingInner(1))}function sA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Iz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r0(){}var kp=.7,Cv=1/kp,ff="\\s*([+-]?\\d+)\\s*",Ep="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nve=/^#([0-9a-f]{3,8})$/,rve=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),ive=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),ave=new RegExp(`^rgba\\(${ff},${ff},${ff},${Ep}\\)$`),ove=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${Ep}\\)$`),sve=new RegExp(`^hsl\\(${Ep},${Ho},${Ho}\\)$`),lve=new RegExp(`^hsla\\(${Ep},${Ho},${Ho},${Ep}\\)$`),aI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sA(r0,jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oI,formatHex:oI,formatHex8:cve,formatHsl:uve,formatRgb:sI,toString:sI});function oI(){return this.rgb().formatHex()}function cve(){return this.rgb().formatHex8()}function uve(){return $z(this).formatHsl()}function sI(){return this.rgb().formatRgb()}function jp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nve.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lI(t):n===3?new ji(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ib(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ib(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rve.exec(e))?new ji(t[1],t[2],t[3],1):(t=ive.exec(e))?new ji(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ave.exec(e))?Ib(t[1],t[2],t[3],t[4]):(t=ove.exec(e))?Ib(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sve.exec(e))?dI(t[1],t[2]/100,t[3]/100,1):(t=lve.exec(e))?dI(t[1],t[2]/100,t[3]/100,t[4]):aI.hasOwnProperty(e)?lI(aI[e]):e==="transparent"?new ji(NaN,NaN,NaN,0):null}function lI(e){return new ji(e>>16&255,e>>8&255,e&255,1)}function Ib(e,t,n,r){return r<=0&&(e=t=n=NaN),new ji(e,t,n,r)}function dve(e){return e instanceof r0||(e=jp(e)),e?(e=e.rgb(),new ji(e.r,e.g,e.b,e.opacity)):new ji}function F2(e,t,n,r){return arguments.length===1?dve(e):new ji(e,t,n,r??1)}function ji(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sA(ji,F2,Iz(r0,{brighter(e){return e=e==null?Cv:Math.pow(Cv,e),new ji(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kp:Math.pow(kp,e),new ji(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ji(Tu(this.r),Tu(this.g),Tu(this.b),Mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cI,formatHex:cI,formatHex8:fve,formatRgb:uI,toString:uI}));function cI(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}`}function fve(){return`#${xu(this.r)}${xu(this.g)}${xu(this.b)}${xu((isNaN(this.opacity)?1:this.opacity)*255)}`}function uI(){const e=Mv(this.opacity);return`${e===1?"rgb(":"rgba("}${Tu(this.r)}, ${Tu(this.g)}, ${Tu(this.b)}${e===1?")":`, ${e})`}`}function Mv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xu(e){return e=Tu(e),(e<16?"0":"")+e.toString(16)}function dI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oo(e,t,n,r)}function $z(e){if(e instanceof oo)return new oo(e.h,e.s,e.l,e.opacity);if(e instanceof r0||(e=jp(e)),!e)return new oo;if(e instanceof oo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new oo(o,l,u,e.opacity)}function hve(e,t,n,r){return arguments.length===1?$z(e):new oo(e,t,n,r??1)}function oo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sA(oo,hve,Iz(r0,{brighter(e){return e=e==null?Cv:Math.pow(Cv,e),new oo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kp:Math.pow(kp,e),new oo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ji(jk(e>=240?e-240:e+120,i,r),jk(e,i,r),jk(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new oo(fI(this.h),$b(this.s),$b(this.l),Mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mv(this.opacity);return`${e===1?"hsl(":"hsla("}${fI(this.h)}, ${$b(this.s)*100}%, ${$b(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fI(e){return e=(e||0)%360,e<0?e+360:e}function $b(e){return Math.max(0,Math.min(1,e||0))}function jk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lA=e=>()=>e;function mve(e,t){return function(n){return e+n*t}}function pve(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gve(e){return(e=+e)==1?Bz:function(t,n){return n-t?pve(t,n,e):lA(isNaN(t)?n:t)}}function Bz(e,t){var n=t-e;return n?mve(e,n):lA(isNaN(e)?t:e)}const hI=(function e(t){var n=gve(t);function r(i,a){var o=n((i=F2(i)).r,(a=F2(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),d=Bz(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function bve(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function yve(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vve(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Gf(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function xve(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Dv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wve(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Gf(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var H2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tk=new RegExp(H2.source,"g");function _ve(e){return function(){return e}}function Sve(e){return function(t){return e(t)+""}}function kve(e,t){var n=H2.lastIndex=Tk.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=H2.exec(e))&&(i=Tk.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Dv(r,i)})),n=Tk.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Sve(u[0].x):_ve(t):(t=u.length,function(d){for(var h=0,m;h<t;++h)l[(m=u[h]).i]=m.x(d);return l.join("")})}function Gf(e,t){var n=typeof t,r;return t==null||n==="boolean"?lA(t):(n==="number"?Dv:n==="string"?(r=jp(t))?(t=r,hI):kve:t instanceof jp?hI:t instanceof Date?xve:yve(t)?bve:Array.isArray(t)?vve:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wve:Dv)(e,t)}function cA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Eve(e,t){t===void 0&&(t=e,e=Gf);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function jve(e){return function(){return e}}function Pv(e){return+e}var mI=[0,1];function ti(e){return e}function G2(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jve(isNaN(t)?NaN:.5)}function Tve(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ave(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=G2(i,r),a=n(o,a)):(r=G2(r,i),a=n(a,o)),function(l){return a(r(l))}}function Nve(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=G2(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=n0(e,l,1,r)-1;return a[u](i[u](l))}}function i0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aw(){var e=mI,t=mI,n=Gf,r,i,a,o=ti,l,u,d;function h(){var b=Math.min(e.length,t.length);return o!==ti&&(o=Tve(e[0],e[b-1])),l=b>2?Nve:Ave,u=d=null,m}function m(b){return b==null||isNaN(b=+b)?a:(u||(u=l(e.map(r),t,n)))(r(o(b)))}return m.invert=function(b){return o(i((d||(d=l(t,e.map(r),Dv)))(b)))},m.domain=function(b){return arguments.length?(e=Array.from(b,Pv),h()):e.slice()},m.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},m.rangeRound=function(b){return t=Array.from(b),n=cA,h()},m.clamp=function(b){return arguments.length?(o=b?!0:ti,h()):o!==ti},m.interpolate=function(b){return arguments.length?(n=b,h()):n},m.unknown=function(b){return arguments.length?(a=b,m):a},function(b,y){return r=b,i=y,h()}}function uA(){return aw()(ti,ti)}function Ove(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jf(e){return e=Rv(Math.abs(e)),e?e[1]:NaN}function Cve(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Mve(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Dve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tp(e){if(!(t=Dve.exec(e)))throw new Error("invalid format: "+e);var t;return new dA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tp.prototype=dA.prototype;function dA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pve(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var zz;function Rve(e,t){var n=Rv(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(zz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Rv(e,Math.max(0,t+a-1))[0]}function pI(e,t){var n=Rv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const gI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ove,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pI(e*100,t),r:pI,s:Rve,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bI(e){return e}var yI=Array.prototype.map,vI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lve(e){var t=e.grouping===void 0||e.thousands===void 0?bI:Cve(yI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bI:Mve(yI.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(m){m=Tp(m);var b=m.fill,y=m.align,k=m.sign,w=m.symbol,_=m.zero,T=m.width,N=m.comma,j=m.precision,C=m.trim,M=m.type;M==="n"?(N=!0,M="g"):gI[M]||(j===void 0&&(j=12),C=!0,M="g"),(_||b==="0"&&y==="=")&&(_=!0,b="0",y="=");var P=w==="$"?n:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I=w==="$"?r:/[%p]/.test(M)?o:"",z=gI[M],K=/[defgprs%]/.test(M);j=j===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function G(H){var B=P,q=I,X,V,F;if(M==="c")q=z(H)+q,H="";else{H=+H;var Z=H<0||1/H<0;if(H=isNaN(H)?u:z(Math.abs(H),j),C&&(H=Pve(H)),Z&&+H==0&&k!=="+"&&(Z=!1),B=(Z?k==="("?k:l:k==="-"||k==="("?"":k)+B,q=(M==="s"?vI[8+zz/3]:"")+q+(Z&&k==="("?")":""),K){for(X=-1,V=H.length;++X<V;)if(F=H.charCodeAt(X),48>F||F>57){q=(F===46?i+H.slice(X+1):H.slice(X))+q,H=H.slice(0,X);break}}}N&&!_&&(H=t(H,1/0));var Q=B.length+H.length+q.length,le=Q<T?new Array(T-Q+1).join(b):"";switch(N&&_&&(H=t(le+H,le.length?T-q.length:1/0),le=""),y){case"<":H=B+H+q+le;break;case"=":H=B+le+H+q;break;case"^":H=le.slice(0,Q=le.length>>1)+B+H+q+le.slice(Q);break;default:H=le+B+H+q;break}return a(H)}return G.toString=function(){return m+""},G}function h(m,b){var y=d((m=Tp(m),m.type="f",m)),k=Math.max(-8,Math.min(8,Math.floor(jf(b)/3)))*3,w=Math.pow(10,-k),_=vI[8+k/3];return function(T){return y(w*T)+_}}return{format:d,formatPrefix:h}}var Bb,fA,Uz;Ive({thousands:",",grouping:[3],currency:["$",""]});function Ive(e){return Bb=Lve(e),fA=Bb.format,Uz=Bb.formatPrefix,Bb}function $ve(e){return Math.max(0,-jf(Math.abs(e)))}function Bve(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jf(t)/3)))*3-jf(Math.abs(e)))}function zve(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jf(t)-jf(e))+1}function Fz(e,t,n,r){var i=z2(e,t,n),a;switch(r=Tp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Bve(i,o))&&(r.precision=a),Uz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zve(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=$ve(i))&&(r.precision=a-(r.type==="%")*2);break}}return fA(r)}function mc(e){var t=e.domain;return e.ticks=function(n){var r=t();return $2(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Fz(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=B2(o,l,n),d===u)return r[i]=o,r[a]=l,t(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function Hz(){var e=uA();return e.copy=function(){return i0(e,Hz())},Ba.apply(e,arguments),mc(e)}function Gz(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Pv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Gz(e).unknown(t)},e=arguments.length?Array.from(e,Pv):[0,1],mc(n)}function Yz(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function xI(e){return Math.log(e)}function wI(e){return Math.exp(e)}function Uve(e){return-Math.log(-e)}function Fve(e){return-Math.exp(-e)}function Hve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gve(e){return e===10?Hve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Yve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _I(e){return(t,n)=>-e(-t,n)}function hA(e){const t=e(xI,wI),n=t.domain;let r=10,i,a;function o(){return i=Yve(r),a=Gve(r),n()[0]<0?(i=_I(i),a=_I(a),e(Uve,Fve)):e(xI,wI),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let d=u[0],h=u[u.length-1];const m=h<d;m&&([d,h]=[h,d]);let b=i(d),y=i(h),k,w;const _=l==null?10:+l;let T=[];if(!(r%1)&&y-b<_){if(b=Math.floor(b),y=Math.ceil(y),d>0){for(;b<=y;++b)for(k=1;k<r;++k)if(w=b<0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}}else for(;b<=y;++b)for(k=r-1;k>=1;--k)if(w=b>0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}T.length*2<_&&(T=$2(d,h,_))}else T=$2(b,y,Math.min(y-b,_)).map(a);return m?T.reverse():T},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Tp(u)).precision==null&&(u.trim=!0),u=fA(u)),l===1/0)return u;const d=Math.max(1,r*l/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=d?u(h):""}},t.nice=()=>n(Yz(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function qz(){const e=hA(aw()).domain([1,10]);return e.copy=()=>i0(e,qz()).base(e.base()),Ba.apply(e,arguments),e}function SI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mA(e){var t=1,n=e(SI(t),kI(t));return n.constant=function(r){return arguments.length?e(SI(t=+r),kI(t)):t},mc(n)}function Kz(){var e=mA(aw());return e.copy=function(){return i0(e,Kz()).constant(e.constant())},Ba.apply(e,arguments)}function EI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Kve(e){return e<0?-e*e:e*e}function pA(e){var t=e(ti,ti),n=1;function r(){return n===1?e(ti,ti):n===.5?e(qve,Kve):e(EI(n),EI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},mc(t)}function gA(){var e=pA(aw());return e.copy=function(){return i0(e,gA()).exponent(e.exponent())},Ba.apply(e,arguments),e}function Wve(){return gA.apply(null,arguments).exponent(.5)}function jI(e){return Math.sign(e)*e*e}function Vve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Wz(){var e=uA(),t=[0,1],n=!1,r;function i(a){var o=Vve(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(jI(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Pv)).map(jI)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Wz(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ba.apply(i,arguments),mc(i)}function Vz(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Qye(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[n0(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ic),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Vz().domain(e).range(t).unknown(r)},Ba.apply(a,arguments)}function Zz(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[n0(r,u,0,n)]:a}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Zz().domain([e,t]).range(i).unknown(a)},Ba.apply(mc(o),arguments)}function Xz(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[n0(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Xz().domain(e).range(t).unknown(n)},Ba.apply(i,arguments)}const Ak=new Date,Nk=new Date;function or(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let d;do u.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return u},i.filter=a=>or(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Ak.setTime(+a),Nk.setTime(+o),e(Ak),e(Nk),Math.floor(n(Ak,Nk))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Lv=or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Lv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?or(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Lv);Lv.range;const Ps=1e3,Aa=Ps*60,Rs=Aa*60,qs=Rs*24,bA=qs*7,TI=qs*30,Ok=qs*365,wu=or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCSeconds());wu.range;const yA=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ps)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getMinutes());yA.range;const vA=or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getUTCMinutes());vA.range;const xA=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ps-e.getMinutes()*Aa)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getHours());xA.range;const wA=or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getUTCHours());wA.range;const a0=or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Aa)/qs,e=>e.getDate()-1);a0.range;const ow=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qs,e=>e.getUTCDate()-1);ow.range;const Jz=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qs,e=>Math.floor(e/qs));Jz.range;function Uu(e){return or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Aa)/bA)}const sw=Uu(0),Iv=Uu(1),Zve=Uu(2),Xve=Uu(3),Tf=Uu(4),Jve=Uu(5),Qve=Uu(6);sw.range;Iv.range;Zve.range;Xve.range;Tf.range;Jve.range;Qve.range;function Fu(e){return or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/bA)}const lw=Fu(0),$v=Fu(1),exe=Fu(2),txe=Fu(3),Af=Fu(4),nxe=Fu(5),rxe=Fu(6);lw.range;$v.range;exe.range;txe.range;Af.range;nxe.range;rxe.range;const _A=or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_A.range;const SA=or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());SA.range;const Ks=or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ks.range;const Ws=or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ws.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ws.range;function Qz(e,t,n,r,i,a){const o=[[wu,1,Ps],[wu,5,5*Ps],[wu,15,15*Ps],[wu,30,30*Ps],[a,1,Aa],[a,5,5*Aa],[a,15,15*Aa],[a,30,30*Aa],[i,1,Rs],[i,3,3*Rs],[i,6,6*Rs],[i,12,12*Rs],[r,1,qs],[r,2,2*qs],[n,1,bA],[t,1,TI],[t,3,3*TI],[e,1,Ok]];function l(d,h,m){const b=h<d;b&&([d,h]=[h,d]);const y=m&&typeof m.range=="function"?m:u(d,h,m),k=y?y.range(d,+h+1):[];return b?k.reverse():k}function u(d,h,m){const b=Math.abs(h-d)/m,y=iA(([,,_])=>_).right(o,b);if(y===o.length)return e.every(z2(d/Ok,h/Ok,m));if(y===0)return Lv.every(Math.max(z2(d,h,m),1));const[k,w]=o[b/o[y-1][2]<o[y][2]/b?y-1:y];return k.every(w)}return[l,u]}const[ixe,axe]=Qz(Ws,SA,lw,Jz,wA,vA),[oxe,sxe]=Qz(Ks,_A,sw,a0,xA,yA);function Ck(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lxe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=km(i),h=Em(i),m=km(a),b=Em(a),y=km(o),k=Em(o),w=km(l),_=Em(l),T=km(u),N=Em(u),j={a:Z,A:Q,b:le,B:se,c:null,d:DI,e:DI,f:Cxe,g:Uxe,G:Hxe,H:Axe,I:Nxe,j:Oxe,L:eU,m:Mxe,M:Dxe,p:W,q:re,Q:LI,s:II,S:Pxe,u:Rxe,U:Lxe,V:Ixe,w:$xe,W:Bxe,x:null,X:null,y:zxe,Y:Fxe,Z:Gxe,"%":RI},C={a:ee,A:he,b:J,B:ae,c:null,d:PI,e:PI,f:Wxe,g:iwe,G:owe,H:Yxe,I:qxe,j:Kxe,L:nU,m:Vxe,M:Zxe,p:me,q:pe,Q:LI,s:II,S:Xxe,u:Jxe,U:Qxe,V:ewe,w:twe,W:nwe,x:null,X:null,y:rwe,Y:awe,Z:swe,"%":RI},M={a:G,A:H,b:B,B:q,c:X,d:CI,e:CI,f:kxe,g:OI,G:NI,H:MI,I:MI,j:xxe,L:Sxe,m:vxe,M:wxe,p:K,q:yxe,Q:jxe,s:Txe,S:_xe,u:hxe,U:mxe,V:pxe,w:fxe,W:gxe,x:V,X:F,y:OI,Y:NI,Z:bxe,"%":Exe};j.x=P(n,j),j.X=P(r,j),j.c=P(t,j),C.x=P(n,C),C.X=P(r,C),C.c=P(t,C);function P(te,je){return function(xe){var ue=[],Ee=-1,Me=0,Ie=te.length,Ke,mt,pt;for(xe instanceof Date||(xe=new Date(+xe));++Ee<Ie;)te.charCodeAt(Ee)===37&&(ue.push(te.slice(Me,Ee)),(mt=AI[Ke=te.charAt(++Ee)])!=null?Ke=te.charAt(++Ee):mt=Ke==="e"?" ":"0",(pt=je[Ke])&&(Ke=pt(xe,mt)),ue.push(Ke),Me=Ee+1);return ue.push(te.slice(Me,Ee)),ue.join("")}}function I(te,je){return function(xe){var ue=Sm(1900,void 0,1),Ee=z(ue,te,xe+="",0),Me,Ie;if(Ee!=xe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(je&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Me=Mk(Sm(ue.y,0,1)),Ie=Me.getUTCDay(),Me=Ie>4||Ie===0?$v.ceil(Me):$v(Me),Me=ow.offset(Me,(ue.V-1)*7),ue.y=Me.getUTCFullYear(),ue.m=Me.getUTCMonth(),ue.d=Me.getUTCDate()+(ue.w+6)%7):(Me=Ck(Sm(ue.y,0,1)),Ie=Me.getDay(),Me=Ie>4||Ie===0?Iv.ceil(Me):Iv(Me),Me=a0.offset(Me,(ue.V-1)*7),ue.y=Me.getFullYear(),ue.m=Me.getMonth(),ue.d=Me.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ie="Z"in ue?Mk(Sm(ue.y,0,1)).getUTCDay():Ck(Sm(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ie+5)%7:ue.w+ue.U*7-(Ie+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Mk(ue)):Ck(ue)}}function z(te,je,xe,ue){for(var Ee=0,Me=je.length,Ie=xe.length,Ke,mt;Ee<Me;){if(ue>=Ie)return-1;if(Ke=je.charCodeAt(Ee++),Ke===37){if(Ke=je.charAt(Ee++),mt=M[Ke in AI?je.charAt(Ee++):Ke],!mt||(ue=mt(te,xe,ue))<0)return-1}else if(Ke!=xe.charCodeAt(ue++))return-1}return ue}function K(te,je,xe){var ue=d.exec(je.slice(xe));return ue?(te.p=h.get(ue[0].toLowerCase()),xe+ue[0].length):-1}function G(te,je,xe){var ue=y.exec(je.slice(xe));return ue?(te.w=k.get(ue[0].toLowerCase()),xe+ue[0].length):-1}function H(te,je,xe){var ue=m.exec(je.slice(xe));return ue?(te.w=b.get(ue[0].toLowerCase()),xe+ue[0].length):-1}function B(te,je,xe){var ue=T.exec(je.slice(xe));return ue?(te.m=N.get(ue[0].toLowerCase()),xe+ue[0].length):-1}function q(te,je,xe){var ue=w.exec(je.slice(xe));return ue?(te.m=_.get(ue[0].toLowerCase()),xe+ue[0].length):-1}function X(te,je,xe){return z(te,t,je,xe)}function V(te,je,xe){return z(te,n,je,xe)}function F(te,je,xe){return z(te,r,je,xe)}function Z(te){return o[te.getDay()]}function Q(te){return a[te.getDay()]}function le(te){return u[te.getMonth()]}function se(te){return l[te.getMonth()]}function W(te){return i[+(te.getHours()>=12)]}function re(te){return 1+~~(te.getMonth()/3)}function ee(te){return o[te.getUTCDay()]}function he(te){return a[te.getUTCDay()]}function J(te){return u[te.getUTCMonth()]}function ae(te){return l[te.getUTCMonth()]}function me(te){return i[+(te.getUTCHours()>=12)]}function pe(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var je=P(te+="",j);return je.toString=function(){return te},je},parse:function(te){var je=I(te+="",!1);return je.toString=function(){return te},je},utcFormat:function(te){var je=P(te+="",C);return je.toString=function(){return te},je},utcParse:function(te){var je=I(te+="",!0);return je.toString=function(){return te},je}}}var AI={"-":"",_:" ",0:"0"},kr=/^\s*\d+/,cxe=/^%/,uxe=/[\\^$*+?|[\]().{}]/g;function It(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function dxe(e){return e.replace(uxe,"\\$&")}function km(e){return new RegExp("^(?:"+e.map(dxe).join("|")+")","i")}function Em(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fxe(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hxe(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mxe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function pxe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gxe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function NI(e,t,n){var r=kr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function OI(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bxe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yxe(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vxe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function CI(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xxe(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function MI(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wxe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _xe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Sxe(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kxe(e,t,n){var r=kr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Exe(e,t,n){var r=cxe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jxe(e,t,n){var r=kr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Txe(e,t,n){var r=kr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function DI(e,t){return It(e.getDate(),t,2)}function Axe(e,t){return It(e.getHours(),t,2)}function Nxe(e,t){return It(e.getHours()%12||12,t,2)}function Oxe(e,t){return It(1+a0.count(Ks(e),e),t,3)}function eU(e,t){return It(e.getMilliseconds(),t,3)}function Cxe(e,t){return eU(e,t)+"000"}function Mxe(e,t){return It(e.getMonth()+1,t,2)}function Dxe(e,t){return It(e.getMinutes(),t,2)}function Pxe(e,t){return It(e.getSeconds(),t,2)}function Rxe(e){var t=e.getDay();return t===0?7:t}function Lxe(e,t){return It(sw.count(Ks(e)-1,e),t,2)}function tU(e){var t=e.getDay();return t>=4||t===0?Tf(e):Tf.ceil(e)}function Ixe(e,t){return e=tU(e),It(Tf.count(Ks(e),e)+(Ks(e).getDay()===4),t,2)}function $xe(e){return e.getDay()}function Bxe(e,t){return It(Iv.count(Ks(e)-1,e),t,2)}function zxe(e,t){return It(e.getFullYear()%100,t,2)}function Uxe(e,t){return e=tU(e),It(e.getFullYear()%100,t,2)}function Fxe(e,t){return It(e.getFullYear()%1e4,t,4)}function Hxe(e,t){var n=e.getDay();return e=n>=4||n===0?Tf(e):Tf.ceil(e),It(e.getFullYear()%1e4,t,4)}function Gxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function PI(e,t){return It(e.getUTCDate(),t,2)}function Yxe(e,t){return It(e.getUTCHours(),t,2)}function qxe(e,t){return It(e.getUTCHours()%12||12,t,2)}function Kxe(e,t){return It(1+ow.count(Ws(e),e),t,3)}function nU(e,t){return It(e.getUTCMilliseconds(),t,3)}function Wxe(e,t){return nU(e,t)+"000"}function Vxe(e,t){return It(e.getUTCMonth()+1,t,2)}function Zxe(e,t){return It(e.getUTCMinutes(),t,2)}function Xxe(e,t){return It(e.getUTCSeconds(),t,2)}function Jxe(e){var t=e.getUTCDay();return t===0?7:t}function Qxe(e,t){return It(lw.count(Ws(e)-1,e),t,2)}function rU(e){var t=e.getUTCDay();return t>=4||t===0?Af(e):Af.ceil(e)}function ewe(e,t){return e=rU(e),It(Af.count(Ws(e),e)+(Ws(e).getUTCDay()===4),t,2)}function twe(e){return e.getUTCDay()}function nwe(e,t){return It($v.count(Ws(e)-1,e),t,2)}function rwe(e,t){return It(e.getUTCFullYear()%100,t,2)}function iwe(e,t){return e=rU(e),It(e.getUTCFullYear()%100,t,2)}function awe(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function owe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Af(e):Af.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function swe(){return"+0000"}function RI(){return"%"}function LI(e){return+e}function II(e){return Math.floor(+e/1e3)}var zd,iU,aU;lwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lwe(e){return zd=lxe(e),iU=zd.format,zd.parse,aU=zd.utcFormat,zd.utcParse,zd}function cwe(e){return new Date(e)}function uwe(e){return e instanceof Date?+e:+new Date(+e)}function kA(e,t,n,r,i,a,o,l,u,d){var h=uA(),m=h.invert,b=h.domain,y=d(".%L"),k=d(":%S"),w=d("%I:%M"),_=d("%I %p"),T=d("%a %d"),N=d("%b %d"),j=d("%B"),C=d("%Y");function M(P){return(u(P)<P?y:l(P)<P?k:o(P)<P?w:a(P)<P?_:r(P)<P?i(P)<P?T:N:n(P)<P?j:C)(P)}return h.invert=function(P){return new Date(m(P))},h.domain=function(P){return arguments.length?b(Array.from(P,uwe)):b().map(cwe)},h.ticks=function(P){var I=b();return e(I[0],I[I.length-1],P??10)},h.tickFormat=function(P,I){return I==null?M:d(I)},h.nice=function(P){var I=b();return(!P||typeof P.range!="function")&&(P=t(I[0],I[I.length-1],P??10)),P?b(Yz(I,P)):h},h.copy=function(){return i0(h,kA(e,t,n,r,i,a,o,l,u,d))},h}function dwe(){return Ba.apply(kA(oxe,sxe,Ks,_A,sw,a0,xA,yA,wu,iU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fwe(){return Ba.apply(kA(ixe,axe,Ws,SA,lw,ow,wA,vA,wu,aU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cw(){var e=0,t=1,n,r,i,a,o=ti,l=!1,u;function d(m){return m==null||isNaN(m=+m)?u:o(i===0?.5:(m=(a(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(b){var y,k;return arguments.length?([y,k]=b,o=m(y,k),d):[o(0),o(1)]}}return d.range=h(Gf),d.rangeRound=h(cA),d.unknown=function(m){return arguments.length?(u=m,d):u},function(m){return a=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),d}}function pc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function oU(){var e=mc(cw()(ti));return e.copy=function(){return pc(e,oU())},tl.apply(e,arguments)}function sU(){var e=hA(cw()).domain([1,10]);return e.copy=function(){return pc(e,sU()).base(e.base())},tl.apply(e,arguments)}function lU(){var e=mA(cw());return e.copy=function(){return pc(e,lU()).constant(e.constant())},tl.apply(e,arguments)}function EA(){var e=pA(cw());return e.copy=function(){return pc(e,EA()).exponent(e.exponent())},tl.apply(e,arguments)}function hwe(){return EA.apply(null,arguments).exponent(.5)}function cU(){var e=[],t=ti;function n(r){if(r!=null&&!isNaN(r=+r))return t((n0(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ic),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Jye(e,a/r))},n.copy=function(){return cU(t).domain(e)},tl.apply(n,arguments)}function uw(){var e=0,t=.5,n=1,r=1,i,a,o,l,u,d=ti,h,m=!1,b;function y(w){return isNaN(w=+w)?b:(w=.5+((w=+h(w))-a)*(r*w<r*a?l:u),d(m?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y):[e,t,n]},y.clamp=function(w){return arguments.length?(m=!!w,y):m},y.interpolator=function(w){return arguments.length?(d=w,y):d};function k(w){return function(_){var T,N,j;return arguments.length?([T,N,j]=_,d=Eve(w,[T,N,j]),y):[d(0),d(.5),d(1)]}}return y.range=k(Gf),y.rangeRound=k(cA),y.unknown=function(w){return arguments.length?(b=w,y):b},function(w){return h=w,i=w(e),a=w(t),o=w(n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y}}function uU(){var e=mc(uw()(ti));return e.copy=function(){return pc(e,uU())},tl.apply(e,arguments)}function dU(){var e=hA(uw()).domain([.1,1,10]);return e.copy=function(){return pc(e,dU()).base(e.base())},tl.apply(e,arguments)}function fU(){var e=mA(uw());return e.copy=function(){return pc(e,fU()).constant(e.constant())},tl.apply(e,arguments)}function jA(){var e=pA(uw());return e.copy=function(){return pc(e,jA()).exponent(e.exponent())},tl.apply(e,arguments)}function mwe(){return jA.apply(null,arguments).exponent(.5)}const Rm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oA,scaleDiverging:uU,scaleDivergingLog:dU,scaleDivergingPow:jA,scaleDivergingSqrt:mwe,scaleDivergingSymlog:fU,scaleIdentity:Gz,scaleImplicit:U2,scaleLinear:Hz,scaleLog:qz,scaleOrdinal:aA,scalePoint:tve,scalePow:gA,scaleQuantile:Vz,scaleQuantize:Zz,scaleRadial:Wz,scaleSequential:oU,scaleSequentialLog:sU,scaleSequentialPow:EA,scaleSequentialQuantile:cU,scaleSequentialSqrt:hwe,scaleSequentialSymlog:lU,scaleSqrt:Wve,scaleSymlog:Kz,scaleThreshold:Xz,scaleTime:dwe,scaleUtc:fwe,tickFormat:Fz},Symbol.toStringTag,{value:"Module"}));var gc=e=>e.chartData,pwe=_e([gc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),TA=(e,t,n,r)=>r?pwe(e):gc(e);function uc(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Pn(t)&&Pn(n))return!0}return!1}function $I(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function hU(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Pn(n))i=n;else if(typeof n=="function")return;if(Pn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(uc(o))return o}}function gwe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(uc(r))return $I(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(tt(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[0]))}catch{}else if(typeof i=="string"&&mL.test(i)){var u=mL.exec(i);if(u==null||t==null)o=void 0;else{var d=+u[1];o=t[0]-d}}else o=t?.[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(tt(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t?.[1]))}catch{}else if(typeof a=="string"&&pL.test(a)){var h=pL.exec(a);if(h==null||t==null)l=void 0;else{var m=+h[1];l=t[1]+m}}else l=t?.[1];var b=[o,l];if(uc(b))return t==null?b:$I(b,t,n)}}}var Yf=1e9,bwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NA,xn=!0,Ra="[DecimalError] ",Au=Ra+"Invalid argument: ",AA=Ra+"Exponent out of range: ",qf=Math.floor,hu=Math.pow,ywe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vi,vr=1e7,dn=7,mU=9007199254740991,Bv=qf(mU/dn),He={};He.absoluteValue=He.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};He.comparedTo=He.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};He.decimalPlaces=He.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*dn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};He.dividedBy=He.div=function(e){return Bs(this,new this.constructor(e))};He.dividedToIntegerBy=He.idiv=function(e){var t=this,n=t.constructor;return nn(Bs(t,new n(e),0,1),n.precision)};He.equals=He.eq=function(e){return!this.cmp(e)};He.exponent=function(){return Qn(this)};He.greaterThan=He.gt=function(e){return this.cmp(e)>0};He.greaterThanOrEqualTo=He.gte=function(e){return this.cmp(e)>=0};He.isInteger=He.isint=function(){return this.e>this.d.length-2};He.isNegative=He.isneg=function(){return this.s<0};He.isPositive=He.ispos=function(){return this.s>0};He.isZero=function(){return this.s===0};He.lessThan=He.lt=function(e){return this.cmp(e)<0};He.lessThanOrEqualTo=He.lte=function(e){return this.cmp(e)<1};He.logarithm=He.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Vi))throw Error(Ra+"NaN");if(n.s<1)throw Error(Ra+(n.s?"NaN":"-Infinity"));return n.eq(Vi)?new r(0):(xn=!1,t=Bs(Ap(n,a),Ap(e,a),a),xn=!0,nn(t,i))};He.minus=He.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bU(t,e):pU(t,(e.s=-e.s,e))};He.modulo=He.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Ra+"NaN");return n.s?(xn=!1,t=Bs(n,e,0,1).times(e),xn=!0,n.minus(t)):nn(new r(n),i)};He.naturalExponential=He.exp=function(){return gU(this)};He.naturalLogarithm=He.ln=function(){return Ap(this)};He.negated=He.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};He.plus=He.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pU(t,e):bU(t,(e.s=-e.s,e))};He.precision=He.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Au+e);if(t=Qn(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};He.squareRoot=He.sqrt=function(){var e,t,n,r,i,a,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(Ra+"NaN")}for(e=Qn(l),xn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=zo(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=qf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new u(t)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(Bs(l,a,o+2)).times(.5),zo(a.d).slice(0,o)===(t=zo(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(nn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return xn=!0,nn(r,n)};He.times=He.mul=function(e){var t,n,r,i,a,o,l,u,d,h=this,m=h.constructor,b=h.d,y=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,u=b.length,d=y.length,u<d&&(a=b,b=y,y=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=u+r;i>r;)l=a[i]+y[r]*b[i-r-1]+t,a[i--]=l%vr|0,t=l/vr|0;a[i]=(a[i]+t)%vr|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,xn?nn(e,m.precision):e};He.toDecimalPlaces=He.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Zo(e,0,Yf),t===void 0?t=r.rounding:Zo(t,0,8),nn(n,e+Qn(n)+1,t))};He.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Ru(r,!0):(Zo(e,0,Yf),t===void 0?t=i.rounding:Zo(t,0,8),r=nn(new i(r),e+1,t),n=Ru(r,!0,e+1)),n};He.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Ru(i):(Zo(e,0,Yf),t===void 0?t=a.rounding:Zo(t,0,8),r=nn(new a(i),e+Qn(i)+1,t),n=Ru(r.abs(),!1,e+Qn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};He.toInteger=He.toint=function(){var e=this,t=e.constructor;return nn(new t(e),Qn(e)+1,t.rounding)};He.toNumber=function(){return+this};He.toPower=He.pow=function(e){var t,n,r,i,a,o,l=this,u=l.constructor,d=12,h=+(e=new u(e));if(!e.s)return new u(Vi);if(l=new u(l),!l.s){if(e.s<1)throw Error(Ra+"Infinity");return l}if(l.eq(Vi))return l;if(r=u.precision,e.eq(Vi))return nn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=mU){for(i=new u(Vi),t=Math.ceil(r/dn+4),xn=!1;n%2&&(i=i.times(l),zI(i.d,t)),n=qf(n/2),n!==0;)l=l.times(l),zI(l.d,t);return xn=!0,e.s<0?new u(Vi).div(i):nn(i,r)}}else if(a<0)throw Error(Ra+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,xn=!1,i=e.times(Ap(l,r+d)),xn=!0,i=gU(i),i.s=a,i};He.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Qn(i),r=Ru(i,n<=a.toExpNeg||n>=a.toExpPos)):(Zo(e,1,Yf),t===void 0?t=a.rounding:Zo(t,0,8),i=nn(new a(i),e,t),n=Qn(i),r=Ru(i,e<=n||n<=a.toExpNeg,e)),r};He.toSignificantDigits=He.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Zo(e,1,Yf),t===void 0?t=r.rounding:Zo(t,0,8)),nn(new r(n),e,t)};He.toString=He.valueOf=He.val=He.toJSON=He[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qn(e),n=e.constructor;return Ru(e,t<=n.toExpNeg||t>=n.toExpPos)};function pU(e,t){var n,r,i,a,o,l,u,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),xn?nn(t,m):t;if(u=e.d,d=t.d,o=e.e,i=t.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,l=d.length):(r=d,i=o,l=u.length),o=Math.ceil(m/dn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=d.length,l-a<0&&(a=l,r=d,d=u,u=r),n=0;a;)n=(u[--a]=u[a]+d[a]+n)/vr|0,u[a]%=vr;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=i,xn?nn(t,m):t}function Zo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Au+e)}function zo(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=dn-r.length,n&&(a+=ql(n)),a+=r;o=e[t],r=o+"",n=dn-r.length,n&&(a+=ql(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Bs=(function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%vr|0,o=a/vr|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,u;if(a!=o)u=a>o?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*vr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,u,d,h,m,b,y,k,w,_,T,N,j,C,M,P,I,z,K=r.constructor,G=r.s==i.s?1:-1,H=r.d,B=i.d;if(!r.s)return new K(r);if(!i.s)throw Error(Ra+"Division by zero");for(u=r.e-i.e,I=B.length,M=H.length,y=new K(G),k=y.d=[],d=0;B[d]==(H[d]||0);)++d;if(B[d]>(H[d]||0)&&--u,a==null?N=a=K.precision:o?N=a+(Qn(r)-Qn(i))+1:N=a,N<0)return new K(0);if(N=N/dn+2|0,d=0,I==1)for(h=0,B=B[0],N++;(d<M||h)&&N--;d++)j=h*vr+(H[d]||0),k[d]=j/B|0,h=j%B|0;else{for(h=vr/(B[0]+1)|0,h>1&&(B=e(B,h),H=e(H,h),I=B.length,M=H.length),C=I,w=H.slice(0,I),_=w.length;_<I;)w[_++]=0;z=B.slice(),z.unshift(0),P=B[0],B[1]>=vr/2&&++P;do h=0,l=t(B,w,I,_),l<0?(T=w[0],I!=_&&(T=T*vr+(w[1]||0)),h=T/P|0,h>1?(h>=vr&&(h=vr-1),m=e(B,h),b=m.length,_=w.length,l=t(m,w,b,_),l==1&&(h--,n(m,I<b?z:B,b))):(h==0&&(l=h=1),m=B.slice()),b=m.length,b<_&&m.unshift(0),n(w,m,_),l==-1&&(_=w.length,l=t(B,w,I,_),l<1&&(h++,n(w,I<_?z:B,_))),_=w.length):l===0&&(h++,w=[0]),k[d++]=h,l&&w[0]?w[_++]=H[C]||0:(w=[H[C]],_=1);while((C++<M||w[0]!==void 0)&&N--)}return k[0]||k.shift(),y.e=u,nn(y,o?a+Qn(y)+1:a)}})();function gU(e,t){var n,r,i,a,o,l,u=0,d=0,h=e.constructor,m=h.precision;if(Qn(e)>16)throw Error(AA+Qn(e));if(!e.s)return new h(Vi);for(xn=!1,l=m,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(hu(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new h(Vi),h.precision=l;;){if(i=nn(i.times(e),l),n=n.times(++u),o=a.plus(Bs(i,n,l)),zo(o.d).slice(0,l)===zo(a.d).slice(0,l)){for(;d--;)a=nn(a.times(a),l);return h.precision=m,t==null?(xn=!0,nn(a,m)):a}a=o}}function Qn(e){for(var t=e.e*dn,n=e.d[0];n>=10;n/=10)t++;return t}function Dk(e,t,n){if(t>e.LN10.sd())throw xn=!0,n&&(e.precision=n),Error(Ra+"LN10 precision limit exceeded");return nn(new e(e.LN10),t)}function ql(e){for(var t="";e--;)t+="0";return t}function Ap(e,t){var n,r,i,a,o,l,u,d,h,m=1,b=10,y=e,k=y.d,w=y.constructor,_=w.precision;if(y.s<1)throw Error(Ra+(y.s?"NaN":"-Infinity"));if(y.eq(Vi))return new w(0);if(t==null?(xn=!1,d=_):d=t,y.eq(10))return t==null&&(xn=!0),Dk(w,d);if(d+=b,w.precision=d,n=zo(k),r=n.charAt(0),a=Qn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=zo(y.d),r=n.charAt(0),m++;a=Qn(y),r>1?(y=new w("0."+n),a++):y=new w(r+"."+n.slice(1))}else return u=Dk(w,d+2,_).times(a+""),y=Ap(new w(r+"."+n.slice(1)),d-b).plus(u),w.precision=_,t==null?(xn=!0,nn(y,_)):y;for(l=o=y=Bs(y.minus(Vi),y.plus(Vi),d),h=nn(y.times(y),d),i=3;;){if(o=nn(o.times(h),d),u=l.plus(Bs(o,new w(i),d)),zo(u.d).slice(0,d)===zo(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(Dk(w,d+2,_).times(a+""))),l=Bs(l,new w(m),d),w.precision=_,t==null?(xn=!0,nn(l,_)):l;l=u,i+=2}}function BI(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=qf(n/dn),e.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=dn;r<i;)e.d.push(+t.slice(r,r+=dn));t=t.slice(r),r=dn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),xn&&(e.e>Bv||e.e<-Bv))throw Error(AA+n)}else e.s=0,e.e=0,e.d=[0];return e}function nn(e,t,n){var r,i,a,o,l,u,d,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=dn,i=t,d=m[h=0];else{if(h=Math.ceil((r+1)/dn),a=m.length,h>=a)return e;for(d=a=m[h],o=1;a>=10;a/=10)o++;r%=dn,i=r-dn+o}if(n!==void 0&&(a=hu(10,o-i-1),l=d/a%10|0,u=t<0||m[h+1]!==void 0||d%a,u=n<4?(l||u)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/hu(10,o-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return u?(a=Qn(e),m.length=1,t=t-a-1,m[0]=hu(10,(dn-t%dn)%dn),e.e=qf(-t/dn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,a=1,h--):(m.length=h+1,a=hu(10,dn-r),m[h]=i>0?(d/hu(10,o-i)%hu(10,i)|0)*a:0),u)for(;;)if(h==0){(m[0]+=a)==vr&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=vr)break;m[h--]=0,a=1}for(r=m.length;m[--r]===0;)m.pop();if(xn&&(e.e>Bv||e.e<-Bv))throw Error(AA+Qn(e));return e}function bU(e,t){var n,r,i,a,o,l,u,d,h,m,b=e.constructor,y=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),xn?nn(t,y):t;if(u=e.d,m=t.d,r=t.e,d=e.e,u=u.slice(),o=d-r,o){for(h=o<0,h?(n=u,o=-o,l=m.length):(n=m,r=d,l=u.length),i=Math.max(Math.ceil(y/dn),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=m.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=m[i]){h=u[i]<m[i];break}o=0}for(h&&(n=u,u=m,m=n,t.s=-t.s),l=u.length,i=m.length-l;i>0;--i)u[l++]=0;for(i=m.length;i>o;){if(u[--i]<m[i]){for(a=i;a&&u[--a]===0;)u[a]=vr-1;--u[a],u[i]+=vr}u[i]-=m[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=r,xn?nn(t,y):t):new b(0)}function Ru(e,t,n){var r,i=Qn(e),a=zo(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ql(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ql(-i-1)+a,n&&(r=n-o)>0&&(a+=ql(r))):i>=o?(a+=ql(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+ql(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=ql(r))),e.s<0?"-"+a:a}function zI(e,t){if(e.length>t)return e.length=t,!0}function yU(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Au+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return BI(o,a.toString())}else if(typeof a!="string")throw Error(Au+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,ywe.test(a))BI(o,a);else throw Error(Au+a)}if(i.prototype=He,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=yU,i.config=i.set=vwe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vwe(e){if(!e||typeof e!="object")throw Error(Ra+"Object expected");var t,n,r,i=["precision",1,Yf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(qf(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Au+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Au+n+": "+r);return this}var NA=yU(bwe);Vi=new NA(1);const qt=NA;var xwe=e=>e,vU={},xU=e=>e===vU,UI=e=>function t(){return arguments.length===0||arguments.length===1&&xU(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},wU=(e,t)=>e===1?t:UI(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==vU).length;return a>=e?t(...r):wU(e-a,UI(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=r.map(h=>xU(h)?l.shift():h);return t(...d,...l)}))}),wwe=e=>wU(e.length,e),Y2=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},_we=wwe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Swe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return xwe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((l,u)=>u(l),a(...arguments))}},q2=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function _U(e){var t;return e===0?t=1:t=Math.floor(new qt(e).abs().log(10).toNumber())+1,t}function SU(e,t,n){for(var r=new qt(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var kU=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},EU=(e,t,n)=>{if(e.lte(0))return new qt(0);var r=_U(e.toNumber()),i=new qt(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new qt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return t?new qt(u.toNumber()):new qt(Math.ceil(u.toNumber()))},kwe=(e,t,n)=>{var r=new qt(1),i=new qt(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new qt(10).pow(_U(e)-1),i=new qt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new qt(Math.floor(e)))}else e===0?i=new qt(Math.floor((t-1)/2)):n||(i=new qt(Math.floor(e)));var o=Math.floor((t-1)/2),l=Swe(_we(u=>i.add(new qt(u-o).mul(r)).toNumber()),Y2);return l(0,t)},jU=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new qt(0),tickMin:new qt(0),tickMax:new qt(0)};var o=EU(new qt(n).sub(t).div(r-1),i,a),l;t<=0&&n>=0?l=new qt(0):(l=new qt(t).add(n).div(2),l=l.sub(new qt(l).mod(o)));var u=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new qt(n).sub(l).div(o).toNumber()),h=u+d+1;return h>r?jU(t,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,u=n>0?u:u+(r-h)),{step:o,tickMin:l.sub(new qt(u).mul(o)),tickMax:l.add(new qt(d).mul(o))})},Ewe=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,u]=kU([n,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...Y2(0,i-1).map(()=>1/0)]:[...Y2(0,i-1).map(()=>-1/0),u];return n>r?q2(d):d}if(l===u)return kwe(l,i,a);var{step:h,tickMin:m,tickMax:b}=jU(l,u,o,a,0),y=SU(m,b.add(new qt(.1).mul(h)),h);return n>r?q2(y):y},jwe=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=kU([r,i]);if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var u=Math.max(n,2),d=EU(new qt(l).sub(o).div(u-1),a,0),h=[...SU(new qt(o),new qt(l),d),l];return a===!1&&(h=h.map(m=>Math.round(m))),r>i?q2(h):h},Twe=e=>e.rootProps.barCategoryGap,dw=e=>e.rootProps.stackOffset,TU=e=>e.rootProps.reverseStackOrder,OA=e=>e.options.chartName,CA=e=>e.rootProps.syncId,AU=e=>e.rootProps.syncMethod,MA=e=>e.options.eventEmitter,Awe=e=>e.rootProps.baseValue,ni={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Os={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ki={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fw=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Nwe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Os.angleAxisId,includeHidden:!1,name:void 0,reversed:Os.reversed,scale:Os.scale,tick:Os.tick,tickCount:void 0,ticks:void 0,type:Os.type,unit:void 0},Owe={allowDataOverflow:Ki.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ki.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ki.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ki.scale,tick:Ki.tick,tickCount:Ki.tickCount,ticks:void 0,type:Ki.type,unit:void 0},Cwe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Os.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Os.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Os.scale,tick:Os.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Mwe={allowDataOverflow:Ki.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ki.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ki.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ki.scale,tick:Ki.tick,tickCount:Ki.tickCount,ticks:void 0,type:"category",unit:void 0},DA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Cwe:Nwe,PA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Mwe:Owe,hw=e=>e.polarOptions,RA=_e([Qs,el,$r],Eye),NU=_e([hw,RA],(e,t)=>{if(e!=null)return cc(e.innerRadius,t,0)}),OU=_e([hw,RA],(e,t)=>{if(e!=null)return cc(e.outerRadius,t,t*.8)}),Dwe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},CU=_e([hw],Dwe);_e([DA,CU],fw);var MU=_e([RA,NU,OU],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});_e([PA,MU],fw);var DU=_e([sn,hw,NU,OU,Qs,el],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=t;return{cx:cc(o,i,i/2),cy:cc(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),sr=(e,t)=>t,mw=(e,t,n)=>n;function LA(e){return e?.id}function PU(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=LA(l);d.forEach((m,b)=>{var y=a==null||i?b:String(qr(m,a,null)),k=qr(m,l.dataKey,0),w;o.has(y)?w=o.get(y):w={},Object.assign(w,{[h]:k}),o.set(y,w)})}}),Array.from(o.values())}function IA(e){return e.stackId!=null&&e.dataKey!=null}var pw=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function gw(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Pwe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var lr=e=>{var t=sn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Kf=e=>e.tooltip.settings.axisId;function FI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(n),!0).forEach(function(r){Rwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rwe(e,t,n){return(t=Lwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lwe(e){var t=Iwe(e,"string");return typeof t=="symbol"?t:t+""}function Iwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K2=[0,"auto"],gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},RU=(e,t)=>e.cartesianAxis.xAxis[t],nl=(e,t)=>{var n=RU(e,t);return n??gr},br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:K2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Qp},LU=(e,t)=>e.cartesianAxis.yAxis[t],rl=(e,t)=>{var n=LU(e,t);return n??br},$we={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$A=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??$we},oi=(e,t,n)=>{switch(t){case"xAxis":return nl(e,n);case"yAxis":return rl(e,n);case"zAxis":return $A(e,n);case"angleAxis":return DA(e,n);case"radiusAxis":return PA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Bwe=(e,t,n)=>{switch(t){case"xAxis":return nl(e,n);case"yAxis":return rl(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},o0=(e,t,n)=>{switch(t){case"xAxis":return nl(e,n);case"yAxis":return rl(e,n);case"angleAxis":return DA(e,n);case"radiusAxis":return PA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},IU=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function $U(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var BU=e=>e.graphicalItems.cartesianItems,zwe=_e([sr,mw],$U),zU=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),s0=_e([BU,oi,zwe],zU,{memoizeOptions:{resultEqualityCheck:gw}}),UU=_e([s0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(IA)),FU=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Uwe=_e([s0],FU),HU=e=>e.map(t=>t.data).filter(Boolean).flat(1),Fwe=_e([s0],HU,{memoizeOptions:{resultEqualityCheck:gw}}),GU=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},BA=_e([Fwe,TA],GU),YU=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:qr(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:qr(i,r)}))):e.map(r=>({value:r})),bw=_e([BA,oi,s0],YU);function qU(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function yy(e){if(Wo(e)||e instanceof Date){var t=Number(e);if(Pn(t))return t}}function HI(e){if(Array.isArray(e)){var t=[yy(e[0]),yy(e[1])];return uc(t)?t:void 0}var n=yy(e);if(n!=null)return[n,n]}function Vs(e){return e.map(yy).filter(cpe)}function Hwe(e,t,n){return!n||typeof t!="number"||uo(t)?[]:n.length?Vs(n.flatMap(r=>{var i=qr(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Pn(a)||!Pn(o)))return[t-a,t+o]})):[]}var cr=e=>{var t=lr(e),n=Kf(e);return o0(e,t,n)},l0=_e([cr],e=>e?.dataKey),Gwe=_e([UU,TA,cr],PU),KU=(e,t,n,r)=>{var i={},a=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),i);return Object.fromEntries(Object.entries(a).map(o=>{var[l,u]=o,d=r?[...u].reverse():u,h=d.map(LA);return[l,{stackedData:mge(e,h,n),graphicalItems:d}]}))},W2=_e([Gwe,UU,dw,TU],KU),WU=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=yge(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Ywe=_e([oi],e=>e.allowDataOverflow),zA=e=>{var t;if(e==null||!("domain"in e))return K2;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Vs(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:K2},VU=_e([oi],zA),ZU=_e([VU,Ywe],hU),qwe=_e([W2,gc,sr,ZU],WU,{memoizeOptions:{resultEqualityCheck:pw}}),UA=e=>e.errorBars,Kwe=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>qU(n,r)),Uv=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},XU=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(l=>{n.forEach(u=>{var d,h,m=(d=r[u.id])===null||d===void 0?void 0:d.filter(T=>qU(i,T)),b=qr(l,(h=t.dataKey)!==null&&h!==void 0?h:u.dataKey),y=Hwe(l,b,m);if(y.length>=2){var k=Math.min(...y),w=Math.max(...y);(a==null||k<a)&&(a=k),(o==null||w>o)&&(o=w)}var _=HI(b);_!=null&&(a=a==null?_[0]:Math.min(a,_[0]),o=o==null?_[1]:Math.max(o,_[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var u=HI(qr(l,t.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Pn(a)&&Pn(o))return[a,o]},Wwe=_e([BA,oi,Uwe,UA,sr],XU,{memoizeOptions:{resultEqualityCheck:pw}});function Vwe(e){var{value:t}=e;if(Wo(t)||t instanceof Date)return t}var Zwe=(e,t,n)=>{var r=e.map(Vwe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&g8(r))?Mz(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},JU=e=>e.referenceElements.dots,Wf=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Xwe=_e([JU,sr,mw],Wf),QU=e=>e.referenceElements.areas,Jwe=_e([QU,sr,mw],Wf),eF=e=>e.referenceElements.lines,Qwe=_e([eF,sr,mw],Wf),tF=(e,t)=>{var n=Vs(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},e_e=_e(Xwe,sr,tF),nF=(e,t)=>{var n=Vs(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},t_e=_e([Jwe,sr],nF);function n_e(e){var t;if(e.x!=null)return Vs([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Vs(n)}function r_e(e){var t;if(e.y!=null)return Vs([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Vs(n)}var rF=(e,t)=>{var n=e.flatMap(r=>t==="xAxis"?n_e(r):r_e(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},i_e=_e([Qwe,sr],rF),a_e=_e(e_e,i_e,t_e,(e,t,n)=>Uv(e,n,t)),iF=(e,t,n,r,i,a,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=u?Uv(r,a,i):Uv(a,i);return gwe(t,d,e.allowDataOverflow)},o_e=_e([oi,VU,ZU,qwe,Wwe,a_e,sn,sr],iF,{memoizeOptions:{resultEqualityCheck:pw}}),s_e=[0,1],aF=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=e,d=Js(t,a);if(d&&l==null){var h;return Mz(0,(h=n?.length)!==null&&h!==void 0?h:0)}return u==="category"?Zwe(r,e,d):i==="expand"?s_e:o}},FA=_e([oi,sn,BA,bw,dw,sr,o_e],aF),oF=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(GT(a));return l in Rm?l:"point"}}},c0=_e([oi,sn,IU,OA,sr],oF);function l_e(e){if(e!=null){if(e in Rm)return Rm[e]();var t="scale".concat(GT(e));if(t in Rm)return Rm[t]()}}function HA(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=l_e(t);if(i!=null){var a=i.domain(n).range(r);return uge(a),a}}}var sF=(e,t,n)=>{var r=zA(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&uc(e))return Ewe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&uc(e))return jwe(e,t.tickCount,t.allowDecimals)}},GA=_e([FA,o0,c0],sF),lF=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&uc(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],l=n[n.length-1];return[Math.min(i,a),Math.max(o,l)]}return t},c_e=_e([oi,FA,GA,sr],lF),u_e=_e(bw,oi,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Vs(e.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),cF=_e(u_e,sn,Twe,$r,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Pn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=cc(n,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),d_e=(e,t)=>{var n=nl(e,t);return n==null||typeof n.padding!="string"?0:cF(e,"xAxis",t,n.padding)},f_e=(e,t)=>{var n=rl(e,t);return n==null||typeof n.padding!="string"?0:cF(e,"yAxis",t,n.padding)},h_e=_e(nl,d_e,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),m_e=_e(rl,f_e,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),p_e=_e([$r,h_e,Qx,Jx,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),g_e=_e([$r,sn,m_e,Qx,Jx,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),u0=(e,t,n,r)=>{var i;switch(t){case"xAxis":return p_e(e,n,r);case"yAxis":return g_e(e,n,r);case"zAxis":return(i=$A(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return CU(e);case"radiusAxis":return MU(e,n);default:return}},uF=_e([oi,u0],fw),Vf=_e([oi,c0,c_e,uF],HA);_e([s0,UA,sr],Kwe);function dF(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var yw=(e,t)=>t,vw=(e,t,n)=>n,b_e=_e(Zx,yw,vw,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(dF)),y_e=_e(Xx,yw,vw,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(dF)),fF=(e,t)=>({width:e.width,height:t.height}),v_e=(e,t)=>{var n=typeof t.width=="number"?t.width:Qp;return{width:n,height:e.height}},x_e=_e($r,nl,fF),w_e=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},__e=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},S_e=_e(el,$r,b_e,yw,vw,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=fF(t,l);o==null&&(o=w_e(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;a[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),k_e=_e(Qs,$r,y_e,yw,vw,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=v_e(t,l);o==null&&(o=__e(t,r,e));var d=r==="left"&&!i||r==="right"&&i;a[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),E_e=(e,t)=>{var n=nl(e,t);if(n!=null)return S_e(e,n.orientation,n.mirror)},j_e=_e([$r,nl,E_e,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),T_e=(e,t)=>{var n=rl(e,t);if(n!=null)return k_e(e,n.orientation,n.mirror)},A_e=_e([$r,rl,T_e,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),N_e=_e($r,rl,(e,t)=>{var n=typeof t.width=="number"?t.width:Qp;return{width:n,height:e.height}}),hF=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,l=Js(e,r),u=t.map(d=>d.value);if(o&&l&&a==="category"&&i&&g8(u))return u}},YA=_e([sn,bw,oi,sr],hF),mF=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Js(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(l=>l.value)}},qA=_e([sn,bw,o0,sr],mF),GI=_e([sn,Bwe,c0,Vf,YA,qA,u0,GA,sr],(e,t,n,r,i,a,o,l,u)=>{if(t!=null){var d=Js(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}}),O_e=(e,t,n,r,i,a,o,l,u)=>{if(!(t==null||r==null)){var d=Js(e,u),{type:h,ticks:m,tickCount:b}=t,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,k=h==="category"&&r.bandwidth?r.bandwidth()/y:0;k=u==="angleAxis"&&a!=null&&a.length>=2?Ta(a[0]-a[1])*2*k:k;var w=m||i;if(w){var _=w.map((T,N)=>{var j=o?o.indexOf(T):T;return{index:N,coordinate:r(j)+k,value:T,offset:k}});return _.filter(T=>Pn(T.coordinate))}return d&&l?l.map((T,N)=>({coordinate:r(T)+k,value:T,index:N,offset:k})).filter(T=>Pn(T.coordinate)):r.ticks?r.ticks(b).map(T=>({coordinate:r(T)+k,value:T,offset:k})):r.domain().map((T,N)=>({coordinate:r(T)+k,value:o?o[T]:T,index:N,offset:k}))}},pF=_e([sn,o0,c0,Vf,GA,u0,YA,qA,sr],O_e),C_e=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=Js(e,o),{tickCount:u}=t,d=0;return d=o==="angleAxis"&&r?.length>=2?Ta(r[0]-r[1])*2*d:d,l&&a?a.map((h,m)=>({coordinate:n(h)+d,value:h,index:m,offset:d})):n.ticks?n.ticks(u).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,m)=>({coordinate:n(h)+d,value:i?i[h]:h,index:m,offset:d}))}},gF=_e([sn,o0,Vf,u0,YA,qA,sr],C_e),bF=_e(oi,Vf,(e,t)=>{if(!(e==null||t==null))return zv(zv({},e),{},{scale:t})}),M_e=_e([oi,c0,FA,uF],HA);_e((e,t,n)=>$A(e,n),M_e,(e,t)=>{if(!(e==null||t==null))return zv(zv({},e),{},{scale:t})});var D_e=_e([sn,Zx,Xx],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),yF=e=>e.options.defaultTooltipEventType,vF=e=>e.options.validateTooltipEventTypes;function xF(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function KA(e,t){var n=yF(e),r=vF(e);return xF(t,n,r)}function P_e(e){return it(t=>KA(t,e))}var wF=(e,t)=>{var n,r=Number(t);if(!(uo(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},R_e=e=>e.tooltip.settings,Ql={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},L_e={itemInteraction:{click:Ql,hover:Ql},axisInteraction:{click:Ql,hover:Ql},keyboardInteraction:Ql,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_F=Mi({name:"tooltip",initialState:L_e,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:yn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=lo(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:yn()},removeTooltipEntrySettings:{reducer(e,t){var n=lo(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:yn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:I_e,replaceTooltipEntrySettings:$_e,removeTooltipEntrySettings:B_e,setTooltipSettingsState:z_e,setActiveMouseOverItemIndex:U_e,mouseLeaveItem:wDe,mouseLeaveChart:SF,setActiveClickItemIndex:_De,setMouseOverAxisIndex:kF,setMouseClickAxisIndex:F_e,setSyncInteraction:V2,setKeyboardInteraction:Z2}=_F.actions,H_e=_F.reducer;function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){G_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G_e(e,t,n){return(t=Y_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y_e(e){var t=q_e(e,"string");return typeof t=="symbol"?t:t+""}function q_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K_e(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function W_e(e){return e.index!=null}var EF=(e,t,n,r)=>{if(t==null)return Ql;var i=K_e(e,t,n);if(i==null)return Ql;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(W_e(i)){if(a)return zb(zb({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return zb(zb({},Ql),{},{coordinate:i.coordinate})};function V_e(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Z_e(e,t){var n=V_e(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),o=Math.max(r,i);return n>=a&&n<=o}function X_e(e,t,n){if(n==null||t==null)return!0;var r=qr(e,t);return r==null||!uc(n)?!0:Z_e(r,n)}var WA=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var a=Number(i);if(!Pn(a))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var u=Math.max(o,Math.min(a,l)),d=t[u];return d==null||X_e(d,n,r)?String(u):null},jF=(e,t,n,r,i,a,o,l)=>{if(!(a==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,a);if(d!=null)return d;var h=i?.[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},TF=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},d0=e=>e.options.tooltipPayloadSearcher,Zf=e=>e.tooltip;function qI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(n),!0).forEach(function(r){J_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J_e(e,t,n){return(t=Q_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q_e(e){var t=e1e(e,"string");return typeof t=="symbol"?t:t+""}function e1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t1e(e,t){return e??t}var AF=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=n,m=[];return e.reduce((b,y)=>{var k,{dataDefinedOnItem:w,settings:_}=y,T=t1e(w,l),N=Array.isArray(T)?iz(T,d,h):T,j=(k=_?.dataKey)!==null&&k!==void 0?k:r,C=_?.nameKey,M;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?M=b8(N,r,i):M=a(N,t,u,C),Array.isArray(M))M.forEach(I=>{var z=KI(KI({},_),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});b.push(gL({tooltipEntrySettings:z,dataKey:I.dataKey,payload:I.payload,value:qr(I.payload,I.dataKey),name:I.name}))});else{var P;b.push(gL({tooltipEntrySettings:_,dataKey:j,payload:M,value:qr(M,j),name:(P=qr(M,C))!==null&&P!==void 0?P:_?.name}))}return b},m)}},VA=_e([cr,sn,IU,OA,lr],oF),n1e=_e([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),r1e=_e([lr,Kf],$U),f0=_e([n1e,cr,r1e],zU,{memoizeOptions:{resultEqualityCheck:gw}}),i1e=_e([f0],e=>e.filter(IA)),a1e=_e([f0],HU,{memoizeOptions:{resultEqualityCheck:gw}}),Xf=_e([a1e,gc],GU),o1e=_e([i1e,gc,cr],PU),ZA=_e([Xf,cr,f0],YU),NF=_e([cr],zA),s1e=_e([cr],e=>e.allowDataOverflow),OF=_e([NF,s1e],hU),l1e=_e([f0],e=>e.filter(IA)),c1e=_e([o1e,l1e,dw,TU],KU),u1e=_e([c1e,gc,lr,OF],WU),d1e=_e([f0],FU),f1e=_e([Xf,cr,d1e,UA,lr],XU,{memoizeOptions:{resultEqualityCheck:pw}}),h1e=_e([JU,lr,Kf],Wf),m1e=_e([h1e,lr],tF),p1e=_e([QU,lr,Kf],Wf),g1e=_e([p1e,lr],nF),b1e=_e([eF,lr,Kf],Wf),y1e=_e([b1e,lr],rF),v1e=_e([m1e,y1e,g1e],Uv),x1e=_e([cr,NF,OF,u1e,f1e,v1e,sn,lr],iF),h0=_e([cr,sn,Xf,ZA,dw,lr,x1e],aF),w1e=_e([h0,cr,VA],sF),_1e=_e([cr,h0,w1e,lr],lF),CF=e=>{var t=lr(e),n=Kf(e),r=!1;return u0(e,t,n,r)},MF=_e([cr,CF],fw),DF=_e([cr,VA,_1e,MF],HA),S1e=_e([sn,ZA,cr,lr],hF),k1e=_e([sn,ZA,cr,lr],mF),E1e=(e,t,n,r,i,a,o,l)=>{if(t){var{type:u}=t,d=Js(e,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=l==="angleAxis"&&i!=null&&i?.length>=2?Ta(i[0]-i[1])*2*m:m,d&&o?o.map((b,y)=>({coordinate:r(b)+m,value:b,index:y,offset:m})):r.domain().map((b,y)=>({coordinate:r(b)+m,value:a?a[b]:b,index:y,offset:m}))}}},il=_e([sn,cr,VA,DF,CF,S1e,k1e,lr],E1e),XA=_e([yF,vF,R_e],(e,t,n)=>xF(n.shared,e,t)),PF=e=>e.tooltip.settings.trigger,JA=e=>e.tooltip.settings.defaultIndex,m0=_e([Zf,XA,PF,JA],EF),Np=_e([m0,Xf,l0,h0],WA),RF=_e([il,Np],wF),j1e=_e([m0],e=>{if(e)return e.dataKey});_e([m0],e=>{if(e)return e.graphicalItemId});var LF=_e([Zf,XA,PF,JA],TF),T1e=_e([Qs,el,sn,$r,il,JA,LF,d0],jF),A1e=_e([m0,T1e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),N1e=_e([m0],e=>e.active),O1e=_e([LF,Np,gc,l0,RF,d0,XA],AF),C1e=_e([O1e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(n),!0).forEach(function(r){M1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M1e(e,t,n){return(t=D1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D1e(e){var t=P1e(e,"string");return typeof t=="symbol"?t:t+""}function P1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R1e=()=>it(cr),L1e=()=>{var e=R1e(),t=it(il),n=it(DF);return xv(!e||!n?void 0:VI(VI({},e),{},{scale:n}),t)};function ZI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(n),!0).forEach(function(r){I1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I1e(e,t,n){return(t=$1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $1e(e){var t=B1e(e,"string");return typeof t=="symbol"?t:t+""}function B1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z1e=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},U1e=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Ud(Ud(Ud({},r),Pr(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:u}=r;return Ud(Ud(Ud({},r),Pr(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function F1e(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var IF=(e,t,n,r,i)=>{var a,o=-1,l=(a=t?.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?n[u-1].coordinate:n[l-1].coordinate,h=n[u].coordinate,m=u>=l-1?n[0].coordinate:n[u+1].coordinate,b=void 0;if(Ta(h-d)!==Ta(m-h)){var y=[];if(Ta(m-h)===Ta(i[1]-i[0])){b=m;var k=h+i[1]-i[0];y[0]=Math.min(k,(k+d)/2),y[1]=Math.max(k,(k+d)/2)}else{b=d;var w=m+i[1]-i[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var _=[Math.min(h,(b+h)/2),Math.max(h,(b+h)/2)];if(e>_[0]&&e<=_[1]||e>=y[0]&&e<=y[1]){({index:o}=n[u]);break}}else{var T=Math.min(d,m),N=Math.max(d,m);if(e>(T+h)/2&&e<=(N+h)/2){({index:o}=n[u]);break}}}else if(t){for(var j=0;j<l;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:o}=t[j]);break}}return o},$F=()=>it(OA),QA=(e,t)=>t,BF=(e,t,n)=>n,eN=(e,t,n,r)=>r,H1e=_e(il,e=>Ux(e,t=>t.coordinate)),tN=_e([Zf,QA,BF,eN],EF),nN=_e([tN,Xf,l0,h0],WA),G1e=(e,t,n)=>{if(t!=null){var r=Zf(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},zF=_e([Zf,QA,BF,eN],TF),Fv=_e([Qs,el,sn,$r,il,eN,zF,d0],jF),Y1e=_e([tN,Fv],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),UF=_e([il,nN],wF),q1e=_e([zF,nN,gc,l0,UF,d0,QA],AF),K1e=_e([tN,nN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),W1e=(e,t,n,r,i,a,o)=>{if(!(!e||!n||!r||!i)&&F1e(e,o)){var l=vge(e,t),u=IF(l,a,i,n,r),d=z1e(t,i,u,e);return{activeIndex:String(u),activeCoordinate:d}}},V1e=(e,t,n,r,i,a,o)=>{if(!(!e||!r||!i||!a||!n)){var l=Oye(e,n);if(l){var u=xge(l,t),d=IF(u,o,a,r,i),h=U1e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},Z1e=(e,t,n,r,i,a,o,l)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?W1e(e,t,r,i,a,o,l):V1e(e,t,n,r,i,a,o)},X1e=_e(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElementId:r.elementId}}),J1e=_e(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(ni)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Pwe}});function XI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(n),!0).forEach(function(r){Q1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q1e(e,t,n){return(t=eSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eSe(e){var t=tSe(e,"string");return typeof t=="symbol"?t:t+""}function tSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nSe={},rSe={zIndexMap:Object.values(ni).reduce((e,t)=>JI(JI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),nSe)},iSe=new Set(Object.values(ni));function aSe(e){return iSe.has(e)}var FF=Mi({name:"zIndex",initialState:rSe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:yn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!aSe(n)&&delete e.zIndexMap[n])},prepare:yn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElementId=r:e.zIndexMap[n].elementId=r:e.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:yn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:yn()}}}),{registerZIndexPortal:oSe,unregisterZIndexPortal:sSe,registerZIndexPortalId:lSe,unregisterZIndexPortalId:cSe}=FF.actions,uSe=FF.reducer;function al(e){var{zIndex:t,children:n}=e,r=ebe(),i=r&&t!==void 0&&t!==0,a=Di(),o=Sr();S.useLayoutEffect(()=>i?(o(oSe({zIndex:t})),()=>{o(sSe({zIndex:t}))}):Vp,[o,t,i]);var l=it(d=>X1e(d,t,a));if(!i)return n;if(!l)return null;var u=document.getElementById(l);return u?Bu.createPortal(n,u):null}function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X2.apply(null,arguments)}function QI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(n),!0).forEach(function(r){dSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dSe(e,t,n){return(t=fSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fSe(e){var t=hSe(e,"string");return typeof t=="symbol"?t:t+""}function hSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mSe(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return S.isValidElement(t)?S.cloneElement(t,r):S.createElement(n,r)}function pSe(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,m=n,b=r,y=i;if(!u||!m||h!=="ScatterChart"&&d!=="axis")return null;var k,w,_;if(h==="ScatterChart")k=m,w=Fbe,_=ni.cursorLine;else if(h==="BarChart")k=Hbe(l,m,a,o),w=xye,_=ni.cursorRectangle;else if(l==="radial"&&y8(m)){var{cx:T,cy:N,radius:j,startAngle:C,endAngle:M}=Oz(m);k={cx:T,cy:N,startAngle:C,endAngle:M,innerRadius:j,outerRadius:j},w=Pye,_=ni.cursorLine}else k={points:Rye(l,m,a)},w=by,_=ni.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,I=Ub(Ub(Ub(Ub({stroke:"#ccc",pointerEvents:"none"},a),k),Ix(u)),{},{payload:b,payloadIndex:y,className:fn("recharts-tooltip-cursor",P)});return S.createElement(al,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},S.createElement(mSe,{cursor:u,cursorComp:w,cursorProps:I}))}function gSe(e){var t=L1e(),n=mz(),r=e0(),i=$F();return t==null||n==null||r==null||i==null?null:S.createElement(pSe,X2({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var HF=S.createContext(null),bSe=()=>S.useContext(HF),Pk={exports:{}},e5;function ySe(){return e5||(e5=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function a(u,d,h,m,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,m||u,b),k=n?n+d:d;return u._events[k]?u._events[k].fn?u._events[k]=[u._events[k],y]:u._events[k].push(y):(u._events[k]=y,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var b=0,y=m.length,k=new Array(y);b<y;b++)k[b]=m[b].fn;return k},l.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,h,m,b,y,k){var w=n?n+d:d;if(!this._events[w])return!1;var _=this._events[w],T=arguments.length,N,j;if(_.fn){switch(_.once&&this.removeListener(d,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,m),!0;case 4:return _.fn.call(_.context,h,m,b),!0;case 5:return _.fn.call(_.context,h,m,b,y),!0;case 6:return _.fn.call(_.context,h,m,b,y,k),!0}for(j=1,N=new Array(T-1);j<T;j++)N[j-1]=arguments[j];_.fn.apply(_.context,N)}else{var C=_.length,M;for(j=0;j<C;j++)switch(_[j].once&&this.removeListener(d,_[j].fn,void 0,!0),T){case 1:_[j].fn.call(_[j].context);break;case 2:_[j].fn.call(_[j].context,h);break;case 3:_[j].fn.call(_[j].context,h,m);break;case 4:_[j].fn.call(_[j].context,h,m,b);break;default:if(!N)for(M=1,N=new Array(T-1);M<T;M++)N[M-1]=arguments[M];_[j].fn.apply(_[j].context,N)}}return!0},l.prototype.on=function(d,h,m){return a(this,d,h,m,!1)},l.prototype.once=function(d,h,m){return a(this,d,h,m,!0)},l.prototype.removeListener=function(d,h,m,b){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var k=this._events[y];if(k.fn)k.fn===h&&(!b||k.once)&&(!m||k.context===m)&&o(this,y);else{for(var w=0,_=[],T=k.length;w<T;w++)(k[w].fn!==h||b&&!k[w].once||m&&k[w].context!==m)&&_.push(k[w]);_.length?this._events[y]=_.length===1?_[0]:_:o(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(Pk)),Pk.exports}var vSe=ySe();const xSe=Ci(vSe);var Op=new xSe,J2="recharts.syncEvent.tooltip",t5="recharts.syncEvent.brush";function wSe(e,t){if(t){var n=Number.parseInt(t,10);if(!uo(n))return e?.[n]}}var _Se={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},GF=Mi({name:"options",initialState:_Se,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),SSe=GF.reducer,{createEventEmitter:kSe}=GF.actions;function ESe(e){return e.tooltip.syncInteraction}var jSe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},YF=Mi({name:"chartData",initialState:jSe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:n5,setDataStartEndIndexes:TSe,setComputedData:SDe}=YF.actions,ASe=YF.reducer,NSe=["x","y"];function r5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(n),!0).forEach(function(r){OSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OSe(e,t,n){return(t=CSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CSe(e){var t=MSe(e,"string");return typeof t=="symbol"?t:t+""}function MSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DSe(e,t){if(e==null)return{};var n,r,i=PSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function PSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function RSe(){var e=it(CA),t=it(MA),n=Sr(),r=it(AU),i=it(il),a=e0(),o=ew(),l=it(u=>u.rootProps.className);S.useEffect(()=>{if(e==null)return Vp;var u=(d,h,m)=>{if(t!==m&&e===d){if(r==="index"){var b;if(o&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:k,y:w}=y,_=DSe(y,NSe),{x:T,y:N,width:j,height:C}=h.payload.sourceViewBox,M=Fd(Fd({},_),{},{x:o.x+(j?(k-T)/j:0)*o.width,y:o.y+(C?(w-N)/C:0)*o.height});n(Fd(Fd({},h),{},{payload:Fd(Fd({},h.payload),{},{coordinate:M})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var I={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},z=r(i,I);P=i[z]}else r==="value"&&(P=i.find(F=>String(F.value)===h.payload.label));var{coordinate:K}=h.payload;if(P==null||h.payload.active===!1||K==null||o==null){n(V2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:G,y:H}=K,B=Math.min(G,o.x+o.width),q=Math.min(H,o.y+o.height),X={x:a==="horizontal"?P.coordinate:B,y:a==="horizontal"?q:P.coordinate},V=V2({active:h.payload.active,coordinate:X,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(V)}}};return Op.on(J2,u),()=>{Op.off(J2,u)}},[l,n,t,e,r,i,a,o])}function LSe(){var e=it(CA),t=it(MA),n=Sr();S.useEffect(()=>{if(e==null)return Vp;var r=(i,a,o)=>{t!==o&&e===i&&n(TSe(a))};return Op.on(t5,r),()=>{Op.off(t5,r)}},[n,t,e])}function ISe(){var e=Sr();S.useEffect(()=>{e(kSe())},[e]),RSe(),LSe()}function $Se(e,t,n,r,i,a){var o=it(y=>G1e(y,e,t)),l=it(MA),u=it(CA),d=it(AU),h=it(ESe),m=h?.active,b=ew();S.useEffect(()=>{if(!m&&u!=null&&l!=null){var y=V2({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b,graphicalItemId:void 0});Op.emit(J2,u,y,l)}},[m,n,o,i,r,l,u,d,a,b])}function i5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(n),!0).forEach(function(r){BSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BSe(e,t,n){return(t=zSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zSe(e){var t=USe(e,"string");return typeof t=="symbol"?t:t+""}function USe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FSe(e){return e.dataKey}function HSe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(wbe,t)}var o5=[],GSe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function YSe(e){var t,n,r=aa(e,GSe),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:l,content:u,filterNull:d,isAnimationActive:h,offset:m,payloadUniqBy:b,position:y,reverseDirection:k,useTranslate3d:w,wrapperStyle:_,cursor:T,shared:N,trigger:j,defaultIndex:C,portal:M,axisId:P}=r,I=Sr(),z=typeof C=="number"?String(C):C;S.useEffect(()=>{I(z_e({shared:N,trigger:j,axisId:P,active:i,defaultIndex:z}))},[I,N,j,P,i,z]);var K=ew(),G=kz(),H=P_e(N),{activeIndex:B,isActive:q}=(t=it(me=>K1e(me,H,j,z)))!==null&&t!==void 0?t:{},X=it(me=>q1e(me,H,j,z)),V=it(me=>UF(me,H,j,z)),F=it(me=>Y1e(me,H,j,z)),Z=X,Q=bSe(),le=(n=i??q)!==null&&n!==void 0?n:!1,[se,W]=c0e([Z,le]),re=H==="axis"?V:void 0;$Se(H,j,F,re,B,le);var ee=M??Q;if(ee==null||K==null||H==null)return null;var he=Z??o5;le||(he=o5),d&&he.length&&(he=Rpe(he.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),b,FSe));var J=he.length>0,ae=S.createElement(Abe,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:le,coordinate:F,hasPayload:J,offset:m,position:y,reverseDirection:k,useTranslate3d:w,viewBox:K,wrapperStyle:_,lastBoundingBox:se,innerRef:W,hasPortalFromProps:!!M},HSe(u,a5(a5({},r),{},{payload:he,label:re,active:le,activeIndex:B,coordinate:F,accessibilityLayer:G})));return S.createElement(S.Fragment,null,Bu.createPortal(ae,ee),le&&S.createElement(gSe,{cursor:T,tooltipEventType:H,coordinate:F,payload:he,index:B}))}function qSe(e,t,n){return(t=KSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KSe(e){var t=WSe(e,"string");return typeof t=="symbol"?t:t+""}function WSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VSe{constructor(t){qSe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZSe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(n),!0).forEach(function(r){XSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XSe(e,t,n){return(t=JSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JSe(e){var t=QSe(e,"string");return typeof t=="symbol"?t:t+""}function QSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eke={cacheSize:2e3,enableCache:!0},qF=ZSe({},eke),l5=new VSe(qF.cacheSize),tke={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},c5="recharts_measurement_span";function nke(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var u5=(e,t)=>{try{var n=document.getElementById(c5);n||(n=document.createElement("span"),n.setAttribute("id",c5),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,tke,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ym=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Hf.isSsr)return{width:0,height:0};if(!qF.enableCache)return u5(t,n);var r=nke(t,n),i=l5.get(r);if(i)return i;var a=u5(t,n);return l5.set(r,a),a},d5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rke=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ike=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ake=Object.keys(KF),ef="NaN";function oke(e,t){return e*KF[t]}class Si{static parse(t){var n,[,r,i]=(n=ike.exec(t))!==null&&n!==void 0?n:[];return new Si(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,uo(t)&&(this.unit=""),n!==""&&!rke.test(n)&&(this.num=NaN,this.unit=""),ake.includes(n)&&(this.num=oke(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Si(NaN,""):new Si(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Si(NaN,""):new Si(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Si(NaN,""):new Si(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Si(NaN,""):new Si(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return uo(this.num)}}function WF(e){if(e.includes(ef))return ef;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=d5.exec(t))!==null&&n!==void 0?n:[],o=Si.parse(r??""),l=Si.parse(a??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return ef;t=t.replace(d5,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,m,b]=(d=f5.exec(t))!==null&&d!==void 0?d:[],y=Si.parse(h??""),k=Si.parse(b??""),w=m==="+"?y.add(k):y.subtract(k);if(w.isNaN())return ef;t=t.replace(f5,w.toString())}return t}var h5=/\(([^()]*)\)/;function ske(e){for(var t=e,n;(n=h5.exec(t))!=null;){var[,r]=n;t=t.replace(h5,WF(r))}return t}function lke(e){var t=e.replace(/\s+/g,"");return t=ske(t),t=WF(t),t}function cke(e){try{return lke(e)}catch{return ef}}function Rk(e){var t=cke(e.slice(5,-1));return t===ef?"":t}var uke=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dke=["dx","dy","angle","className","breakAll"];function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q2.apply(null,arguments)}function m5(e,t){if(e==null)return{};var n,r,i=fke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VF=/[ \f\n\r\t\v\u2028\u2029]+/,ZF=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Rr(t)||(n?i=t.toString().split(""):i=t.toString().split(VF));var a=i.map(l=>({word:l,width:Ym(l,r).width})),o=n?0:Ym("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function hke(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var XF=(e,t,n,r)=>e.reduce((i,a)=>{var{word:o,width:l}=a,u=i[i.length-1];if(u&&l!=null&&(t==null||r||u.width+l+n<Number(t)))u.words.push(o),u.width+=l+n;else{var d={words:[o],width:l};i.push(d)}return i},[]),JF=e=>e.reduce((t,n)=>t.width>n.width?t:n),mke="",p5=(e,t,n,r,i,a,o,l)=>{var u=e.slice(0,t),d=ZF({breakAll:n,style:r,children:u+mke});if(!d)return[!1,[]];var h=XF(d.wordsWithComputedWidth,a,o,l),m=h.length>i||JF(h).width>Number(a);return[m,h]},pke=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:l,breakAll:u}=e,d=tt(a),h=String(o),m=XF(t,r,n,i);if(!d||i)return m;var b=m.length>a||JF(m).width>Number(r);if(!b)return m;for(var y=0,k=h.length-1,w=0,_;y<=k&&w<=h.length-1;){var T=Math.floor((y+k)/2),N=T-1,[j,C]=p5(h,N,u,l,a,r,n,i),[M]=p5(h,T,u,l,a,r,n,i);if(!j&&!M&&(y=T+1),j&&M&&(k=T-1),!j&&M){_=C;break}w++}return _||m},g5=e=>{var t=Rr(e)?[]:e.toString().split(VF);return[{words:t,width:void 0}]},gke=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!Hf.isSsr){var l,u,d=ZF({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:m}=d;l=h,u=m}else return g5(r);return pke({breakAll:a,children:r,maxLines:o,style:i},l,u,t,!!n)}return g5(r)},QF="#808080",bke={angle:0,breakAll:!1,capHeight:"0.71em",fill:QF,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},rN=S.forwardRef((e,t)=>{var n=aa(e,bke),{x:r,y:i,lineHeight:a,capHeight:o,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:h}=n,m=m5(n,uke),b=S.useMemo(()=>gke({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:u,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,u,m.style,m.width]),{dx:y,dy:k,angle:w,className:_,breakAll:T}=m,N=m5(m,dke);if(!Wo(r)||!Wo(i)||b.length===0)return null;var j=Number(r)+(tt(y)?y:0),C=Number(i)+(tt(k)?k:0);if(!Pn(j)||!Pn(C))return null;var M;switch(h){case"start":M=Rk("calc(".concat(o,")"));break;case"middle":M=Rk("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:M=Rk("calc(".concat(b.length-1," * -").concat(a,")"));break}var P=[];if(u){var I=b[0].width,{width:z}=m;P.push("scale(".concat(tt(z)&&tt(I)?z/I:1,")"))}return w&&P.push("rotate(".concat(w,", ").concat(j,", ").concat(C,")")),P.length&&(N.transform=P.join(" ")),S.createElement("text",Q2({},Da(N),{ref:t,x:j,y:C,className:fn("recharts-text",_),textAnchor:d,fill:l.includes("url")?QF:l}),b.map((K,G)=>{var H=K.words.join(T?"":" ");return S.createElement("tspan",{x:j,dy:G===0?M:a,key:"".concat(H,"-").concat(G)},H)}))});rN.displayName="Text";var yke=["labelRef"];function vke(e,t){if(e==null)return{};var n,r,i=xke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function b5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b5(Object(n),!0).forEach(function(r){wke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wke(e,t,n){return(t=_ke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ke(e){var t=Ske(e,"string");return typeof t=="symbol"?t:t+""}function Ske(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(null,arguments)}var eH=S.createContext(null),kke=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o,children:l}=e,u=S.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o}),[t,n,r,i,a,o]);return S.createElement(eH.Provider,{value:u},l)},tH=()=>{var e=S.useContext(eH),t=ew();return e||hz(t)},Eke=S.createContext(null),jke=()=>{var e=S.useContext(Eke),t=it(DU);return e||t},Tke=e=>{var{value:t,formatter:n}=e,r=Rr(e.children)?t:e.children;return typeof n=="function"?n(r):r},iN=e=>e!=null&&typeof e=="function",Ake=(e,t)=>{var n=Ta(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Nke=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:m,endAngle:b,clockWise:y}=i,k=(d+h)/2,w=Ake(m,b),_=w>=0?1:-1,T,N;switch(t){case"insideStart":T=m+_*a,N=y;break;case"insideEnd":T=b-_*a,N=!y;break;case"end":T=b+_*a,N=y;break;default:throw new Error("Unsupported position ".concat(t))}N=w<=0?N:!N;var j=Pr(l,u,k,T),C=Pr(l,u,k,T+(N?1:-1)*359),M="M".concat(j.x,",").concat(j.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Rr(e.id)?gp("recharts-radial-line-"):e.id;return S.createElement("text",Cs({},r,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:P,d:M})),S.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Oke=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:u}=e,d=(l+u)/2;if(n==="outside"){var{x:h,y:m}=Pr(r,i,o+t,d);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(a+o)/2,{x:y,y:k}=Pr(r,i,b,d);return{x:y,y:k,textAnchor:"middle",verticalAnchor:"middle"}},ej=e=>"cx"in e&&tt(e.cx),Cke=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!ej(n)&&(a=n);var{x:o,y:l,upperWidth:u,lowerWidth:d,height:h}=t,m=o,b=o+(u-d)/2,y=(m+b)/2,k=(u+d)/2,w=m+u/2,_=h>=0?1:-1,T=_*r,N=_>0?"end":"start",j=_>0?"start":"end",C=u>=0?1:-1,M=C*r,P=C>0?"end":"start",I=C>0?"start":"end";if(i==="top"){var z={x:m+u/2,y:l-T,textAnchor:"middle",verticalAnchor:N};return $n($n({},z),a?{height:Math.max(l-a.y,0),width:u}:{})}if(i==="bottom"){var K={x:b+d/2,y:l+h+T,textAnchor:"middle",verticalAnchor:j};return $n($n({},K),a?{height:Math.max(a.y+a.height-(l+h),0),width:d}:{})}if(i==="left"){var G={x:y-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return $n($n({},G),a?{width:Math.max(G.x-a.x,0),height:h}:{})}if(i==="right"){var H={x:y+k+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"};return $n($n({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:h}:{})}var B=a?{width:k,height:h}:{};return i==="insideLeft"?$n({x:y+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"},B):i==="insideRight"?$n({x:y+k-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},B):i==="insideTop"?$n({x:m+u/2,y:l+T,textAnchor:"middle",verticalAnchor:j},B):i==="insideBottom"?$n({x:b+d/2,y:l+h-T,textAnchor:"middle",verticalAnchor:N},B):i==="insideTopLeft"?$n({x:m+M,y:l+T,textAnchor:I,verticalAnchor:j},B):i==="insideTopRight"?$n({x:m+u-M,y:l+T,textAnchor:P,verticalAnchor:j},B):i==="insideBottomLeft"?$n({x:b+M,y:l+h-T,textAnchor:I,verticalAnchor:N},B):i==="insideBottomRight"?$n({x:b+d-M,y:l+h-T,textAnchor:P,verticalAnchor:N},B):i&&typeof i=="object"&&(tt(i.x)||Gs(i.x))&&(tt(i.y)||Gs(i.y))?$n({x:o+cc(i.x,k),y:l+cc(i.y,h),textAnchor:"end",verticalAnchor:"end"},B):$n({x:w,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Mke={angle:0,offset:5,zIndex:ni.label,position:"middle",textBreakAll:!1};function Kl(e){var t=aa(e,Mke),{viewBox:n,position:r,value:i,children:a,content:o,className:l="",textBreakAll:u,labelRef:d}=t,h=jke(),m=tH(),b=r==="center"?m:h??m,y,k,w;if(n==null?y=b:ej(n)?y=n:y=hz(n),!y||Rr(i)&&Rr(a)&&!S.isValidElement(o)&&typeof o!="function")return null;var _=$n($n({},t),{},{viewBox:y});if(S.isValidElement(o)){var{labelRef:T}=_,N=vke(_,yke);return S.cloneElement(o,N)}if(typeof o=="function"){if(k=S.createElement(o,_),S.isValidElement(k))return k}else k=Tke(t);var j=Da(t);if(ej(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Nke(t,r,k,j,y);w=Oke(y,t.offset,t.position)}else w=Cke(t,y);return S.createElement(al,{zIndex:t.zIndex},S.createElement(rN,Cs({ref:d,className:fn("recharts-label",l)},j,w,{textAnchor:hke(j.textAnchor)?j.textAnchor:w.textAnchor,breakAll:u}),k))}Kl.displayName="Label";var Dke=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?S.createElement(Kl,Cs({key:"label-implicit"},r)):Wo(e)?S.createElement(Kl,Cs({key:"label-implicit",value:e},r)):S.isValidElement(e)?e.type===Kl?S.cloneElement(e,$n({key:"label-implicit"},r)):S.createElement(Kl,Cs({key:"label-implicit",content:e},r)):iN(e)?S.createElement(Kl,Cs({key:"label-implicit",content:e},r)):e&&typeof e=="object"?S.createElement(Kl,Cs({},e,{key:"label-implicit"},r)):null};function Pke(e){var{label:t,labelRef:n}=e,r=tH();return Dke(t,r,n)||null}var Lk={},Ik={},y5;function Rke(){return y5||(y5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Ik)),Ik}var $k={},v5;function Lke(){return v5||(v5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})($k)),$k}var x5;function Ike(){return x5||(x5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rke(),n=Lke(),r=qT();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(Lk)),Lk}var Bk,w5;function $ke(){return w5||(w5=1,Bk=Ike().last),Bk}var Bke=$ke();const zke=Ci(Bke);var Uke=["valueAccessor"],Fke=["dataKey","clockWise","id","textBreakAll","zIndex"];function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hv.apply(null,arguments)}function _5(e,t){if(e==null)return{};var n,r,i=Hke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Gke=e=>Array.isArray(e.value)?zke(e.value):e.value,nH=S.createContext(void 0),Yke=nH.Provider,rH=S.createContext(void 0);rH.Provider;function qke(){return S.useContext(nH)}function Kke(){return S.useContext(rH)}function vy(e){var{valueAccessor:t=Gke}=e,n=_5(e,Uke),{dataKey:r,clockWise:i,id:a,textBreakAll:o,zIndex:l}=n,u=_5(n,Fke),d=qke(),h=Kke(),m=d||h;return!m||!m.length?null:S.createElement(al,{zIndex:l??ni.label},S.createElement(Ko,{className:"recharts-label-list"},m.map((b,y)=>{var k,w=Rr(r)?t(b,y):qr(b&&b.payload,r),_=Rr(a)?{}:{id:"".concat(a,"-").concat(y)};return S.createElement(Kl,Hv({key:"label-".concat(y)},Da(b),u,_,{fill:(k=n.fill)!==null&&k!==void 0?k:b.fill,parentViewBox:b.parentViewBox,value:w,textBreakAll:o,viewBox:b.viewBox,index:y,zIndex:0}))})))}vy.displayName="LabelList";function Wke(e){var{label:t}=e;return t?t===!0?S.createElement(vy,{key:"labelList-implicit"}):S.isValidElement(t)||iN(t)?S.createElement(vy,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(vy,Hv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tj.apply(null,arguments)}var iH=e=>{var{cx:t,cy:n,r,className:i}=e,a=fn("recharts-dot",i);return tt(t)&&tt(n)&&tt(r)?S.createElement("circle",tj({},co(e),YT(e),{className:a,cx:t,cy:n,r})):null},Vke={radiusAxis:{},angleAxis:{}},aH=Mi({name:"polarAxis",initialState:Vke,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:kDe,removeRadiusAxis:EDe,addAngleAxis:jDe,removeAngleAxis:TDe}=aH.actions,Zke=aH.reducer,zk={exports:{}},Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function Xke(){if(S5)return Ft;S5=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,k=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function j(M){if(typeof M=="object"&&M!==null){var P=M.$$typeof;switch(P){case t:switch(M=M.type,M){case u:case d:case r:case a:case i:case m:return M;default:switch(M=M&&M.$$typeof,M){case l:case h:case k:case y:case o:return M;default:return P}}case n:return P}}}function C(M){return j(M)===d}return Ft.AsyncMode=u,Ft.ConcurrentMode=d,Ft.ContextConsumer=l,Ft.ContextProvider=o,Ft.Element=t,Ft.ForwardRef=h,Ft.Fragment=r,Ft.Lazy=k,Ft.Memo=y,Ft.Portal=n,Ft.Profiler=a,Ft.StrictMode=i,Ft.Suspense=m,Ft.isAsyncMode=function(M){return C(M)||j(M)===u},Ft.isConcurrentMode=C,Ft.isContextConsumer=function(M){return j(M)===l},Ft.isContextProvider=function(M){return j(M)===o},Ft.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},Ft.isForwardRef=function(M){return j(M)===h},Ft.isFragment=function(M){return j(M)===r},Ft.isLazy=function(M){return j(M)===k},Ft.isMemo=function(M){return j(M)===y},Ft.isPortal=function(M){return j(M)===n},Ft.isProfiler=function(M){return j(M)===a},Ft.isStrictMode=function(M){return j(M)===i},Ft.isSuspense=function(M){return j(M)===m},Ft.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===d||M===a||M===i||M===m||M===b||typeof M=="object"&&M!==null&&(M.$$typeof===k||M.$$typeof===y||M.$$typeof===o||M.$$typeof===l||M.$$typeof===h||M.$$typeof===_||M.$$typeof===T||M.$$typeof===N||M.$$typeof===w)},Ft.typeOf=j,Ft}var k5;function Jke(){return k5||(k5=1,zk.exports=Xke()),zk.exports}Jke();var oH=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function Qke(e){var{tooltipEntrySettings:t}=e,n=Sr(),r=Di(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(I_e(t)):i.current!==t&&n($_e({prev:i.current,next:t})),i.current=t)},[t,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(B_e(i.current)),i.current=null)},[n]),null}function eEe(e){var{legendPayload:t}=e,n=Sr(),r=Di(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(hbe(t)):i.current!==t&&n(mbe({prev:i.current,next:t})),i.current=t)},[n,r,t]),S.useLayoutEffect(()=>()=>{i.current&&(n(pbe(i.current)),i.current=null)},[n]),null}var Uk,tEe=()=>{var[e]=S.useState(()=>gp("uid-"));return e},nEe=(Uk=uq.useId)!==null&&Uk!==void 0?Uk:tEe;function sH(e,t){var n=nEe();return t||(e?"".concat(e,"-").concat(n):n)}var rEe=S.createContext(void 0),iEe=e=>{var{id:t,type:n,children:r}=e,i=sH("recharts-".concat(n),t);return S.createElement(rEe.Provider,{value:i},r(i))},aEe={cartesianItems:[],polarItems:[]},lH=Mi({name:"graphicalItems",initialState:aEe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:yn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=lo(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:yn()},removeCartesianGraphicalItem:{reducer(e,t){var n=lo(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:yn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:yn()},removePolarGraphicalItem:{reducer(e,t){var n=lo(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:yn()}}}),{addCartesianGraphicalItem:oEe,replaceCartesianGraphicalItem:sEe,removeCartesianGraphicalItem:lEe,addPolarGraphicalItem:ADe,removePolarGraphicalItem:NDe}=lH.actions,cEe=lH.reducer,uEe=e=>{var t=Sr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(oEe(e)):n.current!==e&&t(sEe({prev:n.current,next:e})),n.current=e},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(t(lEe(n.current)),n.current=null)},[t]),null},dEe=S.memo(uEe),fEe=["points"];function E5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(n),!0).forEach(function(r){hEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hEe(e,t,n){return(t=mEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mEe(e){var t=pEe(e,"string");return typeof t=="symbol"?t:t+""}function pEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gv.apply(null,arguments)}function gEe(e,t){if(e==null)return{};var n,r,i=bEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yEe(e){var{option:t,dotProps:n,className:r}=e;if(S.isValidElement(t))return S.cloneElement(t,n);if(typeof t=="function")return t(n);var i=fn(r,typeof t!="boolean"?t.className:""),a=n??{},{points:o}=a,l=gEe(a,fEe);return S.createElement(iH,Gv({},l,{className:i}))}function vEe(e,t){return e==null?!1:t?!0:e.length===1}function xEe(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:o,needClip:l,clipPathId:u,zIndex:d=ni.scatter}=e;if(!vEe(t,n))return null;var h=oH(n),m=Nme(n),b=t.map((k,w)=>{var _,T,N=Fk(Fk(Fk({r:3},o),m),{},{index:w,cx:(_=k.x)!==null&&_!==void 0?_:void 0,cy:(T=k.y)!==null&&T!==void 0?T:void 0,dataKey:a,value:k.value,payload:k.payload,points:t});return S.createElement(yEe,{key:"dot-".concat(w),option:n,dotProps:N,className:i})}),y={};return l&&u!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),S.createElement(al,{zIndex:d},S.createElement(Ko,Gv({className:r},y),b))}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function T5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(r){wEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wEe(e,t,n){return(t=_Ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Ee(e){var t=SEe(e,"string");return typeof t=="symbol"?t:t+""}function SEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kEe={xAxis:{},yAxis:{},zAxis:{}},cH=Mi({name:"cartesianAxis",initialState:kEe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:yn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:yn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:yn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:yn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:yn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:yn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:yn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:yn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:yn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);e.yAxis[n]=T5(T5({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:EEe,replaceXAxis:jEe,removeXAxis:TEe,addYAxis:AEe,replaceYAxis:NEe,removeYAxis:OEe,addZAxis:ODe,replaceZAxis:CDe,removeZAxis:MDe,updateYAxisWidth:CEe}=cH.actions,MEe=cH.reducer,DEe=_e([$r],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),PEe=_e([DEe,Qs,el],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),aN=()=>it(PEe),REe=()=>it(C1e);function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(n),!0).forEach(function(r){LEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LEe(e,t,n){return(t=IEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IEe(e){var t=$Ee(e,"string");return typeof t=="symbol"?t:t+""}function $Ee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BEe=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},u=Hk(Hk(Hk({},l),Ix(i)),YT(i)),d;return S.isValidElement(i)?d=S.cloneElement(i,u):typeof i=="function"?d=i(u):d=S.createElement(iH,u),S.createElement(Ko,{className:"recharts-active-dot",clipPath:o},d)};function N5(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:o=ni.activeDot}=e,l=it(Np),u=REe();if(t==null||u==null)return null;var d=t.find(h=>u.includes(h.payload));return Rr(d)?null:S.createElement(al,{zIndex:o},S.createElement(BEe,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var zEe={},uH=Mi({name:"errorBars",initialState:zEe,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:DDe,replaceErrorBar:PDe,removeErrorBar:RDe}=uH.actions,UEe=uH.reducer;function dH(e,t){var n,r,i=it(d=>nl(d,e)),a=it(d=>rl(d,t)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:gr.allowDataOverflow,l=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:br.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function FEe(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=aN(),{needClipX:a,needClipY:o,needClip:l}=dH(t,n);if(!l||!i)return null;var{x:u,y:d,width:h,height:m}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:a?u:u-h/2,y:o?d:d-m/2,width:a?h:h*2,height:o?m:m*2}))}var HEe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function GEe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function oN(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(HEe.has(r)){if(e[r]==null&&t[r]==null)continue;if(!oy(e[r],t[r]))return!1}else if(!GEe(e[r],t[r]))return!1;return!0}var YEe=e=>{var{chartData:t}=e,n=Sr(),r=Di();return S.useEffect(()=>r?()=>{}:(n(n5(t)),()=>{n(n5(void 0))}),[t,n,r]),null},O5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fH=Mi({name:"brush",initialState:O5,reducers:{setBrushSettings(e,t){return t.payload==null?O5:t.payload}}}),{setBrushSettings:LDe}=fH.actions,qEe=fH.reducer;function KEe(e,t,n){return(t=WEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WEe(e){var t=VEe(e,"string");return typeof t=="symbol"?t:t+""}function VEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sN{static create(t){return new sN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}KEe(sN,"EPS",1e-4);function ZEe(e){return(e%180+180)%180}var XEe=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ZEe(i),o=a*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},JEe={dots:[],areas:[],lines:[]},hH=Mi({name:"referenceElements",initialState:JEe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=lo(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=lo(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=lo(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:IDe,removeDot:$De,addArea:BDe,removeArea:zDe,addLine:UDe,removeLine:FDe}=hH.actions,QEe=hH.reducer,e2e=S.createContext(void 0),t2e=e=>{var{children:t}=e,[n]=S.useState("".concat(gp("recharts"),"-clip")),r=aN();if(r==null)return null;var{x:i,y:a,width:o,height:l}=r;return S.createElement(e2e.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:a,height:l,width:o}))),t)};function mH(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n}function n2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return XEe(r,n)}function r2e(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:l}=e;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function Yv(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function i2e(e,t){return mH(e,t+1)}function a2e(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:l}=t,u=0,d=1,h=o,m=function(){var k=r?.[u];if(k===void 0)return{v:mH(r,d)};var w=u,_,T=()=>(_===void 0&&(_=n(k,w)),_),N=k.coordinate,j=u===0||Yv(e,N,T,h,l);j||(u=0,h=o,d+=1),j&&(h=N+e*(T()/2+i),u+=d)},b;d<=a.length;)if(b=m(),b)return b.v;return[]}function C5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C5(Object(n),!0).forEach(function(r){o2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o2e(e,t,n){return(t=s2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s2e(e){var t=l2e(e,"string");return typeof t=="symbol"?t:t+""}function l2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c2e(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:l}=t,{end:u}=t,d=function(b){var y=a[b],k,w=()=>(k===void 0&&(k=n(y,b)),k);if(b===o-1){var _=e*(y.coordinate+e*w()/2-u);a[b]=y=Hr(Hr({},y),{},{tickCoord:_>0?y.coordinate-_*e:y.coordinate})}else a[b]=y=Hr(Hr({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var T=Yv(e,y.tickCoord,w,l,u);T&&(u=y.tickCoord-e*(w()/2+i),a[b]=Hr(Hr({},y),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return a}function u2e(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,{start:u,end:d}=t;if(a){var h=r[l-1],m=n(h,l-1),b=e*(h.coordinate+e*m/2-d);if(o[l-1]=h=Hr(Hr({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var y=Yv(e,h.tickCoord,()=>m,u,d);y&&(d=h.tickCoord-e*(m/2+i),o[l-1]=Hr(Hr({},h),{},{isShow:!0}))}}for(var k=a?l-1:l,w=function(N){var j=o[N],C,M=()=>(C===void 0&&(C=n(j,N)),C);if(N===0){var P=e*(j.coordinate-e*M()/2-u);o[N]=j=Hr(Hr({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[N]=j=Hr(Hr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var I=Yv(e,j.tickCoord,M,u,d);I&&(u=j.tickCoord+e*(M()/2+i),o[N]=Hr(Hr({},j),{},{isShow:!0}))}},_=0;_<k;_++)w(_);return o}function lN(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(tt(u)||Hf.isSsr){var b;return(b=i2e(i,tt(u)?u:0))!==null&&b!==void 0?b:[]}var y=[],k=l==="top"||l==="bottom"?"width":"height",w=h&&k==="width"?Ym(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},_=(j,C)=>{var M=typeof d=="function"?d(j.value,C):j.value;return k==="width"?n2e(Ym(M,{fontSize:t,letterSpacing:n}),w,m):Ym(M,{fontSize:t,letterSpacing:n})[k]},T=i.length>=2?Ta(i[1].coordinate-i[0].coordinate):1,N=r2e(a,T,k);return u==="equidistantPreserveStart"?a2e(T,N,_,i,o):(u==="preserveStart"||u==="preserveStartEnd"?y=u2e(T,N,_,i,o,u==="preserveStartEnd"):y=c2e(T,N,_,i,o),y.filter(j=>j.isShow))}var d2e=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>o&&(o=m.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+a,d=o+u+l+(n?r:0);return Math.round(d)}return 0},f2e=["axisLine","width","height","className","hide","ticks","axisType"];function h2e(e,t){if(e==null)return{};var n,r,i=m2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Lu(){return Lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lu.apply(null,arguments)}function M5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M5(Object(n),!0).forEach(function(r){p2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p2e(e,t,n){return(t=g2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g2e(e){var t=b2e(e,"string");return typeof t=="symbol"?t:t+""}function b2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ni.axis};function y2e(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:u}=e;if(!l)return null;var d=Xn(Xn(Xn({},u),co(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);d=Xn(Xn({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);d=Xn(Xn({},d),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return S.createElement("line",Lu({},d,{className:fn("recharts-cartesian-axis-line",zx(l,"className"))}))}function v2e(e,t,n,r,i,a,o,l,u){var d,h,m,b,y,k,w=l?-1:1,_=e.tickSize||o,T=tt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=h=e.coordinate,b=n+ +!l*i,m=b-w*_,k=m-w*u,y=T;break;case"left":m=b=e.coordinate,h=t+ +!l*r,d=h-w*_,y=d-w*u,k=T;break;case"right":m=b=e.coordinate,h=t+ +l*r,d=h+w*_,y=d+w*u,k=T;break;default:d=h=e.coordinate,b=n+ +l*i,m=b+w*_,k=m+w*u,y=T;break}return{line:{x1:d,y1:m,x2:h,y2:b},tick:{x:y,y:k}}}function x2e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function w2e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function _2e(e){var{option:t,tickProps:n,value:r}=e,i,a=fn(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))i=S.cloneElement(t,Xn(Xn({},n),{},{className:a}));else if(typeof t=="function")i=t(Xn(Xn({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fn(o,t?.className)),i=S.createElement(rN,Lu({},n,{className:o}),r)}return i}var S2e=S.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:o,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:m,x:b,y,width:k,height:w,tickSize:_,tickMargin:T,fontSize:N,letterSpacing:j,getTicksConfig:C,events:M,axisType:P}=e,I=lN(Xn(Xn({},C),{},{ticks:n}),N,j),z=x2e(h,m),K=w2e(h,m),G=co(C),H=Ix(r),B={};typeof i=="object"&&(B=i);var q=Xn(Xn({},G),{},{fill:"none"},B),X=I.map(Z=>Xn({entry:Z},v2e(Z,b,y,k,w,h,_,m,T))),V=X.map(Z=>{var{entry:Q,line:le}=Z;return S.createElement(Ko,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&S.createElement("line",Lu({},q,le,{className:fn("recharts-cartesian-axis-tick-line",zx(i,"className"))})))}),F=X.map((Z,Q)=>{var{entry:le,tick:se}=Z,W=Xn(Xn(Xn(Xn({textAnchor:z,verticalAnchor:K},G),{},{stroke:"none",fill:a},H),se),{},{index:Q,payload:le,visibleTicksCount:I.length,tickFormatter:o,padding:u},d);return S.createElement(Ko,Lu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},dpe(M,le,Q)),r&&S.createElement(_2e,{option:r,tickProps:W,value:"".concat(typeof o=="function"?o(le.value,Q):le.value).concat(l||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},F.length>0&&S.createElement(al,{zIndex:ni.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},F)),V.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},V))}),k2e=S.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:l,axisType:u}=e,d=h2e(e,f2e),[h,m]=S.useState(""),[b,y]=S.useState(""),k=S.useRef(null);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return d2e({ticks:k.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=S.useCallback(_=>{if(_){var T=_.getElementsByClassName("recharts-cartesian-axis-tick-value");k.current=T;var N=T[0];if(N){var j=window.getComputedStyle(N),C=j.fontSize,M=j.letterSpacing;(C!==h||M!==b)&&(m(C),y(M))}}},[h,b]);return o||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement(al,{zIndex:e.zIndex},S.createElement(Ko,{className:fn("recharts-cartesian-axis",a)},S.createElement(y2e,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:co(e)}),S.createElement(S2e,{ref:w,axisType:u,events:d,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),S.createElement(kke,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},S.createElement(Pke,{label:e.label,labelRef:e.labelRef}),e.children)))}),cN=S.forwardRef((e,t)=>{var n=aa(e,zs);return S.createElement(k2e,Lu({},n,{ref:t}))});cN.displayName="CartesianAxis";var E2e=["x1","y1","x2","y2","key"],j2e=["offset"],T2e=["xAxisId","yAxisId"],A2e=["xAxisId","yAxisId"];function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(r){N2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N2e(e,t,n){return(t=O2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O2e(e){var t=C2e(e,"string");return typeof t=="symbol"?t:t+""}function C2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(null,arguments)}function qv(e,t){if(e==null)return{};var n,r,i=M2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var D2e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:l}=e;return S.createElement("rect",{x:r,y:i,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function pH(e){var{option:t,lineItemProps:n}=e,r;if(S.isValidElement(t))r=S.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:o,x2:l,y2:u,key:d}=n,h=qv(n,E2e),m=(i=co(h))!==null&&i!==void 0?i:{},{offset:b}=m,y=qv(m,j2e);r=S.createElement("line",_u({},y,{x1:a,y1:o,x2:l,y2:u,fill:"none",key:d}))}return r}function P2e(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=qv(e,T2e),u=i.map((d,h)=>{var m=Gr(Gr({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return S.createElement(pH,{key:"line-".concat(h),option:r,lineItemProps:m})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function R2e(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=qv(e,A2e),u=i.map((d,h)=>{var m=Gr(Gr({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return S.createElement(pH,{option:r,lineItemProps:m,key:"line-".concat(h)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function L2e(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length||l==null)return null;var d=l.map(m=>Math.round(m+i-i)).sort((m,b)=>m-b);i!==d[0]&&d.unshift(0);var h=d.map((m,b)=>{var y=!d[b+1],k=y?i+o-m:d[b+1]-m;if(k<=0)return null;var w=b%t.length;return S.createElement("rect",{key:"react-".concat(b),y:m,x:r,height:k,width:a,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function I2e(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:l,verticalPoints:u}=e;if(!t||!n||!n.length)return null;var d=u.map(m=>Math.round(m+i-i)).sort((m,b)=>m-b);i!==d[0]&&d.unshift(0);var h=d.map((m,b)=>{var y=!d[b+1],k=y?i+o-m:d[b+1]-m;if(k<=0)return null;var w=b%n.length;return S.createElement("rect",{key:"react-".concat(b),x:m,y:a,width:k,height:l,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var $2e=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return az(lN(Gr(Gr(Gr({},zs),n),{},{ticks:oz(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},B2e=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return az(lN(Gr(Gr(Gr({},zs),n),{},{ticks:oz(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},z2e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ni.grid};function gH(e){var t=pz(),n=gz(),r=mz(),i=Gr(Gr({},aa(e,z2e)),{},{x:tt(e.x)?e.x:r.left,y:tt(e.y)?e.y:r.top,width:tt(e.width)?e.width:r.width,height:tt(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:l,y:u,width:d,height:h,syncWithTicks:m,horizontalValues:b,verticalValues:y}=i,k=Di(),w=it(K=>GI(K,"xAxis",a,k)),_=it(K=>GI(K,"yAxis",o,k));if(!Vo(d)||!Vo(h)||!tt(l)||!tt(u))return null;var T=i.verticalCoordinatesGenerator||$2e,N=i.horizontalCoordinatesGenerator||B2e,{horizontalPoints:j,verticalPoints:C}=i;if((!j||!j.length)&&typeof N=="function"){var M=b&&b.length,P=N({yAxis:_?Gr(Gr({},_),{},{ticks:M?b:_.ticks}):void 0,width:t??d,height:n??h,offset:r},M?!0:m);wv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(j=P)}if((!C||!C.length)&&typeof T=="function"){var I=y&&y.length,z=T({xAxis:w?Gr(Gr({},w),{},{ticks:I?y:w.ticks}):void 0,width:t??d,height:n??h,offset:r},I?!0:m);wv(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(C=z)}return S.createElement(al,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(D2e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(L2e,_u({},i,{horizontalPoints:j})),S.createElement(I2e,_u({},i,{verticalPoints:C})),S.createElement(P2e,_u({},i,{offset:r,horizontalPoints:j,xAxis:w,yAxis:_})),S.createElement(R2e,_u({},i,{offset:r,verticalPoints:C,xAxis:w,yAxis:_}))))}gH.displayName="CartesianGrid";function U2e(e){var t=Ix(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,o=Number(i),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=r),{r:o,strokeWidth:l}}return{r:n,strokeWidth:r}}var bH=(e,t,n,r)=>bF(e,"xAxis",t,r),yH=(e,t,n,r)=>gF(e,"xAxis",t,r),vH=(e,t,n,r)=>bF(e,"yAxis",n,r),xH=(e,t,n,r)=>gF(e,"yAxis",n,r),F2e=_e([sn,bH,vH,yH,xH],(e,t,n,r,i)=>Js(e,"xAxis")?xv(t,r,!1):xv(n,i,!1)),H2e=(e,t,n,r,i)=>i,wH=_e([BU,H2e],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),G2e=(e,t,n,r,i)=>{var a,o=wH(e,t,n,r,i);if(o!=null){var l=sn(e),u=Js(l,"xAxis"),d;if(u?d=W2(e,"yAxis",n,r):d=W2(e,"xAxis",t,r),d!=null){var{stackId:h}=o,m=LA(o);if(!(h==null||m==null)){var b=(a=d[h])===null||a===void 0?void 0:a.stackedData;return b?.find(y=>y.key===m)}}}},Y2e=_e([sn,bH,vH,yH,xH,G2e,TA,F2e,wH,Awe],(e,t,n,r,i,a,o,l,u,d)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:b}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:y}=u,k;if(y&&y.length>0?k=y:k=h?.slice(m,b+1),k!=null)return uje({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:m,areaSettings:u,stackedData:a,displayedData:k,chartBaseValue:d,bandSize:l})}}),q2e=["id"],K2e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nu.apply(null,arguments)}function _H(e,t){if(e==null)return{};var n,r,i=W2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function P5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(n),!0).forEach(function(r){V2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V2e(e,t,n){return(t=Z2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kv(e,t){return e&&e!=="none"?e:t}var J2e=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:Kv(r,i),value:sz(n,t),payload:e}]},Q2e=S.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:sz(o,t),hide:l,type:d,color:Kv(r,a),unit:u}};return S.createElement(Qke,{tooltipEntrySettings:h})});function eje(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:a,dataKey:o}=r,l=co(r);return S.createElement(xEe,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function tje(e){var{showLabels:t,children:n,points:r}=e,i=r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return tf(tf({},u),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return S.createElement(Yke,{value:t?i:void 0},n)}function R5(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:a}=e,{layout:o,type:l,stroke:u,connectNulls:d,isRange:h}=a,{id:m}=a,b=_H(a,q2e),y=co(b),k=Da(b);return S.createElement(S.Fragment,null,t?.length>1&&S.createElement(Ko,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(by,Nu({},k,{id:m,points:t,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&S.createElement(by,Nu({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),u!=="none"&&h&&S.createElement(by,Nu({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),S.createElement(eje,{points:t,props:b,clipPathId:i}))}function nje(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].y,o=r[r.length-1].y;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.x||0));return tt(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.x||0),u)),tt(u)?S.createElement("rect",{x:0,y:a<o?a:a-l,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(l)}):null}function rje(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].x,o=r[r.length-1].x;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.y||0));return tt(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.y||0),u)),tt(u)?S.createElement("rect",{x:a<o?a:a-l,y:0,width:l,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function ije(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:a}=e;return n==="vertical"?S.createElement(nje,{alpha:t,points:r,baseLine:i,strokeWidth:a}):S.createElement(rje,{alpha:t,points:r,baseLine:i,strokeWidth:a})}function aje(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=e,{points:o,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:m,onAnimationStart:b,onAnimationEnd:y}=r,k=S.useMemo(()=>({points:o,baseLine:l}),[o,l]),w=Nz(k,"recharts-area-"),_=Qge(),[T,N]=S.useState(!1),j=!T,C=S.useCallback(()=>{typeof y=="function"&&y(),N(!1)},[y]),M=S.useCallback(()=>{typeof b=="function"&&b(),N(!0)},[b]);if(_==null)return null;var P=i.current,I=a.current;return S.createElement(tje,{showLabels:j,points:o},r.children,S.createElement(Az,{animationId:w,begin:d,duration:h,isActive:u,easing:m,onAnimationEnd:C,onAnimationStart:M,key:w},z=>{if(P){var K=P.length/o.length,G=z===1?o:o.map((B,q)=>{var X=Math.floor(q*K);if(P[X]){var V=P[X];return tf(tf({},B),{},{x:$o(V.x,B.x,z),y:$o(V.y,B.y,z)})}return B}),H;return tt(l)?H=$o(I,l,z):Rr(l)||uo(l)?H=$o(I,0,z):H=l.map((B,q)=>{var X=Math.floor(q*K);if(Array.isArray(I)&&I[X]){var V=I[X];return tf(tf({},B),{},{x:$o(V.x,B.x,z),y:$o(V.y,B.y,z)})}return B}),z>0&&(i.current=G,a.current=H),S.createElement(R5,{points:G,baseLine:H,needClip:t,clipPathId:n,props:r})}return z>0&&(i.current=o,a.current=l),S.createElement(Ko,null,u&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(ije,{alpha:z,points:o,baseLine:l,layout:_,strokeWidth:r.strokeWidth}))),S.createElement(Ko,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(R5,{points:o,baseLine:l,needClip:t,clipPathId:n,props:r})))}),S.createElement(Wke,{label:r.label}))}function oje(e){var{needClip:t,clipPathId:n,props:r}=e,i=S.useRef(null),a=S.useRef();return S.createElement(aje,{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class sje extends S.PureComponent{render(){var{hide:t,dot:n,points:r,className:i,top:a,left:o,needClip:l,xAxisId:u,yAxisId:d,width:h,height:m,id:b,baseLine:y,zIndex:k}=this.props;if(t)return null;var w=fn("recharts-area",i),_=b,{r:T,strokeWidth:N}=U2e(n),j=oH(n),C=T*2+N,M=l?"url(#clipPath-".concat(j?"":"dots-").concat(_,")"):void 0;return S.createElement(al,{zIndex:k},S.createElement(Ko,{className:w},l&&S.createElement("defs",null,S.createElement(FEe,{clipPathId:_,xAxisId:u,yAxisId:d}),!j&&S.createElement("clipPath",{id:"clipPath-dots-".concat(_)},S.createElement("rect",{x:o-C/2,y:a-C/2,width:h+C,height:m+C}))),S.createElement(oje,{needClip:l,clipPathId:_,props:this.props})),S.createElement(N5,{points:r,mainColor:Kv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}),this.props.isRange&&Array.isArray(y)&&S.createElement(N5,{points:y,mainColor:Kv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}))}}var SH={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ni.area};function lje(e){var t,n=aa(e,SH),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,fill:d,fillOpacity:h,hide:m,isAnimationActive:b,legendType:y,stroke:k,xAxisId:w,yAxisId:_}=n,T=_H(n,K2e),N=e0(),j=$F(),{needClip:C}=dH(w,_),M=Di(),{points:P,isRange:I,baseLine:z}=(t=it(X=>Y2e(X,w,_,M,e.id)))!==null&&t!==void 0?t:{},K=aN();if(N!=="horizontal"&&N!=="vertical"||K==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:G,width:H,x:B,y:q}=K;return!P||!P.length?null:S.createElement(sje,Nu({},T,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:z,connectNulls:l,dot:u,fill:d,fillOpacity:h,height:G,hide:m,layout:N,isAnimationActive:b==="auto"?!Hf.isSsr:b,isRange:I,legendType:y,needClip:C,points:P,stroke:k,width:H,left:B,top:q,xAxisId:w,yAxisId:_}))}var cje=(e,t,n,r,i)=>{var a=n??t;if(tt(a))return a;var o=e==="horizontal"?i:r,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function uje(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:m,yAxisTicks:b,bandSize:y}=e,k=i&&i.length,w=cje(a,o,n,l,u),_=a==="horizontal",T=!1,N=d.map((C,M)=>{var P;k?P=i[h+M]:(P=qr(C,r),Array.isArray(P)?T=!0:P=[w,P]);var I=P[1]==null||k&&!t&&qr(C,r)==null;return _?{x:hL({axis:l,ticks:m,bandSize:y,entry:C,index:M}),y:I?null:u.scale(P[1]),value:P,payload:C}:{x:I?null:l.scale(P[1]),y:hL({axis:u,ticks:b,bandSize:y,entry:C,index:M}),value:P,payload:C}}),j;return k||T?j=N.map(C=>{var M=Array.isArray(C.value)?C.value[0]:null;return _?{x:C.x,y:M!=null&&C.y!=null?u.scale(M):null,payload:C.payload}:{x:M!=null?l.scale(M):null,y:C.y,payload:C.payload}}):j=_?u.scale(w):l.scale(w),{points:N,baseLine:j,isRange:T}}function dje(e){var t=aa(e,SH),n=Di();return S.createElement(iEe,{id:t.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(eEe,{legendPayload:J2e(t)}),S.createElement(Q2e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),S.createElement(dEe,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:pge(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),S.createElement(lje,Nu({},t,{id:r}))))}var kH=S.memo(dje,oN);kH.displayName="Area";var fje=["domain","range"],hje=["domain","range"];function L5(e,t){if(e==null)return{};var n,r,i=mje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mje(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function I5(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function EH(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=L5(e,fje),{domain:a,range:o}=t,l=L5(t,hje);return!I5(n,a)||!I5(r,o)?!1:oN(i,l)}var pje=["dangerouslySetInnerHTML","ticks"],gje=["id"];function nj(){return nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nj.apply(null,arguments)}function $5(e,t){if(e==null)return{};var n,r,i=bje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bje(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yje(e){var t=Sr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(EEe(e)):n.current!==e&&t(jEe({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(TEe(n.current)),n.current=null)},[t]),null}var vje=e=>{var{xAxisId:t,className:n}=e,r=it(cz),i=Di(),a="xAxis",o=it(_=>Vf(_,a,t,i)),l=it(_=>pF(_,a,t,i)),u=it(_=>x_e(_,t)),d=it(_=>j_e(_,t)),h=it(_=>RU(_,t));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:b}=e,y=$5(e,pje),{id:k}=h,w=$5(h,gje);return S.createElement(cN,nj({},y,w,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:fn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},xje={allowDataOverflow:gr.allowDataOverflow,allowDecimals:gr.allowDecimals,allowDuplicatedCategory:gr.allowDuplicatedCategory,angle:gr.angle,axisLine:zs.axisLine,height:gr.height,hide:!1,includeHidden:gr.includeHidden,interval:gr.interval,minTickGap:gr.minTickGap,mirror:gr.mirror,orientation:gr.orientation,padding:gr.padding,reversed:gr.reversed,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,tickLine:zs.tickLine,tickSize:zs.tickSize,type:gr.type,xAxisId:0},wje=e=>{var t=aa(e,xje);return S.createElement(S.Fragment,null,S.createElement(yje,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),S.createElement(vje,t))},jH=S.memo(wje,EH);jH.displayName="XAxis";var _je=["dangerouslySetInnerHTML","ticks"],Sje=["id"];function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(null,arguments)}function B5(e,t){if(e==null)return{};var n,r,i=kje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kje(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Eje(e){var t=Sr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(AEe(e)):n.current!==e&&t(NEe({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(OEe(n.current)),n.current=null)},[t]),null}var jje=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=S.useRef(null),o=S.useRef(null),l=it(cz),u=Di(),d=Sr(),h="yAxis",m=it(M=>Vf(M,h,t,u)),b=it(M=>N_e(M,t)),y=it(M=>A_e(M,t)),k=it(M=>pF(M,h,t,u)),w=it(M=>LU(M,t));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!b||iN(i)||S.isValidElement(i)||w==null)){var M=a.current;if(M){var P=M.getCalculatedWidth();Math.round(b.width)!==Math.round(P)&&d(CEe({id:t,width:P}))}}},[k,b,d,i,t,r,w]),b==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:T}=e,N=B5(e,_je),{id:j}=w,C=B5(w,Sje);return S.createElement(cN,rj({},N,C,{ref:a,labelRef:o,scale:m,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:fn("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:k,axisType:h}))},Tje={allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,angle:br.angle,axisLine:zs.axisLine,hide:!1,includeHidden:br.includeHidden,interval:br.interval,minTickGap:br.minTickGap,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tick:br.tick,tickCount:br.tickCount,tickLine:zs.tickLine,tickSize:zs.tickSize,type:br.type,width:br.width,yAxisId:0},Aje=e=>{var t=aa(e,Tje);return S.createElement(S.Fragment,null,S.createElement(Eje,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),S.createElement(jje,t))},TH=S.memo(Aje,EH);TH.displayName="YAxis";var Nje=(e,t)=>t,uN=_e([Nje,sn,DU,lr,MF,il,H1e,$r],Z1e),dN=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},AH=Pa("mouseClick"),NH=Jp();NH.startListening({actionCreator:AH,effect:(e,t)=>{var n=e.payload,r=uN(t.getState(),dN(n));r?.activeIndex!=null&&t.dispatch(F_e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var ij=Pa("mouseMove"),OH=Jp(),Fb=null;OH.startListening({actionCreator:ij,effect:(e,t)=>{var n=e.payload;Fb!==null&&cancelAnimationFrame(Fb);var r=dN(n);Fb=requestAnimationFrame(()=>{var i=t.getState(),a=KA(i,i.tooltip.settings.shared);if(a==="axis"){var o=uN(i,r);o?.activeIndex!=null?t.dispatch(kF({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(SF())}Fb=null})}});var z5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},CH=Mi({name:"rootProps",initialState:z5,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:z5.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Oje=CH.reducer,{updateOptions:Cje}=CH.actions,MH=Mi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:HDe}=MH.actions,Mje=MH.reducer,DH=Pa("keyDown"),PH=Pa("focus"),fN=Jp();fN.startListening({actionCreator:DH,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=WA(i,Xf(n),l0(n),h0(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=il(n);if(a==="Enter"){var d=Fv(n,"axis","hover",String(i.index));t.dispatch(Z2({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=D_e(n),m=h==="left-to-right"?1:-1,b=a==="ArrowRight"?1:-1,y=l+b*m;if(!(u==null||y>=u.length||y<0)){var k=Fv(n,"axis","hover",String(y));t.dispatch(Z2({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:k}))}}}}}});fN.startListening({actionCreator:PH,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=Fv(n,"axis","hover",String(a));t.dispatch(Z2({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var va=Pa("externalEvent"),RH=Jp(),Gk=new Map;RH.startListening({actionCreator:va,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=Gk.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var l=t.getState(),u={activeCoordinate:A1e(l),activeDataKey:j1e(l),activeIndex:Np(l),activeLabel:RF(l),activeTooltipIndex:Np(l),isTooltipActive:N1e(l)};n(u,r)}finally{Gk.delete(i)}});Gk.set(i,o)}}});var Dje=_e([Zf],e=>e.tooltipItemPayloads),Pje=_e([Dje,d0,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),LH=Pa("touchMove"),IH=Jp();IH.startListening({actionCreator:LH,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=KA(r,r.tooltip.settings.shared);if(i==="axis"){var a=uN(r,dN({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch(kF({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(_ge),h=(o=u.getAttribute(Sge))!==null&&o!==void 0?o:void 0,m=Pje(t.getState(),d,h);t.dispatch(U_e({activeDataKey:h,activeIndex:d,activeCoordinate:m}))}}}});var Rje=B4({brush:qEe,cartesianAxis:MEe,chartData:ASe,errorBars:UEe,graphicalItems:cEe,layout:age,legend:gbe,options:SSe,polarAxis:Zke,polarOptions:Mje,referenceElements:QEe,rootProps:Oje,tooltip:H_e,zIndex:uSe}),Lje=function(t){return O0e({reducer:Rje,preloadedState:t,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([NH.middleware,OH.middleware,fN.middleware,RH.middleware,IH.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(Y8({type:"raf"}))},devTools:Hf.devToolsEnabled})};function Ije(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Di(),a=S.useRef(null);if(i)return n;a.current==null&&(a.current=Lje(t));var o=KT;return S.createElement(W4,{context:o,store:a.current},n)}function $je(e){var{layout:t,margin:n}=e,r=Sr(),i=Di();return S.useEffect(()=>{i||(r(nge(t)),r(tge(n)))},[r,i,t,n]),null}var Bje=S.memo($je,oN);function zje(e){var t=Sr();return S.useEffect(()=>{t(Cje(e))},[t,e]),null}function U5(e){var{zIndex:t,isPanorama:n}=e,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=sH("".concat(r).concat(t)),a=Sr();return S.useLayoutEffect(()=>(a(lSe({zIndex:t,elementId:i,isPanorama:n})),()=>{a(cSe({zIndex:t,isPanorama:n}))}),[a,t,i,n]),S.createElement("g",{tabIndex:-1,id:i})}function F5(e){var{children:t,isPanorama:n}=e,r=it(J1e);if(!r||r.length===0)return t;var i=r.filter(o=>o<0),a=r.filter(o=>o>0);return S.createElement(S.Fragment,null,i.map(o=>S.createElement(U5,{key:o,zIndex:o,isPanorama:n})),t,a.map(o=>S.createElement(U5,{key:o,zIndex:o,isPanorama:n})))}var Uje=["children"];function Fje(e,t){if(e==null)return{};var n,r,i=Hje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hje(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wv.apply(null,arguments)}var Gje={width:"100%",height:"100%",display:"block"},Yje=S.forwardRef((e,t)=>{var n=pz(),r=gz(),i=kz();if(!Vo(n)||!Vo(r))return null;var{children:a,otherAttributes:o,title:l,desc:u}=e,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0),S.createElement(e8,Wv({},o,{title:l,desc:u,role:h,tabIndex:d,width:n,height:r,style:Gje,ref:t}),a)}),qje=e=>{var{children:t}=e,n=it(Qx);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return S.createElement(e8,{width:r,height:i,x:o,y:a},t)},H5=S.forwardRef((e,t)=>{var{children:n}=e,r=Fje(e,Uje),i=Di();return i?S.createElement(qje,null,S.createElement(F5,{isPanorama:!0},n)):S.createElement(Yje,Wv({ref:t},r),S.createElement(F5,{isPanorama:!1},n))});function Kje(){var e=Sr(),[t,n]=S.useState(null),r=it(wge);return S.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Pn(a)&&a!==r&&e(ige(a))}},[t,e,r]),n}function G5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wje(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(n),!0).forEach(function(r){Vje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vje(e,t,n){return(t=Zje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zje(e){var t=Xje(e,"string");return typeof t=="symbol"?t:t+""}function Xje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iu.apply(null,arguments)}var Jje=()=>(ISe(),null);function Vv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Qje=S.forwardRef((e,t)=>{var n,r,i=S.useRef(null),[a,o]=S.useState({containerWidth:Vv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Vv((r=e.style)===null||r===void 0?void 0:r.height)}),l=S.useCallback((d,h)=>{o(m=>{var b=Math.round(d),y=Math.round(h);return m.containerWidth===b&&m.containerHeight===y?m:{containerWidth:b,containerHeight:y}})},[]),u=S.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:m}=d.getBoundingClientRect();l(h,m);var b=k=>{var{width:w,height:_}=k[0].contentRect;l(w,_)},y=new ResizeObserver(b);y.observe(d),i.current=y}},[t,l]);return S.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[l]),S.createElement(S.Fragment,null,S.createElement(tw,{width:a.containerWidth,height:a.containerHeight}),S.createElement("div",Iu({ref:u},e)))}),eTe=S.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=S.useState({containerWidth:Vv(n),containerHeight:Vv(r)}),o=S.useCallback((u,d)=>{a(h=>{var m=Math.round(u),b=Math.round(d);return h.containerWidth===m&&h.containerHeight===b?h:{containerWidth:m,containerHeight:b}})},[]),l=S.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();o(d,h)}},[t,o]);return S.createElement(S.Fragment,null,S.createElement(tw,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Iu({ref:l},e)))}),tTe=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return S.createElement(S.Fragment,null,S.createElement(tw,{width:n,height:r}),S.createElement("div",Iu({ref:t},e)))}),nTe=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return Gs(n)||Gs(r)?S.createElement(eTe,Iu({},e,{ref:t})):S.createElement(tTe,Iu({},e,{ref:t}))});function rTe(e){return e===!0?Qje:nTe}var iTe=S.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:m,onMouseUp:b,onTouchEnd:y,onTouchMove:k,onTouchStart:w,style:_,width:T,responsive:N,dispatchTouchEvents:j=!0}=e,C=S.useRef(null),M=Sr(),[P,I]=S.useState(null),[z,K]=S.useState(null),G=Kje(),H=tA(),B=H?.width>0?H.width:T,q=H?.height>0?H.height:i,X=S.useCallback(te=>{G(te),typeof t=="function"&&t(te),I(te),K(te),te!=null&&(C.current=te)},[G,t,I,K]),V=S.useCallback(te=>{M(AH(te)),M(va({handler:a,reactEvent:te}))},[M,a]),F=S.useCallback(te=>{M(ij(te)),M(va({handler:d,reactEvent:te}))},[M,d]),Z=S.useCallback(te=>{M(SF()),M(va({handler:h,reactEvent:te}))},[M,h]),Q=S.useCallback(te=>{M(ij(te)),M(va({handler:m,reactEvent:te}))},[M,m]),le=S.useCallback(()=>{M(PH())},[M]),se=S.useCallback(te=>{M(DH(te.key))},[M]),W=S.useCallback(te=>{M(va({handler:o,reactEvent:te}))},[M,o]),re=S.useCallback(te=>{M(va({handler:l,reactEvent:te}))},[M,l]),ee=S.useCallback(te=>{M(va({handler:u,reactEvent:te}))},[M,u]),he=S.useCallback(te=>{M(va({handler:b,reactEvent:te}))},[M,b]),J=S.useCallback(te=>{M(va({handler:w,reactEvent:te}))},[M,w]),ae=S.useCallback(te=>{j&&M(LH(te)),M(va({handler:k,reactEvent:te}))},[M,j,k]),me=S.useCallback(te=>{M(va({handler:y,reactEvent:te}))},[M,y]),pe=rTe(N);return S.createElement(HF.Provider,{value:P},S.createElement(Lme.Provider,{value:z},S.createElement(pe,{width:B??_?.width,height:q??_?.height,className:fn("recharts-wrapper",r),style:Wje({position:"relative",cursor:"default",width:B,height:q},_),onClick:V,onContextMenu:W,onDoubleClick:re,onFocus:le,onKeyDown:se,onMouseDown:ee,onMouseEnter:F,onMouseLeave:Z,onMouseMove:Q,onMouseUp:he,onTouchEnd:me,onTouchMove:ae,onTouchStart:J,ref:X},S.createElement(Jje,null),n)))}),aTe=["width","height","responsive","children","className","style","compact","title","desc"];function oTe(e,t){if(e==null)return{};var n,r,i=sTe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sTe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lTe=S.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:l,compact:u,title:d,desc:h}=e,m=oTe(e,aTe),b=co(m);return u?S.createElement(S.Fragment,null,S.createElement(tw,{width:n,height:r}),S.createElement(H5,{otherAttributes:b,title:d,desc:h},a)):S.createElement(iTe,{className:o,style:l,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(H5,{otherAttributes:b,title:d,desc:h,ref:t},S.createElement(t2e,null,a)))});function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(null,arguments)}var cTe={top:5,right:5,bottom:5,left:5},uTe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:cTe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},dTe=S.forwardRef(function(t,n){var r,i=aa(t.categoricalChartProps,uTe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=t,h={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return S.createElement(Ije,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},S.createElement(YEe,{chartData:d.data}),S.createElement(Bje,{layout:i.layout,margin:i.margin}),S.createElement(zje,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(lTe,aj({},i,{ref:n})))}),fTe=["axis"],hTe=S.forwardRef((e,t)=>S.createElement(dTe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fTe,tooltipPayloadSearcher:wSe,categoricalChartProps:e,ref:t}));function $H(e){return typeof e=="object"&&e!==null}function yu(e,t=0){return typeof e=="number"&&Number.isFinite(e)?e:t}function mTe(e,t=""){return typeof e=="string"?e:t}function pTe(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){if(!$H(n))continue;const r=mTe(n.day),i=yu(n.dau),a=yu(n.total_active_ms);r&&t.push({day:r,dau:i,total_active_ms:a})}return t}function gTe(e){return $H(e)?{online_now:yu(e.online_now),active_today:yu(e.active_today),active_7d:yu(e.active_7d),active_30d:yu(e.active_30d),active_365d:yu(e.active_365d),series:pTe(e.series)}:null}function bTe(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function Y5(){const[e,t]=S.useState(30),[n,r]=S.useState(null),[i,a]=S.useState(0),[o,l]=S.useState(!1),[u,d]=S.useState(""),h=S.useRef(!1),m=S.useRef(!1),b=S.useCallback(async()=>{if(!h.current){h.current=!0,l(!0),d("");try{const{data:_,error:T}=await Le.rpc("admin_dashboard_stats",{p_days:e});if(T){d(T.message||"RPC error"),r(null);return}const N=gTe(_);if(!N){d("   ( )"),r(null);return}r(N),a(N.online_now)}finally{l(!1),h.current=!1}}},[e]),y=S.useCallback(async()=>{if(!m.current){m.current=!0;try{const{data:_,error:T}=await Le.rpc("admin_online_now");if(T)return;const N=typeof _=="number"?_:typeof _=="string"?Number(_):0;Number.isFinite(N)&&a(N)}finally{m.current=!1}}},[]);S.useEffect(()=>{b()},[b]),S.useEffect(()=>{y();const _=window.setInterval(()=>void y(),3e4);return()=>window.clearInterval(_)},[y]),S.useEffect(()=>{const _=window.setInterval(()=>void b(),3e5);return()=>window.clearInterval(_)},[b]);const k=S.useMemo(()=>n?.series??[],[n]),w=S.useMemo(()=>k.reduce((_,T)=>_+(T.total_active_ms||0),0),[k]);return g.jsx(Eme,{allow:["admin","operator","viewer"],children:g.jsxs("div",{className:"p-6 text-white",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:e,onChange:_=>{const T=Number(_.target.value);(T===30||T===60||T===90)&&t(T)},className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",title:"DAU  ",children:[g.jsx("option",{value:30,children:" 30"}),g.jsx("option",{value:60,children:" 60"}),g.jsx("option",{value:90,children:" 90"})]}),g.jsx("button",{type:"button",onClick:()=>void b(),className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer text-sm",children:""})]})]}),u?g.jsx("div",{className:"text-red-400 mb-3",children:u}):null,o?g.jsx("div",{className:"text-neutral-300 mb-3",children:"Loading..."}):null,g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-10",children:[g.jsx(jm,{label:" ",value:i}),g.jsx(jm,{label:" (DAU)",value:n?.active_today??0}),g.jsx(jm,{label:" 7 ",value:n?.active_7d??0}),g.jsx(jm,{label:" 30 ",value:n?.active_30d??0}),g.jsx(jm,{label:" 1 ",value:n?.active_365d??0})]}),g.jsxs("section",{className:"mb-10",children:[g.jsxs("div",{className:"flex items-end justify-between gap-3 mb-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"DAU "}),g.jsx("div",{className:"text-xs text-neutral-400",children:"(     )"})]}),g.jsx(yTe,{data:k})]}),g.jsxs("section",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"   ()"}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"series.total_active_ms  (day    )"}),g.jsx("div",{className:"text-2xl font-bold mt-1",children:bTe(w)})]})]})]})})}function jm({label:e,value:t}){return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-neutral-400 text-sm",children:e}),g.jsx("div",{className:"text-3xl font-bold mt-1",children:t})]})}function yTe({data:e}){return g.jsx("div",{className:"w-full h-64 bg-neutral-900 border border-neutral-700 rounded-lg p-2 text-xs",children:g.jsx(Xge,{width:"100%",height:"100%",children:g.jsxs(hTe,{data:e,children:[g.jsx(gH,{strokeDasharray:"3 3"}),g.jsx(jH,{dataKey:"day"}),g.jsx(TH,{}),g.jsx(YSe,{formatter:(t,n)=>n==="dau"?[t,"DAU"]:[t,n]}),g.jsx(kH,{type:"monotone",dataKey:"dau"})]})})})}function vTe(){const[e,t]=S.useState(""),[n,r]=S.useState("ACTIVE"),[i,a]=S.useState("LAST_SEEN_DESC"),[o,l]=S.useState(1),[u,d]=S.useState({});return{search:e,setSearch:t,tab:n,setTab:r,sort:i,setSort:a,page:o,setPage:l,draftByUser:u,setDraftByUser:d,setDraft:(m,b)=>{d(y=>{const k=y[m]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1};return{...y,[m]:{...k,...b}}})}}}const oj=20;function xTe(e){return typeof e=="object"&&e!==null}function Do(e){return typeof e=="string"?e:null}function q5(e){return typeof e=="boolean"?e:null}function Yk(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const t=Number(e);return Number.isFinite(t)?t:null}return null}function BH(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function wTe(e){return BH(e)?e:null}function _Te(e){if(!xTe(e))return null;const t=Do(e.user_id);return t?{user_id:t,name:Do(e.name),nickname:Do(e.nickname),email:Do(e.email),disabled_at:Do(e.disabled_at),created_at:Do(e.created_at),plan:wTe(e.plan),starts_at:Do(e.starts_at),expires_at:Do(e.expires_at),can_use_myo_viewer:q5(e.can_use_myo_viewer),myeongsik_count:Yk(e.myeongsik_count),last_seen_at:Do(e.last_seen_at),last_path:Do(e.last_path),total_active_ms:Yk(e.total_active_ms),online:q5(e.online),total_count:Yk(e.total_count)}:null}function K5(e){const t=(e??"").trim();return t.length?t:null}function zH(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return!1;const n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||r<1||r>12)return!1;const a=new Date(Date.UTC(n,r-1,i));return a.getUTCFullYear()===n&&a.getUTCMonth()===r-1&&a.getUTCDate()===i}function STe(e,t){if(!zH(e))throw new Error(`   : ${e}`);const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)throw new Error(`   : ${e}`);const r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=new Date(Date.UTC(r,i-1,a));o.setUTCDate(o.getUTCDate()+t);const l=String(o.getUTCFullYear()).padStart(4,"0"),u=String(o.getUTCMonth()+1).padStart(2,"0"),d=String(o.getUTCDate()).padStart(2,"0");return`${l}-${u}-${d}`}function W5(e){if(!zH(e))throw new Error(`   : ${e}`);return`${e}T00:00:00.000Z`}function kTe(e){return typeof e=="object"&&e!==null}function ETe(e,t){if(console.error(e,t),kTe(t)&&console.error(`${e} fields`,{message:t.message,code:t.code,details:t.details,hint:t.hint}),typeof t=="object"&&t!==null)try{console.error(`${e} ownKeys`,Object.getOwnPropertyNames(t))}catch{}try{console.error(`${e} json`,JSON.stringify(t))}catch{}}function jTe(){const[e,t]=S.useState([]),[n,r]=S.useState(0),[i,a]=S.useState(!1),[o,l]=S.useState(null),u=S.useCallback(async h=>{const{search:m,tab:b,sort:y,page:k}=h;a(!0),l(null);try{const w=Math.max(0,(Math.max(1,k)-1)*oj),{data:_,error:T}=await Le.rpc("admin_list_users",{p_search:m&&m.trim()?m.trim():null,p_tab:b,p_sort:y,p_limit:oj,p_offset:w});if(T)throw T;const j=(Array.isArray(_)?_:[]).map(_Te).filter(C=>C!==null);t(j),r(j[0]?.total_count??0)}catch(w){t([]),r(0),l(w instanceof Error?w.message:"  ")}finally{a(!1)}},[]),d=S.useCallback(async(h,m,b,y)=>{if(m){l(null),b(h,{saving:!0});try{if(!BH(m.plan))throw new Error(`  : ${String(m.plan)}`);const k=K5(m.startDate),w=K5(m.endDate),_=k?W5(k):null,T=w?W5(STe(w,1)):null;if(_&&T){const C=Date.parse(_),M=Date.parse(T);if(!Number.isFinite(C)||!Number.isFinite(M))throw new Error("  ");if(M<=C)throw new Error("  .")}const N={p_target_user_id:h,p_plan:m.plan,p_can_use_myo_viewer:m.myoViewer==="ON",p_starts_at:_,p_expires_at:T},{error:j}=await Le.rpc("admin_set_user_entitlements",N);if(j)throw ETe("admin_set_user_entitlements error",j),j;b(h,{saving:!1,lastSavedAt:Date.now()}),await y()}catch(k){throw b(h,{saving:!1}),l(k instanceof Error?k.message:" "),k}}},[]);return{rows:e,totalCount:n,loading:i,error:o,setError:l,fetchList:u,saveEntitlements:d}}const UH=[{value:"FREE",label:"FREE ()"},{value:"BASIC",label:"BASIC (ON)"},{value:"PRO",label:"PRO (OFF)"}];function TTe(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function ATe(e){const t=e??"FREE";return UH.find(n=>n.value===t)?.label??String(t)}function NTe(e){if(!e)return" ";const t=Date.parse(e);if(!Number.isFinite(t))return" ";const n=Date.now()-t,r=Math.floor(n/1e3);if(r<15)return"";if(r<60)return`${r} `;const i=Math.floor(r/60);if(i<60)return`${i} `;const a=Math.floor(i/60);return a<24?`${a} `:`${Math.floor(a/24)} `}function V5(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function Zv(e){if(!e)return"";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toISOString().slice(0,10):""}function OTe(e,t){const n=Zv(e),r=Zv(t);return!n&&!r?" ":n&&!r?`${n} ~`:!n&&r?`~ ${r}`:`${n} ~ ${r}`}function CTe(e,t){const n={...e};for(const r of t){const i=r.plan??"FREE",a=Zv(r.starts_at),o=Zv(r.expires_at),l=r.can_use_myo_viewer===!0?"ON":"OFF",u=n[r.user_id];if(!u){n[r.user_id]={plan:i,startDate:a,endDate:o,myoViewer:l,saving:!1};continue}u.saving||(u.plan!==i||u.startDate!==a||u.endDate!==o||u.myoViewer!==l)&&(n[r.user_id]={...u,plan:i,startDate:a,endDate:o,myoViewer:l})}return n}function MTe(){const e=vTe(),{search:t,setSearch:n,tab:r,setTab:i,sort:a,setSort:o,page:l,setPage:u,draftByUser:d,setDraftByUser:h,setDraft:m}=e,{rows:b,totalCount:y,loading:k,error:w,fetchList:_,saveEntitlements:T}=jTe(),N=S.useMemo(()=>Math.max(1,Math.ceil(y/oj)),[y]);return S.useEffect(()=>{u(1)},[r,a]),S.useEffect(()=>{_({search:t,tab:r,sort:a,page:l})},[_,t,r,a,l]),S.useEffect(()=>{l>N&&u(N)},[l,N,u]),S.useEffect(()=>{h(j=>CTe(j,b))},[b,h]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Users"}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-4",children:[g.jsx("input",{className:"px-3 py-2 bg-neutral-800 border border-neutral-700 rounded w-full max-w-sm",placeholder:"Search (name, email, userId...)",value:t,onChange:j=>{n(j.target.value),u(1)}}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:r,onChange:j=>{const C=j.target.value;i(C==="DISABLED"?"DISABLED":C==="ALL"?"ALL":"ACTIVE")},children:[g.jsx("option",{value:"ACTIVE",children:""}),g.jsx("option",{value:"DISABLED",children:""}),g.jsx("option",{value:"ALL",children:""})]}),g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:a,onChange:j=>{const C=j.target.value;(C==="LAST_SEEN_DESC"||C==="LAST_SEEN_ASC"||C==="CREATED_DESC"||C==="CREATED_ASC"||C==="PLAN_DESC"||C==="ONLINE_ACTIVE_MS_DESC"||C==="TOTAL_ACTIVE_MS_DESC")&&o(C)},children:[g.jsx("option",{value:"LAST_SEEN_DESC",children:" "}),g.jsx("option",{value:"CREATED_DESC",children:" "}),g.jsx("option",{value:"PLAN_DESC",children:""}),g.jsx("option",{value:"ONLINE_ACTIVE_MS_DESC",children:"+"}),g.jsx("option",{value:"TOTAL_ACTIVE_MS_DESC",children:""}),g.jsx("option",{value:"LAST_SEEN_ASC",children:" "}),g.jsx("option",{value:"CREATED_ASC",children:" "})]})]})]}),w&&g.jsx("div",{className:"text-red-400 mb-2",children:w}),k&&g.jsx("div",{children:"Loading..."}),g.jsx("div",{className:"space-y-3",children:b.map(j=>{const C=j.name||j.nickname||"(no profile)",M=j.email||"",P=d[j.user_id]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1,lastSavedAt:void 0},I=Date.now(),z=(j.starts_at?Date.parse(j.starts_at)<=I:!0)&&(j.expires_at?Date.parse(j.expires_at)>I:!0),K=j.plan??"FREE",G=z?K:"FREE",H=j.can_use_myo_viewer===!0?"ON":"OFF",B=j.last_seen_at??null,q=j.online===!0,X=j.total_active_ms??null;return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg hover:bg-neutral-800",children:[g.jsxs("div",{className:"font-semibold text-lg flex flex-col desk:flex-row item-start desk:items-center justify-between gap-3",children:[g.jsxs("div",{className:"min-w-0 flex flex-col desk:flex-row item-start desk:items-center gap-2",children:[g.jsx("span",{className:"text-nowrap mr-1",children:C}),M?g.jsxs("span",{className:"text-sm text-neutral-400",children:["(",M,")"]}):null,g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${q?"bg-emerald-900/40 border-emerald-700 text-emerald-300":"bg-neutral-800 border-neutral-700 text-neutral-300"}`,title:B?new Date(B).toLocaleString():" ",children:[q?"":"","  ",NTe(B)]}),g.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-neutral-800 border-neutral-700 text-neutral-300",title:" ",children:[" ",V5(X)]})]})]}),g.jsx("span",{className:"text-neutral-500 text-sm shrink-0",children:j.user_id})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",j.myeongsik_count??0,"",B?g.jsxs(g.Fragment,{children:["    ",new Date(B).toLocaleString()]}):g.jsx(g.Fragment,{children:"     "}),g.jsxs(g.Fragment,{children:["   ",V5(X)]})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",ATe(G),"  ",OTe(j.starts_at,j.expires_at),"    ",H,!z&&j.plan&&j.plan!=="FREE"?" ()":""]}),g.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("div",{className:"mb-1",children:[g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.startDate,onChange:V=>m(j.user_id,{startDate:V.target.value})}),g.jsx("span",{className:"text-neutral-500 mx-1",children:"~"}),g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.endDate,onChange:V=>m(j.user_id,{endDate:V.target.value})})]}),g.jsx("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.plan,onChange:V=>{const F=V.target.value;TTe(F)&&m(j.user_id,{plan:F})},children:UH.map(V=>g.jsx("option",{value:V.value,children:V.label},V.value))}),g.jsxs("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.myoViewer,onChange:V=>m(j.user_id,{myoViewer:V.target.value==="ON"?"ON":"OFF"}),children:[g.jsx("option",{value:"ON",children:"  ON"}),g.jsx("option",{value:"OFF",children:"  OFF"})]}),g.jsx("button",{type:"button",disabled:P.saving,onClick:()=>void T(j.user_id,P,e.setDraft,()=>_({search:t,tab:r,sort:a,page:l})),className:"px-3 py-1 rounded bg-purple-600 hover:bg-purple-500 disabled:opacity-50 cursor-pointer",children:P.saving?" ...":""}),g.jsx("button",{type:"button",onClick:()=>location.href=`/admin/user/${j.user_id}`,className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""})]}),P.lastSavedAt!=null?g.jsxs("div",{className:"text-xs text-emerald-400",children:["  ",new Date(P.lastSavedAt).toLocaleString()]}):null]})]},j.user_id)})}),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{disabled:l<=1,onClick:()=>u(j=>j-1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""}),g.jsxs("span",{children:[l," / ",N," ( ",y,")"]}),g.jsx("button",{disabled:l>=N,onClick:()=>u(j=>j+1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""})]})]})}function DTe(){const[e,t]=S.useState(null),[n,r]=S.useState([]),[i,a]=S.useState(!1);return{profile:e,setProfile:t,myeongsikList:n,setMyeongsikList:r,saving:i,setSaving:a}}function PTe(e){return{isDisabled:!!e?.disabled_at,hasProfile:!!e}}async function hN({action:e,targetUserId:t,targetRecordId:n,payload:r={}}){const a=(await Le.auth.getSession()).data.session?.user?.id;a&&await Le.from("audit_logs").insert({action:e,target_user_id:t??null,target_record_id:n??null,actor_admin_id:a,payload:r})}const RTe=async e=>{const{data:t}=await Le.from("profiles").select("*").eq("user_id",e).maybeSingle();return t??null},LTe=async e=>{const{data:t}=await Le.from("myeongsik").select("*").eq("user_id",e).order("created_at",{ascending:!1});return t??[]},ITe=async e=>{await Le.from("profiles").insert({user_id:e,name:"",nickname:"",email:"",mgr_memo:""})},$Te=async(e,t)=>{await Le.from("profiles").update({name:t.name,nickname:t.nickname,email:t.email,mgr_memo:t.mgr_memo}).eq("user_id",e)},BTe=async e=>{await Le.from("profiles").update({disabled_at:null}).eq("user_id",e),await Le.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await hN({action:"restore_account",targetUserId:e,payload:{source:"admin_user_detail"}})},zTe=async e=>{await Le.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await hN({action:"restore_myeongsik_all",targetUserId:e,payload:{source:"admin_user_detail"}})},Z5=async(e,t,n)=>{const{error:r}=await Le.rpc("admin_set_myeongsik_deleted",{p_target_user_id:e,p_myeongsik_id:t,p_deleted_at:n});if(r)throw console.error("admin_set_myeongsik_deleted error:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),r;await hN({action:n?"delete_myeongsik":"restore_myeongsik",targetUserId:e,targetRecordId:t,payload:{deleted_at:n,source:"admin_user_detail"}})};function UTe(e,t){if(t&&typeof t=="object"){const n=t;console.error(e,{message:n.message,details:n.details,hint:n.hint,code:n.code});return}console.error(e,t)}function FTe({userId:e,profile:t,setProfile:n,setMyeongsikList:r,setSaving:i}){const a=S.useCallback(async()=>{const _=await RTe(e);n(_)},[e,n]),o=S.useCallback(async()=>{const _=await LTe(e);r(_)},[e,r]);S.useEffect(()=>{a(),o()},[a,o]);const l=S.useCallback(async()=>{if(e){i(!0);try{await ITe(e),await a()}catch(_){throw console.error("handleCreateProfile failed:",_),_}finally{i(!1)}}},[e,i,a]),u=S.useCallback(async()=>{if(e&&t){i(!0);try{await $Te(e,t),await a()}catch(_){throw console.error("handleSaveProfile failed:",_),_}finally{i(!1)}}},[e,t,i,a]),d=S.useCallback(async()=>{if(e&&t){i(!0);try{const _=t.disabled_at==null,{data:T,error:N}=await Le.rpc("admin_set_profile_disabled",{p_target_user_id:e,p_disabled:_});if(N)throw UTe("admin_set_profile_disabled error:",N),N;n({...t,disabled_at:typeof T=="string"?T:null})}finally{i(!1)}}},[e,t,n,i]),h=S.useCallback(async()=>{if(e){i(!0);try{await BTe(e),await a(),await o()}catch(_){throw console.error("handleRestoreAccount failed:",_),_}finally{i(!1)}}},[e,i,a,o]),m=S.useCallback(async()=>{if(e){i(!0);try{await zTe(e),await o()}catch(_){throw console.error("handleRestoreAllMyeongsik failed:",_),_}finally{i(!1)}}},[e,i,o]),b=S.useCallback(async _=>{if(e&&_){i(!0);try{await Z5(e,_,null),await o()}catch(T){throw console.error("handleRestoreMyeongsik failed:",T),T}finally{i(!1)}}},[e,i,o]),y=S.useCallback(_=>{const T=typeof window<"u"?window.location.origin:"",N=_?`${T}/impersonate?userId=${e}&myeongsikId=${_}`:`${T}/impersonate?userId=${e}`;window.open(N,"_blank")},[e]),k=S.useCallback(async(_,T)=>{if(!e||!_)return;const N=T?null:new Date().toISOString();i(!0);try{await Z5(e,_,N),await o()}catch(j){throw console.error("toggleDeleteMyeongsik failed:",j),j}finally{i(!1)}},[e,i,o]),w=S.useCallback(_=>{window.location.href=_},[]);return{handleCreateProfile:l,handleSaveProfile:u,toggleDisable:d,handleRestoreAccount:h,handleRestoreAllMyeongsik:m,handleRestoreMyeongsik:b,handleViewAsUser:y,toggleDeleteMyeongsik:k,goTo:w}}function HTe({params:e}){const t=e.userId,n=DTe(),r=PTe(n.profile),i=FTe({userId:t,profile:n.profile,setProfile:n.setProfile,setMyeongsikList:n.setMyeongsikList,setSaving:n.setSaving});return g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("button",{className:"mb-4 underline cursor-pointer",onClick:()=>i.goTo("/admin/user"),children:"  "}),g.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg mb-6",children:[g.jsx("div",{className:"flex items-center justify-between mb-3",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:""}),g.jsx("button",{className:"px-3 py-1 bg-blue-700 text-xs rounded cursor-pointer",onClick:()=>i.handleViewAsUser(),children:" ( )"})]})}),!r.hasProfile&&g.jsx("button",{onClick:i.handleCreateProfile,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer",disabled:n.saving,children:" "}),r.hasProfile&&n.profile&&g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.name??"",onChange:a=>n.setProfile({...n.profile,name:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.nickname??"",onChange:a=>n.setProfile({...n.profile,nickname:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Email"}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.email??"",onChange:a=>n.setProfile({...n.profile,email:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:" "}),g.jsx("textarea",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",rows:3,value:n.profile.mgr_memo??"",onChange:a=>n.setProfile({...n.profile,mgr_memo:a.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:i.handleSaveProfile,className:"px-3 py-2 bg-green-600 rounded cursor-pointer text-xs",disabled:n.saving,children:""}),r.isDisabled&&g.jsx("button",{onClick:i.handleRestoreAccount,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer text-xs",disabled:n.saving,children:" + "}),g.jsx("button",{onClick:i.toggleDisable,className:`px-3 py-2 rounded cursor-pointer text-xs ${r.isDisabled?"bg-yellow-600":"bg-gray-600"}`,children:r.isDisabled?" ":" "})]})]})]}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:" "}),g.jsx("button",{className:"px-3 py-2 bg-blue-700 rounded text-xs cursor-pointer",onClick:i.handleRestoreAllMyeongsik,disabled:n.saving,children:"  "})]}),n.myeongsikList.map(a=>g.jsx("div",{className:"p-3 bg-neutral-800 border border-neutral-700 rounded mb-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:a.name||"(no name)"}),g.jsxs("div",{className:"text-sm text-neutral-400",children:["Birth: ",a.birth_json?.birthDay??"-"," "," ",a.created_at?new Date(a.created_at).toLocaleString():"-"]})]}),g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{className:"text-nowrap px-2 py-1 border border-emerald-500 text-emerald-100 rounded cursor-pointer text-xs",onClick:()=>i.handleRestoreMyeongsik(a.id),disabled:n.saving,children:"  "})})]})},a.id)),n.myeongsikList.length===0&&g.jsx("div",{className:"text-neutral-400",children:" ."})]})]})}function GTe({open:e,onClose:t,children:n}){return e?g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center",children:g.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-6 max-w-2xl w-full relative",children:[g.jsx("button",{className:"absolute top-3 right-3 text-neutral-400 hover:text-white",onClick:t,children:""}),g.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:n})]})}):null}const X5=50;function YTe(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState([]),[o,l]=S.useState(1),[u,d]=S.useState("all"),[h,m]=S.useState("all"),[b,y]=S.useState("30"),[k,w]=S.useState(""),[_,T]=S.useState(!1),N=S.useCallback(async C=>{await Le.from("audit_logs").delete().eq("id",C),a(M=>M.filter(P=>P.id!==C))},[]),j=S.useCallback(async()=>{T(!0);const C=new Date;b!=="all"&&C.setDate(C.getDate()-Number(b));let M=Le.from("audit_logs").select("*").order("created_at",{ascending:!1}).range((o-1)*X5,o*X5-1);b!=="all"&&(M=M.gte("created_at",C.toISOString())),u!=="all"&&(M=M.eq("action",u)),h!=="all"&&(M=M.eq("actor_admin_id",h));const{data:P}=await M;let I=P||[];if(k.trim()!==""){const z=k.toLowerCase();I=I.filter(K=>(JSON.stringify(K).toLowerCase()+(K.payload?JSON.stringify(K.payload).toLowerCase():"")).includes(z))}a(I),T(!1)},[o,u,h,b,k]);return S.useEffect(()=>{j()},[j]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Audit Logs"}),g.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-3",children:[g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:u,onChange:C=>d(C.target.value),children:[g.jsx("option",{value:"all",children:" Action"}),g.jsx("option",{value:"delete_myeongsik",children:" "}),g.jsx("option",{value:"restore_myeongsik",children:" "}),g.jsx("option",{value:"update_profile",children:" "}),g.jsx("option",{value:"impersonate_user",children:""})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:h,onChange:C=>m(C.target.value),children:[g.jsx("option",{value:"all",children:" "}),g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"system",children:"System"})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:b,onChange:C=>y(C.target.value),children:[g.jsx("option",{value:"1",children:"24"}),g.jsx("option",{value:"7",children:"7"}),g.jsx("option",{value:"30",children:"30"}),g.jsx("option",{value:"all",children:""})]}),g.jsx("input",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",placeholder:" (payload )",value:k,onChange:C=>w(C.target.value)})]}),_?g.jsx("div",{children:"Loading..."}):i.map(C=>g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded mb-4 cursor-pointer hover:bg-neutral-800",onClick:()=>{t(C),r(!0)},children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsx("div",{className:"font-semibold text-lg",children:C.action}),g.jsx("button",{className:"px-2 py-1 text-xs bg-red-700 hover:bg-red-600 rounded cursor-pointer",onClick:M=>{M.stopPropagation(),N(C.id)},children:""})]}),g.jsxs("div",{className:"text-sm mt-1 text-neutral-400",children:[g.jsxs("div",{children:["Actor: ",C.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",C.target_user_id||"-"]}),g.jsxs("div",{children:["Target Record: ",C.target_record_id||"-"]}),g.jsxs("div",{children:["Time: ",new Date(C.created_at).toLocaleString()]})]}),C.payload&&g.jsx("pre",{className:"mt-3 text-xs bg-neutral-800 p-2 rounded",children:JSON.stringify(C.payload,null,2)})]},C.id)),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded disabled:opacity-40 cursor-pointer",disabled:o===1,onClick:()=>l(C=>C-1),children:" "}),g.jsxs("span",{className:"text-neutral-400",children:["Page ",o]}),g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded cursor-pointer",onClick:()=>l(C=>C+1),children:" "})]}),g.jsx(GTe,{open:n,onClose:()=>r(!1),children:e&&g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold mb-3",children:e.action}),g.jsxs("div",{className:"text-sm text-neutral-400 space-y-1 mb-4",children:[g.jsxs("div",{children:["Actor: ",e.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",e.target_user_id??"-"]}),g.jsxs("div",{children:["Target Record: ",e.target_record_id??"-"]}),g.jsxs("div",{children:["Time: ",new Date(e.created_at).toLocaleString()]})]}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payload"}),g.jsx("pre",{className:"text-xs bg-neutral-800 p-3 rounded whitespace-pre-wrap",children:JSON.stringify(e.payload,null,2)})]})})]})}const qTe="15b517b3-3d97-41a6-ae17-563abd163a36".split(",").map(e=>e.trim()).filter(Boolean);function FH(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1);if(S.useEffect(()=>{(async()=>{const{data:l}=await Le.auth.getUser(),u=l.user?.id;r(!!u&&qTe.includes(u)),t(!0)})()},[]),!e)return g.jsx("div",{className:"p-6 text-white",children:"  ...!"});if(!n)return g.jsx("div",{className:"p-6 text-white",children:"  "});const i=window.location.pathname;let a=g.jsx(Y5,{});if(i.startsWith("/admin/user/")){const o=i.replace("/admin/user/","");a=g.jsx(HTe,{params:{userId:o}})}else i.startsWith("/admin/user")?a=g.jsx(MTe,{}):i.startsWith("/admin/logs")?a=g.jsx(YTe,{}):i.startsWith("/admin/dashboard")&&(a=g.jsx(Y5,{}));return g.jsx(Sme,{children:a})}function KTe({pillarsA:e,pillarsB:t}){const n=Coe(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([r,i])=>i.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:r}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((a,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:a},o))})]},r):null)]})}const WTe=["","","","","","","","","",""],VTe=["","","","","","","","","",""],ZTe=["","","","","","","","","","","",""],XTe=["","","","","","","","","","","",""],JTe=new Set([...WTe,...VTe]),QTe=new Set([...ZTe,...XTe]);function eAe(e){return typeof e=="object"&&e!==null}function J5(e){return typeof e=="string"&&e.length>=2&&JTe.has(e[0])&&QTe.has(e[1])}function gn(e,...t){if(J5(e))return e;for(const n of t)if(J5(n))return n;return""}function Hb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function tAe(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function Q5(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,r,i,a,o]=t,l=new Date(+n,+r-1,+i,+a,+o);return Number.isNaN(l.getTime())?null:l}function Xv(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function nAe(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=0,a=0;const o=e;return typeof o.birthTime=="string"&&o.birthTime.length>=4&&(i=Number(o.birthTime.slice(0,2)),a=Number(o.birthTime.slice(2,4))),{y:t,m:n,d:r,hh:i,mm:a}}function xw(e){const{y:t,m:n,d:r,hh:i,mm:a}=nAe(e),o=e.corrected instanceof Date&&!Number.isNaN(e.corrected.getTime())?e.corrected:new Date(t,n-1,r,i,a),l=o.getHours(),u=o.getMinutes();return e.calendarType==="lunar"?ia(t,n,r,l,u):new Date(t,n-1,r,l,u)}function rAe(e){const t=xw(e);return`${Xv(e)}-${t.toISOString()}`}function Hd(e){const t=e;return typeof t.id=="string"&&t.id?t.id:rAe(e)}function iAe(e){return eAe(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function aAe(e){const t=v7;return iAe(t)?e==="classic"?t.Classic:t.Modern:e}function oAe(e){if(!e)return"";const t=e,n=l=>typeof t[l]=="string"?String(t[l]).trim().toLowerCase():null,r=l=>typeof t[l]=="boolean"?t[l]:null,i=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(l=>!!l);for(const l of i){if(["","","male","m","boy","man"].includes(l))return"";if(["","","female","f","girl","woman"].includes(l))return""}const a=r("isMale"),o=r("isFemale");return a===!0?"":o===!0?"":""}const qk="people_picker_order_v1";function sAe(e,t,n){const r=e.slice(),[i]=r.splice(t,1);return r.splice(n,0,i),r}function e$({open:e,list:t,onSelect:n,onClose:r}){const[i,a]=S.useState("");S.useEffect(()=>{e||a("")},[e]);const o=S.useMemo(()=>t.map(Hd),[t]),l=S.useMemo(()=>new Set(o),[o]),[u,d]=S.useState([]);S.useEffect(()=>{const w=localStorage.getItem(qk),_=w?JSON.parse(w):[],T=_.filter(j=>l.has(j)),N=[...T,...o.filter(j=>!T.includes(j))];d(N),JSON.stringify(N)!==JSON.stringify(_)&&localStorage.setItem(qk,JSON.stringify(N))},[o,l]);const h=w=>{d(w),localStorage.setItem(qk,JSON.stringify(w))},m=S.useMemo(()=>{const w=new Map(t.map(j=>[Hd(j),j])),_=[];for(const j of u){const C=w.get(j);C&&_.push(C)}w.forEach((j,C)=>{u.includes(C)||_.push(j)});const T=[],N=[];for(const j of _)(typeof j.relationship=="string"?j.relationship.trim():"")===""?T.push(j):N.push(j);return[...T,...N]},[t,u]),b=S.useMemo(()=>{const w=i.trim().toLowerCase();return w?m.filter(_=>{const T=typeof _.relationship=="string"?_.relationship.trim():"";return`${Xv(_)} ${T}`.toLowerCase().includes(w)}):m},[m,i]),y=i.trim()==="",k=w=>{const{destination:_,source:T}=w;if(!_||!y||_.index===T.index)return;const N=b.map(Hd),j=sAe(N,T.index,_.index),M=m.map(Hd).filter(I=>!N.includes(I)),P=[...j,...M].filter((I,z,K)=>K.indexOf(I)===z);h(P)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:r}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:r,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"mb-3",children:[g.jsx("input",{value:i,onChange:w=>a(w.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-sm"}),g.jsx("div",{className:"text-[11px] text-neutral-500 mt-1",children:"    ."})]}),g.jsx(zp,{onDragEnd:k,children:g.jsx(Bf,{droppableId:"people-picker",children:w=>g.jsxs("ul",{className:"space-y-2",ref:w.innerRef,...w.droppableProps,children:[b.map((_,T)=>{const N=xw(_),j=typeof _.relationship=="string"?_.relationship.trim():"",C=j||" ",M=Xv(_),P=j&&M===" "?j:M;return g.jsx($f,{draggableId:Hd(_),index:T,isDragDisabled:!y,children:I=>g.jsx("li",{ref:I.innerRef,...I.draggableProps,...I.dragHandleProps,className:"flex items-center justify-between gap-2 px-3 py-2 rounded border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:g.jsxs("button",{onClick:()=>n(_),className:"flex-1 text-left cursor-pointer",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-100",children:[g.jsx("span",{children:P}),g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border border-neutral-300 dark:border-neutral-700 ${j?"text-neutral-600 dark:text-neutral-300":"text-neutral-400 dark:text-neutral-500"}`,children:C})]}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Gm(N)})]})})},Hd(_))}),w.placeholder]})})})]})]})}function Kk({label:e,gzHour:t,gzDay:n,gzMonth:r,gzYear:i,dayStem:a,cardSettings:o,sinsalBaseBranch:l,sinsalMode:u,sinsalBloom:d}){const h=w=>{const _=o.showSibiUnseong?Ca(a,w):"",T=o.showSibiSinsal?Ma({baseBranch:l,targetBranch:w,era:aAe(u),gaehwa:!!d}):"";return{unseongText:_||void 0,shinsalText:T||void 0}},m=gn(t).charAt(1),b=gn(n).charAt(1),y=gn(r).charAt(1),k=gn(i).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",gn(t),m],["",gn(n),b],["",gn(r),y],["",gn(i),k]].map(([w,_,T])=>{const{unseongText:N,shinsalText:j}=h(T);return g.jsx(Vd,{label:w,gz:_,dayStem:a,settings:Jt.getState().settings,unseongText:N,shinsalText:j,hideBranchSipSin:!0,size:"sm"},`${e}-${w}`)})})]})}function Gd({label:e,data:t,mode:n,effectiveDate:r,onPick:i}){const a=Jt(P=>P.settings),o=S.useMemo(()=>t?xw(t):null,[t]),l="/",u=gn(o?Ni(o,l):void 0),d=gn(o?dt(o,l):void 0),h=gn(o?Ot(o):void 0),m=gn(o?ut(o):void 0),b=S.useMemo(()=>d.charAt(0)||"",[d]),y=o,k=S.useMemo(()=>{const P=t?.birthPlace;return!P||P.name===""||!P.lon?127.5:P.lon},[t]),w=t?.mingSikType??l,_=S.useMemo(()=>{const P=y?dt(y,w).charAt(1):d.charAt(1)||"",I=y?ut(y,k).charAt(1):m.charAt(1)||"";return(a.sinsalBase??"")===""?P:I},[a.sinsalBase,y,w,k,d,m]),T=S.useMemo(()=>{if(n!==""||!o||!t)return null;try{const P=S7(o,u,t.dir,120),I=E7(P,d,t.dir,t.DayChangeRule),z=Gp(o,h,t.dir,120,t?.birthPlace?.lon??127.5),K=j7(z,m,t.dir,t.DayChangeRule,o),G=r;return{si:gn(Hb(P.events,G)?.gz,u),il:gn(Hb(I.events,G)?.gz,d),wl:gn(Hb(z.events,G)?.gz,h),yn:gn(Hb(K.events,G)?.gz,m)}}catch{return null}},[n,o,u,d,h,m,r,t]),N=S.useMemo(()=>{if(n!=="")return null;const P=r;return{si:gn(Ni(P,l)),il:gn(dt(P,l)),wl:gn(Ot(P)),yn:gn(ut(P))}},[n,r]),j=t?Xv(t):"",C=o?Gm(o):"",M=t?oAe(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:i,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:"  ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:j}),M&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",M]}),C&&g.jsx("span",{className:"block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:C})]}),n===""&&g.jsx(Kk,{label:"",gzHour:u,gzDay:d,gzMonth:h,gzYear:m,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&T&&g.jsx(Kk,{label:"",gzHour:T.si,gzDay:T.il,gzMonth:T.wl,gzYear:T.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&N&&g.jsx(Kk,{label:"",gzHour:N.si,gzDay:N.il,gzMonth:N.wl,gzYear:N.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:i,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function lAe({people:e=[]}){const[t,n]=S.useState(),[r,i]=S.useState(),[a,o]=S.useState(!1),[l,u]=S.useState(!1),d=S.useRef(new Date),[h,m]=S.useState(()=>tAe(d.current)),b=S.useRef(Q5(h)??d.current),y=S.useMemo(()=>{const C=Q5(h);return C&&(b.current=C),b.current},[h]),[k,w]=S.useState(!1),[_,T]=S.useState(!1);function N(C){if(!C)return["","","",""];try{const M=xw(C),P="/",I={hour:gn(Ni(M,P)),day:gn(dt(M,P)),month:gn(Ot(M)),year:gn(ut(M))};return[I.year,I.month,I.day,I.hour]}catch{return["","","",""]}}const j=vn(C=>C.canUseMyoViewerNow());return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[j?g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:a,onChange:C=>o(C.target.checked),className:"accent-indigo-500"})," "]}):null,g.jsx("button",{onClick:()=>u(C=>!C),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(Gd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),g.jsx(Gd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),a&&t&&g.jsx(Gd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),a&&r&&g.jsx(Gd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),l&&t&&g.jsx(Gd,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),l&&r&&g.jsx(Gd,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)})]}),t&&r&&g.jsx("div",{className:"mt-4",children:g.jsx(KTe,{pillarsA:N(t),pillarsB:N(r)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:" /"}),g.jsx("input",{type:"datetime-local",value:h,onChange:C=>m(C.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(e$,{open:k,list:e||[],onSelect:C=>{n(C),w(!1)},onClose:()=>w(!1)}),g.jsx(e$,{open:_,list:e||[],onSelect:C=>{i(C),T(!1)},onClose:()=>T(!1)})]})}function cAe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=async()=>{try{const{data:{user:a}}=await Le.auth.getUser();if(!a){alert("  .");return}const o=a.id,l=new Date().toISOString();await Le.from("profiles").update({disabled_at:l}).eq("id",o),await Le.from("myeongsik").update({deleted_at:l}).eq("user_id",o),await Le.auth.signOut(),alert(" .   ."),window.location.href="/"}catch(a){console.error(a),alert("    .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 pb-[calc(64px+env(safe-area-inset-bottom,0px)+var(--bottom-dock,0px))] px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>r(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"     ,    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-1",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsxs("p",{className:"mb-2",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"    /  ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"         "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-1",children:"       ."}),g.jsx("p",{className:"mb-2",children:"   3  ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase /DB    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>r(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["        .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:i,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}const Gb=e=>String(e).padStart(2,"0"),Wk=e=>`${e.getFullYear()}-${Gb(e.getMonth()+1)}-${Gb(e.getDate())}T${Gb(e.getHours())}:${Gb(e.getMinutes())}`,t$=e=>{if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(e))return null;const[t,n]=e.split("T");if(!t||!n)return null;const[r,i,a]=t.split("-"),[o,l]=n.split(":"),u=Number(r),d=Number(i),h=Number(a),m=Number(o),b=Number(l);if(!Number.isFinite(u)||!Number.isFinite(d)||!Number.isFinite(h)||!Number.isFinite(m)||!Number.isFinite(b)||d<1||d>12||m<0||m>23||b<0||b>59)return null;const y=new Date(u,d,0).getDate();if(h<1||h>y)return null;const k=new Date(u,d-1,h,m,b,0,0);return Number.isNaN(k.getTime())?null:k};function uAe({ms:e}){const{date:t,setDate:n}=Kr(),r=Qo(),i=S.useMemo(()=>{const m=typeof e.id=="string"?e.id:"";if(m)return m;const b=typeof e.birthDay=="string"||typeof e.birthDay=="number"?String(e.birthDay):"",y=typeof e.birthTime=="string"?e.birthTime:"";return[typeof e.ganji=="string"?e.ganji:"",b,y].filter(Boolean).join("|")},[e]);S.useEffect(()=>{n(new Date)},[i]);const a=Nx(e,void 0,void 0,{dstOffsetMinutes:r}),o=S.useMemo(()=>t instanceof Date&&!Number.isNaN(t.getTime())?t:new Date,[t]),[l,u]=S.useState(()=>Wk(o));S.useEffect(()=>{u(Wk(o))},[o]);const d=S.useMemo(()=>{const m=typeof e.ganji=="string"?e.ganji:"",b=a?.dae?.gz?`${a.dae.gz}`:null,y=a?.se?.gz?`${a.se.gz}`:null,k=a?.wol?.gz?`${a.wol.gz}`:null,w=a?.il?.gz?`${a.il.gz}`:null,_=a?.si?.gz?`${a.si.gz}`:null,T=[b,y,k,w,_].filter(Boolean).join(" ");return[m,T].filter(Boolean).join(" + ")},[e.ganji,a]),h=m=>{n(m)};return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto mb-4 px-2 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[d&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:d}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:"/"}),g.jsx("input",{type:"datetime-local",value:l,min:"1900-01-01T00:00",max:"2100-12-31T23:59",onChange:m=>{const b=m.target.value;u(b);const y=t$(b);y&&h(y)},onBlur:()=>{t$(l)||u(Wk(o))},className:"h-9 desk:h-30 px-3 desk:px-2 py-1.5 desk:py-1 text-sm desk:text-xs font-medium border rounded-md desk:rounded bg-white dark:bg-neutral-700"})]})})]})}function dAe({useWoldu:e,useSiju:t,hourRule:n,gender:r,onToggleWoldu:i,onToggleSiju:a,onChangeHourRule:o,onChangeGender:l}){return g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:e,onChange:u=>i(u.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:t,onChange:u=>a(u.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:r==="male",onChange:()=>l("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:r==="female",onChange:()=>l("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]})}function fAe({pillars:e,active:t,canEnterOthers:n,onActivate:r}){return g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([i,a])=>{const o=!n&&!(i==="yearStem"||i==="yearBranch"||i==="dayStem"||i==="dayBranch"),l=t===i;return g.jsxs("button",{onClick:()=>!o&&r(i),disabled:o,className:["border rounded p-2 text-center cursor-pointer",l?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",o?"opacity-50 cursor-not-allowed":""].join(" "),children:[a,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:e[i]??"-"})]},i)})})}function hAe({results:e,selectedRow:t,onSelectRow:n,gender:r}){return e?e.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:e.map((i,a)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${a}`,checked:t===a,onChange:()=>n(a)}),g.jsx("label",{htmlFor:`selectRow-${a}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:i.date}),g.jsx("td",{className:"p-1 text-center",children:i.year}),g.jsx("td",{className:"p-1 text-center",children:i.month}),g.jsx("td",{className:"p-1 text-center",children:i.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:i.hourSlots.map((o,l)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:o.branch})},l))})}),g.jsx("td",{className:"p-1 text-center",children:r==="male"?"":""})]},`${i.date}-${a}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"    ."})}function mAe({toast:e,showToast4:t,searchToast:n,error:r}){return g.jsxs(g.Fragment,{children:[e&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:e})}),t&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),n&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:["  .",g.jsx("br",{}),"   ."]})}),r&&g.jsx("div",{className:"mt-3 text-xs text-red-600 text-center",children:r})]})}function pAe({choices:e,onChoose:t}){return!e||e.length===0?null:g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  ."}),g.jsx("div",{className:"flex gap-2",children:e.map(n=>g.jsx("button",{onClick:()=>t(n),className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:n},n))})]})}const mN=["","","","","","","","","",""],p0=["","","","","","","","","","","",""],gAe={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},HH=["","","","","","","","","","","",""],bAe=p0,yAe=HH,vAe=["23:00~0:59","01:00~2:59","03:00~4:59","05:00~6:59","07:00~8:59","09:00~10:59","11:00~12:59","13:00~14:59","15:00~16:59","17:00~18:59","19:00~20:59","21:00~22:59"],xAe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},wAe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Cp(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const r=gAe[n],i=HH.indexOf(t),a=(r+(i>=0?i:0))%10;return mN[a]}function ww(e,t){const n=t===""?bAe:yAe,r=e===""||e===""?0:e===""||e===""?2:e===""||e===""?4:e===""||e===""?6:8,i=p0.reduce((a,o)=>(a[o]="",a),{});for(let a=0;a<12;a++){const o=mN[(r+a)%10],l=n[a];i[l]=`${o}${l}`}return i}const _Ae={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};function SAe(e){return e==="yearStem"?"yearBranch":e==="yearBranch"?"yearStem":e==="monthStem"?"monthBranch":e==="monthBranch"?"monthStem":e==="dayStem"?"dayBranch":e==="dayBranch"?"dayStem":e==="hourStem"?"hourBranch":"hourStem"}function kAe({active:e,pillars:t,activeIsStem:n,activeIsBranch:r,onSelect:i,settingsObj:a}){return e?g.jsxs("div",{className:"w-full",children:[n&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:mN.map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${ii(o,"stem",a)}`,children:o},o))})]}),r&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:p0.filter(o=>{const l=SAe(e),u=t[l];return u?wAe[o]===xAe[u]:!0}).map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${ii(o,"branch",a)}`,children:o},o))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"   ."})}function EAe(){const[e,t]=S.useState({}),[n,r]=S.useState(null),[i,a]=S.useState(null),[o,l]=S.useState(!0),[u,d]=S.useState(!0),[h,m]=S.useState(""),[b,y]=S.useState("male"),[k,w]=S.useState(null),[_,T]=S.useState(!1),[N,j]=S.useState(null),[C,M]=S.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[P,I]=S.useState(!1),[z,K]=S.useState(null),[G,H]=S.useState(null),[B,q]=S.useState(!1),[X,V]=S.useState(!1),F=Z=>{H(Z),setTimeout(()=>H(null),1800)};return S.useEffect(()=>{if(!B)return;const Z=setTimeout(()=>q(!1),2e3);return()=>clearTimeout(Z)},[B]),S.useEffect(()=>{if(!X)return;const Z=setTimeout(()=>V(!1),2e3);return()=>clearTimeout(Z)},[X]),{pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:m,gender:b,setGender:y,results:k,setResults:w,searching:_,setSearching:T,selectedRow:N,setSelectedRow:j,form:C,setForm:M,unknownPlace:P,setUnknownPlace:I,error:z,setError:K,toast:G,showToast4:B,setShowToast:q,searchToast:X,setSearchToast:V,showToast:F}}function GH(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}function n$(e,t){return p0.filter(n=>Cp(e,n)===t)}function r$(e,t,n){if(!n||!e.yearStem)return{next:e,monthBranchChoices:null};const r={...e};if(!r.yearStem)return{next:r,monthBranchChoices:null};if(t==="monthStem"&&r.monthStem){const i=n$(r.yearStem,r.monthStem);return i.length>=2?{next:r,monthBranchChoices:i.slice(0,2)}:(i.length===1&&(r.monthBranch=i[0]),{next:r,monthBranchChoices:null})}if(t==="monthBranch"&&r.monthBranch)return r.monthStem=Cp(r.yearStem,r.monthBranch),{next:r,monthBranchChoices:null};if(t==="yearStem")if(r.monthStem&&!r.monthBranch){const i=n$(r.yearStem,r.monthStem);if(i.length>=2)return{next:r,monthBranchChoices:i.slice(0,2)};i.length===1&&(r.monthBranch=i[0])}else r.monthBranch&&!r.monthStem&&(r.monthStem=Cp(r.yearStem,r.monthBranch));return{next:r,monthBranchChoices:null}}function jAe(e,t,n,r){if(!n||!e.dayStem)return e;const i={...e};if(!i.dayStem)return i;const a=ww(i.dayStem,r),o=u=>Object.entries(a).find(([,d])=>d.startsWith(u)),l=u=>a[u];if(t==="hourStem"&&i.hourStem){const u=o(i.hourStem);return u&&(i.hourBranch=u[0]),i}if(t==="hourBranch"&&i.hourBranch){const u=l(i.hourBranch);return u&&(i.hourStem=u.slice(0,1)),i}if(t==="dayStem"){if(i.hourStem&&!i.hourBranch){const u=o(i.hourStem);u&&(i.hourBranch=u[0])}else if(i.hourBranch&&!i.hourStem){const u=l(i.hourBranch);u&&(i.hourStem=u.slice(0,1))}}return i}function TAe(e,t){return!t||!e.yearStem?!1:e.monthBranch&&e.monthStem?Cp(e.yearStem,e.monthBranch)!==e.monthStem:!1}function AAe(e,t,n){if(!t||!e.dayStem)return!1;if(e.hourBranch&&e.hourStem){const i=ww(e.dayStem,n)[e.hourBranch];return i?i.slice(0,1)!==e.hourStem:!1}return!1}function Vk(e,t,n){const i=ww(e,t)[n];return i?i.slice(0,1):null}function NAe({pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:m,setResults:b,setError:y,showToast:k}){const w=o||u,_=!!(e.yearStem&&e.yearBranch),T=!!(e.dayStem&&e.dayBranch),N=!w||_||T,j=!!n&&n.endsWith("Stem"),C=!!n&&n.endsWith("Branch"),M=S.useMemo(()=>GH(e),[e]);return S.useEffect(()=>{if(!(!u||!e.dayStem||!e.hourBranch)&&(e.hourBranch===""||e.hourBranch==="")){const B=Vk(e.dayStem,h,e.hourBranch);B&&t(q=>({...q,hourStem:B}))}},[h,u,e.dayStem,e.hourBranch,t]),{needStartFromYearOrDay:w,canEnterOthers:N,activeIsStem:j,activeIsBranch:C,filledAll:M,monthBranchChoices:i,handleSelect:B=>{if(!n)return;if(!N&&!(n==="yearStem"||n==="yearBranch"||n==="dayStem"||n==="dayBranch")){y("/      ."),setTimeout(()=>y(null),1500);return}let X={...e,[n]:B};if(n==="yearStem"||n==="monthStem"||n==="monthBranch"){const Z=r$(X,n,o);X=Z.next,a(Z.monthBranchChoices)}(n==="dayStem"||n==="hourStem"||n==="hourBranch")&&(X=jAe(X,n,u,h));let V=!1;TAe(X,o)&&(l(!1),V=!0),AAe(X,u,h)&&(d(!1),V=!0),V&&k("/  .  ."),t(X),b(null),r(n==="yearStem"?"yearBranch":n==="yearBranch"?"yearStem":n==="monthStem"?"monthBranch":n==="monthBranch"?"monthStem":n==="dayStem"?"dayBranch":n==="dayBranch"?"dayStem":n==="hourStem"?"hourBranch":"hourStem"),setTimeout(()=>{const Z={...X};if(Z.yearStem&&Z.yearBranch&&!Z.monthStem){r("monthStem");return}if(Z.monthStem&&Z.monthBranch&&!Z.dayStem){r("dayStem");return}if(Z.dayStem&&Z.dayBranch&&!Z.hourStem){r("hourStem");return}},0)},handleMonthBranchChoice:B=>{let q={...e,monthBranch:B};a(null),q=r$(q,"monthBranch",o).next,t(q),r("dayStem")},clearAll:()=>{t({}),b(null),y(null),r(null),a(null)},onToggleWoldu:B=>{b(null),B&&t(q=>{const X={...q};return X.yearStem&&X.monthBranch&&(X.monthStem=Cp(X.yearStem,X.monthBranch)),X}),l(B)},onToggleSiju:B=>{b(null),B&&t(q=>{const X={...q};if(X.dayStem&&X.hourBranch){const V=Vk(X.dayStem,h,X.hourBranch);V&&(X.hourStem=V)}return X}),d(B)},onChangeHourRule:B=>{if(b(null),m(B),u&&e.dayStem&&e.hourBranch&&(e.hourBranch===""||e.hourBranch==="")){const q=Vk(e.dayStem,B,e.hourBranch);q&&t(X=>({...X,hourStem:q}))}}}}function OAe(e){const{selectedRow:t,results:n,gender:r,hourRule:i,form:a,unknownPlace:o}=e,l=t!==null?n?.filter((G,H)=>H===t)??[]:[];if(l.length===0)return{error:"  ."};const u=l[0],d=i===""?"/":"",[h,m,b]=u.date.split("-").map(Number);let y=0,k=0;if(u.hourSlots.length>0){const G=u.hourSlots[0].branch,H=_Ae[G];H&&(y=H.hh,k=H.mi)}const w=new Date(h,m-1,b,y,k),_=w,T="",N=r==="male"?"":"",j=CAe(u.year.charAt(0),N),C=ut(_,127.5),M=Ot(_,127.5),P=dt(_,d),I=Ni(_,d),z=[`: ${C} ${M} ${P}`,I?`${I}`:null].filter(Boolean).join(" ");return{payload:{id:p7(),name:"",birthDay:`${h}${String(m).padStart(2,"0")}${String(b).padStart(2,"0")}`,birthTime:`${String(y).padStart(2,"0")}${String(k).padStart(2,"0")}`,gender:N,birthPlace:o?{name:"",lat:0,lon:127.5}:a.birthPlace??{name:"",lat:0,lon:127.5},relationship:a.relationship??"",memo:a.memo??"",folder:Eu(a.folder),mingSikType:a.mingSikType??"/",DayChangeRule:a.mingSikType===""?"":"",calendarType:a.calendarType??"solar",ganjiText:`: ${u.year} ${u.month} ${u.day} ${u.hour}`,ganji:z,dayStem:u.day.charAt(0),dateObj:w,corrected:_,correctedLocal:T,dir:j,favorite:!1}}}function CAe(e,t){const r=["","","","","","","","","",""].includes(e),i=t==="";return r?i?"forward":"backward":i?"backward":"forward"}function MAe(e){jn.getState().add(e)}function DAe(e,t,n,r=300){if(!e.yearStem||!e.yearBranch)return[];if(!e.monthStem||!e.monthBranch)return[];if(!e.dayStem||!e.dayBranch)return[];if(!e.hourStem||!e.hourBranch)return[];const i=`${e.yearStem}${e.yearBranch}`,a=`${e.monthStem}${e.monthBranch}`,o=`${e.dayStem}${e.dayBranch}`,l=`${e.hourStem}${e.hourBranch}`,u=[],d=new Date(1900,0,1,12,0,0),h=new Date(2100,11,31,12,0,0);for(let m=d.getTime();m<=h.getTime();m+=24*3600*1e3){const b=new Date(m),y=ut(b);if(y!==i)continue;const k=Ot(b);if(k!==a)continue;const w=dt(b,n);if(w!==o)continue;const _=ww(e.dayStem,t),T=[];for(let N=0;N<12;N++){const j=p0[N];_[j]===l&&T.push({branch:j,time:vAe[N]})}if(T.length!==0&&(u.push({date:`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,year:y,month:k,day:w,hour:l,hourSlots:T}),u.length>=r))break}return u}function PAe({pillars:e,hourRule:t,results:n,selectedRow:r,gender:i,form:a,unknownPlace:o,setResults:l,setSearching:u,setError:d,setSearchToast:h,setForm:m,setUnknownPlace:b,showToast:y,onSave:k,onClose:w}){return{doSearch:()=>{if(l(null),d(null),!GH(e)){d(" 4  .");return}u(!0);try{const j=DAe(e,t,t===""?"/":"");j.length===0&&d("  . (: 1900~2100)"),l(j)}catch(N){N instanceof Error?d(N.message):d(String(N))}finally{u(!1)}},handleSave:()=>{const N=OAe({selectedRow:r,results:n,gender:i,hourRule:t,form:a,unknownPlace:o});if("error"in N){h(!0);return}Bu.flushSync(()=>{MAe(N.payload)}),k(N.payload),y(" !"),m({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),b(!1),w()}}}function RAe({open:e,onClose:t,onSave:n}){const{settings:r}=Jt(),i=EAe(),a=NAe({pillars:i.pillars,setPillars:i.setPillars,active:i.active,setActive:i.setActive,monthBranchChoices:i.monthBranchChoices,setMonthBranchChoices:i.setMonthBranchChoices,useWoldu:i.useWoldu,setUseWoldu:i.setUseWoldu,useSiju:i.useSiju,setUseSiju:i.setUseSiju,hourRule:i.hourRule,setHourRule:i.setHourRule,setResults:i.setResults,setError:i.setError,showToast:i.showToast}),o=PAe({pillars:i.pillars,hourRule:i.hourRule,results:i.results,selectedRow:i.selectedRow,gender:i.gender,form:i.form,unknownPlace:i.unknownPlace,setResults:i.setResults,setSearching:i.setSearching,setError:i.setError,setSearchToast:i.setSearchToast,setForm:i.setForm,setUnknownPlace:i.setUnknownPlace,showToast:i.showToast,onSave:n,onClose:t});return e?g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(Py,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsx(dAe,{useWoldu:i.useWoldu,useSiju:i.useSiju,hourRule:i.hourRule,gender:i.gender,onToggleWoldu:a.onToggleWoldu,onToggleSiju:a.onToggleSiju,onChangeHourRule:a.onChangeHourRule,onChangeGender:i.setGender}),a.needStartFromYearOrDay&&!a.canEnterOthers&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""})," ."]}),g.jsx(fAe,{pillars:i.pillars,active:i.active,canEnterOthers:a.canEnterOthers,onActivate:i.setActive}),g.jsx(pAe,{choices:i.monthBranchChoices,onChoose:a.handleMonthBranchChoice}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:g.jsx(kAe,{active:i.active,pillars:i.pillars,activeIsStem:a.activeIsStem,activeIsBranch:a.activeIsBranch,onSelect:a.handleSelect,settingsObj:r})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!a.filledAll){i.setShowToast(!0);return}o.doSearch()},disabled:i.searching,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:i.searching?"..":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:a.clearAll,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:o.handleSave,className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:g.jsx(hAe,{results:i.results,selectedRow:i.selectedRow,onSelectRow:i.setSelectedRow,gender:i.gender})}),g.jsx(mAe,{toast:i.toast,showToast4:i.showToast4,searchToast:i.searchToast,error:i.error})]})}):null}function LAe(){return g.jsx("div",{className:"flex flex-col desk:flex-row desk:items-center desk:justify-between gap-2",children:g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"AI  "})})}function IAe({sections:e,toggleSection:t}){const n=Jt(i=>i.settings.daewoonDisplayBase),r=Jt(i=>i.setKey);return g.jsxs("div",{className:"mt-3 border-t pt-3",children:[g.jsxs("div",{className:"text-[11px] font-semibold mb-3 text-neutral-700 dark:text-neutral-200 space-y-0.5",children:[g.jsxs("p",{children:["   ",g.jsx("span",{className:"text-amber-500",children:"(TIP.  AI  . ex.,  )"})]}),g.jsx("p",{className:"text-amber-500",children:"      . (     .)"}),g.jsx("p",{className:"text-amber-500",children:" AI     .  ,   ."}),g.jsx("p",{className:"text-amber-500",children:"  AI ,    .  ."})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"twelveUnseong",label:""},{key:"twelveShinsal",label:""},{key:"shinsal",label:" "},{key:"nabeum",label:""}].map(i=>{const a=e[i.key];return g.jsxs("button",{type:"button",onClick:()=>t(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-[10px] font-medium rounded-full border transition-all cursor-pointer ${a?"bg-neutral-900 border-neutral-900 text-white dark:bg-neutral-100 dark:border-neutral-100 dark:text-black shadow-sm":"bg-white border-neutral-200 text-neutral-500 hover:bg-neutral-50 hover:text-neutral-700 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200"}`,children:[g.jsx("span",{className:a?"":"hidden",children:""}),i.label," "]},i.key)})}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"text-[11px] font-semibold text-neutral-700 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full overflow-hidden border border-neutral-200 dark:border-neutral-700",children:[g.jsx("button",{type:"button",onClick:()=>r("daewoonDisplayBase",""),className:`px-3 py-1 text-xs cursor-pointer transition-colors ${n===""?"bg-neutral-900 text-white dark:bg-neutral-100 dark:text-black":"bg-white text-neutral-600 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>r("daewoonDisplayBase",""),className:`px-3 py-1 text-xs cursor-pointer transition-colors ${n===""?"bg-neutral-900 text-white dark:bg-neutral-100 dark:text-black":"bg-white text-neutral-600 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""})]})]})]})}function $Ae({mainCategory:e,subCategory:t,mainCategoryMeta:n,currentSubList:r,onMainCategoryChange:i,onSubCategoryChange:a}){return g.jsxs("div",{className:"hidden flex-wrap gap-2 items-center",children:[g.jsx("select",{value:e,onChange:o=>i(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(n).map(o=>g.jsx("option",{value:o,children:n[o].label},o))}),r.length>0&&g.jsx("select",{value:t,onChange:o=>a(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:r.map(o=>g.jsx("option",{value:o.key,children:o.label},o.key))})]})}function BAe({visible:e,relationMode:t,setRelationMode:n,partnerId:r,setPartnerId:i,partnerOptions:a}){return e?g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>n("solo"),className:`px-3 py-1 cursor-pointer ${t==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>n("couple"),className:`px-3 py-1 cursor-pointer ${t==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),t==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:r,onChange:o=>i(o.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:" "}),a.map(o=>g.jsx("option",{value:o.id,children:o.label},o.id))]})]})]}):null}function zAe({isMultiMode:e,setIsMultiMode:t,canUseMultiMode:n}){const r=!n;return g.jsxs("div",{className:"grid grid-cols-2 p-1 gap-1 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[g.jsx("button",{type:"button",onClick:()=>t(!1),className:`flex items-center justify-center py-2 text-xs font-medium rounded-md transition-all cursor-pointer ${e?"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200":"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm"}`,children:"  ( )"}),g.jsxs("button",{type:"button",onClick:()=>t(!0),disabled:r,title:r?" .":"  ( )",className:`flex items-center justify-center py-2 text-xs font-medium rounded-md transition-all ${r?"text-neutral-400 cursor-not-allowed opacity-50":e?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm cursor-pointer":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 cursor-pointer"}`,children:["  ( ) ",r?"":""]})]})}function UAe(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Zk(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,n,r]=e.split("-"),i=Number(t),a=Number(n),o=Number(r);if(!Number.isFinite(i)||!Number.isFinite(a)||!Number.isFinite(o)||a<1||a>12)return null;const l=new Date(i,a,0).getDate();return o<1||o>l?null:{y:i,m:a,d:o}}function i$(e,t,n){return e<t?t:e>n?n:e}function FAe({date:e,onChange:t,min:n="1900-01-01",max:r="2100-12-31",className:i="px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}){const a=S.useMemo(()=>e instanceof Date&&!Number.isNaN(e.getTime())?e:new Date,[e]),o=S.useMemo(()=>UAe(a),[a]),[l,u]=S.useState(o);S.useEffect(()=>{u(o)},[o]);const d=h=>{if(!Zk(h))return;const b=i$(h,n,r),{y,m:k,d:w}=Zk(b),_=a.getHours(),T=a.getMinutes(),N=a.getSeconds(),j=a.getMilliseconds(),C=new Date(y,k-1,w,_,T,N,j);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:l,min:n,max:r,onChange:h=>{const m=h.target.value;u(m),m&&d(m)},onBlur:()=>{if(!l||!Zk(l)){u(o);return}const h=i$(l,n,r);h!==l&&(u(h),d(h))},className:i,"aria-label":" "})}function HAe({tabs:e,activeTab:t,setActiveTab:n,date:r,setDate:i,canUseLuckTabs:a}){return g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsx("div",{className:"flex items-center gap-1 p-1 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg border border-neutral-100 dark:border-neutral-800 overflow-x-auto",children:e.map((o,l)=>{const d=!a&&!(l===0),h=!d&&t===o;return g.jsxs("button",{type:"button",onClick:()=>{d||n(o)},disabled:d,title:d?"  ":o,className:["flex-1 min-w-[50px] px-3 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap",d?"text-neutral-400 cursor-not-allowed opacity-50":"cursor-pointer",h?"bg-neutral-800 text-white dark:bg-neutral-200 dark:text-black shadow-sm":d?"":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-700"].join(" "),children:[o," ",d?"()":""]},o)})}),g.jsxs("div",{className:"flex flex-col desk:flex-row desk:items-center justify-between gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/30 rounded-lg border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 space-y-0.5",children:[g.jsx("p",{children:"      ."}),g.jsx("p",{children:"     ."})]}),g.jsx("div",{className:"shrink-0",children:g.jsx(FAe,{date:r,onChange:i})})]})]})}function GAe({multiTab:e,setMultiTab:t,daeList:n,selectedDaeIdx:r,onToggleDae:i,seStartYear:a,seEndYear:o,onSeStartChange:l,onSeEndChange:u,onSeStartBlur:d,onSeEndBlur:h,seYearsCount:m,wolStartDate:b,wolEndDate:y,onWolStartChange:k,onWolEndChange:w,onWolStartBlur:_,onWolEndBlur:T,wolMonthsCount:N,ilStartDate:j,ilEndDate:C,onIlStartChange:M,onIlEndChange:P,onIlStartBlur:I,onIlEndBlur:z,ilDaysCount:K}){return g.jsxs("div",{className:"space-y-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg mt-2",children:[g.jsx("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["","","",""].map(G=>g.jsx("button",{type:"button",onClick:()=>t(G),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded cursor-pointer transition-all ${e===G?"bg-white dark:bg-neutral-600 text-neutral-900 dark:text-white shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700"}`,children:G},G))}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:n.map((G,H)=>g.jsxs("button",{type:"button",onClick:()=>i(H),className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${r.includes(H)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:G.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[G.age," (",G.startYear,"~",G.endYear,")"]})]},H))})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",value:a,onChange:G=>l(Number(G.target.value)),onBlur:d,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:o,onChange:G=>u(Number(G.target.value)),onBlur:h,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",m,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"month",value:b,onChange:G=>k(G.target.value),onBlur:_,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:y,onChange:G=>w(G.target.value),onBlur:T,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",N,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"date",value:j,onChange:G=>M(G.target.value),onBlur:I,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:C,onChange:G=>P(G.target.value),onBlur:z,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",K,""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",e,"   ."]}),g.jsx("p",{children:"   ."})]})]})}function YAe({value:e,lockSelection:t=!1}){const[n,r]=S.useState(!1);return t?g.jsx("div",{className:"w-full h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 select-none flex items-center justify-center text-center text-neutral-500","aria-readonly":"true",children:"   "}):g.jsxs("div",{children:[g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{readOnly:!0,value:e,placeholder:"   ",className:["w-full text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 resize-none transition-[height] duration-200","desk:h-[270px] desk:overflow-y-auto",n?"h-[270px] overflow-y-auto pointer-events-auto":"h-[150px] overflow-hidden pointer-events-none desk:pointer-events-auto"].join(" ")}),!n&&g.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 rounded-b-md bg-gradient-to-t from-white/95 dark:from-neutral-800/95 to-transparent"})]}),g.jsx("div",{className:"mt-2 mb-3 flex justify-center desk:hidden",children:g.jsx("button",{type:"button",onClick:()=>r(i=>!i),className:"px-3 py-1 rounded-full border text-xs bg-white text-neutral-700 border-neutral-300 dark:bg-neutral-900 dark:text-neutral-200 dark:border-neutral-700",children:n?"":""})})]})}const qAe=["","","","",""],KAe={personality:{label:"    "},lifeFlow:{label:"   "},love:{label:"    "},career:{label:"    "},money:{label:"    "},family:{label:"      "},baby:{label:"    "},health:{label:"    "},move:{label:"     "},social:{label:"  "},compat:{label:"   "},risk:{label:"  "},meta:{label:"    "},etc:{label:"  "}},a$={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:" "},{key:"personality_shadow",label:""},{key:"personality_relationshipStyle",label:" "},{key:"personality_workStyle",label:" "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:"/ "},{key:"love_partner",label:" "},{key:"love_current",label:" /"},{key:"love_breakup",label:" "},{key:"love_marriageChange",label:"/ "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs "},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:" "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:"/ "},{key:"money_asset",label:" "},{key:"money_debt",label:"/ "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"/ "},{key:"family_current",label:" /"},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:"/"},{key:"family_care",label:" "}],baby:[{key:"overview",label:" "},{key:"baby_pregnancy",label:"  "},{key:"baby_birth",label:"  "},{key:"baby_selection",label:"  "}],health:[{key:"overview",label:" "},{key:"health_overall",label:""},{key:"health_physical",label:" "},{key:"health_mental",label:""},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:" "},{key:"move_timing",label:" "},{key:"move_chance",label:" "},{key:"move_targetHouse",label:"  "},{key:"move_environment",label:"  "},{key:"move_finance",label:" "}],social:[{key:"overview",label:"  "},{key:"social_overall",label:" "},{key:"social_friend",label:" "},{key:"social_workspace",label:" "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:" "},{key:"compat_overall",label:"  "},{key:"compat_love",label:"/ "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:"/ "},{key:"compat_family",label:" "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:"/ "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:" "},{key:"meta_usage",label:" "}],etc:[]};function WAe(){const[e,t]=S.useState(null);return S.useEffect(()=>{let n=!0;return Le.auth.getUser().then(({data:r})=>{n&&t(r.user?.id??null)}),()=>{n=!1}},[]),e}const VAe={twelveUnseong:!0,twelveShinsal:!0,shinsal:!0,nabeum:!0},Jv=Jo(e=>({sections:VAe,setSections:t=>e({sections:t}),toggleSection:t=>e(n=>({sections:{...n.sections,[t]:!n.sections[t]}}))})),Xk=1e3*60*60*24;function Jk(e,t){return(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth())}function Yb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function qb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function o$(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function s$(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function ZAe(){const e=new Date().getFullYear(),[t,n]=S.useState(e),[r,i]=S.useState(e),[a,o]=S.useState(()=>s$()),[l,u]=S.useState(()=>s$()),[d,h]=S.useState(()=>o$()),[m,b]=S.useState(()=>o$()),y=V=>{n(V)},k=V=>{i(V)},w=()=>{const V=t;let F=r;F<V&&(F=V),F-V>9&&(F=V+9),i(F)},_=()=>{let V=t;const F=r;F<V&&(V=F),F-V>9&&(V=F-9),n(V)},T=S.useMemo(()=>{if(!Number.isFinite(t)||!Number.isFinite(r))return 0;const V=r-t+1;return V>0?V:0},[t,r]),N=S.useMemo(()=>{const V=[];if(!Number.isFinite(t)||!Number.isFinite(r))return V;for(let F=t;F<=r&&V.length<10;F++)V.push(F);return V},[t,r]),j=V=>{o(V)},C=V=>{u(V)},M=()=>{const[V,F]=a.split("-").map(Number),[Z,Q]=l.split("-").map(Number),le=new Date(V,F-1),se=new Date(Z,Q-1);if(se<le){u(Yb(le));return}if(Jk(le,se)>11){const re=new Date(le);re.setMonth(le.getMonth()+11),u(Yb(re))}},P=()=>{const[V,F]=a.split("-").map(Number),[Z,Q]=l.split("-").map(Number),le=new Date(V,F-1),se=new Date(Z,Q-1);if(se<le){o(Yb(se));return}if(Jk(le,se)>11){const re=new Date(se);re.setMonth(se.getMonth()-11),o(Yb(re))}},I=S.useMemo(()=>{const[V,F]=(a||"").split("-").map(Number),[Z,Q]=(l||"").split("-").map(Number);if(!Number.isFinite(V)||!Number.isFinite(F)||!Number.isFinite(Z)||!Number.isFinite(Q))return 0;const le=new Date(V,F-1,1),se=new Date(Z,Q-1,1),W=Jk(le,se)+1;return W>0?W:0},[a,l]),z=S.useMemo(()=>{const V=[],[F,Z]=a.split("-").map(Number),[Q,le]=l.split("-").map(Number),se=new Date(F,Z-1),W=new Date(Q,le-1);if(Number.isNaN(se.getTime())||Number.isNaN(W.getTime()))return V;for(;se<=W&&V.length<12;)V.push(`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`),se.setMonth(se.getMonth()+1);return V},[a,l]),K=V=>{h(V)},G=V=>{b(V)},H=()=>{if(!d||!m)return;const[V,F,Z]=d.split("-").map(Number),[Q,le,se]=m.split("-").map(Number),W=new Date(V,F-1,Z,4,0,0),re=new Date(Q,le-1,se,4,0,0);if(re<W){b(qb(W));return}if(Math.floor((re.getTime()-W.getTime())/Xk)>7){const he=new Date(W);he.setDate(W.getDate()+6),b(qb(he))}},B=()=>{if(!d||!m)return;const[V,F,Z]=d.split("-").map(Number),[Q,le,se]=m.split("-").map(Number),W=new Date(V,F-1,Z,4,0,0),re=new Date(Q,le-1,se,4,0,0);if(W>re){h(qb(re));return}if(Math.floor((re.getTime()-W.getTime())/Xk)>7){const he=new Date(re);he.setDate(re.getDate()-6),h(qb(he))}},q=S.useMemo(()=>{const[V,F,Z]=(d||"").split("-").map(Number),[Q,le,se]=(m||"").split("-").map(Number);if(!Number.isFinite(V)||!Number.isFinite(F)||!Number.isFinite(Z)||!Number.isFinite(Q)||!Number.isFinite(le)||!Number.isFinite(se))return 0;const W=new Date(V,F-1,Z,4,0,0),re=new Date(Q,le-1,se,4,0,0),ee=Math.floor((re.getTime()-W.getTime())/Xk)+1;return ee>0?ee:0},[d,m]),X=S.useMemo(()=>{const V=[],[F,Z,Q]=d.split("-").map(Number),[le,se,W]=m.split("-").map(Number),re=new Date(F,Z-1,Q,4,0,0),ee=new Date(le,se-1,W,4,0,0);if(Number.isNaN(re.getTime())||Number.isNaN(ee.getTime()))return V;const he=new Date(re);for(;he<=ee&&V.length<31;){const J=he.getFullYear(),ae=String(he.getMonth()+1).padStart(2,"0"),me=String(he.getDate()).padStart(2,"0");V.push(`${J}-${ae}-${me}`),he.setDate(he.getDate()+1)}return V},[d,m]);return{seStartYear:t,seEndYear:r,wolStartYM:a,wolEndYM:l,ilStartDate:d,ilEndDate:m,onSeStartChange:y,onSeEndChange:k,onSeStartBlur:w,onSeEndBlur:_,onWolStartChange:j,onWolEndChange:C,onWolStartBlur:M,onWolEndBlur:P,onIlStartChange:K,onIlEndChange:G,onIlStartBlur:H,onIlEndBlur:B,seYearsCount:T,wolMonthsCount:I,ilDaysCount:q,seYearsList:N,wolMonthsList:z,ilDaysList:X}}function XAe({msId:e,canUseMultiMode:t,canUseLuckTabs:n}){const r=Jv(Q=>Q.sections),i=Jv(Q=>Q.toggleSection),[a,o]=S.useState(!1),[l,u]=S.useState(!1),[d,h]=S.useState(""),[m,b]=S.useState("personality"),[y,k]=S.useState("overview"),[w,_]=S.useState("solo"),[T,N]=S.useState(""),[j,C]=S.useState(!1),[M,P]=S.useState(""),[I,z]=S.useState([]),[K,G]=S.useState(""),[H,B]=S.useState([]),q=ZAe();S.useEffect(()=>{m!=="love"&&m!=="compat"&&(_("solo"),h(""))},[m]),S.useEffect(()=>{!t&&j&&C(!1)},[t,j]),S.useEffect(()=>{!n&&T!==""&&N("")},[n,T]),S.useEffect(()=>{M!==""&&z([])},[M]),S.useEffect(()=>{G(""),B([])},[e]);function X(){const Q=K.trim();Q&&(B(le=>[...le,Q]),G(""))}function V(Q){B(le=>le.filter((se,W)=>W!==Q))}function F(){B([])}function Z(Q){z(le=>le.includes(Q)?le.filter(se=>se!==Q):[...le,Q])}return{sections:r,toggleSection:i,friendMode:a,setFriendMode:o,teacherMode:l,setTeacherMode:u,partnerId:d,setPartnerId:h,mainCategory:m,setMainCategory:b,subCategory:y,setSubCategory:k,relationMode:w,setRelationMode:_,activeTab:T,setActiveTab:N,isMultiMode:j,setIsMultiMode:C,multiTab:M,setMultiTab:P,selectedDaeIdx:I,setSelectedDaeIdx:z,handleToggleDae:Z,rangeControls:q,questionDraft:K,setQuestionDraft:G,extraQuestions:H,setExtraQuestions:B,handleAddQuestion:X,handleRemoveQuestion:V,handleClearQuestions:F}}const YH=Jo(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})})),JAe=!1,l$=e=>e<10?`0${e}`:`${e}`;function QAe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=ia(i,a,o,0,0),u=`${l.getFullYear()}${l$(l.getMonth()+1)}${l$(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}const Lm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Im={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zs={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Kb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},eNe=["","","","",""];function c$(e){return eNe.includes(e)}const qH={:"",:"",:"",:"",:""},KH={:"",:"",:"",:"",:""},WH={:"",:"",:"",:"",:""},VH={:"",:"",:"",:"",:""};function sj(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Lm[t])return Lm[t];if(["","","","","","","","","","","",""].includes(t))return Kb[t]??null;if(Im[t])return Kb[Im[t]]??null;const n=t.charAt(0);return Lm[n]?Lm[n]:["","","","","","","","","",""].includes(n)?n:Im[n]?Kb[Im[n]]??null:["","","","","","","","","","","",""].includes(n)?Kb[n]??null:null}function ZH(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=sj(n);i&&(t[i]=(t[i]??0)+r)}return t}function tNe(e){if(!e)return[];const t=sj(e.charAt(0)),n=sj(e.charAt(1));return[t,n].filter(Boolean)}function Wb(e){const t=tNe(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function pN(e,t){const n=Zs[e],r=Zs[t];if(!n||!r)return"";let i;r===n?i="":r===qH[n]?i="":r===KH[n]?i="":r===WH[n]?i="":r===VH[n]?i="":i="";const a=c$(e)===c$(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function XH(e,t){return t===e?"":t===qH[e]?"":t===KH[e]?"":t===WH[e]?"":t===VH[e]?"":""}function Qv(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}const nNe={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""}},rNe=e=>{if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),r=Lm[t]??t,i=Im[n]??n;return`${r}${i}`},ex=e=>{const t=rNe(e),n=nNe[t];return n?{...n,code:t}:null},iNe=["","","","",""],aNe=["","","","","","","","","",""],oNe={:["",""],:["",""],:["",""],:["",""],:["",""]},sNe=["","","","","","","","","",""];function lNe(e,t,n){const r=Math.max(0,Math.round(n)),i=Math.max(0,Number(e??0)),a=Math.max(0,Number(t??0)),o=i+a;if(r<=0)return[0,0];if(o<=0)return[r,0];const l=i/o*r,u=a/o*r;let d=Math.floor(l),h=Math.floor(u),m=r-(d+h);return m>0&&(l-d>=u-h?d+=1:h+=1,m-=1),m>0&&(d+=m),[d,h]}function JH(e){const{natal:t,dayStem:n,perStemSource:r}=e,i=ZH(r??{}),a={:0,:0,:0,:0,:0};for(const[m,b]of Object.entries(i)){const y=Zs[m];y&&(a[y]+=Math.max(0,Number(b??0)))}const o=Qv(a),l=Y9(o,t[1]??"",t),u=Qv(l),d={};for(const m of iNe){const[b,y]=oNe[m],[k,w]=lNe(i[b]??0,i[y]??0,u[m]??0);d[b]=k,d[y]=w}const h=Object.fromEntries(sNe.map(m=>[m,0]));for(const m of aNe){const b=Math.max(0,Number(d[m]??0)),y=pN(n,m);h[y]+=b}return{elementPercent100:u,perStemBare100:d,totalsSub100:h}}function QH(e,t){const{mode:n,tab:r,isStudyTone:i}=t,a=(...o)=>e.push(...o);if(n==="single"){if(r===""){a("","##      (  )",">       ,      .","- **  **: ', , , , ' ', , '      , '  , , , , '   .      .","- ** **:   ,     '' .","- ** **:     ,          .","- ** **:   ,       (, , )   .","- ** **: '   '  , '      '    .","- ** **:             .");return}r?(a("","##     ( )","- ** **:         .   '     '  .","- ** **:  '/' , '     '    .","- ****:     , '    ' '    '   ."),i?a("","##  ()",`-  : (${r})  ,    ( + / )  .`,"-     /      ()  ."):a("","##  ()",`-    (${r})   ,         .`,"-   ,          .")):a("","##  ()","-   ,      /  .")}else a("","##     ( )","- ** **:               .","- ** **: '  '   , '       '  ."),i?a("","##  ()","-       .    .","-      (/// )  1~2 ."):a("","##  ()","-  (///)  ,           .");i&&e.push("- (teacherMode)     ,   .","-      (/ / )  1~2 .")}function eG(e,t){const n=QAe(e),r=n.birthDay??"",i=r.slice(0,4),a=r.slice(4,6),o=r.slice(6,8);let l="";if(n.corrected instanceof Date&&!Number.isNaN(n.corrected.getTime())){const u=String(n.corrected.getHours()).padStart(2,"0"),d=String(n.corrected.getMinutes()).padStart(2,"0");l=t?"":`${u}:${d}`}return`${i} ${a} ${o}  ${l}`}function cNe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=Zs[n];i&&(t[i]+=r)}return t}function uNe(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e)){if(i<=0)continue;const a=pN(t,r);n[a]+=i}return n}function dNe(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const fNe={natal:50,dae:30,se:20,wol:7,il:3};function hNe(e){const t={};for(const{kind:r,bare:i}of e){const a=fNe[r]??0;if(a<=0)continue;const o=Qv(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function tG(e,t,n){const r=ZH(e.perStemElementScaled),i=t!==""&&n?.dae?Wb(n.dae):{},a=(t===""||t===""||t==="")&&n?.se?Wb(n.se):{},o=(t===""||t==="")&&n?.wol?Wb(n.wol):{},l=t===""&&n?.il?Wb(n.il):{},u=hNe([{kind:"natal",bare:r},{kind:"dae",bare:i},{kind:"se",bare:a},{kind:"wol",bare:o},{kind:"il",bare:l}]),d=Qv(u),h=cNe(d),m=uNe(d,e.dayStem),b=dNe(m);return{perStemAugBare:d,elementPercent:h,totalsSub:m,totalsMain:b}}function nG(e){return!e.birthTime||e.birthTime===""}function rG(e,t){return t[3]?["","","",""]:["","",""]}function mNe(e,t){return e.map((n,r)=>t[r]??"")}const pNe=["","","","","","","","","",""],gNe=["","","","","","","","","",""];function lj(e,t){const n={};for(const i of gNe){const a=pN(t,i);n[a]=i}const r={};for(const i of pNe){const a=n[i],o=a?Zs[a]??"":"",l=a?`${i}(${a}${o})`:i;typeof e[i]=="number"&&(r[l]=e[i])}return r}function Su(e,t){return Object.entries(e).filter(([,r])=>r!=null&&`${r}`.trim()!=="").map(([r,i])=>`${r}: ${i}`).join(", ")}function bNe(e){return e.map(t=>String(t??"").trim()).filter(Boolean).join(`
`)}function wa(e){return e.filter(t=>t&&t.pos&&t.gz&&t.value).map(t=>`${t.pos}: [ - ${t.gz}] / ${t.value}`).join(`
`)}function tx(e){return`: ${e.yang}, : ${e.yin}`}const yNe={si:"",il:"",wol:"",yeon:""};function u$(e){return e.replace(/^#/,"").trim()}function gN(e){const t=[],n=["si","il","wol","yeon"];for(const a of n){const o=e.good?.[a]??[],l=e.bad?.[a]??[];o.length===0&&l.length===0||(t.push(`[${yNe[a]}]`),o.length>0&&t.push(` : ${o.map(u$).join(", ")}`),l.length>0&&t.push(` : ${l.map(u$).join(", ")}`))}const r=e.meta?.voidPair;(r?.day||r?.year)&&(t.push("[]"),r.day?.length&&t.push(` : ${r.day.join("  ")}`),r.year?.length&&t.push(` : ${r.year.join("  ")}`));const i=e.meta?.samjaeYears;return(i?.day||i?.year)&&(t.push("[]"),i.day?.length&&t.push(` : ${i.day.join("")}`),i.year?.length&&t.push(` : ${i.year.join("")}`)),t.join(`
`)}const vNe={cheonganHap:"",cheonganChung:"",jijiSamhap:"",jijiBanhap:"",jijiBanghap:"",jijiYukhap:"",jijiChung:"",jijiHyeong:"",jijiPa:"",jijiHae:"",jijiWonjin:"",jijiGwimun:"",amhap:"",ganjiAmhap:""},xNe=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"],d$=["","","","","","","",""];function wNe(e){return[...e].sort((t,n)=>{const r=d$.indexOf(t),i=d$.indexOf(n);return r===-1&&i===-1?t.localeCompare(n,"ko"):r===-1?1:i===-1?-1:r-i})}function _Ne(e){return e.replace(/^#/,"").replace(/_/g," ").replace(/X/g," X ").replace(/\s+/g," ").trim()}function SNe(e){const t=e.replace(/^#/,"").trim();if(!t)return null;const[n,r=""]=t.split("_");return{tokens:n.split("X").filter(Boolean),label:r,human:_Ne(t)}}function kNe(e){const t=e.map(SNe).filter(a=>!!a),n=[],r=new Set,i=new Map;t.forEach((a,o)=>{if(a.tokens.length!==2||!a.label)return;const l=i.get(a.label)??[];l.push(o),i.set(a.label,l)});for(const[a,o]of i){const l=new Map;for(const h of o){const m=t[h],[b,y]=m.tokens;l.has(b)||l.set(b,[]),l.has(y)||l.set(y,[]),l.get(b).push(h),l.get(y).push(h)}let u="",d=[];for(const[h,m]of l)m.length>d.length&&(u=h,d=m);if(d.length>=2){const h=d.map(b=>{r.add(b);const[y,k]=t[b].tokens;return y===u?k:y}).filter(Boolean),m=`${wNe(h).join("  ")} X ${u} ${a}`.trim();m&&n.push(m)}}return t.forEach((a,o)=>{r.has(o)||n.push(a.human)}),n}function nx(e){const t=[];for(const n of xNe){const r=e[n];if(!Array.isArray(r))continue;const i=r.filter(l=>l&&typeof l=="string"&&!l.includes(""));if(i.length===0)continue;const a=kNe(i),o=vNe[n]??n;t.push(`${o} : ${a.join("  ")}`)}return t.join(`
`)}function ENe(e){const t=[];for(const[n,r]of Object.entries(e))!r||!r.gz||!r.nabeum||t.push({pos:n,gz:r.gz,value:r.nabeum});return wa(t)}const $m=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function rx(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>rx(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if($m(e)){const t={};for(const[n,r]of Object.entries(e)){const i=rx(r);i!==void 0&&(t[n]=i)}return Object.keys(t).length>0?t:void 0}return e}}function iG(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):""}const Ts=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean",jNe=e=>typeof e.yang=="number"&&typeof e.yin=="number",TNe=e=>"good"in e||"bad"in e||"meta"in e,ANe=new Set(["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"]),NNe=e=>Object.keys(e).some(t=>ANe.has(t)),ONe=e=>{const t=Object.keys(e);return!t.includes("")&&!t.includes("")?!1:t.every(n=>n===""||n===""||n==="")},CNe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1},MNe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1};function f$(e){const t=typeof e.pos=="string"?e.pos:"",n=typeof e.gz=="string"?e.gz:"";if(!t||!n)return null;const r=typeof e.unseong=="string"&&e.unseong||typeof e.shinsal=="string"&&e.shinsal||typeof e.nabeum=="string"&&e.nabeum||typeof e.value=="string"&&e.value||"";return r?{pos:t,gz:n,value:r}:null}function xy(e){if(e==null)return"";const t=iG(e);if(t)return t;if(Array.isArray(e)){if(e.length===0)return"";if(e.every(Ts))return bNe(e.map(String));const n=[];for(const r of e){if(!$m(r))continue;const i=f$(r);i&&n.push(i)}return n.length>0?wa(n):e.map(r=>xy(r)).filter(Boolean).join(`

`)}if($m(e)){if(jNe(e))return tx(e);if(TNe(e))return gN(e);if(NNe(e))return nx(e);if(ONe(e)){const u=e.,d=e.;if(Ts(u)&&Ts(d))return`${u} / : ${d}`;if(Ts(u))return String(u);if(Ts(d))return`: ${d}`}if(CNe(e)){const u=e.;if(Ts(u))return String(u)}if(MNe(e)){const u=e.;if(Ts(u))return String(u)}const n=Object.entries(e);if(n.length===0)return"";if(n.every(([,u])=>Ts(u)))return Su(e);if(n.every(([,u])=>Array.isArray(u)))return n.map(([d,h])=>{const m=h.map(b=>xy(b)).filter(Boolean).join(`

`);return m?`[${d}]
${m}`:""}).filter(Boolean).join(`
`);if(n.every(([,u])=>u==null||Ts(u)||$m(u))){const u=n.map(([d,h])=>{if(h==null)return"";const m=xy(h);if(!m)return"";const b=m.includes(`
`)?`
`:" ";return`${d}:${b}${m}`}).filter(Boolean);if(u.length>0)return u.join(`
`)}if(n.every(([,u])=>!u||$m(u)&&typeof u.gz=="string"))return ENe(e);const l=f$(e);return l?wa([l]):JSON.stringify(e,null,2)}return String(e??"")}function DNe(e,t){const n=rx(e);if(n===void 0)return"";if(t==="plain")return xy(n);const r=iG(n);return r!==""?r:["```json",JSON.stringify(n,null,2),"```"].join(`
`)}function aG(e,t,n){const r=DNe(t,n);return r.trim()?`## ${e}
${r}`:""}const Uo=(e,t)=>aG(e,t,"plain"),oG=(e,t)=>aG(e,t,"fenced"),PNe=(e,t)=>{if(!e)return{};const n=t,r=l=>{if(!l)return;const u={};for(const[d,h]of Object.entries(l)){if(!Array.isArray(h))continue;const m=h.filter(b=>typeof b=="string"&&b.includes(n));m.length>0&&(u[d]=m)}return Object.keys(u).length>0?u:void 0},i=r(e.good),a=r(e.bad),o={};return i&&(o.good=i),a&&(o.bad=a),o},RNe=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[r,i]of Object.entries(e)){if(!Array.isArray(i))continue;const a=Array.from(new Set(i.filter(o=>typeof o=="string"&&o.includes(t))));a.length>0&&(n[r]=a)}return n};function cj(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${n}(${XH(t,n)})`,r]))}const h$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},LNe=["year","month","day","hour"],INe=new Set(["","","","",""]),nf=new Set(["","","","",""]),uj={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$Ne={:5,:7,:5,:-5,:-7,:-5},Qk=e=>Math.round(e*10)/10,sG=e=>{const t=Qk(e),n=Qk(100-e),r=Qk(100-Math.abs(t-50)*2),i=t>=55?"":t<=45?"":"";return{yang:t,yin:n,harmony:r,category:i}};function BNe(e){if(!e)return null;let t=0,n=0;Object.entries(e).forEach(([i,a])=>{const o=Number(a)||0;nf.has(i.charAt(0))?t+=o:n+=o});const r=t+n;return r<=0?null:t/r*100}function Vb(e){if(!e||e.length<2)return null;const t=e.charAt(0),n=e.charAt(1),r=uj[n],i=[t,r].filter(Boolean);return i.length?i.filter(o=>nf.has(o)).length/i.length*100:null}function bN(e){const{natal:t,perStemElementScaled:n,mode:r="natal"}=e;if(!n||!t||t.length<3)return null;let i=0,a=0;Object.entries(n).forEach(([M,P])=>{const I=Number(P)||0;nf.has(M.charAt(0))?i+=I:a+=I});const o=i+a>0?(i-a)/(i+a):0;let l=0,u=0,d=0,h=0;t.forEach(M=>{if(!M||M.length<2)return;const P=M[0],I=uj[M[1]];[P,I].forEach(z=>{z&&(INe.has(z)?l+=1:u+=1,nf.has(z)?d+=1:h+=1)})});const m=l+u>0?(l-u)/(l+u):0,b=d+h>0?(d-h)/(d+h):0;let y=0,k=0;t.forEach((M,P)=>{if(!M||M.length<2)return;const I=LNe[P],z=h$[I].stem,K=h$[I].branch;nf.has(M[0])?y+=z:k+=z;const G=uj[M[1]];G&&nf.has(G)?y+=K:k+=K});const w=y+k>0?(y-k)/(y+k):0,_=t[1]?.charAt(1),T=($Ne[_??""]||0)/100,N=r==="luck"?{essence:.15,nature:.15,base:.7,position:0,season:0}:{essence:.3,nature:.3,base:.2,position:.2,season:1},j=m*N.essence+b*N.nature+o*N.base+w*N.position+T*N.season;if(!Number.isFinite(j))return null;const C=(Math.min(1,Math.max(-1,j))+1)*50;return sG(C)}function zNe(e){const{natal:t,natalScaled:n,chain:r,weights:i}=e;if(!t||t.length<3)return null;const a=bN({natal:t,perStemElementScaled:n,mode:"natal"}),o=a?.yang??BNe(n);if(o==null)return null;const l=[];i.natal>0&&l.push({yang:o,weight:i.natal});const u=Vb(r?.dae??null);u!=null&&(i.dae??0)>0&&l.push({yang:u,weight:i.dae??0});const d=Vb(r?.se??null);d!=null&&(i.se??0)>0&&l.push({yang:d,weight:i.se??0});const h=Vb(r?.wol??null);h!=null&&(i.wol??0)>0&&l.push({yang:h,weight:i.wol??0});const m=Vb(r?.il??null);m!=null&&(i.il??0)>0&&l.push({yang:m,weight:i.il??0});const b=l.reduce((k,w)=>k+w.weight,0);if(b<=0)return a??null;const y=l.reduce((k,w)=>k+w.yang*w.weight,0)/b;return sG(y)}function lG(e){const{ms:t,natal:n,chain:r,basis:i,tab:a,unified:o,percent:l,category:u,sections:d}=e,h=d?.tenGod??!0,m=d?.twelveUnseong??!0,b=d?.twelveShinsal??!0,y=d?.shinsal??!0,k=d?.nabeum??!0,w=nG(t),_=Re(n[3]??""),T=[Re(n[0]??""),Re(n[1]??""),Re(n[2]??""),_],{shinsalEra:N,shinsalGaehwa:j,shinsalBase:C}=YH.getState(),M=C===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",{flags:P}=T9(T,o.natalFixed.elementScoreRaw),I=`${u} (${l.toFixed(1)}%)  ${[` ${P..||P..||P..||P..?"":""}`,` ${P..||P..||P..||P..?"":""}`,` ${P..||P..?"":""}`].join(", ")}`,z=rG(t,T),K=o.dayStem,G=Zs[K]??Zs[o.dayStem]??"",H=JH({natal:T,dayStem:K,perStemSource:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare}),B=`: ${t.name??""}  (${eG(t,w)}) 
${t.ganjiText} / : ${t.gender}`,q=(ee,he)=>{const J=(he??"").trim();return J?`## ${ee}
${J}`:""},X=[],V=[];V.push(" ver."),V.push(q("",I));const F=bN({natal:T,perStemElementScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,mode:"natal"});if(F&&V.push(q("()",tx(F))),V.push(q("(  )",Su(cj(H.elementPercent100,G)))),h){const ee=lj(H.totalsSub100,K);V.push(q(" ( 10 100)",Su(ee)))}if(m){const ee=z.map((he,J)=>{const ae=T[J]??"";return ae?{pos:he,gz:ae,value:Ca(K,ae.charAt(1))}:null}).filter(Boolean);ee.length>0&&V.push(q("()",wa(ee)))}if(b){const ee=z.map((he,J)=>{const ae=T[J]??"";return ae?{pos:he,gz:ae,value:Ma({baseBranch:M,targetBranch:ae.charAt(1),era:N,gaehwa:j})}:null}).filter(Boolean);ee.length>0&&V.push(q("()",wa(ee)))}if(k){const ee=z.map((he,J)=>{const ae=T[J]??"";if(!ae)return null;const me=ex(ae);return me?{pos:he,gz:ae,value:me.name}:null}).filter(Boolean);ee.length>0&&V.push(q("",wa(ee)))}if(V.push(q("()",nx(Ox(z.map((ee,he)=>T[he]??""))))),y){const ee=Kp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});V.push(q("()",gN(ee)))}const Z=V.filter(Boolean).join(`

`);Z&&X.push(Z);const Q={:{natal:100},:{natal:70,dae:30},:{natal:60,dae:25,se:15},:{natal:55,dae:20,se:15,wol:10},:{natal:50,dae:20,se:15,wol:10,il:5}},le=(ee,he)=>{if(ee==="")return"";const J=he??Wp({natal:T,tab:ee,chain:r,hourKey:"prompt"}),ae=tG(J,ee,r),me=ae.elementPercent,pe=ae.totalsSub,te=[];te.push(`${ee} ver.`);const je={dae:r?.dae?Re(r.dae):null,se:r?.se?Re(r.se):null,wol:r?.wol?Re(r.wol):null,il:r?.il?Re(r.il):null},xe=zNe({natal:T,natalScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,chain:je,weights:Q[ee]});if(xe&&te.push(q(`( + ${ee})`,tx(xe))),te.push(q(`( + ${ee})`,Su(cj(me,G)))),h){const Ie=lj(pe,K);te.push(q(` ( + ${ee})`,Su(Ie)))}const ue=ee===""?r?.dae:ee===""?r?.se:ee===""?r?.wol:ee===""?r?.il:null,Ee=ue?Re(ue):"";if(Ee&&(te[0]=`${ee} ver.  : ${Ee}`),Ee&&m){const Ie=Ca(K,Ee.charAt(1));te.push(q(`(${ee})`,wa([{pos:ee,gz:Ee,value:Ie}])))}if(Ee&&b){const Ie=Ma({baseBranch:M,targetBranch:Ee.charAt(1),era:N,gaehwa:j});te.push(q(`(${ee})`,wa([{pos:ee,gz:Ee,value:Ie}])))}if(Ee&&k){const Ie=ex(Ee);Ie&&te.push(q("",wa([{pos:ee,gz:Ee,value:Ie.name}])))}const Me=Jl({natal:T,daewoon:ee!==""?r?.dae??void 0:void 0,sewoon:ee===""||ee===""||ee===""?r?.se??void 0:void 0,wolwoon:ee===""||ee===""?r?.wol??void 0:void 0,ilwoon:ee===""?r?.il??void 0:void 0});return te.push(q(`(${ee})`,nx(Me))),te.filter(Boolean).join(`

`)};if(a!==""){const ee=a===""?[""]:a===""?["",""]:a===""?["","",""]:a===""?["","","",""]:[];for(const he of ee){const J=le(he,he===a?o:void 0);J&&X.push(J)}}const se=X.filter(ee=>ee&&ee.trim().length>0).join(`

`),W=[];QH(W,{mode:"single",tab:a,isStudyTone:e.teacherMode===!0});const re=W.join(`
`).trim();return{header:B,body:se,guide:re}}function UNe(e){const{header:t,body:n,guide:r}=lG(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function Fo(e){const{scope:t,infoText:n,gz:r,chain:i,natal:a,relationArgs:o,basis:l,unified:u,dayEl:d,baseDayStem:h,show:m,shinsalSettings:b,harmonyMode:y="scope",includeBasicInfo:k=!0}=e,w=tG(u,t,i),_=Jl({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon}),T=m.shinsal?Kp({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon,basis:l}):null,N=m.nabeum?ex(r):null,j=m.twelveUnseong?Ca(h,r.charAt(1)):null,C=m.twelveShinsal?Ma({baseBranch:b.baseBranch,targetBranch:r.charAt(1),era:b.era,gaehwa:b.gaehwa}):null,M=y==="full"?_:RNe(_,t);return{...k?{:n,:r}:{},:cj(w.elementPercent,d),...m.tenGod?{:w.totalsSub}:{},:M,...m.shinsal?{:PNe(T,t)}:{},...m.nabeum?{:N?{:N.name,:N.element}:null}:{},...m.twelveUnseong?{:{:t,:j}}:{},...m.twelveShinsal?{:{:t,:C}}:{}}}function FNe(e){const{selectedDaeList:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(n.length===0||t.length===0)return[];const h=[];for(const m of t){const b={dae:m.gz,se:null,wol:null,il:null},y=Fo({scope:"",infoText:`${m.age} ${m.gz} (${m.startYear}~${m.endYear})`,gz:m.gz,chain:b,natal:r,relationArgs:{daewoon:m.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"full",includeBasicInfo:!1});h.push(Uo(`${m.age} ${m.gz} (${m.startYear}~${m.endYear})`,y))}return h.filter(m=>m.trim().length>0)}function yN(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function cG(e,t){const n=e[t],r=e[t+1];return r?yN(r):new Date(n.endYear+1,0,1)}function uG(e,t,n,r){return e<r&&t>n}function dG(e,t,n){const r=new Date(t,0,1),i=new Date(n+1,0,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=yN(l),d=cG(e,o);uG(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function fG(e,t){return dG(e,t,t)}function ix(e,t,n){const r=new Date(t,n-1,1),i=new Date(t,n,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=yN(l),d=cG(e,o);uG(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function dj(e,t){if(!Number.isInteger(t)||t<1||t>12)throw new RangeError(`findSeForMonthPairs: month must be 1..12, got ${t}`);const n=new Date(e,t-1,1,0,0,0,0),r=new Date(e,t,1,0,0,0,0),i=bn(e,315),a=[],o=u=>{const d=ut(new Date(u,5,15,12,0,0,0)),h=Re(d||"");h&&(a.some(m=>m.useYear===u&&m.gz===h)||a.push({useYear:u,gz:h}))};return n<i&&i<r?(o(e-1),o(e)):r<=i?o(e-1):o(e),a}function HNe(e){const{seYears:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=Array.from(new Set(t)).sort((w,_)=>w-_),m=[],b=h[0],y=h[h.length-1],k=dG(n,b,y);if(k.length>0){const w=b,_=ut(new Date(w,5,15,12,0,0)),T=Re(_||""),N={:k.map(j=>{const C={dae:j.gz,se:T||null,wol:null,il:null};return Fo({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:T||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};m.push(Uo("",N))}for(const w of h){const _=new Date(w,5,15,12,0,0),T=ut(_),N=fG(n,w),j=N.length>0?N[0]:null,C=Re(T||""),M=w,P={dae:j?j.gz:null,se:C||null,wol:null,il:null},I=Fo({scope:"",infoText:`${M} ${C}`,gz:C,chain:P,natal:r,relationArgs:{daewoon:j?.gz,sewoon:C||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Uo(` ${M}`,{:I}))}return m.filter(w=>w.trim().length>0)}function eE(e){return String(e).padStart(2,"0")}function GNe(e,t){const n=new Date(e,t-1,1,12,0,0,0),r=new Date(e,t,1,12,0,0,0),i=bn(e,315),a=dj(e,t);if(!(n<i&&i<r)){const k=a[a.length-1]??(()=>{const w=Re(ut(new Date(e,5,15,12,0,0,0))||"");return{useYear:e,gz:w}})();return[{label:`${e}-${eE(t)}`,repDate:new Date(e,t-1,15,12,0,0,0),se:k}]}const l=1440*60*1e3,u=new Date(i.getTime()-l);u.setHours(12,0,0,0);const d=new Date(i.getTime()+l);d.setHours(12,0,0,0);const h=a.find(k=>k.useYear===e-1)??a[0],m=a.find(k=>k.useYear===e)??a[a.length-1],b=h??{useYear:e-1,gz:Re(ut(new Date(e-1,5,15,12,0,0,0))||"")},y=m??{useYear:e,gz:Re(ut(new Date(e,5,15,12,0,0,0))||"")};return[{label:`${e}-${eE(t)}()`,repDate:u,se:b},{label:`${e}-${eE(t)}()`,repDate:d,se:y}]}function YNe(e){const{wolMonths:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=[],m=[],b=new Map;for(const N of t){const[j,C]=N.split("-").map(Number),M=ix(n,j,C);for(const I of M)m.some(z=>z.gz===I.gz&&z.startYear===I.startYear)||m.push(I);const P=dj(j,C);for(const I of P){const z=`${I.useYear}:${I.gz}`;b.has(z)||b.set(z,{year:I.useYear,month:C,gz:I.gz})}}const[y,k]=t[0].split("-").map(Number),w=dj(y,k),_=w[w.length-1]?.gz??Re(ut(new Date(y,5,15,12,0,0,0))||"");if(m.length>0){const N={:m.map(j=>{const C={dae:j.gz,se:_||null,wol:null,il:null};return Fo({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:_||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Uo("",N))}const T=Array.from(b.keys()).sort((N,j)=>{const C=Number(N.split(":")[0]),M=Number(j.split(":")[0]);return C-M});if(T.length>0){const N={:T.map(j=>{const C=b.get(j),M=C.year,P=C.gz,z=fG(n,M)[0]??m[0]??null,K={dae:z?z.gz:null,se:P,wol:null,il:null};return Fo({scope:"",infoText:`${M} ${P}`,gz:P,chain:K,natal:r,relationArgs:{daewoon:z?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Uo("",N))}for(const N of t){const[j,C]=N.split("-").map(Number),M=ix(n,j,C),P=M.length>0?M[0]:null,z=GNe(j,C).map(K=>{const G=Ot(K.repDate),H=Re(G||""),B={dae:P?P.gz:null,se:K.se.gz||null,wol:H,il:null};return Fo({scope:"",infoText:`${K.label} ${H}  ${K.se.useYear} ${K.se.gz}`,gz:H,chain:B,natal:r,relationArgs:{daewoon:P?.gz,sewoon:K.se.gz||void 0,wolwoon:H,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});h.push(Uo(` ${N}`,{:z}))}return h.filter(N=>N.trim().length>0)}function tE(e){const t=e.getFullYear(),n=bn(t,315),r=e<n?t-1:t,i=ut(new Date(r,5,15,12,0,0,0)),a=Re(i||"");return{useYear:r,gz:a}}function qNe(e){const{ilDays:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,dayBoundaryRule:h}=e;if(t.length===0)return[];const m=[],[b,y,k]=t[0].split("-").map(Number),w=new Date(b,y-1,k,4,0),_=new Date(b,y-1,k,12,0);if(!Number.isNaN(w.getTime())){const T=ix(n,b,y),N=T.length>0?T[0]:null,j=[];for(const G of t){const[H,B,q]=G.split("-").map(Number),X=new Date(H,B-1,q,12,0),V=new Date(H,B-1,q,4,0);if(Number.isNaN(X.getTime())||Number.isNaN(V.getTime()))continue;const F=tE(X),Z=Re(Ot(X)||""),Q=Re(dt(V,h)||""),le=`${F.useYear}|${F.gz}|${Z}`;j.some(se=>se.key===le)||j.push({key:le,repDateStr:G,seYear:F.useYear,seGZ:F.gz,wolGZ:Z,ilGZ:Q})}const C=Re(dt(w,h)||""),M=Re(Ot(_)||""),P=tE(_),I=j.length>0?j:[{key:`${P.useYear}|${P.gz}|${M}`,repDateStr:t[0],seYear:P.useYear,seGZ:P.gz,wolGZ:M,ilGZ:C}];if(N){const G=I[I.length-1],H={dae:N.gz,se:G.seGZ,wol:G.wolGZ,il:G.ilGZ},B=Fo({scope:"",infoText:`${N.age} ${N.gz} (${N.startYear}~${N.endYear})`,gz:N.gz,chain:H,natal:r,relationArgs:{daewoon:N.gz,sewoon:G.seGZ,wolwoon:G.wolGZ,ilwoon:G.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Uo("",B))}const z=I.filter(G=>G.seGZ.trim().length>0).map(G=>{const H={dae:N?N.gz:null,se:G.seGZ,wol:G.wolGZ,il:G.ilGZ};return Fo({scope:"",infoText:`${G.seYear} ${G.seGZ} (${G.repDateStr} )`,gz:G.seGZ,chain:H,natal:r,relationArgs:{daewoon:N?.gz,sewoon:G.seGZ,wolwoon:G.wolGZ,ilwoon:G.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});z.length>0&&m.push(Uo("",{:z}));const K=I.filter(G=>G.wolGZ.trim().length>0).map(G=>{const H={dae:N?N.gz:null,se:G.seGZ,wol:G.wolGZ,il:G.ilGZ};return Fo({scope:"",infoText:`${G.repDateStr} ${G.wolGZ}`,gz:G.wolGZ,chain:H,natal:r,relationArgs:{daewoon:N?.gz,sewoon:G.seGZ,wolwoon:G.wolGZ,ilwoon:G.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});K.length>0&&m.push(Uo("",{:K}))}for(const T of t){const[N,j,C]=T.split("-").map(Number),M=new Date(N,j-1,C,4,0),P=new Date(N,j-1,C,12,0);if(Number.isNaN(M.getTime())||Number.isNaN(P.getTime()))continue;const I=ix(n,N,j),z=I.length>0?I[0]:null,G=tE(P).gz,H=Ot(P),B=Re(H||""),q=dt(M,h),X=Re(q||""),V={dae:z?z.gz:null,se:G||null,wol:B,il:X},F=Fo({scope:"",infoText:`${T} ${X}`,gz:X,chain:V,natal:r,relationArgs:{daewoon:z?.gz,sewoon:G||void 0,wolwoon:B||void 0,ilwoon:X||void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Uo(` ${T}`,{:F}))}return m.filter(T=>T.trim().length>0)}function hG(e){const{ms:t,natal:n,basis:r,includeTenGod:i,unified:a,percent:o,category:l,selectedDaeList:u,daeList:d,seYears:h,wolMonths:m,ilDays:b,sections:y}=e,k=nG(t),w=Re(n[3]??""),_=t.mingSikType??"/",T=[Re(n[0]??""),Re(n[1]??""),Re(n[2]??""),w],N=rG(t,T),j=T[2]?.charAt(0)??"",C=Zs[j]??Zs[a.dayStem]??"",M=JH({natal:T,dayStem:j,perStemSource:a.natalFixed.overlay.perStemAugFull??a.natalFixed.overlay.perStemAugBare}),P=!!i&&(y?.tenGod??!0),I=y?.twelveUnseong??!0,z=y?.twelveShinsal??!0,K=y?.shinsal??!0,G=y?.nabeum??!0,{shinsalBase:H,shinsalEra:B,shinsalGaehwa:q}=YH.getState(),X=H===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",V=`: ${t.name??""}  (${eG(t,k)}) 
${t.ganjiText} / : ${t.gender}`,F=(me,pe)=>{const te=(pe??"").trim();return te?`## ${me}
${te}`:""},Z=[],{flags:Q}=T9(T,a.natalFixed.elementScoreRaw),le=`${l} (${o.toFixed(1)}%)  ${[` ${Q..||Q..||Q..||Q..?"":""}`,` ${Q..||Q..||Q..||Q..?"":""}`,` ${Q..||Q..?"":""}`].join("  ")}`,se=[];se.push(" ver."),se.push(F("",le));const W=bN({natal:T,perStemElementScaled:a.natalFixed.overlay.perStemAugFull??a.natalFixed.overlay.perStemAugBare,mode:"natal"});if(W&&se.push(F("()",tx(W))),se.push(F("(  )",Su(Object.fromEntries(Object.entries(M.elementPercent100).map(([me,pe])=>[`${me}(${XH(C,me)})`,pe]))))),P){const me=lj(M.totalsSub100,j);se.push(F(" ( 10 100)",Su(me)))}if(I){const me=N.map((pe,te)=>{const je=T[te]??"";return je?{pos:pe,gz:je,value:Ca(j,je.charAt(1))}:null}).filter(Boolean);me.length>0&&se.push(F("()",wa(me)))}if(z){const me=N.map((pe,te)=>{const je=T[te]??"";return je?{pos:pe,gz:je,value:Ma({baseBranch:X,targetBranch:je.charAt(1),era:B,gaehwa:q})}:null}).filter(Boolean);me.length>0&&se.push(F("()",wa(me)))}if(G){const me=N.map((pe,te)=>{const je=T[te]??"";if(!je)return null;const xe=ex(je);return xe?{pos:pe,gz:je,value:xe.name}:null}).filter(Boolean);me.length>0&&se.push(F("",wa(me)))}const re=Ox(mNe(N,T));if(se.push(F("()",nx(re))),K){const me=Kp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:r});se.push(F("()",gN(me)))}const ee=se.filter(Boolean).join(`

`);ee&&Z.push(ee),d.length>0&&u.length>0&&(Z.push(" ver."),Z.push(...FNe({selectedDaeList:u,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:P,twelveUnseong:I,twelveShinsal:z,shinsal:K,nabeum:G},shinsalSettings:{baseBranch:X,era:B,gaehwa:q}}))),h.length>0&&(Z.push(" ver."),Z.push(...HNe({seYears:h,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:P,twelveUnseong:I,twelveShinsal:z,shinsal:K,nabeum:G},shinsalSettings:{baseBranch:X,era:B,gaehwa:q}}))),m.length>0&&(Z.push(" ver."),Z.push(...YNe({wolMonths:m,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:P,twelveUnseong:I,twelveShinsal:z,shinsal:K,nabeum:G},shinsalSettings:{baseBranch:X,era:B,gaehwa:q}}))),b.length>0&&(Z.push(" ver."),Z.push(...qNe({ilDays:b,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:P,twelveUnseong:I,twelveShinsal:z,shinsal:K,nabeum:G},shinsalSettings:{baseBranch:X,era:B,gaehwa:q},dayBoundaryRule:_})));const he=(rx(Z.join(`

`))??"").toString(),J=[];QH(J,{mode:"multi",isStudyTone:e.teacherMode===!0});const ae=J.join(`
`).trim();return{header:V,body:he,guide:ae}}function KNe(e){const{header:t,body:n,guide:r}=hG(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function vN(e){if(!e)return null;const t=e.name||"";let n="";if(e.birthDay&&e.birthDay.length===8){const o=e.birthDay.slice(0,4),l=e.birthDay.slice(4,6),u=e.birthDay.slice(6,8);n=`${o}-${l}-${u}`}else e.birthDay&&(n=e.birthDay);let r="";if(e.birthTime&&e.birthTime.trim().length>0){const l=e.birthTime.trim().padEnd(4,"0").slice(0,4),u=l.slice(0,2),d=l.slice(2,4);r=`${u}:${d}`}let i="";e.birthPlace&&typeof e.birthPlace=="object"&&(i=e.birthPlace.name||"");const a=e.ganji||e.ganjiText||"";return{name:t,birthDate:n,birthTime:r,birthPlace:i,ganjiText:a}}function WNe(e){const{header:t,body:n}=lG(e),r=e.relationMode==="couple"?vN(e.partnerMs??null):null,i=r?oG("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function VNe(e){const{header:t,body:n}=hG(e),r=e.relationMode==="couple"?vN(e.partnerMs??null):null,i=r?oG("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function ZNe(e){const t=(e??"").trim();if(!t)return"";const n=[/\r?\n-----\s*\r?\n/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/,/\r?\n##\s*\s*/,/\r?\n##\s*/,/\r?\n?###\s*/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/];let r=-1;for(const i of n){const a=t.search(i);a>=0&&(r=r<0?a:Math.min(r,a))}return r>=0?t.slice(0,r).trimEnd():t}function XNe(e){return e?`    .
`:""}function JNe(e){return e?` /  .
`:""}function QNe(e,t){if(e!=="couple")return"";const n=vN(t);return n?["","","[  -   ]","",`-  : ${n.name}`,`-  : ${n.birthDate}`,`-  : ${n.birthTime}`,`-  : ${n.birthPlace}`,`- ${n.ganjiText}`,"","  /  ,","     .",""].join(`
`):""}function xN(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),r=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=ia(t,n,r);t=j.getFullYear(),n=j.getMonth()+1,r=j.getDate()}const i=!e.birthTime||e.birthTime==="",a=i?4:Number(e.birthTime.slice(0,2)),o=i?30:Number(e.birthTime.slice(2,4)),l=new Date(t,n-1,r,a,o,0,0),u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,d=Up(l,u,i),h=e.mingSikType??"/",m=ut(d,u),b=Ot(d,u),y=dt(d,h),k=i?null:Ni(d,h),w=Re(m),_=Re(b),T=Re(y),N=k?Re(k):"";return[w,_,T,N]}function mG(e){const t=new Date(e.corrected),n=xN(e),r=n[0].charAt(0),a=["","","","",""].includes(r),o=e.gender==="",l=o&&a||!o&&!a?"forward":"backward",u=Gp(t,n[1],l,120,e.birthPlace?.lon??127.5),d=u.firstChange;if(!d)return[];const h=[];let m=Re(u.events[0]?.gz??n[1]);for(let b=0;b<10;b++){const y=new Date(d);if(y.setFullYear(y.getFullYear()+b*10),b>0){const k=u.events[b];k&&(m=Re(k.gz))}h.push(`${y.getFullYear()} ${String(y.getMonth()+1).padStart(2,"0")} ${m}  `)}return h}function ec(e){return Re(e)}function eOe(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function m$(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Re(n??"");return i||(r<=2?"--":"")})}function pG(e,t){if(!Array.isArray(e)||e.length===0)return null;const n=t.getTime();for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(n>=i.at.getTime())return i.gz}return e[0].gz}function tOe(e,t){if(!Array.isArray(e)||e.length===0)return null;const n=e.map(r=>{const i=String(r??"").match(/(\d{4})\s*(\d{1,2})\s*([-]{2})/);if(!i)return null;const a=Number(i[1]),o=Number(i[2]),l=ec(i[3]??"");return!Number.isFinite(a)||!Number.isFinite(o)||!l?null:{at:new Date(a,o-1,1,12,0,0,0),gz:l}}).filter(Boolean);return pG(n,t)}function nOe(e,t,n,r,i){const a=ec(ut(t)||""),o=ec(Ot(t)||""),l=ec(dt(t,n)||"");let u=e?.dae?ec(e.dae):null;if(!u&&r)if(i&&i.length>0)u=pG(i,t);else{const d=mG(r);u=tOe(d,t)}return e?{dae:u,se:e.se??(a||null),wol:e.wol??(o||null),il:e.il??(l||null)}:{dae:u,se:a||null,wol:o||null,il:l||null}}function rOe(e,t){const n=m$(e),r=m$(t);return{solarKo:n,lunarKo:r}}function p$(e,t){if(!t)return e;const n=ta(e[2]||"",-1);return[e[0],e[1],n,e[3]]}function fj(e,t,n){const r=[...e];return n&&(!r[3]||r[3]===""||r[3]==="--")&&t&&(r[3]=t.stem+t.branch),r}function iOe(e,t,n){return e?"solar":t?"lunar":"solar"}function aOe(e,t,n,r,i,a,o,l){return fj(e==="lunar"?n?i:t?r:a??["","","",""]:t?r:n?i:a??["","","",""],o,l)}function oOe(e,t){const n=Number(e.birthDay?.slice(0,4)),r=Number(e.birthDay?.slice(4,6)),i=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i))return null;const a=new Date(n,r-1,i,12,4,0,0),o=ec(ut(a)||""),l=ec(Ot(a)||""),u=ec(dt(a,t)||"");return[o,l,u,""]}function sOe(e,t){return t&&e?e.stem+e.branch:""}function lOe(e,t,n){const i=[...xN(e)];return n&&t&&t.length===2&&(i[3]=t),i}function cOe(e){const t=$9(e,{criteriaMode:"modern",useHarmonyOverlay:!0}),n=MT(t);return{percent:n,category:i9(n)}}function uOe(e,t){const n=e.birthDay?Number(e.birthDay.slice(0,4)):0;return t&&t.length>0?t.slice(0,10).map((i,a)=>{const o=i.at.getFullYear(),l=i.at.getMonth()+1,u=i.at.getDate(),d=n>0?b$(n,o):a*10;return{gz:i.gz,age:d,startYear:o,startMonth:l,startDay:u,endYear:o+10}}):mG(e).slice(0,10).map((i,a)=>{const o=i.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),l=o?Number(o[1]):0,u=o?Number(o[2]):1,d=1,h=o?o[3]:"",m=n>0?b$(n,l):a*10;return{gz:h,age:m,startYear:l,startMonth:u,startDay:d,endYear:l+10}})}function dOe(e,t){return e.filter(n=>n.id!==t).map(n=>{const r=(n.name??"").trim()||" ",i=n.birthDay?n.birthDay:"",a=i?`${r} (${i})`:r;return{id:n.id,label:a}})}function fOe(e,t){if(!e)return"";if(t.length===0)return e;const n=["","-----","     ","",...t.map((r,i)=>`${i+1}. ${r}`)];return`${e}
${n.join(`
`)}`}function g$(e){return eOe(e)}function b$(e,t){return t-e+1}function hOe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1,canUseMultiMode:o,canUseLuckTabs:l,input:u}){const{friendMode:d,teacherMode:h,partnerId:m,mainCategory:b,subCategory:y,relationMode:k,activeTab:w,isMultiMode:_,multiTab:T,selectedDaeIdx:N,rangeControls:j,extraQuestions:C,sections:M}=u,P=jn(zn=>zn.list),{date:I,setDate:z}=Kr(),K=Qo();S.useEffect(()=>{z(new Date)},[e.id,z]);const G=S.useMemo(()=>m?P.find(zn=>zn.id===m)??null:null,[m,P]),H=e.mingSikType??"/",B=hc(e,H,100,K),q=S.useMemo(()=>B.slice(1),[B]),X=S.useMemo(()=>I??new Date,[I]),V=S.useMemo(()=>nOe(r,X,H,e,q),[r,X,H,e,q]),F=S.useMemo(()=>l?V:{dae:null,se:null,wol:null,il:null},[l,V]),Z=Ei(zn=>zn.manualHour),Q=Ei(zn=>zn.usePrevDay),le=!e.birthTime||e.birthTime===""||!/^\d{4}$/.test(e.birthTime??""),{solarKo:se,lunarKo:W}=S.useMemo(()=>rOe(t,n),[t,n]),re=S.useMemo(()=>fj(se,Z,le),[se,Z,le]),ee=S.useMemo(()=>fj(W,Z,le),[W,Z,le]),he=S.useMemo(()=>oOe(e,H),[e,H]),J=g$(re),ae=g$(ee),me=iOe(J,ae),pe=S.useMemo(()=>aOe(me,J,ae,re,ee,he,Z,le),[me,J,ae,re,ee,he,Z,le]),te=S.useMemo(()=>p$(pe,Q),[pe,Q]),je=S.useMemo(()=>le&&Z?Z.stem+Z.branch:te[3]||"",[Z,te,le]),xe=sOe(Z,le),ue=S.useMemo(()=>lOe(e,xe,le),[e,xe,le]),Ee=S.useMemo(()=>p$(ue,Q),[ue,Q]),Me=l?w:"",Ie=b==="love"||b==="compat",mt=Ie&&k==="couple"?G??null:null,pt=Ie?k:void 0,De=S.useMemo(()=>Wp({natal:Ee,tab:Me,chain:F,hourKey:je}),[Ee,Me,F,je]),{percent:ze,category:Ge}=S.useMemo(()=>cOe(Ee),[Ee]),oe=S.useMemo(()=>uOe(e,q),[e,q]),Ce=S.useMemo(()=>dOe(P??[],e.id),[P,e.id]),Ue=S.useMemo(()=>N.map(zn=>oe[zn]).filter(zn=>!!zn),[N,oe]),rt=S.useMemo(()=>T===""?j.seYearsList:[],[T,j.seYearsList]),xt=S.useMemo(()=>T===""?j.wolMonthsList:[],[T,j.wolMonthsList]),st=S.useMemo(()=>T===""?j.ilDaysList:[],[T,j.ilDaysList]),Oe=S.useMemo(()=>e?UNe({ms:e,natal:Ee,chain:F,basis:i,tab:Me,unified:De,percent:ze,category:Ge,teacherMode:h,sections:M}):"",[e,i,a,Me,F,De,ze,Ge,Ee,b,y,k,mt,h,M,X]),Fe=S.useMemo(()=>!e||!_||!o?"":KNe({ms:e,natal:Ee,basis:i,includeTenGod:a,unified:De,percent:ze,category:Ge,selectedDaeList:Ue,daeList:oe,seYears:rt,wolMonths:xt,ilDays:st,teacherMode:h,sections:M}),[e,_,o,rt,Ue,oe,xt,st,Ee,i,a,De,ze,Ge,b,y,pt,mt,h,d,M]),We=S.useMemo(()=>QNe(k,G),[k,G]),bt=_?Fe:Oe,At=S.useMemo(()=>JNe(h),[h]),Nt=S.useMemo(()=>XNe(d),[d]),Mt=S.useMemo(()=>bt||We?`${bt}${We}
${At}${Nt}`:"",[At,Nt,bt,We]),Kt=S.useMemo(()=>fOe(Mt,C),[Mt,C]),rn=S.useMemo(()=>e?_?VNe({ms:e,natal:Ee,basis:i,includeTenGod:a,unified:De,percent:ze,category:Ge,selectedDaeList:Ue,daeList:oe,seYears:rt,wolMonths:xt,ilDays:st,relationMode:pt,partnerMs:mt,teacherMode:h,sections:M}):WNe({ms:e,natal:Ee,chain:F,basis:i,tab:Me,unified:De,percent:ze,category:Ge,relationMode:k,partnerMs:mt,teacherMode:h,sections:M}):"",[e,_,Ee,i,a,De,ze,Ge,Ue,oe,rt,xt,st,b,y,k,pt,mt,h,d,M,F,Me,X]),si=S.useMemo(()=>{const zn=rn.trim();if(zn)return zn;const Pe=ZNe(bt).trim();return Pe||bt.trim()},[rn,bt]);return{date:I,setDate:z,partnerMs:G,partnerOptions:Ce,daeList:oe,tabForLogic:Me,baseText:bt,basePrompt:Mt,finalText:Kt,infoOnlyText:si,allowManualHour:le,activePillars:te}}function y$(e,t=1200){const[n,r]=S.useState(!1),i=!!(e&&e.trim().length>0),a=S.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),t)}catch{r(!1)}},[i,e,t]);return{copied:n,canCopy:i,onCopy:a}}function mOe(e,t){const{copied:n,canCopy:r,onCopy:i}=y$(e),{copied:a,canCopy:o,onCopy:l}=y$(t);return{copiedAll:n,copiedInfo:a,canCopyAll:r,canCopyInfo:o,onCopyAll:i,onCopyInfoOnly:l}}function pOe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1}){const o=jn(G=>G._rtUserId),u=WAe()??o??null,d=vn(G=>G.loaded),h=vn(G=>G.userId),m=vn(G=>G.plan),b=S.useMemo(()=>Dm(!u||!d||h!==u?"FREE":m??null),[u,d,h,m]),y=S.useMemo(()=>YE(b),[b]),k=y.canUseMultiMode,w=y.canUseLuckTabs,_=y.canUseAllPrompts?"full":"locked",T=XAe({msId:e.id,canUseMultiMode:k,canUseLuckTabs:w}),N=hOe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a,canUseMultiMode:k,canUseLuckTabs:w,input:T}),{copiedAll:j,copiedInfo:C,canCopyAll:M,canCopyInfo:P,onCopyAll:I,onCopyInfoOnly:z}=mOe(N.finalText,N.infoOnlyText);function K(G,H){T.setMainCategory(G),T.setSubCategory(H?.[0]?.key??"overview")}return{sections:T.sections,toggleSection:T.toggleSection,friendMode:T.friendMode,setFriendMode:T.setFriendMode,teacherMode:T.teacherMode,setTeacherMode:T.setTeacherMode,date:N.date,setDate:N.setDate,planTier:b,promptAccess:_,canUseMultiMode:k,canUseLuckTabs:w,partnerId:T.partnerId,setPartnerId:T.setPartnerId,partnerMs:N.partnerMs,mainCategory:T.mainCategory,subCategory:T.subCategory,setSubCategory:T.setSubCategory,relationMode:T.relationMode,setRelationMode:T.setRelationMode,activeTab:T.activeTab,setActiveTab:T.setActiveTab,isMultiMode:T.isMultiMode,setIsMultiMode:T.setIsMultiMode,multiTab:T.multiTab,setMultiTab:T.setMultiTab,selectedDaeIdx:T.selectedDaeIdx,handleToggleDae:T.handleToggleDae,rangeControls:T.rangeControls,partnerOptions:N.partnerOptions,daeList:N.daeList,tabForLogic:N.tabForLogic,baseText:N.baseText,basePrompt:N.basePrompt,finalText:N.finalText,infoOnlyText:N.infoOnlyText,copiedAll:j,copiedInfo:C,canCopyAll:_==="full"&&M,canCopyInfo:_==="full"&&P,onCopyAll:I,onCopyInfoOnly:z,handleMainCategoryChange:K,setQuestionDraft:T.setQuestionDraft,questionDraft:T.questionDraft,extraQuestions:T.extraQuestions,setExtraQuestions:T.setExtraQuestions,handleAddQuestion:T.handleAddQuestion,handleRemoveQuestion:T.handleRemoveQuestion,handleClearQuestions:T.handleClearQuestions,allowManualHour:N.allowManualHour,activePillars:N.activePillars}}function gOe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a=!1}){const o=pOe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a}),l=a$[o.mainCategory];if(!e)return g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"  ."});const u=o.promptAccess!=="full",d=u?"    . ":void 0,h=!u&&o.canCopyInfo,m=!u&&o.canCopyAll,b="https://gemini.google.com/app",y="https://chatgpt.com/",k=w=>{if(typeof document<"u"){const _=document.createElement("a");_.href=w,_.target="_blank",_.rel="noopener noreferrer",_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)}o.onCopyAll()};return g.jsxs("div",{className:"relative rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-2 desk:space-y-3",children:[u?g.jsx("div",{className:"absolute inset-0 z-10 rounded-xl bg-white/70 dark:bg-neutral-900/70 backdrop-blur-[1px] flex items-center justify-center p-4",children:g.jsxs("div",{className:"max-w-sm text-center border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-900 px-4 py-3 shadow-sm",children:[g.jsx("div",{className:"text-lg font-semibold",children:"  "}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:["   /  .",g.jsx("br",{}),"    100   ! (  )"]})]})}):null,g.jsx(LAe,{}),g.jsx(IAe,{sections:o.sections,toggleSection:o.toggleSection}),g.jsx($Ae,{mainCategory:o.mainCategory,subCategory:o.subCategory,mainCategoryMeta:KAe,currentSubList:l,onMainCategoryChange:w=>o.handleMainCategoryChange(w,a$[w]),onSubCategoryChange:o.setSubCategory}),g.jsx(BAe,{visible:o.mainCategory==="love"||o.mainCategory==="compat",relationMode:o.relationMode,setRelationMode:o.setRelationMode,partnerId:o.partnerId,setPartnerId:o.setPartnerId,partnerOptions:o.partnerOptions}),g.jsx(zAe,{isMultiMode:o.canUseMultiMode?o.isMultiMode:!1,setIsMultiMode:w=>{!o.canUseMultiMode&&w||o.setIsMultiMode(w)},canUseMultiMode:o.canUseMultiMode}),o.isMultiMode?g.jsx(GAe,{multiTab:o.multiTab,setMultiTab:o.setMultiTab,daeList:o.daeList.map(w=>({gz:w.gz,age:w.age,startYear:w.startYear,endYear:w.endYear})),selectedDaeIdx:o.selectedDaeIdx,onToggleDae:o.handleToggleDae,seStartYear:o.rangeControls.seStartYear,seEndYear:o.rangeControls.seEndYear,onSeStartChange:o.rangeControls.onSeStartChange,onSeEndChange:o.rangeControls.onSeEndChange,onSeStartBlur:o.rangeControls.onSeStartBlur,onSeEndBlur:o.rangeControls.onSeEndBlur,seYearsCount:o.rangeControls.seYearsCount,wolStartDate:o.rangeControls.wolStartYM,wolEndDate:o.rangeControls.wolEndYM,onWolStartChange:o.rangeControls.onWolStartChange,onWolEndChange:o.rangeControls.onWolEndChange,onWolStartBlur:o.rangeControls.onWolStartBlur,onWolEndBlur:o.rangeControls.onWolEndBlur,wolMonthsCount:o.rangeControls.wolMonthsCount,ilStartDate:o.rangeControls.ilStartDate,ilEndDate:o.rangeControls.ilEndDate,onIlStartChange:o.rangeControls.onIlStartChange,onIlEndChange:o.rangeControls.onIlEndChange,onIlStartBlur:o.rangeControls.onIlStartBlur,onIlEndBlur:o.rangeControls.onIlEndBlur,ilDaysCount:o.rangeControls.ilDaysCount}):g.jsx(HAe,{tabs:qAe,activeTab:o.tabForLogic,setActiveTab:w=>{!o.canUseLuckTabs&&w!==""||o.setActiveTab(w)},date:o.date,setDate:o.setDate,canUseLuckTabs:o.canUseLuckTabs}),g.jsx(YAe,{value:o.finalText,lockSelection:u}),g.jsx("div",{className:"flex justify-end",children:g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 w-full desk:w-auto",children:[g.jsx("button",{type:"button",onClick:o.onCopyInfoOnly,disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap border",h?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedInfo?"bg-green-600 text-white border-green-600":h?"bg-orange-600 text-white dark:bg-orange-600":"bg-orange-600/70 text-white border-orange-600/50"].join(" "),children:o.copiedInfo?"":`${h?"":" "}`}),g.jsx("button",{type:"button",onClick:o.onCopyAll,disabled:!m,title:m?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",m?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedAll?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"].join(" "),children:o.copiedAll?"":`${m?"":" "}`}),g.jsx("button",{type:"button",onClick:()=>void k(b),disabled:!m,title:m?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",m?"cursor-pointer bg-blue-600 text-white dark:bg-blue-500":"cursor-not-allowed opacity-50 bg-blue-600 text-white dark:bg-blue-500"].join(" "),children:`   ${m?"":" "}`}),g.jsx("button",{type:"button",onClick:()=>void k(y),disabled:!m,title:m?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",m?"cursor-pointer bg-emerald-600 text-white dark:bg-emerald-500":"cursor-not-allowed opacity-50 bg-emerald-600 text-white dark:bg-emerald-500"].join(" "),children:`   ${m?"":" "}`})]})})]})}function bOe(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o]=S.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin"));return{userId:e,setUserId:t,authChecked:n,setAuthChecked:r,isLoggedIn:i,setIsLoggedIn:a,adminMode:o}}function yOe(){const e=jn(r=>r.loading),t=Jt(r=>r.loaded),n=vn(r=>r.loaded);return{loading:e,settingsLoaded:t,entLoaded:n}}const v$="app_session_started_at_ms",vOe=7200*1e3;function xOe(){if(typeof window>"u")return null;try{return window.sessionStorage}catch{return null}}function wOe(){const e=xOe();if(!e)return Date.now();const t=e.getItem(v$),n=t?Number(t):NaN;if(!Number.isFinite(n)||n<=0){const r=Date.now();try{e.setItem(v$,String(r))}catch{}return r}return n}function _Oe(e=Date.now()){const t=wOe();return Math.max(0,e-t)}function SOe(e,t=Date.now()){return _Oe(t)>=e}async function kOe(e,t){const{data:n,error:r}=await Le.from("user_settings_kv").select("value").eq("user_id",e).eq("setting_key",t).maybeSingle();if(r)throw r;return n?.value??null}async function EOe(e,t,n){const{error:r}=await Le.from("user_settings_kv").upsert({user_id:e,setting_key:t,value:n},{onConflict:"user_id,setting_key"});if(r)throw r}const jOe=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function rf(e){if(e===null)return"null";if(e===void 0)return"undefined";const t=typeof e;return t==="string"?JSON.stringify(e):t==="number"||t==="boolean"?String(e):Array.isArray(e)?`[${e.map(rf).join(",")}]`:jOe(e)?`{${Object.keys(e).sort().map(i=>`${JSON.stringify(i)}:${rf(e[i])}`).join(",")}}`:e instanceof Date?`{"$date":${JSON.stringify(e.toISOString())}}`:JSON.stringify(String(e))}function TOe(e,t){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=null,e(...r)},t)}}function AOe(e,t){const n=t.debounceMs??400;let r=!1,i=null,a=rf(t.select(t.store.getState()));const o=TOe(async m=>{try{await EOe(e,t.dbKey,m),a=rf(m)}catch(b){console.error(`[settings] save failed key=${t.dbKey}`,b)}},n),l=m=>{r=!0;try{t.apply(m),a=rf(m)}finally{r=!1}},u=m=>{t.validate&&!t.validate(m)||l(m)},d=async()=>{const m=await kOe(e,t.dbKey);m!==null&&u(m)};i=t.store.subscribe(m=>{if(r)return;const b=t.select(m);rf(b)!==a&&o(b)});const h=()=>{i&&i(),i=null};return{dbKey:t.dbKey,loadFromDb:d,applyRemote:u,stop:h}}function NOe(e){if(typeof e!="object"||e===null)return!1;const t=e;return["twelveUnseong","twelveShinsal","shinsal","nabeum"].every(r=>typeof t[r]=="boolean")}function nE(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function OOe(e){S.useEffect(()=>{if(!e)return;const t=[];t.push(AOe(e,{dbKey:"promptCopy.sections",store:Jv,select:o=>o.sections,apply:o=>Jv.setState({sections:o}),validate:NOe,debounceMs:250})),Promise.all(t.map(o=>o.loadFromDb())).catch(o=>{console.error("[settings] initial load failed",o)});const n=[{table:"user_settings_kv",filterByUserId:!0}],r=new Map,i=(o,l,u)=>{const d=r.get(o);d&&window.clearTimeout(d);const h=window.setTimeout(()=>{r.delete(o),u()},l);r.set(o,h)},a=Le.channel(`app-sync:${e}`);for(const o of n)a.on("postgres_changes",{event:"*",schema:"public",table:o.table,...o.filterByUserId?{filter:`user_id=eq.${e}`}:{}},l=>{if(SOe(vOe)){window.location.reload();return}if(o.table==="user_settings_kv"){if(!nE(l))return;const u=l.new,d=l.old,h=w=>nE(w)&&typeof w.setting_key=="string"?w.setting_key:null,m=w=>nE(w)?w.value:null,b=h(u)??h(d);if(!b)return;const y=t.find(w=>w.dbKey===b);if(!y)return;const k=typeof l.eventType=="string"?l.eventType:"";if(k==="INSERT"||k==="UPDATE"){y.applyRemote(m(u));return}y.loadFromDb();return}if(o.onChange){const u=typeof o.debounceMs=="number"?o.debounceMs:0;u>0?i(o.table,u,()=>o.onChange?.(l)):o.onChange(l)}});return a.subscribe(),()=>{for(const o of t)o.stop();for(const[,o]of r)window.clearTimeout(o);r.clear(),Le.removeChannel(a)}},[e])}function COe({setUserId:e,setIsLoggedIn:t,setAuthChecked:n}){S.useEffect(()=>{const r=Le;let i=!1,a=null;const o=h=>{const m=h?.user?.id??null;t(!!h),e(m)},l=h=>{o(h),h&&n7(Date.now()),i||(i=!0,n(!0))};(async()=>{const{data:h,error:m}=await r.auth.getSession();if(m){l(null);return}if(h.session){l(h.session);return}a=window.setTimeout(()=>l(null),1200)})();const{data:{subscription:d}}=r.auth.onAuthStateChange((h,m)=>{a!==null&&(window.clearTimeout(a),a=null),l(m),m||jn.getState().stopRealtime()});return()=>{a!==null&&window.clearTimeout(a),d.unsubscribe()}},[n,t,e])}function MOe(e){COe({setUserId:e.setUserId,setIsLoggedIn:e.setIsLoggedIn,setAuthChecked:e.setAuthChecked}),OOe(e.userId)}function DOe(e){const[t,n]=S.useState(()=>e.length>0?e[0].id:""),[r,i]=S.useState(!1),[a,o]=S.useState(!1),[l,u]=S.useState(null),[d,h]=S.useState(!0),[m,b]=S.useState(!1),[y,k]=S.useState(!1);return{currentId:t,setCurrentId:n,wizardOpen:r,setWizardOpen:i,showSidebar:a,setShowSidebar:o,editing:l,setEditing:u,showToday:d,setShowToday:h,showCouple:m,setShowCouple:b,openCustom:y,setOpenCustom:k}}function POe(e){const t=Kr(i=>i.date),n=Kr(i=>i.rule),r=hc(e);return S.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const i=Mx(r,t),a=i>=0?r[i]?.gz??null:null,o=ut(t),l=Ot(t),u=dt(t,n);return{dae:a,se:o,wol:l,il:u}},[e,r,t,n])}const ROe=e=>typeof e=="string"&&e.length>=2,LOe=e=>Array.isArray(e)&&e.length===4&&e.every(ROe);function IOe({list:e,currentId:t,settings:n,emptyMs:r}){const i=S.useMemo(()=>e.find(b=>b.id===t)??e[0],[e,t]),a=e.length>0&&!!i&&typeof i.birthDay=="string",o=a?i:r,l=S.useMemo(()=>xN(o),[o]),u=POe(o),d=vn(b=>b.canAddMyeongsik(e.length).ok),h=n.sinsalBase===""?"day":"year",m=n.sinsalBase===""?"day":"year";return{current:i,hasCurrent:a,msForHooks:o,natal:l,chain:u,isValidPillars:LOe,canAdd:d,voidBasis:h,samjaeBasis:m}}function $Oe({canAdd:e,hasCurrent:t,current:n,isLoggedIn:r,setWizardOpen:i,setOpenCustom:a,setShowSidebar:o,setShowToday:l,setShowCouple:u,setCurrentId:d,setEditing:h}){const{settings:m,saveToServer:b,loaded:y}=Jt();S.useEffect(()=>{!r||!y||b()},[r,y,m,b]);const k=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}i(!0)},[e,i]),w=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}a(!0)},[e,a]),_=S.useCallback(M=>{d(M.id),o(!1),l(!1),u(!1);const P=new Date;P.setHours(12,0,0,0),Kr.getState().setDate(P),t&&n?.id===M.id&&(l(!1),u(!1),o(!1))},[n,t,d,o,l,u]),T=S.useCallback(M=>{h(M),d(M.id),o(!1),l(!1),u(!1)},[h,d,o,l,u]),N=S.useCallback(()=>{const M=jn.getState().list[0]?.id??"";d(M),l(!0),u(!1)},[d,l,u]),j=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1),requestAnimationFrame(()=>i(!1))},[d,l,u,o,i]),C=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1)},[d,l,u,o]);return{openAdd:k,openCustomModal:w,handleSidebarView:_,handleSidebarEdit:T,handleSidebarDeleteView:N,handleWizardSave:j,handleCustomSave:C}}function BOe(){return g.jsx("div",{className:"pt-16 pb-24",children:g.jsxs("div",{className:"max-w-[640px] mx-auto px-4",children:[g.jsx("div",{className:"flex items-center justify-between gap-3 mb-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(R4,{className:"w-5 h-5 text-neutral-700 dark:text-neutral-200"}),g.jsx("h2",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"  "})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.   ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.  ",g.jsx("b",{children:""})," ",g.jsx("b",{children:""}),"   .   ,    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:"*"}),"   ",g.jsx("b",{children:" "})," ",g.jsx("b",{children:"8*"}),"  ",g.jsx("b",{children:"    "}),"      ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:" "}),"     ."]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.    . ",g.jsx("b",{children:"*"}),", ",g.jsx("b",{children:"8*"}),"    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:"  "}),",   / 3  ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:""})," (  8   -  )   ."]}),g.jsxs("p",{className:"mt-2",children:["(    ,    ",g.jsx("b",{children:" "})," .)"]}),g.jsx("p",{className:"mt-2",children:" .    .    ,   ( )     ."})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.     .         ,       ."}),g.jsx("p",{className:"mt-2",children:"    ,      ."}),g.jsxs("p",{className:"mt-2",children:["(   ",g.jsx("b",{children:" "}),"  ^^)",g.jsx("br",{}),g.jsx("a",{href:"https://5seasons.co.kr/",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"   !"})})]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.  ''   ?"}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.      ."}),g.jsx("p",{className:"mt-2",children:"          ^^"}),g.jsx("p",{className:"mt-2",children:g.jsx("a",{href:"https://yavares.tistory.com/345",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"  "})})})]})]})]})]})})}const gG="https://t1.daumcdn.net/kas/static/ba.min.js",zOe="//t1.daumcdn.net/kas/static/ba.min.js";let Tm=null,Am=null;function bG(){return typeof window<"u"&&typeof document<"u"}function x$(e){return typeof e=="object"&&e!==null}function yG(){if(!bG())return!1;const e=window;if(!x$(e))return!1;const t=e.adfit;return x$(t)?typeof t.destroy=="function":!1}function vG(){return Array.from(document.querySelectorAll(`script[src="${gG}"], script[src="${zOe}"]`))}function xG(e){return e.getAttribute("data-adfit-scan")==="1"}function UOe(){const t=vG().filter(n=>!xG(n));if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode?.removeChild(r)}}function w$(){return document.body??document.head??document.documentElement}function rE(e,t){return new Promise((n,r)=>{let i=!1;const a=()=>{e.removeEventListener("load",u),e.removeEventListener("error",d)},o=()=>{i||(i=!0,a(),n())},l=()=>{i||(i=!0,a(),r(new Error("AdFit script load failed")))},u=()=>o(),d=()=>l();e.addEventListener("load",u),e.addEventListener("error",d),window.setTimeout(()=>{yG(),o()},t)})}function _$(e){const t=document.createElement("script");return t.async=!0,t.type="text/javascript",t.charset="utf-8",t.src=gG,e?t.setAttribute("data-adfit-scan","1"):t.setAttribute("data-adfit-managed","1"),t}function hj(e){return bG()?(e?.mode??"boot")==="boot"?Tm||(Tm=(async()=>{if(UOe(),yG())return{inserted:!1};const r=vG().filter(a=>!xG(a))[0];if(r)return await rE(r,2500),{inserted:!1};const i=_$(!1);return w$().appendChild(i),await rE(i,4e3),{inserted:!0}})().finally(()=>{Tm=null}),Tm):Am||(Am=(async()=>{const n=_$(!0);w$().appendChild(n);try{return await rE(n,4e3),{inserted:!0}}finally{n.parentNode?.removeChild(n)}})().finally(()=>{Am=null}),Am):Promise.resolve({inserted:!1})}function wG({enabled:e}){return S.useEffect(()=>{e&&hj({mode:"boot"})},[e]),null}function S$(e){return typeof e=="object"&&e!==null}function FOe(e){const t=window;if(!S$(t))return;const n=t.adfit;if(!S$(n))return;const r=n.destroy;if(typeof r=="function")try{r.call(n,e)}catch{}}function ku({adUnit:e,width:t,height:n,enabled:r=!0,isVisible:i=!0,className:a,wrapperStyle:o,reserveSpace:l=!0}){const u=S.useRef(!1),d=S.useRef(!1),h=S.useMemo(()=>({...l?{width:"100%",minHeight:n,display:"flex",justifyContent:"center",alignItems:"flex-start"}:{width:"100%"},...o}),[n,l,o]);return S.useEffect(()=>{if(!r||u.current)return;u.current=!0;let m=!1;return(async()=>{try{if(await hj({mode:"boot"}),m)return}catch{}})(),()=>{m=!0}},[r]),S.useEffect(()=>{if(!r||!i||d.current)return;d.current=!0;let m=!1;return(async()=>{try{if(await hj({mode:"scan"}),m)return}catch{}})(),()=>{m=!0}},[r,i]),S.useEffect(()=>()=>{FOe(e),u.current=!1,d.current=!1},[e]),r?g.jsx("div",{className:a,style:h,children:g.jsx("div",{style:l?{width:t,height:n}:void 0,children:g.jsx("ins",{className:"kakao_ad_area",style:{display:"none"},"data-ad-unit":e,"data-ad-width":String(t),"data-ad-height":String(n)})})}):null}function _G({enabled:e,adUnit:t,width:n,height:r,showAfterScrollY:i=180,rightPx:a=16,topPx:o=120,breakpointClassName:l="hidden desk:block"}){const[u,d]=S.useState(!1),[h,m]=S.useState(!1);return S.useEffect(()=>{if(!e){d(!1),m(!1);return}m(!0);let b=0;const y=()=>{b||(b=window.requestAnimationFrame(()=>{b=0;const k=window.scrollY||0;d(k>=i)}))};return y(),window.addEventListener("scroll",y,{passive:!0}),()=>{b&&window.cancelAnimationFrame(b),window.removeEventListener("scroll",y)}},[e,i]),e?g.jsx("div",{className:l,style:{position:"fixed",right:a,top:o,zIndex:60,pointerEvents:"none",visibility:u?"visible":"hidden",opacity:u?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:u?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx(ku,{enabled:h,isVisible:u,adUnit:t,width:n,height:r,wrapperStyle:{display:"flex",justifyContent:"center"}})})})}):null}function SG(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o,l]=S.useState(!1),[u,d]=S.useState(!1);S.useEffect(()=>{document.title=" - //";const y=window.setTimeout(()=>t(!0),50),k=window.setTimeout(()=>r(!0),250),w=window.setTimeout(()=>a(!0),450);return()=>{window.clearTimeout(y),window.clearTimeout(k),window.clearTimeout(w)}},[]);const h=()=>u?!0:(_a.error(`   
  .`),!1),m=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await Le.auth.signInWithOAuth({provider:"google",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Google Login Error:",w),_a.error("   .");return}if(!k?.url){_a.error(" URL  .");return}window.location.assign(k.url)},b=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await Le.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Kakao Login Error:",w),_a.error("   .");return}if(!k?.url){_a.error(" URL  .");return}window.location.assign(k.url)};return g.jsxs("main",{className:`relative py-6 max-h-[70vh] overflow-auto bg-neutral-950 text-white transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("header",{className:`transform transition-all duration-500 mb-8 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} text-center max-w-[680px]`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:""}),g.jsxs("p",{className:"text-sm text-neutral-300 leading-relaxed",children:["      /       .",g.jsx("br",{}),"   /     "]})]}),g.jsxs("section",{className:`w-full max-w-sm mx-auto rounded-2xl bg-neutral-900 p-4 shadow-xl border border-neutral-800 transition-all duration-500 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,"aria-label":"",children:[g.jsx("h2",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-5 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"      "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:u,onChange:()=>d(!u),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>l(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("button",{type:"button",onClick:m,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
              ${u?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]}),g.jsxs("button",{type:"button",onClick:b,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all
              ${u?"bg-[#FEE500] text-black hover:brightness-95 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"/icons/KakaoTalk_logo.png",alt:"KakaoTalk",className:"h-5"}),g.jsx("span",{children:" "})]})]}),g.jsxs("div",{className:"mt-6 border-t border-neutral-800 pt-4 text-xs text-neutral-400 leading-relaxed",children:[g.jsx("p",{className:"font-semibold text-neutral-300 mb-2",children:"    "}),g.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[g.jsx("li",{children:" /  "}),g.jsx("li",{children:"    "}),g.jsx("li",{children:"/ (  )"})]}),g.jsx("p",{className:"mt-3 text-[11px] text-neutral-500",children:": unique950318@gmail.com   "})]})]}),g.jsx(oB,{position:"top-center",toastOptions:{duration:2e3}}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:y=>y.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-2",children:["   ,  (,  )",g.jsx("br",{}),"       ( ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"      ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"           "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition cursor-pointer",children:""})]})})]})}function HOe(e){switch(e){case"PERSIST_SAVE":return"    !";case"ADD_LIMIT":return"    !";case"HEADER":return"";default:return""}}function GOe(){const e=Ms(i=>i.open),t=Ms(i=>i.reason),n=Ms(i=>i.close),r=S.useMemo(()=>HOe(t),[t]);return S.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&n()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,n]),S.useEffect(()=>{const{data:i}=Le.auth.onAuthStateChange((a,o)=>{o?.user&&(vn.getState().loadFromServer(),Jt.getState().loadFromServer(),jn.getState().loadFromServer(),Ms.getState().close())});return()=>i.subscription.unsubscribe()},[]),e?g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center p-4",onClick:n,role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"w-full max-w-[520px] rounded-2xl bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-800 shadow-xl overflow-hidden",onClick:i=>i.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:r}),g.jsx("button",{type:"button",onClick:n,className:`w-8 h-8 rounded-full flex items-center justify-center
                       bg-neutral-100 hover:bg-neutral-200
                       dark:bg-neutral-800 dark:hover:bg-neutral-700
                       text-neutral-700 dark:text-neutral-200 cursor-pointer`,"aria-label":"",title:"",children:""})]}),g.jsx("div",{className:"p-4",children:g.jsx(SG,{})})]})}):null}function YOe(){const e=Ms(t=>t.openWith);return g.jsx("div",{className:"max-w-[640px] mx-auto px-3",children:g.jsxs("div",{className:`rounded-xl border border-amber-300/60 bg-amber-50 text-amber-950
                      dark:border-amber-500/30 dark:bg-amber-950/30 dark:text-amber-100
                      shadow-sm px-4 py-3 flex items-center justify-between gap-3`,children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-sm font-semibold truncate",children:"   "}),g.jsx("div",{className:"text-xs opacity-90 mt-0.5 leading-relaxed",children:" /   ."})]}),g.jsxs("button",{type:"button",onClick:()=>e("PERSIST_SAVE"),className:`shrink-0 inline-flex items-center gap-1.5
                     px-3 py-2 rounded-lg text-xs font-semibold
                     bg-amber-500 hover:bg-amber-600 text-white
                     border border-amber-600/30
                     cursor-pointer`,"aria-label":"",title:"",children:[g.jsx(L4,{size:16}),""]})]})})}const wN="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";let Nm=null;function _N(){return typeof window<"u"&&typeof document<"u"}function kG(){return _N()?Array.from(document.querySelectorAll('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')):[]}function EG(e,t){const n=`client=${encodeURIComponent(t)}`;return e.includes(n)||e.includes(`client=${t}`)}function k$(e){return kG().some(n=>{const r=n.getAttribute("src")??"";return r.includes(wN)&&EG(r,e)})}function iE(e){const t=kG().filter(n=>{const r=n.getAttribute("src")??"";return r.includes(wN)&&EG(r,e)});if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode&&r.parentNode.removeChild(r)}}function qOe(e){const t=document.createElement("script");return t.async=!0,t.src=`${wN}?client=${encodeURIComponent(e)}`,t.crossOrigin="anonymous",t}function KOe(e){return new Promise((t,n)=>{const r=()=>t(),i=()=>n(new Error("AdSense script failed to load"));e.addEventListener("load",r,{once:!0}),e.addEventListener("error",i,{once:!0})})}function WOe(e){return typeof e!="object"||e===null||!("push"in e)?!1:typeof e.push=="function"}async function E$(e){if(_N()){if(k$(e)){iE(e);return}if(Nm)return Nm;Nm=(async()=>{if(k$(e)){iE(e);return}const t=qOe(e);document.head.appendChild(t),await KOe(t),iE(e)})();try{await Nm}finally{Nm=null}}}function VOe(e={}){if(!_N())return;const t=window.adsbygoogle;if(Array.isArray(t)){t.push(e);return}if(WOe(t)){t.push(e);return}const n=[];n.push(e),window.adsbygoogle=n}function ZOe({enabled:e,isVisible:t,clientId:n,slotId:r,width:i,height:a,testMode:o=!1}){const l=S.useRef(!1),u=S.useRef(null);return S.useEffect(()=>{l.current=!1},[n,r,i,a]),S.useEffect(()=>{e&&E$(n).catch(()=>{})},[e,n]),S.useEffect(()=>{if(!e||!t||l.current)return;let d=!0;return(async()=>{try{if(await Promise.resolve(),!d||(await E$(n),!d))return;VOe({}),l.current=!0}catch{console.log()}})(),()=>{d=!1}},[e,t,n]),e?g.jsx("ins",{ref:u,className:"adsbygoogle",style:{display:"inline-block",width:i,height:a},"data-ad-client":n,"data-ad-slot":r,...o?{"data-adtest":"on"}:{}}):null}function jG({enabled:e,clientId:t,slotId:n,width:r,height:i,showAfterScrollY:a=180,side:o="left",sidePx:l=16,topPx:u=120,breakpointClassName:d="hidden desk:block"}){const[h,m]=S.useState(!1),[b,y]=S.useState(!1);return S.useEffect(()=>{if(!e){m(!1),y(!1);return}y(!0);let k=0;const w=()=>{k||(k=window.requestAnimationFrame(()=>{k=0;const _=window.scrollY||0;m(_>=a)}))};return w(),window.addEventListener("scroll",w,{passive:!0}),()=>{k&&window.cancelAnimationFrame(k),window.removeEventListener("scroll",w)}},[e,a]),e?g.jsx("div",{className:d,style:{position:"fixed",...o==="left"?{left:l}:{right:l},top:u,zIndex:60,pointerEvents:"none",visibility:h?"visible":"hidden",opacity:h?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:h?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx("div",{style:{display:"flex",justifyContent:"center"},children:g.jsx(ZOe,{enabled:b,isVisible:h,clientId:t,slotId:n,width:r,height:i})})})})}):null}const TG="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";function j$(e){return typeof e=="object"&&e!==null&&"push"in e&&typeof e.push=="function"}function XOe(){return document.querySelector(`script[src^="${TG}"]`)}async function T$(e){XOe()||await new Promise((n,r)=>{const i=document.createElement("script");i.async=!0,i.src=`${TG}?client=${encodeURIComponent(e)}`,i.crossOrigin="anonymous",i.onload=()=>n(),i.onerror=()=>r(new Error("Failed to load adsbygoogle.js")),document.head.appendChild(i)})}function JOe(){const e=window.adsbygoogle;if(j$(e)){e.push({});return}window.adsbygoogle||(window.adsbygoogle=[]);const t=window.adsbygoogle;j$(t)&&t.push({})}function QOe({enabled:e,clientId:t,slotId:n,heightPx:r=100,maxWidthPx:i=750,marginTopPx:a=0,fullWidthResponsive:o=!0,pushOnVisible:l=!0,testMode:u=!1,className:d,style:h}){const m=S.useRef(null),b=S.useRef(!1),y=S.useMemo(()=>`adsense_banner:${t}:${n}`,[t,n]),[k,w]=S.useState(!l);return S.useEffect(()=>{b.current=!1},[t,n]),S.useEffect(()=>{e&&T$(t).catch(()=>{})},[e,t]),S.useEffect(()=>{if(!e||!l)return;const _=m.current;if(!_)return;const T=new IntersectionObserver(N=>{const j=N[0];j&&j.isIntersecting&&w(!0)},{root:null,threshold:.05});return T.observe(_),()=>T.disconnect()},[e,l]),S.useEffect(()=>{if(!e||!k||b.current)return;let _=!0;return(async()=>{try{if(await T$(t),!_||(await Promise.resolve(),!_))return;JOe(),b.current=!0}catch{}})(),()=>{_=!1}},[e,k,t]),e?g.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:a,...h},className:d,children:g.jsx("ins",{ref:m,className:"adsbygoogle",style:{display:"block",width:"100%",height:`${r}px`,maxWidth:`${i}px`},"data-ad-client":t,"data-ad-slot":n,"data-full-width-responsive":o?"true":"false",...u?{"data-adtest":"on"}:{}},y)}):null}const eCe="DAN-GW4jrUdfiXklZ12U",tCe="DAN-CeRuC0yKzSAs5Gju",nCe="DAN-G16gewnPhZou1D9y",rCe="DAN-rdKe9ZODmrZR4hho",iCe="DAN-INfSKh1pW2cEtWNu",aCe={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function Zb(){const e=Wr(),t=dc(),n=bOe();MOe(n);const r=yOe(),i=m=>{if(typeof window>"u")return null;try{return window.sessionStorage.getItem(m)}catch{return null}},a=(m,b)=>{if(!(typeof window>"u"))try{window.sessionStorage.setItem(m,b)}catch{}},[o,l]=S.useState(!1),[u,d]=S.useState(()=>typeof window>"u"?!1:i("app_loading_shown_v1")==="1"),h=!n.authChecked||!r.entLoaded||!r.settingsLoaded;return S.useEffect(()=>{h||l(!0)},[h]),S.useEffect(()=>{n.authChecked&&(n.isLoggedIn||e.pathname==="/"||e.pathname==="/result"||t("/",{replace:!0}))},[n.authChecked,n.isLoggedIn,e.pathname,t]),S.useEffect(()=>{!u&&!o&&h&&(d(!0),a("app_loading_shown_v1","1"))},[u,o,h]),n.authChecked&&n.isLoggedIn&&n.adminMode?g.jsx(FH,{}):!o&&h&&!u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500 animate-pulse",children:n.authChecked?"  ...":"  ..."})}):g.jsx(oCe,{isLoggedIn:n.isLoggedIn})}function oCe({isLoggedIn:e}){const t=Wr(),n=dc(),{list:r}=jn(),i=Jt(I=>I.settings),a=DOe(r),o=IOe({list:r,currentId:a.currentId,settings:i,emptyMs:aCe}),l=$Oe({canAdd:o.canAdd,hasCurrent:o.hasCurrent,current:o.current,isLoggedIn:e,setWizardOpen:a.setWizardOpen,setOpenCustom:a.setOpenCustom,setShowSidebar:a.setShowSidebar,setShowToday:a.setShowToday,setShowCouple:a.setShowCouple,setCurrentId:a.setCurrentId,setEditing:a.setEditing}),[u,d]=S.useState(!1),[h,m]=S.useState(0);S.useEffect(()=>{a.editing&&d(!1)},[a.editing]),S.useEffect(()=>{const I=t.pathname;if(I==="/faq"){d(!0),a.setShowCouple(!1),a.setShowToday(!1);return}if(I==="/couple"){d(!1),a.setShowCouple(!0),a.setShowToday(!1);return}if(I==="/result"){d(!1),a.setShowCouple(!1),a.setShowToday(!1);return}d(!1),a.setShowCouple(!1),a.setShowToday(!0)},[a,t.pathname,a.setShowCouple,a.setShowToday]);const b=vn(I=>I.shouldShowAdsNow()),y=o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,k=a.showToday||!o.hasCurrent&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,w=!e&&o.hasCurrent&&y,_=!e&&!y,[T,N]=S.useState(!1),j=(...I)=>{d(!1),a.setShowToday(!1),a.setShowCouple(!1),n("/result",{replace:!1}),l.handleSidebarView(...I)},C=()=>{a.setOpenCustom(!1),m(I=>I+1)},M=I=>{d(!1),l.handleCustomSave(I)},P=I=>{d(!1),l.handleWizardSave(I),n("/result",{replace:!1})};return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(wG,{enabled:b}),b&&y&&g.jsx(jG,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(_G,{enabled:b,adUnit:iCe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsx(vhe,{isLoggedIn:e,onOpenSidebar:()=>a.setShowSidebar(!0),onAddNew:l.openAdd,onOpenCustom:l.openCustomModal}),g.jsx(GOe,{}),T&&g.jsxs("div",{className:"fixed inset-0 z-[210] bg-black/70 flex items-center justify-center",children:[g.jsx("div",{className:"w-full max-w-[420px] max-h-[90dvh] overflow-auto rounded-2xl",children:g.jsx(SG,{})}),g.jsx("button",{className:"fixed top-4 right-4 text-white text-2xl",onClick:()=>N(!1),children:""})]}),g.jsx(RAe,{open:a.openCustom,onClose:C,onSave:M},h),g.jsx(oB,{position:"top-center"}),g.jsx(sme,{open:a.showSidebar,onClose:()=>a.setShowSidebar(!1),onView:j,onAddNew:l.openAdd,onEdit:l.handleSidebarEdit,onDeleteView:l.handleSidebarDeleteView,isLoggedIn:e}),_&&g.jsx("div",{className:"absolute w-full left-0 mt-14 desk:mt-16 text-xs desk:text-base text-amber-500 dark:text-amber-400 text-center",children:" .    ."}),u&&g.jsx(BOe,{}),k&&g.jsx(fJ,{}),a.wizardOpen&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(cae,{onSave:P,onClose:()=>a.setWizardOpen(!1)})})})]}),o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&g.jsxs("div",{className:"pt-16",children:[w&&g.jsx("div",{children:g.jsx(YOe,{})}),g.jsx("div",{className:"pb-4",children:g.jsx(Tle,{data:o.current,hourTable:o.current?.mingSikType??"/"})}),g.jsx(uAe,{ms:o.current}),g.jsx("div",{children:g.jsx(yhe,{data:o.current})}),b&&y&&i.showPromptBox&&g.jsx("div",{className:"max-w-[760px] mx-auto px-3 mt-6 mb-2",children:g.jsx(QOe,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"3868873416",heightPx:100,maxWidthPx:750,marginTopPx:10,fullWidthResponsive:!0,testMode:!1})}),i.showPromptBox&&g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(gOe,{ms:o.current,natal:o.isValidPillars(o.natal)?o.natal:[],chain:o.chain,basis:{voidBasis:o.voidBasis,samjaeBasis:o.samjaeBasis},includeTenGod:!0,lunarPillars:[]})}),b&&y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 pb-6",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(ku,{enabled:!0,adUnit:rCe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(ku,{enabled:!0,adUnit:nCe,width:320,height:50})})]})]}),a.showCouple&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(lAe,{people:r})}),b&&!y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 mt-1 mb-2",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(ku,{enabled:!0,adUnit:tCe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(ku,{enabled:!0,adUnit:eCe,width:320,height:50})})]}),a.editing&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"overflow-auto bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(_me,{item:a.editing,onClose:()=>a.setEditing(null)})})}),g.jsx(Ahe,{}),g.jsx(cAe,{})]})}function sCe(){const e=Wr(),[t,n]=S.useState(null),[r,i]=S.useState(null);return S.useEffect(()=>{if(e.pathname!=="/impersonate")return;const a=new URLSearchParams(e.search);n(a.get("userId")),i(a.get("myeongsikId"))},[e.pathname,e.search]),g.jsxs("div",{className:"p-4 text-white",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"Impersonate"}),g.jsxs("div",{className:"mt-2",children:["userId: ",t??"(none)"]}),g.jsxs("div",{className:"mt-1",children:["myeongsikId: ",r??"(none)"]})]})}function lCe(){const e=Wr(),t=dc(),n=S.useRef(!1),[r,i]=S.useState("  ...");return S.useEffect(()=>{(async()=>{try{console.log("[auth-callback] search =",e.search),console.log("[auth-callback] hash =",e.hash);const o=new URLSearchParams(e.search),l=e.hash.startsWith("#")?e.hash.slice(1):e.hash,u=l.indexOf("?"),d=new URLSearchParams(u>=0?l.slice(u+1):l),h=_=>o.get(_)??d.get(_),m=h("error"),b=h("error_description");if(m){i(` : ${decodeURIComponent(b??m)}`);return}const y=h("code");if(!y){const _=h("access_token"),T=h("refresh_token");if(!_||!T){i(" code . (redirectTo/PKCE  )");return}const{error:N}=await Le.auth.setSession({access_token:_,refresh_token:T});if(N){i(`  : ${N.message}`);return}t("/",{replace:!0});return}if(n.current)return;n.current=!0;const{data:{session:k}}=await Le.auth.getSession();if(k){t("/",{replace:!0});return}const{error:w}=await Le.auth.exchangeCodeForSession(y);if(w){const{data:{session:_}}=await Le.auth.getSession();if(_){t("/",{replace:!0});return}i(`  : ${w.message}`);return}t("/",{replace:!0})}catch(o){i(o instanceof Error?o.message:"   ")}})()},[e.search,t,e.hash]),g.jsx("main",{className:"min-h-screen flex items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:r})})}function cCe({yinYang:e,changing:t,onClick:n,showChanging:r=!0}){return g.jsxs("button",{type:"button",onClick:n,className:["w-full select-none","rounded-xl px-3 py-2","border border-neutral-200 dark:border-neutral-800","bg-white hover:bg-neutral-50 dark:bg-neutral-900 dark:hover:bg-neutral-800","flex items-center gap-3",n?"cursor-pointer":"cursor-default"].join(" "),title:n?"  (6789)":void 0,children:[g.jsx("div",{className:"flex-1",children:e===1?g.jsx("div",{className:"h-3 rounded bg-neutral-900 dark:bg-neutral-100"}):g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"}),g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"})]})}),r&&g.jsx("div",{className:"w-8 text-right text-sm font-medium text-neutral-700 dark:text-neutral-300",children:t?"":""})]})}function uCe(e){return e===6||e===9}function _w(e){return e===7||e===9?1:0}function AG(e){return e===6?1:e===9?0:_w(e)}function dCe(e){return e===6?7:e===7?8:e===8?9:6}function NG(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t>>>0}function OG(e){let t=e>>>0;return()=>{t+=1831565813;let n=t;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}}function CG(){return new Date().toISOString()}function MG(){const e=Date.now().toString(36),t=Math.floor(Math.random()*1e9).toString(36);return`ich_${e}_${t}`}function DG(e){const t=[];for(let n=0;n<e.length;n+=1)uCe(e[n].value)&&t.push(n+1);return t}function mj(e){const t=()=>e()<.5?2:3,n=t(),r=t(),i=t(),a=n+r+i;return{value:a===6?6:a===7?7:a===8?8:9,source:"coin",coins:[n,r,i]}}function fCe(e){return e?[e.myeongSikId?`id=${e.myeongSikId}`:"",e.pillarsText?`pillars=${e.pillarsText}`:"",e.birthISO?`birth=${e.birthISO}`:"",e.tz?`tz=${e.tz}`:"",e.luck?.daeun?`daeun=${e.luck.daeun}`:"",e.luck?.seun?`seun=${e.luck.seun}`:"",e.luck?.wolun?`wolun=${e.luck.wolun}`:"",e.luck?.ilun?`ilun=${e.luck.ilun}`:""].filter(Boolean).join("|"):""}const SN=["","","","","","","","","",""],kN=["","","","","","","","","","","",""];function ac(e,t){const n=e%t;return n<0?n+t:n}function EN(e){const t=e-1984,n=SN[ac(t,10)],r=kN[ac(t,12)];return`${n}${r}`}function PG(e,t){if(t<1||t>12)throw new Error(`month must be 1..12, got ${t}`);const n=ac(e-1984,10),r=n===0||n===5?2:n===1||n===6?4:n===2||n===7?6:n===3||n===8?8:0,i=t===1?1:t===12?0:t,a=ac(i-2,12),o=ac(r+a,10),l=SN[o],u=kN[i];return`${l}${u}`}function hCe(e){const t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=Date.UTC(1984,0,31),a=Date.UTC(t,n,r),o=Math.floor((a-i)/864e5),l=ac(o,60),u=SN[ac(l,10)],d=kN[ac(l,12)];return`${u}${d}`}function to(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function Sa(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return null;const n=Number(t[1]),r=Number(t[2])-1,i=Number(t[3]);if(![n,r,i].every(o=>Number.isFinite(o)))return null;const a=new Date(n,r,i,9,0,0,0);return a.getFullYear()!==n||a.getMonth()!==r||a.getDate()!==i?null:a}function RG(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function $u(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),9,0,0,0)}function jN(e,t){return e.getTime()<=t.getTime()?{start:e,end:t}:{start:t,end:e}}function A$(e,t){return e*100+t}function mCe(e,t){const n=[];let r=e.getFullYear(),i=e.getMonth()+1;const a=A$(t.getFullYear(),t.getMonth()+1);for(;A$(r,i)<=a;)n.push({y:r,m1:i}),i+=1,i===13&&(i=1,r+=1);return n}function pCe(e,t=10){const n=Sa(e.startYMD)??$u(),r=Sa(e.endYMD)??$u(),{start:i,end:a}=jN(n,r),o=i.getFullYear(),l=a.getFullYear(),u=[];for(let d=o;d<=l&&!(u.length>=t);d+=1){const h=new Date(d,5,15,9,0,0,0);u.push({year:d,refDateYMD:to(h),seun:EN(d)})}return u}function gCe(e,t=12,n=!1){const r=Sa(e.startYMD)??$u(),i=Sa(e.endYMD)??$u(),{start:a,end:o}=jN(r,i),l=mCe(a,o),u=[];for(const d of l){if(u.length>=t)break;if(n&&d.m1===1)continue;const h=new Date(d.y,d.m1-1,15,9,0,0,0),m=new Date(d.y,d.m1-1,15,12,0,0,0),b=ut(m)||EN(d.y),y=Ot(m)||PG(d.y,d.m1);u.push({year:d.y,month:d.m1,refDateYMD:to(h),seun:b,wolun:y})}return u}function bCe(e,t=7){const n=Sa(e.startYMD)??$u(),r=Sa(e.endYMD)??$u(),{start:i,end:a}=jN(n,r),o=[];let l=new Date(i);for(;l.getTime()<=a.getTime()&&!(o.length>=t);){const u=l.getFullYear(),d=l.getMonth()+1,h=new Date(u,d-1,l.getDate(),12,0,0,0),m=ut(h)||EN(u),b=Ot(h)||PG(u,d);o.push({dateYMD:to(l),seun:m,wolun:b,ilun:hCe(l)}),l=RG(l,1)}return o}function LG(e,t){const n=Sa(t.startYMD)??$u();if(e==="seun")return new Date(n.getFullYear(),5,15,9,0,0,0);if(e==="wolun"){const r=n.getFullYear(),i=n.getMonth()+1;return new Date(r,i-1,15,9,0,0,0)}return new Date(n.getFullYear(),n.getMonth(),n.getDate(),9,0,0,0)}function aE(e,t){const n=LG(e,t),r=to(n);return e==="seun"?{tab:e,baseDateYMD:r,seun:pCe(t,10),wolun:[],ilun:[]}:e==="wolun"?{tab:e,baseDateYMD:r,seun:[],wolun:gCe(t,12,!1),ilun:[]}:{tab:e,baseDateYMD:r,seun:[],wolun:[],ilun:bCe(t,7)}}function IG(e){return e===7||e===9?1:0}const La={:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"111",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"110",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"101",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"100",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"011",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"010",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"001",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"000",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]}},yCe=[{n:1,ko:"",nameHanja:"",upper:"",lower:""},{n:2,ko:"",nameHanja:"",upper:"",lower:""},{n:3,ko:"",nameHanja:"",upper:"",lower:""},{n:4,ko:"",nameHanja:"",upper:"",lower:""},{n:5,ko:"",nameHanja:"",upper:"",lower:""},{n:6,ko:"",nameHanja:"",upper:"",lower:""},{n:7,ko:"",nameHanja:"",upper:"",lower:""},{n:8,ko:"",nameHanja:"",upper:"",lower:""},{n:9,ko:"",nameHanja:"",upper:"",lower:""},{n:10,ko:"",nameHanja:"",upper:"",lower:""},{n:11,ko:"",nameHanja:"",upper:"",lower:""},{n:12,ko:"",nameHanja:"",upper:"",lower:""},{n:13,ko:"",nameHanja:"",upper:"",lower:""},{n:14,ko:"",nameHanja:"",upper:"",lower:""},{n:15,ko:"",nameHanja:"",upper:"",lower:""},{n:16,ko:"",nameHanja:"",upper:"",lower:""},{n:17,ko:"",nameHanja:"",upper:"",lower:""},{n:18,ko:"",nameHanja:"",upper:"",lower:""},{n:19,ko:"",nameHanja:"",upper:"",lower:""},{n:20,ko:"",nameHanja:"",upper:"",lower:""},{n:21,ko:"",nameHanja:"",upper:"",lower:""},{n:22,ko:"",nameHanja:"",upper:"",lower:""},{n:23,ko:"",nameHanja:"",upper:"",lower:""},{n:24,ko:"",nameHanja:"",upper:"",lower:""},{n:25,ko:"",nameHanja:"",upper:"",lower:""},{n:26,ko:"",nameHanja:"",upper:"",lower:""},{n:27,ko:"",nameHanja:"",upper:"",lower:""},{n:28,ko:"",nameHanja:"",upper:"",lower:""},{n:29,ko:"",nameHanja:"",upper:"",lower:""},{n:30,ko:"",nameHanja:"",upper:"",lower:""},{n:31,ko:"",nameHanja:"",upper:"",lower:""},{n:32,ko:"",nameHanja:"",upper:"",lower:""},{n:33,ko:"",nameHanja:"",upper:"",lower:""},{n:34,ko:"",nameHanja:"",upper:"",lower:""},{n:35,ko:"",nameHanja:"",upper:"",lower:""},{n:36,ko:"",nameHanja:"",upper:"",lower:""},{n:37,ko:"",nameHanja:"",upper:"",lower:""},{n:38,ko:"",nameHanja:"",upper:"",lower:""},{n:39,ko:"",nameHanja:"",upper:"",lower:""},{n:40,ko:"",nameHanja:"",upper:"",lower:""},{n:41,ko:"",nameHanja:"",upper:"",lower:""},{n:42,ko:"",nameHanja:"",upper:"",lower:""},{n:43,ko:"",nameHanja:"",upper:"",lower:""},{n:44,ko:"",nameHanja:"",upper:"",lower:""},{n:45,ko:"",nameHanja:"",upper:"",lower:""},{n:46,ko:"",nameHanja:"",upper:"",lower:""},{n:47,ko:"",nameHanja:"",upper:"",lower:""},{n:48,ko:"",nameHanja:"",upper:"",lower:""},{n:49,ko:"",nameHanja:"",upper:"",lower:""},{n:50,ko:"",nameHanja:"",upper:"",lower:""},{n:51,ko:"",nameHanja:"",upper:"",lower:""},{n:52,ko:"",nameHanja:"",upper:"",lower:""},{n:53,ko:"",nameHanja:"",upper:"",lower:""},{n:54,ko:"",nameHanja:"",upper:"",lower:""},{n:55,ko:"",nameHanja:"",upper:"",lower:""},{n:56,ko:"",nameHanja:"",upper:"",lower:""},{n:57,ko:"",nameHanja:"",upper:"",lower:""},{n:58,ko:"",nameHanja:"",upper:"",lower:""},{n:59,ko:"",nameHanja:"",upper:"",lower:""},{n:60,ko:"",nameHanja:"",upper:"",lower:""},{n:61,ko:"",nameHanja:"",upper:"",lower:""},{n:62,ko:"",nameHanja:"",upper:"",lower:""},{n:63,ko:"",nameHanja:"",upper:"",lower:""},{n:64,ko:"",nameHanja:"",upper:"",lower:""}];function ax(e){const t=Object.keys(La);for(const n of t)if(La[n].bitsBottomUp===e)return n;return null}function vCe(e,t){return`${La[t].bitsBottomUp}${La[e].bitsBottomUp}`}const xCe=(()=>{const e={};for(const t of yCe){const n=La[t.upper],r=La[t.lower],i=vCe(t.upper,t.lower);e[i]={number:t.n,titleKo:t.ko,nameHanja:t.nameHanja,titleHanja:`${n.symbolHanja}${r.symbolHanja}${t.nameHanja}`,upperKo:n.ko,lowerKo:r.ko,upperHanja:n.hanja,lowerHanja:r.hanja,upperSymbolHanja:n.symbolHanja,lowerSymbolHanja:r.symbolHanja,bitsBottomUp:i}}return e})();function TN(e){const t=e.join(""),n=xCe[t];if(n)return n;const r=t.slice(0,3),i=t.slice(3,6),a=ax(r),o=ax(i),l=a?La[a]:null,u=o?La[o]:null;return{number:void 0,titleKo:"",nameHanja:"",titleHanja:u&&l?`${u.symbolHanja}${l.symbolHanja}`:"",upperKo:u?.ko,lowerKo:l?.ko,upperHanja:u?.hanja,lowerHanja:l?.hanja,upperSymbolHanja:u?.symbolHanja,lowerSymbolHanja:l?.symbolHanja,bitsBottomUp:t}}function pj(e){const t=e.map(n=>IG(n.value));return TN(t)}const N$={:[1,44,33,12,20,23,35,14],:[29,60,3,63,49,55,36,7],:[52,22,26,41,38,10,61,53],:[51,16,40,32,46,48,28,17],:[57,9,37,42,25,21,27,18],:[30,56,50,64,4,59,6,13],:[2,24,19,11,34,43,5,8],:[58,47,45,31,39,15,62,54]};function wCe(e){return e===0?"pure":e===1?"1":e===2?"2":e===3?"3":e===4?"4":e===5?"5":e===6?"youhun":"guihun"}function _Ce(e){return e==="pure"?6:e==="1"?1:e==="2"?2:e==="3"?3:e==="4"?4:e==="5"?5:e==="youhun"?4:3}function SCe(e){return(e+2)%6+1}function kCe(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""||e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":null}function O$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function C$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function ECe(e,t){return t===e?"":O$(t,e)?"":O$(e,t)?"":C$(t,e)?"":C$(e,t)?"":""}function jCe(e){const t=Object.keys(N$);for(const n of t){const r=N$[n].indexOf(e);if(r>=0)return{palace:n,stage:wCe(r)}}return null}function TCe(e){const t=e.join(""),n=t.slice(0,3),r=t.slice(3,6),i=ax(n),a=ax(r);if(!i||!a)return[];const o=La[i],u=La[a].naJiaUpperTopDown,d=o.naJiaLowerTopDown;return[...u,...d]}function gj(e){const t=e.map(k=>IG(k.value)),n=TN(t),r=typeof n.number=="number"?n.number:null,i=TCe(t),a=r?jCe(r):null,o=a?.palace??null,l=o?La[o].element:null,u=a?.stage??"pure",d=_Ce(u),h=SCe(d),m=7-d,b=7-h,y=[];if(i.length===6&&l)for(const k of i){const w=kCe(k);if(!w){y.push("");continue}y.push(ECe(l,w))}return{leftTopDown:y.length?y:[],rightTopDown:i.length?i:[],markers:[{text:"",atLineTopDown:m},{text:"",atLineTopDown:b}],palace:o?{key:o,element:La[o].element,stage:u}:void 0}}function oE(e){const t=OG(NG(e)),n=[];for(let r=0;r<6;r+=1)n.push(mj(t));return n}function sE(e,t,n,r,i){return{id:MG(),kind:"iching_sixyao",createdAtISO:CG(),question:e,seedTextUsed:t,linesBottomUp:n,changingLines:DG(n),baseBitsBottomUp:n.map(a=>_w(a.value)),changedBitsBottomUp:n.map(a=>AG(a.value)),saju:r??void 0,viewMeta:i}}function ACe(e){const{periodTab:t,seunPayload:n,wolunPayload:r,ilunPayload:i,questionText:a,sajuSeedPart:o,saju:l,viewMeta:u}=e,d=[];return t==="seun"&&n?.seun?.length&&n.seun.forEach(h=>{const m=` ${h.year} (${h.seun}`,b=`${a}::${h.refDateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=oE(y),w=sE(a,y,k,l,u);d.push({key:`seun-${h.year}`,title:m,dateYMD:h.refDateYMD,record:w})}),t==="wolun"&&r?.wolun?.length&&r.wolun.forEach(h=>{const m=String(h.month).padStart(2,"0"),b=` ${h.year}-${m} (${h.seun} ${h.wolun}`,y=`${a}::${h.refDateYMD}`,k=o?`${y}::SAJU::${o}`:y,w=oE(k),_=sE(a,k,w,l,u);d.push({key:`wolun-${h.year}-${m}`,title:b,dateYMD:h.refDateYMD,record:_})}),t==="ilun"&&i?.ilun?.length&&i.ilun.forEach(h=>{const m=` ${h.dateYMD} (${h.seun} ${h.wolun} ${h.ilun}`,b=`${a}::${h.dateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=oE(y),w=sE(a,y,k,l,u);d.push({key:`ilun-${h.dateYMD}`,title:m,dateYMD:h.dateYMD,record:w})}),d}function NCe(e){if(!e)return"  ";const t=[e.name?`: ${e.name}`:"",e.gender?`: ${e.gender}`:"",e.pillarsText?`: ${e.pillarsText}`:""].filter(Boolean);return t.length?t.join(`
`):"  "}function OCe(e,t){if(!e||!e.luck)return e;const{daeun:n,seun:r,wolun:i,ilun:a}=e.luck;return{...e,luck:t==="seun"?{daeun:n,seun:r}:t==="wolun"?{daeun:n,seun:r,wolun:i}:{daeun:n,seun:r,wolun:i,ilun:a}}}function CCe(e){const{selectedCardText:t,ready:n,periodCards:r,finalQuestion:i,question:a,baseBits:o,changedBits:l,changingIndexes:u,lineValues:d,lines:h,saju:m,periodTab:b}=e,y=(i.trim()||a.trim()).trim(),k=y||"( )";if(t&&t.trim())return[` : ${k}`,"",t.trim()].join(`
`);if(!n&&r.length===0)return"";const w=o.join(""),_=l.join(""),T=u.length?u.join(", "):"",N=d.join(", "),j=pj(h),C=TN(l),M=typeof j.number=="number"?String(j.number):"",P=j.titleKo||"",I=j.titleHanja||"?",z=j.nameHanja||"?",K=j.upperKo&&j.lowerKo?`${j.upperKo}/${j.lowerKo}`:"",G=j.upperHanja&&j.lowerHanja?`${j.upperHanja}/${j.lowerHanja}`:"",H=typeof C.number=="number"?String(C.number):"",B=C.upperKo&&C.lowerKo?`${C.upperKo}/${C.lowerKo}`:"",q=C.upperHanja&&C.lowerHanja?`${C.upperHanja}/${C.lowerHanja}`:"",X=gj(h),V=X.leftTopDown.length?X.leftTopDown.join(" "):"()",F=X.rightTopDown.length?X.rightTopDown.join(" "):"()",Z=X.markers.length?X.markers.map(ee=>`${ee.text}${ee.atLineTopDown}`).join(", "):"()",Q=NCe(m),le=r.length>0?[" (  )",...r.flatMap((ee,he)=>{const J=pj(ee.record.linesBottomUp),ae=gj(ee.record.linesBottomUp),me=ee.record.baseBitsBottomUp.join(""),pe=ee.record.changedBitsBottomUp.join(""),te=ee.record.changingLines.length?ee.record.changingLines.join(", "):"",je=ee.record.linesBottomUp.map(Ke=>Ke.value).join(", "),xe=J.titleKo||"",ue=typeof J.number=="number"?String(J.number):"",Ee=ae.leftTopDown.length?ae.leftTopDown.join(" "):"()",Me=ae.rightTopDown.length?ae.rightTopDown.join(" "):"()",Ie=ae.markers.length?ae.markers.map(Ke=>`${Ke.text}${Ke.atLineTopDown}`).join(", "):"()";return[`${he+1}. ${ee.title}`,`-  /: ${ue}  ${xe}`,`-  (): ${me}`,`-  (): ${pe}`,`- : ${te}`,`- (): ${je}`,`- (): ${Ee}`,`- (): ${Me}`,`- ///: ${Ie}`]}),""]:[],se=n&&h.length===6?[" ()",`-  : ${M}`,`- (): ${P}`,`- (): ${I} (${z})`,`- / : ${K} (${G})`,""," ()",`-  : ${H}`,`- / : ${B} (${q})`,""," ",`-  (): ${w}`,`-  (): ${_}`,`- : ${T}`,`- (): ${N}`,`- (): ${V}`,`- (): ${F}`,`- ///: ${Z}`,""]:[" ","- /   ",""],W=n&&r.length===0,re=W?OCe(m??null,b):null;return[" / .        .","",`: ${k}`,"",...se," ",Q,"",...W?["(JSON)",JSON.stringify(re??{},null,2),""]:[],"",...le,"","-     ","-        ","-    "].join(`
`)}const M$=[`1.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`2.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`3.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`4.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`5.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`6.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`7.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`8.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`9.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`10.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`11.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`12.  () 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`13.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`14.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`15.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`16.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`17.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`18.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`19.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`20.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`21.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`22.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`23.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`24.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`25.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`26.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`27.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`28.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`29.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`30.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + () -  
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`31.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`32.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`33.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`34.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`35.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + () -  
2() - () + ()
() - () +  +  + ()`,`36.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`37.  
 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`38.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + () -  
() - () +  +  + ()`,`39.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`40.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`41.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`42.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`43.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`44.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`45.  () 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`46.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`47.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + () -  
2() - () + ()
() - () +  + ()`,`48.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`49.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + () -  `,`50.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`51.  () (() )  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`52. () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`53.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`54.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + () -  
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`55.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`56.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`57.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`58.  () (() ) 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + () -  
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`59.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`60.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`61.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`62.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`63.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`64.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`];function MCe({saju:e,viewMeta:t,initialQuestion:n="",onBaseDateChange:r}){const[i,a]=S.useState(n),[o,l]=S.useState(""),[u,d]=S.useState("all"),[h,m]=S.useState("seun"),[b,y]=S.useState(()=>{const Pe=new Date,at=new Date(Pe.getFullYear(),0,1,9,0,0,0),zt=new Date(Pe.getFullYear()+9,11,31,9,0,0,0);return{startYMD:to(at),endYMD:to(zt)}}),[k,w]=S.useState(()=>{const Pe=new Date,at=new Date(Pe.getFullYear(),Pe.getMonth(),1,9,0,0,0),zt=new Date(at);return zt.setMonth(zt.getMonth()+11),{startYMD:to(at),endYMD:to(zt)}}),[_,T]=S.useState(()=>{const Pe=new Date,at=new Date(Pe.getFullYear(),Pe.getMonth(),Pe.getDate(),9,0,0,0),zt=RG(at,6);return{startYMD:to(at),endYMD:to(zt)}}),[N,j]=S.useState([]),[C,M]=S.useState(null),[P,I]=S.useState([]),[z,K]=S.useState(!1),[G,H]=S.useState(!1),[B,q]=S.useState(null),X=S.useRef(null),V=S.useRef(null),F=S.useRef(null);S.useEffect(()=>{a(n),l(n)},[n]),S.useEffect(()=>{I([])},[h,b.startYMD,b.endYMD,k.startYMD,k.endYMD,_.startYMD,_.endYMD]),S.useEffect(()=>{if(!B)return;const Pe=window.setTimeout(()=>q(null),2200);return()=>window.clearTimeout(Pe)},[B]);const Z=S.useMemo(()=>{const Pe=Sa(b.startYMD);if(Pe&&Pe.getMonth()===0){const at=new Date(Pe.getFullYear(),1,1,9,0,0,0);return{...b,startYMD:to(at)}}return b},[b]),Q=h,le=S.useMemo(()=>Q?LG(Q,Q==="seun"?Z:Q==="wolun"?k:_):new Date,[Q,_,Z,k]);S.useEffect(()=>{r&&r(le??null)},[le,r]);const se=S.useMemo(()=>fCe(e),[e]),W=S.useMemo(()=>`${o.trim()}::${le.toISOString()}`,[le,o]),re=S.useMemo(()=>se?`${W}::SAJU::${se}`:W,[W,se]),ee=S.useMemo(()=>{const Pe=NG(re);return OG(Pe)},[re]),he=S.useMemo(()=>h==="seun"?aE("seun",Z):null,[h,Z]),J=S.useMemo(()=>h==="wolun"?aE("wolun",k):null,[h,k]),ae=S.useMemo(()=>h==="ilun"?aE("ilun",_):null,[h,_]),me=S.useMemo(()=>{const Pe=Sa(b.startYMD);return Pe?String(Pe.getFullYear()):""},[b.startYMD]),pe=S.useMemo(()=>{const Pe=Sa(b.endYMD);return Pe?String(Pe.getFullYear()):""},[b.endYMD]),te=S.useMemo(()=>{const Pe=Sa(k.startYMD);if(!Pe)return"";const at=String(Pe.getMonth()+1).padStart(2,"0");return`${Pe.getFullYear()}-${at}`},[k.startYMD]),je=S.useMemo(()=>{const Pe=Sa(k.endYMD);if(!Pe)return"";const at=String(Pe.getMonth()+1).padStart(2,"0");return`${Pe.getFullYear()}-${at}`},[k.endYMD]),xe=S.useMemo(()=>{if(h==="seun"){const Pe=he?.seun[0];return Pe?` ${Pe.year} - ${Pe.seun}`:""}if(h==="wolun"){const Pe=J?.wolun[0];if(!Pe)return"";const at=String(Pe.month).padStart(2,"0");return` ${Pe.year}-${at} - ${Pe.seun} ${Pe.wolun}`}if(h==="ilun"){const Pe=ae?.ilun[0];return Pe?` ${Pe.dateYMD} - ${Pe.seun} ${Pe.wolun} ${Pe.ilun}`:""}return""},[h,he,J,ae]),ue=S.useCallback((Pe,at,zt)=>{Pe(Er=>({...Er,[at]:zt}))},[]),Ee=S.useCallback((Pe,at)=>{if(!at)return;const zt=Number(at);if(!Number.isFinite(zt))return;const Er=Math.trunc(zt);y(li=>({...li,[Pe]:`${Er}-06-15`}))},[]),Me=S.useCallback((Pe,at)=>{if(!at)return;const zt=/^(\d{4})-(\d{2})$/.exec(at);zt&&w(Er=>({...Er,[Pe]:`${zt[1]}-${zt[2]}-15`}))},[]),Ie=N.length===6,Ke=S.useMemo(()=>N.map(Pe=>_w(Pe.value)),[N]),mt=S.useMemo(()=>N.map(Pe=>AG(Pe.value)),[N]),pt=S.useMemo(()=>DG(N),[N]),De=S.useMemo(()=>N.map(Pe=>Pe.value),[N]),ze=N.length>0||!!C,Ge=P.length>0,oe=o.trim().length>0,Ce=!oe||G||Ge||Ie,Ue=!oe||z||ze||Ge||G,rt=S.useCallback(()=>{window.setTimeout(()=>{X.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),xt=S.useCallback(()=>{window.setTimeout(()=>{V.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),st=S.useCallback(()=>{j([]),M(null),I([]),K(!1),H(!1),q(null)},[]),Oe=S.useCallback(()=>o.trim()?!0:(alert("  !"),window.setTimeout(()=>{F.current?.focus()},0),!1),[o]),Fe=S.useCallback(()=>{if(!Oe()||Ce)return;K(!0);let Pe=0;j(at=>at.length>=6?at:(Pe=at.length+1,[...at,mj(ee)])),window.setTimeout(()=>{if(K(!1),Pe>=6){rt();return}Pe>0&&q(`${Pe}  !  ${Pe+1} ?`)},350)},[Oe,Ce,ee,rt]),We=S.useCallback(()=>{if(!Oe()||Ce)return;K(!0);const Pe=[];for(let at=0;at<6;at+=1)Pe.push(mj(ee));j(Pe),window.setTimeout(()=>{K(!1),rt()},350)},[Oe,Ce,ee,rt]),bt=S.useMemo(()=>{if(N.length!==6)return"";const Pe=pj(N);if(typeof Pe.number!="number")return"";const at=Pe.number-1;return at<0||at>=M$.length?"":M$[at]??""},[N]),At=S.useCallback(Pe=>{j(at=>{if(Pe<0||Pe>=at.length)return at;const zt=[...at],Er=zt[Pe];return zt[Pe]={value:dCe(Er.value),source:"manual"},zt})},[]),Nt=S.useCallback(()=>{if(N.length!==6)return;const Pe=(o.trim()||i.trim()).trim(),at={id:MG(),kind:"iching_sixyao",createdAtISO:CG(),question:Pe,seedTextUsed:re,linesBottomUp:N,changingLines:pt,baseBitsBottomUp:Ke,changedBitsBottomUp:mt,saju:e??void 0,viewMeta:t};M(at)},[Ke,mt,pt,re,o,N,i,e,t]);S.useEffect(()=>{N.length===6&&Nt()},[Nt,N.length]);const Mt=S.useMemo(()=>[{value:7,source:"manual"}].concat(Array.from({length:5},()=>({value:7,source:"manual"}))),[]),Kt=S.useCallback(()=>{if(!Oe()||Ue)return;H(!0);const Pe=(o.trim()||i.trim()).trim(),at=ACe({periodTab:h,seunPayload:he,wolunPayload:J,ilunPayload:ae,questionText:Pe,sajuSeedPart:se,saju:e,viewMeta:t});I(at),window.setTimeout(()=>{H(!1),xt()},400)},[Oe,Ue,o,ae,h,i,e,se,he,t,J,xt]),rn=S.useMemo(()=>CCe({selectedCardText:bt,ready:Ie,periodCards:P,finalQuestion:o,question:i,baseBits:Ke,changedBits:mt,changingIndexes:pt,lineValues:De,lines:N,saju:e,periodTab:h}),[bt,Ie,P,o,i,Ke,mt,pt,De,N,e,le,he,J,ae,h]),si=S.useCallback(async()=>{if(rn)try{await navigator.clipboard.writeText(rn),alert("  !")}catch{alert("  .   .")}},[rn]),zn=S.useMemo(()=>{if(!Ie)return null;const Pe=gj(N),at=Pe.leftTopDown.join(" "),zt=Pe.rightTopDown.join(" "),Er=Pe.markers.map(li=>`${li.text}${li.atLineTopDown}`).join(", ");return{liuQin:at,zhi:zt,marks:Er}},[N,Ie]);return{saju:e,question:i,setQuestion:a,finalQuestion:o,setFinalQuestion:l,questionInputRef:F,drawMode:u,setDrawMode:d,periodTab:h,setPeriodTab:m,seunRange:b,setSeunRange:y,wolunRange:k,setWolunRange:w,ilunRange:_,setIlunRange:T,seunStartYear:me,seunEndYear:pe,wolunStartYM:te,wolunEndYM:je,activePeriodLabel:xe,onRangeChange:ue,onSeunYearChange:Ee,onWolunMonthChange:Me,ready:Ie,baseBits:Ke,changedBits:mt,changingIndexes:pt,lineValues:De,autoSideSummary:zn,selectedCardText:bt,drawOne:Fe,drawAll:We,reset:st,onEditLine:At,lines:N,record:C,periodCards:P,placeholderLines:Mt,copyPrompt:si,isDrawing:z,isPeriodDrawing:G,toast:B,disableSingleDraw:Ce,disablePeriodDraw:Ue,resultRef:X,periodCardsRef:V,buildPeriodCards:Kt}}const DCe="DAN-GW4jrUdfiXklZ12U",PCe="DAN-CeRuC0yKzSAs5Gju";function RCe(e){const{saju:t,question:n,setQuestion:r,finalQuestion:i,setFinalQuestion:a,questionInputRef:o,drawMode:l,setDrawMode:u,lines:d,isDrawing:h,disableSingleDraw:m,selectedCardText:b,drawOne:y,drawAll:k,reset:w,copyPrompt:_,toast:T,resultRef:N}=MCe(e),j=b?b.split(/\r?\n/):[],C=j[0]??"",M=j.slice(1).join("\\n").trim(),P=d.length?[...d].reverse():[],I=j.map(z=>z.trim()).map(z=>{const K=/^(|5|4|3|2|)\((|)\)\s*-\s*(.+)$/.exec(z);if(!K)return null;const G=K[1],H=K[2],B=//.test(K[3]),X=K[3].replace(/\s*-\s*\s*?/g,"").trim().split(" + ").map(Q=>Q.trim()).filter(Boolean),V=X.filter(Q=>Q===""||Q===""||Q===""||Q===""),F=X.find(Q=>/\([]\)/.test(Q))??"",Z=X.find(Q=>/\(.+\)/.test(Q)&&Q!==F)??"";return{label:G,yinYang:H,liuQin:Z,zhi:F,markers:V,hasDonghyo:B}}).filter(Boolean);return g.jsxs("div",{className:"w-full max-w-[768px] mx-auto pb-12 desk:pb-4 p-4",children:[g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"   ,     ."}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),t?g.jsxs("div",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.name?t.name:" ",t.gender?`  ${t.gender}`:""]}),t.pillarsText?g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.pillarsText]}):null]}):g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),g.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[g.jsxs("label",{className:"block",children:[g.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200",children:""}),g.jsx("textarea",{ref:o,value:n,onChange:z=>r(z.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm outline-none focus:border-neutral-400 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",placeholder:"      !"})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("button",{type:"button",onClick:()=>a(n.trim()),className:"rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:" "}),g.jsxs("span",{children:[" : ",i.trim()?i:""]})]}),g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="all",onChange:()=>u("all")})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="step",onChange:()=>u("step")})," "]})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:l==="all"?k:y,disabled:m||h,className:"rounded-xl bg-neutral-900 px-4 py-2 text-sm font-semibold text-white hover:bg-neutral-800 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-200 cursor-pointer",children:l==="all"?" ":`1  (${d.length}/6)`}),g.jsx("button",{type:"button",onClick:w,className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:""}),h?g.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("span",{children:" "}),g.jsx("span",{className:"animate-pulse",children:"..."})]}):null]})]})]}),g.jsxs("div",{className:"mt-4",ref:N,children:[g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(ku,{enabled:!0,adUnit:PCe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(ku,{enabled:!0,adUnit:DCe,width:320,height:50})})]}),b?g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-gradient-to-b from-amber-50 to-white p-4 shadow-sm dark:border-neutral-800 dark:from-neutral-900 dark:to-neutral-950",children:g.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[g.jsxs("div",{className:"w-full md:w-[180px]",children:[g.jsx("div",{className:"rounded-xl border border-amber-200 bg-white px-3 py-2 text-sm font-semibold text-amber-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",children:C}),g.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-white px-3 py-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("div",{className:"mt-2 flex flex-col gap-2",children:P.map((z,K)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:6-K}),g.jsx(cCe,{yinYang:_w(z.value),changing:!1,showChanging:!1})]},`line-${K}`))})]})]}),g.jsxs("div",{className:"flex-1 rounded-xl border border-amber-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"space-y-2",children:(I.length?I:[]).map(z=>g.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-amber-100 bg-amber-50/50 px-3 py-2 text-sm dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:[z.label," (",z.yinYang,")"]}),g.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-300",children:[z.liuQin||"-"," ",z.zhi?`  ${z.zhi}`:""]})]}),g.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px] font-semibold text-amber-900 dark:text-neutral-200",children:[z.hasDonghyo&&g.jsx("span",{className:"rounded border border-red-200 bg-red-50 px-1.5 py-0.5 text-red-600 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-300",children:""}),z.markers.map(K=>g.jsx("span",{className:"rounded border border-amber-200 bg-white px-1.5 py-0.5 dark:border-neutral-700 dark:bg-neutral-900",children:K},`${z.label}-${K}`))]})]},z.label))}),!I.length&&g.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-sm text-neutral-800 dark:text-neutral-100",children:M})]})]})}):g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"   ."})]}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsx("div",{className:"mt-1 text-xs text-neutral-600 dark:text-neutral-400",children:"   AI    ."}),b?g.jsx("button",{type:"button",onClick:_,className:"mt-3 w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:"AI   "}):g.jsx("div",{className:"mt-3 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),T?g.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 w-[90%] max-w-sm -translate-x-1/2",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-900 shadow-lg dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",children:T})}):null]})}const LCe="DAN-INfSKh1pW2cEtWNu";function Xb(e){return!e?.stem||!e?.branch?"":`${e.stem}${e.branch}`}function ICe(e){const t=[e.year?`${e.year}`:"",e.month?`${e.month}`:"",e.day?`${e.day}`:"",e.hour?`${e.hour}`:""].filter(Boolean);return t.length?t.join(" "):""}function lE(e){if(typeof e!="string")return!1;const t=e.trim();return t===""||t===""||t===""||t==="self"||t===""||t===""}function $Ce({current:e}){const t=Ky(h=>h.useDST),n=e.mingSikType,r=S.useMemo(()=>t2(e,t),[e,t]),[i,a]=S.useState(null),o=Kr(h=>h.date),l=Nx(e,n,i??o??void 0),u=S.useMemo(()=>{const h={year:Xb(r.year),month:Xb(r.month),day:Xb(r.day),hour:Xb(r.hour)},m=e.ganjiText?.trim()||e.ganji?.trim()||ICe(h),b={daeun:l.dae.gz||void 0,seun:l.se.gz||void 0,wolun:l.wol.gz||void 0,ilun:l.il.gz||void 0};return{name:e.name||void 0,gender:e.gender||void 0,pillarsText:m,pillars:h,luck:b}},[e,l,r]),d=S.useMemo(()=>({sourceRoute:"/iching",currentId:e.id,currentName:e.name??null}),[e.id,e.name]);return g.jsx("div",{className:"py-2",children:g.jsx(RCe,{saju:u,viewMeta:d,onBaseDateChange:a},e.id)})}function BCe(){const e=jn(w=>w.list),t=jn(w=>w.loading),n=jn(w=>w.currentId),r=jn(w=>w.setCurrentId),i=dc(),a=S.useRef(!1),[o,l]=S.useState(!1),u=S.useRef(!1),d=vn(w=>w.shouldShowAdsNow()),h=S.useMemo(()=>e.find(_=>lE(_.relationship))?.id??null,[e]);S.useEffect(()=>{if(t||e.length===0)return;const w=h??e[0]?.id??null;if(!a.current){w&&n!==w&&r(w),a.current=!0;return}n&&!e.some(_=>_.id===n)&&w&&r(w)},[t,e,n,h,r]),S.useEffect(()=>{t&&l(!0)},[t]);const m=S.useMemo(()=>e.find(w=>w.id===n)??null,[e,n]),b=S.useMemo(()=>m||(e.find(_=>lE(_.relationship))??e[0]??null),[m,e]),y=S.useMemo(()=>{const w=e.find(_=>lE(_.relationship));return w?[w,...e.filter(_=>_.id!==w.id)]:e},[e]);S.useEffect(()=>{o&&(t||e.length>0||u.current||(u.current=!0,alert("   .  ."),i("/",{replace:!0})))},[o,e.length,t,i]),S.useEffect(()=>{let w=!0;Le.auth.getSession().then(({data:T})=>{w&&(T.session?.user||i("/",{replace:!0}))});const{data:_}=Le.auth.onAuthStateChange((T,N)=>{N?.user||i("/",{replace:!0})});return()=>{w=!1,_.subscription.unsubscribe()}},[i]);const k=S.useMemo(()=>n||h||(e[0]?.id??""),[n,h,e]);return g.jsxs("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-950",children:[g.jsx(wG,{enabled:d}),d&&g.jsx(jG,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(_G,{enabled:d,adUnit:LCe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsxs("div",{className:"w-full max-w-[768px] mx-auto px-4 pt-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"    ."})]}),g.jsx(Ej,{to:"/",className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800",children:""})]}),e.length>0&&g.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("select",{className:"w-full sm:w-[320px] rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",value:k,onChange:w=>{const _=w.target.value;_&&r(_)},children:[g.jsx("option",{value:"",disabled:!0,children:""}),y.map(w=>g.jsx("option",{value:w.id,children:w.name?.trim()?w.name:" "},w.id))]})]})]}),t&&e.length===0&&g.jsx("div",{className:"w-full max-w-[768px] mx-auto px-4 py-10",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400",children:" .."})}),b&&g.jsx($Ce,{current:b})]})}function zCe(e){return typeof e=="object"&&e!==null}function UCe(e){if(!zCe(e))return null;const t=typeof e.ok=="boolean"?e.ok:void 0,n=typeof e.total_active_ms=="number"?e.total_active_ms:void 0,r=typeof e.upgraded_to_basic=="boolean"?e.upgraded_to_basic:void 0;return{ok:t,total_active_ms:n,upgraded_to_basic:r}}function $G({enabled:e=!0,intervalMs:t=6e4,path:n,onBasicUnlocked:r,onTotalActiveMs:i}){const a=S.useRef(!1),o=S.useRef(""),l=S.useRef(!1),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),m=S.useRef(0);return S.useEffect(()=>{o.current=n??""},[n]),S.useEffect(()=>{let b=null;return(async()=>{const{data:k}=await Le.auth.getSession();u.current=k.session?.user?.id??null;const _=Le.auth.onAuthStateChange((T,N)=>{u.current=N?.user?.id??null,l.current=!1}).data?.subscription;_&&typeof _.unsubscribe=="function"&&(b=()=>_.unsubscribe())})(),()=>{b&&b()}},[]),S.useEffect(()=>{if(!e)return;const b=async w=>{if(document.visibilityState!=="visible")return;const _=Date.now();if(!(w!=="init"&&_-m.current<1e4)&&(m.current=_,!a.current)){a.current=!0;try{if(!u.current)return;const N=o.current||null,{data:j,error:C}=await Le.rpc("ping_activity",{p_last_path:N});if(C)return;const M=UCe(j);if(!M)return;typeof M.total_active_ms=="number"&&i?.(M.total_active_ms),M.upgraded_to_basic===!0&&!l.current&&(l.current=!0,r?.())}finally{a.current=!1}}};b("init");const y=Math.floor(Math.random()*5e3);h.current=window.setTimeout(()=>{b("interval"),d.current=window.setInterval(()=>void b("interval"),t)},y);const k=()=>{document.visibilityState==="visible"&&b("visible")};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k),h.current!==null&&(window.clearTimeout(h.current),h.current=null),d.current!==null&&(window.clearInterval(d.current),d.current=null)}},[e,t,r,i]),null}function FCe(){const e=jn(a=>a.loadFromServer),t=jn(a=>a.migrateLocalToServer),n=Jt(a=>a.loadFromServer),r=vn(a=>a.loadFromServer),i=S.useCallback(async()=>{await t(),await Promise.all([r(),n(),e()])},[t,r,n,e]);return S.useEffect(()=>{i();const{data:a}=Le.auth.onAuthStateChange(o=>{o==="TOKEN_REFRESHED"||o==="INITIAL_SESSION"||i()});return()=>{a.subscription.unsubscribe()}},[i]),null}function HCe(e){try{const t=localStorage.getItem(e);if(!t)return 0;const n=Number(t);return Number.isFinite(n)?n:0}catch{return 0}}function GCe(e,t){try{localStorage.setItem(e,String(t))}catch{}}function YCe(e){return e<=0?0:Math.floor(Math.random()*e)}function qCe({enabled:e=!0,href:t="https://open.kakao.com/o/sjBRz57h",hintTexts:n=["    !"," .",",  ."," ,   ,  !","  !  ! "],hideHintHours:r=24,cycleMs:i=4200,mobilePaddingX:a=0,bottomDockCssVarName:o="--bottom-dock"}){const l=S.useMemo(()=>"kakao_chat_hint_hide_until",[]),[u,d]=S.useState(!1),[h,m]=S.useState(()=>YCe(n.length)),b=S.useRef(null),y=S.useCallback(_=>{if(typeof document>"u")return;const T=`${Math.max(0,Math.floor(_))}px`;document.documentElement.style.setProperty(o,T)},[o]);if(S.useEffect(()=>{if(n.length<=0){m(0);return}m(_=>_%n.length)},[n.length]),S.useEffect(()=>{if(!e){d(!1);return}const _=HCe(l),T=Date.now();if(_>T){d(!1);return}const N=window.setTimeout(()=>d(!0),900);return()=>window.clearTimeout(N)},[e,l]),S.useEffect(()=>{if(!e||!u||n.length<=1)return;const _=window.setInterval(()=>{m(T=>T+1>=n.length?0:T+1)},i);return()=>window.clearInterval(_)},[e,u,n.length,i]),S.useEffect(()=>{if(!e||!u){y(0);return}const _=b.current;if(!_){y(0);return}const T=()=>{const N=Math.ceil(_.getBoundingClientRect().height);y(N)};if(T(),typeof ResizeObserver<"u"){const N=new ResizeObserver(T);return N.observe(_),()=>{N.disconnect(),y(0)}}return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T),y(0)}},[e,u,y]),!e)return null;const k=()=>{GCe(l,Date.now()+r*60*60*1e3),d(!1),y(0)},w=n[h]??"";return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:`
        @keyframes hintFadeCycle {
          0%   { opacity: 0; transform: translate3d(0, 6px, 0); }
          14%  { opacity: 1; transform: translate3d(0, 0, 0); }
          78%  { opacity: 1; transform: translate3d(0, 0, 0); }
          100% { opacity: 0; transform: translate3d(0, -2px, 0); }
        }
      `}),u&&n.length>0?g.jsx("div",{ref:b,className:"desk:hidden fixed left-0 right-0 bottom-0 z-[99] pointer-events-none",style:{paddingLeft:a,paddingRight:a,paddingBottom:0},children:g.jsxs("div",{className:"pointer-events-auto w-full border border-neutral-700 bg-neutral-900/95 text-white shadow-lg",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:10,padding:"4px 8px"},children:[g.jsx("div",{className:"min-w-0 text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},title:w,children:w}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("button",{type:"button",onClick:k,"aria-label":" ",title:"",className:"w-8 h-8 rounded-full bg-neutral-800 border border-neutral-700 text-[14px] flex items-center justify-center hover:bg-neutral-700",children:g.jsx(Py,{})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`w-8 h-8 rounded-full bg-neutral-800 hover:bg-neutral-700 border border-neutral-700
                           flex items-center justify-center transition-colors`,children:g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}):null,g.jsxs("div",{className:"hidden desk:block fixed right-5 bottom-5 z-[999]",children:[u&&n.length>0&&g.jsx("div",{className:"absolute bottom-14 right-0 w-max max-w-[260px]",children:g.jsxs("div",{className:"relative rounded-xl bg-neutral-900 text-white border border-neutral-700 shadow-lg px-3 py-2 text-xs whitespace-pre-line",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},children:[w,g.jsx("button",{type:"button",onClick:k,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-neutral-800 border border-neutral-700 text-[12px] flex items-center justify-center hover:bg-neutral-700 cursor-pointer","aria-label":" ",title:"",children:g.jsx(Py,{size:12})}),g.jsx("div",{className:"absolute -bottom-2 right-4 w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-neutral-900"})]})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`flex items-center justify-center w-12 h-12 rounded-full shadow-lg
                     bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 transition-colors`,children:g.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}function KCe(e){const t=["#F87171","#FBBF24","#34D399","#60A5FA","#A78BFA","#F472B6"],n=[];for(let r=0;r<e;r+=1)n.push({leftPct:Math.random()*100,size:6+Math.floor(Math.random()*8),delayMs:Math.floor(Math.random()*300),durationMs:1200+Math.floor(Math.random()*900),rotate:Math.floor(Math.random()*360),driftPx:-40+Math.floor(Math.random()*80),color:t[r%t.length]});return n}function WCe({open:e,onClose:t}){const n=S.useMemo(()=>KCe(48),[]);return S.useEffect(()=>{if(!e)return;const r=a=>{a.key==="Escape"&&t()};window.addEventListener("keydown",r);const i=window.setTimeout(()=>t(),6e3);return()=>{window.removeEventListener("keydown",r),window.clearTimeout(i)}},[e,t]),e?g.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center",children:[g.jsx("style",{children:`
        @keyframes confettiFall {
          0%   { transform: translate3d(var(--dx), -20px, 0) rotate(var(--rot)); opacity: 0; }
          10%  { opacity: 1; }
          100% { transform: translate3d(var(--dx), 560px, 0) rotate(calc(var(--rot) + 360deg)); opacity: 0; }
        }
        @keyframes pop {
          0% { transform: scale(0.98); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
      `}),g.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:n.map((r,i)=>{const a={position:"absolute",top:0,left:`${r.leftPct}%`,width:r.size,height:Math.max(8,r.size+6),background:r.color,borderRadius:2,transform:`rotate(${r.rotate}deg)`,animation:`confettiFall ${r.durationMs}ms ease-out ${r.delayMs}ms forwards`,"--dx":`${r.driftPx}px`,"--rot":`${r.rotate}deg`};return g.jsx("span",{style:a},i)})}),g.jsxs("div",{className:`relative w-[92%] max-w-[420px] rounded-2xl bg-white dark:bg-neutral-950
                   border border-neutral-200 dark:border-neutral-800 shadow-xl p-5`,style:{animation:"pop 160ms ease-out"},children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl mb-2",children:""}),g.jsx("div",{className:"text-xl font-extrabold text-neutral-900 dark:text-neutral-50",children:"BASIC  !"}),g.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:"     ! "})]}),g.jsx("div",{className:"mt-4 flex justify-center gap-2",children:g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-neutral-900 text-white hover:bg-neutral-800 cursor-pointer",children:""})})]})]}):null}function D$(e){if(typeof e!="string")return"FREE";const t=e.toUpperCase();return t==="BASIC"?"BASIC":t==="PRO"?"PRO":"FREE"}function VCe(){const e=Wr(),t=e.pathname+e.search,n=!e.pathname.startsWith("/admin")&&!e.pathname.startsWith("/impersonate")&&!e.pathname.startsWith("/auth/callback"),[r,i]=S.useState(!1),a=vn(b=>b.loaded),o=vn(b=>b.loading),l=vn(b=>b.userId),u=vn(b=>D$(b.plan)),d=S.useRef(!1);S.useEffect(()=>{n&&(a||o||vn.getState().loadFromServer())},[n,a,o]);const h=S.useCallback(async()=>{if(d.current)return;d.current=!0;const{data:b,error:y}=await Le.rpc("mark_basic_celebrated");if(y){console.warn("[basic celebration] rpc error:",y.message);return}b===!0&&i(!0)},[]);S.useEffect(()=>{n&&a&&l&&u==="BASIC"&&h()},[n,a,l,u,h]);const m=S.useCallback(()=>{(async()=>(await vn.getState().loadFromServer(),D$(vn.getState().plan)==="BASIC"&&(d.current=!1,await h())))()},[h]);return g.jsxs(g.Fragment,{children:[g.jsx($G,{enabled:n,path:t,onBasicUnlocked:m}),g.jsx(qCe,{enabled:n}),g.jsx(WCe,{open:r,onClose:()=>i(!1)})]})}function ZCe(e){return typeof e=="object"&&e!==null}function XCe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!ZCe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}function JCe(){const e=dc(),t=Wr(),n=S.useRef(!1);return S.useEffect(()=>{const r=async()=>{if(!n.current){n.current=!0;try{const{data:o}=await Le.auth.getSession(),l=o.session?.user?.id??null;if(!l)return;const{data:u,error:d}=await Le.rpc("get_my_account_status");if(!d){!!XCe(u)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0});return}const{data:h,error:m}=await Le.from("profiles").select("disabled_at").eq("user_id",l).maybeSingle();if(m)return;(h?.disabled_at??null)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0})}finally{n.current=!1}}};r();const{data:i}=Le.auth.onAuthStateChange(()=>{r()}),a=()=>{document.visibilityState==="visible"&&r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a),i.subscription.unsubscribe()}},[e,t.pathname]),null}function QCe(e){return typeof e=="object"&&e!==null}function eMe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!QCe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}const tMe=Jo((e,t)=>({loaded:!1,loading:!1,userId:null,disabledAt:null,reset:()=>{e({loaded:!0,loading:!1,userId:null,disabledAt:null})},loadFromServer:async n=>{if(!t().loading){e({loading:!0,userId:n});try{const{data:i,error:a}=await Le.rpc("get_my_account_status");if(!a){const d=eMe(i);e({loaded:!0,loading:!1,disabledAt:d});return}const{data:o,error:l}=await Le.from("profiles").select("disabled_at").eq("user_id",n).maybeSingle();if(l){console.error("[accountStatus] load error:",l),e({loaded:!0,loading:!1,disabledAt:null});return}const u=o?.disabled_at??null;e({loaded:!0,loading:!1,disabledAt:typeof u=="string"?u:null})}catch(i){console.error("[accountStatus] exception:",i),e({loaded:!0,loading:!1,disabledAt:null})}}}}));function nMe(e){if(!e)return"-";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toLocaleString():e}function rMe(){const e=tMe(n=>n.disabledAt),t=S.useCallback(async()=>{try{await Le.auth.signOut(),window.location.href="/"}catch(n){console.error("signOut error:",n),window.location.href="/"}},[]);return g.jsx("main",{className:"min-h-screen flex items-center justify-center p-6 text-white",children:g.jsxs("div",{className:"w-full max-w-[520px] bg-neutral-900 border border-neutral-700 rounded-xl p-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-3",children:" "}),g.jsxs("div",{className:"text-sm text-neutral-300 leading-6",children:["        .",g.jsx("span",{className:"font-semibold text-neutral-100",children:nMe(e)})]}),g.jsx("div",{className:"mt-5 p-3 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-300",children:"    ."}),g.jsxs("div",{className:"mt-6 flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 rounded bg-blue-700 hover:bg-blue-600 cursor-pointer",children:""})]})]})})}function iMe(){const e=Wr();return S.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),g.jsxs(g.Fragment,{children:[g.jsx(FCe,{}),g.jsx(VCe,{}),g.jsx(JCe,{}),g.jsx($G,{}),g.jsxs(rK,{children:[g.jsx(Xa,{path:"/auth/callback",element:g.jsx(lCe,{})}),g.jsx(Xa,{path:"/disabled",element:g.jsx(rMe,{})}),g.jsx(Xa,{path:"/iching",element:g.jsx(BCe,{})}),g.jsx(Xa,{path:"/",element:g.jsx(Zb,{})}),g.jsx(Xa,{path:"/faq",element:g.jsx(Zb,{})}),g.jsx(Xa,{path:"/couple",element:g.jsx(Zb,{})}),g.jsx(Xa,{path:"/result",element:g.jsx(Zb,{})}),g.jsx(Xa,{path:"/admin/*",element:g.jsx(FH,{})}),g.jsx(Xa,{path:"/impersonate",element:g.jsx(sCe,{})}),g.jsx(Xa,{path:"*",element:g.jsx(tK,{to:"/",replace:!0})})]})]})}cq.createRoot(document.getElementById("root")).render(g.jsx(jK,{children:g.jsx(iMe,{})}));
