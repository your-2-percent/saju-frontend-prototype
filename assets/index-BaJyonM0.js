function VE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function _i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wp(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var W_={exports:{}},qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eM;function mY(){if(eM)return qh;eM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return qh.Fragment=t,qh.jsx=n,qh.jsxs=n,qh}var tM;function pY(){return tM||(tM=1,W_.exports=mY()),W_.exports}var g=pY();const l$="harim.theme",Lk="harim.settings.v1";function c$(){try{const e=localStorage.getItem(l$);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(Lk);if(t){const r=JSON.parse(t)?.theme;if(r==="dark"||r==="light")return r}return null}catch{return null}}function u$(e){try{localStorage.setItem(l$,e);const t=localStorage.getItem(Lk),n=t?JSON.parse(t):{};localStorage.setItem(Lk,JSON.stringify({...n,theme:e}))}catch{}}function d$(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=c$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");d$(e)}catch{}})();var V_={exports:{}},Kh={},Z_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nM;function gY(){return nM||(nM=1,(function(e){function t(G,J){var Q=G.length;G.push(J);e:for(;0<Q;){var oe=Q-1>>>1,te=G[oe];if(0<i(te,J))G[oe]=J,G[Q]=te,Q=oe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Q=G.pop();if(Q!==J){G[0]=Q;e:for(var oe=0,te=G.length,z=te>>>1;oe<z;){var X=2*(oe+1)-1,re=G[X],ie=X+1,fe=G[ie];if(0>i(re,Q))ie<te&&0>i(fe,re)?(G[oe]=fe,G[ie]=Q,oe=ie):(G[oe]=re,G[X]=Q,oe=X);else if(ie<te&&0>i(fe,Q))G[oe]=fe,G[ie]=Q,oe=ie;else break e}}return J}function i(G,J){var Q=G.sortIndex-J.sortIndex;return Q!==0?Q:G.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,b=3,y=!1,k=!1,w=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function C(G){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=G)r(d),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(d)}}function M(G){if(w=!1,C(G),!k)if(n(u)!==null)k=!0,P||(P=!0,B());else{var J=n(d);J!==null&&Z(M,J.startTime-G)}}var P=!1,I=-1,U=5,W=-1;function q(){return _?!0:!(e.unstable_now()-W<U)}function H(){if(_=!1,P){var G=e.unstable_now();W=G;var J=!0;try{e:{k=!1,w&&(w=!1,O(I),I=-1),y=!0;var Q=b;try{t:{for(C(G),m=n(u);m!==null&&!(m.expirationTime>G&&q());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,b=m.priorityLevel;var te=oe(m.expirationTime<=G);if(G=e.unstable_now(),typeof te=="function"){m.callback=te,C(G),J=!0;break t}m===n(u)&&r(u),C(G)}else r(u);m=n(u)}if(m!==null)J=!0;else{var z=n(d);z!==null&&Z(M,z.startTime-G),J=!1}}break e}finally{m=null,b=Q,y=!1}J=void 0}}finally{J?B():P=!1}}}var B;if(typeof j=="function")B=function(){j(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=H,B=function(){V.postMessage(null)}}else B=function(){T(H,0)};function Z(G,J){I=T(function(){G(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(G){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var Q=b;b=J;try{return G()}finally{b=Q}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=b;b=G;try{return J()}finally{b=Q}},e.unstable_scheduleCallback=function(G,J,Q){var oe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,G={id:h++,callback:J,priorityLevel:G,startTime:Q,expirationTime:te,sortIndex:-1},Q>oe?(G.sortIndex=Q,t(d,G),n(u)===null&&G===n(d)&&(w?(O(I),I=-1):w=!0,Z(M,Q-oe))):(G.sortIndex=te,t(u,G),k||y||(k=!0,P||(P=!0,B()))),G},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(G){var J=b;return function(){var Q=b;b=J;try{return G.apply(this,arguments)}finally{b=Q}}}})(X_)),X_}var rM;function bY(){return rM||(rM=1,Z_.exports=gY()),Z_.exports}var J_={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM;function yY(){if(iM)return dt;iM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(z,X,re){this.props=z,this.context=X,this.refs=_,this.updater=re||k}T.prototype.isReactComponent={},T.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function O(){}O.prototype=T.prototype;function j(z,X,re){this.props=z,this.context=X,this.refs=_,this.updater=re||k}var C=j.prototype=new O;C.constructor=j,w(C,T.prototype),C.isPureReactComponent=!0;var M=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function W(z,X,re){var ie=re.ref;return{$$typeof:e,type:z,key:X,ref:ie!==void 0?ie:null,props:re}}function q(z,X){return W(z.type,X,z.props)}function H(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(re){return X[re]})}var K=/\/+/g;function V(z,X){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):X.toString(36)}function Z(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(P,P):(z.status="pending",z.then(function(X){z.status==="pending"&&(z.status="fulfilled",z.value=X)},function(X){z.status==="pending"&&(z.status="rejected",z.reason=X)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,X,re,ie,fe){var de=typeof z;(de==="undefined"||de==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(de){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case e:case t:pe=!0;break;case h:return pe=z._init,G(pe(z._payload),X,re,ie,fe)}}if(pe)return fe=fe(z),pe=ie===""?"."+V(z,0):ie,M(fe)?(re="",pe!=null&&(re=pe.replace(K,"$&/")+"/"),G(fe,X,re,"",function(Se){return Se})):fe!=null&&(H(fe)&&(fe=q(fe,re+(fe.key==null||z&&z.key===fe.key?"":(""+fe.key).replace(K,"$&/")+"/")+pe)),X.push(fe)),1;pe=0;var Ne=ie===""?".":ie+":";if(M(z))for(var se=0;se<z.length;se++)ie=z[se],de=Ne+V(ie,se),pe+=G(ie,X,re,de,fe);else if(se=y(z),typeof se=="function")for(z=se.call(z),se=0;!(ie=z.next()).done;)ie=ie.value,de=Ne+V(ie,se++),pe+=G(ie,X,re,de,fe);else if(de==="object"){if(typeof z.then=="function")return G(Z(z),X,re,ie,fe);throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return pe}function J(z,X,re){if(z==null)return z;var ie=[],fe=0;return G(z,ie,"","",function(de){return X.call(re,de,fe++)}),ie}function Q(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(re){(z._status===0||z._status===-1)&&(z._status=1,z._result=re)},function(re){(z._status===0||z._status===-1)&&(z._status=2,z._result=re)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var oe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},te={map:J,forEach:function(z,X,re){J(z,function(){X.apply(this,arguments)},re)},count:function(z){var X=0;return J(z,function(){X++}),X},toArray:function(z){return J(z,function(X){return X})||[]},only:function(z){if(!H(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return dt.Activity=m,dt.Children=te,dt.Component=T,dt.Fragment=n,dt.Profiler=i,dt.PureComponent=j,dt.StrictMode=r,dt.Suspense=u,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,dt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return I.H.useMemoCache(z)}},dt.cache=function(z){return function(){return z.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(z,X,re){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ie=w({},z.props),fe=z.key;if(X!=null)for(de in X.key!==void 0&&(fe=""+X.key),X)!U.call(X,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&X.ref===void 0||(ie[de]=X[de]);var de=arguments.length-2;if(de===1)ie.children=re;else if(1<de){for(var pe=Array(de),Ne=0;Ne<de;Ne++)pe[Ne]=arguments[Ne+2];ie.children=pe}return W(z.type,fe,ie)},dt.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},dt.createElement=function(z,X,re){var ie,fe={},de=null;if(X!=null)for(ie in X.key!==void 0&&(de=""+X.key),X)U.call(X,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(fe[ie]=X[ie]);var pe=arguments.length-2;if(pe===1)fe.children=re;else if(1<pe){for(var Ne=Array(pe),se=0;se<pe;se++)Ne[se]=arguments[se+2];fe.children=Ne}if(z&&z.defaultProps)for(ie in pe=z.defaultProps,pe)fe[ie]===void 0&&(fe[ie]=pe[ie]);return W(z,de,fe)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(z){return{$$typeof:l,render:z}},dt.isValidElement=H,dt.lazy=function(z){return{$$typeof:h,_payload:{_status:-1,_result:z},_init:Q}},dt.memo=function(z,X){return{$$typeof:d,type:z,compare:X===void 0?null:X}},dt.startTransition=function(z){var X=I.T,re={};I.T=re;try{var ie=z(),fe=I.S;fe!==null&&fe(re,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(P,oe)}catch(de){oe(de)}finally{X!==null&&re.types!==null&&(X.types=re.types),I.T=X}},dt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},dt.use=function(z){return I.H.use(z)},dt.useActionState=function(z,X,re){return I.H.useActionState(z,X,re)},dt.useCallback=function(z,X){return I.H.useCallback(z,X)},dt.useContext=function(z){return I.H.useContext(z)},dt.useDebugValue=function(){},dt.useDeferredValue=function(z,X){return I.H.useDeferredValue(z,X)},dt.useEffect=function(z,X){return I.H.useEffect(z,X)},dt.useEffectEvent=function(z){return I.H.useEffectEvent(z)},dt.useId=function(){return I.H.useId()},dt.useImperativeHandle=function(z,X,re){return I.H.useImperativeHandle(z,X,re)},dt.useInsertionEffect=function(z,X){return I.H.useInsertionEffect(z,X)},dt.useLayoutEffect=function(z,X){return I.H.useLayoutEffect(z,X)},dt.useMemo=function(z,X){return I.H.useMemo(z,X)},dt.useOptimistic=function(z,X){return I.H.useOptimistic(z,X)},dt.useReducer=function(z,X,re){return I.H.useReducer(z,X,re)},dt.useRef=function(z){return I.H.useRef(z)},dt.useState=function(z){return I.H.useState(z)},dt.useSyncExternalStore=function(z,X,re){return I.H.useSyncExternalStore(z,X,re)},dt.useTransition=function(){return I.H.useTransition()},dt.version="19.2.1",dt}var aM;function vf(){return aM||(aM=1,J_.exports=yY()),J_.exports}var Q_={exports:{}},Ir={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oM;function vY(){if(oM)return Ir;oM=1;var e=vf();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ir.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,h)},Ir.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Ir.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Ir.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ir.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:m,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ir.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Ir.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ir.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Ir.requestFormReset=function(u){r.d.r(u)},Ir.unstable_batchedUpdates=function(u,d){return u(d)},Ir.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Ir.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ir.version="19.2.1",Ir}var sM;function f$(){if(sM)return Q_.exports;sM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Q_.exports=vY(),Q_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lM;function xY(){if(lM)return Kh;lM=1;var e=bY(),t=vf(),n=f$();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,p=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(p=c.return),s=c.return;while(s)}return c.tag===3?p:null}function o(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function l(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var p=s,x=c;;){var A=p.return;if(A===null)break;var N=A.alternate;if(N===null){if(x=A.return,x!==null){p=x;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===p)return u(A),s;if(N===x)return u(A),c;N=N.sibling}throw Error(r(188))}if(p.return!==x.return)p=A,x=N;else{for(var $=!1,Y=A.child;Y;){if(Y===p){$=!0,p=A,x=N;break}if(Y===x){$=!0,x=A,p=N;break}Y=Y.sibling}if(!$){for(Y=N.child;Y;){if(Y===p){$=!0,p=N,x=A;break}if(Y===x){$=!0,x=N,p=A;break}Y=Y.sibling}if(!$)throw Error(r(189))}}if(p.alternate!==x)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?s:c}function h(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=h(s),c!==null)return c;s=s.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case W:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case j:return s.displayName||"Context";case O:return(s._context.displayName||"Context")+".Consumer";case C:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return c=s.displayName||null,c!==null?c:V(s.type)||"Memo";case U:c=s._payload,s=s._init;try{return V(s(c))}catch{}}return null}var Z=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},oe=[],te=-1;function z(s){return{current:s}}function X(s){0>te||(s.current=oe[te],oe[te]=null,te--)}function re(s,c){te++,oe[te]=s.current,s.current=c}var ie=z(null),fe=z(null),de=z(null),pe=z(null);function Ne(s,c){switch(re(de,c),re(fe,s),re(ie,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?SC(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=SC(c),s=kC(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(ie),re(ie,s)}function se(){X(ie),X(fe),X(de)}function Se(s){s.memoizedState!==null&&re(pe,s);var c=ie.current,p=kC(c,s.type);c!==p&&(re(fe,s),re(ie,p))}function ke(s){fe.current===s&&(X(ie),X(fe)),pe.current===s&&(X(pe),Fh._currentValue=Q)}var he,Ue;function Be(s){if(he===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);he=c&&c[1]||"",Ue=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+s+Ue}var Xe=!1;function Ae(s,c){if(!s||Xe)return"";Xe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ve){var ye=ve}Reflect.construct(s,[],Te)}else{try{Te.call()}catch(ve){ye=ve}s.call(Te.prototype)}}else{try{throw Error()}catch(ve){ye=ve}(Te=s())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ve){if(ve&&ye&&typeof ve.stack=="string")return[ve.stack,ye.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=x.DetermineComponentFrameRoot(),$=N[0],Y=N[1];if($&&Y){var ne=$.split(`
`),ge=Y.split(`
`);for(A=x=0;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;for(;A<ge.length&&!ge[A].includes("DetermineComponentFrameRoot");)A++;if(x===ne.length||A===ge.length)for(x=ne.length-1,A=ge.length-1;1<=x&&0<=A&&ne[x]!==ge[A];)A--;for(;1<=x&&0<=A;x--,A--)if(ne[x]!==ge[A]){if(x!==1||A!==1)do if(x--,A--,0>A||ne[x]!==ge[A]){var _e=`
`+ne[x].replace(" at new "," at ");return s.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",s.displayName)),_e}while(1<=x&&0<=A);break}}}finally{Xe=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?Be(p):""}function Ie(s,c){switch(s.tag){case 26:case 27:case 5:return Be(s.type);case 16:return Be("Lazy");case 13:return s.child!==c&&c!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Ae(s.type,!1);case 11:return Ae(s.type.render,!1);case 1:return Ae(s.type,!0);case 31:return Be("Activity");default:return""}}function $e(s){try{var c="",p=null;do c+=Ie(s,p),p=s,s=s.return;while(s);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var tt=Object.prototype.hasOwnProperty,bt=e.unstable_scheduleCallback,jt=e.unstable_cancelCallback,le=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Ye=e.unstable_now,Ze=e.unstable_getCurrentPriorityLevel,Ot=e.unstable_ImmediatePriority,mt=e.unstable_UserBlockingPriority,Ce=e.unstable_NormalPriority,ze=e.unstable_LowPriority,nt=e.unstable_IdlePriority,Tt=e.log,Lt=e.unstable_setDisableYieldValue,Bt=null,Xt=null;function _t(s){if(typeof Tt=="function"&&Lt(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(Bt,s)}catch{}}var Tn=Math.clz32?Math.clz32:Me,qo=Math.log,Hf=Math.LN2;function Me(s){return s>>>=0,s===0?32:31-(qo(s)/Hf|0)|0}var at=256,zt=262144,wr=4194304;function ti(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Lu(s,c,p){var x=s.pendingLanes;if(x===0)return 0;var A=0,N=s.suspendedLanes,$=s.pingedLanes;s=s.warmLanes;var Y=x&134217727;return Y!==0?(x=Y&~N,x!==0?A=ti(x):($&=Y,$!==0?A=ti($):p||(p=Y&~s,p!==0&&(A=ti(p))))):(Y=x&~N,Y!==0?A=ti(Y):$!==0?A=ti($):p||(p=x&~s,p!==0&&(A=ti(p)))),A===0?0:c!==0&&c!==A&&(c&N)===0&&(N=A&-A,p=c&-c,N>=p||N===32&&(p&4194048)!==0)?c:A}function sc(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function tw(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a0(){var s=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),s}function Gf(s){for(var c=[],p=0;31>p;p++)c.push(s);return c}function Ko(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function nw(s,c,p,x,A,N){var $=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var Y=s.entanglements,ne=s.expirationTimes,ge=s.hiddenUpdates;for(p=$&~p;0<p;){var _e=31-Tn(p),Te=1<<_e;Y[_e]=0,ne[_e]=-1;var ye=ge[_e];if(ye!==null)for(ge[_e]=null,_e=0;_e<ye.length;_e++){var ve=ye[_e];ve!==null&&(ve.lane&=-536870913)}p&=~Te}x!==0&&o0(s,x,0),N!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=N&~($&~c))}function o0(s,c,p){s.pendingLanes|=c,s.suspendedLanes&=~c;var x=31-Tn(c);s.entangledLanes|=c,s.entanglements[x]=s.entanglements[x]|1073741824|p&261930}function s0(s,c){var p=s.entangledLanes|=c;for(s=s.entanglements;p;){var x=31-Tn(p),A=1<<x;A&c|s[x]&c&&(s[x]|=c),p&=~A}}function l0(s,c){var p=c&-c;return p=(p&42)!==0?1:ni(p),(p&(s.suspendedLanes|c))!==0?0:p}function ni(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ke(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Yf(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:KC(s.type))}function qf(s,c){var p=J.p;try{return J.p=s,c()}finally{J.p=p}}var Ca=Math.random().toString(36).slice(2),zn="__reactFiber$"+Ca,lr="__reactProps$"+Ca,Wo="__reactContainer$"+Ca,lo="__reactEvents$"+Ca,c0="__reactListeners$"+Ca,rw="__reactHandles$"+Ca,u0="__reactResources$"+Ca,lc="__reactMarker$"+Ca;function Kf(s){delete s[zn],delete s[lr],delete s[lo],delete s[c0],delete s[rw]}function Vo(s){var c=s[zn];if(c)return c;for(var p=s.parentNode;p;){if(c=p[Wo]||p[zn]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(s=CC(s);s!==null;){if(p=s[zn])return p;s=CC(s)}return c}s=p,p=s.parentNode}return null}function Vs(s){if(s=s[zn]||s[Wo]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function co(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function Zs(s){var c=s[u0];return c||(c=s[u0]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Un(s){s[lc]=!0}var d0=new Set,f0={};function Zo(s,c){uo(s,c),uo(s+"Capture",c)}function uo(s,c){for(f0[s]=c,s=0;s<c.length;s++)d0.add(c[s])}var cc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wf={},Vf={};function uc(s){return tt.call(Vf,s)?!0:tt.call(Wf,s)?!1:cc.test(s)?Vf[s]=!0:(Wf[s]=!0,!1)}function yt(s,c,p){if(uc(c))if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+p)}}function Kt(s,c,p){if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+p)}}function ri(s,c,p,x){if(x===null)s.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(c,p,""+x)}}function Jn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Xo(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Zf(s,c,p){var x=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,N=x.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function($){p=""+$,N.call(this,$)}}),Object.defineProperty(s,c,{enumerable:x.enumerable}),{getValue:function(){return p},setValue:function($){p=""+$},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function ut(s){if(!s._valueTracker){var c=Xo(s)?"checked":"value";s._valueTracker=Zf(s,c,""+s[c])}}function fn(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var p=c.getValue(),x="";return s&&(x=Xo(s)?s.checked?"true":"false":s.value),s=x,s!==p?(c.setValue(s),!0):!1}function Xs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Iu=/[\n"\\]/g;function on(s){return s.replace(Iu,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Xf(s,c,p,x,A,N,$,Y){s.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.type=$:s.removeAttribute("type"),c!=null?$==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Jn(c)):s.value!==""+Jn(c)&&(s.value=""+Jn(c)):$!=="submit"&&$!=="reset"||s.removeAttribute("value"),c!=null?Ma(s,$,Jn(c)):p!=null?Ma(s,$,Jn(p)):x!=null&&s.removeAttribute("value"),A==null&&N!=null&&(s.defaultChecked=!!N),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+Jn(Y):s.removeAttribute("name")}function dc(s,c,p,x,A,N,$,Y){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.type=N),c!=null||p!=null){if(!(N!=="submit"&&N!=="reset"||c!=null)){ut(s);return}p=p!=null?""+Jn(p):"",c=c!=null?""+Jn(c):p,Y||c===s.value||(s.value=c),s.defaultValue=c}x=x??A,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=Y?s.checked:!!x,s.defaultChecked=!!x,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(s.name=$),ut(s)}function Ma(s,c,p){c==="number"&&Xs(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function Jt(s,c,p,x){if(s=s.options,c){c={};for(var A=0;A<p.length;A++)c["$"+p[A]]=!0;for(p=0;p<s.length;p++)A=c.hasOwnProperty("$"+s[p].value),s[p].selected!==A&&(s[p].selected=A),A&&x&&(s[p].defaultSelected=!0)}else{for(p=""+Jn(p),c=null,A=0;A<s.length;A++){if(s[A].value===p){s[A].selected=!0,x&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function fo(s,c,p){if(c!=null&&(c=""+Jn(c),c!==s.value&&(s.value=c),p==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=p!=null?""+Jn(p):""}function Js(s,c,p,x){if(c==null){if(x!=null){if(p!=null)throw Error(r(92));if(Z(x)){if(1<x.length)throw Error(r(93));x=x[0]}p=x}p==null&&(p=""),c=p}p=Jn(c),s.defaultValue=p,x=s.textContent,x===p&&x!==""&&x!==null&&(s.value=x),ut(s)}function Xi(s,c){if(c){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=c;return}}s.textContent=c}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qs(s,c,p){var x=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?x?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":x?s.setProperty(c,p):typeof p!="number"||p===0||Jf.has(c)?c==="float"?s.cssFloat=p:s[c]=(""+p).trim():s[c]=p+"px"}function $u(s,c,p){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,p!=null){for(var x in p)!p.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var A in c)x=c[A],c.hasOwnProperty(A)&&p[A]!==x&&Qs(s,A,x)}else for(var N in c)c.hasOwnProperty(N)&&Qs(s,N,c[N])}function fc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(s){return Qf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ii(){}var zu=null;function hc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var tl=null,lt=null;function Ei(s){var c=Vs(s);if(c&&(s=c.stateNode)){var p=s[lr]||null;e:switch(s=c.stateNode,c.type){case"input":if(Xf(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+on(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var x=p[c];if(x!==s&&x.form===s.form){var A=x[lr]||null;if(!A)throw Error(r(90));Xf(x,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<p.length;c++)x=p[c],x.form===s.form&&fn(x)}break e;case"textarea":fo(s,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Jt(s,!!p.multiple,c,!1)}}}var Ut=!1;function eh(s,c,p){if(Ut)return s(c,p);Ut=!0;try{var x=s(c);return x}finally{if(Ut=!1,(tl!==null||lt!==null)&&(lg(),tl&&(c=tl,s=lt,lt=tl=null,Ei(c),s)))for(c=0;c<s.length;c++)Ei(s[c])}}function Jo(s,c){var p=s.stateNode;if(p===null)return null;var x=p[lr]||null;if(x===null)return null;p=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(r(231,c,typeof p));return p}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mc=!1;if(ji)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){mc=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{mc=!1}var Ji=null,Qo=null,An=null;function ho(){if(An)return An;var s,c=Qo,p=c.length,x,A="value"in Ji?Ji.value:Ji.textContent,N=A.length;for(s=0;s<p&&c[s]===A[s];s++);var $=p-s;for(x=1;x<=$&&c[p-x]===A[N-x];x++);return An=A.slice(s,1<x?1-x:void 0)}function pc(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function gc(){return!0}function h0(){return!1}function _r(s){function c(p,x,A,N,$){this._reactName=p,this._targetInst=A,this.type=x,this.nativeEvent=N,this.target=$,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(p=s[Y],this[Y]=p?p(N):N[Y]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?gc:h0,this.isPropagationStopped=h0,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),c}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=_r(Da),nl=m({},Da,{view:0,detail:0}),St=_r(nl),th,Hr,Pa,bc=m({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pa&&(Pa&&s.type==="mousemove"?(th=s.screenX-Pa.screenX,Hr=s.screenY-Pa.screenY):Hr=th=0,Pa=s),th)},movementY:function(s){return"movementY"in s?s.movementY:Hr}}),m0=_r(bc),nh=m({},bc,{dataTransfer:0}),iw=_r(nh),p0=m({},nl,{relatedTarget:0}),rh=_r(p0),aw=m({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=_r(aw),ow=m({},Da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qi=_r(ow),sw=m({},Da,{data:0}),ah=_r(sw),mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=b0[s])?!!c[s]:!1}function sh(){return oh}var y0=m({},nl,{key:function(s){if(s.key){var c=mo[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=pc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?g0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sh,charCode:function(s){return s.type==="keypress"?pc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?pc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v0=_r(y0),lw=m({},bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=_r(lw),lh=m({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sh}),cw=_r(lh),w0=m({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=_r(w0),Fu=m({},bc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),es=_r(Fu),uw=m({},Da,{newState:0,oldState:0}),yc=_r(uw),ai=[9,13,27,32],Hu=ji&&"CompositionEvent"in window,rl=null;ji&&"documentMode"in document&&(rl=document.documentMode);var dw=ji&&"TextEvent"in window&&!rl,Gu=ji&&(!Hu||rl&&8<rl&&11>=rl),Yu=" ",S0=!1;function k0(s,c){switch(s){case"keyup":return ai.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var il=!1;function Ai(s,c){switch(s){case"compositionend":return ch(c);case"keypress":return c.which!==32?null:(S0=!0,Yu);case"textInput":return s=c.data,s===Yu&&S0?null:s;default:return null}}function al(s,c){if(il)return s==="compositionend"||!Hu&&k0(s,c)?(s=ho(),An=Qo=Ji=null,il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Gu&&c.locale!=="ko"?null:c.data;default:return null}}var fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ea(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!fw[s.type]:c==="textarea"}function E0(s,c,p,x){tl?lt?lt.push(x):lt=[x]:tl=x,c=pg(c,"onChange"),0<c.length&&(p=new Uu("onChange","change",null,p,x),s.push({event:p,listeners:c}))}var ta=null,vc=null;function xc(s){bC(s,0)}function wc(s){var c=co(s);if(fn(c))return s}function _c(s,c){if(s==="change")return c}var j0=!1;if(ji){var na;if(ji){var ol="oninput"in document;if(!ol){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),ol=typeof T0.oninput=="function"}na=ol}else na=!1;j0=na&&(!document.documentMode||9<document.documentMode)}function qu(){ta&&(ta.detachEvent("onpropertychange",A0),vc=ta=null)}function A0(s){if(s.propertyName==="value"&&wc(vc)){var c=[];E0(c,vc,s,hc(s)),eh(xc,c)}}function Ra(s,c,p){s==="focusin"?(qu(),ta=c,vc=p,ta.attachEvent("onpropertychange",A0)):s==="focusout"&&qu()}function hw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return wc(vc)}function sl(s,c){if(s==="click")return wc(c)}function mw(s,c){if(s==="input"||s==="change")return wc(c)}function La(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var cr=typeof Object.is=="function"?Object.is:La;function ll(s,c){if(cr(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var p=Object.keys(s),x=Object.keys(c);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var A=p[x];if(!tt.call(c,A)||!cr(s[A],c[A]))return!1}return!0}function Ku(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Sc(s,c){var p=Ku(s);s=0;for(var x;p;){if(p.nodeType===3){if(x=s+p.textContent.length,s<=c&&x>=c)return{node:p,offset:c-s};s=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ku(p)}}function Wu(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?Wu(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function kc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Xs(s.document);c instanceof s.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)s=c.contentWindow;else break;c=Xs(s.document)}return c}function po(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var Vu=ji&&"documentMode"in document&&11>=document.documentMode,go=null,Zu=null,Ec=null,cl=!1;function N0(s,c,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;cl||go==null||go!==Xs(x)||(x=go,"selectionStart"in x&&po(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ec&&ll(Ec,x)||(Ec=x,x=pg(Zu,"onSelect"),0<x.length&&(c=new Uu("onSelect","select",null,c,p),s.push({event:c,listeners:x}),c.target=go)))}function bo(s,c){var p={};return p[s.toLowerCase()]=c.toLowerCase(),p["Webkit"+s]="webkit"+c,p["Moz"+s]="moz"+c,p}var ul={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionrun:bo("Transition","TransitionRun"),transitionstart:bo("Transition","TransitionStart"),transitioncancel:bo("Transition","TransitionCancel"),transitionend:bo("Transition","TransitionEnd")},Xu={},O0={};ji&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function ur(s){if(Xu[s])return Xu[s];if(!ul[s])return s;var c=ul[s],p;for(p in c)if(c.hasOwnProperty(p)&&p in O0)return Xu[s]=c[p];return s}var jc=ur("animationend"),C0=ur("animationiteration"),Tc=ur("animationstart"),pw=ur("transitionrun"),M0=ur("transitionstart"),gw=ur("transitioncancel"),dl=ur("transitionend"),D0=new Map,yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yo.push("scrollEnd");function oi(s,c){D0.set(s,c),Zo(c,[s])}var Ac=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},si=[],Rr=0,Ju=0;function Nc(){for(var s=Rr,c=Ju=Rr=0;c<s;){var p=si[c];si[c++]=null;var x=si[c];si[c++]=null;var A=si[c];si[c++]=null;var N=si[c];if(si[c++]=null,x!==null&&A!==null){var $=x.pending;$===null?A.next=A:(A.next=$.next,$.next=A),x.pending=A}N!==0&&fl(p,A,N)}}function vo(s,c,p,x){si[Rr++]=s,si[Rr++]=c,si[Rr++]=p,si[Rr++]=x,Ju|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function uh(s,c,p,x){return vo(s,c,p,x),Oc(s)}function ra(s,c){return vo(s,null,null,c),Oc(s)}function fl(s,c,p){s.lanes|=p;var x=s.alternate;x!==null&&(x.lanes|=p);for(var A=!1,N=s.return;N!==null;)N.childLanes|=p,x=N.alternate,x!==null&&(x.childLanes|=p),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(A=!0)),s=N,N=N.return;return s.tag===3?(N=s.stateNode,A&&c!==null&&(A=31-Tn(p),s=N.hiddenUpdates,x=s[A],x===null?s[A]=[c]:x.push(c),c.lane=p|536870912),N):null}function Oc(s){if(50<Rh)throw Rh=0,y_=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var ts={};function bw(s,c,p,x){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(s,c,p,x){return new bw(s,c,p,x)}function Qu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ia(s,c){var p=s.alternate;return p===null?(p=Lr(s.tag,c,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=c,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,c=s.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function dh(s,c){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,c=p.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Cc(s,c,p,x,A,N){var $=0;if(x=s,typeof s=="function")Qu(s)&&($=1);else if(typeof s=="string")$=nY(s,p,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case W:return s=Lr(31,p,c,A),s.elementType=W,s.lanes=N,s;case w:return ns(p.children,A,N,c);case _:$=8,A|=24;break;case T:return s=Lr(12,p,c,A|2),s.elementType=T,s.lanes=N,s;case M:return s=Lr(13,p,c,A),s.elementType=M,s.lanes=N,s;case P:return s=Lr(19,p,c,A),s.elementType=P,s.lanes=N,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:$=10;break e;case O:$=9;break e;case C:$=11;break e;case I:$=14;break e;case U:$=16,x=null;break e}$=29,p=Error(r(130,s===null?"null":typeof s,"")),x=null}return c=Lr($,p,c,A),c.elementType=s,c.type=x,c.lanes=N,c}function ns(s,c,p,x){return s=Lr(7,s,x,c),s.lanes=p,s}function ed(s,c,p){return s=Lr(6,s,null,c),s.lanes=p,s}function fh(s){var c=Lr(18,null,null,0);return c.stateNode=s,c}function hh(s,c,p){return c=Lr(4,s.children!==null?s.children:[],s.key,c),c.lanes=p,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var f=new WeakMap;function v(s,c){if(typeof s=="object"&&s!==null){var p=f.get(s);return p!==void 0?p:(c={value:s,source:c,stack:$e(c)},f.set(s,c),c)}return{value:s,source:c,stack:$e(c)}}var E=[],D=0,R=null,F=0,ee=[],ue=0,be=null,je=1,Le="";function Ve(s,c){E[D++]=F,E[D++]=R,R=s,F=c}function pt(s,c,p){ee[ue++]=je,ee[ue++]=Le,ee[ue++]=be,be=s;var x=je;s=Le;var A=32-Tn(x)-1;x&=~(1<<A),p+=1;var N=32-Tn(c)+A;if(30<N){var $=A-A%5;N=(x&(1<<$)-1).toString(32),x>>=$,A-=$,je=1<<32-Tn(c)+A|p<<A|x,Le=N+s}else je=1<<N|p<<A|x,Le=s}function Qn(s){s.return!==null&&(Ve(s,1),pt(s,1,0))}function Nn(s){for(;s===R;)R=E[--D],E[D]=null,F=E[--D],E[D]=null;for(;s===be;)be=ee[--ue],ee[ue]=null,Le=ee[--ue],ee[ue]=null,je=ee[--ue],ee[ue]=null}function Gr(s,c){ee[ue++]=je,ee[ue++]=Le,ee[ue++]=be,je=c.id,Le=c.overflow,be=s}var Ct=null,Mt=null,vt=!1,xo=null,li=!1,td=Error(r(519));function wo(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(v(c,s)),td}function mh(s){var c=s.stateNode,p=s.type,x=s.memoizedProps;switch(c[zn]=s,c[lr]=x,p){case"dialog":wt("cancel",c),wt("close",c);break;case"iframe":case"object":case"embed":wt("load",c);break;case"video":case"audio":for(p=0;p<Ih.length;p++)wt(Ih[p],c);break;case"source":wt("error",c);break;case"img":case"image":case"link":wt("error",c),wt("load",c);break;case"details":wt("toggle",c);break;case"input":wt("invalid",c),dc(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":wt("invalid",c);break;case"textarea":wt("invalid",c),Js(c,x.value,x.defaultValue,x.children)}p=x.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||x.suppressHydrationWarning===!0||wC(c.textContent,p)?(x.popover!=null&&(wt("beforetoggle",c),wt("toggle",c)),x.onScroll!=null&&wt("scroll",c),x.onScrollEnd!=null&&wt("scrollend",c),x.onClick!=null&&(c.onclick=ii),c=!0):c=!1,c||wo(s,!0)}function _n(s){for(Ct=s.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:Ct=Ct.return}}function Ia(s){if(s!==Ct)return!1;if(!vt)return _n(s),vt=!0,!1;var c=s.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||D_(s.type,s.memoizedProps)),p=!p),p&&Mt&&wo(s),_n(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=OC(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=OC(s)}else c===27?(c=Mt,jl(s.type)?(s=$_,$_=null,Mt=s):Mt=c):Mt=Ct?oa(s.stateNode.nextSibling):null;return!0}function rs(){Mt=Ct=null,vt=!1}function ph(){var s=xo;return s!==null&&(fi===null?fi=s:fi.push.apply(fi,s),xo=null),s}function Mc(s){xo===null?xo=[s]:xo.push(s)}var Dc=z(null),_o=null,$a=null;function hl(s,c,p){re(Dc,c._currentValue),c._currentValue=p}function is(s){s._currentValue=Dc.current,X(Dc)}function yw(s,c,p){for(;s!==null;){var x=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),s===p)break;s=s.return}}function vw(s,c,p,x){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var N=A.dependencies;if(N!==null){var $=A.child;N=N.firstContext;e:for(;N!==null;){var Y=N;N=A;for(var ne=0;ne<c.length;ne++)if(Y.context===c[ne]){N.lanes|=p,Y=N.alternate,Y!==null&&(Y.lanes|=p),yw(N.return,p,s),x||($=null);break e}N=Y.next}}else if(A.tag===18){if($=A.return,$===null)throw Error(r(341));$.lanes|=p,N=$.alternate,N!==null&&(N.lanes|=p),yw($,p,s),$=null}else $=A.child;if($!==null)$.return=A;else for($=A;$!==null;){if($===s){$=null;break}if(A=$.sibling,A!==null){A.return=$.return,$=A;break}$=$.return}A=$}}function nd(s,c,p,x){s=null;for(var A=c,N=!1;A!==null;){if(!N){if((A.flags&524288)!==0)N=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var $=A.alternate;if($===null)throw Error(r(387));if($=$.memoizedProps,$!==null){var Y=A.type;cr(A.pendingProps.value,$.value)||(s!==null?s.push(Y):s=[Y])}}else if(A===pe.current){if($=A.alternate,$===null)throw Error(r(387));$.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(Fh):s=[Fh])}A=A.return}s!==null&&vw(c,s,p,x),c.flags|=262144}function P0(s){for(s=s.firstContext;s!==null;){if(!cr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Pc(s){_o=s,$a=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Sr(s){return oN(_o,s)}function R0(s,c){return _o===null&&Pc(s),oN(s,c)}function oN(s,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},$a===null){if(s===null)throw Error(r(308));$a=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else $a=$a.next=c;return p}var JH=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(p,x){s.push(x)}};this.abort=function(){c.aborted=!0,s.forEach(function(p){return p()})}},QH=e.unstable_scheduleCallback,eG=e.unstable_NormalPriority,Fn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xw(){return{controller:new JH,data:new Map,refCount:0}}function gh(s){s.refCount--,s.refCount===0&&QH(eG,function(){s.controller.abort()})}var bh=null,ww=0,rd=0,id=null;function tG(s,c){if(bh===null){var p=bh=[];ww=0,rd=k_(),id={status:"pending",value:void 0,then:function(x){p.push(x)}}}return ww++,c.then(sN,sN),c}function sN(){if(--ww===0&&bh!==null){id!==null&&(id.status="fulfilled");var s=bh;bh=null,rd=0,id=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function nG(s,c){var p=[],x={status:"pending",value:null,reason:null,then:function(A){p.push(A)}};return s.then(function(){x.status="fulfilled",x.value=c;for(var A=0;A<p.length;A++)(0,p[A])(c)},function(A){for(x.status="rejected",x.reason=A,A=0;A<p.length;A++)(0,p[A])(void 0)}),x}var lN=G.S;G.S=function(s,c){YO=Ye(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&tG(s,c),lN!==null&&lN(s,c)};var Rc=z(null);function _w(){var s=Rc.current;return s!==null?s:Qt.pooledCache}function L0(s,c){c===null?re(Rc,Rc.current):re(Rc,c.pool)}function cN(){var s=_w();return s===null?null:{parent:Fn._currentValue,pool:s}}var ad=Error(r(460)),Sw=Error(r(474)),I0=Error(r(542)),$0={then:function(){}};function uN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dN(s,c,p){switch(p=s[p],p===void 0?s.push(c):p!==c&&(c.then(ii,ii),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,hN(s),s;default:if(typeof c.status=="string")c.then(ii,ii);else{if(s=Qt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(x){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=x}},function(x){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,hN(s),s}throw Ic=c,ad}}function Lc(s){try{var c=s._init;return c(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Ic=p,ad):p}}var Ic=null;function fN(){if(Ic===null)throw Error(r(459));var s=Ic;return Ic=null,s}function hN(s){if(s===ad||s===I0)throw Error(r(483))}var od=null,yh=0;function B0(s){var c=yh;return yh+=1,od===null&&(od=[]),dN(od,s,c)}function vh(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function z0(s,c){throw c.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function mN(s){function c(ce,ae){if(s){var me=ce.deletions;me===null?(ce.deletions=[ae],ce.flags|=16):me.push(ae)}}function p(ce,ae){if(!s)return null;for(;ae!==null;)c(ce,ae),ae=ae.sibling;return null}function x(ce){for(var ae=new Map;ce!==null;)ce.key!==null?ae.set(ce.key,ce):ae.set(ce.index,ce),ce=ce.sibling;return ae}function A(ce,ae){return ce=ia(ce,ae),ce.index=0,ce.sibling=null,ce}function N(ce,ae,me){return ce.index=me,s?(me=ce.alternate,me!==null?(me=me.index,me<ae?(ce.flags|=67108866,ae):me):(ce.flags|=67108866,ae)):(ce.flags|=1048576,ae)}function $(ce){return s&&ce.alternate===null&&(ce.flags|=67108866),ce}function Y(ce,ae,me,Ee){return ae===null||ae.tag!==6?(ae=ed(me,ce.mode,Ee),ae.return=ce,ae):(ae=A(ae,me),ae.return=ce,ae)}function ne(ce,ae,me,Ee){var rt=me.type;return rt===w?_e(ce,ae,me.props.children,Ee,me.key):ae!==null&&(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===U&&Lc(rt)===ae.type)?(ae=A(ae,me.props),vh(ae,me),ae.return=ce,ae):(ae=Cc(me.type,me.key,me.props,null,ce.mode,Ee),vh(ae,me),ae.return=ce,ae)}function ge(ce,ae,me,Ee){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==me.containerInfo||ae.stateNode.implementation!==me.implementation?(ae=hh(me,ce.mode,Ee),ae.return=ce,ae):(ae=A(ae,me.children||[]),ae.return=ce,ae)}function _e(ce,ae,me,Ee,rt){return ae===null||ae.tag!==7?(ae=ns(me,ce.mode,Ee,rt),ae.return=ce,ae):(ae=A(ae,me),ae.return=ce,ae)}function Te(ce,ae,me){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=ed(""+ae,ce.mode,me),ae.return=ce,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return me=Cc(ae.type,ae.key,ae.props,null,ce.mode,me),vh(me,ae),me.return=ce,me;case k:return ae=hh(ae,ce.mode,me),ae.return=ce,ae;case U:return ae=Lc(ae),Te(ce,ae,me)}if(Z(ae)||B(ae))return ae=ns(ae,ce.mode,me,null),ae.return=ce,ae;if(typeof ae.then=="function")return Te(ce,B0(ae),me);if(ae.$$typeof===j)return Te(ce,R0(ce,ae),me);z0(ce,ae)}return null}function ye(ce,ae,me,Ee){var rt=ae!==null?ae.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return rt!==null?null:Y(ce,ae,""+me,Ee);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return me.key===rt?ne(ce,ae,me,Ee):null;case k:return me.key===rt?ge(ce,ae,me,Ee):null;case U:return me=Lc(me),ye(ce,ae,me,Ee)}if(Z(me)||B(me))return rt!==null?null:_e(ce,ae,me,Ee,null);if(typeof me.then=="function")return ye(ce,ae,B0(me),Ee);if(me.$$typeof===j)return ye(ce,ae,R0(ce,me),Ee);z0(ce,me)}return null}function ve(ce,ae,me,Ee,rt){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ce=ce.get(me)||null,Y(ae,ce,""+Ee,rt);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:return ce=ce.get(Ee.key===null?me:Ee.key)||null,ne(ae,ce,Ee,rt);case k:return ce=ce.get(Ee.key===null?me:Ee.key)||null,ge(ae,ce,Ee,rt);case U:return Ee=Lc(Ee),ve(ce,ae,me,Ee,rt)}if(Z(Ee)||B(Ee))return ce=ce.get(me)||null,_e(ae,ce,Ee,rt,null);if(typeof Ee.then=="function")return ve(ce,ae,me,B0(Ee),rt);if(Ee.$$typeof===j)return ve(ce,ae,me,R0(ae,Ee),rt);z0(ae,Ee)}return null}function He(ce,ae,me,Ee){for(var rt=null,Dt=null,qe=ae,gt=ae=0,Et=null;qe!==null&&gt<me.length;gt++){qe.index>gt?(Et=qe,qe=null):Et=qe.sibling;var Pt=ye(ce,qe,me[gt],Ee);if(Pt===null){qe===null&&(qe=Et);break}s&&qe&&Pt.alternate===null&&c(ce,qe),ae=N(Pt,ae,gt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt,qe=Et}if(gt===me.length)return p(ce,qe),vt&&Ve(ce,gt),rt;if(qe===null){for(;gt<me.length;gt++)qe=Te(ce,me[gt],Ee),qe!==null&&(ae=N(qe,ae,gt),Dt===null?rt=qe:Dt.sibling=qe,Dt=qe);return vt&&Ve(ce,gt),rt}for(qe=x(qe);gt<me.length;gt++)Et=ve(qe,ce,gt,me[gt],Ee),Et!==null&&(s&&Et.alternate!==null&&qe.delete(Et.key===null?gt:Et.key),ae=N(Et,ae,gt),Dt===null?rt=Et:Dt.sibling=Et,Dt=Et);return s&&qe.forEach(function(Cl){return c(ce,Cl)}),vt&&Ve(ce,gt),rt}function ot(ce,ae,me,Ee){if(me==null)throw Error(r(151));for(var rt=null,Dt=null,qe=ae,gt=ae=0,Et=null,Pt=me.next();qe!==null&&!Pt.done;gt++,Pt=me.next()){qe.index>gt?(Et=qe,qe=null):Et=qe.sibling;var Cl=ye(ce,qe,Pt.value,Ee);if(Cl===null){qe===null&&(qe=Et);break}s&&qe&&Cl.alternate===null&&c(ce,qe),ae=N(Cl,ae,gt),Dt===null?rt=Cl:Dt.sibling=Cl,Dt=Cl,qe=Et}if(Pt.done)return p(ce,qe),vt&&Ve(ce,gt),rt;if(qe===null){for(;!Pt.done;gt++,Pt=me.next())Pt=Te(ce,Pt.value,Ee),Pt!==null&&(ae=N(Pt,ae,gt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt);return vt&&Ve(ce,gt),rt}for(qe=x(qe);!Pt.done;gt++,Pt=me.next())Pt=ve(qe,ce,gt,Pt.value,Ee),Pt!==null&&(s&&Pt.alternate!==null&&qe.delete(Pt.key===null?gt:Pt.key),ae=N(Pt,ae,gt),Dt===null?rt=Pt:Dt.sibling=Pt,Dt=Pt);return s&&qe.forEach(function(hY){return c(ce,hY)}),vt&&Ve(ce,gt),rt}function Zt(ce,ae,me,Ee){if(typeof me=="object"&&me!==null&&me.type===w&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case y:e:{for(var rt=me.key;ae!==null;){if(ae.key===rt){if(rt=me.type,rt===w){if(ae.tag===7){p(ce,ae.sibling),Ee=A(ae,me.props.children),Ee.return=ce,ce=Ee;break e}}else if(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===U&&Lc(rt)===ae.type){p(ce,ae.sibling),Ee=A(ae,me.props),vh(Ee,me),Ee.return=ce,ce=Ee;break e}p(ce,ae);break}else c(ce,ae);ae=ae.sibling}me.type===w?(Ee=ns(me.props.children,ce.mode,Ee,me.key),Ee.return=ce,ce=Ee):(Ee=Cc(me.type,me.key,me.props,null,ce.mode,Ee),vh(Ee,me),Ee.return=ce,ce=Ee)}return $(ce);case k:e:{for(rt=me.key;ae!==null;){if(ae.key===rt)if(ae.tag===4&&ae.stateNode.containerInfo===me.containerInfo&&ae.stateNode.implementation===me.implementation){p(ce,ae.sibling),Ee=A(ae,me.children||[]),Ee.return=ce,ce=Ee;break e}else{p(ce,ae);break}else c(ce,ae);ae=ae.sibling}Ee=hh(me,ce.mode,Ee),Ee.return=ce,ce=Ee}return $(ce);case U:return me=Lc(me),Zt(ce,ae,me,Ee)}if(Z(me))return He(ce,ae,me,Ee);if(B(me)){if(rt=B(me),typeof rt!="function")throw Error(r(150));return me=rt.call(me),ot(ce,ae,me,Ee)}if(typeof me.then=="function")return Zt(ce,ae,B0(me),Ee);if(me.$$typeof===j)return Zt(ce,ae,R0(ce,me),Ee);z0(ce,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ae!==null&&ae.tag===6?(p(ce,ae.sibling),Ee=A(ae,me),Ee.return=ce,ce=Ee):(p(ce,ae),Ee=ed(me,ce.mode,Ee),Ee.return=ce,ce=Ee),$(ce)):p(ce,ae)}return function(ce,ae,me,Ee){try{yh=0;var rt=Zt(ce,ae,me,Ee);return od=null,rt}catch(qe){if(qe===ad||qe===I0)throw qe;var Dt=Lr(29,qe,null,ce.mode);return Dt.lanes=Ee,Dt.return=ce,Dt}finally{}}}var $c=mN(!0),pN=mN(!1),ml=!1;function kw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ew(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gl(s,c,p){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,(It&2)!==0){var A=x.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),x.pending=c,c=Oc(s),fl(s,null,p),c}return vo(s,x,c,p),Oc(s)}function xh(s,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var x=c.lanes;x&=s.pendingLanes,p|=x,c.lanes=p,s0(s,p)}}function jw(s,c){var p=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var A=null,N=null;if(p=p.firstBaseUpdate,p!==null){do{var $={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};N===null?A=N=$:N=N.next=$,p=p.next}while(p!==null);N===null?A=N=c:N=N.next=c}else A=N=c;p={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:x.shared,callbacks:x.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=c:s.next=c,p.lastBaseUpdate=c}var Tw=!1;function wh(){if(Tw){var s=id;if(s!==null)throw s}}function _h(s,c,p,x){Tw=!1;var A=s.updateQueue;ml=!1;var N=A.firstBaseUpdate,$=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var ne=Y,ge=ne.next;ne.next=null,$===null?N=ge:$.next=ge,$=ne;var _e=s.alternate;_e!==null&&(_e=_e.updateQueue,Y=_e.lastBaseUpdate,Y!==$&&(Y===null?_e.firstBaseUpdate=ge:Y.next=ge,_e.lastBaseUpdate=ne))}if(N!==null){var Te=A.baseState;$=0,_e=ge=ne=null,Y=N;do{var ye=Y.lane&-536870913,ve=ye!==Y.lane;if(ve?(kt&ye)===ye:(x&ye)===ye){ye!==0&&ye===rd&&(Tw=!0),_e!==null&&(_e=_e.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var He=s,ot=Y;ye=c;var Zt=p;switch(ot.tag){case 1:if(He=ot.payload,typeof He=="function"){Te=He.call(Zt,Te,ye);break e}Te=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=ot.payload,ye=typeof He=="function"?He.call(Zt,Te,ye):He,ye==null)break e;Te=m({},Te,ye);break e;case 2:ml=!0}}ye=Y.callback,ye!==null&&(s.flags|=64,ve&&(s.flags|=8192),ve=A.callbacks,ve===null?A.callbacks=[ye]:ve.push(ye))}else ve={lane:ye,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},_e===null?(ge=_e=ve,ne=Te):_e=_e.next=ve,$|=ye;if(Y=Y.next,Y===null){if(Y=A.shared.pending,Y===null)break;ve=Y,Y=ve.next,ve.next=null,A.lastBaseUpdate=ve,A.shared.pending=null}}while(!0);_e===null&&(ne=Te),A.baseState=ne,A.firstBaseUpdate=ge,A.lastBaseUpdate=_e,N===null&&(A.shared.lanes=0),wl|=$,s.lanes=$,s.memoizedState=Te}}function gN(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function bN(s,c){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)gN(p[s],c)}var sd=z(null),U0=z(0);function yN(s,c){s=hs,re(U0,s),re(sd,c),hs=s|c.baseLanes}function Aw(){re(U0,hs),re(sd,sd.current)}function Nw(){hs=U0.current,X(sd),X(U0)}var Ni=z(null),aa=null;function bl(s){var c=s.alternate;re(Rn,Rn.current&1),re(Ni,s),aa===null&&(c===null||sd.current!==null||c.memoizedState!==null)&&(aa=s)}function Ow(s){re(Rn,Rn.current),re(Ni,s),aa===null&&(aa=s)}function vN(s){s.tag===22?(re(Rn,Rn.current),re(Ni,s),aa===null&&(aa=s)):yl()}function yl(){re(Rn,Rn.current),re(Ni,Ni.current)}function Oi(s){X(Ni),aa===s&&(aa=null),X(Rn)}var Rn=z(0);function F0(s){for(var c=s;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||L_(p)||I_(p)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var as=0,ft=null,Wt=null,Hn=null,H0=!1,ld=!1,Bc=!1,G0=0,Sh=0,cd=null,rG=0;function On(){throw Error(r(321))}function Cw(s,c){if(c===null)return!1;for(var p=0;p<c.length&&p<s.length;p++)if(!cr(s[p],c[p]))return!1;return!0}function Mw(s,c,p,x,A,N){return as=N,ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,G.H=s===null||s.memoizedState===null?nO:Kw,Bc=!1,N=p(x,A),Bc=!1,ld&&(N=wN(c,p,x,A)),xN(s),N}function xN(s){G.H=jh;var c=Wt!==null&&Wt.next!==null;if(as=0,Hn=Wt=ft=null,H0=!1,Sh=0,cd=null,c)throw Error(r(300));s===null||Gn||(s=s.dependencies,s!==null&&P0(s)&&(Gn=!0))}function wN(s,c,p,x){ft=s;var A=0;do{if(ld&&(cd=null),Sh=0,ld=!1,25<=A)throw Error(r(301));if(A+=1,Hn=Wt=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}G.H=rO,N=c(p,x)}while(ld);return N}function iG(){var s=G.H,c=s.useState()[0];return c=typeof c.then=="function"?kh(c):c,s=s.useState()[0],(Wt!==null?Wt.memoizedState:null)!==s&&(ft.flags|=1024),c}function Dw(){var s=G0!==0;return G0=0,s}function Pw(s,c,p){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~p}function Rw(s){if(H0){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}H0=!1}as=0,Hn=Wt=ft=null,ld=!1,Sh=G0=0,cd=null}function Yr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?ft.memoizedState=Hn=s:Hn=Hn.next=s,Hn}function Ln(){if(Wt===null){var s=ft.alternate;s=s!==null?s.memoizedState:null}else s=Wt.next;var c=Hn===null?ft.memoizedState:Hn.next;if(c!==null)Hn=c,Wt=s;else{if(s===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Wt=s,s={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Hn===null?ft.memoizedState=Hn=s:Hn=Hn.next=s}return Hn}function Y0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kh(s){var c=Sh;return Sh+=1,cd===null&&(cd=[]),s=dN(cd,s,c),c=ft,(Hn===null?c.memoizedState:Hn.next)===null&&(c=c.alternate,G.H=c===null||c.memoizedState===null?nO:Kw),s}function q0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kh(s);if(s.$$typeof===j)return Sr(s)}throw Error(r(438,String(s)))}function Lw(s){var c=null,p=ft.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var x=ft.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Y0(),ft.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(s),x=0;x<s;x++)p[x]=q;return c.index++,p}function os(s,c){return typeof c=="function"?c(s):c}function K0(s){var c=Ln();return Iw(c,Wt,s)}function Iw(s,c,p){var x=s.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=p;var A=s.baseQueue,N=x.pending;if(N!==null){if(A!==null){var $=A.next;A.next=N.next,N.next=$}c.baseQueue=A=N,x.pending=null}if(N=s.baseState,A===null)s.memoizedState=N;else{c=A.next;var Y=$=null,ne=null,ge=c,_e=!1;do{var Te=ge.lane&-536870913;if(Te!==ge.lane?(kt&Te)===Te:(as&Te)===Te){var ye=ge.revertLane;if(ye===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Te===rd&&(_e=!0);else if((as&ye)===ye){ge=ge.next,ye===rd&&(_e=!0);continue}else Te={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(Y=ne=Te,$=N):ne=ne.next=Te,ft.lanes|=ye,wl|=ye;Te=ge.action,Bc&&p(N,Te),N=ge.hasEagerState?ge.eagerState:p(N,Te)}else ye={lane:Te,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(Y=ne=ye,$=N):ne=ne.next=ye,ft.lanes|=Te,wl|=Te;ge=ge.next}while(ge!==null&&ge!==c);if(ne===null?$=N:ne.next=Y,!cr(N,s.memoizedState)&&(Gn=!0,_e&&(p=id,p!==null)))throw p;s.memoizedState=N,s.baseState=$,s.baseQueue=ne,x.lastRenderedState=N}return A===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function $w(s){var c=Ln(),p=c.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var x=p.dispatch,A=p.pending,N=c.memoizedState;if(A!==null){p.pending=null;var $=A=A.next;do N=s(N,$.action),$=$.next;while($!==A);cr(N,c.memoizedState)||(Gn=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),p.lastRenderedState=N}return[N,x]}function _N(s,c,p){var x=ft,A=Ln(),N=vt;if(N){if(p===void 0)throw Error(r(407));p=p()}else p=c();var $=!cr((Wt||A).memoizedState,p);if($&&(A.memoizedState=p,Gn=!0),A=A.queue,Uw(EN.bind(null,x,A,s),[s]),A.getSnapshot!==c||$||Hn!==null&&Hn.memoizedState.tag&1){if(x.flags|=2048,ud(9,{destroy:void 0},kN.bind(null,x,A,p,c),null),Qt===null)throw Error(r(349));N||(as&127)!==0||SN(x,c,p)}return p}function SN(s,c,p){s.flags|=16384,s={getSnapshot:c,value:p},c=ft.updateQueue,c===null?(c=Y0(),ft.updateQueue=c,c.stores=[s]):(p=c.stores,p===null?c.stores=[s]:p.push(s))}function kN(s,c,p,x){c.value=p,c.getSnapshot=x,jN(c)&&TN(s)}function EN(s,c,p){return p(function(){jN(c)&&TN(s)})}function jN(s){var c=s.getSnapshot;s=s.value;try{var p=c();return!cr(s,p)}catch{return!0}}function TN(s){var c=ra(s,2);c!==null&&hi(c,s,2)}function Bw(s){var c=Yr();if(typeof s=="function"){var p=s;if(s=p(),Bc){_t(!0);try{p()}finally{_t(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:s},c}function AN(s,c,p,x){return s.baseState=p,Iw(s,Wt,typeof x=="function"?x:os)}function aG(s,c,p,x,A){if(Z0(s))throw Error(r(485));if(s=c.action,s!==null){var N={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){N.listeners.push($)}};G.T!==null?p(!0):N.isTransition=!1,x(N),p=c.pending,p===null?(N.next=c.pending=N,NN(c,N)):(N.next=p.next,c.pending=p.next=N)}}function NN(s,c){var p=c.action,x=c.payload,A=s.state;if(c.isTransition){var N=G.T,$={};G.T=$;try{var Y=p(A,x),ne=G.S;ne!==null&&ne($,Y),ON(s,c,Y)}catch(ge){zw(s,c,ge)}finally{N!==null&&$.types!==null&&(N.types=$.types),G.T=N}}else try{N=p(A,x),ON(s,c,N)}catch(ge){zw(s,c,ge)}}function ON(s,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(x){CN(s,c,x)},function(x){return zw(s,c,x)}):CN(s,c,p)}function CN(s,c,p){c.status="fulfilled",c.value=p,MN(c),s.state=p,c=s.pending,c!==null&&(p=c.next,p===c?s.pending=null:(p=p.next,c.next=p,NN(s,p)))}function zw(s,c,p){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=p,MN(c),c=c.next;while(c!==x)}s.action=null}function MN(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function DN(s,c){return c}function PN(s,c){if(vt){var p=Qt.formState;if(p!==null){e:{var x=ft;if(vt){if(Mt){t:{for(var A=Mt,N=li;A.nodeType!==8;){if(!N){A=null;break t}if(A=oa(A.nextSibling),A===null){A=null;break t}}N=A.data,A=N==="F!"||N==="F"?A:null}if(A){Mt=oa(A.nextSibling),x=A.data==="F!";break e}}wo(x)}x=!1}x&&(c=p[0])}}return p=Yr(),p.memoizedState=p.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DN,lastRenderedState:c},p.queue=x,p=QN.bind(null,ft,x),x.dispatch=p,x=Bw(!1),N=qw.bind(null,ft,!1,x.queue),x=Yr(),A={state:c,dispatch:null,action:s,pending:null},x.queue=A,p=aG.bind(null,ft,A,N,p),A.dispatch=p,x.memoizedState=s,[c,p,!1]}function RN(s){var c=Ln();return LN(c,Wt,s)}function LN(s,c,p){if(c=Iw(s,c,DN)[0],s=K0(os)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=kh(c)}catch($){throw $===ad?I0:$}else x=c;c=Ln();var A=c.queue,N=A.dispatch;return p!==c.memoizedState&&(ft.flags|=2048,ud(9,{destroy:void 0},oG.bind(null,A,p),null)),[x,N,s]}function oG(s,c){s.action=c}function IN(s){var c=Ln(),p=Wt;if(p!==null)return LN(c,p,s);Ln(),c=c.memoizedState,p=Ln();var x=p.queue.dispatch;return p.memoizedState=s,[c,x,!1]}function ud(s,c,p,x){return s={tag:s,create:p,deps:x,inst:c,next:null},c=ft.updateQueue,c===null&&(c=Y0(),ft.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=s.next=s:(x=p.next,p.next=s,s.next=x,c.lastEffect=s),s}function $N(){return Ln().memoizedState}function W0(s,c,p,x){var A=Yr();ft.flags|=s,A.memoizedState=ud(1|c,{destroy:void 0},p,x===void 0?null:x)}function V0(s,c,p,x){var A=Ln();x=x===void 0?null:x;var N=A.memoizedState.inst;Wt!==null&&x!==null&&Cw(x,Wt.memoizedState.deps)?A.memoizedState=ud(c,N,p,x):(ft.flags|=s,A.memoizedState=ud(1|c,N,p,x))}function BN(s,c){W0(8390656,8,s,c)}function Uw(s,c){V0(2048,8,s,c)}function sG(s){ft.flags|=4;var c=ft.updateQueue;if(c===null)c=Y0(),ft.updateQueue=c,c.events=[s];else{var p=c.events;p===null?c.events=[s]:p.push(s)}}function zN(s){var c=Ln().memoizedState;return sG({ref:c,nextImpl:s}),function(){if((It&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function UN(s,c){return V0(4,2,s,c)}function FN(s,c){return V0(4,4,s,c)}function HN(s,c){if(typeof c=="function"){s=s();var p=c(s);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function GN(s,c,p){p=p!=null?p.concat([s]):null,V0(4,4,HN.bind(null,c,s),p)}function Fw(){}function YN(s,c){var p=Ln();c=c===void 0?null:c;var x=p.memoizedState;return c!==null&&Cw(c,x[1])?x[0]:(p.memoizedState=[s,c],s)}function qN(s,c){var p=Ln();c=c===void 0?null:c;var x=p.memoizedState;if(c!==null&&Cw(c,x[1]))return x[0];if(x=s(),Bc){_t(!0);try{s()}finally{_t(!1)}}return p.memoizedState=[x,c],x}function Hw(s,c,p){return p===void 0||(as&1073741824)!==0&&(kt&261930)===0?s.memoizedState=c:(s.memoizedState=p,s=KO(),ft.lanes|=s,wl|=s,p)}function KN(s,c,p,x){return cr(p,c)?p:sd.current!==null?(s=Hw(s,p,x),cr(s,c)||(Gn=!0),s):(as&42)===0||(as&1073741824)!==0&&(kt&261930)===0?(Gn=!0,s.memoizedState=p):(s=KO(),ft.lanes|=s,wl|=s,c)}function WN(s,c,p,x,A){var N=J.p;J.p=N!==0&&8>N?N:8;var $=G.T,Y={};G.T=Y,qw(s,!1,c,p);try{var ne=A(),ge=G.S;if(ge!==null&&ge(Y,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var _e=nG(ne,x);Eh(s,c,_e,Di(s))}else Eh(s,c,x,Di(s))}catch(Te){Eh(s,c,{then:function(){},status:"rejected",reason:Te},Di())}finally{J.p=N,$!==null&&Y.types!==null&&($.types=Y.types),G.T=$}}function lG(){}function Gw(s,c,p,x){if(s.tag!==5)throw Error(r(476));var A=VN(s).queue;WN(s,A,c,Q,p===null?lG:function(){return ZN(s),p(x)})}function VN(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:Q},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:p},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function ZN(s){var c=VN(s);c.next===null&&(c=s.alternate.memoizedState),Eh(s,c.next.queue,{},Di())}function Yw(){return Sr(Fh)}function XN(){return Ln().memoizedState}function JN(){return Ln().memoizedState}function cG(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var p=Di();s=pl(p);var x=gl(c,s,p);x!==null&&(hi(x,c,p),xh(x,c,p)),c={cache:xw()},s.payload=c;return}c=c.return}}function uG(s,c,p){var x=Di();p={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Z0(s)?eO(c,p):(p=uh(s,c,p,x),p!==null&&(hi(p,s,x),tO(p,c,x)))}function QN(s,c,p){var x=Di();Eh(s,c,p,x)}function Eh(s,c,p,x){var A={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Z0(s))eO(c,A);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var $=c.lastRenderedState,Y=N($,p);if(A.hasEagerState=!0,A.eagerState=Y,cr(Y,$))return vo(s,c,A,0),Qt===null&&Nc(),!1}catch{}finally{}if(p=uh(s,c,A,x),p!==null)return hi(p,s,x),tO(p,c,x),!0}return!1}function qw(s,c,p,x){if(x={lane:2,revertLane:k_(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Z0(s)){if(c)throw Error(r(479))}else c=uh(s,p,x,2),c!==null&&hi(c,s,2)}function Z0(s){var c=s.alternate;return s===ft||c!==null&&c===ft}function eO(s,c){ld=H0=!0;var p=s.pending;p===null?c.next=c:(c.next=p.next,p.next=c),s.pending=c}function tO(s,c,p){if((p&4194048)!==0){var x=c.lanes;x&=s.pendingLanes,p|=x,c.lanes=p,s0(s,p)}}var jh={readContext:Sr,use:q0,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};jh.useEffectEvent=On;var nO={readContext:Sr,use:q0,useCallback:function(s,c){return Yr().memoizedState=[s,c===void 0?null:c],s},useContext:Sr,useEffect:BN,useImperativeHandle:function(s,c,p){p=p!=null?p.concat([s]):null,W0(4194308,4,HN.bind(null,c,s),p)},useLayoutEffect:function(s,c){return W0(4194308,4,s,c)},useInsertionEffect:function(s,c){W0(4,2,s,c)},useMemo:function(s,c){var p=Yr();c=c===void 0?null:c;var x=s();if(Bc){_t(!0);try{s()}finally{_t(!1)}}return p.memoizedState=[x,c],x},useReducer:function(s,c,p){var x=Yr();if(p!==void 0){var A=p(c);if(Bc){_t(!0);try{p(c)}finally{_t(!1)}}}else A=c;return x.memoizedState=x.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},x.queue=s,s=s.dispatch=uG.bind(null,ft,s),[x.memoizedState,s]},useRef:function(s){var c=Yr();return s={current:s},c.memoizedState=s},useState:function(s){s=Bw(s);var c=s.queue,p=QN.bind(null,ft,c);return c.dispatch=p,[s.memoizedState,p]},useDebugValue:Fw,useDeferredValue:function(s,c){var p=Yr();return Hw(p,s,c)},useTransition:function(){var s=Bw(!1);return s=WN.bind(null,ft,s.queue,!0,!1),Yr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,p){var x=ft,A=Yr();if(vt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=c(),Qt===null)throw Error(r(349));(kt&127)!==0||SN(x,c,p)}A.memoizedState=p;var N={value:p,getSnapshot:c};return A.queue=N,BN(EN.bind(null,x,N,s),[s]),x.flags|=2048,ud(9,{destroy:void 0},kN.bind(null,x,N,p,c),null),p},useId:function(){var s=Yr(),c=Qt.identifierPrefix;if(vt){var p=Le,x=je;p=(x&~(1<<32-Tn(x)-1)).toString(32)+p,c="_"+c+"R_"+p,p=G0++,0<p&&(c+="H"+p.toString(32)),c+="_"}else p=rG++,c="_"+c+"r_"+p.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:Yw,useFormState:PN,useActionState:PN,useOptimistic:function(s){var c=Yr();c.memoizedState=c.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=qw.bind(null,ft,!0,p),p.dispatch=c,[s,c]},useMemoCache:Lw,useCacheRefresh:function(){return Yr().memoizedState=cG.bind(null,ft)},useEffectEvent:function(s){var c=Yr(),p={impl:s};return c.memoizedState=p,function(){if((It&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},Kw={readContext:Sr,use:q0,useCallback:YN,useContext:Sr,useEffect:Uw,useImperativeHandle:GN,useInsertionEffect:UN,useLayoutEffect:FN,useMemo:qN,useReducer:K0,useRef:$N,useState:function(){return K0(os)},useDebugValue:Fw,useDeferredValue:function(s,c){var p=Ln();return KN(p,Wt.memoizedState,s,c)},useTransition:function(){var s=K0(os)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:kh(s),c]},useSyncExternalStore:_N,useId:XN,useHostTransitionStatus:Yw,useFormState:RN,useActionState:RN,useOptimistic:function(s,c){var p=Ln();return AN(p,Wt,s,c)},useMemoCache:Lw,useCacheRefresh:JN};Kw.useEffectEvent=zN;var rO={readContext:Sr,use:q0,useCallback:YN,useContext:Sr,useEffect:Uw,useImperativeHandle:GN,useInsertionEffect:UN,useLayoutEffect:FN,useMemo:qN,useReducer:$w,useRef:$N,useState:function(){return $w(os)},useDebugValue:Fw,useDeferredValue:function(s,c){var p=Ln();return Wt===null?Hw(p,s,c):KN(p,Wt.memoizedState,s,c)},useTransition:function(){var s=$w(os)[0],c=Ln().memoizedState;return[typeof s=="boolean"?s:kh(s),c]},useSyncExternalStore:_N,useId:XN,useHostTransitionStatus:Yw,useFormState:IN,useActionState:IN,useOptimistic:function(s,c){var p=Ln();return Wt!==null?AN(p,Wt,s,c):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:Lw,useCacheRefresh:JN};rO.useEffectEvent=zN;function Ww(s,c,p,x){c=s.memoizedState,p=p(x,c),p=p==null?c:m({},c,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var Vw={enqueueSetState:function(s,c,p){s=s._reactInternals;var x=Di(),A=pl(x);A.payload=c,p!=null&&(A.callback=p),c=gl(s,A,x),c!==null&&(hi(c,s,x),xh(c,s,x))},enqueueReplaceState:function(s,c,p){s=s._reactInternals;var x=Di(),A=pl(x);A.tag=1,A.payload=c,p!=null&&(A.callback=p),c=gl(s,A,x),c!==null&&(hi(c,s,x),xh(c,s,x))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var p=Di(),x=pl(p);x.tag=2,c!=null&&(x.callback=c),c=gl(s,x,p),c!==null&&(hi(c,s,p),xh(c,s,p))}};function iO(s,c,p,x,A,N,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,N,$):c.prototype&&c.prototype.isPureReactComponent?!ll(p,x)||!ll(A,N):!0}function aO(s,c,p,x){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,x),c.state!==s&&Vw.enqueueReplaceState(c,c.state,null)}function zc(s,c){var p=c;if("ref"in c){p={};for(var x in c)x!=="ref"&&(p[x]=c[x])}if(s=s.defaultProps){p===c&&(p=m({},p));for(var A in s)p[A]===void 0&&(p[A]=s[A])}return p}function oO(s){Ac(s)}function sO(s){console.error(s)}function lO(s){Ac(s)}function X0(s,c){try{var p=s.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function cO(s,c,p){try{var x=s.onCaughtError;x(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Zw(s,c,p){return p=pl(p),p.tag=3,p.payload={element:null},p.callback=function(){X0(s,c)},p}function uO(s){return s=pl(s),s.tag=3,s}function dO(s,c,p,x){var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var N=x.value;s.payload=function(){return A(N)},s.callback=function(){cO(c,p,x)}}var $=p.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(s.callback=function(){cO(c,p,x),typeof A!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var Y=x.stack;this.componentDidCatch(x.value,{componentStack:Y!==null?Y:""})})}function dG(s,c,p,x,A){if(p.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=p.alternate,c!==null&&nd(c,p,A,!0),p=Ni.current,p!==null){switch(p.tag){case 31:case 13:return aa===null?cg():p.alternate===null&&Cn===0&&(Cn=3),p.flags&=-257,p.flags|=65536,p.lanes=A,x===$0?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([x]):c.add(x),w_(s,x,A)),!1;case 22:return p.flags|=65536,x===$0?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([x]):p.add(x)),w_(s,x,A)),!1}throw Error(r(435,p.tag))}return w_(s,x,A),cg(),!1}if(vt)return c=Ni.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,x!==td&&(s=Error(r(422),{cause:x}),Mc(v(s,p)))):(x!==td&&(c=Error(r(423),{cause:x}),Mc(v(c,p))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,x=v(x,p),A=Zw(s.stateNode,x,A),jw(s,A),Cn!==4&&(Cn=2)),!1;var N=Error(r(520),{cause:x});if(N=v(N,p),Ph===null?Ph=[N]:Ph.push(N),Cn!==4&&(Cn=2),c===null)return!0;x=v(x,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,s=A&-A,p.lanes|=s,s=Zw(p.stateNode,x,s),jw(p,s),!1;case 1:if(c=p.type,N=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(_l===null||!_l.has(N))))return p.flags|=65536,A&=-A,p.lanes|=A,A=uO(A),dO(A,s,p,x),jw(p,A),!1}p=p.return}while(p!==null);return!1}var Xw=Error(r(461)),Gn=!1;function kr(s,c,p,x){c.child=s===null?pN(c,null,p,x):$c(c,s.child,p,x)}function fO(s,c,p,x,A){p=p.render;var N=c.ref;if("ref"in x){var $={};for(var Y in x)Y!=="ref"&&($[Y]=x[Y])}else $=x;return Pc(c),x=Mw(s,c,p,$,N,A),Y=Dw(),s!==null&&!Gn?(Pw(s,c,A),ss(s,c,A)):(vt&&Y&&Qn(c),c.flags|=1,kr(s,c,x,A),c.child)}function hO(s,c,p,x,A){if(s===null){var N=p.type;return typeof N=="function"&&!Qu(N)&&N.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=N,mO(s,c,N,x,A)):(s=Cc(p.type,null,x,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(N=s.child,!a_(s,A)){var $=N.memoizedProps;if(p=p.compare,p=p!==null?p:ll,p($,x)&&s.ref===c.ref)return ss(s,c,A)}return c.flags|=1,s=ia(N,x),s.ref=c.ref,s.return=c,c.child=s}function mO(s,c,p,x,A){if(s!==null){var N=s.memoizedProps;if(ll(N,x)&&s.ref===c.ref)if(Gn=!1,c.pendingProps=x=N,a_(s,A))(s.flags&131072)!==0&&(Gn=!0);else return c.lanes=s.lanes,ss(s,c,A)}return Jw(s,c,p,x,A)}function pO(s,c,p,x){var A=x.children,N=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(N=N!==null?N.baseLanes|p:p,s!==null){for(x=c.child=s.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;x=A&~N}else x=0,c.child=null;return gO(s,c,N,p,x)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&L0(c,N!==null?N.cachePool:null),N!==null?yN(c,N):Aw(),vN(c);else return x=c.lanes=536870912,gO(s,c,N!==null?N.baseLanes|p:p,p,x)}else N!==null?(L0(c,N.cachePool),yN(c,N),yl(),c.memoizedState=null):(s!==null&&L0(c,null),Aw(),yl());return kr(s,c,A,p),c.child}function Th(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function gO(s,c,p,x,A){var N=_w();return N=N===null?null:{parent:Fn._currentValue,pool:N},c.memoizedState={baseLanes:p,cachePool:N},s!==null&&L0(c,null),Aw(),vN(c),s!==null&&nd(s,c,x,!0),c.childLanes=A,null}function J0(s,c){return c=eg({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function bO(s,c,p){return $c(c,s.child,null,p),s=J0(c,c.pendingProps),s.flags|=2,Oi(c),c.memoizedState=null,s}function fG(s,c,p){var x=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(vt){if(x.mode==="hidden")return s=J0(c,x),c.lanes=536870912,Th(null,s);if(Ow(c),(s=Mt)?(s=NC(s,li),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:je,overflow:Le}:null,retryLane:536870912,hydrationErrors:null},p=fh(s),p.return=c,c.child=p,Ct=c,Mt=null)):s=null,s===null)throw wo(c);return c.lanes=536870912,null}return J0(c,x)}var N=s.memoizedState;if(N!==null){var $=N.dehydrated;if(Ow(c),A)if(c.flags&256)c.flags&=-257,c=bO(s,c,p);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(Gn||nd(s,c,p,!1),A=(p&s.childLanes)!==0,Gn||A){if(x=Qt,x!==null&&($=l0(x,p),$!==0&&$!==N.retryLane))throw N.retryLane=$,ra(s,$),hi(x,s,$),Xw;cg(),c=bO(s,c,p)}else s=N.treeContext,Mt=oa($.nextSibling),Ct=c,vt=!0,xo=null,li=!1,s!==null&&Gr(c,s),c=J0(c,x),c.flags|=4096;return c}return s=ia(s.child,{mode:x.mode,children:x.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Q0(s,c){var p=c.ref;if(p===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(s===null||s.ref!==p)&&(c.flags|=4194816)}}function Jw(s,c,p,x,A){return Pc(c),p=Mw(s,c,p,x,void 0,A),x=Dw(),s!==null&&!Gn?(Pw(s,c,A),ss(s,c,A)):(vt&&x&&Qn(c),c.flags|=1,kr(s,c,p,A),c.child)}function yO(s,c,p,x,A,N){return Pc(c),c.updateQueue=null,p=wN(c,x,p,A),xN(s),x=Dw(),s!==null&&!Gn?(Pw(s,c,N),ss(s,c,N)):(vt&&x&&Qn(c),c.flags|=1,kr(s,c,p,N),c.child)}function vO(s,c,p,x,A){if(Pc(c),c.stateNode===null){var N=ts,$=p.contextType;typeof $=="object"&&$!==null&&(N=Sr($)),N=new p(x,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Vw,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=x,N.state=c.memoizedState,N.refs={},kw(c),$=p.contextType,N.context=typeof $=="object"&&$!==null?Sr($):ts,N.state=c.memoizedState,$=p.getDerivedStateFromProps,typeof $=="function"&&(Ww(c,p,$,x),N.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||($=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),$!==N.state&&Vw.enqueueReplaceState(N,N.state,null),_h(c,x,N,A),wh(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(s===null){N=c.stateNode;var Y=c.memoizedProps,ne=zc(p,Y);N.props=ne;var ge=N.context,_e=p.contextType;$=ts,typeof _e=="object"&&_e!==null&&($=Sr(_e));var Te=p.getDerivedStateFromProps;_e=typeof Te=="function"||typeof N.getSnapshotBeforeUpdate=="function",Y=c.pendingProps!==Y,_e||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y||ge!==$)&&aO(c,N,x,$),ml=!1;var ye=c.memoizedState;N.state=ye,_h(c,x,N,A),wh(),ge=c.memoizedState,Y||ye!==ge||ml?(typeof Te=="function"&&(Ww(c,p,Te,x),ge=c.memoizedState),(ne=ml||iO(c,p,ne,x,ye,ge,$))?(_e||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ge),N.props=x,N.state=ge,N.context=$,x=ne):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{N=c.stateNode,Ew(s,c),$=c.memoizedProps,_e=zc(p,$),N.props=_e,Te=c.pendingProps,ye=N.context,ge=p.contextType,ne=ts,typeof ge=="object"&&ge!==null&&(ne=Sr(ge)),Y=p.getDerivedStateFromProps,(ge=typeof Y=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==Te||ye!==ne)&&aO(c,N,x,ne),ml=!1,ye=c.memoizedState,N.state=ye,_h(c,x,N,A),wh();var ve=c.memoizedState;$!==Te||ye!==ve||ml||s!==null&&s.dependencies!==null&&P0(s.dependencies)?(typeof Y=="function"&&(Ww(c,p,Y,x),ve=c.memoizedState),(_e=ml||iO(c,p,_e,x,ye,ve,ne)||s!==null&&s.dependencies!==null&&P0(s.dependencies))?(ge||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,ve,ne),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,ve,ne)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=ve),N.props=x,N.state=ve,N.context=ne,x=_e):(typeof N.componentDidUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ye===s.memoizedState||(c.flags|=1024),x=!1)}return N=x,Q0(s,c),x=(c.flags&128)!==0,N||x?(N=c.stateNode,p=x&&typeof p.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,s!==null&&x?(c.child=$c(c,s.child,null,A),c.child=$c(c,null,p,A)):kr(s,c,p,A),c.memoizedState=N.state,s=c.child):s=ss(s,c,A),s}function xO(s,c,p,x){return rs(),c.flags|=256,kr(s,c,p,x),c.child}var Qw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e_(s){return{baseLanes:s,cachePool:cN()}}function t_(s,c,p){return s=s!==null?s.childLanes&~p:0,c&&(s|=Mi),s}function wO(s,c,p){var x=c.pendingProps,A=!1,N=(c.flags&128)!==0,$;if(($=N)||($=s!==null&&s.memoizedState===null?!1:(Rn.current&2)!==0),$&&(A=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,s===null){if(vt){if(A?bl(c):yl(),(s=Mt)?(s=NC(s,li),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:be!==null?{id:je,overflow:Le}:null,retryLane:536870912,hydrationErrors:null},p=fh(s),p.return=c,c.child=p,Ct=c,Mt=null)):s=null,s===null)throw wo(c);return I_(s)?c.lanes=32:c.lanes=536870912,null}var Y=x.children;return x=x.fallback,A?(yl(),A=c.mode,Y=eg({mode:"hidden",children:Y},A),x=ns(x,A,p,null),Y.return=c,x.return=c,Y.sibling=x,c.child=Y,x=c.child,x.memoizedState=e_(p),x.childLanes=t_(s,$,p),c.memoizedState=Qw,Th(null,x)):(bl(c),n_(c,Y))}var ne=s.memoizedState;if(ne!==null&&(Y=ne.dehydrated,Y!==null)){if(N)c.flags&256?(bl(c),c.flags&=-257,c=r_(s,c,p)):c.memoizedState!==null?(yl(),c.child=s.child,c.flags|=128,c=null):(yl(),Y=x.fallback,A=c.mode,x=eg({mode:"visible",children:x.children},A),Y=ns(Y,A,p,null),Y.flags|=2,x.return=c,Y.return=c,x.sibling=Y,c.child=x,$c(c,s.child,null,p),x=c.child,x.memoizedState=e_(p),x.childLanes=t_(s,$,p),c.memoizedState=Qw,c=Th(null,x));else if(bl(c),I_(Y)){if($=Y.nextSibling&&Y.nextSibling.dataset,$)var ge=$.dgst;$=ge,x=Error(r(419)),x.stack="",x.digest=$,Mc({value:x,source:null,stack:null}),c=r_(s,c,p)}else if(Gn||nd(s,c,p,!1),$=(p&s.childLanes)!==0,Gn||$){if($=Qt,$!==null&&(x=l0($,p),x!==0&&x!==ne.retryLane))throw ne.retryLane=x,ra(s,x),hi($,s,x),Xw;L_(Y)||cg(),c=r_(s,c,p)}else L_(Y)?(c.flags|=192,c.child=s.child,c=null):(s=ne.treeContext,Mt=oa(Y.nextSibling),Ct=c,vt=!0,xo=null,li=!1,s!==null&&Gr(c,s),c=n_(c,x.children),c.flags|=4096);return c}return A?(yl(),Y=x.fallback,A=c.mode,ne=s.child,ge=ne.sibling,x=ia(ne,{mode:"hidden",children:x.children}),x.subtreeFlags=ne.subtreeFlags&65011712,ge!==null?Y=ia(ge,Y):(Y=ns(Y,A,p,null),Y.flags|=2),Y.return=c,x.return=c,x.sibling=Y,c.child=x,Th(null,x),x=c.child,Y=s.child.memoizedState,Y===null?Y=e_(p):(A=Y.cachePool,A!==null?(ne=Fn._currentValue,A=A.parent!==ne?{parent:ne,pool:ne}:A):A=cN(),Y={baseLanes:Y.baseLanes|p,cachePool:A}),x.memoizedState=Y,x.childLanes=t_(s,$,p),c.memoizedState=Qw,Th(s.child,x)):(bl(c),p=s.child,s=p.sibling,p=ia(p,{mode:"visible",children:x.children}),p.return=c,p.sibling=null,s!==null&&($=c.deletions,$===null?(c.deletions=[s],c.flags|=16):$.push(s)),c.child=p,c.memoizedState=null,p)}function n_(s,c){return c=eg({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function eg(s,c){return s=Lr(22,s,null,c),s.lanes=0,s}function r_(s,c,p){return $c(c,s.child,null,p),s=n_(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function _O(s,c,p){s.lanes|=c;var x=s.alternate;x!==null&&(x.lanes|=c),yw(s.return,c,p)}function i_(s,c,p,x,A,N){var $=s.memoizedState;$===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:A,treeForkCount:N}:($.isBackwards=c,$.rendering=null,$.renderingStartTime=0,$.last=x,$.tail=p,$.tailMode=A,$.treeForkCount=N)}function SO(s,c,p){var x=c.pendingProps,A=x.revealOrder,N=x.tail;x=x.children;var $=Rn.current,Y=($&2)!==0;if(Y?($=$&1|2,c.flags|=128):$&=1,re(Rn,$),kr(s,c,x,p),x=vt?F:0,!Y&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_O(s,p,c);else if(s.tag===19)_O(s,p,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(p=c.child,A=null;p!==null;)s=p.alternate,s!==null&&F0(s)===null&&(A=p),p=p.sibling;p=A,p===null?(A=c.child,c.child=null):(A=p.sibling,p.sibling=null),i_(c,!1,A,p,N,x);break;case"backwards":case"unstable_legacy-backwards":for(p=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&F0(s)===null){c.child=A;break}s=A.sibling,A.sibling=p,p=A,A=s}i_(c,!0,p,null,N,x);break;case"together":i_(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function ss(s,c,p){if(s!==null&&(c.dependencies=s.dependencies),wl|=c.lanes,(p&c.childLanes)===0)if(s!==null){if(nd(s,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,p=ia(s,s.pendingProps),c.child=p,p.return=c;s.sibling!==null;)s=s.sibling,p=p.sibling=ia(s,s.pendingProps),p.return=c;p.sibling=null}return c.child}function a_(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&P0(s)))}function hG(s,c,p){switch(c.tag){case 3:Ne(c,c.stateNode.containerInfo),hl(c,Fn,s.memoizedState.cache),rs();break;case 27:case 5:Se(c);break;case 4:Ne(c,c.stateNode.containerInfo);break;case 10:hl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Ow(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(bl(c),c.flags|=128,null):(p&c.child.childLanes)!==0?wO(s,c,p):(bl(c),s=ss(s,c,p),s!==null?s.sibling:null);bl(c);break;case 19:var A=(s.flags&128)!==0;if(x=(p&c.childLanes)!==0,x||(nd(s,c,p,!1),x=(p&c.childLanes)!==0),A){if(x)return SO(s,c,p);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),re(Rn,Rn.current),x)break;return null;case 22:return c.lanes=0,pO(s,c,p,c.pendingProps);case 24:hl(c,Fn,s.memoizedState.cache)}return ss(s,c,p)}function kO(s,c,p){if(s!==null)if(s.memoizedProps!==c.pendingProps)Gn=!0;else{if(!a_(s,p)&&(c.flags&128)===0)return Gn=!1,hG(s,c,p);Gn=(s.flags&131072)!==0}else Gn=!1,vt&&(c.flags&1048576)!==0&&pt(c,F,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(s=Lc(c.elementType),c.type=s,typeof s=="function")Qu(s)?(x=zc(s,x),c.tag=1,c=vO(null,c,s,x,p)):(c.tag=0,c=Jw(null,c,s,x,p));else{if(s!=null){var A=s.$$typeof;if(A===C){c.tag=11,c=fO(null,c,s,x,p);break e}else if(A===I){c.tag=14,c=hO(null,c,s,x,p);break e}}throw c=V(s)||s,Error(r(306,c,""))}}return c;case 0:return Jw(s,c,c.type,c.pendingProps,p);case 1:return x=c.type,A=zc(x,c.pendingProps),vO(s,c,x,A,p);case 3:e:{if(Ne(c,c.stateNode.containerInfo),s===null)throw Error(r(387));x=c.pendingProps;var N=c.memoizedState;A=N.element,Ew(s,c),_h(c,x,null,p);var $=c.memoizedState;if(x=$.cache,hl(c,Fn,x),x!==N.cache&&vw(c,[Fn],p,!0),wh(),x=$.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=xO(s,c,x,p);break e}else if(x!==A){A=v(Error(r(424)),c),Mc(A),c=xO(s,c,x,p);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=oa(s.firstChild),Ct=c,vt=!0,xo=null,li=!0,p=pN(c,null,x,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(rs(),x===A){c=ss(s,c,p);break e}kr(s,c,x,p)}c=c.child}return c;case 26:return Q0(s,c),s===null?(p=RC(c.type,null,c.pendingProps,null))?c.memoizedState=p:vt||(p=c.type,s=c.pendingProps,x=gg(de.current).createElement(p),x[zn]=c,x[lr]=s,Er(x,p,s),Un(x),c.stateNode=x):c.memoizedState=RC(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Se(c),s===null&&vt&&(x=c.stateNode=MC(c.type,c.pendingProps,de.current),Ct=c,li=!0,A=Mt,jl(c.type)?($_=A,Mt=oa(x.firstChild)):Mt=A),kr(s,c,c.pendingProps.children,p),Q0(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&vt&&((A=x=Mt)&&(x=HG(x,c.type,c.pendingProps,li),x!==null?(c.stateNode=x,Ct=c,Mt=oa(x.firstChild),li=!1,A=!0):A=!1),A||wo(c)),Se(c),A=c.type,N=c.pendingProps,$=s!==null?s.memoizedProps:null,x=N.children,D_(A,N)?x=null:$!==null&&D_(A,$)&&(c.flags|=32),c.memoizedState!==null&&(A=Mw(s,c,iG,null,null,p),Fh._currentValue=A),Q0(s,c),kr(s,c,x,p),c.child;case 6:return s===null&&vt&&((s=p=Mt)&&(p=GG(p,c.pendingProps,li),p!==null?(c.stateNode=p,Ct=c,Mt=null,s=!0):s=!1),s||wo(c)),null;case 13:return wO(s,c,p);case 4:return Ne(c,c.stateNode.containerInfo),x=c.pendingProps,s===null?c.child=$c(c,null,x,p):kr(s,c,x,p),c.child;case 11:return fO(s,c,c.type,c.pendingProps,p);case 7:return kr(s,c,c.pendingProps,p),c.child;case 8:return kr(s,c,c.pendingProps.children,p),c.child;case 12:return kr(s,c,c.pendingProps.children,p),c.child;case 10:return x=c.pendingProps,hl(c,c.type,x.value),kr(s,c,x.children,p),c.child;case 9:return A=c.type._context,x=c.pendingProps.children,Pc(c),A=Sr(A),x=x(A),c.flags|=1,kr(s,c,x,p),c.child;case 14:return hO(s,c,c.type,c.pendingProps,p);case 15:return mO(s,c,c.type,c.pendingProps,p);case 19:return SO(s,c,p);case 31:return fG(s,c,p);case 22:return pO(s,c,p,c.pendingProps);case 24:return Pc(c),x=Sr(Fn),s===null?(A=_w(),A===null&&(A=Qt,N=xw(),A.pooledCache=N,N.refCount++,N!==null&&(A.pooledCacheLanes|=p),A=N),c.memoizedState={parent:x,cache:A},kw(c),hl(c,Fn,A)):((s.lanes&p)!==0&&(Ew(s,c),_h(c,null,null,p),wh()),A=s.memoizedState,N=c.memoizedState,A.parent!==x?(A={parent:x,cache:x},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),hl(c,Fn,x)):(x=N.cache,hl(c,Fn,x),x!==A.cache&&vw(c,[Fn],p,!0))),kr(s,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ls(s){s.flags|=4}function o_(s,c,p,x,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(XO())s.flags|=8192;else throw Ic=$0,Sw}else s.flags&=-16777217}function EO(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zC(c))if(XO())s.flags|=8192;else throw Ic=$0,Sw}function tg(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?a0():536870912,s.lanes|=c,md|=c)}function Ah(s,c){if(!vt)switch(s.tailMode){case"hidden":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function sn(s){var c=s.alternate!==null&&s.alternate.child===s.child,p=0,x=0;if(c)for(var A=s.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags&65011712,x|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)p|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=x,s.childLanes=p,c}function mG(s,c,p){var x=c.pendingProps;switch(Nn(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(c),null;case 1:return sn(c),null;case 3:return p=c.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),is(Fn),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Ia(c)?ls(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ph())),sn(c),null;case 26:var A=c.type,N=c.memoizedState;return s===null?(ls(c),N!==null?(sn(c),EO(c,N)):(sn(c),o_(c,A,null,x,p))):N?N!==s.memoizedState?(ls(c),sn(c),EO(c,N)):(sn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==x&&ls(c),sn(c),o_(c,A,s,x,p)),null;case 27:if(ke(c),p=de.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ls(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return sn(c),null}s=ie.current,Ia(c)?mh(c):(s=MC(A,x,p),c.stateNode=s,ls(c))}return sn(c),null;case 5:if(ke(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&ls(c);else{if(!x){if(c.stateNode===null)throw Error(r(166));return sn(c),null}if(N=ie.current,Ia(c))mh(c);else{var $=gg(de.current);switch(N){case 1:N=$.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:N=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":N=$.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":N=$.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":N=$.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof x.is=="string"?$.createElement("select",{is:x.is}):$.createElement("select"),x.multiple?N.multiple=!0:x.size&&(N.size=x.size);break;default:N=typeof x.is=="string"?$.createElement(A,{is:x.is}):$.createElement(A)}}N[zn]=c,N[lr]=x;e:for($=c.child;$!==null;){if($.tag===5||$.tag===6)N.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}c.stateNode=N;e:switch(Er(N,A,x),A){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&ls(c)}}return sn(c),o_(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,p),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==x&&ls(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(r(166));if(s=de.current,Ia(c)){if(s=c.stateNode,p=c.memoizedProps,x=null,A=Ct,A!==null)switch(A.tag){case 27:case 5:x=A.memoizedProps}s[zn]=c,s=!!(s.nodeValue===p||x!==null&&x.suppressHydrationWarning===!0||wC(s.nodeValue,p)),s||wo(c,!0)}else s=gg(s).createTextNode(x),s[zn]=c,c.stateNode=s}return sn(c),null;case 31:if(p=c.memoizedState,s===null||s.memoizedState!==null){if(x=Ia(c),p!==null){if(s===null){if(!x)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[zn]=c}else rs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;sn(c),s=!1}else p=ph(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return c.flags&256?(Oi(c),c):(Oi(c),null);if((c.flags&128)!==0)throw Error(r(558))}return sn(c),null;case 13:if(x=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=Ia(c),x!==null&&x.dehydrated!==null){if(s===null){if(!A)throw Error(r(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[zn]=c}else rs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;sn(c),A=!1}else A=ph(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Oi(c),c):(Oi(c),null)}return Oi(c),(c.flags&128)!==0?(c.lanes=p,c):(p=x!==null,s=s!==null&&s.memoizedState!==null,p&&(x=c.child,A=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(A=x.alternate.memoizedState.cachePool.pool),N=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(N=x.memoizedState.cachePool.pool),N!==A&&(x.flags|=2048)),p!==s&&p&&(c.child.flags|=8192),tg(c,c.updateQueue),sn(c),null);case 4:return se(),s===null&&A_(c.stateNode.containerInfo),sn(c),null;case 10:return is(c.type),sn(c),null;case 19:if(X(Rn),x=c.memoizedState,x===null)return sn(c),null;if(A=(c.flags&128)!==0,N=x.rendering,N===null)if(A)Ah(x,!1);else{if(Cn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(N=F0(s),N!==null){for(c.flags|=128,Ah(x,!1),s=N.updateQueue,c.updateQueue=s,tg(c,s),c.subtreeFlags=0,s=p,p=c.child;p!==null;)dh(p,s),p=p.sibling;return re(Rn,Rn.current&1|2),vt&&Ve(c,x.treeForkCount),c.child}s=s.sibling}x.tail!==null&&Ye()>og&&(c.flags|=128,A=!0,Ah(x,!1),c.lanes=4194304)}else{if(!A)if(s=F0(N),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,tg(c,s),Ah(x,!0),x.tail===null&&x.tailMode==="hidden"&&!N.alternate&&!vt)return sn(c),null}else 2*Ye()-x.renderingStartTime>og&&p!==536870912&&(c.flags|=128,A=!0,Ah(x,!1),c.lanes=4194304);x.isBackwards?(N.sibling=c.child,c.child=N):(s=x.last,s!==null?s.sibling=N:c.child=N,x.last=N)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=Ye(),s.sibling=null,p=Rn.current,re(Rn,A?p&1|2:p&1),vt&&Ve(c,x.treeForkCount),s):(sn(c),null);case 22:case 23:return Oi(c),Nw(),x=c.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(p&536870912)!==0&&(c.flags&128)===0&&(sn(c),c.subtreeFlags&6&&(c.flags|=8192)):sn(c),p=c.updateQueue,p!==null&&tg(c,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==p&&(c.flags|=2048),s!==null&&X(Rc),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),is(Fn),sn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function pG(s,c){switch(Nn(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return is(Fn),se(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return ke(c),null;case 31:if(c.memoizedState!==null){if(Oi(c),c.alternate===null)throw Error(r(340));rs()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(Oi(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));rs()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return X(Rn),null;case 4:return se(),null;case 10:return is(c.type),null;case 22:case 23:return Oi(c),Nw(),s!==null&&X(Rc),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return is(Fn),null;case 25:return null;default:return null}}function jO(s,c){switch(Nn(c),c.tag){case 3:is(Fn),se();break;case 26:case 27:case 5:ke(c);break;case 4:se();break;case 31:c.memoizedState!==null&&Oi(c);break;case 13:Oi(c);break;case 19:X(Rn);break;case 10:is(c.type);break;case 22:case 23:Oi(c),Nw(),s!==null&&X(Rc);break;case 24:is(Fn)}}function Nh(s,c){try{var p=c.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var A=x.next;p=A;do{if((p.tag&s)===s){x=void 0;var N=p.create,$=p.inst;x=N(),$.destroy=x}p=p.next}while(p!==A)}}catch(Y){Yt(c,c.return,Y)}}function vl(s,c,p){try{var x=c.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var N=A.next;x=N;do{if((x.tag&s)===s){var $=x.inst,Y=$.destroy;if(Y!==void 0){$.destroy=void 0,A=c;var ne=p,ge=Y;try{ge()}catch(_e){Yt(A,ne,_e)}}}x=x.next}while(x!==N)}}catch(_e){Yt(c,c.return,_e)}}function TO(s){var c=s.updateQueue;if(c!==null){var p=s.stateNode;try{bN(c,p)}catch(x){Yt(s,s.return,x)}}}function AO(s,c,p){p.props=zc(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(x){Yt(s,c,x)}}function Oh(s,c){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof p=="function"?s.refCleanup=p(x):p.current=x}}catch(A){Yt(s,c,A)}}function So(s,c){var p=s.ref,x=s.refCleanup;if(p!==null)if(typeof x=="function")try{x()}catch(A){Yt(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(A){Yt(s,c,A)}else p.current=null}function NO(s){var c=s.type,p=s.memoizedProps,x=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&x.focus();break e;case"img":p.src?x.src=p.src:p.srcSet&&(x.srcset=p.srcSet)}}catch(A){Yt(s,s.return,A)}}function s_(s,c,p){try{var x=s.stateNode;IG(x,s.type,p,c),x[lr]=c}catch(A){Yt(s,s.return,A)}}function OO(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&jl(s.type)||s.tag===4}function l_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||OO(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&jl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function c_(s,c,p){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(s),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=ii));else if(x!==4&&(x===27&&jl(s.type)&&(p=s.stateNode,c=null),s=s.child,s!==null))for(c_(s,c,p),s=s.sibling;s!==null;)c_(s,c,p),s=s.sibling}function ng(s,c,p){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?p.insertBefore(s,c):p.appendChild(s);else if(x!==4&&(x===27&&jl(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(ng(s,c,p),s=s.sibling;s!==null;)ng(s,c,p),s=s.sibling}function CO(s){var c=s.stateNode,p=s.memoizedProps;try{for(var x=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);Er(c,x,p),c[zn]=s,c[lr]=p}catch(N){Yt(s,s.return,N)}}var cs=!1,Yn=!1,u_=!1,MO=typeof WeakSet=="function"?WeakSet:Set,dr=null;function gG(s,c){if(s=s.containerInfo,C_=Sg,s=kc(s),po(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var A=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{p.nodeType,N.nodeType}catch{p=null;break e}var $=0,Y=-1,ne=-1,ge=0,_e=0,Te=s,ye=null;t:for(;;){for(var ve;Te!==p||A!==0&&Te.nodeType!==3||(Y=$+A),Te!==N||x!==0&&Te.nodeType!==3||(ne=$+x),Te.nodeType===3&&($+=Te.nodeValue.length),(ve=Te.firstChild)!==null;)ye=Te,Te=ve;for(;;){if(Te===s)break t;if(ye===p&&++ge===A&&(Y=$),ye===N&&++_e===x&&(ne=$),(ve=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=ve}p=Y===-1||ne===-1?null:{start:Y,end:ne}}else p=null}p=p||{start:0,end:0}}else p=null;for(M_={focusedElem:s,selectionRange:p},Sg=!1,dr=c;dr!==null;)if(c=dr,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,dr=s;else for(;dr!==null;){switch(c=dr,N=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)A=s[p],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&N!==null){s=void 0,p=c,A=N.memoizedProps,N=N.memoizedState,x=p.stateNode;try{var He=zc(p.type,A);s=x.getSnapshotBeforeUpdate(He,N),x.__reactInternalSnapshotBeforeUpdate=s}catch(ot){Yt(p,p.return,ot)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,p=s.nodeType,p===9)R_(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":R_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,dr=s;break}dr=c.return}}function DO(s,c,p){var x=p.flags;switch(p.tag){case 0:case 11:case 15:ds(s,p),x&4&&Nh(5,p);break;case 1:if(ds(s,p),x&4)if(s=p.stateNode,c===null)try{s.componentDidMount()}catch($){Yt(p,p.return,$)}else{var A=zc(p.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch($){Yt(p,p.return,$)}}x&64&&TO(p),x&512&&Oh(p,p.return);break;case 3:if(ds(s,p),x&64&&(s=p.updateQueue,s!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{bN(s,c)}catch($){Yt(p,p.return,$)}}break;case 27:c===null&&x&4&&CO(p);case 26:case 5:ds(s,p),c===null&&x&4&&NO(p),x&512&&Oh(p,p.return);break;case 12:ds(s,p);break;case 31:ds(s,p),x&4&&LO(s,p);break;case 13:ds(s,p),x&4&&IO(s,p),x&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=EG.bind(null,p),YG(s,p))));break;case 22:if(x=p.memoizedState!==null||cs,!x){c=c!==null&&c.memoizedState!==null||Yn,A=cs;var N=Yn;cs=x,(Yn=c)&&!N?fs(s,p,(p.subtreeFlags&8772)!==0):ds(s,p),cs=A,Yn=N}break;case 30:break;default:ds(s,p)}}function PO(s){var c=s.alternate;c!==null&&(s.alternate=null,PO(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Kf(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var hn=null,ci=!1;function us(s,c,p){for(p=p.child;p!==null;)RO(s,c,p),p=p.sibling}function RO(s,c,p){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Bt,p)}catch{}switch(p.tag){case 26:Yn||So(p,c),us(s,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Yn||So(p,c);var x=hn,A=ci;jl(p.type)&&(hn=p.stateNode,ci=!1),us(s,c,p),Bh(p.stateNode),hn=x,ci=A;break;case 5:Yn||So(p,c);case 6:if(x=hn,A=ci,hn=null,us(s,c,p),hn=x,ci=A,hn!==null)if(ci)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(p.stateNode)}catch(N){Yt(p,c,N)}else try{hn.removeChild(p.stateNode)}catch(N){Yt(p,c,N)}break;case 18:hn!==null&&(ci?(s=hn,TC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),_d(s)):TC(hn,p.stateNode));break;case 4:x=hn,A=ci,hn=p.stateNode.containerInfo,ci=!0,us(s,c,p),hn=x,ci=A;break;case 0:case 11:case 14:case 15:vl(2,p,c),Yn||vl(4,p,c),us(s,c,p);break;case 1:Yn||(So(p,c),x=p.stateNode,typeof x.componentWillUnmount=="function"&&AO(p,c,x)),us(s,c,p);break;case 21:us(s,c,p);break;case 22:Yn=(x=Yn)||p.memoizedState!==null,us(s,c,p),Yn=x;break;default:us(s,c,p)}}function LO(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{_d(s)}catch(p){Yt(c,c.return,p)}}}function IO(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{_d(s)}catch(p){Yt(c,c.return,p)}}function bG(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new MO),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new MO),c;default:throw Error(r(435,s.tag))}}function rg(s,c){var p=bG(s);c.forEach(function(x){if(!p.has(x)){p.add(x);var A=jG.bind(null,s,x);x.then(A,A)}})}function ui(s,c){var p=c.deletions;if(p!==null)for(var x=0;x<p.length;x++){var A=p[x],N=s,$=c,Y=$;e:for(;Y!==null;){switch(Y.tag){case 27:if(jl(Y.type)){hn=Y.stateNode,ci=!1;break e}break;case 5:hn=Y.stateNode,ci=!1;break e;case 3:case 4:hn=Y.stateNode.containerInfo,ci=!0;break e}Y=Y.return}if(hn===null)throw Error(r(160));RO(N,$,A),hn=null,ci=!1,N=A.alternate,N!==null&&(N.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)$O(c,s),c=c.sibling}var Ba=null;function $O(s,c){var p=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ui(c,s),di(s),x&4&&(vl(3,s,s.return),Nh(3,s),vl(5,s,s.return));break;case 1:ui(c,s),di(s),x&512&&(Yn||p===null||So(p,p.return)),x&64&&cs&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?x:p.concat(x))));break;case 26:var A=Ba;if(ui(c,s),di(s),x&512&&(Yn||p===null||So(p,p.return)),x&4){var N=p!==null?p.memoizedState:null;if(x=s.memoizedState,p===null)if(x===null)if(s.stateNode===null){e:{x=s.type,p=s.memoizedProps,A=A.ownerDocument||A;t:switch(x){case"title":N=A.getElementsByTagName("title")[0],(!N||N[lc]||N[zn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=A.createElement(x),A.head.insertBefore(N,A.querySelector("head > title"))),Er(N,x,p),N[zn]=s,Un(N),x=N;break e;case"link":var $=$C("link","href",A).get(x+(p.href||""));if($){for(var Y=0;Y<$.length;Y++)if(N=$[Y],N.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&N.getAttribute("rel")===(p.rel==null?null:p.rel)&&N.getAttribute("title")===(p.title==null?null:p.title)&&N.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){$.splice(Y,1);break t}}N=A.createElement(x),Er(N,x,p),A.head.appendChild(N);break;case"meta":if($=$C("meta","content",A).get(x+(p.content||""))){for(Y=0;Y<$.length;Y++)if(N=$[Y],N.getAttribute("content")===(p.content==null?null:""+p.content)&&N.getAttribute("name")===(p.name==null?null:p.name)&&N.getAttribute("property")===(p.property==null?null:p.property)&&N.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&N.getAttribute("charset")===(p.charSet==null?null:p.charSet)){$.splice(Y,1);break t}}N=A.createElement(x),Er(N,x,p),A.head.appendChild(N);break;default:throw Error(r(468,x))}N[zn]=s,Un(N),x=N}s.stateNode=x}else BC(A,s.type,s.stateNode);else s.stateNode=IC(A,x,s.memoizedProps);else N!==x?(N===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):N.count--,x===null?BC(A,s.type,s.stateNode):IC(A,x,s.memoizedProps)):x===null&&s.stateNode!==null&&s_(s,s.memoizedProps,p.memoizedProps)}break;case 27:ui(c,s),di(s),x&512&&(Yn||p===null||So(p,p.return)),p!==null&&x&4&&s_(s,s.memoizedProps,p.memoizedProps);break;case 5:if(ui(c,s),di(s),x&512&&(Yn||p===null||So(p,p.return)),s.flags&32){A=s.stateNode;try{Xi(A,"")}catch(He){Yt(s,s.return,He)}}x&4&&s.stateNode!=null&&(A=s.memoizedProps,s_(s,A,p!==null?p.memoizedProps:A)),x&1024&&(u_=!0);break;case 6:if(ui(c,s),di(s),x&4){if(s.stateNode===null)throw Error(r(162));x=s.memoizedProps,p=s.stateNode;try{p.nodeValue=x}catch(He){Yt(s,s.return,He)}}break;case 3:if(vg=null,A=Ba,Ba=bg(c.containerInfo),ui(c,s),Ba=A,di(s),x&4&&p!==null&&p.memoizedState.isDehydrated)try{_d(c.containerInfo)}catch(He){Yt(s,s.return,He)}u_&&(u_=!1,BO(s));break;case 4:x=Ba,Ba=bg(s.stateNode.containerInfo),ui(c,s),di(s),Ba=x;break;case 12:ui(c,s),di(s);break;case 31:ui(c,s),di(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 13:ui(c,s),di(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ag=Ye()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 22:A=s.memoizedState!==null;var ne=p!==null&&p.memoizedState!==null,ge=cs,_e=Yn;if(cs=ge||A,Yn=_e||ne,ui(c,s),Yn=_e,cs=ge,di(s),x&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(p===null||ne||cs||Yn||Uc(s)),p=null,c=s;;){if(c.tag===5||c.tag===26){if(p===null){ne=p=c;try{if(N=ne.stateNode,A)$=N.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Y=ne.stateNode;var Te=ne.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;Y.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(He){Yt(ne,ne.return,He)}}}else if(c.tag===6){if(p===null){ne=c;try{ne.stateNode.nodeValue=A?"":ne.memoizedProps}catch(He){Yt(ne,ne.return,He)}}}else if(c.tag===18){if(p===null){ne=c;try{var ve=ne.stateNode;A?AC(ve,!0):AC(ne.stateNode,!1)}catch(He){Yt(ne,ne.return,He)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=s.updateQueue,x!==null&&(p=x.retryQueue,p!==null&&(x.retryQueue=null,rg(s,p))));break;case 19:ui(c,s),di(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,rg(s,x)));break;case 30:break;case 21:break;default:ui(c,s),di(s)}}function di(s){var c=s.flags;if(c&2){try{for(var p,x=s.return;x!==null;){if(OO(x)){p=x;break}x=x.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var A=p.stateNode,N=l_(s);ng(s,N,A);break;case 5:var $=p.stateNode;p.flags&32&&(Xi($,""),p.flags&=-33);var Y=l_(s);ng(s,Y,$);break;case 3:case 4:var ne=p.stateNode.containerInfo,ge=l_(s);c_(s,ge,ne);break;default:throw Error(r(161))}}catch(_e){Yt(s,s.return,_e)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function BO(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;BO(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function ds(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)DO(s,c.alternate,c),c=c.sibling}function Uc(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:vl(4,c,c.return),Uc(c);break;case 1:So(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&AO(c,c.return,p),Uc(c);break;case 27:Bh(c.stateNode);case 26:case 5:So(c,c.return),Uc(c);break;case 22:c.memoizedState===null&&Uc(c);break;case 30:Uc(c);break;default:Uc(c)}s=s.sibling}}function fs(s,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,A=s,N=c,$=N.flags;switch(N.tag){case 0:case 11:case 15:fs(A,N,p),Nh(4,N);break;case 1:if(fs(A,N,p),x=N,A=x.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ge){Yt(x,x.return,ge)}if(x=N,A=x.updateQueue,A!==null){var Y=x.stateNode;try{var ne=A.shared.hiddenCallbacks;if(ne!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ne.length;A++)gN(ne[A],Y)}catch(ge){Yt(x,x.return,ge)}}p&&$&64&&TO(N),Oh(N,N.return);break;case 27:CO(N);case 26:case 5:fs(A,N,p),p&&x===null&&$&4&&NO(N),Oh(N,N.return);break;case 12:fs(A,N,p);break;case 31:fs(A,N,p),p&&$&4&&LO(A,N);break;case 13:fs(A,N,p),p&&$&4&&IO(A,N);break;case 22:N.memoizedState===null&&fs(A,N,p),Oh(N,N.return);break;case 30:break;default:fs(A,N,p)}c=c.sibling}}function d_(s,c){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&gh(p))}function f_(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&gh(s))}function za(s,c,p,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)zO(s,c,p,x),c=c.sibling}function zO(s,c,p,x){var A=c.flags;switch(c.tag){case 0:case 11:case 15:za(s,c,p,x),A&2048&&Nh(9,c);break;case 1:za(s,c,p,x);break;case 3:za(s,c,p,x),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&gh(s)));break;case 12:if(A&2048){za(s,c,p,x),s=c.stateNode;try{var N=c.memoizedProps,$=N.id,Y=N.onPostCommit;typeof Y=="function"&&Y($,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ne){Yt(c,c.return,ne)}}else za(s,c,p,x);break;case 31:za(s,c,p,x);break;case 13:za(s,c,p,x);break;case 23:break;case 22:N=c.stateNode,$=c.alternate,c.memoizedState!==null?N._visibility&2?za(s,c,p,x):Ch(s,c):N._visibility&2?za(s,c,p,x):(N._visibility|=2,dd(s,c,p,x,(c.subtreeFlags&10256)!==0||!1)),A&2048&&d_($,c);break;case 24:za(s,c,p,x),A&2048&&f_(c.alternate,c);break;default:za(s,c,p,x)}}function dd(s,c,p,x,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var N=s,$=c,Y=p,ne=x,ge=$.flags;switch($.tag){case 0:case 11:case 15:dd(N,$,Y,ne,A),Nh(8,$);break;case 23:break;case 22:var _e=$.stateNode;$.memoizedState!==null?_e._visibility&2?dd(N,$,Y,ne,A):Ch(N,$):(_e._visibility|=2,dd(N,$,Y,ne,A)),A&&ge&2048&&d_($.alternate,$);break;case 24:dd(N,$,Y,ne,A),A&&ge&2048&&f_($.alternate,$);break;default:dd(N,$,Y,ne,A)}c=c.sibling}}function Ch(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=s,x=c,A=x.flags;switch(x.tag){case 22:Ch(p,x),A&2048&&d_(x.alternate,x);break;case 24:Ch(p,x),A&2048&&f_(x.alternate,x);break;default:Ch(p,x)}c=c.sibling}}var Mh=8192;function fd(s,c,p){if(s.subtreeFlags&Mh)for(s=s.child;s!==null;)UO(s,c,p),s=s.sibling}function UO(s,c,p){switch(s.tag){case 26:fd(s,c,p),s.flags&Mh&&s.memoizedState!==null&&rY(p,Ba,s.memoizedState,s.memoizedProps);break;case 5:fd(s,c,p);break;case 3:case 4:var x=Ba;Ba=bg(s.stateNode.containerInfo),fd(s,c,p),Ba=x;break;case 22:s.memoizedState===null&&(x=s.alternate,x!==null&&x.memoizedState!==null?(x=Mh,Mh=16777216,fd(s,c,p),Mh=x):fd(s,c,p));break;default:fd(s,c,p)}}function FO(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Dh(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var x=c[p];dr=x,GO(x,s)}FO(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HO(s),s=s.sibling}function HO(s){switch(s.tag){case 0:case 11:case 15:Dh(s),s.flags&2048&&vl(9,s,s.return);break;case 3:Dh(s);break;case 12:Dh(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,ig(s)):Dh(s);break;default:Dh(s)}}function ig(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var x=c[p];dr=x,GO(x,s)}FO(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:vl(8,c,c.return),ig(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,ig(c));break;default:ig(c)}s=s.sibling}}function GO(s,c){for(;dr!==null;){var p=dr;switch(p.tag){case 0:case 11:case 15:vl(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var x=p.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:gh(p.memoizedState.cache)}if(x=p.child,x!==null)x.return=p,dr=x;else e:for(p=s;dr!==null;){x=dr;var A=x.sibling,N=x.return;if(PO(x),x===p){dr=null;break e}if(A!==null){A.return=N,dr=A;break e}dr=N}}}var yG={getCacheForType:function(s){var c=Sr(Fn),p=c.data.get(s);return p===void 0&&(p=s(),c.data.set(s,p)),p},cacheSignal:function(){return Sr(Fn).controller.signal}},vG=typeof WeakMap=="function"?WeakMap:Map,It=0,Qt=null,xt=null,kt=0,Gt=0,Ci=null,xl=!1,hd=!1,h_=!1,hs=0,Cn=0,wl=0,Fc=0,m_=0,Mi=0,md=0,Ph=null,fi=null,p_=!1,ag=0,YO=0,og=1/0,sg=null,_l=null,er=0,Sl=null,pd=null,ms=0,g_=0,b_=null,qO=null,Rh=0,y_=null;function Di(){return(It&2)!==0&&kt!==0?kt&-kt:G.T!==null?k_():Yf()}function KO(){if(Mi===0)if((kt&536870912)===0||vt){var s=zt;zt<<=1,(zt&3932160)===0&&(zt=262144),Mi=s}else Mi=536870912;return s=Ni.current,s!==null&&(s.flags|=32),Mi}function hi(s,c,p){(s===Qt&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)&&(gd(s,0),kl(s,kt,Mi,!1)),Ko(s,p),((It&2)===0||s!==Qt)&&(s===Qt&&((It&2)===0&&(Fc|=p),Cn===4&&kl(s,kt,Mi,!1)),ko(s))}function WO(s,c,p){if((It&6)!==0)throw Error(r(327));var x=!p&&(c&127)===0&&(c&s.expiredLanes)===0||sc(s,c),A=x?_G(s,c):x_(s,c,!0),N=x;do{if(A===0){hd&&!x&&kl(s,c,0,!1);break}else{if(p=s.current.alternate,N&&!xG(p)){A=x_(s,c,!1),N=!1;continue}if(A===2){if(N=c,s.errorRecoveryDisabledLanes&N)var $=0;else $=s.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var Y=s;A=Ph;var ne=Y.current.memoizedState.isDehydrated;if(ne&&(gd(Y,$).flags|=256),$=x_(Y,$,!1),$!==2){if(h_&&!ne){Y.errorRecoveryDisabledLanes|=N,Fc|=N,A=4;break e}N=fi,fi=A,N!==null&&(fi===null?fi=N:fi.push.apply(fi,N))}A=$}if(N=!1,A!==2)continue}}if(A===1){gd(s,0),kl(s,c,0,!0);break}e:{switch(x=s,N=A,N){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:kl(x,c,Mi,!xl);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(A=ag+300-Ye(),10<A)){if(kl(x,c,Mi,!xl),Lu(x,0,!0)!==0)break e;ms=c,x.timeoutHandle=EC(VO.bind(null,x,p,fi,sg,p_,c,Mi,Fc,md,xl,N,"Throttled",-0,0),A);break e}VO(x,p,fi,sg,p_,c,Mi,Fc,md,xl,N,null,-0,0)}}break}while(!0);ko(s)}function VO(s,c,p,x,A,N,$,Y,ne,ge,_e,Te,ye,ve){if(s.timeoutHandle=-1,Te=c.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},UO(c,N,Te);var He=(N&62914560)===N?ag-Ye():(N&4194048)===N?YO-Ye():0;if(He=iY(Te,He),He!==null){ms=N,s.cancelPendingCommit=He(rC.bind(null,s,c,N,p,x,A,$,Y,ne,_e,Te,null,ye,ve)),kl(s,N,$,!ge);return}}rC(s,c,N,p,x,A,$,Y,ne)}function xG(s){for(var c=s;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var x=0;x<p.length;x++){var A=p[x],N=A.getSnapshot;A=A.value;try{if(!cr(N(),A))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function kl(s,c,p,x){c&=~m_,c&=~Fc,s.suspendedLanes|=c,s.pingedLanes&=~c,x&&(s.warmLanes|=c),x=s.expirationTimes;for(var A=c;0<A;){var N=31-Tn(A),$=1<<N;x[N]=-1,A&=~$}p!==0&&o0(s,p,c)}function lg(){return(It&6)===0?(Lh(0),!1):!0}function v_(){if(xt!==null){if(Gt===0)var s=xt.return;else s=xt,$a=_o=null,Rw(s),od=null,yh=0,s=xt;for(;s!==null;)jO(s.alternate,s),s=s.return;xt=null}}function gd(s,c){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,zG(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),ms=0,v_(),Qt=s,xt=p=ia(s.current,null),kt=c,Gt=0,Ci=null,xl=!1,hd=sc(s,c),h_=!1,md=Mi=m_=Fc=wl=Cn=0,fi=Ph=null,p_=!1,(c&8)!==0&&(c|=c&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=c;0<x;){var A=31-Tn(x),N=1<<A;c|=s[A],x&=~N}return hs=c,Nc(),p}function ZO(s,c){ft=null,G.H=jh,c===ad||c===I0?(c=fN(),Gt=3):c===Sw?(c=fN(),Gt=4):Gt=c===Xw?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ci=c,xt===null&&(Cn=1,X0(s,v(c,s.current)))}function XO(){var s=Ni.current;return s===null?!0:(kt&4194048)===kt?aa===null:(kt&62914560)===kt||(kt&536870912)!==0?s===aa:!1}function JO(){var s=G.H;return G.H=jh,s===null?jh:s}function QO(){var s=G.A;return G.A=yG,s}function cg(){Cn=4,xl||(kt&4194048)!==kt&&Ni.current!==null||(hd=!0),(wl&134217727)===0&&(Fc&134217727)===0||Qt===null||kl(Qt,kt,Mi,!1)}function x_(s,c,p){var x=It;It|=2;var A=JO(),N=QO();(Qt!==s||kt!==c)&&(sg=null,gd(s,c)),c=!1;var $=Cn;e:do try{if(Gt!==0&&xt!==null){var Y=xt,ne=Ci;switch(Gt){case 8:v_(),$=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(c=!0);var ge=Gt;if(Gt=0,Ci=null,bd(s,Y,ne,ge),p&&hd){$=0;break e}break;default:ge=Gt,Gt=0,Ci=null,bd(s,Y,ne,ge)}}wG(),$=Cn;break}catch(_e){ZO(s,_e)}while(!0);return c&&s.shellSuspendCounter++,$a=_o=null,It=x,G.H=A,G.A=N,xt===null&&(Qt=null,kt=0,Nc()),$}function wG(){for(;xt!==null;)eC(xt)}function _G(s,c){var p=It;It|=2;var x=JO(),A=QO();Qt!==s||kt!==c?(sg=null,og=Ye()+500,gd(s,c)):hd=sc(s,c);e:do try{if(Gt!==0&&xt!==null){c=xt;var N=Ci;t:switch(Gt){case 1:Gt=0,Ci=null,bd(s,c,N,1);break;case 2:case 9:if(uN(N)){Gt=0,Ci=null,tC(c);break}c=function(){Gt!==2&&Gt!==9||Qt!==s||(Gt=7),ko(s)},N.then(c,c);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:uN(N)?(Gt=0,Ci=null,tC(c)):(Gt=0,Ci=null,bd(s,c,N,7));break;case 5:var $=null;switch(xt.tag){case 26:$=xt.memoizedState;case 5:case 27:var Y=xt;if($?zC($):Y.stateNode.complete){Gt=0,Ci=null;var ne=Y.sibling;if(ne!==null)xt=ne;else{var ge=Y.return;ge!==null?(xt=ge,ug(ge)):xt=null}break t}}Gt=0,Ci=null,bd(s,c,N,5);break;case 6:Gt=0,Ci=null,bd(s,c,N,6);break;case 8:v_(),Cn=6;break e;default:throw Error(r(462))}}SG();break}catch(_e){ZO(s,_e)}while(!0);return $a=_o=null,G.H=x,G.A=A,It=p,xt!==null?0:(Qt=null,kt=0,Nc(),Cn)}function SG(){for(;xt!==null&&!le();)eC(xt)}function eC(s){var c=kO(s.alternate,s,hs);s.memoizedProps=s.pendingProps,c===null?ug(s):xt=c}function tC(s){var c=s,p=c.alternate;switch(c.tag){case 15:case 0:c=yO(p,c,c.pendingProps,c.type,void 0,kt);break;case 11:c=yO(p,c,c.pendingProps,c.type.render,c.ref,kt);break;case 5:Rw(c);default:jO(p,c),c=xt=dh(c,hs),c=kO(p,c,hs)}s.memoizedProps=s.pendingProps,c===null?ug(s):xt=c}function bd(s,c,p,x){$a=_o=null,Rw(c),od=null,yh=0;var A=c.return;try{if(dG(s,A,c,p,kt)){Cn=1,X0(s,v(p,s.current)),xt=null;return}}catch(N){if(A!==null)throw xt=A,N;Cn=1,X0(s,v(p,s.current)),xt=null;return}c.flags&32768?(vt||x===1?s=!0:hd||(kt&536870912)!==0?s=!1:(xl=s=!0,(x===2||x===9||x===3||x===6)&&(x=Ni.current,x!==null&&x.tag===13&&(x.flags|=16384))),nC(c,s)):ug(c)}function ug(s){var c=s;do{if((c.flags&32768)!==0){nC(c,xl);return}s=c.return;var p=mG(c.alternate,c,hs);if(p!==null){xt=p;return}if(c=c.sibling,c!==null){xt=c;return}xt=c=s}while(c!==null);Cn===0&&(Cn=5)}function nC(s,c){do{var p=pG(s.alternate,s);if(p!==null){p.flags&=32767,xt=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(s=s.sibling,s!==null)){xt=s;return}xt=s=p}while(s!==null);Cn=6,xt=null}function rC(s,c,p,x,A,N,$,Y,ne){s.cancelPendingCommit=null;do dg();while(er!==0);if((It&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(N=c.lanes|c.childLanes,N|=Ju,nw(s,p,N,$,Y,ne),s===Qt&&(xt=Qt=null,kt=0),pd=c,Sl=s,ms=p,g_=N,b_=A,qO=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,TG(Ce,function(){return lC(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=G.T,G.T=null,A=J.p,J.p=2,$=It,It|=4;try{gG(s,c,p)}finally{It=$,J.p=A,G.T=x}}er=1,iC(),aC(),oC()}}function iC(){if(er===1){er=0;var s=Sl,c=pd,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var x=J.p;J.p=2;var A=It;It|=4;try{$O(c,s);var N=M_,$=kc(s.containerInfo),Y=N.focusedElem,ne=N.selectionRange;if($!==Y&&Y&&Y.ownerDocument&&Wu(Y.ownerDocument.documentElement,Y)){if(ne!==null&&po(Y)){var ge=ne.start,_e=ne.end;if(_e===void 0&&(_e=ge),"selectionStart"in Y)Y.selectionStart=ge,Y.selectionEnd=Math.min(_e,Y.value.length);else{var Te=Y.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var ve=ye.getSelection(),He=Y.textContent.length,ot=Math.min(ne.start,He),Zt=ne.end===void 0?ot:Math.min(ne.end,He);!ve.extend&&ot>Zt&&($=Zt,Zt=ot,ot=$);var ce=Sc(Y,ot),ae=Sc(Y,Zt);if(ce&&ae&&(ve.rangeCount!==1||ve.anchorNode!==ce.node||ve.anchorOffset!==ce.offset||ve.focusNode!==ae.node||ve.focusOffset!==ae.offset)){var me=Te.createRange();me.setStart(ce.node,ce.offset),ve.removeAllRanges(),ot>Zt?(ve.addRange(me),ve.extend(ae.node,ae.offset)):(me.setEnd(ae.node,ae.offset),ve.addRange(me))}}}}for(Te=[],ve=Y;ve=ve.parentNode;)ve.nodeType===1&&Te.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Te.length;Y++){var Ee=Te[Y];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Sg=!!C_,M_=C_=null}finally{It=A,J.p=x,G.T=p}}s.current=c,er=2}}function aC(){if(er===2){er=0;var s=Sl,c=pd,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var x=J.p;J.p=2;var A=It;It|=4;try{DO(s,c.alternate,c)}finally{It=A,J.p=x,G.T=p}}er=3}}function oC(){if(er===4||er===3){er=0,Oe();var s=Sl,c=pd,p=ms,x=qO;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?er=5:(er=0,pd=Sl=null,sC(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(_l=null),Ke(p),c=c.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Bt,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=G.T,A=J.p,J.p=2,G.T=null;try{for(var N=s.onRecoverableError,$=0;$<x.length;$++){var Y=x[$];N(Y.value,{componentStack:Y.stack})}}finally{G.T=c,J.p=A}}(ms&3)!==0&&dg(),ko(s),A=s.pendingLanes,(p&261930)!==0&&(A&42)!==0?s===y_?Rh++:(Rh=0,y_=s):Rh=0,Lh(0)}}function sC(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,gh(c)))}function dg(){return iC(),aC(),oC(),lC()}function lC(){if(er!==5)return!1;var s=Sl,c=g_;g_=0;var p=Ke(ms),x=G.T,A=J.p;try{J.p=32>p?32:p,G.T=null,p=b_,b_=null;var N=Sl,$=ms;if(er=0,pd=Sl=null,ms=0,(It&6)!==0)throw Error(r(331));var Y=It;if(It|=4,HO(N.current),zO(N,N.current,$,p),It=Y,Lh(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Bt,N)}catch{}return!0}finally{J.p=A,G.T=x,sC(s,c)}}function cC(s,c,p){c=v(p,c),c=Zw(s.stateNode,c,2),s=gl(s,c,2),s!==null&&(Ko(s,2),ko(s))}function Yt(s,c,p){if(s.tag===3)cC(s,s,p);else for(;c!==null;){if(c.tag===3){cC(c,s,p);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(_l===null||!_l.has(x))){s=v(p,s),p=uO(2),x=gl(c,p,2),x!==null&&(dO(p,x,c,s),Ko(x,2),ko(x));break}}c=c.return}}function w_(s,c,p){var x=s.pingCache;if(x===null){x=s.pingCache=new vG;var A=new Set;x.set(c,A)}else A=x.get(c),A===void 0&&(A=new Set,x.set(c,A));A.has(p)||(h_=!0,A.add(p),s=kG.bind(null,s,c,p),c.then(s,s))}function kG(s,c,p){var x=s.pingCache;x!==null&&x.delete(c),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,Qt===s&&(kt&p)===p&&(Cn===4||Cn===3&&(kt&62914560)===kt&&300>Ye()-ag?(It&2)===0&&gd(s,0):m_|=p,md===kt&&(md=0)),ko(s)}function uC(s,c){c===0&&(c=a0()),s=ra(s,c),s!==null&&(Ko(s,c),ko(s))}function EG(s){var c=s.memoizedState,p=0;c!==null&&(p=c.retryLane),uC(s,p)}function jG(s,c){var p=0;switch(s.tag){case 31:case 13:var x=s.stateNode,A=s.memoizedState;A!==null&&(p=A.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(c),uC(s,p)}function TG(s,c){return bt(s,c)}var fg=null,yd=null,__=!1,hg=!1,S_=!1,El=0;function ko(s){s!==yd&&s.next===null&&(yd===null?fg=yd=s:yd=yd.next=s),hg=!0,__||(__=!0,NG())}function Lh(s,c){if(!S_&&hg){S_=!0;do for(var p=!1,x=fg;x!==null;){if(s!==0){var A=x.pendingLanes;if(A===0)var N=0;else{var $=x.suspendedLanes,Y=x.pingedLanes;N=(1<<31-Tn(42|s)+1)-1,N&=A&~($&~Y),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(p=!0,mC(x,N))}else N=kt,N=Lu(x,x===Qt?N:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(N&3)===0||sc(x,N)||(p=!0,mC(x,N));x=x.next}while(p);S_=!1}}function AG(){dC()}function dC(){hg=__=!1;var s=0;El!==0&&BG()&&(s=El);for(var c=Ye(),p=null,x=fg;x!==null;){var A=x.next,N=fC(x,c);N===0?(x.next=null,p===null?fg=A:p.next=A,A===null&&(yd=p)):(p=x,(s!==0||(N&3)!==0)&&(hg=!0)),x=A}er!==0&&er!==5||Lh(s),El!==0&&(El=0)}function fC(s,c){for(var p=s.suspendedLanes,x=s.pingedLanes,A=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var $=31-Tn(N),Y=1<<$,ne=A[$];ne===-1?((Y&p)===0||(Y&x)!==0)&&(A[$]=tw(Y,c)):ne<=c&&(s.expiredLanes|=Y),N&=~Y}if(c=Qt,p=kt,p=Lu(s,s===c?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,p===0||s===c&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&jt(x),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||sc(s,p)){if(c=p&-p,c===s.callbackPriority)return c;switch(x!==null&&jt(x),Ke(p)){case 2:case 8:p=mt;break;case 32:p=Ce;break;case 268435456:p=nt;break;default:p=Ce}return x=hC.bind(null,s),p=bt(p,x),s.callbackPriority=c,s.callbackNode=p,c}return x!==null&&x!==null&&jt(x),s.callbackPriority=2,s.callbackNode=null,2}function hC(s,c){if(er!==0&&er!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(dg()&&s.callbackNode!==p)return null;var x=kt;return x=Lu(s,s===Qt?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(WO(s,x,c),fC(s,Ye()),s.callbackNode!=null&&s.callbackNode===p?hC.bind(null,s):null)}function mC(s,c){if(dg())return null;WO(s,c,!0)}function NG(){UG(function(){(It&6)!==0?bt(Ot,AG):dC()})}function k_(){if(El===0){var s=rd;s===0&&(s=at,at<<=1,(at&261888)===0&&(at=256)),El=s}return El}function pC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:el(""+s)}function gC(s,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,s.id&&p.setAttribute("form",s.id),c.parentNode.insertBefore(p,c),s=new FormData(s),p.parentNode.removeChild(p),s}function OG(s,c,p,x,A){if(c==="submit"&&p&&p.stateNode===A){var N=pC((A[lr]||null).action),$=x.submitter;$&&(c=(c=$[lr]||null)?pC(c.formAction):$.getAttribute("formAction"),c!==null&&(N=c,$=null));var Y=new Uu("action","action",null,x,A);s.push({event:Y,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(El!==0){var ne=$?gC(A,$):new FormData(A);Gw(p,{pending:!0,data:ne,method:A.method,action:N},null,ne)}}else typeof N=="function"&&(Y.preventDefault(),ne=$?gC(A,$):new FormData(A),Gw(p,{pending:!0,data:ne,method:A.method,action:N},N,ne))},currentTarget:A}]})}}for(var E_=0;E_<yo.length;E_++){var j_=yo[E_],CG=j_.toLowerCase(),MG=j_[0].toUpperCase()+j_.slice(1);oi(CG,"on"+MG)}oi(jc,"onAnimationEnd"),oi(C0,"onAnimationIteration"),oi(Tc,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(pw,"onTransitionRun"),oi(M0,"onTransitionStart"),oi(gw,"onTransitionCancel"),oi(dl,"onTransitionEnd"),uo("onMouseEnter",["mouseout","mouseover"]),uo("onMouseLeave",["mouseout","mouseover"]),uo("onPointerEnter",["pointerout","pointerover"]),uo("onPointerLeave",["pointerout","pointerover"]),Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function bC(s,c){c=(c&4)!==0;for(var p=0;p<s.length;p++){var x=s[p],A=x.event;x=x.listeners;e:{var N=void 0;if(c)for(var $=x.length-1;0<=$;$--){var Y=x[$],ne=Y.instance,ge=Y.currentTarget;if(Y=Y.listener,ne!==N&&A.isPropagationStopped())break e;N=Y,A.currentTarget=ge;try{N(A)}catch(_e){Ac(_e)}A.currentTarget=null,N=ne}else for($=0;$<x.length;$++){if(Y=x[$],ne=Y.instance,ge=Y.currentTarget,Y=Y.listener,ne!==N&&A.isPropagationStopped())break e;N=Y,A.currentTarget=ge;try{N(A)}catch(_e){Ac(_e)}A.currentTarget=null,N=ne}}}}function wt(s,c){var p=c[lo];p===void 0&&(p=c[lo]=new Set);var x=s+"__bubble";p.has(x)||(yC(c,s,2,!1),p.add(x))}function T_(s,c,p){var x=0;c&&(x|=4),yC(p,s,x,c)}var mg="_reactListening"+Math.random().toString(36).slice(2);function A_(s){if(!s[mg]){s[mg]=!0,d0.forEach(function(p){p!=="selectionchange"&&(DG.has(p)||T_(p,!1,s),T_(p,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[mg]||(c[mg]=!0,T_("selectionchange",!1,c))}}function yC(s,c,p,x){switch(KC(c)){case 2:var A=sY;break;case 8:A=lY;break;default:A=H_}p=A.bind(null,c,p,s),A=void 0,!mc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),x?A!==void 0?s.addEventListener(c,p,{capture:!0,passive:A}):s.addEventListener(c,p,!0):A!==void 0?s.addEventListener(c,p,{passive:A}):s.addEventListener(c,p,!1)}function N_(s,c,p,x,A){var N=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var Y=x.stateNode.containerInfo;if(Y===A)break;if($===4)for($=x.return;$!==null;){var ne=$.tag;if((ne===3||ne===4)&&$.stateNode.containerInfo===A)return;$=$.return}for(;Y!==null;){if($=Vo(Y),$===null)return;if(ne=$.tag,ne===5||ne===6||ne===26||ne===27){x=N=$;continue e}Y=Y.parentNode}}x=x.return}eh(function(){var ge=N,_e=hc(p),Te=[];e:{var ye=D0.get(s);if(ye!==void 0){var ve=Uu,He=s;switch(s){case"keypress":if(pc(p)===0)break e;case"keydown":case"keyup":ve=v0;break;case"focusin":He="focus",ve=rh;break;case"focusout":He="blur",ve=rh;break;case"beforeblur":case"afterblur":ve=rh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=cw;break;case jc:case C0:case Tc:ve=ih;break;case dl:ve=_0;break;case"scroll":case"scrollend":ve=St;break;case"wheel":ve=es;break;case"copy":case"cut":case"paste":ve=Qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=x0;break;case"toggle":case"beforetoggle":ve=yc}var ot=(c&4)!==0,Zt=!ot&&(s==="scroll"||s==="scrollend"),ce=ot?ye!==null?ye+"Capture":null:ye;ot=[];for(var ae=ge,me;ae!==null;){var Ee=ae;if(me=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||me===null||ce===null||(Ee=Jo(ae,ce),Ee!=null&&ot.push($h(ae,Ee,me))),Zt)break;ae=ae.return}0<ot.length&&(ye=new ve(ye,He,null,p,_e),Te.push({event:ye,listeners:ot}))}}if((c&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",ye&&p!==zu&&(He=p.relatedTarget||p.fromElement)&&(Vo(He)||He[Wo]))break e;if((ve||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,ve?(He=p.relatedTarget||p.toElement,ve=ge,He=He?Vo(He):null,He!==null&&(Zt=a(He),ot=He.tag,He!==Zt||ot!==5&&ot!==27&&ot!==6)&&(He=null)):(ve=null,He=ge),ve!==He)){if(ot=m0,Ee="onMouseLeave",ce="onMouseEnter",ae="mouse",(s==="pointerout"||s==="pointerover")&&(ot=x0,Ee="onPointerLeave",ce="onPointerEnter",ae="pointer"),Zt=ve==null?ye:co(ve),me=He==null?ye:co(He),ye=new ot(Ee,ae+"leave",ve,p,_e),ye.target=Zt,ye.relatedTarget=me,Ee=null,Vo(_e)===ge&&(ot=new ot(ce,ae+"enter",He,p,_e),ot.target=me,ot.relatedTarget=Zt,Ee=ot),Zt=Ee,ve&&He)t:{for(ot=PG,ce=ve,ae=He,me=0,Ee=ce;Ee;Ee=ot(Ee))me++;Ee=0;for(var rt=ae;rt;rt=ot(rt))Ee++;for(;0<me-Ee;)ce=ot(ce),me--;for(;0<Ee-me;)ae=ot(ae),Ee--;for(;me--;){if(ce===ae||ae!==null&&ce===ae.alternate){ot=ce;break t}ce=ot(ce),ae=ot(ae)}ot=null}else ot=null;ve!==null&&vC(Te,ye,ve,ot,!1),He!==null&&Zt!==null&&vC(Te,Zt,He,ot,!0)}}e:{if(ye=ge?co(ge):window,ve=ye.nodeName&&ye.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ye.type==="file")var Dt=_c;else if(ea(ye))if(j0)Dt=mw;else{Dt=hw;var qe=Ra}else ve=ye.nodeName,!ve||ve.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&fc(ge.elementType)&&(Dt=_c):Dt=sl;if(Dt&&(Dt=Dt(s,ge))){E0(Te,Dt,p,_e);break e}qe&&qe(s,ye,ge),s==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&Ma(ye,"number",ye.value)}switch(qe=ge?co(ge):window,s){case"focusin":(ea(qe)||qe.contentEditable==="true")&&(go=qe,Zu=ge,Ec=null);break;case"focusout":Ec=Zu=go=null;break;case"mousedown":cl=!0;break;case"contextmenu":case"mouseup":case"dragend":cl=!1,N0(Te,p,_e);break;case"selectionchange":if(Vu)break;case"keydown":case"keyup":N0(Te,p,_e)}var gt;if(Hu)e:{switch(s){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else il?k0(s,p)&&(Et="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Et="onCompositionStart");Et&&(Gu&&p.locale!=="ko"&&(il||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&il&&(gt=ho()):(Ji=_e,Qo="value"in Ji?Ji.value:Ji.textContent,il=!0)),qe=pg(ge,Et),0<qe.length&&(Et=new ah(Et,s,null,p,_e),Te.push({event:Et,listeners:qe}),gt?Et.data=gt:(gt=ch(p),gt!==null&&(Et.data=gt)))),(gt=dw?Ai(s,p):al(s,p))&&(Et=pg(ge,"onBeforeInput"),0<Et.length&&(qe=new ah("onBeforeInput","beforeinput",null,p,_e),Te.push({event:qe,listeners:Et}),qe.data=gt)),OG(Te,s,ge,p,_e)}bC(Te,c)})}function $h(s,c,p){return{instance:s,listener:c,currentTarget:p}}function pg(s,c){for(var p=c+"Capture",x=[];s!==null;){var A=s,N=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||N===null||(A=Jo(s,p),A!=null&&x.unshift($h(s,A,N)),A=Jo(s,c),A!=null&&x.push($h(s,A,N))),s.tag===3)return x;s=s.return}return[]}function PG(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vC(s,c,p,x,A){for(var N=c._reactName,$=[];p!==null&&p!==x;){var Y=p,ne=Y.alternate,ge=Y.stateNode;if(Y=Y.tag,ne!==null&&ne===x)break;Y!==5&&Y!==26&&Y!==27||ge===null||(ne=ge,A?(ge=Jo(p,N),ge!=null&&$.unshift($h(p,ge,ne))):A||(ge=Jo(p,N),ge!=null&&$.push($h(p,ge,ne)))),p=p.return}$.length!==0&&s.push({event:c,listeners:$})}var RG=/\r\n?/g,LG=/\u0000|\uFFFD/g;function xC(s){return(typeof s=="string"?s:""+s).replace(RG,`
`).replace(LG,"")}function wC(s,c){return c=xC(c),xC(s)===c}function Vt(s,c,p,x,A,N){switch(p){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Xi(s,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Xi(s,""+x);break;case"className":Kt(s,"class",x);break;case"tabIndex":Kt(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Kt(s,p,x);break;case"style":$u(s,x,N);break;case"data":if(c!=="object"){Kt(s,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||p!=="href")){s.removeAttribute(p);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(p);break}x=el(""+x),s.setAttribute(p,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(p==="formAction"?(c!=="input"&&Vt(s,c,"name",A.name,A,null),Vt(s,c,"formEncType",A.formEncType,A,null),Vt(s,c,"formMethod",A.formMethod,A,null),Vt(s,c,"formTarget",A.formTarget,A,null)):(Vt(s,c,"encType",A.encType,A,null),Vt(s,c,"method",A.method,A,null),Vt(s,c,"target",A.target,A,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(p);break}x=el(""+x),s.setAttribute(p,x);break;case"onClick":x!=null&&(s.onclick=ii);break;case"onScroll":x!=null&&wt("scroll",s);break;case"onScrollEnd":x!=null&&wt("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(p=x.__html,p!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}p=el(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,""+x):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":x===!0?s.setAttribute(p,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(p,x):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(p,x):s.removeAttribute(p);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(p):s.setAttribute(p,x);break;case"popover":wt("beforetoggle",s),wt("toggle",s),yt(s,"popover",x);break;case"xlinkActuate":ri(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ri(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ri(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ri(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ri(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ri(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ri(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ri(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ri(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":yt(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Bu.get(p)||p,yt(s,p,x))}}function O_(s,c,p,x,A,N){switch(p){case"style":$u(s,x,N);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(p=x.__html,p!=null){if(A.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"children":typeof x=="string"?Xi(s,x):(typeof x=="number"||typeof x=="bigint")&&Xi(s,""+x);break;case"onScroll":x!=null&&wt("scroll",s);break;case"onScrollEnd":x!=null&&wt("scrollend",s);break;case"onClick":x!=null&&(s.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!f0.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(A=p.endsWith("Capture"),c=p.slice(2,A?p.length-7:void 0),N=s[lr]||null,N=N!=null?N[p]:null,typeof N=="function"&&s.removeEventListener(c,N,A),typeof x=="function")){typeof N!="function"&&N!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(c,x,A);break e}p in s?s[p]=x:x===!0?s.setAttribute(p,""):yt(s,p,x)}}}function Er(s,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",s),wt("load",s);var x=!1,A=!1,N;for(N in p)if(p.hasOwnProperty(N)){var $=p[N];if($!=null)switch(N){case"src":x=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(s,c,N,$,p,null)}}A&&Vt(s,c,"srcSet",p.srcSet,p,null),x&&Vt(s,c,"src",p.src,p,null);return;case"input":wt("invalid",s);var Y=N=$=A=null,ne=null,ge=null;for(x in p)if(p.hasOwnProperty(x)){var _e=p[x];if(_e!=null)switch(x){case"name":A=_e;break;case"type":$=_e;break;case"checked":ne=_e;break;case"defaultChecked":ge=_e;break;case"value":N=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,c));break;default:Vt(s,c,x,_e,p,null)}}dc(s,N,Y,ne,ge,$,A,!1);return;case"select":wt("invalid",s),x=$=N=null;for(A in p)if(p.hasOwnProperty(A)&&(Y=p[A],Y!=null))switch(A){case"value":N=Y;break;case"defaultValue":$=Y;break;case"multiple":x=Y;default:Vt(s,c,A,Y,p,null)}c=N,p=$,s.multiple=!!x,c!=null?Jt(s,!!x,c,!1):p!=null&&Jt(s,!!x,p,!0);return;case"textarea":wt("invalid",s),N=A=x=null;for($ in p)if(p.hasOwnProperty($)&&(Y=p[$],Y!=null))switch($){case"value":x=Y;break;case"defaultValue":A=Y;break;case"children":N=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Vt(s,c,$,Y,p,null)}Js(s,x,A,N);return;case"option":for(ne in p)if(p.hasOwnProperty(ne)&&(x=p[ne],x!=null))switch(ne){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Vt(s,c,ne,x,p,null)}return;case"dialog":wt("beforetoggle",s),wt("toggle",s),wt("cancel",s),wt("close",s);break;case"iframe":case"object":wt("load",s);break;case"video":case"audio":for(x=0;x<Ih.length;x++)wt(Ih[x],s);break;case"image":wt("error",s),wt("load",s);break;case"details":wt("toggle",s);break;case"embed":case"source":case"link":wt("error",s),wt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in p)if(p.hasOwnProperty(ge)&&(x=p[ge],x!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Vt(s,c,ge,x,p,null)}return;default:if(fc(c)){for(_e in p)p.hasOwnProperty(_e)&&(x=p[_e],x!==void 0&&O_(s,c,_e,x,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(x=p[Y],x!=null&&Vt(s,c,Y,x,p,null))}function IG(s,c,p,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,N=null,$=null,Y=null,ne=null,ge=null,_e=null;for(ve in p){var Te=p[ve];if(p.hasOwnProperty(ve)&&Te!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":ne=Te;default:x.hasOwnProperty(ve)||Vt(s,c,ve,null,x,Te)}}for(var ye in x){var ve=x[ye];if(Te=p[ye],x.hasOwnProperty(ye)&&(ve!=null||Te!=null))switch(ye){case"type":N=ve;break;case"name":A=ve;break;case"checked":ge=ve;break;case"defaultChecked":_e=ve;break;case"value":$=ve;break;case"defaultValue":Y=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,c));break;default:ve!==Te&&Vt(s,c,ye,ve,x,Te)}}Xf(s,$,Y,ne,ge,_e,N,A);return;case"select":ve=$=Y=ye=null;for(N in p)if(ne=p[N],p.hasOwnProperty(N)&&ne!=null)switch(N){case"value":break;case"multiple":ve=ne;default:x.hasOwnProperty(N)||Vt(s,c,N,null,x,ne)}for(A in x)if(N=x[A],ne=p[A],x.hasOwnProperty(A)&&(N!=null||ne!=null))switch(A){case"value":ye=N;break;case"defaultValue":Y=N;break;case"multiple":$=N;default:N!==ne&&Vt(s,c,A,N,x,ne)}c=Y,p=$,x=ve,ye!=null?Jt(s,!!p,ye,!1):!!x!=!!p&&(c!=null?Jt(s,!!p,c,!0):Jt(s,!!p,p?[]:"",!1));return;case"textarea":ve=ye=null;for(Y in p)if(A=p[Y],p.hasOwnProperty(Y)&&A!=null&&!x.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Vt(s,c,Y,null,x,A)}for($ in x)if(A=x[$],N=p[$],x.hasOwnProperty($)&&(A!=null||N!=null))switch($){case"value":ye=A;break;case"defaultValue":ve=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==N&&Vt(s,c,$,A,x,N)}fo(s,ye,ve);return;case"option":for(var He in p)if(ye=p[He],p.hasOwnProperty(He)&&ye!=null&&!x.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:Vt(s,c,He,null,x,ye)}for(ne in x)if(ye=x[ne],ve=p[ne],x.hasOwnProperty(ne)&&ye!==ve&&(ye!=null||ve!=null))switch(ne){case"selected":s.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Vt(s,c,ne,ye,x,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in p)ye=p[ot],p.hasOwnProperty(ot)&&ye!=null&&!x.hasOwnProperty(ot)&&Vt(s,c,ot,null,x,ye);for(ge in x)if(ye=x[ge],ve=p[ge],x.hasOwnProperty(ge)&&ye!==ve&&(ye!=null||ve!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,c));break;default:Vt(s,c,ge,ye,x,ve)}return;default:if(fc(c)){for(var Zt in p)ye=p[Zt],p.hasOwnProperty(Zt)&&ye!==void 0&&!x.hasOwnProperty(Zt)&&O_(s,c,Zt,void 0,x,ye);for(_e in x)ye=x[_e],ve=p[_e],!x.hasOwnProperty(_e)||ye===ve||ye===void 0&&ve===void 0||O_(s,c,_e,ye,x,ve);return}}for(var ce in p)ye=p[ce],p.hasOwnProperty(ce)&&ye!=null&&!x.hasOwnProperty(ce)&&Vt(s,c,ce,null,x,ye);for(Te in x)ye=x[Te],ve=p[Te],!x.hasOwnProperty(Te)||ye===ve||ye==null&&ve==null||Vt(s,c,Te,ye,x,ve)}function _C(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $G(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,p=performance.getEntriesByType("resource"),x=0;x<p.length;x++){var A=p[x],N=A.transferSize,$=A.initiatorType,Y=A.duration;if(N&&Y&&_C($)){for($=0,Y=A.responseEnd,x+=1;x<p.length;x++){var ne=p[x],ge=ne.startTime;if(ge>Y)break;var _e=ne.transferSize,Te=ne.initiatorType;_e&&_C(Te)&&(ne=ne.responseEnd,$+=_e*(ne<Y?1:(Y-ge)/(ne-ge)))}if(--x,c+=8*(N+$)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var C_=null,M_=null;function gg(s){return s.nodeType===9?s:s.ownerDocument}function SC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kC(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function D_(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var P_=null;function BG(){var s=window.event;return s&&s.type==="popstate"?s===P_?!1:(P_=s,!0):(P_=null,!1)}var EC=typeof setTimeout=="function"?setTimeout:void 0,zG=typeof clearTimeout=="function"?clearTimeout:void 0,jC=typeof Promise=="function"?Promise:void 0,UG=typeof queueMicrotask=="function"?queueMicrotask:typeof jC<"u"?function(s){return jC.resolve(null).then(s).catch(FG)}:EC;function FG(s){setTimeout(function(){throw s})}function jl(s){return s==="head"}function TC(s,c){var p=c,x=0;do{var A=p.nextSibling;if(s.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"||p==="/&"){if(x===0){s.removeChild(A),_d(c);return}x--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")x++;else if(p==="html")Bh(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,Bh(p);for(var N=p.firstChild;N;){var $=N.nextSibling,Y=N.nodeName;N[lc]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&N.rel.toLowerCase()==="stylesheet"||p.removeChild(N),N=$}}else p==="body"&&Bh(s.ownerDocument.body);p=A}while(p);_d(c)}function AC(s,c){var p=s;s=0;do{var x=p.nextSibling;if(p.nodeType===1?c?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(c?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=x}while(p)}function R_(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":R_(p),Kf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function HG(s,c,p,x){for(;s.nodeType===1;){var A=p;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[lc])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(N=s.getAttribute("rel"),N==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(N!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(N=s.getAttribute("src"),(N!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&N&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var N=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===N)return s}else return s;if(s=oa(s.nextSibling),s===null)break}return null}function GG(s,c,p){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=oa(s.nextSibling),s===null))return null;return s}function NC(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=oa(s.nextSibling),s===null))return null;return s}function L_(s){return s.data==="$?"||s.data==="$~"}function I_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function YG(s,c){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||p.readyState!=="loading")c();else{var x=function(){c(),p.removeEventListener("DOMContentLoaded",x)};p.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function oa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var $_=null;function OC(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(c===0)return oa(s.nextSibling);c--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||c++}s=s.nextSibling}return null}function CC(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(c===0)return s;c--}else p!=="/$"&&p!=="/&"||c++}s=s.previousSibling}return null}function MC(s,c,p){switch(c=gg(p),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Bh(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Kf(s)}var sa=new Map,DC=new Set;function bg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ps=J.d;J.d={f:qG,r:KG,D:WG,C:VG,L:ZG,m:XG,X:QG,S:JG,M:eY};function qG(){var s=ps.f(),c=lg();return s||c}function KG(s){var c=Vs(s);c!==null&&c.tag===5&&c.type==="form"?ZN(c):ps.r(s)}var vd=typeof document>"u"?null:document;function PC(s,c,p){var x=vd;if(x&&typeof c=="string"&&c){var A=on(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof p=="string"&&(A+='[crossorigin="'+p+'"]'),DC.has(A)||(DC.add(A),s={rel:s,crossOrigin:p,href:c},x.querySelector(A)===null&&(c=x.createElement("link"),Er(c,"link",s),Un(c),x.head.appendChild(c)))}}function WG(s){ps.D(s),PC("dns-prefetch",s,null)}function VG(s,c){ps.C(s,c),PC("preconnect",s,c)}function ZG(s,c,p){ps.L(s,c,p);var x=vd;if(x&&s&&c){var A='link[rel="preload"][as="'+on(c)+'"]';c==="image"&&p&&p.imageSrcSet?(A+='[imagesrcset="'+on(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(A+='[imagesizes="'+on(p.imageSizes)+'"]')):A+='[href="'+on(s)+'"]';var N=A;switch(c){case"style":N=xd(s);break;case"script":N=wd(s)}sa.has(N)||(s=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:s,as:c},p),sa.set(N,s),x.querySelector(A)!==null||c==="style"&&x.querySelector(zh(N))||c==="script"&&x.querySelector(Uh(N))||(c=x.createElement("link"),Er(c,"link",s),Un(c),x.head.appendChild(c)))}}function XG(s,c){ps.m(s,c);var p=vd;if(p&&s){var x=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+on(x)+'"][href="'+on(s)+'"]',N=A;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=wd(s)}if(!sa.has(N)&&(s=m({rel:"modulepreload",href:s},c),sa.set(N,s),p.querySelector(A)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Uh(N)))return}x=p.createElement("link"),Er(x,"link",s),Un(x),p.head.appendChild(x)}}}function JG(s,c,p){ps.S(s,c,p);var x=vd;if(x&&s){var A=Zs(x).hoistableStyles,N=xd(s);c=c||"default";var $=A.get(N);if(!$){var Y={loading:0,preload:null};if($=x.querySelector(zh(N)))Y.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":c},p),(p=sa.get(N))&&B_(s,p);var ne=$=x.createElement("link");Un(ne),Er(ne,"link",s),ne._p=new Promise(function(ge,_e){ne.onload=ge,ne.onerror=_e}),ne.addEventListener("load",function(){Y.loading|=1}),ne.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,yg($,c,x)}$={type:"stylesheet",instance:$,count:1,state:Y},A.set(N,$)}}}function QG(s,c){ps.X(s,c);var p=vd;if(p&&s){var x=Zs(p).hoistableScripts,A=wd(s),N=x.get(A);N||(N=p.querySelector(Uh(A)),N||(s=m({src:s,async:!0},c),(c=sa.get(A))&&z_(s,c),N=p.createElement("script"),Un(N),Er(N,"link",s),p.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(A,N))}}function eY(s,c){ps.M(s,c);var p=vd;if(p&&s){var x=Zs(p).hoistableScripts,A=wd(s),N=x.get(A);N||(N=p.querySelector(Uh(A)),N||(s=m({src:s,async:!0,type:"module"},c),(c=sa.get(A))&&z_(s,c),N=p.createElement("script"),Un(N),Er(N,"link",s),p.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(A,N))}}function RC(s,c,p,x){var A=(A=de.current)?bg(A):null;if(!A)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=xd(p.href),p=Zs(A).hoistableStyles,x=p.get(c),x||(x={type:"style",instance:null,count:0,state:null},p.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=xd(p.href);var N=Zs(A).hoistableStyles,$=N.get(s);if($||(A=A.ownerDocument||A,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(s,$),(N=A.querySelector(zh(s)))&&!N._p&&($.instance=N,$.state.loading=5),sa.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},sa.set(s,p),N||tY(A,s,p,$.state))),c&&x===null)throw Error(r(528,""));return $}if(c&&x!==null)throw Error(r(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=wd(p),p=Zs(A).hoistableScripts,x=p.get(c),x||(x={type:"script",instance:null,count:0,state:null},p.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function xd(s){return'href="'+on(s)+'"'}function zh(s){return'link[rel="stylesheet"]['+s+"]"}function LC(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function tY(s,c,p,x){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=s.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),Er(c,"link",p),Un(c),s.head.appendChild(c))}function wd(s){return'[src="'+on(s)+'"]'}function Uh(s){return"script[async]"+s}function IC(s,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var x=s.querySelector('style[data-href~="'+on(p.href)+'"]');if(x)return c.instance=x,Un(x),x;var A=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),Un(x),Er(x,"style",A),yg(x,p.precedence,s),c.instance=x;case"stylesheet":A=xd(p.href);var N=s.querySelector(zh(A));if(N)return c.state.loading|=4,c.instance=N,Un(N),N;x=LC(p),(A=sa.get(A))&&B_(x,A),N=(s.ownerDocument||s).createElement("link"),Un(N);var $=N;return $._p=new Promise(function(Y,ne){$.onload=Y,$.onerror=ne}),Er(N,"link",x),c.state.loading|=4,yg(N,p.precedence,s),c.instance=N;case"script":return N=wd(p.src),(A=s.querySelector(Uh(N)))?(c.instance=A,Un(A),A):(x=p,(A=sa.get(N))&&(x=m({},p),z_(x,A)),s=s.ownerDocument||s,A=s.createElement("script"),Un(A),Er(A,"link",x),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,yg(x,p.precedence,s));return c.instance}function yg(s,c,p){for(var x=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=x.length?x[x.length-1]:null,N=A,$=0;$<x.length;$++){var Y=x[$];if(Y.dataset.precedence===c)N=Y;else if(N!==A)break}N?N.parentNode.insertBefore(s,N.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(s,c.firstChild))}function B_(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function z_(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var vg=null;function $C(s,c,p){if(vg===null){var x=new Map,A=vg=new Map;A.set(p,x)}else A=vg,x=A.get(p),x||(x=new Map,A.set(p,x));if(x.has(s))return x;for(x.set(s,null),p=p.getElementsByTagName(s),A=0;A<p.length;A++){var N=p[A];if(!(N[lc]||N[zn]||s==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var $=N.getAttribute(c)||"";$=s+$;var Y=x.get($);Y?Y.push(N):x.set($,[N])}}return x}function BC(s,c,p){s=s.ownerDocument||s,s.head.insertBefore(p,c==="title"?s.querySelector("head > title"):null)}function nY(s,c,p){if(p===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function zC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function rY(s,c,p,x){if(p.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var A=xd(x.href),N=c.querySelector(zh(A));if(N){c=N._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=xg.bind(s),c.then(s,s)),p.state.loading|=4,p.instance=N,Un(N);return}N=c.ownerDocument||c,x=LC(x),(A=sa.get(A))&&B_(x,A),N=N.createElement("link"),Un(N);var $=N;$._p=new Promise(function(Y,ne){$.onload=Y,$.onerror=ne}),Er(N,"link",x),p.instance=N}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,c),(c=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=xg.bind(s),c.addEventListener("load",p),c.addEventListener("error",p))}}var U_=0;function iY(s,c){return s.stylesheets&&s.count===0&&_g(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var x=setTimeout(function(){if(s.stylesheets&&_g(s,s.stylesheets),s.unsuspend){var N=s.unsuspend;s.unsuspend=null,N()}},6e4+c);0<s.imgBytes&&U_===0&&(U_=62500*$G());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&_g(s,s.stylesheets),s.unsuspend)){var N=s.unsuspend;s.unsuspend=null,N()}},(s.imgBytes>U_?50:800)+c);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(x),clearTimeout(A)}}:null}function xg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_g(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var wg=null;function _g(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,wg=new Map,c.forEach(aY,s),wg=null,xg.call(s))}function aY(s,c){if(!(c.state.loading&4)){var p=wg.get(s);if(p)var x=p.get(null);else{p=new Map,wg.set(s,p);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<A.length;N++){var $=A[N];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(p.set($.dataset.precedence,$),x=$)}x&&p.set(null,x)}A=c.instance,$=A.getAttribute("data-precedence"),N=p.get($)||x,N===x&&p.set(null,A),p.set($,A),this.count++,x=xg.bind(this),A.addEventListener("load",x),A.addEventListener("error",x),N?N.parentNode.insertBefore(A,N.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var Fh={$$typeof:j,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function oY(s,c,p,x,A,N,$,Y,ne){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gf(0),this.hiddenUpdates=Gf(null),this.identifierPrefix=x,this.onUncaughtError=A,this.onCaughtError=N,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function UC(s,c,p,x,A,N,$,Y,ne,ge,_e,Te){return s=new oY(s,c,p,$,ne,ge,_e,Te,Y),c=1,N===!0&&(c|=24),N=Lr(3,null,null,c),s.current=N,N.stateNode=s,c=xw(),c.refCount++,s.pooledCache=c,c.refCount++,N.memoizedState={element:x,isDehydrated:p,cache:c},kw(N),s}function FC(s){return s?(s=ts,s):ts}function HC(s,c,p,x,A,N){A=FC(A),x.context===null?x.context=A:x.pendingContext=A,x=pl(c),x.payload={element:p},N=N===void 0?null:N,N!==null&&(x.callback=N),p=gl(s,x,c),p!==null&&(hi(p,s,c),xh(p,s,c))}function GC(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<c?p:c}}function F_(s,c){GC(s,c),(s=s.alternate)&&GC(s,c)}function YC(s){if(s.tag===13||s.tag===31){var c=ra(s,67108864);c!==null&&hi(c,s,67108864),F_(s,67108864)}}function qC(s){if(s.tag===13||s.tag===31){var c=Di();c=ni(c);var p=ra(s,c);p!==null&&hi(p,s,c),F_(s,c)}}var Sg=!0;function sY(s,c,p,x){var A=G.T;G.T=null;var N=J.p;try{J.p=2,H_(s,c,p,x)}finally{J.p=N,G.T=A}}function lY(s,c,p,x){var A=G.T;G.T=null;var N=J.p;try{J.p=8,H_(s,c,p,x)}finally{J.p=N,G.T=A}}function H_(s,c,p,x){if(Sg){var A=G_(x);if(A===null)N_(s,c,x,kg,p),WC(s,x);else if(uY(A,s,c,p,x))x.stopPropagation();else if(WC(s,x),c&4&&-1<cY.indexOf(s)){for(;A!==null;){var N=Vs(A);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var $=ti(N.pendingLanes);if($!==0){var Y=N;for(Y.pendingLanes|=2,Y.entangledLanes|=2;$;){var ne=1<<31-Tn($);Y.entanglements[1]|=ne,$&=~ne}ko(N),(It&6)===0&&(og=Ye()+500,Lh(0))}}break;case 31:case 13:Y=ra(N,2),Y!==null&&hi(Y,N,2),lg(),F_(N,2)}if(N=G_(x),N===null&&N_(s,c,x,kg,p),N===A)break;A=N}A!==null&&x.stopPropagation()}else N_(s,c,x,null,p)}}function G_(s){return s=hc(s),Y_(s)}var kg=null;function Y_(s){if(kg=null,s=Vo(s),s!==null){var c=a(s);if(c===null)s=null;else{var p=c.tag;if(p===13){if(s=o(c),s!==null)return s;s=null}else if(p===31){if(s=l(c),s!==null)return s;s=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return kg=s,null}function KC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case Ot:return 2;case mt:return 8;case Ce:case ze:return 32;case nt:return 268435456;default:return 32}default:return 32}}var q_=!1,Tl=null,Al=null,Nl=null,Hh=new Map,Gh=new Map,Ol=[],cY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WC(s,c){switch(s){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Hh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(c.pointerId)}}function Yh(s,c,p,x,A,N){return s===null||s.nativeEvent!==N?(s={blockedOn:c,domEventName:p,eventSystemFlags:x,nativeEvent:N,targetContainers:[A]},c!==null&&(c=Vs(c),c!==null&&YC(c)),s):(s.eventSystemFlags|=x,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function uY(s,c,p,x,A){switch(c){case"focusin":return Tl=Yh(Tl,s,c,p,x,A),!0;case"dragenter":return Al=Yh(Al,s,c,p,x,A),!0;case"mouseover":return Nl=Yh(Nl,s,c,p,x,A),!0;case"pointerover":var N=A.pointerId;return Hh.set(N,Yh(Hh.get(N)||null,s,c,p,x,A)),!0;case"gotpointercapture":return N=A.pointerId,Gh.set(N,Yh(Gh.get(N)||null,s,c,p,x,A)),!0}return!1}function VC(s){var c=Vo(s.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=o(p),c!==null){s.blockedOn=c,qf(s.priority,function(){qC(p)});return}}else if(c===31){if(c=l(p),c!==null){s.blockedOn=c,qf(s.priority,function(){qC(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Eg(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var p=G_(s.nativeEvent);if(p===null){p=s.nativeEvent;var x=new p.constructor(p.type,p);zu=x,p.target.dispatchEvent(x),zu=null}else return c=Vs(p),c!==null&&YC(c),s.blockedOn=p,!1;c.shift()}return!0}function ZC(s,c,p){Eg(s)&&p.delete(c)}function dY(){q_=!1,Tl!==null&&Eg(Tl)&&(Tl=null),Al!==null&&Eg(Al)&&(Al=null),Nl!==null&&Eg(Nl)&&(Nl=null),Hh.forEach(ZC),Gh.forEach(ZC)}function jg(s,c){s.blockedOn===c&&(s.blockedOn=null,q_||(q_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dY)))}var Tg=null;function XC(s){Tg!==s&&(Tg=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Tg===s&&(Tg=null);for(var c=0;c<s.length;c+=3){var p=s[c],x=s[c+1],A=s[c+2];if(typeof x!="function"){if(Y_(x||p)===null)continue;break}var N=Vs(p);N!==null&&(s.splice(c,3),c-=3,Gw(N,{pending:!0,data:A,method:p.method,action:x},x,A))}}))}function _d(s){function c(ne){return jg(ne,s)}Tl!==null&&jg(Tl,s),Al!==null&&jg(Al,s),Nl!==null&&jg(Nl,s),Hh.forEach(c),Gh.forEach(c);for(var p=0;p<Ol.length;p++){var x=Ol[p];x.blockedOn===s&&(x.blockedOn=null)}for(;0<Ol.length&&(p=Ol[0],p.blockedOn===null);)VC(p),p.blockedOn===null&&Ol.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(x=0;x<p.length;x+=3){var A=p[x],N=p[x+1],$=A[lr]||null;if(typeof N=="function")$||XC(p);else if($){var Y=null;if(N&&N.hasAttribute("formAction")){if(A=N,$=N[lr]||null)Y=$.formAction;else if(Y_(A)!==null)continue}else Y=$.action;typeof Y=="function"?p[x+1]=Y:(p.splice(x,3),x-=3),XC(p)}}}function JC(){function s(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function($){return A=$})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),x||setTimeout(p,20)}function p(){if(!x&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(p,100),function(){x=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function K_(s){this._internalRoot=s}Ag.prototype.render=K_.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var p=c.current,x=Di();HC(p,x,s,c,null,null)},Ag.prototype.unmount=K_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;HC(s.current,2,null,s,null,null),lg(),c[Wo]=null}};function Ag(s){this._internalRoot=s}Ag.prototype.unstable_scheduleHydration=function(s){if(s){var c=Yf();s={blockedOn:null,target:s,priority:c};for(var p=0;p<Ol.length&&c!==0&&c<Ol[p].priority;p++);Ol.splice(p,0,s),p===0&&VC(s)}};var QC=t.version;if(QC!=="19.2.1")throw Error(r(527,QC,"19.2.1"));J.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(c),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var fY={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{Bt=Ng.inject(fY),Xt=Ng}catch{}}return Kh.createRoot=function(s,c){if(!i(s))throw Error(r(299));var p=!1,x="",A=oO,N=sO,$=lO;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError)),c=UC(s,1,!1,null,null,p,x,null,A,N,$,JC),s[Wo]=c.current,A_(s),new K_(c)},Kh.hydrateRoot=function(s,c,p){if(!i(s))throw Error(r(299));var x=!1,A="",N=oO,$=sO,Y=lO,ne=null;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onUncaughtError!==void 0&&(N=p.onUncaughtError),p.onCaughtError!==void 0&&($=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.formState!==void 0&&(ne=p.formState)),c=UC(s,1,!0,c,p??null,x,A,ne,N,$,Y,JC),c.context=FC(null),p=c.current,x=Di(),x=ni(x),A=pl(x),A.callback=null,gl(p,A,x),p=x,c.current.lanes=p,Ko(c,p),ko(c),s[Wo]=c.current,A_(s),new Ag(c)},Kh.version="19.2.1",Kh}var cM;function wY(){if(cM)return V_.exports;cM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V_.exports=xY(),V_.exports}var _Y=wY(),S=vf();const rn=_i(S),SY=VE({__proto__:null,default:rn},[S]);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uM="popstate";function kY(e={}){function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return Ik("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$m(i)}return jY(t,n,null,e)}function xn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _a(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EY(){return Math.random().toString(36).substring(2,10)}function dM(e,t){return{usr:e.state,key:e.key,idx:t}}function Ik(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xf(t):t,state:n,key:t&&t.key||r||EY()}}function $m({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function xf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function jY(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let _=h(),T=_==null?null:_-d;d=_,u&&u({action:l,location:w.location,delta:T})}function b(_,T){l="PUSH";let O=Ik(w.location,_,T);d=h()+1;let j=dM(O,d),C=w.createHref(O);try{o.pushState(j,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(C)}a&&u&&u({action:l,location:w.location,delta:1})}function y(_,T){l="REPLACE";let O=Ik(w.location,_,T);d=h();let j=dM(O,d),C=w.createHref(O);o.replaceState(j,"",C),a&&u&&u({action:l,location:w.location,delta:0})}function k(_){return TY(_)}let w={get action(){return l},get location(){return e(i,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uM,m),u=_,()=>{i.removeEventListener(uM,m),u=null}},createHref(_){return t(i,_)},createURL:k,encodeLocation(_){let T=k(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:y,go(_){return o.go(_)}};return w}function TY(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:$m(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function h$(e,t,n="/"){return AY(e,t,n,!1)}function AY(e,t,n,r){let i=typeof t=="string"?xf(t):t,a=Cs(i.pathname||"/",n);if(a==null)return null;let o=m$(e);NY(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=zY(a);l=$Y(o[u],d,r)}return l}function m$(e,t=[],n=[],r="",i=!1){let a=(o,l,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;xn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=As([r,h.relativePath]),b=n.concat(h);o.children&&o.children.length>0&&(xn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),m$(o.children,t,b,m,u)),!(o.path==null&&!o.index)&&t.push({path:m,score:LY(m,o.index),routesMeta:b})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of p$(o.path))a(o,l,!0,u)}),t}function p$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=p$(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function NY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var OY=/^:[\w-]+$/,CY=3,MY=2,DY=1,PY=10,RY=-2,fM=e=>e==="*";function LY(e,t){let n=e.split("/"),r=n.length;return n.some(fM)&&(r+=RY),t&&(r+=MY),n.filter(i=>!fM(i)).reduce((i,a)=>i+(OY.test(a)?CY:a===""?DY:PY),r)}function IY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function $Y(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",m=ay({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=ay({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:As([a,m.pathname]),pathnameBase:YY(As([a,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(a=As([a,m.pathnameBase]))}return o}function ay(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BY(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},b)=>{if(h==="*"){let k=l[b]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const y=l[b];return m&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function BY(e,t=!1,n=!0){_a(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function zY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _a(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Cs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var UY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FY=e=>UY.test(e);function HY(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?xf(e):e,a;if(n)if(FY(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),_a(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=hM(n.substring(1),"/"):a=hM(n,t)}else a=t;return{pathname:a,search:qY(r),hash:KY(i)}}function hM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e1(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ZE(e){let t=GY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function XE(e,t,n,r=!1){let i;typeof e=="string"?i=xf(e):(i={...e},xn(!i.pathname||!i.pathname.includes("?"),e1("?","pathname","search",i)),xn(!i.pathname||!i.pathname.includes("#"),e1("#","pathname","hash",i)),xn(!i.search||!i.search.includes("#"),e1("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),m-=1;i.pathname=b.join("/")}l=m>=0?t[m]:"/"}let u=HY(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var As=e=>e.join("/").replace(/\/\/+/g,"/"),YY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function VY(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var g$=["POST","PUT","PATCH","DELETE"];new Set(g$);var ZY=["GET",...g$];new Set(ZY);var wf=S.createContext(null);wf.displayName="DataRouter";var Bv=S.createContext(null);Bv.displayName="DataRouterState";S.createContext(!1);var b$=S.createContext({isTransitioning:!1});b$.displayName="ViewTransition";var XY=S.createContext(new Map);XY.displayName="Fetchers";var JY=S.createContext(null);JY.displayName="Await";var Aa=S.createContext(null);Aa.displayName="Navigation";var _p=S.createContext(null);_p.displayName="Location";var Go=S.createContext({outlet:null,matches:[],isDataRoute:!1});Go.displayName="Route";var JE=S.createContext(null);JE.displayName="RouteError";function QY(e,{relative:t}={}){xn(_f(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Aa),{hash:i,pathname:a,search:o}=Sp(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:As([n,a])),r.createHref({pathname:l,search:o,hash:i})}function _f(){return S.useContext(_p)!=null}function Fr(){return xn(_f(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(_p).location}var y$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v$(e){S.useContext(Aa).static||S.useLayoutEffect(e)}function tc(){let{isDataRoute:e}=S.useContext(Go);return e?fq():eq()}function eq(){xn(_f(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(wf),{basename:t,navigator:n}=S.useContext(Aa),{matches:r}=S.useContext(Go),{pathname:i}=Fr(),a=JSON.stringify(ZE(r)),o=S.useRef(!1);return v$(()=>{o.current=!0}),S.useCallback((u,d={})=>{if(_a(o.current,y$),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=XE(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:As([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}S.createContext(null);function Sp(e,{relative:t}={}){let{matches:n}=S.useContext(Go),{pathname:r}=Fr(),i=JSON.stringify(ZE(n));return S.useMemo(()=>XE(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function tq(e,t){return x$(e,t)}function x$(e,t,n,r,i){xn(_f(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(Aa),{matches:o}=S.useContext(Go),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let O=m&&m.path||"";w$(d,!m||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let b=Fr(),y;if(t){let O=typeof t=="string"?xf(t):t;xn(h==="/"||O.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${O.pathname}" was given in the \`location\` prop.`),y=O}else y=b;let k=y.pathname||"/",w=k;if(h!=="/"){let O=h.replace(/^\//,"").split("/");w="/"+k.replace(/^\//,"").split("/").slice(O.length).join("/")}let _=h$(e,{pathname:w});_a(m||_!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),_a(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=oq(_&&_.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:As([h,a.encodeLocation?a.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?h:As([h,a.encodeLocation?a.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),o,n,r,i);return t&&T?S.createElement(_p.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function nq(){let e=dq(),t=WY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:i},n):null,o)}var rq=S.createElement(nq,null),iq=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(Go.Provider,{value:this.props.routeContext},S.createElement(JE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aq({routeContext:e,match:t,children:n}){let r=S.useContext(wf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Go.Provider,{value:e},n)}function oq(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);xn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:b,errors:y}=n,k=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||k){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,m)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:VY(n.matches),errorInfo:m})}:void 0;return a.reduceRight((h,m,b)=>{let y,k=!1,w=null,_=null;n&&(y=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||rq,l&&(u<0&&b===0?(w$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,_=null):u===b&&(k=!0,_=m.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,b+1)),O=()=>{let j;return y?j=w:k?j=_:m.route.Component?j=S.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=h,S.createElement(aq,{match:m,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:j})};return n&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?S.createElement(iq,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):O()},null)}function QE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sq(e){let t=S.useContext(wf);return xn(t,QE(e)),t}function lq(e){let t=S.useContext(Bv);return xn(t,QE(e)),t}function cq(e){let t=S.useContext(Go);return xn(t,QE(e)),t}function ej(e){let t=cq(e),n=t.matches[t.matches.length-1];return xn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function uq(){return ej("useRouteId")}function dq(){let e=S.useContext(JE),t=lq("useRouteError"),n=ej("useRouteError");return e!==void 0?e:t.errors?.[n]}function fq(){let{router:e}=sq("useNavigate"),t=ej("useNavigate"),n=S.useRef(!1);return v$(()=>{n.current=!0}),S.useCallback(async(i,a={})=>{_a(n.current,y$),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var mM={};function w$(e,t,n){!t&&!mM[e]&&(mM[e]=!0,_a(!1,n))}S.memo(hq);function hq({routes:e,future:t,state:n,unstable_onError:r}){return x$(e,void 0,n,r,t)}function mq({to:e,replace:t,state:n,relative:r}){xn(_f(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=S.useContext(Aa);_a(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(Go),{pathname:o}=Fr(),l=tc(),u=XE(e,ZE(a),o,r==="path"),d=JSON.stringify(u);return S.useEffect(()=>{l(JSON.parse(d),{replace:t,state:n,relative:r})},[l,d,r,t,n]),null}function Ua(e){xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pq({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){xn(!_f(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof n=="string"&&(n=xf(n));let{pathname:d="/",search:h="",hash:m="",state:b=null,key:y="default"}=n,k=S.useMemo(()=>{let w=Cs(d,l);return w==null?null:{location:{pathname:w,search:h,hash:m,state:b,key:y},navigationType:r}},[l,d,h,m,b,y,r]);return _a(k!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:S.createElement(Aa.Provider,{value:u},S.createElement(_p.Provider,{children:t,value:k}))}function gq({children:e,location:t}){return tq($k(e),t)}function $k(e,t=[]){let n=[];return S.Children.forEach(e,(r,i)=>{if(!S.isValidElement(r))return;let a=[...t,i];if(r.type===S.Fragment){n.push.apply(n,$k(r.props.children,a));return}xn(r.type===Ua,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$k(r.props.children,a)),n.push(o)}),n}var zb="get",Ub="application/x-www-form-urlencoded";function zv(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function bq(e){return zv(e)&&e.tagName.toLowerCase()==="button"}function yq(e){return zv(e)&&e.tagName.toLowerCase()==="form"}function vq(e){return zv(e)&&e.tagName.toLowerCase()==="input"}function xq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wq(e,t){return e.button===0&&(!t||t==="_self")&&!xq(e)}var Og=null;function _q(){if(Og===null)try{new FormData(document.createElement("form"),0),Og=!1}catch{Og=!0}return Og}var Sq=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t1(e){return e!=null&&!Sq.has(e)?(_a(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ub}"`),null):e}function kq(e,t){let n,r,i,a,o;if(yq(e)){let l=e.getAttribute("action");r=l?Cs(l,t):null,n=e.getAttribute("method")||zb,i=t1(e.getAttribute("enctype"))||Ub,a=new FormData(e)}else if(bq(e)||vq(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(r=u?Cs(u,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||zb,i=t1(e.getAttribute("formenctype"))||t1(l.getAttribute("enctype"))||Ub,a=new FormData(l,e),!_q()){let{name:d,type:h,value:m}=e;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,m)}}else{if(zv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zb,r=null,i=Ub,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tj(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Eq(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Cs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function jq(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Tq(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Aq(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await jq(a,n);return o.links?o.links():[]}return[]}));return Mq(r.flat(1).filter(Tq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function pM(e,t,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?t.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Nq(e,t,{includeHydrateFallback:n}={}){return Oq(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Oq(e){return[...new Set(e)]}function Cq(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Mq(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(Cq(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function _$(){let e=S.useContext(wf);return tj(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Dq(){let e=S.useContext(Bv);return tj(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nj=S.createContext(void 0);nj.displayName="FrameworkContext";function S$(){let e=S.useContext(nj);return tj(e,"You must render this element inside a <HydratedRouter> element"),e}function Pq(e,t){let n=S.useContext(nj),[r,i]=S.useState(!1),[a,o]=S.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=t,b=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=T=>{T.forEach(O=>{o(O.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,b,{}]:[a,b,{onFocus:Wh(l,y),onBlur:Wh(u,k),onMouseEnter:Wh(d,y),onMouseLeave:Wh(h,k),onTouchStart:Wh(m,y)}]:[!1,b,{}]}function Wh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Rq({page:e,...t}){let{router:n}=_$(),r=S.useMemo(()=>h$(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(Iq,{page:e,matches:r,...t}):null}function Lq(e){let{manifest:t,routeModules:n}=S$(),[r,i]=S.useState([]);return S.useEffect(()=>{let a=!1;return Aq(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function Iq({page:e,matches:t,...n}){let r=Fr(),{manifest:i,routeModules:a}=S$(),{basename:o}=_$(),{loaderData:l,matches:u}=Dq(),d=S.useMemo(()=>pM(e,t,u,i,r,"data"),[e,t,u,i,r]),h=S.useMemo(()=>pM(e,t,u,i,r,"assets"),[e,t,u,i,r]),m=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,w=!1;if(t.forEach(T=>{let O=i.routes[T.route.id];!O||!O.hasLoader||(!d.some(j=>j.route.id===T.route.id)&&T.route.id in l&&a[T.route.id]?.shouldRevalidate||O.hasClientLoader?w=!0:k.add(T.route.id))}),k.size===0)return[];let _=Eq(e,o,"data");return w&&k.size>0&&_.searchParams.set("_routes",t.filter(T=>k.has(T.route.id)).map(T=>T.route.id).join(",")),[_.pathname+_.search]},[o,l,r,i,d,t,e,a]),b=S.useMemo(()=>Nq(h,i),[h,i]),y=Lq(h);return S.createElement(S.Fragment,null,m.map(k=>S.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),b.map(k=>S.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),y.map(({key:k,link:w})=>S.createElement("link",{key:k,nonce:n.nonce,...w})))}function $q(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var k$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k$&&(window.__reactRouterVersion="7.10.1")}catch{}function Bq({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=S.useRef();i.current==null&&(i.current=kY({window:r,v5Compat:!0}));let a=i.current,[o,l]=S.useState({action:a.action,location:a.location}),u=S.useCallback(d=>{n===!1?l(d):S.startTransition(()=>l(d))},[n]);return S.useLayoutEffect(()=>a.listen(u),[a,u]),S.createElement(pq,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n===!0})}var E$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rj=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m,...b},y){let{basename:k,unstable_useTransitions:w}=S.useContext(Aa),_=typeof d=="string"&&E$.test(d),T,O=!1;if(typeof d=="string"&&_&&(T=d,k$))try{let q=new URL(window.location.href),H=d.startsWith("//")?new URL(q.protocol+d):new URL(d),B=Cs(H.pathname,k);H.origin===q.origin&&B!=null?d=B+H.search+H.hash:O=!0}catch{_a(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=QY(d,{relative:i}),[C,M,P]=Pq(r,b),I=Hq(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m,unstable_useTransitions:w});function U(q){t&&t(q),q.defaultPrevented||I(q)}let W=S.createElement("a",{...b,...P,href:T||j,onClick:O||a?t:U,ref:$q(y,M),target:u,"data-discover":!_&&n==="render"?"true":void 0});return C&&!_?S.createElement(S.Fragment,null,W,S.createElement(Rq,{page:j})):W});rj.displayName="Link";var zq=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let m=Sp(o,{relative:d.relative}),b=Fr(),y=S.useContext(Bv),{navigator:k,basename:w}=S.useContext(Aa),_=y!=null&&Wq(m)&&l===!0,T=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,O=b.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(O=O.toLowerCase(),j=j?j.toLowerCase():null,T=T.toLowerCase()),j&&w&&(j=Cs(j,w)||j);const C=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let M=O===T||!i&&O.startsWith(T)&&O.charAt(C)==="/",P=j!=null&&(j===T||!i&&j.startsWith(T)&&j.charAt(T.length)==="/"),I={isActive:M,isPending:P,isTransitioning:_},U=M?t:void 0,W;typeof r=="function"?W=r(I):W=[r,M?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let q=typeof a=="function"?a(I):a;return S.createElement(rj,{...d,"aria-current":U,className:W,ref:h,style:q,to:o,viewTransition:l},typeof u=="function"?u(I):u)});zq.displayName="NavLink";var Uq=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=zb,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,...b},y)=>{let{unstable_useTransitions:k}=S.useContext(Aa),w=qq(),_=Kq(l,{relative:d}),T=o.toLowerCase()==="get"?"get":"post",O=typeof l=="string"&&E$.test(l),j=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let M=C.nativeEvent.submitter,P=M?.getAttribute("formmethod")||o,I=()=>w(M||C.currentTarget,{fetcherKey:t,method:P,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m});k&&n!==!1?S.startTransition(()=>I()):I()};return S.createElement("form",{ref:y,method:T,action:_,onSubmit:r?u:j,...b,"data-discover":!O&&e==="render"?"true":void 0})});Uq.displayName="Form";function Fq(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j$(e){let t=S.useContext(wf);return xn(t,Fq(e)),t}function Hq(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let u=tc(),d=Fr(),h=Sp(e,{relative:a});return S.useCallback(m=>{if(wq(m,t)){m.preventDefault();let b=n!==void 0?n:$m(d)===$m(h),y=()=>u(e,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o});l?S.startTransition(()=>y()):y()}},[d,u,h,n,r,t,e,i,a,o,l])}var Gq=0,Yq=()=>`__${String(++Gq)}__`;function qq(){let{router:e}=j$("useSubmit"),{basename:t}=S.useContext(Aa),n=uq(),r=e.fetch,i=e.navigate;return S.useCallback(async(a,o={})=>{let{action:l,method:u,encType:d,formData:h,body:m}=kq(a,t);if(o.navigate===!1){let b=o.fetcherKey||Yq();await r(b,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,t,n])}function Kq(e,{relative:t}={}){let{basename:n}=S.useContext(Aa),r=S.useContext(Go);xn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sp(e||".",{relative:t})},o=Fr();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:As([n,a.pathname])),$m(a)}function Wq(e,{relative:t}={}){let n=S.useContext(b$);xn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=j$("useViewTransitionState"),i=Sp(e,{relative:t});if(!n.isTransitioning)return!1;let a=Cs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Cs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ay(i.pathname,o)!=null||ay(i.pathname,a)!=null}var Mu=f$();const Vq=_i(Mu);let Zq={data:""},Xq=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Zq,Jq=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Qq=/\/\*[^]*?\*\/|  +/g,gM=/\n+/g,Rl=(e,t)=>{let n="",r="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Rl(o,a):a+"{"+Rl(o,a[1]=="k"?"":t)+"}":typeof o=="object"?r+=Rl(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Rl.p?Rl.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},gs={},T$=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+T$(e[n]);return t}return e},eK=(e,t,n,r,i)=>{let a=T$(e),o=gs[a]||(gs[a]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(a));if(!gs[o]){let u=a!==e?e:(d=>{let h,m,b=[{}];for(;h=Jq.exec(d.replace(Qq,""));)h[4]?b.shift():h[3]?(m=h[3].replace(gM," ").trim(),b.unshift(b[0][m]=b[0][m]||{})):b[0][h[1]]=h[2].replace(gM," ").trim();return b[0]})(e);gs[o]=Rl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&gs.g?gs.g:null;return n&&(gs.g=gs[o]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(gs[o],t,r,l),o},tK=(e,t,n)=>e.reduce((r,i,a)=>{let o=t[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Rl(l,""):l===!1?"":l}return r+i+(o??"")},"");function Uv(e){let t=this||{},n=e.call?e(t.p):e;return eK(n.unshift?n.raw?tK(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,Xq(t.target),t.g,t.o,t.k)}let A$,Bk,zk;Uv.bind({g:1});let Ms=Uv.bind({k:1});function nK(e,t,n,r){Rl.p=t,A$=e,Bk=n,zk=r}function nc(e,t){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),u=l.className||i.className;n.p=Object.assign({theme:Bk&&Bk()},l),n.o=/ *go\d+/.test(u),l.className=Uv.apply(n,r)+(u?" "+u:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),zk&&d[0]&&zk(l),A$(d,l)}return i}}var rK=e=>typeof e=="function",oy=(e,t)=>rK(e)?e(t):e,iK=(()=>{let e=0;return()=>(++e).toString()})(),N$=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),aK=20,ij="default",O$=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return O$(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},Fb=[],C$={toasts:[],pausedAt:void 0,settings:{toastLimit:aK}},Po={},M$=(e,t=ij)=>{Po[t]=O$(Po[t]||C$,e),Fb.forEach(([n,r])=>{n===t&&r(Po[t])})},D$=e=>Object.keys(Po).forEach(t=>M$(e,t)),oK=e=>Object.keys(Po).find(t=>Po[t].toasts.some(n=>n.id===e)),Fv=(e=ij)=>t=>{M$(t,e)},sK={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},lK=(e={},t=ij)=>{let[n,r]=S.useState(Po[t]||C$),i=S.useRef(Po[t]);S.useEffect(()=>(i.current!==Po[t]&&r(Po[t]),Fb.push([t,r]),()=>{let o=Fb.findIndex(([l])=>l===t);o>-1&&Fb.splice(o,1)}),[t]);let a=n.toasts.map(o=>{var l,u,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((u=e[o.type])==null?void 0:u.duration)||e?.duration||sK[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:a}},cK=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||iK()}),kp=e=>(t,n)=>{let r=cK(t,e,n);return Fv(r.toasterId||oK(r.id))({type:2,toast:r}),r.id},Bn=(e,t)=>kp("blank")(e,t);Bn.error=kp("error");Bn.success=kp("success");Bn.loading=kp("loading");Bn.custom=kp("custom");Bn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Fv(t)(n):D$(n)};Bn.dismissAll=e=>Bn.dismiss(void 0,e);Bn.remove=(e,t)=>{let n={type:4,toastId:e};t?Fv(t)(n):D$(n)};Bn.removeAll=e=>Bn.remove(void 0,e);Bn.promise=(e,t,n)=>{let r=Bn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?oy(t.success,i):void 0;return a?Bn.success(a,{id:r,...n,...n?.success}):Bn.dismiss(r),i}).catch(i=>{let a=t.error?oy(t.error,i):void 0;a?Bn.error(a,{id:r,...n,...n?.error}):Bn.dismiss(r)}),e};var uK=1e3,dK=(e,t="default")=>{let{toasts:n,pausedAt:r}=lK(e,t),i=S.useRef(new Map).current,a=S.useCallback((m,b=uK)=>{if(i.has(m))return;let y=setTimeout(()=>{i.delete(m),o({type:4,toastId:m})},b);i.set(m,y)},[]);S.useEffect(()=>{if(r)return;let m=Date.now(),b=n.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(m-y.createdAt);if(k<0){y.visible&&Bn.dismiss(y.id);return}return setTimeout(()=>Bn.dismiss(y.id,t),k)});return()=>{b.forEach(y=>y&&clearTimeout(y))}},[n,r,t]);let o=S.useCallback(Fv(t),[t]),l=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=S.useCallback((m,b)=>{o({type:1,toast:{id:m,height:b}})},[o]),d=S.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=S.useCallback((m,b)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:w}=b||{},_=n.filter(j=>(j.position||w)===(m.position||w)&&j.height),T=_.findIndex(j=>j.id===m.id),O=_.filter((j,C)=>C<T&&j.visible).length;return _.filter(j=>j.visible).slice(...y?[O+1]:[0,O]).reduce((j,C)=>j+(C.height||0)+k,0)},[n]);return S.useEffect(()=>{n.forEach(m=>{if(m.dismissed)a(m.id,m.removeDelay);else{let b=i.get(m.id);b&&(clearTimeout(b),i.delete(m.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:u,startPause:l,endPause:d,calculateOffset:h}}},fK=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hK=Ms`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mK=Ms`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pK=nc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hK} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mK} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gK=Ms`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,bK=nc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${gK} 1s linear infinite;
`,yK=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vK=Ms`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xK=nc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vK} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wK=nc("div")`
  position: absolute;
`,_K=nc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,SK=Ms`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kK=nc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${SK} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,EK=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?S.createElement(kK,null,t):t:n==="blank"?null:S.createElement(_K,null,S.createElement(bK,{...r}),n!=="loading"&&S.createElement(wK,null,n==="error"?S.createElement(pK,{...r}):S.createElement(xK,{...r})))},jK=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TK=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,AK="0%{opacity:0;} 100%{opacity:1;}",NK="0%{opacity:1;} 100%{opacity:0;}",OK=nc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,CK=nc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,MK=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=N$()?[AK,NK]:[jK(n),TK(n)];return{animation:t?`${Ms(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ms(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},DK=S.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?MK(e.position||t||"top-center",e.visible):{opacity:0},a=S.createElement(EK,{toast:e}),o=S.createElement(CK,{...e.ariaProps},oy(e.message,e));return S.createElement(OK,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:a,message:o}):S.createElement(S.Fragment,null,a,o))});nK(S.createElement);var PK=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let a=S.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(e,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return S.createElement("div",{ref:a,className:t,style:n},i)},RK=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:N$()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},LK=Uv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cg=16,P$=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:d}=dK(n,a);return S.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Cg,left:Cg,right:Cg,bottom:Cg,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let m=h.position||t,b=d.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=RK(m,b);return S.createElement(PK,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?LK:"",style:y},h.type==="custom"?oy(h.message,h):i?i(h):S.createElement(DK,{toast:h,position:m}))}))},ma=Bn;function IK(e,t,n,r=0,i=0){t<=2&&(e-=1,t+=12);const a=Math.floor(e/100),o=2-a+Math.floor(a/4),l=n+(r+i/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+l+o-1524.5}const $K=864e5;function BK(e){const t=(e-24405875e-1)*$K;return new Date(t)}function zK(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const i=n-2e3;return 63.86+.3345*i-.060374*i*i+.0017275*i**3+651814e-9*i**4+2373599e-11*i**5}if(n>=2005&&n<2050){const i=n-2e3;return 62.92+.32217*i+.005589*i*i}if(n>=2050&&n<=2150){const i=(n-1820)/100;return-20+32*i*i-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const i=(n-1800)/100;return 13.72-33.244*i+68.612*i**2-65.3*i**3-1.653*i**4+.3343*i**5-.012125*i**6+1348e-7*i**7-175e-8*i**8}const r=(n-1820)/100;return-20+32*r*r}function UK(e){const t=Math.floor(e+.5),n=e+.5-t;let r=t;if(t>=2299161){const m=Math.floor((t-186721625e-2)/36524.25);r=t+1+m-Math.floor(m/4)}const i=r+1524,a=Math.floor((i-122.1)/365.25),o=Math.floor(365.25*a),l=Math.floor((i-o)/30.6001),u=i-o-Math.floor(30.6001*l)+n;let d=l-1;d>12&&(d-=12);let h=a-4715;return d>2&&(h-=1),[h,d,u]}const Cm=Math.PI,su=Cm/180,FK=180/Cm,HK=86400;function GK(e){return e%=360,e<0?e+360:e}function YK(e,t){return(e-t+540)%360-180}function bM(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function qK(e){const[t,n]=UK(e);return e+zK(t,Math.round(n))/HK}function yM(e,t){let n=0,r=1;for(let i=0;i<e.length;i++){let a=0;for(const[o,l,u]of e[i])a+=o*Math.cos(l+u*t);n+=a*r,r*=t}return n*1e-8}function KK(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*su,r=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*su,i=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*su,a=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*su,o=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*su,l=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let u=0,d=0;for(const[h,m,b,y,k,w,_,T,O]of l){const j=h*n+m*r+b*i+y*a+k*o;u+=(w+_*t)*Math.sin(j),d+=(T+O*t)*Math.cos(j)}return u*=1e-4,d*=1e-4,{dpsi:u,deps:d}}function Mg(e){const t=qK(e),n=(t-2451545)/365250,r=yM(vM.L,n),i=yM(vM.R,n);let a=r+Cm;a>2*Cm&&(a-=2*Cm);const{dpsi:o}=KK(t),l=o/3600*su,u=20.4898/(3600*i),d=a+l-u*su;return GK(d*FK)}function gn(e,t,n){const r=(t%360+360)%360,i=IK(e,1,1),a=Mg(i);let o=r-a;o<0&&(o+=360);let l=i+o/.98564736;const u=1e-6,d=5e-6;for(let b=0;b<25;b++){const y=Mg(l),k=YK(r,y);if(Math.abs(k)<u)break;const w=Mg(l+d),_=Mg(l-d),T=bM(w,y),O=bM(_,y),j=(T-O)/(2*d);l+=k/j}const h=BK(l),m=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),0,0);if(Number.isFinite(n)){const b=n/15-9;if(Math.abs(b)>1e-12)return new Date(m.getTime()+b*36e5)}return m}const vM={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},WK=(e,t)=>(e%t+t)%t,aj=(e,t)=>(e%t+t)%t,R$=e=>e instanceof Date&&!Number.isNaN(e.getTime()),xM=new Map;function L$(e,t=127.5){const n=`${e}@${t}`,r=xM.get(n);if(r)return r;const i=gn(e,315,t);if(!i)throw new Error(`    : year=${e}, lon=${t}`);return xM.set(n,i),i}function I$(e,t=127.5){if(!R$(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),r=L$(n,t),i=e<r?n-1:n,a=WK(i-4,60);return{useYear:i,index60Num:a}}const Xr=["","","","","","","","","",""],vi=["","","","","","","","","","","",""],Uk={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},so={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},VK=["","","","","","","","","",""],ZK=["","","","","","","","","","","",""],XK=["","","","","","","","","","","","","","","","","","","",""],JK=["","","","","","","","","","","","","","","","","","","","","","","",""],nf=new Set(Xr),Bm=new Set(vi),Zn={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rr={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},zm=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],sy=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],QK={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},eW={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function ct(e,t=127.5){const{index60Num:n}=I$(e,t);return zm[n]}function tW(e,t=127.5){return(ct(e,t)||"").charAt(0)}const nW=[2,4,6,8,0,2,4,6,8,0];function rW(e,t=127.5){const n=new Array(12);return n[0]=L$(e,t),n[1]=gn(e,345,t),n[2]=gn(e,15,t),n[3]=gn(e,45,t),n[4]=gn(e,75,t),n[5]=gn(e,105,t),n[6]=gn(e,135,t),n[7]=gn(e,165,t),n[8]=gn(e,195,t),n[9]=gn(e,225,t),n[10]=gn(e,255,t),n[11]=gn(e+1,285,t),n.map(r=>new Date(r.getTime()+1800*1e3))}function iW(e,t=127.5){const{useYear:n}=I$(e,t),r=rW(n,t);let i=0;for(let o=0;o<12;o+=1)e>=r[o]&&(i=o);return{monthIndex:i+1,useYear:n,boundaries:r}}function aW(e,t=127.5){const n=tW(e,t),r=Uk..indexOf(n);if(r<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return nW[r]}function oW(e,t,n=127.5){return(aW(e,n)+(t-1))%10}function At(e,t=127.5){if(!R$(e))return"";const{monthIndex:n}=iW(e,t),r=(2+(n-1))%12,i=Uk.[r],a=oW(e,n,t);return Uk.[a]+i}const ly={JDN:2445731,idx:0};function $$(e,t,n,r=0,i=0,a=0){t<=2&&(e-=1,t+=12);const o=Math.floor(e/100),l=2-o+Math.floor(o/4),u=(r+i/60+a/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+u+l-1524.5}function sW(e,t){const n=e.getHours(),r=e.getMinutes(),i=n*60+r,a=uW(e);return t===""&&a===""?i>=1380?1:0:t===""&&(a===""||a==="")?i<180?-1:0:(i<0,0)}function lW(e,t){const r=e.getHours()*60+e.getMinutes();return t===""?r>=1380?1:0:t===""&&r<180?-1:0}function ht(e,t){const n=sW(e,t),r=new Date(e.getTime());r.setDate(r.getDate()+n);const i=$$(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes()),a=Math.floor(i+.5),o=aj(a-ly.JDN+ly.idx,60),l=zm[o];if(!l)throw new Error(`getDayGanZhi: idx=${o} out of range (jdn=${a}, jd=${i})`);return l}function Qa(e,t){if(!e)return e;const n=zm.indexOf(e);return n<0?e:zm[aj(n+t,60)]??e}function cW(e,t){const n=new Date(e),r=lW(n,t),i=new Date(e.getTime());i.setDate(i.getDate()+r);const a=$$(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),o=Math.floor(a+.5),l=aj(o-ly.JDN+ly.idx,60),u=zm[l];if(!u)throw new Error(`getDayGanZhi: idx=${l} out of range (jdn=${o}, jd=${a})`);return u}function uW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<sy.length;n+=1){const{branch:r,start:i,end:a}=sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function dW(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<sy.length;n+=1){const{branch:r,start:i,end:a}=sy[n];if(i<a){if(t>=i&&t<a)return r}else if(t>=i||t<a)return r}return""}function fW(e,t,n,r){const i=Xr.indexOf(t);if(i<0)return"";let a=(i%5*2+n)%10;const o=e.getHours();return(r===""||r==="/"&&o>=3)&&(n===0||n===1)&&(a=(a+2)%10),Xr[a]}function eo(e,t,n){e instanceof Date||(e=new Date(e));const r=dW(e),i=vi.indexOf(r),o=(n??ht(e,t)).charAt(0);return fW(e,o,i,t)+r}const wM=e=>{let t;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const b=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(y=>y(t,b))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,l);return l},hW=(e=>e?wM(e):wM),mW=e=>e;function pW(e,t=mW){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const _M=e=>{const t=hW(e),n=r=>pW(t,r);return Object.assign(n,t),n},Yo=(e=>e?_M(e):_M);function gW(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Fk=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Fk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Fk(r)(n)}}}},bW=(e,t)=>(n,r,i)=>{let a={storage:gW(()=>localStorage),partialize:w=>w,version:0,merge:(w,_)=>({..._,...w}),...t},o=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},m=i.setState;i.setState=(w,_)=>(m(w,_),h());const b=e((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>b;let y;const k=()=>{var w,_;if(!d)return;o=!1,l.forEach(O=>{var j;return O((j=r())!=null?j:b)});const T=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(w=r())!=null?w:b))||void 0;return Fk(d.getItem.bind(d))(a.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==a.version){if(a.migrate){const j=a.migrate(O.state,O.version);return j instanceof Promise?j.then(C=>[!0,C]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var j;const[C,M]=O;if(y=a.merge(M,(j=r())!=null?j:b),n(y,!0),C)return h()}).then(()=>{T?.(y,void 0),y=r(),o=!0,u.forEach(O=>O(y))}).catch(O=>{T?.(void 0,O)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||k(),y||b},B$=bW;var bs={},Dg={},Hk=function(e,t){return Hk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Hk(e,t)};function z$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var cy=function(){return cy=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cy.apply(this,arguments)};function Sf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function U$(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function F$(e,t){return function(n,r){t(n,r,e)}}function H$(e,t,n,r,i,a){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),m,b=!1,y=n.length-1;y>=0;y--){var k={};for(var w in r)k[w]=w==="access"?{}:r[w];for(var w in r.access)k.access[w]=r.access[w];k.addInitializer=function(T){if(b)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(T||null))};var _=(0,n[y])(l==="accessor"?{get:h.get,set:h.set}:h[u],k);if(l==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(m=o(_.get))&&(h.get=m),(m=o(_.set))&&(h.set=m),(m=o(_.init))&&i.unshift(m)}else(m=o(_))&&(l==="field"?i.unshift(m):h[u]=m)}d&&Object.defineProperty(d,r.name,h),b=!0}function G$(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function Y$(e){return typeof e=="symbol"?e:"".concat(e)}function q$(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function K$(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ge(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(h){try{d(r.next(h))}catch(m){o(m)}}function u(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?a(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function W$(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Hv=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function V$(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Hv(t,e,n)}function uy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oj(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Z$(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(oj(arguments[t]));return e}function X$(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r}function J$(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function rf(e){return this instanceof rf?(this.v=e,this):new rf(e)}function Q$(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(k){return Promise.resolve(k).then(y,m)}}function l(y,k){r[y]&&(i[y]=function(w){return new Promise(function(_,T){a.push([y,w,_,T])>1||u(y,w)})},k&&(i[y]=k(i[y])))}function u(y,k){try{d(r[y](k))}catch(w){b(a[0][3],w)}}function d(y){y.value instanceof rf?Promise.resolve(y.value.v).then(h,m):b(a[0][2],y)}function h(y){u("next",y)}function m(y){u("throw",y)}function b(y,k){y(k),a.shift(),a.length&&u(a[0][0],a[0][1])}}function eB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:rf(e[i](o)),done:!1}:a?a(o):o}:a}}function tB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof uy=="function"?uy(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,u){o=e[a](o),i(l,u,o.done,o.value)})}}function i(a,o,l,u){Promise.resolve(u).then(function(d){a({value:d,done:l})},o)}}function nB(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yW=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Gk=function(e){return Gk=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Gk(e)};function rB(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Gk(e),r=0;r<n.length;r++)n[r]!=="default"&&Hv(t,e,n[r]);return yW(t,e),t}function iB(e){return e&&e.__esModule?e:{default:e}}function aB(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function oB(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function sB(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function lB(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var vW=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function cB(e){function t(a){e.error=e.hasError?new vW(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function uB(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?t?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):e}const xW={__extends:z$,__assign:cy,__rest:Sf,__decorate:U$,__param:F$,__esDecorate:H$,__runInitializers:G$,__propKey:Y$,__setFunctionName:q$,__metadata:K$,__awaiter:Ge,__generator:W$,__createBinding:Hv,__exportStar:V$,__values:uy,__read:oj,__spread:Z$,__spreadArrays:X$,__spreadArray:J$,__await:rf,__asyncGenerator:Q$,__asyncDelegator:eB,__asyncValues:tB,__makeTemplateObject:nB,__importStar:rB,__importDefault:iB,__classPrivateFieldGet:aB,__classPrivateFieldSet:oB,__classPrivateFieldIn:sB,__addDisposableResource:lB,__disposeResources:cB,__rewriteRelativeImportExtension:uB},wW=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lB,get __assign(){return cy},__asyncDelegator:eB,__asyncGenerator:Q$,__asyncValues:tB,__await:rf,__awaiter:Ge,__classPrivateFieldGet:aB,__classPrivateFieldIn:sB,__classPrivateFieldSet:oB,__createBinding:Hv,__decorate:U$,__disposeResources:cB,__esDecorate:H$,__exportStar:V$,__extends:z$,__generator:W$,__importDefault:iB,__importStar:rB,__makeTemplateObject:nB,__metadata:K$,__param:F$,__propKey:Y$,__read:oj,__rest:Sf,__rewriteRelativeImportExtension:uB,__runInitializers:G$,__setFunctionName:q$,__spread:Z$,__spreadArray:J$,__spreadArrays:X$,__values:uy,default:xW},Symbol.toStringTag,{value:"Module"})),_W=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Gv=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},dB=class extends Gv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Yk=class extends Gv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},qk=class extends Gv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var dy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dy||(dy={}));class SW{constructor(t,{headers:n={},customFetch:r,region:i=dy.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=_W(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ge(this,arguments,void 0,function*(n,r={}){var i;let a,o;try{const{headers:l,method:u,body:d,signal:h,timeout:m}=r;let b={},{region:y}=r;y||(y=this.region);const k=new URL(`${this.url}/${n}`);y&&y!=="any"&&(b["x-region"]=y,k.searchParams.set("forceFunctionRegion",y));let w;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(b["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(b["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let _=h;m&&(o=new AbortController,a=setTimeout(()=>o.abort(),m),h?(_=o.signal,h.addEventListener("abort",()=>o.abort())):_=o.signal);const T=yield this.fetch(k.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),l),body:w,signal:_}).catch(M=>{throw new dB(M)}),O=T.headers.get("x-relay-error");if(O&&O==="true")throw new Yk(T);if(!T.ok)throw new qk(T);let j=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield T.json():j==="application/octet-stream"||j==="application/pdf"?C=yield T.blob():j==="text/event-stream"?C=T:j==="multipart/form-data"?C=yield T.formData():C=yield T.text(),{data:C,error:null,response:T}}catch(l){return{data:null,error:l,response:l instanceof qk||l instanceof Yk?l.context:void 0}}finally{a&&clearTimeout(a)}})}}const kW=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return dy},FunctionsClient:SW,FunctionsError:Gv,FunctionsFetchError:dB,FunctionsHttpError:qk,FunctionsRelayError:Yk},Symbol.toStringTag,{value:"Module"})),fB=wp(kW);var $r={};const kf=wp(wW);var Pg={},Rg={},Lg={},Ig={},$g={},Bg={},SM;function hB(){if(SM)return Bg;SM=1,Object.defineProperty(Bg,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Bg.default=e,Bg}var kM;function mB(){if(kM)return $g;kM=1,Object.defineProperty($g,"__esModule",{value:!0});const t=kf.__importDefault(hB());let n=class{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,b;let y=null,k=null,w=null,_=u.status,T=u.statusText;if(u.ok){if(this.method!=="HEAD"){const M=await u.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?k=M:k=JSON.parse(M))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),C=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");j&&C&&C.length>1&&(w=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(y={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,w=null,_=406,T="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const j=await u.text();try{y=JSON.parse(j),Array.isArray(y)&&u.status===404&&(k=[],y=null,_=200,T="OK")}catch{u.status===404&&j===""?(_=204,T="No Content"):y={message:j}}if(y&&this.isMaybeSingle&&(!((b=y?.details)===null||b===void 0)&&b.includes("0 rows"))&&(y=null,_=200,T="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:k,count:w,status:_,statusText:T}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,h,m,b,y,k;let w="";const _=u?.cause;if(_){const T=(d=_?.message)!==null&&d!==void 0?d:"",O=(h=_?.code)!==null&&h!==void 0?h:"";w=`${(m=u?.name)!==null&&m!==void 0?m:"FetchError"}: ${u?.message}`,w+=`

Caused by: ${(b=_?.name)!==null&&b!==void 0?b:"Error"}: ${T}`,O&&(w+=` (${O})`),_?.stack&&(w+=`
${_.stack}`)}else w=(y=u?.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(k=u?.name)!==null&&k!==void 0?k:"FetchError"}: ${u?.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}};return $g.default=n,$g}var EM;function pB(){if(EM)return Ig;EM=1,Object.defineProperty(Ig,"__esModule",{value:!0});const t=kf.__importDefault(mB());let n=class extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const m=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),b=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${b}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Ig.default=n,Ig}var jM;function sj(){if(jM)return Lg;jM=1,Object.defineProperty(Lg,"__esModule",{value:!0});const t=kf.__importDefault(pB()),n=new RegExp("[,()]");let r=class extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}};return Lg.default=r,Lg}var TM;function gB(){if(TM)return Rg;TM=1,Object.defineProperty(Rg,"__esModule",{value:!0});const t=kf.__importDefault(sj());let n=class{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},u=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((b,y)=>b.concat(Object.keys(y)),[]);if(m.length>0){const b=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return Rg.default=n,Rg}var AM;function EW(){if(AM)return Pg;AM=1,Object.defineProperty(Pg,"__esModule",{value:!0});const e=kf,t=e.__importDefault(gB()),n=e.__importDefault(sj());let r=class bB{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new bB(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:d}={}){var h;let m;const b=new URL(`${this.url}/rpc/${a}`);let y;l||u?(m=l?"HEAD":"GET",Object.entries(o).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{b.searchParams.append(w,_)})):(m="POST",y=o);const k=new Headers(this.headers);return d&&k.set("Prefer",`count=${d}`),new n.default({method:m,url:b,headers:k,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return Pg.default=r,Pg}var NM;function yB(){if(NM)return $r;NM=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.PostgrestError=$r.PostgrestBuilder=$r.PostgrestTransformBuilder=$r.PostgrestFilterBuilder=$r.PostgrestQueryBuilder=$r.PostgrestClient=void 0;const e=kf,t=e.__importDefault(EW());$r.PostgrestClient=t.default;const n=e.__importDefault(gB());$r.PostgrestQueryBuilder=n.default;const r=e.__importDefault(sj());$r.PostgrestFilterBuilder=r.default;const i=e.__importDefault(pB());$r.PostgrestTransformBuilder=i.default;const a=e.__importDefault(mB());$r.PostgrestBuilder=a.default;const o=e.__importDefault(hB());return $r.PostgrestError=o.default,$r.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},$r}class vB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const jW="2.86.2",TW=`realtime-js/${jW}`,xB="1.0.0",AW="2.0.0",OM=xB,Kk=1e4,NW=1e3,OW=100;var lu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lu||(lu={}));var Kn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Kn||(Kn={}));var Ga;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ga||(Ga={}));var Wk;(function(e){e.websocket="websocket"})(Wk||(Wk={}));var cu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(cu||(cu={}));class CW{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,a;const o=t.topic,l=(i=t.ref)!==null&&i!==void 0?i:"",u=(a=t.join_ref)!==null&&a!==void 0?a:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+b);let k=new DataView(y),w=0;k.setUint8(w++,this.KINDS.userBroadcastPush),k.setUint8(w++,u.length),k.setUint8(w++,l.length),k.setUint8(w++,o.length),k.setUint8(w++,d.length),k.setUint8(w++,m.length),k.setUint8(w++,n),Array.from(u,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(l,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(o,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(d,T=>k.setUint8(w++,T.charCodeAt(0))),Array.from(m,T=>k.setUint8(w++,T.charCodeAt(0)));var _=new Uint8Array(y.byteLength+r.byteLength);return _.set(new Uint8Array(y),0),_.set(new Uint8Array(r),y.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,o,l,u]=r;return n({join_ref:i,ref:a,topic:o,event:l,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(t.slice(u,u+i));u=u+i;const h=r.decode(t.slice(u,u+a));u=u+a;const m=r.decode(t.slice(u,u+o));u=u+o;const b=t.slice(u,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,k={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(k.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class wB{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nn||(nn={}));const CM=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=MW(o,e,t,i),a),{}):{}},MW=(e,t,n,r)=>{const i=t.find(l=>l.name===e),a=i?.type,o=n[e];return a&&!r.includes(a)?_B(a,o):Vk(o)},_B=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return LW(t,n)}switch(e){case nn.bool:return DW(t);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return PW(t);case nn.json:case nn.jsonb:return RW(t);case nn.timestamp:return IW(t);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return Vk(t);default:return Vk(t)}},Vk=e=>e,DW=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PW=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},RW=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},LW=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>_B(t,l))}return e},IW=e=>typeof e=="string"?e.replace(" ","T"):e,SB=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class n1{constructor(t,n,r={},i=Kk){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Zk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Zk||(Zk={}));let kB=class Hb{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hb.syncState(this.state,i,a,o),this.pendingDiffs.forEach(u=>{this.state=Hb.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hb.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),l={},u={};return this.map(a,(d,h)=>{o[d]||(u[d]=h)}),this.map(o,(d,h)=>{const m=a[d];if(m){const b=h.map(_=>_.presence_ref),y=m.map(_=>_.presence_ref),k=h.filter(_=>y.indexOf(_.presence_ref)<0),w=m.filter(_=>b.indexOf(_.presence_ref)<0);k.length>0&&(l[d]=k),w.length>0&&(u[d]=w)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,u)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),h.length>0){const m=t[l].map(y=>y.presence_ref),b=h.filter(y=>m.indexOf(y.presence_ref)<0);t[l].unshift(...b)}r(l,h,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const h=u.map(m=>m.presence_ref);d=d.filter(m=>h.indexOf(m.presence_ref)<0),t[l]=d,i(l,d,u),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Xk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xk||(Xk={}));var Vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vd||(Vd={}));var No;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(No||(No={}));const $W=Kn;let EB=class jB{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new n1(this,Ga.join,this.params,this.timeout),this.rejoinTimer=new wB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ga.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new kB(this),this.broadcastEndpointURL=SB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Kn.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Vd.PRESENCE]&&this.bindings[Vd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},b={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t?.(No.CHANNEL_ERROR,y)),this._onClose(()=>t?.(No.CLOSED)),this.updateJoinPayload(Object.assign({config:b},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket.setAuth(),y===void 0){t?.(No.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(k=w?.length)!==null&&k!==void 0?k:0,T=[];for(let O=0;O<_;O++){const j=w[O],{filter:{event:C,schema:M,table:P,filter:I}}=j,U=y&&y[O];if(U&&U.event===C&&U.schema===M&&U.table===P&&U.filter===I)T.push(Object.assign(Object.assign({},j),{id:U.id}));else{this.unsubscribe(),this.state=Kn.errored,t?.(No.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(No.SUBSCRIBED);return}}).receive("error",y=>{this.state=Kn.errored,t?.(No.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t?.(No.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Kn.joined&&t===Vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,u;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ga.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new n1(this,Ga.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new n1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>OW){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=Ga;if(r&&[l,u,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let b=this._onMessage(o,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var k,w,_;return((k=y.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(w=y.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(y=>y.callback(b,r)):(a=this.bindings[o])===null||a===void 0||a.filter(y=>{var k,w,_,T,O,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const C=y.id,M=(k=y.filter)===null||k===void 0?void 0:k.event;return C&&((w=n.ids)===null||w===void 0?void 0:w.includes(C))&&(M==="*"||M?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(O=(T=y?.filter)===null||T===void 0?void 0:T.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return C==="*"||C===((j=n?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:w,table:_,commit_timestamp:T,type:O,errors:j}=k;b=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:T,eventType:O,new:{},old:{},errors:j}),this._getPayloadRecords(k))}y.callback(b,r)})}_isClosed(){return this.state===Kn.closed}_isJoined(){return this.state===Kn.joined}_isJoining(){return this.state===Kn.joining}_isLeaving(){return this.state===Kn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&jB.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ga.close,{},t)}_onError(t){this._on(Ga.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=CM(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=CM(t.columns,t.old_record)),n}};const r1=()=>{},zg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BW=[1e3,2e3,5e3,1e4],zW=1e4,UW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let FW=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kk,this.transport=null,this.heartbeatIntervalMs=zg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=r1,this.ref=0,this.reconnectTimer=null,this.vsn=OM,this.logger=r1,this.conn=null,this.sendBuffer=[],this.serializer=new CW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Wk.websocket}`,this.httpEndpoint=SB(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lu.connecting:return cu.Connecting;case lu.open:return cu.Open;case lu.closing:return cu.Closing;default:return cu.Closed}}isConnected(){return this.connectionState()===cu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new EB(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(NW,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,l=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===lu.open||this.conn.readyState===lu.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ga.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([UW],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:TW};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ga.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new wB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,l,u,d,h,m,b,y;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Kk,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:zg.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:r1,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:OM,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(k=>BW[k-1]||zW),this.vsn){case xB:this.encode=(h=t?.encode)!==null&&h!==void 0?h:((k,w)=>w(JSON.stringify(k))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:((k,w)=>w(JSON.parse(k)));break;case AW:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(y=t?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const HW=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:$W,get REALTIME_LISTEN_TYPES(){return Vd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Xk},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Zk},get REALTIME_SUBSCRIBE_STATES(){return No},RealtimeChannel:EB,RealtimeClient:FW,RealtimePresence:kB,WebSocketFactory:vB},Symbol.toStringTag,{value:"Module"})),TB=wp(HW);class Ep extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function mn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class AB extends Ep{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fy extends Ep{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const lj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GW=()=>Response,Jk=e=>{if(Array.isArray(e))return e.map(n=>Jk(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Jk(r)}),t},YW=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qW=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),i1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},KW=(e,t,n)=>Ge(void 0,void 0,void 0,function*(){const r=yield GW();e instanceof r&&!n?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new AB(i1(i),a,o))}).catch(i=>{t(new fy(i1(i),i))}):t(new fy(i1(e),e))}),WW=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!r?i:(YW(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function jp(e,t,n,r,i,a){return Ge(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,WW(t,r,i,a)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>KW(u,l,r))})})}function Um(e,t,n,r){return Ge(this,void 0,void 0,function*(){return jp(e,"GET",t,n,r)})}function Ha(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"POST",t,r,i,n)})}function Qk(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"PUT",t,r,i,n)})}function VW(e,t,n,r){return Ge(this,void 0,void 0,function*(){return jp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cj(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return jp(e,"DELETE",t,r,i,n)})}class ZW{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ge(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mn(t))return{data:null,error:t};throw t}})}}var NB;class XW{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[NB]="BlobDownloadBuilder",this.promise=null}asStream(){return new ZW(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ge(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(mn(t))return{data:null,error:t};throw t}})}}NB=Symbol.toStringTag;const JW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},MM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QW{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=lj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Ge(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},MM),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),u&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),m=yield(t=="PUT"?Qk:Ha)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mn(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ge(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:MM.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const m=yield Qk(this.fetch,l.toString(),u,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(mn(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Ep("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ge(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ha(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ge(this,void 0,void 0,function*(){try{const i=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),u=()=>Um(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new XW(u,this.shouldThrowOnError)}info(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Um(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jk(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}exists(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield VW(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r)&&r instanceof fy){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ge(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},JW),n),{prefix:t||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Ge(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ha(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const OB="2.86.2",CB={"X-Client-Info":`storage-js/${OB}`};class eV{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CB),n),this.fetch=lj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ge(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Um(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}getBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Um(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}createBucket(t){return Ge(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:yield Qk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Fm=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tV(e,t,n){const r=new URL(t,e);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function nV(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function rV(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:o}){const l=tV(e.baseUrl,r,i),u=await nV(e.auth),d=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...u,...o},body:a?JSON.stringify(a):void 0}),h=await d.text(),m=(d.headers.get("content-type")||"").includes("application/json"),b=m&&h?JSON.parse(h):h;if(!d.ok){const y=m?b:void 0,k=y?.error;throw new Fm(k?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:k?.type,icebergCode:k?.code,details:y})}return{status:d.status,headers:d.headers,data:b}}}}function Ug(e){return e.join("")}var iV=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ug(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ug(e.namespace)}`}),!0}catch(t){if(t instanceof Fm&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Fm&&n.status===409)return;throw n}}};function Sd(e){return e.join("")}var aV=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sd(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Fm&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Fm&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},oV=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=rV({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new iV(this.client,t),this.tableOps=new aV(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class MB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CB),n),this.fetch=lj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ge(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Um(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield cj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}from(t){if(!qW(t))throw new Ep("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new oV({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ge(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const uj={"X-Client-Info":`storage-js/${OB}`,"Content-Type":"application/json"};class dj extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function bi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Gb extends dj{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class DB extends dj{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var e2;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(e2||(e2={}));const Yv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sV=()=>Response,PB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lV=e=>Array.from(new Float32Array(e)),cV=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},DM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uV=(e,t,n)=>Ge(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new Gb(DM(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Gb(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Gb(l,i,o))}}else t(new DB(DM(e),e))}),dV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return r?(PB(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function fV(e,t,n,r,i,a){return Ge(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,dV(t,r,i,a)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>uV(u,l,r))})})}function Bi(e,t,n,r,i){return Ge(this,void 0,void 0,function*(){return fV(e,"POST",t,r,i,n)})}class RB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ge(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bi(r))return{data:null,error:r};throw r}})}}class LB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Bi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getVectors(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}listVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Bi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ge(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Bi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}}class IB{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uj),n),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}getBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}listBuckets(){return Ge(this,arguments,void 0,function*(t={}){try{return{data:yield Bi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ge(this,void 0,void 0,function*(){try{return{data:(yield Bi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bi(n))return{data:null,error:n};throw n}})}}class $B extends IB{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new BB(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ge(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ge(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ge(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ge(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class BB extends RB{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ge(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ge(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ge(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ge(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new zB(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class zB extends LB{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ge(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ge(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ge(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ge(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ge(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class hV extends eV{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new QW(this.url,this.headers,t,this.fetch)}get vectors(){return new $B(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new MB(this.url+"/iceberg",this.headers,this.fetch)}}const mV=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:MB,StorageApiError:AB,StorageClient:hV,StorageError:Ep,StorageUnknownError:fy,StorageVectorsApiError:Gb,StorageVectorsClient:$B,StorageVectorsError:dj,get StorageVectorsErrorCode(){return e2},StorageVectorsUnknownError:DB,VectorBucketApi:IB,VectorBucketScope:BB,VectorDataApi:LB,VectorIndexApi:RB,VectorIndexScope:zB,isPlainObject:PB,isStorageError:mn,isStorageVectorsError:bi,normalizeToFloat32:lV,resolveFetch:Yv,resolveResponse:sV,validateVectorDimension:cV},Symbol.toStringTag,{value:"Module"})),pV=wp(mV);var a1={},Vh={},PM;function gV(){return PM||(PM=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.version=void 0,Vh.version="2.86.2"),Vh}var RM;function bV(){return RM||(RM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=gV();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(a1)),a1}var o1={},LM;function yV(){return LM||(LM=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const r=(i,a,o)=>{const l=(0,e.resolveFetch)(o),u=(0,e.resolveHeadersConstructor)();return async(d,h)=>{var m;const b=(m=await a())!==null&&m!==void 0?m:i;let y=new u(h?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),l(d,Object.assign(Object.assign({},h),{headers:y}))}};e.fetchWithAuth=r})(o1)),o1}var ys={},IM;function vV(){if(IM)return ys;IM=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.isBrowser=void 0,ys.uuid=e,ys.ensureTrailingSlash=t,ys.applySettingDefaults=r,ys.validateSupabaseUrl=i;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var o=Math.random()*16|0,l=a=="x"?o:o&3|8;return l.toString(16)})}function t(a){return a.endsWith("/")?a:a+"/"}const n=()=>typeof window<"u";ys.isBrowser=n;function r(a,o){var l,u;const{db:d,auth:h,realtime:m,global:b}=a,{db:y,auth:k,realtime:w,global:_}=o,T={db:Object.assign(Object.assign({},y),d),auth:Object.assign(Object.assign({},k),h),realtime:Object.assign(Object.assign({},w),m),storage:{},global:Object.assign(Object.assign(Object.assign({},_),b),{headers:Object.assign(Object.assign({},(l=_?.headers)!==null&&l!==void 0?l:{}),(u=b?.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return a.accessToken?T.accessToken=a.accessToken:delete T.accessToken,T}function i(a){const o=a?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ys}var Zh={};const UB="2.86.2",Id=30*1e3,t2=3,s1=t2*Id,xV="http://localhost:9999",wV="supabase.auth.token",_V={"X-Client-Info":`gotrue-js/${UB}`},n2="X-Supabase-Api-Version",FB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kV=600*1e3;let af=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let HB=class extends af{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function GB(e){return We(e)&&e.name==="AuthApiError"}let Ll=class extends af{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},zs=class extends af{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},mi=class extends zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function YB(e){return We(e)&&e.name==="AuthSessionMissingError"}let eu=class extends zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},_m=class extends zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Sm=class extends zs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function qB(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let r2=class extends zs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},hy=class extends zs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Yb(e){return We(e)&&e.name==="AuthRetryableFetchError"}let i2=class extends zs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function EV(e){return We(e)&&e.name==="AuthWeakPasswordError"}let my=class extends zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$M=` 	
\r=`.split(""),jV=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$M.length;t+=1)e[$M[t].charCodeAt(0)]=-2;for(let t=0;t<py.length;t+=1)e[py[t].charCodeAt(0)]=t;return e})();function BM(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}}function KB(e,t,n){const r=jV[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zM(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{NV(o,r,n)};for(let o=0;o<e.length;o+=1)KB(e.charCodeAt(o),i,a);return t.join("")}function TV(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function AV(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}TV(r,t)}}function NV(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Zd(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)KB(e.charCodeAt(i),n,r);return new Uint8Array(t)}function OV(e){const t=[];return AV(e,n=>t.push(n)),new Uint8Array(t)}function fu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>BM(i,n,r)),BM(null,n,r),t.join("")}function CV(e){return Math.round(Date.now()/1e3)+e}function MV(){return Symbol("auth-callback")}const Ar=()=>typeof window<"u"&&typeof document<"u",Hc={tested:!1,writable:!1},WB=()=>{if(!Ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hc.tested)return Hc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Hc.tested=!0,Hc.writable=!0}catch{Hc.tested=!0,Hc.writable=!1}return Hc.writable};function DV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const VB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),PV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$d=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Gc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jr=async(e,t)=>{await e.removeItem(t)};class qv{constructor(){this.promise=new qv.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}qv.promiseConstructor=Promise;function l1(e){const t=e.split(".");if(t.length!==3)throw new my("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!SV.test(t[r]))throw new my("JWT not in base64url format");return{header:JSON.parse(zM(t[0])),payload:JSON.parse(zM(t[1])),signature:Zd(t[2]),raw:{header:t[0],payload:t[1]}}}async function RV(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function LV(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function IV(e){return("0"+e.toString(16)).substr(-2)}function $V(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,IV).join("")}async function BV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function zV(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await BV(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kd(e,t,n=!1){const r=$V();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await $d(e,`${t}-code-verifier`,i);const a=await zV(r);return[a,r===a?"plain":"s256"]}const UV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FV(e){const t=e.headers.get(n2);if(!t||!t.match(UV))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function HV(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function GV(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ed(e){if(!YV.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function c1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qV(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function UM(e){return JSON.parse(JSON.stringify(e))}const tu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),KV=[502,503,504];async function FM(e){var t;if(!PV(e))throw new hy(tu(e),0);if(KV.includes(e.status))throw new hy(tu(e),e.status);let n;try{n=await e.json()}catch(a){throw new Ll(tu(a),a)}let r;const i=FV(e);if(i&&i.getTime()>=FB["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new i2(tu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new mi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new i2(tu(n),e.status,n.weak_password.reasons);throw new HB(tu(n),e.status||500,r)}const WV=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function st(e,t,n,r){var i;const a=Object.assign({},r?.headers);a[n2]||(a[n2]=FB["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await VV(e,t,n+l,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function VV(e,t,n,r,i,a){const o=WV(t,r,i,a);let l;try{l=await e(n,Object.assign({},o))}catch(u){throw console.error(u),new hy(tu(u),0)}if(l.ok||await FM(l),r?.noResolveJson)return l;try{return await l.json()}catch(u){await FM(u)}}function Fa(e){var t;let n=null;JV(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=CV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function HM(e){const t=Fa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Il(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ZV(e){return{data:e,error:null}}function XV(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=Sf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function GM(e){return e}function JV(e){return e.access_token&&e.refresh_token&&e.expires_in}const qb=["global","local","others"];let fj=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=VB(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=qb[0]){if(qb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qb.join(", ")}`);try{return await st(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await st(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Il})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Sf(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await st(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:XV,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await st(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Il})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:GM});if(h.error)throw h.error;const m=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(We(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ed(t);try{return await st(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Il})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ed(t);try{return await st(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Il})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ed(t);try{return await st(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Il})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ed(t.userId);try{const{data:n,error:r}=await st(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ed(t.userId),Ed(t.id);try{return{data:await st(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:GM});if(h.error)throw h.error;const m=await h.json(),b=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(k=>{const w=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);d[`${_}Page`]=w}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(We(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await st(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await st(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(We(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await st(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function YM(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const nu={debug:!!(globalThis&&WB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let ZB=class extends hj{};class QV extends hj{}async function XB(e,t,n){nu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),nu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){nu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{nu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw nu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(nu.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const qM={};async function eZ(e,t,n){var r;const i=(r=qM[e])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),t>=0?new Promise((o,l)=>{setTimeout(()=>{l(new QV(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return qM[e]=a.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await a}function tZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JB(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function nZ(e){return parseInt(e,16)}function rZ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function iZ(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:h,uri:m,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=JB(e.address),k=h?`${h}://${r}`:r,w=e.statement?`${e.statement}
`:"",_=`${k} wants you to sign in with your Ethereum account:
${y}

${w}`;let T=`URI: ${m}
Version: ${b}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),l&&(T+=`
Not Before: ${l.toISOString()}`),u&&(T+=`
Request ID: ${u}`),d){let O=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);O+=`
- ${j}`}T+=O}return`${_}
${T}`}class Wn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class gy extends Wn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function aZ({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Wn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(QB(o)){if(a.rp.id!==o)return new Wn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function oZ({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Wn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(QB(r)){if(n.rpId!==r)return new Wn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class sZ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lZ=new sZ;function cZ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Sf(e,["challenge","user","excludeCredentials"]),a=Zd(t).buffer,o=Object.assign(Object.assign({},n),{id:Zd(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Zd(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function uZ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Sf(e,["challenge","allowCredentials"]),i=Zd(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Zd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function dZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:fu(new Uint8Array(e.response.attestationObject)),clientDataJSON:fu(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fZ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:fu(new Uint8Array(i.authenticatorData)),clientDataJSON:fu(new Uint8Array(i.clientDataJSON)),signature:fu(new Uint8Array(i.signature)),userHandle:i.userHandle?fu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function QB(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function KM(){var e,t;return!!(Ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function hZ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gy("Browser returned unexpected credential type",t)}:{data:null,error:new gy("Empty credential response",t)}}catch(t){return{data:null,error:aZ({error:t,options:e})}}}async function mZ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gy("Browser returned unexpected credential type",t)}:{data:null,error:new gy("Empty credential response",t)}}catch(t){return{data:null,error:oZ({error:t,options:e})}}}const pZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function by(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const l=r[a];t(l)?r[a]=by(l,o):r[a]=by(o)}else r[a]=o}return r}function bZ(e,t){return by(pZ,e,t||{})}function yZ(e,t){return by(gZ,e,t||{})}class vZ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const u=i??lZ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=bZ(o.webauthn.credential_options.publicKey,a?.create),{data:h,error:m}=await hZ({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}case"request":{const d=yZ(o.webauthn.credential_options.publicKey,a?.request),{data:h,error:m}=await mZ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Ll("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new af("rpId is required for WebAuthn authentication")};try{if(!KM())return{data:null,error:new Ll("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Ll("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new af("rpId is required for WebAuthn registration")};try{if(!KM())return{data:null,error:new Ll("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var m;return(m=h.data)===null||m===void 0?void 0:m.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new Ll("Unexpected error in register",o)}}}}tZ();const xZ={url:xV,storageKey:wV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_V,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function WM(e,t,n){return await n()}const jd={};let mj=class a2{get jwks(){var t,n;return(n=(t=jd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=jd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},xZ),t);if(this.storageKey=a.storageKey,this.instanceID=(n=a2.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,a2.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ar()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new fj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=VB(a.fetch),this.lock=a.lock||WM,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ar()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=XB:this.lock=WM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vZ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:WB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=YM(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=YM(this.memoryStorage)),Ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${UB}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Ar()&&(n=DV(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ar()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),qB(a)){const u=(t=a.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Ll("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Fa}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:h,password:m,options:b}=t;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await kd(this.storage,this.storageKey)),a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:h,password:m,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:k},xform:Fa})}else if("phone"in t){const{phone:h,password:m,options:b}=t;a=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Fa})}else throw new _m("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await jr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:HM})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:HM})}else throw new _m("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new eu;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,l,u,d,h,m,b;let y,k;if("message"in t)y=t.message,k=t.signature;else{const{chain:w,wallet:_,statement:T,options:O}=t;let j;if(Ar())if(typeof _=="object")j=_;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")j=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=_}const C=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=JB(M[0]);let I=(r=O?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const W=await j.request({method:"eth_chainId"});I=nZ(W)}const U={domain:C.host,address:P,statement:T,uri:C.href,version:"1",chainId:I,nonce:(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=O?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=iZ(U),k=await j.request({method:"personal_sign",params:[rZ(y),P]})}try{const{data:w,error:_}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:k},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Fa});if(_)throw _;if(!w||!w.session||!w.user){const T=new eu;return this._returnResult({data:{user:null,session:null},error:T})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(We(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,a,o,l,u,d,h,m,b,y;let k,w;if("message"in t)k=t.message,w=t.signature;else{const{chain:_,wallet:T,statement:O,options:j}=t;let C;if(Ar())if(typeof T=="object")C=T;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const M=new URL((n=j?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),O?{statement:O}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),w=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=j?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=j?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((m=(h=j?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...j.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(k),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=P}}try{const{data:_,error:T}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:fu(w)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Fa});if(T)throw T;if(!_||!_.session||!_.user){const O=new eu;return this._returnResult({data:{user:null,session:null},error:O})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(We(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await Gc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await st(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Fa});if(await jr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new eu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,l=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Fa}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new eu;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await kd(this.storage,this.storageKey));const{error:m}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:h}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new _m("You must provide either an email or phone number.")}catch(l){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await st(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Fa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await kd(this.storage,this.storageKey));const d=await st(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:ZV});return!((a=d.data)===null||a===void 0)&&a.url&&Ar()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new mi;const{error:i}=await st(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await st(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:l}=await st(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new _m("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Gc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<s1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Gc(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=c1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=qV(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Il}):await this._useSession(async n=>{var r,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mi}:await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Il})})}catch(n){if(We(n))return YB(n)&&(await this._removeSession(),await jr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new mi;const o=i.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await kd(this.storage,this.storageKey));const{data:d,error:h}=await st(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Il});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new mi;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=l1(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new mi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Ar())throw new Sm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new r2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new r2("No code detected.");const{data:O,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!a||!l||!o||!d)throw new Sm("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(l);let b=h+m;u&&(b=parseInt(u));const y=b-h;y*1e3<=Id&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const k=b-m;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,h);const{data:w,error:_}=await this._getUser(a);if(_)throw _;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:b,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(r){if(We(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Gc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(GB(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await jr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=MV(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await kd(this.storage,this.storageKey,!0));try{return await st(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,l,u,d,h;const{data:m,error:b}=a;if(b)throw b;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await st(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Ar()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:t.provider,url:r?.url},error:null})}catch(r){if(We(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:l,token:u,access_token:d,nonce:h}=t,m=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Fa}),{data:b,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new eu}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:y}))}catch(i){if(await jr(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await st(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await LV(async i=>(i>0&&await RV(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await st(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Fa})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Yb(a)&&Date.now()+o-r<Id})}catch(r){if(this._debug(n,"error",r),We(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ar()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Gc(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Gc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await $d(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:c1()}else if(i&&!i.user&&!i.user){const o=await Gc(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await jr(this.storage,this.storageKey+"-user"),await $d(this.storage,this.storageKey,i)):i.user=c1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<s1;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${s1}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Yb(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qv;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new mi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),We(a)){const o={data:null,error:a};return Yb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await jr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await $d(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=UM(i);await $d(this.storage,this.storageKey,a)}else{const i=UM(n);await $d(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await jr(this.storage,this.storageKey),await jr(this.storage,this.storageKey+"-code-verifier"),await jr(this.storage,this.storageKey+"-user"),this.userStorage&&await jr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ar()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Id);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Id);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Id}ms, refresh threshold is ${t2} ticks`),i<=t2&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ar()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await kd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await st(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await st(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?dZ(t.webauthn.credential_response):fZ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cZ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:uZ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n?.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=l1(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await st(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new mi})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new mi});const o=await st(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ar()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new mi});const o=await st(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ar()&&!n?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await st(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new mi})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await st(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mi})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+kV>i)return r;const{data:a,error:o}=await st(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:k}=await this.getSession();if(k||!y.session)return this._returnResult({data:null,error:k});r=y.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:u}}=l1(r);n?.allowExpired||HV(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:a,header:i,signature:o},error:null}}const h=GV(i.alg),m=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,OV(`${l}.${u}`)))throw new my("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(We(r))return this._returnResult({data:null,error:r});throw r}}};mj.nextInstanceID={};const wZ=fj,_Z=mj,SZ=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:wZ,AuthApiError:HB,AuthClient:_Z,AuthError:af,AuthImplicitGrantRedirectError:Sm,AuthInvalidCredentialsError:_m,AuthInvalidJwtError:my,AuthInvalidTokenResponseError:eu,AuthPKCEGrantCodeExchangeError:r2,AuthRetryableFetchError:hy,AuthSessionMissingError:mi,AuthUnknownError:Ll,AuthWeakPasswordError:i2,CustomAuthError:zs,GoTrueAdminApi:fj,GoTrueClient:mj,NavigatorLockAcquireTimeoutError:ZB,SIGN_OUT_SCOPES:qb,isAuthApiError:GB,isAuthError:We,isAuthImplicitGrantRedirectError:qB,isAuthRetryableFetchError:Yb,isAuthSessionMissingError:YB,isAuthWeakPasswordError:EV,lockInternals:nu,navigatorLock:XB,processLock:eZ},Symbol.toStringTag,{value:"Module"})),e4=wp(SZ);var VM;function kZ(){if(VM)return Zh;VM=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.SupabaseAuthClient=void 0;const e=e4;let t=class extends e.AuthClient{constructor(r){super(r)}};return Zh.SupabaseAuthClient=t,Zh}var ZM;function XM(){if(ZM)return Dg;ZM=1,Object.defineProperty(Dg,"__esModule",{value:!0});const e=fB,t=yB(),n=TB,r=pV,i=bV(),a=yV(),o=vV(),l=kZ();class u{constructor(h,m,b){var y,k,w;this.supabaseUrl=h,this.supabaseKey=m;const _=(0,o.validateSupabaseUrl)(h);if(!m)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const T=`sb-${_.hostname.split(".")[0]}-auth-token`,O={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:T}),global:i.DEFAULT_GLOBAL_OPTIONS},j=(0,o.applySettingDefaults)(b??{},O);this.storageKey=(y=j.auth.storageKey)!==null&&y!==void 0?y:"",this.headers=(k=j.global.headers)!==null&&k!==void 0?k:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(C,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((w=j.auth)!==null&&w!==void 0?w:{},this.headers,j.global.fetch),this.fetch=(0,a.fetchWithAuth)(m,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new t.PostgrestClient(new URL("rest/v1",_).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new r.StorageClient(this.storageUrl.href,this.headers,this.fetch,b?.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(h){return this.rest.from(h)}schema(h){return this.rest.schema(h)}rpc(h,m={},b={head:!1,get:!1,count:void 0}){return this.rest.rpc(h,m,b)}channel(h,m={config:{}}){return this.realtime.channel(h,m)}getChannels(){return this.realtime.getChannels()}removeChannel(h){return this.realtime.removeChannel(h)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var h,m;if(this.accessToken)return await this.accessToken();const{data:b}=await this.auth.getSession();return(m=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:h,persistSession:m,detectSessionInUrl:b,storage:y,userStorage:k,storageKey:w,flowType:_,lock:T,debug:O,throwOnError:j},C,M){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},P),C),storageKey:w,autoRefreshToken:h,persistSession:m,detectSessionInUrl:b,storage:y,userStorage:k,flowType:_,lock:T,debug:O,throwOnError:j,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(h){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},h),{params:Object.assign({apikey:this.supabaseKey},h?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((m,b)=>{this._handleTokenChanged(m,"CLIENT",b?.access_token)})}_handleTokenChanged(h,m,b){(h==="TOKEN_REFRESHED"||h==="SIGNED_IN")&&this.changedAccessToken!==b?(this.changedAccessToken=b,this.realtime.setAuth(b)):h==="SIGNED_OUT"&&(this.realtime.setAuth(),m=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Dg.default=u,Dg}var JM;function EZ(){return JM||(JM=1,(function(e){var t=bs&&bs.__createBinding||(Object.create?(function(h,m,b,y){y===void 0&&(y=b);var k=Object.getOwnPropertyDescriptor(m,b);(!k||("get"in k?!m.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return m[b]}}),Object.defineProperty(h,y,k)}):(function(h,m,b,y){y===void 0&&(y=b),h[y]=m[b]})),n=bs&&bs.__exportStar||function(h,m){for(var b in h)b!=="default"&&!Object.prototype.hasOwnProperty.call(m,b)&&t(m,h,b)},r=bs&&bs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=r(XM());n(e4,e);var a=yB();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var o=fB;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(TB,e);var l=XM();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return r(l).default}});const u=(h,m,b)=>new i.default(h,m,b);e.createClient=u;function d(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const m=h.match(/^v(\d+)\./);return m?parseInt(m[1],10)<=18:!1}d()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(bs)),bs}var t4=EZ();const n4=_i(t4),jZ=VE({__proto__:null,default:n4},[t4]),{PostgrestError:kCe,FunctionsHttpError:ECe,FunctionsFetchError:jCe,FunctionsRelayError:TCe,FunctionsError:ACe,FunctionRegion:NCe,SupabaseClient:OCe,createClient:TZ,GoTrueAdminApi:CCe,GoTrueClient:MCe,AuthAdminApi:DCe,AuthClient:PCe,navigatorLock:RCe,NavigatorLockAcquireTimeoutError:LCe,lockInternals:ICe,processLock:$Ce,SIGN_OUT_SCOPES:BCe,AuthError:zCe,AuthApiError:UCe,AuthUnknownError:FCe,CustomAuthError:HCe,AuthSessionMissingError:GCe,AuthInvalidTokenResponseError:YCe,AuthInvalidCredentialsError:qCe,AuthImplicitGrantRedirectError:KCe,AuthPKCEGrantCodeExchangeError:WCe,AuthRetryableFetchError:VCe,AuthWeakPasswordError:ZCe,AuthInvalidJwtError:XCe,isAuthError:JCe,isAuthApiError:QCe,isAuthSessionMissingError:eMe,isAuthImplicitGrantRedirectError:tMe,isAuthRetryableFetchError:nMe,isAuthWeakPasswordError:rMe,RealtimePresence:iMe,RealtimeChannel:aMe,RealtimeClient:oMe,REALTIME_LISTEN_TYPES:sMe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:lMe,REALTIME_PRESENCE_LISTEN_EVENTS:cMe,REALTIME_SUBSCRIBE_STATES:uMe,REALTIME_CHANNEL_STATES:dMe}=n4||jZ,AZ="https://jouhybyquybxbnqztxum.supabase.co",NZ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",OZ=!1,De=TZ(AZ,NZ,{auth:{flowType:"pkce",persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:OZ,storage:localStorage}}),r4="settings_v1",o2=()=>{try{typeof window<"u"&&window.localStorage.removeItem(r4)}catch{}},$l={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",daewoonDisplayBase:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,showEtcShinsal:!0,showRelationBox:!0,showPromptBox:!0,theme:"dark",difficultyMode:!1,sidebarCardsCollapsed:!1,sidebarCardCollapsedMap:{},sidebarCollapseInitDone:!0,sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","daewoonDisplayBase","charType","thinEum","visibility","difficultyMode"]},QM=["theme","hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","daewoonDisplayBase","charType","thinEum","visibility","difficultyMode"],CZ=e=>{const t=Array.isArray(e)?e.filter(r=>typeof r=="string"&&QM.includes(r)):[],n=QM.filter(r=>!t.includes(r));return[...t,...n]},Xd=e=>({...$l,...e,sectionOrder:CZ(e.sectionOrder)}),MZ=e=>{if(e&&typeof e=="object"){const t=e;if(t.settings&&typeof t.settings=="object")return Xd(t.settings);if(t.state&&typeof t.state=="object"){const n=t.state;if(n.settings&&typeof n.settings=="object")return Xd(n.settings)}}return Xd(e??{})},DZ=e=>{if(!e||typeof e!="object")return!1;const t=e;return!!(t.state||t.settings)};o2();const un=Yo()(B$((e,t)=>({settings:$l,syncing:!1,loaded:!1,setSettings:n=>e({settings:Xd(n)}),setKey:(n,r)=>e({settings:Xd({...t().settings,[n]:r})}),reset:()=>e({settings:$l,loaded:!0}),loadFromServer:async n=>{const r=t();if(!r.syncing&&!(!n?.force&&r.loaded))try{e({syncing:!0}),o2();const{data:i,error:a}=await De.auth.getUser(),o=i?.user??null;if(a||!o){e({settings:$l,syncing:!1,loaded:!0});return}const l=t();!n?.force&&l.loaded&&l.syncing;const{data:u,error:d}=await De.from("user_settings").select("payload").eq("user_id",o.id).maybeSingle();if(!u&&!d&&await De.from("user_settings").upsert({user_id:o.id,payload:{}}),d&&d.code!=="PGRST116"){console.error("loadFromServer(settings) error:",d),e({syncing:!1,loaded:!0});return}if(u?.payload){const h=MZ(u.payload),b=u.payload?.sidebarCollapseInitDone===!0;b||(h.sidebarCardsCollapsed=$l.sidebarCardsCollapsed,h.sidebarCardCollapsedMap={},h.sidebarCollapseInitDone=!0),e({settings:h,syncing:!1,loaded:!0}),(DZ(u.payload)||!b)&&await De.from("user_settings").upsert({user_id:o.id,payload:h,updated_at:new Date().toISOString()});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})}catch(i){console.error("loadFromServer(settings) exception:",i),e({syncing:!1,loaded:!0})}},saveToServer:async(n=!1)=>{try{if(!t().loaded&&!n)return;e({syncing:!0}),o2();const{data:r,error:i}=await De.auth.getUser(),a=r?.user??null;if(i||!a){e({syncing:!1,loaded:!0,settings:$l});return}const o=Xd(t().settings),{error:l}=await De.from("user_settings").upsert({user_id:a.id,payload:o,updated_at:new Date().toISOString()});l&&console.error("saveToServer(settings) error:",l),e({syncing:!1,loaded:!0})}catch(r){console.error("saveToServer(settings) exception:",r),e({syncing:!1,loaded:!0})}}}),{name:r4,storage:{getItem:()=>null,setItem:()=>null,removeItem:()=>null},merge:(e,t)=>t}));function s2(e){const t=Xr.indexOf(e);if(t!==-1)return Xr[t];const n=so..indexOf(e);return n!==-1?Xr[n]:null}function i4(e){const t=vi.indexOf(e);if(t!==-1)return vi[t];const n=so..indexOf(e);return n!==-1?vi[n]:null}function eD(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-neutral-900":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function Ki(e,t,n){if(t==="stem"){const r=s2(e);if(!r)return console.warn("Invalid stem:",e),"bg-neutral-700";const i=Xr.indexOf(r),a=i>=0?VK[i]:void 0;return eD(a,n)}else{const r=i4(e);if(!r)return console.warn("Invalid branch:",e),"bg-neutral-700";const i=vi.indexOf(r),a=i>=0?ZK[i]:void 0;return eD(a,n)}}function Sa(e,t){const n=s2(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const r=s2(t.stem);if(!r)throw new Error(`getSipSin: invalid stem ${t.stem}`);return QK[n][r]}if(t.branch){const r=i4(t.branch);if(!r)throw new Error(`getSipSin: invalid branch ${t.branch}`);return eW[n][r]}throw new Error("getSipSin: stem or branch required")}const Kv={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Wv={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function a4({branch:e,dayStem:t,mode:n="all",mapping:r="classic",variant:i="auto",isUnknownTime:a=!1}){const o=(r==="hgc"?Wv:Kv)[e]??[],l=n==="main"?[o[2]]:o,u=i==="white",d=u?"text-white":"text-neutral-800 dark:text-white",h=u?"border-white":"border-neutral-800 dark: border-neutral-200",m=u?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:l.map((b,y)=>b==="(-)"||a?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap`,children:"(-) ()"},y):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${h} ${d} rounded text-center text-nowrap 
            ${n==="main"||y===2?`jeonggi bg-neutral-500/50 ${m} font-bold`:""}`,children:[b," (",Sa(t,{stem:b}),")"]},y))})}const Ui=Yo(e=>({manualHour:null,usePrevDay:!1,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null}),setUsePrevDay:t=>e({usePrevDay:t}),togglePrevDay:()=>e(t=>({usePrevDay:!t.usePrevDay}))})),o4=Object.fromEntries(Object.entries(Zn).map(([e,t])=>[t,e])),s4=Object.fromEntries(Object.entries(rr).map(([e,t])=>[t,e])),PZ=new Set(Object.keys(Zn)),RZ=new Set(Object.keys(rr)),LZ=new Set(["","","","","","","","","",""]),IZ=new Set(["","","","","","","","","","","",""]);function xi(e,t,n){return n===""?t==="stem"?Zn[e]??e:rr[e]??e:t==="stem"?o4[e]??e:s4[e]??e}function tD(e){const t=o4[e]??e;return PZ.has(t)?t:""}function $Z(e){const t=s4[e]??e;return RZ.has(t)?t:""}function Vv(e){if(nf.has(e))return e;const t=Zn[e]??e;return nf.has(t)?t:""}function pj(e){if(Bm.has(e))return e;const t=rr[e]??e;return Bm.has(t)?t:""}function to(e,t){return t==="stem"?LZ.has(e):IZ.has(e)}function zd({label:e,gz:t,dayStem:n,settings:r,unseongText:i,shinsalText:a,hideBranchSipSin:o=!0,hideHiddenStems:l=!1,size:u="sm",variant:d="auto",isUnknownTime:h=!1}){const{manualHour:m}=Ui(),b=h&&!m,y=t.charAt(0),k=t.charAt(1),w=xi(y,"stem",r.charType),_=xi(k,"branch",r.charType),T=tD(y),O=$Z(k),j=tD(n),C=pj(k),M=Vv(n),P=r.showSipSin?Sa(j,{stem:T}):null,I=!o&&r.showSipSin?Sa(j,{branch:O}):null,U=r.thinEum&&to(y,"stem")?"font-thin":"font-bold",W=r.thinEum&&to(k,"branch")?"font-thin":"font-bold",q={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},H=!l&&!!r.hiddenStem,B=r.hiddenStem==="regular"?"main":"all",K=r.hiddenStemMode==="hgc"?"hgc":"classic",V=d==="white",Z=V?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",G=V?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",J=V?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",Q=V?"text-neutral-500":"text-neutral-400",oe=V?"text-neutral-500":"text-neutral-400",{settings:te}=un(),z=b?`bg-white ${J}`:`${Ki(T,"stem",te)} ${J}`,X=b?`bg-white ${J}`:`${Ki(O,"branch",te)} ${J}`,re=b?"text-black":te.difficultyMode?te.theme==="light"?"text-neutral-900":"text-black":"text-white",ie=b?"text-black":te.difficultyMode?te.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Z}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${G} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[P&&g.jsx("div",{className:`text-[10px] desk:text-xs ${Q} text-nowrap`,children:h&&!m?"-":P}),g.jsx("div",{className:`${q[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${z}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${re} ${U}`,children:b?"-":w})}),g.jsx("div",{className:`${q[u]} rounded-sm desk:rounded-lg flex items-center justify-center border ${X}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${ie} ${W}`,children:b?"-":_})}),H&&g.jsx(a4,{branch:C,dayStem:M,mode:B,mapping:K,isUnknownTime:h&&!m&&(e===""||e==="")}),I&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe}`,children:h&&!m?"-":I}),r.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe} text-nowrap`,children:h&&!m?"-":i||""}),r.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${oe} text-nowrap`,children:h&&!m?"-":a||""})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zZ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nD=e=>{const t=zZ(e);return t.charAt(0).toUpperCase()+t.slice(1)},l4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),UZ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...FZ,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:l4("lucide",i),...!a&&!UZ(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>S.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=(e,t)=>{const n=S.forwardRef(({className:r,...i},a)=>S.createElement(HZ,{ref:a,iconNode:t,className:l4(`lucide-${BZ(nD(e))}`,`lucide-${e}`,r),...i}));return n.displayName=nD(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],YZ=Dr("chevron-down",GZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KZ=Dr("chevron-up",qZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],c4=Dr("circle-question-mark",WZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ZZ=Dr("circle-x",VZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],JZ=Dr("heart-handshake",XZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],eX=Dr("house",QZ);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nX=Dr("info",tX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],u4=Dr("log-in",rX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aX=Dr("log-out",iX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],sX=Dr("menu",oX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cX=Dr("plus",lX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dX=Dr("settings",uX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hX=Dr("sparkles",fX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],pX=Dr("square-user",mX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],d4=Dr("star",gX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],yX=Dr("user-plus",bX);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yy=Dr("x",vX);function xX(){const[e,t]=S.useState(!1);return g.jsx("div",{className:"z-[60] pointer-events-none mt-2",children:g.jsx("div",{className:"max-w-[700px] w-full mx-auto pb-2 pointer-events-auto",children:g.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-white/90 backdrop-blur shadow-sm dark:border-neutral-800 dark:bg-neutral-950/80",children:[g.jsxs("button",{type:"button",onClick:()=>t(n=>!n),className:"w-full flex flex-col desk:flex-row items-center justify-between gap-2 px-3 py-2 cursor-pointer",children:[g.jsx("div",{className:"flex items-center gap-2 min-w-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(nX,{className:"w-4 h-4 text-neutral-600 dark:text-neutral-300 hidden desk:block"}),g.jsx("span",{className:"text-xs text-neutral-700 dark:text-neutral-200",children:"         ."})]})}),g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:e?"":""})]}),e&&g.jsx("div",{className:"px-3 pb-3",children:g.jsxs("div",{className:"text-[12px] leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{className:"mt-1 text-neutral-500 dark:text-neutral-400",children:"  /     ."}),g.jsx("p",{children:g.jsx("a",{href:"https://yavares.tistory.com/1013",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"     !"})})})]})})]})})})}const wX=new Set(so.);function _X(e){return nf.has(e)?e:wX.has(e)?Zn[e]:""}function SX(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function kX({label:e,settings:t,hideBranchSipSin:n=!0}){const r=t.showSipSin,i=!!t.hiddenStem,o=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,l=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[r&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),i&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:o}).map((u,d)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},d))}),l&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function EX(){const e=un(_=>_.settings),[t,n]=S.useState(new Date),[r,i]=S.useState(!0),[a,o]=S.useState("/"),[l,u]=S.useState(!1),[d,h]=S.useState(null);S.useEffect(()=>{if(!r)return;const _=setInterval(()=>n(new Date),1e3);return()=>clearInterval(_)},[r]),S.useEffect(()=>{let _=!0;const T=async()=>{const{data:C}=await De.auth.getSession(),M=C.session?.user?.id;if(!M){_&&h(null);return}const{data:P,error:I}=await De.from("user_activity").select("total_active_ms").eq("user_id",M).maybeSingle();if(I){_&&h(null);return}const U=P?.total_active_ms;_&&h(typeof U=="number"?U:null)};T();const O=window.setInterval(()=>void T(),6e4),j=()=>{document.visibilityState==="visible"&&T()};return document.addEventListener("visibilitychange",j),()=>{_=!1,window.clearInterval(O),document.removeEventListener("visibilitychange",j)}},[]);const m=ct(t),b=At(t),y=ht(t,a),k=eo(t,"/"),w=_X(y.charAt(0));return g.jsx("div",{className:"flex flex-col justify-center items-center pt-20 desk:pt-16 desk:mt-12 w-full h-auto desk:h-[calc(100dvh_-_212px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("div",{className:"mb-3 text-xs desk:text-sm text-neutral-600 dark:text-neutral-300",children:["  :"," ",g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:SX(d)})]}),g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",r?"":"",") ",AX(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>u(_=>!_),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                          ${l?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[l?g.jsx(kX,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(zd,{label:"",gz:k,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(zd,{label:"",gz:y,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(zd,{label:"",gz:b,dayStem:w,settings:e,hideBranchSipSin:!0}),g.jsx(zd,{label:"",gz:m,dayStem:w,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"datetime-local",value:jX(t),disabled:r,onChange:_=>{const T=TX(_.target.value);T&&n(T)},className:`h-30 rounded px-3 py-1 text-sm transition-colors
                          bg-white dark:bg-neutral-900
                          border border-neutral-300 dark:border-neutral-700
                          text-neutral-900 dark:text-neutral-100
                          focus:outline-none focus:ring-2 focus:ring-amber-500/40
                          ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:r?" ":" "})]})]}),g.jsx(xX,{})]})})}function jX(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function TX(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[r,i,a]=t.split("-").map(Number),[o,l]=n.split(":").map(Number),u=new Date(r,i-1,a,o,l);return Number.isNaN(u.getTime())?null:u}function AX(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}function NX({placeholderText:e,value:t}){const[n,r]=S.useState(e),[i,a]=S.useState(!1),[o,l]=S.useState(t??""),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),m=S.useRef(null);return S.useEffect(()=>{t!==void 0&&l(t)},[t]),{btnText:n,setBtnText:r,open:i,setOpen:a,localValue:o,setLocalValue:l,nameRef:u,latRef:d,lonRef:h,triggerBtnRef:m}}var km={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var OX=km.exports,rD;function CX(){return rD||(rD=1,(function(e,t){(function(n,r){r(t)})(OX,(function(n){var r="1.9.4";function i(f){var v,E,D,R;for(E=1,D=arguments.length;E<D;E++){R=arguments[E];for(v in R)f[v]=R[v]}return f}var a=Object.create||(function(){function f(){}return function(v){return f.prototype=v,new f}})();function o(f,v){var E=Array.prototype.slice;if(f.bind)return f.bind.apply(f,E.call(arguments,1));var D=E.call(arguments,2);return function(){return f.apply(v,D.length?D.concat(E.call(arguments)):arguments)}}var l=0;function u(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function d(f,v,E){var D,R,F,ee;return ee=function(){D=!1,R&&(F.apply(E,R),R=!1)},F=function(){D?R=arguments:(f.apply(E,arguments),setTimeout(ee,v),D=!0)},F}function h(f,v,E){var D=v[1],R=v[0],F=D-R;return f===D&&E?f:((f-R)%F+F)%F+R}function m(){return!1}function b(f,v){if(v===!1)return f;var E=Math.pow(10,v===void 0?6:v);return Math.round(f*E)/E}function y(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function k(f){return y(f).split(/\s+/)}function w(f,v){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var E in v)f.options[E]=v[E];return f.options}function _(f,v,E){var D=[];for(var R in f)D.push(encodeURIComponent(E?R.toUpperCase():R)+"="+encodeURIComponent(f[R]));return(!v||v.indexOf("?")===-1?"?":"&")+D.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function O(f,v){return f.replace(T,function(E,D){var R=v[D];if(R===void 0)throw new Error("No value provided for variable "+E);return typeof R=="function"&&(R=R(v)),R})}var j=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function C(f,v){for(var E=0;E<f.length;E++)if(f[E]===v)return E;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var I=0;function U(f){var v=+new Date,E=Math.max(0,16-(v-I));return I=v+E,window.setTimeout(f,E)}var W=window.requestAnimationFrame||P("RequestAnimationFrame")||U,q=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function H(f,v,E){if(E&&W===U)f.call(v);else return W.call(window,o(f,v))}function B(f){f&&q.call(window,f)}var K={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:u,throttle:d,wrapNum:h,falseFn:m,formatNum:b,trim:y,splitWords:k,setOptions:w,getParamString:_,template:O,isArray:j,indexOf:C,emptyImageUrl:M,requestFn:W,cancelFn:q,requestAnimFrame:H,cancelAnimFrame:B};function V(){}V.extend=function(f){var v=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,D=a(E);D.constructor=v,v.prototype=D;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(v[R]=this[R]);return f.statics&&i(v,f.statics),f.includes&&(Z(f.includes),i.apply(null,[D].concat(f.includes))),i(D,f),delete D.statics,delete D.includes,D.options&&(D.options=E.options?a(E.options):{},i(D.options,f.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,ee=D._initHooks.length;F<ee;F++)D._initHooks[F].call(this)}},v},V.include=function(f){var v=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=v,this.mergeOptions(f.options)),this},V.mergeOptions=function(f){return i(this.prototype.options,f),this},V.addInitHook=function(f){var v=Array.prototype.slice.call(arguments,1),E=typeof f=="function"?f:function(){this[f].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function Z(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=j(f)?f:[f];for(var v=0;v<f.length;v++)f[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v);else{f=k(f);for(var R=0,F=f.length;R<F;R++)this._on(f[R],v,E)}return this},off:function(f,v,E){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var D in f)this._off(D,f[D],v);else{f=k(f);for(var R=arguments.length===1,F=0,ee=f.length;F<ee;F++)R?this._off(f[F]):this._off(f[F],v,E)}return this},_on:function(f,v,E,D){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(f,v,E)===!1){E===this&&(E=void 0);var R={fn:v,ctx:E};D&&(R.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(R)}},_off:function(f,v,E){var D,R,F;if(this._events&&(D=this._events[f],!!D)){if(arguments.length===1){if(this._firingCount)for(R=0,F=D.length;R<F;R++)D[R].fn=m;delete this._events[f];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ee=this._listens(f,v,E);if(ee!==!1){var ue=D[ee];this._firingCount&&(ue.fn=m,this._events[f]=D=D.slice()),D.splice(ee,1)}}},fire:function(f,v,E){if(!this.listens(f,E))return this;var D=i({},v,{type:f,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var R=this._events[f];if(R){this._firingCount=this._firingCount+1||1;for(var F=0,ee=R.length;F<ee;F++){var ue=R[F],be=ue.fn;ue.once&&this.off(f,be,ue.ctx),be.call(ue.ctx||this,D)}this._firingCount--}}return E&&this._propagateEvent(D),this},listens:function(f,v,E,D){typeof f!="string"&&console.warn('"string" type argument expected');var R=v;typeof v!="function"&&(D=!!v,R=void 0,E=void 0);var F=this._events&&this._events[f];if(F&&F.length&&this._listens(f,R,E)!==!1)return!0;if(D){for(var ee in this._eventParents)if(this._eventParents[ee].listens(f,v,E,D))return!0}return!1},_listens:function(f,v,E){if(!this._events)return!1;var D=this._events[f]||[];if(!v)return!!D.length;E===this&&(E=void 0);for(var R=0,F=D.length;R<F;R++)if(D[R].fn===v&&D[R].ctx===E)return R;return!1},once:function(f,v,E){if(typeof f=="object")for(var D in f)this._on(D,f[D],v,!0);else{f=k(f);for(var R=0,F=f.length;R<F;R++)this._on(f[R],v,E,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[u(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[u(f)],this},_propagateEvent:function(f){for(var v in this._eventParents)this._eventParents[v].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var J=V.extend(G);function Q(f,v,E){this.x=E?Math.round(f):f,this.y=E?Math.round(v):v}var oe=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(f){return this.clone()._add(te(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(te(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new Q(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new Q(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(f){f=te(f);var v=f.x-this.x,E=f.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(f){return f=te(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=te(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function te(f,v,E){return f instanceof Q?f:j(f)?new Q(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new Q(f.x,f.y):new Q(f,v,E)}function z(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}z.prototype={extend:function(f){var v,E;if(!f)return this;if(f instanceof Q||typeof f[0]=="number"||"x"in f)v=E=te(f);else if(f=X(f),v=f.min,E=f.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(f){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var v,E;return typeof f[0]=="number"||f instanceof Q?f=te(f):f=X(f),f instanceof z?(v=f.min,E=f.max):v=E=f,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(f){f=X(f);var v=this.min,E=this.max,D=f.min,R=f.max,F=R.x>=v.x&&D.x<=E.x,ee=R.y>=v.y&&D.y<=E.y;return F&&ee},overlaps:function(f){f=X(f);var v=this.min,E=this.max,D=f.min,R=f.max,F=R.x>v.x&&D.x<E.x,ee=R.y>v.y&&D.y<E.y;return F&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var v=this.min,E=this.max,D=Math.abs(v.x-E.x)*f,R=Math.abs(v.y-E.y)*f;return X(te(v.x-D,v.y-R),te(E.x+D,E.y+R))},equals:function(f){return f?(f=X(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function X(f,v){return!f||f instanceof z?f:new z(f,v)}function re(f,v){if(f)for(var E=v?[f,v]:f,D=0,R=E.length;D<R;D++)this.extend(E[D])}re.prototype={extend:function(f){var v=this._southWest,E=this._northEast,D,R;if(f instanceof fe)D=f,R=f;else if(f instanceof re){if(D=f._southWest,R=f._northEast,!D||!R)return this}else return f?this.extend(de(f)||ie(f)):this;return!v&&!E?(this._southWest=new fe(D.lat,D.lng),this._northEast=new fe(R.lat,R.lng)):(v.lat=Math.min(D.lat,v.lat),v.lng=Math.min(D.lng,v.lng),E.lat=Math.max(R.lat,E.lat),E.lng=Math.max(R.lng,E.lng)),this},pad:function(f){var v=this._southWest,E=this._northEast,D=Math.abs(v.lat-E.lat)*f,R=Math.abs(v.lng-E.lng)*f;return new re(new fe(v.lat-D,v.lng-R),new fe(E.lat+D,E.lng+R))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof fe||"lat"in f?f=de(f):f=ie(f);var v=this._southWest,E=this._northEast,D,R;return f instanceof re?(D=f.getSouthWest(),R=f.getNorthEast()):D=R=f,D.lat>=v.lat&&R.lat<=E.lat&&D.lng>=v.lng&&R.lng<=E.lng},intersects:function(f){f=ie(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),F=R.lat>=v.lat&&D.lat<=E.lat,ee=R.lng>=v.lng&&D.lng<=E.lng;return F&&ee},overlaps:function(f){f=ie(f);var v=this._southWest,E=this._northEast,D=f.getSouthWest(),R=f.getNorthEast(),F=R.lat>v.lat&&D.lat<E.lat,ee=R.lng>v.lng&&D.lng<E.lng;return F&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,v){return f?(f=ie(f),this._southWest.equals(f.getSouthWest(),v)&&this._northEast.equals(f.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(f,v){return f instanceof re?f:new re(f,v)}function fe(f,v,E){if(isNaN(f)||isNaN(v))throw new Error("Invalid LatLng object: ("+f+", "+v+")");this.lat=+f,this.lng=+v,E!==void 0&&(this.alt=+E)}fe.prototype={equals:function(f,v){if(!f)return!1;f=de(f);var E=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return E<=(v===void 0?1e-9:v)},toString:function(f){return"LatLng("+b(this.lat,f)+", "+b(this.lng,f)+")"},distanceTo:function(f){return Ne.distance(this,de(f))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(f){var v=180*f/40075017,E=v/Math.cos(Math.PI/180*this.lat);return ie([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function de(f,v,E){return f instanceof fe?f:j(f)&&typeof f[0]!="object"?f.length===3?new fe(f[0],f[1],f[2]):f.length===2?new fe(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new fe(f.lat,"lng"in f?f.lng:f.lon,f.alt):v===void 0?null:new fe(f,v,E)}var pe={latLngToPoint:function(f,v){var E=this.projection.project(f),D=this.scale(v);return this.transformation._transform(E,D)},pointToLatLng:function(f,v){var E=this.scale(v),D=this.transformation.untransform(f,E);return this.projection.unproject(D)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(f),D=this.transformation.transform(v.min,E),R=this.transformation.transform(v.max,E);return new z(D,R)},infinite:!1,wrapLatLng:function(f){var v=this.wrapLng?h(f.lng,this.wrapLng,!0):f.lng,E=this.wrapLat?h(f.lat,this.wrapLat,!0):f.lat,D=f.alt;return new fe(E,v,D)},wrapLatLngBounds:function(f){var v=f.getCenter(),E=this.wrapLatLng(v),D=v.lat-E.lat,R=v.lng-E.lng;if(D===0&&R===0)return f;var F=f.getSouthWest(),ee=f.getNorthEast(),ue=new fe(F.lat-D,F.lng-R),be=new fe(ee.lat-D,ee.lng-R);return new re(ue,be)}},Ne=i({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(f,v){var E=Math.PI/180,D=f.lat*E,R=v.lat*E,F=Math.sin((v.lat-f.lat)*E/2),ee=Math.sin((v.lng-f.lng)*E/2),ue=F*F+Math.cos(D)*Math.cos(R)*ee*ee,be=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*be}}),se=6378137,Se={R:se,MAX_LATITUDE:85.0511287798,project:function(f){var v=Math.PI/180,E=this.MAX_LATITUDE,D=Math.max(Math.min(E,f.lat),-E),R=Math.sin(D*v);return new Q(this.R*f.lng*v,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(f){var v=180/Math.PI;return new fe((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*v,f.x*v/this.R)},bounds:(function(){var f=se*Math.PI;return new z([-f,-f],[f,f])})()};function ke(f,v,E,D){if(j(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=v,this._c=E,this._d=D}ke.prototype={transform:function(f,v){return this._transform(f.clone(),v)},_transform:function(f,v){return v=v||1,f.x=v*(this._a*f.x+this._b),f.y=v*(this._c*f.y+this._d),f},untransform:function(f,v){return v=v||1,new Q((f.x/v-this._b)/this._a,(f.y/v-this._d)/this._c)}};function he(f,v,E,D){return new ke(f,v,E,D)}var Ue=i({},Ne,{code:"EPSG:3857",projection:Se,transformation:(function(){var f=.5/(Math.PI*Se.R);return he(f,.5,-f,.5)})()}),Be=i({},Ue,{code:"EPSG:900913"});function Xe(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Ae(f,v){var E="",D,R,F,ee,ue,be;for(D=0,F=f.length;D<F;D++){for(ue=f[D],R=0,ee=ue.length;R<ee;R++)be=ue[R],E+=(R?"L":"M")+be.x+" "+be.y;E+=v?Ke.svg?"z":"x":""}return E||"M0 0"}var Ie=document.documentElement.style,$e="ActiveXObject"in window,tt=$e&&!document.addEventListener,bt="msLaunchUri"in navigator&&!("documentMode"in document),jt=ni("webkit"),le=ni("android"),Oe=ni("android 2")||ni("android 3"),Ye=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ze=le&&ni("Google")&&Ye<537&&!("AudioNode"in window),Ot=!!window.opera,mt=!bt&&ni("chrome"),Ce=ni("gecko")&&!jt&&!Ot&&!$e,ze=!mt&&ni("safari"),nt=ni("phantom"),Tt="OTransition"in Ie,Lt=navigator.platform.indexOf("Win")===0,Bt=$e&&"transition"in Ie,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,_t="MozPerspective"in Ie,Tn=!window.L_DISABLE_3D&&(Bt||Xt||_t)&&!Tt&&!nt,qo=typeof orientation<"u"||ni("mobile"),Hf=qo&&jt,Me=qo&&Xt,at=!window.PointerEvent&&window.MSPointerEvent,zt=!!(window.PointerEvent||at),wr="ontouchstart"in window||!!window.TouchEvent,ti=!window.L_NO_TOUCH&&(wr||zt),Lu=qo&&Ot,sc=qo&&Ce,tw=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,a0=(function(){var f=!1;try{var v=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",m,v),window.removeEventListener("testPassiveEventSupport",m,v)}catch{}return f})(),Gf=(function(){return!!document.createElement("canvas").getContext})(),Ko=!!(document.createElementNS&&Xe("svg").createSVGRect),nw=!!Ko&&(function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),o0=!Ko&&(function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var v=f.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),s0=navigator.platform.indexOf("Mac")===0,l0=navigator.platform.indexOf("Linux")===0;function ni(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ke={ie:$e,ielt9:tt,edge:bt,webkit:jt,android:le,android23:Oe,androidStock:Ze,opera:Ot,chrome:mt,gecko:Ce,safari:ze,phantom:nt,opera12:Tt,win:Lt,ie3d:Bt,webkit3d:Xt,gecko3d:_t,any3d:Tn,mobile:qo,mobileWebkit:Hf,mobileWebkit3d:Me,msPointer:at,pointer:zt,touch:ti,touchNative:wr,mobileOpera:Lu,mobileGecko:sc,retina:tw,passiveEvents:a0,canvas:Gf,svg:Ko,vml:o0,inlineSvg:nw,mac:s0,linux:l0},Yf=Ke.msPointer?"MSPointerDown":"pointerdown",qf=Ke.msPointer?"MSPointerMove":"pointermove",Ca=Ke.msPointer?"MSPointerUp":"pointerup",zn=Ke.msPointer?"MSPointerCancel":"pointercancel",lr={touchstart:Yf,touchmove:qf,touchend:Ca,touchcancel:zn},Wo={touchstart:Zs,touchmove:co,touchend:co,touchcancel:co},lo={},c0=!1;function rw(f,v,E){return v==="touchstart"&&Vs(),Wo[v]?(E=Wo[v].bind(this,E),f.addEventListener(lr[v],E,!1),E):(console.warn("wrong event specified:",v),m)}function u0(f,v,E){if(!lr[v]){console.warn("wrong event specified:",v);return}f.removeEventListener(lr[v],E,!1)}function lc(f){lo[f.pointerId]=f}function Kf(f){lo[f.pointerId]&&(lo[f.pointerId]=f)}function Vo(f){delete lo[f.pointerId]}function Vs(){c0||(document.addEventListener(Yf,lc,!0),document.addEventListener(qf,Kf,!0),document.addEventListener(Ca,Vo,!0),document.addEventListener(zn,Vo,!0),c0=!0)}function co(f,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in lo)v.touches.push(lo[E]);v.changedTouches=[v],f(v)}}function Zs(f,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&An(v),co(f,v)}function Un(f){var v={},E,D;for(D in f)E=f[D],v[D]=E&&E.bind?E.bind(f):E;return f=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var d0=200;function f0(f,v){f.addEventListener("dblclick",v);var E=0,D;function R(F){if(F.detail!==1){D=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var ee=pc(F);if(!(ee.some(function(be){return be instanceof HTMLLabelElement&&be.attributes.for})&&!ee.some(function(be){return be instanceof HTMLInputElement||be instanceof HTMLSelectElement}))){var ue=Date.now();ue-E<=d0?(D++,D===2&&v(Un(F))):D=1,E=ue}}}return f.addEventListener("click",R),{dblclick:v,simDblclick:R}}function Zo(f,v){f.removeEventListener("dblclick",v.dblclick),f.removeEventListener("click",v.simDblclick)}var uo=dc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cc=dc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wf=cc==="webkitTransition"||cc==="OTransition"?cc+"End":"transitionend";function Vf(f){return typeof f=="string"?document.getElementById(f):f}function uc(f,v){var E=f.style[v]||f.currentStyle&&f.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(f,null);E=D?D[v]:null}return E==="auto"?null:E}function yt(f,v,E){var D=document.createElement(f);return D.className=v||"",E&&E.appendChild(D),D}function Kt(f){var v=f.parentNode;v&&v.removeChild(f)}function ri(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Jn(f){var v=f.parentNode;v&&v.lastChild!==f&&v.appendChild(f)}function Xo(f){var v=f.parentNode;v&&v.firstChild!==f&&v.insertBefore(f,v.firstChild)}function Zf(f,v){if(f.classList!==void 0)return f.classList.contains(v);var E=Iu(f);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function ut(f,v){if(f.classList!==void 0)for(var E=k(v),D=0,R=E.length;D<R;D++)f.classList.add(E[D]);else if(!Zf(f,v)){var F=Iu(f);Xs(f,(F?F+" ":"")+v)}}function fn(f,v){f.classList!==void 0?f.classList.remove(v):Xs(f,y((" "+Iu(f)+" ").replace(" "+v+" "," ")))}function Xs(f,v){f.className.baseVal===void 0?f.className=v:f.className.baseVal=v}function Iu(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function on(f,v){"opacity"in f.style?f.style.opacity=v:"filter"in f.style&&Xf(f,v)}function Xf(f,v){var E=!1,D="DXImageTransform.Microsoft.Alpha";try{E=f.filters.item(D)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):f.style.filter+=" progid:"+D+"(opacity="+v+")"}function dc(f){for(var v=document.documentElement.style,E=0;E<f.length;E++)if(f[E]in v)return f[E];return!1}function Ma(f,v,E){var D=v||new Q(0,0);f.style[uo]=(Ke.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(E?" scale("+E+")":"")}function Jt(f,v){f._leaflet_pos=v,Ke.any3d?Ma(f,v):(f.style.left=v.x+"px",f.style.top=v.y+"px")}function fo(f){return f._leaflet_pos||new Q(0,0)}var Js,Xi,Jf;if("onselectstart"in document)Js=function(){lt(window,"selectstart",An)},Xi=function(){Ut(window,"selectstart",An)};else{var Qs=dc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Js=function(){if(Qs){var f=document.documentElement.style;Jf=f[Qs],f[Qs]="none"}},Xi=function(){Qs&&(document.documentElement.style[Qs]=Jf,Jf=void 0)}}function $u(){lt(window,"dragstart",An)}function fc(){Ut(window,"dragstart",An)}var Bu,Qf;function el(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(ii(),Bu=f,Qf=f.style.outlineStyle,f.style.outlineStyle="none",lt(window,"keydown",ii))}function ii(){Bu&&(Bu.style.outlineStyle=Qf,Bu=void 0,Qf=void 0,Ut(window,"keydown",ii))}function zu(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function hc(f){var v=f.getBoundingClientRect();return{x:v.width/f.offsetWidth||1,y:v.height/f.offsetHeight||1,boundingClientRect:v}}var tl={__proto__:null,TRANSFORM:uo,TRANSITION:cc,TRANSITION_END:Wf,get:Vf,getStyle:uc,create:yt,remove:Kt,empty:ri,toFront:Jn,toBack:Xo,hasClass:Zf,addClass:ut,removeClass:fn,setClass:Xs,getClass:Iu,setOpacity:on,testProp:dc,setTransform:Ma,setPosition:Jt,getPosition:fo,get disableTextSelection(){return Js},get enableTextSelection(){return Xi},disableImageDrag:$u,enableImageDrag:fc,preventOutline:el,restoreOutline:ii,getSizedParentNode:zu,getScale:hc};function lt(f,v,E,D){if(v&&typeof v=="object")for(var R in v)ji(f,R,v[R],E);else{v=k(v);for(var F=0,ee=v.length;F<ee;F++)ji(f,v[F],E,D)}return this}var Ei="_leaflet_events";function Ut(f,v,E,D){if(arguments.length===1)eh(f),delete f[Ei];else if(v&&typeof v=="object")for(var R in v)mc(f,R,v[R],E);else if(v=k(v),arguments.length===2)eh(f,function(ue){return C(v,ue)!==-1});else for(var F=0,ee=v.length;F<ee;F++)mc(f,v[F],E,D);return this}function eh(f,v){for(var E in f[Ei]){var D=E.split(/\d/)[0];(!v||v(D))&&mc(f,D,null,null,E)}}var Jo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ji(f,v,E,D){var R=v+u(E)+(D?"_"+u(D):"");if(f[Ei]&&f[Ei][R])return this;var F=function(ue){return E.call(D||f,ue||window.event)},ee=F;!Ke.touchNative&&Ke.pointer&&v.indexOf("touch")===0?F=rw(f,v,F):Ke.touch&&v==="dblclick"?F=f0(f,F):"addEventListener"in f?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?f.addEventListener(Jo[v]||v,F,Ke.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(F=function(ue){ue=ue||window.event,Da(f,ue)&&ee(ue)},f.addEventListener(Jo[v],F,!1)):f.addEventListener(v,ee,!1):f.attachEvent("on"+v,F),f[Ei]=f[Ei]||{},f[Ei][R]=F}function mc(f,v,E,D,R){R=R||v+u(E)+(D?"_"+u(D):"");var F=f[Ei]&&f[Ei][R];if(!F)return this;!Ke.touchNative&&Ke.pointer&&v.indexOf("touch")===0?u0(f,v,F):Ke.touch&&v==="dblclick"?Zo(f,F):"removeEventListener"in f?f.removeEventListener(Jo[v]||v,F,!1):f.detachEvent("on"+v,F),f[Ei][R]=null}function Ti(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Ji(f){return ji(f,"wheel",Ti),this}function Qo(f){return lt(f,"mousedown touchstart dblclick contextmenu",Ti),f._leaflet_disable_click=!0,this}function An(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function ho(f){return An(f),Ti(f),this}function pc(f){if(f.composedPath)return f.composedPath();for(var v=[],E=f.target;E;)v.push(E),E=E.parentNode;return v}function gc(f,v){if(!v)return new Q(f.clientX,f.clientY);var E=hc(v),D=E.boundingClientRect;return new Q((f.clientX-D.left)/E.x-v.clientLeft,(f.clientY-D.top)/E.y-v.clientTop)}var h0=Ke.linux&&Ke.chrome?window.devicePixelRatio:Ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _r(f){return Ke.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/h0:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Da(f,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==f;)E=E.parentNode}catch{return!1}return E!==f}var Uu={__proto__:null,on:lt,off:Ut,stopPropagation:Ti,disableScrollPropagation:Ji,disableClickPropagation:Qo,preventDefault:An,stop:ho,getPropagationPath:pc,getMousePosition:gc,getWheelDelta:_r,isExternalTarget:Da,addListener:lt,removeListener:Ut},nl=J.extend({run:function(f,v,E,D){this.stop(),this._el=f,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=fo(f),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(f){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),f):(this._runFrame(1),this._complete())},_runFrame:function(f,v){var E=this._startPos.add(this._offset.multiplyBy(f));v&&E._round(),Jt(this._el,E),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),St=J.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,v){v=w(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(de(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=cc&&Ke.any3d&&!Ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Wf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),f=this._limitCenter(de(f),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var D=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,v,E.zoom):this._tryAnimatedPan(f,E.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(f,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(f,v){return this._loaded?this.setView(this.getCenter(),f,{zoom:v}):(this._zoom=f,this)},zoomIn:function(f,v){return f=f||(Ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,v)},zoomOut:function(f,v){return f=f||(Ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,v)},setZoomAround:function(f,v,E){var D=this.getZoomScale(v),R=this.getSize().divideBy(2),F=f instanceof Q?f:this.latLngToContainerPoint(f),ee=F.subtract(R).multiplyBy(1-1/D),ue=this.containerPointToLatLng(R.add(ee));return this.setView(ue,v,{zoom:E})},_getBoundsCenterZoom:function(f,v){v=v||{},f=f.getBounds?f.getBounds():ie(f);var E=te(v.paddingTopLeft||v.padding||[0,0]),D=te(v.paddingBottomRight||v.padding||[0,0]),R=this.getBoundsZoom(f,!1,E.add(D));if(R=typeof v.maxZoom=="number"?Math.min(v.maxZoom,R):R,R===1/0)return{center:f.getCenter(),zoom:R};var F=D.subtract(E).divideBy(2),ee=this.project(f.getSouthWest(),R),ue=this.project(f.getNorthEast(),R),be=this.unproject(ee.add(ue).divideBy(2).add(F),R);return{center:be,zoom:R}},fitBounds:function(f,v){if(f=ie(f),!f.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(f,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,v){return this.setView(f,this._zoom,{pan:v})},panBy:function(f,v){if(f=te(f).round(),v=v||{},!f.x&&!f.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new nl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){ut(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,v,E){if(E=E||{},E.animate===!1||!Ke.any3d)return this.setView(f,v,E);this._stop();var D=this.project(this.getCenter()),R=this.project(f),F=this.getSize(),ee=this._zoom;f=de(f),v=v===void 0?ee:v;var ue=Math.max(F.x,F.y),be=ue*this.getZoomScale(ee,v),je=R.distanceTo(D)||1,Le=1.42,Ve=Le*Le;function pt(_n){var Ia=_n?-1:1,rs=_n?be:ue,ph=be*be-ue*ue+Ia*Ve*Ve*je*je,Mc=2*rs*Ve*je,Dc=ph/Mc,_o=Math.sqrt(Dc*Dc+1)-Dc,$a=_o<1e-9?-18:Math.log(_o);return $a}function Qn(_n){return(Math.exp(_n)-Math.exp(-_n))/2}function Nn(_n){return(Math.exp(_n)+Math.exp(-_n))/2}function Gr(_n){return Qn(_n)/Nn(_n)}var Ct=pt(0);function Mt(_n){return ue*(Nn(Ct)/Nn(Ct+Le*_n))}function vt(_n){return ue*(Nn(Ct)*Gr(Ct+Le*_n)-Qn(Ct))/Ve}function xo(_n){return 1-Math.pow(1-_n,1.5)}var li=Date.now(),td=(pt(1)-Ct)/Le,wo=E.duration?1e3*E.duration:1e3*td*.8;function mh(){var _n=(Date.now()-li)/wo,Ia=xo(_n)*td;_n<=1?(this._flyToFrame=H(mh,this),this._move(this.unproject(D.add(R.subtract(D).multiplyBy(vt(Ia)/je)),ee),this.getScaleZoom(ue/Mt(Ia),ee),{flyTo:!0})):this._move(f,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),mh.call(this),this},flyToBounds:function(f,v){var E=this._getBoundsCenterZoom(f,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(f){return f=ie(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var v=this.options.minZoom;return this.options.minZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var v=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&v!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,v){this._enforcingBounds=!0;var E=this.getCenter(),D=this._limitCenter(E,this._zoom,ie(f));return E.equals(D)||this.panTo(D,v),this._enforcingBounds=!1,this},panInside:function(f,v){v=v||{};var E=te(v.paddingTopLeft||v.padding||[0,0]),D=te(v.paddingBottomRight||v.padding||[0,0]),R=this.project(this.getCenter()),F=this.project(f),ee=this.getPixelBounds(),ue=X([ee.min.add(E),ee.max.subtract(D)]),be=ue.getSize();if(!ue.contains(F)){this._enforcingBounds=!0;var je=F.subtract(ue.getCenter()),Le=ue.extend(F).getSize().subtract(be);R.x+=je.x<0?-Le.x:Le.x,R.y+=je.y<0?-Le.y:Le.y,this.panTo(this.unproject(R),v),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),D=v.divideBy(2).round(),R=E.divideBy(2).round(),F=D.subtract(R);return!F.x&&!F.y?this:(f.animate&&f.pan?this.panBy(F):(f.pan&&this._rawPanBy(F),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,f):navigator.geolocation.getCurrentPosition(v,E,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var v=f.code,E=f.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var v=f.coords.latitude,E=f.coords.longitude,D=new fe(v,E),R=D.toBounds(f.coords.accuracy*2),F=this._locateOptions;if(F.setView){var ee=this.getBoundsZoom(R);this.setView(D,F.maxZoom?Math.min(ee,F.maxZoom):ee)}var ue={latlng:D,bounds:R,timestamp:f.timestamp};for(var be in f.coords)typeof f.coords[be]=="number"&&(ue[be]=f.coords[be]);this.fire("locationfound",ue)}},addHandler:function(f,v){if(!v)return this;var E=this[f]=new v(this);return this._handlers.push(E),this.options[f]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Kt(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,v){var E="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),D=yt("div",E,v||this._mapPane);return f&&(this._panes[f]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),v=this.unproject(f.getBottomLeft()),E=this.unproject(f.getTopRight());return new re(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,v,E){f=ie(f),E=te(E||[0,0]);var D=this.getZoom()||0,R=this.getMinZoom(),F=this.getMaxZoom(),ee=f.getNorthWest(),ue=f.getSouthEast(),be=this.getSize().subtract(E),je=X(this.project(ue,D),this.project(ee,D)).getSize(),Le=Ke.any3d?this.options.zoomSnap:1,Ve=be.x/je.x,pt=be.y/je.y,Qn=v?Math.max(Ve,pt):Math.min(Ve,pt);return D=this.getScaleZoom(Qn,D),Le&&(D=Math.round(D/(Le/100))*(Le/100),D=v?Math.ceil(D/Le)*Le:Math.floor(D/Le)*Le),Math.max(R,Math.min(F,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,v){var E=this._getTopLeftPoint(f,v);return new z(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(f)/E.scale(v)},getScaleZoom:function(f,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var D=E.zoom(f*E.scale(v));return isNaN(D)?1/0:D},project:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(de(f),v)},unproject:function(f,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(te(f),v)},layerPointToLatLng:function(f){var v=te(f).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(f){var v=this.project(de(f))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(de(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(ie(f))},distance:function(f,v){return this.options.crs.distance(de(f),de(v))},containerPointToLayerPoint:function(f){return te(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return te(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var v=this.containerPointToLayerPoint(te(f));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(f)))},mouseEventToContainerPoint:function(f){return gc(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var v=this._container=Vf(f);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(v,"scroll",this._onScroll,this),this._containerId=u(v)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ke.any3d,ut(f,"leaflet-container"+(Ke.touch?" leaflet-touch":"")+(Ke.retina?" leaflet-retina":"")+(Ke.ielt9?" leaflet-oldie":"")+(Ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=uc(f,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Jt(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ut(f.markerPane,"leaflet-zoom-hide"),ut(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,v,E){Jt(this._mapPane,new Q(0,0));var D=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var R=this._zoom!==v;this._moveStart(R,E)._move(f,v)._moveEnd(R),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(f,v){return f&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(f,v,E,D){v===void 0&&(v=this._zoom);var R=this._zoom!==v;return this._zoom=v,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),D?E&&E.pinch&&this.fire("zoom",E):((R||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Jt(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[u(this._container)]=this;var v=f?Ut:lt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ke.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,v){for(var E=[],D,R=v==="mouseout"||v==="mouseover",F=f.target||f.srcElement,ee=!1;F;){if(D=this._targets[u(F)],D&&(v==="click"||v==="preclick")&&this._draggableMoved(D)){ee=!0;break}if(D&&D.listens(v,!0)&&(R&&!Da(F,f)||(E.push(D),R))||F===this._container)break;F=F.parentNode}return!E.length&&!ee&&!R&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var v=f.target||f.srcElement;if(!(!this._loaded||v._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(v))){var E=f.type;E==="mousedown"&&el(v),this._fireDOMEvent(f,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,v,E){if(f.type==="click"){var D=i({},f);D.type="preclick",this._fireDOMEvent(D,D.type,E)}var R=this._findEventTargets(f,v);if(E){for(var F=[],ee=0;ee<E.length;ee++)E[ee].listens(v,!0)&&F.push(E[ee]);R=F.concat(R)}if(R.length){v==="contextmenu"&&An(f);var ue=R[0],be={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var je=ue.getLatLng&&(!ue._radius||ue._radius<=10);be.containerPoint=je?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(f),be.layerPoint=this.containerPointToLayerPoint(be.containerPoint),be.latlng=je?ue.getLatLng():this.layerPointToLatLng(be.layerPoint)}for(ee=0;ee<R.length;ee++)if(R[ee].fire(v,be,!0),be.originalEvent._stopped||R[ee].options.bubblingMouseEvents===!1&&C(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,v=this._handlers.length;f<v;f++)this._handlers[f].disable()},whenReady:function(f,v){return this._loaded?f.call(v||this,{target:this}):this.on("load",f,v),this},_getMapPanePos:function(){return fo(this._mapPane)||new Q(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,v){var E=f&&v!==void 0?this._getNewPixelOrigin(f,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,v){var E=this.getSize()._divideBy(2);return this.project(f,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return this.project(f,v)._subtract(D)},_latLngBoundsToNewLayerBounds:function(f,v,E){var D=this._getNewPixelOrigin(E,v);return X([this.project(f.getSouthWest(),v)._subtract(D),this.project(f.getNorthWest(),v)._subtract(D),this.project(f.getSouthEast(),v)._subtract(D),this.project(f.getNorthEast(),v)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,v,E){if(!E)return f;var D=this.project(f,v),R=this.getSize().divideBy(2),F=new z(D.subtract(R),D.add(R)),ee=this._getBoundsOffset(F,E,v);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?f:this.unproject(D.add(ee),v)},_limitOffset:function(f,v){if(!v)return f;var E=this.getPixelBounds(),D=new z(E.min.add(f),E.max.add(f));return f.add(this._getBoundsOffset(D,v))},_getBoundsOffset:function(f,v,E){var D=X(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),R=D.min.subtract(f.min),F=D.max.subtract(f.max),ee=this._rebound(R.x,-F.x),ue=this._rebound(R.y,-F.y);return new Q(ee,ue)},_rebound:function(f,v){return f+v>0?Math.round(f-v)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(v))},_limitZoom:function(f){var v=this.getMinZoom(),E=this.getMaxZoom(),D=Ke.any3d?this.options.zoomSnap:1;return D&&(f=Math.round(f/D)*D),Math.max(v,Math.min(E,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,v){var E=this._getCenterOffset(f)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var f=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(v){var E=uo,D=this._proxy.style[E];Ma(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),D===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),v=this.getZoom();Ma(this._proxy,this.project(f,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(v),R=this._getCenterOffset(f)._divideBy(1-1/D);return E.animate!==!0&&!this.getSize().contains(R)?!1:(H(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(f,v,!0)},this),!0)},_animateZoom:function(f,v,E,D){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=v,ut(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:v,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function th(f,v){return new St(f,v)}var Hr=V.extend({options:{position:"topright"},initialize:function(f){w(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var v=this._map;return v&&v.removeControl(this),this.options.position=f,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var v=this._container=this.onAdd(f),E=this.getPosition(),D=f._controlCorners[E];return ut(v,"leaflet-control"),E.indexOf("bottom")!==-1?D.insertBefore(v,D.firstChild):D.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Pa=function(f){return new Hr(f)};St.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},v="leaflet-",E=this._controlContainer=yt("div",v+"control-container",this._container);function D(R,F){var ee=v+R+" "+v+F;f[R+F]=yt("div",ee,E)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Kt(this._controlCorners[f]);Kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bc=Hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,v,E,D){return E<D?-1:D<E?1:0}},initialize:function(f,v,E){w(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in f)this._addLayer(f[D],D);for(D in v)this._addLayer(v[D],D,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Hr.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,v){return this._addLayer(f,v),this._map?this._update():this},addOverlay:function(f,v){return this._addLayer(f,v,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var v=this._getLayer(u(f));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){ut(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(ut(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):fn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",v=this._container=yt("div",f),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Qo(v),Ji(v);var D=this._section=yt("section",f+"-list");E&&(this._map.on("click",this.collapse,this),lt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=yt("a",f+"-toggle",v);R.href="#",R.title="Layers",R.setAttribute("role","button"),lt(R,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){An(F),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=yt("div",f+"-base",D),this._separator=yt("div",f+"-separator",D),this._overlaysList=yt("div",f+"-overlays",D),v.appendChild(D)},_getLayer:function(f){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&u(this._layers[v].layer)===f)return this._layers[v]},_addLayer:function(f,v,E){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(D,R){return this.options.sortFunction(D.layer,R.layer,D.name,R.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ri(this._baseLayersList),ri(this._overlaysList),this._layerControlInputs=[];var f,v,E,D,R=0;for(E=0;E<this._layers.length;E++)D=this._layers[E],this._addItem(D),v=v||D.overlay,f=f||!D.overlay,R+=D.overlay?0:1;return this.options.hideSingleBase&&(f=f&&R>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=v&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var v=this._getLayer(u(f.target)),E=v.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(f,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(v?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=E,D.firstChild},_addItem:function(f){var v=document.createElement("label"),E=this._map.hasLayer(f.layer),D;f.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=E):D=this._createRadioElement("leaflet-base-layers_"+u(this),E),this._layerControlInputs.push(D),D.layerId=u(f.layer),lt(D,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+f.name;var F=document.createElement("span");v.appendChild(F),F.appendChild(D),F.appendChild(R);var ee=f.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,v,E,D=[],R=[];this._handlingClick=!0;for(var F=f.length-1;F>=0;F--)v=f[F],E=this._getLayer(v.layerId).layer,v.checked?D.push(E):v.checked||R.push(E);for(F=0;F<R.length;F++)this._map.hasLayer(R[F])&&this._map.removeLayer(R[F]);for(F=0;F<D.length;F++)this._map.hasLayer(D[F])||this._map.addLayer(D[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,v,E,D=this._map.getZoom(),R=f.length-1;R>=0;R--)v=f[R],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&D<E.options.minZoom||E.options.maxZoom!==void 0&&D>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,lt(f,"click",An),this.expand();var v=this;setTimeout(function(){Ut(f,"click",An),v._preventClick=!1})}}),m0=function(f,v,E){return new bc(f,v,E)},nh=Hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var v="leaflet-control-zoom",E=yt("div",v+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,v,E,D,R){var F=yt("a",E,D);return F.innerHTML=f,F.href="#",F.title=v,F.setAttribute("role","button"),F.setAttribute("aria-label",v),Qo(F),lt(F,"click",ho),lt(F,"click",R,this),lt(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var f=this._map,v="leaflet-disabled";fn(this._zoomInButton,v),fn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(ut(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(ut(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nh,this.addControl(this.zoomControl))});var iw=function(f){return new nh(f)},p0=Hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var v="leaflet-control-scale",E=yt("div",v),D=this.options;return this._addScales(D,v+"-line",E),f.on(D.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),E},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,v,E){f.metric&&(this._mScale=yt("div",v,E)),f.imperial&&(this._iScale=yt("div",v,E))},_update:function(){var f=this._map,v=f.getSize().y/2,E=f.distance(f.containerPointToLatLng([0,v]),f.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var v=this._getRoundNum(f),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/f)},_updateImperial:function(f){var v=f*3.2808399,E,D,R;v>5280?(E=v/5280,D=this._getRoundNum(E),this._updateScale(this._iScale,D+" mi",D/E)):(R=this._getRoundNum(v),this._updateScale(this._iScale,R+" ft",R/v))},_updateScale:function(f,v,E){f.style.width=Math.round(this.options.maxWidth*E)+"px",f.innerHTML=v},_getRoundNum:function(f){var v=Math.pow(10,(Math.floor(f)+"").length-1),E=f/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),rh=function(f){return new p0(f)},aw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ih=Hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ke.inlineSvg?aw+" ":"")+"Leaflet</a>"},initialize:function(f){w(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),Qo(this._container);for(var v in f._layers)f._layers[v].getAttribution&&this.addAttribution(f._layers[v].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var v in this._attributions)this._attributions[v]&&f.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),f.length&&E.push(f.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new ih().addTo(this)});var ow=function(f){return new ih(f)};Hr.Layers=bc,Hr.Zoom=nh,Hr.Scale=p0,Hr.Attribution=ih,Pa.layers=m0,Pa.zoom=iw,Pa.scale=rh,Pa.attribution=ow;var Qi=V.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qi.addTo=function(f,v){return f.addHandler(v,this),this};var sw={Events:G},ah=Ke.touch?"touchstart mousedown":"mousedown",mo=J.extend({options:{clickTolerance:3},initialize:function(f,v,E,D){w(this,D),this._element=f,this._dragStartTarget=v||f,this._preventOutline=E},enable:function(){this._enabled||(lt(this._dragStartTarget,ah,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mo._dragging===this&&this.finishDrag(!0),Ut(this._dragStartTarget,ah,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Zf(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){mo._dragging===this&&this.finishDrag();return}if(!(mo._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(mo._dragging=this,this._preventOutline&&el(this._element),$u(),Js(),!this._moving)){this.fire("down");var v=f.touches?f.touches[0]:f,E=zu(this._element);this._startPoint=new Q(v.clientX,v.clientY),this._startPos=fo(this._element),this._parentScale=hc(E);var D=f.type==="mousedown";lt(document,D?"mousemove":"touchmove",this._onMove,this),lt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var v=f.touches&&f.touches.length===1?f.touches[0]:f,E=new Q(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,An(f),this._moved||(this.fire("dragstart"),this._moved=!0,ut(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ut(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Jt(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){fn(document.body,"leaflet-dragging"),this._lastTarget&&(fn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ut(document,"mousemove touchmove",this._onMove,this),Ut(document,"mouseup touchend touchcancel",this._onUp,this),fc(),Xi();var v=this._moved&&this._moving;this._moving=!1,mo._dragging=!1,v&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function g0(f,v,E){var D,R=[1,4,2,8],F,ee,ue,be,je,Le,Ve,pt;for(F=0,Le=f.length;F<Le;F++)f[F]._code=es(f[F],v);for(ue=0;ue<4;ue++){for(Ve=R[ue],D=[],F=0,Le=f.length,ee=Le-1;F<Le;ee=F++)be=f[F],je=f[ee],be._code&Ve?je._code&Ve||(pt=Fu(je,be,Ve,v,E),pt._code=es(pt,v),D.push(pt)):(je._code&Ve&&(pt=Fu(je,be,Ve,v,E),pt._code=es(pt,v),D.push(pt)),D.push(be));f=D}return f}function b0(f,v){var E,D,R,F,ee,ue,be,je,Le;if(!f||f.length===0)throw new Error("latlngs not passed");ai(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ve=de([0,0]),pt=ie(f),Qn=pt.getNorthWest().distanceTo(pt.getSouthWest())*pt.getNorthEast().distanceTo(pt.getNorthWest());Qn<1700&&(Ve=oh(f));var Nn=f.length,Gr=[];for(E=0;E<Nn;E++){var Ct=de(f[E]);Gr.push(v.project(de([Ct.lat-Ve.lat,Ct.lng-Ve.lng])))}for(ue=be=je=0,E=0,D=Nn-1;E<Nn;D=E++)R=Gr[E],F=Gr[D],ee=R.y*F.x-F.y*R.x,be+=(R.x+F.x)*ee,je+=(R.y+F.y)*ee,ue+=ee*3;ue===0?Le=Gr[0]:Le=[be/ue,je/ue];var Mt=v.unproject(te(Le));return de([Mt.lat+Ve.lat,Mt.lng+Ve.lng])}function oh(f){for(var v=0,E=0,D=0,R=0;R<f.length;R++){var F=de(f[R]);v+=F.lat,E+=F.lng,D++}return de([v/D,E/D])}var sh={__proto__:null,clipPolygon:g0,polygonCenter:b0,centroid:oh};function y0(f,v){if(!v||!f.length)return f.slice();var E=v*v;return f=cw(f,E),f=x0(f,E),f}function v0(f,v,E){return Math.sqrt(yc(f,v,E,!0))}function lw(f,v,E){return yc(f,v,E)}function x0(f,v){var E=f.length,D=typeof Uint8Array<"u"?Uint8Array:Array,R=new D(E);R[0]=R[E-1]=1,lh(f,R,v,0,E-1);var F,ee=[];for(F=0;F<E;F++)R[F]&&ee.push(f[F]);return ee}function lh(f,v,E,D,R){var F=0,ee,ue,be;for(ue=D+1;ue<=R-1;ue++)be=yc(f[ue],f[D],f[R],!0),be>F&&(ee=ue,F=be);F>E&&(v[ee]=1,lh(f,v,E,D,ee),lh(f,v,E,ee,R))}function cw(f,v){for(var E=[f[0]],D=1,R=0,F=f.length;D<F;D++)uw(f[D],f[R])>v&&(E.push(f[D]),R=D);return R<F-1&&E.push(f[F-1]),E}var w0;function _0(f,v,E,D,R){var F=D?w0:es(f,E),ee=es(v,E),ue,be,je;for(w0=ee;;){if(!(F|ee))return[f,v];if(F&ee)return!1;ue=F||ee,be=Fu(f,v,ue,E,R),je=es(be,E),ue===F?(f=be,F=je):(v=be,ee=je)}}function Fu(f,v,E,D,R){var F=v.x-f.x,ee=v.y-f.y,ue=D.min,be=D.max,je,Le;return E&8?(je=f.x+F*(be.y-f.y)/ee,Le=be.y):E&4?(je=f.x+F*(ue.y-f.y)/ee,Le=ue.y):E&2?(je=be.x,Le=f.y+ee*(be.x-f.x)/F):E&1&&(je=ue.x,Le=f.y+ee*(ue.x-f.x)/F),new Q(je,Le,R)}function es(f,v){var E=0;return f.x<v.min.x?E|=1:f.x>v.max.x&&(E|=2),f.y<v.min.y?E|=4:f.y>v.max.y&&(E|=8),E}function uw(f,v){var E=v.x-f.x,D=v.y-f.y;return E*E+D*D}function yc(f,v,E,D){var R=v.x,F=v.y,ee=E.x-R,ue=E.y-F,be=ee*ee+ue*ue,je;return be>0&&(je=((f.x-R)*ee+(f.y-F)*ue)/be,je>1?(R=E.x,F=E.y):je>0&&(R+=ee*je,F+=ue*je)),ee=f.x-R,ue=f.y-F,D?ee*ee+ue*ue:new Q(R,F)}function ai(f){return!j(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function Hu(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ai(f)}function rl(f,v){var E,D,R,F,ee,ue,be,je;if(!f||f.length===0)throw new Error("latlngs not passed");ai(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Le=de([0,0]),Ve=ie(f),pt=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());pt<1700&&(Le=oh(f));var Qn=f.length,Nn=[];for(E=0;E<Qn;E++){var Gr=de(f[E]);Nn.push(v.project(de([Gr.lat-Le.lat,Gr.lng-Le.lng])))}for(E=0,D=0;E<Qn-1;E++)D+=Nn[E].distanceTo(Nn[E+1])/2;if(D===0)je=Nn[0];else for(E=0,F=0;E<Qn-1;E++)if(ee=Nn[E],ue=Nn[E+1],R=ee.distanceTo(ue),F+=R,F>D){be=(F-D)/R,je=[ue.x-be*(ue.x-ee.x),ue.y-be*(ue.y-ee.y)];break}var Ct=v.unproject(te(je));return de([Ct.lat+Le.lat,Ct.lng+Le.lng])}var dw={__proto__:null,simplify:y0,pointToSegmentDistance:v0,closestPointOnSegment:lw,clipSegment:_0,_getEdgeIntersection:Fu,_getBitCode:es,_sqClosestPointOnSegment:yc,isFlat:ai,_flat:Hu,polylineCenter:rl},Gu={project:function(f){return new Q(f.lng,f.lat)},unproject:function(f){return new fe(f.y,f.x)},bounds:new z([-180,-90],[180,90])},Yu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var v=Math.PI/180,E=this.R,D=f.lat*v,R=this.R_MINOR/E,F=Math.sqrt(1-R*R),ee=F*Math.sin(D),ue=Math.tan(Math.PI/4-D/2)/Math.pow((1-ee)/(1+ee),F/2);return D=-E*Math.log(Math.max(ue,1e-10)),new Q(f.lng*v*E,D)},unproject:function(f){for(var v=180/Math.PI,E=this.R,D=this.R_MINOR/E,R=Math.sqrt(1-D*D),F=Math.exp(-f.y/E),ee=Math.PI/2-2*Math.atan(F),ue=0,be=.1,je;ue<15&&Math.abs(be)>1e-7;ue++)je=R*Math.sin(ee),je=Math.pow((1-je)/(1+je),R/2),be=Math.PI/2-2*Math.atan(F*je)-ee,ee+=be;return new fe(ee*v,f.x*v/E)}},S0={__proto__:null,LonLat:Gu,Mercator:Yu,SphericalMercator:Se},k0=i({},Ne,{code:"EPSG:3395",projection:Yu,transformation:(function(){var f=.5/(Math.PI*Yu.R);return he(f,.5,-f,.5)})()}),ch=i({},Ne,{code:"EPSG:4326",projection:Gu,transformation:he(1/180,1,-1/180,.5)}),il=i({},pe,{projection:Gu,transformation:he(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,v){var E=v.lng-f.lng,D=v.lat-f.lat;return Math.sqrt(E*E+D*D)},infinite:!0});pe.Earth=Ne,pe.EPSG3395=k0,pe.EPSG3857=Ue,pe.EPSG900913=Be,pe.EPSG4326=ch,pe.Simple=il;var Ai=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[u(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[u(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var v=f.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});St.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var v=u(f);return this._layers[v]?this:(this._layers[v]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var v=u(f);return this._layers[v]?(this._loaded&&f.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return u(f)in this._layers},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},_addLayers:function(f){f=f?j(f)?f:[f]:[];for(var v=0,E=f.length;v<E;v++)this.addLayer(f[v])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[u(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var v=u(f);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,v=-1/0,E=this._getZoomSpan();for(var D in this._zoomBoundLayers){var R=this._zoomBoundLayers[D].options;f=R.minZoom===void 0?f:Math.min(f,R.minZoom),v=R.maxZoom===void 0?v:Math.max(v,R.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=f===1/0?void 0:f,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var al=Ai.extend({initialize:function(f,v){w(this,v),this._layers={};var E,D;if(f)for(E=0,D=f.length;E<D;E++)this.addLayer(f[E])},addLayer:function(f){var v=this.getLayerId(f);return this._layers[v]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var v=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(f){var v=typeof f=="number"?f:this.getLayerId(f);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var v=Array.prototype.slice.call(arguments,1),E,D;for(E in this._layers)D=this._layers[E],D[f]&&D[f].apply(D,v);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,v){for(var E in this._layers)f.call(v,this._layers[E]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return u(f)}}),fw=function(f,v){return new al(f,v)},ea=al.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),al.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),al.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new re;for(var v in this._layers){var E=this._layers[v];f.extend(E.getBounds?E.getBounds():E.getLatLng())}return f}}),E0=function(f,v){return new ea(f,v)},ta=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){w(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,v){var E=this._getIconUrl(f);if(!E){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(D,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(f,v){var E=this.options,D=E[v+"Size"];typeof D=="number"&&(D=[D,D]);var R=te(D),F=te(v==="shadow"&&E.shadowAnchor||E.iconAnchor||R&&R.divideBy(2,!0));f.className="leaflet-marker-"+v+" "+(E.className||""),F&&(f.style.marginLeft=-F.x+"px",f.style.marginTop=-F.y+"px"),R&&(f.style.width=R.x+"px",f.style.height=R.y+"px")},_createImg:function(f,v){return v=v||document.createElement("img"),v.src=f,v},_getIconUrl:function(f){return Ke.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function vc(f){return new ta(f)}var xc=ta.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof xc.imagePath!="string"&&(xc.imagePath=this._detectIconPath()),(this.options.imagePath||xc.imagePath)+ta.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var v=function(E,D,R){var F=D.exec(E);return F&&F[R]};return f=v(f,/^url\((['"])?(.+)\1\)$/,2),f&&v(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=yt("div","leaflet-default-icon-path",document.body),v=uc(f,"background-image")||uc(f,"backgroundImage");if(document.body.removeChild(f),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),wc=Qi.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new mo(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ut(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var v=this._marker,E=v._map,D=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,F=fo(v._icon),ee=E.getPixelBounds(),ue=E.getPixelOrigin(),be=X(ee.min._subtract(ue).add(R),ee.max._subtract(ue).subtract(R));if(!be.contains(F)){var je=te((Math.max(be.max.x,F.x)-be.max.x)/(ee.max.x-be.max.x)-(Math.min(be.min.x,F.x)-be.min.x)/(ee.min.x-be.min.x),(Math.max(be.max.y,F.y)-be.max.y)/(ee.max.y-be.max.y)-(Math.min(be.min.y,F.y)-be.min.y)/(ee.min.y-be.min.y)).multiplyBy(D);E.panBy(je,{animate:!1}),this._draggable._newPos._add(je),this._draggable._startPos._add(je),Jt(v._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=H(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,f)))},_onDrag:function(f){var v=this._marker,E=v._shadow,D=fo(v._icon),R=v._map.layerPointToLatLng(D);E&&Jt(E,D),v._latlng=R,f.latlng=R,f.oldLatLng=this._oldLatLng,v.fire("move",f).fire("drag",f)},_onDragEnd:function(f){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),_c=Ai.extend({options:{icon:new xc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,v){w(this,v),this._latlng=de(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var v=this._latlng;return this._latlng=de(f),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=f.icon.createIcon(this._icon),D=!1;E!==this._icon&&(this._icon&&this._removeIcon(),D=!0,f.title&&(E.title=f.title),E.tagName==="IMG"&&(E.alt=f.alt||"")),ut(E,v),f.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(E,"focus",this._panOnFocus,this);var R=f.icon.createShadow(this._shadow),F=!1;R!==this._shadow&&(this._removeShadow(),F=!0),R&&(ut(R,v),R.alt=""),this._shadow=R,f.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&F&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ut(this._icon,"focus",this._panOnFocus,this),Kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Kt(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Jt(this._icon,f),this._shadow&&Jt(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(ut(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wc)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wc(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&on(this._icon,f),this._shadow&&on(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var v=this.options.icon.options,E=v.iconSize?te(v.iconSize):te(0,0),D=v.iconAnchor?te(v.iconAnchor):te(0,0);f.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:E.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function j0(f,v){return new _c(f,v)}var na=Ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return w(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ol=na.extend({options:{fill:!0,radius:10},initialize:function(f,v){w(this,v),this._latlng=de(f),this._radius=this.options.radius},setLatLng:function(f){var v=this._latlng;return this._latlng=de(f),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var v=f&&f.radius||this._radius;return na.prototype.setStyle.call(this,f),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,v=this._radiusY||f,E=this._clickTolerance(),D=[f+E,v+E];this._pxBounds=new z(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function T0(f,v){return new ol(f,v)}var qu=ol.extend({initialize:function(f,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),w(this,v),this._latlng=de(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:na.prototype.setStyle,_project:function(){var f=this._latlng.lng,v=this._latlng.lat,E=this._map,D=E.options.crs;if(D.distance===Ne.distance){var R=Math.PI/180,F=this._mRadius/Ne.R/R,ee=E.project([v+F,f]),ue=E.project([v-F,f]),be=ee.add(ue).divideBy(2),je=E.unproject(be).lat,Le=Math.acos((Math.cos(F*R)-Math.sin(v*R)*Math.sin(je*R))/(Math.cos(v*R)*Math.cos(je*R)))/R;(isNaN(Le)||Le===0)&&(Le=F/Math.cos(Math.PI/180*v)),this._point=be.subtract(E.getPixelOrigin()),this._radius=isNaN(Le)?0:be.x-E.project([je,f-Le]).x,this._radiusY=be.y-ee.y}else{var Ve=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Ve).x}this._updateBounds()}});function A0(f,v,E){return new qu(f,v,E)}var Ra=na.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,v){w(this,v),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var v=1/0,E=null,D=yc,R,F,ee=0,ue=this._parts.length;ee<ue;ee++)for(var be=this._parts[ee],je=1,Le=be.length;je<Le;je++){R=be[je-1],F=be[je];var Ve=D(f,R,F,!0);Ve<v&&(v=Ve,E=D(f,R,F))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,v){return v=v||this._defaultShape(),f=de(f),v.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new re,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return ai(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var v=[],E=ai(f),D=0,R=f.length;D<R;D++)E?(v[D]=de(f[D]),this._bounds.extend(v[D])):v[D]=this._convertLatLngs(f[D]);return v},_project:function(){var f=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),v=new Q(f,f);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(f,v,E){var D=f[0]instanceof fe,R=f.length,F,ee;if(D){for(ee=[],F=0;F<R;F++)ee[F]=this._map.latLngToLayerPoint(f[F]),E.extend(ee[F]);v.push(ee)}else for(F=0;F<R;F++)this._projectLatlngs(f[F],v,E)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,D,R,F,ee,ue,be;for(E=0,R=0,F=this._rings.length;E<F;E++)for(be=this._rings[E],D=0,ee=be.length;D<ee-1;D++)ue=_0(be[D],be[D+1],f,D,!0),ue&&(v[R]=v[R]||[],v[R].push(ue[0]),(ue[1]!==be[D+1]||D===ee-2)&&(v[R].push(ue[1]),R++))}},_simplifyPoints:function(){for(var f=this._parts,v=this.options.smoothFactor,E=0,D=f.length;E<D;E++)f[E]=y0(f[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,v){var E,D,R,F,ee,ue,be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(E=0,F=this._parts.length;E<F;E++)for(ue=this._parts[E],D=0,ee=ue.length,R=ee-1;D<ee;R=D++)if(!(!v&&D===0)&&v0(f,ue[R],ue[D])<=be)return!0;return!1}});function hw(f,v){return new Ra(f,v)}Ra._flat=Hu;var sl=Ra.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return b0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var v=Ra.prototype._convertLatLngs.call(this,f),E=v.length;return E>=2&&v[0]instanceof fe&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(f){Ra.prototype._setLatLngs.call(this,f),ai(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ai(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,v=this.options.weight,E=new Q(v,v);if(f=new z(f.min.subtract(E),f.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,R=this._rings.length,F;D<R;D++)F=g0(this._rings[D],f,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var v=!1,E,D,R,F,ee,ue,be,je;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(F=0,be=this._parts.length;F<be;F++)for(E=this._parts[F],ee=0,je=E.length,ue=je-1;ee<je;ue=ee++)D=E[ee],R=E[ue],D.y>f.y!=R.y>f.y&&f.x<(R.x-D.x)*(f.y-D.y)/(R.y-D.y)+D.x&&(v=!v);return v||Ra.prototype._containsPoint.call(this,f,!0)}});function mw(f,v){return new sl(f,v)}var La=ea.extend({initialize:function(f,v){w(this,v),this._layers={},f&&this.addData(f)},addData:function(f){var v=j(f)?f:f.features,E,D,R;if(v){for(E=0,D=v.length;E<D;E++)R=v[E],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var F=this.options;if(F.filter&&!F.filter(f))return this;var ee=cr(f,F);return ee?(ee.feature=Vu(f),ee.defaultOptions=ee.options,this.resetStyle(ee),F.onEachFeature&&F.onEachFeature(f,ee),this.addLayer(ee)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(v){this._setLayerStyle(v,f)},this)},_setLayerStyle:function(f,v){f.setStyle&&(typeof v=="function"&&(v=v(f.feature)),f.setStyle(v))}});function cr(f,v){var E=f.type==="Feature"?f.geometry:f,D=E?E.coordinates:null,R=[],F=v&&v.pointToLayer,ee=v&&v.coordsToLatLng||Ku,ue,be,je,Le;if(!D&&!E)return null;switch(E.type){case"Point":return ue=ee(D),ll(F,f,ue,v);case"MultiPoint":for(je=0,Le=D.length;je<Le;je++)ue=ee(D[je]),R.push(ll(F,f,ue,v));return new ea(R);case"LineString":case"MultiLineString":return be=Sc(D,E.type==="LineString"?0:1,ee),new Ra(be,v);case"Polygon":case"MultiPolygon":return be=Sc(D,E.type==="Polygon"?1:2,ee),new sl(be,v);case"GeometryCollection":for(je=0,Le=E.geometries.length;je<Le;je++){var Ve=cr({geometry:E.geometries[je],type:"Feature",properties:f.properties},v);Ve&&R.push(Ve)}return new ea(R);case"FeatureCollection":for(je=0,Le=E.features.length;je<Le;je++){var pt=cr(E.features[je],v);pt&&R.push(pt)}return new ea(R);default:throw new Error("Invalid GeoJSON object.")}}function ll(f,v,E,D){return f?f(v,E):new _c(E,D&&D.markersInheritOptions&&D)}function Ku(f){return new fe(f[1],f[0],f[2])}function Sc(f,v,E){for(var D=[],R=0,F=f.length,ee;R<F;R++)ee=v?Sc(f[R],v-1,E):(E||Ku)(f[R]),D.push(ee);return D}function Wu(f,v){return f=de(f),f.alt!==void 0?[b(f.lng,v),b(f.lat,v),b(f.alt,v)]:[b(f.lng,v),b(f.lat,v)]}function kc(f,v,E,D){for(var R=[],F=0,ee=f.length;F<ee;F++)R.push(v?kc(f[F],ai(f[F])?0:v-1,E,D):Wu(f[F],D));return!v&&E&&R.length>0&&R.push(R[0].slice()),R}function po(f,v){return f.feature?i({},f.feature,{geometry:v}):Vu(v)}function Vu(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var go={toGeoJSON:function(f){return po(this,{type:"Point",coordinates:Wu(this.getLatLng(),f)})}};_c.include(go),qu.include(go),ol.include(go),Ra.include({toGeoJSON:function(f){var v=!ai(this._latlngs),E=kc(this._latlngs,v?1:0,!1,f);return po(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),sl.include({toGeoJSON:function(f){var v=!ai(this._latlngs),E=v&&!ai(this._latlngs[0]),D=kc(this._latlngs,E?2:v?1:0,!0,f);return v||(D=[D]),po(this,{type:(E?"Multi":"")+"Polygon",coordinates:D})}}),al.include({toMultiPoint:function(f){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(f).geometry.coordinates)}),po(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(f){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(f);var E=v==="GeometryCollection",D=[];return this.eachLayer(function(R){if(R.toGeoJSON){var F=R.toGeoJSON(f);if(E)D.push(F.geometry);else{var ee=Vu(F);ee.type==="FeatureCollection"?D.push.apply(D,ee.features):D.push(ee)}}}),E?po(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function Zu(f,v){return new La(f,v)}var Ec=Zu,cl=Ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,v,E){this._url=f,this._bounds=ie(v),w(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ut(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Jn(this._image),this},bringToBack:function(){return this._map&&Xo(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=ie(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",v=this._image=f?this._url:yt("img");if(ut(v,"leaflet-image-layer"),this._zoomAnimated&&ut(v,"leaflet-zoom-animated"),this.options.className&&ut(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(f){var v=this._map.getZoomScale(f.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Ma(this._image,E,v)},_reset:function(){var f=this._image,v=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Jt(f,v.min),f.style.width=E.x+"px",f.style.height=E.y+"px"},_updateOpacity:function(){on(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),N0=function(f,v,E){return new cl(f,v,E)},bo=cl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",v=this._image=f?this._url:yt("video");if(ut(v,"leaflet-image-layer"),this._zoomAnimated&&ut(v,"leaflet-zoom-animated"),this.options.className&&ut(v,this.options.className),v.onselectstart=m,v.onmousemove=m,v.onloadeddata=o(this.fire,this,"load"),f){for(var E=v.getElementsByTagName("source"),D=[],R=0;R<E.length;R++)D.push(E[R].src);this._url=E.length>0?D:[v.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var ee=yt("source");ee.src=this._url[F],v.appendChild(ee)}}});function ul(f,v,E){return new bo(f,v,E)}var Xu=cl.extend({_initImage:function(){var f=this._image=this._url;ut(f,"leaflet-image-layer"),this._zoomAnimated&&ut(f,"leaflet-zoom-animated"),this.options.className&&ut(f,this.options.className),f.onselectstart=m,f.onmousemove=m}});function O0(f,v,E){return new Xu(f,v,E)}var ur=Ai.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,v){f&&(f instanceof fe||j(f))?(this._latlng=de(f),w(this,v)):(w(this,f),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&on(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&on(this._container,1),this.bringToFront(),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(on(this._container,0),this._removeTimeout=setTimeout(o(Kt,void 0,this._container),200)):Kt(this._container),this.options.interactive&&(fn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=de(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Jn(this._container),this},bringToBack:function(){return this._map&&Xo(this._container),this},_prepareOpen:function(f){var v=this._source;if(!v._map)return!1;if(v instanceof ea){v=null;var E=this._source._layers;for(var D in E)if(E[D]._map){v=E[D];break}if(!v)return!1;this._source=v}if(!f)if(v.getCenter)f=v.getCenter();else if(v.getLatLng)f=v.getLatLng();else if(v.getBounds)f=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")f.innerHTML=v;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),v=te(this.options.offset),E=this._getAnchor();this._zoomAnimated?Jt(this._container,f.add(E)):v=v.add(f).add(E);var D=this._containerBottom=-v.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=D+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(f,v,E,D){var R=v;return R instanceof f||(R=new f(D).setContent(v)),E&&R.setLatLng(E),R}}),Ai.include({_initOverlay:function(f,v,E,D){var R=E;return R instanceof f?(w(R,D),R._source=this):(R=v&&!D?v:new f(D,this),R.setContent(E)),R}});var jc=ur.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,ur.prototype.openOn.call(this,f)},onAdd:function(f){ur.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof na||this._source.on("preclick",Ti))},onRemove:function(f){ur.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof na||this._source.off("preclick",Ti))},getEvents:function(){var f=ur.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",v=this._container=yt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=yt("div",f+"-content-wrapper",v);if(this._contentNode=yt("div",f+"-content",E),Qo(v),Ji(this._contentNode),lt(v,"contextmenu",Ti),this._tipContainer=yt("div",f+"-tip-container",v),this._tip=yt("div",f+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=yt("a",f+"-close-button",v);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',lt(D,"click",function(R){An(R),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,v=f.style;v.width="",v.whiteSpace="nowrap";var E=f.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var D=f.offsetHeight,R=this.options.maxHeight,F="leaflet-popup-scrolled";R&&D>R?(v.height=R+"px",ut(f,F)):fn(f,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),E=this._getAnchor();Jt(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,v=parseInt(uc(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,D=this._containerWidth,R=new Q(this._containerLeft,-E-this._containerBottom);R._add(fo(this._container));var F=f.layerPointToContainerPoint(R),ee=te(this.options.autoPanPadding),ue=te(this.options.autoPanPaddingTopLeft||ee),be=te(this.options.autoPanPaddingBottomRight||ee),je=f.getSize(),Le=0,Ve=0;F.x+D+be.x>je.x&&(Le=F.x+D-je.x+be.x),F.x-Le-ue.x<0&&(Le=F.x-ue.x),F.y+E+be.y>je.y&&(Ve=F.y+E-je.y+be.y),F.y-Ve-ue.y<0&&(Ve=F.y-ue.y),(Le||Ve)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Le,Ve]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),C0=function(f,v){return new jc(f,v)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(f,v,E){return this._initOverlay(jc,f,v,E).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Ai.include({bindPopup:function(f,v){return this._popup=this._initOverlay(jc,this._popup,f,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof ea||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){ho(f);var v=f.layer||f.target;if(this._popup._source===v&&!(v instanceof na)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=v,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Tc=ur.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){ur.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){ur.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=ur.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",v=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var v,E,D=this._map,R=this._container,F=D.latLngToContainerPoint(D.getCenter()),ee=D.layerPointToContainerPoint(f),ue=this.options.direction,be=R.offsetWidth,je=R.offsetHeight,Le=te(this.options.offset),Ve=this._getAnchor();ue==="top"?(v=be/2,E=je):ue==="bottom"?(v=be/2,E=0):ue==="center"?(v=be/2,E=je/2):ue==="right"?(v=0,E=je/2):ue==="left"?(v=be,E=je/2):ee.x<F.x?(ue="right",v=0,E=je/2):(ue="left",v=be+(Le.x+Ve.x)*2,E=je/2),f=f.subtract(te(v,E,!0)).add(Le).add(Ve),fn(R,"leaflet-tooltip-right"),fn(R,"leaflet-tooltip-left"),fn(R,"leaflet-tooltip-top"),fn(R,"leaflet-tooltip-bottom"),ut(R,"leaflet-tooltip-"+ue),Jt(R,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&on(this._container,f)},_animateZoom:function(f){var v=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(v)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pw=function(f,v){return new Tc(f,v)};St.include({openTooltip:function(f,v,E){return this._initOverlay(Tc,f,v,E).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Ai.include({bindTooltip:function(f,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tc,this._tooltip,f,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var v=f?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof ea||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&(lt(v,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),lt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var v=typeof f.getElement=="function"&&f.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var v=f.latlng,E,D;this._tooltip.options.sticky&&f.originalEvent&&(E=this._map.mouseEventToContainerPoint(f.originalEvent),D=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(v)}});var M0=ta.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var v=f&&f.tagName==="DIV"?f:document.createElement("div"),E=this.options;if(E.html instanceof Element?(ri(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var D=te(E.bgPos);v.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function gw(f){return new M0(f)}ta.Default=xc;var dl=Ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){w(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Kt(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof Q?f:new Q(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var v=this.getPane().children,E=-f(-1/0,1/0),D=0,R=v.length,F;D<R;D++)F=v[D].style.zIndex,v[D]!==this._container&&F&&(E=f(E,+F));isFinite(E)&&(this.options.zIndex=E+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ke.ielt9){on(this._container,this.options.opacity);var f=+new Date,v=!1,E=!1;for(var D in this._tiles){var R=this._tiles[D];if(!(!R.current||!R.loaded)){var F=Math.min(1,(f-R.loaded)/200);on(R.el,F),F<1?v=!0:(R.active?E=!0:this._onOpaqueTile(R),R.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,v=this.options.maxZoom;if(f!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===f?(this._levels[E].el.style.zIndex=v-Math.abs(f-E),this._onUpdateLevel(E)):(Kt(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var D=this._levels[f],R=this._map;return D||(D=this._levels[f]={},D.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=v,D.origin=R.project(R.unproject(R.getPixelOrigin()),f).round(),D.zoom=f,this._setZoomTransform(D,R.getCenter(),R.getZoom()),m(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var f,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)v=this._tiles[f],v.retain=v.current;for(f in this._tiles)if(v=this._tiles[f],v.current&&!v.active){var D=v.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var v in this._tiles)this._tiles[v].coords.z===f&&this._removeTile(v)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Kt(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,v,E,D){var R=Math.floor(f/2),F=Math.floor(v/2),ee=E-1,ue=new Q(+R,+F);ue.z=+ee;var be=this._tileCoordsToKey(ue),je=this._tiles[be];return je&&je.active?(je.retain=!0,!0):(je&&je.loaded&&(je.retain=!0),ee>D?this._retainParent(R,F,ee,D):!1)},_retainChildren:function(f,v,E,D){for(var R=2*f;R<2*f+2;R++)for(var F=2*v;F<2*v+2;F++){var ee=new Q(R,F);ee.z=E+1;var ue=this._tileCoordsToKey(ee),be=this._tiles[ue];if(be&&be.active){be.retain=!0;continue}else be&&be.loaded&&(be.retain=!0);E+1<D&&this._retainChildren(R,F,E+1,D)}},_resetView:function(f){var v=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var v=this.options;return v.minNativeZoom!==void 0&&f<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<f?v.maxNativeZoom:f},_setView:function(f,v,E,D){var R=Math.round(v);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var F=this.options.updateWhenZooming&&R!==this._tileZoom;(!D||F)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(f),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(f,v)},_setZoomTransforms:function(f,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],f,v)},_setZoomTransform:function(f,v,E){var D=this._map.getZoomScale(E,f.zoom),R=f.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(v,E)).round();Ke.any3d?Ma(f.el,R,D):Jt(f.el,R)},_resetGrid:function(){var f=this._map,v=f.options.crs,E=this._tileSize=this.getTileSize(),D=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,v.wrapLng[0]],D).x/E.x),Math.ceil(f.project([0,v.wrapLng[1]],D).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([v.wrapLat[0],0],D).y/E.x),Math.ceil(f.project([v.wrapLat[1],0],D).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),D=v.getZoomScale(E,this._tileZoom),R=v.project(f,this._tileZoom).floor(),F=v.getSize().divideBy(D*2);return new z(R.subtract(F),R.add(F))},_update:function(f){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(f===void 0&&(f=v.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(f),R=this._pxBoundsToTileRange(D),F=R.getCenter(),ee=[],ue=this.options.keepBuffer,be=new z(R.getBottomLeft().subtract([ue,-ue]),R.getTopRight().add([ue,-ue]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var je in this._tiles){var Le=this._tiles[je].coords;(Le.z!==this._tileZoom||!be.contains(new Q(Le.x,Le.y)))&&(this._tiles[je].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(f,E);return}for(var Ve=R.min.y;Ve<=R.max.y;Ve++)for(var pt=R.min.x;pt<=R.max.x;pt++){var Qn=new Q(pt,Ve);if(Qn.z=this._tileZoom,!!this._isValidTile(Qn)){var Nn=this._tiles[this._tileCoordsToKey(Qn)];Nn?Nn.current=!0:ee.push(Qn)}}if(ee.sort(function(Ct,Mt){return Ct.distanceTo(F)-Mt.distanceTo(F)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gr=document.createDocumentFragment();for(pt=0;pt<ee.length;pt++)this._addTile(ee[pt],Gr);this._level.el.appendChild(Gr)}}}},_isValidTile:function(f){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(f.x<E.min.x||f.x>E.max.x)||!v.wrapLat&&(f.y<E.min.y||f.y>E.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(f);return ie(this.options.bounds).overlaps(D)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var v=this._map,E=this.getTileSize(),D=f.scaleBy(E),R=D.add(E),F=v.unproject(D,f.z),ee=v.unproject(R,f.z);return[F,ee]},_tileCoordsToBounds:function(f){var v=this._tileCoordsToNwSe(f),E=new re(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var v=f.split(":"),E=new Q(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(f){var v=this._tiles[f];v&&(Kt(v.el),delete this._tiles[f],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){ut(f,"leaflet-tile");var v=this.getTileSize();f.style.width=v.x+"px",f.style.height=v.y+"px",f.onselectstart=m,f.onmousemove=m,Ke.ielt9&&this.options.opacity<1&&on(f,this.options.opacity)},_addTile:function(f,v){var E=this._getTilePos(f),D=this._tileCoordsToKey(f),R=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(R),this.createTile.length<2&&H(o(this._tileReady,this,f,null,R)),Jt(R,E),this._tiles[D]={el:R,coords:f,current:!0},v.appendChild(R),this.fire("tileloadstart",{tile:R,coords:f})},_tileReady:function(f,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:f});var D=this._tileCoordsToKey(f);E=this._tiles[D],E&&(E.loaded=+new Date,this._map._fadeAnimated?(on(E.el,0),B(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(ut(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ke.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var v=new Q(this._wrapX?h(f.x,this._wrapX):f.x,this._wrapY?h(f.y,this._wrapY):f.y);return v.z=f.z,v},_pxBoundsToTileRange:function(f){var v=this.getTileSize();return new z(f.min.unscaleBy(v).floor(),f.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function D0(f){return new dl(f)}var yo=dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,v){this._url=f,v=w(this,v),v.detectRetina&&Ke.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,v){return this._url===f&&v===void 0&&(v=!0),this._url=f,v||this.redraw(),this},createTile:function(f,v){var E=document.createElement("img");return lt(E,"load",o(this._tileOnLoad,this,v,E)),lt(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(f),E},getTileUrl:function(f){var v={r:Ke.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-f.y;this.options.tms&&(v.y=E),v["-y"]=E}return O(this._url,i(v,this.options))},_tileOnLoad:function(f,v){Ke.ielt9?setTimeout(o(f,this,null,v),0):f(null,v)},_tileOnError:function(f,v,E){var D=this.options.errorTileUrl;D&&v.getAttribute("src")!==D&&(v.src=D),f(E,v)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,D=this.options.zoomOffset;return E&&(f=v-f),f+D},_getSubdomain:function(f){var v=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var f,v;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(v=this._tiles[f].el,v.onload=m,v.onerror=m,!v.complete)){v.src=M;var E=this._tiles[f].coords;Kt(v),delete this._tiles[f],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(f){var v=this._tiles[f];if(v)return v.el.setAttribute("src",M),dl.prototype._removeTile.call(this,f)},_tileReady:function(f,v,E){if(!(!this._map||E&&E.getAttribute("src")===M))return dl.prototype._tileReady.call(this,f,v,E)}});function oi(f,v){return new yo(f,v)}var Ac=yo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,v){this._url=f;var E=i({},this.defaultWmsParams);for(var D in v)D in this.options||(E[D]=v[D]);v=w(this,v);var R=v.detectRetina&&Ke.retina?2:1,F=this.getTileSize();E.width=F.x*R,E.height=F.y*R,this.wmsParams=E},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,yo.prototype.onAdd.call(this,f)},getTileUrl:function(f){var v=this._tileCoordsToNwSe(f),E=this._crs,D=X(E.project(v[0]),E.project(v[1])),R=D.min,F=D.max,ee=(this._wmsVersion>=1.3&&this._crs===ch?[R.y,R.x,F.y,F.x]:[R.x,R.y,F.x,F.y]).join(","),ue=yo.prototype.getTileUrl.call(this,f);return ue+_(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(f,v){return i(this.wmsParams,f),v||this.redraw(),this}});function si(f,v){return new Ac(f,v)}yo.WMS=Ac,oi.wms=si;var Rr=Ai.extend({options:{padding:.1},initialize:function(f){w(this,f),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ut(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,v){var E=this._map.getZoomScale(v,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,v),F=D.multiplyBy(-E).add(R).subtract(this._map._getNewPixelOrigin(f,v));Ke.any3d?Ma(this._container,F,E):Jt(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-f)).round();this._bounds=new z(E,E.add(v.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ju=Rr.extend({options:{tolerance:0},getEvents:function(){var f=Rr.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Rr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");lt(f,"mousemove",this._onMouseMove,this),lt(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Kt(this._container),Ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var v in this._layers)f=this._layers[v],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rr.prototype._update.call(this);var f=this._bounds,v=this._container,E=f.getSize(),D=Ke.retina?2:1;Jt(v,f.min),v.width=D*E.x,v.height=D*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",Ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Rr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[u(f)]=f;var v=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var v=f._order,E=v.next,D=v.prev;E?E.prev=D:this._drawLast=D,D?D.next=E:this._drawFirst=E,delete f._order,delete this._layers[u(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var v=f.options.dashArray.split(/[, ]+/),E=[],D,R;for(R=0;R<v.length;R++){if(D=Number(v[R]),isNaN(D))return;E.push(D)}f.options._dashArray=E}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var v=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(f._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(f._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var v=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)f=D.layer,(!v||f._pxBounds&&f._pxBounds.intersects(v))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,v){if(this._drawing){var E,D,R,F,ee=f._parts,ue=ee.length,be=this._ctx;if(ue){for(be.beginPath(),E=0;E<ue;E++){for(D=0,R=ee[E].length;D<R;D++)F=ee[E][D],be[D?"lineTo":"moveTo"](F.x,F.y);v&&be.closePath()}this._fillStroke(be,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var v=f._point,E=this._ctx,D=Math.max(Math.round(f._radius),1),R=(Math.max(Math.round(f._radiusY),1)||D)/D;R!==1&&(E.save(),E.scale(1,R)),E.beginPath(),E.arc(v.x,v.y/R,D,0,Math.PI*2,!1),R!==1&&E.restore(),this._fillStroke(E,f)}},_fillStroke:function(f,v){var E=v.options;E.fill&&(f.globalAlpha=E.fillOpacity,f.fillStyle=E.fillColor||E.color,f.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(f.setLineDash&&f.setLineDash(v.options&&v.options._dashArray||[]),f.globalAlpha=E.opacity,f.lineWidth=E.weight,f.strokeStyle=E.color,f.lineCap=E.lineCap,f.lineJoin=E.lineJoin,f.stroke())},_onClick:function(f){for(var v=this._map.mouseEventToLayerPoint(f),E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(E))&&(D=E);this._fireEvent(D?[D]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,v)}},_handleMouseOut:function(f){var v=this._hoveredLayer;v&&(fn(this._container,"leaflet-interactive"),this._fireEvent([v],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,v){if(!this._mouseHoverThrottled){for(var E,D,R=this._drawFirst;R;R=R.next)E=R.layer,E.options.interactive&&E._containsPoint(v)&&(D=E);D!==this._hoveredLayer&&(this._handleMouseOut(f),D&&(ut(this._container,"leaflet-interactive"),this._fireEvent([D],f,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,v,E){this._map._fireDOMEvent(v,E||v.type,f)},_bringToFront:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(E)E.prev=D;else return;D?D.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(f)}},_bringToBack:function(f){var v=f._order;if(v){var E=v.next,D=v.prev;if(D)D.next=E;else return;E?E.prev=D:D&&(this._drawLast=D),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(f)}}});function Nc(f){return Ke.canvas?new Ju(f):null}var vo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),uh={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Rr.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var v=f._container=vo("shape");ut(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",f._path=vo("path"),v.appendChild(f._path),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){var v=f._container;this._container.appendChild(v),f.options.interactive&&f.addInteractiveTarget(v)},_removePath:function(f){var v=f._container;Kt(v),f.removeInteractiveTarget(v),delete this._layers[u(f)]},_updateStyle:function(f){var v=f._stroke,E=f._fill,D=f.options,R=f._container;R.stroked=!!D.stroke,R.filled=!!D.fill,D.stroke?(v||(v=f._stroke=vo("stroke")),R.appendChild(v),v.weight=D.weight+"px",v.color=D.color,v.opacity=D.opacity,D.dashArray?v.dashStyle=j(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=D.lineCap.replace("butt","flat"),v.joinstyle=D.lineJoin):v&&(R.removeChild(v),f._stroke=null),D.fill?(E||(E=f._fill=vo("fill")),R.appendChild(E),E.color=D.fillColor||D.color,E.opacity=D.fillOpacity):E&&(R.removeChild(E),f._fill=null)},_updateCircle:function(f){var v=f._point.round(),E=Math.round(f._radius),D=Math.round(f._radiusY||E);this._setPath(f,f._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+D+" 0,"+65535*360)},_setPath:function(f,v){f._path.v=v},_bringToFront:function(f){Jn(f._container)},_bringToBack:function(f){Xo(f._container)}},ra=Ke.vml?vo:Xe,fl=Rr.extend({_initContainer:function(){this._container=ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Kt(this._container),Ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rr.prototype._update.call(this);var f=this._bounds,v=f.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Jt(E,f.min),E.setAttribute("viewBox",[f.min.x,f.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(f){var v=f._path=ra("path");f.options.className&&ut(v,f.options.className),f.options.interactive&&ut(v,"leaflet-interactive"),this._updateStyle(f),this._layers[u(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Kt(f._path),f.removeInteractiveTarget(f._path),delete this._layers[u(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var v=f._path,E=f.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(f,v){this._setPath(f,Ae(f._parts,v))},_updateCircle:function(f){var v=f._point,E=Math.max(Math.round(f._radius),1),D=Math.max(Math.round(f._radiusY),1)||E,R="a"+E+","+D+" 0 1,0 ",F=f._empty()?"M0 0":"M"+(v.x-E)+","+v.y+R+E*2+",0 "+R+-E*2+",0 ";this._setPath(f,F)},_setPath:function(f,v){f._path.setAttribute("d",v)},_bringToFront:function(f){Jn(f._path)},_bringToBack:function(f){Xo(f._path)}});Ke.vml&&fl.include(uh);function Oc(f){return Ke.svg||Ke.vml?new fl(f):null}St.include({getRenderer:function(f){var v=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var v=this._paneRenderers[f];return v===void 0&&(v=this._createRenderer({pane:f}),this._paneRenderers[f]=v),v},_createRenderer:function(f){return this.options.preferCanvas&&Nc(f)||Oc(f)}});var ts=sl.extend({initialize:function(f,v){sl.prototype.initialize.call(this,this._boundsToLatLngs(f),v)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=ie(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function bw(f,v){return new ts(f,v)}fl.create=ra,fl.pointsToPath=Ae,La.geometryToLayer=cr,La.coordsToLatLng=Ku,La.coordsToLatLngs=Sc,La.latLngToCoords=Wu,La.latLngsToCoords=kc,La.getFeature=po,La.asFeature=Vu,St.mergeOptions({boxZoom:!0});var Lr=Qi.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Js(),$u(),this._startPoint=this._map.mouseEventToContainerPoint(f),lt(document,{contextmenu:ho,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),ut(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var v=new z(this._point,this._startPoint),E=v.getSize();Jt(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Kt(this._box),fn(this._container,"leaflet-crosshair")),Xi(),fc(),Ut(document,{contextmenu:ho,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",Lr),St.mergeOptions({doubleClickZoom:!0});var Qu=Qi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var v=this._map,E=v.getZoom(),D=v.options.zoomDelta,R=f.originalEvent.shiftKey?E-D:E+D;v.options.doubleClickZoom==="center"?v.setZoom(R):v.setZoomAround(f.containerPoint,R)}});St.addInitHook("addHandler","doubleClickZoom",Qu),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ia=Qi.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new mo(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}ut(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fn(this._map._container,"leaflet-grab"),fn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=ie(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,v){return f-(f-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;f.x<v.min.x&&(f.x=this._viscousLimit(f.x,v.min.x)),f.y<v.min.y&&(f.y=this._viscousLimit(f.y,v.min.y)),f.x>v.max.x&&(f.x=this._viscousLimit(f.x,v.max.x)),f.y>v.max.y&&(f.y=this._viscousLimit(f.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,v=Math.round(f/2),E=this._initialWorldOffset,D=this._draggable._newPos.x,R=(D-v+E)%f+v-E,F=(D+v+E)%f-v-E,ee=Math.abs(R+E)<Math.abs(F+E)?R:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(f){var v=this._map,E=v.options,D=!E.inertia||f.noInertia||this._times.length<2;if(v.fire("dragend",f),D)v.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,ee=E.easeLinearity,ue=R.multiplyBy(ee/F),be=ue.distanceTo([0,0]),je=Math.min(E.inertiaMaxSpeed,be),Le=ue.multiplyBy(je/be),Ve=je/(E.inertiaDeceleration*ee),pt=Le.multiplyBy(-Ve/2).round();!pt.x&&!pt.y?v.fire("moveend"):(pt=v._limitOffset(pt,v.options.maxBounds),H(function(){v.panBy(pt,{duration:Ve,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",ia),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dh=Qi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),lt(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,v=document.documentElement,E=f.scrollTop||v.scrollTop,D=f.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(D,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var v=this._panKeys={},E=this.keyCodes,D,R;for(D=0,R=E.left.length;D<R;D++)v[E.left[D]]=[-1*f,0];for(D=0,R=E.right.length;D<R;D++)v[E.right[D]]=[f,0];for(D=0,R=E.down.length;D<R;D++)v[E.down[D]]=[0,f];for(D=0,R=E.up.length;D<R;D++)v[E.up[D]]=[0,-1*f]},_setZoomDelta:function(f){var v=this._zoomKeys={},E=this.keyCodes,D,R;for(D=0,R=E.zoomIn.length;D<R;D++)v[E.zoomIn[D]]=f;for(D=0,R=E.zoomOut.length;D<R;D++)v[E.zoomOut[D]]=-f},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var v=f.keyCode,E=this._map,D;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(D=this._panKeys[v],f.shiftKey&&(D=te(D).multiplyBy(3)),E.options.maxBounds&&(D=E._limitOffset(te(D),E.options.maxBounds)),E.options.worldCopyJump){var R=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(D)));E.panTo(R)}else E.panBy(D)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;ho(f)}}});St.addInitHook("addHandler","keyboard",dh),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cc=Qi.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var v=_r(f),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var D=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),ho(f)},_performZoom:function(){var f=this._map,v=f.getZoom(),E=this._map.options.zoomSnap||0;f._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,F=E?Math.ceil(R/E)*E:R,ee=f._limitZoom(v+(this._delta>0?F:-F))-v;this._delta=0,this._startTime=null,ee&&(f.options.scrollWheelZoom==="center"?f.setZoom(v+ee):f.setZoomAround(this._lastMousePos,v+ee))}});St.addInitHook("addHandler","scrollWheelZoom",Cc);var ns=600;St.mergeOptions({tapHold:Ke.touchNative&&Ke.safari&&Ke.mobile,tapTolerance:15});var ed=Qi.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var v=f.touches[0];this._startPos=this._newPos=new Q(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(lt(document,"touchend",An),lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),ns),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Ut(document,"touchend",An),Ut(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Ut(document,"touchend touchcancel contextmenu",this._cancel,this),Ut(document,"touchmove",this._onMove,this)},_onMove:function(f){var v=f.touches[0];this._newPos=new Q(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,v){var E=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});St.addInitHook("addHandler","tapHold",ed),St.mergeOptions({touchZoom:Ke.touch,bounceAtZoomLimits:!0});var fh=Qi.extend({addHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fn(this._map._container,"leaflet-touch-zoom"),Ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var v=this._map;if(!(!f.touches||f.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(D)._divideBy(2))),this._startDist=E.distanceTo(D),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),An(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(f.touches[0]),D=v.mouseEventToContainerPoint(f.touches[1]),R=E.distanceTo(D)/this._startDist;if(this._zoom=v.getScaleZoom(R,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&R<1||this._zoom>v.getMaxZoom()&&R>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var F=E._add(D)._divideBy(2)._subtract(this._centerPoint);if(R===1&&F.x===0&&F.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ee=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(ee,this,!0),An(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Ut(document,"touchmove",this._onTouchMove,this),Ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",fh),St.BoxZoom=Lr,St.DoubleClickZoom=Qu,St.Drag=ia,St.Keyboard=dh,St.ScrollWheelZoom=Cc,St.TapHold=ed,St.TouchZoom=fh,n.Bounds=z,n.Browser=Ke,n.CRS=pe,n.Canvas=Ju,n.Circle=qu,n.CircleMarker=ol,n.Class=V,n.Control=Hr,n.DivIcon=M0,n.DivOverlay=ur,n.DomEvent=Uu,n.DomUtil=tl,n.Draggable=mo,n.Evented=J,n.FeatureGroup=ea,n.GeoJSON=La,n.GridLayer=dl,n.Handler=Qi,n.Icon=ta,n.ImageOverlay=cl,n.LatLng=fe,n.LatLngBounds=re,n.Layer=Ai,n.LayerGroup=al,n.LineUtil=dw,n.Map=St,n.Marker=_c,n.Mixin=sw,n.Path=na,n.Point=Q,n.PolyUtil=sh,n.Polygon=sl,n.Polyline=Ra,n.Popup=jc,n.PosAnimation=nl,n.Projection=S0,n.Rectangle=ts,n.Renderer=Rr,n.SVG=fl,n.SVGOverlay=Xu,n.TileLayer=yo,n.Tooltip=Tc,n.Transformation=ke,n.Util=K,n.VideoOverlay=bo,n.bind=o,n.bounds=X,n.canvas=Nc,n.circle=A0,n.circleMarker=T0,n.control=Pa,n.divIcon=gw,n.extend=i,n.featureGroup=E0,n.geoJSON=Zu,n.geoJson=Ec,n.gridLayer=D0,n.icon=vc,n.imageOverlay=N0,n.latLng=de,n.latLngBounds=ie,n.layerGroup=fw,n.map=th,n.marker=j0,n.point=te,n.polygon=mw,n.polyline=hw,n.popup=C0,n.rectangle=bw,n.setOptions=w,n.stamp=u,n.svg=Oc,n.svgOverlay=O0,n.tileLayer=oi,n.tooltip=pw,n.transformation=he,n.version=r,n.videoOverlay=ul;var hh=window.L;n.noConflict=function(){return window.L=hh,this},window.L=n}))})(km,km.exports)),km.exports}var MX=CX();const u1=_i(MX),Fg=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Yc(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function DX(e){const{buttonId:t,buttonInputId:n,modalId:r,closeMapId:i,mapCloseBtnId:a,searchBoxId:o,suggestionsId:l,mapId:u}=e.ids,d=e.initialCenter??{lat:37.5665,lon:126.978},h=Yc(n),m=Yc(t),b=Yc(r),y=Yc(a),k=Yc(o),w=Yc(l),_=i?Yc(i):null;let T=null,O=null,j=null;const C=B=>B.code==="Space"||B.key===" "||B.key==="Spacebar"||B.key==="Space",M=B=>{C(B)&&document.activeElement!==k&&(B.preventDefault(),B.stopPropagation(),k.focus())},P=()=>{b.style.display="flex",T?setTimeout(()=>T?.invalidateSize(),200):setTimeout(()=>{T=u1.map(u,{keyboard:!1}).setView([d.lat,d.lon],11),u1.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(T),T.invalidateSize()},0),b.addEventListener("keydown",M,!0),b.addEventListener("keyup",M,!0),k.focus()},I=()=>{b.style.display="none",k.value="",w.innerHTML="",j&&(window.clearTimeout(j),j=null),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0)},U=B=>{const K=B.dataset.name??"",V=Number(B.dataset.lat??""),Z=Number(B.dataset.lon??"");!Number.isFinite(V)||!Number.isFinite(Z)||!T||(O?O.setLatLng([V,Z]):O=u1.marker([V,Z]).addTo(T),T.flyTo([V,Z],14,{duration:.5}),h.value=K,h.dataset.lat=String(V),h.dataset.lon=String(Z),e.onSelected?.({name:K,lat:V,lon:Z}),w.innerHTML="",I())},W=()=>{j&&window.clearTimeout(j);const B=k.value.trim();if(!B){w.innerHTML="";return}j=window.setTimeout(async()=>{try{const K="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(B),V=await fetch(K,{headers:{Accept:"application/json"}});if(!V.ok)throw new Error(`HTTP ${V.status}`);const Z=await V.json();if(!Array.isArray(Z)||Z.length===0){w.innerHTML='<li style="padding:8px"> </li>';return}const G=Z.slice(0,12).map((J,Q)=>{const oe=J.display_name.split(",").slice(0,3).map(X=>X.trim()).join("  "),te="padding:8px;cursor:pointer;outline:none;",z=Q===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${Fg(oe)}"
                    data-lat="${Fg(J.lat)}"
                    data-lon="${Fg(J.lon)}"
                    data-active="${Q===0?"1":"0"}"
                    style="${te}${z}"
                  >${Fg(oe)}</li>`}).join("");w.innerHTML=G}catch(K){console.error(K),w.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},q=B=>{const K=B.target;K.tagName==="LI"&&U(K)},H=B=>{if(B.key==="Enter"){const K=w.querySelector('li[data-active="1"]')??w.querySelector("li");K&&U(K)}};return m.addEventListener("click",P),y.addEventListener("click",I),_&&_.addEventListener("click",I),k.addEventListener("input",W),k.addEventListener("keydown",H),w.addEventListener("click",q),()=>{m.removeEventListener("click",P),y.removeEventListener("click",I),_&&_.removeEventListener("click",I),k.removeEventListener("input",W),k.removeEventListener("keydown",H),w.removeEventListener("click",q),b.removeEventListener("keydown",M,!0),b.removeEventListener("keyup",M,!0),j&&(window.clearTimeout(j),j=null),T&&(T.remove(),T=null)}}function Td(){return document.getElementById("suggestions")}function Kb(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,r)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${r}`)}),t}function d1(e,t){const n=Kb(e);if(n.length===0)return;const r=n.length;let i=t;i<0&&(i=r-1),i>=r&&(i=0),n.forEach(o=>{o.tabIndex=-1,o.setAttribute("aria-selected","false")});const a=n[i];a.tabIndex=0,a.setAttribute("aria-selected","true"),a.focus()}const PX='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';function RX({open:e,setOpen:t,setBtnText:n,setLocalValue:r,nameRef:i,latRef:a,lonRef:o,triggerBtnRef:l,onSelect:u}){S.useEffect(()=>{if(!e)return;const d=DX({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:j=>{n(""),r(j.name),i.current&&(i.current.value=j.name),a.current&&(a.current.value=String(j.lat)),o.current&&(o.current.value=String(j.lon)),u?.(j),t(!1)}}),h=document.getElementById("inputBirthPlaceBtn");h&&h.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const m=document.getElementById("mapModal");if(!m)return;const b=document.getElementById("searchBox"),y=Td();setTimeout(()=>b?.focus(),0);const k=j=>{if(j.key==="Escape"){j.preventDefault(),t(!1);return}if(j.key!=="Tab")return;const C=Td();if(C&&C.contains(document.activeElement))return;const M=Array.from(m.querySelectorAll(PX)).filter(W=>!W.hasAttribute("disabled")&&W.tabIndex!==-1);if(M.length===0)return;const P=M[0],I=M[M.length-1],U=document.activeElement;j.shiftKey?(U===P||!m.contains(U))&&(j.preventDefault(),I.focus()):(U===I||!m.contains(U))&&(j.preventDefault(),P.focus())};m.addEventListener("keydown",k);const w=j=>{if(j.key!=="ArrowDown")return;const C=Td();!C||Kb(C).length===0||j.preventDefault()};b?.addEventListener("keydown",w);const _=j=>{if(j.target.value.trim()===""){const M=Td();M&&(M.innerHTML="")}};b?.addEventListener("input",_);const T=j=>{const C=Td();if(!C)return;const M=Kb(C);if(M.length===0)return;const P=document.activeElement,I=P?M.indexOf(P):-1;if(I===-1)return;const U=W=>{j.preventDefault(),d1(C,I+W)};switch(j.key){case"Tab":j.preventDefault(),U(j.shiftKey?-1:1);break;case"ArrowDown":j.preventDefault(),U(1);break;case"ArrowUp":j.preventDefault(),U(-1);break;case"Home":j.preventDefault(),d1(C,0);break;case"End":j.preventDefault(),d1(C,M.length-1);break;case"Enter":case" ":j.preventDefault(),P.click();break;case"Backspace":j.preventDefault(),C.innerHTML="",b?.focus();break}j.stopPropagation()};let O=null;return y&&(y.addEventListener("keydown",T),O=new MutationObserver(()=>{const j=Td();!j||Kb(j).length}),O.observe(y,{childList:!0,subtree:!1})),()=>{m.removeEventListener("keydown",k),b?.removeEventListener("keydown",w),b?.removeEventListener("input",_),y&&y.removeEventListener("keydown",T),O?.disconnect(),d?.()}},[e,u,n,r,t,i,a,o]),S.useEffect(()=>{e||setTimeout(()=>l.current?.focus(),0)},[e,l])}function f4({onSelect:e,placeholderText:t=" ",buttonStyle:n,value:r}){const i=NX({placeholderText:t,value:r});return RX({...i,onSelect:e}),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:i.localValue&&i.localValue.trim()!==""?i.localValue:t}),g.jsx("button",{ref:i.triggerBtnRef,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>i.setOpen(!0),"aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":"mapModal",children:i.btnText}),g.jsx("input",{ref:i.nameRef,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:i.latRef,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:i.lonRef,type:"hidden",name:"birthPlace_lon",defaultValue:""}),i.open&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:" "}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>i.setOpen(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":  / seoul / / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"   ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}function mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LX=typeof Symbol=="function"&&Symbol.observable||"@@observable",iD=LX,f1=()=>Math.random().toString(36).substring(7).split("").join("."),IX={INIT:`@@redux/INIT${f1()}`,REPLACE:`@@redux/REPLACE${f1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${f1()}`},vy=IX;function gj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bj(e,t,n){if(typeof e!="function")throw new Error(mr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(mr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(mr(1));return n(bj)(e,t)}let r=e,i=t,a=new Map,o=a,l=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((_,T)=>{o.set(T,_)}))}function h(){if(u)throw new Error(mr(3));return i}function m(_){if(typeof _!="function")throw new Error(mr(4));if(u)throw new Error(mr(5));let T=!0;d();const O=l++;return o.set(O,_),function(){if(T){if(u)throw new Error(mr(6));T=!1,d(),o.delete(O),a=null}}}function b(_){if(!gj(_))throw new Error(mr(7));if(typeof _.type>"u")throw new Error(mr(8));if(typeof _.type!="string")throw new Error(mr(17));if(u)throw new Error(mr(9));try{u=!0,i=r(i,_)}finally{u=!1}return(a=o).forEach(O=>{O()}),_}function y(_){if(typeof _!="function")throw new Error(mr(10));r=_,b({type:vy.REPLACE})}function k(){const _=m;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(mr(11));function O(){const C=T;C.next&&C.next(h())}return O(),{unsubscribe:_(O)}},[iD](){return this}}}return b({type:vy.INIT}),{dispatch:b,subscribe:m,getState:h,replaceReducer:y,[iD]:k}}function $X(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:vy.INIT})>"u")throw new Error(mr(12));if(typeof n(void 0,{type:vy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(mr(13))})}function h4(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{$X(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const m=r[h],b=n[m],y=o[m],k=b(y,l);if(typeof k>"u")throw l&&l.type,new Error(mr(14));d[m]=k,u=u||k!==y}return u=u||r.length!==Object.keys(o).length,u?d:o}}function aD(e,t){return function(...n){return t(e.apply(this,n))}}function oD(e,t){if(typeof e=="function")return aD(e,t);if(typeof e!="object"||e===null)throw new Error(mr(16));const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=aD(i,t))}return n}function Hm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function m4(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(mr(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},l=e.map(u=>u(o));return a=Hm(...l)(i.dispatch),{...i,dispatch:a}}}function p4(e){return gj(e)&&"type"in e&&typeof e.type=="string"}var h1={exports:{}},m1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function BX(){if(sD)return m1;sD=1;var e=vf();function t(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;return m1.useSyncExternalStoreWithSelector=function(u,d,h,m,b){var y=i(null);if(y.current===null){var k={hasValue:!1,value:null};y.current=k}else k=y.current;y=o(function(){function _(M){if(!T){if(T=!0,O=M,M=m(M),b!==void 0&&k.hasValue){var P=k.value;if(b(P,M))return j=P}return j=M}if(P=j,n(O,M))return P;var I=m(M);return b!==void 0&&b(P,I)?(O=M,P):(O=M,j=I)}var T=!1,O,j,C=h===void 0?null:h;return[function(){return _(d())},C===null?void 0:function(){return _(C())}]},[d,h,m,b]);var w=r(u,y[0],y[1]);return a(function(){k.hasValue=!0,k.value=w},[w]),l(w),w},m1}var lD;function zX(){return lD||(lD=1,h1.exports=BX()),h1.exports}zX();var UX=S.version.startsWith("19"),FX=Symbol.for(UX?"react.transitional.element":"react.element"),HX=Symbol.for("react.portal"),GX=Symbol.for("react.fragment"),YX=Symbol.for("react.strict_mode"),qX=Symbol.for("react.profiler"),KX=Symbol.for("react.consumer"),WX=Symbol.for("react.context"),g4=Symbol.for("react.forward_ref"),VX=Symbol.for("react.suspense"),ZX=Symbol.for("react.suspense_list"),yj=Symbol.for("react.memo"),XX=Symbol.for("react.lazy"),JX=g4,QX=yj;function eJ(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case FX:switch(e=e.type,e){case GX:case qX:case YX:case VX:case ZX:return e;default:switch(e=e&&e.$$typeof,e){case WX:case g4:case XX:case yj:return e;case KX:return e;default:return t}}case HX:return t}}}function tJ(e){return eJ(e)===yj}function nJ(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let l=!1,u,d,h,m,b;function y(O,j){return u=O,d=j,h=e(u,d),m=t(r,d),b=n(h,m,d),l=!0,b}function k(){return h=e(u,d),t.dependsOnOwnProps&&(m=t(r,d)),b=n(h,m,d),b}function w(){return e.dependsOnOwnProps&&(h=e(u,d)),t.dependsOnOwnProps&&(m=t(r,d)),b=n(h,m,d),b}function _(){const O=e(u,d),j=!o(O,h);return h=O,j&&(b=n(h,m,d)),b}function T(O,j){const C=!a(j,d),M=!i(O,u,j,d);return u=O,d=j,C&&M?k():C?w():M?_():b}return function(j,C){return l?T(j,C):y(j,C)}}function rJ(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const a=t(e,i),o=n(e,i),l=r(e,i);return nJ(a,o,l,e,i)}function iJ(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...a)=>t(i(...a)))}return n}function l2(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function cD(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function b4(e,t){return function(r,{displayName:i}){const a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=e,a.dependsOnOwnProps=cD(e);let d=a(l,u);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=cD(d),d=a(l,u)),d},a}}function vj(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function aJ(e){return e&&typeof e=="object"?l2(t=>iJ(e,t)):e?typeof e=="function"?b4(e):vj(e,"mapDispatchToProps"):l2(t=>({dispatch:t}))}function oJ(e){return e?typeof e=="function"?b4(e):vj(e,"mapStateToProps"):l2(()=>({}))}function sJ(e,t,n){return{...n,...e,...t}}function lJ(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let a=!1,o;return function(u,d,h){const m=e(u,d,h);return a?i(m,o)||(o=m):(a=!0,o=m),o}}}function cJ(e){return e?typeof e=="function"?lJ(e):vj(e,"mergeProps"):()=>sJ}function uJ(e){e()}function dJ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){uJ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var uD={notify(){},get:()=>[]};function y4(e,t){let n,r=uD,i=0,a=!1;function o(w){h();const _=r.subscribe(w);let T=!1;return()=>{T||(T=!0,_(),m())}}function l(){r.notify()}function u(){k.onStateChange&&k.onStateChange()}function d(){return a}function h(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=dJ())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=uD)}function b(){a||(a=!0,h())}function y(){a&&(a=!1,m())}const k={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:b,tryUnsubscribe:y,getListeners:()=>r};return k}var fJ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hJ=fJ(),mJ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pJ=mJ(),gJ=()=>hJ||pJ?S.useLayoutEffect:S.useEffect,xy=gJ();function dD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Wb(e,t){if(dD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!dD(e[n[i]],t[n[i]]))return!1;return!0}var bJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},yJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},v4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xJ={[JX]:vJ,[QX]:v4};function fD(e){return tJ(e)?v4:xJ[e.$$typeof]||bJ}var wJ=Object.defineProperty,_J=Object.getOwnPropertyNames,hD=Object.getOwnPropertySymbols,SJ=Object.getOwnPropertyDescriptor,kJ=Object.getPrototypeOf,mD=Object.prototype;function c2(e,t){if(typeof t!="string"){if(mD){const a=kJ(t);a&&a!==mD&&c2(e,a)}let n=_J(t);hD&&(n=n.concat(hD(t)));const r=fD(e),i=fD(t);for(let a=0;a<n.length;++a){const o=n[a];if(!yJ[o]&&!(i&&i[o])&&!(r&&r[o])){const l=SJ(t,o);try{wJ(e,o,l)}catch{}}}}return e}var EJ=Symbol.for("react-redux-context"),jJ=typeof globalThis<"u"?globalThis:{};function TJ(){if(!S.createContext)return{};const e=jJ[EJ]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var x4=TJ(),AJ=[null,null];function NJ(e,t,n){xy(()=>e(...t),n)}function OJ(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function CJ(e,t,n,r,i,a,o,l,u,d,h){if(!e)return()=>{};let m=!1,b=null;const y=()=>{if(m||!l.current)return;const w=t.getState();let _,T;try{_=r(w,i.current)}catch(O){T=O,b=O}T||(b=null),_===a.current?o.current||d():(a.current=_,u.current=_,o.current=!0,h())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,b)throw b}}function MJ(e,t){return e===t}function DJ(e,t,n,{pure:r,areStatesEqual:i=MJ,areOwnPropsEqual:a=Wb,areStatePropsEqual:o=Wb,areMergedPropsEqual:l=Wb,forwardRef:u=!1,context:d=x4}={}){const h=d,m=oJ(e),b=aJ(t),y=cJ(n),k=!!e;return _=>{const T=_.displayName||_.name||"Component",O=`Connect(${T})`,j={shouldHandleStateChanges:k,displayName:O,wrappedComponentName:T,WrappedComponent:_,initMapStateToProps:m,initMapDispatchToProps:b,initMergeProps:y,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:l};function C(I){const[U,W,q]=S.useMemo(()=>{const{reactReduxForwardedRef:he,...Ue}=I;return[I.context,he,Ue]},[I]),H=S.useMemo(()=>{let he=h;return U?.Consumer,he},[U,h]),B=S.useContext(H),K=!!I.store&&!!I.store.getState&&!!I.store.dispatch,V=!!B&&!!B.store,Z=K?I.store:B.store,G=V?B.getServerState:Z.getState,J=S.useMemo(()=>rJ(Z.dispatch,j),[Z]),[Q,oe]=S.useMemo(()=>{if(!k)return AJ;const he=y4(Z,K?void 0:B.subscription),Ue=he.notifyNestedSubs.bind(he);return[he,Ue]},[Z,K,B]),te=S.useMemo(()=>K?B:{...B,subscription:Q},[K,B,Q]),z=S.useRef(void 0),X=S.useRef(q),re=S.useRef(void 0),ie=S.useRef(!1),fe=S.useRef(!1),de=S.useRef(void 0);xy(()=>(fe.current=!0,()=>{fe.current=!1}),[]);const pe=S.useMemo(()=>()=>re.current&&q===X.current?re.current:J(Z.getState(),q),[Z,q]),Ne=S.useMemo(()=>Ue=>Q?CJ(k,Z,Q,J,X,z,ie,fe,re,oe,Ue):()=>{},[Q]);NJ(OJ,[X,z,ie,q,re,oe]);let se;try{se=S.useSyncExternalStore(Ne,pe,G?()=>J(G(),q):pe)}catch(he){throw de.current&&(he.message+=`
The error may be correlated with this previous error:
${de.current.stack}

`),he}xy(()=>{de.current=void 0,re.current=void 0,z.current=se});const Se=S.useMemo(()=>S.createElement(_,{...se,ref:W}),[W,_,se]);return S.useMemo(()=>k?S.createElement(H.Provider,{value:te},Se):Se,[H,Se,te])}const P=S.memo(C);if(P.WrappedComponent=_,P.displayName=C.displayName=O,u){const U=S.forwardRef(function(q,H){return S.createElement(P,{...q,reactReduxForwardedRef:H})});return U.displayName=O,U.WrappedComponent=_,c2(U,_)}return c2(P,_)}}var w4=DJ;function PJ(e){const{children:t,context:n,serverState:r,store:i}=e,a=S.useMemo(()=>{const u=y4(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=S.useMemo(()=>i.getState(),[i]);xy(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=n||x4;return S.createElement(l.Provider,{value:a},t)}var _4=PJ,RJ="Invariant failed";function LJ(e,t){throw new Error(RJ)}var Xa=function(t){var n=t.top,r=t.right,i=t.bottom,a=t.left,o=r-a,l=i-n,u={top:n,right:r,bottom:i,left:a,width:o,height:l,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return u},xj=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},pD=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},IJ=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},p1={top:0,right:0,bottom:0,left:0},wj=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?p1:r,a=t.border,o=a===void 0?p1:a,l=t.padding,u=l===void 0?p1:l,d=Xa(xj(n,i)),h=Xa(pD(n,o)),m=Xa(pD(h,u));return{marginBox:d,borderBox:Xa(n),paddingBox:h,contentBox:m,margin:i,border:o,padding:u}},la=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&LJ(),i},$J=function(){return{x:window.pageXOffset,y:window.pageYOffset}},wy=function(t,n){var r=t.borderBox,i=t.border,a=t.margin,o=t.padding,l=IJ(r,n);return wj({borderBox:l,border:i,margin:a,padding:o})},_y=function(t,n){return n===void 0&&(n=$J()),wy(t,n)},S4=function(t,n){var r={top:la(n.marginTop),right:la(n.marginRight),bottom:la(n.marginBottom),left:la(n.marginLeft)},i={top:la(n.paddingTop),right:la(n.paddingRight),bottom:la(n.paddingBottom),left:la(n.paddingLeft)},a={top:la(n.borderTopWidth),right:la(n.borderRightWidth),bottom:la(n.borderBottomWidth),left:la(n.borderLeftWidth)};return wj({borderBox:t,margin:r,padding:i,border:a})},k4=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return S4(n,r)},Gm=function(t){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sy.apply(null,arguments)}function E4(e,t){}E4.bind(null,"warn");E4.bind(null,"error");function Fl(){}function BJ(e,t){return{...e,...t}}function ga(e,t,n){const r=t.map(i=>{const a=BJ(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(a=>{a()})}}const zJ="Invariant failed";class ky extends Error{}ky.prototype.toString=function(){return this.message};function Re(e,t){throw new ky(zJ)}class UJ extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Fl,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof ky&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ga(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ky){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const FJ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ey=e=>e+1,HJ=e=>`
  You have lifted an item in position ${Ey(e.source.index)}
`,j4=(e,t)=>{const n=e.droppableId===t.droppableId,r=Ey(e.index),i=Ey(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},T4=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,GJ=e=>{const t=e.destination;if(t)return j4(e.source,t);const n=e.combine;return n?T4(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},gD=e=>`
  The item has returned to its starting position
  of ${Ey(e.index)}
`,YJ=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${gD(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${j4(e.source,t)}
    `:n?`
      You have dropped the item.
      ${T4(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${gD(e.source)}
  `},Vb={dragHandleUsageInstructions:FJ,onDragStart:HJ,onDragUpdate:GJ,onDragEnd:YJ};function qJ(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function A4(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!qJ(e[n],t[n]))return!1;return!0}function Nt(e,t){const n=S.useState(()=>({inputs:t,result:e()}))[0],r=S.useRef(!0),i=S.useRef(n),o=r.current||!!(t&&i.current.inputs&&A4(t,i.current.inputs))?i.current:{inputs:t,result:e()};return S.useEffect(()=>{r.current=!1,i.current=o},[o]),o.result}function Qe(e,t){return Nt(()=>e,t)}const yr={x:0,y:0},Nr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Fi=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Hl=(e,t)=>e.x===t.x&&e.y===t.y,Ef=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Su=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Ym=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),bD=(e,t)=>Math.min(...t.map(n=>Ym(e,n))),N4=e=>t=>({x:e(t.x),y:e(t.y)});var KJ=(e,t)=>{const n=Xa({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Tp=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),yD=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],WJ={top:0,right:0,bottom:0,left:0},VJ=(e,t)=>t?Tp(e,t.scroll.diff.displacement):e,ZJ=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,XJ=(e,t)=>t&&t.shouldClipSubject?KJ(t.pageMarginBox,e):Xa(e);var of=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=VJ(e.marginBox,r),a=ZJ(i,n,t),o=XJ(a,r);return{page:e,withPlaceholder:t,active:o}},_j=(e,t)=>{e.frame||Re();const n=e.frame,r=Fi(t,n.scroll.initial),i=Ef(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=of({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function br(e,t=A4){let n=null;function r(...i){if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;const a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const O4=br(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),C4=br(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Zv=br(e=>Object.values(e)),JJ=br(e=>Object.values(e));var jf=br((e,t)=>JJ(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Sj(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Xv(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Jv=br((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),QJ=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!Sj(i))return null;function o(y){const k={type:"COMBINE",combine:{draggableId:y,droppableId:n.descriptor.id}};return{...i,at:k}}const l=i.displaced.all,u=l.length?l[0]:null;if(e)return u?o(u):null;const d=Jv(t,r);if(!u){if(!d.length)return null;const y=d[d.length-1];return o(y.descriptor.id)}const h=d.findIndex(y=>y.descriptor.id===u);h===-1&&Re();const m=h-1;if(m<0)return null;const b=d[m];return o(b.descriptor.id)},Tf=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const M4={point:yr,value:0},qm={invisible:{},visible:{},all:[]},eQ={displaced:qm,displacedBy:M4,at:null};var wa=(e,t)=>n=>e<=n&&n<=t,D4=e=>{const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;const u=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return u&&d?!0:u&&o||d&&a}},tQ=e=>{const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const kj={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},P4={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var nQ=e=>t=>{const n=wa(t.top,t.bottom),r=wa(t.left,t.right);return i=>e===kj?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const rQ=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:yr;return Tp(e,n)},iQ=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,aQ=(e,t,n)=>n(t)(e),Ej=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const a=r?rQ(e,t):e;return iQ(a,t,i)&&aQ(a,n,i)},oQ=e=>Ej({...e,isVisibleThroughFrameFn:D4}),R4=e=>Ej({...e,isVisibleThroughFrameFn:tQ}),sQ=e=>Ej({...e,isVisibleThroughFrameFn:nQ(e.destination.axis)}),lQ=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function cQ(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Xa(xj(n,r))}function Km({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(l,u){const d=cQ(u,n),h=u.descriptor.id;if(l.all.push(h),!oQ({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[u.descriptor.id]=!0,l;const b=lQ(h,a,i),y={draggableId:h,shouldAnimate:b};return l.visible[h]=y,l},{all:[],visible:{},invisible:{}})}function uQ(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function vD({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=uQ(e,{inHomeList:t});return{displaced:qm,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function jy({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:l}){const u=Tf(e,n);if(o==null)return vD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const d=t.find(k=>k.descriptor.index===o);if(!d)return vD({insideDestination:t,inHomeList:u,displacedBy:i,destination:n});const h=Jv(e,t),m=t.indexOf(d),b=h.slice(m);return{displaced:Km({afterDragging:b,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Kl(e,t){return!!t.effected[e]}var dQ=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,l=n[a].descriptor.index;return Kl(a,i)?e?l:l-1:e?l+1:l},fQ=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,u=t?l:l+1;return a<o||a>u?null:a},hQ=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:l,afterCritical:u})=>{const d=o.at;if(d||Re(),d.type==="REORDER"){const m=fQ({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:a});return m==null?null:jy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:m})}const h=dQ({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:d.combine,afterCritical:u});return h==null?null:jy({draggable:n,insideDestination:a,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},mQ=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return Kl(n,t)?i?yr:Ef(r.point):i?r.point:yr},pQ=({afterCritical:e,impact:t,draggables:n})=>{const r=Xv(t);r||Re();const i=r.draggableId,a=n[i].page.borderBox.center,o=mQ({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Nr(a,o)};const L4=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,gQ=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,jj=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,xD=({axis:e,moveRelativeTo:t,isMoving:n})=>Su(e.line,t.marginBox[e.end]+L4(e,n),jj(e,t.marginBox,n)),wD=({axis:e,moveRelativeTo:t,isMoving:n})=>Su(e.line,t.marginBox[e.start]-gQ(e,n),jj(e,t.marginBox,n)),bQ=({axis:e,moveInto:t,isMoving:n})=>Su(e.line,t.contentBox[e.start]+L4(e,n),jj(e,t.contentBox,n));var yQ=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const a=jf(r.descriptor.id,n),o=t.page,l=r.axis;if(!a.length)return bQ({axis:l,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:d}=e,h=u.all[0];if(h){const b=n[h];if(Kl(h,i))return wD({axis:l,moveRelativeTo:b.page,isMoving:o});const y=wy(b.page,d.point);return wD({axis:l,moveRelativeTo:y,isMoving:o})}const m=a[a.length-1];if(m.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Kl(m.descriptor.id,i)){const b=wy(m.page,Ef(i.displacedBy.point));return xD({axis:l,moveRelativeTo:b,isMoving:o})}return xD({axis:l,moveRelativeTo:m.page,isMoving:o})},u2=(e,t)=>{const n=e.frame;return n?Nr(t,n.scroll.diff.displacement):t};const vQ=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type==="REORDER"?yQ({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):pQ({impact:e,draggables:r,afterCritical:i})};var Qv=e=>{const t=vQ(e),n=e.droppable;return n?u2(n,t):t},I4=(e,t)=>{const n=Fi(t,e.scroll.initial),r=Ef(n);return{frame:Xa({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function _D(e,t){return e.map(n=>t[n])}function xQ(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var wQ=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const a=I4(t,Nr(t.scroll.current,i)),o=n.frame?_j(n,Nr(n.frame.scroll.current,i)):n,l=e.displaced,u=Km({afterDragging:_D(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=Km({afterDragging:_D(l.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),h={},m={},b=[l,u,d];return l.all.forEach(k=>{const w=xQ(k,b);if(w){m[k]=w;return}h[k]=!0}),{...e,displaced:{all:l.all,invisible:h,visible:m}}},_Q=(e,t)=>Nr(e.scroll.diff.displacement,t),Tj=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=_Q(n,e),i=Fi(r,t.page.borderBox.center);return Nr(t.client.borderBox.center,i)},$4=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const o=Fi(n,e.page.borderBox.center),u={target:Tp(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?sQ(u):R4(u)},SQ=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:u})=>{if(!n.isEnabled)return null;const d=jf(n.descriptor.id,r),h=Tf(t,n),m=QJ({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:i})||hQ({isMovingForward:e,isInHomeList:h,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:i,viewport:a,afterCritical:u});if(!m)return null;const b=Qv({impact:m,draggable:t,droppable:n,draggables:r,afterCritical:u});if($4({draggable:t,destination:n,newPageBorderBoxCenter:b,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Tj({pageBorderBoxCenter:b,draggable:t,viewport:a}),impact:m,scrollJumpRequest:null};const k=Fi(b,o),w=wQ({impact:m,viewport:a,destination:n,draggables:r,maxScrollChange:k});return{clientSelection:l,impact:w,scrollJumpRequest:k}};const qr=e=>{const t=e.subject.active;return t||Re(),t};var kQ=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const a=n.subject.active;if(!a)return null;const o=n.axis,l=wa(a[o.start],a[o.end]),u=Zv(r).filter(h=>h!==n).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>D4(i.frame)(qr(h))).filter(h=>{const m=qr(h);return e?a[o.crossAxisEnd]<m[o.crossAxisEnd]:m[o.crossAxisStart]<a[o.crossAxisStart]}).filter(h=>{const m=qr(h),b=wa(m[o.start],m[o.end]);return l(m[o.start])||l(m[o.end])||b(a[o.start])||b(a[o.end])}).sort((h,m)=>{const b=qr(h)[o.crossAxisStart],y=qr(m)[o.crossAxisStart];return e?b-y:y-b}).filter((h,m,b)=>qr(h)[o.crossAxisStart]===qr(b[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const d=u.filter(h=>wa(qr(h)[o.start],qr(h)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((h,m)=>qr(h)[o.start]-qr(m)[o.start])[0]:u.sort((h,m)=>{const b=bD(t,yD(qr(h))),y=bD(t,yD(qr(m)));return b!==y?b-y:qr(h)[o.start]-qr(m)[o.start]})[0]};const SD=(e,t)=>{const n=e.page.borderBox.center;return Kl(e.descriptor.id,t)?Fi(n,t.displacedBy.point):n},EQ=(e,t)=>{const n=e.page.borderBox;return Kl(e.descriptor.id,t)?Tp(n,Ef(t.displacedBy.point)):n};var jQ=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>R4({target:EQ(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const u=Ym(e,u2(n,SD(o,i))),d=Ym(e,u2(n,SD(l,i)));return u<d?-1:d<u?1:o.descriptor.index-l.descriptor.index})[0]||null,Ap=br(function(t,n){const r=n[t.line];return{value:r,point:Su(t.line,r)}});const TQ=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Su(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],u=jf(e.descriptor.id,n).reduce((d,h)=>d+h.client.marginBox[r.size],0)+t[r.line]-i;return u<=0?null:Su(r.line,u)},B4=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),z4=(e,t,n)=>{const r=e.frame;Tf(t,e)&&Re(),e.subject.withPlaceholder&&Re();const i=Ap(e.axis,t.displaceBy).point,a=TQ(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const h=of({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:h}}const l=a?Nr(r.scroll.max,a):r.scroll.max,u=B4(r,l),d=of({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:u});return{...e,subject:d,frame:u}},AQ=e=>{const t=e.subject.withPlaceholder;t||Re();const n=e.frame;if(!n){const o=of({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||Re();const i=B4(n,r),a=of({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var NQ=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const m={displaced:qm,displacedBy:M4,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},b=Qv({impact:m,draggable:r,droppable:a,draggables:i,afterCritical:l}),y=Tf(r,a)?a:z4(a,r,i);return $4({draggable:r,destination:y,newPageBorderBoxCenter:b,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const u=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],d=(()=>{const m=t.descriptor.index;return t.descriptor.id===r.descriptor.id||u?m:m+1})(),h=Ap(a.axis,r.displaceBy);return jy({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:h,last:qm,index:d})},OQ=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:l})=>{const u=kQ({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!u)return null;const d=jf(u.descriptor.id,i),h=jQ({pageBorderBoxCenter:t,viewport:o,destination:u,insideDestination:d,afterCritical:l}),m=NQ({previousPageBorderBoxCenter:t,destination:u,draggable:n,draggables:i,moveRelativeTo:h,insideDestination:d,viewport:o,afterCritical:l});if(!m)return null;const b=Qv({impact:m,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:Tj({pageBorderBoxCenter:b,draggable:n,viewport:o}),impact:m,scrollJumpRequest:null}},Gi=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const CQ=(e,t)=>{const n=Gi(e);return n?t[n]:null};var MQ=({state:e,type:t})=>{const n=CQ(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const u=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,{draggables:m,droppables:b}=e.dimensions;return l?SQ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,destination:a,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):OQ({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:d,isOver:a,draggables:m,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function ru(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function U4(e){const t=wa(e.top,e.bottom),n=wa(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function DQ(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function PQ({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(a=>{const o=a.axis,l=Su(a.axis.line,e.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Ym(r,l)}}).sort((a,o)=>o.distance-a.distance);return i[0]?i[0].id:null}function RQ({pageBorderBox:e,draggable:t,droppables:n}){const r=Zv(n).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!DQ(e,a))return!1;if(U4(a)(e.center))return!0;const o=i.axis,l=a.center[o.crossAxisLine],u=e[o.crossAxisStart],d=e[o.crossAxisEnd],h=wa(a[o.crossAxisStart],a[o.crossAxisEnd]),m=h(u),b=h(d);return!m&&!b?!0:m?u<l:d>l});return r.length?r.length===1?r[0].descriptor.id:PQ({pageBorderBox:e,draggable:t,candidates:r}):null}const F4=(e,t)=>Xa(Tp(e,t));var LQ=(e,t)=>{const n=e.frame;return n?F4(t,n.scroll.diff.value):t};function H4({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function IQ({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var $Q=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{const l=n.axis,u=Ap(n.axis,t.displaceBy),d=u.value,h=e[l.start],m=e[l.end],y=Jv(t,r).find(w=>{const _=w.descriptor.id,T=w.page.borderBox.center[l.line],O=Kl(_,o),j=H4({displaced:i,id:_});return O?j?m<=T:h<T-d:j?m<=T+d:h<T})||null,k=IQ({draggable:t,closest:y,inHomeList:Tf(t,n)});return jy({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:u,index:k})};const BQ=4;var zQ=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Ap(r.axis,e.displaceBy),u=l.value,d=t[o.start],h=t[o.end],b=Jv(e,i).find(k=>{const w=k.descriptor.id,_=k.page.borderBox,O=_[o.size]/BQ,j=Kl(w,a),C=H4({displaced:n.displaced,id:w});return j?C?h>_[o.start]+O&&h<_[o.end]-O:d>_[o.start]-u+O&&d<_[o.end]-u-O:C?h>_[o.start]+u+O&&h<_[o.end]+u-O:d>_[o.start]+O&&d<_[o.end]-O});return b?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:b.descriptor.id,droppableId:r.descriptor.id}}}:null},G4=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{const l=F4(t.page.borderBox,e),u=RQ({pageBorderBox:l,draggable:t,droppables:r});if(!u)return eQ;const d=r[u],h=jf(d.descriptor.id,n),m=LQ(d,l);return zQ({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:i,destination:d,insideDestination:h,afterCritical:o})||$Q({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:d,insideDestination:h,last:i.displaced,viewport:a,afterCritical:o})},Aj=(e,t)=>({...e,[t.descriptor.id]:t});const UQ=({previousImpact:e,impact:t,droppables:n})=>{const r=Gi(e),i=Gi(t);if(!r||r===i)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const o=AQ(a);return Aj(n,o)};var FQ=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const a=UQ({previousImpact:r,impact:i,droppables:n}),o=Gi(i);if(!o)return a;const l=n[o];if(Tf(e,l)||l.subject.withPlaceholder)return a;const u=z4(l,e,t);return Aj(a,u)},Mm=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{const o=r||e.viewport,l=n||e.dimensions,u=t||e.current.client.selection,d=Fi(u,e.initial.client.selection),h={offset:d,selection:u,borderBoxCenter:Nr(e.initial.client.borderBoxCenter,d)},m={selection:Nr(h.selection,o.scroll.current),borderBoxCenter:Nr(h.borderBoxCenter,o.scroll.current),offset:Nr(h.offset,o.scroll.diff.value)},b={client:h,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:b};const y=l.draggables[e.critical.draggable.id],k=i||G4({pageOffset:m.offset,draggable:y,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),w=FQ({draggable:y,impact:k,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:b,dimensions:{draggables:l.draggables,droppables:w},impact:k,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function HQ(e,t){return e.map(n=>t[n])}var Y4=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const a=e.displaced,o=HQ(a.all,n),l=Km({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:l}},q4=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{const o=Qv({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Tj({pageBorderBoxCenter:o,draggable:t,viewport:i})},K4=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Re();const r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:l}=a,u=o[e.critical.draggable.id],d=Gi(r);d||Re();const h=l[d],m=Y4({impact:r,viewport:i,destination:h,draggables:o}),b=q4({impact:m,draggable:u,droppable:h,draggables:o,viewport:i,afterCritical:e.afterCritical});return Mm({impact:m,clientSelection:b,state:e,dimensions:a,viewport:i})},GQ=e=>({index:e.index,droppableId:e.droppableId}),W4=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=Ap(t.axis,e.displaceBy),a=jf(t.descriptor.id,n),o=a.indexOf(e);o===-1&&Re();const l=a.slice(o+1),u=l.reduce((b,y)=>(b[y.descriptor.id]=!0,b),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:Km({afterDragging:l,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:GQ(e.descriptor)}},afterCritical:d}},YQ=(e,t)=>({draggables:e.draggables,droppables:Aj(e.droppables,t)}),qQ=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=wy(e.client,t),i=_y(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},KQ=e=>{const t=e.frame;return t||Re(),t},WQ=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,o=t[a],u=KQ(o).scroll.diff.value,d=Nr(r,u);return qQ({draggable:i,offset:d,initialWindowScroll:n.scroll.initial})})},VQ=({state:e,published:t})=>{const n=t.modified.map(T=>{const O=e.dimensions.droppables[T.droppableId];return _j(O,T.scroll)}),r={...e.dimensions.droppables,...O4(n)},i=C4(WQ({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(T=>{delete a[T]});const o={droppables:r,draggables:a},l=Gi(e.impact),u=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],h=o.droppables[e.critical.droppable.id],{impact:m,afterCritical:b}=W4({draggable:d,home:h,draggables:a,viewport:e.viewport}),y=u&&u.isCombineEnabled?e.impact:m,k=G4({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:e.viewport,afterCritical:b}),w={...e,phase:"DRAGGING",impact:k,onLiftImpact:m,dimensions:o,afterCritical:b,forceShouldAnimate:!1};return e.phase==="COLLECTING"?w:{...w,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const d2=e=>e.movementMode==="SNAP",g1=(e,t,n)=>{const r=YQ(e.dimensions,t);return!d2(e)||n?Mm({state:e,dimensions:r}):K4({state:e,dimensions:r})};function b1(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const kD={phase:"IDLE",completed:null,shouldFlush:!1};var ZQ=(e=kD,t)=>{if(t.type==="FLUSH")return{...kD,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Re();const{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,l=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:yr},h={client:d,page:{selection:Nr(d.selection,i.scroll.initial),borderBoxCenter:Nr(d.selection,i.scroll.initial),offset:Nr(d.selection,i.scroll.diff.value)}},m=Zv(a.droppables).every(w=>!w.isFixedOnPage),{impact:b,afterCritical:y}=W4({draggable:l,home:u,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:h,current:h,isWindowScrollAllowed:m,impact:b,afterCritical:y,onLiftImpact:b,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Re(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Re(),VQ({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ru(e)||Re();const{client:n}=t.payload;return Hl(n,e.current.client.selection)?e:Mm({state:e,clientSelection:n,impact:d2(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return b1(e);ru(e)||Re();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const a=_j(i,r);return g1(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ru(e)||Re();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isEnabled===r&&Re();const a={...i,isEnabled:r};return g1(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ru(e)||Re();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||Re(),i.isCombineEnabled===r&&Re();const a={...i,isCombineEnabled:r};return g1(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ru(e)||Re(),e.isWindowScrollAllowed||Re();const n=t.payload.newScroll;if(Hl(e.viewport.scroll.current,n))return b1(e);const r=I4(e.viewport,n);return d2(e)?K4({state:e,viewport:r}):Mm({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ru(e))return e;const n=t.payload.maxScroll;if(Hl(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Re();const n=MQ({state:e,type:t.type});return n?Mm({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Re(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Re(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ht(e,t){return e instanceof Object&&"type"in e&&e.type===t}const XQ=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),JQ=e=>({type:"LIFT",payload:e}),QQ=e=>({type:"INITIAL_PUBLISH",payload:e}),eee=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),tee=()=>({type:"COLLECTION_STARTING",payload:null}),nee=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),ree=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),iee=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),V4=e=>({type:"MOVE",payload:e}),aee=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),oee=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),see=()=>({type:"MOVE_UP",payload:null}),lee=()=>({type:"MOVE_DOWN",payload:null}),cee=()=>({type:"MOVE_RIGHT",payload:null}),uee=()=>({type:"MOVE_LEFT",payload:null}),Nj=()=>({type:"FLUSH",payload:null}),dee=e=>({type:"DROP_ANIMATE",payload:e}),Oj=e=>({type:"DROP_COMPLETE",payload:e}),Z4=e=>({type:"DROP",payload:e}),fee=e=>({type:"DROP_PENDING",payload:e}),X4=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var hee=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Ht(i,"LIFT")){r(i);return}const{id:a,clientSelection:o,movementMode:l}=i.payload,u=t();u.phase==="DROP_ANIMATING"&&n(Oj({completed:u.completed})),t().phase!=="IDLE"&&Re(),n(Nj()),n(XQ({draggableId:a,movementMode:l}));const h={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:m,dimensions:b,viewport:y}=e.startPublishing(h);n(QQ({critical:m,dimensions:b,clientSelection:o,movementMode:l,viewport:y}))},mee=e=>()=>t=>n=>{Ht(n,"INITIAL_PUBLISH")&&e.dragging(),Ht(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ht(n,"FLUSH")||Ht(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Cj={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wm={opacity:{drop:0,combining:.7},scale:{drop:.75}},J4={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},qc=`${J4.outOfTheWay}s ${Cj.outOfTheWay}`,Dm={fluid:`opacity ${qc}`,snap:`transform ${qc}, opacity ${qc}`,drop:e=>{const t=`${e}s ${Cj.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${qc}`,placeholder:`height ${qc}, width ${qc}, margin ${qc}`},ED=e=>Hl(e,yr)?void 0:`translate(${e.x}px, ${e.y}px)`,f2={moveTo:ED,drop:(e,t)=>{const n=ED(e);if(n)return t?`${n} scale(${Wm.scale.drop})`:n}},{minDropTime:h2,maxDropTime:Q4}=J4,pee=Q4-h2,jD=1500,gee=.6;var bee=({current:e,destination:t,reason:n})=>{const r=Ym(e,t);if(r<=0)return h2;if(r>=jD)return Q4;const i=r/jD,a=h2+pee*i,o=n==="CANCEL"?a*gee:a;return Number(o.toFixed(2))},yee=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:a,droppables:o}=n,l=Gi(e),u=l?o[l]:null,d=o[t.descriptor.droppableId],h=q4({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:u||d,viewport:r});return Fi(h,t.client.borderBox.center)},vee=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:Y4({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:qm},didDropInsideDroppable:!0};const xee=({getState:e,dispatch:t})=>n=>r=>{if(!Ht(r,"DROP")){n(r);return}const i=e(),a=r.payload.reason;if(i.phase==="COLLECTING"){t(fee({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&Re(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||Re();const l=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:m}=vee({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),b=m?Sj(h):null,y=m?Xv(h):null,k={index:l.draggable.index,droppableId:l.droppable.id},w={draggableId:d.descriptor.id,type:d.descriptor.type,source:k,reason:a,mode:i.movementMode,destination:b,combine:y},_=yee({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),T={critical:i.critical,afterCritical:i.afterCritical,result:w,impact:h};if(!(!Hl(i.current.client.offset,_)||!!w.combine)){t(Oj({completed:T}));return}const j=bee({current:i.current.client.offset,destination:_,reason:a});t(dee({newHomeClientOffset:_,dropDuration:j,completed:T}))};var e6=()=>({x:window.pageXOffset,y:window.pageYOffset});function wee(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function _ee({onWindowScroll:e}){function t(){e(e6())}const n=Gm(t),r=wee(n);let i=Fl;function a(){return i!==Fl}function o(){a()&&Re(),i=ga(window,[r])}function l(){a()||Re(),n.cancel(),i(),i=Fl}return{start:o,stop:l,isActive:a}}const See=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH"),kee=e=>{const t=_ee({onWindowScroll:n=>{e.dispatch(aee({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ht(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&See(r)&&t.stop(),n(r)}};var Eee=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=()=>t,i},jee=()=>{const e=[],t=i=>{const a=e.findIndex(l=>l.timerId===i);a===-1&&Re();const[o]=e.splice(a,1);o.callback()};return{add:i=>{const a=setTimeout(()=>t(a)),o={timerId:a,callback:i};e.push(o)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const Tee=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Aee=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Nee=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Xh=(e,t)=>{t()},Hg=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function y1(e,t,n,r){if(!e){n(r(t));return}const i=Eee(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var Oee=(e,t)=>{const n=jee();let r=null;const i=(m,b)=>{r&&Re(),Xh("onBeforeCapture",()=>{const y=e().onBeforeCapture;y&&y({draggableId:m,mode:b})})},a=(m,b)=>{r&&Re(),Xh("onBeforeDragStart",()=>{const y=e().onBeforeDragStart;y&&y(Hg(m,b))})},o=(m,b)=>{r&&Re();const y=Hg(m,b);r={mode:b,lastCritical:m,lastLocation:y.source,lastCombine:null},n.add(()=>{Xh("onDragStart",()=>y1(e().onDragStart,y,t,Vb.onDragStart))})},l=(m,b)=>{const y=Sj(b),k=Xv(b);r||Re();const w=!Nee(m,r.lastCritical);w&&(r.lastCritical=m);const _=!Tee(r.lastLocation,y);_&&(r.lastLocation=y);const T=!Aee(r.lastCombine,k);if(T&&(r.lastCombine=k),!w&&!_&&!T)return;const O={...Hg(m,r.mode),combine:k,destination:y};n.add(()=>{Xh("onDragUpdate",()=>y1(e().onDragUpdate,O,t,Vb.onDragUpdate))})},u=()=>{r||Re(),n.flush()},d=m=>{r||Re(),r=null,Xh("onDragEnd",()=>y1(e().onDragEnd,m,t,Vb.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:u,drop:d,abort:()=>{if(!r)return;const m={...Hg(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(m)}}},Cee=(e,t)=>{const n=Oee(e,t);return r=>i=>a=>{if(Ht(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ht(a,"INITIAL_PUBLISH")){const l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),i(a),n.start(l,a.payload.movementMode);return}if(Ht(a,"DROP_COMPLETE")){const l=a.payload.completed.result;n.flush(),i(a),n.drop(l);return}if(i(a),Ht(a,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const Mee=e=>t=>n=>{if(!Ht(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&Re(),e.dispatch(Oj({completed:r.completed}))},Dee=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>a=>{if((Ht(a,"FLUSH")||Ht(a,"DROP_COMPLETE")||Ht(a,"DROP_ANIMATION_FINISHED"))&&r(),i(a),!Ht(a,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(X4())}};n=requestAnimationFrame(()=>{n=null,t=ga(window,[o])})}};var Pee=e=>()=>t=>n=>{(Ht(n,"DROP_COMPLETE")||Ht(n,"FLUSH")||Ht(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},Ree=e=>{let t=!1;return()=>n=>r=>{if(Ht(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ht(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ht(r,"DROP_COMPLETE")){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Lee=e=>Ht(e,"DROP_COMPLETE")||Ht(e,"DROP_ANIMATE")||Ht(e,"FLUSH");var Iee=e=>t=>n=>r=>{if(Lee(r)){e.stop(),n(r);return}if(Ht(r,"INITIAL_PUBLISH")){n(r);const i=t.getState();i.phase!=="DRAGGING"&&Re(),e.start(i);return}n(r),e.scroll(t.getState())};const $ee=e=>t=>n=>{if(t(n),!Ht(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Z4({reason:r.reason})))},Bee=Hm;var zee=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>bj(ZQ,Bee(m4(mee(n),Pee(e),hee(e),xee,Mee,Dee,$ee,Iee(a),kee,Ree(t),Cee(r,i))));const v1=()=>({additions:{},removals:{},modified:{}});function Uee({registry:e,callbacks:t}){let n=v1(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:d,modified:h}=n,m=Object.keys(u).map(k=>e.draggable.getById(k).getDimension(yr)).sort((k,w)=>k.descriptor.index-w.descriptor.index),b=Object.keys(h).map(k=>{const _=e.droppable.getById(k).callbacks.getScrollWhileDragging();return{droppableId:k,scroll:_}}),y={additions:m,removals:Object.keys(d),modified:b};n=v1(),t.publish(y)}))};return{add:u=>{const d=u.descriptor.id;n.additions[d]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},remove:u=>{const d=u.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=v1())}}}var t6=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Fi({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},n6=()=>{const e=document.documentElement;return e||Re(),e},r6=()=>{const e=n6();return t6({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Fee=()=>{const e=e6(),t=r6(),n=e.y,r=e.x,i=n6(),a=i.clientWidth,o=i.clientHeight,l=r+a,u=n+o;return{frame:Xa({top:n,left:r,right:l,bottom:u}),scroll:{initial:e,current:e,max:t,diff:{value:yr,displacement:yr}}}},Hee=({critical:e,scrollOptions:t,registry:n})=>{const r=Fee(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,t)),l=n.draggable.getAllByType(e.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:C4(l),droppables:O4(o)},critical:e,viewport:r}};function TD(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Gee=(e,t)=>{let n=null;const r=Uee({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(b,y)=>{e.droppable.exists(b)||Re(),n&&t.updateDroppableIsEnabled({id:b,isEnabled:y})},a=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableIsCombineEnabled({id:b,isCombineEnabled:y}))},o=(b,y)=>{n&&(e.droppable.exists(b)||Re(),t.updateDroppableScroll({id:b,newScroll:y}))},l=(b,y)=>{n&&e.droppable.getById(b).callbacks.scroll(y)},u=()=>{if(!n)return;r.stop();const b=n.critical.droppable;e.droppable.getAllByType(b.type).forEach(y=>y.callbacks.dragStopped()),n.unsubscribe(),n=null},d=b=>{n||Re();const y=n.critical.draggable;b.type==="ADDITION"&&TD(e,y,b.value)&&r.add(b.value),b.type==="REMOVAL"&&TD(e,y,b.value)&&r.remove(b.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:b=>{n&&Re();const y=e.draggable.getById(b.draggableId),k=e.droppable.getById(y.descriptor.droppableId),w={draggable:y.descriptor,droppable:k.descriptor},_=e.subscribe(d);return n={critical:w,unsubscribe:_},Hee({critical:w,registry:e,scrollOptions:b.scrollOptions})},stopPublishing:u}},i6=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Yee=e=>{window.scrollBy(e.x,e.y)};const qee=br(e=>Zv(e).filter(t=>!(!t.isEnabled||!t.frame))),Kee=(e,t)=>qee(t).find(r=>(r.frame||Re(),U4(r.frame.pageMarginBox)(e)))||null;var Wee=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return Kee(e,n)};const Vm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Vee=(e,t,n=()=>Vm)=>{const r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},a6=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Mj=1,Zee=(e,t,n=()=>Vm)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Mj;const a=1-a6({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(a);return Math.ceil(o)},Xee=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,l=a,d=Date.now()-o;if(d>=a)return e;if(d<i)return Mj;const h=a6({startOfRange:i,endOfRange:l,current:d}),m=e*r.ease(h);return Math.ceil(m)},AD=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=Zee(e,t,i);return a===0?0:r?Math.max(Xee(a,n,i),Mj):a},ND=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=Vee(e,r,a);return t[r.end]<t[r.start]?AD({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*AD({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},Jee=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const Qee=N4(e=>e===0?0:e);var o6=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=ND({container:t,distanceToEdges:o,dragStartTime:e,axis:kj,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),u=ND({container:t,distanceToEdges:o,dragStartTime:e,axis:P4,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),d=Qee({x:u,y:l});if(Hl(d,yr))return null;const h=Jee({container:t,subject:n,proposedScroll:d});return h?Hl(h,yr)?null:h:null};const ete=N4(e=>e===0?0:e>0?1:-1),Dj=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=Nr(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return Hl(a,yr)?null:a}})(),s6=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=ete(n),a=Dj({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},Pj=(e,t)=>s6({current:e.scroll.current,max:e.scroll.max,change:t}),tte=(e,t)=>{if(!Pj(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Dj({current:r,max:n,change:t})},Rj=(e,t)=>{const n=e.frame;return n?s6({current:n.scroll.current,max:n.scroll.max,change:t}):!1},nte=(e,t)=>{const n=e.frame;return!n||!Rj(e,t)?null:Dj({current:n.scroll.current,max:n.scroll.max,change:t})};var rte=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=o6({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&Pj(e,o)?o:null},ite=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const o=e.frame;if(!o)return null;const l=o6({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return l&&Rj(e,l)?l:null},OD=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{const o=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,b=rte({dragStartTime:t,viewport:m,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(b){r(b);return}}const d=Wee({center:o,destination:Gi(e.impact),droppables:e.dimensions.droppables});if(!d)return;const h=ite({dragStartTime:t,droppable:d,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});h&&i(d.descriptor.id,h)},ate=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Vm})=>{const r=Gm(e),i=Gm(t);let a=null;const o=d=>{a||Re();const{shouldUseTimeDampening:h,dragStartTime:m}=a;OD({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:m,shouldUseTimeDampening:h,getAutoScrollerOptions:n})};return{start:d=>{a&&Re();const h=Date.now();let m=!1;const b=()=>{m=!0};OD({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:b,scrollDroppable:b,getAutoScrollerOptions:n}),a={dragStartTime:h,shouldUseTimeDampening:m},m&&o(d)},stop:()=>{a&&(r.cancel(),i.cancel(),a=null)},scroll:o}},ote=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,u)=>{const d=Nr(l.current.client.selection,u);e({client:d})},i=(l,u)=>{if(!Rj(l,u))return u;const d=nte(l,u);if(!d)return t(l.descriptor.id,u),null;const h=Fi(u,d);return t(l.descriptor.id,h),Fi(u,h)},a=(l,u,d)=>{if(!l||!Pj(u,d))return d;const h=tte(u,d);if(!h)return n(d),null;const m=Fi(d,h);return n(m),Fi(d,m)};return l=>{const u=l.scrollJumpRequest;if(!u)return;const d=Gi(l.impact);d||Re();const h=i(l.dimensions.droppables[d],u);if(!h)return;const m=l.viewport,b=a(l.isWindowScrollAllowed,m,h);b&&r(l,b)}},ste=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=ate({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=ote({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:i.start,stop:i.stop}};const sf="data-rfd",lf=(()=>{const e=`${sf}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),m2=(()=>{const e=`${sf}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),lte=(()=>{const e=`${sf}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),CD={contextId:`${sf}-scroll-container-context-id`},cte=e=>t=>`[${t}="${e}"]`,Jh=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),ute="pointer-events: none;";var dte=e=>{const t=cte(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(lf.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:ute,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Dm.outOfTheWay};
    `;return{selector:t(m2.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),i={selector:t(lte.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Jh(o,"always"),resting:Jh(o,"resting"),dragging:Jh(o,"dragging"),dropAnimating:Jh(o,"dropAnimating"),userCancel:Jh(o,"userCancel")}};const Yi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,x1=()=>{const e=document.querySelector("head");return e||Re(),e},MD=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function fte(e,t){const n=Nt(()=>dte(e),[e]),r=S.useRef(null),i=S.useRef(null),a=Qe(br(m=>{const b=i.current;b||Re(),b.textContent=m}),[]),o=Qe(m=>{const b=r.current;b||Re(),b.textContent=m},[]);Yi(()=>{!r.current&&!i.current||Re();const m=MD(t),b=MD(t);return r.current=m,i.current=b,m.setAttribute(`${sf}-always`,e),b.setAttribute(`${sf}-dynamic`,e),x1().appendChild(m),x1().appendChild(b),o(n.always),a(n.resting),()=>{const y=k=>{const w=k.current;w||Re(),x1().removeChild(w),k.current=null};y(r),y(i)}},[t,o,a,n.always,n.resting,e]);const l=Qe(()=>a(n.dragging),[a,n.dragging]),u=Qe(m=>{if(m==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=Qe(()=>{i.current&&a(n.resting)},[a,n.resting]);return Nt(()=>({dragging:l,dropping:u,resting:d}),[l,u,d])}function l6(e,t){return Array.from(e.querySelectorAll(t))}var c6=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ex(e){return e instanceof c6(e).HTMLElement}function hte(e,t){const n=`[${lf.contextId}="${e}"]`,r=l6(document,n);if(!r.length)return null;const i=r.find(a=>a.getAttribute(lf.draggableId)===t);return!i||!ex(i)?null:i}function mte(e){const t=S.useRef({}),n=S.useRef(null),r=S.useRef(null),i=S.useRef(!1),a=Qe(function(b,y){const k={id:b,focus:y};return t.current[b]=k,function(){const _=t.current;_[b]!==k&&delete _[b]}},[]),o=Qe(function(b){const y=hte(e,b);y&&y!==document.activeElement&&y.focus()},[e]),l=Qe(function(b,y){n.current===b&&(n.current=y)},[]),u=Qe(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const b=n.current;b&&o(b)}))},[o]),d=Qe(function(b){n.current=null;const y=document.activeElement;y&&y.getAttribute(lf.draggableId)===b&&(n.current=b)},[]);return Yi(()=>(i.current=!0,function(){i.current=!1;const b=r.current;b&&cancelAnimationFrame(b)}),[]),Nt(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:l}),[a,d,u,l])}function pte(){const e={draggables:{},droppables:{}},t=[];function n(m){return t.push(m),function(){const y=t.indexOf(m);y!==-1&&t.splice(y,1)}}function r(m){t.length&&t.forEach(b=>b(m))}function i(m){return e.draggables[m]||null}function a(m){const b=i(m);return b||Re(),b}const o={register:m=>{e.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,b)=>{const y=e.draggables[b.descriptor.id];y&&y.uniqueId===m.uniqueId&&(delete e.draggables[b.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const b=m.descriptor.id,y=i(b);y&&m.uniqueId===y.uniqueId&&(delete e.draggables[b],e.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:a,findById:i,exists:m=>!!i(m),getAllByType:m=>Object.values(e.draggables).filter(b=>b.descriptor.type===m)};function l(m){return e.droppables[m]||null}function u(m){const b=l(m);return b||Re(),b}const d={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const b=l(m.descriptor.id);b&&m.uniqueId===b.uniqueId&&delete e.droppables[m.descriptor.id]},getById:u,findById:l,exists:m=>!!l(m),getAllByType:m=>Object.values(e.droppables).filter(b=>b.descriptor.type===m)};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:h}}function gte(){const e=Nt(pte,[]);return S.useEffect(()=>function(){e.clean()},[e]),e}var Lj=rn.createContext(null),Ty=()=>{const e=document.body;return e||Re(),e};const bte={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},yte=e=>`rfd-announcement-${e}`;function vte(e){const t=Nt(()=>yte(e),[e]),n=S.useRef(null);return S.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Sy(a.style,bte),Ty().appendChild(a),function(){setTimeout(function(){const u=Ty();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[t]),Qe(i=>{const a=n.current;if(a){a.textContent=i;return}},[])}const xte={separator:"::"};function Ij(e,t=xte){const n=rn.useId();return Nt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function wte({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function _te({contextId:e,text:t}){const n=Ij("hidden-text",{separator:"-"}),r=Nt(()=>wte({contextId:e,uniqueId:n}),[n,e]);return S.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",Ty().appendChild(a),function(){const l=Ty();l.contains(a)&&l.removeChild(a)}},[r,t]),r}var tx=rn.createContext(null);function u6(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),t}function Ste(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&Re();const l={abandon:o};return e=l,l}function i(){e||Re(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function Zm(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const kte=9,Ete=13,$j=27,d6=32,jte=33,Tte=34,Ate=35,Nte=36,Ote=37,Cte=38,Mte=39,Dte=40,Pte={[Ete]:!0,[kte]:!0};var f6=e=>{Pte[e.keyCode]&&e.preventDefault()};const nx=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),h6=0,DD=5;function Rte(e,t){return Math.abs(t.x-e.x)>=DD||Math.abs(t.y-e.y)>=DD}const PD={type:"IDLE"};function Lte({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:o,clientY:l}=i;if(a!==h6)return;const u={x:o,y:l},d=n();if(d.type==="DRAGGING"){i.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&Re();const h=d.point;if(!Rte(h,u))return;i.preventDefault();const m=d.actions.fluidLift(u);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===$j){i.preventDefault(),e();return}f6(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=n();if(a.type==="IDLE"&&Re(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:nx,fn:e}]}function Ite(e){const t=S.useRef(PD),n=S.useRef(Fl),r=Nt(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==h6||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const b=e.findClosestDraggableId(m);if(!b)return;const y=e.tryGetLock(b,o,{sourceEvent:m});if(!y)return;m.preventDefault();const k={x:m.clientX,y:m.clientY};n.current(),d(y,k)}}),[e]),i=Nt(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const m=e.findClosestDraggableId(h);if(!m)return;const b=e.findOptionsForDraggable(m);b&&(b.shouldRespectForcePress||e.canGetLock(m)&&h.preventDefault())}}),[e]),a=Qe(function(){const m={passive:!1,capture:!0};n.current=ga(window,[i,r],m)},[i,r]),o=Qe(()=>{t.current.type!=="IDLE"&&(t.current=PD,n.current(),a())},[a]),l=Qe(()=>{const h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Qe(function(){const m={capture:!0,passive:!1},b=Lte({cancel:l,completed:o,getPhase:()=>t.current,setPhase:y=>{t.current=y}});n.current=ga(window,b,m)},[l,o]),d=Qe(function(m,b){t.current.type!=="IDLE"&&Re(),t.current={type:"PENDING",point:b,actions:m},u()},[u]);Yi(function(){return a(),function(){n.current()}},[a])}function $te(){}const Bte={[Tte]:!0,[jte]:!0,[Nte]:!0,[Ate]:!0};function zte(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===$j){i.preventDefault(),n();return}if(i.keyCode===d6){i.preventDefault(),r();return}if(i.keyCode===Dte){i.preventDefault(),e.moveDown();return}if(i.keyCode===Cte){i.preventDefault(),e.moveUp();return}if(i.keyCode===Mte){i.preventDefault(),e.moveRight();return}if(i.keyCode===Ote){i.preventDefault(),e.moveLeft();return}if(Bte[i.keyCode]){i.preventDefault();return}f6(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:nx,fn:n}]}function Ute(e){const t=S.useRef($te),n=Nt(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==d6)return;const o=e.findClosestDraggableId(a);if(!o)return;const l=e.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();let u=!0;const d=l.snapLift();t.current();function h(){u||Re(),u=!1,t.current(),r()}t.current=ga(window,zte(d,h),{capture:!0,passive:!1})}}),[e]),r=Qe(function(){const a={passive:!1,capture:!0};t.current=ga(window,[n],a)},[n]);Yi(function(){return r(),function(){t.current()}},[r])}const w1={type:"IDLE"},Fte=120,Hte=.15;function Gte({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===$j&&n.preventDefault(),e()}},{eventName:nx,fn:e}]}function Yte({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:o}=r.touches[0],l={x:a,y:o};r.preventDefault(),i.actions.move(l)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&Re();const a=r.touches[0];if(!a||!(a.force>=Hte))return;const l=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){l&&e();return}if(l){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:nx,fn:e}]}function qte(e){const t=S.useRef(w1),n=S.useRef(Fl),r=Qe(function(){return t.current},[]),i=Qe(function(y){t.current=y},[]),a=Nt(()=>({eventName:"touchstart",fn:function(y){if(y.defaultPrevented)return;const k=e.findClosestDraggableId(y);if(!k)return;const w=e.tryGetLock(k,l,{sourceEvent:y});if(!w)return;const _=y.touches[0],{clientX:T,clientY:O}=_,j={x:T,y:O};n.current(),m(w,j)}}),[e]),o=Qe(function(){const y={capture:!0,passive:!1};n.current=ga(window,[a],y)},[a]),l=Qe(()=>{const b=t.current;b.type!=="IDLE"&&(b.type==="PENDING"&&clearTimeout(b.longPressTimerId),i(w1),n.current(),o())},[o,i]),u=Qe(()=>{const b=t.current;l(),b.type==="DRAGGING"&&b.actions.cancel({shouldBlockNextClick:!0}),b.type==="PENDING"&&b.actions.abort()},[l]),d=Qe(function(){const y={capture:!0,passive:!1},k={cancel:u,completed:l,getPhase:r},w=ga(window,Yte(k),y),_=ga(window,Gte(k),y);n.current=function(){w(),_()}},[u,r,l]),h=Qe(function(){const y=r();y.type!=="PENDING"&&Re();const k=y.actions.fluidLift(y.point);i({type:"DRAGGING",actions:k,hasMoved:!1})},[r,i]),m=Qe(function(y,k){r().type!=="IDLE"&&Re();const w=setTimeout(h,Fte);i({type:"PENDING",point:k,actions:y,longPressTimerId:w}),d()},[d,r,i,h]);Yi(function(){return o(),function(){n.current();const k=r();k.type==="PENDING"&&(clearTimeout(k.longPressTimerId),i(w1))}},[r,o,i]),Yi(function(){return ga(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Kte=["input","button","textarea","select","option","optgroup","video","audio"];function m6(e,t){if(t==null)return!1;if(Kte.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:m6(e,t.parentElement)}function Wte(e,t){const n=t.target;return ex(n)?m6(e,n):!1}var Vte=e=>Xa(e.getBoundingClientRect()).center;function Zte(e){return e instanceof c6(e).Element}const Xte=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function p6(e,t){return e==null?null:e[Xte](t)?e:p6(e.parentElement,t)}function Jte(e,t){return e.closest?e.closest(t):p6(e,t)}function Qte(e){return`[${lf.contextId}="${e}"]`}function ene(e,t){const n=t.target;if(!Zte(n))return null;const r=Qte(e),i=Jte(n,r);return!i||!ex(i)?null:i}function tne(e,t){const n=ene(e,t);return n?n.getAttribute(lf.draggableId):null}function nne(e,t){const n=`[${m2.contextId}="${e}"]`,i=l6(document,n).find(a=>a.getAttribute(m2.id)===t);return!i||!ex(i)?null:i}function rne(e){e.preventDefault()}function Gg({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function g6({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!i6(t.getState(),r))}function ine({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!g6({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),d=nne(t,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&Wte(d,o))return null;const h=e.claim(a||Fl);let m="PRE_DRAG";function b(){return u.options.shouldRespectForcePress}function y(){return e.isActive(h)}function k(M,P){Gg({expected:M,phase:m,isLockActive:y,shouldWarn:!0})&&n.dispatch(P())}const w=k.bind(null,"DRAGGING");function _(M){function P(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(P(),Re()),n.dispatch(JQ(M.liftActionArgs)),m="DRAGGING";function I(U,W={shouldBlockNextClick:!1}){if(M.cleanup(),W.shouldBlockNextClick){const q=ga(window,[{eventName:"click",fn:rne,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(q)}P(),n.dispatch(Z4({reason:U}))}return{isActive:()=>Gg({expected:"DRAGGING",phase:m,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,drop:U=>I("DROP",U),cancel:U=>I("CANCEL",U),...M.actions}}function T(M){const P=Gm(U=>{w(()=>V4({client:U}))});return{..._({liftActionArgs:{id:i,clientSelection:M,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function O(){const M={moveUp:()=>w(see),moveRight:()=>w(cee),moveDown:()=>w(lee),moveLeft:()=>w(uee)};return _({liftActionArgs:{id:i,clientSelection:Vte(d),movementMode:"SNAP"},cleanup:Fl,actions:M})}function j(){Gg({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!0})&&e.release()}return{isActive:()=>Gg({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!1}),shouldRespectForcePress:b,fluidLift:T,snapLift:O,abort:j}}const ane=[Ite,Ute,qte];function one({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const a=[...i?ane:[],...r||[]],o=S.useState(()=>Ste())[0],l=Qe(function(_,T){Zm(_)&&!Zm(T)&&o.tryAbandon()},[o]);Yi(function(){let _=t.getState();return t.subscribe(()=>{const O=t.getState();l(_,O),_=O})},[o,t,l]),Yi(()=>o.tryAbandon,[o.tryAbandon]);const u=Qe(w=>g6({lockAPI:o,registry:n,store:t,draggableId:w}),[o,n,t]),d=Qe((w,_,T)=>ine({lockAPI:o,registry:n,contextId:e,store:t,draggableId:w,forceSensorStop:_||null,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null}),[e,o,n,t]),h=Qe(w=>tne(e,w),[e]),m=Qe(w=>{const _=n.draggable.findById(w);return _?_.options:null},[n.draggable]),b=Qe(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Nj()))},[o,t]),y=Qe(()=>o.isClaimed(),[o]),k=Nt(()=>({canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:m,tryReleaseLock:b,isLockClaimed:y}),[u,d,h,m,b,y]);for(let w=0;w<a.length;w++)a[w](k)}const sne=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Mu.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),lne=e=>({...Vm,...e.autoScrollerOptions,durationDampening:{...Vm.durationDampening,...e.autoScrollerOptions}});function Qh(e){return e.current||Re(),e.current}function cne(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=S.useRef(null),l=u6(e),u=Qe(()=>sne(l.current),[l]),d=Qe(()=>lne(l.current),[l]),h=vte(t),m=_te({contextId:t,text:a}),b=fte(t,i),y=Qe(q=>{Qh(o).dispatch(q)},[]),k=Nt(()=>oD({publishWhileDragging:eee,updateDroppableScroll:nee,updateDroppableIsEnabled:ree,updateDroppableIsCombineEnabled:iee,collectionStarting:tee},y),[y]),w=gte(),_=Nt(()=>Gee(w,k),[w,k]),T=Nt(()=>ste({scrollWindow:Yee,scrollDroppable:_.scrollDroppable,getAutoScrollerOptions:d,...oD({move:V4},y)}),[_.scrollDroppable,y,d]),O=mte(t),j=Nt(()=>zee({announce:h,autoScroller:T,dimensionMarshal:_,focusMarshal:O,getResponders:u,styleMarshal:b}),[h,T,_,O,u,b]);o.current=j;const C=Qe(()=>{const q=Qh(o);q.getState().phase!=="IDLE"&&q.dispatch(Nj())},[]),M=Qe(()=>{const q=Qh(o).getState();return q.phase==="DROP_ANIMATING"?!0:q.phase==="IDLE"?!1:q.isDragging},[]),P=Nt(()=>({isDragging:M,tryAbort:C}),[M,C]);n(P);const I=Qe(q=>i6(Qh(o).getState(),q),[]),U=Qe(()=>ru(Qh(o).getState()),[]),W=Nt(()=>({marshal:_,focus:O,contextId:t,canLift:I,isMovementAllowed:U,dragHandleUsageInstructionsId:m,registry:w}),[t,_,m,O,I,U,w]);return one({contextId:t,store:j,registry:w,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),S.useEffect(()=>C,[C]),rn.createElement(tx.Provider,{value:W},rn.createElement(_4,{context:Lj,store:j},e.children))}function une(){return rn.useId()}function Np(e){const t=une(),n=e.dragHandleUsageInstructions||Vb.dragHandleUsageInstructions;return rn.createElement(UJ,null,r=>rn.createElement(cne,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const RD={dragging:5e3,dropAnimating:4500},dne=(e,t)=>t?Dm.drop(t.duration):e?Dm.snap:Dm.fluid,fne=(e,t)=>{if(e)return t?Wm.opacity.drop:Wm.opacity.combining},hne=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function mne(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:a}=e,o=!!i,l=hne(e),u=!!a,d=u?f2.drop(r,o):f2.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:dne(l,a),transform:d,opacity:fne(o,u),zIndex:u?RD.dropAnimating:RD.dragging,pointerEvents:"none"}}function pne(e){return{transform:f2.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function gne(e){return e.type==="DRAGGING"?mne(e):pne(e)}function bne(e,t,n=yr){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=S4(i,r),o=_y(a,n),l={client:a,tagName:t.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:u,client:a,page:o}}function yne(e){const t=Ij("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}=e,u=Nt(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}),[a,l,o]),d=Qe(y=>{const k=i();return k||Re(),bne(n,k,y)},[n,i]),h=Nt(()=>({uniqueId:t,descriptor:n,options:u,getDimension:d}),[n,d,u,t]),m=S.useRef(h),b=S.useRef(!0);Yi(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),Yi(()=>{if(b.current){b.current=!1;return}const y=m.current;m.current=h,r.draggable.update(h,y)},[h,r.draggable])}var Bj=rn.createContext(null);function Ay(e){const t=S.useContext(e);return t||Re(),t}function vne(e){e.preventDefault()}const xne=e=>{const t=S.useRef(null),n=Qe((P=null)=>{t.current=P},[]),r=Qe(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=Ay(tx),{type:l,droppableId:u}=Ay(Bj),d=Nt(()=>({id:e.draggableId,index:e.index,type:l,droppableId:u}),[e.draggableId,e.index,l,u]),{children:h,draggableId:m,isEnabled:b,shouldRespectForcePress:y,canDragInteractiveElements:k,isClone:w,mapped:_,dropAnimationFinished:T}=e;if(!w){const P=Nt(()=>({descriptor:d,registry:o,getDraggableRef:r,canDragInteractiveElements:k,shouldRespectForcePress:y,isEnabled:b}),[d,o,r,k,y,b]);yne(P)}const O=Nt(()=>b?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:vne}:null,[i,a,m,b]),j=Qe(P=>{_.type==="DRAGGING"&&_.dropping&&P.propertyName==="transform"&&Mu.flushSync(T)},[T,_]),C=Nt(()=>{const P=gne(_),I=_.type==="DRAGGING"&&_.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":m,style:P,onTransitionEnd:I},dragHandleProps:O}},[i,O,m,_,j,n]),M=Nt(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return rn.createElement(rn.Fragment,null,h(C,_.snapshot,M))};var b6=(e,t)=>e===t,y6=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const wne=e=>e.combine?e.combine.draggableId:null,_ne=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Sne(){const e=br((i,a)=>({x:i,y:a})),t=br((i,a,o=null,l=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null})),n=br((i,a,o,l,u=null,d=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:h,snapshot:t(a,l,u,d,null)}}));return(i,a)=>{if(Zm(i)){if(i.critical.draggable.id!==a.draggableId)return null;const o=i.current.client.offset,l=i.dimensions.draggables[a.draggableId],u=Gi(i.impact),d=_ne(i.impact),h=i.forceShouldAnimate;return n(e(o.x,o.y),i.movementMode,l,a.isClone,u,d,h)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==a.draggableId)return null;const l=a.isClone,u=i.dimensions.draggables[a.draggableId],d=o.result,h=d.mode,m=y6(d),b=wne(d),k={duration:i.dropDuration,curve:Cj.drop,moveTo:i.newHomeClientOffset,opacity:b?Wm.opacity.drop:null,scale:b?Wm.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:k,draggingOver:m,combineWith:b,mode:h,forceShouldAnimate:null,snapshot:t(h,l,m,b,k)}}}return null}}function v6(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const kne={mapped:{type:"SECONDARY",offset:yr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:v6(null)}};function Ene(){const e=br((o,l)=>({x:o,y:l})),t=br(v6),n=br((o,l=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:t(l)}})),r=o=>o?n(yr,o,!0):null,i=(o,l,u,d)=>{const h=u.displaced.visible[o],m=!!(d.inVirtualList&&d.effected[o]),b=Xv(u),y=b&&b.draggableId===o?l:null;if(!h){if(!m)return r(y);if(u.displaced.invisible[o])return null;const _=Ef(d.displacedBy.point),T=e(_.x,_.y);return n(T,y,!0)}if(m)return r(y);const k=u.displacedBy.point,w=e(k.x,k.y);return n(w,y,h.shouldAnimate)};return(o,l)=>{if(Zm(o))return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const jne=()=>{const e=Sne(),t=Ene();return(r,i)=>e(r,i)||t(r,i)||kne},Tne={dropAnimationFinished:X4},Ane=w4(jne,Tne,null,{context:Lj,areStatePropsEqual:b6})(xne);function x6(e){return Ay(Bj).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(Ane,e)}function Af(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return rn.createElement(x6,Sy({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const w6=e=>t=>e===t,Nne=w6("scroll"),One=w6("auto"),LD=(e,t)=>t(e.overflowX)||t(e.overflowY),Cne=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return LD(n,Nne)||LD(n,One)},Mne=()=>!1,_6=e=>e==null?null:e===document.body?Mne()?e:null:e===document.documentElement?null:Cne(e)?e:_6(e.parentElement);var p2=e=>({x:e.scrollLeft,y:e.scrollTop});const S6=e=>e?window.getComputedStyle(e).position==="fixed"?!0:S6(e.parentElement):!1;var Dne=e=>{const t=_6(e),n=S6(e);return{closestScrollable:t,isFixedOnPage:n}},Pne=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:l})=>{const u=(()=>{if(!l)return null;const{scrollSize:b,client:y}=l,k=t6({scrollHeight:b.scrollHeight,scrollWidth:b.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:y,scrollSize:b,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:k,diff:{value:yr,displacement:yr}}}})(),d=i==="vertical"?kj:P4,h=of({page:o,withPlaceholder:null,axis:d,frame:u});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:a,page:o,frame:u,subject:h}};const Rne=(e,t)=>{const n=k4(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,u=xj({top:r,right:o,bottom:a,left:i},n.border);return wj({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Lne=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:l})=>{const u=n.closestScrollable,d=Rne(e,u),h=_y(d,r),m=(()=>{if(!u)return null;const y=k4(u),k={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:y,page:_y(y,r),scroll:p2(u),scrollSize:k,shouldClipSubject:l}})();return Pne({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:h,closest:m})};const Ine={passive:!1},$ne={passive:!0};var ID=e=>e.shouldPublishImmediately?Ine:$ne;const Yg=e=>e&&e.env.closestScrollable||null;function Bne(e){const t=S.useRef(null),n=Ay(tx),r=Ij("droppable"),{registry:i,marshal:a}=n,o=u6(e),l=Nt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=S.useRef(l),d=Nt(()=>br((C,M)=>{t.current||Re();const P={x:C,y:M};a.updateDroppableScroll(l.id,P)}),[l.id,a]),h=Qe(()=>{const C=t.current;return!C||!C.env.closestScrollable?yr:p2(C.env.closestScrollable)},[]),m=Qe(()=>{const C=h();d(C.x,C.y)},[h,d]),b=Nt(()=>Gm(m),[m]),y=Qe(()=>{const C=t.current,M=Yg(C);if(C&&M||Re(),C.scrollOptions.shouldPublishImmediately){m();return}b()},[b,m]),k=Qe((C,M)=>{t.current&&Re();const P=o.current,I=P.getDroppableRef();I||Re();const U=Dne(I),W={ref:I,descriptor:l,env:U,scrollOptions:M};t.current=W;const q=Lne({ref:I,descriptor:l,env:U,windowScroll:C,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),H=U.closestScrollable;return H&&(H.setAttribute(CD.contextId,n.contextId),H.addEventListener("scroll",y,ID(W.scrollOptions))),q},[n.contextId,l,y,o]),w=Qe(()=>{const C=t.current,M=Yg(C);return C&&M||Re(),p2(M)},[]),_=Qe(()=>{const C=t.current;C||Re();const M=Yg(C);t.current=null,M&&(b.cancel(),M.removeAttribute(CD.contextId),M.removeEventListener("scroll",y,ID(C.scrollOptions)))},[y,b]),T=Qe(C=>{const M=t.current;M||Re();const P=Yg(M);P||Re(),P.scrollTop+=C.y,P.scrollLeft+=C.x},[]),O=Nt(()=>({getDimensionAndWatchScroll:k,getScrollWhileDragging:w,dragStopped:_,scroll:T}),[_,k,w,T]),j=Nt(()=>({uniqueId:r,descriptor:l,callbacks:O}),[O,l,r]);Yi(()=>(u.current=j.descriptor,i.droppable.register(j),()=>{t.current&&_(),i.droppable.unregister(j)}),[O,l,_,j,a,i.droppable]),Yi(()=>{t.current&&a.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Yi(()=>{t.current&&a.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function _1(){}const $D={width:0,height:0,margin:WJ},zne=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?$D:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Une=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=zne({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Dm.placeholder:null}},Fne=e=>{const t=S.useRef(null),n=Qe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[l,u]=S.useState(e.animate==="open");S.useEffect(()=>l?r!=="open"?(n(),u(!1),_1):t.current?_1:(t.current=setTimeout(()=>{t.current=null,u(!1)}),n):_1,[r,l,n]);const d=Qe(m=>{m.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),h=Une({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var Hne=rn.memo(Fne);class Gne extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Yne=e=>{const t=S.useContext(tx);t||Re();const{contextId:n,isMovementAllowed:r}=t,i=S.useRef(null),a=S.useRef(null),{children:o,droppableId:l,type:u,mode:d,direction:h,ignoreContainerClipping:m,isDropDisabled:b,isCombineEnabled:y,snapshot:k,useClone:w,updateViewportMaxScroll:_,getContainerForClone:T}=e,O=Qe(()=>i.current,[]),j=Qe((H=null)=>{i.current=H},[]);Qe(()=>a.current,[]);const C=Qe((H=null)=>{a.current=H},[]),M=Qe(()=>{r()&&_({maxScroll:r6()})},[r,_]);Bne({droppableId:l,type:u,mode:d,direction:h,isDropDisabled:b,isCombineEnabled:y,ignoreContainerClipping:m,getDroppableRef:O});const P=Nt(()=>rn.createElement(Gne,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:H,data:B,animate:K})=>rn.createElement(Hne,{placeholder:B,onClose:H,innerRef:C,animate:K,contextId:n,onTransitionEnd:M})),[n,M,e.placeholder,e.shouldAnimatePlaceholder,C]),I=Nt(()=>({innerRef:j,placeholder:P,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,P,j]),U=w?w.dragging.draggableId:null,W=Nt(()=>({droppableId:l,type:u,isUsingCloneFor:U}),[l,U,u]);function q(){if(!w)return null;const{dragging:H,render:B}=w,K=rn.createElement(x6,{draggableId:H.draggableId,index:H.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(V,Z)=>B(V,Z,H));return Vq.createPortal(K,T())}return rn.createElement(Bj.Provider,{value:W},o(I,k),q())};function qne(){return document.body||Re(),document.body}const BD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:qne},k6=e=>{let t={...e},n;for(n in BD)e[n]===void 0&&(t={...t,[n]:BD[n]});return t},S1=(e,t)=>e===t.droppable.type,zD=(e,t)=>t.draggables[e.draggable.id],Kne=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=br(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=br((a,o,l,u,d,h)=>{const m=d.descriptor.id;if(d.descriptor.droppableId===a){const k=h?{render:h,dragging:n(d.descriptor)}:null,w={isDraggingOver:l,draggingOverWith:l?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:w,useClone:k}}if(!o)return t;if(!u)return e;const y={isDraggingOver:l,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}});return(a,o)=>{const l=k6(o),u=l.droppableId,d=l.type,h=!l.isDropDisabled,m=l.renderClone;if(Zm(a)){const b=a.critical;if(!S1(d,b))return t;const y=zD(b,a.dimensions),k=Gi(a.impact)===u;return r(u,h,k,k,y,m)}if(a.phase==="DROP_ANIMATING"){const b=a.completed;if(!S1(d,b.critical))return t;const y=zD(b.critical,a.dimensions);return r(u,h,y6(b.result)===u,Gi(b.impact)===u,y,m)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const b=a.completed;if(!S1(d,b.critical))return t;const y=Gi(b.impact)===u,k=!!(b.impact.at&&b.impact.at.type==="COMBINE"),w=b.critical.droppable.id===u;return y?k?e:t:w?e:t}return t}},Wne={updateViewportMaxScroll:oee},Nf=w4(Kne,Wne,(e,t,n)=>({...k6(n),...e,...t}),{context:Lj,areStatePropsEqual:b6})(Yne),Vne={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function Xm(e,t,n){const r=Vne[e];if(!r)return!1;const i=new Date(e,t-1,n,0,0,0,0);return i>=r.start&&i<r.end}function Zne(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),i=Math.floor((e.getTime()-n)/864e5)+1,a=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds(),u=(a-12)/24+o/1440+l/86400,d=2*Math.PI/365*(i-1+u);return 229.18*(75e-6+.001868*Math.cos(d)-.032077*Math.sin(d)-.014615*Math.cos(2*d)-.040849*Math.sin(2*d))}function Xne(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function Op(e,t,n=!1){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(r.getTime()-1800*1e3);if(t==null||!isFinite(t))return r;let i=t;Math.abs(i)<=Math.PI+1e-6&&(i=i*180/Math.PI),i=(i+540)%360-180;const a=Xne(i),o=4*(i-a),l=Zne(r);return new Date(r.getTime()+(o+l)*60*1e3)}function E6(e){return e.replace(/\D/g,"")}function Jne(e,t,n){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(n)||e<1800||e>2200||t<1||t>12||n<1||n>31)return!1;const r=new Date(e,t-1,n);return r.getFullYear()===e&&r.getMonth()+1===t&&r.getDate()===n}function Qne(e,t){return!(!Number.isFinite(e)||!Number.isFinite(t)||e<0||e>23||t<0||t>59)}function Of(e){const t=E6(e.trim());if(t.length!==8)return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8));return Jne(n,r,i)?{y:n,m:r,d:i}:null}function Cp(e){const t=e.trim();if(!t||t==="")return null;const n=E6(t);if(n.length!==4)return null;const r=Number(n.slice(0,2)),i=Number(n.slice(2,4));return Qne(r,i)?{hh:r,mm:i}:null}function rx(e){const t=e.trim(),n=Of(t);if(!n)return t;const r=String(n.y).padStart(4,"0"),i=String(n.m).padStart(2,"0"),a=String(n.d).padStart(2,"0");return`${r}${i}${a}`}function ix(e){const t=e.trim();if(t==="")return"";const n=Cp(t);if(!n)return t;const r=String(n.hh).padStart(2,"0"),i=String(n.mm).padStart(2,"0");return`${r}${i}`}var Zb={exports:{}},ere=Zb.exports,UD;function tre(){return UD||(UD=1,(function(e,t){(function(n,r){e.exports=r()})(ere,function(){return(function(n){function r(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var i={};return r.m=n,r.c=i,r.d=function(a,o,l){r.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},r.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(o,"a",o),o},r.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},r.p="",r(r.s=0)})([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(l){return l&&l.__esModule?l:{default:l}})(a);r.default=o.default,n.exports=r.default},function(n,r,i){function a(K){return K&&K.__esModule?K:{default:K}}Object.defineProperty(r,"__esModule",{value:!0});var o=i(2),l=a(o),u=i(3),d=a(u),h=i(4),m=a(h),b=i(5),y=a(b),k=i(6),w=a(k),_=i(7),T=a(_),O=i(8),j=a(O),C=i(9),M=a(C),P=i(10),I=a(P),U=i(11),W=a(U),q=i(12),H=a(q),B={lunarInfo:l.default,solarMonth:d.default,gan:m.default,zhi:y.default,animals:w.default,lunarTerm:T.default,lTermInfo:j.default,nStr1:M.default,nStr2:I.default,nStr3:W.default,nStr4:H.default,lYearDays:function(K){var V,Z=348;for(V=32768;V>8;V>>=1)Z+=B.lunarInfo[K-1900]&V?1:0;return Z+B.leapDays(K)},leapMonth:function(K){return 15&B.lunarInfo[K-1900]},leapDays:function(K){return B.leapMonth(K)?65536&B.lunarInfo[K-1900]?30:29:0},monthDays:function(K,V){return V>12||V<1?-1:B.lunarInfo[K-1900]&65536>>V?30:29},solarDays:function(K,V){if(V>12||V<1)return-1;var Z=V-1;return Z==1?K%4==0&&K%100!=0||K%400==0?29:28:B.solarMonth[Z]},toGanZhi:function(K){return B.gan[K%10]+B.zhi[K%12]},getTerm:function(K,V){if(K<1900||K>2100||V<1||V>24)return-1;var Z=B.lTermInfo[K-1900],G=[parseInt("0x"+Z.substr(0,5)).toString(),parseInt("0x"+Z.substr(5,5)).toString(),parseInt("0x"+Z.substr(10,5)).toString(),parseInt("0x"+Z.substr(15,5)).toString(),parseInt("0x"+Z.substr(20,5)).toString(),parseInt("0x"+Z.substr(25,5)).toString()],J=[G[0].substr(0,1),G[0].substr(1,2),G[0].substr(3,1),G[0].substr(4,2),G[1].substr(0,1),G[1].substr(1,2),G[1].substr(3,1),G[1].substr(4,2),G[2].substr(0,1),G[2].substr(1,2),G[2].substr(3,1),G[2].substr(4,2),G[3].substr(0,1),G[3].substr(1,2),G[3].substr(3,1),G[3].substr(4,2),G[4].substr(0,1),G[4].substr(1,2),G[4].substr(3,1),G[4].substr(4,2),G[5].substr(0,1),G[5].substr(1,2),G[5].substr(3,1),G[5].substr(4,2)];return parseInt(J[V-1])},toChinaYear:function(K){var V=parseInt(K/1e3),Z=parseInt(K%1e3/100),G=parseInt(K%100/10),J=K%10;return B.nStr4[V]+B.nStr4[Z]+B.nStr4[G]+B.nStr4[J]+""},toChinaMonth:function(K){if(K>12||K<1)return-1;var V=B.nStr3[K-1];return V+=""},toChinaDay:function(K){var V;switch(K){case 10:V="";break;case 20:V="";break;case 30:V="";break;default:V=B.nStr2[Math.floor(K/10)],V+=B.nStr1[K%10]}return V},getAnimal:function(K){return B.animals[(K-4)%12]},solar2lunar:function(oe,te,z){if(oe<1900||oe>2100||oe==1900&&te==1&&z<31)return-1;if(oe)var G=new Date(oe,parseInt(te)-1,z);else var G=new Date;var J,Ne=0,Q=0,oe=G.getFullYear(),te=G.getMonth()+1,z=G.getDate(),X=(Date.UTC(G.getFullYear(),G.getMonth(),G.getDate())-Date.UTC(1900,0,31))/864e5;for(J=1900;J<2101&&X>0;J++)Q=B.lYearDays(J),X-=Q;X<0&&(X+=Q,J--);var re=new Date,ie=!1;re.getFullYear()==oe&&re.getMonth()+1==te&&re.getDate()==z&&(ie=!0);var fe=G.getDay(),de=B.nStr1[fe];fe==0&&(fe=7);var pe=J,Ne=B.leapMonth(J),se=!1;for(J=1;J<13&&X>0;J++)Ne>0&&J==Ne+1&&se==0?(--J,se=!0,Q=B.leapDays(pe)):Q=B.monthDays(pe,J),se==1&&J==Ne+1&&(se=!1),X-=Q;X==0&&Ne>0&&J==Ne+1&&(se?se=!1:(se=!0,--J)),X<0&&(X+=Q,--J);var Se=J,ke=X+1,he=te-1,Ue=B.getTerm(oe,3),Be=B.toGanZhi(oe-4),Xe=new Date(oe,1,Ue).getTime();new Date(oe,he,z).getTime()<Xe&&(Be=B.toGanZhi(oe-5));var Ae=B.getTerm(oe,2*te-1),Ie=B.getTerm(oe,2*te),$e=B.toGanZhi(12*(oe-1900)+te+11);z>=Ae&&($e=B.toGanZhi(12*(oe-1900)+te+12));var tt=!1,bt="";Ae==z&&(tt=!0,bt=B.lunarTerm[2*te-2]),Ie==z&&(tt=!0,bt=B.lunarTerm[2*te-1]);var jt=Date.UTC(oe,he,1,0,0,0,0)/864e5+25567+10,le=B.toGanZhi(jt+z-1);return{lYear:pe,lMonth:Se,lDay:ke,animal:B.getAnimal(pe),yearCn:B.toChinaYear(pe),monthCn:(se&&Ne===Se?"":"")+B.toChinaMonth(Se),dayCn:B.toChinaDay(ke),cYear:oe,cMonth:te,cDay:z,gzYear:Be,gzMonth:$e,gzDay:le,isToday:ie,isLeap:se,nWeek:fe,ncWeek:""+de,isTerm:tt,term:bt}},lunar2solar:function(K,V,Z,G){var J=B.leapMonth(K);if(B.leapDays(K),G&&J!=V||K==2100&&V==12&&Z>1||K==1900&&V==1&&Z<31)return-1;var Q=B.monthDays(K,V);if(K<1900||K>2100||Z>Q)return-1;for(var oe=0,te=1900;te<K;te++)oe+=B.lYearDays(te);for(var z=0,X=!1,te=1;te<V;te++)z=B.leapMonth(K),X||z<=te&&z>0&&(oe+=B.leapDays(K),X=!0),oe+=B.monthDays(K,te);G&&(oe+=Q);var re=Date.UTC(1900,1,30,0,0,0),ie=new Date(864e5*(oe+Z-31)+re),fe=ie.getUTCFullYear(),de=ie.getUTCMonth()+1,pe=ie.getUTCDate();return B.solar2lunar(fe,de,pe)}};r.default=B,n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","","",""],n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=["","","","","","","","","","",""],n.exports=r.default}])})})(Zb)),Zb.exports}var j6=tre();const nre=_i(j6),rre=VE({__proto__:null,default:nre},[j6]);function zj(e){return typeof e=="object"&&e!==null}function ire(e){return zj(e)&&"default"in e}function are(e){return zj(e)&&typeof e.lunar2solar=="function"}function ore(e){if(!zj(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,r=e.cDay,i=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof r!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:r,isLeap:typeof i=="boolean"?i:void 0}}function sre(e){const t=ire(e)?e.default:e;if(!are(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(r,i,a,o)=>{const l=t.lunar2solar(r,i,a,o);return ore(l)}}}const lre=sre(rre);function Vi(e,t,n,r=4,i=0){const a=lre.lunar2solar(e,t,n,!1);return new Date(a.cYear,a.cMonth-1,a.cDay,r,i)}const FD=e=>e<10?`0${e}`:`${e}`;function Cf(e){if(e.calendarType!=="lunar")return e;const t=Of(e.birthDay??"");if(!t)return e;try{const n=Vi(t.y,t.m,t.d,0,0),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate();return{...e,birthDay:`${r}${FD(i)}${FD(a)}`,calendarType:"solar"}}catch{return e}}function Uj(e){const t=e.mingSikType??"/",n=Of(e.birthDay??"");if(!n){const C=e.corrected instanceof Date?e.corrected:new Date(NaN),M=typeof e.ganji=="string"?e.ganji:"",P=typeof e.ganjiText=="string"?e.ganjiText:M,I=typeof e.dayStem=="string"?e.dayStem:"";return{corrected:C,correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganji:M,ganjiText:P,dayStem:I}}let r=n.y,i=n.m,a=n.d;if(e.calendarType==="lunar")try{const C=Vi(r,i,a,0,0);r=C.getFullYear(),i=C.getMonth()+1,a=C.getDate()}catch{}const o=Cp(e.birthTime??""),l=!e.birthTime||e.birthTime===""||!o,u=l?4:o.hh,d=l?30:o.mm,h=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,m=new Date(r,i-1,a,u,d,0,0),b=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",y=Op(m,h,b),k=l?"":y.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),w=ct(y,h),_=At(y,h),T=ht(y,t),O=l?null:eo(y,t),j=[` : ${w} ${_} ${T}`,O?`${O}`:null].filter(Boolean).join(" ");return{corrected:y,correctedLocal:k,ganji:j,ganjiText:j,dayStem:T.charAt(0)}}function HD(e,t){return e instanceof Date&&!Number.isNaN(e.getTime())?e:t}function Mp(e){return(typeof e=="string"?e.trim():"")===""?"":""}function GD(e){if(typeof e!="string")return null;const t=e.match(/\s*:\s*(.)/);return t?t[1]:null}function cre(e){const t=GD(e.ganjiText)??GD(e.ganji);if(!t)return"forward";const r=["","","","",""].includes(t),i=Mp(e.gender)==="";return r?i?"forward":"backward":i?"backward":"forward"}function Jm(e){const t={...e,birthDay:rx(e.birthDay??""),birthTime:e.birthTime===""?"":ix(e.birthTime??""),gender:Mp(e.gender),dateObj:HD(e.dateObj,new Date),corrected:HD(e.corrected,new Date(NaN)),correctedLocal:typeof e.correctedLocal=="string"?e.correctedLocal:"",ganjiText:typeof e.ganjiText=="string"?e.ganjiText:"",ganji:typeof e.ganji=="string"?e.ganji:"",dayStem:typeof e.dayStem=="string"?e.dayStem:"",calendarType:e.calendarType==="lunar"?"lunar":"solar",dir:e.dir==="backward"?"backward":"forward"},n=Uj(t),r={...t,...n};return{...r,dir:cre(r)}}function ure(e){return e===""||e==="/"||e===""?e:"/"}function dre(e){return e==="lunar"?"lunar":"solar"}function fre(e,t){if(t||!e||e.name==="")return{name:"",lat:0,lon:127.5};const n=Number.isFinite(e.lat)?e.lat:0,r=Number.isFinite(e.lon)?e.lon:127.5;return{name:typeof e.name=="string"&&e.name.trim()?e.name.trim():"",lat:n,lon:r}}function hre(e,t){const n=typeof e=="string"?e.trim():"";return n?{ok:!0,value:n}:t?{ok:!1,message:" ."}:{ok:!0,value:""}}function Fj(e,t){const r=rx(typeof e=="string"?e:""),i=Of(r);if(!i)return{ok:!1,message:"(YYYYMMDD)  ."};if(i.y<1900||i.y>2100)return{ok:!1,message:"(YYYY) 1900~2100  ."};if(t==="solar"){const a=new Date(i.y,i.m-1,i.d);if(a.getFullYear()!==i.y||a.getMonth()+1!==i.m||a.getDate()!==i.d)return{ok:!1,message:"  ."}}else try{Vi(i.y,i.m,i.d,0,0)}catch{return{ok:!1,message:"      ."}}return{ok:!0,value:r}}function Hj(e,t){if(t)return{ok:!0,value:""};const r=ix(typeof e=="string"?e:"");return Cp(r)?{ok:!0,value:r}:{ok:!1,message:"  HHmm  ."}}function T6(e,t){const n=t?.requireName??!1,r=hre(e.name,n);if(!r.ok)return r;const i=dre(e.calendarType),a=Fj(e.birthDay,i);if(!a.ok)return a;const o=Hj(e.birthTime,e.unknownTime);if(!o.ok)return o;const l=ure(e.mingSikType),u={id:e.id,name:r.value,birthDay:a.value,birthTime:o.value,gender:Mp(e.gender),sortOrder:e.sortOrder,birthPlace:fre(e.birthPlace,e.unknownPlace),relationship:e.relationship??"",memo:e.memo??"",folder:e.folder,mingSikType:l,DayChangeRule:l===""?"":"",favorite:e.favorite??!1,deletedAt:e.deletedAt??null,dateObj:e.dateObj??new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:i,dir:"forward"};return{ok:!0,value:Jm(u)}}function Wl(e,t=0){const n=Cf(e),r=Of(n.birthDay??"");if(!r)throw new Error(`Invalid date: ${e.birthDay}`);const i=Cp(n.birthTime??""),a=!i,o=a?4:i.hh,l=a?30:i.mm,u=new Date(r.y,r.m-1,r.d,o,l,0,0);if(Number.isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const d=!n.birthPlace||typeof n.birthPlace=="object"&&n.birthPlace.name==="",h=n.birthPlace?.lon??127.5,m=Op(u,h,d);return t!==0?new Date(m.getTime()+t*60*1e3):m}function mre(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function uu(e){return[...e].sort((t,n)=>{const r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:-1,i=typeof n.sortOrder=="number"&&Number.isFinite(n.sortOrder)?n.sortOrder:-1;if(r!==i)return r-i;const a=(t.name??"").toString(),o=(n.name??"").toString(),l=a.localeCompare(o);return l!==0?l:t.id.localeCompare(n.id)})}function g2(e){if(!mre(e))return null;const t=typeof e.id=="string"?e.id:null,n=typeof e.user_id=="string"?e.user_id:null;if(!t||!n)return null;const r=o=>typeof o=="number"&&Number.isFinite(o)?o:null,i=o=>typeof o=="string"?o:null,a=o=>typeof o=="boolean"?o:null;return{id:t,user_id:n,name:i(e.name),birth_day:i(e.birth_day),birth_time:i(e.birth_time),gender:i(e.gender),birth_place_name:i(e.birth_place_name),birth_place_lat:r(e.birth_place_lat),birth_place_lon:r(e.birth_place_lon),relationship:i(e.relationship),memo:i(e.memo),folder:i(e.folder),ming_sik_type:i(e.ming_sik_type),day_change_rule:i(e.day_change_rule),calendar_type:i(e.calendar_type),favorite:a(e.favorite),sort_order:typeof e.sort_order=="string"||typeof e.sort_order=="number"?e.sort_order:null,created_at:i(e.created_at),deleted_at:i(e.deleted_at),updated_at:i(e.updated_at)}}function A6(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),r=typeof n=="number"&&Number.isFinite(n)?n:void 0,i={id:e.id,name:e.name??"",birthDay:rx(e.birth_day??""),birthTime:ix(e.birth_time??""),gender:Mp(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,deletedAt:e.deleted_at??null,sortOrder:r,dateObj:new Date,corrected:new Date(NaN),correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:e.calendar_type==="lunar"?"lunar":"solar",dir:"forward"};return Jm(i)}function pre(e,t){const n=typeof e.folder=="string"?e.folder.trim():"",r=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,sort_order:r,folder:n||null,favorite:!!e.favorite,updated_at:new Date().toISOString()}}function YD(e,t){const n=rx(e.birthDay??""),r=ix(e.birthTime??""),i=e.birthPlace??{name:"",lat:0,lon:127.5},a=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:n||null,birth_time:r||null,gender:Mp(e.gender),birth_place_name:i.name??null,birth_place_lat:typeof i.lat=="number"?i.lat:null,birth_place_lon:typeof i.lon=="number"?i.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:typeof e.folder=="string"?e.folder:null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,calendar_type:e.calendarType??"solar",favorite:e.favorite??!1,deleted_at:e.deletedAt??null,sort_order:a,updated_at:new Date().toISOString()}}const b2="hm_session_started_at_ms",gre=7200*1e3;function N6(){return typeof window>"u"?null:window.localStorage}function bre(){const e=N6();if(!e)return Date.now();const t=e.getItem(b2),n=t?Number(t):NaN;if(Number.isFinite(n))return n;const r=Date.now();return e.setItem(b2,String(r)),r}function O6(e=Date.now()){const t=N6();if(t)try{t.setItem(b2,String(e))}catch{}}function yre(e=Date.now()){const t=bre();return e-t>=gre}const qg="myeongsik-list";function vre(e){try{return JSON.parse(e)}catch{return null}}async function xre(e){if(typeof window>"u")return;const t=window.localStorage.getItem(qg);if(!t)return;const n=vre(t);if(!n){window.localStorage.removeItem(qg);return}const r=n.state??{},i=Array.isArray(r.list)?r.list:[];if(i.length===0){window.localStorage.removeItem(qg);return}const a=await e.getUser();if(!a)return;const o=await e.fetchRows(a.id),l=new Set(o.map(d=>d.id)),u=i.filter(d=>!!d&&typeof d.id=="string"&&d.id.trim()!==""&&!l.has(d.id));for(const d of u)await e.upsertOne(a.id,d);window.localStorage.removeItem(qg)}const wre=250;function _re(e){return e.map(t=>{const n=typeof t.folder=="string"?t.folder.trim():"",r=typeof t.sortOrder=="number"&&Number.isFinite(t.sortOrder)?t.sortOrder:"",i=t.favorite?1:0;return`${t.id}:${r}:${n}:${i}`}).join("|")}function Sre(e){if(typeof window>"u")return;const t=window,n="__hm_reorder_flush_installed__";t[n]!==!0&&(t[n]=!0,window.addEventListener("beforeunload",()=>e()),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}))}function kre(e){let t=null,n=null,r=!1,i="";async function a(){if(!r){r=!0;try{for(;n;){const l=n;if(n=null,l.key&&l.key===i){l.resolve();continue}const u=await e.getUser();if(!u){console.warn("reorder flush skipped: no user"),l.resolve();continue}await e.upsertOrderPatch(u.id,l.list),i=l.key,l.resolve()}}finally{r=!1}}}Sre(()=>{a()});function o(l,u){const d=_re(l);if(d&&d===i&&!n)return Promise.resolve();if(n)n.key=d,n.list=l;else{let h;const m=new Promise(b=>{h=b});n={key:d,list:l,promise:m,resolve:h}}return typeof window>"u"?(a(),n.promise):(t&&window.clearTimeout(t),u?.immediate?a():t=window.setTimeout(()=>{t=null,a()},wre),n.promise)}return{queue:o,flushNow:a}}const gr="__UNASSIGNED__",Ere=[" ",""],Gl=e=>typeof e=="string"?e.trim():"",C6=e=>Ere.includes(e);function Ud(e,t){const n=[],r=[];for(const i of e){const a=Gl(i);a&&(t[a]?n.push(a):r.push(a))}return[...n,...r]}function ax(e,t){const n=new Set(t.map(o=>Gl(o)).filter(o=>o!=="")),r=new Set,i=Object.create(null),a=(o,l)=>{i[o]||(i[o]=[]),i[o].push(l)};for(const o of e){const l=String(o.id??"");if(!l||r.has(l))continue;r.add(l);const u=Gl(o.folder),d=!u||C6(u)?gr:n.has(u)?u:gr;a(d,o)}i[gr]||(i[gr]=[]);for(const o of t){const l=Gl(o);l&&(i[l]||(i[l]=[]))}return i}function Gj(e,t){const n=[];for(const i of t){const a=Gl(i);if(!a)continue;const o=e[a];Array.isArray(o)&&n.push(...o)}const r=e[gr];return Array.isArray(r)&&r.length&&n.push(...r),n}function jre(e){const{list:t,orderedFolders:n,source:r,destination:i}=e,a=ax(t,n),o=r.droppableId===gr?gr:r.droppableId,l=i.droppableId===gr?gr:i.droppableId,u=[...a[o]??[]],d=o===l?u:[...a[l]??[]],h=u[r.index];if(!h)return{nextList:t,changedIds:[]};u.splice(r.index,1);const b=o!==l&&l===gr,y=Math.max(0,Math.min(i.index,d.length)),k=b?d.length:y;o===l?u.splice(k,0,h):d.splice(k,0,h);const w=String(h.id),_=new Set([w]),T={...h,folder:l===gr?"":l};return a[o]=u,a[l]=o===l?u:d,a[l]=(a[l]??[]).map(O=>String(O.id)===w?T:O),{nextList:Gj(a,n),changedIds:Array.from(_)}}function Tre(e){const{list:t,orderedFolders:n,targetId:r,nextFolder:i}=e,a=ax(t,n),o=[...n.map(T=>Gl(T)),gr].filter(Boolean);let l=null,u=-1;for(const T of o){const j=(a[T]??[]).findIndex(C=>String(C.id)===r);if(j>=0){l=T,u=j;break}}if(!l||u<0)return{nextList:t,changedIds:[]};const d=[...a[l]??[]],h=d[u];if(!h)return{nextList:t,changedIds:[]};d.splice(u,1);const m=Gl(i),b=!m||C6(m)?gr:m,y=l!==b,k=y?[...a[b]??[]]:d,w=String(h.id),_={...h,folder:b===gr?"":b};return y?k.push(_):d.splice(u,0,_),a[l]=d,a[b]=y?k:d,{nextList:Gj(a,n),changedIds:[w]}}function Are(e){const{list:t,targetId:n,orderedFolders:r}=e,i=ax(t,r);let a=null,o=null;const l=[...r.map(y=>Gl(y)),gr].filter(Boolean);for(const y of l){const k=i[y]??[],w=k.findIndex(_=>String(_.id)===n);if(w>=0){a=y,o=k[w]??null;break}}if(!a||!o)return{nextList:t,nextItem:null};const u=[...i[a]??[]],d=u.findIndex(y=>String(y.id)===n);if(d<0)return{nextList:t,nextItem:null};const h=u[d],m=!h.favorite,b={...h,favorite:m};return u.splice(d,1),m?u.unshift(b):u.push(b),i[a]=u,{nextList:Gj(i,r),nextItem:b}}function Nre(e){const{list:t,folderName:n}=e,r=n.trim();if(!r)return{nextList:t,changedIds:[]};const i=[],a=[],o=[];for(const l of t){if((l.folder??"").trim()!==r){a.push(l);continue}i.push(String(l.id)),o.push({...l,folder:""})}return{nextList:[...a,...o],changedIds:i}}function M6(e){return e.trim().length>0}const em=e=>e.toLowerCase().replace(/\s+/g," ").trim(),Ore=e=>e.replace(/\D/g,""),Cre=e=>{const t=typeof e.birthDay=="string"?e.birthDay:"",n=Ore(t);if(n.length!==8)return t?[t]:[];const r=n.slice(0,4),i=n.slice(4,6),a=n.slice(6,8);return[n,`${r}-${i}-${a}`,`${r}.${i}.${a}`,`${r}/${i}/${a}`,`${r}${i}${a}`]},Mre=e=>{const t=[],n=typeof e.ganji=="string"?e.ganji:"",r=typeof e.ganjiText=="string"?e.ganjiText:"",i=typeof e.dayStem=="string"?e.dayStem:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},Dre=e=>{const t=[],n=typeof e.memo=="string"?e.memo:"",r=typeof e.relationship=="string"?e.relationship:"",i=e.birthPlace&&typeof e.birthPlace=="object"&&typeof e.birthPlace.name=="string"?e.birthPlace.name:"";return n&&t.push(n),r&&t.push(r),i&&t.push(i),t},qD=(e,t,n)=>{const r=em(t);if(!r)return!0;const i=em(typeof e.name=="string"?e.name:""),a=Cre(e).map(em),o=Mre(e).map(em),l=Dre(e).map(em),u=h=>h.includes(r),d=h=>h.some(u);switch(n){case"name":return u(i);case"birth":return d(a);case"ganji":return d(o);case"memo":return d(l);case"all":default:return u(i)||d(a)||d(o)||d(l)}};function Pre(e){const{search:t,searchMode:n,orderedFolders:r,grouped:i,unassignedItems:a}=e;if(!M6(t)){const d={};for(const h of r){const m=typeof h=="string"?h.trim():"";m&&(d[m]=i[m]??[])}return{filteredGrouped:d,filteredUnassigned:a??[],totalMatches:(a?.length??0)+r.reduce((h,m)=>h+(i[m]?.length??0),0)}}const o={};let l=0;for(const d of r){const h=typeof d=="string"?d.trim():"";if(!h)continue;const b=(i[h]??[]).filter(y=>qD(y,t,n));o[h]=b,l+=b.length}const u=(a??[]).filter(d=>qD(d,t,n));return l+=u.length,{filteredGrouped:o,filteredUnassigned:u,totalMatches:l}}function Rre(e){return"source"in e&&"destination"in e?e:{orderedFolders:e.orderedFolders,source:{droppableId:(e.sourceFolder??gr).toString(),index:e.sourceIndex},destination:{droppableId:(e.destinationFolder??gr).toString(),index:e.destinationIndex}}}function Lre(e,t){const n=String(t.eventType??""),r=g2(t.new),i=g2(t.old),a=r??i;if(!a)return e;if(n==="DELETE"||a.deleted_at)return e.filter(d=>d.id!==a.id);const o=A6(a),u=e.some(d=>d.id===o.id)?e.map(d=>d.id===o.id?o:d):[...e,o];return uu(u)}async function Ire(e){if(!e)return;const t=De;if(typeof t.removeChannel=="function"){await t.removeChannel(e);return}if(typeof t.removeSubscription=="function"){await t.removeSubscription(e);return}}function $re(){return["id","user_id","name","birth_day","birth_time","gender","birth_place_name","birth_place_lat","birth_place_lon","relationship","memo","folder","ming_sik_type","day_change_rule","calendar_type","favorite","deleted_at","created_at","updated_at","sort_order"].join(", ")}function Bre(){return{async getUser(){const{data:e,error:t}=await De.auth.getUser();return t||!e.user?null:{id:e.user.id}},async fetchRows(e){const{data:t,error:n}=await De.from("myeongsik").select($re()).eq("user_id",e).is("deleted_at",null).order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1});return n||!t?[]:(Array.isArray(t)?t:[]).map(i=>g2(i)).filter(i=>i!==null).filter(i=>i.user_id===e)},async upsertOne(e,t){const n=YD(t,e),{error:r}=await De.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik upsert error:",r)},async updateOne(e,t,n){const r=YD(n,e),{error:i}=await De.from("myeongsik").update(r).eq("id",t);i&&console.error("myeongsik update error:",i)},async softDelete(e){const t=new Date().toISOString(),{error:n}=await De.from("myeongsik").update({deleted_at:t}).eq("id",e);n&&console.error("myeongsik softDelete error:",n)},async upsertOrderPatch(e,t){const n=t.map(i=>pre(i,e)),{error:r}=await De.from("myeongsik").upsert(n,{onConflict:"id"});r&&console.error("myeongsik orderPatch upsert error:",r)},async subscribe(e,t,n){const r=De.channel(`myeongsik:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"myeongsik",filter:`user_id=eq.${e}`},a=>{typeof a!="object"||a===null||t(a)}).subscribe(a=>{n&&n(String(a))});return{async unsubscribe(){await Ire(r)}}}}}function zre(e){return e.trim().toLowerCase().replace(/\s+/g,"").replace(/-/g,"_")}function Em(e){if(!e)return"FREE";const t=zre(e);return t==="free"?"FREE":t==="basic"?"BASIC":t==="pro"?"PRO":t==="prompt_hidden"||t==="prompt_hide"||t==="hidden"||t==="hide"||t==="prompt_locked"||t==="prompt_lock"||t==="locked"||t==="lock"?"FREE":t==="prompt_full"||t==="full"?"PRO":t==="ms_all"||t==="msall"||t==="basic_3"||t==="basic3"||t==="basic_5"||t==="basic5"||t==="basic_10"||t==="basic10"?"BASIC":t==="pro_select"||t==="proselect"?"PRO":"FREE"}function y2(e){switch(e){case"FREE":return{maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1};case"BASIC":return{maxMyeongsik:9999,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!1};case"PRO":return{maxMyeongsik:null,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!0,canUseAdvancedReport:!0,canRemoveAds:!0}}}const Kg={plan:"FREE",maxMyeongsik:1,canManageMyeongsik:!0,canUseLuckTabs:!0,canUseMultiMode:!0,canUseAllPrompts:!1,canUseAdvancedReport:!1,canRemoveAds:!1,canUseMyoViewer:!1,startsAt:null,expiresAt:null};function Ure(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.floor(e);if(typeof e=="string"&&e.trim()!==""){const n=Number(e);return Number.isFinite(n)?Math.floor(n):t}return t}function KD(e){if(typeof e!="string"||e.trim()==="")return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function WD(e,t,n=Date.now()){return!(e&&e.getTime()>n||t&&t.getTime()<=n)}function Fre(e){return e?e.can_use_myo_viewer===!0:!1}async function Hre(e){const{data:t,error:n}=await De.from("user_entitlements").select("plan,max_myeongsik,starts_at,expires_at,can_use_myo_viewer").eq("user_id",e).maybeSingle();return n?null:t??null}const yn=Yo((e,t)=>({loaded:!1,loading:!1,userId:null,...Kg,reset:()=>{e({loaded:!1,loading:!1,userId:null,...Kg})},loadFromServer:async n=>{if(!t().loading){e({loading:!0});try{const{data:i,error:a}=await De.auth.getUser(),o=i.user?.id??null;if(a||!o){e({...Kg,loaded:!0,userId:null});return}const l=t();if(!n?.force&&l.loaded&&l.userId===o)return;const u=await Hre(o);if(!u){const O=y2("FREE");e({loaded:!0,userId:o,plan:"FREE",maxMyeongsik:O.maxMyeongsik===null?9999:O.maxMyeongsik,canManageMyeongsik:O.canManageMyeongsik,canUseLuckTabs:O.canUseLuckTabs,canUseMultiMode:O.canUseMultiMode,canUseAllPrompts:O.canUseAllPrompts,canUseAdvancedReport:O.canUseAdvancedReport,canRemoveAds:O.canRemoveAds,canUseMyoViewer:!1,startsAt:null,expiresAt:null});return}const d=KD(u.starts_at??null),h=KD(u.expires_at??null),m=WD(d,h),b=Em(u.plan??null),y=m?b:"FREE",k=y2(y),w=k.maxMyeongsik===null?9999:k.maxMyeongsik,_=Ure(u.max_myeongsik,w),T=Math.max(1,Math.max(_,w));e({loaded:!0,userId:o,plan:y,maxMyeongsik:T,canManageMyeongsik:k.canManageMyeongsik,canUseLuckTabs:k.canUseLuckTabs,canUseMultiMode:k.canUseMultiMode,canUseAllPrompts:k.canUseAllPrompts,canUseAdvancedReport:k.canUseAdvancedReport,canRemoveAds:k.canRemoveAds,canUseMyoViewer:Fre(u),startsAt:d,expiresAt:h})}catch(i){console.error("loadFromServer(entitlements) exception:",i),e({...Kg,loaded:!0,userId:null})}finally{e({loading:!1})}}},isActiveNow:()=>{const{startsAt:n,expiresAt:r}=t();return WD(n,r)},getRemainingMs:n=>{if(!n)return null;const r=n.getTime()-Date.now();return r>0?r:0},formatRemaining:n=>{const r=Math.floor(n/1e3),i=r%60,a=Math.floor(r/60),o=a%60,l=Math.floor(a/60),u=l%24,d=Math.floor(l/24),h=[];return d>0&&h.push(`${d}`),u>0&&h.push(`${u}`),d===0&&o>0&&h.push(`${o}`),h.length===0&&h.push(`${i}`),h.join(" ")},canAddMyeongsik:()=>({ok:!0}),canManageNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canManageMyeongsik},canUseLuckTabsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseLuckTabs},canUseMultiModeNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseMultiMode},canUseAllPromptsNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAllPrompts},canUseAdvancedReportNow:()=>{const n=t();return n.loaded&&n.isActiveNow()&&n.canUseAdvancedReport},shouldShowAdsNow:()=>{const n=t();return!n.loaded||!n.isActiveNow()?!0:!n.canRemoveAds},canUseMyoViewerNow:()=>{const n=t();return n.loaded&&n.canUseMyoViewer}})),Yj="guest_myeongsik_v1";function D6(e){return typeof e=="object"&&e!==null}function v2(e,t){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const n=Number(e);if(Number.isFinite(n))return n}return t}function Ri(e,t=""){return typeof e=="string"?e:t}function Gre(e,t=!1){return typeof e=="boolean"?e:t}function Yre(e){return D6(e)?{name:Ri(e.name,""),lat:v2(e.lat,0),lon:v2(e.lon,0)}:{name:"",lat:0,lon:0}}function qre(e){return{id:e.id,sortOrder:typeof e.sortOrder=="number"?e.sortOrder:1,name:e.name??"",birthDay:e.birthDay??"",birthTime:e.birthTime??"",gender:e.gender??"",birthPlace:e.birthPlace??{name:"",lat:0,lon:0},relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:e.mingSikType??"/",DayChangeRule:e.DayChangeRule??"",favorite:!!e.favorite,calendarType:e.calendarType??"solar",dir:e.dir??"forward"}}function Kre(e){if(!D6(e))return null;const t={id:Ri(e.id,""),sortOrder:v2(e.sortOrder,1),name:Ri(e.name,""),birthDay:Ri(e.birthDay,""),birthTime:Ri(e.birthTime,""),gender:Ri(e.gender,""),birthPlace:Yre(e.birthPlace),relationship:Ri(e.relationship,""),memo:Ri(e.memo,""),folder:Ri(e.folder,""),mingSikType:Ri(e.mingSikType,"/"),DayChangeRule:Ri(e.DayChangeRule,""),favorite:Gre(e.favorite,!1),calendarType:Ri(e.calendarType,"solar"),dir:Ri(e.dir,"forward")};return t.id?Jm(t):null}function P6(){try{const e=localStorage.getItem(Yj);if(!e)return[];const t=JSON.parse(e);if(!Array.isArray(t))return[];const n=t.map(Kre).filter(r=>r!==null);return uu(n)}catch{return[]}}function Ml(e){try{const t=e.map(qre);localStorage.setItem(Yj,JSON.stringify(t))}catch{}}function R6(){try{localStorage.removeItem(Yj)}catch{}}const ks=Yo(e=>({open:!1,reason:"HEADER",openWith:t=>e({open:!0,reason:t}),close:()=>e({open:!1})})),qn=Bre(),Wre=kre(qn);function Kc(){const t=yn.getState().canManageNow();return t||console.warn("[myeongsik] blocked: canManageNow=false"),t}function Vre(e){const n=yn.getState().canAddMyeongsik(e);return n.ok||console.warn("[myeongsik] blocked: canAddMyeongsik",n.message),n.ok}async function VD(e){const t=P6();if(t.length)try{for(const n of t)await qn.upsertOne(e,n);R6()}catch(n){console.warn("[myeongsik] migrateGuestListToServerIfAny failed:",n)}}const En=Yo((e,t)=>({loading:!1,loaded:!1,loadedUserId:null,realtimeReady:!1,list:[],currentId:null,_rtSub:null,_rtUserId:null,getCurrent:()=>{const{list:n,currentId:r}=t();return r?n.find(i=>i.id===r)??null:null},setCurrentId:n=>e({currentId:n}),startRealtime:async()=>{if(typeof window>"u")return;if(yre()){O6(Date.now()),window.location.reload();return}const n=await qn.getUser();if(!n){await t().stopRealtime(),e({realtimeReady:!1});return}if(t()._rtUserId===n.id&&t()._rtSub){e({realtimeReady:!0});return}await t().stopRealtime();const r=await qn.subscribe(n.id,i=>{e(a=>({list:Lre(a.list,i)}))},i=>{i==="SUBSCRIBED"&&e({realtimeReady:!0})});e({_rtSub:r,_rtUserId:n.id})},stopRealtime:async()=>{const n=t()._rtSub;if(n)try{await n.unsubscribe()}catch(r){console.warn("stopRealtime error",r)}e({_rtSub:null,_rtUserId:null,realtimeReady:!1})},loadFromServer:async()=>{if(!t().loading){e({loading:!0});try{const n=await qn.getUser(),r=t();if(n&&r.loaded&&r.loadedUserId===n.id){e({loading:!1});return}if(!n){const u=P6(),d=u[0]?.id??null;e({list:u,currentId:d,loaded:!0,loadedUserId:null}),await t().stopRealtime();return}await VD(n.id);const i=await qn.fetchRows(n.id),a=uu(i.map(A6)),o=t().currentId,l=o&&a.some(u=>u.id===o)?o:a[0]?.id??null;e({list:a,currentId:l,loaded:!0,loadedUserId:n.id}),await t().startRealtime()}catch(n){console.error("useMyeongSikStore.loadFromServer exception:",n)}finally{e({loading:!1})}}},migrateLocalToServer:async()=>{try{await xre(qn);const n=await qn.getUser();n&&await VD(n.id)}catch(n){console.error("useMyeongSikStore.migrateLocalToServer exception:",n)}},add:async n=>{const r=await qn.getUser(),i=t().list.length;if(!Vre(i)){r||ks.getState().openWith("ADD_LIMIT");return}const a=(i||0)+1,o={...n,sortOrder:n.sortOrder??a},l=Jm(o),u=t().list,d=uu([...u,l]),h=t().currentId??l.id;if(e({list:d,currentId:h}),!r){Ml(d),d.length===1&&ks.getState().openWith("PERSIST_SAVE");return}await qn.upsertOne(r.id,l)},update:async(n,r)=>{const i=await qn.getUser();if(i&&!Kc())return;const a=t().list.find(u=>u.id===n);if(!a)return;const o=Jm({...a,...r}),l=uu(t().list.map(u=>u.id===n?o:u));if(e({list:l}),!i){Ml(l);return}await qn.updateOne(i.id,n,o)},remove:async n=>{const r=await qn.getUser();if(r&&!Kc())return;const a=t().list.filter(l=>l.id!==n),o=t().currentId===n?a[0]?.id??null:t().currentId;if(e({list:a,currentId:o}),!r){Ml(a);return}await qn.softDelete(n)},moveItemByDnD:async n=>{const r=t().list,i=Rre(n),o=jre({list:r,orderedFolders:i.orderedFolders,source:i.source,destination:i.destination}).nextList;e({list:o});const l=await qn.getUser();if(l&&!Kc()){e({list:r});return}if(!l){Ml(o);return}await t().reorder(o)},applyNextList:async n=>{const r=t().list;e({list:n});const i=await qn.getUser();if(i&&!Kc()){e({list:r});return}if(!i){Ml(n);return}await t().reorder(n)},toggleFavoriteWithReorder:async(n,r)=>{const i=await qn.getUser();if(i&&!Kc())return;const o=Are({list:t().list,targetId:n,orderedFolders:r}).nextList;if(e({list:o}),!i){Ml(o);return}await t().reorder(o)},unsetFolderForFolder:async n=>{const r=await qn.getUser();if(r&&!Kc())return;const i=(n??"").trim();if(!i)return;const a=t().list,o=Nre({list:a,folderName:i}),l=uu(o.nextList),u=new Set(o.changedIds);if(u.size===0)return;if(e({list:l}),!r){Ml(l);return}const d=l.filter(h=>u.has(h.id));await qn.upsertOrderPatch(r.id,d)},reorder:async n=>{const r=await qn.getUser();if(r&&!Kc())return;const i=n.map((o,l)=>({...o,sortOrder:l+1})),a=uu(i);if(e({list:a}),!r){Ml(a);return}await Wre.queue(a)},clear:()=>{e({currentId:null,list:[],loaded:!1,loadedUserId:null}),R6()}})),ZD="__custom__",Wg=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],L6=({value:e,onChange:t})=>{const[n,r]=S.useState(Wg),[i,a]=S.useState(""),[o,l]=S.useState(!1),[u,d]=S.useState(""),[h,m]=S.useState(!1),{list:b}=En(),y=(e??i??"").trim(),k=y==="",w=b.some(P=>(P.relationship??"").trim()===""),_=w&&!k?n.filter(P=>P.value!==""):n,T=S.useMemo(()=>{const P=_.find(I=>I.value==="");return P?[P,..._.filter(I=>I.value!=="")]:_},[_]);S.useEffect(()=>{e!==void 0&&a(e)},[e]),S.useEffect(()=>{y||w||(a(""),t?.(""))},[y,w,t]);const O=P=>{const I=P.target.value;I===ZD?(l(!0),a(""),t?.("")):(l(!1),d(""),a(I),t?.(I))};S.useEffect(()=>{const P=localStorage.getItem("relationshipOptions");if(P)try{const I=JSON.parse(P),U=new Set,W=[...I,...Wg].filter(q=>!q||!q.value||U.has(q.value)?!1:(U.add(q.value),!0));r(W)}catch{r(Wg)}},[]),S.useEffect(()=>{(async()=>{const{data:{user:I},error:U}=await De.auth.getUser();if(U||!I)return;const{data:W,error:q}=await De.from("user_settings").select("payload").eq("user_id",I.id).single();if(q&&q.code!=="PGRST116"){console.error("load relationships settings error",q.message);return}const H=W?.payload?.relationshipOptions;if(!Array.isArray(H))return;const B=H.map(K=>K&&typeof K=="object"&&typeof K.value=="string"&&typeof K.label=="string"?{value:K.value,label:K.label}:typeof K=="string"?{value:K,label:K}:null).filter(K=>!!K);B.length&&r(K=>{const V=new Set,Z=[...B,...K,...Wg].filter(G=>V.has(G.value)?!1:(V.add(G.value),!0));return localStorage.setItem("relationshipOptions",JSON.stringify(Z)),Z})})()},[]),S.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:I},error:U}=await De.auth.getUser();if(U||!I)return;const{data:W,error:q}=await De.from("user_settings").select("payload").eq("user_id",I.id).single();if(q&&q.code!=="PGRST116"){console.error("load relationships settings error",q.message);return}const H={...W?.payload??{},relationshipOptions:n},{error:B}=await De.from("user_settings").upsert({user_id:I.id,payload:H,updated_at:new Date().toISOString()});B&&console.error("save relationships settings error",B.message)})()},[n]);const j=()=>{const P=u.trim();if(!P)return;const I={value:P,label:P};r(U=>[...U,I]),a(P),t?.(P),d(""),l(!1)},C=P=>{r(n.filter(I=>I.value!==P)),i===P&&a("")},M=P=>{if(!P.destination)return;const I=Array.from(n),[U]=I.splice(P.source.index,1);I.splice(P.destination.index,0,U),r(I)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:i,onChange:O,children:[g.jsx("option",{value:"",hidden:!0,children:" "}),T.map(P=>g.jsx("option",{value:P.value,children:P.label},P.value)),g.jsx("option",{value:ZD,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>m(!0),className:"btn_style",children:" "})]}),o&&!h&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:"  ",value:u,onChange:P=>d(P.target.value)}),g.jsx("button",{type:"button",onClick:j,className:"btn_style",children:" "})]}),h&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(Np,{onDragEnd:M,children:g.jsx(Nf,{droppableId:"relList",children:P=>g.jsxs("ul",{ref:P.innerRef,...P.droppableProps,className:"space-y-1",children:[n.map((I,U)=>g.jsx(Af,{draggableId:I.value,index:U,children:W=>g.jsxs("li",{ref:W.innerRef,...W.draggableProps,...W.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:I.label}),g.jsx("button",{type:"button",className:"text-red-500 cursor-pointer",onClick:()=>C(I.value),children:""})]})},I.value)),P.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full btn_style mt-2",children:""})]})]})},kn=" ",I6=["","","","","",""],$6="ms_folders",B6="ms_folder_order",XD="ms_folder_favs",x2="ms_disabled_presets",Vl="myeoun:folder-updated";function yu(e){if(e!==kn)return e||void 0}function ox(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(r=>typeof r=="string"):[]}catch{return[]}}function qj(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function Zre(){const e=ox(x2);return I6.filter(t=>!e.includes(t))}function Kj(){return ox($6)}function Wj(e){const t=Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()!==""):[];qj($6,t),typeof window<"u"&&window.dispatchEvent(new Event(Vl))}function Ny(){const e=Zre(),t=Kj(),n=new Set,r=[];for(const i of[...e,...t])n.has(i)||(n.add(i),r.push(i));return r}function Xre(){return[kn,...Ny()]}function z6(e){const t=e.trim();if(!t||t===kn)return;const n=Kj();if(n.includes(t))return;const r=[...n,t];Wj(r)}function Jre(e){const t=Kj(),n=t.filter(r=>r!==e);n.length!==t.length&&Wj(n)}function Qre(e){const t=ox(x2);if(t.includes(e))return;const n=[...t,e];qj(x2,n),typeof window<"u"&&window.dispatchEvent(new Event(Vl))}function Oy(){return ox(B6)}function Fd(e){qj(B6,e),typeof window<"u"&&window.dispatchEvent(new Event(Vl))}function Pm(e,t){const n=new Set(e),r=[];for(const i of t)n.has(i)&&!r.includes(i)&&r.push(i);for(const i of e)r.includes(i)||r.push(i);return r}function eie(e){return Array.from(new Set(e))}function Vg(e){const t=e.filter(n=>n!==kn);return{rest:t,withUnassigned:[kn,...t]}}function tie(e,t){return Pm(t,e)}function nie({value:e,onChange:t}){const[n,r]=S.useState([kn]),[i,a]=S.useState(!1),[o,l]=S.useState(""),[u,d]=S.useState(!1),h=S.useCallback(async _=>{const{data:{user:T},error:O}=await De.auth.getUser();if(O||!T)return;const j=_.map((M,P)=>({user_id:T.id,folder_name:M,sort_order:P+1,updated_at:new Date().toISOString()})),{error:C}=await De.from("user_folder_order").upsert(j,{onConflict:"user_id,folder_name"});C&&console.error("save folder order error",C.message)},[]),m=S.useCallback(()=>{if(typeof window>"u")return;const _=eie(Xre()),T=_.includes(kn)?_:[kn,..._],{rest:O}=Vg(T),j=Oy(),C=tie(j,O),M=[kn,...C];r(M),j.length===C.length&&j.every((I,U)=>I===C[U])||(Fd(C),h(C))},[h]);S.useEffect(()=>{if(m(),typeof window<"u"){const _=()=>m();return window.addEventListener(Vl,_),()=>window.removeEventListener(Vl,_)}},[m]);const b=S.useMemo(()=>e||kn,[e]),y=_=>{const{rest:T}=Vg(_);Fd(T),h(T)},k=_=>{const{source:T,destination:O}=_;if(!O||O.index===T.index)return;const{rest:j}=Vg(n),C=Array.from(j),[M]=C.splice(T.index,1);C.splice(O.index,0,M);const P=[kn,...C];r(P),y(P)},w=_=>{const T=yu(_);T&&(z6(T),m())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:i?"__custom__":b,onChange:_=>{const T=_.target.value;if(T==="__custom__"){a(!0),t(void 0);return}a(!1),t(yu(T))},children:[n.map(_=>g.jsx("option",{value:_,children:_},_)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>d(_=>!_),children:u?" ":" "})]}),i&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const _=o.trim();_&&(w(_),t(yu(_)),a(!1),l(""))},children:""})]}),u&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[kn," ()"]})]}),g.jsx(Np,{onDragEnd:k,children:g.jsx(Nf,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:_=>g.jsxs("ul",{ref:_.innerRef,..._.droppableProps,className:"space-y-1",children:[Vg(n).rest.map((T,O)=>g.jsx(Af,{draggableId:T,index:O,children:j=>g.jsxs("li",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:T})]})},T)),_.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',kn,'" .      .']})]})}function U6({message:e,onClose:t,ms:n=2e3}){return S.useEffect(()=>{const r=setTimeout(t,n);return()=>clearTimeout(r)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}const JD=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:"",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:"",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],rie=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],iie=["","/",""],aie=["",""],F6={gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"};function oie(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function sie(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function lie(){const[e,t]=S.useState(0),[n,r]=S.useState({...F6}),[i,a]=S.useState(null),[o,l]=S.useState(!1),[u,d]=S.useState(!1);return{stepIndex:e,setStepIndex:t,form:n,setForm:r,toast:i,setToast:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d}}function cie({currentStepKey:e,birthPlace:t,unknownPlace:n,stepIndex:r}){S.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(e)){const a=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(a){a.focus();return}}if(e==="mingSikType"){const a=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="gender"){const a=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(a){a.focus();return}}if(e==="birthPlace"){if(t||n){const a=()=>{const o=document.querySelector(".current-step form button[type='submit']");o&&o.focus()};a(),setTimeout(a,0)}else{const a=document.getElementById("inputBirthPlaceBtn");a&&a.focus()}return}if(e==="relationship"||e==="folder"){setTimeout(()=>{const a=document.querySelector(".current-step select");a&&a.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[n,r,e,t])}function uie(e,t){if(e!=="lunar"||!t||t.length!==8)return null;try{const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=Vi(n,r,i);return` ${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}catch(n){const r=n instanceof Error?n.message:void 0;return` ${r?`: ${r}`:""}`}}function die(e,t,n,r){switch(e){case"birthPlace":return r?"":t.birthPlace?.name||"";case"birthTime":return n?"":t.birthTime||"";case"folder":return t.folder?String(t.folder):kn;default:{const a=t[e];return typeof a=="string"?a:a!=null?String(a):""}}}function fie({form:e,unknownTime:t,unknownPlace:n,stepIndex:r}){const i=JD[r],a=S.useMemo(()=>uie(e.calendarType,e.birthDay),[e.calendarType,e.birthDay]);return{steps:JD,currentStep:i,lunarPreview:a,displayValue:l=>die(l,e,t,n),CALENDAR_OPTIONS:rie,MING_OPTIONS:iie,GENDER_OPTIONS:aie,nextIndex:oie,focusById:sie,isDST:Xm}}function hie(){return{add:En(t=>t.add)}}const Tr=[];for(let e=0;e<256;++e)Tr.push((e+256).toString(16).slice(1));function mie(e,t=0){return(Tr[e[t+0]]+Tr[e[t+1]]+Tr[e[t+2]]+Tr[e[t+3]]+"-"+Tr[e[t+4]]+Tr[e[t+5]]+"-"+Tr[e[t+6]]+Tr[e[t+7]]+"-"+Tr[e[t+8]]+Tr[e[t+9]]+"-"+Tr[e[t+10]]+Tr[e[t+11]]+Tr[e[t+12]]+Tr[e[t+13]]+Tr[e[t+14]]+Tr[e[t+15]]).toLowerCase()}let k1;const pie=new Uint8Array(16);function gie(){if(!k1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k1=crypto.getRandomValues.bind(crypto)}return k1(pie)}const bie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),QD={randomUUID:bie};function H6(e,t,n){if(QD.randomUUID&&!e)return QD.randomUUID();e=e||{};const r=e.random??e.rng?.()??gie();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,mie(r)}function yie(e,t,n){const r=yu(e.folder);return T6({id:H6(),name:e.name,birthDay:e.birthDay??"",calendarType:e.calendarType??"solar",birthTime:e.birthTime,unknownTime:t,gender:e.gender,birthPlace:e.birthPlace,unknownPlace:n,relationship:e.relationship,memo:e.memo,folder:r,mingSikType:e.mingSikType,dateObj:e.dateObj||new Date},{requireName:!1})}function vie(e,t,n,r){if(e==="name"&&!t.name)return{ok:!0,message:"  '' .",nextForm:{...t,name:""}};if(e==="birthDay"){const i=Fj(t.birthDay??"",t.calendarType??"solar");if(!i.ok)return{ok:!1,message:i.message};if(t.birthDay!==i.value)return{ok:!0,nextForm:{...t,birthDay:i.value}}}if(e==="birthTime"){const i=Hj(t.birthTime??"",n);if(!i.ok)return{ok:!1,message:i.message};if(i.value!==""&&t.birthTime!==i.value)return{ok:!0,nextForm:{...t,birthTime:i.value}}}return e==="birthPlace"&&!t.birthPlace&&!r?{ok:!1,message:"  ''  ."}:{ok:!0}}function xie({form:e,setForm:t,stepIndex:n,setStepIndex:r,stepsLength:i,currentStepKey:a,unknownTime:o,setUnknownTime:l,unknownPlace:u,setUnknownPlace:d,setToast:h,onSave:m}){const{add:b}=hie(),y=S.useCallback(()=>{const w=vie(a,e,o,u);if(!w.ok){h(w.message??" .");return}if(w.nextForm&&(t(w.nextForm),w.message&&h(w.message)),n<i-1){r(n+1);return}const _=yie(e,o,u);if(!_.ok){h(_.message);return}const T=_.value;b(T),m(T),h(" !"),t({...F6}),l(!1),d(!1),r(0)},[a,e,o,u,h,t,n,i,r,b,m,l,d]),k=S.useCallback(w=>{if(w.key!=="Enter")return;const _=w.target,T=_.getAttribute("role");if(T==="radio"||T==="checkbox")return;const O=document.getElementById("mapModal");if(O&&O.contains(_))return;const j=_.tagName.toLowerCase(),C=_ instanceof HTMLInputElement?_.type:"";if(j==="textarea"){if(w.shiftKey)return;w.preventDefault(),y();return}if(C==="radio"||C==="checkbox"){w.preventDefault(),_ instanceof HTMLInputElement&&_.click();return}j==="button"&&_.type!=="submit"||(w.preventDefault(),y())},[y]);return{handleNext:y,handleFormKeyDown:k}}function wie({onSave:e}){const t=lie(),n=fie({form:t.form,unknownTime:t.unknownTime,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});cie({currentStepKey:n.currentStep.key,birthPlace:t.form.birthPlace,unknownPlace:t.unknownPlace,stepIndex:t.stepIndex});const r=xie({form:t.form,setForm:t.setForm,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,stepsLength:n.steps.length,currentStepKey:n.currentStep.key,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,setToast:t.setToast,onSave:e});return{steps:n.steps,stepIndex:t.stepIndex,setStepIndex:t.setStepIndex,currentStep:n.currentStep,form:t.form,setForm:t.setForm,toast:t.toast,setToast:t.setToast,unknownTime:t.unknownTime,setUnknownTime:t.setUnknownTime,unknownPlace:t.unknownPlace,setUnknownPlace:t.setUnknownPlace,lunarPreview:n.lunarPreview,handleNext:r.handleNext,handleFormKeyDown:r.handleFormKeyDown,displayValue:n.displayValue,CALENDAR_OPTIONS:n.CALENDAR_OPTIONS,MING_OPTIONS:n.MING_OPTIONS,GENDER_OPTIONS:n.GENDER_OPTIONS,nextIndex:n.nextIndex,focusById:n.focusById,isDST:n.isDST}}function _ie({onSave:e,onClose:t}){const n=wie({onSave:e});return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[n.toast&&g.jsx(U6,{message:n.toast,onClose:()=>n.setToast(null)}),n.steps.slice(0,n.stepIndex).map((r,i)=>g.jsxs("button",{onClick:()=>n.setStepIndex(i),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:r.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:n.displayValue(r.key)})]},r.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:r=>{r.preventDefault(),n.handleNext()},onKeyDown:n.handleFormKeyDown,children:[g.jsx("label",{className:"block mb-2 font-bold",children:n.currentStep.label}),n.currentStep.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.name||"",onChange:r=>n.setForm({...n.form,name:r.target.value})}),n.currentStep.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.birthDay||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthDay:i.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:n.CALENDAR_OPTIONS.map(({value:r,label:i,id:a})=>{const o=n.form.calendarType===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:a,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:a,id:`${a}_lbl`,role:"radio","aria-checked":o,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":o?"true":"false",onKeyDown:l=>{if(l.stopPropagation(),l.key===" "||l.key==="Enter"){l.preventDefault(),n.setForm({...n.form,calendarType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(l.key))return;l.preventDefault();const d=n.CALENDAR_OPTIONS.findIndex(b=>b.value===n.form.calendarType),h=n.nextIndex(d<0?0:d,n.CALENDAR_OPTIONS.length,l.key),m=n.CALENDAR_OPTIONS[h].value;n.setForm({...n.form,calendarType:m}),n.focusById(`${n.CALENDAR_OPTIONS[h].id}_lbl`)},onClick:l=>{l.preventDefault(),n.setForm({...n.form,calendarType:r})},children:i})]},r)})})]}),n.form.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:n.lunarPreview})}),n.form.birthDay&&n.form.birthDay.length===8&&(()=>{const r=Number(n.form.birthDay.slice(0,4)),i=Number(n.form.birthDay.slice(4,6)),a=Number(n.form.birthDay.slice(6,8));return n.isDST(r,i,a)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"  ."}):null})()]}),n.currentStep.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.unknownTime?"":n.form.birthTime||"",onChange:r=>{const i=r.target.value.replace(/\D/g,"");n.setForm({...n.form,birthTime:i.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:n.unknownTime}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":n.unknownTime,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownTime?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownTime(!n.unknownTime))},onClick:r=>{r.preventDefault(),n.setUnknownTime(!n.unknownTime)},children:""})]})]}),n.currentStep.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:n.MING_OPTIONS.map(r=>{const i=`ming_${r}`,a=(n.form.mingSikType??"/")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,mingSikType:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.mingSikType??"/",d=n.MING_OPTIONS.indexOf(u),h=n.nextIndex(d,n.MING_OPTIONS.length,o.key),m=n.MING_OPTIONS[h];n.setForm({...n.form,mingSikType:m}),n.focusById(`ming_${m}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,mingSikType:r})},children:[r," "]})]},r)})}),n.currentStep.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:n.GENDER_OPTIONS.map(r=>{const i=`gender_${r}`,a=(n.form.gender??"")===r;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:i,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:i,id:`${i}_lbl`,role:"radio","aria-checked":a,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":a?"true":"false",onKeyDown:o=>{if(o.stopPropagation(),o.key===" "||o.key==="Enter"){o.preventDefault(),n.setForm({...n.form,gender:r});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(o.key))return;o.preventDefault();const u=n.form.gender??"",d=n.GENDER_OPTIONS.indexOf(u),h=n.nextIndex(d,n.GENDER_OPTIONS.length,o.key),m=n.GENDER_OPTIONS[h];n.setForm({...n.form,gender:m}),n.focusById(`gender_${m}_lbl`)},onClick:o=>{o.preventDefault(),n.setForm({...n.form,gender:r})},children:r})]},r)})}),n.currentStep.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(f4,{onSelect:r=>n.setForm({...n.form,birthPlace:r}),value:n.unknownPlace?"":n.form.birthPlace?.name??""}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":n.unknownPlace,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":n.unknownPlace?"true":"false",onKeyDown:r=>{r.stopPropagation(),(r.key===" "||r.key==="Enter")&&(r.preventDefault(),n.setUnknownPlace(!n.unknownPlace))},onClick:r=>{r.preventDefault(),n.setUnknownPlace(!n.unknownPlace)},children:""})]})]}),n.currentStep.key==="relationship"&&g.jsx(L6,{value:n.form.relationship||"",onChange:r=>n.setForm({...n.form,relationship:r})}),n.currentStep.key==="folder"&&g.jsx(nie,{value:yu(n.form.folder),onChange:r=>n.setForm({...n.form,folder:r})}),n.currentStep.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:n.currentStep.placeholder,value:n.form.memo||"",onChange:r=>n.setForm({...n.form,memo:r.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:n.stepIndex===n.steps.length-1?"":""})]})]})})]})}var Zg={},eP;function Sie(){if(eP)return Zg;eP=1,Zg.match=a,Zg.parse=o;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function a(h,m){return o(h).some(function(b){var y=b.inverse,k=b.type==="all"||m.type===b.type;if(k&&y||!(k||y))return!1;var w=b.expressions.every(function(_){var T=_.feature,O=_.modifier,j=_.value,C=m[T];if(!C)return!1;switch(T){case"orientation":case"scan":return C.toLowerCase()===j.toLowerCase();case"width":case"height":case"device-width":case"device-height":j=d(j),C=d(C);break;case"resolution":j=u(j),C=u(C);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":j=l(j),C=l(C);break;case"grid":case"color":case"color-index":case"monochrome":j=parseInt(j,10)||1,C=parseInt(C,10)||0;break}switch(O){case"min":return C>=j;case"max":return C<=j;default:return C===j}});return w&&!y||!w&&y})}function o(h){return h.split(",").map(function(m){m=m.trim();var b=m.match(e),y=b[1],k=b[2],w=b[3]||"",_={};return _.inverse=!!y&&y.toLowerCase()==="not",_.type=k?k.toLowerCase():"all",w=w.match(/\([^\)]+\)/g)||[],_.expressions=w.map(function(T){var O=T.match(t),j=O[1].toLowerCase().match(n);return{modifier:j[1],feature:j[2],value:O[2]}}),_})}function l(h){var m=Number(h),b;return m||(b=h.match(/^(\d+)\s*\/\s*(\d+)$/),m=b[1]/b[2]),m}function u(h){var m=parseFloat(h),b=String(h).match(i)[1];switch(b){case"dpcm":return m/2.54;case"dppx":return m*96;default:return m}}function d(h){var m=parseFloat(h),b=String(h).match(r)[1];switch(b){case"em":return m*16;case"rem":return m*16;case"cm":return m*96/2.54;case"mm":return m*96/2.54/10;case"in":return m*96;case"pt":return m*72;case"pc":return m*72/12;default:return m}}return Zg}var E1,tP;function kie(){if(tP)return E1;tP=1;var e=Sie().match,t=typeof window<"u"?window.matchMedia:null;function n(i,a,o){var l=this,u;t&&!o&&(u=t.call(window,i)),u?(this.matches=u.matches,this.media=u.media,u.addListener(m)):(this.matches=e(i,a),this.media=i),this.addListener=d,this.removeListener=h,this.dispose=b;function d(y){u&&u.addListener(y)}function h(y){u&&u.removeListener(y)}function m(y){l.matches=y.matches,l.media=y.media}function b(){u&&u.removeListener(m)}}function r(i,a,o){return new n(i,a,o)}return E1=r,E1}var Eie=kie();const jie=_i(Eie);var Tie=/[A-Z]/g,Aie=/^ms-/,j1={};function Nie(e){return"-"+e.toLowerCase()}function G6(e){if(j1.hasOwnProperty(e))return j1[e];var t=e.replace(Tie,Nie);return j1[e]=Aie.test(t)?"-"+t:t}function Oie(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let a=0;a<i;a++){const o=n[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}var T1={exports:{}},A1,nP;function Cie(){if(nP)return A1;nP=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return A1=e,A1}var N1,rP;function Mie(){if(rP)return N1;rP=1;var e=Cie();function t(){}function n(){}return n.resetWarningCache=t,N1=function(){function r(o,l,u,d,h,m){if(m!==e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},N1}var iP;function Die(){return iP||(iP=1,T1.exports=Mie()()),T1.exports}var Pie=Die();const $t=_i(Pie),Kr=$t.oneOfType([$t.string,$t.number]),Y6={all:$t.bool,grid:$t.bool,aural:$t.bool,braille:$t.bool,handheld:$t.bool,print:$t.bool,projection:$t.bool,screen:$t.bool,tty:$t.bool,tv:$t.bool,embossed:$t.bool},Rie={orientation:$t.oneOf(["portrait","landscape"]),scan:$t.oneOf(["progressive","interlace"]),aspectRatio:$t.string,deviceAspectRatio:$t.string,height:Kr,deviceHeight:Kr,width:Kr,deviceWidth:Kr,color:$t.bool,colorIndex:$t.bool,monochrome:$t.bool,resolution:Kr,type:Object.keys(Y6)},{type:fMe,...Lie}=Rie,Iie={minAspectRatio:$t.string,maxAspectRatio:$t.string,minDeviceAspectRatio:$t.string,maxDeviceAspectRatio:$t.string,minHeight:Kr,maxHeight:Kr,minDeviceHeight:Kr,maxDeviceHeight:Kr,minWidth:Kr,maxWidth:Kr,minDeviceWidth:Kr,maxDeviceWidth:Kr,minColor:$t.number,maxColor:$t.number,minColorIndex:$t.number,maxColorIndex:$t.number,minMonochrome:$t.number,maxMonochrome:$t.number,minResolution:Kr,maxResolution:Kr,...Lie},$ie={...Y6,...Iie};var Bie={all:$ie};const zie=e=>`not ${e}`,Uie=(e,t)=>{const n=G6(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?zie(n):`(${n}: ${t})`},Fie=e=>e.join(" and "),Hie=e=>{const t=[];return Object.keys(Bie.all).forEach(n=>{const r=e[n];r!=null&&t.push(Uie(n,r))}),Fie(t)},Gie=S.createContext(void 0),Yie=e=>e.query||Hie(e),aP=e=>e?Object.keys(e).reduce((n,r)=>(n[G6(r)]=e[r],n),{}):void 0,q6=()=>{const e=S.useRef(!1);return S.useEffect(()=>{e.current=!0},[]),e.current},qie=e=>{const t=S.useContext(Gie),n=()=>aP(e)||aP(t),[r,i]=S.useState(n);return S.useEffect(()=>{const a=n();Oie(r,a)||i(a)},[e,t]),r},Kie=e=>{const t=()=>Yie(e),[n,r]=S.useState(t);return S.useEffect(()=>{const i=t();n!==i&&r(i)},[e]),n},Wie=(e,t)=>{const n=()=>jie(e,t||{},!!t),[r,i]=S.useState(n),a=q6();return S.useEffect(()=>{if(a){const o=n();return i(o),()=>{o&&o.dispose()}}},[e,t]),r},Vie=e=>{const[t,n]=S.useState(e.matches);return S.useEffect(()=>{const r=i=>{n(i.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},Zie=(e,t,n)=>{const r=qie(t),i=Kie(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const a=Wie(i,r),o=Vie(a);return q6(),S.useEffect(()=>{},[o]),S.useEffect(()=>()=>{a&&a.dispose()},[]),o},K6={Classic:"",Modern:""};function no(e,t){const r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return r?r[t]??"":""}function Xie(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function Jie(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function Qie(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function eae(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},i=n[e];return i&&r[i]?r[i][t]??"":""}function ro(e){const{baseBranch:t,targetBranch:n,era:r,gaehwa:i}=e;return!t||!n?"":r===""?i?Xie(t,n):Jie(t,n):i?Qie(t,n):eae(t,n)}const Jr=Yo()(B$((e,t)=>{const n=new Date,r="/",i=127.5,a=0,o=(b,y)=>y?new Date(b.getTime()+y*60*1e3):b,l=i,u=o(n,a),d=ct(u,l),h=At(u,l),m=ht(u,r);return{date:n,scope:"",rule:r,lon:i,dstOffsetMinutes:a,yearGZ:d,monthGZ:h,dayGZ:m,setDate:b=>{const{rule:y,lon:k,dstOffsetMinutes:w}=t(),_=typeof k=="number"?k:void 0,T=o(b,w);e({date:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:ht(T,y)})},resetDate:()=>{const{rule:b,lon:y,dstOffsetMinutes:k}=t(),w=new Date,_=typeof y=="number"?y:void 0,T=o(w,k);e({date:w,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:ht(T,b)})},resetMonth:()=>{const{lon:b,dstOffsetMinutes:y}=t(),k=new Date,w=typeof b=="number"?b:void 0,_=o(k,y);e({date:k,monthGZ:At(_,w)})},setScope:b=>e({scope:b}),setRule:b=>{const{date:y,lon:k,dstOffsetMinutes:w}=t(),_=typeof k=="number"?k:void 0,T=o(y,w);e({rule:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:ht(T,b)})},setLon:b=>{const{date:y,rule:k,dstOffsetMinutes:w}=t(),_=typeof b=="number"?b:void 0,T=o(y,w);e({lon:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:ht(T,k)})},setDstOffsetMinutes:b=>{const{date:y,rule:k,lon:w}=t(),_=typeof w=="number"?w:void 0,T=o(y,b);e({dstOffsetMinutes:b,yearGZ:ct(T,_),monthGZ:At(T,_),dayGZ:ht(T,k)})},setFromEvent:(b,y)=>{const{rule:k,lon:w,dstOffsetMinutes:_}=t(),T=typeof w=="number"?w:void 0,O=o(b.at,_);e({date:b.at,scope:y,yearGZ:ct(O,T),monthGZ:At(O,T),dayGZ:ht(O,k)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),tae=60*1e3,W6=60*tae,nae=24*W6,rae=(e,t)=>{const n=new Date(e.getTime()),r=n.getFullYear()+t,i=n.getMonth(),a=n.getDate();return new Date(Date.UTC(r,i,a,n.getUTCHours(),n.getUTCMinutes()))},Qm=e=>{const t=new Date(e);return t.setSeconds(0,0),t},Xb={HOUR:W6,DAY:nae},V6=[315,345,15,45,75,105,135,165,195,225,255,285],iae=e=>{const t=e.getFullYear(),n=[];for(const r of[t-1,t])for(const i of V6){const a=gn(r,i);a.getTime()<=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>i.getTime()-r.getTime()),Qm(n[0])},aae=e=>{const t=e.getFullYear(),n=[];for(const r of[t,t+1])for(const i of V6){const a=gn(r,i);a.getTime()>=e.getTime()&&n.push(a)}if(!n.length)throw new Error("  ");return n.sort((r,i)=>r.getTime()-i.getTime()),Qm(n[0])},wi=e=>{const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],r={deg:315,name:""},i=n.map(l=>({name:l.name,date:gn(t,l.deg)})).concat([{name:r.name,date:gn(t+1,r.deg)},{name:"",date:gn(t+1,285)}]),a=gn(t,315),o=gn(t+1,315);return i.filter(l=>l.date>=a&&l.date<o).sort((l,u)=>l.date.getTime()-u.date.getTime())},Z6=(()=>{const e=[];for(let t=0;t<60;t+=1)e.push(`${Xr[t%10]}${vi[t%12]}`);return e})(),oae=e=>{const t=Z6.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t},ep=(e,t,n=1)=>{const r=oae(e),i=t==="forward"?n:-n;return Z6[(r+i+60*1e3)%60]},Ad=2*Xb.HOUR,oP=e=>(Math.floor((e+1)/2)*2-1+24)%24,sae=(e,t)=>{const n=e.getHours(),r=oP(n),i=new Date(e);i.setHours(r,0,0,0),i.getTime()>e.getTime()&&i.setTime(i.getTime()-Ad);const a=new Date(i.getTime()+Ad),o=e.getTime()-i.getTime(),l=a.getTime()-e.getTime();if(o<0||o>Ad||l<0||l>Ad){const u=new Date(e);for(u.setHours(oP(e.getHours()),0,0,0);u.getTime()>e.getTime();)u.setTime(u.getTime()-Ad);const d=new Date(u.getTime()+Ad),h=e.getTime()-u.getTime(),m=d.getTime()-e.getTime();return t==="backward"?h:m}return t==="backward"?o:l},X6=(e,t,n,r=120)=>{const i=Qm(e),a=sae(i,n),o=10*Xb.DAY/(2*Xb.HOUR),l=Qm(new Date(i.getTime()+a*o)),u=rae(e,r).getTime(),d=[];let h=ep(t,n,1);for(let m=l.getTime();m<=u;m+=10*Xb.DAY)d.push({at:new Date(m),gz:h}),h=ep(h,n,1);return{firstChange:l,events:d}},J6=(e,t)=>{const n=t==="forward"?e===""?"":"":e===""?"":"";return r=>r===n},Q6=(e,t,n,r)=>{const i=J6(r,n);let a=t;const o=[];for(const l of e.events){const u=l.gz.charAt(1);i(u)&&(a=ep(a,n,1),o.push({at:l.at,gz:a}))}return{events:o}},w2=7200*1e3,lae=(e,t,n)=>{const r=e.charAt(0),i=e.charAt(1),a=Xr.indexOf(r),o=vi.indexOf(i),l=t==="forward"?n:-n,u=(a+l%10+10)%10,d=(o+l%12+12)%12;return Xr[u]+vi[d]},cae=e=>(Math.floor((e+1)/2)*2-1+24)%24,uae=e=>{const t=e.getHours(),n=cae(t),r=new Date(e);return r.setHours(n,0,0,0),r.getTime()>e.getTime()&&r.setTime(r.getTime()-w2),r},dae=(e,t)=>{const n=wi(e).sort((m,b)=>m.date.getTime()-b.date.getTime()),r=e.getTime();let i;if(t==="forward"){let m=n.find(b=>b.date.getTime()>r);if(!m){const b=new Date(e.getFullYear()+1,0,2,12,0,0,0);m=wi(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).find(k=>k.date.getTime()>r)}if(!m)throw new Error("    .");i=m.date}else{let m=n.filter(b=>b.date.getTime()<r);if(m.length===0){const b=new Date(e.getFullYear()-1,11,31,12,0,0,0);m=wi(b).sort((k,w)=>k.date.getTime()-w.date.getTime()).filter(k=>k.date.getTime()<r)}if(m.length===0)throw new Error("    .");i=m[m.length-1].date}const a=uae(e),o=t==="forward"?w2:-w2,l=i.getTime();let u=new Date(a.getTime()),d=0;const h=365*24/2;for(;d<h;){const m=u.getTime();if(t==="forward"){if(m>=l)return u}else if(m<=l)return u;u=new Date(u.getTime()+o),d++}throw new Error("     .")},fae=(e,t)=>{const i=Math.abs(t.getTime()-e.getTime())*120;return new Date(e.getTime()+i)},Dp=(e,t,n,r=120,i)=>{console.log(i);const a=dae(e,n),o=fae(e,a),l=Math.floor(r/10),u=[];for(let d=0;d<l;d++){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const m=lae(t,n,d+1);u.push({at:h,gz:m})}return u.sort((d,h)=>d.at.getTime()-h.at.getTime()),{natalMonthPillar:t,firstChange:o,mPillars:[],events:u}},hae=(e,t)=>{const r=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(r))},e7=(e,t,n,r,i)=>{const a=J6(r,n);let o=t;const l=[];for(const u of e.events){const d=u.gz.charAt(1);a(d)&&(o=ep(o,n,1),l.push({at:u.at,gz:o,age:hae(i,u.at)}))}return{events:l}},mae=e=>{const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=12,a=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(i=Number(e.birthTime.slice(0,2)),a=Number(e.birthTime.slice(2,4))),new Date(t,n-1,r,i,a,0,0)},sx=(e,t)=>{const n=mae(e),r=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=Op(n,e.birthPlace?.lon??null,r),a=t?.dstOffsetMinutes??0,o=a!==0?new Date(i.getTime()+a*60*1e3):i;return Qm(o)},Vj=(e,t,n)=>{const r=e.birthPlace?.lon??127.5,i=sx(e,n),a=ht(i,t),o=eo(i,t,a.charAt(0));return{year:ct(i,r),month:At(i,r),day:a,hour:o}},pae=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${Xr[t%10]}${vi[t%12]}`);return e})(),gae=e=>pae.indexOf(e),O1=e=>{if(gae(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function bae(e,t="/",n=0){const r=S.useMemo(()=>Cf(e),[e]),i=S.useMemo(()=>sx(r,{dstOffsetMinutes:n}),[r,n]),a=S.useMemo(()=>Vj(r,t,{dstOffsetMinutes:n}),[r,t,n]);return S.useMemo(()=>{const o=Dp(i,a.month,r.dir,120,r?.birthPlace?.lon??127.5),l=new Date;function u(C,M){let P=null;const I=M.getTime();for(const U of C)if(U.at.getTime()<=I)P=U;else break;return P}const d=u(o.events,l)?.gz??a.month,h=O1(d),m=l.getFullYear(),b=gn(m,315),k=b&&l>=b?m:m-1,w=ct(new Date(k,1,10,0,0,0),127.5),_=O1(w),T=At(l,127.5),O=O1(T),j=[];return O&&j.push({key:"wolun",label:"",data:O}),_&&j.push({key:"seun",label:"",data:_}),h&&j.push({key:"daeun",label:"",data:h}),j},[i,r.dir,a.month,r.birthPlace?.lon])}const yae=365.2425*24*60*60*1e3,vae=1440*60*1e3,xae=(e,t)=>(t.getTime()-e.getTime())/yae,wae=e=>e<1?1+e:e,sP=e=>Math.floor(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())/vae),_ae=(e,t)=>{try{const n=t==="forward"?aae(e):iae(e),r=Math.abs(sP(n)-sP(e));return(t==="forward"?r+1:r)/3}catch{return 0}},Sae=(e,t,n,r)=>{const i=_ae(e,n),a=Math.max(1,Math.floor(i+1e-9)),o=new Date(e.getFullYear()+Math.max(0,a-1),0,1,12,0,0,0),l=Math.max(0,Math.floor(r/10)),u=[];for(let d=0;d<l;d+=1){const h=new Date(o);h.setFullYear(h.getFullYear()+d*10),h.setSeconds(0,0);const m=ep(t,n,d+1);u.push({at:h,gz:m})}return{baseAge:a,events:u}};function Du(e,t="/",n=100,r=0){const i=un(d=>d.settings.daewoonDisplayBase),a=S.useMemo(()=>Cf(e),[e]),o=S.useMemo(()=>sx(a,{dstOffsetMinutes:r}),[a,r]),l=S.useMemo(()=>Vj(a,t,{dstOffsetMinutes:r}),[a,t,r]),u=a.dir==="backward"?"backward":"forward";return S.useMemo(()=>{const d=(k,w)=>k.map((_,T)=>{const O=T===0?1:w+(T-1)*10,j=_.at.getFullYear();return{..._,age:O,startYear:j}});if(i===""){const k=Sae(o,l.month,u,n),w={at:o,gz:l.month};return d([w,...k.events],k.baseAge)}const h=Dp(o,l.month,u,n,a.birthPlace?.lon??127.5),m={at:o,gz:h.natalMonthPillar},b=h.events[0]?xae(o,h.events[0].at):0,y=wae(b);return d([m,...h.events],y)},[o,l.month,u,n,a.birthPlace?.lon,i])}function C1(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function kae(e,t){if(!Array.isArray(e)||e.length===0||!C1(t))return{gz:"",at:t,index:-1};const n=e;for(let a=0;a<n.length;a++){const o=n[a],l=n[a+1];if(!C1(o.at))continue;if(t.getTime()>=o.at.getTime()&&(!l||C1(l.at)&&t.getTime()<l.at.getTime()))return{gz:o.gz??"",at:o.at,index:a}}if(t.getTime()<n[0].at.getTime()){const a=n[0];return{gz:a.gz??"",at:a.at,index:0}}const r=n.length-1,i=n[r];return{gz:i.gz??"",at:i.at,index:r}}function lx(e,t,n,r){const{date:i,rule:a,lon:o}=Jr(),l=S.useMemo(()=>n??i??new Date,[n,i]),u=r?.dstOffsetMinutes??0,d=Du(e,e?.mingSikType,100,u),h=u!==0?new Date(l.getTime()+u*60*1e3):l,{gz:m}=kae(d,h);return S.useMemo(()=>{try{const b=o??e?.birthPlace?.lon??127.5,y=a??e?.mingSikType??t??"/";return{dae:{gz:m,at:h},se:{gz:ct(h,b),at:h},wol:{gz:At(h,b),at:h},il:{gz:ht(h,y),at:h}}}catch{const b=new Date;return{dae:{gz:"",at:b},se:{gz:"",at:b},wol:{gz:"",at:b},il:{gz:"",at:b}}}},[a,o,e,t,m,h])}const Cy=Yo(e=>({useDST:!1,setUseDST:t=>e({useDST:t}),toggleDST:()=>e(t=>({useDST:!t.useDST}))})),rc=()=>Cy(e=>e.useDST?-60:0),Sn=["","","",""],lP={month:1},cP=["","","",""],Pp=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],t7=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],uP=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Eae={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Pe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const r=t.match(/([]).*?([])/);if(r){const i=Eae[r[1]]??r[1],a=_2[r[2]]??r[2];return`${i}${a}`}return""}const My=e=>e&&e.length>=1?e[0]:"",Ii=e=>e&&e.length>=2?e[1]:"",Zj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Xj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Jj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Qj=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],eT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],tT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],nT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],rT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],iT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],aT=[{pair:["",""],label:""}],oT=new Set(["","","",""]),Dy=new Set(["","","",""]),sT=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],n7=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}];function pi(e,t,n){for(const{pair:[r,i],label:a}of e)if(t===r&&n===i||t===i&&n===r)return a;return null}function ln(e,t){e.includes(t)||e.push(t)}const jae=e=>[...e].sort((t,n)=>t-n).map(t=>Sn[t]).join("X");function Tae(e,t){const n=[];for(const r of e)for(const i of t){if(r===i)continue;const a=Math.min(r,i),o=Math.max(r,i);n.push([a,o])}return n.sort((r,i)=>{const a=Math.abs(r[0]-r[1]),o=Math.abs(i[0]-i[1]);return a!==o?a-o:0})}function Aae(e){const t=[],n=[...e].sort((r,i)=>r-i);for(let r=0;r<n.length;r++)for(let i=r+1;i<n.length;i++){const a=n[r],o=n[i];t.push([a,o])}return t}const r7=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function Nae(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const i7=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Oae(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(i=>i?.normalize("NFKC")??""))).filter(Boolean),n=t.some(i=>i.includes("")||i.includes("()")),r=t.some(i=>i.includes("")||i.includes("()"));return t.filter(i=>!(n&&(i.includes("")||i.includes("")||i.includes(""))||r&&(i.includes("")||i.includes("")||i.includes(""))))}function a7(e){for(const t of i7){const r=(e[t]??[]).map(i=>i&&i.normalize("NFKC")).filter(i=>!!i&&!Nae(i));e[t]=Array.from(new Set(r))}return e.jijiHyeong=Oae(e.jijiHyeong),e}function Cae(e,t){for(let n=0;n<e.length;n++)if((e[n]??"").includes(t))return n;return-1}function Mae(e,t){for(const n of Pp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function dP(e,t,n){Cae(e,n)<0&&ln(e,t)}function cx(e,t={}){const{emitGanjiAmhap:n=!0,fillNone:r=!0}=t,i=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],a={title:"",cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},o=i.map(b=>My(b)),l=i.map(b=>Ii(b));function u(b,y){if(b===y)return;const k=o[b],w=o[y];if(!k||!w)return;const _=pi(Zj,k,w);_&&ln(a.cheonganHap,`#${Sn[b]}X${Sn[y]}_${_}`);const T=pi(Xj,k,w);T&&ln(a.cheonganChung,`#${Sn[b]}X${Sn[y]}_${T}`)}for(let b=0;b<4;b++)for(let y=b+1;y<4;y++)u(b,y);function d(b,y,k,w,_=!0){const T=[],O=[];for(let C=0;C<4;C++)l[C]===b&&T.push(C),l[C]===y&&O.push(C);const j=Tae(T,O);for(const[C,M]of j){const P=`#${Sn[C]}X${Sn[M]}_${k}`;_?dP(w,P,k):ln(w,P)}}const h=(b,y)=>{for(const{pair:[k,w],label:_}of b)d(k,w,_,y)};h(Jj,a.jijiYukhap),h(Qj,a.jijiChung),h(eT,a.jijiPa),h(tT,a.jijiHae),h(nT,a.jijiWonjin),h(rT,a.jijiGwimun);for(const b of Pp){if(!b.members.every(_=>l.includes(_)))continue;const k=[];for(let _=0;_<4;_++)b.members.includes(l[_])&&k.push(_);const w=jae(k);ln(a.jijiSamhap,`#${w}_${b.name}`)}for(const{pair:[b,y],label:k}of n7)Mae(b,y)&&d(b,y,k,a.jijiBanhap,!1);for(const{pair:[b,y],label:k}of iT)d(b,y,k,a.jijiHyeong);for(const{pair:[b,y],label:k}of aT)d(b,y,k,a.jijiHyeong);for(const b of oT){const y=l.map((k,w)=>k===b?w:-1).filter(k=>k>=0);if(!(y.length<2))for(const[k,w]of Aae(y)){const _=`#${Sn[k]}X${Sn[w]}_${b}`;dP(a.jijiHyeong,_,`${b}`)}}for(const{pair:[b,y],label:k}of sT)d(b,y,k,a.amhap);if(n)for(let b=0;b<4;b++){const y=i[b]??"";if(y.length<2)continue;const k=`${y[0]}${y[1]}`;Dy.has(k)&&ln(a.ganjiAmhap,`#${r7(Sn[b])}_${k}`)}const m=a7(a);if(r)for(const b of Object.keys(m)){if(b==="title")continue;const y=m[b];Array.isArray(y)&&y.length===0&&(m[b]=["#"])}return m}function Dae(e,t){for(const n of Pp)if(!(n.wang!==e&&n.wang!==t)&&n.members.includes(e)&&n.members.includes(t))return!0;return!1}function Pae(e,t){const n=[],r=new Set;for(const i of e)for(const a of t){if(i===a)continue;const o=Math.min(i,a),l=Math.max(i,a),u=`${o}-${l}`;r.has(u)||(r.add(u),n.push([o,l]))}return n}function Bl(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,r=[Pe(e.natal[0]??""),Pe(e.natal[1]??""),Pe(e.natal[2]??""),Pe(e.natal[3]??"")],a=[Pe(e.daewoon??""),Pe(e.sewoon??""),Pe(e.wolwoon??"")].some(m=>m.length>=2),o={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},l=r.map(m=>{const b=Ii(m??"");return _2[b]??b});for(const{pair:[m,b],label:y}of n7){if(!Dae(m,b))continue;const k=[],w=[];for(let T=0;T<4;T++)l[T]===m&&k.push(T),l[T]===b&&w.push(T);const _=Pae(k,w);for(const[T,O]of _){const j=`#${Sn[T]}X${Sn[O]}_${y}`;ln(o.jijiBanhap,j)}}if(n&&a)for(let m=0;m<4;m++){const b=r[m]??"";if(b.length<2)continue;const y=`${b[0]}${b[1]}`;Dy.has(y)&&ln(o.ganjiAmhap,`#${r7(Sn[m])}_${y}`)}const u=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let d=!1,h=!1;for(const[m,b]of u){if(!b)continue;const y=Pe(b);if(!y||y.length<2)continue;const k=My(y),w=Ii(y);{const T=`${k}${w}`;Dy.has(T)&&ln(o.ganjiAmhap,`#${m}_${T}`)}for(let T=0;T<4;T++){const O=r[T]??"";if(O.length<2)continue;const j=Sn[T],C=My(O),M=Ii(O),P=pi(Zj,k,C);P&&ln(o.cheonganHap,`#${m}X${j}_${P}`);const I=pi(Xj,k,C);I&&ln(o.cheonganChung,`#${m}X${j}_${I}`);const U=pi(Jj,w,M);U&&ln(o.jijiYukhap,`#${m}X${j}_${U}`);const W=pi(Qj,w,M);W&&ln(o.jijiChung,`#${m}X${j}_${W}`);const q=pi(eT,w,M);q&&ln(o.jijiPa,`#${m}X${j}_${q}`);const H=pi(tT,w,M);H&&ln(o.jijiHae,`#${m}X${j}_${H}`);const B=pi(nT,w,M);B&&ln(o.jijiWonjin,`#${m}X${j}_${B}`);const K=pi(rT,w,M);K&&ln(o.jijiGwimun,`#${m}X${j}_${K}`);const V=pi(iT,w,M);if(V)ln(o.jijiHyeong,`#${m}X${j}_${V}`);else{const G=pi(aT,w,M);G?ln(o.jijiHyeong,`#${m}X${j}_${G}`):w===M&&oT.has(w)&&ln(o.jijiHyeong,`#${m}X${j}_${w}${M}`)}const Z=pi(sT,w,M);Z&&ln(o.amhap,`#${m}X${j}_${Z}`)}for(const T of Pp){if(!T.members.includes(w))continue;const O=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:Sn[M]})).filter(C=>C.b&&O.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>Sn.indexOf(P)-Sn.indexOf(I));ln(o.jijiSamhap,`#${m}X${C}X${M}_(${T.name})`)}}for(const T of uP){if(!T.members.includes(w))continue;const O=T.members.filter(C=>C!==w),j=l.map((C,M)=>({b:C,pos:Sn[M]})).filter(C=>C.b&&O.includes(C.b));if(new Set(j.map(C=>C.b)).size===2){const[C,M]=j.map(P=>P.pos).sort((P,I)=>Sn.indexOf(P)-Sn.indexOf(I));ln(o.jijiHyeong,`#${m}X${C}X${M}_${T.name}`),T.name===""&&(d=!0),T.name===""&&(h=!0)}}const _=[...r.map((T,O)=>({b:_2[Ii(T)]??Ii(T),pos:Sn[O]}))];for(const T of t7){const O=_.filter(j=>T.members.includes(j.b));if(new Set(O.map(j=>j.b)).size===3){const j=O.map(C=>C.pos).join("X");ln(o.jijiBanghap,`#${j}_(${T.name})`)}}}{const m=[],b=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[y,k]of b){const w=Pe(k??"");w.length>=2&&m.push({kind:y,b:Ii(w)})}if(m.length>=2){const y=r.map((k,w)=>({pos:Sn[w],b:Ii(k)}));for(const k of uP)for(let w=0;w<m.length;w++)for(let _=w+1;_<m.length;_++){const T=m[w],O=m[_];for(const j of y){const C=new Set([j.b,T.b,O.b]);if(C.size===3&&k.members.every(M=>C.has(M))){const M=[T.kind,O.kind].sort((I,U)=>cP.indexOf(I)-cP.indexOf(U)).join("X"),P=`${j.pos}X${M}`;ln(o.jijiHyeong,`#${P}_${k.name}`),k.name===""&&(d=!0),k.name===""&&(h=!0)}}}}}return(d||h)&&(o.jijiHyeong=o.jijiHyeong.filter(m=>!(d&&/(||)/.test(m)||h&&/(||)/.test(m)))),a7(Rae(o))}function Rae(e){const t=/(|||)X(|||)/,n={...e};for(const r of Object.keys(e)){if(r==="title")continue;const i=e[r];Array.isArray(i)&&(n[r]=i.filter(a=>!t.test(a??"")))}return n}const Lae={:"",:"",:"",:"",:""},fP={:"",:"",:"",:"",:""},Iae={:"",:"",:"",:"",:""},$ae={:"",:"",:"",:"",:""},Bae={:.15,:.1,:-.15,:-.2,:-.25};function zae(e,t){const n=Array.from(new Set(t)).sort((r,i)=>r-i);if(n.length<3)return!1;for(let r=0;r<n.length;r++){const i=n[r],a=n[r+1],o=n[r+2];if(!(a==null||o==null)&&o-i<=2&&(e===i||e===a||e===o))return!0}return!1}function Uae(e){const t=e.includes(lP.month),n=zae(lP.month,e)||e.length>=3;return t&&n?"":t||e.length>=2?"":""}function Fae(e,t,n,r){const i=r===""?2:r===""?1:.5;e[t]=(e[t]??0)-i,e[n]=(e[n]??0)+i}function Hae(e,t,n={}){const{includeBanghap:r=!0,includeSamhap:i=!0}=n,a=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],o=a.map(h=>Ii(h)).filter(Boolean),l=[],u={...t},d=(h,m)=>{const b=[];for(let T=0;T<a.length;T++){const O=Ii(a[T]??"");m.members.includes(O)&&b.push(T)}if(!m.members.every(T=>o.includes(T)))return;const k=Uae(b),w=m.out,_=fP[w];Fae(u,_,w,k),l.push({type:h,name:m.name,out:m.out,strength:k})};if(i)for(const h of Pp)d("",h);if(r)for(const h of t7)d("",h);return{applied:l,score:u,strengthAdj:Bae,shengNext:Lae,shengPrev:fP,ke:Iae,keInv:$ae}}function Py(e){return Sn[e]}function hP(e){const t=new Map,n=new Map;for(let r=0;r<4;r++){const i=Pe(e[r]??""),a=My(i),o=Ii(i);a&&t.set(a,[...t.get(a)??[],r]),o&&n.set(o,[...n.get(o)??[],r])}return{stemPos:t,branchPos:n}}function tm(e,t,n){const r=[];for(const i of t)for(const a of n)r.push(`#${Py(i)}X${Py(a)}_${e}`);return r}function Gae(e,t){const n=hP(e),r=hP(t),i={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]},a=(l,u)=>{l.includes(u)||l.push(u)};for(const{pair:[l,u],label:d}of Zj){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],m=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&m.length)for(const b of tm(d,h,m))a(i.,b)}for(const{pair:[l,u],label:d}of Xj){const h=[...n.stemPos.get(l)??[],...n.stemPos.get(u)??[]],m=[...r.stemPos.get(l)??[],...r.stemPos.get(u)??[]];if(h.length&&m.length)for(const b of tm(d,h,m))a(i.,b)}const o=(l,u)=>{const d=Array.from(n.branchPos.keys()),h=Array.from(r.branchPos.keys());for(const m of d)for(const b of h){const y=pi(u,m,b);if(!y)continue;const k=n.branchPos.get(m)??[],w=r.branchPos.get(b)??[];for(const _ of tm(y,k,w))a(i[l],_)}};o("",Jj),o("",Qj),o("",eT),o("",tT),o("",nT),o("",rT),o("",iT),o("",aT);for(const l of oT){const u=n.branchPos.get(l)??[],d=r.branchPos.get(l)??[];if(!(!u.length||!d.length))for(const h of tm(`${l}`,u,d))a(i.,h)}for(const{label:l,pair:[u,d]}of sT){const h=[...n.branchPos.get(u)??[],...n.branchPos.get(d)??[]],m=[...r.branchPos.get(u)??[],...r.branchPos.get(d)??[]];if(!(!h.length||!m.length))for(const b of tm(l,h,m))a(i.,b)}{const l=Array.from(n.stemPos.keys()),u=Array.from(r.stemPos.keys());for(const d of l)for(const h of u){const m=n.stemPos.get(d)??[],b=r.stemPos.get(h)??[];for(const y of m){const k=Ii(Pe(e[y]??"")),w=`${d}${k}`;if(Dy.has(w))for(const _ of b){const T=Ii(Pe(t[_]??""));`${h}${T}`===w&&a(i.,`#${Py(y)}X${Py(_)}_${w}`)}}}}return i}const o7=new Set(Object.keys(Zn)),s7=new Set(Object.keys(rr)),Yae=e=>e.slice(0,1),qae=e=>e.slice(-1);function Es(e){return nf.has(e)?e:o7.has(e)?Zn[e]??e:e}function Mr(e){return Bm.has(e)?e:s7.has(e)?rr[e]??e:e}function Oo(e){return Es(Yae(e))}function en(e){return Mr(qae(e))}function Kae(e){if(!e)return null;const t=Array.from(String(e));let n=null,r=null;for(const i of t)!n&&(nf.has(i)||o7.has(i))&&(n=Es(i)),(Bm.has(i)||s7.has(i))&&(r=Mr(i));return n&&r?{stem:n,branch:r}:null}function Wae(e){return e.map(en)}function Xg(e,t,n="classic"){const r=Oo(t),i=en(t),a=(n==="hgc"?Wv:Kv)[i]??[];return[r,...a].includes(e)}const S2=[["",""],["",""],["",""],["",""],["",""],["",""]],k2=[["",""],["",""],["",""],["",""],["",""],["",""]],Vae=new Set(["","","",""]),l7=[["",""],["",""]],Zae=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function Rm(e,t,n){const r=Mr(t),i=Mr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return!0;return!1}function mP(e,t,n){const r=Mr(t),i=Mr(n);for(const[a,o]of e)if(a===r&&o===i||a===i&&o===r)return`${a}${o}`;return`${r}${i}`}function Ry(e){for(const t of Zae)if(t.set.has(e))return t.voids;return null}function E2(e){const t=Mr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const r of n)if(r.group.has(t))return Array.from(r.years);return null}const tr={2:4,1:3,3:2,0:1},Hd={1:4,2:3,0:2,3:1},we={year:0,month:1,day:2,hour:3};function Xae(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ku=e=>e===0?"":e===1?"":e===2?"":"",Mf=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",Jae=(e,t)=>`#X${ku(t)}_${e}`,Jd=(e,t,n)=>t===we.month&&n===we.day?`#X_${e}`:t===we.year&&n===we.month?`#X_${e}`:t===we.year&&n===we.day?`#X_${e}`:t===we.month&&n===we.hour?`#X_${e}`:t===we.day&&n===we.hour?`#X_${e}`:`#${ku(t)}X${ku(n)}_${e}`,Jg=(e,t)=>`#${ku(t)}_${e}`,c7=(e,t)=>`#X${ku(t)}_${e}`,Qae=(e,t)=>`#(${e==="day"?"":""})X${ku(t)}_`,Nd=e=>`#_${e}`,Od=(e,t)=>`#X${Mf(t)}_${e}`,nm=(e,t)=>`#X${Mf(t)}_${e}`,M1=(e,t,n)=>`#${ku(n)}X${Mf(t)}_${e}`,eoe=(e,t)=>`#(${t==="day"?"":""})_${Mf(e)}_`,toe=(e,t)=>`#(${t==="day"?"":""})X${Mf(e)}_`,pP=(e,t)=>`#X${Mf(e)}_${t}`;function j2(e,t){const n=Mr(e),r=[we.day,we.month,we.hour,we.year];for(const i of r)if(en(t[i])===n)return{pos:i,weight:tr[i]??0};return null}function lT(e,t,n){return en(t[n])===Mr(e)?{pos:n,weight:tr[n]}:null}function noe(e,t){const n=Es(e),r=[we.day,we.month,we.hour,we.year];for(const i of r)if(Oo(t[i])===n)return{pos:i,weight:tr[i]??0};return null}const roe=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Mr(t.trim())).filter(Boolean),wn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Es(t),roe(n)])),ioe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u7=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),aoe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ooe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),soe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),loe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),coe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),d7=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),uoe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),doe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),foe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),hoe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),moe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f7=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),poe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),goe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),gP=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),boe=wn({:"",:"",:"",:"",:""}),yoe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),bP=wn({:"",:"",:""}),yP=wn({:"",:"",:""}),voe=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h7=wn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m7=wn({:"",:"",:"",:"",:"",:"",:""}),xoe=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>Mr(t.trim())).filter(Boolean),Na=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Mr(t),(Array.isArray(n)?n:[n]).map(r=>Mr(r))])),ux=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Mr(t),xoe(n)])),p7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},g7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},woe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),vP=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_oe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Soe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),koe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Eoe=ux({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),joe=Na({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),Toe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Aoe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Noe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ooe=Na({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),v7=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Coe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Moe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Doe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Poe=Na({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),jn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[Mr(t),(Array.isArray(n)?n:[n]).map(r=>Mr(r))])),Roe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Loe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Ioe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$oe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Boe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Uoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Foe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Hoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Goe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Yoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),qoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Koe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Woe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Voe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S7=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Zoe=_7,Xoe=x7,Joe=S7,Qoe=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),ese=w7,tse=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),nse=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rse=jn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""});function Rp(e,t){e.push(t)}function D1(e,t,n,r,i=0){const a=Hd[n]>=Hd[r]?n:r;e.push({name:Jd(t,n,r),weight:tr[a]+i,pos:a})}function ise(e,t,n,r,i){const a=en(e[we.year]),o=t[a];if(!o)return;const l=n==="MONTH"?[we.month]:n==="DAY"?[we.day]:n==="HOUR"?[we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);h&&Rp(i,{name:Jd(r,we.year,d),weight:h.weight,pos:d})}}function ase(e,t,n,r){const i=en(e[we.month]),a=t[i];if(!a)return;const o=Es(a),l=noe(o,e);l&&Rp(r,{name:c7(n,l.pos),weight:l.weight,pos:l.pos})}function xP(e,t,n,r,i="ALL"){const a=en(e[we.month]),o=t[a];if(!o)return;const l=i==="YEAR"?[we.year]:i==="DAY"?[we.day]:i==="HOUR"?[we.hour]:i==="DAY_HOUR"?[we.day,we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);if(!h)continue;const m=d===we.month?`#_${n}`:c7(n,d);Rp(r,{name:m,weight:h.weight,pos:d})}}function wP(e,t,n,r){const i=en(e[we.month]),a=t[i];if(!a)return;const o=e[we.day];a.includes(o)&&Rp(r,{name:Jd(n,we.month,we.day),weight:tr[we.day],pos:we.day})}function _P(e,t,n,r,i){const a=Oo(e[we.day]),o=t[a];if(!o)return;const l=i==="DAY"?[we.day]:i==="HOUR"?[we.hour]:[we.year,we.month,we.day,we.hour];for(const u of o)for(const d of l){const h=lT(u,e,d);h&&Rp(r,{name:Jae(n,d),weight:h.weight,pos:d})}}function ose({natal:e,daewoon:t,basis:n}){const r=Oo(e[we.day]),i=en(e[we.day]),a=en(e[we.month]),o=en(e[we.year]),l=Wae(e),u=[],d=[],h=[[Roe,"MONTH",""],[x7,"DAY",""],[Ioe,"MONTH",""],[$oe,"MONTH",""],[Boe,"ALL",""],[zoe,"HOUR",""],[Uoe,"ALL",""],[Foe,"ALL",""],[Hoe,"ALL",""],[_7,"ALL",""],[Goe,"ALL",""],[Yoe,"ALL",""],[qoe,"ALL",""],[Koe,"ALL",""],[Woe,"ALL",""],[Voe,"ALL",""],[S7,"ALL",""],[Zoe,"ALL",""],[Xoe,"ALL",""],[Joe,"ALL",""],[Qoe,"ALL",""],[ese,"ALL",""],[tse,"ALL",""],[nse,"ALL",""],[rse,"ALL",""]];for(const[C,M,P]of h)ise(e,C,M,P,d);const m=[[p7,""],[g7,""],[b7,""],[y7,""]];for(const[C,M]of m)ase(e,C,M,u);const b=[[woe,"","ALL"],[vP,"","YEAR"],[vP,"","DAY"],[joe,"","ALL"],[Toe,"","ALL"],[Aoe,"","ALL"],[Noe,"","ALL"],[Ooe,"","ALL"]];for(const[C,M,P]of b)xP(e,C,M,d,P);const y=[[v7,"","ALL"],[Coe,"","DAY_HOUR"],[Moe,"","DAY_HOUR"],[Doe,"","ALL"],[Poe,"","ALL"]];for(const[C,M,P]of y)xP(e,C,M,u,P);const k=[[_oe,""],[Eoe,""]];for(const[C,M]of k)wP(e,C,M,u);const w=[[Soe,""],[koe,""]];for(const[C,M]of w)wP(e,C,M,d);const _=[[ioe,"","ALL"],[u7,"","ALL"],[aoe,"","ALL"],[ooe,"","ALL"],[soe,"","ALL"],[loe,"","ALL"],[coe,"","ALL"],[d7,"","ALL"],[uoe,"","ALL"],[doe,"","ALL"],[foe,"","ALL"],[hoe,"","ALL"],[moe,"","ALL"],[voe,"","ALL"]];for(const[C,M,P]of _)_P(e,C,M,u,P);const T=[[f7,"","ALL"],[poe,"","ALL"],[goe,"","ALL"],[gP,"","DAY"],[gP,"","HOUR"],[bP,"","DAY"],[bP,"","HOUR"],[yP,"","DAY"],[yP,"","HOUR"],[boe,"","DAY"],[yoe,"","ALL"],[h7,"","ALL"]];for(const[C,M,P]of T)_P(e,C,M,d,P);if(new Set(["","","",""]).has(e[we.day])){d.push({name:Nd(""),weight:tr[we.day],pos:we.day});for(const M of[we.year,we.month,we.hour])e[M]===e[we.day]&&d.push({name:Jg("",M),weight:tr[M],pos:M})}{const C=m7[r];if(C)for(const M of[we.year,we.month,we.day,we.hour]){const P=Oo(e[M]),I=en(e[M]);P===r&&C.includes(I)&&d.push({name:Jg("",M),weight:tr[M],pos:M})}}for(const[C,M]of l7){const P=j2(C,e),I=j2(M,e);P&&I&&D1(d,"",P.pos,I.pos)}{const C=new Set(["",""]),M=new Set(["","","",""]);for(let P=0;P<=3;P++){const I=Oo(e[P]),U=en(e[P]);(C.has(I)||M.has(U))&&d.push({name:Jg("",P),weight:tr[P],pos:P})}}{const C=e[we.hour],M=(I,U)=>I.includes(r)&&U.includes(C);(M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""])||M(["",""],["",""]))&&d.push({name:Nd(""),weight:tr[we.hour],pos:we.hour})}["","","",""].every(C=>l.includes(C))&&u.push({name:Nd(""),weight:tr[we.day],pos:we.day});{const C=e[we.day],M=e[we.hour];(C===""&&M===""||C===""&&M==="")&&d.push({name:Jd("",we.day,we.hour),weight:tr[we.hour],pos:we.hour})}{const C=en(e[we.year]),M=new Set(l.slice(1)),P=(U,W)=>U.every(q=>M.has(q))&&C===W;(P(["","",""],"")||P(["","",""],"")||P(["","",""],"")||P(["","",""],""))&&u.push({name:Nd(""),weight:tr[we.day],pos:we.day})}(e[we.day]===""||e[we.day]==="")&&u.push({name:Nd(""),weight:tr[we.day],pos:we.day});{const M={:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""},:{rok:"",maStem:""}}[r];M&&e.some(I=>en(I)===M.rok)&&Oo(e[we.hour])===M.maStem&&u.push({name:Jd("",we.day,we.hour),weight:tr[we.hour],pos:we.hour})}{const C=en(e[we.hour]),P={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[r];if(P){const I=i===P.rok,U=C===P.ma,W=Xg(P.rokStem,e[we.day],"classic")||Xg(P.rokStem,e[we.hour],"classic"),q=Xg(P.maStem,e[we.day],"classic")||Xg(P.maStem,e[we.hour],"classic");I&&U&&(W||q)&&u.push({name:Jd("",we.day,we.hour),weight:tr[we.hour],pos:we.hour})}}{const C=new Set(["","","","","",""]),M=e.map(Oo),P=e.map(en),I=M.concat(P).filter(H=>C.has(H)).length,U=t?Oo(t):"",W=t?en(t):"",q=C.has(U)||C.has(W);(I>=4||I===3&&q)&&d.push({name:Nd(""),weight:tr[we.day],pos:we.day})}{const C=new Set(["",""]),M=new Set(["",""]);for(let P=0;P<=3;P++){const I=Oo(e[P]),U=en(e[P]);(C.has(I)||M.has(U))&&d.push({name:Jg("",P),weight:tr[P],pos:P})}}{const C=[[we.year,we.month],[we.year,we.day],[we.month,we.day],[we.month,we.hour],[we.day,we.hour]];for(const[M,P]of C){const I=en(e[M]),U=en(e[P]);if(Rm(S2,I,U)){const W=mP(S2,I,U);D1(d,`${W}`,M,P)}}}{const C=[[we.year,we.month,0],[we.month,we.day,1],[we.month,we.hour,0],[we.day,we.hour,0]];for(const[M,P,I]of C){const U=en(e[M]),W=en(e[P]);if(Rm(k2,U,W)){const q=mP(k2,U,W),H=(I?1:0)+(Vae.has(U+W)?1:0);D1(d,`${q}`,M,P,H)}}}const O=Ry(e[we.day]),j=Ry(e[we.year]);{const C=(n?.voidBasis??"day")==="day"?O:j;if(C){const[M,P]=C.map(Mr);for(const I of[we.year,we.month,we.day,we.hour]){const U=en(e[I]);(U===M||U===P)&&d.push({name:Qae(n?.voidBasis??"day",I),weight:tr[I],pos:I})}}}return{goodPos:u,badPos:d,dayVoid:O,yearVoid:j,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l}}function Qg({src:e,luck:t,natal:n,dStem:r,dBranch:i,mBranch:a,yBranch:o,branches:l,dayVoid:u,yearVoid:d,basis:h}){const m=[],b=[],y=(O,j)=>{O.includes(j)||O.push(j)},k=Kae(t??null);if(!k)return{good:m,bad:b};const w=k.branch,_=k.stem;Es(p7[a]??"")===_&&y(m,nm("",e)),Es(g7[a]??"")===_&&y(m,nm("",e)),Es(b7[a]??"")===_&&y(m,nm("",e)),Es(y7[a]??"")===_&&y(m,nm("",e)),v7[a]?.includes(w)&&y(m,nm("",e)),u7[r]?.includes(w)&&y(m,Od("",e)),d7[r]?.includes(w)&&y(m,Od("",e)),f7[r]?.includes(w)&&y(b,Od("",e)),h7[r]?.includes(w)&&y(b,Od("",e)),m7[r]?.includes(w)&&y(b,Od("",e)),e==="se"&&(Loe[o]?.includes(w)&&y(b,pP(e,"")),w7[o]?.includes(w)&&y(b,pP(e,"")));for(const O of l)if(Rm(l7,w,O)){const j=j2(O,n)?.pos;j!==void 0&&y(b,M1("",e,j));break}new Set(["",""]).has(r)&&new Set(["","","",""]).has(w)&&y(b,Od("",e));const T=(h?.voidBasis??"day")==="day"?u:d;T&&(w===T[0]||w===T[1])&&y(b,eoe(e,h?.voidBasis??"day"));for(let O=0;O<=3;O++){const j=en(n[O]);Rm(S2,w,j)&&y(b,M1("",e,O)),Rm(k2,w,j)&&y(b,M1("",e,O))}if(e==="se"){const O=(h?.samjaeBasis??"day")==="day"?i:o,j=O?E2(O):null;j&&j.includes(w)&&y(b,toe(e,h?.samjaeBasis??"day"))}return{good:m,bad:b}}const sse=/^#(|||)X\1_/,lse=e=>sse.test(e);function SP(e){const t=new Map;for(const n of e){if(lse(n.name))continue;const r=`${n.name}@${n.pos}`,i=t.get(r);(!i||n.weight>i.weight)&&t.set(r,n)}return Array.from(t.values()).sort((n,r)=>r.weight!==n.weight?r.weight-n.weight:n.name.localeCompare(r.name,"ko"))}function cse(e){const t=e.lastIndexOf("_");return t>=0?e.slice(t+1):e}const use=new Set(["",""]);function dse(e){return use.has(e)?!0:e.endsWith("")||e.endsWith("")}function kP(e){const t=new Map;for(const r of e){const i=cse(r.name);t.has(i)||t.set(i,[]),t.get(i).push(r)}const n=[];for(const[r,i]of t)if(dse(r))n.push(...i);else{const a=i.sort((o,l)=>Hd[o.pos]!==Hd[l.pos]?Hd[l.pos]-Hd[o.pos]:l.weight-o.weight)[0];n.push(a)}return n}function EP(e,t){const n={si:[],il:[],yeon:[],wol:[]},r=Xae;for(const i of e)n[r(i.pos)].push(i.name);return n}function Lp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:a}){const{goodPos:o,badPos:l,dayVoid:u,yearVoid:d,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k}=ose({natal:e,daewoon:t,basis:a}),w=kP(SP(o)),_=kP(SP(l)),T=EP(w),O=EP(_),j=Qg({src:"dae",luck:t??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),C=Qg({src:"se",luck:n??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),M=Qg({src:"wol",luck:r??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a}),P=Qg({src:"il",luck:i??null,natal:e,dStem:h,dBranch:m,mBranch:b,yBranch:y,branches:k,dayVoid:u,yearVoid:d,basis:a});return{good:{...T,dae:j.good,se:C.good,wolun:M.good,ilun:P.good},bad:{...O,dae:j.bad,se:C.bad,wolun:M.bad,ilun:P.bad},meta:{voidPair:{day:Ry(e[we.day])??void 0,year:Ry(e[we.year])??void 0},samjaeYears:{day:E2(en(e[we.day]))??void 0,year:E2(en(e[we.year]))??void 0},currentBasis:{voidBasis:a?.voidBasis??"day",samjaeBasis:a?.samjaeBasis??"day"}}}}function fse(e){return typeof e=="object"&&e!==null}function Df(e){const t=K6;return fse(t)&&("Classic"in t||"Modern"in t||"classic"in t||"modern"in t)?e==="classic"?t.Classic:t.Modern:e}const jP=["","","","","","","","","",""],TP=["","","","","","","","","","","",""],hse=["","","","","","","","","","","",""];function mse(e){const t=Vv(e);return t===""||t===""?0:t===""||t===""?2:t===""||t===""?4:t===""||t===""?6:8}function pse(e,t){const n=mse(e);return(t?hse:TP).map(i=>{const a=TP.indexOf(i);let o=(n+(a<0?0:a))%10;return t&&(i===""||i==="")&&(o=(o+2)%10),`${jP[o]??jP[0]}${i}`})}function Lm(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function AP(e){return e<10?`0${e}`:`${e}`}function T2(e){return`${AP(e.getHours())}:${AP(e.getMinutes())}`}function cT(e){return!e||e===""?!0:!/^\d{4}$/.test(e)}function NP(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),a=`${n}-${r}-${i}`;return!t||cT(t)?a:`${a} ${t.slice(0,2)}:${t.slice(2,4)}`}function gse(e,t,n){if(n)return"";const r=(e??"").trim();if(r)return r;const i=t instanceof Date?t:new Date(t);return Number.isNaN(i.getTime())?"":T2(i)}const OP=["","/",""],bse="/";function k7(e,t){return e&&OP.includes(e)?e:t&&OP.includes(t)?t:bse}function CP(e){return e===""}function yse(e){return e===""?"":""}function vse(e){switch(e){case"":return 1;case"":return 2;case"":return 3;case"":default:return 0}}const xse=e=>e instanceof Date&&!Number.isNaN(e.getTime());function A2(e,t){const n=cT(e.birthTime);let r=Number(e.birthDay?.slice(0,4)??2e3),i=Number(e.birthDay?.slice(4,6)??1),a=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Vi(r,i,a);r=j.getFullYear(),i=j.getMonth()+1,a=j.getDate()}const o=n?4:Number(e.birthTime?.slice(0,2)??4),l=n?30:Number(e.birthTime?.slice(2,4)??30),u=new Date(r,i-1,a,o,l,0,0),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon,h=d?127.5:e.birthPlace.lon,m=xse(e.corrected);let b;m?b=e.corrected:d?b=u:b=Op(u,h,n);const y=t?new Date(b.getTime()-3600*1e3):b,k=k7(e.mingSikType),w=ct(y,h),_=At(y,h),T=ht(y,k),O=n?null:eo(y,k);return{corrected:y,year:{stem:w.charAt(0),branch:w.charAt(1)},month:{stem:_.charAt(0),branch:_.charAt(1)},day:{stem:T.charAt(0),branch:T.charAt(1)},hour:O?{stem:O.charAt(0),branch:O.charAt(1)}:null}}const wse=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],_se=(()=>{const e={};for(const t of wse){const[n,r]=t.keys;e[n]={label:t.label,elem:t.elem},e[r]={label:t.label,elem:t.elem}}return e})(),Sse={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function kse(e,t){const n=`${Vv(e)}${pj(t)}`;return _se[n]??null}function Ese(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}function jse(e){switch(Sse[pj(e)]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function Tse({stem:e,branch:t}){const n=kse(e,t);if(!n)return null;const r=Ese(n.elem);return g.jsx("span",{className:`inline-block mt-1 px-1.5 py-[2px] rounded ${r} border border-white/10 text-nowrap`,title:`${n.label}  ${n.elem}`,children:n.label})}function MP({value:e,kind:t,charType:n,thinEum:r,highlighted:i}){const{settings:a}=un(),o=Ki(e,t,a),l=xi(e,t,n),u=to(e,t),d=r&&u?"font-thin":"font-bold",h=i?"border-purple-500 border-3":"border-neutral-200 dark:border-neutral-800";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${o}
                  flex items-center justify-center border ${h}`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${d} `,children:l})})}function E7({title:e,data:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:y="regular",highlightedStem:k=!1,highlightedBranch:w=!1}){const _=y==="compact"?"py-1 text-center text-xs tracking-wider":"px-2 py-1 text-center text-xs tracking-wider",T=y==="compact"?"py-2":"p-2";return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:`${_} bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300`,children:e}),g.jsx("div",{className:`${T} flex flex-col items-center gap-1`,children:t?g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Sa(n,{stem:t.stem})}),g.jsx(MP,{value:t.stem,kind:"stem",charType:r,thinEum:i,highlighted:k}),g.jsx(MP,{value:t.branch,kind:"branch",charType:r,thinEum:i,highlighted:w}),g.jsx(a4,{branch:t.branch,dayStem:n,mode:d,mapping:h}),(o||l||u)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 w-full",children:[o&&g.jsx("div",{children:m(t.branch)}),l&&g.jsx("div",{children:b(t.branch)}),u&&g.jsx(Tse,{stem:t.stem,branch:t.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]})}const Ase=(e,t,n,r)=>{let i=e.data.stem,a=e.data.branch;return e.key==="daeun"&&t&&(i=t.charAt(0),a=t.charAt(1)),e.key==="seun"&&n&&(i=n.charAt(0),a=n.charAt(1)),e.key==="wolun"&&r&&(i=r.charAt(0),a=r.charAt(1)),{stem:i,branch:a}};function Nse({cards:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,daeGz:y,seGz:k,wolGz:w,highlightMap:_={}}){const T=t?"regular":"compact",O=e.length===1?"grid-cols-1":e.length===2?"grid-cols-2":"grid-cols-3",j="rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",C=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",M=t?`grid gap-2 p-3 ${O}`:`grid gap-1 p-0 ${O}`;return g.jsxs("div",{className:j,children:[g.jsx("div",{className:C,children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:M,children:e.map(P=>{const I=Ase(P,y,k,w),U=_[P.key]??{stem:!1,branch:!1};return g.jsx(E7,{title:P.label,data:I,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:T,highlightedStem:U.stem,highlightedBranch:U.branch},P.key)})})})]})}function Ose({pillars:e,isDesktop:t,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,highlightMap:y={}}){const k=t?"regular":"compact",w=t?"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300":"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",_=t?"grid grid-cols-4 gap-2 p-3":"grid grid-cols-4 gap-1";return g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:w,children:g.jsx("b",{children:""})}),g.jsx("div",{className:t?"pb-2":"px-1 pb-2",children:g.jsx("div",{className:_,children:e.map(T=>{const O=y[T.key]??{stem:!1,branch:!1};return g.jsx(E7,{title:T.label,data:T.data,dayStem:n,charType:r,thinEum:i,showSipSin:a,showUnseong:o,showShinsal:l,showNabeum:u,hiddenMode:d,hiddenStemMode:h,calcUnseong:m,calcShinsal:b,size:k,highlightedStem:O.stem,highlightedBranch:O.branch},T.key)})})})]})}function Cse({hourCandidates:e,useInsi:t,onToggleRule:n,usePrevDay:r,onTogglePrevDay:i,canSelectHourBranch:a,manualHour:o,onSelectHour:l}){return g.jsxs("div",{className:"my-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:n,className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:t?" : ":" : "}),g.jsx("button",{onClick:i,className:`px-2 py-1 text-xs rounded border cursor-pointer ${r?"bg-amber-500 text-white border-amber-500":"bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600"}`,children:""})]})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map(u=>{const d=u.charAt(0),h=u.charAt(1),m=o?.stem===d&&o?.branch===h,b=a?!a(h):!1;return g.jsx("button",{onClick:()=>l(d,h),disabled:b,className:`p-2 text-xs rounded border ${m?jse(h):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"} ${b?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,title:`${u} ( )`,children:u},u)})})]})}function Mse(e){const i=e.trim().replace(/^#?(|||)(X(|||))?_/u,"").replace(/\((|||)\)$/u,"").replace(/\s+/g," ").trim(),a=i.includes("_")?i.split("_").pop()??i:i;return a.includes("")?"":a.includes("")?"":a.includes("")?"":a===""||a===""||a===""?"":a}const rm={:{title:"()",kind:"",oneLine:"     .",bullets:["  ,   ."]},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   :   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" ,    ."},:{title:"()",kind:"",oneLine:"  (  ) ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"  / ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"()   ."},:{title:"()",kind:"",oneLine:"  ()  ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"+     ."},:{title:"()",kind:"",oneLine:"///   ."},:{title:"()",kind:"",oneLine:"     ."},:{title:"()",kind:"",oneLine:"/        ."},:{title:"()",kind:"",oneLine:" 3      .",bullets:["    ."]},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"() / ",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"   : //."},:{title:"",kind:"",oneLine:"  :   ."},:{title:"",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//     ."},:{title:"()",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" //  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:": /  ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"  ."},:{title:"()",kind:"",oneLine:" / :   ."},:{title:"()",kind:"",oneLine:"()  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:" / :    ."},:{title:"()",kind:"",oneLine:" :   / ."},:{title:"",kind:"",oneLine:"   ."},:{title:"()",kind:"",oneLine:"() //  ."},:{title:"()",kind:"",oneLine:" :      ."},:{title:"()",kind:"",oneLine:" ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"//    ."},:{title:"()",kind:"",oneLine:"    : ."},:{title:"",kind:"",oneLine:"  : //."},:{title:"()",kind:"",oneLine:"/  ."},:{title:"()",kind:"",oneLine:"  : ."},:{title:"()",kind:"",oneLine:" : /  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:" () ."},:{title:"()",kind:"",oneLine:"  ,    ."},:{title:"",kind:"",oneLine:":  ."},:{title:"",kind:"",oneLine:" /  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"/ :  ."},:{title:"()",kind:"",oneLine:"      :    ."},:{title:"",kind:"",oneLine:"    ."},:{title:"()",kind:"",oneLine:" .       ."},:{title:"()",kind:"",oneLine:" .     ."},:{title:"()",kind:"",oneLine:"  .      ."},:{title:"()",kind:"",oneLine:" :  ."},:{title:"()",kind:"",oneLine:"  :  ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:" :  /,   ."},:{title:"",kind:"",oneLine:"      ."},:{title:"()",kind:"",oneLine:"/  :    ."},:{title:"()",kind:"",oneLine:"  :   ."},:{title:"()",kind:"",oneLine:"  : /  ."},:{title:"()",kind:"",oneLine:"  : // ."},:{title:"()",kind:"",oneLine:"   :  ."},:{title:"()",kind:"",oneLine:"//   ."},:{title:"()",kind:"",oneLine:"/  :  ."},:{title:"()",kind:"",oneLine:"/    ."},:{title:"()",kind:"",oneLine:" :    ,  /  ."}};function Dse(e){const t=Mse(e),n=rm[t];if(n)return n;if(t.endsWith("")){const r=t.replace(/$/,"");if(rm[r])return rm[r]}else{const r=`${t}`;if(rm[r])return rm[r]}return{title:t||"",kind:"",oneLine:" "}}function Pse(e){const t=`${e.title}  ${e.kind}`,n=e.oneLine,r=(e.bullets??[]).map(i=>`- ${i}`).join(`
`);return r?`${t}
${n}
${r}`:`${t}
${n}`}function Eo({columnKey:e,title:t,goodTags:n,badTags:r,isDesktop:i,openTagKey:a,setOpenTagKey:o}){const l=N2(n,Ly),u=N2(r,Ly),d=i||l.length>0,h=i||u.length>0;return!i&&l.length===0&&u.length===0?null:g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:t}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[d&&g.jsx("div",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mb-1",children:""}),g.jsx(DP,{tags:n,idPrefix:`${e}-good`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]}),g.jsxs("div",{children:[h&&g.jsx("div",{className:"text-[10px] text-rose-600 dark:text-rose-400 mb-1",children:""}),g.jsx(DP,{tags:r,idPrefix:`${e}-bad`,isDesktop:i,openTagKey:a,setOpenTagKey:o})]})]})]})}function DP({tags:e,idPrefix:t,isDesktop:n,openTagKey:r,setOpenTagKey:i}){const a=N2(e,Ly);return a.length===0?n?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):null:g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:a.map((o,l)=>{const u=`${t}-${l}`;return g.jsx(Rse,{tag:o,id:u,openTagKey:r,setOpenTagKey:i},u)})})}function Rse({tag:e,id:t,openTagKey:n,setOpenTagKey:r}){const i=n===t,a=Dse(e),o=a?Pse(a):"",l=Ly(e),u=S.useRef(null),d=S.useRef(null),[h,m]=S.useState("center");return S.useLayoutEffect(()=>{if(!i)return;const b=d.current;if(!b)return;const y=b.getBoundingClientRect(),w=Math.min(300,window.innerWidth-16*2),_=y.left,T=window.innerWidth-y.right;T<w/2&&_>T?m("right"):_<w/2&&T>_?m("left"):m("center")},[i]),S.useLayoutEffect(()=>{if(!i)return;const b=y=>{const k=y.target;!u.current||k&&u.current.contains(k)||r(null)};return document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b)}},[i,r]),g.jsxs("div",{ref:u,className:"relative",children:[g.jsx("button",{ref:d,type:"button",onClick:()=>r(i?null:t),className:["px-2 py-1 text-[12px] desk:text-[11px] text-center  rounded border desk:break-keep w-full cursor-pointer ",i?"bg-purple-500/20 text-purple-200 border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:l,children:l}),a&&i&&g.jsx("div",{className:["absolute top-full mt-2 z-50",h==="left"?"left-0":h==="right"?"right-0":"left-1/2 -translate-x-1/2"].join(" "),children:g.jsx("div",{className:"relative whitespace-pre-wrap break-words break-keep rounded-md border border-neutral-700 bg-neutral-900 text-neutral-100 text-[10px] leading-4 p-2 shadow-lg text-center",style:{width:"min(190px, calc(100vw - 24px))"},children:o})})]})}function Ly(e){const t=e.replace(/^#/,""),n=t.split("_"),r=n.length>1?n[n.length-1]:t,i=r.split(" ").filter(Boolean);return i.length>0?i[i.length-1]:r}function N2(e,t){const n=new Set,r=[];for(const i of e){const a=t(i);n.has(a)||(n.add(a),r.push(i))}return r}const Lse=[{level:0,label:" "},{level:1,label:" "},{level:2,label:" "},{level:3,label:" "}];function Ise({isDesktop:e,exposureLevel:t,relationApplyLevel:n,maxRelationApplyLevel:r,onChangeRelationApplyLevel:i,relationChips:a,relationByPillar:o,activeRelationTag:l,onToggleRelationTag:u,showRelationBox:d,showEtcShinsalBox:h,etcShinsalGood:m,etcShinsalBad:b}){const[y,k]=S.useState(!0),[w,_]=S.useState(!0),[T,O]=S.useState(null);return g.jsxs(g.Fragment,{children:[d&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>k(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",y?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:y?"":""})]}),y&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 mb-2",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:Lse.filter(j=>j.level<=r).map(j=>{const C=n===j.level;return g.jsx("button",{type:"button",onClick:()=>i(j.level),className:["px-2 py-1 text-[11px] rounded border transition cursor-pointer",C?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),children:j.label},j.level)})})}),g.jsx("div",{className:"text-[11px] text-amber-600 dark:text-amber-300 pl-1 mb-2",children:"     ."}),a.length===0?g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."}):g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?n>=3?"4fr 5fr":n>=2?"3.5fr 6.5fr":n>=1?"2fr 8fr":"1fr":void 0},children:[n>=1&&g.jsx("div",{className:"border-t desk:border-0 border-neutral-200 dark:border-neutral-800 pt-2 desk:pt-0 order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${n>=3?3:n>=2?2:1}, minmax(60px, 1fr))`:void 0},children:(e?[n>=3&&g.jsx(jo,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol"),n>=2&&g.jsx(jo,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=1&&g.jsx(jo,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae")]:[n>=1&&g.jsx(jo,{title:"",tags:o.luck.dae,activeTag:l,onToggle:u},"dae"),n>=2&&g.jsx(jo,{title:"",tags:o.luck.se,activeTag:l,onToggle:u},"se"),n>=3&&g.jsx(jo,{title:"",tags:o.luck.wol,activeTag:l,onToggle:u},"wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2 desk:pl-0 desk:border-t-0 desk:border-l-0",children:[g.jsx(jo,{title:"",tags:o.natal.hour,activeTag:l,onToggle:u}),g.jsx(jo,{title:"",tags:o.natal.day,activeTag:l,onToggle:u}),g.jsx(jo,{title:"",tags:o.natal.month,activeTag:l,onToggle:u}),g.jsx(jo,{title:"",tags:o.natal.year,activeTag:l,onToggle:u})]})]})]})]})}),h&&g.jsx("div",{className:"px-2 desk:px-0 py-2",children:g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("button",{type:"button",onClick:()=>_(j=>!j),className:["w-full flex items-center justify-between pl-1 text-xs text-neutral-600 dark:text-neutral-300 cursor-pointer",w?"mb-1":"mb-0"].join(" "),children:[g.jsx("span",{children:""}),g.jsx("span",{className:"text-[10px]",children:w?"":""})]}),w&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pl-1 text-[11px] text-amber-600 dark:text-amber-300 mb-2",children:"       ."}),PP(m)||PP(b)?g.jsxs("div",{className:"grid w-full gap-2 desk:gap-4 grid-cols-1",style:{gridTemplateColumns:e?t>=3?"4fr 5fr":t>=2?"3.5fr 6.5fr":t>=1?"2fr 8fr":"1fr":void 0},children:[g.jsx("div",{className:"order-2 desk:order-1 flex-4 grid grid-cols-1 gap-1 desk:gap-2",style:{gridTemplateColumns:e?`repeat(${t>=3?3:t>=2?2:t>=1?1:0}, minmax(60px, 1fr))`:void 0},children:(e?[t>=3&&g.jsx(Eo,{columnKey:"etc-luck-wol",title:"",goodTags:m.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-wol"),t>=2&&g.jsx(Eo,{columnKey:"etc-luck-se",title:"",goodTags:m.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-se"),t>=1&&g.jsx(Eo,{columnKey:"etc-luck-dae",title:"",goodTags:m.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-dae")]:[t>=1&&g.jsx(Eo,{columnKey:"etc-luck-dae",title:"",goodTags:m.luck.dae,badTags:b.luck.dae,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-dae"),t>=2&&g.jsx(Eo,{columnKey:"etc-luck-se",title:"",goodTags:m.luck.se,badTags:b.luck.se,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-se"),t>=3&&g.jsx(Eo,{columnKey:"etc-luck-wol",title:"",goodTags:m.luck.wol,badTags:b.luck.wol,isDesktop:e,openTagKey:T,setOpenTagKey:O},"luck-wol")]).filter(Boolean)}),g.jsxs("div",{className:"order-1 desk:order-2 flex flex-col desk:flex-row flex-5 gap-1 desk:gap-2",children:[g.jsx(Eo,{columnKey:"etc-natal-hour",title:"",goodTags:m.natal.hour,badTags:b.natal.hour,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(Eo,{columnKey:"etc-natal-day",title:"",goodTags:m.natal.day,badTags:b.natal.day,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(Eo,{columnKey:"etc-natal-month",title:"",goodTags:m.natal.month,badTags:b.natal.month,isDesktop:e,openTagKey:T,setOpenTagKey:O}),g.jsx(Eo,{columnKey:"etc-natal-year",title:"",goodTags:m.natal.year,badTags:b.natal.year,isDesktop:e,openTagKey:T,setOpenTagKey:O})]})]}):g.jsx("div",{className:"text-xs text-neutral-400",children:"  ."})]})]})})]})}function jo({title:e,tags:t,activeTag:n,onToggle:r}){return g.jsxs("div",{className:"flex-1 rounded-md border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsx("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mb-1",children:e}),t.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 text-center",children:""}):g.jsx("div",{className:"flex flex-row flex-wrap desk:flex-col gap-1",children:t.map(i=>{const a=n===i;return g.jsx("button",{type:"button",onClick:()=>r(a?null:i),className:["px-2 py-1 text-[12px] desk:text-[11px] rounded border transition desk:break-keep cursor-pointer",a?"bg-purple-500 text-white border-purple-500":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700"].join(" "),title:i,children:$se(i)},i)})})]})}function $se(e){const t=e.replace(/^#/,""),n=t.split("_");return(n.length>1?n.slice(1).join("_"):t).replace(/_/g," ")}function PP(e){const{natal:t,luck:n}=e;return t.hour.length>0||t.day.length>0||t.month.length>0||t.year.length>0||n.dae.length>0||n.se.length>0||n.wol.length>0}function RP(e){return String(e).padStart(2,"0")}function Bse(e,t,n){if(!e||e.length<8)return NP(e,t);const r=NP(e,t);if(n!=="lunar")return r;try{const i=Number(e.slice(0,4)),a=Number(e.slice(4,6)),o=Number(e.slice(6,8)),l=Vi(i,a,o);return` ${`${l.getFullYear()}.${RP(l.getMonth()+1)}.${RP(l.getDate())}`} ( ${r})`}catch{return` ${r}`}}function zse({data:e,hourTable:t}){const{date:n,setDstOffsetMinutes:r}=Jr(),i=un(Ce=>Ce.settings),a=i.showNabeum??!0,o=i.showRelationBox??!0,l=i.showEtcShinsal??!0,u=k7(e.mingSikType,t),d=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:h,solarM:m,solarD:b}=S.useMemo(()=>{let Ce=Number(e.birthDay?.slice(0,4)??2e3),ze=Number(e.birthDay?.slice(4,6)??1),nt=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const Tt=Vi(Ce,ze,nt);Ce=Tt.getFullYear(),ze=Tt.getMonth()+1,nt=Tt.getDate()}return{solarY:Ce,solarM:ze,solarD:nt}},[e.birthDay,e.calendarType]),y=Cy(Ce=>Ce.useDST),k=Cy(Ce=>Ce.setUseDST);S.useEffect(()=>{h&&m&&b&&k(Xm(h,m,b))},[h,m,b,k]),S.useEffect(()=>{r(y?-60:0)},[y,r]);const w=cT(e.birthTime),[_,T]=S.useState(()=>A2(e,y));S.useEffect(()=>{T(A2(e,y))},[e,y]);const O=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,j=Ui(Ce=>Ce.usePrevDay),C=Ui(Ce=>Ce.setUsePrevDay),M=S.useMemo(()=>{const Ce=`${_.day.stem}${_.day.branch}`,ze=j?Qa(Ce,-1):Ce;return{stem:ze.charAt(0),branch:ze.charAt(1)}},[_.day.stem,_.day.branch,j]),P=_.day.stem,I=M.stem,[U,W]=S.useState(null),[q,H]=S.useState(()=>CP(e.mingSikType)),B=Ui(Ce=>Ce.clearManualHour);S.useEffect(()=>{W(null),B(),H(CP(e.mingSikType)),C(!1)},[O,e.mingSikType,B,C]);const K=j&&q?I:P,V=S.useMemo(()=>pse(K,q),[q,K]),Z=U??_.hour,G=Ui(Ce=>Ce.setManualHour),J=S.useCallback(Ce=>j?q?Ce===""||Ce==="":Ce==="":!0,[j,q]);S.useEffect(()=>{U&&(J(U.branch)||(W(null),B()))},[U,J,B]);const Q=(Ce,ze)=>{if(!J(ze))return;if(U?.stem===Ce&&U?.branch===ze){W(null),B();return}const nt={stem:Ce,branch:ze};W(nt),G(nt)},oe=yse(i.sinsalBase)===""?M.branch:_.year.branch,te=Ce=>i.showSibiUnseong?no(I,Ce):null,z=Ce=>i.showSibiSinsal?ro({baseBranch:oe,targetBranch:Ce,era:Df(i.sinsalMode),gaehwa:i.sinsalBloom}):null,X=y?-60:0,re=bae(e,u,X),ie=Zie({query:"(min-width: 992px)"}),fe=i.hiddenStem==="regular"?"main":"all",de=vse(i.exposure),pe=de===0?[]:re.filter(Ce=>(Ce.key==="daeun"?1:Ce.key==="seun"?2:3)<=de),Ne=Xm(h,m,b),se=()=>k(!y),Se=S.useMemo(()=>{const Ce=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??""));return Number.isNaN(Ce.getTime())?_.corrected:Ce},[e.corrected,_.corrected]),ke=S.useMemo(()=>Se&&(Ne&&y?new Date(Se.getTime()-3600*1e3):Se),[Se,Ne,y]),he=S.useMemo(()=>{const Ce=Ne&&y?"":e.correctedLocal;return gse(Ce,ke??new Date,w)},[e.correctedLocal,ke,w,Ne,y]),Ue=lx(e,t,n,{dstOffsetMinutes:X}),Be=Ue.dae.gz,Xe=Ue.se.gz,Ae=Ue.wol.gz,Ie=S.useMemo(()=>de>=3&&Ae?3:de>=2&&Xe?2:de>=1&&Be?1:0,[de,Be,Xe,Ae]),[$e,tt]=S.useState(Ie),[bt,jt]=S.useState(null);S.useEffect(()=>{tt(Ie),jt(null)},[O,Ie]);const le=S.useMemo(()=>{const Ce=Bt=>Bt?.stem&&Bt?.branch?`${Bt.stem}${Bt.branch}`:"",ze=[Ce(_.year),Ce(_.month),Ce(M),Ce(Z)],nt=Bl({natal:[...ze],daewoon:$e>=1?Be??void 0:void 0,sewoon:$e>=2?Xe??void 0:void 0,wolwoon:$e>=3?Ae??void 0:void 0}),Tt=cx([...ze],{fillNone:!1}),Lt={...nt};for(const Bt of i7)Lt[Bt]=Array.from(new Set([...Lt[Bt]??[],...Tt[Bt]??[]]));return Lt},[_,M,Z,Be,Xe,Ae,$e]),Oe=S.useMemo(()=>{const Ce=[...le.cheonganHap,...le.cheonganChung,...le.jijiSamhap,...le.jijiBanhap,...le.jijiBanghap,...le.jijiYukhap,...le.jijiChung,...le.jijiHyeong,...le.jijiPa,...le.jijiHae,...le.amhap,...le.ganjiAmhap].filter(ze=>ze&&ze!=="#");return Array.from(new Set(Ce))},[le]);S.useEffect(()=>{bt&&!Oe.includes(bt)&&jt(null)},[bt,Oe]);const Ye=S.useMemo(()=>{const Ce=(nt,Tt)=>{nt.includes(Tt)||nt.push(Tt)},ze={luck:{wol:[],se:[],dae:[]},natal:{hour:[],day:[],month:[],year:[]}};for(const nt of Oe){const Lt=(nt.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean);Lt.includes("")&&Ce(ze.luck.wol,nt),Lt.includes("")&&Ce(ze.luck.se,nt),Lt.includes("")&&Ce(ze.luck.dae,nt),Lt.includes("")&&Ce(ze.natal.hour,nt),Lt.includes("")&&Ce(ze.natal.day,nt),Lt.includes("")&&Ce(ze.natal.month,nt),Lt.includes("")&&Ce(ze.natal.year,nt)}return ze},[Oe]),Ze=S.useMemo(()=>{const Ce=Tt=>Tt?.stem&&Tt?.branch?`${Tt.stem}${Tt.branch}`:"",ze=Lp({natal:[Ce(_.year),Ce(_.month),Ce(M),Ce(Z)],daewoon:de>=1?Be??void 0:void 0,sewoon:de>=2?Xe??void 0:void 0,wolwoon:de>=3?Ae??void 0:void 0}),nt=Tt=>Array.from(new Set(Tt.filter(Lt=>Lt&&Lt!=="#")));return{good:{natal:{hour:nt(ze.good.si??[]),day:nt(ze.good.il??[]),month:nt(ze.good.wol??[]),year:nt(ze.good.yeon??[])},luck:{dae:nt(ze.good.dae??[]),se:nt(ze.good.se??[]),wol:nt(ze.good.wolun??[])}},bad:{natal:{hour:nt(ze.bad.si??[]),day:nt(ze.bad.il??[]),month:nt(ze.bad.wol??[]),year:nt(ze.bad.yeon??[])},luck:{dae:nt(ze.bad.dae??[]),se:nt(ze.bad.se??[]),wol:nt(ze.bad.wolun??[])}}}},[_,M,Z,Be,Xe,Ae,de]),Ot=S.useMemo(()=>{const Ce={},ze=(nt,Tt)=>{for(const Lt of nt)Ce[Lt]=Tt};return ze(le.cheonganHap,"stem"),ze(le.cheonganChung,"stem"),ze(le.jijiSamhap,"branch"),ze(le.jijiBanhap,"branch"),ze(le.jijiBanghap,"branch"),ze(le.jijiYukhap,"branch"),ze(le.jijiChung,"branch"),ze(le.jijiHyeong,"branch"),ze(le.jijiPa,"branch"),ze(le.jijiHae,"branch"),ze(le.amhap,"branch"),ze(le.ganjiAmhap,"both"),Ce},[le]),mt=S.useMemo(()=>{if(!bt)return{};const Ce=Ot[bt]??"branch",nt=(bt.replace(/^#/,"").split("_")[0]??"").split("X").filter(Boolean),Tt={:"year",:"month",:"day",:"hour",:"daeun",:"seun",:"wolun",:"ilun"},Lt={};for(const Bt of nt){const Xt=Tt[Bt];if(!Xt)continue;const _t=Lt[Xt]??{stem:!1,branch:!1};Ce==="stem"?_t.stem=!0:(Ce==="branch"||(_t.stem=!0),_t.branch=!0),Lt[Xt]=_t}return Lt},[bt,Ot]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),Ne&&g.jsxs("button",{onClick:se,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-xs desk:text-sm text-neutral-600 dark:text-neutral-400",children:[Bse(e.birthDay,e.birthTime,e.calendarType)," : ",he]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[e.birthPlace?.name?`: ${e.birthPlace.name}`:""," /  : ",d.toFixed(2),"  ",u," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${pe.length===0?"grid-cols-1":pe.length===1?"grid-cols-[2fr_8fr]":pe.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[pe.length>0&&g.jsx(Nse,{cards:pe,isDesktop:ie,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:fe,hiddenStemMode:i.hiddenStemMode,calcUnseong:te,calcShinsal:z,daeGz:Be,seGz:Xe,wolGz:Ae,highlightMap:mt}),g.jsx(Ose,{isDesktop:ie,dayStem:I,charType:i.charType,thinEum:i.thinEum,showSipSin:i.showSipSin,showUnseong:i.showSibiUnseong,showShinsal:i.showSibiSinsal,showNabeum:a,hiddenMode:fe,hiddenStemMode:i.hiddenStemMode,calcUnseong:te,calcShinsal:z,highlightMap:mt,pillars:[{key:"hour",label:"",data:Z},{key:"day",label:"",data:M},{key:"month",label:"",data:_.month},{key:"year",label:"",data:_.year}]})]}),w&&g.jsx(Cse,{hourCandidates:V,useInsi:q,onToggleRule:()=>H(Ce=>!Ce),usePrevDay:j,onTogglePrevDay:()=>C(!j),canSelectHourBranch:J,manualHour:U,onSelectHour:Q}),g.jsx(Ise,{isDesktop:ie,exposureLevel:de,relationApplyLevel:$e,maxRelationApplyLevel:Ie,onChangeRelationApplyLevel:tt,relationChips:Oe,relationByPillar:Ye,activeRelationTag:bt,onToggleRelationTag:jt,showRelationBox:o,showEtcShinsalBox:l,etcShinsalGood:Ze.good,etcShinsalBad:Ze.bad})]})}function Zl(e,t){const n=e,r=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,i=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),a=typeof n.birthHour=="number",o=typeof n.birthMinute=="number";if(r||!(i||a||o)){const u=new Date(t);return u.setHours(4,30,0,0),u}return t}function dx(e,t){const n=e.length;if(n===0||!t)return 0;const r=e[0].at.getTime(),i=e[n-1].at.getTime(),a=t.getTime();if(a<=r)return 0;if(a>=i)return n-1;for(let o=0;o<n-1;o+=1){const l=e[o].at.getTime(),u=e[o+1].at.getTime();if(a>=l&&a<u)return o}return 0}function Use({data:e}){const t=rc(),n=Du(e,e.mingSikType,100,t),r=Ui(q=>q.usePrevDay),i=S.useMemo(()=>{const q=Cf(e);return Wl(q,t)},[e,t]),a=S.useMemo(()=>Zl(e,i),[e,i]),o=S.useMemo(()=>{const q=e.mingSikType??"/",H=ht(a,q);return(r?Qa(H,-1):H).charAt(0)},[a,e.mingSikType,r]),{date:l,setFromEvent:u}=Jr(),d=S.useMemo(()=>dx(n,l),[n,l]),h=un(q=>q.settings),m=un(q=>q.setKey),{charType:b,thinEum:y,showSipSin:k,showSibiUnseong:w,showSibiSinsal:_,sinsalBase:T,sinsalMode:O,sinsalBloom:j,daewoonDisplayBase:C}=h,M=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,P=e.mingSikType??"/",I=T===""?(r?Qa(ht(a,P),-1):ht(a,P)).charAt(1):ct(a,M).charAt(1),U=q=>w?no(o,q):null,W=q=>_?ro({baseBranch:I,targetBranch:q,era:Df(O),gaehwa:!!j}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsxs("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300 flex items-center justify-between gap-2",children:[g.jsx("span",{children:""}),g.jsxs("div",{className:"inline-flex rounded-md overflow-hidden border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("button",{type:"button",onClick:()=>m("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>m("daewoonDisplayBase",""),className:`px-2 py-1 text-[11px] desk:text-xs tracking-[-1px] cursor-pointer transition-colors ${C===""?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700"}`,children:""})]})]}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:n.map((q,H)=>{const B=q.gz.charAt(0),K=q.gz.charAt(1),V=Fse(q.age),Z=H===d,G=xi(B,"stem",b),J=xi(K,"branch",b),Q=to(B,"stem"),oe=to(K,"branch"),te=y&&Q?"font-thin":"font-bold",z=y&&oe?"font-thin":"font-bold",X=U(K),re=W(K);return g.jsxs("div",{onClick:()=>u(q,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${Z?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${q.gz}  ${q.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:V}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(o,{stem:B})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Ki(B,"stem",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${te}`,children:G})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Ki(K,"branch",h)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${z}`,children:J})}),k&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(o,{branch:K})}),(w||_)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[w&&g.jsx("div",{children:X}),_&&g.jsx("div",{children:re})]})]})]},`${q.gz}-${H}`)})})]})}function Fse(e){return e>=2?String(Math.floor(e)):Number.isInteger(e)?String(e):e.toFixed(4).replace(/\.?0+$/,"")}const Hse=!1,LP=e=>e<10?`0${e}`:`${e}`;function uT(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8)),l=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let u=!1;for(const d of l){const h=t[d];if(typeof h=="boolean"){u=h;break}if(typeof h=="number"){u=h===1;break}if(typeof h=="string"){u=h==="1"||h.toLowerCase()==="true";break}}if(r==="lunar")try{const d=Vi(i,a,o,0,0),h=`${d.getFullYear()}${LP(d.getMonth()+1)}${LP(d.getDate())}`;return{...e,birthDay:h,calendarType:"solar"}}catch{return e}return e}function P1(e){return new Date(e,6,2,12,0,0,0)}function Gse(e,t){return t-e+1}function Yse({data:e,list:t,onSelect:n}){const r=un(q=>q.settings),{date:i,setFromEvent:a}=Jr(),o=rc(),l=Ui(q=>q.usePrevDay),[u,d]=S.useState(()=>t);S.useEffect(()=>{t&&t.length>0&&d(t)},[t]);const h=Wl(e,o),m=S.useMemo(()=>Zl(e,h),[e,h]),b=S.useMemo(()=>m.getFullYear(),[m]),y=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,k=S.useMemo(()=>{if(!i)return[];const q=i.getFullYear(),H=P1(q),B=ct(H,y);return[{at:H,gz:B}]},[i,y]),w=t.length>0?t:u.length>0?u:k,_=S.useMemo(()=>[...w].sort((q,H)=>q.at.getTime()-H.at.getTime()),[w]),T=S.useMemo(()=>{if(_.length===0)return 0;const q=dx(_,i);return q<0?0:q>=_.length?_.length-1:q},[_,i]),[O,j]=S.useState(null);S.useEffect(()=>{j(null)},[i,_]);const C=O??T,M=S.useMemo(()=>{const q=uT(e);return Wl(q,o)},[e,o]),P=S.useMemo(()=>Zl(e,M),[e,M]),I=e.mingSikType??"/",U=S.useMemo(()=>{const q=ht(P,I);return(l?Qa(q,-1):q).charAt(0)},[P,I,l]),W=S.useMemo(()=>r.sinsalBase===""?(l?Qa(ht(m,I),-1):ht(m,I)).charAt(1):ct(m,y).charAt(1),[m,I,y,r.sinsalBase,l]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:_.map((q,H)=>{const B=q.at.getFullYear(),K=P1(B),V=ct(K,y),Z=V.charAt(0),G=V.charAt(1),J=H===C,Q=xi(Z,"stem",r.charType),oe=xi(G,"branch",r.charType),te=to(Z,"stem"),z=to(G,"branch"),X=r.thinEum&&te?"font-thin":"font-bold",re=r.thinEum&&z?"font-thin":"font-bold",ie=r.showSibiUnseong?no(U,G):null,fe=r.showSibiSinsal?ro({baseBranch:W,targetBranch:G,era:Df(r.sinsalMode),gaehwa:!!r.sinsalBloom}):null,de=Gse(b,B);return g.jsxs("div",{onClick:()=>{j(H);const pe=P1(B),Ne=ct(pe,y);a({at:pe,gz:Ne},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(B)):Promise.resolve().then(()=>n(B)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${J?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${V}  ${q.at.toLocaleDateString()}  ${de}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[de,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:B}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(U,{stem:Z})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Ki(Z,"stem",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${Ki(G,"branch",r)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${re}`,children:oe})}),r.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(U,{branch:G})}),(r.showSibiUnseong||r.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[r.showSibiUnseong&&ie&&g.jsx("div",{children:ie}),r.showSibiSinsal&&fe&&g.jsx("div",{children:fe})]})]})]},`${B}-${q.gz||H}`)})})]})}const qse=new Set(["","","","","","","","","","","",""]);function Kse(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),i=[...wi(new Date(n-1,5,15,12,0))??[],...wi(new Date(n,5,15,12,0))??[],...wi(new Date(n+1,5,15,12,0))??[]].map(u=>({name:String(u.name),date:new Date(u.date)})).sort((u,d)=>u.date.getTime()-d.date.getTime()).filter(u=>qse.has(u.name));let a=i.findIndex((u,d)=>i[d].date<=t&&t<i[d+1]?.date);a<0&&(a=0);const o=i[a],l=i[a+1];return{start:new Date(o.date.getFullYear(),o.date.getMonth(),o.date.getDate(),0,0,0,0),end:new Date(l.date.getFullYear(),l.date.getMonth(),l.date.getDate(),0,0,0,0),cur:o,next:l}}const Wse=new Set(["","","","","","","","","","","",""]);function Vse(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function Zse(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function R1(e){return new Date(e,5,15,12,0,0,0)}function Xse(e){const n=[...wi(R1(e-1))??[],...wi(R1(e))??[],...wi(R1(e+1))??[]].map(l=>({name:String(l.name),date:new Date(l.date)})).sort((l,u)=>l.date.getTime()-u.date.getTime()).filter(l=>Wse.has(l.name)),r=new Date(e,0,1,0,0,0,0),i=new Date(e+1,0,1,0,0,0,0),a=n.findIndex(l=>l.name===""&&l.date>=r&&l.date<i);if(a===-1)return[];const o=[];for(let l=0;l<12;l++){const u=n[a+l];if(!u)break;const d=new Date(u.date),h=Vse(d);o.push({name:u.name,termAt:d,at00:h})}return o}function Jse({data:e,activeYear:t,onSelect:n,onSelectMonth:r}){const i=un(j=>j.settings),a=rc(),o=Ui(j=>j.usePrevDay),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Wl(e,a),d=S.useMemo(()=>Zl(e,u),[e,u]),h=S.useMemo(()=>{const j=uT(e);return Wl(j,a)},[e,a]),m=S.useMemo(()=>Zl(e,h),[e,h]),b=e.mingSikType??"/",y=S.useMemo(()=>{const j=ht(m,b);return(o?Qa(j,-1):j).charAt(0)},[m,b,o]),k=i.sinsalBase===""?(o?Qa(ht(d,b),-1):ht(d,b)).charAt(1):ct(d,l).charAt(1),w=S.useMemo(()=>t?Xse(t).map(C=>{const M=C.termAt,P=new Date(C.termAt.getTime()+1860*1e3),I=At(P,l);return{at:M,gz:I,term:C.name,termAt:C.termAt}}):[],[t,l]),{date:_,setFromEvent:T}=Jr(),O=dx(w,_);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:w.map((j,C)=>{const M=j.gz.charAt(0),P=j.gz.charAt(1),I=`${Zse(j.at)}`,U=C===O,W=xi(M,"stem",i.charType),q=xi(P,"branch",i.charType),H=to(M,"stem"),B=to(P,"branch"),K=i.thinEum&&H?"font-thin":"font-bold",V=i.thinEum&&B?"font-thin":"font-bold",Z=i.showSibiUnseong?no(y,P):null,G=i.showSibiSinsal?ro({baseBranch:k,targetBranch:P,era:Df(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{r(j.at);const J=new Date(j.at),{start:Q}=Kse(J);n?.(Q.getFullYear(),Q.getMonth()),T({at:J,gz:At(J,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${U?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${j.term}   ${j.gz}  ${j.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:I}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(y,{stem:M})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Ki(M,"stem",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${K}`,children:W})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${Ki(P,"branch",i)}`,children:g.jsx("span",{className:`text-base md:text-xl ${V}`,children:q})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Sa(y,{branch:P})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&Z&&g.jsx("div",{children:Z}),i.showSibiSinsal&&G&&g.jsx("div",{children:G})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:j.term})]})]},`${j.term}-${j.at.toISOString()}`)})})]})}function Qse(){const e=un(r=>r.settings),{date:t,setFromEvent:n}=Jr();return{settings:e,pickedDate:t,setFromEvent:n}}const ele=(e,t)=>new Date(e,t,15,12,0,0,0),O2=e=>{const t=new Date(e);return t.setHours(23,59,0,0),t},tle=new Set(["","","","","","","","","","","",""]),j7=e=>[...wi(new Date(e-1,5,15,12,0))??[],...wi(new Date(e,5,15,12,0))??[],...wi(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,r)=>n.date.getTime()-r.date.getTime()),nle=e=>{const t=j7(e.getFullYear()),n=t.filter(o=>tle.has(o.name));if(n.length<12){const o=t.findIndex(d=>d.date>e),l=t[Math.max(0,o-1)],u=t[Math.min(t.length-1,o)];return{start:new Date(l.date),end:new Date(u.date),cur:l,next:u}}let r=n.findIndex(o=>o.date>e)-1;r<0&&(r=n.length-1);const i=n[r],a=n[(r+1)%n.length];return{start:new Date(i.date),end:new Date(a.date),cur:i,next:a}},rle=e=>{if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",r="",i="",a="";for(const o of t)o.type==="month"&&(n=o.value),o.type==="day"&&(r=o.value),o.type==="hour"&&(i=o.value),o.type==="minute"&&(a=o.value);return`${n}/${r} ${i}:${a}`};function ile({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i=0,settings:a,pickedDate:o}){const l=Ui(B=>B.usePrevDay),u=a.ilunRule||"/",d=e.mingSikType??"/",h=S.useMemo(()=>{const B=uT(e);return Wl(B,i)},[e,i]),m=S.useMemo(()=>Zl(e,h),[e,h]),b=S.useMemo(()=>{if(!m)return;const B=ht(m,d);return(l?Qa(B,-1):B).charAt(0)},[m,d,l]),y=S.useMemo(()=>e?Wl(e,i):null,[e,i]),k=S.useMemo(()=>e&&y?Zl(e,y):null,[e,y]),w=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&k?a.sinsalBase===""?(l?Qa(ht(k,d),-1):ht(k,d)).charAt(1):ct(k,w).charAt(1):null,T=S.useMemo(()=>ele(t,n),[t,n]),O=S.useMemo(()=>o?O2(new Date(o)):null,[o]),j=S.useMemo(()=>r?O2(r):null,[r]),C=S.useMemo(()=>O??j??T,[O,j,T]),{start:M,end:P,cur:I,next:U}=S.useMemo(()=>nle(C),[C]),W=S.useMemo(()=>{const B=[],K=new Date(M);for(;K<P;)B.push(new Date(K)),K.setDate(K.getDate()+1);return B},[M,P]),q=S.useMemo(()=>{const B=j7(C.getFullYear()),K=B.filter(Z=>Z.date>=M&&Z.date<P),V=B.find(Z=>Z.date>=P);return V?[...K,V]:K},[C,M,P]),H=S.useMemo(()=>{const B=[];let K=[];const V=new Date(M).getDay();for(let Z=0;Z<V;Z+=1)K.push(null);for(const Z of W)K.length===7&&(B.push(K),K=[]),K.push(Z);for(;K.length<7;)K.push(null);return B.push(K),B},[W,M]);return{rule:u,dayStem:b,baseBranch:_,pickerNoon:O,termMarks:q,weeks:H,cur:I??null,next:U??null}}function ale({setFromEvent:e}){return{handleDayClick:S.useCallback(n=>{e({at:n},"")},[e])}}function ole({data:e,year:t,month:n,selectedMonth:r}){const i=rc(),a=Qse(),o=ile({data:e,year:t,month:n,selectedMonth:r,dstOffsetMinutes:i,settings:a.settings,pickedDate:a.pickedDate}),l=ale({setFromEvent:a.setFromEvent});return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[o.cur?.name?g.jsxs(g.Fragment,{children:[o.cur.name," "," ~ ",o.next?.name??""]}):`${t} ${n}`,o.termMarks.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",o.termMarks.map((u,d)=>g.jsxs("span",{children:[u.name," ",rle(u.date),d<o.termMarks.length-1?"  ":""]},`${u.name}_${u.date.getTime()}_${d}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(u=>g.jsx("div",{className:"py-1",children:u},u))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:o.weeks.map((u,d)=>u.map((h,m)=>{if(!h)return g.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800"},`${d}-${m}`);const b=O2(h),y=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0),k=new Date,w=b.getFullYear()===k.getFullYear()&&b.getMonth()===k.getMonth()&&b.getDate()===k.getDate(),T=!!o.pickerNoon&&b.getFullYear()===o.pickerNoon.getFullYear()&&b.getMonth()===o.pickerNoon.getMonth()&&b.getDate()===o.pickerNoon.getDate()||!o.pickerNoon&&w,O=i!==0?new Date(y.getTime()+i*60*1e3):y,j=cW(O,o.rule),C=j.charAt(0),M=j.charAt(1),P=xi(C,"stem",a.settings.charType),I=xi(M,"branch",a.settings.charType),U=a.settings.thinEum&&to(C,"stem")?"font-thin":"font-bold",W=a.settings.thinEum&&to(M,"branch")?"font-thin":"font-bold",q=!!o.dayStem&&a.settings.showSipSin,H=!!o.dayStem&&a.settings.showSibiUnseong,B=!!o.dayStem&&o.baseBranch!=null&&a.settings.showSibiSinsal,K=q?Sa(o.dayStem,{stem:C}):"",V=q?Sa(o.dayStem,{branch:M}):"",Z=H?no(o.dayStem,M):"",G=B?ro({baseBranch:o.baseBranch,targetBranch:M,era:Df(a.settings.sinsalMode),gaehwa:!!a.settings.sinsalBloom}):"",J=o.termMarks.find(Q=>Q.date.getFullYear()===b.getFullYear()&&Q.date.getMonth()===b.getMonth()&&Q.date.getDate()===b.getDate());return g.jsxs("div",{onClick:()=>l.handleDayClick(y),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${T?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${j} (${b.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:b.getDate()}),J&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:J.name})]}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:K}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Ki(C,"stem",a.settings)}`,children:g.jsx("span",{className:U,children:P})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${Ki(M,"branch",a.settings)}`,children:g.jsx("span",{className:W,children:I})}),q&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:V}),(H||B)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[H&&Z&&g.jsx("div",{children:Z}),B&&G&&g.jsx("div",{children:G})]})]},h.toISOString())}))})]})}function IP(e,t){const n=e.startYear??e.at.getFullYear(),r=t?t.startYear??t.at.getFullYear():n+10,i=[];for(let a=n;a<r;a++){const o=gn(a,315),l=ct(new Date(a,1,10));i.push({at:o,gz:l})}return i}function sle({data:e}){const t=rc(),n=Du(e,e.mingSikType,100,t),[r,i]=S.useState(null),[a,o]=S.useState(null),[l,u]=S.useState("il"),[d,h]=S.useState(null);S.useEffect(()=>{if(!n.length)return;const _=new Date,T=n.findIndex((O,j)=>{const C=n[j+1]?.at;return _>=O.at&&(!C||_<C)});T!==-1&&i(T)},[n]);const m=_=>_<=0&&n.length>1?1:_;S.useEffect(()=>{if(r===null)return;const _=m(r),T=n[_],O=n[_+1];if(!T)return;const j=IP(T,O);if(!Array.isArray(j)||j.length===0)return;const C=j.filter(U=>!!U&&U.at instanceof Date&&!Number.isNaN(U.at.getTime()));if(!C.length)return;const M=new Date,P=M.getTime();C.findIndex((U,W)=>{const q=C[W+1]?.at,H=U.at.getTime(),B=q?q.getTime():null;return P>=H&&(B===null||P<B)})!==-1&&o({year:M.getFullYear(),month:M.getMonth()})},[r,n]);const b=lx(e,void 0,void 0,{dstOffsetMinutes:t}),{date:y}=Jr(),k=y.getMonth()+1===1?y.getFullYear()-1:y.getFullYear(),w=S.useMemo(()=>{if(!b?.dae?.gz)return[];const _=n.findIndex((M,P)=>{const I=n[P+1]?.at;return b.dae.at>=M.at&&(!I||b.dae.at<I)});if(_===-1)return[];const T=m(_),O=n[T],j=n[T+1],C=IP(O,j);return Array.isArray(C)?C.filter(M=>!!M&&M.at instanceof Date&&!Number.isNaN(M.at.getTime())):[]},[n,b?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(Use,{data:e}),l==="se"||l==="wol"||l==="il"?g.jsx(Yse,{data:e,list:w,onSelect:()=>{u("wol")}}):null,l==="wol"||l==="il"?g.jsx(Jse,{data:e,activeYear:k,onSelect:(_,T)=>{o({year:_,month:T}),u("il")},onSelectMonth:h}):null,l==="il"&&a&&g.jsx(ole,{data:e,year:a.year,month:a.month+1,selectedMonth:d})]})}const lle=new Set(XK),cle=new Set(JK);function $P(e){return typeof e=="string"&&e.length>=2&&lle.has(e[0])&&cle.has(e[1])}function Pi(e,...t){if($P(e))return e;for(const n of t)if($P(n))return n;return""}const ule={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22};function eb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function dle({data:e}){const t=un(K=>K.settings),{manualHour:n}=Ui(),{showSibiUnseong:r,showSibiSinsal:i,sinsalBase:a,sinsalMode:o,sinsalBloom:l}=t,{date:u}=Jr(),d=rc(),h=e.mingSikType??"/",m=e.DayChangeRule??(e.mingSikType===""?"":""),b=S.useMemo(()=>Cf(e),[e]),y=S.useMemo(()=>sx(b,{dstOffsetMinutes:d}),[b,d]),k=S.useMemo(()=>Vj(b,h,{dstOffsetMinutes:d}),[b,d,h]),w=S.useMemo(()=>Vv(k.day?.charAt(0)??""),[k.day]),_=!e.birthTime||e.birthTime==="",T=S.useMemo(()=>X6(y,k.hour,e.dir??"forward",120),[y,k.hour,e.dir]),O=S.useMemo(()=>Q6(T,k.day,e.dir??"forward",m),[T,k.day,e.dir,m]),j=S.useMemo(()=>Dp(y,k.month,e.dir??"forward",120,b.birthPlace?.lon??127.5),[y,k.month,e.dir,b.birthPlace?.lon]),C=S.useMemo(()=>e7(j,k.year,e.dir??"forward",m,y),[j,k.year,e.dir,y,m]),M=S.useMemo(()=>{const K=T?.events?.[0];return K?{at:K.at,from:Pi(k.hour),to:Pi(K.gz)}:null},[T?.events,k.hour]),P=S.useMemo(()=>{const K=j?.events?.[0];return j?.firstChange?{at:j.firstChange,from:Pi(k.month),to:Pi(K?.gz??k.month)}:null},[j?.firstChange,j?.events,k.month]),I=S.useMemo(()=>{const K=_?n?n.stem+n.branch:"":Pi(eb(T.events,u)?.gz,k.hour);let V;if(_&&n){const Z=u.getFullYear(),G=u.getMonth(),J=u.getDate(),Q=ule[n.branch]??0,oe=new Date(Z,G,J,Q,0),te=ht(oe,h);V=Pi(te,k.day)}else V=Pi(eb(O.events,u)?.gz,k.day);return{si:K,il:V,wl:Pi(eb(j.events,u)?.gz,k.month),yn:Pi(eb(C.events,u)?.gz,k.year)}},[u,T.events,O.events,j.events,C.events,k,_,n,h]),U=S.useMemo(()=>({si:Pi(eo(u,h)),il:Pi(ht(u,h)),wl:Pi(At(u)),yn:Pi(ct(u))}),[u,h]),W=S.useMemo(()=>a===""?k.day.charAt(1):k.year.charAt(1),[a,k.day,k.year]),q=S.useMemo(()=>Df(o),[o]),H=K=>{if(!K)return{unseong:"",shinsal:""};const V=xi(w,"stem",""),Z=xi(K.charAt(1),"branch",""),G=xi(W,"branch","");return{unseong:r&&no(V,Z)||"",shinsal:i&&ro({baseBranch:G,targetBranch:Z,era:q,gaehwa:!!l})||""}},B=(K,V,Z="myoun")=>{const G=V,{unseong:J,shinsal:Q}=V?H(V):{unseong:"",shinsal:""},oe=Z==="myoun"&&_&&(K===""||K==="");return g.jsx(zd,{label:K,gz:G,dayStem:w,settings:t,unseongText:V?J:"",shinsalText:V?Q:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:oe},`${Z}-${K}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Lm(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[B("",I.si,"myoun"),B("",I.il,"myoun"),B("",I.wl,"myoun"),B("",I.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[B("",U.si,"live"),B("",U.il,"live"),B("",U.wl,"live"),B("",U.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",M?`${Lm(M.at)} (${M.from}  ${M.to})`:" "]}),g.jsxs("div",{children:[":"," ",P?`${Lm(P.at)} (${P.from}  ${P.to})`:" "]})]})]})}const fle=["","","","","","","","","",""],hle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},mle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},T7={:"",:"",:"",:"",:""},A7={:"",:"",:"",:"",:""},N7={:"",:"",:"",:"",:""};function ple(e,t){switch(e){case"":return t;case"":return T7[t];case"":return A7[t];case"":return N7[t];case"":return O7[t];default:return t}}const O7={:"",:"",:"",:"",:""};function gle({data:e,perStemElementScaled:t,dayStem:n,yongshinTop:r,yongshinKind:i,width:a=340,height:o=360}){const l=a/2,u=o/2-20,d=Math.min(a,o)*.33,h=S.useMemo(()=>{const w=(n??"").charAt(0);return mle[w]??null},[n]),m=S.useMemo(()=>e.map((w,_)=>{const T=Math.PI/2+2*-Math.PI*_/5;return{...w,angle:T,x:l+d*Math.cos(T),y:u-d*Math.sin(T)}}),[e,l,u,d]),b=w=>w?w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":w.includes("")?"":null:null,y=(w,_)=>_===w?"":T7[w]===_?"":A7[w]===_?"":N7[w]===_?"":O7[w]===_?"":"",k=S.useMemo(()=>{if(!e||e.length===0)return null;const w=[...e].sort((P,I)=>I.value-P.value),_=w[0],O=w[w.length-1]?.name??"",j=b(r),C=h&&j?y(h,j):O;return{summary:i==="GYEOKGUK"?`${_.name}   ,    ${_.name}  .`:`${_.name}   ,  ${C}     .`,advice:_.value>45?`${_.name}         .`:"       ."}},[e,h,r,i]);return g.jsxs("div",{className:"w-full flex flex-col items-center p-6 bg-white dark:bg-neutral-900 rounded-[2.5rem] border border-neutral-100 dark:border-neutral-800 shadow-xl tracking-tighter transition-colors",children:[g.jsx("div",{className:"text-center mb-4",children:g.jsxs("h3",{className:"text-lg font-black text-neutral-800 dark:text-neutral-100",children:[n,"  "]})}),g.jsxs("svg",{width:a,height:o,className:"overflow-visible",children:[g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:g.jsx("path",{d:"M0,0 L10,3.5 L0,7 Z",fill:"#94a3b8",opacity:"0.4"})})}),m.map((w,_)=>{const T=m[(_+2)%5];return g.jsx("line",{x1:w.x,y1:w.y,x2:T.x,y2:T.y,stroke:"currentColor",className:"text-neutral-200 dark:text-neutral-800",strokeWidth:1.5,strokeDasharray:"4 4"},`line-ke-${_}`)}),m.map((w,_)=>{const T=m[(_+1)%5],O=(w.x+T.x)/2,j=(w.y+T.y)/2,C=O-l,M=j-u,P=l+C*1.45,I=u+M*1.45;return g.jsx("path",{d:`M${w.x},${w.y} Q${P},${I} ${T.x},${T.y}`,stroke:"#94a3b8",strokeWidth:2,strokeOpacity:.25,fill:"none",markerEnd:"url(#arrow)"},`path-sheng-${_}`)}),m.map(w=>{const _=w.name,T=h?ple(_,h):null,O=T?fle.filter(j=>hle[j]===T).map(j=>[j,t?.[j]??0]):[];return g.jsxs("g",{transform:`translate(${w.x},${w.y})`,children:[g.jsx("circle",{r:40,fill:w.color,className:"stroke-white/20 dark:stroke-black/20",strokeWidth:1}),g.jsx("circle",{r:40,fill:"black",opacity:.05}),g.jsx("text",{textAnchor:"middle",dy:"-5",fontSize:15,className:"fill-white font-black",children:w.name}),g.jsxs("text",{textAnchor:"middle",dy:"15",fontSize:13,className:"fill-white/90 font-bold",children:[w.value,"%"]}),g.jsx("g",{transform:"translate(0, 48)",children:O.map(([j,C],M)=>{const P=j.charAt(0),I=Math.round(C),U=I===0;return g.jsxs("g",{transform:`translate(${(M===0?-1:1)*25}, 0)`,children:[g.jsx("rect",{x:"-21",y:"0",width:"42",height:"21",rx:"10.5",fill:U?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.3)"}),g.jsxs("text",{textAnchor:"middle",y:"14.5",fontSize:12,className:`font-black ${U?"fill-neutral-400 dark:fill-neutral-500":"fill-white"}`,children:[g.jsx("tspan",{children:P}),g.jsx("tspan",{dx:"1",children:I})]})]},j)})})]},w.name)})]}),k&&g.jsxs("div",{className:"w-full mt-6 space-y-3",children:[g.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800 text-center",children:g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold",children:k.summary})}),g.jsx("div",{className:"px-4 py-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-2xl border border-blue-100/30 text-center",children:g.jsxs("p",{className:"text-[11.5px] text-blue-700 dark:text-blue-300 font-bold",children:[" ",k.advice]})})]})]})}const ble=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function dT(e){return Math.max(0,Math.min(100,e))}function C7(e){const t=dT(e);return ble.find(r=>t>=r.min&&t<r.max)?.name??""}const yle=[10,20,35,45,55,65,80];function vle({value:e}){const[t,n]=S.useState(!1),r=S.useMemo(()=>dT(e),[e]),i=S.useMemo(()=>C7(r),[r]);S.useEffect(()=>{n(!0)},[]);const a=S.useMemo(()=>r>=80?{tag:"",desc:"      .",advice:"  () ()   ."}:r>=55?{tag:"",desc:"      .",advice:"      ."}:r>=45?{tag:"",desc:"        .",advice:"      ."}:r>=20?{tag:"",desc:"       .",advice:"() ()       ."}:{tag:"",desc:"       .",advice:"        ."},[r]);return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-lg border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-end mb-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"    "}),g.jsx("p",{className:"text-[10px] text-neutral-400 uppercase tracking-tighter",children:"  "})]}),g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:"text-2xl font-black text-neutral-800 dark:text-white",children:r.toFixed(0)}),g.jsx("span",{className:"text-xs font-bold text-neutral-500",children:"%"})]})]}),g.jsxs("div",{className:"relative mb-8 pt-4",children:[g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-2 px-1",children:[g.jsx("span",{children:""}),g.jsx("span",{className:"translate-x-1",children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-3 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-emerald-400 via-yellow-400 to-red-500 opacity-80"}),yle.map(o=>g.jsx("div",{className:"absolute top-0 h-3 w-[1.5px] bg-white/30 dark:bg-black/20",style:{left:`${o}%`}},o)),g.jsx("div",{className:"absolute left-1/2 top-0 w-0.5 h-3 bg-white/50 -translate-x-1/2 z-10"}),g.jsx("div",{className:"absolute -top-1.5 h-6 w-3 bg-white dark:bg-neutral-100 rounded-full shadow-[0_2px_8px_rgba(0,0,0,0.3)] border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:t?`${r}%`:"50%",transform:"translateX(-50%)"},children:g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsx("div",{className:"w-1 h-2 bg-neutral-300 rounded-full"})})})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:`px-3 py-1 rounded-full text-[11px] font-black border-2 ${r>=55?"border-red-500/20 bg-red-50 text-red-600":r>=45?"border-emerald-500/20 bg-emerald-50 text-emerald-600":"border-blue-500/20 bg-blue-50 text-blue-600"}`,children:[a.tag," (",i,")"]}),g.jsx("div",{className:"h-[1px] flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsxs("div",{className:"px-1",children:[g.jsx("p",{className:"text-[12px] text-neutral-700 dark:text-neutral-300 font-bold leading-snug mb-1",children:a.desc}),g.jsxs("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed italic",children:[" ",a.advice]})]})]})]})}const BP={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},xle=["year","month","day","hour"],wle=new Set(["","","","",""]),tb=new Set(["","","","",""]),zP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_le={:5,:7,:5,:-5,:-7,:-5};function Sle({natal:e,perStemElementScaled:t}){const[n,r]=S.useState(!1);S.useEffect(()=>{const b=setTimeout(()=>r(!0),100);return()=>clearTimeout(b)},[e]);const i=S.useMemo(()=>{if(!t||!e||e.length<4)return null;let b=0,y=0;Object.entries(t).forEach(([K,V])=>{tb.has(K.charAt(0))?b+=V:y+=V});const k=b+y>0?(b-y)/(b+y):0;let w=0,_=0,T=0,O=0;e.forEach(K=>{[K[0],zP[K[1]]].forEach(V=>{V&&(wle.has(V)?w+=1:_+=1,tb.has(V)?T+=1:O+=1)})});const j=w+_>0?(w-_)/(w+_):0,C=T+O>0?(T-O)/(T+O):0;let M=0,P=0;e.forEach((K,V)=>{const Z=xle[V],G=BP[Z].stem,J=BP[Z].branch;tb.has(K[0])?M+=G:P+=G;const Q=zP[K[1]];Q&&tb.has(Q)?M+=J:P+=J});const I=M+P>0?(M-P)/(M+P):0,U=e[1]?.charAt(1),W=(_le[U]||0)/100,q=j*.3+C*.3+k*.2+I*.2+W,H=(Math.min(1,Math.max(-1,q))+1)*50,B=100-Math.abs(H-50)*2;return{yang:H,yin:100-H,essencePos:(j+1)*50,naturePos:(C+1)*50,harmony:B,category:H>=55?"":H<=45?"":""}},[e,t]),a=S.useMemo(()=>{if(!i)return null;const{yang:b,essencePos:y,naturePos:k,category:w,harmony:_}=i,T=Math.abs(y-k);let O="";w===""?O="              .":w===""?O=b>75?"    .       .":"         .":O=b<25?"    .         .":"   .         .";let j="";T<15?j="     .      .":T<40?j="       .    .":j="        .      .";let C="";return _>85?C="    .   .":w===""?C="         .":C="          .",{natureDetail:O,consistencyDetail:j,advice:C}},[i]);if(!i||!a)return null;const{yang:o,yin:l,essencePos:u,naturePos:d,harmony:h,category:m}=i;return g.jsxs("div",{className:"w-full p-6 bg-white dark:bg-neutral-900 rounded-3xl shadow-xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-start mb-10",children:[g.jsx("div",{children:g.jsx("h3",{className:"text-lg font-bold text-neutral-800 dark:text-neutral-100 leading-tight",children:"   "})}),g.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-xl text-center border border-emerald-100 dark:border-emerald-800/50",children:[g.jsx("div",{className:"text-[9px] font-bold text-emerald-600 mb-0.5 uppercase",children:""}),g.jsxs("div",{className:"text-base font-black text-emerald-500 leading-none",children:[h.toFixed(0),"%"]})]})]}),g.jsxs("div",{className:"relative mb-14 px-1",children:[n&&g.jsxs("div",{className:"absolute -top-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${u}%`,transform:"translateX(-50%)"},children:[g.jsx("span",{className:"text-[10px] font-bold text-blue-500 mb-1",children:""}),g.jsx("div",{className:"w-[1.5px] h-3 bg-blue-500/40 rounded-full"})]}),g.jsxs("div",{className:"relative w-full h-8 bg-neutral-100 dark:bg-neutral-800 rounded-2xl flex overflow-hidden shadow-inner border-[3px] border-white dark:border-neutral-900",children:[g.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000 ease-out",style:{width:n?`${l}%`:"50%"}}),g.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-out",style:{width:n?`${o}%`:"50%"}}),g.jsx("div",{className:"absolute left-1/2 top-0 w-[1px] h-full bg-white/30 -translate-x-1/2 z-10"})]}),n&&g.jsxs("div",{className:"absolute -bottom-8 transition-all duration-1000 ease-out flex flex-col items-center",style:{left:`${d}%`,transform:"translateX(-50%)"},children:[g.jsx("div",{className:"w-[1.5px] h-3 bg-red-500/40 rounded-full"}),g.jsx("span",{className:"text-[10px] font-bold text-red-500 mt-1",children:""})]})]}),g.jsxs("div",{className:"space-y-3 mb-5 mt-6",children:[g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.natureDetail})]}),g.jsxs("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/40 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("h4",{className:"text-[11.5px] font-bold text-neutral-800 dark:text-neutral-300 mb-1.5 flex items-center gap-1.5",children:[g.jsx("span",{className:"w-1 h-1 bg-blue-400 rounded-full"}),"  "]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed",children:a.consistencyDetail})]})]}),g.jsxs("div",{className:`text-center py-3 rounded-xl text-[11px] font-bold tracking-tight shadow-sm ${m===""?"bg-red-50 text-red-600 dark:bg-red-950/20":m===""?"bg-blue-50 text-blue-600 dark:bg-blue-950/20":"bg-emerald-50 text-emerald-600 dark:bg-emerald-950/20"}`,children:[" ",a.advice]})]})}function im(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function ca({label:e,natal:t,dae:n,se:r,wol:i,il:a}){const o=n.length+r.length+i.length+a.length>0,l=t.length>0?t:["#"],u=o?l.filter(m=>m!=="#"):l,h=u.some(m=>m!=="#")||n.length>0||r.length>0||i.length>0||a.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:h,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(m,"natal"),children:m},`natal-${b}`)),n.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(m,"dae"),children:m},`dae-${b}`)),r.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(m,"se"),children:m},`se-${b}`)),i.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(m,"wol"),children:m},`wol-${b}`)),a.map((m,b)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+im(m,"il"),children:m},`il-${b}`))]})]})}function C2(e){return Array.isArray(e)?e:[]}function nb(e,t){const n=new Set(C2(e));return C2(t).filter(i=>!n.has(i))}function kle({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const o=cx(e),l=Bl({natal:e}),u=t?Bl({natal:e,daewoon:t}):l,d=n?Bl({natal:e,daewoon:t,sewoon:n}):u,h=r?Bl({natal:e,daewoon:t,sewoon:n,wolwoon:r}):d,m=i?Bl({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i}):h,b=w=>({natal:C2(o[w]),dae:nb(l[w],u[w]),se:nb(u[w],d[w]),wol:nb(d[w],h[w]),il:nb(h[w],m[w])}),y={cheonganHap:b("cheonganHap"),cheonganChung:b("cheonganChung"),jijiSamhap:b("jijiSamhap"),jijiBanhap:b("jijiBanhap"),jijiBanghap:b("jijiBanghap"),jijiYukhap:b("jijiYukhap"),amhap:b("amhap"),ganjiAmhap:b("ganjiAmhap"),jijiChung:b("jijiChung"),jijiHyeong:b("jijiHyeong"),jijiPa:b("jijiPa"),jijiHae:b("jijiHae")},k=w=>a===""?{natal:w.natal,dae:[],se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:[],wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:[],il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:[]}:a===""?{natal:w.natal,dae:w.dae,se:w.se,wol:w.wol,il:w.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(ca,{label:"",...k(y.cheonganHap)}),g.jsx(ca,{label:"",...k(y.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(ca,{label:"",...k(y.jijiSamhap)}),g.jsx(ca,{label:"",...k(y.jijiBanhap)}),g.jsx(ca,{label:"",...k(y.jijiBanghap)}),g.jsx(ca,{label:"",...k(y.jijiYukhap)}),g.jsx(ca,{label:"",...k(y.amhap)}),g.jsx(ca,{label:"",...k(y.ganjiAmhap)}),g.jsx(ca,{label:"",...k(y.jijiChung)}),g.jsx(ca,{label:"",...k(y.jijiHyeong)}),g.jsx(ca,{label:"",...k(y.jijiPa)}),g.jsx(ca,{label:"",...k(y.jijiHae)})]})}function Ele(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function jle({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((r,i)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+Ele(r,t),children:r},`${t}-${i}-${r}`))})}function UP({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const i=n.items.some(a=>a!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 p-1 rounded-sm",children:[g.jsx("div",{className:i,children:n.label}),g.jsx(jle,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function Tle({pillars:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,tab:a=""}){const{settings:o}=un(),[l,u]=S.useState(""),[d,h]=S.useState("");S.useEffect(()=>{o.sinsalBase===""?(u(""),h("")):(u(""),h(""))},[o.sinsalBase]);const m=S.useMemo(()=>({voidBasis:l===""?"day":"year",samjaeBasis:d===""?"day":"year"}),[l,d]),b=S.useMemo(()=>Lp({natal:e,daewoon:t,sewoon:n,wolwoon:r,ilwoon:i,basis:m}),[e,t,n,r,i,m]),{good:y,bad:k,meta:w}=b,_=q=>q.map(H=>H==="#"?H:` ${H}`),T=(q,H)=>{const B=["natal"];return H===""&&B.push("natal"),H===""&&B.push("natal","dae"),H===""&&B.push("natal","dae","se"),H===""&&B.push("natal","dae","se","wol"),H===""&&B.push("natal","dae","se","wol","il"),q.filter(K=>B.includes(K.source))},O=[{label:"",items:_(y.si),source:"natal"},{label:"",items:_(y.il),source:"natal"},{label:"",items:_(y.wol),source:"natal"},{label:"",items:_(y.yeon),source:"natal"},{label:"",items:y.dae,source:"dae"},{label:"",items:y.se,source:"se"},{label:"",items:y.wolun,source:"wol"},{label:"",items:y.ilun,source:"il"}],j=[{label:"",items:_(k.si),source:"natal"},{label:"",items:_(k.il),source:"natal"},{label:"",items:_(k.wol),source:"natal"},{label:"",items:_(k.yeon),source:"natal"},{label:"",items:k.dae,source:"dae"},{label:"",items:k.se,source:"se"},{label:"",items:k.wolun,source:"wol"},{label:"",items:k.ilun,source:"il"}],C=T(O,a),M=T(j,a),P=w.voidPair.day?`(${w.voidPair.day.join("")})`:"()",I=w.voidPair.year?`(${w.voidPair.year.join("")})`:"()",U=w.samjaeYears.day?`(${w.samjaeYears.day.join("")})`:"()",W=w.samjaeYears.year?`(${w.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:l,onChange:q=>u(q.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:P}),g.jsx("option",{value:"",children:I})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:d,onChange:q=>h(q.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:U}),g.jsx("option",{value:"",children:W})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(UP,{title:"()",rows:C}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(UP,{title:"()",rows:M})]})]})}const ba={year:0,month:1,day:2,hour:3},M7={[ba.year]:.3,[ba.month]:.5,[ba.day]:.3,[ba.hour]:.3},D7={[ba.year]:.15,[ba.month]:.2,[ba.day]:0,[ba.hour]:.15},Ale=e=>Bm.has(e)?e:rr[e]??e,Nle=e=>nf.has(e)?e:Zn[e]??e,Ole=e=>typeof e=="string"&&e.length>=2?Ale(e.slice(-1)):"",Cle=e=>typeof e=="string"&&e.length>=1?Nle(e.slice(0,1)):"",Mn=(e,t,n,r)=>({han:e,nan:t,jo:n,seup:r}),Mle={:Mn(2,0,.5,2),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,2,1,2),:Mn(0,2,2,.5),:Mn(0,2,2,0),:Mn(0,2,2,1),:Mn(2,0,0,2),:Mn(2,0,0,2),:Mn(2,0,1,1)},Dle={:Mn(0,1,1,0),:Mn(0,1,1,0),:Mn(0,2,2,0),:Mn(0,2,2,0),:Mn(0,0,1,0),:Mn(0,0,0,1),:Mn(1,0,0,1),:Mn(1,0,0,1),:Mn(2,0,0,2),:Mn(2,0,0,2)},FP=e=>Math.max(0,Math.min(100,e));function HP(e,t){const n=Math.max(0,e),r=Math.max(0,t),i=n+r;return i<=0?50:r/i*100}function Ple(e){let t=0,n=0,r=0,i=0;return[ba.year,ba.month,ba.day,ba.hour].forEach(a=>{const o=Mle[Ole(e[a])],l=Dle[Cle(e[a])],u=M7[a],d=D7[a];u>0&&o&&(t+=o.han*u,n+=o.nan*u,r+=o.jo*u,i+=o.seup*u),d>0&&l&&(t+=l.han*d,n+=l.nan*d,r+=l.jo*d,i+=l.seup*d)}),{han:t,nan:n,jo:r,seup:i}}function P7(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function R7(e){const{han:t,nan:n,jo:r,seup:i}=Ple(e),a=HP(t,n),o=HP(i,r);return{hanNanPct:FP(a),joSeupPct:FP(o),raw:{han:t,nan:n,jo:r,seup:i},weights:{branch:M7,stem:D7}}}function Rle(e){return R7(P7(e))}function Lle(e){const t=P7(e);return S.useMemo(()=>R7(t),[t])}function GP({label:e,percent:t,leftHint:n,midHint:r,rightHint:i,gradientClass:a}){const[o,l]=S.useState(!1),u=S.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),d=[20,35,50,65,80];return S.useEffect(()=>{l(!0)},[]),g.jsxs("div",{className:"flex-1 p-4 bg-white dark:bg-neutral-900 rounded-3xl shadow-sm border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("span",{className:"text-[11px] font-black text-neutral-400 uppercase",children:e}),g.jsxs("span",{className:"text-sm font-black dark:text-white",children:[u.toFixed(0),"%"]})]}),g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-neutral-400 mb-1.5 px-0.5",children:[g.jsx("span",{children:n}),g.jsx("span",{children:r}),g.jsx("span",{children:i})]}),g.jsxs("div",{className:"relative h-2.5 rounded-full bg-neutral-100 dark:bg-neutral-800 overflow-visible shadow-inner",children:[g.jsx("div",{className:`absolute inset-0 rounded-full opacity-80 ${a}`}),d.map(h=>g.jsx("div",{className:"absolute top-0 h-2.5 w-[1px] bg-white/20 dark:bg-black/10",style:{left:`${h}%`}},h)),g.jsx("div",{className:"absolute -top-1.5 h-5 w-2.5 bg-white dark:bg-neutral-100 rounded-full shadow-md border-2 border-neutral-800 dark:border-white z-20 transition-all duration-1000 ease-out",style:{left:o?`${u}%`:"50%",transform:"translateX(-50%)"}})]})]})}function Ile({natal:e}){const{hanNanPct:t,joSeupPct:n}=Lle(e),r=S.useMemo(()=>{let i="";return t>60?i+="   , ":t<40?i+="   , ":i+="    , ",n>60?i+="     .":n<40?i+="      .":i+="     .",i},[t,n]);return g.jsxs("div",{className:"w-full space-y-3",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx(GP,{label:" ()",percent:t,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-blue-500 via-neutral-200 to-red-500"}),g.jsx(GP,{label:" ()",percent:n,leftHint:"",midHint:"",rightHint:"",gradientClass:"bg-gradient-to-r from-teal-600 via-neutral-200 to-orange-600"})]}),g.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/30 rounded-2xl border border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11.5px] text-neutral-600 dark:text-neutral-400 leading-relaxed text-center font-medium",children:[g.jsx("span",{className:"text-neutral-400 mr-2",children:" :"}),r]})})]})}const Wr={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},qa={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$le={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Iy={:"",:"",:"",:"",:""},L7={:"",:"",:"",:"",:""},tp={:"",:"",:"",:"",:""},I7={:"",:"",:"",:"",:""},Ble={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:7},:{stem:"",w:7},:{stem:"",w:16}}},zle={:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}},:{:{stem:"",w:100}},:{:{stem:"",w:20},:{stem:"",w:30},:{stem:"",w:50}},:{:{stem:"",w:30},:{stem:"",w:70}}};function fT(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}function $7(e){return(typeof e=="string"?e.trim().toLowerCase():"")==="hgc"?"hgc":"classic"}function hT(e){return e==="hgc"?zle:Ble}const Ule={:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""]},L1={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},B7={:"",:"",:"",:"",:""},z7={:"",:"",:"",:""},Fle=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],Hle=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Gle={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},Je=(e,t)=>`${e}${t}`,Li=(e,t,n)=>`${e}${t}${n}`,Yle={:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]},YP={[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:["",""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""],[Je("","")]:[""]},qP={[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:[""],[Li("","","")]:["",""]},qle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function ya(e){return["","","","",""].includes(e)}function Kle(e){return["","","","","",""].includes(e)}const I1=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,fa=e=>e&&e.length>=1?e.charAt(0):"",In=e=>e&&e.length>=2?e.charAt(1):"",Wle=e=>Array.from(new Set(e));function Vle(e,t){const n=Ule[e];if(!n)return!1;const r=new Set(t.filter(Boolean));return n.filter(a=>a!==e).every(a=>r.has(a))}function Zle(e){return Wr[e]??""}function Ka(e,t){const n=Wr[e],r=Wr[t];if(!n||!r)return"";let i;r===n?i="":r===Iy[n]?i="":r===tp[n]?i="":r===I7[n]?i="":r===L7[n]?i="":i="";const a=ya(e)===ya(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function Xle(e,t){const n=Wr[e],r=qa[t];if(!n||!r)return"";let i;r===n?i="":r===Iy[n]?i="":r===tp[n]?i="":r===I7[n]?i="":r===L7[n]?i="":i="";const a=Kle(t)===ya(e);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function Jle(e){return{:"",:"",:"",:"",:""}[e]??""}function M2(e,t){const n=Zle(e),r=ya(e);let i;t===n?i="":Iy[n]===t?i="":Iy[t]===n?i="":tp[n]===t?i="":tp[t]===n?i="":i="";const a=r===ya(Jle(t));switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}const Qle={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ece=e=>/^(|||||||||)$/.test(e);function tce(e){return e?ece(e)?e:Qle[e]??"":""}function rb(e){return tce(fa(e))}function nce(e){return e?.charAt(0)??""}function rce(e){return e?.charAt(1)??""}function ice(e,t,n){const[r,i,a,o]=(e??[]).slice(0,4),l=le=>(le?.length??0)>=1?le.charAt(0):"",u=le=>(le?.length??0)>=2?le.charAt(1):"",d=[r,i,a,o].map(l).filter(Boolean),h=new Set(Object.keys(qa)),m=[r,i,a,o].map(u).filter(le=>!!le&&h.has(le)),b=l(a),y=Gle[b]??!1,k=new Set,w=t==="classic"?Kv:Wv,_=new Set(["","","","","","","","","",""]),T=le=>(w[le]??[]).filter(Oe=>_.has(Oe)),O=(le,Oe)=>{const Ye=qa[Oe];return Ye?M2(le,Ye):null},j={:0,:0,:0,:0,:0};for(const le of d){const Oe=Wr[le];Oe&&(j[Oe]+=10)}const C=[];for(const le of m){const Oe=$le[le];Oe&&C.push(Oe);const Ye=qa[le];Ye&&(j[Ye]+=6)}const P=[...d,...C].map(le=>Ka(b,le)),I={:["",""],:["",""],:["",""],:["",""],:["",""]},U=le=>P.filter(Oe=>Oe===le).length,W=le=>P.filter(Oe=>I[le].includes(Oe)).length,q=m[1],H=!!b&&qle[b]===q,B=n.elementPercent100;B.>=20&&B.>=20&&B.>=15&&k.add("");const K=[r,i,a,o].filter(Boolean),V=[];for(const le of K){const Oe=le.charAt(0),Ye=le.charAt(1);V.push(Ka(b,Oe)),V.push(O(b,Ye))}const Z=(le,Oe)=>{const Ye=(Ze,Ot)=>!!Ze&&!!Ot&&le.includes(Ze)&&Oe.includes(Ot)||Oe.includes(Ze)&&le.includes(Ot);for(let Ze=0;Ze+1<V.length;Ze+=2)if(Ye(V[Ze],V[Ze+1]))return!0;return!1},G=le=>V.some(Oe=>!!Oe&&le.includes(Oe)),J=U("")+U(""),Q=U(""),oe=W(""),te=W(""),z=Z(["",""],["",""]);if((Q>=1||J>=2)&&oe>=1&&J>oe&&te<=1&&z&&k.add(""),G(I.)&&G(I.)&&Z(I.,I.)){const le=P.includes("");k.add(le?"":"")}W("")>=2&&W("")>=2&&Math.abs(W("")-W(""))<=1&&W("")<=1&&W("")<=1&&k.add("");const X=U(""),re=U(""),ie=U("")+U(""),fe=U("")+U(""),de=W("");re>=2&&ie>=1&&j.+j.>=20&&k.add(""),re>=2&&fe>=1&&j.+j.>=20&&k.add(""),re>=2&&fe>=1&&j.+j.>=20&&Z([""],["",""])&&de<=1&&k.add(""),X>=2&&fe>=1&&j.+j.>=20&&Z([""],["",""])&&de<=1&&k.add("");const pe=(le,Oe)=>{const Ye=Wr[le],Ze=qa[Oe];return!!Ye&&!!Ze&&Ye===Ze},Ne=[r,i,a,o].filter(Boolean),se=u(a),Se=pe(b,se),ke=Ne.map(le=>le.charAt(0)).filter(le=>["",""].includes(Ka(b,le)));let he=!1;for(const le of Ne){const Oe=le.charAt(0),Ye=le.charAt(1);if(ke.includes(Oe)&&pe(Oe,Ye)){he=!0;break}}Se&&he&&k.add(""),W("")>=3&&W("")>=.5*(W("")+W("")+W("")+W(""))&&k.add(""),W("")>=3&&W("")>=.5*(W("")+W("")+W("")+W(""))&&k.add(""),W("")>=3&&W("")>=1&&k.add(""),W("")>=3&&W("")+W("")<=1&&k.add("");const Ue=U("");W("")+W("")>=2&&Ue===1&&W("")>=1&&k.add(""),Ue>=2&&ie+W("")>=3&&k.add("");const Be=X+re;(X>=2||Be>=2)&&fe>=1&&Be>fe&&k.add(""),re>=2&&fe>=1&&Be>fe&&k.add("");const Xe=U(""),Ae=U("");Xe>=2&&Ue+Ae>=1&&k.add(""),Xe>=2&&Ue+Ae===0&&k.add(""),y&&Xe>=2&&Ue>=1&&k.add(""),!y&&Xe>=2&&Ue>=1&&k.add(""),U("")>=2&&U("")>=1&&k.add(""),U("")>=1&&U("")>=1&&Z([""],[""])&&k.add(""),H&&Ue>=1&&W("")+W("")>=2&&k.add("");const Ie=[u(r),u(i),u(a),u(o)].filter(Boolean),$e=[r?.charAt(0),i?.charAt(0),o?.charAt(0)].filter(Boolean),tt=new Set($e.map(le=>Ka(b,le))),bt=new Set(Ie.flatMap(le=>{const Oe=qa[le];return Oe?[M2(b,Oe)]:[]})),jt=new Set(Ie.flatMap(le=>T(le).map(Oe=>Ka(b,Oe))));return["","","","",""].forEach(le=>{const Oe=I[le],Ye=Oe.some(mt=>tt.has(mt)),Ze=Oe.some(mt=>bt.has(mt)),Ot=Oe.some(mt=>jt.has(mt));!Ye&&!Ze&&!Ot?k.add(`${le}`):!Ye&&!Ze&&Ot&&k.add(`${le}`)}),Array.from(k)}const ace=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const r=fa(n),i=In(n),a=Wr[r],o=qa[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t};function oce(e){const{pillars:t,dayStem:n,monthBranch:r,mapping:i}=e,[a,o,l,u]=(t??[]).slice(0,4),d=[fa(a),fa(o),fa(l),fa(u)].filter(Boolean),h=[In(a),In(o),In(l),In(u)].filter(Boolean),m=Wr[n],b=d.map(le=>Ka(n,le)),y=[],k=le=>d.filter(Oe=>Oe===le).length,w=le=>h.filter(Oe=>Oe===le).length,_=le=>le.every(Oe=>h.includes(Oe)),T=le=>b.some(Oe=>le.includes(Oe)),O=fa(o),j=le=>ya(le),C=()=>{const le=d.map(Oe=>Wr[Oe]);return le.length===4&&le.every(Oe=>Oe===le[0])},M=()=>{if(d.length!==4)return!1;const le=d.map(j),Oe=le[0]&&!le[1]&&le[2]&&!le[3],Ye=!le[0]&&le[1]&&!le[2]&&le[3];return Oe||Ye};ya(n)&&B7[n]===r&&y.push("");const P=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[le,Oe]of P)if(n===le&&r===Oe){y.push("");break}!ya(n)&&z7[n]===r&&y.push("");const I=L1[n];I&&In(l)===I&&m===qa[In(l)]&&y.push(""),I&&In(u)===I&&m===qa[In(u)]&&y.push("");const U=[a,o,l,u].map(nce),W=[a,o,l,u].map(rce);for(const le of U);for(const le of W);const q=i==="hgc"?Wv:Kv;function H(le){return(q[le]??[]).filter(Oe=>["","","","","","","","","",""].includes(Oe))}const B=[a,o,l,u].filter(Boolean),V=B.flatMap(le=>[le.charAt(0),le.charAt(1)]).flatMap(le=>{try{if(["","","","","","","","","",""].includes(le))return[Ka(n,le)];if(["","","","","","","","","","","",""].includes(le)){const Oe=Xle(n,le),Ye=H(le).map(Ze=>Ka(n,Ze));return[Oe,...Ye]}return[]}catch{return[]}}),Z=le=>V.some(Oe=>le.includes(Oe)),G=(le,Oe)=>{const Ye=[],Ze=[];for(const mt of B){const Ce=mt.charAt(0),ze=mt.charAt(1);Ye.push(Ka(n,Ce));const nt=qa[ze];nt?Ze.push(M2(n,nt)):Ze.push(null)}const Ot=(mt,Ce)=>!!mt&&!!Ce&&(le.includes(mt)&&Oe.includes(Ce)||Oe.includes(mt)&&le.includes(Ce));for(let mt=0;mt<Ye.length;mt++)if(Ot(Ye[mt],Ze[mt]))return!0;for(let mt=0;mt<Ye.length-1;mt++)if(Ot(Ye[mt],Ye[mt+1])||Ot(Ze[mt],Ze[mt+1]))return!0;return!1},J={:["",""],:["",""],:["",""],:["",""]};Z([...J.])&&Z([...J.])&&G([...J.],[...J.])&&y.push(""),Z([...J.])&&Z([...J.])&&G([...J.],[...J.])&&y.push("");const Q=le=>b.filter(Oe=>le.includes(Oe)).length,oe=Q(["",""]),te=Q([""]),z=Q([""]),X=Q(["",""]),re=Q(["",""]),ie=Q(["",""]);te>=1&&oe>=1&&oe>=te&&z<=te&&y.push("");const fe=Q([""]);fe>=1&&X>=1&&fe>=X&&y.push(""),b.includes("")&&X>=1&&y.push("");const pe=ace(t),Ne=Object.entries(pe).sort((le,Oe)=>Oe[1]-le[1]),se=Ne[0];if(se&&se[1]>=60&&y.push(`(${se[0]})`),Ne.length>=2){const[le,Oe]=Ne[0],[,Ye]=Ne[1];Oe>=75&&Oe-Ye>=12&&m!==le&&y.push(`(${le})`)}for(const le of Fle){const Oe=d.includes(le.a),Ye=d.includes(le.b);if(!Oe||!Ye)continue;const Ze=le.to,Ot=pe[Ze]??0,mt=Wr[le.a],Ce=Wr[le.b],ze=Math.max(pe[mt]??0,pe[Ce]??0),nt=qa[r]===Ze,Lt=Object.entries(pe).sort((Xt,_t)=>_t[1]-Xt[1])[0]?.[0]===Ze;let Bt=!1;Ot>=60&&(nt||Lt)&&ze<=20&&Ot-ze>=20&&(y.push(`(${Ze})`),Bt=!0),!Bt&&Ot>=50&&(nt||Lt)&&ze<=25&&(y.push(`(${Ze})`),Bt=!0),!Bt&&Ot>=35&&y.push(`(${Ze})`)}const Se=`${fa(u)}${In(u)}`;["",""].includes(n)&&["","",""].includes(Se)&&y.push(""),["","","",""].includes(In(u))&&y.push(""),["",""].includes(n)&&(In(l)===""||In(o)==="")&&!h.includes("")&&y.push("");const ke=d.some(le=>le===""||le===""),he=h.some(le=>le===""||le==="");["",""].includes(In(l))&&!ke&&!he&&y.push(""),["","",""].every(le=>d.includes(le))&&y.push(""),["","",""].every(le=>d.includes(le))&&y.push(""),["","",""].every(le=>d.includes(le))&&y.push("");const Ue=Object.values(pe).sort((le,Oe)=>Oe-le);Ue.length>=3&&Ue[0]-Ue[2]<=8&&Ue[0]+Ue[1]+Ue[2]>=80&&y.push(""),re>=1&&ie>=1&&Math.abs(re-ie)<=1&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),_(["","","",""])&&y.push(""),h.length===4&&h.every(le=>le===h[0])&&y.push(""),d.length===4&&C()&&M()&&y.push(""),t.every(le=>le&&le===t[0])&&y.push(""),d.length===4&&d.every(le=>le===d[0])&&h.length===4&&h.every(le=>le===h[0])&&y.push(""),oe>=1&&(In(l)===L1[n]||In(u)===L1[n])&&y.push(""),k("")>=3&&_(["","",""])&&["","",""].includes(In(l))&&y.push("");const Xe=n===""||n==="",Ae=[["","",""],["","",""]],Ie=[["","",""],["","",""]];Xe&&(Ae.some(le=>_(le))||Ie.some(le=>_(le)))&&y.push("");const $e=new Set(["","","","","",""]),tt=`${fa(l)}${In(l)}`;if($e.has(tt)&&w("")>=2&&(T(["",""])||h.includes("")||h.includes("")||T(["",""])||y.push("")),new Set(["","","","","",""]).has(tt)&&w("")>=2&&h.includes("")&&y.push(""),n===""&&`${fa(u)}${In(u)}`==""){const le=Ka(n,O);!["","","",""].includes(le)&&T(["",""])&&!h.includes("")&&!h.includes("")&&y.push("")}return new Set(["","",""]).has(tt)&&`${fa(u)}${In(u)}`==""&&!h.includes("")&&!T(["",""])&&y.push(""),tt===""&&w("")+w("")>=2&&y.push(""),(tt===""||tt==="")&&w("")>=2&&!T(["",""])&&!h.includes("")&&y.push(""),n===""&&_(["","",""])&&y.push(""),tt===""&&`${fa(u)}${In(u)}`==""&&y.push(""),Wle(y)}function sce(e){const t=[];for(const n of e)switch(n.kind){case"BUNIL_PICK":t.push(`: ${n.from} `);break;case"WANGJI_FIXED_JUNGI":t.push(":   ");break;case"SAENGJI_EMITTED_ONE":t.push(`: ${n.from}  `);break;case"SAENGJI_EMITTED_MULTI":t.push(`:      ${n.from} `);break;case"SAENGJI_NOT_EMITTED_USE_JUNGI":t.push(":    ");break;case"GOJI_SAMHAP_USE_JUNGI":t.push(":     ");break;case"GOJI_EARLY_JEOLIP_USE_CHOGI":t.push(":  +12    ");break;case"GOJI_LATE_JEOLIP_USE_JUNGI":t.push(":  +12    ");break;case"NEUTRALIZED":t.push(":   / ");break;case"EX_GEONLOK":t.push(": /   ");break;case"EX_YANGIN":t.push(":    ");break;case"EX_WOLGEOP":t.push(":    ");break;case"EX_EXCLUDED_BIGEOP":t.push(": /  ");break}return t}function lce(e){return e===""?"()":{:"",:"",:"",:"",:"",:"",:"",:""}[e]??"-"}const KP=1e3*60*60*24;function ib(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function cce(e){let t=wi(e);const n=t[0]?.date;if(n&&e.getTime()<n.getTime()){const r=new Date(e);r.setFullYear(e.getFullYear()-1),t=wi(r)}return t}function uce(e){const t=Yle[e];return Array.isArray(t)&&t.length>0?t[0]:null}function dce(e,t){const n=uce(e);if(!n)return null;const r=cce(t),i=r.findIndex(d=>d.name===n);if(i<0)return null;const a=r[i]?.date,o=r[i+1]?.date;if(!a)return null;const l=Math.floor((ib(t)-ib(a))/KP)+1,u=o?Math.max(1,Math.floor((ib(o)-ib(a))/KP)):30;return{dayIdx:l<1?1:l,spanDays:u}}function fce(e){return(e.?.w??0)+(e.?.w??0)+e..w}function hce(e,t,n){const r=Math.max(1,fce(e)),i=Math.max(1,Math.min(n,t)),a=Math.max(1,Math.min(r,Math.ceil(i*r/n))),o=e.?.w??0,l=e.?.w??0;return e.&&a<=o?{stem:e..stem,from:""}:e.&&a<=o+l?{stem:e..stem,from:""}:{stem:e..stem,from:""}}function U7(e){const{dayStem:t,monthBranch:n,date:r,pillars:i,emittedStems:a=[],otherBranches:o=[],isNeutralized:l,mapping:u}=e,d=[],h=$7(u),m=hT(h);if(!fT(n))return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const b=m[n];if(!b)return{:"-",:"-",:"-",:"-",:"-",:"-",:[],reason:["  "],reasonTokens:[]};const y={:b.?{stem:I1(b..stem),w:b..w}:void 0,:b.?{stem:I1(b..stem),w:b..w}:void 0,:{stem:I1(b..stem),w:b..w}},k=y..stem;let w=k;const _=dce(n,r);if(["","","",""].includes(n)&&Vle(n,o)&&y.)w=y..stem,d.push({kind:"GOJI_SAMHAP_USE_JUNGI"});else if(_){const B=hce(y,_.dayIdx,_.spanDays);w=B.stem,d.push({kind:"BUNIL_PICK",from:B.from})}else w=k,d.push({kind:"BUNIL_FALLBACK_USE_WOLRYEONG"});function T(B,K){if(!B)return!1;if(K.includes(B))return!0;const V=Wr[B];return V?K.some(Z=>Wr[Z]===V):!1}let O="";w&&T(w,a)&&!l?.(w)?(O=w,d.push({kind:"DANRYEONG_CONFIRMED_BY_EMIT"})):w&&l?.(w)&&d.push({kind:"NEUTRALIZED"});const j=O||k;let C="";const M=Wr[j];if(M){const B=Object.entries(tp).find(([,K])=>K===M)?.[0]??null;B&&(C=Object.entries(Wr).find(([V,Z])=>Z===B&&ya(V)===ya(j))?.[0]??"")}let P="-";const I=Ka(t,j),U=Hle.some(([B,K])=>B===t&&K===n),W=ya(t)&&B7[t]===n,q=!ya(t)&&z7[t]===n;I===""||I===""?U?(P="",d.push({kind:"EX_GEONLOK"})):W?(P="",d.push({kind:"EX_YANGIN"})):q?(P="",d.push({kind:"EX_WOLGEOP"})):d.push({kind:"EX_EXCLUDED_BIGEOP"}):P=lce(I);const H=oce({pillars:i,dayStem:t,monthBranch:n,mapping:u});return{:k,:w,:O||"-",:j||"-",:C||"-",:P,:H,reason:sce(d),reasonTokens:d}}function mce(e){const[t,n,r,i]=e,a=rb(i),o=rb(r),l=rb(n),u=rb(t),d=[],h=[[a,o],[o,l],[l,u]];for(const[b,y]of h){if(!b||!y)continue;const k=Je(b,y),w=YP[k];w?.length&&d.push(...w);const _=Je(y,b);if(_!==k){const T=YP[_];T?.length&&d.push(...T)}}const m=[[a,o,l],[o,l,u]];for(const[b,y,k]of m){if(!b||!y||!k)continue;const w=Li(b,y,k),_=qP[w];_?.length&&d.push(..._);const T=Li(k,y,b);if(T!==w){const O=qP[T];O?.length&&d.push(...O)}}return Array.from(new Set(d))}const pce=["","","","",""];function gce(e){return pce.includes(e)}function bce(e){const t=/^(.+?)\((.+)\)$/.exec(e.trim());return t?{base:t[1].trim(),inner:t[2].trim()}:{base:e.trim()}}function am(e,t){if(!t)return e;const n=(gce(t),t);return`${e}(${n})`}const yce={:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:" 3    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"   ."}},vce={:e=>({title:am("",e),short:"     ."}),:e=>({title:am("",e),short:"   ."}),:e=>({title:am("",e),short:"   ."}),:e=>({title:am("",e),short:"    ."}),:e=>({title:am("",e),short:"    ."})};function xce(e){const{base:t,inner:n}=bce(e);return t===""||t===""||t===""||t===""||t===""?vce[t](n):yce[t]}function wce(e){const t=xce(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const _ce=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),WP={:"   .   .",:"   .",:"  .",:"    .",:"  .",:"  .  .",:"   .",:"  .   .",:"   .",:"  .",:"   .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"   .",:"   .",:"   .",:"   .",:"   .",:"   .",:"  .",:"   .",:"  .  .",:"   .",:"   .",:"  .",:"  .",:"   .",:"    .",:"      .",:"  .",:"  .",:"    .",:"  .",:"  .",:"   .",:"  .",:"   .",:"   .",:"   .",:"   .",:"  .",:"  .",:"  .",:"    .",:"   .",:"  .",:"    .",:"     .",:"   .",:"  .",:"     .",:"    .",:"   .",:"    .",:"    .",:"   .",:"   .",:" .",:"   .",:"   .",:"   .",:"   ."};function Sce(e){if(_ce(WP,e))return WP[e]}const VP={:"(/)",:"(/)",:"(/)",:"(/)",:"(/)"},kce={:{title:"",short:"    .",detail:"       ."},:{title:"",short:"      .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +     ."},:{title:"",short:"     .",detail:"  +  ."},:{title:"",short:"      .",detail:"     ."},:{title:"",short:"    ."},:{title:"",short:"    .",detail:"  +    ."},:{title:"",short:"()    .",hint:"     "},:{title:"",short:"     ."},:{title:"",short:"    ."},:{title:"",short:"  +    ."},:{title:"",short:"   ."},:{title:"",short:"   ."},:{title:"",short:"    ."},:{title:"",short:"   ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"      ."},:{title:"",short:"    ."},:{title:"",short:"       ."},:{title:"",short:"    ."},:{title:"",short:"     ."},:{title:"",short:"     ."},:{title:"",short:"    ."}};function Ece(e){const t=/^(|)(||||)$/.exec(e);if(!t)return null;const n=t[1],r=t[2];return n===""?{kind:"",group:r}:{kind:"",group:r}}function jce(e,t){return e===""?{title:`${t}`,short:`${VP[t]}() //   .`,hint:"( ) +  +   "}:{title:`${t}`,short:`${VP[t]}()     .`,hint:" X /  O"}}function Tce(e){const t=Ece(e);return t?jce(t.kind,t.group):kce[e]}function Ace(e){const t=Tce(e);if(t)return t.detail?`${t.short}

${t.detail}`:t.short}const Nce={:{title:"",text:"()  /  .   ."},:{title:"",text:" (//)     .  ."},:{title:"",text:"       .     ."},:{title:"",text:" (/)    ( ).    ."},:{title:"",text:" (/)   ,           ."}};function Oce(e){return Nce[e]?.text}const Cce=e=>{switch(e){case"":return"( )";case"":return"";case"":return"()"}},Mce={BUNIL_PICK:{title:"",text:"    //     ."},BUNIL_FALLBACK_USE_WOLRYEONG:{title:" ",text:"    ()    ."},DANRYEONG_CONFIRMED_BY_EMIT:{title:" ",text:"      ."},WANGJI_FIXED_JUNGI:{title:"",text:"       ."},SAENGJI_EMITTED_ONE:{title:" ",text:"        ."},SAENGJI_EMITTED_MULTI:{title:"  ",text:"          ."},SAENGJI_NOT_EMITTED_USE_JUNGI:{title:" ",text:"        ."},GOJI_SAMHAP_USE_JUNGI:{title:" + ",text:"      ."},GOJI_EARLY_JEOLIP_USE_CHOGI:{title:" +  ",text:"   12    ."},GOJI_LATE_JEOLIP_USE_JUNGI:{title:" +  ",text:"   12    ."},NEUTRALIZED:{title:"",text:"       ."},EX_GEONLOK:{title:" ",text:"       ."},EX_YANGIN:{title:" ",text:"       ."},EX_WOLGEOP:{title:" ",text:"        ."},EX_EXCLUDED_BIGEOP:{title:" ",text:"   ."}},Dce={:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},"()":{title:"()",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"      ."},:{title:"",text:"/       ."},:{title:"",text:"/        ."},:{title:"",text:"/       ."}},Pce=e=>e.replace(/^\s*:\s*/,"").trim();function Rce(e){const t=Pce(e);return Dce[t]}function Lce(e){const t=Mce[e.kind];if(t)return"from"in e?{...t,text:`${t.text} ( : ${Cce(e.from)})`}:t}const Wc=S.memo(({text:e,color:t,onClick:n})=>{const r={violet:"bg-violet-50 text-violet-700 border-violet-200 dark:bg-violet-900/20 dark:text-violet-300 dark:border-violet-800",amber:"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800",blue:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800",green:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-800",red:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800"};return g.jsx("button",{type:"button",onClick:n,className:`px-2.5 py-1 text-[11px] font-bold rounded-lg border shadow-sm whitespace-nowrap active:scale-95 transition-transform cursor-pointer ${r[t]}`,children:e})}),Cd=({text:e})=>g.jsxs("div",{className:"absolute z-50 left-0 top-full mt-2 w-[220px] p-3 bg-white dark:bg-neutral-800 rounded-xl shadow-xl border border-neutral-200 dark:border-neutral-700 text-[11px] leading-relaxed text-left text-neutral-700 dark:text-neutral-200 pointer-events-none transition-none",children:[g.jsx("div",{className:"absolute -top-1 left-4 w-2 h-2 bg-white dark:bg-neutral-800 border-t border-l border-neutral-200 dark:border-neutral-700 rotate-45"}),e]}),ab=S.memo(({title:e,children:t})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-[10px] font-black text-neutral-400 dark:text-neutral-500 uppercase pl-1",children:e}),g.jsx("div",{className:"flex flex-wrap gap-1.5",children:t})]}));function Ice({pillars:e,tab:t,birthDate:n,emittedStems:r,otherBranches:i,isNeutralized:a,mapping:o,unified:l}){const[u,d]=S.useState(null);S.useEffect(()=>{d(null)},[t,e]);const h=S.useMemo(()=>{const[w,_,T,O]=e,j=U=>U&&U.length>=1?U.charAt(0):"",C=U=>U&&U.length>=2?U.charAt(1):"",M=n instanceof Date&&!Number.isNaN(n.getTime())?n:new Date,P=[j(w),j(_),j(T),j(O)].filter(U=>!!U),I=[C(w),C(T),C(O)].filter(U=>!!U);return U7({dayStem:j(T),monthBranch:C(_),date:M,pillars:e,emittedStems:r??P,otherBranches:i??I,isNeutralized:a,mapping:o})},[e,n,r,i,a,o]),m=S.useMemo(()=>mce(e),[e]),b=S.useMemo(()=>ice(e,o,l),[e,o,l]),y=w=>{d(_=>_===w?null:w)},k=[{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.},{key:"",value:h.}];return g.jsxs("div",{className:"p-6 rounded-[2rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-sm space-y-6 overflow-visible",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"font-black text-lg text-neutral-800 dark:text-neutral-100 italic",children:"   "}),g.jsx("span",{className:"text-[10px] bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-0.5 rounded-full font-bold",children:"     "})]}),g.jsxs("div",{className:"space-y-5",children:[g.jsx(ab,{title:"////",children:k.map(({key:w,value:_})=>g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:`${w}: ${_||"-"}`,color:"violet",onClick:()=>y(`env-${w}`)}),u===`env-${w}`&&g.jsx(Cd,{text:Oce(w)??" ."})]},w))}),g.jsxs(ab,{title:"",children:[g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:`: ${h.||"-"}`,color:"amber",onClick:()=>y("naegyeok")}),u==="naegyeok"&&g.jsx(Cd,{text:Rce(h.||"")?.text??"  ."})]}),h.reasonTokens?.map((w,_)=>{const T=Lce(w),O=`reason-${_}`;return g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:T?.title??(h.reason[_]||w.kind),color:"amber",onClick:()=>y(O)}),u===O&&g.jsx(Cd,{text:T?.text??"  ."})]},O)})]}),g.jsx(ab,{title:"",children:h.&&h..length>0?h..map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:`: ${w}`,color:"blue",onClick:()=>y(`outer-${_}`)}),u===`outer-${_}`&&g.jsx(Cd,{text:wce(w)??" "})]},`outer-${_}`)):g.jsx(Wc,{text:": -",color:"blue"})}),(m.length>0||b.length>0)&&g.jsxs(ab,{title:"  ",children:[m.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:w,color:"green",onClick:()=>y(`mul-${_}`)}),u===`mul-${_}`&&g.jsx(Cd,{text:Sce(w)??" "})]},`mul-${_}`)),b.map((w,_)=>g.jsxs("div",{className:"relative",children:[g.jsx(Wc,{text:w,color:"red",onClick:()=>y(`str-${_}`)}),u===`str-${_}`&&g.jsx(Cd,{text:Ace(w)??" "})]},`str-${_}`))]})]}),!h.reasonTokens?.length&&h.reason.length>0&&g.jsx("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:g.jsxs("p",{className:"text-[11px] text-neutral-500 leading-relaxed font-medium",children:[g.jsx("span",{className:"font-bold mr-1 text-neutral-400",children:"  :"}),h.reason.join(" / ")]})})]})}const $ce=Object.fromEntries(so..map((e,t)=>[e,Xr[t]])),Bce=Object.fromEntries(Xr.map((e,t)=>[e,so.[t]])),zce=Object.fromEntries(so..map((e,t)=>[e,vi[t]])),Uce=Object.fromEntries(vi.map((e,t)=>[e,so.[t]])),Fce=e=>$ce[e]??e,Hce=e=>zce[e]??e,Gce=e=>Bce[e]??e,Yce=e=>Uce[e]??e;function qce(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Fce(n):Gce(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}function mT(e){const t={...e};for(const n of Object.keys(e)){const r=/[]/.test(n)?Hce(n):Yce(n);r&&t[r]===void 0&&(t[r]=e[n])}return t}const Kce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Wce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},F7={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},Vce={...F7,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},ZP=qce(Kce),np=mT(Wce);mT(F7);mT(Vce);const Zce=["","","","",""];function Xce(){const[e,t]=S.useState("   "),[n,r]=S.useState(""),[i,a]=S.useState(!0);return{bigTab:e,setBigTab:t,blendTab:n,setBlendTab:r,demoteAbsent:i,setDemoteAbsent:a}}const Jce={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},Qce={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function H7(e){const t=Qce[e]??"";return Jce[t]}const eue=Object.fromEntries(so..map((e,t)=>[e,Xr[t]])),tue=Object.fromEntries(Xr.map((e,t)=>[e,so.[t]])),nue=Object.fromEntries(so..map((e,t)=>[e,vi[t]])),rue=Object.fromEntries(vi.map((e,t)=>[e,so.[t]])),iue=e=>eue[e]??e,aue=e=>nue[e]??e,oue=e=>tue[e]??e,sue=e=>rue[e]??e;function G7(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const r=n.charAt(0),i=n.charAt(1),a=/[]/.test(r)||/[]/.test(i)?`${iue(r)}${aue(i)}`:`${oue(r)}${sue(i)}`;t[a]===void 0&&(t[a]=e[n])}return t}const Y7={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},lue={...Y7,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},cue=G7(Y7),uue=G7(lue),D2={:"",:"",:"",:"",:""},P2={:"",:"",:"",:"",:""},R2={:"",:"",:"",:"",:""},L2={:"",:"",:"",:"",:""},due=e=>Zn[e]??e,fue=e=>rr[e]??e;function q7(e){return!e||e.length<2?"":`${due(e[0])}${fue(e[1])}`}const K7=e=>e&&e.length>=1?e[0]:"",W7=e=>e&&e.length>=2?e[1]:"";function hue(e){return{:e,:D2[e],:P2[e],:R2[e],:L2[e]}}function V7(e,t){if(!e)return!1;const n=np[e];return!!n&&n===t}function Z7(e,t){const n=Object.values(e).reduce((a,o)=>a+Math.max(0,o),0);return n<=0?!1:Math.max(0,e[t]??0)/n*100>=30}function mue(e,t){const n=(e??[]).slice(0,4).map(q7);if(n.length!==4||n.some(m=>m.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const r=K7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(m=>W7(m)),o={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},l=a[1],u=np[l],d=hue(i),h=a[2];return Object.keys(o).forEach(m=>{const b=d[m];u&&u===b&&(o[m].=!0),V7(h,b)&&(o[m].=!0),o[m].=Z7(t,b)}),{flags:o,monthBranch:l,dayEl:i}}function X7(e,t){const n=(e??[]).slice(0,4).map(q7);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const b={:!1,:!1,:!1};return{flags:{:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b},:{...b}},monthBranch:"",dayEl:""}}const r=K7(n[2]),i=r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":"",a=n.map(b=>W7(b)),o={:!1,:!1,:!1},l={:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o},:{...o}},u=a[1],d=np[u],h=a[2],m={:i,:i,:D2[i],:D2[i],:R2[i],:R2[i],:L2[i],:L2[i],:P2[i],:P2[i]};return Object.keys(l).forEach(b=>{const y=m[b];d&&d===y&&(l[b].=!0),V7(h,y)&&(l[b].=!0),l[b].=Z7(t,y)}),{flags:l,monthBranch:u,dayEl:i}}const pue=Object.fromEntries(Object.entries(Zn).map(([e,t])=>[t,e])),gue=Object.fromEntries(Object.entries(rr).map(([e,t])=>[t,e])),bue=e=>Zn[e]??e,yue=e=>rr[e]??e;function vue(e){return!e||e.length<2?"":`${bue(e[0])}${yue(e[1])}`}function Vc(e){return ZP[e]??ZP[pue[e]??""]}function Zc(e){return np[e]??np[gue[e]??""]}const $1=["year","month","day","hour"],xue={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},wue={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},_ue=new Set(["","","","",""]),Sue=new Set(["","","","","",""]),kue=new Set(["","","",""]),B1=e=>_ue.has(e)?"":"",z1=e=>{const t=Sue.has(e)?"":"";return kue.has(e)?t===""?"":"":t};function XP(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.floor(l+.5)),i=100-r.reduce((l,u)=>l+u,0);if(i===0)return r;const a=n.map((l,u)=>({i:u,frac:l-Math.floor(l+.5)})).sort((l,u)=>u.frac-l.frac),o=r.slice();if(i>0)for(let l=0;l<i;l++)o[a[l].i]+=1;else for(let l=0;l<-i;l++)o[a[a.length-1-l].i]-=1;return o}function Eue(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const ob={:.15,:.1,:-.15,:-.2,:-.25},Ds={:"",:"",:"",:"",:""},Eu={:"",:"",:"",:"",:""},Bo={:"",:"",:"",:"",:""},fx={:"",:"",:"",:"",:""};function sb(e,t){return e===t?"":Ds[t]===e?"":Ds[e]===t?"":Bo[e]===t?"":Bo[t]===e?"":""}const Xc=e=>e&&e.length>=1?e[0]:"",Jc=e=>e&&e.length>=2?e[1]:"";function jue(e,t){const n=e.reduce((u,d)=>u+d,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const r=e.map(u=>u/n*t),i=r.map(u=>Math.floor(u));let a=t-i.reduce((u,d)=>u+d,0);const o=r.map((u,d)=>({i:d,frac:u-Math.floor(u)})).sort((u,d)=>d.frac-u.frac),l=i.slice();for(let u=0;u<o.length&&a>0;u++)l[o[u].i]+=1,a-=1;return l}function JP(e,t){switch(e){case"":return t;case"":return Ds[t];case"":return Bo[t];case"":return fx[t];case"":return Eu[t];default:return t}}const QP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Tue=["","","","",""],Aue={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},eR={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},Nue={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}};function Oue(e){return e.length===4&&!!e[0]&&e[0].length>=2&&!!e[1]&&e[1].length>=2&&!!e[2]&&e[2].length>=2}function Cue(e){const t=Tue.map(n=>({name:n,value:0,color:"#999999"}));return{overlay:{totalsSub:{...eR},perStemAugBare:{},perStemAugFull:{}},totals:t,perTenGod:{...Aue},PerTenGodSub:{...eR},elementScoreRaw:e,deukFlags:{...Nue},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}function Mue(e,t){const n=e[2]?.[0]??"",r=t??n;return{dayStem:r,dayEl:r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":r===""||r===""?"":""}}function I2(e){const{pillars:t,dayStem:n,mode:r,debug:i,useHarmonyOverlay:a,criteriaMode:o,luck:l}=e,u=o==="modern"?xue:wue,d=r==="classic"?uue:cue,h={:0,:0,:0,:0,:0},m={},b=(t??[]).slice(0,4).map(vue);if(!Oue(b))return Cue(h);const{dayStem:y,dayEl:k}=Mue(b,n),w=[{val:0},{val:0},{val:0},{val:0}],_=[[],[],[],[]];for(const z of b){if(!z)continue;const X=z.charAt(0),re=z.charAt(1);m[X]=(m[X]??0)+50;const ie=QP[re];ie&&(m[ie]=(m[ie]??0)+50)}for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=$1[z],ie=Xc(X),fe=Jc(X),de=u[re],pe=Vc(ie);pe&&(h[pe]+=de.stem,w[z]={stem:ie,el:pe,pol:B1(ie),val:de.stem});const Ne=Zc(fe);Ne&&(h[Ne]+=de.branch,_[z].push({el:Ne,pol:z1(fe),val:de.branch}))}for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=$1[z],ie=d[X]??0;if(ie===0)continue;const fe=Xc(X),de=Vc(fe);if(!de)continue;const pe=u[re].stem*ie;h[de]+=pe,w[z].val+=pe}for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=Jc(X),ie=Zc(re);if(!ie)continue;const fe=u[$1[z]].branch,de=z1(re);let pe=0;const Ne=[z];z-1>=0&&Ne.push(z-1),z+1<=3&&Ne.push(z+1),z-2>=0&&Ne.push(z-2),z+2<=3&&Ne.push(z+2);const se=Array.from(new Set(Ne));for(const Se of se){if(!b[Se]||b[Se].length<2)continue;const ke=Xc(b[Se]),he=Vc(ke);if(!he||he!==ie)continue;const Ue=B1(ke)===de,Be=Math.abs(Se-z),Xe=Eue(Be,Ue);pe+=fe*Xe}pe!==0&&(h[ie]+=pe,_[z].push({el:ie,pol:de,val:pe}))}for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=Xc(X),ie=Vc(re);if(!ie)continue;let fe=0;const de=Jc(b[z]),pe=Zc(de);pe&&(fe+=ob[sb(ie,pe)]);const Ne=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Se of Ne){const ke=Xc(b[Se]),he=Vc(ke);he&&(fe+=ob[sb(ie,he)])}const se=w[z].val;if(se!==0&&fe!==0){const Se=Math.round(se*(1+fe)*10)/10,ke=Se-se;h[ie]+=ke,w[z].val=Se}}for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=Jc(X),ie=Zc(re);if(!ie)continue;let fe=0;const de=Xc(b[z]),pe=Vc(de);pe&&(fe+=ob[sb(ie,pe)]);const Ne=z===0?[1]:z===3?[2]:[z-1,z+1];for(const Se of Ne){if(!b[Se]||b[Se].length<2)continue;const ke=Jc(b[Se]),he=Zc(ke);he&&(fe+=ob[sb(ie,he)])}const se=_[z].reduce((Se,ke)=>Se+ke.val,0);if(se!==0&&fe!==0){const ke=Math.round(se*(1+fe)*10)/10-se;h[ie]+=ke,_[z].length>0&&(_[z][0].val+=ke)}}a&&Hae(b,h);const T={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},O=[];if(!(!l||l.tab==="")){let z=function(X,re){const ie=X?Pe(X):"";if(!ie||ie.length<2)return;const fe=Xc(ie),de=Jc(ie),pe=Vc(fe),Ne=Zc(de),se=Math.max(1,(h.??0)+(h.??0)+(h.??0)+(h.??0)+(h.??0)),Se=T[re];if(pe){const ke=Math.round(se*Se.stem);h[pe]+=ke,O.push({stem:fe,el:pe,pol:B1(fe),val:ke})}if(Ne){const ke=Math.round(se*Se.branch);h[Ne]+=ke,O.push({el:Ne,pol:z1(de),val:ke})}};z(l.dae,"dae"),(l.tab===""||l.tab===""||l.tab==="")&&z(l.se,"se"),(l.tab===""||l.tab==="")&&z(l.wol,"wol"),l.tab===""&&z(l.il,"il")}const j={:0,:0,:0,:0,:0};Object.entries(h).forEach(([z,X])=>{const re=W(z,k);j[re]+=X});const C=["","","","",""],M=XP(C.map(z=>j[z])),P=H7(y),I=C.map((z,X)=>({name:z,value:M[X],color:P[z]})),U={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function W(z,X){return z===X?"":Ds[X]===z?"":Bo[X]===z?"":Bo[z]===X?"":Eu[X]===z?"":""}function q(z,X){switch(W(z,k)){case"":U.+=X*.5,U.+=X*.5;break;case"":U.+=X*.5,U.+=X*.5;break;case"":U.+=X*.5,U.+=X*.5;break;case"":U.+=X*.5,U.+=X*.5;break;case"":U.+=X*.5,U.+=X*.5;break}}Object.entries(h).forEach(([z,X])=>{X>0&&q(z,X)});const H={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const z of C){const X=I.find(Ne=>Ne.name===z)?.value??0,re=H[z].a,ie=H[z].b,fe=U[re]??0,de=U[ie]??0,pe=fe+de;if(pe>0){const Ne=Math.floor(X*fe/pe+.5),se=X-Ne;H[z].aVal=Ne,H[z].bVal=se}else H[z].aVal=Math.floor(X/2+.5),H[z].bVal=X-H[z].aVal}const{flags:B}=mue(b,h),K={};w.forEach(z=>{if(z.stem&&z.el&&z.val){const X=`${z.stem}${z.el}`;K[X]=(K[X]??0)+z.val}});for(let z=0;z<4;z++){const X=b[z];if(!X||X.length<2)continue;const re=Jc(X),ie=QP[re],fe=Zc(re);if(!ie||!fe)continue;const de=`${ie}${fe}`,pe=_[z].reduce((Ne,se)=>Ne+se.val,0);K[de]=(K[de]??0)+pe}const V=["","","","","","","","","",""],Z={};V.forEach(z=>{Z[z]=0}),C.forEach(z=>{const X=I.find(se=>se.name===z)?.value??0,re=JP(z,k),ie=Object.entries(K).filter(([se])=>se.endsWith(re)),fe=ie.map(([se])=>se),de=ie.map(([,se])=>se),pe=Math.max(0,Math.round(X*10)),Ne=jue(de.length?de:[1,1],pe);if(fe.length===2)Z[fe[0]]=(Ne[0]??Math.round(pe/2))/10,Z[fe[1]]=(Ne[1]??pe-(Ne[0]??0))/10;else if(fe.length===1)Z[fe[0]]=pe/10;else{const se=re===""?["",""]:re===""?["",""]:re===""?["",""]:re===""?["",""]:["",""],Se=Math.floor(pe/2),ke=pe-Se;Z[se[0]]+=Se/10,Z[se[1]]+=ke/10}});const G=["","","","",""],J={:0,:0,:0,:0,:0};for(const z of I){const X=JP(z.name,k);J[X]+=z.value}const Q=XP(G.map(z=>J[z])),oe={:Q[0],:Q[1],:Q[2],:Q[3],:Q[4]};return i&&console.log({elementScore:h,totals:I,perTenGod:H,perStemRaw:K,perStemElementScaled:Z,elementPercent100:oe}),{overlay:{totalsSub:U,perStemAugBare:K,perStemAugFull:Z},totals:I,perTenGod:H,PerTenGodSub:U,stemScoreRaw:m,elementScoreRaw:h,deukFlags:B,perStemElement:K,perStemElementScaled:Z,elementPercent100:oe}}const lb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Due=["","","","",""];function tR(e){return Due.includes(e)}const Pue={:"",:"",:"",:"",:""},Rue={:"",:"",:"",:"",:""},Lue={:"",:"",:"",:"",:""},Iue={:"",:"",:"",:"",:""},$2={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},$ue=["","","","","","","","","",""],Bue={natal:50,dae:30,se:20,wol:7,il:3};function $y(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Zn[t])return Zn[t];if(["","","","","","","","","","","",""].includes(t))return lb[t]??null;if(rr[t])return lb[rr[t]]??null;const n=t.charAt(0);return Zn[n]?Zn[n]:["","","","","","","","","",""].includes(n)?n:rr[n]?lb[rr[n]]??null:["","","","","","","","","","","",""].includes(n)?lb[n]??null:null}function zue(e,t){const n=$2[e],r=$2[t];if(!n||!r)return"";let i;r===n?i="":r===Pue[n]?i="":r===Rue[n]?i="":r===Lue[n]?i="":r===Iue[n]?i="":i="";const a=tR(e)===tR(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function By(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.round(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.round(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function nR(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=$y(r);if(!a)continue;const o=zue(t,a);n[o]+=i}return By(n)}function Uue(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function rR(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=$y(n);i&&(t[i]=(t[i]??0)+r)}return t}function iR(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of $ue){const i=$2[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}function aR(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const r of t)typeof e[r]=="number"&&(n[r]=e[r]);return n}function Fue(e,t){const n=t?.dae?cb(t.dae):{},r=t?.se?cb(t.se):{},i=t?.wol?cb(t.wol):{},a=t?.il?cb(t.il):{},o={},l=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:r},{kind:"wol",bare:i},{kind:"il",bare:a}];for(const{kind:d,bare:h}of l){const m=Bue[d];if(!h||Object.keys(h).length===0)continue;const b=By(h);for(const[y,k]of Object.entries(b))o[y]=(o[y]??0)+k*m}const u=Object.values(o).reduce((d,h)=>d+h,0);if(u>0)for(const d of Object.keys(o))o[d]=o[d]/u*100;return o}function Hue(e){if(!e)return[];const t=$y(e.charAt(0)),n=$y(e.charAt(1));return[t,n].filter(Boolean)}function cb(e){const t=Hue(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function Ip(e){const{natal:t,tab:n,chain:r,hourKey:i="unified"}=e,a=[Pe(t[0]??""),Pe(t[1]??""),Pe(t[2]??""),Pe(t[3]??"")],o=a[2]?.charAt(0)??"",{hiddenStemMode:l,hiddenStem:u}=$l,d=l==="classic"?"classic":"hgc",h=r?{tab:n,dae:r.dae?Pe(r.dae):void 0,se:(n===""||n===""||n==="")&&r.se?Pe(r.se):void 0,wol:(n===""||n==="")&&r.wol?Pe(r.wol):void 0,il:n===""&&r.il?Pe(r.il):void 0}:{tab:n},m=I2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:h}),b=I2({pillars:a,dayStem:o,mode:d,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),y=rR(m.perStemElementScaled),k=n===""?y:Fue(y,r),w=By(k),_=nR(k,o),T=Uue(_),O=iR(w),j=rR(b.perStemElementScaled),C=nR(j,o),M=By(j),P=iR(M);return{elementScoreRaw:m.elementScoreRaw,elementPercent100:m.elementPercent100,totals:m.totals,perStemElementScaled:m.perStemElementScaled,dayStem:o,mergedStems:w,perTenGodSub:_,perTenGod:T,overlay:{totalsSub:_,perStemAugBare:k,perStemAugFull:O},natalFixed:{elementScoreRaw:aR(b.elementScoreRaw),elementPercent100:aR(b.elementPercent100),totalsSub:C,overlay:{totalsSub:C,perStemAugBare:j,perStemAugFull:P}}}}const Co=["","","","",""],Xl={:0,:0,:0,:0,:0},Gue=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],Yue={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}},U1=24,que=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]],zy=20;Object.fromEntries(Object.entries(Zn).map(([e,t])=>[t,e]));Object.fromEntries(Object.entries(rr).map(([e,t])=>[t,e]));const J7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Kue={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Q7(e){return Math.max(0,Math.min(100,e))}function cf(e,t,n){return Math.max(t,Math.min(n,e))}function Wue(e){const t=Q7(e);return Gue.find(n=>t>=n.min&&t<n.max)?.name??""}function Vue(e){const t=e?.[2]?.charAt(0)??"";return J7[t]??null}function Zue(e){return(e?.[1]?.charAt(1)??"")||null}function e9(e){return fx[e]}function Xue(e){return e?{peer:e,resource:Eu[e],leak:Ds[e],wealth:Bo[e],officer:e9(e)}:null}function Jue(e){const t={...Xl};for(const n of e){if(!n)continue;const r=n.charAt(0),i=n.charAt(1),a=J7[r],o=Kue[i];a&&(t[a]+=10),o&&(t[o]+=6)}return t}function Que(e){const t=Object.values(e).reduce((r,i)=>r+i,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={...Xl};return Co.forEach(r=>{n[r]=e[r]/t*100}),n}function ede(e){if(!e||e.length===0)return null;const t=e.reduce((r,i)=>r+(i?.value??0),0)||0;if(t<=0)return null;const n=r=>e.find(i=>i.name===r)?.value??0;return Q7((n("")+n(""))/t*100)}function tde(e,t){return!e||!t?null:t===e?"":Ds[e]===t?"":Bo[e]===t?"":e9(e)===t?"":Eu[e]===t?"":null}function nde(e){for(const[t,n]of que)if(e>=t)return n;return 1}const oR=(e,t)=>cf((zy-(t[e]??0))/zy,0,1),sR=(e,t)=>cf(((t[e]??0)-zy)/zy,0,1);function rde(e,t,n,r){const i=tde(e,n);if(!e||!i)return 0;const a=cf((50-t)/50,0,1),o=cf((t-50)/50,0,1),l=oR(n,r),u=sR(n,r),d=oR(e,r),h=sR(e,r),m=6.5;let b=0;if(a>0)switch(i){case"":b=+(.3+.4*d+.15*l)*a;break;case"":b=+(.18+.45*d)*a;break;case"":b=-(.08+.2*(1-l)+.1*h)*a;break;case"":b=-(.22+.25*(1-l)+.1*(1-d))*a;break;case"":b=-(.35+.25*(1-l)+.1*(1-d))*a;break}else if(o>0)switch(i){case"":b=-(.25+.25*(1-l)+.2*h)*o;break;case"":b=-(.28+.2*h)*o;break;case"":b=+(.18+.2*l+.15*h)*o;break;case"":b=+(.22+.25*l+.1*h)*o;break;case"":b=+(.2+.2*l)*o;break}else switch(i){case"":b=.08*(d+l);break;case"":b=.05*d-.03*h;break;case"":b=.02*l-.02*u;break;case"":b=.01*l-.06*u;break;case"":b=-.05*(1-l);break}return Math.round(m*b*10)/10}function ide(e,t,n){const r=["","",""].includes(t),i=["","","",""].includes(t),a={...Xl};if(r){const o=Ds[e],l=Bo[e],u=fx[e];a[o]+=28,a[l]+=22,a[u]+=20,n.get(o)?.push(":    ()"),n.get(l)?.push(":     "),n.get(u)?.push(":     ")}if(i){const o=Eu[e],l=e;a[o]+=28,a[l]+=22,n.get(o)?.push(":     "),n.get(l)?.push(":     ")}return a}function lR(e,t){if(!e)return{...Xl};const n=Yue[e]??{temp:"mild",wet:"normal"},r={...Xl};return n.temp==="cold"?(r.+=16,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(r.+=14,r.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(r.+=8,r.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),r}function cR(e,t){const n={...Xl};for(const r of Co){const i=Bo[r],a=Math.max(0,(e[r]??0)-(e[i]??0));if(a<=0)continue;const o=Ds[r],l=Math.round(a*.35);l>0&&(n[o]+=l,t.get(o)?.push(`: ${r}${i} `))}return n}function uR(e,t){const n={...Xl},r=Object.entries(e),i=Math.min(...r.map(([,o])=>o)),a=r.filter(([,o])=>o<=Math.max(6,i));for(const[o]of a)n[o]+=12,t.get(o)?.push(":  ");return n}const ub=()=>new Map(Co.map(e=>[e,[]]));function uf(e,t){const n=Vue(e),r=Zue(e),i=Jue(e),a=Que(i);let o=ede(t);if(o==null)if(!n)o=50;else{const H=n,B=Eu[n],K=Object.values(i).reduce((V,Z)=>V+Z,0)||1;o=Math.min(100,Math.max(0,((i[H]??0)+(i[B]??0))/K*100))}const l=Wue(o),u={...Xl},d=ub();if(n){const H=ide(n,l,d);Co.forEach(B=>{u[B]+=H[B]??0})}const h=lR(r,d);Co.forEach(H=>{u[H]+=h[H]??0});const m=cR(i,d);Co.forEach(H=>{u[H]+=m[H]??0});const b=uR(i,d);Co.forEach(H=>{u[H]+=b[H]??0});const y=Xue(n),k={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const H of t)k[H.name]=H.value;if(o>=45&&o<=55&&y){const H=k.>=30||k.>=Math.max(k.,k.,k.,k.)+5;o<=50?(u[y.resource]+=14,d.get(y.resource)?.push(": -"),u[y.peer]+=10,d.get(y.peer)?.push(": -"),u[y.leak]+=6,d.get(y.leak)?.push(": -"),u[y.wealth]+=3,d.get(y.wealth)?.push(": -"),H&&(u[y.officer]=Math.round(u[y.officer]*.8*10)/10,d.get(y.officer)?.push(":   "))):(u[y.leak]+=14,d.get(y.leak)?.push(": -"),u[y.wealth]+=10,d.get(y.wealth)?.push(": -"),u[y.officer]+=6,d.get(y.officer)?.push(": -"),u[y.resource]+=3,d.get(y.resource)?.push(": -"))}Co.forEach(H=>{const B=rde(n,o,H,a);u[H]=cf(Math.round((u[H]+B)*10)/10,0,999)});const _=o<50;Co.forEach(H=>{const B=a[H]??0,K=_&&n===H;if(B>=U1&&!K){const V=nde(B);u[H]=Math.round(u[H]*V*10)/10;const Z=Math.min(14,Math.max(0,Math.ceil((B-U1)*.5)));Z>0&&(u[H]=cf(u[H]-Z,0,999)),d.get(H)?.push(" ()")}});const T={:[],:[],:[],:[],:[]};if(n){const H=Ds[n],B=Bo[n],K=fx[n],V=n,Z=Eu[n];T[H].push(""),T[B].push(""),T[K].push(""),T[V].push(""),T[Z].push("")}const O={:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0,:(i.??0)>0},j=H=>{const B=a[H]??0;return B>=U1&&!(_&&n===H)?B>=55?4:B>=45?3:2:O[H]?0:1},C=lR(r,ub()),M=cR(i,ub()),P=uR(i,ub()),I=Co.map(H=>({element:H,score:Math.round(u[H]*10)/10,via:ade(H,C,M,P),reasons:(d.get(H)??[]).slice(),tenGodHints:T[H]})).sort((H,B)=>{const K=j(H.element),V=j(B.element);return K!==V?K-V:B.score!==H.score?B.score-H.score:H.element.localeCompare(B.element)}),U=ode(l,C,M,P),W={:0,:0,:0,:0,:0},q=t?t.reduce((H,B)=>(H[B.name]=B.value,H),{...W}):void 0;return{chosenType:U,ordered:I,debug:{band:l,overallPct:o,elementScore:i,tenGodTotals:q,monthBranch:r??void 0}}}function ade(e,t,n,r){const i=[];return(t[e]??0)>0&&i.push(""),(n[e]??0)>0&&i.push(""),(r[e]??0)>0&&i.push(""),i.length===0&&i.push(""),i}function ode(e,t,n,r){if(["","","",""].includes(e))return"";const a=d=>Object.values(d).reduce((h,m)=>h+m,0),o=a(t),l=a(n),u=a(r);return o>Math.max(l,u)?"":l>=u?"":""}function sde(e){const t=e.reduce((l,u)=>l+u,0);if(t<=0)return e.map(()=>0);const n=e.map(l=>l*100/t),r=n.map(l=>Math.round(l));let a=100-r.reduce((l,u)=>l+u,0);const o=n.map((l,u)=>({i:u,f:l-Math.round(l)})).sort((l,u)=>u.f-l.f);for(let l=0;l<o.length&&a>0;l++)r[o[l].i]+=1,a-=1;return r}const dR=["","","","",""];function lde(e,t){const n=[Pe(e[0]??""),Pe(e[1]??""),Pe(e[2]??""),Pe(e[3]??"")],{elementScoreRaw:r}=I2({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),i=dR.map(l=>r[l]??0),a=sde(i),o={:0,:0,:0,:0,:0};return dR.forEach((l,u)=>{o[l]=a[u]}),o}function t9(e,t){const n=lde(e,t),r=Pe(e[2]??"").charAt(0),a={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[r];if(!a)return 0;const o={:"",:"",:"",:"",:""},l=n[a]??0,u=n[o[a]]??0;return l+u*.7}const df={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},n9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},db={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},cde=["","","","",""];function fR(e){return cde.includes(e)}const ude={:"",:"",:"",:"",:""},dde={:"",:"",:"",:"",:""},fde={:"",:"",:"",:"",:""},hde={:"",:"",:"",:"",:""};function rp(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Zn[t])return Zn[t];if(["","","","","","","","","","","",""].includes(t))return db[t]??null;if(rr[t])return db[rr[t]]??null;const n=t.charAt(0);return Zn[n]?Zn[n]:["","","","","","","","","",""].includes(n)?n:rr[n]?db[rr[n]]??null:["","","","","","","","","","","",""].includes(n)?db[n]??null:null}function mde(e,t){const n=df[e],r=df[t];if(!n||!r)return"";let i;r===n?i="":r===ude[n]?i="":r===dde[n]?i="":r===fde[n]?i="":r===hde[n]?i="":i="";const a=fR(e)===fR(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function pde(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function hx(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}function gde(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e??{})){const i=df[rp(n)];i&&r>0&&(t[i]+=r)}return hx(t)}function bde(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e??{})){if(i<=0)continue;const a=rp(r);if(!a)continue;const o=mde(t,a);n[o]+=i}return n}function yde(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=pde(n);t[i]+=r}return hx(t)}function hR(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Pe(n??"");return i||(r<=2?"--":"")})}function r9(e,t){const n=!!t?.includeBranches,r={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const a=df[i.charAt(0)];if(a&&(r[a]=!0),n){const o=n9[i.charAt(1)];o&&(r[o]=!0)}}return r}function i9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const r=df[n.charAt(0)],i=n9[n.charAt(1)];r&&(t[r]+=10),i&&(t[i]+=6)}return t}function F1(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const vde=["","","","","","","","","",""];function xde(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=rp(n);i&&(t[i]=(t[i]??0)+r)}return t}function wde(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const r of vde){const i=df[r],a=`${r}${i}`;n[a]=Math.max(0,Math.round(e[r]??0))}return n}const _de={natal:50,dae:30,se:20,wol:7,il:3};function Sde(e){const t={};for(const{kind:r,bare:i}of e){const a=_de[r]??0;if(a<=0)continue;const o=hx(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function kde(e){if(!e)return[];const t=rp(e.charAt(0)),n=rp(e.charAt(1));return[t,n].filter(Boolean)}function fb(e){const t=kde(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}const Qd=["","","","",""];function Ede(e){const t=(e??"").trim(),n=t?t[t.length-1]:"";return["","",""].includes(n)?"WINTER":["","",""].includes(n)?"SUMMER":["","",""].includes(n)?"SPRING":["","",""].includes(n)?"AUTUMN":"UNKNOWN"}const jde=12;function a9(e){return e<=40?"cold":e>=60?"hot":"mild"}function Tde(e){return e>=60?"wet":e<=40?"dry":"normal"}function Uy(e){return Math.abs(e-50)>=jde}function Ade(e,t){if(!t)return e==="WINTER"||e==="SUMMER"?.85:.55;const n=Uy(t.hanNanPct),r=Uy(t.joSeupPct);if(!(n||r))return e==="WINTER"||e==="SUMMER"?.55:.45;const a=a9(t.hanNanPct),o=e==="WINTER"?"cold":e==="SUMMER"?"hot":"mild",l=a==="mild"||o==="mild"||a===o;return e==="WINTER"||e==="SUMMER"?l?.85:.6:.65}function Nde(e,t){const n=Qd.filter(u=>t[u]),r=n.map(u=>e[u]??0),i=r.length?Math.max(...r):0,a=r.length?Math.min(...r):0,o=Math.round(i-a),l=n.length>=3&&o<=12;return{presentEls:n,spread:o,balancedPresent:l}}function pT(e){return/||wood/i.test(e)?"":/||fire/i.test(e)?"":/||earth/i.test(e)?"":/||metal/i.test(e)?"":/||water/i.test(e)?"":null}function Ode(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function mR(e){switch(e){case"":return"";case"":return"";case"":return"";case"":return"";case"":return""}}function Cde(e){const n=[["",""],["",""],["",""],["",""],["",""]],r=[];for(const[i,a]of n){const o=e[i]??0,l=e[a]??0;if(o<24||l<24||Math.min(o,l)/Math.max(o,l)<.6)continue;let d=null,h=null;if(mR(i)===a)d=i,h=a;else if(mR(a)===i)d=a,h=i;else continue;const m=Ode(d),b=`${d}()${h}    ${m}( )`;r.push({a:i,b:a,controller:d,controlled:h,mediator:m,reason:b})}return r}function gT(e,t){const n=Math.max(.1,1-t/120);return Math.max(0,Math.round(e*n))}function om(e,t,n){return n?e.map(r=>!r.elNorm||t[r.elNorm]?r:{...r,score:0,reasons:[...r.reasons,":    0"]}):e}function sm(e,t,n){const r=i=>i?t[i]:!1;return[...e].sort((i,a)=>{if(n){const o=r(i.elNorm)?1:0,l=r(a.elNorm)?1:0;if(o!==l)return l-o}return a.score!==i.score?a.score-i.score:(i.elNorm??i.element).localeCompare(a.elNorm??a.element,"ko")})}function Mde(e,t,n){const r=(e??"").trim(),i=r?r[r.length-1]:"",a=new Set(["","",""]),o=new Set(["","",""]),l=new Set(["","",""]),u=new Set(["","",""]),d=Object.fromEntries(Qd.map(k=>[k,0])),h=Object.fromEntries(Qd.map(k=>[k,[]])),m=(k,w,_)=>{d[k]+=w,h[k].push(_)},b=k=>{for(const w of k)m(w.el,w.base,w.why)};let y=!1;if(n){const k=Uy(n.hanNanPct),w=Uy(n.joSeupPct);if(k||w){y=!0;const _=a9(n.hanNanPct),T=Tde(n.joSeupPct),O=Math.abs(n.hanNanPct-50),j=Math.abs(n.joSeupPct-50),C=Math.min(1,O/35),M=Math.min(1,j/35),P=Math.round(100-n.hanNanPct),I=Math.round(n.hanNanPct),U=Math.round(n.joSeupPct),W=Math.round(100-n.joSeupPct);if(k){const q=Math.round(80+50*C),H=Math.round(40+25*C);_==="cold"?(m("",q,`( ${P}%):   -> `),m("",H," :   -> ")):_==="hot"&&(m("",q,`( ${I}%):   -> `),m("",H," :  -> "))}if(w){const q=Math.round(55+35*M),H=Math.round(25+20*M);T==="wet"?(m("",q,`( ${U}%):   -> `),m("",H," :   -> ")):T==="dry"&&(m("",q,`( ${W}%):   -> `),m("",H," :  -> "))}}}if(!y){let k=[];a.has(i)?k=[{el:"",base:110,why:"():     "},{el:"",base:60,why:" :      "}]:o.has(i)?k=[{el:"",base:110,why:"():     "},{el:"",base:70,why:" :   () "}]:l.has(i)?k=[{el:"",base:90,why:"():     /"},{el:"",base:55,why:" : ()    "}]:u.has(i)?k=[{el:"",base:85,why:"():     "},{el:"",base:75,why:"():     "}]:k=[{el:"",base:60,why:":       ()"},{el:"",base:60,why:":       ()"}],b(k)}return Qd.filter(k=>d[k]>0).map(k=>({element:k,elNorm:k,score:gT(d[k],t[k]??0),reasons:[...h[k],` ${k}  ${Math.round(t[k]??0)}%`]}))}function Dde(e){const t=Cde(e);if(!t.length)return{applicable:!1,items:[],note:"       "};const n=new Map;for(const i of t){const a=e[i.a]??0,o=e[i.b]??0,l=Math.min(a,o),u=95+Math.round(l/2),d=n.get(i.mediator),h=[i.reason,`(${i.a} ${Math.round(a)}%  ${i.b} ${Math.round(o)}%)`,` : ${i.controller}${i.mediator}${i.controlled}`];d?n.set(i.mediator,{score:Math.max(d.score,u),reasons:[...d.reasons,...h]}):n.set(i.mediator,{score:u,reasons:h})}return{applicable:!0,items:Array.from(n.entries()).map(([i,a])=>({element:i,elNorm:i,score:gT(a.score,e[i]??0),reasons:a.reasons})),note:"////       ( )  "}}function Pde(e,t){let n="",r=e.??0;for(const d of Qd){const h=e[d]??0;h<r&&(r=h,n=d)}const i=Qd.some(d=>!t[d]);if(!(i||r<=8))return{applicable:!1,items:[],note:"    ( )  "};const l=gT((i?85:70)+Math.round((8-Math.min(8,r))*6),e[n]??0);return{applicable:!0,items:[{element:n,elNorm:n,score:l,reasons:[i?"():  /  ":"():      ",`  ${n} = ${Math.round(r)}%`]}],note:" ()  ( 8% )      "}}function bT(e){const{eokbuList:t,monthGz:n,elemPct:r,presentMap:i,demoteAbsent:a,gyeokgukList:o,pillars:l}=e,u=Rle(l),d=sm(om(t,i,a),i,a),h=sm(om(Mde(n,r,u),i,a),i,a),m=Ede(n),b=Nde(r,i),y=Ade(m,u),k=1.25,w=Dde(r),_=sm(om(w.items,i,a),i,a),T=Pde(r,i),O=sm(om(T.items,i,a),i,a),j=Array.isArray(o)?o:[],C=j.length>0,M=sm(om(j,i,a),i,a),P=V=>Math.max(0,...V.map(Z=>Number.isFinite(Z.score)?Z.score:0)),U=[{kind:"EOKBU",title:"",marker:"",priority:1,weight:k,applicable:d.length>0,note:"1.  /()  ",candidates:d},{kind:"JOHU",title:"",marker:"",priority:2,weight:y,applicable:!0,note:m==="WINTER"?"2. ()   ":m==="SUMMER"?"2. ()   ":"2.    ,   ",candidates:h},{kind:"TONGGWAN",title:"",marker:"",priority:3,weight:.7,applicable:w.applicable,note:w.note,candidates:_},{kind:"BYEONGYAK",title:"",marker:"",priority:3,weight:.7,applicable:T.applicable,note:T.note,candidates:O},{kind:"GYEOKGUK",title:"",marker:"",priority:4,weight:.55,applicable:C,note:C?"/     ( )":"  (//  )",candidates:M}].map(V=>{const Z=P(V.candidates),G=V.candidates[0];let J=0;if(V.applicable&&G){if(J=G.score*V.weight,V.kind==="EOKBU"&&!b.balancedPresent){const Q=Math.min(35,Math.round(b.spread*.9));J+=Q}V.kind==="EOKBU"&&b.balancedPresent&&(J*=.75),G.elNorm&&!i[G.elNorm]&&(J*=.25)}return{...V,maxScore:Z,fitScore:Math.round(J),finalScore:Math.round(J)}}).sort((V,Z)=>V.priority-Z.priority),W=[...U].filter(V=>V.applicable&&V.candidates.length>0).sort((V,Z)=>Z.fitScore!==V.fitScore?Z.fitScore-V.fitScore:V.priority-Z.priority)[0],q=Math.max(0,...U.map(V=>V.fitScore)),H=W?.kind??null,B=U.map(V=>{if(!H)return V;if(V.kind===H){const Z=V.fitScore<q?q+1:V.fitScore;return{...V,finalScore:Z}}return{...V,finalScore:V.fitScore}}),K=H?B.find(V=>V.kind===H)??null:null;return{bestKind:H,best:K,groups:B}}const Rde={:"",:"",:"",:"",:""},Lde={:"",:"",:"",:"",:""},Ide={:"",:"",:"",:"",:""},$de={:"",:"",:"",:"",:""};function H1(e){switch(e){case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";case"":case"":case"":case"":return"";default:return null}}function Bde(e){const t=(e||"").trim();return!t||t==="-"?null:t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")?"":null}function zde(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":""}function Ude(e,t){switch(t){case"":return e;case"":return Rde[e];case"":return Ide[e];case"":return $de[e];case"":return Lde[e]}}function Fde(e,t){const n=new Map,r=(u,d,h)=>{if(!u)return;const m=n.get(u);if(!m){n.set(u,{element:u,score:d,reasons:[h]});return}m.score=Math.max(m.score,d),m.reasons=m.reasons.includes(h)?m.reasons:[...m.reasons,h]},i=H1(t),a=Bde(e.);if(i&&a){const u=zde(a),d=Ude(i,u);r(d,92,` ${e.}  ${u} (${d})`)}const o=H1(e.);o&&r(o,86,` ${e.}  (${o})`);const l=H1(e.);return l&&r(l,70,` ${e.}  (${l})`),Array.from(n.values()).sort((u,d)=>d.score-u.score)}const lm=e=>e&&e.length>=1?e.charAt(0):"",hb=e=>e&&e.length>=2?e.charAt(1):"";function Hde(e){const t=String(e??"");if(!/^\d{8}$/.test(t))return new Date;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i,12,0,0,0);return Number.isNaN(a.getTime())?new Date:a}function Gde({data:e,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:i,demoteAbsent:a}){const{date:o,yearGZ:l,monthGZ:u,dayGZ:d}=Jr(),h=S.useMemo(()=>Pe(l),[l]),m=S.useMemo(()=>Pe(u),[u]),b=S.useMemo(()=>Pe(d),[d]),y=Du(e,e?.mingSikType),k=S.useMemo(()=>{if(!y?.length)return 0;const Ae=y.findIndex((Ie,$e)=>{const tt=y[$e+1]?.at;return o>=Ie.at&&(!tt||o<tt)});return Ae!==-1?Ae:o<y[0].at?0:y.length-1},[y,o]),w=S.useMemo(()=>{const Ae=r??y?.[k]?.gz??"";return Pe(Ae)||null},[r,y,k]),{manualHour:_,usePrevDay:T}=Ui(),O=e.mingSikType??"/",j=S.useMemo(()=>hR(t),[t]),C=S.useMemo(()=>hR(n),[n]),M=S.useMemo(()=>{const Ae=[...j];return(!Ae[3]||Ae[3]===""||Ae[3]==="--")&&_&&(Ae[3]=_.stem+_.branch),Ae},[j,_]),P=S.useMemo(()=>{const Ae=[...C];return(!Ae[3]||Ae[3]===""||Ae[3]==="--")&&_&&(Ae[3]=_.stem+_.branch),Ae},[C,_]),I=S.useMemo(()=>{const Ae=Number(e.birthDay?.slice(0,4)),Ie=Number(e.birthDay?.slice(4,6)),$e=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ae)||!Number.isFinite(Ie)||!Number.isFinite($e))return null;const tt=new Date(Ae,Ie-1,$e,12,0,0,0),bt=Pe(ct(tt)||""),jt=Pe(At(tt)||""),le=Pe(ht(tt,O)||"");return[bt,jt,le,""]},[e.birthDay,O]),U=F1(M),W=F1(P),H=(e.calendarType==="lunar"?"lunar":"solar")==="lunar"?W?"lunar":U?"solar":"lunar":U?"solar":W?"lunar":"solar",B=S.useMemo(()=>{const Ie=[...H==="lunar"?W?P:U?M:I??["","","",""]:U?M:W?P:I??["","","",""]];if((!Ie[3]||Ie[3]===""||Ie[3]==="--")&&_&&(Ie[3]=_.stem+_.branch),Ie[3]==="--"&&(Ie[3]=""),!T)return Ie;const $e=Qa(Ie[2]||"",-1);return[Ie[0],Ie[1],$e,Ie[3]]},[H,U,W,M,P,I,_,T]),K=S.useMemo(()=>lm(B[2]??""),[B]),V=S.useMemo(()=>hb(B[1]??""),[B]),Z=S.useMemo(()=>Hde(e.birthDay),[e.birthDay]),G=S.useMemo(()=>_?_.stem+_.branch:B[3]||"",[_,B]),J=S.useMemo(()=>({dae:i!==""?w??null:null,se:i===""||i===""||i===""?h??null:null,wol:i===""||i===""?m??null:null,il:i===""?b??null:null}),[i,w,h,m,b]),Q=S.useMemo(()=>Ip({natal:B,tab:i,chain:J,hourKey:G}),[B,i,J,G]),oe=S.useMemo(()=>{if(!Q)return null;const Ae=xde(Q.perStemElementScaled),Ie=J.dae?fb(J.dae):{},$e=J.se?fb(J.se):{},tt=J.wol?fb(J.wol):{},bt=J.il?fb(J.il):{},jt=Sde([{kind:"natal",bare:Ae},{kind:"dae",bare:Ie},{kind:"se",bare:$e},{kind:"wol",bare:tt},{kind:"il",bare:bt}]),le=hx(jt),Oe=wde(le),Ye=bde(jt,Q.dayStem),Ze=yde(Ye),Ot=gde(jt);return{perStemAugBare:jt,perStemAugFull:Oe,elemPct100:Ot,totalsMain:Ze,totalsSub:Ye}},[Q,J]),te=S.useMemo(()=>r9(B,{includeBranches:!0}),[B]),z=S.useMemo(()=>["","","","",""].some(Ae=>!te[Ae]),[te]),X=oe?.elemPct100??Q?.elementPercent100??i9(B),re=S.useMemo(()=>{if(!Q||!oe)return[];const Ae=H7(Q.dayStem);return Object.entries(oe.totalsMain).map(([Ie,$e])=>({name:Ie,value:$e,color:Ae[Ie]}))},[Q,oe]),ie=oe?.elemPct100??{:0,:0,:0,:0,:0},fe=oe?.totalsSub??Q?.perTenGodSub??null,de=S.useMemo(()=>[i,w??"",h??"",m??"",b??"",o?.toISOString?.()??"",G].join("|"),[i,w,h,m,b,o,G]),pe=S.useMemo(()=>{const Ae=fe?Object.entries(fe).sort(([$e],[tt])=>$e.localeCompare(tt)).map(([$e,tt])=>`${$e}:${tt}`).join(","):"none",Ie=re.map($e=>`${$e.name}:${$e.value}`).join(",");return`${de}||${B.join("")}||${Ie}||${Ae}`},[de,B,re,fe]),Ne=typeof uf=="function"?uf(B,Q?.totals):null,se=S.useMemo(()=>(Ne?.ordered??[]).map(Ie=>{const $e=Ie.element??"",tt=/||wood/i.test($e)?"":/||fire/i.test($e)?"":/||earth/i.test($e)?"":/||metal/i.test($e)?"":/||water/i.test($e)?"":null,bt=typeof Ie.score=="number"?Ie.score:tt?X[tt]??0:0,jt=Array.isArray(Ie.reasons)?Ie.reasons:[];return{element:$e,elNorm:tt,score:bt,reasons:jt}}),[Ne,X]),Se=S.useMemo(()=>se.map(Ae=>({element:Ae.element,elNorm:Ae.elNorm,score:Ae.score,reasons:Ae.reasons})),[se]),ke=S.useMemo(()=>{if(!K||!V)return[];const[Ae,Ie,$e,tt]=B,bt=[lm(Ae),lm(Ie),lm($e),lm(tt)].filter(Boolean),jt=[hb(Ae),hb($e),hb(tt)].filter(Boolean),le=U7({dayStem:K,monthBranch:V,date:Z,pillars:B,emittedStems:bt,otherBranches:jt}),Oe=Fde(le,K),Ye=Ze=>/||wood/i.test(Ze)?"":/||fire/i.test(Ze)?"":/||earth/i.test(Ze)?"":/||metal/i.test(Ze)?"":/||water/i.test(Ze)?"":null;return(Oe??[]).map(Ze=>({element:Ze.element,elNorm:Ye(Ze.element),score:Number.isFinite(Ze.score)?Ze.score:0,reasons:Array.isArray(Ze.reasons)?Ze.reasons:[]}))},[B,K,V,Z]),he=S.useMemo(()=>{const Ae=B[1]||"";return bT({eokbuList:Se,monthGz:Ae,elemPct:X,presentMap:te,demoteAbsent:a,pillars:B,gyeokgukList:ke})},[B,Se,X,te,a,ke]),Ue=S.useMemo(()=>{const Ae=he.best;return Ae?.candidates?.length?Ae.candidates.map(Ie=>({element:Ie.element,elNorm:Ie.elNorm,score:Ie.score,reasons:Ie.reasons})):se},[he,se]),Be=S.useMemo(()=>Math.max(0,...Ue.map(Ae=>Number.isFinite(Ae.score)?Ae.score:0)),[Ue]),Xe=S.useMemo(()=>t9(B,{criteriaMode:"modern",useHarmonyOverlay:!0}),[B]);return{seGz:h,wolGz:m,ilGz:b,daewoonGz:w,activePillars:B,chain:J,unified:Q,overlay:oe,chartData:re,elementPct:ie,tenSubTotals100:fe,hourKeyForUi:G,revKey:pe,yongshinMulti:he,yongshinRecommend:he,yongshinList:Ue,maxScore:Be,hasAbsent:z,dayElementPercent:Xe,isValidActive:F1(B)}}function Yde(e){if(typeof e!="object"||e===null)return!1;const t=e,n=t.at,r=t.gz;return n instanceof Date&&!Number.isNaN(n.getTime())&&typeof r=="string"}function qde(e){const t=new Date(e,1,15,12,0,0,0);return Pe(ct(t)||"")}function Kde(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=pT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}const Wde={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fy(e){return Wde[e]??null}function Vde(e,t){const n={:!1,:!1,:!1,:!1,:!1},r=hT(t);for(const i of e){const a=i?.charAt(0)??"",o=i?.charAt(1)??"",l=Fy(a);if(l&&(n[l]=!0),fT(o)){const u=r[o],d=[u.,u.,u.].filter(Boolean);for(const h of d){const m=Fy(h.stem);m&&h.w>0&&(n[m]=!0)}}}return n}function Zde(e,t){const n=hT(t),r={:0,:0,:0,:0,:0};for(const o of e){const l=o?.charAt(0)??"",u=o?.charAt(1)??"",d=Fy(l);if(d&&(r[d]+=50),fT(u)){const h=n[u],m=[h.,h.,h.].filter(Boolean),b=m.reduce((k,w)=>k+(Number.isFinite(w.w)?w.w:0),0),y=b>0?b:1;for(const k of m){const w=Fy(k.stem);w&&(r[w]+=50*k.w/y)}}}const i=r.+r.+r.+r.+r.,a=i>0?i:1;return{:r./a*100,:r./a*100,:r./a*100,:r./a*100,:r./a*100}}function Xde(e,t,n){return e||Zde(t,n)}function Jde(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,gyeokgukList:a,hiddenStemMode:o}=e,l=S.useMemo(()=>$7(o),[o]),u=Du(t,t?.mingSikType),d=S.useMemo(()=>Array.isArray(u)?u.filter(Yde).slice(0,10):[],[u]),[h,m]=S.useState(0),[b,y]=S.useState(0),k=Math.max(0,Math.min(d.length-1,h)),w=d[k]??null,_=S.useMemo(()=>{if(!w)return[];const W=w.at.getFullYear();return Array.from({length:10},(q,H)=>{const B=W+H;return{year:B,gz:qde(B)}})},[w]),T=b==null?null:Math.max(0,Math.min(_.length-1,b)),O=T==null?null:_[T]??null,j=S.useMemo(()=>Vde(n,l),[n,l]),C=S.useMemo(()=>["","","","",""].some(W=>!j[W]),[j]),M=S.useMemo(()=>{const W=w?Pe(w.gz):null,q=O?Pe(O.gz):null;return{dae:W||null,se:q||null,wol:null,il:null}},[w,O]),P=S.useMemo(()=>M.se?"":"",[M.se]),I=S.useMemo(()=>{const W=w?`${w.at.getFullYear()}~ ${Pe(w.gz)}`:" -",q=O?` / ${O.year} ${Pe(O.gz)}`:"";return`${W}${q}`},[w,O]),U=S.useMemo(()=>{if(!w)return null;const W=Ip({natal:n,tab:P,chain:M,hourKey:r}),q=Xde(W?.elementPercent100,n,l),H=typeof uf=="function"?uf(n,W?.totals):null,B=Kde(H,q);return bT({eokbuList:B,monthGz:n[1]||"",elemPct:q,presentMap:j,demoteAbsent:i,pillars:n,gyeokgukList:Array.isArray(a)?a:null})},[w,n,P,M,r,j,i,a,l]);return{daeIndex:k,setDaeIndex:m,seIndex:T,setSeIndex:y,dae10:d,se10:_,chain:M,tab:P,label:I,recommend:U,presentMap:j,hasAbsent:C}}const Qde={EOKBU:"",JOHU:"",TONGGWAN:"",BYEONGYAK:"",GYEOKGUK:""};function B2(e){return e?Qde[e]??e:""}function efe(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.at instanceof Date&&!Number.isNaN(t.at.getTime())&&typeof t.gz=="string"}function tfe(e){const t=new Date(e,1,15,12,0,0,0);return Pe(ct(t)||"")}function G1(e){const t=e?.best??null,n=t?.candidates?.[0]??null,r=t?.kind??null,i=n?.element??null,a=n?.elNorm??(n?.element?pT(n.element):null),o=typeof t?.fitScore=="number"?t.fitScore:0,l=r&&i?`${B2(r)}:${i}`:r?`${B2(r)}:`:"";return{kind:r,top1:i,top1ElNorm:a,fit:o,label:l,result:e}}function nfe(e,t){return(e?.ordered??[]).map(r=>{const i=r.element??"",a=pT(i),o=typeof r.score=="number"?r.score:a?t[a]??0:0;return{element:i,elNorm:a,score:o,reasons:Array.isArray(r.reasons)?r.reasons:[]}})}function pR(e){const{pillars:t,hourKey:n,chain:r,tab:i,demoteAbsent:a,presentMap:o,gyeokgukList:l}=e,u=Ip({natal:t,tab:i,chain:r,hourKey:n}),d=u?.elementPercent100??i9(t),h=typeof uf=="function"?uf(t,u?.totals):null,m=nfe(h,d);return bT({eokbuList:m,monthGz:t[1]||"",elemPct:d,presentMap:o,demoteAbsent:a,pillars:t,gyeokgukList:Array.isArray(l)?l:null})}function rfe(e){const t=[];for(const n of e){const r=t[t.length-1];if(!r){t.push({fromYear:n.year,toYear:n.year,snap:n.snap});continue}r.snap.label===n.snap.label?r.toYear=n.year:t.push({fromYear:n.year,toYear:n.year,snap:n.snap})}return t}const Mo=({text:e,tone:t="base",onClick:n,title:r})=>{const i=t==="pick"?"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":t==="diff"?"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800 cursor-pointer":"bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700",a=g.jsx("span",{className:`inline-flex items-center text-[11px] px-2 py-0.5 rounded-full border whitespace-nowrap ${i}`,title:r,children:e});return n?g.jsx("button",{type:"button",className:"inline-flex",onClick:n,title:r,children:a}):a};function gR({snap:e}){const t=e.result?.best??null,n=t?.candidates?.slice(0,3)??[];return t?g.jsxs("div",{className:"mt-2 rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Mo,{text:`: ${B2(t.kind)}`,tone:"pick"}),g.jsx(Mo,{text:` ${t.fitScore}`}),n[0]?.element?g.jsx(Mo,{text:`1 ${n[0].element}`,tone:"diff"}):null]}),t.note?g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:t.note}):null,n.length?g.jsx("ul",{className:"mt-2 space-y-2",children:n.map((r,i)=>g.jsx("li",{className:"text-xs",children:g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Mo,{text:`${i+1} ${r.element}`}),g.jsx(Mo,{text:` ${r.score}`}),(r.reasons??[]).slice(0,4).map((a,o)=>g.jsx(Mo,{text:a},o))]})},`${r.elNorm??r.element}-${i}`))}):g.jsx("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:" "})]}):g.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:" "})}function ife(e){const{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:a}=e,o=S.useMemo(()=>r9(n,{includeBranches:!0}),[n]),l=Du(t,t?.mingSikType),u=S.useMemo(()=>Array.isArray(l)?l.filter(efe).slice(0,10):[],[l]),d=S.useMemo(()=>G1(a),[a]),[h,m]=S.useState(null),b=w=>m(_=>_===w?null:w),y=S.useMemo(()=>u.map((w,_)=>{const T=Pe(w.gz)||"",j=pR({pillars:n,hourKey:r,chain:{dae:T||null,se:null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),C=G1(j),M=w.at.getFullYear(),P=Array.from({length:10},(H,B)=>{const K=M+B,V=tfe(K),G=pR({pillars:n,hourKey:r,chain:{dae:T||null,se:V||null,wol:null,il:null},tab:"",demoteAbsent:i,presentMap:o}),J=G1(G);return{year:K,snap:J}}),U=rfe(P).filter(H=>H.snap.top1ElNorm!==C.top1ElNorm),W=C.top1ElNorm!==d.top1ElNorm,q=W||U.length>0;return{idx:_,dae:w,daeLabel:`${M}~ ${T||""}`,daeSnap:C,daeDiffFromNatal:W,segDiffOnly:U,hasAnyChange:q}}).filter(w=>w.hasAnyChange),[u,n,r,i,o,d.top1ElNorm]),k=S.useMemo(()=>y.some(w=>w.hasAnyChange),[y]);return g.jsxs("div",{className:"rounded-xl bg-neutral-100 dark:bg-neutral-900 p-4 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-bold",children:"  "}),g.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 whitespace-normal break-words",children:["(): ",d.label," /  ",d.fit]})]}),k?g.jsx("div",{className:"space-y-3",children:y.map(w=>{const _=`dae:${w.idx}`,T=h===_;return g.jsxs("div",{className:"rounded-lg border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Mo,{text:` ${w.daeLabel}`,tone:"base"}),g.jsx(Mo,{text:` ${w.daeSnap.label} ( ${w.daeSnap.fit})`,tone:w.daeDiffFromNatal?"diff":"base",onClick:()=>b(_),title:" (top3) "}),w.daeDiffFromNatal?g.jsx(Mo,{text:" ",tone:"diff"}):null]}),w.segDiffOnly.length?g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.segDiffOnly.map((O,j)=>{const C=`seg:${w.idx}:${j}`,M=h===C,P=O.fromYear===O.toYear?`${O.fromYear}`:`${O.fromYear}~${O.toYear}`;return g.jsxs("div",{className:"inline-flex flex-col",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx(Mo,{text:` ${P}  ${O.snap.label} ( ${O.snap.fit})`,tone:"diff",onClick:()=>b(C),title:" (top3) "})}),M?g.jsx(gR,{snap:O.snap}):null]},C)})}):null,T?g.jsx(gR,{snap:w.daeSnap}):null]},_)})}):g.jsx("div",{className:"w-full p-3 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-400 text-center",children:"  ."})]})}const Hy=({children:e,variant:t="neutral"})=>{const n={neutral:"bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-400",violet:"bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-300",amber:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",indigo:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"};return g.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold tracking-tight shadow-sm ${n[t]}`,children:e})};function afe(e,t){if(t<=0)return"12%";const n=Math.round(e/t*100);return`${Math.max(5,Math.min(100,n))}%`}function ofe({g:e,isBest:t,demoteAbsent:n,hasAbsent:r,onDemoteAbsentChange:i}){const a=e.candidates.slice(0,3);return g.jsxs("details",{open:t,className:`group rounded-2xl border transition-all duration-300 ${t?"border-violet-200 dark:border-violet-800 bg-white dark:bg-neutral-900 shadow-md":"border-neutral-200 dark:border-neutral-800 bg-neutral-50/50 dark:bg-neutral-900/50"}`,children:[g.jsx("summary",{className:"list-none cursor-pointer p-4 select-none",children:g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:`text-sm ${t?"font-black text-violet-600":"font-bold text-neutral-700 dark:text-neutral-300"}`,children:[e.marker," ",e.title]}),t&&g.jsx(Hy,{variant:"violet",children:" "}),!e.applicable&&g.jsx(Hy,{variant:"neutral",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] font-medium text-neutral-400",children:""}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:e.fitScore}),g.jsx("span",{className:"text-neutral-300 group-open:rotate-180 transition-transform",children:""})]})]}),g.jsx("p",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 leading-relaxed whitespace-normal break-words pr-4",children:e.note})]})}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[a.length===0?g.jsx("div",{className:"text-[11px] text-neutral-400 py-2 text-center border-t border-neutral-100 dark:border-neutral-800",children:"  ."}):g.jsx("div",{className:"space-y-2 border-t border-neutral-100 dark:border-neutral-800 pt-3",children:a.map((o,l)=>g.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-100 dark:border-neutral-800",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[40px]",children:[g.jsxs("span",{className:"text-[9px] font-bold text-neutral-400 uppercase",children:[l+1,"st"]}),g.jsx("span",{className:"text-sm font-black text-neutral-800 dark:text-neutral-100",children:o.element})]}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("div",{className:"h-2 w-full rounded-full bg-neutral-200 dark:bg-neutral-700 overflow-hidden shadow-inner",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-700 ${t?"bg-gradient-to-r from-violet-400 to-indigo-500":"bg-neutral-400"}`,style:{width:afe(o.score??0,e.maxScore)}})}),g.jsx("div",{className:"flex flex-wrap gap-1",children:(o.reasons??[]).slice(0,4).map((u,d)=>g.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md bg-white dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400 border border-neutral-100 dark:border-neutral-600 shadow-sm",children:u},d))})]})]},`${e.kind}-${o.element}-${l}`))}),r&&g.jsxs("button",{type:"button",onClick:()=>i?.(!n),className:`px-2 py-1 rounded-full text-[10px] font-bold border transition cursor-pointer ${n?"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800":"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-800 dark:text-neutral-400 dark:border-neutral-700"}`,"aria-pressed":n,children:[" ",n?"ON":"OFF"]})]})]})}function sfe({best:e}){const t=e?.candidates?.[0]??null;return g.jsxs("div",{className:"relative overflow-hidden rounded-[2rem] border border-violet-200 dark:border-violet-800 p-6 bg-gradient-to-br from-violet-50 to-white dark:from-violet-950/20 dark:to-neutral-900 shadow-sm",children:[g.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-violet-100 dark:bg-violet-900/20 rounded-full blur-3xl"}),g.jsxs("div",{className:"relative z-10 flex flex-col gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Hy,{variant:"indigo",children:" "}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("span",{className:"text-[10px] text-neutral-400 font-bold uppercase",children:" "}),g.jsx("span",{className:"text-lg font-black text-violet-600 dark:text-violet-400",children:e?.fitScore??0})]})]}),g.jsxs("div",{className:"flex items-end gap-3",children:[g.jsx("h4",{className:"text-2xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter",children:e?`${e.marker} ${e.title}`:"  "}),t?.element&&g.jsxs("div",{className:"mb-1 flex items-center gap-1",children:[g.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:"1:"}),g.jsx("span",{className:"text-base font-black text-indigo-500",children:t.element})]})]}),e?.note&&g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 leading-relaxed font-medium",children:e.note})]})]})}function lfe({recommend:e,data:t,pillars:n,hourKey:r,demoteAbsent:i,onDemoteAbsentChange:a,hasAbsent:o,hiddenStemMode:l}){const u=Jde({data:t,pillars:n,hourKey:r,demoteAbsent:i,hiddenStemMode:l}),d=o??u.hasAbsent;return g.jsxs("div",{className:"w-full p-6 rounded-[2.5rem] bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 shadow-xl space-y-8",children:[g.jsxs("div",{className:"flex items-center justify-between px-2",children:[g.jsx("div",{className:"space-y-1",children:g.jsx("h2",{className:"text-xl font-black text-neutral-800 dark:text-neutral-100 tracking-tighter uppercase",children:" "})}),d&&g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx(Hy,{variant:"amber",children:"  "}),i&&g.jsx("span",{className:"text-[9px] text-amber-500 font-bold mt-1",children:" "})]})]}),g.jsx(sfe,{best:e.best}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 px-2",children:[g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"}),g.jsx("span",{className:"text-[10px] font-black text-neutral-300 dark:text-neutral-600 uppercase tracking-widest",children:" "}),g.jsx("div",{className:"h-px flex-1 bg-neutral-100 dark:bg-neutral-800"})]}),g.jsx("div",{className:"grid gap-3",children:e.groups.map(h=>g.jsx(ofe,{g:h,isBest:e.bestKind===h.kind,demoteAbsent:i,hasAbsent:d,onDemoteAbsentChange:a},h.kind))})]}),g.jsx("div",{className:"pt-2",children:g.jsx(ife,{data:t,pillars:n,hourKey:r,demoteAbsent:i,natal:e})})]})}const bR=e=>e<10?`0${e}`:`${e}`;function cfe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Vi(i,a,o),u=`${l.getFullYear()}${bR(l.getMonth()+1)}${bR(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}function ufe(e){if(typeof e!="number"&&typeof e!="string")return null;const t=String(e);if(!/^\d{8}$/.test(t))return null;const n=Number(t.slice(0,4)),r=Number(t.slice(4,6)),i=Number(t.slice(6,8)),a=new Date(n,r-1,i);return Number.isNaN(a.getTime())?null:a}const dfe=["  ","   ","","",""];function ffe(e){return e==="  "||e===""}function hfe({data:e,pillars:t,lunarPillars:n,daewoonGz:r}){const i=un(m=>m.settings),a=Xce(),o=cfe(e),l=ufe(o.birthDay)||void 0,u=yn(m=>m.canUseAdvancedReportNow()),d=Gde({data:o,pillars:t,lunarPillars:n,daewoonGzProp:r,blendTab:a.blendTab,demoteAbsent:a.demoteAbsent}),h=S.useMemo(()=>"    100   ! (  )",[]);return d.isValidActive?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsxs("div",{className:"flex flex-col items-center mb-8",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap mb-4",children:Zce.map(m=>{const b=a.blendTab===m;return g.jsx("button",{onClick:()=>a.setBlendTab(m),className:`
                  px-4 py-1.5 text-[11px] font-bold rounded-full transition-all duration-200 active:scale-95 cursor-pointer
                  ${b?"bg-amber-400 text-amber-950 shadow-[0_2px_10px_rgba(251,191,36,0.4)] border border-amber-300":"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 border border-transparent hover:bg-neutral-200 dark:hover:bg-neutral-700"}
                `,children:m},m)})}),g.jsxs("div",{className:"flex items-start gap-2 px-4 py-2 bg-amber-50/50 dark:bg-amber-900/10 rounded-xl border border-amber-100/50 dark:border-amber-900/20",children:[g.jsx("span",{className:"text-amber-500 text-[12px] mt-0.5",children:""}),g.jsxs("p",{className:"text-[10.5px] text-amber-700 dark:text-amber-400/80 leading-relaxed font-medium",children:["    ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "})," ",g.jsx("span",{className:"font-bold underline decoration-amber-300/50 underline-offset-2 text-amber-800 dark:text-amber-300",children:" "}),"   ."]})]})]}),g.jsx("div",{className:"flex gap-2 mb-8 justify-center flex-wrap",children:dfe.map(m=>{const b=!u&&ffe(m),y=a.bigTab===m;return g.jsxs("button",{title:b?h:void 0,onClick:()=>a.setBigTab(m),className:`
                relative px-4 py-2 text-sm font-bold rounded-2xl border transition-all duration-300 active:scale-95 flex items-center gap-1.5 cursor-pointer
                ${y?"bg-violet-600 text-white border-violet-500 shadow-[0_4px_12px_rgba(139,92,246,0.3)] z-10":"bg-white dark:bg-neutral-900 text-neutral-500 dark:text-neutral-400 border-neutral-200 dark:border-neutral-800 hover:border-violet-300 dark:hover:border-violet-700"}
                ${b?"opacity-70 bg-neutral-50 dark:bg-neutral-900/50":""}
              `,children:[g.jsx("span",{className:b?"mr-1":"",children:m}),b&&g.jsx("span",{className:"flex items-center justify-center w-4 h-4 bg-neutral-200 dark:bg-neutral-800 rounded-full text-[10px]",children:""}),y&&!b&&g.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]},m)})}),a.bigTab===""&&g.jsx(kle,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`harm-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(gle,{data:d.chartData,perStemElementScaled:d.overlay?.perStemAugFull,dayStem:d.activePillars[2]?.charAt(0)??null,yongshinTop:d.yongshinMulti?.best?.candidates?.[0]?.element??null,yongshinKind:d.yongshinMulti?.bestKind??null},`pentagon-${d.revKey}`),g.jsx(Sle,{natal:d.activePillars,perStemElementScaled:d.overlay?.perStemAugFull}),g.jsx(vle,{value:d.dayElementPercent}),g.jsx(Ile,{natal:d.activePillars})]}),a.bigTab===""&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:""}),"   .   100  !"]}),a.bigTab===""&&u&&g.jsx(lfe,{recommend:d.yongshinMulti,data:o,pillars:d.activePillars,hourKey:d.hourKeyForUi,demoteAbsent:a.demoteAbsent,onDemoteAbsentChange:a.setDemoteAbsent,hasAbsent:d.hasAbsent,hiddenStemMode:i.hiddenStemMode},`yongshin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab===""&&g.jsx(Tle,{pillars:d.activePillars,daewoon:d.daewoonGz||void 0,sewoon:d.seGz||void 0,wolwoon:d.wolGz||void 0,ilwoon:d.ilGz||void 0,tab:a.blendTab},`shin-${a.blendTab}-${d.hourKeyForUi}`),a.bigTab==="  "&&!u&&g.jsxs("div",{className:"p-4 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-600 dark:text-neutral-300 text-center",children:["   ",g.jsx("b",{children:"  "}),"   .   100  !"]}),a.bigTab==="  "&&u&&g.jsx(Ice,{unified:d.unified,pillars:d.activePillars,tab:a.blendTab,mapping:i.hiddenStemMode,birthDate:l},`gyeok-${a.blendTab}-${d.hourKeyForUi}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const mb=e=>typeof e=="string"&&e.length>=2,mfe=e=>!Array.isArray(e)||e.length!==4?!1:mb(e[0])&&mb(e[1])&&mb(e[2])&&(e[3]===""||mb(e[3]));function pfe({data:e}){const[t,n]=S.useState("un"),r=rc(),i=yn(d=>d.canUseMyoViewerNow());S.useEffect(()=>{t==="myoun"&&!i&&n("un")},[t,i]);const a=S.useMemo(()=>{try{const d=Cf(e);return Wl(d,r)}catch{return new Date}},[e,r]),o=S.useMemo(()=>Zl(e,a),[e,a]),l=!e.birthTime||e.birthTime==="",u=S.useMemo(()=>{try{const d=ct(o,e.birthPlace?.lon),h=At(o,e.birthPlace?.lon),m=ht(o,e.mingSikType),b=l?"":eo(o,e.mingSikType);return[d,h,m,b]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),i?g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}):null,g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(sle,{data:e}),t==="myoun"&&i&&g.jsx(dle,{data:e}),t==="report"&&g.jsx(hfe,{data:e,pillars:mfe(u)?u:[]})]})}function gfe({onOpenSidebar:e,onAddNew:t,onOpenCustom:n,isLoggedIn:r}){const i=En(C=>C.list.length),a=yn(C=>C.canAddMyeongsik),[o,l]=S.useState(!1);S.useEffect(()=>{let C=!0;De.auth.getSession().then(({data:P})=>{C&&l(!!P.session?.user)});const{data:M}=De.auth.onAuthStateChange((P,I)=>{l(!!I?.user)});return()=>{C=!1,M.subscription.unsubscribe()}},[]);const u=r||o,d=a(i),h=!d.ok,m=h?d.message:"",b=()=>{if(h){ma(m||"   ");return}t()},y=()=>{if(h){ma(m||"   ");return}n()},k=()=>{ks.getState().openWith("HEADER")},w=async()=>{const{error:C}=await De.auth.signOut();if(C){console.error(C),ma("  ");return}ma(" ")},_="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors",T="bg-purple-600 hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 cursor-pointer",O="bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 cursor-pointer",j="bg-neutral-300 dark:bg-neutral-800 text-neutral-100 cursor-not-allowed opacity-80";return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(sX,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("button",{type:"button",onClick:b,"aria-label":" ",disabled:h,title:" ",className:`${_} ${h?j:T}`,children:[g.jsx(yX,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),g.jsxs("button",{type:"button",onClick:y,"aria-label":"  ",disabled:h,title:"  ",className:`${_} ${h?j:O}`,children:[g.jsx(pX,{size:18}),h?g.jsx("span",{className:"ml-1 text-[12px]",children:""}):null]}),u?g.jsx("button",{type:"button",onClick:w,"aria-label":"",title:"",className:"inline-flex items-center gap-1 text-xs cursor-pointer text-neutral-700 dark:text-neutral-200 hover:text-purple-600 dark:hover:text-purple-400",children:g.jsx("ins",{children:""})}):g.jsx("button",{type:"button",onClick:k,"aria-label":"",title:"",className:"text-xs cursor-pointer",children:g.jsx("ins",{children:""})})]})]})})}function bfe(e){S.useEffect(()=>{const t=e??c$()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");d$(t),e&&u$(e)},[e])}const o9=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","daewoonDisplayBase","charType","thinEum","visibility","difficultyMode"];function yfe(e){return typeof e=="string"&&o9.includes(e)}function z2(e){const t=Array.isArray(e)?e.filter(yfe):[],n=o9.filter(r=>!t.includes(r));return[...t,...n]}function U2(e){return{...$l,...e,sectionOrder:z2(e.sectionOrder)}}function vfe(e,t){return e.theme??t.theme??"dark"}function xfe({open:e,settings:t}){const n=S.useMemo(()=>z2(t.sectionOrder),[t.sectionOrder]),r=S.useMemo(()=>U2(t),[t]),[i,a]=S.useState(n),[o,l]=S.useState(r),[u,d]=S.useState(null),[h,m]=S.useState(!1);return S.useEffect(()=>{if(!e||h)return;const y=z2(t.sectionOrder);l({...U2(t),sectionOrder:y}),a(y),m(!1)},[e,t,h]),{order:i,setOrder:a,localSettings:o,setLocalSettings:l,updateSetting:(y,k)=>{l(w=>{const _={...w,[y]:k};return m(!0),_})},toastMessage:u,setToastMessage:d,dirty:h,setDirty:m}}function wfe(){try{typeof window<"u"&&window.localStorage.removeItem("settings_v1")}catch{}}function s9(e){u$(e)}function _fe({setSettings:e,saveToServer:t}){return{applyChanges:S.useCallback(async(r,i,a)=>{const o={...U2(r),sectionOrder:i};wfe(),S.startTransition(()=>{e(o)}),o.theme&&s9(o.theme),a(),t(!0)},[e,t])}}function Sfe({open:e,onClose:t}){const{settings:n,setSettings:r,saveToServer:i}=un(),a=xfe({open:e,settings:n}),o=_fe({setSettings:r,saveToServer:i}),l=()=>a.setToastMessage(null),u=vfe(a.localSettings,n);bfe(u),S.useEffect(()=>{s9(u)},[u]);const d=()=>{o.applyChanges(a.localSettings,a.order,()=>{a.setToastMessage(" "),a.setDirty(!1),t()})},h=b=>{const{destination:y,source:k}=b;if(!y||y.index===k.index)return;const w=Array.from(a.order),[_]=w.splice(k.index,1);w.splice(y.index,0,_),a.setOrder(w)},m=b=>{switch(b){case"theme":return g.jsx(ua,{title:"",children:g.jsx(kfe,{value:a.localSettings.theme??"dark",onChange:y=>a.updateSetting("theme",y)})});case"hiddenStem":return g.jsx(ua,{title:"  ",children:g.jsx(Qc,{value:a.localSettings.hiddenStem,onChange:y=>a.updateSetting("hiddenStem",y),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(ua,{title:" ",children:g.jsx(Qc,{value:a.localSettings.hiddenStemMode,onChange:y=>a.updateSetting("hiddenStemMode",y),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(ua,{title:"",children:g.jsx(Qc,{value:a.localSettings.sinsalMode,onChange:y=>a.updateSetting("sinsalMode",y),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(ua,{title:"",children:g.jsx(Qc,{value:a.localSettings.sinsalBase,onChange:y=>a.updateSetting("sinsalBase",y),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(ua,{title:" ",children:g.jsx(To,{label:" ",checked:!!a.localSettings.sinsalBloom,onChange:y=>a.updateSetting("sinsalBloom",y)})});case"exposure":return g.jsx(ua,{title:" ",children:g.jsx(Qc,{value:a.localSettings.exposure,onChange:y=>a.updateSetting("exposure",y),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"daewoonDisplayBase":return g.jsx(ua,{title:"  ",children:g.jsx(Qc,{value:a.localSettings.daewoonDisplayBase,onChange:y=>a.updateSetting("daewoonDisplayBase",y),options:[{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(ua,{title:" ",children:g.jsx(Qc,{value:a.localSettings.charType,onChange:y=>a.updateSetting("charType",y),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(ua,{title:" ",children:g.jsx(To,{label:" ",checked:!!a.localSettings.thinEum,onChange:y=>a.updateSetting("thinEum",y)})});case"visibility":return g.jsx(ua,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(To,{label:" ",checked:!!a.localSettings.showSipSin,onChange:y=>a.updateSetting("showSipSin",y)}),g.jsx(To,{label:" ",checked:!!a.localSettings.showSibiUnseong,onChange:y=>a.updateSetting("showSibiUnseong",y)}),g.jsx(To,{label:" ",checked:!!a.localSettings.showSibiSinsal,onChange:y=>a.updateSetting("showSibiSinsal",y)}),g.jsx(To,{label:" ",checked:!!a.localSettings.showNabeum,onChange:y=>a.updateSetting("showNabeum",y)}),g.jsx(To,{label:" BOX ",checked:!!a.localSettings.showEtcShinsal,onChange:y=>a.updateSetting("showEtcShinsal",y)}),g.jsx(To,{label:" BOX ",checked:!!a.localSettings.showRelationBox,onChange:y=>a.updateSetting("showRelationBox",y)}),g.jsx(To,{label:" BOX ",checked:!!a.localSettings.showPromptBox,onChange:y=>a.updateSetting("showPromptBox",y)})]})});case"difficultyMode":return g.jsx(ua,{title:" UP ver.",children:g.jsx(To,{label:" UP ",checked:!!a.localSettings.difficultyMode,onChange:y=>a.updateSetting("difficultyMode",y)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:d,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]}),e&&g.jsx(Np,{onDragEnd:h,children:g.jsx(Nf,{droppableId:"settings-sections",children:b=>g.jsxs("ul",{ref:b.innerRef,...b.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[a.order.map((y,k)=>g.jsx(Af,{draggableId:y,index:k,children:w=>g.jsxs("li",{ref:w.innerRef,...w.draggableProps,...w.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none text-neutral-500",children:"::"}),g.jsx("div",{className:"flex-1 min-w-0",children:m(y)})]})},y)),b.placeholder]})})})]}),a.toastMessage&&g.jsx(U6,{message:a.toastMessage,onClose:l,ms:1800})]})}function kfe({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function ua({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function Qc({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:r=>r.stopPropagation(),onTouchStart:r=>r.stopPropagation(),children:n.map(r=>{const i=e===r.value;return g.jsx("button",{type:"button",onClick:()=>t(r.value),className:`px-3 py-1 text-sm transition-colors ${i?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:r.label},r.value)})})}function To({label:e,checked:t,onChange:n}){const r=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:r,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:r,type:"checkbox",checked:t,onChange:i=>n(i.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-indigo-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-indigo-600"})]})}function Efe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=En(h=>h.list),a=tc();S.useEffect(()=>{r(En.getState().loading);const h=En.subscribe(m=>{r(m.loading)});return()=>h()},[]);const o=()=>{if(!n){if(i.length===0){alert("    !");return}a("/iching")}},d={bottom:"var(--bottom-dock, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] px-2 box-border left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",style:d,children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(cm,{icon:g.jsx(eX,{size:22}),label:"",onClick:()=>a("/")}),g.jsx(cm,{icon:g.jsx(JZ,{size:22}),label:"",onClick:()=>a("/couple")}),g.jsx(cm,{icon:g.jsx(c4,{size:22}),label:"FAQ",onClick:()=>a("/faq")}),g.jsx(cm,{icon:g.jsx(dX,{size:22}),label:"",onClick:()=>t(!0)}),g.jsx(cm,{icon:g.jsx(hX,{size:22}),label:"",onClick:o})]})}),g.jsx(Sfe,{open:e,onClose:()=>t(!1)})]})}function cm({icon:e,label:t,onClick:n,disabled:r}){return g.jsxs("button",{onClick:n,disabled:r,className:"flex flex-1 flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}const l9=e=>e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t!==""),Gy=e=>l9(e).join(""),jfe=()=>{const[e,t]=S.useState(()=>{if(typeof window>"u")return{};try{const u=localStorage.getItem(XD);return u?JSON.parse(u):{}}catch{return{}}});S.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(XD,JSON.stringify(e))}catch{}},[e]);const[n,r]=S.useState({}),[i,a]=S.useState(""),[o,l]=S.useState(()=>{const u=Ny(),d=Oy(),h=d.length?Pm(u,d):u;return Ud(h,e)});return S.useEffect(()=>{l(u=>{const d=Ud(u,e);return Gy(d)===Gy(u)?u:d})},[e]),S.useEffect(()=>{r(u=>{const d={...u};for(const h of o)d[h]===void 0&&(d[h]=!0);return d})},[o]),{folderFavMap:e,setFolderFavMap:t,folderOpenMap:n,setFolderOpenMap:r,newFolderName:i,setNewFolderName:a,orderedFolders:o,setOrderedFolders:l}},Tfe=({list:e,orderedFolders:t})=>{const{grouped:n,unassignedItems:r}=S.useMemo(()=>{const i=ax(e,t),a={};for(const o of t)a[o]=i[o]??[];return{grouped:a,unassignedItems:i[gr]??[]}},[e,t]);return{grouped:n,unassignedItems:r}},um=async()=>{const{data:e,error:t}=await De.auth.getUser();return t||!e.user?null:e.user.id},Afe=async e=>{const{data:t,error:n}=await De.from("user_custom_folders").select("folder_name").eq("user_id",e);return n&&n.code==="PGRST205"?{data:[],error:n,disabled:!0}:n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?a.folder_name.trim():"").filter(a=>a!==""),error:null}},Nfe=async e=>{const{data:t,error:n}=await De.from("user_folder_order").select("folder_name, sort_order").eq("user_id",e).order("sort_order",{ascending:!0,nullsFirst:!0});return n?{data:[],error:n}:{data:(t??[]).map(a=>a.folder_name?String(a.folder_name):"").filter(a=>a.trim()!==""),error:null}},Ofe=async(e,t)=>{const n=t.filter(i=>typeof i=="string"&&i.trim()!=="").map((i,a)=>({user_id:e,folder_name:i.trim(),sort_order:a+1,updated_at:new Date().toISOString()}));if(!n.length){const{error:i}=await De.from("user_folder_order").delete().eq("user_id",e);return{data:null,error:i}}const{error:r}=await De.from("user_folder_order").upsert(n,{onConflict:"user_id,folder_name"});return{data:null,error:r}},Cfe=async(e,t)=>{const{error:n}=await De.from("user_folder_order").delete().eq("user_id",e).eq("folder_name",t);return{data:null,error:n}},Mfe=async(e,t)=>{const{error:n}=await De.from("user_custom_folders").upsert({user_id:e,folder_name:t,updated_at:new Date().toISOString()});return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Dfe=async(e,t)=>{const{error:n}=await De.from("user_custom_folders").delete().eq("user_id",e).eq("folder_name",t);return n&&n.code==="PGRST205"?{data:null,error:n,disabled:!0}:{data:null,error:n}},Pfe=({folderFavMap:e,setFolderFavMap:t,setOrderedFolders:n,unsetFolderForFolder:r})=>{const[i,a]=S.useState(!1),o=S.useRef(e),l=S.useRef(!1),u=S.useRef(!1);S.useEffect(()=>{o.current=e},[e]),S.useEffect(()=>{(async()=>{if(i)return;const O=await um();if(!O)return;try{if(!u.current){const I=await Afe(O);I.disabled&&(u.current=!0),I.error?console.error("load custom folders from server error:",I.error):I.data.length&&Wj(I.data)}}catch(I){console.error("load custom folders exception:",I)}const j=await Nfe(O);if(j.error){console.error("load folder order from server error:",j.error),a(!0);return}const C=Ny(),M=j.data,P=M.length?Pm(C,M):Pm(C,Oy());n(Ud(P,o.current)),M.length&&Fd(M),a(!0)})()},[i,n]);const d=S.useCallback(async T=>{const O=await um();if(!O)return;const j=await Ofe(O,T);j.error&&console.error("save folder order to server error:",j.error)},[]),h=S.useRef(null),m=S.useRef(null),b=S.useRef(""),y=S.useCallback((T,O)=>{const j=l9(T),C=Gy(j);if(C&&C===b.current)return;h.current=j;const M=async()=>{const P=h.current;if(h.current=null,!P)return;const I=Gy(P);I&&I===b.current||(await d(P),b.current=I)};if(O?.immediate){m.current&&(window.clearTimeout(m.current),m.current=null),M();return}m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{m.current=null,M()},300)},[d]);S.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=null);const T=h.current;h.current=null,T&&T.length&&d(T)},[d]),S.useEffect(()=>{if(typeof window>"u")return;const T=()=>{if(l.current){l.current=!1;return}const O=Ny(),j=Oy(),C=j.length?Pm(O,j):O;n(Ud(C,o.current))};return window.addEventListener(Vl,T),()=>window.removeEventListener(Vl,T)},[n]);const k=S.useCallback(T=>{const{source:O,destination:j,type:C}=T;if(!j||C!=="FOLDER")return;const M=O.index,P=j.index;M!==P&&n(I=>{if(!I.length)return I;const U=[...I],[W]=U.splice(M,1);U.splice(P,0,W);const q=Ud(U,o.current);return l.current=!0,Fd(q),y(q),q})},[y,n]),w=S.useCallback(T=>{const O=T.trim();!O||O===kn||(z6(O),(async()=>{if(u.current)return;const j=await um();if(!j)return;const C=await Mfe(j,O);C.disabled&&(u.current=!0),C.error&&console.error("save custom folder error:",C.error)})(),n(j=>{if(j.includes(O))return j;const C=[...j,O],M=Ud(C,o.current);return Fd(M),y(M,{immediate:!0}),M}))},[y,n]),_=S.useCallback(T=>{r(T),t(O=>{const j={...O};return delete j[T],j}),n(O=>{const j=O.filter(C=>C!==T);return Fd(j),y(j,{immediate:!0}),(async()=>{const C=await um();if(!C)return;const M=await Cfe(C,T);M.error&&console.error("delete folder order entry error:",M.error)})(),j}),I6.includes(T)?Qre(T):(Jre(T),(async()=>{if(u.current)return;const O=await um();if(!O)return;const j=await Dfe(O,T);j.disabled&&(u.current=!0),j.error&&console.error("delete custom folder error:",j.error)})())},[y,t,n,r]);return{handleDragEnd:k,createFolder:w,deleteFolder:_,UNASSIGNED_LABEL:kn}};function Rfe(e,t){const n=jfe(),r=Tfe({list:e,orderedFolders:n.orderedFolders}),i=Pfe({folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,setOrderedFolders:n.setOrderedFolders,unsetFolderForFolder:t.unsetFolderForFolder});return{folderFavMap:n.folderFavMap,setFolderFavMap:n.setFolderFavMap,folderOpenMap:n.folderOpenMap,setFolderOpenMap:n.setFolderOpenMap,newFolderName:n.newFolderName,setNewFolderName:n.setNewFolderName,orderedFolders:n.orderedFolders,grouped:r.grouped,unassignedItems:r.unassignedItems,handleDragEnd:i.handleDragEnd,createFolder:i.createFolder,deleteFolder:i.deleteFolder,UNASSIGNED_LABEL:i.UNASSIGNED_LABEL}}function Lfe({onClose:e,onAddNew:t,isLoggedIn:n,onLogin:r}){const i=En(m=>m.list.length),o=yn(m=>m.canAddMyeongsik)(i),l=!o.ok,u=l?o.message:"",d=()=>{if(l){ma(u||"  ");return}t()},h=async()=>{const{error:m}=await De.auth.signOut();if(m){console.error(m),ma(" ");return}ma(" ")};return g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h2",{className:"text-lg font-bold",children:" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n?g.jsxs("button",{type:"button",onClick:h,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(aX,{size:16})," "]}):g.jsxs("button",{type:"button",onClick:r,className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                       bg-neutral-200 text-neutral-800 hover:bg-neutral-300
                       dark:bg-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-700`,title:"",children:[g.jsx(u4,{size:16})," "]}),g.jsxs("button",{type:"button",onClick:d,disabled:l,title:u,className:l?"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-80":"inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer bg-purple-600 hover:bg-purple-500 text-white",children:[g.jsx(cX,{size:16}),"  ",l?"":""]}),g.jsx("button",{type:"button",onClick:e,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900","aria-label":" ",title:"",children:g.jsx(yy,{size:22})})]})]})}function Ife({search:e,setSearch:t,searchMode:n,setSearchMode:r,isFiltering:i,totalMatches:a}){return g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"h-30 text-xs rounded px-2 py-1 cursor-pointer bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40",children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:e,onChange:o=>t(o.target.value),placeholder:n==="name"?" ":n==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:"w-full pl-7 pr-8 py-1 h-30 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-[16px] text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-amber-500/40"}),e&&g.jsx("button",{type:"button",onClick:()=>t(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(ZZ,{size:16})})]}),i&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[a,""]})]})})}function $fe({newFolderName:e,setNewFolderName:t,onCreate:n,isFiltering:r,totalCount:i,collapsed:a,onToggleCollapse:o}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),placeholder:"  ",className:"flex-1 w-[60%] px-2 py-1 rounded h-30 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500",onClick:l=>l.stopPropagation()}),g.jsx("button",{type:"button",className:"px-3 rounded h-30 text-sm cursor-pointer bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700",onClick:l=>{l.stopPropagation(),n()},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-1",children:r?"   .":"/      ."}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"  "}),g.jsx("span",{className:"mx-1",children:""}),g.jsxs("span",{className:"font-semibold text-amber-500 dark:text-amber-600",children:[i,""]})]}),g.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-xs text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:a?"  ":"  "})]}),g.jsx("div",{className:"text-xs mb-2 text-neutral-900 dark:text-neutral-100",children:"         !"})]})}function yR({droppableId:e,items:t,isDropDisabled:n,className:r}){return g.jsx(Nf,{droppableId:e,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:n,children:i=>g.jsx("div",{ref:i.innerRef,...i.droppableProps,className:r,children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[t,i.placeholder]})})})}function Bfe({folderName:e,folderIndex:t,isOpen:n,isFavorite:r,itemCount:i,isDragDisabled:a,onToggleOpen:o,onToggleFavorite:l,onDelete:u,inner:d}){return g.jsx(Af,{draggableId:`folder-${e}`,index:t,isDragDisabled:a,children:h=>g.jsxs("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:"flex items-center justify-between px-2 py-2 rounded bg-neutral-50 dark:bg-neutral-900/70 border border-neutral-200 dark:border-neutral-800 text-neutral-800 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:m=>{m.stopPropagation(),o()},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[n?g.jsx(KZ,{size:16}):g.jsx(YZ,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:e})]}),g.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),l()},className:`p-1 rounded cursor-pointer ${r?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":"  ",title:r?" ":"",children:g.jsx(d4,{size:16,fill:r?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[i,""]}),g.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),u()},className:"px-2 py-1 rounded text-xs cursor-pointer border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30",children:""})]})]}),n?d:null]})},`folder-${e}`)}const zfe=()=>({canManage:yn(()=>!0)}),ip="";function Ufe(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${r} ${i} ${t.slice(0,2)}:${t.slice(2,4)}`:t===ip?`${n} ${r} ${i} ( )`:`${n} ${r} ${i}`}function Ffe(e){if(!e||e==="")return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=o=>t.find(l=>o.some(u=>l.endsWith(u))),r=n(["","","","",""]),i=n(["","","","","",""]);return t.length===1||!n(["","","","","","","","","","",""])&&!n(["","","","","",""])?e:r&&i?`${r} ${i}`:r||e}function vR(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}function Hfe(e,t){const n=Of(e),r=Cp(t);if(!n||!r)return null;const i=new Date(n.y,n.m-1,n.d,r.hh,r.mm,0,0),a=new Date(i.getTime()-3600*1e3),o=String(a.getFullYear()).padStart(4,"0"),l=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),d=String(a.getHours()).padStart(2,"0"),h=String(a.getMinutes()).padStart(2,"0");return{birthDay:`${o}${l}${u}`,birthTime:`${d}${h}`}}function Gfe(e){const t=vR(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const r=Number(n.slice(0,4)),i=Number(n.slice(4,6)),a=Number(n.slice(6,8));if(!Xm(r,i,a)||!e.birthTime||e.birthTime===ip)return t;const o=Hfe(n,e.birthTime);if(!o)return t;const l=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(l.getTime()))return t;const u=new Date(l.getTime()-3600*1e3),d=Uj({...e,birthDay:o.birthDay,birthTime:o.birthTime,corrected:u});return vR({...e,...d})}function Yfe(e){const t=String(e??"").trim();if(/^\d{8}$/.test(t)){const r=Number(t.slice(0,4));return Number.isFinite(r)?r:NaN}const n=new Date(t);return Number.isNaN(n.getTime())?NaN:n.getFullYear()}function qfe(e,t){return Number.isNaN(e)?0:t-e+1}function Kfe(e){return{...e,transition:e?.transform?"transform 0.15s ease":"none"}}function Wfe(e){return e===""?"":e===""?"":e??""}function Vfe(e){const t=e.trim(),n=/^(\d{1,2}):(\d{2})$/.exec(t);if(!n)return null;const r=Number(n[1]),i=Number(n[2]);if(!Number.isFinite(r)||!Number.isFinite(i)||r<0||r>23||i<0||i>59)return null;const a=r-1<0?23:r-1;return`${String(a).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function Zfe(e,t){if(t)return ip;const n=String(e.birthDay??"").trim(),r=String(e.correctedLocal??"").trim(),i=e.corrected instanceof Date?e.corrected:new Date(String(e.corrected??"")),a=!Number.isNaN(i.getTime()),o=r||(a?T2(i):"");if(!/^\d{8}$/.test(n))return o;const l=Number(n.slice(0,4)),u=Number(n.slice(4,6)),d=Number(n.slice(6,8));if(!Xm(l,u,d)||!e.birthTime||e.birthTime===ip)return o;if(a){const m=new Date(i.getTime()-36e5);return T2(m)}return Vfe(r)??o}function Xfe({m:e,memoOpen:t,isDragDisabled:n}){const r=n,i=`item:${e.id}`,a=Gfe(e),o=Ffe(e.birthPlace?.name),l=e.relationship?.trim()?e.relationship:" ",u=Wfe(e.gender),d=!e.birthTime||e.birthTime===ip,h=Zfe(e,d),m=!!(o||h),b=Ufe(e.birthDay,e.birthTime),y=e.calendarType==="lunar"?"":"",k=Yfe(e.birthDay),w=qfe(k,new Date().getFullYear()),_=!!(e.memo&&e.memo.trim()!==""),T=t?" ":" ",O=e.mingSikType??"/",j=r?" ":"::",C=e.favorite?" ":"";return{keyId:i,dragDisabled:r,dragHandleLabel:j,ganji:a,placeDisplay:o,relationshipLabel:l,genderLabel:u,birthDisplay:b,calendarLabel:y,correctedLabel:h,showMetaLine:m,showMemo:_,memoToggleLabel:T,age:w,mingSikTypeValue:O,favoriteLabel:C,editLabel:"",deleteLabel:"",getDragStyle:Kfe}}const Jfe=({m:e,unassignedLabel:t,onToggleMemo:n,onChangeFolder:r,onChangeMingSikType:i,onView:a,onEdit:o,onDelete:l,onToggleFavorite:u})=>{const d=S.useCallback(_=>{_?.stopPropagation(),n(e.id)},[n,e.id]),h=S.useCallback(_=>{_?.stopPropagation(),a(e)},[a,e]),m=S.useCallback(_=>{_?.stopPropagation(),o(e)},[o,e]),b=S.useCallback(_=>{_?.stopPropagation(),l(e)},[l,e]),y=S.useCallback(_=>{_?.stopPropagation(),u(e.id)},[u,e.id]),k=S.useCallback(_=>{const T=_===t?void 0:_;r(e.id,T)},[r,e.id,t]),w=S.useCallback(_=>{i(e,_)},[i,e]);return{handleToggleMemo:d,handleView:h,handleEdit:m,handleDelete:b,handleToggleFavorite:y,handleFolderChange:k,handleMingSikTypeChange:w}};function xR({m:e,index:t,orderedFolders:n,unassignedLabel:r,isDragDisabled:i,collapsed:a,memoOpen:o,onToggleMemo:l,onToggleCollapsed:u,onChangeFolder:d,onChangeMingSikType:h,onView:m,onEdit:b,onDelete:y,onToggleFavorite:k}){zfe();const w=Xfe({m:e,memoOpen:o,isDragDisabled:i}),_=a,T=Jfe({m:e,unassignedLabel:r,onToggleMemo:l,onChangeFolder:d,onChangeMingSikType:h,onView:m,onEdit:b,onDelete:y,onToggleFavorite:k});return g.jsx(Af,{draggableId:w.keyId,index:t,isDragDisabled:i,children:O=>g.jsx("li",{ref:O.innerRef,...O.draggableProps,...O.dragHandleProps,style:O.draggableProps.style,className:`list-none select-none rounded-xl border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-neutral-100 ${i?"cursor-default":"cursor-grab active:cursor-grabbing"}`,onClick:()=>{_&&T.handleView()},children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[e.name," (",w.age,"",w.genderLabel,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 text-nowrap",children:w.relationshipLabel}),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("span",{className:"opacity-50 select-none",children:w.dragHandleLabel}),g.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u()},className:"text-xs px-2 py-1 rounded border border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-900 cursor-pointer",children:_?" ":" "})]})]}),!_&&g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[w.birthDisplay,", ",w.calendarLabel]}),!_&&w.showMetaLine&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[w.placeDisplay,w.correctedLabel&&g.jsxs("span",{className:"opacity-70",children:["  ",w.correctedLabel]})]}),w.ganji&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:w.ganji}),!_&&w.showMemo&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:T.handleToggleMemo,children:w.memoToggleLabel}),g.jsx("div",{className:o?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:e.memo})]}),!_&&g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:e.folder??r,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleFolderChange(j.target.value)},children:[r,...n].map(j=>g.jsx("option",{value:j,children:j},j))}),g.jsxs("select",{className:"h-30 text-xs rounded px-2 py-1 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 focus:outline-none focus:ring-2 focus:ring-amber-500/40 cursor-pointer",value:w.mingSikTypeValue,onClick:j=>j.stopPropagation(),onChange:j=>{j.stopPropagation(),T.handleMingSikTypeChange(j.target.value)},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),!_&&g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{type:"button",onClick:T.handleView,className:"px-3 py-1 rounded text-white text-sm cursor-pointer bg-indigo-600 hover:bg-indigo-500",children:""}),g.jsx("button",{type:"button",title:"",onClick:T.handleEdit,className:"px-3 py-1 rounded text-white text-sm bg-amber-600 hover:bg-amber-500 cursor-pointer",children:w.editLabel}),g.jsx("button",{type:"button",title:"",onClick:T.handleDelete,className:"px-3 py-1 rounded text-white text-sm bg-red-600 hover:bg-red-500 cursor-pointer",children:w.deleteLabel}),g.jsx("button",{type:"button",title:w.favoriteLabel,onClick:T.handleToggleFavorite,className:`ml-auto p-1 rounded cursor-pointer ${e.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,"aria-label":w.favoriteLabel,children:g.jsx(d4,{size:16,fill:e.favorite?"currentColor":"none"})})]})]})})},w.keyId)}const Qfe="list:__unassigned__",ehe=e=>`list:${e}`,wR=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},the=({search:e,searchMode:t,orderedFolders:n,grouped:r,unassignedItems:i})=>{const a=M6(e),{filteredUnassigned:o,filteredGrouped:l,totalMatches:u}=S.useMemo(()=>Pre({search:e,searchMode:t,orderedFolders:n,unassignedItems:i,grouped:r}),[e,t,n,i,r]);return{isFiltering:a,filteredUnassigned:o,filteredGrouped:l,totalMatches:u}},nhe=({list:e,orderedFolders:t})=>{const[n,r]=S.useState(""),[i,a]=S.useState("name"),[o,l]=S.useState({}),u=S.useRef(null),d=S.useRef(null);return S.useEffect(()=>{if(d.current==null)return;const b=u.current;b&&(b.scrollTop=d.current,d.current=null)},[e,t]),{search:n,setSearch:r,searchMode:i,setSearchMode:a,memoOpenMap:o,toggleMemo:b=>{l(y=>({...y,[b]:!y[b]}))},scrollRef:u,stashScrollTop:()=>{const b=u.current;b&&(d.current=b.scrollTop)}}},_R=()=>{typeof window>"u"||window.dispatchEvent(new Event(Vl))},rhe=({list:e,orderedFolders:t,isFiltering:n,handleFolderDragEnd:r,moveItemByDnD:i,applyNextList:a,update:o,remove:l,onView:u,onClose:d,onDeleteView:h,folderFavMap:m,setFolderFavMap:b,setFolderOpenMap:y,createFolder:k,deleteFolder:w,newFolderName:_,setNewFolderName:T,stashScrollTop:O})=>{const j=S.useCallback((B,K)=>{const{nextList:V}=Tre({list:e,orderedFolders:t,targetId:B,nextFolder:K??""});a(V)},[e,t,a]),C=S.useCallback((B,K)=>{const V={...B,mingSikType:K},Z=Uj(V);o(B.id,{mingSikType:K,...Z}),u({...V,...Z}),d()},[o,u,d]),M=S.useCallback(B=>{u(B),d()},[u,d]),P=S.useCallback(B=>{confirm(`'${B.name}'  ?`)&&(l(B.id),h&&h())},[l,h]),I=S.useCallback(()=>{const B=_.trim();B&&(k(B),T(""),_R())},[_,k,T]),U=S.useCallback(B=>{if(m[B]){alert(`'${B}'   .
   .`);return}confirm(`'${B}'  ?
(   )`)&&(w(B),_R())},[m,w]),W=S.useCallback(B=>{y(K=>({...K,[B]:!K[B]}))},[y]),q=S.useCallback(B=>{b(K=>({...K,[B]:!K[B]}))},[b]);return{handleDrop:S.useCallback(B=>{const{type:K,source:V,destination:Z,draggableId:G}=B;if(Z&&!n){if(O(),K==="FOLDER"){r(B);return}if(K==="ITEM"){if(!G.replace(/^item:/,""))return;const Q=wR(V.droppableId),oe=wR(Z.droppableId);i({orderedFolders:t,sourceFolder:Q,sourceIndex:V.index,destinationFolder:oe,destinationIndex:Z.index})}}},[n,O,r,i,t]),changeFolder:j,changeMingSikType:C,viewAndClose:M,requestDelete:P,createFolderAndNotify:I,requestDeleteFolder:U,toggleFolderOpen:W,toggleFolderFavorite:q}};function ihe({open:e,onClose:t,onView:n,onAddNew:r,onEdit:i,onDeleteView:a,isLoggedIn:o}){const[l,u]=S.useState(!1),d=un(ke=>ke.settings),h=un(ke=>ke.setKey),m=un(ke=>ke.saveToServer),{list:b,remove:y,update:k,moveItemByDnD:w,toggleFavoriteWithReorder:_,unsetFolderForFolder:T,applyNextList:O}=En(),{folderFavMap:j,setFolderFavMap:C,folderOpenMap:M,setFolderOpenMap:P,newFolderName:I,setNewFolderName:U,orderedFolders:W,grouped:q,unassignedItems:H,handleDragEnd:B,createFolder:K,deleteFolder:V,UNASSIGNED_LABEL:Z}=Rfe(b,{unsetFolderForFolder:T}),G=nhe({list:b,orderedFolders:W}),J=d.sidebarCardsCollapsed,Q=d.sidebarCardCollapsedMap,oe=ke=>Q[ke]??J,te=ke=>{h("sidebarCardCollapsedMap",ke),m()},z=ke=>{h("sidebarCardsCollapsed",ke);const he=b.reduce((Ue,Be)=>(Ue[Be.id]=ke,Ue),{});te(he)},X=ke=>{te({...Q,[ke]:!(Q[ke]??!0)})},{isFiltering:re,filteredUnassigned:ie,filteredGrouped:fe,totalMatches:de}=the({search:G.search,searchMode:G.searchMode,orderedFolders:W,unassignedItems:H,grouped:q}),pe=rhe({list:b,applyNextList:O,orderedFolders:W,isFiltering:re,handleFolderDragEnd:B,moveItemByDnD:w,update:k,remove:y,onView:n,onClose:t,onDeleteView:a,folderFavMap:j,setFolderFavMap:C,setFolderOpenMap:P,createFolder:K,deleteFolder:V,newFolderName:I,setNewFolderName:U,stashScrollTop:G.stashScrollTop}),Ne=()=>{u(!0)},se=ke=>{Mu.flushSync(()=>{u(!1),pe.handleDrop(ke)})},Se=()=>{ks.getState().openWith("HEADER")};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-100 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-101 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsx(Lfe,{onClose:t,onAddNew:()=>{r(),t()},onLogin:()=>{Se()},isLoggedIn:o}),g.jsx(Np,{onBeforeDragStart:Ne,onDragEnd:se,children:g.jsxs("div",{ref:G.scrollRef,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:l?"none":"pan-y"},children:[g.jsxs(g.Fragment,{children:[g.jsx(Ife,{search:G.search,setSearch:G.setSearch,searchMode:G.searchMode,setSearchMode:G.setSearchMode,isFiltering:re,totalMatches:de}),g.jsx($fe,{newFolderName:I,setNewFolderName:U,isFiltering:re,onCreate:pe.createFolderAndNotify,totalCount:b.length,collapsed:J,onToggleCollapse:()=>z(!J)})]}),g.jsx(yR,{droppableId:Qfe,isDropDisabled:re,className:"mb-6",items:ie.map((ke,he)=>g.jsx(xR,{m:ke,index:he,orderedFolders:W,unassignedLabel:Z,isDragDisabled:re,collapsed:oe(ke.id),memoOpen:!!G.memoOpenMap[ke.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>X(ke.id),onChangeFolder:pe.changeFolder,onChangeMingSikType:pe.changeMingSikType,onView:pe.viewAndClose,onEdit:Ue=>i(Ue),onDelete:pe.requestDelete,onToggleFavorite:Ue=>void _(Ue,W)},ke.id))}),g.jsx(Nf,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:re,children:ke=>g.jsxs("div",{ref:ke.innerRef,...ke.droppableProps,children:[W.map((he,Ue)=>{const Be=ehe(he),Xe=fe[he]||[],Ae=!!M[he],Ie=!!j[he];return g.jsx(Bfe,{folderName:he,folderIndex:Ue,isOpen:Ae,isFavorite:Ie,itemCount:Xe.length,isDragDisabled:re,onToggleOpen:()=>pe.toggleFolderOpen(he),onToggleFavorite:()=>pe.toggleFolderFavorite(he),onDelete:()=>pe.requestDeleteFolder(he),inner:g.jsx(yR,{droppableId:Be,isDropDisabled:re,className:"mt-2",items:Xe.map(($e,tt)=>g.jsx(xR,{m:$e,index:tt,orderedFolders:W,unassignedLabel:Z,isDragDisabled:re,collapsed:oe($e.id),memoOpen:!!G.memoOpenMap[$e.id],onToggleMemo:G.toggleMemo,onToggleCollapsed:()=>X($e.id),onChangeFolder:pe.changeFolder,onChangeMingSikType:pe.changeMingSikType,onView:pe.viewAndClose,onEdit:bt=>i(bt),onDelete:pe.requestDelete,onToggleFavorite:bt=>void _(bt,W)},$e.id))})},`folder-${he}`)}),ke.placeholder]})})]})})]})]})}function SR(e){return{...e,calendarType:e.calendarType??"solar"}}function kR(e){return!e.birthTime||e.birthTime===""}function ER(e){return!e.birthPlace||e.birthPlace.name===""}function ahe(e,t){if(t!=="lunar"||!e||e.length!==8)return null;try{const n=Number(e.slice(0,4)),r=Number(e.slice(4,6)),i=Number(e.slice(6,8)),a=Vi(n,r,i),o=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`  ${a.getFullYear()}-${o}-${l}`}catch(n){const r=n instanceof Error?n.message:void 0;return`  ${r?`: ${r}`:""}`}}const c9="ms_folders";function ohe(){try{const e=JSON.parse(localStorage.getItem(c9)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function she(e){localStorage.setItem(c9,JSON.stringify(e))}function lhe(e){const[t,n]=S.useState(!1),[r,i]=S.useState(()=>SR(e)),[a,o]=S.useState(kR(e)),[l,u]=S.useState(ER(e)),[d,h]=S.useState([]);return S.useEffect(()=>{h(ohe())},[]),{isEditing:t,setIsEditing:n,form:r,setForm:i,updateForm:(y,k)=>{i(w=>({...w,[y]:k}))},unknownTime:a,setUnknownTime:o,unknownPlace:l,setUnknownPlace:u,customFolders:d,setCustomFolders:h,resetForm:()=>{i(SR(e)),o(kR(e)),u(ER(e))}}}const u9=["","","","","",""];function che(e,t){const n=Array.from(new Set(e.map(a=>a.folder).filter(Boolean))),r=new Set([...u9,...t,...n]),i=Array.from(r).sort((a,o)=>a.localeCompare(o));return[kn,...i]}function uhe({list:e,customFolders:t,form:n}){const r=S.useMemo(()=>che(e,t),[e,t]),i=S.useMemo(()=>ahe(n.birthDay,n.calendarType),[n.birthDay,n.calendarType]);return{folderOptions:r,lunarPreview:i}}function dhe(e,t,n){if(!e.name||e.name.trim()==="")return"";const r=Fj(e.birthDay??"",e.calendarType??"solar");if(!r.ok)return r.message;const i=Hj(e.birthTime??"",t);return i.ok?!n&&!e.birthPlace?"":null:i.message}function fhe({item:e,form:t,unknownTime:n,unknownPlace:r,customFolders:i,setCustomFolders:a,update:o,remove:l,onClose:u,onSaved:d}){return{save:()=>{const b=dhe(t,n,r);if(b){alert(b);return}const y=yu(t.folder===kn?void 0:t.folder),k=T6({id:e.id,name:t.name,birthDay:t.birthDay??"",calendarType:t.calendarType??"solar",birthTime:t.birthTime,unknownTime:n,gender:t.gender,birthPlace:t.birthPlace,unknownPlace:r,relationship:t.relationship,memo:t.memo,folder:y,mingSikType:t.mingSikType,favorite:e.favorite,deletedAt:e.deletedAt??null,sortOrder:e.sortOrder,dateObj:e.dateObj},{requireName:!0});if(!k.ok){alert(k.message);return}const w={...e,...k.value};if(w.folder&&!u9.includes(w.folder)&&!i.includes(w.folder)){const _=[...i,w.folder];a(_),she(_)}o(e.id,w),d?.(),u?.()},removeThis:()=>{confirm(`'${e.name}'  ?`)&&l(e.id)}}}const Y1="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",hhe="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",mhe="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",vs="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",phe="text-xs text-neutral-500 dark:text-neutral-400",pb="accent-violet-600 dark:accent-violet-400",jR="accent-violet-600 dark:accent-violet-400",mx="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",ghe=`${mx} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,bhe=`${mx} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,TR=`${mx} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,yhe=`${mx} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function vhe({item:e,onClose:t}){const{list:n,update:r,remove:i}=En(),a=lhe(e),o=uhe({list:n,customFolders:a.customFolders,form:a.form}),l=fhe({item:e,form:a.form,unknownTime:a.unknownTime,unknownPlace:a.unknownPlace,customFolders:a.customFolders,setCustomFolders:a.setCustomFolders,update:r,remove:i,onClose:t,onSaved:()=>a.setIsEditing(!1)});return a.isEditing?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:""}),g.jsx("input",{className:Y1,value:a.form.name||"",onChange:u=>a.updateForm("name",u.target.value),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:vs,children:" (YYYYMMDD)"}),g.jsx("input",{className:Y1,value:a.form.birthDay||"",onChange:u=>a.updateForm("birthDay",u.target.value.replace(/\D/g,"").slice(0,8)),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"calendarType",checked:a.form.calendarType==="solar",onChange:()=>a.updateForm("calendarType","solar"),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"calendarType",checked:a.form.calendarType==="lunar",onChange:()=>a.updateForm("calendarType","lunar"),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),o.lunarPreview&&g.jsx("span",{className:phe,children:o.lunarPreview})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:"  (HHMM)"}),g.jsx("input",{className:`${Y1} disabled:opacity-50`,value:a.unknownTime?"":a.form.birthTime||"",onChange:u=>a.updateForm("birthTime",u.target.value.replace(/\D/g,"").slice(0,4)),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:a.unknownTime}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:jR,checked:a.unknownTime,onChange:u=>a.setUnknownTime(u.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:vs,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(u=>{const d=`editor_ming_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"mingSikType",checked:(a.form.mingSikType??"")===u,onChange:()=>a.updateForm("mingSikType",u),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(u=>{const d=`editor_gender_${u}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:pb,name:"gender",value:u,checked:a.form.gender===u,onChange:h=>a.updateForm("gender",h.target.value),id:d}),g.jsx("label",{htmlFor:d,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:u})]},u)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:" "}),g.jsx(f4,{onSelect:u=>a.updateForm("birthPlace",u),value:a.unknownPlace?"":a.form.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:jR,checked:a.unknownPlace,onChange:u=>a.setUnknownPlace(u.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:""}),g.jsx(L6,{value:a.form.relationship||"",onChange:u=>a.updateForm("relationship",u)})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:""}),g.jsx("select",{className:hhe,value:a.form.folder??kn,onChange:u=>{const d=u.target.value;d===kn?a.updateForm("folder",void 0):a.updateForm("folder",d)},children:o.folderOptions.map(u=>g.jsx("option",{value:u===kn?kn:u,children:u},u))})]}),g.jsxs("div",{children:[g.jsx("label",{className:vs,children:""}),g.jsx("textarea",{className:mhe,value:a.form.memo||"",onChange:u=>a.updateForm("memo",u.target.value),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:TR,onClick:()=>{a.resetForm(),a.setIsEditing(!1)},children:""}),g.jsx("button",{className:yhe,onClick:l.save,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:ghe,onClick:()=>a.setIsEditing(!0),children:""}),g.jsx("button",{className:bhe,onClick:l.removeThis,children:""}),t&&g.jsx("button",{className:TR,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??kn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function xhe({children:e}){const t=Fr(),[n,r]=S.useState(!1),i=[{label:" ",href:"/admin/dashboard"},{label:"  ",href:"/admin/user"},{label:"  ",href:"/admin/logs"}];return g.jsxs("div",{className:"flex min-h-screen bg-neutral-950 text-white",children:[g.jsxs("aside",{className:`
          fixed top-0 left-0 h-full bg-neutral-900 border-r border-neutral-800 
          transition-all z-50

          desk:w-60 desk:translate-x-0
          ${n?"w-60 translate-x-0":"-translate-x-full"}
        `,children:[g.jsxs("div",{className:"p-4 font-bold text-lg flex items-center justify-between",children:[g.jsx("span",{className:"desk:block hidden",children:""}),g.jsx("button",{className:"desk:hidden text-neutral-400 hover:text-white",onClick:()=>r(!1),children:""})]}),g.jsx("nav",{className:"mt-4 flex flex-col gap-1 px-2",children:i.map(a=>{const o=t.pathname.startsWith(a.href);return g.jsx("a",{href:a.href,className:`
                  block px-3 py-2 rounded-md text-sm
                  ${o?"bg-neutral-800 text-yellow-400":"text-neutral-300 hover:bg-neutral-800"}
                `,children:a.label},a.href)})})]}),g.jsxs("main",{className:"flex-1 flex flex-col desk:ml-60",children:[g.jsxs("header",{className:"h-14 border-b border-neutral-800 bg-neutral-900 flex items-center px-4 justify-between",children:[g.jsx("button",{className:"desk:hidden text-neutral-300",onClick:()=>r(!0),children:""}),g.jsx("div",{className:"font-semibold",children:" "}),g.jsx("button",{className:"text-sm text-neutral-400 hover:text-white cursor-pointer",onClick:()=>window.location.href="/",children:" "})]}),g.jsx("div",{className:"flex-1",children:e})]})]})}function whe(){const[e,t]=S.useState(null),[n,r]=S.useState(!0);return S.useEffect(()=>{(async()=>{const{data:a}=await De.auth.getUser(),o=a.user?.id;if(!o){t(null),r(!1);return}const{data:l}=await De.from("admin_roles").select("role").eq("user_id",o).maybeSingle();t(l?.role??null),r(!1)})()},[]),{role:e,loading:n}}function _he({allow:e,children:t}){const{role:n,loading:r}=whe();return r?g.jsx("div",{className:"text-white p-6",children:"Checking permission..."}):!n||!e.includes(n)?g.jsx("div",{className:"text-red-400 p-6",children:" ."}):g.jsx(g.Fragment,{children:t})}function d9(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=d9(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function dn(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=d9(e))&&(r&&(r+=" "),r+=t);return r}var She=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yT(e){if(typeof e!="string")return!1;var t=She;return t.includes(e)}var khe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ehe=new Set(khe);function f9(e){return typeof e!="string"?!1:Ehe.has(e)}function h9(e){return typeof e=="string"&&e.startsWith("data-")}function io(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(f9(n)||h9(n))&&(t[n]=e[n]);return t}function px(e){if(e==null)return null;if(S.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return io(t)}return typeof e=="object"&&!Array.isArray(e)?io(e):null}function ka(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(f9(n)||h9(n)||yT(n))&&(t[n]=e[n]);return t}function jhe(e){return e==null?null:S.isValidElement(e)?ka(e.props):typeof e=="object"&&!Array.isArray(e)?ka(e):null}var The=["children","width","height","viewBox","className","style","title","desc"];function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F2.apply(null,arguments)}function Ahe(e,t){if(e==null)return{};var n,r,i=Nhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var m9=S.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:l,title:u,desc:d}=e,h=Ahe(e,The),m=a||{width:r,height:i,x:0,y:0},b=dn("recharts-surface",o);return S.createElement("svg",F2({},ka(h),{className:b,width:r,height:i,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),S.createElement("title",null,u),S.createElement("desc",null,d),n)}),Ohe=["children","className"];function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(null,arguments)}function Che(e,t){if(e==null)return{};var n,r,i=Mhe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zo=S.forwardRef((e,t)=>{var{children:n,className:r}=e,i=Che(e,Ohe),a=dn("recharts-layer",r);return S.createElement("g",H2({className:a},ka(i),{ref:t}),n)}),Dhe=S.createContext(null);function Dn(e){return function(){return e}}const G2=Math.PI,Y2=2*G2,iu=1e-6,Phe=Y2-iu;function p9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Rhe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return p9;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Lhe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?p9:Rhe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-t,d=i-n,h=o-t,m=l-n,b=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>iu)if(!(Math.abs(m*u-d*h)>iu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=r-o,k=i-l,w=u*u+d*d,_=y*y+k*k,T=Math.sqrt(w),O=Math.sqrt(b),j=a*Math.tan((G2-Math.acos((w+b-_)/(2*T*O)))/2),C=j/O,M=j/T;Math.abs(C-1)>iu&&this._append`L${t+C*h},${n+C*m}`,this._append`A${a},${a},0,0,${+(m*y>h*k)},${this._x1=t+M*u},${this._y1=n+M*d}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=t+l,h=n+u,m=1^o,b=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>iu||Math.abs(this._y1-h)>iu)&&this._append`L${d},${h}`,r&&(b<0&&(b=b%Y2+Y2),b>Phe?this._append`A${r},${r},0,1,${m},${t-l},${n-u}A${r},${r},0,1,${m},${this._x1=d},${this._y1=h}`:b>iu&&this._append`A${r},${r},0,${+(b>=G2)},${m},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function g9(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Lhe(t)}function vT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function b9(e){this._context=e}b9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gx(e){return new b9(e)}function y9(e){return e[0]}function v9(e){return e[1]}function x9(e,t){var n=Dn(!0),r=null,i=gx,a=null,o=g9(l);e=typeof e=="function"?e:e===void 0?y9:Dn(e),t=typeof t=="function"?t:t===void 0?v9:Dn(t);function l(u){var d,h=(u=vT(u)).length,m,b=!1,y;for(r==null&&(a=i(y=o())),d=0;d<=h;++d)!(d<h&&n(m=u[d],d,u))===b&&((b=!b)?a.lineStart():a.lineEnd()),b&&a.point(+e(m,d,u),+t(m,d,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Dn(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Dn(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function gb(e,t,n){var r=null,i=Dn(!0),a=null,o=gx,l=null,u=g9(d);e=typeof e=="function"?e:e===void 0?y9:Dn(+e),t=typeof t=="function"?t:Dn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?v9:Dn(+n);function d(m){var b,y,k,w=(m=vT(m)).length,_,T=!1,O,j=new Array(w),C=new Array(w);for(a==null&&(l=o(O=u())),b=0;b<=w;++b){if(!(b<w&&i(_=m[b],b,m))===T)if(T=!T)y=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),k=b-1;k>=y;--k)l.point(j[k],C[k]);l.lineEnd(),l.areaEnd()}T&&(j[b]=+e(_,b,m),C[b]=+t(_,b,m),l.point(r?+r(_,b,m):j[b],n?+n(_,b,m):C[b]))}if(O)return l=null,O+""||null}function h(){return x9().defined(i).curve(o).context(a)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Dn(+m),r=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Dn(+m),d):e},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Dn(+m),d):r},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Dn(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Dn(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Dn(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Dn(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,a!=null&&(l=o(a)),d):o},d.context=function(m){return arguments.length?(m==null?a=l=null:l=o(a=m),d):a},d}class w9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Ihe(e){return new w9(e,!0)}function $he(e){return new w9(e,!1)}function Yy(){}function qy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function _9(e){this._context=e}_9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bhe(e){return new _9(e)}function S9(e){this._context=e}S9.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zhe(e){return new S9(e)}function k9(e){this._context=e}k9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:qy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uhe(e){return new k9(e)}function E9(e){this._context=e}E9.prototype={areaStart:Yy,areaEnd:Yy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Fhe(e){return new E9(e)}function AR(e){return e<0?-1:1}function NR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(AR(a)+AR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function OR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function q1(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Ky(e){this._context=e}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q1(this,this._t0,OR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q1(this,OR(this,n=NR(this,e,t)),n);break;default:q1(this,this._t0,n=NR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function j9(e){this._context=new T9(e)}(j9.prototype=Object.create(Ky.prototype)).point=function(e,t){Ky.prototype.point.call(this,t,e)};function T9(e){this._context=e}T9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Hhe(e){return new Ky(e)}function Ghe(e){return new j9(e)}function A9(e){this._context=e}A9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=CR(e),i=CR(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CR(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Yhe(e){return new A9(e)}function bx(e,t){this._context=e,this._t=t}bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function qhe(e){return new bx(e,.5)}function Khe(e){return new bx(e,0)}function Whe(e){return new bx(e,1)}function ff(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function q2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Vhe(e,t){return e[t]}function Zhe(e){const t=[];return t.key=e,t}function Xhe(){var e=Dn([]),t=q2,n=ff,r=Vhe;function i(a){var o=Array.from(e.apply(this,arguments),Zhe),l,u=o.length,d=-1,h;for(const m of a)for(l=0,++d;l<u;++l)(o[l][d]=[0,+r(m,o[l].key,d,a)]).data=m;for(l=0,h=vT(t(o));l<u;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Dn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Dn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?q2:typeof a=="function"?a:Dn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??ff,i):n},i}function Jhe(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}ff(e,t)}}function Qhe(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}ff(e,t)}}function eme(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,u=0,d=0;l<o;++l){for(var h=e[t[l]],m=h[r][1]||0,b=h[r-1][1]||0,y=(m-b)/2,k=0;k<l;++k){var w=e[t[k]],_=w[r][1]||0,T=w[r-1][1]||0;y+=_-T}u+=m,d+=y*m}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,ff(e,t)}}var K1={},W1={},MR;function tme(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(W1)),W1}var V1={},DR;function N9(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(V1)),V1}var Z1={},PR;function xT(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Z1)),Z1}var X1={},J1={},RR;function nme(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(J1)),J1}var LR;function wT(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nme(),n=xT();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const m=i[l];d?m==="\\"&&l+1<o?(l++,u+=i[l]):m===d?d="":u+=m:h?m==='"'||m==="'"?d=m:m==="]"?(h=!1,a.push(u),u=""):u+=m:m==="["?(h=!0,u&&(a.push(u),u="")):m==="."?u&&(a.push(u),u=""):u+=m,l++}return u&&a.push(u),a}e.toPath=r})(X1)),X1}var IR;function _T(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tme(),n=N9(),r=xT(),i=wT();function a(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?n.isDeepKey(u)?a(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function o(l,u,d){if(u.length===0)return d;let h=l;for(let m=0;m<u.length;m++){if(h==null||t.isUnsafeProperty(u[m]))return d;h=h[u[m]]}return h===void 0?d:h}e.get=a})(K1)),K1}var Q1,$R;function rme(){return $R||($R=1,Q1=_T().get),Q1}var ime=rme();const yx=_i(ime);var va=e=>e===0?0:e>0?1:-1,ao=e=>typeof e=="number"&&e!=+e,Ps=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,et=e=>(typeof e=="number"||e instanceof Number)&&!ao(e),Uo=e=>et(e)||typeof e=="string",ame=0,ap=e=>{var t=++ame;return"".concat(e||"").concat(t)},Jl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(t)&&typeof t!="string")return r;var a;if(Ps(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return ao(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},O9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Do(e,t,n){return et(e)&&et(t)?e+n*(t-e):t}function C9(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):yx(r,t))===n)}var Cr=e=>e===null||typeof e>"u",ST=e=>Cr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ome(e){return e!=null}function $p(){}var M9=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,kT=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{yT(i)&&(r[i]=(a=>n[i](n,a)))}),r},sme=(e,t,n)=>r=>(e(t,n,r),null),lme=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];yT(i)&&typeof a=="function"&&(r||(r={}),r[i]=sme(a,t,n))}),r};function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(r){ume(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ume(e,t,n){return(t=dme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dme(e){var t=fme(e,"string");return typeof t=="symbol"?t:t+""}function fme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zi(e,t){var n=cme({},e),r=t,i=Object.keys(t),a=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return a}var eS={},tS={},zR;function hme(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],l=r(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})(tS)),tS}var nS={},UR;function D9(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(nS)),nS}var rS={},iS={},aS={},FR;function mme(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(aS)),aS}var HR;function ET(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mme();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(iS)),iS}var oS={},GR;function pme(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(oS)),oS}var YR;function gme(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ET(),n=pme();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(rS)),rS}var sS={},lS={},qR;function bme(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_T();function n(r){return function(i){return t.get(i,r)}}e.property=n})(lS)),lS}var cS={},uS={},dS={},fS={},KR;function P9(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(fS)),fS}var hS={},WR;function R9(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(hS)),hS}var mS={},VR;function L9(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(mS)),mS}var ZR;function yme(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P9(),n=R9(),r=L9();function i(h,m,b){return typeof b!="function"?i(h,m,()=>{}):a(h,m,function y(k,w,_,T,O,j){const C=b(k,w,_,T,O,j);return C!==void 0?!!C:a(k,w,y,j)},new Map)}function a(h,m,b,y){if(m===h)return!0;switch(typeof m){case"object":return o(h,m,b,y);case"function":return Object.keys(m).length>0?a(h,{...m},b,y):r.eq(h,m);default:return t.isObject(h)?typeof m=="string"?m==="":!0:r.eq(h,m)}}function o(h,m,b,y){if(m==null)return!0;if(Array.isArray(m))return u(h,m,b,y);if(m instanceof Map)return l(h,m,b,y);if(m instanceof Set)return d(h,m,b,y);const k=Object.keys(m);if(h==null)return k.length===0;if(k.length===0)return!0;if(y?.has(m))return y.get(m)===h;y?.set(m,h);try{for(let w=0;w<k.length;w++){const _=k[w];if(!n.isPrimitive(h)&&!(_ in h)||m[_]===void 0&&h[_]!==void 0||m[_]===null&&h[_]!==null||!b(h[_],m[_],_,h,m,y))return!1}return!0}finally{y?.delete(m)}}function l(h,m,b,y){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[k,w]of m.entries()){const _=h.get(k);if(b(_,w,k,h,m,y)===!1)return!1}return!0}function u(h,m,b,y){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const k=new Set;for(let w=0;w<m.length;w++){const _=m[w];let T=!1;for(let O=0;O<h.length;O++){if(k.has(O))continue;const j=h[O];let C=!1;if(b(j,_,w,h,m,y)&&(C=!0),C){k.add(O),T=!0;break}}if(!T)return!1}return!0}function d(h,m,b,y){return m.size===0?!0:h instanceof Set?u([...h],[...m],b,y):!1}e.isMatchWith=i,e.isSetMatch=d})(dS)),dS}var XR;function I9(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yme();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(uS)),uS}var pS={},gS={},bS={},JR;function vme(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(bS)),bS}var yS={},QR;function $9(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(yS)),yS}var vS={},e3;function B9(){return e3||(e3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",b="[object ArrayBuffer]",y="[object Object]",k="[object Error]",w="[object DataView]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",C="[object BigUint64Array]",M="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",U="[object BigInt64Array]",W="[object Float32Array]",q="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=C,e.booleanTag=i,e.dataViewTag=w,e.dateTag=l,e.errorTag=k,e.float32ArrayTag=W,e.float64ArrayTag=q,e.functionTag=m,e.int16ArrayTag=P,e.int32ArrayTag=I,e.int8ArrayTag=M,e.mapTag=u,e.numberTag=r,e.objectTag=y,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=O,e.uint32ArrayTag=j,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=T})(vS)),vS}var xS={},t3;function xme(){return t3||(t3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(xS)),xS}var n3;function z9(){return n3||(n3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vme(),n=$9(),r=B9(),i=R9(),a=xme();function o(h,m){return l(h,void 0,h,new Map,m)}function l(h,m,b,y=new Map,k=void 0){const w=k?.(h,m,b,y);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const _=new Array(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return Object.hasOwn(h,"index")&&(_.index=h.index),Object.hasOwn(h,"input")&&(_.input=h.input),_}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const _=new RegExp(h.source,h.flags);return _.lastIndex=h.lastIndex,_}if(h instanceof Map){const _=new Map;y.set(h,_);for(const[T,O]of h)_.set(T,l(O,T,b,y,k));return _}if(h instanceof Set){const _=new Set;y.set(h,_);for(const T of h)_.add(l(T,void 0,b,y,k));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const _=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,_);for(let T=0;T<h.length;T++)_[T]=l(h[T],T,b,y,k);return _}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const _=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,_),u(_,h,b,y,k),_}if(typeof File<"u"&&h instanceof File){const _=new File([h],h.name,{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(typeof Blob<"u"&&h instanceof Blob){const _=new Blob([h],{type:h.type});return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Error){const _=new h.constructor;return y.set(h,_),_.message=h.message,_.name=h.name,_.stack=h.stack,_.cause=h.cause,u(_,h,b,y,k),_}if(h instanceof Boolean){const _=new Boolean(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof Number){const _=new Number(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(h instanceof String){const _=new String(h.valueOf());return y.set(h,_),u(_,h,b,y,k),_}if(typeof h=="object"&&d(h)){const _=Object.create(Object.getPrototypeOf(h));return y.set(h,_),u(_,h,b,y,k),_}return h}function u(h,m,b=h,y,k){const w=[...Object.keys(m),...t.getSymbols(m)];for(let _=0;_<w.length;_++){const T=w[_],O=Object.getOwnPropertyDescriptor(h,T);(O==null||O.writable)&&(h[T]=l(m[T],T,b,y,k))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=u})(gS)),gS}var r3;function wme(){return r3||(r3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z9();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(pS)),pS}var i3;function _me(){return i3||(i3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9(),n=wme();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(cS)),cS}var wS={},_S={},SS={},a3;function Sme(){return a3||(a3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z9(),n=B9();function r(i,a){return t.cloneDeepWith(i,(o,l,u,d)=>{const h=a?.(o,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(SS)),SS}var o3;function kme(){return o3||(o3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sme();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(_S)),_S}var kS={},ES={},s3;function U9(){return s3||(s3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(ES)),ES}var jS={},l3;function Eme(){return l3||(l3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$9();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(jS)),jS}var c3;function jme(){return c3||(c3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N9(),n=U9(),r=Eme(),i=wT();function a(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let h=0;h<u.length;h++){const m=u[h];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}e.has=a})(kS)),kS}var u3;function Tme(){return u3||(u3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9(),n=xT(),r=kme(),i=_T(),a=jme();function o(l,u){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?a.has(d,l):u===void 0?h===void 0:t.isMatch(h,u)}}e.matchesProperty=o})(wS)),wS}var d3;function Ame(){return d3||(d3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D9(),n=bme(),r=_me(),i=Tme();function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(sS)),sS}var f3;function Nme(){return f3||(f3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hme(),n=D9(),r=gme(),i=Ame();function a(o,l=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(l)):[]}e.uniqBy=a})(eS)),eS}var TS,h3;function Ome(){return h3||(h3=1,TS=Nme().uniqBy),TS}var Cme=Ome();const m3=_i(Cme);function Mme(e,t,n){return t===!0?m3(e,n):typeof t=="function"?m3(e,t):e}var AS={exports:{}},NS={},OS={exports:{}},CS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function Dme(){if(p3)return CS;p3=1;var e=vf();function t(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(m,b){var y=b(),k=r({inst:{value:y,getSnapshot:b}}),w=k[0].inst,_=k[1];return a(function(){w.value=y,w.getSnapshot=b,u(w)&&_({inst:w})},[m,y,b]),i(function(){return u(w)&&_({inst:w}),m(function(){u(w)&&_({inst:w})})},[m]),o(y),y}function u(m){var b=m.getSnapshot;m=m.value;try{var y=b();return!n(m,y)}catch{return!0}}function d(m,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return CS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,CS}var g3;function Pme(){return g3||(g3=1,OS.exports=Dme()),OS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3;function Rme(){if(b3)return NS;b3=1;var e=vf(),t=Pme();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return NS.useSyncExternalStoreWithSelector=function(d,h,m,b,y){var k=a(null);if(k.current===null){var w={hasValue:!1,value:null};k.current=w}else w=k.current;k=l(function(){function T(P){if(!O){if(O=!0,j=P,P=b(P),y!==void 0&&w.hasValue){var I=w.value;if(y(I,P))return C=I}return C=P}if(I=C,r(j,P))return I;var U=b(P);return y!==void 0&&y(I,U)?(j=P,I):(j=P,C=U)}var O=!1,j,C,M=m===void 0?null:m;return[function(){return T(h())},M===null?void 0:function(){return T(M())}]},[h,m,b,y]);var _=i(d,k[0],k[1]);return o(function(){w.hasValue=!0,w.value=_},[_]),u(_),_},NS}var y3;function Lme(){return y3||(y3=1,AS.exports=Rme()),AS.exports}var Ime=Lme(),jT=S.createContext(null),$me=e=>e,vr=()=>{var e=S.useContext(jT);return e?e.store.dispatch:$me},Jb=()=>{},Bme=()=>Jb,zme=(e,t)=>e===t;function it(e){var t=S.useContext(jT);return Ime.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Bme,t?t.store.getState:Jb,t?t.store.getState:Jb,t?e:Jb,zme)}function Ume(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Fme(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Hme(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var v3=e=>Array.isArray(e)?e:[e];function Gme(e){const t=Array.isArray(e[0])?e[0]:e;return Hme(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Yme(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var qme=class{constructor(e){this.value=e}deref(){return this.value}},Kme=typeof WeakRef<"u"?WeakRef:qme,Wme=0,x3=1;function bb(){return{s:Wme,v:void 0,o:null,p:null}}function F9(e,t={}){let n=bb();const{resultEqualityCheck:r}=t;let i,a=0;function o(){let l=n;const{length:u}=arguments;for(let m=0,b=u;m<b;m++){const y=arguments[m];if(typeof y=="function"||typeof y=="object"&&y!==null){let k=l.o;k===null&&(l.o=k=new WeakMap);const w=k.get(y);w===void 0?(l=bb(),k.set(y,l)):l=w}else{let k=l.p;k===null&&(l.p=k=new Map);const w=k.get(y);w===void 0?(l=bb(),k.set(y,l)):l=w}}const d=l;let h;if(l.s===x3)h=l.v;else if(h=e.apply(null,arguments),a++,r){const m=i?.deref?.()??i;m!=null&&r(m,h)&&(h=m,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Kme(h):h}return d.s=x3,d.v=h,h}return o.clearCache=()=>{n=bb(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Vme(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),Ume(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...u},{memoize:m,memoizeOptions:b=[],argsMemoize:y=F9,argsMemoizeOptions:k=[]}=h,w=v3(b),_=v3(k),T=Gme(i),O=m(function(){return a++,d.apply(null,arguments)},...w),j=y(function(){o++;const M=Yme(T,arguments);return l=O.apply(null,M),l},..._);return Object.assign(j,{resultFunc:d,memoizedResultFunc:O,dependencies:T,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var xe=Vme(F9),Zme=Object.assign((e,t=xe)=>{Fme(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>Zme}),MS={},DS={},PS={},w3;function Xme(){return w3||(w3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),l=t(i);if(o===l&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=n})(PS)),PS}var RS={},LS={},_3;function H9(){return _3||(_3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(LS)),LS}var S3;function Jme(){return S3||(S3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H9(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(RS)),RS}var k3;function Qme(){return k3||(k3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xme(),n=Jme(),r=wT();function i(a,o,l,u){if(a==null)return[];l=u?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,k)=>{let w=y;for(let _=0;_<k.length&&w!=null;++_)w=w[k[_]];return w},h=(y,k)=>k==null||y==null?k:typeof y=="object"&&"key"in y?Object.hasOwn(k,y.key)?k[y.key]:d(k,y.path):typeof y=="function"?y(k):Array.isArray(y)?d(k,y):typeof k=="object"?k[y]:k,m=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:m.map(k=>h(k,y))})).slice().sort((y,k)=>{for(let w=0;w<m.length;w++){const _=t.compareValues(y.criteria[w],k.criteria[w],l[w]);if(_!==0)return _}return 0}).map(y=>y.original)}e.orderBy=i})(DS)),DS}var IS={},E3;function epe(){return E3||(E3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<a?o(h,u+1):i.push(h)}};return o(n,0),i}e.flatten=t})(IS)),IS}var $S={},j3;function G9(){return j3||(j3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9(),n=ET(),r=P9(),i=L9();function a(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&t.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],o):!1}e.isIterateeCall=a})($S)),$S}var T3;function tpe(){return T3||(T3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qme(),n=epe(),r=G9();function i(a,...o){const l=o.length;return l>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(MS)),MS}var BS,A3;function npe(){return A3||(A3=1,BS=tpe().sortBy),BS}var rpe=npe();const vx=_i(rpe);var Y9=e=>e.legend.settings,ipe=e=>e.legend.size,ape=e=>e.legend.payload;xe([ape,Y9],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?vx(r,n):r});var yb=1;function ope(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>yb||Math.abs(o.left-t.left)>yb||Math.abs(o.top-t.top)>yb||Math.abs(o.width-t.width)>yb)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var q9=Symbol.for("immer-nothing"),N3=Symbol.for("immer-draftable"),Qr=Symbol.for("immer-state");function Wa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Hi=Object,hf=Hi.getPrototypeOf,Wy="constructor",xx="prototype",K2="configurable",Vy="enumerable",Qb="writable",op="value",Rs=e=>!!e&&!!e[Qr];function oo(e){return e?K9(e)||wx(e)||!!e[N3]||!!e[Wy]?.[N3]||_x(e)||Sx(e):!1}var spe=Hi[xx][Wy].toString(),O3=new WeakMap;function K9(e){if(!e||!TT(e))return!1;const t=hf(e);if(t===null||t===Hi[xx])return!0;const n=Hi.hasOwnProperty.call(t,Wy)&&t[Wy];if(n===Object)return!0;if(!Bd(n))return!1;let r=O3.get(n);return r===void 0&&(r=Function.toString.call(n),O3.set(n,r)),r===spe}function Bp(e,t,n=!0){zp(e)===0?(n?Reflect.ownKeys(e):Hi.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function zp(e){const t=e[Qr];return t?t.type_:wx(e)?1:_x(e)?2:Sx(e)?3:0}var C3=(e,t,n=zp(e))=>n===2?e.has(t):Hi[xx].hasOwnProperty.call(e,t),W2=(e,t,n=zp(e))=>n===2?e.get(t):e[t],Zy=(e,t,n,r=zp(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function lpe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wx=Array.isArray,_x=e=>e instanceof Map,Sx=e=>e instanceof Set,TT=e=>typeof e=="object",Bd=e=>typeof e=="function",zS=e=>typeof e=="boolean",ws=e=>e.copy_||e.base_,AT=e=>e.modified_?e.copy_:e.base_;function V2(e,t){if(_x(e))return new Map(e);if(Sx(e))return new Set(e);if(wx(e))return Array[xx].slice.call(e);const n=K9(e);if(t===!0||t==="class_only"&&!n){const r=Hi.getOwnPropertyDescriptors(e);delete r[Qr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l[Qb]===!1&&(l[Qb]=!0,l[K2]=!0),(l.get||l.set)&&(r[o]={[K2]:!0,[Qb]:!0,[Vy]:l[Vy],[op]:e[o]})}return Hi.create(hf(e),r)}else{const r=hf(e);if(r!==null&&n)return{...e};const i=Hi.create(r);return Hi.assign(i,e)}}function NT(e,t=!1){return kx(e)||Rs(e)||!oo(e)||(zp(e)>1&&Hi.defineProperties(e,{set:vb,add:vb,clear:vb,delete:vb}),Hi.freeze(e),t&&Bp(e,(n,r)=>{NT(r,!0)},!1)),e}function cpe(){Wa(2)}var vb={[op]:cpe};function kx(e){return e===null||!TT(e)?!0:Hi.isFrozen(e)}var Xy="MapSet",Z2="Patches",W9={};function mf(e){const t=W9[e];return t||Wa(0,e),t}var upe=e=>!!W9[e],sp,V9=()=>sp,dpe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:upe(Xy)?mf(Xy):void 0});function M3(e,t){t&&(e.patchPlugin_=mf(Z2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X2(e){J2(e),e.drafts_.forEach(fpe),e.drafts_=null}function J2(e){e===sp&&(sp=e.parent_)}var D3=e=>sp=dpe(sp,e);function fpe(e){const t=e[Qr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function P3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Qr].modified_&&(X2(t),Wa(4)),oo(e)&&(e=R3(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[Qr].base_,e,t)}else e=R3(t,n);return hpe(t,e,!0),X2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==q9?e:void 0}function R3(e,t){if(kx(t))return t;const n=t[Qr];if(!n)return OT(t,e.handledSet_,e);if(!Ex(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);J9(n,e)}return n.copy_}function hpe(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&NT(t,n)}function Z9(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ex=(e,t)=>e.scope_===t,mpe=[];function X9(e,t,n,r){const i=ws(e),a=e.type_;if(r!==void 0&&W2(i,r,a)===t){Zy(i,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Bp(i,(u,d)=>{if(Rs(d)){const h=l.get(d)||[];h.push(u),l.set(d,h)}})}const o=e.draftLocations_.get(t)??mpe;for(const l of o)Zy(i,l,n,a)}function ppe(e,t,n){e.callbacks_.push(function(i){const a=t;if(!a||!Ex(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const o=AT(a);X9(e,a.draft_??a,o,n),J9(a,i)})}function J9(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}Z9(e)}}function gpe(e,t,n){const{scope_:r}=e;if(Rs(n)){const i=n[Qr];Ex(i,r)&&i.callbacks_.push(function(){ey(e);const o=AT(i);X9(e,n,o,t)})}else oo(n)&&e.callbacks_.push(function(){const a=ws(e);W2(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&OT(W2(e.copy_,t,e.type_),r.handledSet_,r)})}function OT(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Rs(e)||t.has(e)||!oo(e)||kx(e)||(t.add(e),Bp(e,(r,i)=>{if(Rs(i)){const a=i[Qr];if(Ex(a,n)){const o=AT(a);Zy(e,r,o,e.type_),Z9(a)}}else oo(i)&&OT(i,t,n)})),e}function bpe(e,t){const n=wx(e),r={type_:n?1:0,scope_:t?t.scope_:V9(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=CT;n&&(i=[r],a=lp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,[l,r]}var CT={get(e,t){if(t===Qr)return e;const n=ws(e);if(!C3(n,t,e.type_))return ype(e,n,t);const r=n[t];if(e.finalized_||!oo(r))return r;if(r===US(e.base_,t)){ey(e);const i=e.type_===1?+t:t,a=eE(e.scope_,r,e,i);return e.copy_[i]=a}return r},has(e,t){return t in ws(e)},ownKeys(e){return Reflect.ownKeys(ws(e))},set(e,t,n){const r=Q9(ws(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=US(ws(e),t),a=i?.[Qr];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(lpe(n,i)&&(n!==void 0||C3(e.base_,t,e.type_)))return!0;ey(e),Q2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),gpe(e,t,n)),!0},deleteProperty(e,t){return ey(e),US(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Q2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ws(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Qb]:!0,[K2]:e.type_!==1||t!=="length",[Vy]:r[Vy],[op]:n[t]}},defineProperty(){Wa(11)},getPrototypeOf(e){return hf(e.base_)},setPrototypeOf(){Wa(12)}},lp={};Bp(CT,(e,t)=>{lp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});lp.deleteProperty=function(e,t){return lp.set.call(this,e,t,void 0)};lp.set=function(e,t,n){return CT.set.call(this,e[0],t,n,e[0])};function US(e,t){const n=e[Qr];return(n?ws(n):e)[t]}function ype(e,t,n){const r=Q9(t,n);return r?op in r?r[op]:r.get?.call(e.draft_):void 0}function Q9(e,t){if(!(t in e))return;let n=hf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=hf(n)}}function Q2(e){e.modified_||(e.modified_=!0,e.parent_&&Q2(e.parent_))}function ey(e){e.copy_||(e.assigned_=new Map,e.copy_=V2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vpe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Bd(n)&&!Bd(r)){const o=r;r=n;const l=this;return function(d=o,...h){return l.produce(d,m=>r.call(this,m,...h))}}Bd(r)||Wa(6),i!==void 0&&!Bd(i)&&Wa(7);let a;if(oo(n)){const o=D3(this),l=eE(o,n,void 0);let u=!0;try{a=r(l),u=!1}finally{u?X2(o):J2(o)}return M3(o,i),P3(a,o)}else if(!n||!TT(n)){if(a=r(n),a===void 0&&(a=n),a===q9&&(a=void 0),this.autoFreeze_&&NT(a,!0),i){const o=[],l=[];mf(Z2).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:l}),i(o,l)}return a}else Wa(1,n)},this.produceWithPatches=(n,r)=>{if(Bd(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let i,a;return[this.produce(n,r,(l,u)=>{i=l,a=u}),i,a]},zS(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),zS(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),zS(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){oo(t)||Wa(8),Rs(t)&&(t=Ja(t));const n=D3(this),r=eE(n,t,void 0);return r[Qr].isManual_=!0,J2(n),r}finishDraft(t,n){const r=t&&t[Qr];(!r||!r.isManual_)&&Wa(9);const{scope_:i}=r;return M3(i,n),P3(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=mf(Z2).applyPatches_;return Rs(t)?i(t,n):this.produce(t,a=>i(a,n))}};function eE(e,t,n,r){const[i,a]=_x(t)?mf(Xy).proxyMap_(t,n):Sx(t)?mf(Xy).proxySet_(t,n):bpe(t,n);return(n?.scope_??V9()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?ppe(n,a,r):a.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:d}=u;a.modified_&&d&&d.generatePatches_(a,[],u)}),i}function Ja(e){return Rs(e)||Wa(10,e),e8(e)}function e8(e){if(!oo(e)||kx(e))return e;const t=e[Qr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=V2(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=V2(e,!0);return Bp(n,(i,a)=>{Zy(n,i,e8(a))},r),t&&(t.finalized_=!1),n}var xpe=new vpe,t8=xpe.produce;function n8(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var wpe=n8(),_pe=n8,Spe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hm:Hm.apply(null,arguments)};function Ea(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qi(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>p4(r)&&r.type===e,n}var r8=class jm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jm.prototype)}static get[Symbol.species](){return jm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jm(...t[0].concat(this)):new jm(...t.concat(this))}};function L3(e){return oo(e)?t8(e,()=>{}):e}function xb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function kpe(e){return typeof e=="boolean"}var Epe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new r8;return n&&(kpe(n)?o.push(wpe):o.push(_pe(n.extraArgument))),o},i8="RTK_autoBatch",bn=()=>e=>({payload:e,meta:{[i8]:!0}}),I3=e=>t=>{setTimeout(t,e)},a8=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:I3(10):e.type==="callback"?e.queueNotification:I3(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),b=r.subscribe(m);return l.add(h),()=>{b(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[i8],a=!i,a&&(o||(o=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},jpe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new r8(e);return r&&i.push(a8(typeof r=="object"?r:void 0)),i};function Tpe(e){const t=Epe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(gj(n))l=h4(n);else throw new Error(qi(1));let u;typeof r=="function"?u=r(t):u=t();let d=Hm;i&&(d=Spe({trace:!1,...typeof i=="object"&&i}));const h=m4(...u),m=jpe(h);let b=typeof o=="function"?o(m):m();const y=d(...b);return bj(l,a,y)}function o8(e){const t={},n=[];let r;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(qi(28));if(l in t)throw new Error(qi(29));return t[l]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function Ape(e){return typeof e=="function"}function Npe(e,t){let[n,r,i]=o8(t),a;if(Ape(e))a=()=>L3(e());else{const l=L3(e);a=()=>l}function o(l=a(),u){let d=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,m)=>{if(m)if(Rs(h)){const y=m(h,u);return y===void 0?h:y}else{if(oo(h))return t8(h,b=>m(b,u));{const b=m(h,u);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},l)}return o.getInitialState=a,o}var Ope="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Cpe=(e=21)=>{let t="",n=e;for(;n--;)t+=Ope[Math.random()*64|0];return t},Mpe=Symbol.for("rtk-slice-createasyncthunk");function Dpe(e,t){return`${e}/${t}`}function Ppe({creators:e}={}){const t=e?.asyncThunk?.[Mpe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(qi(11));const o=(typeof r.reducers=="function"?r.reducers(Lpe()):r.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,C){const M=typeof j=="string"?j:j.type;if(!M)throw new Error(qi(12));if(M in u.sliceCaseReducersByType)throw new Error(qi(13));return u.sliceCaseReducersByType[M]=C,d},addMatcher(j,C){return u.sliceMatchers.push({matcher:j,reducer:C}),d},exposeAction(j,C){return u.actionCreators[j]=C,d},exposeCaseReducer(j,C){return u.sliceCaseReducersByName[j]=C,d}};l.forEach(j=>{const C=o[j],M={reducerName:j,type:Dpe(i,j),createNotation:typeof r.reducers=="function"};$pe(C)?zpe(M,C,d,t):Ipe(M,C,d)});function h(){const[j={},C=[],M=void 0]=typeof r.extraReducers=="function"?o8(r.extraReducers):[r.extraReducers],P={...j,...u.sliceCaseReducersByType};return Npe(r.initialState,I=>{for(let U in P)I.addCase(U,P[U]);for(let U of u.sliceMatchers)I.addMatcher(U.matcher,U.reducer);for(let U of C)I.addMatcher(U.matcher,U.reducer);M&&I.addDefaultCase(M)})}const m=j=>j,b=new Map,y=new WeakMap;let k;function w(j,C){return k||(k=h()),k(j,C)}function _(){return k||(k=h()),k.getInitialState()}function T(j,C=!1){function M(I){let U=I[j];return typeof U>"u"&&C&&(U=xb(y,M,_)),U}function P(I=m){const U=xb(b,C,()=>new WeakMap);return xb(U,I,()=>{const W={};for(const[q,H]of Object.entries(r.selectors??{}))W[q]=Rpe(H,I,()=>xb(y,I,_),C);return W})}return{reducerPath:j,getSelectors:P,get selectors(){return P(M)},selectSlice:M}}const O={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...T(a),injectInto(j,{reducerPath:C,...M}={}){const P=C??a;return j.inject({reducerPath:P,reducer:w},M),{...O,...T(P,!0)}}};return O}}function Rpe(e,t,n,r){function i(a,...o){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var Si=Ppe();function Lpe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Ipe({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!Bpe(r))throw new Error(qi(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Ea(e,o):Ea(e))}function $pe(e){return e._reducerDefinitionType==="asyncThunk"}function Bpe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zpe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qi(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:d,options:h}=n,m=i(e,a,h);r.exposeAction(t,m),o&&r.addCase(m.fulfilled,o),l&&r.addCase(m.pending,l),u&&r.addCase(m.rejected,u),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(t,{fulfilled:o||wb,pending:l||wb,rejected:u||wb,settled:d||wb})}function wb(){}var Upe="task",s8="listener",l8="completed",MT="cancelled",Fpe=`task-${MT}`,Hpe=`task-${l8}`,tE=`${s8}-${MT}`,Gpe=`${s8}-${l8}`,jx=class{constructor(e){this.code=e,this.message=`${Upe} ${MT} (reason: ${e})`}name="TaskAbortError";message},DT=(e,t)=>{if(typeof e!="function")throw new TypeError(qi(32))},Jy=()=>{},c8=(e,t=Jy)=>(e.catch(t),e),u8=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vu=e=>{if(e.aborted)throw new jx(e.reason)};function d8(e,t){let n=Jy;return new Promise((r,i)=>{const a=()=>i(new jx(e.reason));if(e.aborted){a();return}n=u8(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Jy})}var Ype=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof jx?"cancelled":"rejected",error:n}}finally{t?.()}},Qy=e=>t=>c8(d8(e,t).then(n=>(vu(e),n))),f8=e=>{const t=Qy(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:ef}=Object,$3={},Tx="listenerMiddleware",qpe=(e,t)=>{const n=r=>u8(e,()=>r.abort(e.reason));return(r,i)=>{DT(r);const a=new AbortController;n(a);const o=Ype(async()=>{vu(e),vu(a.signal);const l=await r({pause:Qy(a.signal),delay:f8(a.signal),signal:a.signal});return vu(a.signal),l},()=>a.abort(Hpe));return i?.autoJoin&&t.push(o.catch(Jy)),{result:Qy(e)(o),cancel(){a.abort(Fpe)}}}},Kpe=(e,t)=>{const n=async(r,i)=>{vu(t);let a=()=>{};const l=[new Promise((u,d)=>{let h=e({predicate:r,effect:(m,b)=>{b.unsubscribe(),u([m,b.getState(),b.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await d8(t,Promise.race(l));return vu(t),u}finally{a()}};return(r,i)=>c8(n(r,i))},h8=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=Ea(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qi(21));return DT(a),{predicate:i,type:t,effect:a}},m8=ef(e=>{const{type:t,predicate:n,effect:r}=h8(e);return{id:Cpe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qi(22))}}},{withTypes:()=>m8}),B3=(e,t)=>{const{type:n,effect:r,predicate:i}=h8(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},nE=e=>{e.pending.forEach(t=>{t.abort(tE)})},Wpe=(e,t)=>()=>{for(const n of t.keys())nE(n);e.clear()},z3=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},p8=ef(Ea(`${Tx}/add`),{withTypes:()=>p8}),Vpe=Ea(`${Tx}/removeAll`),g8=ef(Ea(`${Tx}/remove`),{withTypes:()=>g8}),Zpe=(...e)=>{console.error(`${Tx}/error`,...e)},Up=(e={})=>{const t=new Map,n=new Map,r=y=>{const k=n.get(y)??0;n.set(y,k+1)},i=y=>{const k=n.get(y)??1;k===1?n.delete(y):n.set(y,k-1)},{extra:a,onError:o=Zpe}=e;DT(o);const l=y=>(y.unsubscribe=()=>t.delete(y.id),t.set(y.id,y),k=>{y.unsubscribe(),k?.cancelActive&&nE(y)}),u=y=>{const k=B3(t,y)??m8(y);return l(k)};ef(u,{withTypes:()=>u});const d=y=>{const k=B3(t,y);return k&&(k.unsubscribe(),y.cancelActive&&nE(k)),!!k};ef(d,{withTypes:()=>d});const h=async(y,k,w,_)=>{const T=new AbortController,O=Kpe(u,T.signal),j=[];try{y.pending.add(T),r(y),await Promise.resolve(y.effect(k,ef({},w,{getOriginalState:_,condition:(C,M)=>O(C,M).then(Boolean),take:O,delay:f8(T.signal),pause:Qy(T.signal),extra:a,signal:T.signal,fork:qpe(T.signal,j),unsubscribe:y.unsubscribe,subscribe:()=>{t.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((C,M,P)=>{C!==T&&(C.abort(tE),P.delete(C))})},cancel:()=>{T.abort(tE),y.pending.delete(T)},throwIfCancelled:()=>{vu(T.signal)}})))}catch(C){C instanceof jx||z3(o,C,{raisedBy:"effect"})}finally{await Promise.all(j),T.abort(Gpe),i(y),y.pending.delete(T)}},m=Wpe(t,n);return{middleware:y=>k=>w=>{if(!p4(w))return k(w);if(p8.match(w))return u(w.payload);if(Vpe.match(w)){m();return}if(g8.match(w))return d(w.payload);let _=y.getState();const T=()=>{if(_===$3)throw new Error(qi(23));return _};let O;try{if(O=k(w),t.size>0){const j=y.getState(),C=Array.from(t.values());for(const M of C){let P=!1;try{P=M.predicate(w,j,_)}catch(I){P=!1,z3(o,I,{raisedBy:"predicate"})}P&&h(M,w,y,T)}}}finally{_=$3}return O},startListening:u,stopListening:d,clearListeners:m}};function qi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Xpe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},b8=Si({name:"chartLayout",initialState:Xpe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Jpe,setLayout:Qpe,setChartSize:e0e,setScale:t0e}=b8.actions,n0e=b8.reducer;function y8(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function U3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(n),!0).forEach(function(r){r0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r0e(e,t,n){return(t=i0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i0e(e){var t=a0e(e,"string");return typeof t=="symbol"?t:t+""}function a0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(e,t,n){return Cr(e)||Cr(t)?n:Uo(t)?yx(e,t,n):typeof t=="function"?t(e):n}var o0e=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&et(e[a]))return Gd(Gd({},e),{},{[a]:e[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&et(e[o]))return Gd(Gd({},e),{},{[o]:e[o]+(i||0)})}return e},Us=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",v8=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var i,a,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||o.push(t),a||o.push(n),o},x8=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:m,niceTicks:b,axisType:y}=e;if(!o)return null;var k=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/k:0;if(w=y==="angleAxis"&&a&&a.length>=2?va(a[0]-a[1])*2*w:w,m||b){var _=(m||b||[]).map((T,O)=>{var j=r?r.indexOf(T):T;return{coordinate:o(j)+w,value:T,offset:w,index:O}});return _.filter(T=>!ao(T.coordinate))}return u&&d?d.map((T,O)=>({coordinate:o(T)+w,value:T,index:O,offset:w})):o.ticks&&h!=null?o.ticks(h).map((T,O)=>({coordinate:o(T)+w,value:T,offset:w,index:O})):o.domain().map((T,O)=>({coordinate:o(T)+w,value:r?r[T]:T,index:O,offset:w}))},F3=1e-4,s0e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-F3,a=Math.max(r[0],r[1])+F3,o=e(t[0]),l=e(t[n-1]);(o<i||o>a||l<i||l>a)&&e.domain([t[0],t[n-1]])}},l0e=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var l=ao(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+l,a=e[o][n][1])}},c0e=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=ao(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},u0e={sign:l0e,expand:Jhe,none:ff,silhouette:Qhe,wiggle:eme,positive:c0e},d0e=(e,t,n)=>{var r=u0e[n],i=Xhe().keys(t).value((a,o)=>Number(Ur(a,o,0))).order(q2).offset(r);return i(e)};function f0e(e){return e==null?void 0:String(e)}function H3(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Cr(i[t.dataKey])){var l=C9(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=Ur(i,Cr(o)?t.dataKey:o);return Cr(u)?null:t.scale(u)}var h0e=e=>{var t=e.flat(2).filter(et);return[Math.min(...t),Math.max(...t)]},m0e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],p0e=(e,t,n)=>{if(e!=null)return m0e(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,l=o.reduce((u,d)=>{var h=y8(d,t,n),m=h0e(h);return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},G3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Y3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ev=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=vx(t,h=>h.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function q3(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Gd(Gd({},t),{},{dataKey:n,payload:r,value:i,name:a})}function w8(e,t){if(e)return String(e);if(typeof t=="string")return t}var g0e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},b0e=(e,t)=>t==="centric"?e.angle:e.radius,Fs=e=>e.layout.width,Hs=e=>e.layout.height,y0e=e=>e.layout.scale,_8=e=>e.layout.margin,Ax=xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nx=xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),v0e="data-recharts-item-index",x0e="data-recharts-item-data-key",Fp=60;function K3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(n),!0).forEach(function(r){w0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w0e(e,t,n){return(t=_0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _0e(e){var t=S0e(e,"string");return typeof t=="symbol"?t:t+""}function S0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k0e=e=>e.brush.height;function E0e(e){var t=Nx(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fp;return n+i}return n},0)}function j0e(e){var t=Nx(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Fp;return n+i}return n},0)}function T0e(e){var t=Ax(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function A0e(e){var t=Ax(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Pr=xe([Fs,Hs,_8,k0e,E0e,j0e,T0e,A0e,Y9,ipe],(e,t,n,r,i,a,o,l,u,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},m={top:(n.top||0)+o,bottom:(n.bottom||0)+l},b=_b(_b({},m),h),y=b.bottom;b.bottom+=r,b=o0e(b,u,d);var k=e-b.left-b.right,w=t-b.top-b.bottom;return _b(_b({brushBottom:y},b),{},{width:Math.max(k,0),height:Math.max(w,0)})}),N0e=xe(Pr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),S8=xe(Fs,Hs,(e,t)=>({x:0,y:0,width:e,height:t})),O0e=S.createContext(null),ki=()=>S.useContext(O0e)!=null,Ox=e=>e.brush,Cx=xe([Ox,Pr,_8],(e,t,n)=>({height:e.height,x:et(e.x)?e.x:t.left,y:et(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:et(e.width)?e.width:t.width})),FS={},HS={},GS={},W3;function C0e(){return W3||(W3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,l=null;const u=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},m=()=>{d&&h(),w()};let b=null;const y=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,m()},r)},k=()=>{b!==null&&(clearTimeout(b),b=null)},w=()=>{k(),o=void 0,l=null},_=()=>{h()},T=function(...O){if(i?.aborted)return;o=this,l=O;const j=b==null;y(),u&&j&&h()};return T.schedule=y,T.cancel=w,T.flush=_,i?.addEventListener("abort",w,{once:!0}),T}e.debounce=t})(GS)),GS}var V3;function M0e(){return V3||(V3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C0e();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:u}=a,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let h,m=null;const b=t.debounce(function(...w){h=r.apply(this,w),m=null},i,{edges:d}),y=function(...w){return u!=null&&(m===null&&(m=Date.now()),Date.now()-m>=u)?(h=r.apply(this,w),m=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,w),h)},k=()=>(b.flush(),h);return y.cancel=b.cancel,y.flush=k,y}e.debounce=n})(HS)),HS}var Z3;function D0e(){return Z3||(Z3=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M0e();function n(r,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(FS)),FS}var YS,X3;function P0e(){return X3||(X3=1,YS=D0e().throttle),YS}var R0e=P0e();const L0e=_i(R0e);var tv=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},k8=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,l=Ps(r)?e:Number(r),u=Ps(i)?t:Number(i);return a&&a>0&&(l?u=l/a:u&&(l=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},I0e={width:0,height:0,overflow:"visible"},$0e={width:0,overflowX:"visible"},B0e={height:0,overflowY:"visible"},z0e={},U0e=e=>{var{width:t,height:n}=e,r=Ps(t),i=Ps(n);return r&&i?I0e:r?$0e:i?B0e:z0e};function F0e(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Pn(e){return Number.isFinite(e)}function Fo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rE.apply(null,arguments)}function J3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(n),!0).forEach(function(r){H0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H0e(e,t,n){return(t=G0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G0e(e){var t=Y0e(e,"string");return typeof t=="symbol"?t:t+""}function Y0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E8=S.createContext({width:-1,height:-1});function q0e(e){return Fo(e.width)&&Fo(e.height)}function j8(e){var{children:t,width:n,height:r}=e,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return q0e(i)?S.createElement(E8.Provider,{value:i},t):null}var PT=()=>S.useContext(E8),K0e=S.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:m,className:b,onResize:y,style:k={}}=e,w=S.useRef(null),_=S.useRef();_.current=y,S.useImperativeHandle(t,()=>w.current);var[T,O]=S.useState({containerWidth:r.width,containerHeight:r.height}),j=S.useCallback((U,W)=>{O(q=>{var H=Math.round(U),B=Math.round(W);return q.containerWidth===H&&q.containerHeight===B?q:{containerWidth:H,containerHeight:B}})},[]);S.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return $p;var U=B=>{var K,{width:V,height:Z}=B[0].contentRect;j(V,Z),(K=_.current)===null||K===void 0||K.call(_,V,Z)};h>0&&(U=L0e(U,h,{trailing:!0,leading:!1}));var W=new ResizeObserver(U),{width:q,height:H}=w.current.getBoundingClientRect();return j(q,H),W.observe(w.current),()=>{W.disconnect()}},[j,h]);var{containerWidth:C,containerHeight:M}=T;tv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:I}=k8(C,M,{width:i,height:a,aspect:n,maxHeight:u});return tv(P!=null&&P>0||I!=null&&I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,I,i,a,o,l,n),S.createElement("div",{id:m?"".concat(m):void 0,className:dn("recharts-responsive-container",b),style:Q3(Q3({},k),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:u}),ref:w},S.createElement("div",{style:U0e({width:i,height:a})},S.createElement(j8,{width:P,height:I},d)))}),W0e=S.forwardRef((e,t)=>{var n=PT();if(Fo(n.width)&&Fo(n.height))return e.children;var{width:r,height:i}=F0e({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=k8(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return et(a)&&et(o)?S.createElement(j8,{width:a,height:o},e.children):S.createElement(K0e,rE({},e,{width:r,height:i,ref:t}))});function T8(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Mx=()=>{var e,t=ki(),n=it(N0e),r=it(Cx),i=(e=it(Ox))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},V0e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},A8=()=>{var e;return(e=it(Pr))!==null&&e!==void 0?e:V0e},N8=()=>it(Fs),O8=()=>it(Hs),an=e=>e.layout.layoutType,Hp=()=>it(an),Z0e=()=>{var e=Hp();if(e==="horizontal"||e==="vertical")return e},X0e=()=>{var e=Hp();return e!==void 0},Dx=e=>{var t=vr(),n=ki(),{width:r,height:i}=e,a=PT(),o=r,l=i;return a&&(o=a.width>0?a.width:r,l=a.height>0?a.height:i),S.useEffect(()=>{!n&&Fo(o)&&Fo(l)&&t(e0e({width:o,height:l}))},[t,n,o,l]),null},C8=Symbol.for("immer-nothing"),eL=Symbol.for("immer-draftable"),Wi=Symbol.for("immer-state");function Va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cp=Object.getPrototypeOf;function pf(e){return!!e&&!!e[Wi]}function ju(e){return e?M8(e)||Array.isArray(e)||!!e[eL]||!!e.constructor?.[eL]||Gp(e)||Rx(e):!1}var J0e=Object.prototype.constructor.toString(),tL=new WeakMap;function M8(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=tL.get(n);return r===void 0&&(r=Function.toString.call(n),tL.set(n,r)),r===J0e}function nv(e,t,n=!0){Px(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Px(e){const t=e[Wi];return t?t.type_:Array.isArray(e)?1:Gp(e)?2:Rx(e)?3:0}function iE(e,t){return Px(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function D8(e,t,n){const r=Px(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Q0e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gp(e){return e instanceof Map}function Rx(e){return e instanceof Set}function au(e){return e.copy_||e.base_}function aE(e,t){if(Gp(e))return new Map(e);if(Rx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=M8(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Wi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(cp(e),r)}else{const r=cp(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function RT(e,t=!1){return Lx(e)||pf(e)||!ju(e)||(Px(e)>1&&Object.defineProperties(e,{set:Sb,add:Sb,clear:Sb,delete:Sb}),Object.freeze(e),t&&Object.values(e).forEach(n=>RT(n,!0))),e}function ege(){Va(2)}var Sb={value:ege};function Lx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var tge={};function Tu(e){const t=tge[e];return t||Va(0,e),t}var up;function P8(){return up}function nge(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nL(e,t){t&&(Tu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oE(e){sE(e),e.drafts_.forEach(rge),e.drafts_=null}function sE(e){e===up&&(up=e.parent_)}function rL(e){return up=nge(up,e)}function rge(e){const t=e[Wi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function iL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Wi].modified_&&(oE(t),Va(4)),ju(e)&&(e=rv(t,e),t.parent_||iv(t,e)),t.patches_&&Tu("Patches").generateReplacementPatches_(n[Wi].base_,e,t.patches_,t.inversePatches_)):e=rv(t,n,[]),oE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==C8?e:void 0}function rv(e,t,n){if(Lx(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Wi];if(!i)return nv(t,(a,o)=>aL(e,i,t,a,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return iv(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),nv(o,(u,d)=>aL(e,i,a,u,d,n,l),r),iv(e,a,!1),n&&e.patches_&&Tu("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function aL(e,t,n,r,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=Lx(i);if(!(l&&!o)){if(pf(i)){const u=a&&t&&t.type_!==3&&!iE(t.assigned_,r)?a.concat(r):void 0,d=rv(e,i,u);if(D8(n,r,d),pf(d))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ju(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&l)return;rv(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Gp(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&iv(e,i)}}}function iv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&RT(t,n)}function ige(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:P8(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=LT;n&&(i=[r],a=dp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,l}var LT={get(e,t){if(t===Wi)return e;const n=au(e);if(!iE(n,t))return age(e,n,t);const r=n[t];return e.finalized_||!ju(r)?r:r===qS(e.base_,t)?(KS(e),e.copy_[t]=cE(r,e)):r},has(e,t){return t in au(e)},ownKeys(e){return Reflect.ownKeys(au(e))},set(e,t,n){const r=R8(au(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=qS(au(e),t),a=i?.[Wi];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Q0e(n,i)&&(n!==void 0||iE(e.base_,t)))return!0;KS(e),lE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return qS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,KS(e),lE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=au(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Va(11)},getPrototypeOf(e){return cp(e.base_)},setPrototypeOf(){Va(12)}},dp={};nv(LT,(e,t)=>{dp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dp.deleteProperty=function(e,t){return dp.set.call(this,e,t,void 0)};dp.set=function(e,t,n){return LT.set.call(this,e[0],t,n,e[0])};function qS(e,t){const n=e[Wi];return(n?au(n):e)[t]}function age(e,t,n){const r=R8(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function R8(e,t){if(!(t in e))return;let n=cp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cp(n)}}function lE(e){e.modified_||(e.modified_=!0,e.parent_&&lE(e.parent_))}function KS(e){e.copy_||(e.copy_=aE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oge=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(u=a,...d){return o.produce(u,h=>n.call(this,h,...d))}}typeof n!="function"&&Va(6),r!==void 0&&typeof r!="function"&&Va(7);let i;if(ju(t)){const a=rL(this),o=cE(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?oE(a):sE(a)}return nL(a,r),iL(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===C8&&(i=void 0),this.autoFreeze_&&RT(i,!0),r){const a=[],o=[];Tu("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else Va(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let r,i;return[this.produce(t,n,(o,l)=>{r=o,i=l}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ju(e)||Va(8),pf(e)&&(e=sge(e));const t=rL(this),n=cE(e,void 0);return n[Wi].isManual_=!0,sE(t),n}finishDraft(e,t){const n=e&&e[Wi];(!n||!n.isManual_)&&Va(9);const{scope_:r}=n;return nL(r,t),iL(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Tu("Patches").applyPatches_;return pf(e)?r(e,t):this.produce(e,i=>r(i,t))}};function cE(e,t){const n=Gp(e)?Tu("MapSet").proxyMap_(e,t):Rx(e)?Tu("MapSet").proxySet_(e,t):ige(e,t);return(t?t.scope_:P8()).drafts_.push(n),n}function sge(e){return pf(e)||Va(10,e),L8(e)}function L8(e){if(!ju(e)||Lx(e))return e;const t=e[Wi];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=aE(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=aE(e,!0);return nv(n,(i,a)=>{D8(n,i,L8(a))},r),t&&(t.finalized_=!1),n}var lge=new oge;lge.produce;var cge={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},I8=Si({name:"legend",initialState:cge,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:bn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:bn()},removeLegendPayload:{reducer(e,t){var n=Ja(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:bn()}}}),{setLegendSize:mMe,setLegendSettings:pMe,addLegendPayload:uge,replaceLegendPayload:dge,removeLegendPayload:fge}=I8.actions,hge=I8.reducer;function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(null,arguments)}function oL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oL(Object(n),!0).forEach(function(r){mge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mge(e,t,n){return(t=pge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pge(e){var t=gge(e,"string");return typeof t=="symbol"?t:t+""}function gge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bge(e){return Array.isArray(e)&&Uo(e[0])&&Uo(e[1])?e.join(" ~ "):e}var yge=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:m,accessibilityLayer:b=!1}=e,y=()=>{if(a&&a.length){var M={padding:0,margin:0},P=(l?vx(a,l):a).map((I,U)=>{if(I.type==="none")return null;var W=I.formatter||o||bge,{value:q,name:H}=I,B=q,K=H;if(W){var V=W(q,H,I,U,a);if(Array.isArray(V))[B,K]=V;else if(V!=null)B=V;else return null}var Z=WS({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:Z},Uo(K)?S.createElement("span",{className:"recharts-tooltip-item-name"},K):null,Uo(K)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},B),S.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:M},P)}return null},k=WS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=WS({margin:0},i),_=!Cr(h),T=_?h:"",O=dn("recharts-default-tooltip",u),j=dn("recharts-tooltip-label",d);_&&m&&a!==void 0&&a!==null&&(T=m(h,a));var C=b?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",uE({className:O,style:k},C),S.createElement("p",{className:j,style:w},S.isValidElement(T)?T:"".concat(T)),y())},dm="recharts-tooltip-wrapper",vge={visibility:"hidden"};function xge(e){var{coordinate:t,translateX:n,translateY:r}=e;return dn(dm,{["".concat(dm,"-right")]:et(n)&&t&&et(t.x)&&n>=t.x,["".concat(dm,"-left")]:et(n)&&t&&et(t.x)&&n<t.x,["".concat(dm,"-bottom")]:et(r)&&t&&et(t.y)&&r>=t.y,["".concat(dm,"-top")]:et(r)&&t&&et(t.y)&&r<t.y})}function sL(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=e;if(a&&et(a[r]))return a[r];var h=n[r]-l-(i>0?i:0),m=n[r]+i;if(t[r])return o[r]?h:m;var b=u[r];if(b==null)return 0;if(o[r]){var y=h,k=b;return y<k?Math.max(m,b):Math.max(h,b)}if(d==null)return 0;var w=m+l,_=b+d;return w>_?Math.max(h,b):Math.max(m,b)}function wge(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function _ge(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:u}=e,d,h,m;return o.height>0&&o.width>0&&n?(h=sL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),m=sL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=wge({translateX:h,translateY:m,useTranslate3d:l})):d=vge,{cssProperties:d,cssClasses:xge({translateX:h,translateY:m,coordinate:n})}}function lL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(n),!0).forEach(function(r){dE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dE(e,t,n){return(t=Sge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sge(e){var t=kge(e,"string");return typeof t=="symbol"?t:t+""}function kge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ege extends S.PureComponent{constructor(){super(...arguments),dE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:m,useTranslate3d:b,viewBox:y,wrapperStyle:k,lastBoundingBox:w,innerRef:_,hasPortalFromProps:T}=this.props,{cssClasses:O,cssProperties:j}=_ge({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:m,tooltipBox:{height:w.height,width:w.width},useTranslate3d:b,viewBox:y}),C=T?{}:kb(kb({transition:u&&t?"transform ".concat(r,"ms ").concat(i):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),M=kb(kb({},C),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},k);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:M,ref:_},a)}}var $8=()=>{var e;return(e=it(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(null,arguments)}function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(n),!0).forEach(function(r){jge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jge(e,t,n){return(t=Tge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tge(e){var t=Age(e,"string");return typeof t=="symbol"?t:t+""}function Age(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dL={curveBasisClosed:zhe,curveBasisOpen:Uhe,curveBasis:Bhe,curveBumpX:Ihe,curveBumpY:$he,curveLinearClosed:Fhe,curveLinear:gx,curveMonotoneX:Hhe,curveMonotoneY:Ghe,curveNatural:Yhe,curveStep:qhe,curveStepAfter:Whe,curveStepBefore:Khe},av=e=>Pn(e.x)&&Pn(e.y),fL=e=>e.base!=null&&av(e.base)&&av(e),fm=e=>e.x,hm=e=>e.y,Nge=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(ST(e));return(n==="curveMonotone"||n==="curveBump")&&t?dL["".concat(n).concat(t==="vertical"?"Y":"X")]:dL[n]||gx},Oge=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=Nge(t,i),l=a?n.filter(av):n,u;if(Array.isArray(r)){var d=n.map((y,k)=>uL(uL({},y),{},{base:r[k]}));i==="vertical"?u=gb().y(hm).x1(fm).x0(y=>y.base.x):u=gb().x(fm).y1(hm).y0(y=>y.base.y);var h=u.defined(fL).curve(o),m=a?d.filter(fL):d;return h(m)}i==="vertical"&&et(r)?u=gb().y(hm).x1(fm).x0(r):et(r)?u=gb().x(fm).y1(hm).y0(r):u=x9().x(fm).y(hm);var b=u.defined(av).curve(o);return b(l)},ty=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Oge(e):r;return S.createElement("path",fE({},io(e),kT(e),{className:dn("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Cge=["x","y","top","left","width","height","className"];function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hE.apply(null,arguments)}function hL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hL(Object(n),!0).forEach(function(r){Dge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dge(e,t,n){return(t=Pge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pge(e){var t=Rge(e,"string");return typeof t=="symbol"?t:t+""}function Rge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lge(e,t){if(e==null)return{};var n,r,i=Ige(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ige(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $ge=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),Bge=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:l}=e,u=Lge(e,Cge),d=Mge({x:t,y:n,top:r,left:i,width:a,height:o},u);return!et(t)||!et(n)||!et(a)||!et(o)||!et(r)||!et(i)?null:S.createElement("path",hE({},ka(d),{className:dn("recharts-cross",l),d:$ge(t,n,a,o,r,i)}))};function zge(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(n),!0).forEach(function(r){Uge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uge(e,t,n){return(t=Fge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fge(e){var t=Hge(e,"string");return typeof t=="symbol"?t:t+""}function Hge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gge=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Yge=(e,t,n)=>e.map(r=>"".concat(Gge(r)," ").concat(t,"ms ").concat(n)).join(","),qge=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),fp=(e,t)=>Object.keys(t).reduce((n,r)=>pL(pL({},n),{},{[r]:e(r,t[r])}),{});function gL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(n),!0).forEach(function(r){Kge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kge(e,t,n){return(t=Wge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wge(e){var t=Vge(e,"string");return typeof t=="symbol"?t:t+""}function Vge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ov=(e,t,n)=>e+(t-e)*n,mE=e=>{var{from:t,to:n}=e;return t!==n},B8=(e,t,n)=>{var r=fp((i,a)=>{if(mE(a)){var[o,l]=e(a.from,a.to,a.velocity);return nr(nr({},a),{},{from:o,velocity:l})}return a},t);return n<1?fp((i,a)=>mE(a)?nr(nr({},a),{},{velocity:ov(a.velocity,r[i].velocity,n),from:ov(a.from,r[i].from,n)}):a,t):B8(e,r,n-1)};function Zge(e,t,n,r,i,a){var o,l=r.reduce((b,y)=>nr(nr({},b),{},{[y]:{from:e[y],velocity:0,to:t[y]}}),{}),u=()=>fp((b,y)=>y.from,l),d=()=>!Object.values(l).filter(mE).length,h=null,m=b=>{o||(o=b);var y=b-o,k=y/n.dt;l=B8(n,l,k),i(nr(nr(nr({},e),t),u())),o=b,d()||(h=a.setTimeout(m))};return()=>(h=a.setTimeout(m),()=>{var b;(b=h)===null||b===void 0||b()})}function Xge(e,t,n,r,i,a,o){var l=null,u=i.reduce((m,b)=>nr(nr({},m),{},{[b]:[e[b],t[b]]}),{}),d,h=m=>{d||(d=m);var b=(m-d)/r,y=fp((w,_)=>ov(..._,n(b)),u);if(a(nr(nr(nr({},e),t),y)),b<1)l=o.setTimeout(h);else{var k=fp((w,_)=>ov(..._,n(1)),u);a(nr(nr(nr({},e),t),k))}};return()=>(l=o.setTimeout(h),()=>{var m;(m=l)===null||m===void 0||m()})}const Jge=(e,t,n,r,i,a)=>{var o=qge(e,t);return n==null?()=>(i(nr(nr({},e),t)),()=>{}):n.isStepper===!0?Zge(e,t,n,o,i,a):Xge(e,t,n,r,o,i,a)};var sv=1e-4,z8=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],U8=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),bL=(e,t)=>n=>{var r=z8(e,t);return U8(r,n)},Qge=(e,t)=>n=>{var r=z8(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return U8(i,n)},ebe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var o=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return n.length===4?n:[0,0,1,1]},tbe=(e,t,n,r)=>{var i=bL(e,n),a=bL(t,r),o=Qge(e,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,m=h,b=0;b<8;++b){var y=i(m)-h,k=o(m);if(Math.abs(y-h)<sv||k<sv)return a(m);m=l(m-y/k)}return a(m)};return u.isStepper=!1,u},yL=function(){return tbe(...ebe(...arguments))},nbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,l,u)=>{var d=-(o-l)*n,h=u*r,m=u+(d-h)*i/1e3,b=u*i/1e3+o;return Math.abs(b-l)<sv&&Math.abs(m)<sv?[l,0]:[b,m]};return a.isStepper=!0,a.dt=i,a},rbe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yL(e);case"spring":return nbe();default:if(e.split("(")[0]==="cubic-bezier")return yL(e)}return typeof e=="function"?e:null};function ibe(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){i=e.setTimeout(a.bind(null,d),u);return}a(u),i=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class abe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function obe(){return ibe(new abe)}var sbe=S.createContext(obe);function lbe(e,t){var n=S.useContext(sbe);return S.useMemo(()=>t??n(e),[e,t,n])}var cbe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Pf={devToolsEnabled:!1,isSsr:cbe()},ube={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},vL={t:0},VS={t:1};function F8(e){var t=Zi(e,ube),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=t,h=n==="auto"?!Pf.isSsr:n,m=lbe(t.animationId,t.animationManager),[b,y]=S.useState(h?vL:VS),k=S.useRef(null);return S.useEffect(()=>{h||y(VS)},[h]),S.useEffect(()=>{if(!h||!r)return $p;var w=Jge(vL,VS,rbe(a),i,y,m.getTimeoutController()),_=()=>{k.current=w()};return m.start([u,o,_,i,l]),()=>{m.stop(),k.current&&k.current(),l()}},[h,r,i,a,o,u,l,m]),d(b.t)}function H8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(ap(t)),r=S.useRef(e);return r.current!==e&&(n.current=ap(t),r.current=e),n.current}var dbe=["radius"],fbe=["radius"];function xL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xL(Object(n),!0).forEach(function(r){hbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hbe(e,t,n){return(t=mbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mbe(e){var t=pbe(e,"string");return typeof t=="symbol"?t:t+""}function pbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function _L(e,t){if(e==null)return{};var n,r,i=gbe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gbe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var SL=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,b=4;m<b;m++)h[m]=i[m]>a?a:i[m];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(t)),d+="L ".concat(e+n-l*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(t+o*h[1])),d+="L ".concat(e+n,",").concat(t+r-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+n-l*h[2],",").concat(t+r)),d+="L ".concat(e+l*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+r-o*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(t,`
            L `).concat(e+n-l*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n,",").concat(t+o*y,`
            L `).concat(e+n,",").concat(t+r-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+n-l*y,",").concat(t+r,`
            L `).concat(e+l*y,",").concat(t+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(t+r-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},kL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bbe=e=>{var t=Zi(e,kL),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&i(J)}catch{}},[]);var{x:a,y:o,width:l,height:u,radius:d,className:h}=t,{animationEasing:m,animationDuration:b,animationBegin:y,isAnimationActive:k,isUpdateAnimationActive:w}=t,_=S.useRef(l),T=S.useRef(u),O=S.useRef(a),j=S.useRef(o),C=S.useMemo(()=>({x:a,y:o,width:l,height:u,radius:d}),[a,o,l,u,d]),M=H8(C,"rectangle-");if(a!==+a||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var P=dn("recharts-rectangle",h);if(!w){var I=ka(t),{radius:U}=I,W=_L(I,dbe);return S.createElement("path",lv({},W,{radius:typeof d=="number"?d:void 0,className:P,d:SL(a,o,l,u,d)}))}var q=_.current,H=T.current,B=O.current,K=j.current,V="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),G=Yge(["strokeDasharray"],b,typeof m=="string"?m:kL.animationEasing);return S.createElement(F8,{animationId:M,key:M,canBegin:r>0,duration:b,easing:m,isActive:w,begin:y},J=>{var Q=Do(q,l,J),oe=Do(H,u,J),te=Do(B,a,J),z=Do(K,o,J);n.current&&(_.current=Q,T.current=oe,O.current=te,j.current=z);var X;k?J>0?X={transition:G,strokeDasharray:Z}:X={strokeDasharray:V}:X={strokeDasharray:Z};var re=ka(t),{radius:ie}=re,fe=_L(re,fbe);return S.createElement("path",lv({},fe,{radius:typeof d=="number"?d:void 0,className:P,d:SL(te,z,Q,oe,d),ref:n,style:wL(wL({},X),t.style)}))})};function EL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(n),!0).forEach(function(r){ybe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ybe(e,t,n){return(t=vbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vbe(e){var t=xbe(e,"string");return typeof t=="symbol"?t:t+""}function xbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cv=Math.PI/180,wbe=e=>e*180/Math.PI,Or=(e,t,n,r)=>({x:e+Math.cos(-cv*r)*n,y:t+Math.sin(-cv*r)*n}),_be=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Sbe=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},kbe=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=Sbe({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>a&&(u=2*Math.PI-u),{radius:o,angle:wbe(u),angleInRadian:u}},Ebe=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},jbe=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},Tbe=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=kbe({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:d}=Ebe(t),h=a,m;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;m=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=u}return m?jL(jL({},t),{},{radius:i,angle:jbe(h,t)}):null};function G8(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=Or(t,n,r,i),l=Or(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pE.apply(null,arguments)}var Abe=(e,t)=>{var n=va(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Eb=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:u}=e,d=l*(o?1:-1)+r,h=Math.asin(l/d)/cv,m=u?i:i+a*h,b=Or(t,n,d,m),y=Or(t,n,r,m),k=u?i-a*h:i,w=Or(t,n,d*Math.cos(h*cv),k);return{center:b,circleTangency:y,lineTangency:w,theta:h}},Y8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,l=Abe(a,o),u=a+l,d=Or(t,n,i,a),h=Or(t,n,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var b=Or(t,n,r,a),y=Or(t,n,r,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(b.x,",").concat(b.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},Nbe=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=e,h=va(d-u),{circleTangency:m,lineTangency:b,theta:y}=Eb({cx:t,cy:n,radius:i,angle:u,sign:h,cornerRadius:a,cornerIsExternal:l}),{circleTangency:k,lineTangency:w,theta:_}=Eb({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:l}),T=l?Math.abs(u-d):Math.abs(u-d)-y-_;if(T<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Y8({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var O="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:j,lineTangency:C,theta:M}=Eb({cx:t,cy:n,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:P,lineTangency:I,theta:U}=Eb({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),W=l?Math.abs(u-d):Math.abs(u-d)-M-U;if(W<0&&a===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},Obe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cbe=e=>{var t=Zi(e,Obe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:m}=t;if(a<i||d===h)return null;var b=dn("recharts-sector",m),y=a-i,k=Jl(o,y,0,!0),w;return k>0&&Math.abs(d-h)<360?w=Nbe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(k,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):w=Y8({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),S.createElement("path",pE({},ka(t),{className:b,d:w}))};function Mbe(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(M9(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:o,angle:l}=t,u=Or(r,i,a,l),d=Or(r,i,o,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return G8(t)}}var ZS={},XS={},JS={},TL;function Dbe(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H9();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(JS)),JS}var AL;function Pbe(){return AL||(AL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dbe();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(XS)),XS}var NL;function Rbe(){return NL||(NL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G9(),n=Pbe();function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=o;return u}e.range=r})(ZS)),ZS}var QS,OL;function Lbe(){return OL||(OL=1,QS=Rbe().range),QS}var Ibe=Lbe();const q8=_i(Ibe);function Yl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $be(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IT(e){let t,n,r;e.length!==2?(t=Yl,n=(l,u)=>Yl(e(l),u),r=(l,u)=>e(l)-u):(t=e===Yl||e===$be?e:Bbe,n=e,r=e);function i(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const m=d+h>>>1;n(l[m],u)<0?d=m+1:h=m}while(d<h)}return d}function a(l,u,d=0,h=l.length){if(d<h){if(t(u,u)!==0)return h;do{const m=d+h>>>1;n(l[m],u)<=0?d=m+1:h=m}while(d<h)}return d}function o(l,u,d=0,h=l.length){const m=i(l,u,d,h-1);return m>d&&r(l[m-1],u)>-r(l[m],u)?m-1:m}return{left:i,center:o,right:a}}function Bbe(){return 0}function K8(e){return e===null?NaN:+e}function*zbe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Ube=IT(Yl),Yp=Ube.right;IT(K8).center;class CL extends Map{constructor(t,n=Gbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ML(this,t))}has(t){return super.has(ML(this,t))}set(t,n){return super.set(Fbe(this,t),n)}delete(t){return super.delete(Hbe(this,t))}}function ML({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Fbe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Hbe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Gbe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ybe(e=Yl){if(e===Yl)return W8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function W8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const qbe=Math.sqrt(50),Kbe=Math.sqrt(10),Wbe=Math.sqrt(2);function uv(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=qbe?10:a>=Kbe?5:a>=Wbe?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=n&&n<2?uv(e,t,n*2):[l,u,d]}function gE(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?uv(t,e,n):uv(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)u[d]=(a-d)/-o;else for(let d=0;d<l;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(i+d)/-o;else for(let d=0;d<l;++d)u[d]=(i+d)*o;return u}function bE(e,t,n){return t=+t,e=+e,n=+n,uv(e,t,n)[2]}function yE(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bE(t,e,n):bE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function DL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function PL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function V8(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?W8:Ybe(i);r>n;){if(r-n>600){const u=r-n+1,d=t-n+1,h=Math.log(u),m=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*m*(u-m)/u)*(d-u/2<0?-1:1),y=Math.max(n,Math.floor(t-d*m/u+b)),k=Math.min(r,Math.floor(t+(u-d)*m/u+b));V8(e,t,y,k,i)}const a=e[t];let o=n,l=r;for(mm(e,n,t),i(e[r],a)>0&&mm(e,n,r);o<l;){for(mm(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?mm(e,n,l):(++l,mm(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function mm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Vbe(e,t,n){if(e=Float64Array.from(zbe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return PL(e);if(t>=1)return DL(e);var r,i=(r-1)*t,a=Math.floor(i),o=DL(V8(e,a).subarray(0,a+1)),l=PL(e.subarray(a+1));return o+(l-o)*(i-a)}}function Zbe(e,t,n=K8){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function Xbe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Oa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Gs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vE=Symbol("implicit");function $T(){var e=new CL,t=[],n=[],r=vE;function i(a){let o=e.get(a);if(o===void 0){if(r!==vE)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new CL;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return $T(t,n).unknown(r)},Oa.apply(i,arguments),i}function BT(){var e=$T().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,u=0,d=0,h=.5;delete e.unknown;function m(){var b=t().length,y=i<r,k=y?i:r,w=y?r:i;a=(w-k)/Math.max(1,b-u+d*2),l&&(a=Math.floor(a)),k+=(w-k-a*(b-u))*h,o=a*(1-u),l&&(k=Math.round(k),o=Math.round(o));var _=Xbe(b).map(function(T){return k+a*T});return n(y?_.reverse():_)}return e.domain=function(b){return arguments.length?(t(b),m()):t()},e.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(b){return arguments.length?(l=!!b,m()):l},e.padding=function(b){return arguments.length?(u=Math.min(1,d=+b),m()):u},e.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),m()):u},e.paddingOuter=function(b){return arguments.length?(d=+b,m()):d},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),m()):h},e.copy=function(){return BT(t(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},Oa.apply(m(),arguments)}function Z8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Z8(t())},e}function Jbe(){return Z8(BT.apply(null,arguments).paddingInner(1))}function zT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function X8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qp(){}var hp=.7,dv=1/hp,tf="\\s*([+-]?\\d+)\\s*",mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qbe=/^#([0-9a-f]{3,8})$/,eye=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),tye=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),nye=new RegExp(`^rgba\\(${tf},${tf},${tf},${mp}\\)$`),rye=new RegExp(`^rgba\\(${$o},${$o},${$o},${mp}\\)$`),iye=new RegExp(`^hsl\\(${mp},${$o},${$o}\\)$`),aye=new RegExp(`^hsla\\(${mp},${$o},${$o},${mp}\\)$`),RL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zT(qp,pp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:LL,formatHex:LL,formatHex8:oye,formatHsl:sye,formatRgb:IL,toString:IL});function LL(){return this.rgb().formatHex()}function oye(){return this.rgb().formatHex8()}function sye(){return J8(this).formatHsl()}function IL(){return this.rgb().formatRgb()}function pp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qbe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$L(t):n===3?new yi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eye.exec(e))?new yi(t[1],t[2],t[3],1):(t=tye.exec(e))?new yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nye.exec(e))?jb(t[1],t[2],t[3],t[4]):(t=rye.exec(e))?jb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iye.exec(e))?UL(t[1],t[2]/100,t[3]/100,1):(t=aye.exec(e))?UL(t[1],t[2]/100,t[3]/100,t[4]):RL.hasOwnProperty(e)?$L(RL[e]):e==="transparent"?new yi(NaN,NaN,NaN,0):null}function $L(e){return new yi(e>>16&255,e>>8&255,e&255,1)}function jb(e,t,n,r){return r<=0&&(e=t=n=NaN),new yi(e,t,n,r)}function lye(e){return e instanceof qp||(e=pp(e)),e?(e=e.rgb(),new yi(e.r,e.g,e.b,e.opacity)):new yi}function xE(e,t,n,r){return arguments.length===1?lye(e):new yi(e,t,n,r??1)}function yi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zT(yi,xE,X8(qp,{brighter(e){return e=e==null?dv:Math.pow(dv,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yi(xu(this.r),xu(this.g),xu(this.b),fv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BL,formatHex:BL,formatHex8:cye,formatRgb:zL,toString:zL}));function BL(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}`}function cye(){return`#${hu(this.r)}${hu(this.g)}${hu(this.b)}${hu((isNaN(this.opacity)?1:this.opacity)*255)}`}function zL(){const e=fv(this.opacity);return`${e===1?"rgb(":"rgba("}${xu(this.r)}, ${xu(this.g)}, ${xu(this.b)}${e===1?")":`, ${e})`}`}function fv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hu(e){return e=xu(e),(e<16?"0":"")+e.toString(16)}function UL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Za(e,t,n,r)}function J8(e){if(e instanceof Za)return new Za(e.h,e.s,e.l,e.opacity);if(e instanceof qp||(e=pp(e)),!e)return new Za;if(e instanceof Za)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Za(o,l,u,e.opacity)}function uye(e,t,n,r){return arguments.length===1?J8(e):new Za(e,t,n,r??1)}function Za(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zT(Za,uye,X8(qp,{brighter(e){return e=e==null?dv:Math.pow(dv,e),new Za(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new Za(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yi(ek(e>=240?e-240:e+120,i,r),ek(e,i,r),ek(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Za(FL(this.h),Tb(this.s),Tb(this.l),fv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fv(this.opacity);return`${e===1?"hsl(":"hsla("}${FL(this.h)}, ${Tb(this.s)*100}%, ${Tb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function FL(e){return e=(e||0)%360,e<0?e+360:e}function Tb(e){return Math.max(0,Math.min(1,e||0))}function ek(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UT=e=>()=>e;function dye(e,t){return function(n){return e+n*t}}function fye(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function hye(e){return(e=+e)==1?Q8:function(t,n){return n-t?fye(t,n,e):UT(isNaN(t)?n:t)}}function Q8(e,t){var n=t-e;return n?dye(e,n):UT(isNaN(e)?t:e)}const HL=(function e(t){var n=hye(t);function r(i,a){var o=n((i=xE(i)).r,(a=xE(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),d=Q8(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function mye(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function pye(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gye(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Rf(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function bye(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yye(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Rf(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var wE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tk=new RegExp(wE.source,"g");function vye(e){return function(){return e}}function xye(e){return function(t){return e(t)+""}}function wye(e,t){var n=wE.lastIndex=tk.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=wE.exec(e))&&(i=tk.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:hv(r,i)})),n=tk.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?xye(u[0].x):vye(t):(t=u.length,function(d){for(var h=0,m;h<t;++h)l[(m=u[h]).i]=m.x(d);return l.join("")})}function Rf(e,t){var n=typeof t,r;return t==null||n==="boolean"?UT(t):(n==="number"?hv:n==="string"?(r=pp(t))?(t=r,HL):wye:t instanceof pp?HL:t instanceof Date?bye:pye(t)?mye:Array.isArray(t)?gye:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yye:hv)(e,t)}function FT(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _ye(e,t){t===void 0&&(t=e,e=Rf);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function Sye(e){return function(){return e}}function mv(e){return+e}var GL=[0,1];function Vr(e){return e}function _E(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Sye(isNaN(t)?NaN:.5)}function kye(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Eye(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=_E(i,r),a=n(o,a)):(r=_E(r,i),a=n(a,o)),function(l){return a(r(l))}}function jye(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=_E(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=Yp(e,l,1,r)-1;return a[u](i[u](l))}}function Kp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ix(){var e=GL,t=GL,n=Rf,r,i,a,o=Vr,l,u,d;function h(){var b=Math.min(e.length,t.length);return o!==Vr&&(o=kye(e[0],e[b-1])),l=b>2?jye:Eye,u=d=null,m}function m(b){return b==null||isNaN(b=+b)?a:(u||(u=l(e.map(r),t,n)))(r(o(b)))}return m.invert=function(b){return o(i((d||(d=l(t,e.map(r),hv)))(b)))},m.domain=function(b){return arguments.length?(e=Array.from(b,mv),h()):e.slice()},m.range=function(b){return arguments.length?(t=Array.from(b),h()):t.slice()},m.rangeRound=function(b){return t=Array.from(b),n=FT,h()},m.clamp=function(b){return arguments.length?(o=b?!0:Vr,h()):o!==Vr},m.interpolate=function(b){return arguments.length?(n=b,h()):n},m.unknown=function(b){return arguments.length?(a=b,m):a},function(b,y){return r=b,i=y,h()}}function HT(){return Ix()(Vr,Vr)}function Tye(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gf(e){return e=pv(Math.abs(e)),e?e[1]:NaN}function Aye(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Nye(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Oye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gp(e){if(!(t=Oye.exec(e)))throw new Error("invalid format: "+e);var t;return new GT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gp.prototype=GT.prototype;function GT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}GT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cye(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ez;function Mye(e,t){var n=pv(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(ez=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+pv(e,Math.max(0,t+a-1))[0]}function YL(e,t){var n=pv(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const qL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Tye,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YL(e*100,t),r:YL,s:Mye,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KL(e){return e}var WL=Array.prototype.map,VL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Dye(e){var t=e.grouping===void 0||e.thousands===void 0?KL:Aye(WL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?KL:Nye(WL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(m){m=gp(m);var b=m.fill,y=m.align,k=m.sign,w=m.symbol,_=m.zero,T=m.width,O=m.comma,j=m.precision,C=m.trim,M=m.type;M==="n"?(O=!0,M="g"):qL[M]||(j===void 0&&(j=12),C=!0,M="g"),(_||b==="0"&&y==="=")&&(_=!0,b="0",y="=");var P=w==="$"?n:w==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I=w==="$"?r:/[%p]/.test(M)?o:"",U=qL[M],W=/[defgprs%]/.test(M);j=j===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function q(H){var B=P,K=I,V,Z,G;if(M==="c")K=U(H)+K,H="";else{H=+H;var J=H<0||1/H<0;if(H=isNaN(H)?u:U(Math.abs(H),j),C&&(H=Cye(H)),J&&+H==0&&k!=="+"&&(J=!1),B=(J?k==="("?k:l:k==="-"||k==="("?"":k)+B,K=(M==="s"?VL[8+ez/3]:"")+K+(J&&k==="("?")":""),W){for(V=-1,Z=H.length;++V<Z;)if(G=H.charCodeAt(V),48>G||G>57){K=(G===46?i+H.slice(V+1):H.slice(V))+K,H=H.slice(0,V);break}}}O&&!_&&(H=t(H,1/0));var Q=B.length+H.length+K.length,oe=Q<T?new Array(T-Q+1).join(b):"";switch(O&&_&&(H=t(oe+H,oe.length?T-K.length:1/0),oe=""),y){case"<":H=B+H+K+oe;break;case"=":H=B+oe+H+K;break;case"^":H=oe.slice(0,Q=oe.length>>1)+B+H+K+oe.slice(Q);break;default:H=oe+B+H+K;break}return a(H)}return q.toString=function(){return m+""},q}function h(m,b){var y=d((m=gp(m),m.type="f",m)),k=Math.max(-8,Math.min(8,Math.floor(gf(b)/3)))*3,w=Math.pow(10,-k),_=VL[8+k/3];return function(T){return y(w*T)+_}}return{format:d,formatPrefix:h}}var Ab,YT,tz;Pye({thousands:",",grouping:[3],currency:["$",""]});function Pye(e){return Ab=Dye(e),YT=Ab.format,tz=Ab.formatPrefix,Ab}function Rye(e){return Math.max(0,-gf(Math.abs(e)))}function Lye(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gf(t)/3)))*3-gf(Math.abs(e)))}function Iye(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gf(t)-gf(e))+1}function nz(e,t,n,r){var i=yE(e,t,n),a;switch(r=gp(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Lye(i,o))&&(r.precision=a),tz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Iye(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Rye(i))&&(r.precision=a-(r.type==="%")*2);break}}return YT(r)}function ic(e){var t=e.domain;return e.ticks=function(n){var r=t();return gE(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return nz(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=bE(o,l,n),d===u)return r[i]=o,r[a]=l,t(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function rz(){var e=HT();return e.copy=function(){return Kp(e,rz())},Oa.apply(e,arguments),ic(e)}function iz(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,mv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return iz(e).unknown(t)},e=arguments.length?Array.from(e,mv):[0,1],ic(n)}function az(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function ZL(e){return Math.log(e)}function XL(e){return Math.exp(e)}function $ye(e){return-Math.log(-e)}function Bye(e){return-Math.exp(-e)}function zye(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Uye(e){return e===10?zye:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Fye(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JL(e){return(t,n)=>-e(-t,n)}function qT(e){const t=e(ZL,XL),n=t.domain;let r=10,i,a;function o(){return i=Fye(r),a=Uye(r),n()[0]<0?(i=JL(i),a=JL(a),e($ye,Bye)):e(ZL,XL),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let d=u[0],h=u[u.length-1];const m=h<d;m&&([d,h]=[h,d]);let b=i(d),y=i(h),k,w;const _=l==null?10:+l;let T=[];if(!(r%1)&&y-b<_){if(b=Math.floor(b),y=Math.ceil(y),d>0){for(;b<=y;++b)for(k=1;k<r;++k)if(w=b<0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}}else for(;b<=y;++b)for(k=r-1;k>=1;--k)if(w=b>0?k/a(-b):k*a(b),!(w<d)){if(w>h)break;T.push(w)}T.length*2<_&&(T=gE(d,h,_))}else T=gE(b,y,Math.min(y-b,_)).map(a);return m?T.reverse():T},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=gp(u)).precision==null&&(u.trim=!0),u=YT(u)),l===1/0)return u;const d=Math.max(1,r*l/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=d?u(h):""}},t.nice=()=>n(az(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function oz(){const e=qT(Ix()).domain([1,10]);return e.copy=()=>Kp(e,oz()).base(e.base()),Oa.apply(e,arguments),e}function QL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KT(e){var t=1,n=e(QL(t),eI(t));return n.constant=function(r){return arguments.length?e(QL(t=+r),eI(t)):t},ic(n)}function sz(){var e=KT(Ix());return e.copy=function(){return Kp(e,sz()).constant(e.constant())},Oa.apply(e,arguments)}function tI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hye(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Gye(e){return e<0?-e*e:e*e}function WT(e){var t=e(Vr,Vr),n=1;function r(){return n===1?e(Vr,Vr):n===.5?e(Hye,Gye):e(tI(n),tI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ic(t)}function VT(){var e=WT(Ix());return e.copy=function(){return Kp(e,VT()).exponent(e.exponent())},Oa.apply(e,arguments),e}function Yye(){return VT.apply(null,arguments).exponent(.5)}function nI(e){return Math.sign(e)*e*e}function qye(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function lz(){var e=HT(),t=[0,1],n=!1,r;function i(a){var o=qye(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(nI(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,mv)).map(nI)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lz(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Oa.apply(i,arguments),ic(i)}function cz(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Zbe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Yp(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Yl),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return cz().domain(e).range(t).unknown(r)},Oa.apply(a,arguments)}function uz(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Yp(r,u,0,n)]:a}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return uz().domain([e,t]).range(i).unknown(a)},Oa.apply(ic(o),arguments)}function dz(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Yp(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return dz().domain(e).range(t).unknown(n)},Oa.apply(i,arguments)}const nk=new Date,rk=new Date;function ir(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let d;do u.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return u},i.filter=a=>ir(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(nk.setTime(+a),rk.setTime(+o),e(nk),e(rk),Math.floor(n(nk,rk))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const gv=ir(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ir(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gv);gv.range;const js=1e3,xa=js*60,Ts=xa*60,Ls=Ts*24,ZT=Ls*7,rI=Ls*30,ik=Ls*365,mu=ir(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*js)},(e,t)=>(t-e)/js,e=>e.getUTCSeconds());mu.range;const XT=ir(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*js)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getMinutes());XT.range;const JT=ir(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xa)},(e,t)=>(t-e)/xa,e=>e.getUTCMinutes());JT.range;const QT=ir(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*js-e.getMinutes()*xa)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getHours());QT.range;const eA=ir(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCHours());eA.range;const Wp=ir(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xa)/Ls,e=>e.getDate()-1);Wp.range;const $x=ir(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ls,e=>e.getUTCDate()-1);$x.range;const fz=ir(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ls,e=>Math.floor(e/Ls));fz.range;function Pu(e){return ir(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*xa)/ZT)}const Bx=Pu(0),bv=Pu(1),Kye=Pu(2),Wye=Pu(3),bf=Pu(4),Vye=Pu(5),Zye=Pu(6);Bx.range;bv.range;Kye.range;Wye.range;bf.range;Vye.range;Zye.range;function Ru(e){return ir(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ZT)}const zx=Ru(0),yv=Ru(1),Xye=Ru(2),Jye=Ru(3),yf=Ru(4),Qye=Ru(5),eve=Ru(6);zx.range;yv.range;Xye.range;Jye.range;yf.range;Qye.range;eve.range;const tA=ir(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tA.range;const nA=ir(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nA.range;const Is=ir(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Is.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ir(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Is.range;const $s=ir(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$s.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ir(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});$s.range;function hz(e,t,n,r,i,a){const o=[[mu,1,js],[mu,5,5*js],[mu,15,15*js],[mu,30,30*js],[a,1,xa],[a,5,5*xa],[a,15,15*xa],[a,30,30*xa],[i,1,Ts],[i,3,3*Ts],[i,6,6*Ts],[i,12,12*Ts],[r,1,Ls],[r,2,2*Ls],[n,1,ZT],[t,1,rI],[t,3,3*rI],[e,1,ik]];function l(d,h,m){const b=h<d;b&&([d,h]=[h,d]);const y=m&&typeof m.range=="function"?m:u(d,h,m),k=y?y.range(d,+h+1):[];return b?k.reverse():k}function u(d,h,m){const b=Math.abs(h-d)/m,y=IT(([,,_])=>_).right(o,b);if(y===o.length)return e.every(yE(d/ik,h/ik,m));if(y===0)return gv.every(Math.max(yE(d,h,m),1));const[k,w]=o[b/o[y-1][2]<o[y][2]/b?y-1:y];return k.every(w)}return[l,u]}const[tve,nve]=hz($s,nA,zx,fz,eA,JT),[rve,ive]=hz(Is,tA,Bx,Wp,QT,XT);function ak(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ok(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ave(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=gm(i),h=bm(i),m=gm(a),b=bm(a),y=gm(o),k=bm(o),w=gm(l),_=bm(l),T=gm(u),O=bm(u),j={a:J,A:Q,b:oe,B:te,c:null,d:cI,e:cI,f:Ave,g:$ve,G:zve,H:Eve,I:jve,j:Tve,L:mz,m:Nve,M:Ove,p:z,q:X,Q:fI,s:hI,S:Cve,u:Mve,U:Dve,V:Pve,w:Rve,W:Lve,x:null,X:null,y:Ive,Y:Bve,Z:Uve,"%":dI},C={a:re,A:ie,b:fe,B:de,c:null,d:uI,e:uI,f:Yve,g:txe,G:rxe,H:Fve,I:Hve,j:Gve,L:gz,m:qve,M:Kve,p:pe,q:Ne,Q:fI,s:hI,S:Wve,u:Vve,U:Zve,V:Xve,w:Jve,W:Qve,x:null,X:null,y:exe,Y:nxe,Z:ixe,"%":dI},M={a:q,A:H,b:B,B:K,c:V,d:sI,e:sI,f:wve,g:oI,G:aI,H:lI,I:lI,j:bve,L:xve,m:gve,M:yve,p:W,q:pve,Q:Sve,s:kve,S:vve,u:uve,U:dve,V:fve,w:cve,W:hve,x:Z,X:G,y:oI,Y:aI,Z:mve,"%":_ve};j.x=P(n,j),j.X=P(r,j),j.c=P(t,j),C.x=P(n,C),C.X=P(r,C),C.c=P(t,C);function P(se,Se){return function(ke){var he=[],Ue=-1,Be=0,Xe=se.length,Ae,Ie,$e;for(ke instanceof Date||(ke=new Date(+ke));++Ue<Xe;)se.charCodeAt(Ue)===37&&(he.push(se.slice(Be,Ue)),(Ie=iI[Ae=se.charAt(++Ue)])!=null?Ae=se.charAt(++Ue):Ie=Ae==="e"?" ":"0",($e=Se[Ae])&&(Ae=$e(ke,Ie)),he.push(Ae),Be=Ue+1);return he.push(se.slice(Be,Ue)),he.join("")}}function I(se,Se){return function(ke){var he=pm(1900,void 0,1),Ue=U(he,se,ke+="",0),Be,Xe;if(Ue!=ke.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Se&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Be=ok(pm(he.y,0,1)),Xe=Be.getUTCDay(),Be=Xe>4||Xe===0?yv.ceil(Be):yv(Be),Be=$x.offset(Be,(he.V-1)*7),he.y=Be.getUTCFullYear(),he.m=Be.getUTCMonth(),he.d=Be.getUTCDate()+(he.w+6)%7):(Be=ak(pm(he.y,0,1)),Xe=Be.getDay(),Be=Xe>4||Xe===0?bv.ceil(Be):bv(Be),Be=Wp.offset(Be,(he.V-1)*7),he.y=Be.getFullYear(),he.m=Be.getMonth(),he.d=Be.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Xe="Z"in he?ok(pm(he.y,0,1)).getUTCDay():ak(pm(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(Xe+5)%7:he.w+he.U*7-(Xe+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,ok(he)):ak(he)}}function U(se,Se,ke,he){for(var Ue=0,Be=Se.length,Xe=ke.length,Ae,Ie;Ue<Be;){if(he>=Xe)return-1;if(Ae=Se.charCodeAt(Ue++),Ae===37){if(Ae=Se.charAt(Ue++),Ie=M[Ae in iI?Se.charAt(Ue++):Ae],!Ie||(he=Ie(se,ke,he))<0)return-1}else if(Ae!=ke.charCodeAt(he++))return-1}return he}function W(se,Se,ke){var he=d.exec(Se.slice(ke));return he?(se.p=h.get(he[0].toLowerCase()),ke+he[0].length):-1}function q(se,Se,ke){var he=y.exec(Se.slice(ke));return he?(se.w=k.get(he[0].toLowerCase()),ke+he[0].length):-1}function H(se,Se,ke){var he=m.exec(Se.slice(ke));return he?(se.w=b.get(he[0].toLowerCase()),ke+he[0].length):-1}function B(se,Se,ke){var he=T.exec(Se.slice(ke));return he?(se.m=O.get(he[0].toLowerCase()),ke+he[0].length):-1}function K(se,Se,ke){var he=w.exec(Se.slice(ke));return he?(se.m=_.get(he[0].toLowerCase()),ke+he[0].length):-1}function V(se,Se,ke){return U(se,t,Se,ke)}function Z(se,Se,ke){return U(se,n,Se,ke)}function G(se,Se,ke){return U(se,r,Se,ke)}function J(se){return o[se.getDay()]}function Q(se){return a[se.getDay()]}function oe(se){return u[se.getMonth()]}function te(se){return l[se.getMonth()]}function z(se){return i[+(se.getHours()>=12)]}function X(se){return 1+~~(se.getMonth()/3)}function re(se){return o[se.getUTCDay()]}function ie(se){return a[se.getUTCDay()]}function fe(se){return u[se.getUTCMonth()]}function de(se){return l[se.getUTCMonth()]}function pe(se){return i[+(se.getUTCHours()>=12)]}function Ne(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Se=P(se+="",j);return Se.toString=function(){return se},Se},parse:function(se){var Se=I(se+="",!1);return Se.toString=function(){return se},Se},utcFormat:function(se){var Se=P(se+="",C);return Se.toString=function(){return se},Se},utcParse:function(se){var Se=I(se+="",!0);return Se.toString=function(){return se},Se}}}var iI={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,ove=/^%/,sve=/[\\^$*+?|[\]().{}]/g;function Rt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function lve(e){return e.replace(sve,"\\$&")}function gm(e){return new RegExp("^(?:"+e.map(lve).join("|")+")","i")}function bm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function cve(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function uve(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function dve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function fve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function hve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aI(e,t,n){var r=xr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oI(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mve(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pve(e,t,n){var r=xr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function gve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sI(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bve(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lI(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function yve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function vve(e,t,n){var r=xr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xve(e,t,n){var r=xr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wve(e,t,n){var r=xr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _ve(e,t,n){var r=ove.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Sve(e,t,n){var r=xr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function kve(e,t,n){var r=xr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cI(e,t){return Rt(e.getDate(),t,2)}function Eve(e,t){return Rt(e.getHours(),t,2)}function jve(e,t){return Rt(e.getHours()%12||12,t,2)}function Tve(e,t){return Rt(1+Wp.count(Is(e),e),t,3)}function mz(e,t){return Rt(e.getMilliseconds(),t,3)}function Ave(e,t){return mz(e,t)+"000"}function Nve(e,t){return Rt(e.getMonth()+1,t,2)}function Ove(e,t){return Rt(e.getMinutes(),t,2)}function Cve(e,t){return Rt(e.getSeconds(),t,2)}function Mve(e){var t=e.getDay();return t===0?7:t}function Dve(e,t){return Rt(Bx.count(Is(e)-1,e),t,2)}function pz(e){var t=e.getDay();return t>=4||t===0?bf(e):bf.ceil(e)}function Pve(e,t){return e=pz(e),Rt(bf.count(Is(e),e)+(Is(e).getDay()===4),t,2)}function Rve(e){return e.getDay()}function Lve(e,t){return Rt(bv.count(Is(e)-1,e),t,2)}function Ive(e,t){return Rt(e.getFullYear()%100,t,2)}function $ve(e,t){return e=pz(e),Rt(e.getFullYear()%100,t,2)}function Bve(e,t){return Rt(e.getFullYear()%1e4,t,4)}function zve(e,t){var n=e.getDay();return e=n>=4||n===0?bf(e):bf.ceil(e),Rt(e.getFullYear()%1e4,t,4)}function Uve(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rt(t/60|0,"0",2)+Rt(t%60,"0",2)}function uI(e,t){return Rt(e.getUTCDate(),t,2)}function Fve(e,t){return Rt(e.getUTCHours(),t,2)}function Hve(e,t){return Rt(e.getUTCHours()%12||12,t,2)}function Gve(e,t){return Rt(1+$x.count($s(e),e),t,3)}function gz(e,t){return Rt(e.getUTCMilliseconds(),t,3)}function Yve(e,t){return gz(e,t)+"000"}function qve(e,t){return Rt(e.getUTCMonth()+1,t,2)}function Kve(e,t){return Rt(e.getUTCMinutes(),t,2)}function Wve(e,t){return Rt(e.getUTCSeconds(),t,2)}function Vve(e){var t=e.getUTCDay();return t===0?7:t}function Zve(e,t){return Rt(zx.count($s(e)-1,e),t,2)}function bz(e){var t=e.getUTCDay();return t>=4||t===0?yf(e):yf.ceil(e)}function Xve(e,t){return e=bz(e),Rt(yf.count($s(e),e)+($s(e).getUTCDay()===4),t,2)}function Jve(e){return e.getUTCDay()}function Qve(e,t){return Rt(yv.count($s(e)-1,e),t,2)}function exe(e,t){return Rt(e.getUTCFullYear()%100,t,2)}function txe(e,t){return e=bz(e),Rt(e.getUTCFullYear()%100,t,2)}function nxe(e,t){return Rt(e.getUTCFullYear()%1e4,t,4)}function rxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?yf(e):yf.ceil(e),Rt(e.getUTCFullYear()%1e4,t,4)}function ixe(){return"+0000"}function dI(){return"%"}function fI(e){return+e}function hI(e){return Math.floor(+e/1e3)}var Md,yz,vz;axe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function axe(e){return Md=ave(e),yz=Md.format,Md.parse,vz=Md.utcFormat,Md.utcParse,Md}function oxe(e){return new Date(e)}function sxe(e){return e instanceof Date?+e:+new Date(+e)}function rA(e,t,n,r,i,a,o,l,u,d){var h=HT(),m=h.invert,b=h.domain,y=d(".%L"),k=d(":%S"),w=d("%I:%M"),_=d("%I %p"),T=d("%a %d"),O=d("%b %d"),j=d("%B"),C=d("%Y");function M(P){return(u(P)<P?y:l(P)<P?k:o(P)<P?w:a(P)<P?_:r(P)<P?i(P)<P?T:O:n(P)<P?j:C)(P)}return h.invert=function(P){return new Date(m(P))},h.domain=function(P){return arguments.length?b(Array.from(P,sxe)):b().map(oxe)},h.ticks=function(P){var I=b();return e(I[0],I[I.length-1],P??10)},h.tickFormat=function(P,I){return I==null?M:d(I)},h.nice=function(P){var I=b();return(!P||typeof P.range!="function")&&(P=t(I[0],I[I.length-1],P??10)),P?b(az(I,P)):h},h.copy=function(){return Kp(h,rA(e,t,n,r,i,a,o,l,u,d))},h}function lxe(){return Oa.apply(rA(rve,ive,Is,tA,Bx,Wp,QT,XT,mu,yz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cxe(){return Oa.apply(rA(tve,nve,$s,nA,zx,$x,eA,JT,mu,vz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ux(){var e=0,t=1,n,r,i,a,o=Vr,l=!1,u;function d(m){return m==null||isNaN(m=+m)?u:o(i===0?.5:(m=(a(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(b){var y,k;return arguments.length?([y,k]=b,o=m(y,k),d):[o(0),o(1)]}}return d.range=h(Rf),d.rangeRound=h(FT),d.unknown=function(m){return arguments.length?(u=m,d):u},function(m){return a=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),d}}function ac(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xz(){var e=ic(Ux()(Vr));return e.copy=function(){return ac(e,xz())},Gs.apply(e,arguments)}function wz(){var e=qT(Ux()).domain([1,10]);return e.copy=function(){return ac(e,wz()).base(e.base())},Gs.apply(e,arguments)}function _z(){var e=KT(Ux());return e.copy=function(){return ac(e,_z()).constant(e.constant())},Gs.apply(e,arguments)}function iA(){var e=WT(Ux());return e.copy=function(){return ac(e,iA()).exponent(e.exponent())},Gs.apply(e,arguments)}function uxe(){return iA.apply(null,arguments).exponent(.5)}function Sz(){var e=[],t=Vr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Yp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Yl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Vbe(e,a/r))},n.copy=function(){return Sz(t).domain(e)},Gs.apply(n,arguments)}function Fx(){var e=0,t=.5,n=1,r=1,i,a,o,l,u,d=Vr,h,m=!1,b;function y(w){return isNaN(w=+w)?b:(w=.5+((w=+h(w))-a)*(r*w<r*a?l:u),d(m?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y):[e,t,n]},y.clamp=function(w){return arguments.length?(m=!!w,y):m},y.interpolator=function(w){return arguments.length?(d=w,y):d};function k(w){return function(_){var T,O,j;return arguments.length?([T,O,j]=_,d=_ye(w,[T,O,j]),y):[d(0),d(.5),d(1)]}}return y.range=k(Rf),y.rangeRound=k(FT),y.unknown=function(w){return arguments.length?(b=w,y):b},function(w){return h=w,i=w(e),a=w(t),o=w(n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,y}}function kz(){var e=ic(Fx()(Vr));return e.copy=function(){return ac(e,kz())},Gs.apply(e,arguments)}function Ez(){var e=qT(Fx()).domain([.1,1,10]);return e.copy=function(){return ac(e,Ez()).base(e.base())},Gs.apply(e,arguments)}function jz(){var e=KT(Fx());return e.copy=function(){return ac(e,jz()).constant(e.constant())},Gs.apply(e,arguments)}function aA(){var e=WT(Fx());return e.copy=function(){return ac(e,aA()).exponent(e.exponent())},Gs.apply(e,arguments)}function dxe(){return aA.apply(null,arguments).exponent(.5)}const Tm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:BT,scaleDiverging:kz,scaleDivergingLog:Ez,scaleDivergingPow:aA,scaleDivergingSqrt:dxe,scaleDivergingSymlog:jz,scaleIdentity:iz,scaleImplicit:vE,scaleLinear:rz,scaleLog:oz,scaleOrdinal:$T,scalePoint:Jbe,scalePow:VT,scaleQuantile:cz,scaleQuantize:uz,scaleRadial:lz,scaleSequential:xz,scaleSequentialLog:wz,scaleSequentialPow:iA,scaleSequentialQuantile:Sz,scaleSequentialSqrt:uxe,scaleSequentialSymlog:_z,scaleSqrt:Yye,scaleSymlog:sz,scaleThreshold:dz,scaleTime:lxe,scaleUtc:cxe,tickFormat:nz},Symbol.toStringTag,{value:"Module"}));var oc=e=>e.chartData,fxe=xe([oc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),oA=(e,t,n,r)=>r?fxe(e):oc(e);function Ql(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Pn(t)&&Pn(n))return!0}return!1}function mI(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Tz(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Pn(n))i=n;else if(typeof n=="function")return;if(Pn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(Ql(o))return o}}function hxe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Ql(r))return mI(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(et(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[0]))}catch{}else if(typeof i=="string"&&G3.test(i)){var u=G3.exec(i);if(u==null||t==null)o=void 0;else{var d=+u[1];o=t[0]-d}}else o=t?.[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(et(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t?.[1]))}catch{}else if(typeof a=="string"&&Y3.test(a)){var h=Y3.exec(a);if(h==null||t==null)l=void 0;else{var m=+h[1];l=t[1]+m}}else l=t?.[1];var b=[o,l];if(Ql(b))return t==null?b:mI(b,t,n)}}}var Lf=1e9,mxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lA,vn=!0,ja="[DecimalError] ",wu=ja+"Invalid argument: ",sA=ja+"Exponent out of range: ",If=Math.floor,ou=Math.pow,pxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zi,pr=1e7,cn=7,Az=9007199254740991,vv=If(Az/cn),Fe={};Fe.absoluteValue=Fe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Fe.comparedTo=Fe.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*cn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(e){return Ns(this,new this.constructor(e))};Fe.dividedToIntegerBy=Fe.idiv=function(e){var t=this,n=t.constructor;return tn(Ns(t,new n(e),0,1),n.precision)};Fe.equals=Fe.eq=function(e){return!this.cmp(e)};Fe.exponent=function(){return Xn(this)};Fe.greaterThan=Fe.gt=function(e){return this.cmp(e)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(e){return this.cmp(e)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(e){return this.cmp(e)<0};Fe.lessThanOrEqualTo=Fe.lte=function(e){return this.cmp(e)<1};Fe.logarithm=Fe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(zi))throw Error(ja+"NaN");if(n.s<1)throw Error(ja+(n.s?"NaN":"-Infinity"));return n.eq(zi)?new r(0):(vn=!1,t=Ns(bp(n,a),bp(e,a),a),vn=!0,tn(t,i))};Fe.minus=Fe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Cz(t,e):Nz(t,(e.s=-e.s,e))};Fe.modulo=Fe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ja+"NaN");return n.s?(vn=!1,t=Ns(n,e,0,1).times(e),vn=!0,n.minus(t)):tn(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return Oz(this)};Fe.naturalLogarithm=Fe.ln=function(){return bp(this)};Fe.negated=Fe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Fe.plus=Fe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Nz(t,e):Cz(t,(e.s=-e.s,e))};Fe.precision=Fe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wu+e);if(t=Xn(i)+1,r=i.d.length-1,n=r*cn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Fe.squareRoot=Fe.sqrt=function(){var e,t,n,r,i,a,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(ja+"NaN")}for(e=Xn(l),vn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Ro(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=If((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new u(t)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(Ns(l,a,o+2)).times(.5),Ro(a.d).slice(0,o)===(t=Ro(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(tn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return vn=!0,tn(r,n)};Fe.times=Fe.mul=function(e){var t,n,r,i,a,o,l,u,d,h=this,m=h.constructor,b=h.d,y=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,u=b.length,d=y.length,u<d&&(a=b,b=y,y=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=u+r;i>r;)l=a[i]+y[r]*b[i-r-1]+t,a[i--]=l%pr|0,t=l/pr|0;a[i]=(a[i]+t)%pr|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,vn?tn(e,m.precision):e};Fe.toDecimalPlaces=Fe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ho(e,0,Lf),t===void 0?t=r.rounding:Ho(t,0,8),tn(n,e+Xn(n)+1,t))};Fe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Au(r,!0):(Ho(e,0,Lf),t===void 0?t=i.rounding:Ho(t,0,8),r=tn(new i(r),e+1,t),n=Au(r,!0,e+1)),n};Fe.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Au(i):(Ho(e,0,Lf),t===void 0?t=a.rounding:Ho(t,0,8),r=tn(new a(i),e+Xn(i)+1,t),n=Au(r.abs(),!1,e+Xn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var e=this,t=e.constructor;return tn(new t(e),Xn(e)+1,t.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(e){var t,n,r,i,a,o,l=this,u=l.constructor,d=12,h=+(e=new u(e));if(!e.s)return new u(zi);if(l=new u(l),!l.s){if(e.s<1)throw Error(ja+"Infinity");return l}if(l.eq(zi))return l;if(r=u.precision,e.eq(zi))return tn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=Az){for(i=new u(zi),t=Math.ceil(r/cn+4),vn=!1;n%2&&(i=i.times(l),gI(i.d,t)),n=If(n/2),n!==0;)l=l.times(l),gI(l.d,t);return vn=!0,e.s<0?new u(zi).div(i):tn(i,r)}}else if(a<0)throw Error(ja+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,vn=!1,i=e.times(bp(l,r+d)),vn=!0,i=Oz(i),i.s=a,i};Fe.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Xn(i),r=Au(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ho(e,1,Lf),t===void 0?t=a.rounding:Ho(t,0,8),i=tn(new a(i),e,t),n=Xn(i),r=Au(i,e<=n||n<=a.toExpNeg,e)),r};Fe.toSignificantDigits=Fe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ho(e,1,Lf),t===void 0?t=r.rounding:Ho(t,0,8)),tn(new r(n),e,t)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xn(e),n=e.constructor;return Au(e,t<=n.toExpNeg||t>=n.toExpPos)};function Nz(e,t){var n,r,i,a,o,l,u,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),vn?tn(t,m):t;if(u=e.d,d=t.d,o=e.e,i=t.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,l=d.length):(r=d,i=o,l=u.length),o=Math.ceil(m/cn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=d.length,l-a<0&&(a=l,r=d,d=u,u=r),n=0;a;)n=(u[--a]=u[a]+d[a]+n)/pr|0,u[a]%=pr;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=i,vn?tn(t,m):t}function Ho(e,t,n){if(e!==~~e||e<t||e>n)throw Error(wu+e)}function Ro(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=cn-r.length,n&&(a+=Dl(n)),a+=r;o=e[t],r=o+"",n=cn-r.length,n&&(a+=Dl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Ns=(function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%pr|0,o=a/pr|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,u;if(a!=o)u=a>o?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*pr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,u,d,h,m,b,y,k,w,_,T,O,j,C,M,P,I,U,W=r.constructor,q=r.s==i.s?1:-1,H=r.d,B=i.d;if(!r.s)return new W(r);if(!i.s)throw Error(ja+"Division by zero");for(u=r.e-i.e,I=B.length,M=H.length,y=new W(q),k=y.d=[],d=0;B[d]==(H[d]||0);)++d;if(B[d]>(H[d]||0)&&--u,a==null?O=a=W.precision:o?O=a+(Xn(r)-Xn(i))+1:O=a,O<0)return new W(0);if(O=O/cn+2|0,d=0,I==1)for(h=0,B=B[0],O++;(d<M||h)&&O--;d++)j=h*pr+(H[d]||0),k[d]=j/B|0,h=j%B|0;else{for(h=pr/(B[0]+1)|0,h>1&&(B=e(B,h),H=e(H,h),I=B.length,M=H.length),C=I,w=H.slice(0,I),_=w.length;_<I;)w[_++]=0;U=B.slice(),U.unshift(0),P=B[0],B[1]>=pr/2&&++P;do h=0,l=t(B,w,I,_),l<0?(T=w[0],I!=_&&(T=T*pr+(w[1]||0)),h=T/P|0,h>1?(h>=pr&&(h=pr-1),m=e(B,h),b=m.length,_=w.length,l=t(m,w,b,_),l==1&&(h--,n(m,I<b?U:B,b))):(h==0&&(l=h=1),m=B.slice()),b=m.length,b<_&&m.unshift(0),n(w,m,_),l==-1&&(_=w.length,l=t(B,w,I,_),l<1&&(h++,n(w,I<_?U:B,_))),_=w.length):l===0&&(h++,w=[0]),k[d++]=h,l&&w[0]?w[_++]=H[C]||0:(w=[H[C]],_=1);while((C++<M||w[0]!==void 0)&&O--)}return k[0]||k.shift(),y.e=u,tn(y,o?a+Xn(y)+1:a)}})();function Oz(e,t){var n,r,i,a,o,l,u=0,d=0,h=e.constructor,m=h.precision;if(Xn(e)>16)throw Error(sA+Xn(e));if(!e.s)return new h(zi);for(vn=!1,l=m,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(ou(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new h(zi),h.precision=l;;){if(i=tn(i.times(e),l),n=n.times(++u),o=a.plus(Ns(i,n,l)),Ro(o.d).slice(0,l)===Ro(a.d).slice(0,l)){for(;d--;)a=tn(a.times(a),l);return h.precision=m,t==null?(vn=!0,tn(a,m)):a}a=o}}function Xn(e){for(var t=e.e*cn,n=e.d[0];n>=10;n/=10)t++;return t}function sk(e,t,n){if(t>e.LN10.sd())throw vn=!0,n&&(e.precision=n),Error(ja+"LN10 precision limit exceeded");return tn(new e(e.LN10),t)}function Dl(e){for(var t="";e--;)t+="0";return t}function bp(e,t){var n,r,i,a,o,l,u,d,h,m=1,b=10,y=e,k=y.d,w=y.constructor,_=w.precision;if(y.s<1)throw Error(ja+(y.s?"NaN":"-Infinity"));if(y.eq(zi))return new w(0);if(t==null?(vn=!1,d=_):d=t,y.eq(10))return t==null&&(vn=!0),sk(w,d);if(d+=b,w.precision=d,n=Ro(k),r=n.charAt(0),a=Xn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(e),n=Ro(y.d),r=n.charAt(0),m++;a=Xn(y),r>1?(y=new w("0."+n),a++):y=new w(r+"."+n.slice(1))}else return u=sk(w,d+2,_).times(a+""),y=bp(new w(r+"."+n.slice(1)),d-b).plus(u),w.precision=_,t==null?(vn=!0,tn(y,_)):y;for(l=o=y=Ns(y.minus(zi),y.plus(zi),d),h=tn(y.times(y),d),i=3;;){if(o=tn(o.times(h),d),u=l.plus(Ns(o,new w(i),d)),Ro(u.d).slice(0,d)===Ro(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(sk(w,d+2,_).times(a+""))),l=Ns(l,new w(m),d),w.precision=_,t==null?(vn=!0,tn(l,_)):l;l=u,i+=2}}function pI(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=If(n/cn),e.d=[],r=(n+1)%cn,n<0&&(r+=cn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=cn;r<i;)e.d.push(+t.slice(r,r+=cn));t=t.slice(r),r=cn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),vn&&(e.e>vv||e.e<-vv))throw Error(sA+n)}else e.s=0,e.e=0,e.d=[0];return e}function tn(e,t,n){var r,i,a,o,l,u,d,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=cn,i=t,d=m[h=0];else{if(h=Math.ceil((r+1)/cn),a=m.length,h>=a)return e;for(d=a=m[h],o=1;a>=10;a/=10)o++;r%=cn,i=r-cn+o}if(n!==void 0&&(a=ou(10,o-i-1),l=d/a%10|0,u=t<0||m[h+1]!==void 0||d%a,u=n<4?(l||u)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/ou(10,o-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return u?(a=Xn(e),m.length=1,t=t-a-1,m[0]=ou(10,(cn-t%cn)%cn),e.e=If(-t/cn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,a=1,h--):(m.length=h+1,a=ou(10,cn-r),m[h]=i>0?(d/ou(10,o-i)%ou(10,i)|0)*a:0),u)for(;;)if(h==0){(m[0]+=a)==pr&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=pr)break;m[h--]=0,a=1}for(r=m.length;m[--r]===0;)m.pop();if(vn&&(e.e>vv||e.e<-vv))throw Error(sA+Xn(e));return e}function Cz(e,t){var n,r,i,a,o,l,u,d,h,m,b=e.constructor,y=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),vn?tn(t,y):t;if(u=e.d,m=t.d,r=t.e,d=e.e,u=u.slice(),o=d-r,o){for(h=o<0,h?(n=u,o=-o,l=m.length):(n=m,r=d,l=u.length),i=Math.max(Math.ceil(y/cn),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=m.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=m[i]){h=u[i]<m[i];break}o=0}for(h&&(n=u,u=m,m=n,t.s=-t.s),l=u.length,i=m.length-l;i>0;--i)u[l++]=0;for(i=m.length;i>o;){if(u[--i]<m[i]){for(a=i;a&&u[--a]===0;)u[a]=pr-1;--u[a],u[i]+=pr}u[i]-=m[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=r,vn?tn(t,y):t):new b(0)}function Au(e,t,n){var r,i=Xn(e),a=Ro(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Dl(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Dl(-i-1)+a,n&&(r=n-o)>0&&(a+=Dl(r))):i>=o?(a+=Dl(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Dl(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Dl(r))),e.s<0?"-"+a:a}function gI(e,t){if(e.length>t)return e.length=t,!0}function Mz(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(wu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return pI(o,a.toString())}else if(typeof a!="string")throw Error(wu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,pxe.test(a))pI(o,a);else throw Error(wu+a)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Mz,i.config=i.set=gxe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function gxe(e){if(!e||typeof e!="object")throw Error(ja+"Object expected");var t,n,r,i=["precision",1,Lf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(If(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(wu+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wu+n+": "+r);return this}var lA=Mz(mxe);zi=new lA(1);const qt=lA;var bxe=e=>e,Dz={},Pz=e=>e===Dz,bI=e=>function t(){return arguments.length===0||arguments.length===1&&Pz(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Rz=(e,t)=>e===1?t:bI(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==Dz).length;return a>=e?t(...r):Rz(e-a,bI(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=r.map(h=>Pz(h)?l.shift():h);return t(...d,...l)}))}),yxe=e=>Rz(e.length,e),SE=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},vxe=yxe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),xxe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return bxe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((l,u)=>u(l),a(...arguments))}},kE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Lz(e){var t;return e===0?t=1:t=Math.floor(new qt(e).abs().log(10).toNumber())+1,t}function Iz(e,t,n){for(var r=new qt(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var $z=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},Bz=(e,t,n)=>{if(e.lte(0))return new qt(0);var r=Lz(e.toNumber()),i=new qt(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new qt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return t?new qt(u.toNumber()):new qt(Math.ceil(u.toNumber()))},wxe=(e,t,n)=>{var r=new qt(1),i=new qt(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new qt(10).pow(Lz(e)-1),i=new qt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new qt(Math.floor(e)))}else e===0?i=new qt(Math.floor((t-1)/2)):n||(i=new qt(Math.floor(e)));var o=Math.floor((t-1)/2),l=xxe(vxe(u=>i.add(new qt(u-o).mul(r)).toNumber()),SE);return l(0,t)},zz=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new qt(0),tickMin:new qt(0),tickMax:new qt(0)};var o=Bz(new qt(n).sub(t).div(r-1),i,a),l;t<=0&&n>=0?l=new qt(0):(l=new qt(t).add(n).div(2),l=l.sub(new qt(l).mod(o)));var u=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new qt(n).sub(l).div(o).toNumber()),h=u+d+1;return h>r?zz(t,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,u=n>0?u:u+(r-h)),{step:o,tickMin:l.sub(new qt(u).mul(o)),tickMax:l.add(new qt(d).mul(o))})},_xe=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,u]=$z([n,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...SE(0,i-1).map(()=>1/0)]:[...SE(0,i-1).map(()=>-1/0),u];return n>r?kE(d):d}if(l===u)return wxe(l,i,a);var{step:h,tickMin:m,tickMax:b}=zz(l,u,o,a,0),y=Iz(m,b.add(new qt(.1).mul(h)),h);return n>r?kE(y):y},Sxe=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=$z([r,i]);if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var u=Math.max(n,2),d=Bz(new qt(l).sub(o).div(u-1),a,0),h=[...Iz(new qt(o),new qt(l),d),l];return a===!1&&(h=h.map(m=>Math.round(m))),r>i?kE(h):h},kxe=e=>e.rootProps.barCategoryGap,Hx=e=>e.rootProps.stackOffset,Uz=e=>e.rootProps.reverseStackOrder,cA=e=>e.options.chartName,uA=e=>e.rootProps.syncId,Fz=e=>e.rootProps.syncMethod,dA=e=>e.options.eventEmitter,Exe=e=>e.rootProps.baseValue,Zr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},_s={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},$i={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Gx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},jxe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:_s.reversed,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:_s.type,unit:void 0},Txe={allowDataOverflow:$i.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$i.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$i.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$i.scale,tick:$i.tick,tickCount:$i.tickCount,ticks:void 0,type:$i.type,unit:void 0},Axe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_s.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_s.scale,tick:_s.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Nxe={allowDataOverflow:$i.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$i.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$i.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$i.scale,tick:$i.tick,tickCount:$i.tickCount,ticks:void 0,type:"category",unit:void 0},fA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Axe:jxe,hA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Nxe:Txe,Yx=e=>e.polarOptions,mA=xe([Fs,Hs,Pr],_be),Hz=xe([Yx,mA],(e,t)=>{if(e!=null)return Jl(e.innerRadius,t,0)}),Gz=xe([Yx,mA],(e,t)=>{if(e!=null)return Jl(e.outerRadius,t,t*.8)}),Oxe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},Yz=xe([Yx],Oxe);xe([fA,Yz],Gx);var qz=xe([mA,Hz,Gz],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});xe([hA,qz],Gx);var Kz=xe([an,Yx,Hz,Gz,Fs,Hs],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=t;return{cx:Jl(o,i,i/2),cy:Jl(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),ar=(e,t)=>t,qx=(e,t,n)=>n;function pA(e){return e?.id}function Wz(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=pA(l);d.forEach((m,b)=>{var y=a==null||i?b:String(Ur(m,a,null)),k=Ur(m,l.dataKey,0),w;o.has(y)?w=o.get(y):w={},Object.assign(w,{[h]:k}),o.set(y,w)})}}),Array.from(o.values())}function gA(e){return e.stackId!=null&&e.dataKey!=null}var Kx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Wx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Cxe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var or=e=>{var t=an(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},$f=e=>e.tooltip.settings.axisId;function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){Mxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mxe(e,t,n){return(t=Dxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dxe(e){var t=Pxe(e,"string");return typeof t=="symbol"?t:t+""}function Pxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EE=[0,"auto"],fr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Vz=(e,t)=>e.cartesianAxis.xAxis[t],Ys=(e,t)=>{var n=Vz(e,t);return n??fr},hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:EE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Fp},Zz=(e,t)=>e.cartesianAxis.yAxis[t],qs=(e,t)=>{var n=Zz(e,t);return n??hr},Rxe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bA=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??Rxe},ei=(e,t,n)=>{switch(t){case"xAxis":return Ys(e,n);case"yAxis":return qs(e,n);case"zAxis":return bA(e,n);case"angleAxis":return fA(e,n);case"radiusAxis":return hA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Lxe=(e,t,n)=>{switch(t){case"xAxis":return Ys(e,n);case"yAxis":return qs(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Vp=(e,t,n)=>{switch(t){case"xAxis":return Ys(e,n);case"yAxis":return qs(e,n);case"angleAxis":return fA(e,n);case"radiusAxis":return hA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Xz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Jz(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Qz=e=>e.graphicalItems.cartesianItems,Ixe=xe([ar,qx],Jz),eU=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Zp=xe([Qz,ei,Ixe],eU,{memoizeOptions:{resultEqualityCheck:Wx}}),tU=xe([Zp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(gA)),nU=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$xe=xe([Zp],nU),rU=e=>e.map(t=>t.data).filter(Boolean).flat(1),Bxe=xe([Zp],rU,{memoizeOptions:{resultEqualityCheck:Wx}}),iU=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},yA=xe([Bxe,oA],iU),aU=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Ur(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Ur(i,r)}))):e.map(r=>({value:r})),Vx=xe([yA,ei,Zp],aU);function oU(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ny(e){if(Uo(e)||e instanceof Date){var t=Number(e);if(Pn(t))return t}}function vI(e){if(Array.isArray(e)){var t=[ny(e[0]),ny(e[1])];return Ql(t)?t:void 0}var n=ny(e);if(n!=null)return[n,n]}function Bs(e){return e.map(ny).filter(ome)}function zxe(e,t,n){return!n||typeof t!="number"||ao(t)?[]:n.length?Bs(n.flatMap(r=>{var i=Ur(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Pn(a)||!Pn(o)))return[t-a,t+o]})):[]}var sr=e=>{var t=or(e),n=$f(e);return Vp(e,t,n)},Xp=xe([sr],e=>e?.dataKey),Uxe=xe([tU,oA,sr],Wz),sU=(e,t,n,r)=>{var i={},a=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),i);return Object.fromEntries(Object.entries(a).map(o=>{var[l,u]=o,d=r?[...u].reverse():u,h=d.map(pA);return[l,{stackedData:d0e(e,h,n),graphicalItems:d}]}))},jE=xe([Uxe,tU,Hx,Uz],sU),lU=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=p0e(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Fxe=xe([ei],e=>e.allowDataOverflow),vA=e=>{var t;if(e==null||!("domain"in e))return EE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Bs(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:EE},cU=xe([ei],vA),uU=xe([cU,Fxe],Tz),Hxe=xe([jE,oc,ar,uU],lU,{memoizeOptions:{resultEqualityCheck:Kx}}),xA=e=>e.errorBars,Gxe=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>oU(n,r)),wv=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},dU=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(l=>{n.forEach(u=>{var d,h,m=(d=r[u.id])===null||d===void 0?void 0:d.filter(T=>oU(i,T)),b=Ur(l,(h=t.dataKey)!==null&&h!==void 0?h:u.dataKey),y=zxe(l,b,m);if(y.length>=2){var k=Math.min(...y),w=Math.max(...y);(a==null||k<a)&&(a=k),(o==null||w>o)&&(o=w)}var _=vI(b);_!=null&&(a=a==null?_[0]:Math.min(a,_[0]),o=o==null?_[1]:Math.max(o,_[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var u=vI(Ur(l,t.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Pn(a)&&Pn(o))return[a,o]},Yxe=xe([yA,ei,$xe,xA,ar],dU,{memoizeOptions:{resultEqualityCheck:Kx}});function qxe(e){var{value:t}=e;if(Uo(t)||t instanceof Date)return t}var Kxe=(e,t,n)=>{var r=e.map(qxe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&O9(r))?q8(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},fU=e=>e.referenceElements.dots,Bf=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Wxe=xe([fU,ar,qx],Bf),hU=e=>e.referenceElements.areas,Vxe=xe([hU,ar,qx],Bf),mU=e=>e.referenceElements.lines,Zxe=xe([mU,ar,qx],Bf),pU=(e,t)=>{var n=Bs(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Xxe=xe(Wxe,ar,pU),gU=(e,t)=>{var n=Bs(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Jxe=xe([Vxe,ar],gU);function Qxe(e){var t;if(e.x!=null)return Bs([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Bs(n)}function ewe(e){var t;if(e.y!=null)return Bs([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Bs(n)}var bU=(e,t)=>{var n=e.flatMap(r=>t==="xAxis"?Qxe(r):ewe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},twe=xe([Zxe,ar],bU),nwe=xe(Xxe,twe,Jxe,(e,t,n)=>wv(e,n,t)),yU=(e,t,n,r,i,a,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=u?wv(r,a,i):wv(a,i);return hxe(t,d,e.allowDataOverflow)},rwe=xe([ei,cU,uU,Hxe,Yxe,nwe,an,ar],yU,{memoizeOptions:{resultEqualityCheck:Kx}}),iwe=[0,1],vU=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=e,d=Us(t,a);if(d&&l==null){var h;return q8(0,(h=n?.length)!==null&&h!==void 0?h:0)}return u==="category"?Kxe(r,e,d):i==="expand"?iwe:o}},wA=xe([ei,an,yA,Vx,Hx,ar,rwe],vU),xU=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(ST(a));return l in Tm?l:"point"}}},Jp=xe([ei,an,Xz,cA,ar],xU);function awe(e){if(e!=null){if(e in Tm)return Tm[e]();var t="scale".concat(ST(e));if(t in Tm)return Tm[t]()}}function _A(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=awe(t);if(i!=null){var a=i.domain(n).range(r);return s0e(a),a}}}var wU=(e,t,n)=>{var r=vA(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ql(e))return _xe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ql(e))return Sxe(e,t.tickCount,t.allowDecimals)}},SA=xe([wA,Vp,Jp],wU),_U=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Ql(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],l=n[n.length-1];return[Math.min(i,a),Math.max(o,l)]}return t},owe=xe([ei,wA,SA,ar],_U),swe=xe(Vx,ei,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Bs(e.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),SU=xe(swe,an,kxe,Pr,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Pn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=Jl(n,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),lwe=(e,t)=>{var n=Ys(e,t);return n==null||typeof n.padding!="string"?0:SU(e,"xAxis",t,n.padding)},cwe=(e,t)=>{var n=qs(e,t);return n==null||typeof n.padding!="string"?0:SU(e,"yAxis",t,n.padding)},uwe=xe(Ys,lwe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),dwe=xe(qs,cwe,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),fwe=xe([Pr,uwe,Cx,Ox,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),hwe=xe([Pr,an,dwe,Cx,Ox,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Qp=(e,t,n,r)=>{var i;switch(t){case"xAxis":return fwe(e,n,r);case"yAxis":return hwe(e,n,r);case"zAxis":return(i=bA(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Yz(e);case"radiusAxis":return qz(e,n);default:return}},kU=xe([ei,Qp],Gx),zf=xe([ei,Jp,owe,kU],_A);xe([Zp,xA,ar],Gxe);function EU(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zx=(e,t)=>t,Xx=(e,t,n)=>n,mwe=xe(Ax,Zx,Xx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(EU)),pwe=xe(Nx,Zx,Xx,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(EU)),jU=(e,t)=>({width:e.width,height:t.height}),gwe=(e,t)=>{var n=typeof t.width=="number"?t.width:Fp;return{width:n,height:e.height}},bwe=xe(Pr,Ys,jU),ywe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},vwe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},xwe=xe(Hs,Pr,mwe,Zx,Xx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=jU(t,l);o==null&&(o=ywe(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;a[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),wwe=xe(Fs,Pr,pwe,Zx,Xx,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=gwe(t,l);o==null&&(o=vwe(t,r,e));var d=r==="left"&&!i||r==="right"&&i;a[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),_we=(e,t)=>{var n=Ys(e,t);if(n!=null)return xwe(e,n.orientation,n.mirror)},Swe=xe([Pr,Ys,_we,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),kwe=(e,t)=>{var n=qs(e,t);if(n!=null)return wwe(e,n.orientation,n.mirror)},Ewe=xe([Pr,qs,kwe,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n?.[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),jwe=xe(Pr,qs,(e,t)=>{var n=typeof t.width=="number"?t.width:Fp;return{width:n,height:e.height}}),TU=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,l=Us(e,r),u=t.map(d=>d.value);if(o&&l&&a==="category"&&i&&O9(u))return u}},kA=xe([an,Vx,ei,ar],TU),AU=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Us(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(l=>l.value)}},EA=xe([an,Vx,Vp,ar],AU),xI=xe([an,Lxe,Jp,zf,kA,EA,Qp,SA,ar],(e,t,n,r,i,a,o,l,u)=>{if(t!=null){var d=Us(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}}),Twe=(e,t,n,r,i,a,o,l,u)=>{if(!(t==null||r==null)){var d=Us(e,u),{type:h,ticks:m,tickCount:b}=t,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,k=h==="category"&&r.bandwidth?r.bandwidth()/y:0;k=u==="angleAxis"&&a!=null&&a.length>=2?va(a[0]-a[1])*2*k:k;var w=m||i;if(w){var _=w.map((T,O)=>{var j=o?o.indexOf(T):T;return{index:O,coordinate:r(j)+k,value:T,offset:k}});return _.filter(T=>Pn(T.coordinate))}return d&&l?l.map((T,O)=>({coordinate:r(T)+k,value:T,index:O,offset:k})).filter(T=>Pn(T.coordinate)):r.ticks?r.ticks(b).map(T=>({coordinate:r(T)+k,value:T,offset:k})):r.domain().map((T,O)=>({coordinate:r(T)+k,value:o?o[T]:T,index:O,offset:k}))}},NU=xe([an,Vp,Jp,zf,SA,Qp,kA,EA,ar],Twe),Awe=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=Us(e,o),{tickCount:u}=t,d=0;return d=o==="angleAxis"&&r?.length>=2?va(r[0]-r[1])*2*d:d,l&&a?a.map((h,m)=>({coordinate:n(h)+d,value:h,index:m,offset:d})):n.ticks?n.ticks(u).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,m)=>({coordinate:n(h)+d,value:i?i[h]:h,index:m,offset:d}))}},OU=xe([an,Vp,zf,Qp,kA,EA,ar],Awe),CU=xe(ei,zf,(e,t)=>{if(!(e==null||t==null))return xv(xv({},e),{},{scale:t})}),Nwe=xe([ei,Jp,wA,kU],_A);xe((e,t,n)=>bA(e,n),Nwe,(e,t)=>{if(!(e==null||t==null))return xv(xv({},e),{},{scale:t})});var Owe=xe([an,Ax,Nx],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),MU=e=>e.options.defaultTooltipEventType,DU=e=>e.options.validateTooltipEventTypes;function PU(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function jA(e,t){var n=MU(e),r=DU(e);return PU(t,n,r)}function Cwe(e){return it(t=>jA(t,e))}var RU=(e,t)=>{var n,r=Number(t);if(!(ao(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Mwe=e=>e.tooltip.settings,zl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Dwe={itemInteraction:{click:zl,hover:zl},axisInteraction:{click:zl,hover:zl},keyboardInteraction:zl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},LU=Si({name:"tooltip",initialState:Dwe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:bn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:bn()},removeTooltipEntrySettings:{reducer(e,t){var n=Ja(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:bn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Pwe,replaceTooltipEntrySettings:Rwe,removeTooltipEntrySettings:Lwe,setTooltipSettingsState:Iwe,setActiveMouseOverItemIndex:$we,mouseLeaveItem:gMe,mouseLeaveChart:IU,setActiveClickItemIndex:bMe,setMouseOverAxisIndex:$U,setMouseClickAxisIndex:Bwe,setSyncInteraction:TE,setKeyboardInteraction:AE}=LU.actions,zwe=LU.reducer;function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(r){Uwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uwe(e,t,n){return(t=Fwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fwe(e){var t=Hwe(e,"string");return typeof t=="symbol"?t:t+""}function Hwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gwe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Ywe(e){return e.index!=null}var BU=(e,t,n,r)=>{if(t==null)return zl;var i=Gwe(e,t,n);if(i==null)return zl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Ywe(i)){if(a)return Nb(Nb({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Nb(Nb({},zl),{},{coordinate:i.coordinate})};function qwe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Kwe(e,t){var n=qwe(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),o=Math.max(r,i);return n>=a&&n<=o}function Wwe(e,t,n){if(n==null||t==null)return!0;var r=Ur(e,t);return r==null||!Ql(n)?!0:Kwe(r,n)}var TA=(e,t,n,r)=>{var i=e?.index;if(i==null)return null;var a=Number(i);if(!Pn(a))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var u=Math.max(o,Math.min(a,l)),d=t[u];return d==null||Wwe(d,n,r)?String(u):null},zU=(e,t,n,r,i,a,o,l)=>{if(!(a==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,a);if(d!=null)return d;var h=i?.[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},UU=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},e0=e=>e.options.tooltipPayloadSearcher,Uf=e=>e.tooltip;function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(n),!0).forEach(function(r){Vwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vwe(e,t,n){return(t=Zwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zwe(e){var t=Xwe(e,"string");return typeof t=="symbol"?t:t+""}function Xwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jwe(e,t){return e??t}var FU=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=n,m=[];return e.reduce((b,y)=>{var k,{dataDefinedOnItem:w,settings:_}=y,T=Jwe(w,l),O=Array.isArray(T)?y8(T,d,h):T,j=(k=_?.dataKey)!==null&&k!==void 0?k:r,C=_?.nameKey,M;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&o==="axis"?M=C9(O,r,i):M=a(O,t,u,C),Array.isArray(M))M.forEach(I=>{var U=SI(SI({},_),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});b.push(q3({tooltipEntrySettings:U,dataKey:I.dataKey,payload:I.payload,value:Ur(I.payload,I.dataKey),name:I.name}))});else{var P;b.push(q3({tooltipEntrySettings:_,dataKey:j,payload:M,value:Ur(M,j),name:(P=Ur(M,C))!==null&&P!==void 0?P:_?.name}))}return b},m)}},AA=xe([sr,an,Xz,cA,or],xU),Qwe=xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),e_e=xe([or,$f],Jz),t0=xe([Qwe,sr,e_e],eU,{memoizeOptions:{resultEqualityCheck:Wx}}),t_e=xe([t0],e=>e.filter(gA)),n_e=xe([t0],rU,{memoizeOptions:{resultEqualityCheck:Wx}}),Ff=xe([n_e,oc],iU),r_e=xe([t_e,oc,sr],Wz),NA=xe([Ff,sr,t0],aU),HU=xe([sr],vA),i_e=xe([sr],e=>e.allowDataOverflow),GU=xe([HU,i_e],Tz),a_e=xe([t0],e=>e.filter(gA)),o_e=xe([r_e,a_e,Hx,Uz],sU),s_e=xe([o_e,oc,or,GU],lU),l_e=xe([t0],nU),c_e=xe([Ff,sr,l_e,xA,or],dU,{memoizeOptions:{resultEqualityCheck:Kx}}),u_e=xe([fU,or,$f],Bf),d_e=xe([u_e,or],pU),f_e=xe([hU,or,$f],Bf),h_e=xe([f_e,or],gU),m_e=xe([mU,or,$f],Bf),p_e=xe([m_e,or],bU),g_e=xe([d_e,p_e,h_e],wv),b_e=xe([sr,HU,GU,s_e,c_e,g_e,an,or],yU),n0=xe([sr,an,Ff,NA,Hx,or,b_e],vU),y_e=xe([n0,sr,AA],wU),v_e=xe([sr,n0,y_e,or],_U),YU=e=>{var t=or(e),n=$f(e),r=!1;return Qp(e,t,n,r)},qU=xe([sr,YU],Gx),KU=xe([sr,AA,v_e,qU],_A),x_e=xe([an,NA,sr,or],TU),w_e=xe([an,NA,sr,or],AU),__e=(e,t,n,r,i,a,o,l)=>{if(t){var{type:u}=t,d=Us(e,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=l==="angleAxis"&&i!=null&&i?.length>=2?va(i[0]-i[1])*2*m:m,d&&o?o.map((b,y)=>({coordinate:r(b)+m,value:b,index:y,offset:m})):r.domain().map((b,y)=>({coordinate:r(b)+m,value:a?a[b]:b,index:y,offset:m}))}}},Ks=xe([an,sr,AA,KU,YU,x_e,w_e,or],__e),OA=xe([MU,DU,Mwe],(e,t,n)=>PU(n.shared,e,t)),WU=e=>e.tooltip.settings.trigger,CA=e=>e.tooltip.settings.defaultIndex,r0=xe([Uf,OA,WU,CA],BU),yp=xe([r0,Ff,Xp,n0],TA),VU=xe([Ks,yp],RU),S_e=xe([r0],e=>{if(e)return e.dataKey});xe([r0],e=>{if(e)return e.graphicalItemId});var ZU=xe([Uf,OA,WU,CA],UU),k_e=xe([Fs,Hs,an,Pr,Ks,CA,ZU,e0],zU),E_e=xe([r0,k_e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),j_e=xe([r0],e=>e.active),T_e=xe([ZU,yp,oc,Xp,VU,e0,OA],FU),A_e=xe([T_e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(r){N_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N_e(e,t,n){return(t=O_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O_e(e){var t=C_e(e,"string");return typeof t=="symbol"?t:t+""}function C_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M_e=()=>it(sr),D_e=()=>{var e=M_e(),t=it(Ks),n=it(KU);return ev(!e||!n?void 0:EI(EI({},e),{},{scale:n}),t)};function jI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(n),!0).forEach(function(r){P_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P_e(e,t,n){return(t=R_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R_e(e){var t=L_e(e,"string");return typeof t=="symbol"?t:t+""}function L_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I_e=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},$_e=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Dd(Dd(Dd({},r),Or(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:u}=r;return Dd(Dd(Dd({},r),Or(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function B_e(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var XU=(e,t,n,r,i)=>{var a,o=-1,l=(a=t?.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?n[u-1].coordinate:n[l-1].coordinate,h=n[u].coordinate,m=u>=l-1?n[0].coordinate:n[u+1].coordinate,b=void 0;if(va(h-d)!==va(m-h)){var y=[];if(va(m-h)===va(i[1]-i[0])){b=m;var k=h+i[1]-i[0];y[0]=Math.min(k,(k+d)/2),y[1]=Math.max(k,(k+d)/2)}else{b=d;var w=m+i[1]-i[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var _=[Math.min(h,(b+h)/2),Math.max(h,(b+h)/2)];if(e>_[0]&&e<=_[1]||e>=y[0]&&e<=y[1]){({index:o}=n[u]);break}}else{var T=Math.min(d,m),O=Math.max(d,m);if(e>(T+h)/2&&e<=(O+h)/2){({index:o}=n[u]);break}}}else if(t){for(var j=0;j<l;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:o}=t[j]);break}}return o},JU=()=>it(cA),MA=(e,t)=>t,QU=(e,t,n)=>n,DA=(e,t,n,r)=>r,z_e=xe(Ks,e=>vx(e,t=>t.coordinate)),PA=xe([Uf,MA,QU,DA],BU),RA=xe([PA,Ff,Xp,n0],TA),U_e=(e,t,n)=>{if(t!=null){var r=Uf(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},eF=xe([Uf,MA,QU,DA],UU),_v=xe([Fs,Hs,an,Pr,Ks,DA,eF,e0],zU),F_e=xe([PA,_v],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),tF=xe([Ks,RA],RU),H_e=xe([eF,RA,oc,Xp,tF,e0,MA],FU),G_e=xe([PA,RA],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Y_e=(e,t,n,r,i,a,o)=>{if(!(!e||!n||!r||!i)&&B_e(e,o)){var l=g0e(e,t),u=XU(l,a,i,n,r),d=I_e(t,i,u,e);return{activeIndex:String(u),activeCoordinate:d}}},q_e=(e,t,n,r,i,a,o)=>{if(!(!e||!r||!i||!a||!n)){var l=Tbe(e,n);if(l){var u=b0e(l,t),d=XU(u,o,a,r,i),h=$_e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},K_e=(e,t,n,r,i,a,o,l)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?Y_e(e,t,r,i,a,o,l):q_e(e,t,n,r,i,a,o)},W_e=xe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElementId:r.elementId}}),V_e=xe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Zr)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Cxe}});function TI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(n),!0).forEach(function(r){Z_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Z_e(e,t,n){return(t=X_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X_e(e){var t=J_e(e,"string");return typeof t=="symbol"?t:t+""}function J_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q_e={},e1e={zIndexMap:Object.values(Zr).reduce((e,t)=>AI(AI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Q_e)},t1e=new Set(Object.values(Zr));function n1e(e){return t1e.has(e)}var nF=Si({name:"zIndex",initialState:e1e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:bn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!n1e(n)&&delete e.zIndexMap[n])},prepare:bn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElementId=r:e.zIndexMap[n].elementId=r:e.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:bn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:bn()}}}),{registerZIndexPortal:r1e,unregisterZIndexPortal:i1e,registerZIndexPortalId:a1e,unregisterZIndexPortalId:o1e}=nF.actions,s1e=nF.reducer;function Ws(e){var{zIndex:t,children:n}=e,r=X0e(),i=r&&t!==void 0&&t!==0,a=ki(),o=vr();S.useLayoutEffect(()=>i?(o(r1e({zIndex:t})),()=>{o(i1e({zIndex:t}))}):$p,[o,t,i]);var l=it(d=>W_e(d,t,a));if(!i)return n;if(!l)return null;var u=document.getElementById(l);return u?Mu.createPortal(n,u):null}function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NE.apply(null,arguments)}function NI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ob(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(n),!0).forEach(function(r){l1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l1e(e,t,n){return(t=c1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c1e(e){var t=u1e(e,"string");return typeof t=="symbol"?t:t+""}function u1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1e(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return S.isValidElement(t)?S.cloneElement(t,r):S.createElement(n,r)}function f1e(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:d,chartName:h}=e,m=n,b=r,y=i;if(!u||!m||h!=="ScatterChart"&&d!=="axis")return null;var k,w,_;if(h==="ScatterChart")k=m,w=Bge,_=Zr.cursorLine;else if(h==="BarChart")k=zge(l,m,a,o),w=bbe,_=Zr.cursorRectangle;else if(l==="radial"&&M9(m)){var{cx:T,cy:O,radius:j,startAngle:C,endAngle:M}=G8(m);k={cx:T,cy:O,startAngle:C,endAngle:M,innerRadius:j,outerRadius:j},w=Cbe,_=Zr.cursorLine}else k={points:Mbe(l,m,a)},w=ty,_=Zr.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,I=Ob(Ob(Ob(Ob({stroke:"#ccc",pointerEvents:"none"},a),k),px(u)),{},{payload:b,payloadIndex:y,className:dn("recharts-tooltip-cursor",P)});return S.createElement(Ws,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},S.createElement(d1e,{cursor:u,cursorComp:w,cursorProps:I}))}function h1e(e){var t=D_e(),n=A8(),r=Hp(),i=JU();return t==null||n==null||r==null||i==null?null:S.createElement(f1e,NE({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var rF=S.createContext(null),m1e=()=>S.useContext(rF),lk={exports:{}},OI;function p1e(){return OI||(OI=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function a(u,d,h,m,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,m||u,b),k=n?n+d:d;return u._events[k]?u._events[k].fn?u._events[k]=[u._events[k],y]:u._events[k].push(y):(u._events[k]=y,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var b=0,y=m.length,k=new Array(y);b<y;b++)k[b]=m[b].fn;return k},l.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,h,m,b,y,k){var w=n?n+d:d;if(!this._events[w])return!1;var _=this._events[w],T=arguments.length,O,j;if(_.fn){switch(_.once&&this.removeListener(d,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,m),!0;case 4:return _.fn.call(_.context,h,m,b),!0;case 5:return _.fn.call(_.context,h,m,b,y),!0;case 6:return _.fn.call(_.context,h,m,b,y,k),!0}for(j=1,O=new Array(T-1);j<T;j++)O[j-1]=arguments[j];_.fn.apply(_.context,O)}else{var C=_.length,M;for(j=0;j<C;j++)switch(_[j].once&&this.removeListener(d,_[j].fn,void 0,!0),T){case 1:_[j].fn.call(_[j].context);break;case 2:_[j].fn.call(_[j].context,h);break;case 3:_[j].fn.call(_[j].context,h,m);break;case 4:_[j].fn.call(_[j].context,h,m,b);break;default:if(!O)for(M=1,O=new Array(T-1);M<T;M++)O[M-1]=arguments[M];_[j].fn.apply(_[j].context,O)}}return!0},l.prototype.on=function(d,h,m){return a(this,d,h,m,!1)},l.prototype.once=function(d,h,m){return a(this,d,h,m,!0)},l.prototype.removeListener=function(d,h,m,b){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var k=this._events[y];if(k.fn)k.fn===h&&(!b||k.once)&&(!m||k.context===m)&&o(this,y);else{for(var w=0,_=[],T=k.length;w<T;w++)(k[w].fn!==h||b&&!k[w].once||m&&k[w].context!==m)&&_.push(k[w]);_.length?this._events[y]=_.length===1?_[0]:_:o(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(lk)),lk.exports}var g1e=p1e();const b1e=_i(g1e);var vp=new b1e,OE="recharts.syncEvent.tooltip",CI="recharts.syncEvent.brush";function y1e(e,t){if(t){var n=Number.parseInt(t,10);if(!ao(n))return e?.[n]}}var v1e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iF=Si({name:"options",initialState:v1e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),x1e=iF.reducer,{createEventEmitter:w1e}=iF.actions;function _1e(e){return e.tooltip.syncInteraction}var S1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aF=Si({name:"chartData",initialState:S1e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:MI,setDataStartEndIndexes:k1e,setComputedData:yMe}=aF.actions,E1e=aF.reducer,j1e=["x","y"];function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(n),!0).forEach(function(r){T1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T1e(e,t,n){return(t=A1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A1e(e){var t=N1e(e,"string");return typeof t=="symbol"?t:t+""}function N1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O1e(e,t){if(e==null)return{};var n,r,i=C1e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function C1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function M1e(){var e=it(uA),t=it(dA),n=vr(),r=it(Fz),i=it(Ks),a=Hp(),o=Mx(),l=it(u=>u.rootProps.className);S.useEffect(()=>{if(e==null)return $p;var u=(d,h,m)=>{if(t!==m&&e===d){if(r==="index"){var b;if(o&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:k,y:w}=y,_=O1e(y,j1e),{x:T,y:O,width:j,height:C}=h.payload.sourceViewBox,M=Pd(Pd({},_),{},{x:o.x+(j?(k-T)/j:0)*o.width,y:o.y+(C?(w-O)/C:0)*o.height});n(Pd(Pd({},h),{},{payload:Pd(Pd({},h.payload),{},{coordinate:M})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var I={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},U=r(i,I);P=i[U]}else r==="value"&&(P=i.find(G=>String(G.value)===h.payload.label));var{coordinate:W}=h.payload;if(P==null||h.payload.active===!1||W==null||o==null){n(TE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:q,y:H}=W,B=Math.min(q,o.x+o.width),K=Math.min(H,o.y+o.height),V={x:a==="horizontal"?P.coordinate:B,y:a==="horizontal"?K:P.coordinate},Z=TE({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(Z)}}};return vp.on(OE,u),()=>{vp.off(OE,u)}},[l,n,t,e,r,i,a,o])}function D1e(){var e=it(uA),t=it(dA),n=vr();S.useEffect(()=>{if(e==null)return $p;var r=(i,a,o)=>{t!==o&&e===i&&n(k1e(a))};return vp.on(CI,r),()=>{vp.off(CI,r)}},[n,t,e])}function P1e(){var e=vr();S.useEffect(()=>{e(w1e())},[e]),M1e(),D1e()}function R1e(e,t,n,r,i,a){var o=it(y=>U_e(y,e,t)),l=it(dA),u=it(uA),d=it(Fz),h=it(_1e),m=h?.active,b=Mx();S.useEffect(()=>{if(!m&&u!=null&&l!=null){var y=TE({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b,graphicalItemId:void 0});vp.emit(OE,u,y,l)}},[m,n,o,i,r,l,u,d,a,b])}function PI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PI(Object(n),!0).forEach(function(r){L1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L1e(e,t,n){return(t=I1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I1e(e){var t=$1e(e,"string");return typeof t=="symbol"?t:t+""}function $1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B1e(e){return e.dataKey}function z1e(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(yge,t)}var LI=[],U1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function F1e(e){var t,n,r=Zi(e,U1e),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:l,content:u,filterNull:d,isAnimationActive:h,offset:m,payloadUniqBy:b,position:y,reverseDirection:k,useTranslate3d:w,wrapperStyle:_,cursor:T,shared:O,trigger:j,defaultIndex:C,portal:M,axisId:P}=r,I=vr(),U=typeof C=="number"?String(C):C;S.useEffect(()=>{I(Iwe({shared:O,trigger:j,axisId:P,active:i,defaultIndex:U}))},[I,O,j,P,i,U]);var W=Mx(),q=$8(),H=Cwe(O),{activeIndex:B,isActive:K}=(t=it(pe=>G_e(pe,H,j,U)))!==null&&t!==void 0?t:{},V=it(pe=>H_e(pe,H,j,U)),Z=it(pe=>tF(pe,H,j,U)),G=it(pe=>F_e(pe,H,j,U)),J=V,Q=m1e(),oe=(n=i??K)!==null&&n!==void 0?n:!1,[te,z]=ope([J,oe]),X=H==="axis"?Z:void 0;R1e(H,j,G,X,B,oe);var re=M??Q;if(re==null||W==null||H==null)return null;var ie=J??LI;oe||(ie=LI),d&&ie.length&&(ie=Mme(ie.filter(pe=>pe.value!=null&&(pe.hide!==!0||r.includeHidden)),b,B1e));var fe=ie.length>0,de=S.createElement(Ege,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:oe,coordinate:G,hasPayload:fe,offset:m,position:y,reverseDirection:k,useTranslate3d:w,viewBox:W,wrapperStyle:_,lastBoundingBox:te,innerRef:z,hasPortalFromProps:!!M},z1e(u,RI(RI({},r),{},{payload:ie,label:X,active:oe,activeIndex:B,coordinate:G,accessibilityLayer:q})));return S.createElement(S.Fragment,null,Mu.createPortal(de,re),oe&&S.createElement(h1e,{cursor:T,tooltipEventType:H,coordinate:G,payload:ie,index:B}))}function H1e(e,t,n){return(t=G1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G1e(e){var t=Y1e(e,"string");return typeof t=="symbol"?t:t+""}function Y1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class q1e{constructor(t){H1e(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function II(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?II(Object(n),!0).forEach(function(r){W1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):II(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W1e(e,t,n){return(t=V1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V1e(e){var t=Z1e(e,"string");return typeof t=="symbol"?t:t+""}function Z1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X1e={cacheSize:2e3,enableCache:!0},oF=K1e({},X1e),$I=new q1e(oF.cacheSize),J1e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},BI="recharts_measurement_span";function Q1e(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var zI=(e,t)=>{try{var n=document.getElementById(BI);n||(n=document.createElement("span"),n.setAttribute("id",BI),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,J1e,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Im=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Pf.isSsr)return{width:0,height:0};if(!oF.enableCache)return zI(t,n);var r=Q1e(t,n),i=$I.get(r);if(i)return i;var a=zI(t,n);return $I.set(r,a),a},UI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nSe=Object.keys(sF),Yd="NaN";function rSe(e,t){return e*sF[t]}class gi{static parse(t){var n,[,r,i]=(n=tSe.exec(t))!==null&&n!==void 0?n:[];return new gi(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ao(t)&&(this.unit=""),n!==""&&!eSe.test(n)&&(this.num=NaN,this.unit=""),nSe.includes(n)&&(this.num=rSe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new gi(NaN,""):new gi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new gi(NaN,""):new gi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new gi(NaN,""):new gi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new gi(NaN,""):new gi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ao(this.num)}}function lF(e){if(e.includes(Yd))return Yd;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=UI.exec(t))!==null&&n!==void 0?n:[],o=gi.parse(r??""),l=gi.parse(a??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return Yd;t=t.replace(UI,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,m,b]=(d=FI.exec(t))!==null&&d!==void 0?d:[],y=gi.parse(h??""),k=gi.parse(b??""),w=m==="+"?y.add(k):y.subtract(k);if(w.isNaN())return Yd;t=t.replace(FI,w.toString())}return t}var HI=/\(([^()]*)\)/;function iSe(e){for(var t=e,n;(n=HI.exec(t))!=null;){var[,r]=n;t=t.replace(HI,lF(r))}return t}function aSe(e){var t=e.replace(/\s+/g,"");return t=iSe(t),t=lF(t),t}function oSe(e){try{return aSe(e)}catch{return Yd}}function ck(e){var t=oSe(e.slice(5,-1));return t===Yd?"":t}var sSe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],lSe=["dx","dy","angle","className","breakAll"];function CE(){return CE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CE.apply(null,arguments)}function GI(e,t){if(e==null)return{};var n,r,i=cSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cF=/[ \f\n\r\t\v\u2028\u2029]+/,uF=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Cr(t)||(n?i=t.toString().split(""):i=t.toString().split(cF));var a=i.map(l=>({word:l,width:Im(l,r).width})),o=n?0:Im("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function uSe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var dF=(e,t,n,r)=>e.reduce((i,a)=>{var{word:o,width:l}=a,u=i[i.length-1];if(u&&l!=null&&(t==null||r||u.width+l+n<Number(t)))u.words.push(o),u.width+=l+n;else{var d={words:[o],width:l};i.push(d)}return i},[]),fF=e=>e.reduce((t,n)=>t.width>n.width?t:n),dSe="",YI=(e,t,n,r,i,a,o,l)=>{var u=e.slice(0,t),d=uF({breakAll:n,style:r,children:u+dSe});if(!d)return[!1,[]];var h=dF(d.wordsWithComputedWidth,a,o,l),m=h.length>i||fF(h).width>Number(a);return[m,h]},fSe=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:l,breakAll:u}=e,d=et(a),h=String(o),m=dF(t,r,n,i);if(!d||i)return m;var b=m.length>a||fF(m).width>Number(r);if(!b)return m;for(var y=0,k=h.length-1,w=0,_;y<=k&&w<=h.length-1;){var T=Math.floor((y+k)/2),O=T-1,[j,C]=YI(h,O,u,l,a,r,n,i),[M]=YI(h,T,u,l,a,r,n,i);if(!j&&!M&&(y=T+1),j&&M&&(k=T-1),!j&&M){_=C;break}w++}return _||m},qI=e=>{var t=Cr(e)?[]:e.toString().split(cF);return[{words:t,width:void 0}]},hSe=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!Pf.isSsr){var l,u,d=uF({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:m}=d;l=h,u=m}else return qI(r);return fSe({breakAll:a,children:r,maxLines:o,style:i},l,u,t,!!n)}return qI(r)},hF="#808080",mSe={angle:0,breakAll:!1,capHeight:"0.71em",fill:hF,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},LA=S.forwardRef((e,t)=>{var n=Zi(e,mSe),{x:r,y:i,lineHeight:a,capHeight:o,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:h}=n,m=GI(n,sSe),b=S.useMemo(()=>hSe({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:u,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,u,m.style,m.width]),{dx:y,dy:k,angle:w,className:_,breakAll:T}=m,O=GI(m,lSe);if(!Uo(r)||!Uo(i)||b.length===0)return null;var j=Number(r)+(et(y)?y:0),C=Number(i)+(et(k)?k:0);if(!Pn(j)||!Pn(C))return null;var M;switch(h){case"start":M=ck("calc(".concat(o,")"));break;case"middle":M=ck("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:M=ck("calc(".concat(b.length-1," * -").concat(a,")"));break}var P=[];if(u){var I=b[0].width,{width:U}=m;P.push("scale(".concat(et(U)&&et(I)?U/I:1,")"))}return w&&P.push("rotate(".concat(w,", ").concat(j,", ").concat(C,")")),P.length&&(O.transform=P.join(" ")),S.createElement("text",CE({},ka(O),{ref:t,x:j,y:C,className:dn("recharts-text",_),textAnchor:d,fill:l.includes("url")?hF:l}),b.map((W,q)=>{var H=W.words.join(T?"":" ");return S.createElement("tspan",{x:j,dy:q===0?M:a,key:"".concat(H,"-").concat(q)},H)}))});LA.displayName="Text";var pSe=["labelRef"];function gSe(e,t){if(e==null)return{};var n,r,i=bSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function KI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(n),!0).forEach(function(r){ySe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ySe(e,t,n){return(t=vSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vSe(e){var t=xSe(e,"string");return typeof t=="symbol"?t:t+""}function xSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ss.apply(null,arguments)}var mF=S.createContext(null),wSe=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o,children:l}=e,u=S.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o}),[t,n,r,i,a,o]);return S.createElement(mF.Provider,{value:u},l)},pF=()=>{var e=S.useContext(mF),t=Mx();return e||T8(t)},_Se=S.createContext(null),SSe=()=>{var e=S.useContext(_Se),t=it(Kz);return e||t},kSe=e=>{var{value:t,formatter:n}=e,r=Cr(e.children)?t:e.children;return typeof n=="function"?n(r):r},IA=e=>e!=null&&typeof e=="function",ESe=(e,t)=>{var n=va(t-e),r=Math.min(Math.abs(t-e),360);return n*r},jSe=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:m,endAngle:b,clockWise:y}=i,k=(d+h)/2,w=ESe(m,b),_=w>=0?1:-1,T,O;switch(t){case"insideStart":T=m+_*a,O=y;break;case"insideEnd":T=b-_*a,O=!y;break;case"end":T=b+_*a,O=y;break;default:throw new Error("Unsupported position ".concat(t))}O=w<=0?O:!O;var j=Or(l,u,k,T),C=Or(l,u,k,T+(O?1:-1)*359),M="M".concat(j.x,",").concat(j.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Cr(e.id)?ap("recharts-radial-line-"):e.id;return S.createElement("text",Ss({},r,{dominantBaseline:"central",className:dn("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:P,d:M})),S.createElement("textPath",{xlinkHref:"#".concat(P)},n))},TSe=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:u}=e,d=(l+u)/2;if(n==="outside"){var{x:h,y:m}=Or(r,i,o+t,d);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(a+o)/2,{x:y,y:k}=Or(r,i,b,d);return{x:y,y:k,textAnchor:"middle",verticalAnchor:"middle"}},ME=e=>"cx"in e&&et(e.cx),ASe=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!ME(n)&&(a=n);var{x:o,y:l,upperWidth:u,lowerWidth:d,height:h}=t,m=o,b=o+(u-d)/2,y=(m+b)/2,k=(u+d)/2,w=m+u/2,_=h>=0?1:-1,T=_*r,O=_>0?"end":"start",j=_>0?"start":"end",C=u>=0?1:-1,M=C*r,P=C>0?"end":"start",I=C>0?"start":"end";if(i==="top"){var U={x:m+u/2,y:l-T,textAnchor:"middle",verticalAnchor:O};return $n($n({},U),a?{height:Math.max(l-a.y,0),width:u}:{})}if(i==="bottom"){var W={x:b+d/2,y:l+h+T,textAnchor:"middle",verticalAnchor:j};return $n($n({},W),a?{height:Math.max(a.y+a.height-(l+h),0),width:d}:{})}if(i==="left"){var q={x:y-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return $n($n({},q),a?{width:Math.max(q.x-a.x,0),height:h}:{})}if(i==="right"){var H={x:y+k+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"};return $n($n({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:h}:{})}var B=a?{width:k,height:h}:{};return i==="insideLeft"?$n({x:y+M,y:l+h/2,textAnchor:I,verticalAnchor:"middle"},B):i==="insideRight"?$n({x:y+k-M,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},B):i==="insideTop"?$n({x:m+u/2,y:l+T,textAnchor:"middle",verticalAnchor:j},B):i==="insideBottom"?$n({x:b+d/2,y:l+h-T,textAnchor:"middle",verticalAnchor:O},B):i==="insideTopLeft"?$n({x:m+M,y:l+T,textAnchor:I,verticalAnchor:j},B):i==="insideTopRight"?$n({x:m+u-M,y:l+T,textAnchor:P,verticalAnchor:j},B):i==="insideBottomLeft"?$n({x:b+M,y:l+h-T,textAnchor:I,verticalAnchor:O},B):i==="insideBottomRight"?$n({x:b+d-M,y:l+h-T,textAnchor:P,verticalAnchor:O},B):i&&typeof i=="object"&&(et(i.x)||Ps(i.x))&&(et(i.y)||Ps(i.y))?$n({x:o+Jl(i.x,k),y:l+Jl(i.y,h),textAnchor:"end",verticalAnchor:"end"},B):$n({x:w,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},B)},NSe={angle:0,offset:5,zIndex:Zr.label,position:"middle",textBreakAll:!1};function Pl(e){var t=Zi(e,NSe),{viewBox:n,position:r,value:i,children:a,content:o,className:l="",textBreakAll:u,labelRef:d}=t,h=SSe(),m=pF(),b=r==="center"?m:h??m,y,k,w;if(n==null?y=b:ME(n)?y=n:y=T8(n),!y||Cr(i)&&Cr(a)&&!S.isValidElement(o)&&typeof o!="function")return null;var _=$n($n({},t),{},{viewBox:y});if(S.isValidElement(o)){var{labelRef:T}=_,O=gSe(_,pSe);return S.cloneElement(o,O)}if(typeof o=="function"){if(k=S.createElement(o,_),S.isValidElement(k))return k}else k=kSe(t);var j=ka(t);if(ME(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return jSe(t,r,k,j,y);w=TSe(y,t.offset,t.position)}else w=ASe(t,y);return S.createElement(Ws,{zIndex:t.zIndex},S.createElement(LA,Ss({ref:d,className:dn("recharts-label",l)},j,w,{textAnchor:uSe(j.textAnchor)?j.textAnchor:w.textAnchor,breakAll:u}),k))}Pl.displayName="Label";var OSe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?S.createElement(Pl,Ss({key:"label-implicit"},r)):Uo(e)?S.createElement(Pl,Ss({key:"label-implicit",value:e},r)):S.isValidElement(e)?e.type===Pl?S.cloneElement(e,$n({key:"label-implicit"},r)):S.createElement(Pl,Ss({key:"label-implicit",content:e},r)):IA(e)?S.createElement(Pl,Ss({key:"label-implicit",content:e},r)):e&&typeof e=="object"?S.createElement(Pl,Ss({},e,{key:"label-implicit"},r)):null};function CSe(e){var{label:t,labelRef:n}=e,r=pF();return OSe(t,r,n)||null}var uk={},dk={},WI;function MSe(){return WI||(WI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(dk)),dk}var fk={},VI;function DSe(){return VI||(VI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(fk)),fk}var ZI;function PSe(){return ZI||(ZI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MSe(),n=DSe(),r=ET();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(uk)),uk}var hk,XI;function RSe(){return XI||(XI=1,hk=PSe().last),hk}var LSe=RSe();const ISe=_i(LSe);var $Se=["valueAccessor"],BSe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(null,arguments)}function JI(e,t){if(e==null)return{};var n,r,i=zSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zSe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var USe=e=>Array.isArray(e.value)?ISe(e.value):e.value,gF=S.createContext(void 0),FSe=gF.Provider,bF=S.createContext(void 0);bF.Provider;function HSe(){return S.useContext(gF)}function GSe(){return S.useContext(bF)}function ry(e){var{valueAccessor:t=USe}=e,n=JI(e,$Se),{dataKey:r,clockWise:i,id:a,textBreakAll:o,zIndex:l}=n,u=JI(n,BSe),d=HSe(),h=GSe(),m=d||h;return!m||!m.length?null:S.createElement(Ws,{zIndex:l??Zr.label},S.createElement(zo,{className:"recharts-label-list"},m.map((b,y)=>{var k,w=Cr(r)?t(b,y):Ur(b&&b.payload,r),_=Cr(a)?{}:{id:"".concat(a,"-").concat(y)};return S.createElement(Pl,Sv({key:"label-".concat(y)},ka(b),u,_,{fill:(k=n.fill)!==null&&k!==void 0?k:b.fill,parentViewBox:b.parentViewBox,value:w,textBreakAll:o,viewBox:b.viewBox,index:y,zIndex:0}))})))}ry.displayName="LabelList";function YSe(e){var{label:t}=e;return t?t===!0?S.createElement(ry,{key:"labelList-implicit"}):S.isValidElement(t)||IA(t)?S.createElement(ry,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(ry,Sv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(null,arguments)}var yF=e=>{var{cx:t,cy:n,r,className:i}=e,a=dn("recharts-dot",i);return et(t)&&et(n)&&et(r)?S.createElement("circle",DE({},io(e),kT(e),{className:a,cx:t,cy:n,r})):null},qSe={radiusAxis:{},angleAxis:{}},vF=Si({name:"polarAxis",initialState:qSe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:vMe,removeRadiusAxis:xMe,addAngleAxis:wMe,removeAngleAxis:_Me}=vF.actions,KSe=vF.reducer,mk={exports:{}},Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function WSe(){if(QI)return Ft;QI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,k=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function j(M){if(typeof M=="object"&&M!==null){var P=M.$$typeof;switch(P){case t:switch(M=M.type,M){case u:case d:case r:case a:case i:case m:return M;default:switch(M=M&&M.$$typeof,M){case l:case h:case k:case y:case o:return M;default:return P}}case n:return P}}}function C(M){return j(M)===d}return Ft.AsyncMode=u,Ft.ConcurrentMode=d,Ft.ContextConsumer=l,Ft.ContextProvider=o,Ft.Element=t,Ft.ForwardRef=h,Ft.Fragment=r,Ft.Lazy=k,Ft.Memo=y,Ft.Portal=n,Ft.Profiler=a,Ft.StrictMode=i,Ft.Suspense=m,Ft.isAsyncMode=function(M){return C(M)||j(M)===u},Ft.isConcurrentMode=C,Ft.isContextConsumer=function(M){return j(M)===l},Ft.isContextProvider=function(M){return j(M)===o},Ft.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},Ft.isForwardRef=function(M){return j(M)===h},Ft.isFragment=function(M){return j(M)===r},Ft.isLazy=function(M){return j(M)===k},Ft.isMemo=function(M){return j(M)===y},Ft.isPortal=function(M){return j(M)===n},Ft.isProfiler=function(M){return j(M)===a},Ft.isStrictMode=function(M){return j(M)===i},Ft.isSuspense=function(M){return j(M)===m},Ft.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===d||M===a||M===i||M===m||M===b||typeof M=="object"&&M!==null&&(M.$$typeof===k||M.$$typeof===y||M.$$typeof===o||M.$$typeof===l||M.$$typeof===h||M.$$typeof===_||M.$$typeof===T||M.$$typeof===O||M.$$typeof===w)},Ft.typeOf=j,Ft}var e5;function VSe(){return e5||(e5=1,mk.exports=WSe()),mk.exports}VSe();var xF=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function ZSe(e){var{tooltipEntrySettings:t}=e,n=vr(),r=ki(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(Pwe(t)):i.current!==t&&n(Rwe({prev:i.current,next:t})),i.current=t)},[t,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(Lwe(i.current)),i.current=null)},[n]),null}function XSe(e){var{legendPayload:t}=e,n=vr(),r=ki(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(uge(t)):i.current!==t&&n(dge({prev:i.current,next:t})),i.current=t)},[n,r,t]),S.useLayoutEffect(()=>()=>{i.current&&(n(fge(i.current)),i.current=null)},[n]),null}var pk,JSe=()=>{var[e]=S.useState(()=>ap("uid-"));return e},QSe=(pk=SY.useId)!==null&&pk!==void 0?pk:JSe;function wF(e,t){var n=QSe();return t||(e?"".concat(e,"-").concat(n):n)}var eke=S.createContext(void 0),tke=e=>{var{id:t,type:n,children:r}=e,i=wF("recharts-".concat(n),t);return S.createElement(eke.Provider,{value:i},r(i))},nke={cartesianItems:[],polarItems:[]},_F=Si({name:"graphicalItems",initialState:nke,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:bn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:bn()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ja(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:bn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:bn()},removePolarGraphicalItem:{reducer(e,t){var n=Ja(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:bn()}}}),{addCartesianGraphicalItem:rke,replaceCartesianGraphicalItem:ike,removeCartesianGraphicalItem:ake,addPolarGraphicalItem:SMe,removePolarGraphicalItem:kMe}=_F.actions,oke=_F.reducer,ske=e=>{var t=vr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(rke(e)):n.current!==e&&t(ike({prev:n.current,next:e})),n.current=e},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(t(ake(n.current)),n.current=null)},[t]),null},lke=S.memo(ske),cke=["points"];function t5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(n),!0).forEach(function(r){uke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uke(e,t,n){return(t=dke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dke(e){var t=fke(e,"string");return typeof t=="symbol"?t:t+""}function fke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}function hke(e,t){if(e==null)return{};var n,r,i=mke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pke(e){var{option:t,dotProps:n,className:r}=e;if(S.isValidElement(t))return S.cloneElement(t,n);if(typeof t=="function")return t(n);var i=dn(r,typeof t!="boolean"?t.className:""),a=n??{},{points:o}=a,l=hke(a,cke);return S.createElement(yF,kv({},l,{className:i}))}function gke(e,t){return e==null?!1:t?!0:e.length===1}function bke(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:o,needClip:l,clipPathId:u,zIndex:d=Zr.scatter}=e;if(!gke(t,n))return null;var h=xF(n),m=jhe(n),b=t.map((k,w)=>{var _,T,O=gk(gk(gk({r:3},o),m),{},{index:w,cx:(_=k.x)!==null&&_!==void 0?_:void 0,cy:(T=k.y)!==null&&T!==void 0?T:void 0,dataKey:a,value:k.value,payload:k.payload,points:t});return S.createElement(pke,{key:"dot-".concat(w),option:n,dotProps:O,className:i})}),y={};return l&&u!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),S.createElement(Ws,{zIndex:d},S.createElement(zo,kv({className:r},y),b))}function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(r){yke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yke(e,t,n){return(t=vke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vke(e){var t=xke(e,"string");return typeof t=="symbol"?t:t+""}function xke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wke={xAxis:{},yAxis:{},zAxis:{}},SF=Si({name:"cartesianAxis",initialState:wke,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:bn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:bn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:bn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:bn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:bn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:bn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:bn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:bn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:bn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);e.yAxis[n]=r5(r5({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:_ke,replaceXAxis:Ske,removeXAxis:kke,addYAxis:Eke,replaceYAxis:jke,removeYAxis:Tke,addZAxis:EMe,replaceZAxis:jMe,removeZAxis:TMe,updateYAxisWidth:Ake}=SF.actions,Nke=SF.reducer,Oke=xe([Pr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Cke=xe([Oke,Fs,Hs],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),$A=()=>it(Cke),Mke=()=>it(A_e);function i5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(n),!0).forEach(function(r){Dke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dke(e,t,n){return(t=Pke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pke(e){var t=Rke(e,"string");return typeof t=="symbol"?t:t+""}function Rke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lke=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},u=bk(bk(bk({},l),px(i)),kT(i)),d;return S.isValidElement(i)?d=S.cloneElement(i,u):typeof i=="function"?d=i(u):d=S.createElement(yF,u),S.createElement(zo,{className:"recharts-active-dot",clipPath:o},d)};function a5(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:o=Zr.activeDot}=e,l=it(yp),u=Mke();if(t==null||u==null)return null;var d=t.find(h=>u.includes(h.payload));return Cr(d)?null:S.createElement(Ws,{zIndex:o},S.createElement(Lke,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var Ike={},kF=Si({name:"errorBars",initialState:Ike,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:AMe,replaceErrorBar:NMe,removeErrorBar:OMe}=kF.actions,$ke=kF.reducer;function EF(e,t){var n,r,i=it(d=>Ys(d,e)),a=it(d=>qs(d,t)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:fr.allowDataOverflow,l=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:hr.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function Bke(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=$A(),{needClipX:a,needClipY:o,needClip:l}=EF(t,n);if(!l||!i)return null;var{x:u,y:d,width:h,height:m}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:a?u:u-h/2,y:o?d:d-m/2,width:a?h:h*2,height:o?m:m*2}))}var zke=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Uke(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function BA(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(zke.has(r)){if(e[r]==null&&t[r]==null)continue;if(!Wb(e[r],t[r]))return!1}else if(!Uke(e[r],t[r]))return!1;return!0}var Fke=e=>{var{chartData:t}=e,n=vr(),r=ki();return S.useEffect(()=>r?()=>{}:(n(MI(t)),()=>{n(MI(void 0))}),[t,n,r]),null},o5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},jF=Si({name:"brush",initialState:o5,reducers:{setBrushSettings(e,t){return t.payload==null?o5:t.payload}}}),{setBrushSettings:CMe}=jF.actions,Hke=jF.reducer;function Gke(e,t,n){return(t=Yke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yke(e){var t=qke(e,"string");return typeof t=="symbol"?t:t+""}function qke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zA{static create(t){return new zA(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}Gke(zA,"EPS",1e-4);function Kke(e){return(e%180+180)%180}var Wke=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Kke(i),o=a*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},Vke={dots:[],areas:[],lines:[]},TF=Si({name:"referenceElements",initialState:Vke,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ja(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ja(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ja(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:MMe,removeDot:DMe,addArea:PMe,removeArea:RMe,addLine:LMe,removeLine:IMe}=TF.actions,Zke=TF.reducer,Xke=S.createContext(void 0),Jke=e=>{var{children:t}=e,[n]=S.useState("".concat(ap("recharts"),"-clip")),r=$A();if(r==null)return null;var{x:i,y:a,width:o,height:l}=r;return S.createElement(Xke.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:a,height:l,width:o}))),t)};function AF(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n}function Qke(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Wke(r,n)}function e2e(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:l}=e;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function Ev(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function t2e(e,t){return AF(e,t+1)}function n2e(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:l}=t,u=0,d=1,h=o,m=function(){var k=r?.[u];if(k===void 0)return{v:AF(r,d)};var w=u,_,T=()=>(_===void 0&&(_=n(k,w)),_),O=k.coordinate,j=u===0||Ev(e,O,T,h,l);j||(u=0,h=o,d+=1),j&&(h=O+e*(T()/2+i),u+=d)},b;d<=a.length;)if(b=m(),b)return b.v;return[]}function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(n),!0).forEach(function(r){r2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r2e(e,t,n){return(t=i2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i2e(e){var t=a2e(e,"string");return typeof t=="symbol"?t:t+""}function a2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o2e(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:l}=t,{end:u}=t,d=function(b){var y=a[b],k,w=()=>(k===void 0&&(k=n(y,b)),k);if(b===o-1){var _=e*(y.coordinate+e*w()/2-u);a[b]=y=Br(Br({},y),{},{tickCoord:_>0?y.coordinate-_*e:y.coordinate})}else a[b]=y=Br(Br({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var T=Ev(e,y.tickCoord,w,l,u);T&&(u=y.tickCoord-e*(w()/2+i),a[b]=Br(Br({},y),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return a}function s2e(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,{start:u,end:d}=t;if(a){var h=r[l-1],m=n(h,l-1),b=e*(h.coordinate+e*m/2-d);if(o[l-1]=h=Br(Br({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var y=Ev(e,h.tickCoord,()=>m,u,d);y&&(d=h.tickCoord-e*(m/2+i),o[l-1]=Br(Br({},h),{},{isShow:!0}))}}for(var k=a?l-1:l,w=function(O){var j=o[O],C,M=()=>(C===void 0&&(C=n(j,O)),C);if(O===0){var P=e*(j.coordinate-e*M()/2-u);o[O]=j=Br(Br({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[O]=j=Br(Br({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var I=Ev(e,j.tickCoord,M,u,d);I&&(u=j.tickCoord+e*(M()/2+i),o[O]=Br(Br({},j),{},{isShow:!0}))}},_=0;_<k;_++)w(_);return o}function UA(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(et(u)||Pf.isSsr){var b;return(b=t2e(i,et(u)?u:0))!==null&&b!==void 0?b:[]}var y=[],k=l==="top"||l==="bottom"?"width":"height",w=h&&k==="width"?Im(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},_=(j,C)=>{var M=typeof d=="function"?d(j.value,C):j.value;return k==="width"?Qke(Im(M,{fontSize:t,letterSpacing:n}),w,m):Im(M,{fontSize:t,letterSpacing:n})[k]},T=i.length>=2?va(i[1].coordinate-i[0].coordinate):1,O=e2e(a,T,k);return u==="equidistantPreserveStart"?n2e(T,O,_,i,o):(u==="preserveStart"||u==="preserveStartEnd"?y=s2e(T,O,_,i,o,u==="preserveStartEnd"):y=o2e(T,O,_,i,o),y.filter(j=>j.isShow))}var l2e=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>o&&(o=m.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+a,d=o+u+l+(n?r:0);return Math.round(d)}return 0},c2e=["axisLine","width","height","className","hide","ticks","axisType"];function u2e(e,t){if(e==null)return{};var n,r,i=d2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nu.apply(null,arguments)}function l5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(n),!0).forEach(function(r){f2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f2e(e,t,n){return(t=h2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h2e(e){var t=m2e(e,"string");return typeof t=="symbol"?t:t+""}function m2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Os={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Zr.axis};function p2e(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:u}=e;if(!l)return null;var d=Vn(Vn(Vn({},u),io(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);d=Vn(Vn({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);d=Vn(Vn({},d),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return S.createElement("line",Nu({},d,{className:dn("recharts-cartesian-axis-line",yx(l,"className"))}))}function g2e(e,t,n,r,i,a,o,l,u){var d,h,m,b,y,k,w=l?-1:1,_=e.tickSize||o,T=et(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=h=e.coordinate,b=n+ +!l*i,m=b-w*_,k=m-w*u,y=T;break;case"left":m=b=e.coordinate,h=t+ +!l*r,d=h-w*_,y=d-w*u,k=T;break;case"right":m=b=e.coordinate,h=t+ +l*r,d=h+w*_,y=d+w*u,k=T;break;default:d=h=e.coordinate,b=n+ +l*i,m=b+w*_,k=m+w*u,y=T;break}return{line:{x1:d,y1:m,x2:h,y2:b},tick:{x:y,y:k}}}function b2e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function y2e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function v2e(e){var{option:t,tickProps:n,value:r}=e,i,a=dn(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))i=S.cloneElement(t,Vn(Vn({},n),{},{className:a}));else if(typeof t=="function")i=t(Vn(Vn({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=dn(o,t?.className)),i=S.createElement(LA,Nu({},n,{className:o}),r)}return i}var x2e=S.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:o,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:m,x:b,y,width:k,height:w,tickSize:_,tickMargin:T,fontSize:O,letterSpacing:j,getTicksConfig:C,events:M,axisType:P}=e,I=UA(Vn(Vn({},C),{},{ticks:n}),O,j),U=b2e(h,m),W=y2e(h,m),q=io(C),H=px(r),B={};typeof i=="object"&&(B=i);var K=Vn(Vn({},q),{},{fill:"none"},B),V=I.map(J=>Vn({entry:J},g2e(J,b,y,k,w,h,_,m,T))),Z=V.map(J=>{var{entry:Q,line:oe}=J;return S.createElement(zo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&S.createElement("line",Nu({},K,oe,{className:dn("recharts-cartesian-axis-tick-line",yx(i,"className"))})))}),G=V.map((J,Q)=>{var{entry:oe,tick:te}=J,z=Vn(Vn(Vn(Vn({textAnchor:U,verticalAnchor:W},q),{},{stroke:"none",fill:a},H),te),{},{index:Q,payload:oe,visibleTicksCount:I.length,tickFormatter:o,padding:u},d);return S.createElement(zo,Nu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},lme(M,oe,Q)),r&&S.createElement(v2e,{option:r,tickProps:z,value:"".concat(typeof o=="function"?o(oe.value,Q):oe.value).concat(l||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},G.length>0&&S.createElement(Ws,{zIndex:Zr.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},G)),Z.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},Z))}),w2e=S.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:l,axisType:u}=e,d=u2e(e,c2e),[h,m]=S.useState(""),[b,y]=S.useState(""),k=S.useRef(null);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return l2e({ticks:k.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=S.useCallback(_=>{if(_){var T=_.getElementsByClassName("recharts-cartesian-axis-tick-value");k.current=T;var O=T[0];if(O){var j=window.getComputedStyle(O),C=j.fontSize,M=j.letterSpacing;(C!==h||M!==b)&&(m(C),y(M))}}},[h,b]);return o||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement(Ws,{zIndex:e.zIndex},S.createElement(zo,{className:dn("recharts-cartesian-axis",a)},S.createElement(p2e,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:io(e)}),S.createElement(x2e,{ref:w,axisType:u,events:d,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),S.createElement(wSe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},S.createElement(CSe,{label:e.label,labelRef:e.labelRef}),e.children)))}),FA=S.forwardRef((e,t)=>{var n=Zi(e,Os);return S.createElement(w2e,Nu({},n,{ref:t}))});FA.displayName="CartesianAxis";var _2e=["x1","y1","x2","y2","key"],S2e=["offset"],k2e=["xAxisId","yAxisId"],E2e=["xAxisId","yAxisId"];function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(r){j2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j2e(e,t,n){return(t=T2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T2e(e){var t=A2e(e,"string");return typeof t=="symbol"?t:t+""}function A2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pu(){return pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pu.apply(null,arguments)}function jv(e,t){if(e==null)return{};var n,r,i=N2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var O2e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:l}=e;return S.createElement("rect",{x:r,y:i,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function NF(e){var{option:t,lineItemProps:n}=e,r;if(S.isValidElement(t))r=S.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:o,x2:l,y2:u,key:d}=n,h=jv(n,_2e),m=(i=io(h))!==null&&i!==void 0?i:{},{offset:b}=m,y=jv(m,S2e);r=S.createElement("line",pu({},y,{x1:a,y1:o,x2:l,y2:u,fill:"none",key:d}))}return r}function C2e(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=jv(e,k2e),u=i.map((d,h)=>{var m=zr(zr({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return S.createElement(NF,{key:"line-".concat(h),option:r,lineItemProps:m})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function M2e(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=jv(e,E2e),u=i.map((d,h)=>{var m=zr(zr({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return S.createElement(NF,{option:r,lineItemProps:m,key:"line-".concat(h)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function D2e(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length||l==null)return null;var d=l.map(m=>Math.round(m+i-i)).sort((m,b)=>m-b);i!==d[0]&&d.unshift(0);var h=d.map((m,b)=>{var y=!d[b+1],k=y?i+o-m:d[b+1]-m;if(k<=0)return null;var w=b%t.length;return S.createElement("rect",{key:"react-".concat(b),y:m,x:r,height:k,width:a,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function P2e(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:l,verticalPoints:u}=e;if(!t||!n||!n.length)return null;var d=u.map(m=>Math.round(m+i-i)).sort((m,b)=>m-b);i!==d[0]&&d.unshift(0);var h=d.map((m,b)=>{var y=!d[b+1],k=y?i+o-m:d[b+1]-m;if(k<=0)return null;var w=b%n.length;return S.createElement("rect",{key:"react-".concat(b),x:m,y:a,width:k,height:l,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var R2e=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return v8(UA(zr(zr(zr({},Os),n),{},{ticks:x8(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},L2e=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return v8(UA(zr(zr(zr({},Os),n),{},{ticks:x8(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},I2e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Zr.grid};function OF(e){var t=N8(),n=O8(),r=A8(),i=zr(zr({},Zi(e,I2e)),{},{x:et(e.x)?e.x:r.left,y:et(e.y)?e.y:r.top,width:et(e.width)?e.width:r.width,height:et(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:l,y:u,width:d,height:h,syncWithTicks:m,horizontalValues:b,verticalValues:y}=i,k=ki(),w=it(W=>xI(W,"xAxis",a,k)),_=it(W=>xI(W,"yAxis",o,k));if(!Fo(d)||!Fo(h)||!et(l)||!et(u))return null;var T=i.verticalCoordinatesGenerator||R2e,O=i.horizontalCoordinatesGenerator||L2e,{horizontalPoints:j,verticalPoints:C}=i;if((!j||!j.length)&&typeof O=="function"){var M=b&&b.length,P=O({yAxis:_?zr(zr({},_),{},{ticks:M?b:_.ticks}):void 0,width:t??d,height:n??h,offset:r},M?!0:m);tv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(j=P)}if((!C||!C.length)&&typeof T=="function"){var I=y&&y.length,U=T({xAxis:w?zr(zr({},w),{},{ticks:I?y:w.ticks}):void 0,width:t??d,height:n??h,offset:r},I?!0:m);tv(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(C=U)}return S.createElement(Ws,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(O2e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(D2e,pu({},i,{horizontalPoints:j})),S.createElement(P2e,pu({},i,{verticalPoints:C})),S.createElement(C2e,pu({},i,{offset:r,horizontalPoints:j,xAxis:w,yAxis:_})),S.createElement(M2e,pu({},i,{offset:r,verticalPoints:C,xAxis:w,yAxis:_}))))}OF.displayName="CartesianGrid";function $2e(e){var t=px(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,o=Number(i),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=r),{r:o,strokeWidth:l}}return{r:n,strokeWidth:r}}var CF=(e,t,n,r)=>CU(e,"xAxis",t,r),MF=(e,t,n,r)=>OU(e,"xAxis",t,r),DF=(e,t,n,r)=>CU(e,"yAxis",n,r),PF=(e,t,n,r)=>OU(e,"yAxis",n,r),B2e=xe([an,CF,DF,MF,PF],(e,t,n,r,i)=>Us(e,"xAxis")?ev(t,r,!1):ev(n,i,!1)),z2e=(e,t,n,r,i)=>i,RF=xe([Qz,z2e],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),U2e=(e,t,n,r,i)=>{var a,o=RF(e,t,n,r,i);if(o!=null){var l=an(e),u=Us(l,"xAxis"),d;if(u?d=jE(e,"yAxis",n,r):d=jE(e,"xAxis",t,r),d!=null){var{stackId:h}=o,m=pA(o);if(!(h==null||m==null)){var b=(a=d[h])===null||a===void 0?void 0:a.stackedData;return b?.find(y=>y.key===m)}}}},F2e=xe([an,CF,DF,MF,PF,U2e,oA,B2e,RF,Exe],(e,t,n,r,i,a,o,l,u,d)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:b}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:y}=u,k;if(y&&y.length>0?k=y:k=h?.slice(m,b+1),k!=null)return sEe({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:m,areaSettings:u,stackedData:a,displayedData:k,chartBaseValue:d,bandSize:l})}}),H2e=["id"],G2e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(null,arguments)}function LF(e,t){if(e==null)return{};var n,r,i=Y2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function u5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u5(Object(n),!0).forEach(function(r){q2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q2e(e,t,n){return(t=K2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K2e(e){var t=W2e(e,"string");return typeof t=="symbol"?t:t+""}function W2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tv(e,t){return e&&e!=="none"?e:t}var V2e=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:Tv(r,i),value:w8(n,t),payload:e}]},Z2e=S.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:w8(o,t),hide:l,type:d,color:Tv(r,a),unit:u}};return S.createElement(ZSe,{tooltipEntrySettings:h})});function X2e(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:a,dataKey:o}=r,l=io(r);return S.createElement(bke,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function J2e(e){var{showLabels:t,children:n,points:r}=e,i=r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return qd(qd({},u),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return S.createElement(FSe,{value:t?i:void 0},n)}function d5(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:a}=e,{layout:o,type:l,stroke:u,connectNulls:d,isRange:h}=a,{id:m}=a,b=LF(a,H2e),y=io(b),k=ka(b);return S.createElement(S.Fragment,null,t?.length>1&&S.createElement(zo,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(ty,_u({},k,{id:m,points:t,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&S.createElement(ty,_u({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),u!=="none"&&h&&S.createElement(ty,_u({},y,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),S.createElement(X2e,{points:t,props:b,clipPathId:i}))}function Q2e(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].y,o=r[r.length-1].y;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.x||0));return et(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.x||0),u)),et(u)?S.createElement("rect",{x:0,y:a<o?a:a-l,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(l)}):null}function eEe(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,a=r[0].x,o=r[r.length-1].x;if(!Pn(a)||!Pn(o))return null;var l=t*Math.abs(a-o),u=Math.max(...r.map(d=>d.y||0));return et(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.y||0),u)),et(u)?S.createElement("rect",{x:a<o?a:a-l,y:0,width:l,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function tEe(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:a}=e;return n==="vertical"?S.createElement(Q2e,{alpha:t,points:r,baseLine:i,strokeWidth:a}):S.createElement(eEe,{alpha:t,points:r,baseLine:i,strokeWidth:a})}function nEe(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=e,{points:o,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:m,onAnimationStart:b,onAnimationEnd:y}=r,k=S.useMemo(()=>({points:o,baseLine:l}),[o,l]),w=H8(k,"recharts-area-"),_=Z0e(),[T,O]=S.useState(!1),j=!T,C=S.useCallback(()=>{typeof y=="function"&&y(),O(!1)},[y]),M=S.useCallback(()=>{typeof b=="function"&&b(),O(!0)},[b]);if(_==null)return null;var P=i.current,I=a.current;return S.createElement(J2e,{showLabels:j,points:o},r.children,S.createElement(F8,{animationId:w,begin:d,duration:h,isActive:u,easing:m,onAnimationEnd:C,onAnimationStart:M,key:w},U=>{if(P){var W=P.length/o.length,q=U===1?o:o.map((B,K)=>{var V=Math.floor(K*W);if(P[V]){var Z=P[V];return qd(qd({},B),{},{x:Do(Z.x,B.x,U),y:Do(Z.y,B.y,U)})}return B}),H;return et(l)?H=Do(I,l,U):Cr(l)||ao(l)?H=Do(I,0,U):H=l.map((B,K)=>{var V=Math.floor(K*W);if(Array.isArray(I)&&I[V]){var Z=I[V];return qd(qd({},B),{},{x:Do(Z.x,B.x,U),y:Do(Z.y,B.y,U)})}return B}),U>0&&(i.current=q,a.current=H),S.createElement(d5,{points:q,baseLine:H,needClip:t,clipPathId:n,props:r})}return U>0&&(i.current=o,a.current=l),S.createElement(zo,null,u&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(tEe,{alpha:U,points:o,baseLine:l,layout:_,strokeWidth:r.strokeWidth}))),S.createElement(zo,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(d5,{points:o,baseLine:l,needClip:t,clipPathId:n,props:r})))}),S.createElement(YSe,{label:r.label}))}function rEe(e){var{needClip:t,clipPathId:n,props:r}=e,i=S.useRef(null),a=S.useRef();return S.createElement(nEe,{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class iEe extends S.PureComponent{render(){var{hide:t,dot:n,points:r,className:i,top:a,left:o,needClip:l,xAxisId:u,yAxisId:d,width:h,height:m,id:b,baseLine:y,zIndex:k}=this.props;if(t)return null;var w=dn("recharts-area",i),_=b,{r:T,strokeWidth:O}=$2e(n),j=xF(n),C=T*2+O,M=l?"url(#clipPath-".concat(j?"":"dots-").concat(_,")"):void 0;return S.createElement(Ws,{zIndex:k},S.createElement(zo,{className:w},l&&S.createElement("defs",null,S.createElement(Bke,{clipPathId:_,xAxisId:u,yAxisId:d}),!j&&S.createElement("clipPath",{id:"clipPath-dots-".concat(_)},S.createElement("rect",{x:o-C/2,y:a-C/2,width:h+C,height:m+C}))),S.createElement(rEe,{needClip:l,clipPathId:_,props:this.props})),S.createElement(a5,{points:r,mainColor:Tv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}),this.props.isRange&&Array.isArray(y)&&S.createElement(a5,{points:y,mainColor:Tv(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:M}))}}var IF={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Zr.area};function aEe(e){var t,n=Zi(e,IF),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,fill:d,fillOpacity:h,hide:m,isAnimationActive:b,legendType:y,stroke:k,xAxisId:w,yAxisId:_}=n,T=LF(n,G2e),O=Hp(),j=JU(),{needClip:C}=EF(w,_),M=ki(),{points:P,isRange:I,baseLine:U}=(t=it(V=>F2e(V,w,_,M,e.id)))!==null&&t!==void 0?t:{},W=$A();if(O!=="horizontal"&&O!=="vertical"||W==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:q,width:H,x:B,y:K}=W;return!P||!P.length?null:S.createElement(iEe,_u({},T,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:U,connectNulls:l,dot:u,fill:d,fillOpacity:h,height:q,hide:m,layout:O,isAnimationActive:b==="auto"?!Pf.isSsr:b,isRange:I,legendType:y,needClip:C,points:P,stroke:k,width:H,left:B,top:K,xAxisId:w,yAxisId:_}))}var oEe=(e,t,n,r,i)=>{var a=n??t;if(et(a))return a;var o=e==="horizontal"?i:r,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function sEe(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:m,yAxisTicks:b,bandSize:y}=e,k=i&&i.length,w=oEe(a,o,n,l,u),_=a==="horizontal",T=!1,O=d.map((C,M)=>{var P;k?P=i[h+M]:(P=Ur(C,r),Array.isArray(P)?T=!0:P=[w,P]);var I=P[1]==null||k&&!t&&Ur(C,r)==null;return _?{x:H3({axis:l,ticks:m,bandSize:y,entry:C,index:M}),y:I?null:u.scale(P[1]),value:P,payload:C}:{x:I?null:l.scale(P[1]),y:H3({axis:u,ticks:b,bandSize:y,entry:C,index:M}),value:P,payload:C}}),j;return k||T?j=O.map(C=>{var M=Array.isArray(C.value)?C.value[0]:null;return _?{x:C.x,y:M!=null&&C.y!=null?u.scale(M):null,payload:C.payload}:{x:M!=null?l.scale(M):null,y:C.y,payload:C.payload}}):j=_?u.scale(w):l.scale(w),{points:O,baseLine:j,isRange:T}}function lEe(e){var t=Zi(e,IF),n=ki();return S.createElement(tke,{id:t.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(XSe,{legendPayload:V2e(t)}),S.createElement(Z2e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),S.createElement(lke,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:f0e(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),S.createElement(aEe,_u({},t,{id:r}))))}var $F=S.memo(lEe,BA);$F.displayName="Area";var cEe=["domain","range"],uEe=["domain","range"];function f5(e,t){if(e==null)return{};var n,r,i=dEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function h5(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function BF(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=f5(e,cEe),{domain:a,range:o}=t,l=f5(t,uEe);return!h5(n,a)||!h5(r,o)?!1:BA(i,l)}var fEe=["dangerouslySetInnerHTML","ticks"],hEe=["id"];function PE(){return PE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PE.apply(null,arguments)}function m5(e,t){if(e==null)return{};var n,r,i=mEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pEe(e){var t=vr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(_ke(e)):n.current!==e&&t(Ske({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(kke(n.current)),n.current=null)},[t]),null}var gEe=e=>{var{xAxisId:t,className:n}=e,r=it(S8),i=ki(),a="xAxis",o=it(_=>zf(_,a,t,i)),l=it(_=>NU(_,a,t,i)),u=it(_=>bwe(_,t)),d=it(_=>Swe(_,t)),h=it(_=>Vz(_,t));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:b}=e,y=m5(e,fEe),{id:k}=h,w=m5(h,hEe);return S.createElement(FA,PE({},y,w,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:dn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},bEe={allowDataOverflow:fr.allowDataOverflow,allowDecimals:fr.allowDecimals,allowDuplicatedCategory:fr.allowDuplicatedCategory,angle:fr.angle,axisLine:Os.axisLine,height:fr.height,hide:!1,includeHidden:fr.includeHidden,interval:fr.interval,minTickGap:fr.minTickGap,mirror:fr.mirror,orientation:fr.orientation,padding:fr.padding,reversed:fr.reversed,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,tickLine:Os.tickLine,tickSize:Os.tickSize,type:fr.type,xAxisId:0},yEe=e=>{var t=Zi(e,bEe);return S.createElement(S.Fragment,null,S.createElement(pEe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),S.createElement(gEe,t))},zF=S.memo(yEe,BF);zF.displayName="XAxis";var vEe=["dangerouslySetInnerHTML","ticks"],xEe=["id"];function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RE.apply(null,arguments)}function p5(e,t){if(e==null)return{};var n,r,i=wEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _Ee(e){var t=vr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?t(Eke(e)):n.current!==e&&t(jke({prev:n.current,next:e})),n.current=e},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(t(Tke(n.current)),n.current=null)},[t]),null}var SEe=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=S.useRef(null),o=S.useRef(null),l=it(S8),u=ki(),d=vr(),h="yAxis",m=it(M=>zf(M,h,t,u)),b=it(M=>jwe(M,t)),y=it(M=>Ewe(M,t)),k=it(M=>NU(M,h,t,u)),w=it(M=>Zz(M,t));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!b||IA(i)||S.isValidElement(i)||w==null)){var M=a.current;if(M){var P=M.getCalculatedWidth();Math.round(b.width)!==Math.round(P)&&d(Ake({id:t,width:P}))}}},[k,b,d,i,t,r,w]),b==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:T}=e,O=p5(e,vEe),{id:j}=w,C=p5(w,xEe);return S.createElement(FA,RE({},O,C,{ref:a,labelRef:o,scale:m,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:dn("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:k,axisType:h}))},kEe={allowDataOverflow:hr.allowDataOverflow,allowDecimals:hr.allowDecimals,allowDuplicatedCategory:hr.allowDuplicatedCategory,angle:hr.angle,axisLine:Os.axisLine,hide:!1,includeHidden:hr.includeHidden,interval:hr.interval,minTickGap:hr.minTickGap,mirror:hr.mirror,orientation:hr.orientation,padding:hr.padding,reversed:hr.reversed,scale:hr.scale,tick:hr.tick,tickCount:hr.tickCount,tickLine:Os.tickLine,tickSize:Os.tickSize,type:hr.type,width:hr.width,yAxisId:0},EEe=e=>{var t=Zi(e,kEe);return S.createElement(S.Fragment,null,S.createElement(_Ee,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),S.createElement(SEe,t))},UF=S.memo(EEe,BF);UF.displayName="YAxis";var jEe=(e,t)=>t,HA=xe([jEe,an,Kz,or,qU,Ks,z_e,Pr],K_e),GA=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},FF=Ea("mouseClick"),HF=Up();HF.startListening({actionCreator:FF,effect:(e,t)=>{var n=e.payload,r=HA(t.getState(),GA(n));r?.activeIndex!=null&&t.dispatch(Bwe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var LE=Ea("mouseMove"),GF=Up(),Cb=null;GF.startListening({actionCreator:LE,effect:(e,t)=>{var n=e.payload;Cb!==null&&cancelAnimationFrame(Cb);var r=GA(n);Cb=requestAnimationFrame(()=>{var i=t.getState(),a=jA(i,i.tooltip.settings.shared);if(a==="axis"){var o=HA(i,r);o?.activeIndex!=null?t.dispatch($U({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(IU())}Cb=null})}});var g5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},YF=Si({name:"rootProps",initialState:g5,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:g5.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),TEe=YF.reducer,{updateOptions:AEe}=YF.actions,qF=Si({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Me}=qF.actions,NEe=qF.reducer,KF=Ea("keyDown"),WF=Ea("focus"),YA=Up();YA.startListening({actionCreator:KF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=TA(i,Ff(n),Xp(n),n0(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=Ks(n);if(a==="Enter"){var d=_v(n,"axis","hover",String(i.index));t.dispatch(AE({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var h=Owe(n),m=h==="left-to-right"?1:-1,b=a==="ArrowRight"?1:-1,y=l+b*m;if(!(u==null||y>=u.length||y<0)){var k=_v(n,"axis","hover",String(y));t.dispatch(AE({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:k}))}}}}}});YA.startListening({actionCreator:WF,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=_v(n,"axis","hover",String(a));t.dispatch(AE({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var da=Ea("externalEvent"),VF=Up(),yk=new Map;VF.startListening({actionCreator:da,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=yk.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var l=t.getState(),u={activeCoordinate:E_e(l),activeDataKey:S_e(l),activeIndex:yp(l),activeLabel:VU(l),activeTooltipIndex:yp(l),isTooltipActive:j_e(l)};n(u,r)}finally{yk.delete(i)}});yk.set(i,o)}}});var OEe=xe([Uf],e=>e.tooltipItemPayloads),CEe=xe([OEe,e0,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),ZF=Ea("touchMove"),XF=Up();XF.startListening({actionCreator:ZF,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=jA(r,r.tooltip.settings.shared);if(i==="axis"){var a=HA(r,GA({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&t.dispatch($U({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(v0e),h=(o=u.getAttribute(x0e))!==null&&o!==void 0?o:void 0,m=CEe(t.getState(),d,h);t.dispatch($we({activeDataKey:h,activeIndex:d,activeCoordinate:m}))}}}});var MEe=h4({brush:Hke,cartesianAxis:Nke,chartData:E1e,errorBars:$ke,graphicalItems:oke,layout:n0e,legend:hge,options:x1e,polarAxis:KSe,polarOptions:NEe,referenceElements:Zke,rootProps:TEe,tooltip:zwe,zIndex:s1e}),DEe=function(t){return Tpe({reducer:MEe,preloadedState:t,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([HF.middleware,GF.middleware,YA.middleware,VF.middleware,XF.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(a8({type:"raf"}))},devTools:Pf.devToolsEnabled})};function PEe(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ki(),a=S.useRef(null);if(i)return n;a.current==null&&(a.current=DEe(t));var o=jT;return S.createElement(_4,{context:o,store:a.current},n)}function REe(e){var{layout:t,margin:n}=e,r=vr(),i=ki();return S.useEffect(()=>{i||(r(Qpe(t)),r(Jpe(n)))},[r,i,t,n]),null}var LEe=S.memo(REe,BA);function IEe(e){var t=vr();return S.useEffect(()=>{t(AEe(e))},[t,e]),null}function b5(e){var{zIndex:t,isPanorama:n}=e,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=wF("".concat(r).concat(t)),a=vr();return S.useLayoutEffect(()=>(a(a1e({zIndex:t,elementId:i,isPanorama:n})),()=>{a(o1e({zIndex:t,isPanorama:n}))}),[a,t,i,n]),S.createElement("g",{tabIndex:-1,id:i})}function y5(e){var{children:t,isPanorama:n}=e,r=it(V_e);if(!r||r.length===0)return t;var i=r.filter(o=>o<0),a=r.filter(o=>o>0);return S.createElement(S.Fragment,null,i.map(o=>S.createElement(b5,{key:o,zIndex:o,isPanorama:n})),t,a.map(o=>S.createElement(b5,{key:o,zIndex:o,isPanorama:n})))}var $Ee=["children"];function BEe(e,t){if(e==null)return{};var n,r,i=zEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(null,arguments)}var UEe={width:"100%",height:"100%",display:"block"},FEe=S.forwardRef((e,t)=>{var n=N8(),r=O8(),i=$8();if(!Fo(n)||!Fo(r))return null;var{children:a,otherAttributes:o,title:l,desc:u}=e,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0),S.createElement(m9,Av({},o,{title:l,desc:u,role:h,tabIndex:d,width:n,height:r,style:UEe,ref:t}),a)}),HEe=e=>{var{children:t}=e,n=it(Cx);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return S.createElement(m9,{width:r,height:i,x:o,y:a},t)},v5=S.forwardRef((e,t)=>{var{children:n}=e,r=BEe(e,$Ee),i=ki();return i?S.createElement(HEe,null,S.createElement(y5,{isPanorama:!0},n)):S.createElement(FEe,Av({ref:t},r),S.createElement(y5,{isPanorama:!1},n))});function GEe(){var e=vr(),[t,n]=S.useState(null),r=it(y0e);return S.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Pn(a)&&a!==r&&e(t0e(a))}},[t,e,r]),n}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YEe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(r){qEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qEe(e,t,n){return(t=KEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KEe(e){var t=WEe(e,"string");return typeof t=="symbol"?t:t+""}function WEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(null,arguments)}var VEe=()=>(P1e(),null);function Nv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ZEe=S.forwardRef((e,t)=>{var n,r,i=S.useRef(null),[a,o]=S.useState({containerWidth:Nv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Nv((r=e.style)===null||r===void 0?void 0:r.height)}),l=S.useCallback((d,h)=>{o(m=>{var b=Math.round(d),y=Math.round(h);return m.containerWidth===b&&m.containerHeight===y?m:{containerWidth:b,containerHeight:y}})},[]),u=S.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:m}=d.getBoundingClientRect();l(h,m);var b=k=>{var{width:w,height:_}=k[0].contentRect;l(w,_)},y=new ResizeObserver(b);y.observe(d),i.current=y}},[t,l]);return S.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[l]),S.createElement(S.Fragment,null,S.createElement(Dx,{width:a.containerWidth,height:a.containerHeight}),S.createElement("div",Ou({ref:u},e)))}),XEe=S.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=S.useState({containerWidth:Nv(n),containerHeight:Nv(r)}),o=S.useCallback((u,d)=>{a(h=>{var m=Math.round(u),b=Math.round(d);return h.containerWidth===m&&h.containerHeight===b?h:{containerWidth:m,containerHeight:b}})},[]),l=S.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();o(d,h)}},[t,o]);return S.createElement(S.Fragment,null,S.createElement(Dx,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Ou({ref:l},e)))}),JEe=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return S.createElement(S.Fragment,null,S.createElement(Dx,{width:n,height:r}),S.createElement("div",Ou({ref:t},e)))}),QEe=S.forwardRef((e,t)=>{var{width:n,height:r}=e;return Ps(n)||Ps(r)?S.createElement(XEe,Ou({},e,{ref:t})):S.createElement(JEe,Ou({},e,{ref:t}))});function eje(e){return e===!0?ZEe:QEe}var tje=S.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:m,onMouseUp:b,onTouchEnd:y,onTouchMove:k,onTouchStart:w,style:_,width:T,responsive:O,dispatchTouchEvents:j=!0}=e,C=S.useRef(null),M=vr(),[P,I]=S.useState(null),[U,W]=S.useState(null),q=GEe(),H=PT(),B=H?.width>0?H.width:T,K=H?.height>0?H.height:i,V=S.useCallback(se=>{q(se),typeof t=="function"&&t(se),I(se),W(se),se!=null&&(C.current=se)},[q,t,I,W]),Z=S.useCallback(se=>{M(FF(se)),M(da({handler:a,reactEvent:se}))},[M,a]),G=S.useCallback(se=>{M(LE(se)),M(da({handler:d,reactEvent:se}))},[M,d]),J=S.useCallback(se=>{M(IU()),M(da({handler:h,reactEvent:se}))},[M,h]),Q=S.useCallback(se=>{M(LE(se)),M(da({handler:m,reactEvent:se}))},[M,m]),oe=S.useCallback(()=>{M(WF())},[M]),te=S.useCallback(se=>{M(KF(se.key))},[M]),z=S.useCallback(se=>{M(da({handler:o,reactEvent:se}))},[M,o]),X=S.useCallback(se=>{M(da({handler:l,reactEvent:se}))},[M,l]),re=S.useCallback(se=>{M(da({handler:u,reactEvent:se}))},[M,u]),ie=S.useCallback(se=>{M(da({handler:b,reactEvent:se}))},[M,b]),fe=S.useCallback(se=>{M(da({handler:w,reactEvent:se}))},[M,w]),de=S.useCallback(se=>{j&&M(ZF(se)),M(da({handler:k,reactEvent:se}))},[M,j,k]),pe=S.useCallback(se=>{M(da({handler:y,reactEvent:se}))},[M,y]),Ne=eje(O);return S.createElement(rF.Provider,{value:P},S.createElement(Dhe.Provider,{value:U},S.createElement(Ne,{width:B??_?.width,height:K??_?.height,className:dn("recharts-wrapper",r),style:YEe({position:"relative",cursor:"default",width:B,height:K},_),onClick:Z,onContextMenu:z,onDoubleClick:X,onFocus:oe,onKeyDown:te,onMouseDown:re,onMouseEnter:G,onMouseLeave:J,onMouseMove:Q,onMouseUp:ie,onTouchEnd:pe,onTouchMove:de,onTouchStart:fe,ref:V},S.createElement(VEe,null),n)))}),nje=["width","height","responsive","children","className","style","compact","title","desc"];function rje(e,t){if(e==null)return{};var n,r,i=ije(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ije(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aje=S.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:l,compact:u,title:d,desc:h}=e,m=rje(e,nje),b=io(m);return u?S.createElement(S.Fragment,null,S.createElement(Dx,{width:n,height:r}),S.createElement(v5,{otherAttributes:b,title:d,desc:h},a)):S.createElement(tje,{className:o,style:l,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(v5,{otherAttributes:b,title:d,desc:h,ref:t},S.createElement(Jke,null,a)))});function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IE.apply(null,arguments)}var oje={top:5,right:5,bottom:5,left:5},sje={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:oje,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},lje=S.forwardRef(function(t,n){var r,i=Zi(t.categoricalChartProps,sje),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=t,h={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return S.createElement(PEe,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},S.createElement(Fke,{chartData:d.data}),S.createElement(LEe,{layout:i.layout,margin:i.margin}),S.createElement(IEe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(aje,IE({},i,{ref:n})))}),cje=["axis"],uje=S.forwardRef((e,t)=>S.createElement(lje,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cje,tooltipPayloadSearcher:y1e,categoricalChartProps:e,ref:t}));function JF(e){return typeof e=="object"&&e!==null}function du(e,t=0){return typeof e=="number"&&Number.isFinite(e)?e:t}function dje(e,t=""){return typeof e=="string"?e:t}function fje(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){if(!JF(n))continue;const r=dje(n.day),i=du(n.dau),a=du(n.total_active_ms);r&&t.push({day:r,dau:i,total_active_ms:a})}return t}function hje(e){return JF(e)?{online_now:du(e.online_now),active_today:du(e.active_today),active_7d:du(e.active_7d),active_30d:du(e.active_30d),active_365d:du(e.active_365d),series:fje(e.series)}:null}function mje(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function w5(){const[e,t]=S.useState(30),[n,r]=S.useState(null),[i,a]=S.useState(0),[o,l]=S.useState(!1),[u,d]=S.useState(""),h=S.useRef(!1),m=S.useRef(!1),b=S.useCallback(async()=>{if(!h.current){h.current=!0,l(!0),d("");try{const{data:_,error:T}=await De.rpc("admin_dashboard_stats",{p_days:e});if(T){d(T.message||"RPC error"),r(null);return}const O=hje(_);if(!O){d("   ( )"),r(null);return}r(O),a(O.online_now)}finally{l(!1),h.current=!1}}},[e]),y=S.useCallback(async()=>{if(!m.current){m.current=!0;try{const{data:_,error:T}=await De.rpc("admin_online_now");if(T)return;const O=typeof _=="number"?_:typeof _=="string"?Number(_):0;Number.isFinite(O)&&a(O)}finally{m.current=!1}}},[]);S.useEffect(()=>{b()},[b]),S.useEffect(()=>{y();const _=window.setInterval(()=>void y(),3e4);return()=>window.clearInterval(_)},[y]),S.useEffect(()=>{const _=window.setInterval(()=>void b(),3e5);return()=>window.clearInterval(_)},[b]);const k=S.useMemo(()=>n?.series??[],[n]),w=S.useMemo(()=>k.reduce((_,T)=>_+(T.total_active_ms||0),0),[k]);return g.jsx(_he,{allow:["admin","operator","viewer"],children:g.jsxs("div",{className:"p-6 text-white",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:e,onChange:_=>{const T=Number(_.target.value);(T===30||T===60||T===90)&&t(T)},className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",title:"DAU  ",children:[g.jsx("option",{value:30,children:" 30"}),g.jsx("option",{value:60,children:" 60"}),g.jsx("option",{value:90,children:" 90"})]}),g.jsx("button",{type:"button",onClick:()=>void b(),className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer text-sm",children:""})]})]}),u?g.jsx("div",{className:"text-red-400 mb-3",children:u}):null,o?g.jsx("div",{className:"text-neutral-300 mb-3",children:"Loading..."}):null,g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-10",children:[g.jsx(ym,{label:" ",value:i}),g.jsx(ym,{label:" (DAU)",value:n?.active_today??0}),g.jsx(ym,{label:" 7 ",value:n?.active_7d??0}),g.jsx(ym,{label:" 30 ",value:n?.active_30d??0}),g.jsx(ym,{label:" 1 ",value:n?.active_365d??0})]}),g.jsxs("section",{className:"mb-10",children:[g.jsxs("div",{className:"flex items-end justify-between gap-3 mb-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"DAU "}),g.jsx("div",{className:"text-xs text-neutral-400",children:"(     )"})]}),g.jsx(pje,{data:k})]}),g.jsxs("section",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"   ()"}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"series.total_active_ms  (day    )"}),g.jsx("div",{className:"text-2xl font-bold mt-1",children:mje(w)})]})]})]})})}function ym({label:e,value:t}){return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsx("div",{className:"text-neutral-400 text-sm",children:e}),g.jsx("div",{className:"text-3xl font-bold mt-1",children:t})]})}function pje({data:e}){return g.jsx("div",{className:"w-full h-64 bg-neutral-900 border border-neutral-700 rounded-lg p-2 text-xs",children:g.jsx(W0e,{width:"100%",height:"100%",children:g.jsxs(uje,{data:e,children:[g.jsx(OF,{strokeDasharray:"3 3"}),g.jsx(zF,{dataKey:"day"}),g.jsx(UF,{}),g.jsx(F1e,{formatter:(t,n)=>n==="dau"?[t,"DAU"]:[t,n]}),g.jsx($F,{type:"monotone",dataKey:"dau"})]})})})}function gje(){const[e,t]=S.useState(""),[n,r]=S.useState("ACTIVE"),[i,a]=S.useState("LAST_SEEN_DESC"),[o,l]=S.useState(1),[u,d]=S.useState({});return{search:e,setSearch:t,tab:n,setTab:r,sort:i,setSort:a,page:o,setPage:l,draftByUser:u,setDraftByUser:d,setDraft:(m,b)=>{d(y=>{const k=y[m]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1};return{...y,[m]:{...k,...b}}})}}}const $E=20;function bje(e){return typeof e=="object"&&e!==null}function Ao(e){return typeof e=="string"?e:null}function _5(e){return typeof e=="boolean"?e:null}function vk(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()!==""){const t=Number(e);return Number.isFinite(t)?t:null}return null}function QF(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function yje(e){return QF(e)?e:null}function vje(e){if(!bje(e))return null;const t=Ao(e.user_id);return t?{user_id:t,name:Ao(e.name),nickname:Ao(e.nickname),email:Ao(e.email),disabled_at:Ao(e.disabled_at),created_at:Ao(e.created_at),plan:yje(e.plan),starts_at:Ao(e.starts_at),expires_at:Ao(e.expires_at),can_use_myo_viewer:_5(e.can_use_myo_viewer),myeongsik_count:vk(e.myeongsik_count),last_seen_at:Ao(e.last_seen_at),last_path:Ao(e.last_path),total_active_ms:vk(e.total_active_ms),online:_5(e.online),total_count:vk(e.total_count)}:null}function S5(e){const t=(e??"").trim();return t.length?t:null}function eH(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return!1;const n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||r<1||r>12)return!1;const a=new Date(Date.UTC(n,r-1,i));return a.getUTCFullYear()===n&&a.getUTCMonth()===r-1&&a.getUTCDate()===i}function xje(e,t){if(!eH(e))throw new Error(`   : ${e}`);const n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)throw new Error(`   : ${e}`);const r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=new Date(Date.UTC(r,i-1,a));o.setUTCDate(o.getUTCDate()+t);const l=String(o.getUTCFullYear()).padStart(4,"0"),u=String(o.getUTCMonth()+1).padStart(2,"0"),d=String(o.getUTCDate()).padStart(2,"0");return`${l}-${u}-${d}`}function k5(e){if(!eH(e))throw new Error(`   : ${e}`);return`${e}T00:00:00.000Z`}function wje(e){return typeof e=="object"&&e!==null}function _je(e,t){if(console.error(e,t),wje(t)&&console.error(`${e} fields`,{message:t.message,code:t.code,details:t.details,hint:t.hint}),typeof t=="object"&&t!==null)try{console.error(`${e} ownKeys`,Object.getOwnPropertyNames(t))}catch{}try{console.error(`${e} json`,JSON.stringify(t))}catch{}}function Sje(){const[e,t]=S.useState([]),[n,r]=S.useState(0),[i,a]=S.useState(!1),[o,l]=S.useState(null),u=S.useCallback(async h=>{const{search:m,tab:b,sort:y,page:k}=h;a(!0),l(null);try{const w=Math.max(0,(Math.max(1,k)-1)*$E),{data:_,error:T}=await De.rpc("admin_list_users",{p_search:m&&m.trim()?m.trim():null,p_tab:b,p_sort:y,p_limit:$E,p_offset:w});if(T)throw T;const j=(Array.isArray(_)?_:[]).map(vje).filter(C=>C!==null);t(j),r(j[0]?.total_count??0)}catch(w){t([]),r(0),l(w instanceof Error?w.message:"  ")}finally{a(!1)}},[]),d=S.useCallback(async(h,m,b,y)=>{if(m){l(null),b(h,{saving:!0});try{if(!QF(m.plan))throw new Error(`  : ${String(m.plan)}`);const k=S5(m.startDate),w=S5(m.endDate),_=k?k5(k):null,T=w?k5(xje(w,1)):null;if(_&&T){const C=Date.parse(_),M=Date.parse(T);if(!Number.isFinite(C)||!Number.isFinite(M))throw new Error("  ");if(M<=C)throw new Error("  .")}const O={p_target_user_id:h,p_plan:m.plan,p_can_use_myo_viewer:m.myoViewer==="ON",p_starts_at:_,p_expires_at:T},{error:j}=await De.rpc("admin_set_user_entitlements",O);if(j)throw _je("admin_set_user_entitlements error",j),j;b(h,{saving:!1,lastSavedAt:Date.now()}),await y()}catch(k){throw b(h,{saving:!1}),l(k instanceof Error?k.message:" "),k}}},[]);return{rows:e,totalCount:n,loading:i,error:o,setError:l,fetchList:u,saveEntitlements:d}}const tH=[{value:"FREE",label:"FREE ()"},{value:"BASIC",label:"BASIC (ON)"},{value:"PRO",label:"PRO (OFF)"}];function kje(e){return e==="FREE"||e==="BASIC"||e==="PRO"}function Eje(e){const t=e??"FREE";return tH.find(n=>n.value===t)?.label??String(t)}function jje(e){if(!e)return" ";const t=Date.parse(e);if(!Number.isFinite(t))return" ";const n=Date.now()-t,r=Math.floor(n/1e3);if(r<15)return"";if(r<60)return`${r} `;const i=Math.floor(r/60);if(i<60)return`${i} `;const a=Math.floor(i/60);return a<24?`${a} `:`${Math.floor(a/24)} `}function E5(e){if(!e||e<=0)return"0";const t=Math.floor(e/1e3),n=Math.floor(t/86400),r=Math.floor(t%86400/3600),i=Math.floor(t%3600/60);return n>=1?`${n} ${r}`:r>=1?`${r} ${i}`:`${i}`}function Ov(e){if(!e)return"";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toISOString().slice(0,10):""}function Tje(e,t){const n=Ov(e),r=Ov(t);return!n&&!r?" ":n&&!r?`${n} ~`:!n&&r?`~ ${r}`:`${n} ~ ${r}`}function Aje(e,t){const n={...e};for(const r of t){const i=r.plan??"FREE",a=Ov(r.starts_at),o=Ov(r.expires_at),l=r.can_use_myo_viewer===!0?"ON":"OFF",u=n[r.user_id];if(!u){n[r.user_id]={plan:i,startDate:a,endDate:o,myoViewer:l,saving:!1};continue}u.saving||(u.plan!==i||u.startDate!==a||u.endDate!==o||u.myoViewer!==l)&&(n[r.user_id]={...u,plan:i,startDate:a,endDate:o,myoViewer:l})}return n}function Nje(){const e=gje(),{search:t,setSearch:n,tab:r,setTab:i,sort:a,setSort:o,page:l,setPage:u,draftByUser:d,setDraftByUser:h,setDraft:m}=e,{rows:b,totalCount:y,loading:k,error:w,fetchList:_,saveEntitlements:T}=Sje(),O=S.useMemo(()=>Math.max(1,Math.ceil(y/$E)),[y]);return S.useEffect(()=>{u(1)},[r,a]),S.useEffect(()=>{_({search:t,tab:r,sort:a,page:l})},[_,t,r,a,l]),S.useEffect(()=>{l>O&&u(O)},[l,O,u]),S.useEffect(()=>{h(j=>Aje(j,b))},[b,h]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Users"}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-4",children:[g.jsx("input",{className:"px-3 py-2 bg-neutral-800 border border-neutral-700 rounded w-full max-w-sm",placeholder:"Search (name, email, userId...)",value:t,onChange:j=>{n(j.target.value),u(1)}}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:r,onChange:j=>{const C=j.target.value;i(C==="DISABLED"?"DISABLED":C==="ALL"?"ALL":"ACTIVE")},children:[g.jsx("option",{value:"ACTIVE",children:""}),g.jsx("option",{value:"DISABLED",children:""}),g.jsx("option",{value:"ALL",children:""})]}),g.jsxs("select",{className:"px-2 py-2 bg-neutral-800 border border-neutral-700 rounded text-sm",value:a,onChange:j=>{const C=j.target.value;(C==="LAST_SEEN_DESC"||C==="LAST_SEEN_ASC"||C==="CREATED_DESC"||C==="CREATED_ASC"||C==="PLAN_DESC"||C==="ONLINE_ACTIVE_MS_DESC"||C==="TOTAL_ACTIVE_MS_DESC")&&o(C)},children:[g.jsx("option",{value:"LAST_SEEN_DESC",children:" "}),g.jsx("option",{value:"CREATED_DESC",children:" "}),g.jsx("option",{value:"PLAN_DESC",children:""}),g.jsx("option",{value:"ONLINE_ACTIVE_MS_DESC",children:"+"}),g.jsx("option",{value:"TOTAL_ACTIVE_MS_DESC",children:""}),g.jsx("option",{value:"LAST_SEEN_ASC",children:" "}),g.jsx("option",{value:"CREATED_ASC",children:" "})]})]})]}),w&&g.jsx("div",{className:"text-red-400 mb-2",children:w}),k&&g.jsx("div",{children:"Loading..."}),g.jsx("div",{className:"space-y-3",children:b.map(j=>{const C=j.name||j.nickname||"(no profile)",M=j.email||"",P=d[j.user_id]??{plan:"FREE",startDate:"",endDate:"",myoViewer:"OFF",saving:!1,lastSavedAt:void 0},I=Date.now(),U=(j.starts_at?Date.parse(j.starts_at)<=I:!0)&&(j.expires_at?Date.parse(j.expires_at)>I:!0),W=j.plan??"FREE",q=U?W:"FREE",H=j.can_use_myo_viewer===!0?"ON":"OFF",B=j.last_seen_at??null,K=j.online===!0,V=j.total_active_ms??null;return g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg hover:bg-neutral-800",children:[g.jsxs("div",{className:"font-semibold text-lg flex flex-col desk:flex-row item-start desk:items-center justify-between gap-3",children:[g.jsxs("div",{className:"min-w-0 flex flex-col desk:flex-row item-start desk:items-center gap-2",children:[g.jsx("span",{className:"text-nowrap mr-1",children:C}),M?g.jsxs("span",{className:"text-sm text-neutral-400",children:["(",M,")"]}):null,g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${K?"bg-emerald-900/40 border-emerald-700 text-emerald-300":"bg-neutral-800 border-neutral-700 text-neutral-300"}`,title:B?new Date(B).toLocaleString():" ",children:[K?"":"","  ",jje(B)]}),g.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full border bg-neutral-800 border-neutral-700 text-neutral-300",title:" ",children:[" ",E5(V)]})]})]}),g.jsx("span",{className:"text-neutral-500 text-sm shrink-0",children:j.user_id})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",j.myeongsik_count??0,"",B?g.jsxs(g.Fragment,{children:["    ",new Date(B).toLocaleString()]}):g.jsx(g.Fragment,{children:"     "}),g.jsxs(g.Fragment,{children:["   ",E5(V)]})]}),g.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:[" ",Eje(q),"  ",Tje(j.starts_at,j.expires_at),"    ",H,!U&&j.plan&&j.plan!=="FREE"?" ()":""]}),g.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("div",{className:"mb-1",children:[g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.startDate,onChange:Z=>m(j.user_id,{startDate:Z.target.value})}),g.jsx("span",{className:"text-neutral-500 mx-1",children:"~"}),g.jsx("input",{type:"date",className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.endDate,onChange:Z=>m(j.user_id,{endDate:Z.target.value})})]}),g.jsx("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.plan,onChange:Z=>{const G=Z.target.value;kje(G)&&m(j.user_id,{plan:G})},children:tH.map(Z=>g.jsx("option",{value:Z.value,children:Z.label},Z.value))}),g.jsxs("select",{className:"px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm",value:P.myoViewer,onChange:Z=>m(j.user_id,{myoViewer:Z.target.value==="ON"?"ON":"OFF"}),children:[g.jsx("option",{value:"ON",children:"  ON"}),g.jsx("option",{value:"OFF",children:"  OFF"})]}),g.jsx("button",{type:"button",disabled:P.saving,onClick:()=>void T(j.user_id,P,e.setDraft,()=>_({search:t,tab:r,sort:a,page:l})),className:"px-3 py-1 rounded bg-purple-600 hover:bg-purple-500 disabled:opacity-50 cursor-pointer",children:P.saving?" ...":""}),g.jsx("button",{type:"button",onClick:()=>location.href=`/admin/user/${j.user_id}`,className:"px-3 py-1 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""})]}),P.lastSavedAt!=null?g.jsxs("div",{className:"text-xs text-emerald-400",children:["  ",new Date(P.lastSavedAt).toLocaleString()]}):null]})]},j.user_id)})}),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{disabled:l<=1,onClick:()=>u(j=>j-1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""}),g.jsxs("span",{children:[l," / ",O," ( ",y,")"]}),g.jsx("button",{disabled:l>=O,onClick:()=>u(j=>j+1),className:"px-3 py-1 border border-neutral-700 rounded disabled:opacity-50",children:""})]})]})}function Oje(){const[e,t]=S.useState(null),[n,r]=S.useState([]),[i,a]=S.useState(!1);return{profile:e,setProfile:t,myeongsikList:n,setMyeongsikList:r,saving:i,setSaving:a}}function Cje(e){return{isDisabled:!!e?.disabled_at,hasProfile:!!e}}async function qA({action:e,targetUserId:t,targetRecordId:n,payload:r={}}){const a=(await De.auth.getSession()).data.session?.user?.id;a&&await De.from("audit_logs").insert({action:e,target_user_id:t??null,target_record_id:n??null,actor_admin_id:a,payload:r})}const Mje=async e=>{const{data:t}=await De.from("profiles").select("*").eq("user_id",e).maybeSingle();return t??null},Dje=async e=>{const{data:t}=await De.from("myeongsik").select("*").eq("user_id",e).order("created_at",{ascending:!1});return t??[]},Pje=async e=>{await De.from("profiles").insert({user_id:e,name:"",nickname:"",email:"",mgr_memo:""})},Rje=async(e,t)=>{await De.from("profiles").update({name:t.name,nickname:t.nickname,email:t.email,mgr_memo:t.mgr_memo}).eq("user_id",e)},Lje=async e=>{await De.from("profiles").update({disabled_at:null}).eq("user_id",e),await De.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await qA({action:"restore_account",targetUserId:e,payload:{source:"admin_user_detail"}})},Ije=async e=>{await De.from("myeongsik").update({deleted_at:null}).eq("user_id",e),await qA({action:"restore_myeongsik_all",targetUserId:e,payload:{source:"admin_user_detail"}})},j5=async(e,t,n)=>{const{error:r}=await De.rpc("admin_set_myeongsik_deleted",{p_target_user_id:e,p_myeongsik_id:t,p_deleted_at:n});if(r)throw console.error("admin_set_myeongsik_deleted error:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),r;await qA({action:n?"delete_myeongsik":"restore_myeongsik",targetUserId:e,targetRecordId:t,payload:{deleted_at:n,source:"admin_user_detail"}})};function $je(e,t){if(t&&typeof t=="object"){const n=t;console.error(e,{message:n.message,details:n.details,hint:n.hint,code:n.code});return}console.error(e,t)}function Bje({userId:e,profile:t,setProfile:n,setMyeongsikList:r,setSaving:i}){const a=S.useCallback(async()=>{const _=await Mje(e);n(_)},[e,n]),o=S.useCallback(async()=>{const _=await Dje(e);r(_)},[e,r]);S.useEffect(()=>{a(),o()},[a,o]);const l=S.useCallback(async()=>{if(e){i(!0);try{await Pje(e),await a()}catch(_){throw console.error("handleCreateProfile failed:",_),_}finally{i(!1)}}},[e,i,a]),u=S.useCallback(async()=>{if(e&&t){i(!0);try{await Rje(e,t),await a()}catch(_){throw console.error("handleSaveProfile failed:",_),_}finally{i(!1)}}},[e,t,i,a]),d=S.useCallback(async()=>{if(e&&t){i(!0);try{const _=t.disabled_at==null,{data:T,error:O}=await De.rpc("admin_set_profile_disabled",{p_target_user_id:e,p_disabled:_});if(O)throw $je("admin_set_profile_disabled error:",O),O;n({...t,disabled_at:typeof T=="string"?T:null})}finally{i(!1)}}},[e,t,n,i]),h=S.useCallback(async()=>{if(e){i(!0);try{await Lje(e),await a(),await o()}catch(_){throw console.error("handleRestoreAccount failed:",_),_}finally{i(!1)}}},[e,i,a,o]),m=S.useCallback(async()=>{if(e){i(!0);try{await Ije(e),await o()}catch(_){throw console.error("handleRestoreAllMyeongsik failed:",_),_}finally{i(!1)}}},[e,i,o]),b=S.useCallback(async _=>{if(e&&_){i(!0);try{await j5(e,_,null),await o()}catch(T){throw console.error("handleRestoreMyeongsik failed:",T),T}finally{i(!1)}}},[e,i,o]),y=S.useCallback(_=>{const T=typeof window<"u"?window.location.origin:"",O=_?`${T}/impersonate?userId=${e}&myeongsikId=${_}`:`${T}/impersonate?userId=${e}`;window.open(O,"_blank")},[e]),k=S.useCallback(async(_,T)=>{if(!e||!_)return;const O=T?null:new Date().toISOString();i(!0);try{await j5(e,_,O),await o()}catch(j){throw console.error("toggleDeleteMyeongsik failed:",j),j}finally{i(!1)}},[e,i,o]),w=S.useCallback(_=>{window.location.href=_},[]);return{handleCreateProfile:l,handleSaveProfile:u,toggleDisable:d,handleRestoreAccount:h,handleRestoreAllMyeongsik:m,handleRestoreMyeongsik:b,handleViewAsUser:y,toggleDeleteMyeongsik:k,goTo:w}}function zje({params:e}){const t=e.userId,n=Oje(),r=Cje(n.profile),i=Bje({userId:t,profile:n.profile,setProfile:n.setProfile,setMyeongsikList:n.setMyeongsikList,setSaving:n.setSaving});return g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("button",{className:"mb-4 underline cursor-pointer",onClick:()=>i.goTo("/admin/user"),children:"  "}),g.jsx("h1",{className:"text-2xl font-bold mb-4",children:" "}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg mb-6",children:[g.jsx("div",{className:"flex items-center justify-between mb-3",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{className:"text-xl font-semibold",children:""}),g.jsx("button",{className:"px-3 py-1 bg-blue-700 text-xs rounded cursor-pointer",onClick:()=>i.handleViewAsUser(),children:" ( )"})]})}),!r.hasProfile&&g.jsx("button",{onClick:i.handleCreateProfile,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer",disabled:n.saving,children:" "}),r.hasProfile&&n.profile&&g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.name??"",onChange:a=>n.setProfile({...n.profile,name:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:""}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.nickname??"",onChange:a=>n.setProfile({...n.profile,nickname:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Email"}),g.jsx("input",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",value:n.profile.email??"",onChange:a=>n.setProfile({...n.profile,email:a.target.value})})]}),g.jsxs("div",{children:[g.jsx("label",{children:" "}),g.jsx("textarea",{className:"w-full p-2 bg-neutral-800 border border-neutral-600 rounded",rows:3,value:n.profile.mgr_memo??"",onChange:a=>n.setProfile({...n.profile,mgr_memo:a.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:i.handleSaveProfile,className:"px-3 py-2 bg-green-600 rounded cursor-pointer text-xs",disabled:n.saving,children:""}),r.isDisabled&&g.jsx("button",{onClick:i.handleRestoreAccount,className:"px-3 py-2 bg-blue-600 rounded cursor-pointer text-xs",disabled:n.saving,children:" + "}),g.jsx("button",{onClick:i.toggleDisable,className:`px-3 py-2 rounded cursor-pointer text-xs ${r.isDisabled?"bg-yellow-600":"bg-gray-600"}`,children:r.isDisabled?" ":" "})]})]})]}),g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:" "}),g.jsx("button",{className:"px-3 py-2 bg-blue-700 rounded text-xs cursor-pointer",onClick:i.handleRestoreAllMyeongsik,disabled:n.saving,children:"  "})]}),n.myeongsikList.map(a=>g.jsx("div",{className:"p-3 bg-neutral-800 border border-neutral-700 rounded mb-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:a.name||"(no name)"}),g.jsxs("div",{className:"text-sm text-neutral-400",children:["Birth: ",a.birth_json?.birthDay??"-"," "," ",a.created_at?new Date(a.created_at).toLocaleString():"-"]})]}),g.jsx("div",{className:"flex gap-2",children:g.jsx("button",{className:"text-nowrap px-2 py-1 border border-emerald-500 text-emerald-100 rounded cursor-pointer text-xs",onClick:()=>i.handleRestoreMyeongsik(a.id),disabled:n.saving,children:"  "})})]})},a.id)),n.myeongsikList.length===0&&g.jsx("div",{className:"text-neutral-400",children:" ."})]})]})}function Uje({open:e,onClose:t,children:n}){return e?g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center",children:g.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-6 max-w-2xl w-full relative",children:[g.jsx("button",{className:"absolute top-3 right-3 text-neutral-400 hover:text-white",onClick:t,children:""}),g.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:n})]})}):null}const T5=50;function Fje(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState([]),[o,l]=S.useState(1),[u,d]=S.useState("all"),[h,m]=S.useState("all"),[b,y]=S.useState("30"),[k,w]=S.useState(""),[_,T]=S.useState(!1),O=S.useCallback(async C=>{await De.from("audit_logs").delete().eq("id",C),a(M=>M.filter(P=>P.id!==C))},[]),j=S.useCallback(async()=>{T(!0);const C=new Date;b!=="all"&&C.setDate(C.getDate()-Number(b));let M=De.from("audit_logs").select("*").order("created_at",{ascending:!1}).range((o-1)*T5,o*T5-1);b!=="all"&&(M=M.gte("created_at",C.toISOString())),u!=="all"&&(M=M.eq("action",u)),h!=="all"&&(M=M.eq("actor_admin_id",h));const{data:P}=await M;let I=P||[];if(k.trim()!==""){const U=k.toLowerCase();I=I.filter(W=>(JSON.stringify(W).toLowerCase()+(W.payload?JSON.stringify(W.payload).toLowerCase():"")).includes(U))}a(I),T(!1)},[o,u,h,b,k]);return S.useEffect(()=>{j()},[j]),g.jsxs("div",{className:"p-6 text-white",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Audit Logs"}),g.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-3",children:[g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:u,onChange:C=>d(C.target.value),children:[g.jsx("option",{value:"all",children:" Action"}),g.jsx("option",{value:"delete_myeongsik",children:" "}),g.jsx("option",{value:"restore_myeongsik",children:" "}),g.jsx("option",{value:"update_profile",children:" "}),g.jsx("option",{value:"impersonate_user",children:""})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:h,onChange:C=>m(C.target.value),children:[g.jsx("option",{value:"all",children:" "}),g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"system",children:"System"})]}),g.jsxs("select",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",value:b,onChange:C=>y(C.target.value),children:[g.jsx("option",{value:"1",children:"24"}),g.jsx("option",{value:"7",children:"7"}),g.jsx("option",{value:"30",children:"30"}),g.jsx("option",{value:"all",children:""})]}),g.jsx("input",{className:"p-2 bg-neutral-800 rounded border border-neutral-600",placeholder:" (payload )",value:k,onChange:C=>w(C.target.value)})]}),_?g.jsx("div",{children:"Loading..."}):i.map(C=>g.jsxs("div",{className:"p-4 bg-neutral-900 border border-neutral-700 rounded mb-4 cursor-pointer hover:bg-neutral-800",onClick:()=>{t(C),r(!0)},children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsx("div",{className:"font-semibold text-lg",children:C.action}),g.jsx("button",{className:"px-2 py-1 text-xs bg-red-700 hover:bg-red-600 rounded cursor-pointer",onClick:M=>{M.stopPropagation(),O(C.id)},children:""})]}),g.jsxs("div",{className:"text-sm mt-1 text-neutral-400",children:[g.jsxs("div",{children:["Actor: ",C.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",C.target_user_id||"-"]}),g.jsxs("div",{children:["Target Record: ",C.target_record_id||"-"]}),g.jsxs("div",{children:["Time: ",new Date(C.created_at).toLocaleString()]})]}),C.payload&&g.jsx("pre",{className:"mt-3 text-xs bg-neutral-800 p-2 rounded",children:JSON.stringify(C.payload,null,2)})]},C.id)),g.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded disabled:opacity-40 cursor-pointer",disabled:o===1,onClick:()=>l(C=>C-1),children:" "}),g.jsxs("span",{className:"text-neutral-400",children:["Page ",o]}),g.jsx("button",{className:"px-3 py-1 bg-neutral-800 border border-neutral-600 rounded cursor-pointer",onClick:()=>l(C=>C+1),children:" "})]}),g.jsx(Uje,{open:n,onClose:()=>r(!1),children:e&&g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold mb-3",children:e.action}),g.jsxs("div",{className:"text-sm text-neutral-400 space-y-1 mb-4",children:[g.jsxs("div",{children:["Actor: ",e.actor_admin_id]}),g.jsxs("div",{children:["Target User: ",e.target_user_id??"-"]}),g.jsxs("div",{children:["Target Record: ",e.target_record_id??"-"]}),g.jsxs("div",{children:["Time: ",new Date(e.created_at).toLocaleString()]})]}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payload"}),g.jsx("pre",{className:"text-xs bg-neutral-800 p-3 rounded whitespace-pre-wrap",children:JSON.stringify(e.payload,null,2)})]})})]})}const Hje="15b517b3-3d97-41a6-ae17-563abd163a36".split(",").map(e=>e.trim()).filter(Boolean);function nH(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1);if(S.useEffect(()=>{(async()=>{const{data:l}=await De.auth.getUser(),u=l.user?.id;r(!!u&&Hje.includes(u)),t(!0)})()},[]),!e)return g.jsx("div",{className:"p-6 text-white",children:"  ...!"});if(!n)return g.jsx("div",{className:"p-6 text-white",children:"  "});const i=window.location.pathname;let a=g.jsx(w5,{});if(i.startsWith("/admin/user/")){const o=i.replace("/admin/user/","");a=g.jsx(zje,{params:{userId:o}})}else i.startsWith("/admin/user")?a=g.jsx(Nje,{}):i.startsWith("/admin/logs")?a=g.jsx(Fje,{}):i.startsWith("/admin/dashboard")&&(a=g.jsx(w5,{}));return g.jsx(xhe,{children:a})}function Gje({pillarsA:e,pillarsB:t}){const n=Gae(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([r,i])=>i.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:r}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((a,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:a},o))})]},r):null)]})}const Yje=["","","","","","","","","",""],qje=["","","","","","","","","",""],Kje=["","","","","","","","","","","",""],Wje=["","","","","","","","","","","",""],Vje=new Set([...Yje,...qje]),Zje=new Set([...Kje,...Wje]);function Xje(e){return typeof e=="object"&&e!==null}function A5(e){return typeof e=="string"&&e.length>=2&&Vje.has(e[0])&&Zje.has(e[1])}function pn(e,...t){if(A5(e))return e;for(const n of t)if(A5(n))return n;return""}function Mb(e,t){let n=null;const r=t.getTime();for(const i of e)if(i.at.getTime()<=r)n=i;else break;return n}function Jje(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function N5(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,r,i,a,o]=t,l=new Date(+n,+r-1,+i,+a,+o);return Number.isNaN(l.getTime())?null:l}function Cv(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function Qje(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),r=Number(e.birthDay.slice(6,8));let i=0,a=0;const o=e;return typeof o.birthTime=="string"&&o.birthTime.length>=4&&(i=Number(o.birthTime.slice(0,2)),a=Number(o.birthTime.slice(2,4))),{y:t,m:n,d:r,hh:i,mm:a}}function Jx(e){const{y:t,m:n,d:r,hh:i,mm:a}=Qje(e),o=e.corrected instanceof Date&&!Number.isNaN(e.corrected.getTime())?e.corrected:new Date(t,n-1,r,i,a),l=o.getHours(),u=o.getMinutes();return e.calendarType==="lunar"?Vi(t,n,r,l,u):new Date(t,n-1,r,l,u)}function eTe(e){const t=Jx(e);return`${Cv(e)}-${t.toISOString()}`}function Rd(e){const t=e;return typeof t.id=="string"&&t.id?t.id:eTe(e)}function tTe(e){return Xje(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function nTe(e){const t=K6;return tTe(t)?e==="classic"?t.Classic:t.Modern:e}function rTe(e){if(!e)return"";const t=e,n=l=>typeof t[l]=="string"?String(t[l]).trim().toLowerCase():null,r=l=>typeof t[l]=="boolean"?t[l]:null,i=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(l=>!!l);for(const l of i){if(["","","male","m","boy","man"].includes(l))return"";if(["","","female","f","girl","woman"].includes(l))return""}const a=r("isMale"),o=r("isFemale");return a===!0?"":o===!0?"":""}const xk="people_picker_order_v1";function iTe(e,t,n){const r=e.slice(),[i]=r.splice(t,1);return r.splice(n,0,i),r}function O5({open:e,list:t,onSelect:n,onClose:r}){const[i,a]=S.useState("");S.useEffect(()=>{e||a("")},[e]);const o=S.useMemo(()=>t.map(Rd),[t]),l=S.useMemo(()=>new Set(o),[o]),[u,d]=S.useState([]);S.useEffect(()=>{const w=localStorage.getItem(xk),_=w?JSON.parse(w):[],T=_.filter(j=>l.has(j)),O=[...T,...o.filter(j=>!T.includes(j))];d(O),JSON.stringify(O)!==JSON.stringify(_)&&localStorage.setItem(xk,JSON.stringify(O))},[o,l]);const h=w=>{d(w),localStorage.setItem(xk,JSON.stringify(w))},m=S.useMemo(()=>{const w=new Map(t.map(j=>[Rd(j),j])),_=[];for(const j of u){const C=w.get(j);C&&_.push(C)}w.forEach((j,C)=>{u.includes(C)||_.push(j)});const T=[],O=[];for(const j of _)(typeof j.relationship=="string"?j.relationship.trim():"")===""?T.push(j):O.push(j);return[...T,...O]},[t,u]),b=S.useMemo(()=>{const w=i.trim().toLowerCase();return w?m.filter(_=>{const T=typeof _.relationship=="string"?_.relationship.trim():"";return`${Cv(_)} ${T}`.toLowerCase().includes(w)}):m},[m,i]),y=i.trim()==="",k=w=>{const{destination:_,source:T}=w;if(!_||!y||_.index===T.index)return;const O=b.map(Rd),j=iTe(O,T.index,_.index),M=m.map(Rd).filter(I=>!O.includes(I)),P=[...j,...M].filter((I,U,W)=>W.indexOf(I)===U);h(P)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:r}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:r,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"mb-3",children:[g.jsx("input",{value:i,onChange:w=>a(w.target.value),placeholder:" ",className:"w-full px-3 py-2 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-sm"}),g.jsx("div",{className:"text-[11px] text-neutral-500 mt-1",children:"    ."})]}),g.jsx(Np,{onDragEnd:k,children:g.jsx(Nf,{droppableId:"people-picker",children:w=>g.jsxs("ul",{className:"space-y-2",ref:w.innerRef,...w.droppableProps,children:[b.map((_,T)=>{const O=Jx(_),j=typeof _.relationship=="string"?_.relationship.trim():"",C=j||" ",M=Cv(_),P=j&&M===" "?j:M;return g.jsx(Af,{draggableId:Rd(_),index:T,isDragDisabled:!y,children:I=>g.jsx("li",{ref:I.innerRef,...I.draggableProps,...I.dragHandleProps,className:"flex items-center justify-between gap-2 px-3 py-2 rounded border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:g.jsxs("button",{onClick:()=>n(_),className:"flex-1 text-left cursor-pointer",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-100",children:[g.jsx("span",{children:P}),g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border border-neutral-300 dark:border-neutral-700 ${j?"text-neutral-600 dark:text-neutral-300":"text-neutral-400 dark:text-neutral-500"}`,children:C})]}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Lm(O)})]})})},Rd(_))}),w.placeholder]})})})]})]})}function wk({label:e,gzHour:t,gzDay:n,gzMonth:r,gzYear:i,dayStem:a,cardSettings:o,sinsalBaseBranch:l,sinsalMode:u,sinsalBloom:d}){const h=w=>{const _=o.showSibiUnseong?no(a,w):"",T=o.showSibiSinsal?ro({baseBranch:l,targetBranch:w,era:nTe(u),gaehwa:!!d}):"";return{unseongText:_||void 0,shinsalText:T||void 0}},m=pn(t).charAt(1),b=pn(n).charAt(1),y=pn(r).charAt(1),k=pn(i).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",pn(t),m],["",pn(n),b],["",pn(r),y],["",pn(i),k]].map(([w,_,T])=>{const{unseongText:O,shinsalText:j}=h(T);return g.jsx(zd,{label:w,gz:_,dayStem:a,settings:un.getState().settings,unseongText:O,shinsalText:j,hideBranchSipSin:!0,size:"sm"},`${e}-${w}`)})})]})}function Ld({label:e,data:t,mode:n,effectiveDate:r,onPick:i}){const a=un(P=>P.settings),o=S.useMemo(()=>t?Jx(t):null,[t]),l="/",u=pn(o?eo(o,l):void 0),d=pn(o?ht(o,l):void 0),h=pn(o?At(o):void 0),m=pn(o?ct(o):void 0),b=S.useMemo(()=>d.charAt(0)||"",[d]),y=o,k=S.useMemo(()=>{const P=t?.birthPlace;return!P||P.name===""||!P.lon?127.5:P.lon},[t]),w=t?.mingSikType??l,_=S.useMemo(()=>{const P=y?ht(y,w).charAt(1):d.charAt(1)||"",I=y?ct(y,k).charAt(1):m.charAt(1)||"";return(a.sinsalBase??"")===""?P:I},[a.sinsalBase,y,w,k,d,m]),T=S.useMemo(()=>{if(n!==""||!o||!t)return null;try{const P=X6(o,u,t.dir,120),I=Q6(P,d,t.dir,t.DayChangeRule),U=Dp(o,h,t.dir,120,t?.birthPlace?.lon??127.5),W=e7(U,m,t.dir,t.DayChangeRule,o),q=r;return{si:pn(Mb(P.events,q)?.gz,u),il:pn(Mb(I.events,q)?.gz,d),wl:pn(Mb(U.events,q)?.gz,h),yn:pn(Mb(W.events,q)?.gz,m)}}catch{return null}},[n,o,u,d,h,m,r,t]),O=S.useMemo(()=>{if(n!=="")return null;const P=r;return{si:pn(eo(P,l)),il:pn(ht(P,l)),wl:pn(At(P)),yn:pn(ct(P))}},[n,r]),j=t?Cv(t):"",C=o?Lm(o):"",M=t?rTe(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:i,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:"  ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:j}),M&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",M]}),C&&g.jsx("span",{className:"block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:C})]}),n===""&&g.jsx(wk,{label:"",gzHour:u,gzDay:d,gzMonth:h,gzYear:m,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&T&&g.jsx(wk,{label:"",gzHour:T.si,gzDay:T.il,gzMonth:T.wl,gzYear:T.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom}),n===""&&O&&g.jsx(wk,{label:"",gzHour:O.si,gzDay:O.il,gzMonth:O.wl,gzYear:O.yn,dayStem:b,cardSettings:a,sinsalBaseBranch:_,sinsalMode:a.sinsalMode,sinsalBloom:!!a.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:i,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function aTe({people:e=[]}){const[t,n]=S.useState(),[r,i]=S.useState(),[a,o]=S.useState(!1),[l,u]=S.useState(!1),d=S.useRef(new Date),[h,m]=S.useState(()=>Jje(d.current)),b=S.useRef(N5(h)??d.current),y=S.useMemo(()=>{const C=N5(h);return C&&(b.current=C),b.current},[h]),[k,w]=S.useState(!1),[_,T]=S.useState(!1);function O(C){if(!C)return["","","",""];try{const M=Jx(C),P="/",I={hour:pn(eo(M,P)),day:pn(ht(M,P)),month:pn(At(M)),year:pn(ct(M))};return[I.year,I.month,I.day,I.hour]}catch{return["","","",""]}}const j=yn(C=>C.canUseMyoViewerNow());return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[j?g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:a,onChange:C=>o(C.target.checked),className:"accent-indigo-500"})," "]}):null,g.jsx("button",{onClick:()=>u(C=>!C),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:l?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(Ld,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),g.jsx(Ld,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),a&&t&&g.jsx(Ld,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),a&&r&&g.jsx(Ld,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)}),l&&t&&g.jsx(Ld,{label:" A",data:t,mode:"",effectiveDate:y,onPick:()=>w(!0)}),l&&r&&g.jsx(Ld,{label:" B",data:r,mode:"",effectiveDate:y,onPick:()=>T(!0)})]}),t&&r&&g.jsx("div",{className:"mt-4",children:g.jsx(Gje,{pillarsA:O(t),pillarsB:O(r)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:" /"}),g.jsx("input",{type:"datetime-local",value:h,onChange:C=>m(C.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(O5,{open:k,list:e||[],onSelect:C=>{n(C),w(!1)},onClose:()=>w(!1)}),g.jsx(O5,{open:_,list:e||[],onSelect:C=>{i(C),T(!1)},onClose:()=>T(!1)})]})}function oTe(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),i=async()=>{try{const{data:{user:a}}=await De.auth.getUser();if(!a){alert("  .");return}const o=a.id,l=new Date().toISOString();await De.from("profiles").update({disabled_at:l}).eq("id",o),await De.from("myeongsik").update({deleted_at:l}).eq("user_id",o),await De.auth.signOut(),alert(" .   ."),window.location.href="/"}catch(a){console.error(a),alert("    .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 pb-[calc(64px+env(safe-area-inset-bottom,0px)+var(--bottom-dock,0px))] px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>r(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"     ,    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-1",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsxs("p",{className:"mb-2",children:["    (, )",g.jsx("br",{}),"       ( ,  ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"    /  ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"         "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-1",children:"       ."}),g.jsx("p",{className:"mb-2",children:"   3  ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase /DB    ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>r(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:a=>a.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["        .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:i,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function sTe(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function _k(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,n,r]=e.split("-"),i=Number(t),a=Number(n),o=Number(r);if(!Number.isFinite(i)||!Number.isFinite(a)||!Number.isFinite(o)||a<1||a>12)return null;const l=new Date(i,a,0).getDate();return o<1||o>l?null:{y:i,m:a,d:o}}function C5(e,t,n){return e<t?t:e>n?n:e}function rH({date:e,onChange:t,min:n="1900-01-01",max:r="2100-12-31",className:i="px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}){const a=S.useMemo(()=>e instanceof Date&&!Number.isNaN(e.getTime())?e:new Date,[e]),o=S.useMemo(()=>sTe(a),[a]),[l,u]=S.useState(o);S.useEffect(()=>{u(o)},[o]);const d=h=>{if(!_k(h))return;const b=C5(h,n,r),{y,m:k,d:w}=_k(b),_=a.getHours(),T=a.getMinutes(),O=a.getSeconds(),j=a.getMilliseconds(),C=new Date(y,k-1,w,_,T,O,j);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:l,min:n,max:r,onChange:h=>{const m=h.target.value;u(m),m&&d(m)},onBlur:()=>{if(!l||!_k(l)){u(o);return}const h=C5(l,n,r);h!==l&&(u(h),d(h))},className:i,"aria-label":" "})}function lTe({ms:e}){const{date:t,setDate:n}=Jr(),r=rc(),i=S.useMemo(()=>{const d=typeof e.id=="string"?e.id:"";if(d)return d;const h=typeof e.birthDay=="string"||typeof e.birthDay=="number"?String(e.birthDay):"",m=typeof e.birthTime=="string"?e.birthTime:"";return[typeof e.ganji=="string"?e.ganji:"",h,m].filter(Boolean).join("|")},[e]);S.useEffect(()=>{n(new Date)},[i]);const a=lx(e,void 0,void 0,{dstOffsetMinutes:r}),o=t instanceof Date&&!Number.isNaN(t.getTime())?t:new Date,l=S.useMemo(()=>{const d=typeof e.ganji=="string"?e.ganji:"",h=a?.dae?.gz?`${a.dae.gz}`:null,m=a?.se?.gz?`${a.se.gz}`:null,b=a?.wol?.gz?`${a.wol.gz}`:null,y=[h,m,b].filter(Boolean).join(" ");return[d,y].filter(Boolean).join(" + ")},[e.ganji,a]),u=d=>{n(d)};return g.jsxs("div",{className:"w-[calc(100%_-_16px)] max-w-[625px] desk:max-w-[640px] mx-auto mb-4 px-2 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[l&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:l}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx(rH,{date:o,onChange:u,min:"1900-01-01",max:"2100-12-31"})]})})]})}function cTe({useWoldu:e,useSiju:t,hourRule:n,gender:r,onToggleWoldu:i,onToggleSiju:a,onChangeHourRule:o,onChangeGender:l}){return g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:e,onChange:u=>i(u.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:t,onChange:u=>a(u.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:n==="",onChange:()=>o("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:r==="male",onChange:()=>l("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:r==="female",onChange:()=>l("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]})}function uTe({pillars:e,active:t,canEnterOthers:n,onActivate:r}){return g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([i,a])=>{const o=!n&&!(i==="yearStem"||i==="yearBranch"||i==="dayStem"||i==="dayBranch"),l=t===i;return g.jsxs("button",{onClick:()=>!o&&r(i),disabled:o,className:["border rounded p-2 text-center cursor-pointer",l?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",o?"opacity-50 cursor-not-allowed":""].join(" "),children:[a,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:e[i]??"-"})]},i)})})}function dTe({results:e,selectedRow:t,onSelectRow:n,gender:r}){return e?e.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:e.map((i,a)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${a}`,checked:t===a,onChange:()=>n(a)}),g.jsx("label",{htmlFor:`selectRow-${a}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:i.date}),g.jsx("td",{className:"p-1 text-center",children:i.year}),g.jsx("td",{className:"p-1 text-center",children:i.month}),g.jsx("td",{className:"p-1 text-center",children:i.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:i.hourSlots.map((o,l)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:o.branch})},l))})}),g.jsx("td",{className:"p-1 text-center",children:r==="male"?"":""})]},`${i.date}-${a}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"    ."})}function fTe({toast:e,showToast4:t,searchToast:n,error:r}){return g.jsxs(g.Fragment,{children:[e&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:e})}),t&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),n&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:["  .",g.jsx("br",{}),"   ."]})}),r&&g.jsx("div",{className:"mt-3 text-xs text-red-600 text-center",children:r})]})}function hTe({choices:e,onChoose:t}){return!e||e.length===0?null:g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  ."}),g.jsx("div",{className:"flex gap-2",children:e.map(n=>g.jsx("button",{onClick:()=>t(n),className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:n},n))})]})}const KA=["","","","","","","","","",""],i0=["","","","","","","","","","","",""],mTe={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},iH=["","","","","","","","","","","",""],pTe=i0,gTe=iH,bTe=["23:00~0:59","01:00~2:59","03:00~4:59","05:00~6:59","07:00~8:59","09:00~10:59","11:00~12:59","13:00~14:59","15:00~16:59","17:00~18:59","19:00~20:59","21:00~22:59"],yTe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vTe={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function xp(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const r=mTe[n],i=iH.indexOf(t),a=(r+(i>=0?i:0))%10;return KA[a]}function Qx(e,t){const n=t===""?pTe:gTe,r=e===""||e===""?0:e===""||e===""?2:e===""||e===""?4:e===""||e===""?6:8,i=i0.reduce((a,o)=>(a[o]="",a),{});for(let a=0;a<12;a++){const o=KA[(r+a)%10],l=n[a];i[l]=`${o}${l}`}return i}const xTe={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};function wTe(e){return e==="yearStem"?"yearBranch":e==="yearBranch"?"yearStem":e==="monthStem"?"monthBranch":e==="monthBranch"?"monthStem":e==="dayStem"?"dayBranch":e==="dayBranch"?"dayStem":e==="hourStem"?"hourBranch":"hourStem"}function _Te({active:e,pillars:t,activeIsStem:n,activeIsBranch:r,onSelect:i,settingsObj:a}){return e?g.jsxs("div",{className:"w-full",children:[n&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:KA.map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Ki(o,"stem",a)}`,children:o},o))})]}),r&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:i0.filter(o=>{const l=wTe(e),u=t[l];return u?vTe[o]===yTe[u]:!0}).map(o=>g.jsx("button",{onClick:()=>i(o),className:`border rounded px-2 py-1 cursor-pointer ${Ki(o,"branch",a)}`,children:o},o))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"   ."})}function STe(){const[e,t]=S.useState({}),[n,r]=S.useState(null),[i,a]=S.useState(null),[o,l]=S.useState(!0),[u,d]=S.useState(!0),[h,m]=S.useState(""),[b,y]=S.useState("male"),[k,w]=S.useState(null),[_,T]=S.useState(!1),[O,j]=S.useState(null),[C,M]=S.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[P,I]=S.useState(!1),[U,W]=S.useState(null),[q,H]=S.useState(null),[B,K]=S.useState(!1),[V,Z]=S.useState(!1),G=J=>{H(J),setTimeout(()=>H(null),1800)};return S.useEffect(()=>{if(!B)return;const J=setTimeout(()=>K(!1),2e3);return()=>clearTimeout(J)},[B]),S.useEffect(()=>{if(!V)return;const J=setTimeout(()=>Z(!1),2e3);return()=>clearTimeout(J)},[V]),{pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:m,gender:b,setGender:y,results:k,setResults:w,searching:_,setSearching:T,selectedRow:O,setSelectedRow:j,form:C,setForm:M,unknownPlace:P,setUnknownPlace:I,error:U,setError:W,toast:q,showToast4:B,setShowToast:K,searchToast:V,setSearchToast:Z,showToast:G}}function aH(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}function M5(e,t){return i0.filter(n=>xp(e,n)===t)}function D5(e,t,n){if(!n||!e.yearStem)return{next:e,monthBranchChoices:null};const r={...e};if(!r.yearStem)return{next:r,monthBranchChoices:null};if(t==="monthStem"&&r.monthStem){const i=M5(r.yearStem,r.monthStem);return i.length>=2?{next:r,monthBranchChoices:i.slice(0,2)}:(i.length===1&&(r.monthBranch=i[0]),{next:r,monthBranchChoices:null})}if(t==="monthBranch"&&r.monthBranch)return r.monthStem=xp(r.yearStem,r.monthBranch),{next:r,monthBranchChoices:null};if(t==="yearStem")if(r.monthStem&&!r.monthBranch){const i=M5(r.yearStem,r.monthStem);if(i.length>=2)return{next:r,monthBranchChoices:i.slice(0,2)};i.length===1&&(r.monthBranch=i[0])}else r.monthBranch&&!r.monthStem&&(r.monthStem=xp(r.yearStem,r.monthBranch));return{next:r,monthBranchChoices:null}}function kTe(e,t,n,r){if(!n||!e.dayStem)return e;const i={...e};if(!i.dayStem)return i;const a=Qx(i.dayStem,r),o=u=>Object.entries(a).find(([,d])=>d.startsWith(u)),l=u=>a[u];if(t==="hourStem"&&i.hourStem){const u=o(i.hourStem);return u&&(i.hourBranch=u[0]),i}if(t==="hourBranch"&&i.hourBranch){const u=l(i.hourBranch);return u&&(i.hourStem=u.slice(0,1)),i}if(t==="dayStem"){if(i.hourStem&&!i.hourBranch){const u=o(i.hourStem);u&&(i.hourBranch=u[0])}else if(i.hourBranch&&!i.hourStem){const u=l(i.hourBranch);u&&(i.hourStem=u.slice(0,1))}}return i}function ETe(e,t){return!t||!e.yearStem?!1:e.monthBranch&&e.monthStem?xp(e.yearStem,e.monthBranch)!==e.monthStem:!1}function jTe(e,t,n){if(!t||!e.dayStem)return!1;if(e.hourBranch&&e.hourStem){const i=Qx(e.dayStem,n)[e.hourBranch];return i?i.slice(0,1)!==e.hourStem:!1}return!1}function Sk(e,t,n){const i=Qx(e,t)[n];return i?i.slice(0,1):null}function TTe({pillars:e,setPillars:t,active:n,setActive:r,monthBranchChoices:i,setMonthBranchChoices:a,useWoldu:o,setUseWoldu:l,useSiju:u,setUseSiju:d,hourRule:h,setHourRule:m,setResults:b,setError:y,showToast:k}){const w=o||u,_=!!(e.yearStem&&e.yearBranch),T=!!(e.dayStem&&e.dayBranch),O=!w||_||T,j=!!n&&n.endsWith("Stem"),C=!!n&&n.endsWith("Branch"),M=S.useMemo(()=>aH(e),[e]);return S.useEffect(()=>{if(!(!u||!e.dayStem||!e.hourBranch)&&(e.hourBranch===""||e.hourBranch==="")){const B=Sk(e.dayStem,h,e.hourBranch);B&&t(K=>({...K,hourStem:B}))}},[h,u,e.dayStem,e.hourBranch,t]),{needStartFromYearOrDay:w,canEnterOthers:O,activeIsStem:j,activeIsBranch:C,filledAll:M,monthBranchChoices:i,handleSelect:B=>{if(!n)return;if(!O&&!(n==="yearStem"||n==="yearBranch"||n==="dayStem"||n==="dayBranch")){y("/      ."),setTimeout(()=>y(null),1500);return}let V={...e,[n]:B};if(n==="yearStem"||n==="monthStem"||n==="monthBranch"){const J=D5(V,n,o);V=J.next,a(J.monthBranchChoices)}(n==="dayStem"||n==="hourStem"||n==="hourBranch")&&(V=kTe(V,n,u,h));let Z=!1;ETe(V,o)&&(l(!1),Z=!0),jTe(V,u,h)&&(d(!1),Z=!0),Z&&k("/  .  ."),t(V),b(null),r(n==="yearStem"?"yearBranch":n==="yearBranch"?"yearStem":n==="monthStem"?"monthBranch":n==="monthBranch"?"monthStem":n==="dayStem"?"dayBranch":n==="dayBranch"?"dayStem":n==="hourStem"?"hourBranch":"hourStem"),setTimeout(()=>{const J={...V};if(J.yearStem&&J.yearBranch&&!J.monthStem){r("monthStem");return}if(J.monthStem&&J.monthBranch&&!J.dayStem){r("dayStem");return}if(J.dayStem&&J.dayBranch&&!J.hourStem){r("hourStem");return}},0)},handleMonthBranchChoice:B=>{let K={...e,monthBranch:B};a(null),K=D5(K,"monthBranch",o).next,t(K),r("dayStem")},clearAll:()=>{t({}),b(null),y(null),r(null),a(null)},onToggleWoldu:B=>{b(null),B&&t(K=>{const V={...K};return V.yearStem&&V.monthBranch&&(V.monthStem=xp(V.yearStem,V.monthBranch)),V}),l(B)},onToggleSiju:B=>{b(null),B&&t(K=>{const V={...K};if(V.dayStem&&V.hourBranch){const Z=Sk(V.dayStem,h,V.hourBranch);Z&&(V.hourStem=Z)}return V}),d(B)},onChangeHourRule:B=>{if(b(null),m(B),u&&e.dayStem&&e.hourBranch&&(e.hourBranch===""||e.hourBranch==="")){const K=Sk(e.dayStem,B,e.hourBranch);K&&t(V=>({...V,hourStem:K}))}}}}function ATe(e){const{selectedRow:t,results:n,gender:r,hourRule:i,form:a,unknownPlace:o}=e,l=t!==null?n?.filter((q,H)=>H===t)??[]:[];if(l.length===0)return{error:"  ."};const u=l[0],d=i===""?"/":"",[h,m,b]=u.date.split("-").map(Number);let y=0,k=0;if(u.hourSlots.length>0){const q=u.hourSlots[0].branch,H=xTe[q];H&&(y=H.hh,k=H.mi)}const w=new Date(h,m-1,b,y,k),_=w,T="",O=r==="male"?"":"",j=NTe(u.year.charAt(0),O),C=ct(_,127.5),M=At(_,127.5),P=ht(_,d),I=eo(_,d),U=[`: ${C} ${M} ${P}`,I?`${I}`:null].filter(Boolean).join(" ");return{payload:{id:H6(),name:"",birthDay:`${h}${String(m).padStart(2,"0")}${String(b).padStart(2,"0")}`,birthTime:`${String(y).padStart(2,"0")}${String(k).padStart(2,"0")}`,gender:O,birthPlace:o?{name:"",lat:0,lon:127.5}:a.birthPlace??{name:"",lat:0,lon:127.5},relationship:a.relationship??"",memo:a.memo??"",folder:yu(a.folder),mingSikType:a.mingSikType??"/",DayChangeRule:a.mingSikType===""?"":"",calendarType:a.calendarType??"solar",ganjiText:`: ${u.year} ${u.month} ${u.day} ${u.hour}`,ganji:U,dayStem:u.day.charAt(0),dateObj:w,corrected:_,correctedLocal:T,dir:j,favorite:!1}}}function NTe(e,t){const r=["","","","","","","","","",""].includes(e),i=t==="";return r?i?"forward":"backward":i?"backward":"forward"}function OTe(e){En.getState().add(e)}function CTe(e,t,n,r=300){if(!e.yearStem||!e.yearBranch)return[];if(!e.monthStem||!e.monthBranch)return[];if(!e.dayStem||!e.dayBranch)return[];if(!e.hourStem||!e.hourBranch)return[];const i=`${e.yearStem}${e.yearBranch}`,a=`${e.monthStem}${e.monthBranch}`,o=`${e.dayStem}${e.dayBranch}`,l=`${e.hourStem}${e.hourBranch}`,u=[],d=new Date(1900,0,1,12,0,0),h=new Date(2100,11,31,12,0,0);for(let m=d.getTime();m<=h.getTime();m+=24*3600*1e3){const b=new Date(m),y=ct(b);if(y!==i)continue;const k=At(b);if(k!==a)continue;const w=ht(b,n);if(w!==o)continue;const _=Qx(e.dayStem,t),T=[];for(let O=0;O<12;O++){const j=i0[O];_[j]===l&&T.push({branch:j,time:bTe[O]})}if(T.length!==0&&(u.push({date:`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,year:y,month:k,day:w,hour:l,hourSlots:T}),u.length>=r))break}return u}function MTe({pillars:e,hourRule:t,results:n,selectedRow:r,gender:i,form:a,unknownPlace:o,setResults:l,setSearching:u,setError:d,setSearchToast:h,setForm:m,setUnknownPlace:b,showToast:y,onSave:k,onClose:w}){return{doSearch:()=>{if(l(null),d(null),!aH(e)){d(" 4  .");return}u(!0);try{const j=CTe(e,t,t===""?"/":"");j.length===0&&d("  . (: 1900~2100)"),l(j)}catch(O){O instanceof Error?d(O.message):d(String(O))}finally{u(!1)}},handleSave:()=>{const O=ATe({selectedRow:r,results:n,gender:i,hourRule:t,form:a,unknownPlace:o});if("error"in O){h(!0);return}Mu.flushSync(()=>{OTe(O.payload)}),k(O.payload),y(" !"),m({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),b(!1),w()}}}function DTe({open:e,onClose:t,onSave:n}){const{settings:r}=un(),i=STe(),a=TTe({pillars:i.pillars,setPillars:i.setPillars,active:i.active,setActive:i.setActive,monthBranchChoices:i.monthBranchChoices,setMonthBranchChoices:i.setMonthBranchChoices,useWoldu:i.useWoldu,setUseWoldu:i.setUseWoldu,useSiju:i.useSiju,setUseSiju:i.setUseSiju,hourRule:i.hourRule,setHourRule:i.setHourRule,setResults:i.setResults,setError:i.setError,showToast:i.showToast}),o=MTe({pillars:i.pillars,hourRule:i.hourRule,results:i.results,selectedRow:i.selectedRow,gender:i.gender,form:i.form,unknownPlace:i.unknownPlace,setResults:i.setResults,setSearching:i.setSearching,setError:i.setError,setSearchToast:i.setSearchToast,setForm:i.setForm,setUnknownPlace:i.setUnknownPlace,showToast:i.showToast,onSave:n,onClose:t});return e?g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(yy,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsx(cTe,{useWoldu:i.useWoldu,useSiju:i.useSiju,hourRule:i.hourRule,gender:i.gender,onToggleWoldu:a.onToggleWoldu,onToggleSiju:a.onToggleSiju,onChangeHourRule:a.onChangeHourRule,onChangeGender:i.setGender}),a.needStartFromYearOrDay&&!a.canEnterOthers&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""})," ."]}),g.jsx(uTe,{pillars:i.pillars,active:i.active,canEnterOthers:a.canEnterOthers,onActivate:i.setActive}),g.jsx(hTe,{choices:i.monthBranchChoices,onChoose:a.handleMonthBranchChoice}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:g.jsx(_Te,{active:i.active,pillars:i.pillars,activeIsStem:a.activeIsStem,activeIsBranch:a.activeIsBranch,onSelect:a.handleSelect,settingsObj:r})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!a.filledAll){i.setShowToast(!0);return}o.doSearch()},disabled:i.searching,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:i.searching?"..":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:a.clearAll,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:o.handleSave,className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:g.jsx(dTe,{results:i.results,selectedRow:i.selectedRow,onSelectRow:i.setSelectedRow,gender:i.gender})}),g.jsx(fTe,{toast:i.toast,showToast4:i.showToast4,searchToast:i.searchToast,error:i.error})]})}):null}function PTe(){return g.jsx("div",{className:"flex flex-col desk:flex-row desk:items-center desk:justify-between gap-2",children:g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"AI  "})})}function RTe({sections:e,toggleSection:t}){return g.jsxs("div",{className:"mt-3 border-t pt-2",children:[g.jsxs("div",{className:"text-[11px] font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["   ",g.jsx("span",{className:"text-amber-500",children:"(TIP.  AI  . ex.,  )"})]}),g.jsx("p",{className:"text-amber-500",children:"      . (     .)"}),g.jsx("p",{className:"text-amber-500",children:" AI     .  ,   ."}),g.jsx("p",{className:"text-amber-500",children:"  AI ,    .  ."})]}),g.jsxs("div",{className:"grid grid-cols-4 desk:grid-cols-8 gap-2 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.twelveUnseong,onChange:()=>t("twelveUnseong"),className:"w-3 h-3"}),""]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.twelveShinsal,onChange:()=>t("twelveShinsal"),className:"w-3 h-3"}),""]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.shinsal,onChange:()=>t("shinsal"),className:"w-3 h-3"})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:e.nabeum,onChange:()=>t("nabeum"),className:"w-3 h-3"}),""]})]})]})}function LTe({friendMode:e,setFriendMode:t,teacherMode:n,setTeacherMode:r}){return g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"/ "}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:e,onChange:t,className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:" "})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:n,onChange:r,className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:" (/)"})]})]})]})}function ITe({mainCategory:e,subCategory:t,mainCategoryMeta:n,currentSubList:r,onMainCategoryChange:i,onSubCategoryChange:a}){return g.jsxs("div",{className:"hidden flex-wrap gap-2 items-center",children:[g.jsx("select",{value:e,onChange:o=>i(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(n).map(o=>g.jsx("option",{value:o,children:n[o].label},o))}),r.length>0&&g.jsx("select",{value:t,onChange:o=>a(o.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:r.map(o=>g.jsx("option",{value:o.key,children:o.label},o.key))})]})}function $Te({visible:e,relationMode:t,setRelationMode:n,partnerId:r,setPartnerId:i,partnerOptions:a}){return e?g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>n("solo"),className:`px-3 py-1 cursor-pointer ${t==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>n("couple"),className:`px-3 py-1 cursor-pointer ${t==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),t==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:r,onChange:o=>i(o.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:" "}),a.map(o=>g.jsx("option",{value:o.id,children:o.label},o.id))]})]})]}):null}function BTe({isMultiMode:e,setIsMultiMode:t,canUseMultiMode:n}){const r=!n;return g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>t(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${e?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsxs("button",{type:"button",onClick:()=>t(!0),disabled:r,title:r?" .":" (  )",className:`px-3 py-1.5 text-xs rounded-md border transition-colors ${r?"bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-70":e?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 cursor-pointer"}`,children:[" (  ) ",r?"":""]})]})}function zTe({tabs:e,activeTab:t,setActiveTab:n,date:r,setDate:i,canUseLuckTabs:a}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:e.map((o,l)=>{const d=!a&&!(l===0),h=!d&&t===o;return g.jsxs("button",{type:"button",onClick:()=>{d||n(o)},disabled:d,title:d?"  ":o,className:["px-2 py-1 text-xs rounded-md border transition-colors",d?"bg-neutral-200 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400 cursor-not-allowed opacity-70":"cursor-pointer",h?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":d?"":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"].join(" "),children:[o," ",d?"()":""]},o)})}),g.jsx(rH,{date:r,onChange:i})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"     ."}),g.jsx("p",{children:"    ."})]})]})}function UTe({multiTab:e,setMultiTab:t,daeList:n,selectedDaeIdx:r,onToggleDae:i,seStartYear:a,seEndYear:o,onSeStartChange:l,onSeEndChange:u,onSeStartBlur:d,onSeEndBlur:h,seYearsCount:m,wolStartDate:b,wolEndDate:y,onWolStartChange:k,onWolEndChange:w,onWolStartBlur:_,onWolEndBlur:T,wolMonthsCount:O,ilStartDate:j,ilEndDate:C,onIlStartChange:M,onIlEndChange:P,onIlStartBlur:I,onIlEndBlur:U,ilDaysCount:W}){return g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(q=>g.jsx("button",{type:"button",onClick:()=>t(q),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${e===q?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:q},q))}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:n.map((q,H)=>g.jsxs("button",{type:"button",onClick:()=>i(H),className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${r.includes(H)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:q.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[q.age," (",q.startYear,"~",q.endYear,")"]})]},H))})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"number",value:a,onChange:q=>l(Number(q.target.value)),onBlur:d,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:o,onChange:q=>u(Number(q.target.value)),onBlur:h,className:"w-24 px-2 h-30 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",m,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"month",value:b,onChange:q=>k(q.target.value),onBlur:_,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:y,onChange:q=>w(q.target.value),onBlur:T,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",O,""]})]}),e===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("input",{type:"date",value:j,onChange:q=>M(q.target.value),onBlur:I,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:C,onChange:q=>P(q.target.value),onBlur:U,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" : ",W,""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",e,"   ."]}),g.jsx("p",{children:"   ."})]})]})}function FTe({questionDraft:e,onChangeDraft:t,onAddQuestion:n,extraQuestions:r,onClearAll:i,onRemoveQuestion:a,locked:o=!1,lockTitle:l}){const u=l?" ":"";return g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),r.length>0&&g.jsx("button",{type:"button",onClick:i,disabled:o,title:o?l:void 0,className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:e,onChange:t,readOnly:o,disabled:o,title:o?l:void 0,placeholder:" AI     , ' '  .",rows:3,className:"w-full placeholder:text-xs text-[16px] desk:text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:n,disabled:o,title:o?l:void 0,className:["w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border",o?"cursor-not-allowed opacity-50 bg-neutral-400 text-white dark:bg-neutral-700":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer"].join(" "),children:o?` ${u}`:" "}),r.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:["  ",r.length,""]})]}),r.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:r.map((d,h)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[h+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:d}),g.jsx("button",{type:"button",onClick:()=>a(h),disabled:o,title:o?l:void 0,className:["shrink-0 ml-2 text-[10px]",o?"text-neutral-400 cursor-not-allowed":"text-red-500 hover:underline"].join(" "),children:""})]},h))})]})}function HTe({value:e,lockSelection:t=!1}){const[n,r]=S.useState(!1);return t?g.jsx("div",{className:"w-full h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 select-none flex items-center justify-center text-center text-neutral-500","aria-readonly":"true",children:"   "}):g.jsxs("div",{children:[g.jsxs("div",{className:"relative",children:[g.jsx("textarea",{readOnly:!0,value:e,placeholder:"   ",className:["w-full text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2 resize-none transition-[height] duration-200","desk:h-[270px] desk:overflow-y-auto",n?"h-[270px] overflow-y-auto pointer-events-auto":"h-[150px] overflow-hidden pointer-events-none desk:pointer-events-auto"].join(" ")}),!n&&g.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-10 rounded-b-md bg-gradient-to-t from-white/95 dark:from-neutral-800/95 to-transparent"})]}),g.jsx("div",{className:"mt-2 mb-3 flex justify-center desk:hidden",children:g.jsx("button",{type:"button",onClick:()=>r(i=>!i),className:"px-3 py-1 rounded-full border text-xs bg-white text-neutral-700 border-neutral-300 dark:bg-neutral-900 dark:text-neutral-200 dark:border-neutral-700",children:n?"":""})})]})}const GTe=["","","","",""],YTe={personality:{label:"    "},lifeFlow:{label:"   "},love:{label:"    "},career:{label:"    "},money:{label:"    "},family:{label:"      "},baby:{label:"    "},health:{label:"    "},move:{label:"     "},social:{label:"  "},compat:{label:"   "},risk:{label:"  "},meta:{label:"    "},etc:{label:"  "}},P5={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:" "},{key:"personality_shadow",label:""},{key:"personality_relationshipStyle",label:" "},{key:"personality_workStyle",label:" "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:"/ "},{key:"love_partner",label:" "},{key:"love_current",label:" /"},{key:"love_breakup",label:" "},{key:"love_marriageChange",label:"/ "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs "},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:" "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:"/ "},{key:"money_asset",label:" "},{key:"money_debt",label:"/ "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"/ "},{key:"family_current",label:" /"},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:"/"},{key:"family_care",label:" "}],baby:[{key:"overview",label:" "},{key:"baby_pregnancy",label:"  "},{key:"baby_birth",label:"  "},{key:"baby_selection",label:"  "}],health:[{key:"overview",label:" "},{key:"health_overall",label:""},{key:"health_physical",label:" "},{key:"health_mental",label:""},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:" "},{key:"move_timing",label:" "},{key:"move_chance",label:" "},{key:"move_targetHouse",label:"  "},{key:"move_environment",label:"  "},{key:"move_finance",label:" "}],social:[{key:"overview",label:"  "},{key:"social_overall",label:" "},{key:"social_friend",label:" "},{key:"social_workspace",label:" "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:" "},{key:"compat_overall",label:"  "},{key:"compat_love",label:"/ "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:"/ "},{key:"compat_family",label:" "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:"/ "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:" "},{key:"meta_usage",label:" "}],etc:[]};function qTe(){const[e,t]=S.useState(null);return S.useEffect(()=>{let n=!0;return De.auth.getUser().then(({data:r})=>{n&&t(r.user?.id??null)}),()=>{n=!1}},[]),e}const KTe={twelveUnseong:!0,twelveShinsal:!0,shinsal:!0,nabeum:!0},Mv=Yo(e=>({sections:KTe,setSections:t=>e({sections:t}),toggleSection:t=>e(n=>({sections:{...n.sections,[t]:!n.sections[t]}}))})),kk=1e3*60*60*24;function Ek(e,t){return(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth())}function Db(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function Pb(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function R5(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function L5(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function WTe(){const e=new Date().getFullYear(),[t,n]=S.useState(e),[r,i]=S.useState(e),[a,o]=S.useState(()=>L5()),[l,u]=S.useState(()=>L5()),[d,h]=S.useState(()=>R5()),[m,b]=S.useState(()=>R5()),y=Z=>{n(Z)},k=Z=>{i(Z)},w=()=>{const Z=t;let G=r;G<Z&&(G=Z),G-Z>9&&(G=Z+9),i(G)},_=()=>{let Z=t;const G=r;G<Z&&(Z=G),G-Z>9&&(Z=G-9),n(Z)},T=S.useMemo(()=>{if(!Number.isFinite(t)||!Number.isFinite(r))return 0;const Z=r-t+1;return Z>0?Z:0},[t,r]),O=S.useMemo(()=>{const Z=[];if(!Number.isFinite(t)||!Number.isFinite(r))return Z;for(let G=t;G<=r&&Z.length<10;G++)Z.push(G);return Z},[t,r]),j=Z=>{o(Z)},C=Z=>{u(Z)},M=()=>{const[Z,G]=a.split("-").map(Number),[J,Q]=l.split("-").map(Number),oe=new Date(Z,G-1),te=new Date(J,Q-1);if(te<oe){u(Db(oe));return}if(Ek(oe,te)>11){const X=new Date(oe);X.setMonth(oe.getMonth()+11),u(Db(X))}},P=()=>{const[Z,G]=a.split("-").map(Number),[J,Q]=l.split("-").map(Number),oe=new Date(Z,G-1),te=new Date(J,Q-1);if(te<oe){o(Db(te));return}if(Ek(oe,te)>11){const X=new Date(te);X.setMonth(te.getMonth()-11),o(Db(X))}},I=S.useMemo(()=>{const[Z,G]=(a||"").split("-").map(Number),[J,Q]=(l||"").split("-").map(Number);if(!Number.isFinite(Z)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(Q))return 0;const oe=new Date(Z,G-1,1),te=new Date(J,Q-1,1),z=Ek(oe,te)+1;return z>0?z:0},[a,l]),U=S.useMemo(()=>{const Z=[],[G,J]=a.split("-").map(Number),[Q,oe]=l.split("-").map(Number),te=new Date(G,J-1),z=new Date(Q,oe-1);if(Number.isNaN(te.getTime())||Number.isNaN(z.getTime()))return Z;for(;te<=z&&Z.length<12;)Z.push(`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}`),te.setMonth(te.getMonth()+1);return Z},[a,l]),W=Z=>{h(Z)},q=Z=>{b(Z)},H=()=>{if(!d||!m)return;const[Z,G,J]=d.split("-").map(Number),[Q,oe,te]=m.split("-").map(Number),z=new Date(Z,G-1,J,4,0,0),X=new Date(Q,oe-1,te,4,0,0);if(X<z){b(Pb(z));return}if(Math.floor((X.getTime()-z.getTime())/kk)>7){const ie=new Date(z);ie.setDate(z.getDate()+6),b(Pb(ie))}},B=()=>{if(!d||!m)return;const[Z,G,J]=d.split("-").map(Number),[Q,oe,te]=m.split("-").map(Number),z=new Date(Z,G-1,J,4,0,0),X=new Date(Q,oe-1,te,4,0,0);if(z>X){h(Pb(X));return}if(Math.floor((X.getTime()-z.getTime())/kk)>7){const ie=new Date(X);ie.setDate(X.getDate()-6),h(Pb(ie))}},K=S.useMemo(()=>{const[Z,G,J]=(d||"").split("-").map(Number),[Q,oe,te]=(m||"").split("-").map(Number);if(!Number.isFinite(Z)||!Number.isFinite(G)||!Number.isFinite(J)||!Number.isFinite(Q)||!Number.isFinite(oe)||!Number.isFinite(te))return 0;const z=new Date(Z,G-1,J,4,0,0),X=new Date(Q,oe-1,te,4,0,0),re=Math.floor((X.getTime()-z.getTime())/kk)+1;return re>0?re:0},[d,m]),V=S.useMemo(()=>{const Z=[],[G,J,Q]=d.split("-").map(Number),[oe,te,z]=m.split("-").map(Number),X=new Date(G,J-1,Q,4,0,0),re=new Date(oe,te-1,z,4,0,0);if(Number.isNaN(X.getTime())||Number.isNaN(re.getTime()))return Z;const ie=new Date(X);for(;ie<=re&&Z.length<31;){const fe=ie.getFullYear(),de=String(ie.getMonth()+1).padStart(2,"0"),pe=String(ie.getDate()).padStart(2,"0");Z.push(`${fe}-${de}-${pe}`),ie.setDate(ie.getDate()+1)}return Z},[d,m]);return{seStartYear:t,seEndYear:r,wolStartYM:a,wolEndYM:l,ilStartDate:d,ilEndDate:m,onSeStartChange:y,onSeEndChange:k,onSeStartBlur:w,onSeEndBlur:_,onWolStartChange:j,onWolEndChange:C,onWolStartBlur:M,onWolEndBlur:P,onIlStartChange:W,onIlEndChange:q,onIlStartBlur:H,onIlEndBlur:B,seYearsCount:T,wolMonthsCount:I,ilDaysCount:K,seYearsList:O,wolMonthsList:U,ilDaysList:V}}function VTe({msId:e,canUseMultiMode:t,canUseLuckTabs:n}){const r=Mv(Q=>Q.sections),i=Mv(Q=>Q.toggleSection),[a,o]=S.useState(!1),[l,u]=S.useState(!1),[d,h]=S.useState(""),[m,b]=S.useState("personality"),[y,k]=S.useState("overview"),[w,_]=S.useState("solo"),[T,O]=S.useState(""),[j,C]=S.useState(!1),[M,P]=S.useState(""),[I,U]=S.useState([]),[W,q]=S.useState(""),[H,B]=S.useState([]),K=WTe();S.useEffect(()=>{m!=="love"&&m!=="compat"&&(_("solo"),h(""))},[m]),S.useEffect(()=>{!t&&j&&C(!1)},[t,j]),S.useEffect(()=>{!n&&T!==""&&O("")},[n,T]),S.useEffect(()=>{M!==""&&U([])},[M]),S.useEffect(()=>{q(""),B([])},[e]);function V(){const Q=W.trim();Q&&(B(oe=>[...oe,Q]),q(""))}function Z(Q){B(oe=>oe.filter((te,z)=>z!==Q))}function G(){B([])}function J(Q){U(oe=>oe.includes(Q)?oe.filter(te=>te!==Q):[...oe,Q])}return{sections:r,toggleSection:i,friendMode:a,setFriendMode:o,teacherMode:l,setTeacherMode:u,partnerId:d,setPartnerId:h,mainCategory:m,setMainCategory:b,subCategory:y,setSubCategory:k,relationMode:w,setRelationMode:_,activeTab:T,setActiveTab:O,isMultiMode:j,setIsMultiMode:C,multiTab:M,setMultiTab:P,selectedDaeIdx:I,setSelectedDaeIdx:U,handleToggleDae:J,rangeControls:K,questionDraft:W,setQuestionDraft:q,extraQuestions:H,setExtraQuestions:B,handleAddQuestion:V,handleRemoveQuestion:Z,handleClearQuestions:G}}const oH=Yo(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})})),ZTe=!1,I5=e=>e<10?`0${e}`:`${e}`;function XTe(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",r=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const i=Number(n.slice(0,4)),a=Number(n.slice(4,6)),o=Number(n.slice(6,8));if(r==="lunar")try{const l=Vi(i,a,o,0,0),u=`${l.getFullYear()}${I5(l.getMonth()+1)}${I5(l.getDate())}`;return{...e,birthDay:u,calendarType:"solar"}}catch{return e}return e}const Am={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Nm={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ec={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Rb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},JTe=["","","","",""];function $5(e){return JTe.includes(e)}const sH={:"",:"",:"",:"",:""},lH={:"",:"",:"",:"",:""},cH={:"",:"",:"",:"",:""},uH={:"",:"",:"",:"",:""};function BE(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Am[t])return Am[t];if(["","","","","","","","","","","",""].includes(t))return Rb[t]??null;if(Nm[t])return Rb[Nm[t]]??null;const n=t.charAt(0);return Am[n]?Am[n]:["","","","","","","","","",""].includes(n)?n:Nm[n]?Rb[Nm[n]]??null:["","","","","","","","","","","",""].includes(n)?Rb[n]??null:null}function QTe(e){const t={};for(const[n,r]of Object.entries(e??{})){if(r<=0)continue;const i=BE(n);i&&(t[i]=(t[i]??0)+r)}return t}function eAe(e){if(!e)return[];const t=BE(e.charAt(0)),n=BE(e.charAt(1));return[t,n].filter(Boolean)}function Lb(e){const t=eAe(e),n={};for(const r of t)n[r]=(n[r]??0)+1;return n}function dH(e,t){const n=ec[e],r=ec[t];if(!n||!r)return"";let i;r===n?i="":r===sH[n]?i="":r===lH[n]?i="":r===cH[n]?i="":r===uH[n]?i="":i="";const a=$5(e)===$5(t);switch(i){case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":"";case"":return a?"":""}}function fH(e,t){return t===e?"":t===sH[e]?"":t===lH[e]?"":t===cH[e]?"":t===uH[e]?"":""}function hH(e){const t=Object.entries(e),n=t.reduce((d,[,h])=>d+(h>0?h:0),0);if(n<=0)return Object.fromEntries(t.map(([d])=>[d,0]));const r=t.map(([d,h])=>[d,(h>0?h:0)*100/n]),i=r.map(([d,h])=>[d,Math.floor(h)]);let a=i.reduce((d,[,h])=>d+h,0);const o=r.map(([d,h])=>[d,h-Math.floor(h)]).sort((d,h)=>h[1]-d[1]),l=Object.fromEntries(i.map(([d,h])=>[d,h]));let u=0;for(;a<100&&u<o.length;)l[o[u][0]]+=1,a+=1,u+=1;return l}const tAe={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"()",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"(  )",keywords:""},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"   ",keywords:" "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""}},nAe=e=>{if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),r=Am[t]??t,i=Nm[n]??n;return`${r}${i}`},Dv=e=>{const t=nAe(e),n=tAe[t];return n?{...n,code:t}:null};function mH(e,t){const n=XTe(e),r=n.birthDay??"",i=r.slice(0,4),a=r.slice(4,6),o=r.slice(6,8);let l="";if(n.corrected instanceof Date&&!Number.isNaN(n.corrected.getTime())){const u=String(n.corrected.getHours()).padStart(2,"0"),d=String(n.corrected.getMinutes()).padStart(2,"0");l=t?"":`${u}:${d}`}return`${i} ${a} ${o}  ${l}`}function rAe(e){const t={:0,:0,:0,:0,:0};for(const[n,r]of Object.entries(e)){const i=ec[n];i&&(t[i]+=r)}return t}function iAe(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[r,i]of Object.entries(e)){if(i<=0)continue;const a=dH(t,r);n[a]+=i}return n}function aAe(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const oAe={natal:50,dae:30,se:20,wol:7,il:3};function sAe(e){const t={};for(const{kind:r,bare:i}of e){const a=oAe[r]??0;if(a<=0)continue;const o=hH(i);for(const[l,u]of Object.entries(o))t[l]=(t[l]??0)+u*a}const n=Object.values(t).reduce((r,i)=>r+i,0);if(n>0)for(const r of Object.keys(t))t[r]=t[r]/n*100;return t}function pH(e,t,n){const r=QTe(e.perStemElementScaled),i=t!==""&&n?.dae?Lb(n.dae):{},a=(t===""||t===""||t==="")&&n?.se?Lb(n.se):{},o=(t===""||t==="")&&n?.wol?Lb(n.wol):{},l=t===""&&n?.il?Lb(n.il):{},u=sAe([{kind:"natal",bare:r},{kind:"dae",bare:i},{kind:"se",bare:a},{kind:"wol",bare:o},{kind:"il",bare:l}]),d=hH(u),h=rAe(d),m=iAe(d,e.dayStem),b=aAe(m);return{perStemAugBare:d,elementPercent:h,totalsSub:m,totalsMain:b}}function gH(e){return!e.birthTime||e.birthTime===""}function bH(e,t){return t[3]?["","","",""]:["","",""]}function lAe(e,t){return e.map((n,r)=>t[r]??"")}const cAe=["","","","","","","","","",""],uAe=["","","","","","","","","",""];function zE(e,t){const n={};for(const i of uAe){const a=dH(t,i);n[a]=i}const r={};for(const i of cAe){const a=n[i],o=a?ec[a]??"":"",l=a?`${i}(${a}${o})`:i;typeof e[i]=="number"&&(r[l]=e[i])}return r}function gu(e,t){return Object.entries(e).filter(([,r])=>r!=null&&`${r}`.trim()!=="").map(([r,i])=>`${r}: ${i}`).join(", ")}function dAe(e){return e.map(t=>String(t??"").trim()).filter(Boolean).join(`
`)}function ha(e){return e.filter(t=>t&&t.pos&&t.gz&&t.value).map(t=>`${t.pos}: [ - ${t.gz}] / ${t.value}`).join(`
`)}function Pv(e){return`: ${e.yang}, : ${e.yin}`}const fAe={si:"",il:"",wol:"",yeon:""};function B5(e){return e.replace(/^#/,"").trim()}function WA(e){const t=[],n=["si","il","wol","yeon"];for(const a of n){const o=e.good?.[a]??[],l=e.bad?.[a]??[];o.length===0&&l.length===0||(t.push(`[${fAe[a]}]`),o.length>0&&t.push(` : ${o.map(B5).join(", ")}`),l.length>0&&t.push(` : ${l.map(B5).join(", ")}`))}const r=e.meta?.voidPair;(r?.day||r?.year)&&(t.push("[]"),r.day?.length&&t.push(` : ${r.day.join("  ")}`),r.year?.length&&t.push(` : ${r.year.join("  ")}`));const i=e.meta?.samjaeYears;return(i?.day||i?.year)&&(t.push("[]"),i.day?.length&&t.push(` : ${i.day.join("")}`),i.year?.length&&t.push(` : ${i.year.join("")}`)),t.join(`
`)}const hAe={cheonganHap:"",cheonganChung:"",jijiSamhap:"",jijiBanhap:"",jijiBanghap:"",jijiYukhap:"",jijiChung:"",jijiHyeong:"",jijiPa:"",jijiHae:"",jijiWonjin:"",jijiGwimun:"",amhap:"",ganjiAmhap:""},mAe=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"],z5=["","","","","","","",""];function pAe(e){return[...e].sort((t,n)=>{const r=z5.indexOf(t),i=z5.indexOf(n);return r===-1&&i===-1?t.localeCompare(n,"ko"):r===-1?1:i===-1?-1:r-i})}function gAe(e){return e.replace(/^#/,"").replace(/_/g," ").replace(/X/g," X ").replace(/\s+/g," ").trim()}function bAe(e){const t=e.replace(/^#/,"").trim();if(!t)return null;const[n,r=""]=t.split("_");return{tokens:n.split("X").filter(Boolean),label:r,human:gAe(t)}}function yAe(e){const t=e.map(bAe).filter(a=>!!a),n=[],r=new Set,i=new Map;t.forEach((a,o)=>{if(a.tokens.length!==2||!a.label)return;const l=i.get(a.label)??[];l.push(o),i.set(a.label,l)});for(const[a,o]of i){const l=new Map;for(const h of o){const m=t[h],[b,y]=m.tokens;l.has(b)||l.set(b,[]),l.has(y)||l.set(y,[]),l.get(b).push(h),l.get(y).push(h)}let u="",d=[];for(const[h,m]of l)m.length>d.length&&(u=h,d=m);if(d.length>=2){const h=d.map(b=>{r.add(b);const[y,k]=t[b].tokens;return y===u?k:y}).filter(Boolean),m=`${pAe(h).join("  ")} X ${u} ${a}`.trim();m&&n.push(m)}}return t.forEach((a,o)=>{r.has(o)||n.push(a.human)}),n}function Rv(e){const t=[];for(const n of mAe){const r=e[n];if(!Array.isArray(r))continue;const i=r.filter(l=>l&&typeof l=="string"&&!l.includes(""));if(i.length===0)continue;const a=yAe(i),o=hAe[n]??n;t.push(`${o} : ${a.join("  ")}`)}return t.join(`
`)}function vAe(e){const t=[];for(const[n,r]of Object.entries(e))!r||!r.gz||!r.nabeum||t.push({pos:n,gz:r.gz,value:r.nabeum});return ha(t)}const Om=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Lv(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Lv(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(Om(e)){const t={};for(const[n,r]of Object.entries(e)){const i=Lv(r);i!==void 0&&(t[n]=i)}return Object.keys(t).length>0?t:void 0}return e}}function yH(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):""}const xs=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean",xAe=e=>typeof e.yang=="number"&&typeof e.yin=="number",wAe=e=>"good"in e||"bad"in e||"meta"in e,_Ae=new Set(["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"]),SAe=e=>Object.keys(e).some(t=>_Ae.has(t)),kAe=e=>{const t=Object.keys(e);return!t.includes("")&&!t.includes("")?!1:t.every(n=>n===""||n===""||n==="")},EAe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1},jAe=e=>{const t=Object.keys(e);return t.includes("")?t.every(n=>n===""||n===""||n===""):!1};function U5(e){const t=typeof e.pos=="string"?e.pos:"",n=typeof e.gz=="string"?e.gz:"";if(!t||!n)return null;const r=typeof e.unseong=="string"&&e.unseong||typeof e.shinsal=="string"&&e.shinsal||typeof e.nabeum=="string"&&e.nabeum||typeof e.value=="string"&&e.value||"";return r?{pos:t,gz:n,value:r}:null}function iy(e){if(e==null)return"";const t=yH(e);if(t)return t;if(Array.isArray(e)){if(e.length===0)return"";if(e.every(xs))return dAe(e.map(String));const n=[];for(const r of e){if(!Om(r))continue;const i=U5(r);i&&n.push(i)}return n.length>0?ha(n):e.map(r=>iy(r)).filter(Boolean).join(`

`)}if(Om(e)){if(xAe(e))return Pv(e);if(wAe(e))return WA(e);if(SAe(e))return Rv(e);if(kAe(e)){const u=e.,d=e.;if(xs(u)&&xs(d))return`${u} / : ${d}`;if(xs(u))return String(u);if(xs(d))return`: ${d}`}if(EAe(e)){const u=e.;if(xs(u))return String(u)}if(jAe(e)){const u=e.;if(xs(u))return String(u)}const n=Object.entries(e);if(n.length===0)return"";if(n.every(([,u])=>xs(u)))return gu(e);if(n.every(([,u])=>Array.isArray(u)))return n.map(([d,h])=>{const m=h.map(b=>iy(b)).filter(Boolean).join(`

`);return m?`[${d}]
${m}`:""}).filter(Boolean).join(`
`);if(n.every(([,u])=>u==null||xs(u)||Om(u))){const u=n.map(([d,h])=>{if(h==null)return"";const m=iy(h);if(!m)return"";const b=m.includes(`
`)?`
`:" ";return`${d}:${b}${m}`}).filter(Boolean);if(u.length>0)return u.join(`
`)}if(n.every(([,u])=>!u||Om(u)&&typeof u.gz=="string"))return vAe(e);const l=U5(e);return l?ha([l]):JSON.stringify(e,null,2)}return String(e??"")}function TAe(e,t){const n=Lv(e);if(n===void 0)return"";if(t==="plain")return iy(n);const r=yH(n);return r!==""?r:["```json",JSON.stringify(n,null,2),"```"].join(`
`)}function vH(e,t,n){const r=TAe(t,n);return r.trim()?`## ${e}
${r}`:""}const Lo=(e,t)=>vH(e,t,"plain"),xH=(e,t)=>vH(e,t,"fenced"),AAe=(e,t)=>{if(!e)return{};const n=t,r=l=>{if(!l)return;const u={};for(const[d,h]of Object.entries(l)){if(!Array.isArray(h))continue;const m=h.filter(b=>typeof b=="string"&&b.includes(n));m.length>0&&(u[d]=m)}return Object.keys(u).length>0?u:void 0},i=r(e.good),a=r(e.bad),o={};return i&&(o.good=i),a&&(o.bad=a),o},NAe=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[r,i]of Object.entries(e)){if(!Array.isArray(i))continue;const a=Array.from(new Set(i.filter(o=>typeof o=="string"&&o.includes(t))));a.length>0&&(n[r]=a)}return n};function UE(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${n}(${fH(t,n)})`,r]))}const F5={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},OAe=["year","month","day","hour"],CAe=new Set(["","","","",""]),Kd=new Set(["","","","",""]),FE={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},MAe={:5,:7,:5,:-5,:-7,:-5},jk=e=>Math.round(e*10)/10,wH=e=>{const t=jk(e),n=jk(100-e),r=jk(100-Math.abs(t-50)*2),i=t>=55?"":t<=45?"":"";return{yang:t,yin:n,harmony:r,category:i}};function DAe(e){if(!e)return null;let t=0,n=0;Object.entries(e).forEach(([i,a])=>{const o=Number(a)||0;Kd.has(i.charAt(0))?t+=o:n+=o});const r=t+n;return r<=0?null:t/r*100}function Ib(e){if(!e||e.length<2)return null;const t=e.charAt(0),n=e.charAt(1),r=FE[n],i=[t,r].filter(Boolean);return i.length?i.filter(o=>Kd.has(o)).length/i.length*100:null}function VA(e){const{natal:t,perStemElementScaled:n,mode:r="natal"}=e;if(!n||!t||t.length<3)return null;let i=0,a=0;Object.entries(n).forEach(([M,P])=>{const I=Number(P)||0;Kd.has(M.charAt(0))?i+=I:a+=I});const o=i+a>0?(i-a)/(i+a):0;let l=0,u=0,d=0,h=0;t.forEach(M=>{if(!M||M.length<2)return;const P=M[0],I=FE[M[1]];[P,I].forEach(U=>{U&&(CAe.has(U)?l+=1:u+=1,Kd.has(U)?d+=1:h+=1)})});const m=l+u>0?(l-u)/(l+u):0,b=d+h>0?(d-h)/(d+h):0;let y=0,k=0;t.forEach((M,P)=>{if(!M||M.length<2)return;const I=OAe[P],U=F5[I].stem,W=F5[I].branch;Kd.has(M[0])?y+=U:k+=U;const q=FE[M[1]];q&&Kd.has(q)?y+=W:k+=W});const w=y+k>0?(y-k)/(y+k):0,_=t[1]?.charAt(1),T=(MAe[_??""]||0)/100,O=r==="luck"?{essence:.15,nature:.15,base:.7,position:0,season:0}:{essence:.3,nature:.3,base:.2,position:.2,season:1},j=m*O.essence+b*O.nature+o*O.base+w*O.position+T*O.season;if(!Number.isFinite(j))return null;const C=(Math.min(1,Math.max(-1,j))+1)*50;return wH(C)}function PAe(e){const{natal:t,natalScaled:n,chain:r,weights:i}=e;if(!t||t.length<3)return null;const a=VA({natal:t,perStemElementScaled:n,mode:"natal"}),o=a?.yang??DAe(n);if(o==null)return null;const l=[];i.natal>0&&l.push({yang:o,weight:i.natal});const u=Ib(r?.dae??null);u!=null&&(i.dae??0)>0&&l.push({yang:u,weight:i.dae??0});const d=Ib(r?.se??null);d!=null&&(i.se??0)>0&&l.push({yang:d,weight:i.se??0});const h=Ib(r?.wol??null);h!=null&&(i.wol??0)>0&&l.push({yang:h,weight:i.wol??0});const m=Ib(r?.il??null);m!=null&&(i.il??0)>0&&l.push({yang:m,weight:i.il??0});const b=l.reduce((k,w)=>k+w.weight,0);if(b<=0)return a??null;const y=l.reduce((k,w)=>k+w.yang*w.weight,0)/b;return wH(y)}function _H(e){const{ms:t,natal:n,chain:r,basis:i,tab:a,unified:o,percent:l,category:u,sections:d}=e,h=d?.tenGod??!0,m=d?.twelveUnseong??!0,b=d?.twelveShinsal??!0,y=d?.shinsal??!0,k=d?.nabeum??!0,w=gH(t),_=Pe(n[3]??""),T=[Pe(n[0]??""),Pe(n[1]??""),Pe(n[2]??""),_],{shinsalEra:O,shinsalGaehwa:j,shinsalBase:C}=oH.getState(),M=C===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",{flags:P}=X7(T,o.natalFixed.elementScoreRaw),I=`${u} (${l.toFixed(1)}%)  ${[` ${P..||P..||P..||P..?"":""}`,` ${P..||P..||P..||P..?"":""}`,` ${P..||P..?"":""}`].join(", ")}`,U=bH(t,T),W=o.dayStem,q=ec[W]??ec[o.dayStem]??"",H=`: ${t.name??""}  (${mH(t,w)}) 
${t.ganjiText} / : ${t.gender}`,B=(te,z)=>{const X=(z??"").trim();return X?`## ${te}
${X}`:""},K=[],V=[];V.push(" ver."),V.push(B("",I));const Z=VA({natal:T,perStemElementScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,mode:"natal"});if(Z&&V.push(B("()",Pv(Z))),V.push(B("(  )",gu(UE(o.natalFixed.elementPercent100,q)))),h){const te=zE(o.natalFixed.totalsSub,W);V.push(B(" ( 10 100)",gu(te)))}if(m){const te=U.map((z,X)=>{const re=T[X]??"";return re?{pos:z,gz:re,value:no(W,re.charAt(1))}:null}).filter(Boolean);te.length>0&&V.push(B("()",ha(te)))}if(b){const te=U.map((z,X)=>{const re=T[X]??"";return re?{pos:z,gz:re,value:ro({baseBranch:M,targetBranch:re.charAt(1),era:O,gaehwa:j})}:null}).filter(Boolean);te.length>0&&V.push(B("()",ha(te)))}if(k){const te=U.map((z,X)=>{const re=T[X]??"";if(!re)return null;const ie=Dv(re);return ie?{pos:z,gz:re,value:ie.name}:null}).filter(Boolean);te.length>0&&V.push(B("",ha(te)))}if(V.push(B("()",Rv(cx(U.map((te,z)=>T[z]??""))))),y){const te=Lp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});V.push(B("()",WA(te)))}const G=V.filter(Boolean).join(`

`);G&&K.push(G);const J={:{natal:100},:{natal:70,dae:30},:{natal:60,dae:25,se:15},:{natal:55,dae:20,se:15,wol:10},:{natal:50,dae:20,se:15,wol:10,il:5}},Q=(te,z)=>{if(te==="")return"";const X=z??Ip({natal:T,tab:te,chain:r,hourKey:"prompt"}),re=pH(X,te,r),ie=re.elementPercent,fe=re.totalsSub,de=[];de.push(`${te} ver.`);const pe={dae:r?.dae?Pe(r.dae):null,se:r?.se?Pe(r.se):null,wol:r?.wol?Pe(r.wol):null,il:r?.il?Pe(r.il):null},Ne=PAe({natal:T,natalScaled:o.natalFixed.overlay.perStemAugFull??o.natalFixed.overlay.perStemAugBare,chain:pe,weights:J[te]});if(Ne&&de.push(B(`( + ${te})`,Pv(Ne))),de.push(B(`( + ${te})`,gu(UE(ie,q)))),h){const he=zE(fe,W);de.push(B(` ( + ${te})`,gu(he)))}const se=te===""?r?.dae:te===""?r?.se:te===""?r?.wol:te===""?r?.il:null,Se=se?Pe(se):"";if(Se&&(de[0]=`${te} ver.  : ${Se}`),Se&&m){const he=no(W,Se.charAt(1));de.push(B(`(${te})`,ha([{pos:te,gz:Se,value:he}])))}if(Se&&b){const he=ro({baseBranch:M,targetBranch:Se.charAt(1),era:O,gaehwa:j});de.push(B(`(${te})`,ha([{pos:te,gz:Se,value:he}])))}if(Se&&k){const he=Dv(Se);he&&de.push(B("",ha([{pos:te,gz:Se,value:he.name}])))}const ke=Bl({natal:T,daewoon:te!==""?r?.dae??void 0:void 0,sewoon:te===""||te===""||te===""?r?.se??void 0:void 0,wolwoon:te===""||te===""?r?.wol??void 0:void 0,ilwoon:te===""?r?.il??void 0:void 0});return de.push(B(`(${te})`,Rv(ke))),de.filter(Boolean).join(`

`)};if(a!==""){const te=a===""?[""]:a===""?["",""]:a===""?["","",""]:a===""?["","","",""]:[];for(const z of te){const X=Q(z,z===a?o:void 0);X&&K.push(X)}}const oe=K.filter(te=>te&&te.trim().length>0).join(`

`);return{header:H,body:oe,guide:""}}function RAe(e){const{header:t,body:n,guide:r}=_H(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function Io(e){const{scope:t,infoText:n,gz:r,chain:i,natal:a,relationArgs:o,basis:l,unified:u,dayEl:d,baseDayStem:h,show:m,shinsalSettings:b,harmonyMode:y="scope",includeBasicInfo:k=!0}=e,w=pH(u,t,i),_=Bl({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon}),T=m.shinsal?Lp({natal:a,daewoon:o.daewoon,sewoon:o.sewoon,wolwoon:o.wolwoon,ilwoon:o.ilwoon,basis:l}):null,O=m.nabeum?Dv(r):null,j=m.twelveUnseong?no(h,r.charAt(1)):null,C=m.twelveShinsal?ro({baseBranch:b.baseBranch,targetBranch:r.charAt(1),era:b.era,gaehwa:b.gaehwa}):null,M=y==="full"?_:NAe(_,t);return{...k?{:n,:r}:{},:UE(w.elementPercent,d),...m.tenGod?{:w.totalsSub}:{},:M,...m.shinsal?{:AAe(T,t)}:{},...m.nabeum?{:O?{:O.name,:O.element}:null}:{},...m.twelveUnseong?{:{:t,:j}}:{},...m.twelveShinsal?{:{:t,:C}}:{}}}function LAe(e){const{selectedDaeList:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(n.length===0||t.length===0)return[];const h=[];for(const m of t){const b={dae:m.gz,se:null,wol:null,il:null},y=Io({scope:"",infoText:`${m.age} ${m.gz} (${m.startYear}~${m.endYear})`,gz:m.gz,chain:b,natal:r,relationArgs:{daewoon:m.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"full",includeBasicInfo:!1});h.push(Lo(`${m.age} ${m.gz} (${m.startYear}~${m.endYear})`,y))}return h.filter(m=>m.trim().length>0)}function ZA(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function SH(e,t){const n=e[t],r=e[t+1];return r?ZA(r):new Date(n.endYear+1,0,1)}function kH(e,t,n,r){return e<r&&t>n}function EH(e,t,n){const r=new Date(t,0,1),i=new Date(n+1,0,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=ZA(l),d=SH(e,o);kH(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function jH(e,t){return EH(e,t,t)}function Iv(e,t,n){const r=new Date(t,n-1,1),i=new Date(t,n,1),a=[];for(let o=0;o<e.length;o++){const l=e[o],u=ZA(l),d=SH(e,o);kH(u,d,r,i)&&(a.some(h=>h.gz===l.gz&&h.startYear===l.startYear)||a.push(l))}return a}function HE(e,t){if(!Number.isInteger(t)||t<1||t>12)throw new RangeError(`findSeForMonthPairs: month must be 1..12, got ${t}`);const n=new Date(e,t-1,1,0,0,0,0),r=new Date(e,t,1,0,0,0,0),i=gn(e,315),a=[],o=u=>{const d=ct(new Date(u,5,15,12,0,0,0)),h=Pe(d||"");h&&(a.some(m=>m.useYear===u&&m.gz===h)||a.push({useYear:u,gz:h}))};return n<i&&i<r?(o(e-1),o(e)):r<=i?o(e-1):o(e),a}function IAe(e){const{seYears:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=Array.from(new Set(t)).sort((w,_)=>w-_),m=[],b=h[0],y=h[h.length-1],k=EH(n,b,y);if(k.length>0){const w=b,_=ct(new Date(w,5,15,12,0,0)),T=Pe(_||""),O={:k.map(j=>{const C={dae:j.gz,se:T||null,wol:null,il:null};return Io({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:T||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};m.push(Lo("",O))}for(const w of h){const _=new Date(w,5,15,12,0,0),T=ct(_),O=jH(n,w),j=O.length>0?O[0]:null,C=Pe(T||""),M=w,P={dae:j?j.gz:null,se:C||null,wol:null,il:null},I=Io({scope:"",infoText:`${M} ${C}`,gz:C,chain:P,natal:r,relationArgs:{daewoon:j?.gz,sewoon:C||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Lo(` ${M}`,{:I}))}return m.filter(w=>w.trim().length>0)}function Tk(e){return String(e).padStart(2,"0")}function $Ae(e,t){const n=new Date(e,t-1,1,12,0,0,0),r=new Date(e,t,1,12,0,0,0),i=gn(e,315),a=HE(e,t);if(!(n<i&&i<r)){const k=a[a.length-1]??(()=>{const w=Pe(ct(new Date(e,5,15,12,0,0,0))||"");return{useYear:e,gz:w}})();return[{label:`${e}-${Tk(t)}`,repDate:new Date(e,t-1,15,12,0,0,0),se:k}]}const l=1440*60*1e3,u=new Date(i.getTime()-l);u.setHours(12,0,0,0);const d=new Date(i.getTime()+l);d.setHours(12,0,0,0);const h=a.find(k=>k.useYear===e-1)??a[0],m=a.find(k=>k.useYear===e)??a[a.length-1],b=h??{useYear:e-1,gz:Pe(ct(new Date(e-1,5,15,12,0,0,0))||"")},y=m??{useYear:e,gz:Pe(ct(new Date(e,5,15,12,0,0,0))||"")};return[{label:`${e}-${Tk(t)}()`,repDate:u,se:b},{label:`${e}-${Tk(t)}()`,repDate:d,se:y}]}function BAe(e){const{wolMonths:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d}=e;if(t.length===0)return[];const h=[],m=[],b=new Map;for(const O of t){const[j,C]=O.split("-").map(Number),M=Iv(n,j,C);for(const I of M)m.some(U=>U.gz===I.gz&&U.startYear===I.startYear)||m.push(I);const P=HE(j,C);for(const I of P){const U=`${I.useYear}:${I.gz}`;b.has(U)||b.set(U,{year:I.useYear,month:C,gz:I.gz})}}const[y,k]=t[0].split("-").map(Number),w=HE(y,k),_=w[w.length-1]?.gz??Pe(ct(new Date(y,5,15,12,0,0,0))||"");if(m.length>0){const O={:m.map(j=>{const C={dae:j.gz,se:_||null,wol:null,il:null};return Io({scope:"",infoText:`${j.age} ${j.gz} (${j.startYear}~${j.endYear})`,gz:j.gz,chain:C,natal:r,relationArgs:{daewoon:j.gz,sewoon:_||void 0,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Lo("",O))}const T=Array.from(b.keys()).sort((O,j)=>{const C=Number(O.split(":")[0]),M=Number(j.split(":")[0]);return C-M});if(T.length>0){const O={:T.map(j=>{const C=b.get(j),M=C.year,P=C.gz,U=jH(n,M)[0]??m[0]??null,W={dae:U?U.gz:null,se:P,wol:null,il:null};return Io({scope:"",infoText:`${M} ${P}`,gz:P,chain:W,natal:r,relationArgs:{daewoon:U?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})})};h.push(Lo("",O))}for(const O of t){const[j,C]=O.split("-").map(Number),M=Iv(n,j,C),P=M.length>0?M[0]:null,U=$Ae(j,C).map(W=>{const q=At(W.repDate),H=Pe(q||""),B={dae:P?P.gz:null,se:W.se.gz||null,wol:H,il:null};return Io({scope:"",infoText:`${W.label} ${H}  ${W.se.useYear} ${W.se.gz}`,gz:H,chain:B,natal:r,relationArgs:{daewoon:P?.gz,sewoon:W.se.gz||void 0,wolwoon:H,ilwoon:void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});h.push(Lo(` ${O}`,{:U}))}return h.filter(O=>O.trim().length>0)}function Ak(e){const t=e.getFullYear(),n=gn(t,315),r=e<n?t-1:t,i=ct(new Date(r,5,15,12,0,0,0)),a=Pe(i||"");return{useYear:r,gz:a}}function zAe(e){const{ilDays:t,daeList:n,natal:r,basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,dayBoundaryRule:h}=e;if(t.length===0)return[];const m=[],[b,y,k]=t[0].split("-").map(Number),w=new Date(b,y-1,k,4,0),_=new Date(b,y-1,k,12,0);if(!Number.isNaN(w.getTime())){const T=Iv(n,b,y),O=T.length>0?T[0]:null,j=[];for(const q of t){const[H,B,K]=q.split("-").map(Number),V=new Date(H,B-1,K,12,0),Z=new Date(H,B-1,K,4,0);if(Number.isNaN(V.getTime())||Number.isNaN(Z.getTime()))continue;const G=Ak(V),J=Pe(At(V)||""),Q=Pe(ht(Z,h)||""),oe=`${G.useYear}|${G.gz}|${J}`;j.some(te=>te.key===oe)||j.push({key:oe,repDateStr:q,seYear:G.useYear,seGZ:G.gz,wolGZ:J,ilGZ:Q})}const C=Pe(ht(w,h)||""),M=Pe(At(_)||""),P=Ak(_),I=j.length>0?j:[{key:`${P.useYear}|${P.gz}|${M}`,repDateStr:t[0],seYear:P.useYear,seGZ:P.gz,wolGZ:M,ilGZ:C}];if(O){const q=I[I.length-1],H={dae:O.gz,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ},B=Io({scope:"",infoText:`${O.age} ${O.gz} (${O.startYear}~${O.endYear})`,gz:O.gz,chain:H,natal:r,relationArgs:{daewoon:O.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Lo("",B))}const U=I.filter(q=>q.seGZ.trim().length>0).map(q=>{const H={dae:O?O.gz:null,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ};return Io({scope:"",infoText:`${q.seYear} ${q.seGZ} (${q.repDateStr} )`,gz:q.seGZ,chain:H,natal:r,relationArgs:{daewoon:O?.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});U.length>0&&m.push(Lo("",{:U}));const W=I.filter(q=>q.wolGZ.trim().length>0).map(q=>{const H={dae:O?O.gz:null,se:q.seGZ,wol:q.wolGZ,il:q.ilGZ};return Io({scope:"",infoText:`${q.repDateStr} ${q.wolGZ}`,gz:q.wolGZ,chain:H,natal:r,relationArgs:{daewoon:O?.gz,sewoon:q.seGZ,wolwoon:q.wolGZ,ilwoon:q.ilGZ},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0})});W.length>0&&m.push(Lo("",{:W}))}for(const T of t){const[O,j,C]=T.split("-").map(Number),M=new Date(O,j-1,C,4,0),P=new Date(O,j-1,C,12,0);if(Number.isNaN(M.getTime())||Number.isNaN(P.getTime()))continue;const I=Iv(n,O,j),U=I.length>0?I[0]:null,q=Ak(P).gz,H=At(P),B=Pe(H||""),K=ht(M,h),V=Pe(K||""),Z={dae:U?U.gz:null,se:q||null,wol:B,il:V},G=Io({scope:"",infoText:`${T} ${V}`,gz:V,chain:Z,natal:r,relationArgs:{daewoon:U?.gz,sewoon:q||void 0,wolwoon:B||void 0,ilwoon:V||void 0},basis:i,unified:a,dayEl:o,baseDayStem:l,show:u,shinsalSettings:d,harmonyMode:"scope",includeBasicInfo:!0});m.push(Lo(` ${T}`,{:G}))}return m.filter(T=>T.trim().length>0)}function TH(e){const{ms:t,natal:n,basis:r,includeTenGod:i,unified:a,percent:o,category:l,selectedDaeList:u,daeList:d,seYears:h,wolMonths:m,ilDays:b,sections:y}=e,k=gH(t),w=Pe(n[3]??""),_=t.mingSikType??"/",T=[Pe(n[0]??""),Pe(n[1]??""),Pe(n[2]??""),w],O=bH(t,T),j=T[2]?.charAt(0)??"",C=ec[j]??ec[a.dayStem]??"",M=!!i&&(y?.tenGod??!0),P=y?.twelveUnseong??!0,I=y?.twelveShinsal??!0,U=y?.shinsal??!0,W=y?.nabeum??!0,{shinsalBase:q,shinsalEra:H,shinsalGaehwa:B}=oH.getState(),K=q===""?T[0]?.charAt(1)??"":T[2]?.charAt(1)??"",V=`: ${t.name??""}  (${mH(t,k)}) 
${t.ganjiText} / : ${t.gender}`,Z=(ie,fe)=>{const de=(fe??"").trim();return de?`## ${ie}
${de}`:""},G=[],{flags:J}=X7(T,a.natalFixed.elementScoreRaw),Q=`${l} (${o.toFixed(1)}%)  ${[` ${J..||J..||J..||J..?"":""}`,` ${J..||J..||J..||J..?"":""}`,` ${J..||J..?"":""}`].join("  ")}`,oe=[];oe.push(" ver."),oe.push(Z("",Q));const te=VA({natal:T,perStemElementScaled:a.natalFixed.overlay.perStemAugFull??a.natalFixed.overlay.perStemAugBare,mode:"natal"});if(te&&oe.push(Z("()",Pv(te))),oe.push(Z("(  )",gu(Object.fromEntries(Object.entries(a.natalFixed.elementPercent100).map(([ie,fe])=>[`${ie}(${fH(C,ie)})`,fe]))))),M){const ie=zE(a.natalFixed.totalsSub,j);oe.push(Z(" ( 10 100)",gu(ie)))}if(P){const ie=O.map((fe,de)=>{const pe=T[de]??"";return pe?{pos:fe,gz:pe,value:no(j,pe.charAt(1))}:null}).filter(Boolean);ie.length>0&&oe.push(Z("()",ha(ie)))}if(I){const ie=O.map((fe,de)=>{const pe=T[de]??"";return pe?{pos:fe,gz:pe,value:ro({baseBranch:K,targetBranch:pe.charAt(1),era:H,gaehwa:B})}:null}).filter(Boolean);ie.length>0&&oe.push(Z("()",ha(ie)))}if(W){const ie=O.map((fe,de)=>{const pe=T[de]??"";if(!pe)return null;const Ne=Dv(pe);return Ne?{pos:fe,gz:pe,value:Ne.name}:null}).filter(Boolean);ie.length>0&&oe.push(Z("",ha(ie)))}const z=cx(lAe(O,T));if(oe.push(Z("()",Rv(z))),U){const ie=Lp({natal:T,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:r});oe.push(Z("()",WA(ie)))}const X=oe.filter(Boolean).join(`

`);X&&G.push(X),d.length>0&&u.length>0&&(G.push(" ver."),G.push(...LAe({selectedDaeList:u,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:W},shinsalSettings:{baseBranch:K,era:H,gaehwa:B}}))),h.length>0&&(G.push(" ver."),G.push(...IAe({seYears:h,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:W},shinsalSettings:{baseBranch:K,era:H,gaehwa:B}}))),m.length>0&&(G.push(" ver."),G.push(...BAe({wolMonths:m,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:W},shinsalSettings:{baseBranch:K,era:H,gaehwa:B}}))),b.length>0&&(G.push(" ver."),G.push(...zAe({ilDays:b,daeList:d,natal:T,basis:r,unified:a,dayEl:C,baseDayStem:j,show:{tenGod:M,twelveUnseong:P,twelveShinsal:I,shinsal:U,nabeum:W},shinsalSettings:{baseBranch:K,era:H,gaehwa:B},dayBoundaryRule:_})));const re=(Lv(G.join(`

`))??"").toString();return{header:V,body:re,guide:""}}function UAe(e){const{header:t,body:n,guide:r}=TH(e);return[t,n,r].filter(i=>i&&i.trim().length>0).join(`

`)}function XA(e){if(!e)return null;const t=e.name||"";let n="";if(e.birthDay&&e.birthDay.length===8){const o=e.birthDay.slice(0,4),l=e.birthDay.slice(4,6),u=e.birthDay.slice(6,8);n=`${o}-${l}-${u}`}else e.birthDay&&(n=e.birthDay);let r="";if(e.birthTime&&e.birthTime.trim().length>0){const l=e.birthTime.trim().padEnd(4,"0").slice(0,4),u=l.slice(0,2),d=l.slice(2,4);r=`${u}:${d}`}let i="";e.birthPlace&&typeof e.birthPlace=="object"&&(i=e.birthPlace.name||"");const a=e.ganji||e.ganjiText||"";return{name:t,birthDate:n,birthTime:r,birthPlace:i,ganjiText:a}}function FAe(e){const{header:t,body:n}=_H(e),r=e.relationMode==="couple"?XA(e.partnerMs??null):null,i=r?xH("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function HAe(e){const{header:t,body:n}=TH(e),r=e.relationMode==="couple"?XA(e.partnerMs??null):null,i=r?xH("  ",r):"";return[t,n,i].filter(a=>a&&a.trim().length>0).join(`

`)}function GAe(e){const t=(e??"").trim();if(!t)return"";const n=[/\r?\n-----\s*\r?\n/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/,/\r?\n##\s*\s*/,/\r?\n##\s*/,/\r?\n?###\s*/,/\r?\n?\s*\s*/,/\r?\n?\s*\s*/];let r=-1;for(const i of n){const a=t.search(i);a>=0&&(r=r<0?a:Math.min(r,a))}return r>=0?t.slice(0,r).trimEnd():t}function YAe(e){return e?`    .
`:""}function qAe(e){return e?` /  .
`:""}function KAe(e,t){if(e!=="couple")return"";const n=XA(t);return n?["","","[  -   ]","",`-  : ${n.name}`,`-  : ${n.birthDate}`,`-  : ${n.birthTime}`,`-  : ${n.birthPlace}`,`- ${n.ganjiText}`,"","  /  ,","     .",""].join(`
`):""}function JA(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),r=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const j=Vi(t,n,r);t=j.getFullYear(),n=j.getMonth()+1,r=j.getDate()}const i=!e.birthTime||e.birthTime==="",a=i?4:Number(e.birthTime.slice(0,2)),o=i?30:Number(e.birthTime.slice(2,4)),l=new Date(t,n-1,r,a,o,0,0),u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,d=Op(l,u,i),h=e.mingSikType??"/",m=ct(d,u),b=At(d,u),y=ht(d,h),k=i?null:eo(d,h),w=Pe(m),_=Pe(b),T=Pe(y),O=k?Pe(k):"";return[w,_,T,O]}function AH(e){const t=new Date(e.corrected),n=JA(e),r=n[0].charAt(0),a=["","","","",""].includes(r),o=e.gender==="",l=o&&a||!o&&!a?"forward":"backward",u=Dp(t,n[1],l,120,e.birthPlace?.lon??127.5),d=u.firstChange;if(!d)return[];const h=[];let m=Pe(u.events[0]?.gz??n[1]);for(let b=0;b<10;b++){const y=new Date(d);if(y.setFullYear(y.getFullYear()+b*10),b>0){const k=u.events[b];k&&(m=Pe(k.gz))}h.push(`${y.getFullYear()} ${String(y.getMonth()+1).padStart(2,"0")} ${m}  `)}return h}function Ul(e){return Pe(e)}function WAe(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function H5(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,r)=>{const i=Pe(n??"");return i||(r<=2?"--":"")})}function VAe(e,t){if(!Array.isArray(e)||e.length===0)return null;const n=e.map(i=>{const a=String(i??"").match(/(\d{4})\s*(\d{1,2})\s*([-]{2})/);if(!a)return null;const o=Number(a[1]),l=Number(a[2]),u=Ul(a[3]??"");return!Number.isFinite(o)||!Number.isFinite(l)||!u?null:{at:new Date(o,l-1,1,12,0,0,0),gz:u}}).filter(Boolean);if(n.length===0)return null;const r=t.getTime();for(let i=n.length-1;i>=0;i-=1){const a=n[i];if(r>=a.at.getTime())return a.gz}return n[0].gz}function ZAe(e,t,n,r){const i=Ul(ct(t)||""),a=Ul(At(t)||""),o=Ul(ht(t,n)||"");let l=e?.dae?Ul(e.dae):null;if(!l&&r){const u=AH(r);l=VAe(u,t)}return e?{dae:l,se:e.se??(i||null),wol:e.wol??(a||null),il:e.il??(o||null)}:{dae:l,se:i||null,wol:a||null,il:o||null}}function XAe(e,t){const n=H5(e),r=H5(t);return{solarKo:n,lunarKo:r}}function G5(e,t){if(!t)return e;const n=Qa(e[2]||"",-1);return[e[0],e[1],n,e[3]]}function GE(e,t,n){const r=[...e];return n&&(!r[3]||r[3]===""||r[3]==="--")&&t&&(r[3]=t.stem+t.branch),r}function JAe(e,t,n){return e?"solar":t?"lunar":"solar"}function QAe(e,t,n,r,i,a,o,l){return GE(e==="lunar"?n?i:t?r:a??["","","",""]:t?r:n?i:a??["","","",""],o,l)}function eNe(e,t){const n=Number(e.birthDay?.slice(0,4)),r=Number(e.birthDay?.slice(4,6)),i=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i))return null;const a=new Date(n,r-1,i,12,4,0,0),o=Ul(ct(a)||""),l=Ul(At(a)||""),u=Ul(ht(a,t)||"");return[o,l,u,""]}function tNe(e,t){return t&&e?e.stem+e.branch:""}function nNe(e,t,n){const i=[...JA(e)];return n&&t&&t.length===2&&(i[3]=t),i}function rNe(e){const t=t9(e,{criteriaMode:"modern",useHarmonyOverlay:!0}),n=dT(t);return{percent:n,category:C7(n)}}function iNe(e){const t=AH(e).slice(0,10),n=e.birthDay?Number(e.birthDay.slice(0,4)):0;return t.map((r,i)=>{const a=r.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),o=a?Number(a[1]):0,l=a?Number(a[2]):1,u=1,d=a?a[3]:"",h=n>0?sNe(n,o):i*10;return{gz:d,age:h,startYear:o,startMonth:l,startDay:u,endYear:o+10}})}function aNe(e,t){return e.filter(n=>n.id!==t).map(n=>{const r=(n.name??"").trim()||" ",i=n.birthDay?n.birthDay:"",a=i?`${r} (${i})`:r;return{id:n.id,label:a}})}function oNe(e,t){if(!e)return"";if(t.length===0)return e;const n=["","-----","     ","",...t.map((r,i)=>`${i+1}. ${r}`)];return`${e}
${n.join(`
`)}`}function Y5(e){return WAe(e)}function sNe(e,t){return t-e+1}function lNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1,canUseMultiMode:o,canUseLuckTabs:l,input:u}){const{friendMode:d,teacherMode:h,partnerId:m,mainCategory:b,subCategory:y,relationMode:k,activeTab:w,isMultiMode:_,multiTab:T,selectedDaeIdx:O,rangeControls:j,extraQuestions:C,sections:M}=u,P=En(_t=>_t.list),{date:I,setDate:U}=Jr();S.useEffect(()=>{U(new Date)},[e.id,U]);const W=S.useMemo(()=>m?P.find(_t=>_t.id===m)??null:null,[m,P]),q=e.mingSikType??"/",H=S.useMemo(()=>I??new Date,[I]),B=S.useMemo(()=>ZAe(r,H,q,e),[r,H,q,e]),K=S.useMemo(()=>l?B:{dae:null,se:null,wol:null,il:null},[l,B]),V=Ui(_t=>_t.manualHour),Z=Ui(_t=>_t.usePrevDay),G=!e.birthTime||e.birthTime===""||!/^\d{4}$/.test(e.birthTime??""),{solarKo:J,lunarKo:Q}=S.useMemo(()=>XAe(t,n),[t,n]),oe=S.useMemo(()=>GE(J,V,G),[J,V,G]),te=S.useMemo(()=>GE(Q,V,G),[Q,V,G]),z=S.useMemo(()=>eNe(e,q),[e,q]),X=Y5(oe),re=Y5(te),ie=JAe(X,re),fe=S.useMemo(()=>QAe(ie,X,re,oe,te,z,V,G),[ie,X,re,oe,te,z,V,G]),de=S.useMemo(()=>G5(fe,Z),[fe,Z]),pe=S.useMemo(()=>G&&V?V.stem+V.branch:de[3]||"",[V,de,G]),Ne=tNe(V,G),se=S.useMemo(()=>nNe(e,Ne,G),[e,Ne,G]),Se=S.useMemo(()=>G5(se,Z),[se,Z]),ke=l?w:"",he=b==="love"||b==="compat",Be=he&&k==="couple"?W??null:null,Xe=he?k:void 0,Ae=S.useMemo(()=>Ip({natal:Se,tab:ke,chain:K,hourKey:pe}),[Se,ke,K,pe]),{percent:Ie,category:$e}=S.useMemo(()=>rNe(Se),[Se]),tt=S.useMemo(()=>iNe(e),[e]),bt=S.useMemo(()=>aNe(P??[],e.id),[P,e.id]),jt=S.useMemo(()=>O.map(_t=>tt[_t]).filter(_t=>!!_t),[O,tt]),le=S.useMemo(()=>T===""?j.seYearsList:[],[T,j.seYearsList]),Oe=S.useMemo(()=>T===""?j.wolMonthsList:[],[T,j.wolMonthsList]),Ye=S.useMemo(()=>T===""?j.ilDaysList:[],[T,j.ilDaysList]),Ze=S.useMemo(()=>e?RAe({ms:e,natal:Se,chain:K,basis:i,tab:ke,unified:Ae,percent:Ie,category:$e,sections:M}):"",[e,i,a,ke,K,Ae,Ie,$e,Se,b,y,k,Be,h,M,H]),Ot=S.useMemo(()=>!e||!_||!o?"":UAe({ms:e,natal:Se,basis:i,includeTenGod:a,unified:Ae,percent:Ie,category:$e,selectedDaeList:jt,daeList:tt,seYears:le,wolMonths:Oe,ilDays:Ye,sections:M}),[e,_,o,le,jt,tt,Oe,Ye,Se,i,a,Ae,Ie,$e,b,y,Xe,Be,h,d,M]),mt=S.useMemo(()=>KAe(k,W),[k,W]),Ce=_?Ot:Ze,ze=S.useMemo(()=>qAe(h),[h]),nt=S.useMemo(()=>YAe(d),[d]),Tt=S.useMemo(()=>Ce||mt?`${Ce}${mt}
${ze}${nt}`:"",[ze,nt,Ce,mt]),Lt=S.useMemo(()=>oNe(Tt,C),[Tt,C]),Bt=S.useMemo(()=>e?_?HAe({ms:e,natal:Se,basis:i,includeTenGod:a,unified:Ae,percent:Ie,category:$e,selectedDaeList:jt,daeList:tt,seYears:le,wolMonths:Oe,ilDays:Ye,relationMode:Xe,partnerMs:Be,sections:M}):FAe({ms:e,natal:Se,chain:K,basis:i,tab:ke,unified:Ae,percent:Ie,category:$e,relationMode:k,partnerMs:Be,sections:M}):"",[e,_,Se,i,a,Ae,Ie,$e,jt,tt,le,Oe,Ye,b,y,k,Xe,Be,h,d,M,K,ke,H]),Xt=S.useMemo(()=>{const _t=Bt.trim();if(_t)return _t;const Tn=GAe(Ce).trim();return Tn||Ce.trim()},[Bt,Ce]);return{date:I,setDate:U,partnerMs:W,partnerOptions:bt,daeList:tt,tabForLogic:ke,baseText:Ce,basePrompt:Tt,finalText:Lt,infoOnlyText:Xt,allowManualHour:G,activePillars:de}}function q5(e,t=1200){const[n,r]=S.useState(!1),i=!!(e&&e.trim().length>0),a=S.useCallback(async()=>{if(i)try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),t)}catch{r(!1)}},[i,e,t]);return{copied:n,canCopy:i,onCopy:a}}function cNe(e,t){const{copied:n,canCopy:r,onCopy:i}=q5(e),{copied:a,canCopy:o,onCopy:l}=q5(t);return{copiedAll:n,copiedInfo:a,canCopyAll:r,canCopyInfo:o,onCopyAll:i,onCopyInfoOnly:l}}function uNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a=!1}){const o=En(q=>q._rtUserId),u=qTe()??o??null,d=yn(q=>q.loaded),h=yn(q=>q.userId),m=yn(q=>q.plan),b=S.useMemo(()=>Em(!u||!d||h!==u?"FREE":m??null),[u,d,h,m]),y=S.useMemo(()=>y2(b),[b]),k=y.canUseMultiMode,w=y.canUseLuckTabs,_=y.canUseAllPrompts?"full":"locked",T=VTe({msId:e.id,canUseMultiMode:k,canUseLuckTabs:w}),O=lNe({ms:e,natal:t,lunarPillars:n,chain:r,basis:i,includeTenGod:a,canUseMultiMode:k,canUseLuckTabs:w,input:T}),{copiedAll:j,copiedInfo:C,canCopyAll:M,canCopyInfo:P,onCopyAll:I,onCopyInfoOnly:U}=cNe(O.finalText,O.infoOnlyText);function W(q,H){T.setMainCategory(q),T.setSubCategory(H?.[0]?.key??"overview")}return{sections:T.sections,toggleSection:T.toggleSection,friendMode:T.friendMode,setFriendMode:T.setFriendMode,teacherMode:T.teacherMode,setTeacherMode:T.setTeacherMode,date:O.date,setDate:O.setDate,planTier:b,promptAccess:_,canUseMultiMode:k,canUseLuckTabs:w,partnerId:T.partnerId,setPartnerId:T.setPartnerId,partnerMs:O.partnerMs,mainCategory:T.mainCategory,subCategory:T.subCategory,setSubCategory:T.setSubCategory,relationMode:T.relationMode,setRelationMode:T.setRelationMode,activeTab:T.activeTab,setActiveTab:T.setActiveTab,isMultiMode:T.isMultiMode,setIsMultiMode:T.setIsMultiMode,multiTab:T.multiTab,setMultiTab:T.setMultiTab,selectedDaeIdx:T.selectedDaeIdx,handleToggleDae:T.handleToggleDae,rangeControls:T.rangeControls,partnerOptions:O.partnerOptions,daeList:O.daeList,tabForLogic:O.tabForLogic,baseText:O.baseText,basePrompt:O.basePrompt,finalText:O.finalText,infoOnlyText:O.infoOnlyText,copiedAll:j,copiedInfo:C,canCopyAll:_==="full"&&M,canCopyInfo:_==="full"&&P,onCopyAll:I,onCopyInfoOnly:U,handleMainCategoryChange:W,setQuestionDraft:T.setQuestionDraft,questionDraft:T.questionDraft,extraQuestions:T.extraQuestions,setExtraQuestions:T.setExtraQuestions,handleAddQuestion:T.handleAddQuestion,handleRemoveQuestion:T.handleRemoveQuestion,handleClearQuestions:T.handleClearQuestions,allowManualHour:O.allowManualHour,activePillars:O.activePillars}}function dNe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a=!1}){const o=uNe({ms:e,natal:t,chain:n,basis:r,lunarPillars:i,includeTenGod:a}),l=P5[o.mainCategory];if(!e)return g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"  ."});const u=o.promptAccess!=="full",d=u?"    . ":void 0,h=!u&&o.canCopyAll;return g.jsxs("div",{className:"relative rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-2 desk:space-y-3",children:[u?g.jsx("div",{className:"absolute inset-0 z-10 rounded-xl bg-white/70 dark:bg-neutral-900/70 backdrop-blur-[1px] flex items-center justify-center p-4",children:g.jsxs("div",{className:"max-w-sm text-center border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-900 px-4 py-3 shadow-sm",children:[g.jsx("div",{className:"text-lg font-semibold",children:"  "}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:["   /  .",g.jsx("br",{}),"    100   ! (  )"]})]})}):null,g.jsx(PTe,{}),g.jsx(RTe,{sections:o.sections,toggleSection:o.toggleSection}),g.jsx(LTe,{friendMode:o.friendMode,setFriendMode:m=>o.setFriendMode(m.target.checked),teacherMode:o.teacherMode,setTeacherMode:m=>o.setTeacherMode(m.target.checked)}),g.jsx(ITe,{mainCategory:o.mainCategory,subCategory:o.subCategory,mainCategoryMeta:YTe,currentSubList:l,onMainCategoryChange:m=>o.handleMainCategoryChange(m,P5[m]),onSubCategoryChange:o.setSubCategory}),g.jsx($Te,{visible:o.mainCategory==="love"||o.mainCategory==="compat",relationMode:o.relationMode,setRelationMode:o.setRelationMode,partnerId:o.partnerId,setPartnerId:o.setPartnerId,partnerOptions:o.partnerOptions}),g.jsx(BTe,{isMultiMode:o.canUseMultiMode?o.isMultiMode:!1,setIsMultiMode:m=>{!o.canUseMultiMode&&m||o.setIsMultiMode(m)},canUseMultiMode:o.canUseMultiMode}),o.isMultiMode?g.jsx(UTe,{multiTab:o.multiTab,setMultiTab:o.setMultiTab,daeList:o.daeList.map(m=>({gz:m.gz,age:m.age,startYear:m.startYear,endYear:m.endYear})),selectedDaeIdx:o.selectedDaeIdx,onToggleDae:o.handleToggleDae,seStartYear:o.rangeControls.seStartYear,seEndYear:o.rangeControls.seEndYear,onSeStartChange:o.rangeControls.onSeStartChange,onSeEndChange:o.rangeControls.onSeEndChange,onSeStartBlur:o.rangeControls.onSeStartBlur,onSeEndBlur:o.rangeControls.onSeEndBlur,seYearsCount:o.rangeControls.seYearsCount,wolStartDate:o.rangeControls.wolStartYM,wolEndDate:o.rangeControls.wolEndYM,onWolStartChange:o.rangeControls.onWolStartChange,onWolEndChange:o.rangeControls.onWolEndChange,onWolStartBlur:o.rangeControls.onWolStartBlur,onWolEndBlur:o.rangeControls.onWolEndBlur,wolMonthsCount:o.rangeControls.wolMonthsCount,ilStartDate:o.rangeControls.ilStartDate,ilEndDate:o.rangeControls.ilEndDate,onIlStartChange:o.rangeControls.onIlStartChange,onIlEndChange:o.rangeControls.onIlEndChange,onIlStartBlur:o.rangeControls.onIlStartBlur,onIlEndBlur:o.rangeControls.onIlEndBlur,ilDaysCount:o.rangeControls.ilDaysCount}):g.jsx(zTe,{tabs:GTe,activeTab:o.tabForLogic,setActiveTab:m=>{!o.canUseLuckTabs&&m!==""||o.setActiveTab(m)},date:o.date,setDate:o.setDate,canUseLuckTabs:o.canUseLuckTabs}),g.jsx(FTe,{questionDraft:o.questionDraft,onChangeDraft:m=>o.setQuestionDraft(m.target.value),onAddQuestion:o.handleAddQuestion,extraQuestions:o.extraQuestions,onClearAll:o.handleClearQuestions,onRemoveQuestion:o.handleRemoveQuestion,locked:u,lockTitle:d}),g.jsx(HTe,{value:o.finalText,lockSelection:u}),g.jsx("div",{className:"flex justify-end",children:g.jsx("div",{className:"flex gap-2 w-full desk:w-auto",children:g.jsx("button",{type:"button",onClick:o.onCopyAll,disabled:!h,title:h?void 0:d,className:["w-full desk:w-auto px-3 py-1 rounded-md text-xs whitespace-nowrap",h?"cursor-pointer":"cursor-not-allowed opacity-50",o.copiedAll?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"].join(" "),children:o.copiedAll?"":`  ${h?"":" "}`})})})]})}function fNe(){const[e,t]=S.useState(null),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o]=S.useState(()=>typeof window>"u"?!1:window.location.pathname.startsWith("/admin"));return{userId:e,setUserId:t,authChecked:n,setAuthChecked:r,isLoggedIn:i,setIsLoggedIn:a,adminMode:o}}function hNe(){const e=En(r=>r.loading),t=un(r=>r.loaded),n=yn(r=>r.loaded);return{loading:e,settingsLoaded:t,entLoaded:n}}const K5="app_session_started_at_ms",mNe=7200*1e3;function pNe(){if(typeof window>"u")return null;try{return window.sessionStorage}catch{return null}}function gNe(){const e=pNe();if(!e)return Date.now();const t=e.getItem(K5),n=t?Number(t):NaN;if(!Number.isFinite(n)||n<=0){const r=Date.now();try{e.setItem(K5,String(r))}catch{}return r}return n}function bNe(e=Date.now()){const t=gNe();return Math.max(0,e-t)}function yNe(e,t=Date.now()){return bNe(t)>=e}async function vNe(e,t){const{data:n,error:r}=await De.from("user_settings_kv").select("value").eq("user_id",e).eq("setting_key",t).maybeSingle();if(r)throw r;return n?.value??null}async function xNe(e,t,n){const{error:r}=await De.from("user_settings_kv").upsert({user_id:e,setting_key:t,value:n},{onConflict:"user_id,setting_key"});if(r)throw r}const wNe=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function Wd(e){if(e===null)return"null";if(e===void 0)return"undefined";const t=typeof e;return t==="string"?JSON.stringify(e):t==="number"||t==="boolean"?String(e):Array.isArray(e)?`[${e.map(Wd).join(",")}]`:wNe(e)?`{${Object.keys(e).sort().map(i=>`${JSON.stringify(i)}:${Wd(e[i])}`).join(",")}}`:e instanceof Date?`{"$date":${JSON.stringify(e.toISOString())}}`:JSON.stringify(String(e))}function _Ne(e,t){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=null,e(...r)},t)}}function SNe(e,t){const n=t.debounceMs??400;let r=!1,i=null,a=Wd(t.select(t.store.getState()));const o=_Ne(async m=>{try{await xNe(e,t.dbKey,m),a=Wd(m)}catch(b){console.error(`[settings] save failed key=${t.dbKey}`,b)}},n),l=m=>{r=!0;try{t.apply(m),a=Wd(m)}finally{r=!1}},u=m=>{t.validate&&!t.validate(m)||l(m)},d=async()=>{const m=await vNe(e,t.dbKey);m!==null&&u(m)};i=t.store.subscribe(m=>{if(r)return;const b=t.select(m);Wd(b)!==a&&o(b)});const h=()=>{i&&i(),i=null};return{dbKey:t.dbKey,loadFromDb:d,applyRemote:u,stop:h}}function kNe(e){if(typeof e!="object"||e===null)return!1;const t=e;return["twelveUnseong","twelveShinsal","shinsal","nabeum"].every(r=>typeof t[r]=="boolean")}function Nk(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ENe(e){S.useEffect(()=>{if(!e)return;const t=[];t.push(SNe(e,{dbKey:"promptCopy.sections",store:Mv,select:o=>o.sections,apply:o=>Mv.setState({sections:o}),validate:kNe,debounceMs:250})),Promise.all(t.map(o=>o.loadFromDb())).catch(o=>{console.error("[settings] initial load failed",o)});const n=[{table:"user_settings_kv",filterByUserId:!0}],r=new Map,i=(o,l,u)=>{const d=r.get(o);d&&window.clearTimeout(d);const h=window.setTimeout(()=>{r.delete(o),u()},l);r.set(o,h)},a=De.channel(`app-sync:${e}`);for(const o of n)a.on("postgres_changes",{event:"*",schema:"public",table:o.table,...o.filterByUserId?{filter:`user_id=eq.${e}`}:{}},l=>{if(yNe(mNe)){window.location.reload();return}if(o.table==="user_settings_kv"){if(!Nk(l))return;const u=l.new,d=l.old,h=w=>Nk(w)&&typeof w.setting_key=="string"?w.setting_key:null,m=w=>Nk(w)?w.value:null,b=h(u)??h(d);if(!b)return;const y=t.find(w=>w.dbKey===b);if(!y)return;const k=typeof l.eventType=="string"?l.eventType:"";if(k==="INSERT"||k==="UPDATE"){y.applyRemote(m(u));return}y.loadFromDb();return}if(o.onChange){const u=typeof o.debounceMs=="number"?o.debounceMs:0;u>0?i(o.table,u,()=>o.onChange?.(l)):o.onChange(l)}});return a.subscribe(),()=>{for(const o of t)o.stop();for(const[,o]of r)window.clearTimeout(o);r.clear(),De.removeChannel(a)}},[e])}function jNe({setUserId:e,setIsLoggedIn:t,setAuthChecked:n}){S.useEffect(()=>{const r=De;let i=!1,a=null;const o=h=>{const m=h?.user?.id??null;t(!!h),e(m)},l=h=>{o(h),h&&O6(Date.now()),i||(i=!0,n(!0))};(async()=>{const{data:h,error:m}=await r.auth.getSession();if(m){l(null);return}if(h.session){l(h.session);return}a=window.setTimeout(()=>l(null),1200)})();const{data:{subscription:d}}=r.auth.onAuthStateChange((h,m)=>{a!==null&&(window.clearTimeout(a),a=null),l(m),m||En.getState().stopRealtime()});return()=>{a!==null&&window.clearTimeout(a),d.unsubscribe()}},[n,t,e])}function TNe(e){jNe({setUserId:e.setUserId,setIsLoggedIn:e.setIsLoggedIn,setAuthChecked:e.setAuthChecked}),ENe(e.userId)}function ANe(e){const[t,n]=S.useState(()=>e.length>0?e[0].id:""),[r,i]=S.useState(!1),[a,o]=S.useState(!1),[l,u]=S.useState(null),[d,h]=S.useState(!0),[m,b]=S.useState(!1),[y,k]=S.useState(!1);return{currentId:t,setCurrentId:n,wizardOpen:r,setWizardOpen:i,showSidebar:a,setShowSidebar:o,editing:l,setEditing:u,showToday:d,setShowToday:h,showCouple:m,setShowCouple:b,openCustom:y,setOpenCustom:k}}function NNe(e){const t=Jr(i=>i.date),n=Jr(i=>i.rule),r=Du(e);return S.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const i=dx(r,t),a=i>=0?r[i]?.gz??null:null,o=ct(t),l=At(t),u=ht(t,n);return{dae:a,se:o,wol:l,il:u}},[e,r,t,n])}const ONe=e=>typeof e=="string"&&e.length>=2,CNe=e=>Array.isArray(e)&&e.length===4&&e.every(ONe);function MNe({list:e,currentId:t,settings:n,emptyMs:r}){const i=S.useMemo(()=>e.find(b=>b.id===t)??e[0],[e,t]),a=e.length>0&&!!i&&typeof i.birthDay=="string",o=a?i:r,l=S.useMemo(()=>JA(o),[o]),u=NNe(o),d=yn(b=>b.canAddMyeongsik(e.length).ok),h=n.sinsalBase===""?"day":"year",m=n.sinsalBase===""?"day":"year";return{current:i,hasCurrent:a,msForHooks:o,natal:l,chain:u,isValidPillars:CNe,canAdd:d,voidBasis:h,samjaeBasis:m}}function DNe({canAdd:e,hasCurrent:t,current:n,isLoggedIn:r,setWizardOpen:i,setOpenCustom:a,setShowSidebar:o,setShowToday:l,setShowCouple:u,setCurrentId:d,setEditing:h}){const{settings:m,saveToServer:b,loaded:y}=un();S.useEffect(()=>{!r||!y||b()},[r,y,m,b]);const k=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}i(!0)},[e,i]),w=S.useCallback(()=>{if(!e){Bn.error("   1   .");return}a(!0)},[e,a]),_=S.useCallback(M=>{d(M.id),o(!1),l(!1),u(!1);const P=new Date;P.setHours(12,0,0,0),Jr.getState().setDate(P),t&&n?.id===M.id&&(l(!1),u(!1),o(!1))},[n,t,d,o,l,u]),T=S.useCallback(M=>{h(M),d(M.id),o(!1),l(!1),u(!1)},[h,d,o,l,u]),O=S.useCallback(()=>{const M=En.getState().list[0]?.id??"";d(M),l(!0),u(!1)},[d,l,u]),j=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1),requestAnimationFrame(()=>i(!1))},[d,l,u,o,i]),C=S.useCallback(M=>{d(M.id),l(!1),u(!1),o(!1)},[d,l,u,o]);return{openAdd:k,openCustomModal:w,handleSidebarView:_,handleSidebarEdit:T,handleSidebarDeleteView:O,handleWizardSave:j,handleCustomSave:C}}function PNe(){return g.jsx("div",{className:"pt-16 pb-24",children:g.jsxs("div",{className:"max-w-[640px] mx-auto px-4",children:[g.jsx("div",{className:"flex items-center justify-between gap-3 mb-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(c4,{className:"w-5 h-5 text-neutral-700 dark:text-neutral-200"}),g.jsx("h2",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"  "})]})}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.   ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.  ",g.jsx("b",{children:""})," ",g.jsx("b",{children:""}),"   .   ,    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:"*"}),"   ",g.jsx("b",{children:" "})," ",g.jsx("b",{children:"8*"}),"  ",g.jsx("b",{children:"    "}),"      ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:" "}),"     ."]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsxs("p",{children:["A.    . ",g.jsx("b",{children:"*"}),", ",g.jsx("b",{children:"8*"}),"    ."]}),g.jsxs("p",{className:"mt-2",children:[" ",g.jsx("b",{children:""})," (  8   -  )   ."]}),g.jsxs("p",{className:"mt-2",children:["(    ,    ",g.jsx("b",{children:" "})," .)"]}),g.jsx("p",{className:"mt-2",children:" .    .    ,   ( )     ."})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.     ."}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.     .         ,       ."}),g.jsx("p",{className:"mt-2",children:"    ,      ."}),g.jsxs("p",{className:"mt-2",children:["(   ",g.jsx("b",{children:" "}),"  ^^)",g.jsx("br",{}),g.jsx("a",{href:"https://5seasons.co.kr/",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"   !"})})]})]})]}),g.jsxs("details",{className:"rounded-xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900/40",children:[g.jsx("summary",{className:"text-sm desk:text-base cursor-pointer select-none font-semibold text-neutral-900 dark:text-neutral-100",children:"Q.  ''   ?"}),g.jsxs("div",{className:"mt-3 text-xs desk:text-sm leading-relaxed text-neutral-700 dark:text-neutral-200",children:[g.jsx("p",{children:"A.      ."}),g.jsx("p",{className:"mt-2",children:"          ^^"}),g.jsx("p",{className:"mt-2",children:g.jsx("a",{href:"https://yavares.tistory.com/345",target:"_blank",children:g.jsx("ins",{className:"text-amber-500",children:"  "})})})]})]})]})]})})}const NH="https://t1.daumcdn.net/kas/static/ba.min.js",RNe="//t1.daumcdn.net/kas/static/ba.min.js";let vm=null,xm=null;function OH(){return typeof window<"u"&&typeof document<"u"}function W5(e){return typeof e=="object"&&e!==null}function CH(){if(!OH())return!1;const e=window;if(!W5(e))return!1;const t=e.adfit;return W5(t)?typeof t.destroy=="function":!1}function MH(){return Array.from(document.querySelectorAll(`script[src="${NH}"], script[src="${RNe}"]`))}function DH(e){return e.getAttribute("data-adfit-scan")==="1"}function LNe(){const t=MH().filter(n=>!DH(n));if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode?.removeChild(r)}}function V5(){return document.body??document.head??document.documentElement}function Ok(e,t){return new Promise((n,r)=>{let i=!1;const a=()=>{e.removeEventListener("load",u),e.removeEventListener("error",d)},o=()=>{i||(i=!0,a(),n())},l=()=>{i||(i=!0,a(),r(new Error("AdFit script load failed")))},u=()=>o(),d=()=>l();e.addEventListener("load",u),e.addEventListener("error",d),window.setTimeout(()=>{CH(),o()},t)})}function Z5(e){const t=document.createElement("script");return t.async=!0,t.type="text/javascript",t.charset="utf-8",t.src=NH,e?t.setAttribute("data-adfit-scan","1"):t.setAttribute("data-adfit-managed","1"),t}function YE(e){return OH()?(e?.mode??"boot")==="boot"?vm||(vm=(async()=>{if(LNe(),CH())return{inserted:!1};const r=MH().filter(a=>!DH(a))[0];if(r)return await Ok(r,2500),{inserted:!1};const i=Z5(!1);return V5().appendChild(i),await Ok(i,4e3),{inserted:!0}})().finally(()=>{vm=null}),vm):xm||(xm=(async()=>{const n=Z5(!0);V5().appendChild(n);try{return await Ok(n,4e3),{inserted:!0}}finally{n.parentNode?.removeChild(n)}})().finally(()=>{xm=null}),xm):Promise.resolve({inserted:!1})}function PH({enabled:e}){return S.useEffect(()=>{e&&YE({mode:"boot"})},[e]),null}function X5(e){return typeof e=="object"&&e!==null}function INe(e){const t=window;if(!X5(t))return;const n=t.adfit;if(!X5(n))return;const r=n.destroy;if(typeof r=="function")try{r.call(n,e)}catch{}}function bu({adUnit:e,width:t,height:n,enabled:r=!0,isVisible:i=!0,className:a,wrapperStyle:o,reserveSpace:l=!0}){const u=S.useRef(!1),d=S.useRef(!1),h=S.useMemo(()=>({...l?{width:"100%",minHeight:n,display:"flex",justifyContent:"center",alignItems:"flex-start"}:{width:"100%"},...o}),[n,l,o]);return S.useEffect(()=>{if(!r||u.current)return;u.current=!0;let m=!1;return(async()=>{try{if(await YE({mode:"boot"}),m)return}catch{}})(),()=>{m=!0}},[r]),S.useEffect(()=>{if(!r||!i||d.current)return;d.current=!0;let m=!1;return(async()=>{try{if(await YE({mode:"scan"}),m)return}catch{}})(),()=>{m=!0}},[r,i]),S.useEffect(()=>()=>{INe(e),u.current=!1,d.current=!1},[e]),r?g.jsx("div",{className:a,style:h,children:g.jsx("div",{style:l?{width:t,height:n}:void 0,children:g.jsx("ins",{className:"kakao_ad_area",style:{display:"none"},"data-ad-unit":e,"data-ad-width":String(t),"data-ad-height":String(n)})})}):null}function RH({enabled:e,adUnit:t,width:n,height:r,showAfterScrollY:i=180,rightPx:a=16,topPx:o=120,breakpointClassName:l="hidden desk:block"}){const[u,d]=S.useState(!1),[h,m]=S.useState(!1);return S.useEffect(()=>{if(!e){d(!1),m(!1);return}m(!0);let b=0;const y=()=>{b||(b=window.requestAnimationFrame(()=>{b=0;const k=window.scrollY||0;d(k>=i)}))};return y(),window.addEventListener("scroll",y,{passive:!0}),()=>{b&&window.cancelAnimationFrame(b),window.removeEventListener("scroll",y)}},[e,i]),e?g.jsx("div",{className:l,style:{position:"fixed",right:a,top:o,zIndex:60,pointerEvents:"none",visibility:u?"visible":"hidden",opacity:u?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:u?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx(bu,{enabled:h,isVisible:u,adUnit:t,width:n,height:r,wrapperStyle:{display:"flex",justifyContent:"center"}})})})}):null}function LH(){const[e,t]=S.useState(!1),[n,r]=S.useState(!1),[i,a]=S.useState(!1),[o,l]=S.useState(!1),[u,d]=S.useState(!1);S.useEffect(()=>{document.title=" - //";const y=window.setTimeout(()=>t(!0),50),k=window.setTimeout(()=>r(!0),250),w=window.setTimeout(()=>a(!0),450);return()=>{window.clearTimeout(y),window.clearTimeout(k),window.clearTimeout(w)}},[]);const h=()=>u?!0:(ma.error(`   
  .`),!1),m=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await De.auth.signInWithOAuth({provider:"google",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Google Login Error:",w),ma.error("   .");return}if(!k?.url){ma.error(" URL  .");return}window.location.assign(k.url)},b=async()=>{if(!h())return;const y=`${window.location.origin}/auth/callback`;console.log("[oauth] origin =",window.location.origin),console.log("[oauth] redirectTo =",y);const{data:k,error:w}=await De.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:y,skipBrowserRedirect:!0}});if(console.log("[oauth] authorize url =",k?.url),w){console.error("Kakao Login Error:",w),ma.error("   .");return}if(!k?.url){ma.error(" URL  .");return}window.location.assign(k.url)};return g.jsxs("main",{className:`relative py-6 max-h-[70vh] overflow-auto bg-neutral-950 text-white transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("header",{className:`transform transition-all duration-500 mb-8 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} text-center max-w-[680px]`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:""}),g.jsxs("p",{className:"text-sm text-neutral-300 leading-relaxed",children:["      /       .",g.jsx("br",{}),"   /     "]})]}),g.jsxs("section",{className:`w-full max-w-sm mx-auto rounded-2xl bg-neutral-900 p-4 shadow-xl border border-neutral-800 transition-all duration-500 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,"aria-label":"",children:[g.jsx("h2",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-5 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"      "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:u,onChange:()=>d(!u),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>l(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("button",{type:"button",onClick:m,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all 
              ${u?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]}),g.jsxs("button",{type:"button",onClick:b,disabled:!u,"aria-disabled":!u,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all
              ${u?"bg-[#FEE500] text-black hover:brightness-95 active:scale-[0.98] cursor-pointer":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"/icons/KakaoTalk_logo.png",alt:"KakaoTalk",className:"h-5"}),g.jsx("span",{children:" "})]})]}),g.jsxs("div",{className:"mt-6 border-t border-neutral-800 pt-4 text-xs text-neutral-400 leading-relaxed",children:[g.jsx("p",{className:"font-semibold text-neutral-300 mb-2",children:"    "}),g.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[g.jsx("li",{children:" /  "}),g.jsx("li",{children:"    "}),g.jsx("li",{children:"/ (  )"})]}),g.jsx("p",{className:"mt-3 text-[11px] text-neutral-500",children:": unique950318@gmail.com   "})]})]}),g.jsx(P$,{position:"top-center",toastOptions:{duration:2e3}}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:y=>y.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsxs("p",{className:"mb-2",children:["   ,  (,  )",g.jsx("br",{}),"       ( ,  )"]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"      ",g.jsx("br",{}),"      "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsxs("p",{className:"mb-2",children:["     ",g.jsx("br",{}),"           "]}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>l(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition cursor-pointer",children:""})]})})]})}function $Ne(e){switch(e){case"PERSIST_SAVE":return"    !";case"ADD_LIMIT":return"    !";case"HEADER":return"";default:return""}}function BNe(){const e=ks(i=>i.open),t=ks(i=>i.reason),n=ks(i=>i.close),r=S.useMemo(()=>$Ne(t),[t]);return S.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&n()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,n]),S.useEffect(()=>{const{data:i}=De.auth.onAuthStateChange((a,o)=>{o?.user&&(yn.getState().loadFromServer(),un.getState().loadFromServer(),En.getState().loadFromServer(),ks.getState().close())});return()=>i.subscription.unsubscribe()},[]),e?g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center p-4",onClick:n,role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"w-full max-w-[520px] rounded-2xl bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-800 shadow-xl overflow-hidden",onClick:i=>i.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:r}),g.jsx("button",{type:"button",onClick:n,className:`w-8 h-8 rounded-full flex items-center justify-center
                       bg-neutral-100 hover:bg-neutral-200
                       dark:bg-neutral-800 dark:hover:bg-neutral-700
                       text-neutral-700 dark:text-neutral-200 cursor-pointer`,"aria-label":"",title:"",children:""})]}),g.jsx("div",{className:"p-4",children:g.jsx(LH,{})})]})}):null}function zNe(){const e=ks(t=>t.openWith);return g.jsx("div",{className:"max-w-[640px] mx-auto px-3",children:g.jsxs("div",{className:`rounded-xl border border-amber-300/60 bg-amber-50 text-amber-950
                      dark:border-amber-500/30 dark:bg-amber-950/30 dark:text-amber-100
                      shadow-sm px-4 py-3 flex items-center justify-between gap-3`,children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-sm font-semibold truncate",children:"   "}),g.jsx("div",{className:"text-xs opacity-90 mt-0.5 leading-relaxed",children:" /   ."})]}),g.jsxs("button",{type:"button",onClick:()=>e("PERSIST_SAVE"),className:`shrink-0 inline-flex items-center gap-1.5
                     px-3 py-2 rounded-lg text-xs font-semibold
                     bg-amber-500 hover:bg-amber-600 text-white
                     border border-amber-600/30
                     cursor-pointer`,"aria-label":"",title:"",children:[g.jsx(u4,{size:16}),""]})]})})}const QA="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";let wm=null;function eN(){return typeof window<"u"&&typeof document<"u"}function IH(){return eN()?Array.from(document.querySelectorAll('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')):[]}function $H(e,t){const n=`client=${encodeURIComponent(t)}`;return e.includes(n)||e.includes(`client=${t}`)}function J5(e){return IH().some(n=>{const r=n.getAttribute("src")??"";return r.includes(QA)&&$H(r,e)})}function Ck(e){const t=IH().filter(n=>{const r=n.getAttribute("src")??"";return r.includes(QA)&&$H(r,e)});if(!(t.length<=1))for(let n=1;n<t.length;n+=1){const r=t[n];r.parentNode&&r.parentNode.removeChild(r)}}function UNe(e){const t=document.createElement("script");return t.async=!0,t.src=`${QA}?client=${encodeURIComponent(e)}`,t.crossOrigin="anonymous",t}function FNe(e){return new Promise((t,n)=>{const r=()=>t(),i=()=>n(new Error("AdSense script failed to load"));e.addEventListener("load",r,{once:!0}),e.addEventListener("error",i,{once:!0})})}function HNe(e){return typeof e!="object"||e===null||!("push"in e)?!1:typeof e.push=="function"}async function Q5(e){if(eN()){if(J5(e)){Ck(e);return}if(wm)return wm;wm=(async()=>{if(J5(e)){Ck(e);return}const t=UNe(e);document.head.appendChild(t),await FNe(t),Ck(e)})();try{await wm}finally{wm=null}}}function GNe(e={}){if(!eN())return;const t=window.adsbygoogle;if(Array.isArray(t)){t.push(e);return}if(HNe(t)){t.push(e);return}const n=[];n.push(e),window.adsbygoogle=n}function YNe({enabled:e,isVisible:t,clientId:n,slotId:r,width:i,height:a,testMode:o=!1}){const l=S.useRef(!1),u=S.useRef(null);return S.useEffect(()=>{l.current=!1},[n,r,i,a]),S.useEffect(()=>{e&&Q5(n).catch(()=>{})},[e,n]),S.useEffect(()=>{if(!e||!t||l.current)return;let d=!0;return(async()=>{try{if(await Promise.resolve(),!d||(await Q5(n),!d))return;GNe({}),l.current=!0}catch{console.log()}})(),()=>{d=!1}},[e,t,n]),e?g.jsx("ins",{ref:u,className:"adsbygoogle",style:{display:"inline-block",width:i,height:a},"data-ad-client":n,"data-ad-slot":r,...o?{"data-adtest":"on"}:{}}):null}function BH({enabled:e,clientId:t,slotId:n,width:r,height:i,showAfterScrollY:a=180,side:o="left",sidePx:l=16,topPx:u=120,breakpointClassName:d="hidden desk:block"}){const[h,m]=S.useState(!1),[b,y]=S.useState(!1);return S.useEffect(()=>{if(!e){m(!1),y(!1);return}y(!0);let k=0;const w=()=>{k||(k=window.requestAnimationFrame(()=>{k=0;const _=window.scrollY||0;m(_>=a)}))};return w(),window.addEventListener("scroll",w,{passive:!0}),()=>{k&&window.cancelAnimationFrame(k),window.removeEventListener("scroll",w)}},[e,a]),e?g.jsx("div",{className:d,style:{position:"fixed",...o==="left"?{left:l}:{right:l},top:u,zIndex:60,pointerEvents:"none",visibility:h?"visible":"hidden",opacity:h?1:0,transition:"opacity 150ms ease"},children:g.jsx("div",{style:{pointerEvents:h?"auto":"none"},children:g.jsx("div",{style:{borderRadius:12,background:"rgba(0,0,0,0.04)",backdropFilter:"blur(6px)",padding:8},children:g.jsx("div",{style:{display:"flex",justifyContent:"center"},children:g.jsx(YNe,{enabled:b,isVisible:h,clientId:t,slotId:n,width:r,height:i})})})})}):null}const zH="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";function e$(e){return typeof e=="object"&&e!==null&&"push"in e&&typeof e.push=="function"}function qNe(){return document.querySelector(`script[src^="${zH}"]`)}async function t$(e){qNe()||await new Promise((n,r)=>{const i=document.createElement("script");i.async=!0,i.src=`${zH}?client=${encodeURIComponent(e)}`,i.crossOrigin="anonymous",i.onload=()=>n(),i.onerror=()=>r(new Error("Failed to load adsbygoogle.js")),document.head.appendChild(i)})}function KNe(){const e=window.adsbygoogle;if(e$(e)){e.push({});return}window.adsbygoogle||(window.adsbygoogle=[]);const t=window.adsbygoogle;e$(t)&&t.push({})}function WNe({enabled:e,clientId:t,slotId:n,heightPx:r=100,maxWidthPx:i=750,marginTopPx:a=0,fullWidthResponsive:o=!0,pushOnVisible:l=!0,testMode:u=!1,className:d,style:h}){const m=S.useRef(null),b=S.useRef(!1),y=S.useMemo(()=>`adsense_banner:${t}:${n}`,[t,n]),[k,w]=S.useState(!l);return S.useEffect(()=>{b.current=!1},[t,n]),S.useEffect(()=>{e&&t$(t).catch(()=>{})},[e,t]),S.useEffect(()=>{if(!e||!l)return;const _=m.current;if(!_)return;const T=new IntersectionObserver(O=>{const j=O[0];j&&j.isIntersecting&&w(!0)},{root:null,threshold:.05});return T.observe(_),()=>T.disconnect()},[e,l]),S.useEffect(()=>{if(!e||!k||b.current)return;let _=!0;return(async()=>{try{if(await t$(t),!_||(await Promise.resolve(),!_))return;KNe(),b.current=!0}catch{}})(),()=>{_=!1}},[e,k,t]),e?g.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:a,...h},className:d,children:g.jsx("ins",{ref:m,className:"adsbygoogle",style:{display:"block",width:"100%",height:`${r}px`,maxWidth:`${i}px`},"data-ad-client":t,"data-ad-slot":n,"data-full-width-responsive":o?"true":"false",...u?{"data-adtest":"on"}:{}},y)}):null}const VNe="DAN-GW4jrUdfiXklZ12U",ZNe="DAN-CeRuC0yKzSAs5Gju",XNe="DAN-G16gewnPhZou1D9y",JNe="DAN-rdKe9ZODmrZR4hho",QNe="DAN-INfSKh1pW2cEtWNu",eOe={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"/",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function $b(){const e=Fr(),t=tc(),n=fNe();TNe(n);const r=hNe(),i=m=>{if(typeof window>"u")return null;try{return window.sessionStorage.getItem(m)}catch{return null}},a=(m,b)=>{if(!(typeof window>"u"))try{window.sessionStorage.setItem(m,b)}catch{}},[o,l]=S.useState(!1),[u,d]=S.useState(()=>typeof window>"u"?!1:i("app_loading_shown_v1")==="1"),h=!n.authChecked||!r.entLoaded||!r.settingsLoaded;return S.useEffect(()=>{h||l(!0)},[h]),S.useEffect(()=>{n.authChecked&&(n.isLoggedIn||e.pathname==="/"||e.pathname==="/result"||t("/",{replace:!0}))},[n.authChecked,n.isLoggedIn,e.pathname,t]),S.useEffect(()=>{!u&&!o&&h&&(d(!0),a("app_loading_shown_v1","1"))},[u,o,h]),n.authChecked&&n.isLoggedIn&&n.adminMode?g.jsx(nH,{}):!o&&h&&!u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500 animate-pulse",children:n.authChecked?"  ...":"  ..."})}):g.jsx(tOe,{isLoggedIn:n.isLoggedIn})}function tOe({isLoggedIn:e}){const t=Fr(),n=tc(),{list:r}=En(),i=un(I=>I.settings),a=ANe(r),o=MNe({list:r,currentId:a.currentId,settings:i,emptyMs:eOe}),l=DNe({canAdd:o.canAdd,hasCurrent:o.hasCurrent,current:o.current,isLoggedIn:e,setWizardOpen:a.setWizardOpen,setOpenCustom:a.setOpenCustom,setShowSidebar:a.setShowSidebar,setShowToday:a.setShowToday,setShowCouple:a.setShowCouple,setCurrentId:a.setCurrentId,setEditing:a.setEditing}),[u,d]=S.useState(!1),[h,m]=S.useState(0);S.useEffect(()=>{a.editing&&d(!1)},[a.editing]),S.useEffect(()=>{const I=t.pathname;if(I==="/faq"){d(!0),a.setShowCouple(!1),a.setShowToday(!1);return}if(I==="/couple"){d(!1),a.setShowCouple(!0),a.setShowToday(!1);return}if(I==="/result"){d(!1),a.setShowCouple(!1),a.setShowToday(!1);return}d(!1),a.setShowCouple(!1),a.setShowToday(!0)},[a,t.pathname,a.setShowCouple,a.setShowToday]);const b=yn(I=>I.shouldShowAdsNow()),y=o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,k=a.showToday||!o.hasCurrent&&!a.showCouple&&!u&&!a.wizardOpen&&!a.editing,w=!e&&o.hasCurrent&&y,_=!e&&!y,[T,O]=S.useState(!1),j=(...I)=>{d(!1),a.setShowToday(!1),a.setShowCouple(!1),n("/result",{replace:!1}),l.handleSidebarView(...I)},C=()=>{a.setOpenCustom(!1),m(I=>I+1)},M=I=>{d(!1),l.handleCustomSave(I)},P=I=>{d(!1),l.handleWizardSave(I),n("/result",{replace:!1})};return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(PH,{enabled:b}),b&&y&&g.jsx(BH,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(RH,{enabled:b,adUnit:QNe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsx(gfe,{isLoggedIn:e,onOpenSidebar:()=>a.setShowSidebar(!0),onAddNew:l.openAdd,onOpenCustom:l.openCustomModal}),g.jsx(BNe,{}),T&&g.jsxs("div",{className:"fixed inset-0 z-[210] bg-black/70 flex items-center justify-center",children:[g.jsx("div",{className:"w-full max-w-[420px] max-h-[90dvh] overflow-auto rounded-2xl",children:g.jsx(LH,{})}),g.jsx("button",{className:"fixed top-4 right-4 text-white text-2xl",onClick:()=>O(!1),children:""})]}),g.jsx(DTe,{open:a.openCustom,onClose:C,onSave:M},h),g.jsx(P$,{position:"top-center"}),g.jsx(ihe,{open:a.showSidebar,onClose:()=>a.setShowSidebar(!1),onView:j,onAddNew:l.openAdd,onEdit:l.handleSidebarEdit,onDeleteView:l.handleSidebarDeleteView,isLoggedIn:e}),_&&g.jsx("div",{className:"absolute w-full left-0 mt-14 desk:mt-16 text-xs desk:text-base text-amber-500 dark:text-amber-400 text-center",children:" .    ."}),u&&g.jsx(PNe,{}),k&&g.jsx(EX,{}),a.wizardOpen&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(_ie,{onSave:P,onClose:()=>a.setWizardOpen(!1)})})})]}),o.hasCurrent&&!a.showToday&&!a.showCouple&&!u&&g.jsxs("div",{className:"pt-16",children:[w&&g.jsx("div",{children:g.jsx(zNe,{})}),g.jsx("div",{className:"pb-4",children:g.jsx(zse,{data:o.current,hourTable:o.current?.mingSikType??"/"})}),g.jsx(lTe,{ms:o.current}),g.jsx("div",{children:g.jsx(pfe,{data:o.current})}),b&&y&&i.showPromptBox&&g.jsx("div",{className:"max-w-[760px] mx-auto px-3 mt-6 mb-2",children:g.jsx(WNe,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"3868873416",heightPx:100,maxWidthPx:750,marginTopPx:10,fullWidthResponsive:!0,testMode:!1})}),i.showPromptBox&&g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(dNe,{ms:o.current,natal:o.isValidPillars(o.natal)?o.natal:[],chain:o.chain,basis:{voidBasis:o.voidBasis,samjaeBasis:o.samjaeBasis},includeTenGod:!0,lunarPillars:[]})}),b&&y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 pb-6",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(bu,{enabled:!0,adUnit:JNe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(bu,{enabled:!0,adUnit:XNe,width:320,height:50})})]})]}),a.showCouple&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(aTe,{people:r})}),b&&!y&&g.jsxs("div",{className:"max-w-[760px] mx-auto px-3 mt-1 mb-2",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(bu,{enabled:!0,adUnit:ZNe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(bu,{enabled:!0,adUnit:VNe,width:320,height:50})})]}),a.editing&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"overflow-auto bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(vhe,{item:a.editing,onClose:()=>a.setEditing(null)})})}),g.jsx(Efe,{}),g.jsx(oTe,{})]})}function nOe(){const e=Fr(),[t,n]=S.useState(null),[r,i]=S.useState(null);return S.useEffect(()=>{if(e.pathname!=="/impersonate")return;const a=new URLSearchParams(e.search);n(a.get("userId")),i(a.get("myeongsikId"))},[e.pathname,e.search]),g.jsxs("div",{className:"p-4 text-white",children:[g.jsx("div",{className:"text-sm text-neutral-400",children:"Impersonate"}),g.jsxs("div",{className:"mt-2",children:["userId: ",t??"(none)"]}),g.jsxs("div",{className:"mt-1",children:["myeongsikId: ",r??"(none)"]})]})}function rOe(){const e=Fr(),t=tc(),n=S.useRef(!1),[r,i]=S.useState("  ...");return S.useEffect(()=>{(async()=>{try{console.log("[auth-callback] search =",e.search),console.log("[auth-callback] hash =",e.hash);const o=new URLSearchParams(e.search),l=e.hash.startsWith("#")?e.hash.slice(1):e.hash,u=l.indexOf("?"),d=new URLSearchParams(u>=0?l.slice(u+1):l),h=_=>o.get(_)??d.get(_),m=h("error"),b=h("error_description");if(m){i(` : ${decodeURIComponent(b??m)}`);return}const y=h("code");if(!y){const _=h("access_token"),T=h("refresh_token");if(!_||!T){i(" code . (redirectTo/PKCE  )");return}const{error:O}=await De.auth.setSession({access_token:_,refresh_token:T});if(O){i(`  : ${O.message}`);return}t("/",{replace:!0});return}if(n.current)return;n.current=!0;const{data:{session:k}}=await De.auth.getSession();if(k){t("/",{replace:!0});return}const{error:w}=await De.auth.exchangeCodeForSession(y);if(w){const{data:{session:_}}=await De.auth.getSession();if(_){t("/",{replace:!0});return}i(`  : ${w.message}`);return}t("/",{replace:!0})}catch(o){i(o instanceof Error?o.message:"   ")}})()},[e.search,t,e.hash]),g.jsx("main",{className:"min-h-screen flex items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:r})})}function iOe({yinYang:e,changing:t,onClick:n,showChanging:r=!0}){return g.jsxs("button",{type:"button",onClick:n,className:["w-full select-none","rounded-xl px-3 py-2","border border-neutral-200 dark:border-neutral-800","bg-white hover:bg-neutral-50 dark:bg-neutral-900 dark:hover:bg-neutral-800","flex items-center gap-3",n?"cursor-pointer":"cursor-default"].join(" "),title:n?"  (6789)":void 0,children:[g.jsx("div",{className:"flex-1",children:e===1?g.jsx("div",{className:"h-3 rounded bg-neutral-900 dark:bg-neutral-100"}):g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"}),g.jsx("div",{className:"h-3 flex-1 rounded bg-neutral-900 dark:bg-neutral-100"})]})}),r&&g.jsx("div",{className:"w-8 text-right text-sm font-medium text-neutral-700 dark:text-neutral-300",children:t?"":""})]})}function aOe(e){return e===6||e===9}function ew(e){return e===7||e===9?1:0}function UH(e){return e===6?1:e===9?0:ew(e)}function oOe(e){return e===6?7:e===7?8:e===8?9:6}function FH(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t>>>0}function HH(e){let t=e>>>0;return()=>{t+=1831565813;let n=t;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}}function GH(){return new Date().toISOString()}function YH(){const e=Date.now().toString(36),t=Math.floor(Math.random()*1e9).toString(36);return`ich_${e}_${t}`}function qH(e){const t=[];for(let n=0;n<e.length;n+=1)aOe(e[n].value)&&t.push(n+1);return t}function qE(e){const t=()=>e()<.5?2:3,n=t(),r=t(),i=t(),a=n+r+i;return{value:a===6?6:a===7?7:a===8?8:9,source:"coin",coins:[n,r,i]}}function sOe(e){return e?[e.myeongSikId?`id=${e.myeongSikId}`:"",e.pillarsText?`pillars=${e.pillarsText}`:"",e.birthISO?`birth=${e.birthISO}`:"",e.tz?`tz=${e.tz}`:"",e.luck?.daeun?`daeun=${e.luck.daeun}`:"",e.luck?.seun?`seun=${e.luck.seun}`:"",e.luck?.wolun?`wolun=${e.luck.wolun}`:"",e.luck?.ilun?`ilun=${e.luck.ilun}`:""].filter(Boolean).join("|"):""}const tN=["","","","","","","","","",""],nN=["","","","","","","","","","","",""];function ql(e,t){const n=e%t;return n<0?n+t:n}function rN(e){const t=e-1984,n=tN[ql(t,10)],r=nN[ql(t,12)];return`${n}${r}`}function KH(e,t){if(t<1||t>12)throw new Error(`month must be 1..12, got ${t}`);const n=ql(e-1984,10),r=n===0||n===5?2:n===1||n===6?4:n===2||n===7?6:n===3||n===8?8:0,i=t===1?1:t===12?0:t,a=ql(i-2,12),o=ql(r+a,10),l=tN[o],u=nN[i];return`${l}${u}`}function lOe(e){const t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=Date.UTC(1984,0,31),a=Date.UTC(t,n,r),o=Math.floor((a-i)/864e5),l=ql(o,60),u=tN[ql(l,10)],d=nN[ql(l,12)];return`${u}${d}`}function Ya(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function pa(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return null;const n=Number(t[1]),r=Number(t[2])-1,i=Number(t[3]);if(![n,r,i].every(o=>Number.isFinite(o)))return null;const a=new Date(n,r,i,9,0,0,0);return a.getFullYear()!==n||a.getMonth()!==r||a.getDate()!==i?null:a}function WH(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function Cu(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),9,0,0,0)}function iN(e,t){return e.getTime()<=t.getTime()?{start:e,end:t}:{start:t,end:e}}function n$(e,t){return e*100+t}function cOe(e,t){const n=[];let r=e.getFullYear(),i=e.getMonth()+1;const a=n$(t.getFullYear(),t.getMonth()+1);for(;n$(r,i)<=a;)n.push({y:r,m1:i}),i+=1,i===13&&(i=1,r+=1);return n}function uOe(e,t=10){const n=pa(e.startYMD)??Cu(),r=pa(e.endYMD)??Cu(),{start:i,end:a}=iN(n,r),o=i.getFullYear(),l=a.getFullYear(),u=[];for(let d=o;d<=l&&!(u.length>=t);d+=1){const h=new Date(d,5,15,9,0,0,0);u.push({year:d,refDateYMD:Ya(h),seun:rN(d)})}return u}function dOe(e,t=12,n=!1){const r=pa(e.startYMD)??Cu(),i=pa(e.endYMD)??Cu(),{start:a,end:o}=iN(r,i),l=cOe(a,o),u=[];for(const d of l){if(u.length>=t)break;if(n&&d.m1===1)continue;const h=new Date(d.y,d.m1-1,15,9,0,0,0),m=new Date(d.y,d.m1-1,15,12,0,0,0),b=ct(m)||rN(d.y),y=At(m)||KH(d.y,d.m1);u.push({year:d.y,month:d.m1,refDateYMD:Ya(h),seun:b,wolun:y})}return u}function fOe(e,t=7){const n=pa(e.startYMD)??Cu(),r=pa(e.endYMD)??Cu(),{start:i,end:a}=iN(n,r),o=[];let l=new Date(i);for(;l.getTime()<=a.getTime()&&!(o.length>=t);){const u=l.getFullYear(),d=l.getMonth()+1,h=new Date(u,d-1,l.getDate(),12,0,0,0),m=ct(h)||rN(u),b=At(h)||KH(u,d);o.push({dateYMD:Ya(l),seun:m,wolun:b,ilun:lOe(l)}),l=WH(l,1)}return o}function VH(e,t){const n=pa(t.startYMD)??Cu();if(e==="seun")return new Date(n.getFullYear(),5,15,9,0,0,0);if(e==="wolun"){const r=n.getFullYear(),i=n.getMonth()+1;return new Date(r,i-1,15,9,0,0,0)}return new Date(n.getFullYear(),n.getMonth(),n.getDate(),9,0,0,0)}function Mk(e,t){const n=VH(e,t),r=Ya(n);return e==="seun"?{tab:e,baseDateYMD:r,seun:uOe(t,10),wolun:[],ilun:[]}:e==="wolun"?{tab:e,baseDateYMD:r,seun:[],wolun:dOe(t,12,!1),ilun:[]}:{tab:e,baseDateYMD:r,seun:[],wolun:[],ilun:fOe(t,7)}}function ZH(e){return e===7||e===9?1:0}const Ta={:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"111",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"110",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"101",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"100",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"011",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"010",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"001",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]},:{key:"",ko:"",hanja:"",symbolHanja:"",bitsBottomUp:"000",element:"",naJiaUpperTopDown:["","",""],naJiaLowerTopDown:["","",""]}},hOe=[{n:1,ko:"",nameHanja:"",upper:"",lower:""},{n:2,ko:"",nameHanja:"",upper:"",lower:""},{n:3,ko:"",nameHanja:"",upper:"",lower:""},{n:4,ko:"",nameHanja:"",upper:"",lower:""},{n:5,ko:"",nameHanja:"",upper:"",lower:""},{n:6,ko:"",nameHanja:"",upper:"",lower:""},{n:7,ko:"",nameHanja:"",upper:"",lower:""},{n:8,ko:"",nameHanja:"",upper:"",lower:""},{n:9,ko:"",nameHanja:"",upper:"",lower:""},{n:10,ko:"",nameHanja:"",upper:"",lower:""},{n:11,ko:"",nameHanja:"",upper:"",lower:""},{n:12,ko:"",nameHanja:"",upper:"",lower:""},{n:13,ko:"",nameHanja:"",upper:"",lower:""},{n:14,ko:"",nameHanja:"",upper:"",lower:""},{n:15,ko:"",nameHanja:"",upper:"",lower:""},{n:16,ko:"",nameHanja:"",upper:"",lower:""},{n:17,ko:"",nameHanja:"",upper:"",lower:""},{n:18,ko:"",nameHanja:"",upper:"",lower:""},{n:19,ko:"",nameHanja:"",upper:"",lower:""},{n:20,ko:"",nameHanja:"",upper:"",lower:""},{n:21,ko:"",nameHanja:"",upper:"",lower:""},{n:22,ko:"",nameHanja:"",upper:"",lower:""},{n:23,ko:"",nameHanja:"",upper:"",lower:""},{n:24,ko:"",nameHanja:"",upper:"",lower:""},{n:25,ko:"",nameHanja:"",upper:"",lower:""},{n:26,ko:"",nameHanja:"",upper:"",lower:""},{n:27,ko:"",nameHanja:"",upper:"",lower:""},{n:28,ko:"",nameHanja:"",upper:"",lower:""},{n:29,ko:"",nameHanja:"",upper:"",lower:""},{n:30,ko:"",nameHanja:"",upper:"",lower:""},{n:31,ko:"",nameHanja:"",upper:"",lower:""},{n:32,ko:"",nameHanja:"",upper:"",lower:""},{n:33,ko:"",nameHanja:"",upper:"",lower:""},{n:34,ko:"",nameHanja:"",upper:"",lower:""},{n:35,ko:"",nameHanja:"",upper:"",lower:""},{n:36,ko:"",nameHanja:"",upper:"",lower:""},{n:37,ko:"",nameHanja:"",upper:"",lower:""},{n:38,ko:"",nameHanja:"",upper:"",lower:""},{n:39,ko:"",nameHanja:"",upper:"",lower:""},{n:40,ko:"",nameHanja:"",upper:"",lower:""},{n:41,ko:"",nameHanja:"",upper:"",lower:""},{n:42,ko:"",nameHanja:"",upper:"",lower:""},{n:43,ko:"",nameHanja:"",upper:"",lower:""},{n:44,ko:"",nameHanja:"",upper:"",lower:""},{n:45,ko:"",nameHanja:"",upper:"",lower:""},{n:46,ko:"",nameHanja:"",upper:"",lower:""},{n:47,ko:"",nameHanja:"",upper:"",lower:""},{n:48,ko:"",nameHanja:"",upper:"",lower:""},{n:49,ko:"",nameHanja:"",upper:"",lower:""},{n:50,ko:"",nameHanja:"",upper:"",lower:""},{n:51,ko:"",nameHanja:"",upper:"",lower:""},{n:52,ko:"",nameHanja:"",upper:"",lower:""},{n:53,ko:"",nameHanja:"",upper:"",lower:""},{n:54,ko:"",nameHanja:"",upper:"",lower:""},{n:55,ko:"",nameHanja:"",upper:"",lower:""},{n:56,ko:"",nameHanja:"",upper:"",lower:""},{n:57,ko:"",nameHanja:"",upper:"",lower:""},{n:58,ko:"",nameHanja:"",upper:"",lower:""},{n:59,ko:"",nameHanja:"",upper:"",lower:""},{n:60,ko:"",nameHanja:"",upper:"",lower:""},{n:61,ko:"",nameHanja:"",upper:"",lower:""},{n:62,ko:"",nameHanja:"",upper:"",lower:""},{n:63,ko:"",nameHanja:"",upper:"",lower:""},{n:64,ko:"",nameHanja:"",upper:"",lower:""}];function $v(e){const t=Object.keys(Ta);for(const n of t)if(Ta[n].bitsBottomUp===e)return n;return null}function mOe(e,t){return`${Ta[t].bitsBottomUp}${Ta[e].bitsBottomUp}`}const pOe=(()=>{const e={};for(const t of hOe){const n=Ta[t.upper],r=Ta[t.lower],i=mOe(t.upper,t.lower);e[i]={number:t.n,titleKo:t.ko,nameHanja:t.nameHanja,titleHanja:`${n.symbolHanja}${r.symbolHanja}${t.nameHanja}`,upperKo:n.ko,lowerKo:r.ko,upperHanja:n.hanja,lowerHanja:r.hanja,upperSymbolHanja:n.symbolHanja,lowerSymbolHanja:r.symbolHanja,bitsBottomUp:i}}return e})();function aN(e){const t=e.join(""),n=pOe[t];if(n)return n;const r=t.slice(0,3),i=t.slice(3,6),a=$v(r),o=$v(i),l=a?Ta[a]:null,u=o?Ta[o]:null;return{number:void 0,titleKo:"",nameHanja:"",titleHanja:u&&l?`${u.symbolHanja}${l.symbolHanja}`:"",upperKo:u?.ko,lowerKo:l?.ko,upperHanja:u?.hanja,lowerHanja:l?.hanja,upperSymbolHanja:u?.symbolHanja,lowerSymbolHanja:l?.symbolHanja,bitsBottomUp:t}}function KE(e){const t=e.map(n=>ZH(n.value));return aN(t)}const r$={:[1,44,33,12,20,23,35,14],:[29,60,3,63,49,55,36,7],:[52,22,26,41,38,10,61,53],:[51,16,40,32,46,48,28,17],:[57,9,37,42,25,21,27,18],:[30,56,50,64,4,59,6,13],:[2,24,19,11,34,43,5,8],:[58,47,45,31,39,15,62,54]};function gOe(e){return e===0?"pure":e===1?"1":e===2?"2":e===3?"3":e===4?"4":e===5?"5":e===6?"youhun":"guihun"}function bOe(e){return e==="pure"?6:e==="1"?1:e==="2"?2:e==="3"?3:e==="4"?4:e==="5"?5:e==="youhun"?4:3}function yOe(e){return(e+2)%6+1}function vOe(e){return e===""||e===""?"":e===""||e===""?"":e===""||e===""||e===""||e===""?"":e===""||e===""?"":e===""||e===""?"":null}function i$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function a$(e,t){return e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""||e===""&&t===""}function xOe(e,t){return t===e?"":i$(t,e)?"":i$(e,t)?"":a$(t,e)?"":a$(e,t)?"":""}function wOe(e){const t=Object.keys(r$);for(const n of t){const r=r$[n].indexOf(e);if(r>=0)return{palace:n,stage:gOe(r)}}return null}function _Oe(e){const t=e.join(""),n=t.slice(0,3),r=t.slice(3,6),i=$v(n),a=$v(r);if(!i||!a)return[];const o=Ta[i],u=Ta[a].naJiaUpperTopDown,d=o.naJiaLowerTopDown;return[...u,...d]}function WE(e){const t=e.map(k=>ZH(k.value)),n=aN(t),r=typeof n.number=="number"?n.number:null,i=_Oe(t),a=r?wOe(r):null,o=a?.palace??null,l=o?Ta[o].element:null,u=a?.stage??"pure",d=bOe(u),h=yOe(d),m=7-d,b=7-h,y=[];if(i.length===6&&l)for(const k of i){const w=vOe(k);if(!w){y.push("");continue}y.push(xOe(l,w))}return{leftTopDown:y.length?y:[],rightTopDown:i.length?i:[],markers:[{text:"",atLineTopDown:m},{text:"",atLineTopDown:b}],palace:o?{key:o,element:Ta[o].element,stage:u}:void 0}}function Dk(e){const t=HH(FH(e)),n=[];for(let r=0;r<6;r+=1)n.push(qE(t));return n}function Pk(e,t,n,r,i){return{id:YH(),kind:"iching_sixyao",createdAtISO:GH(),question:e,seedTextUsed:t,linesBottomUp:n,changingLines:qH(n),baseBitsBottomUp:n.map(a=>ew(a.value)),changedBitsBottomUp:n.map(a=>UH(a.value)),saju:r??void 0,viewMeta:i}}function SOe(e){const{periodTab:t,seunPayload:n,wolunPayload:r,ilunPayload:i,questionText:a,sajuSeedPart:o,saju:l,viewMeta:u}=e,d=[];return t==="seun"&&n?.seun?.length&&n.seun.forEach(h=>{const m=` ${h.year} (${h.seun}`,b=`${a}::${h.refDateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=Dk(y),w=Pk(a,y,k,l,u);d.push({key:`seun-${h.year}`,title:m,dateYMD:h.refDateYMD,record:w})}),t==="wolun"&&r?.wolun?.length&&r.wolun.forEach(h=>{const m=String(h.month).padStart(2,"0"),b=` ${h.year}-${m} (${h.seun} ${h.wolun}`,y=`${a}::${h.refDateYMD}`,k=o?`${y}::SAJU::${o}`:y,w=Dk(k),_=Pk(a,k,w,l,u);d.push({key:`wolun-${h.year}-${m}`,title:b,dateYMD:h.refDateYMD,record:_})}),t==="ilun"&&i?.ilun?.length&&i.ilun.forEach(h=>{const m=` ${h.dateYMD} (${h.seun} ${h.wolun} ${h.ilun}`,b=`${a}::${h.dateYMD}`,y=o?`${b}::SAJU::${o}`:b,k=Dk(y),w=Pk(a,y,k,l,u);d.push({key:`ilun-${h.dateYMD}`,title:m,dateYMD:h.dateYMD,record:w})}),d}function kOe(e){if(!e)return"  ";const t=[e.name?`: ${e.name}`:"",e.gender?`: ${e.gender}`:"",e.pillarsText?`: ${e.pillarsText}`:""].filter(Boolean);return t.length?t.join(`
`):"  "}function EOe(e,t){if(!e||!e.luck)return e;const{daeun:n,seun:r,wolun:i,ilun:a}=e.luck;return{...e,luck:t==="seun"?{daeun:n,seun:r}:t==="wolun"?{daeun:n,seun:r,wolun:i}:{daeun:n,seun:r,wolun:i,ilun:a}}}function jOe(e){const{selectedCardText:t,ready:n,periodCards:r,finalQuestion:i,question:a,baseBits:o,changedBits:l,changingIndexes:u,lineValues:d,lines:h,saju:m,periodTab:b}=e,y=(i.trim()||a.trim()).trim(),k=y||"( )";if(t&&t.trim())return[` : ${k}`,"",t.trim()].join(`
`);if(!n&&r.length===0)return"";const w=o.join(""),_=l.join(""),T=u.length?u.join(", "):"",O=d.join(", "),j=KE(h),C=aN(l),M=typeof j.number=="number"?String(j.number):"",P=j.titleKo||"",I=j.titleHanja||"?",U=j.nameHanja||"?",W=j.upperKo&&j.lowerKo?`${j.upperKo}/${j.lowerKo}`:"",q=j.upperHanja&&j.lowerHanja?`${j.upperHanja}/${j.lowerHanja}`:"",H=typeof C.number=="number"?String(C.number):"",B=C.upperKo&&C.lowerKo?`${C.upperKo}/${C.lowerKo}`:"",K=C.upperHanja&&C.lowerHanja?`${C.upperHanja}/${C.lowerHanja}`:"",V=WE(h),Z=V.leftTopDown.length?V.leftTopDown.join(" "):"()",G=V.rightTopDown.length?V.rightTopDown.join(" "):"()",J=V.markers.length?V.markers.map(re=>`${re.text}${re.atLineTopDown}`).join(", "):"()",Q=kOe(m),oe=r.length>0?[" (  )",...r.flatMap((re,ie)=>{const fe=KE(re.record.linesBottomUp),de=WE(re.record.linesBottomUp),pe=re.record.baseBitsBottomUp.join(""),Ne=re.record.changedBitsBottomUp.join(""),se=re.record.changingLines.length?re.record.changingLines.join(", "):"",Se=re.record.linesBottomUp.map(Ae=>Ae.value).join(", "),ke=fe.titleKo||"",he=typeof fe.number=="number"?String(fe.number):"",Ue=de.leftTopDown.length?de.leftTopDown.join(" "):"()",Be=de.rightTopDown.length?de.rightTopDown.join(" "):"()",Xe=de.markers.length?de.markers.map(Ae=>`${Ae.text}${Ae.atLineTopDown}`).join(", "):"()";return[`${ie+1}. ${re.title}`,`-  /: ${he}  ${ke}`,`-  (): ${pe}`,`-  (): ${Ne}`,`- : ${se}`,`- (): ${Se}`,`- (): ${Ue}`,`- (): ${Be}`,`- ///: ${Xe}`]}),""]:[],te=n&&h.length===6?[" ()",`-  : ${M}`,`- (): ${P}`,`- (): ${I} (${U})`,`- / : ${W} (${q})`,""," ()",`-  : ${H}`,`- / : ${B} (${K})`,""," ",`-  (): ${w}`,`-  (): ${_}`,`- : ${T}`,`- (): ${O}`,`- (): ${Z}`,`- (): ${G}`,`- ///: ${J}`,""]:[" ","- /   ",""],z=n&&r.length===0,X=z?EOe(m??null,b):null;return[" / .        .","",`: ${k}`,"",...te," ",Q,"",...z?["(JSON)",JSON.stringify(X??{},null,2),""]:[],"",...oe,"","-     ","-        ","-    "].join(`
`)}const o$=[`1.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`2.  () 

 
 ()	( ,  : ,  : ) (() )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`3.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`4.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`5.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`6.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`7.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`8.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`9.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`10.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`11.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`12.  () 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`13.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`14.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`15.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`16.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`17.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`18.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`19.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`20.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`21.  

  
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`22.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`23.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`24.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + () -  `,`25.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`26.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`27.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`28.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`29.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`30.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + () -  
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`31.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`32.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`33.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`34.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`35.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + () -  
2() - () + ()
() - () +  +  + ()`,`36.  

  
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`37.  
 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`38.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + () -  
() - () +  +  + ()`,`39.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`40.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`41.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`42.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`43.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`44.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + () -  
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`45.  () 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`46.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + () -  
5() - () +  + ()
4() - () +  + ()
3() - () + () -  
2() - () +  + ()
() - () +  + ()`,`47.  

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + () -  
2() - () + ()
() - () +  + ()`,`48.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  +  + ()
4() - () + ()
3() - () + ()
2() - () +  +  + ()
() - () + ()`,`49.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + () -  `,`50.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + () -  `,`51.  () (() )  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`52. () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`53.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`54.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + () -  
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`55.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`56.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`57.  () (() ) 

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + () -  
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`58.  () (() ) 

 
 ()	( ,  : (),  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + () -  
3() - () +  + ()
2() - () +  + ()
() - () + ()`,`59.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () +  + ()
4() - () + ()
3() - () +  + ()
2() - () +  + () -  
() - () + ()`,`60.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + () -  
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`,`61.  

 
 ()	( ,  : ,  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () +  + ()
4() - () +  + ()
3() - () + ()
2() - () +  + ()
() - () +  + ()`,`62.  

 
 ()	( ,  : (),  : ) (: )

 = 
 = 
 = 
 = 

() - () + ()
5() - () + ()
4() - () +  +  + ()
3() - () + ()
2() - () + ()
() - () +  +  + ()`,`63.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  +  + ()
5() - () + ()
4() - () + ()
3() - () +  +  + ()
2() - () + ()
() - () + ()`,`64.  

 
 ()	( ,  : ,  : )

 = 
 = 
 = 
 = 

() - () +  + ()
5() - () + ()
4() - () +  + ()
3() - () +  + ()
2() - () + ()
() - () +  + ()`];function TOe({saju:e,viewMeta:t,initialQuestion:n="",onBaseDateChange:r}){const[i,a]=S.useState(n),[o,l]=S.useState(""),[u,d]=S.useState("all"),[h,m]=S.useState("seun"),[b,y]=S.useState(()=>{const Me=new Date,at=new Date(Me.getFullYear(),0,1,9,0,0,0),zt=new Date(Me.getFullYear()+9,11,31,9,0,0,0);return{startYMD:Ya(at),endYMD:Ya(zt)}}),[k,w]=S.useState(()=>{const Me=new Date,at=new Date(Me.getFullYear(),Me.getMonth(),1,9,0,0,0),zt=new Date(at);return zt.setMonth(zt.getMonth()+11),{startYMD:Ya(at),endYMD:Ya(zt)}}),[_,T]=S.useState(()=>{const Me=new Date,at=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate(),9,0,0,0),zt=WH(at,6);return{startYMD:Ya(at),endYMD:Ya(zt)}}),[O,j]=S.useState([]),[C,M]=S.useState(null),[P,I]=S.useState([]),[U,W]=S.useState(!1),[q,H]=S.useState(!1),[B,K]=S.useState(null),V=S.useRef(null),Z=S.useRef(null),G=S.useRef(null);S.useEffect(()=>{a(n),l(n)},[n]),S.useEffect(()=>{I([])},[h,b.startYMD,b.endYMD,k.startYMD,k.endYMD,_.startYMD,_.endYMD]),S.useEffect(()=>{if(!B)return;const Me=window.setTimeout(()=>K(null),2200);return()=>window.clearTimeout(Me)},[B]);const J=S.useMemo(()=>{const Me=pa(b.startYMD);if(Me&&Me.getMonth()===0){const at=new Date(Me.getFullYear(),1,1,9,0,0,0);return{...b,startYMD:Ya(at)}}return b},[b]),Q=h,oe=S.useMemo(()=>Q?VH(Q,Q==="seun"?J:Q==="wolun"?k:_):new Date,[Q,_,J,k]);S.useEffect(()=>{r&&r(oe??null)},[oe,r]);const te=S.useMemo(()=>sOe(e),[e]),z=S.useMemo(()=>`${o.trim()}::${oe.toISOString()}`,[oe,o]),X=S.useMemo(()=>te?`${z}::SAJU::${te}`:z,[z,te]),re=S.useMemo(()=>{const Me=FH(X);return HH(Me)},[X]),ie=S.useMemo(()=>h==="seun"?Mk("seun",J):null,[h,J]),fe=S.useMemo(()=>h==="wolun"?Mk("wolun",k):null,[h,k]),de=S.useMemo(()=>h==="ilun"?Mk("ilun",_):null,[h,_]),pe=S.useMemo(()=>{const Me=pa(b.startYMD);return Me?String(Me.getFullYear()):""},[b.startYMD]),Ne=S.useMemo(()=>{const Me=pa(b.endYMD);return Me?String(Me.getFullYear()):""},[b.endYMD]),se=S.useMemo(()=>{const Me=pa(k.startYMD);if(!Me)return"";const at=String(Me.getMonth()+1).padStart(2,"0");return`${Me.getFullYear()}-${at}`},[k.startYMD]),Se=S.useMemo(()=>{const Me=pa(k.endYMD);if(!Me)return"";const at=String(Me.getMonth()+1).padStart(2,"0");return`${Me.getFullYear()}-${at}`},[k.endYMD]),ke=S.useMemo(()=>{if(h==="seun"){const Me=ie?.seun[0];return Me?` ${Me.year} - ${Me.seun}`:""}if(h==="wolun"){const Me=fe?.wolun[0];if(!Me)return"";const at=String(Me.month).padStart(2,"0");return` ${Me.year}-${at} - ${Me.seun} ${Me.wolun}`}if(h==="ilun"){const Me=de?.ilun[0];return Me?` ${Me.dateYMD} - ${Me.seun} ${Me.wolun} ${Me.ilun}`:""}return""},[h,ie,fe,de]),he=S.useCallback((Me,at,zt)=>{Me(wr=>({...wr,[at]:zt}))},[]),Ue=S.useCallback((Me,at)=>{if(!at)return;const zt=Number(at);if(!Number.isFinite(zt))return;const wr=Math.trunc(zt);y(ti=>({...ti,[Me]:`${wr}-06-15`}))},[]),Be=S.useCallback((Me,at)=>{if(!at)return;const zt=/^(\d{4})-(\d{2})$/.exec(at);zt&&w(wr=>({...wr,[Me]:`${zt[1]}-${zt[2]}-15`}))},[]),Xe=O.length===6,Ae=S.useMemo(()=>O.map(Me=>ew(Me.value)),[O]),Ie=S.useMemo(()=>O.map(Me=>UH(Me.value)),[O]),$e=S.useMemo(()=>qH(O),[O]),tt=S.useMemo(()=>O.map(Me=>Me.value),[O]),bt=O.length>0||!!C,jt=P.length>0,le=o.trim().length>0,Oe=!le||q||jt||Xe,Ye=!le||U||bt||jt||q,Ze=S.useCallback(()=>{window.setTimeout(()=>{V.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),Ot=S.useCallback(()=>{window.setTimeout(()=>{Z.current?.scrollIntoView({behavior:"smooth",block:"start"})},50)},[]),mt=S.useCallback(()=>{j([]),M(null),I([]),W(!1),H(!1),K(null)},[]),Ce=S.useCallback(()=>o.trim()?!0:(alert("  !"),window.setTimeout(()=>{G.current?.focus()},0),!1),[o]),ze=S.useCallback(()=>{if(!Ce()||Oe)return;W(!0);let Me=0;j(at=>at.length>=6?at:(Me=at.length+1,[...at,qE(re)])),window.setTimeout(()=>{if(W(!1),Me>=6){Ze();return}Me>0&&K(`${Me}  !  ${Me+1} ?`)},350)},[Ce,Oe,re,Ze]),nt=S.useCallback(()=>{if(!Ce()||Oe)return;W(!0);const Me=[];for(let at=0;at<6;at+=1)Me.push(qE(re));j(Me),window.setTimeout(()=>{W(!1),Ze()},350)},[Ce,Oe,re,Ze]),Tt=S.useMemo(()=>{if(O.length!==6)return"";const Me=KE(O);if(typeof Me.number!="number")return"";const at=Me.number-1;return at<0||at>=o$.length?"":o$[at]??""},[O]),Lt=S.useCallback(Me=>{j(at=>{if(Me<0||Me>=at.length)return at;const zt=[...at],wr=zt[Me];return zt[Me]={value:oOe(wr.value),source:"manual"},zt})},[]),Bt=S.useCallback(()=>{if(O.length!==6)return;const Me=(o.trim()||i.trim()).trim(),at={id:YH(),kind:"iching_sixyao",createdAtISO:GH(),question:Me,seedTextUsed:X,linesBottomUp:O,changingLines:$e,baseBitsBottomUp:Ae,changedBitsBottomUp:Ie,saju:e??void 0,viewMeta:t};M(at)},[Ae,Ie,$e,X,o,O,i,e,t]);S.useEffect(()=>{O.length===6&&Bt()},[Bt,O.length]);const Xt=S.useMemo(()=>[{value:7,source:"manual"}].concat(Array.from({length:5},()=>({value:7,source:"manual"}))),[]),_t=S.useCallback(()=>{if(!Ce()||Ye)return;H(!0);const Me=(o.trim()||i.trim()).trim(),at=SOe({periodTab:h,seunPayload:ie,wolunPayload:fe,ilunPayload:de,questionText:Me,sajuSeedPart:te,saju:e,viewMeta:t});I(at),window.setTimeout(()=>{H(!1),Ot()},400)},[Ce,Ye,o,de,h,i,e,te,ie,t,fe,Ot]),Tn=S.useMemo(()=>jOe({selectedCardText:Tt,ready:Xe,periodCards:P,finalQuestion:o,question:i,baseBits:Ae,changedBits:Ie,changingIndexes:$e,lineValues:tt,lines:O,saju:e,periodTab:h}),[Tt,Xe,P,o,i,Ae,Ie,$e,tt,O,e,oe,ie,fe,de,h]),qo=S.useCallback(async()=>{if(Tn)try{await navigator.clipboard.writeText(Tn),alert("  !")}catch{alert("  .   .")}},[Tn]),Hf=S.useMemo(()=>{if(!Xe)return null;const Me=WE(O),at=Me.leftTopDown.join(" "),zt=Me.rightTopDown.join(" "),wr=Me.markers.map(ti=>`${ti.text}${ti.atLineTopDown}`).join(", ");return{liuQin:at,zhi:zt,marks:wr}},[O,Xe]);return{saju:e,question:i,setQuestion:a,finalQuestion:o,setFinalQuestion:l,questionInputRef:G,drawMode:u,setDrawMode:d,periodTab:h,setPeriodTab:m,seunRange:b,setSeunRange:y,wolunRange:k,setWolunRange:w,ilunRange:_,setIlunRange:T,seunStartYear:pe,seunEndYear:Ne,wolunStartYM:se,wolunEndYM:Se,activePeriodLabel:ke,onRangeChange:he,onSeunYearChange:Ue,onWolunMonthChange:Be,ready:Xe,baseBits:Ae,changedBits:Ie,changingIndexes:$e,lineValues:tt,autoSideSummary:Hf,selectedCardText:Tt,drawOne:ze,drawAll:nt,reset:mt,onEditLine:Lt,lines:O,record:C,periodCards:P,placeholderLines:Xt,copyPrompt:qo,isDrawing:U,isPeriodDrawing:q,toast:B,disableSingleDraw:Oe,disablePeriodDraw:Ye,resultRef:V,periodCardsRef:Z,buildPeriodCards:_t}}const AOe="DAN-GW4jrUdfiXklZ12U",NOe="DAN-CeRuC0yKzSAs5Gju";function OOe(e){const{saju:t,question:n,setQuestion:r,finalQuestion:i,setFinalQuestion:a,questionInputRef:o,drawMode:l,setDrawMode:u,lines:d,isDrawing:h,disableSingleDraw:m,selectedCardText:b,drawOne:y,drawAll:k,reset:w,copyPrompt:_,toast:T,resultRef:O}=TOe(e),j=b?b.split(/\r?\n/):[],C=j[0]??"",M=j.slice(1).join("\\n").trim(),P=d.length?[...d].reverse():[],I=j.map(U=>U.trim()).map(U=>{const W=/^(|5|4|3|2|)\((|)\)\s*-\s*(.+)$/.exec(U);if(!W)return null;const q=W[1],H=W[2],B=//.test(W[3]),V=W[3].replace(/\s*-\s*\s*?/g,"").trim().split(" + ").map(Q=>Q.trim()).filter(Boolean),Z=V.filter(Q=>Q===""||Q===""||Q===""||Q===""),G=V.find(Q=>/\([]\)/.test(Q))??"",J=V.find(Q=>/\(.+\)/.test(Q)&&Q!==G)??"";return{label:q,yinYang:H,liuQin:J,zhi:G,markers:Z,hasDonghyo:B}}).filter(Boolean);return g.jsxs("div",{className:"w-full max-w-[768px] mx-auto pb-12 desk:pb-4 p-4",children:[g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"   ,     ."}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),t?g.jsxs("div",{className:"mt-1 text-sm text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.name?t.name:" ",t.gender?`  ${t.gender}`:""]}),t.pillarsText?g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:":"})," ",t.pillarsText]}):null]}):g.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),g.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[g.jsxs("label",{className:"block",children:[g.jsx("div",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200",children:""}),g.jsx("textarea",{ref:o,value:n,onChange:U=>r(U.target.value),rows:3,className:"mt-1 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm outline-none focus:border-neutral-400 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",placeholder:"      !"})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("button",{type:"button",onClick:()=>a(n.trim()),className:"rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:" "}),g.jsxs("span",{children:[" : ",i.trim()?i:""]})]}),g.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="all",onChange:()=>u("all")})," "]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"drawMode",checked:l==="step",onChange:()=>u("step")})," "]})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:l==="all"?k:y,disabled:m||h,className:"rounded-xl bg-neutral-900 px-4 py-2 text-sm font-semibold text-white hover:bg-neutral-800 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-neutral-100 dark:text-neutral-900 dark:hover:bg-neutral-200 cursor-pointer",children:l==="all"?" ":`1  (${d.length}/6)`}),g.jsx("button",{type:"button",onClick:w,className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:""}),h?g.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsx("span",{children:" "}),g.jsx("span",{className:"animate-pulse",children:"..."})]}):null]})]})]}),g.jsxs("div",{className:"mt-4",ref:O,children:[g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"hidden md:block",children:g.jsx(bu,{enabled:!0,adUnit:NOe,width:728,height:90})}),g.jsx("div",{className:"md:hidden",children:g.jsx(bu,{enabled:!0,adUnit:AOe,width:320,height:50})})]}),b?g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-gradient-to-b from-amber-50 to-white p-4 shadow-sm dark:border-neutral-800 dark:from-neutral-900 dark:to-neutral-950",children:g.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[g.jsxs("div",{className:"w-full md:w-[180px]",children:[g.jsx("div",{className:"rounded-xl border border-amber-200 bg-white px-3 py-2 text-sm font-semibold text-amber-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",children:C}),g.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-white px-3 py-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("div",{className:"mt-2 flex flex-col gap-2",children:P.map((U,W)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:6-W}),g.jsx(iOe,{yinYang:ew(U.value),changing:!1,showChanging:!1})]},`line-${W}`))})]})]}),g.jsxs("div",{className:"flex-1 rounded-xl border border-amber-200 bg-white p-4 dark:border-neutral-700 dark:bg-neutral-900",children:[g.jsx("div",{className:"space-y-2",children:(I.length?I:[]).map(U=>g.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-amber-100 bg-amber-50/50 px-3 py-2 text-sm dark:border-neutral-800 dark:bg-neutral-950",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:[U.label," (",U.yinYang,")"]}),g.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-300",children:[U.liuQin||"-"," ",U.zhi?`  ${U.zhi}`:""]})]}),g.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px] font-semibold text-amber-900 dark:text-neutral-200",children:[U.hasDonghyo&&g.jsx("span",{className:"rounded border border-red-200 bg-red-50 px-1.5 py-0.5 text-red-600 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-300",children:""}),U.markers.map(W=>g.jsx("span",{className:"rounded border border-amber-200 bg-white px-1.5 py-0.5 dark:border-neutral-700 dark:bg-neutral-900",children:W},`${U.label}-${W}`))]})]},U.label))}),!I.length&&g.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-sm text-neutral-800 dark:text-neutral-100",children:M})]})]})}):g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"   ."})]}),g.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-white p-4 dark:border-neutral-800 dark:bg-neutral-900",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-100",children:" "}),g.jsx("div",{className:"mt-1 text-xs text-neutral-600 dark:text-neutral-400",children:"   AI    ."}),b?g.jsx("button",{type:"button",onClick:_,className:"mt-3 w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-xs font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:"AI   "}):g.jsx("div",{className:"mt-3 text-sm text-neutral-600 dark:text-neutral-400",children:"  ."})]}),T?g.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 w-[90%] max-w-sm -translate-x-1/2",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-900 shadow-lg dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-100",children:T})}):null]})}const COe="DAN-INfSKh1pW2cEtWNu";function Bb(e){return!e?.stem||!e?.branch?"":`${e.stem}${e.branch}`}function MOe(e){const t=[e.year?`${e.year}`:"",e.month?`${e.month}`:"",e.day?`${e.day}`:"",e.hour?`${e.hour}`:""].filter(Boolean);return t.length?t.join(" "):""}function Rk(e){if(typeof e!="string")return!1;const t=e.trim();return t===""||t===""||t===""||t==="self"||t===""||t===""}function DOe({current:e}){const t=Cy(h=>h.useDST),n=e.mingSikType,r=S.useMemo(()=>A2(e,t),[e,t]),[i,a]=S.useState(null),o=Jr(h=>h.date),l=lx(e,n,i??o??void 0),u=S.useMemo(()=>{const h={year:Bb(r.year),month:Bb(r.month),day:Bb(r.day),hour:Bb(r.hour)},m=e.ganjiText?.trim()||e.ganji?.trim()||MOe(h),b={daeun:l.dae.gz||void 0,seun:l.se.gz||void 0,wolun:l.wol.gz||void 0,ilun:l.il.gz||void 0};return{name:e.name||void 0,gender:e.gender||void 0,pillarsText:m,pillars:h,luck:b}},[e,l,r]),d=S.useMemo(()=>({sourceRoute:"/iching",currentId:e.id,currentName:e.name??null}),[e.id,e.name]);return g.jsx("div",{className:"py-2",children:g.jsx(OOe,{saju:u,viewMeta:d,onBaseDateChange:a},e.id)})}function POe(){const e=En(w=>w.list),t=En(w=>w.loading),n=En(w=>w.currentId),r=En(w=>w.setCurrentId),i=tc(),a=S.useRef(!1),[o,l]=S.useState(!1),u=S.useRef(!1),d=yn(w=>w.shouldShowAdsNow()),h=S.useMemo(()=>e.find(_=>Rk(_.relationship))?.id??null,[e]);S.useEffect(()=>{if(t||e.length===0)return;const w=h??e[0]?.id??null;if(!a.current){w&&n!==w&&r(w),a.current=!0;return}n&&!e.some(_=>_.id===n)&&w&&r(w)},[t,e,n,h,r]),S.useEffect(()=>{t&&l(!0)},[t]);const m=S.useMemo(()=>e.find(w=>w.id===n)??null,[e,n]),b=S.useMemo(()=>m||(e.find(_=>Rk(_.relationship))??e[0]??null),[m,e]),y=S.useMemo(()=>{const w=e.find(_=>Rk(_.relationship));return w?[w,...e.filter(_=>_.id!==w.id)]:e},[e]);S.useEffect(()=>{o&&(t||e.length>0||u.current||(u.current=!0,alert("   .  ."),i("/",{replace:!0})))},[o,e.length,t,i]),S.useEffect(()=>{let w=!0;De.auth.getSession().then(({data:T})=>{w&&(T.session?.user||i("/",{replace:!0}))});const{data:_}=De.auth.onAuthStateChange((T,O)=>{O?.user||i("/",{replace:!0})});return()=>{w=!1,_.subscription.unsubscribe()}},[i]);const k=S.useMemo(()=>n||h||(e[0]?.id??""),[n,h,e]);return g.jsxs("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-950",children:[g.jsx(PH,{enabled:d}),d&&g.jsx(BH,{enabled:!0,clientId:"ca-pub-4729618898154189",slotId:"1598573921",width:160,height:600,showAfterScrollY:0,side:"left",sidePx:16,topPx:60,breakpointClassName:"hidden desk:block"}),g.jsx("div",{className:"hidden desk:block",children:g.jsx(RH,{enabled:d,adUnit:COe,width:160,height:600,showAfterScrollY:0,rightPx:16,topPx:60,breakpointClassName:"hidden desk:block"})}),g.jsxs("div",{className:"w-full max-w-[768px] mx-auto px-4 pt-4",children:[g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"   "}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"    ."})]}),g.jsx(rj,{to:"/",className:"rounded-xl border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-800 hover:bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800",children:""})]}),e.length>0&&g.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:" "}),g.jsxs("select",{className:"w-full sm:w-[320px] rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm dark:border-neutral-700 dark:bg-neutral-900 dark:text-neutral-100",value:k,onChange:w=>{const _=w.target.value;_&&r(_)},children:[g.jsx("option",{value:"",disabled:!0,children:""}),y.map(w=>g.jsx("option",{value:w.id,children:w.name?.trim()?w.name:" "},w.id))]})]})]}),t&&e.length===0&&g.jsx("div",{className:"w-full max-w-[768px] mx-auto px-4 py-10",children:g.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400",children:" .."})}),b&&g.jsx(DOe,{current:b})]})}function ROe(e){return typeof e=="object"&&e!==null}function LOe(e){if(!ROe(e))return null;const t=typeof e.ok=="boolean"?e.ok:void 0,n=typeof e.total_active_ms=="number"?e.total_active_ms:void 0,r=typeof e.upgraded_to_basic=="boolean"?e.upgraded_to_basic:void 0;return{ok:t,total_active_ms:n,upgraded_to_basic:r}}function XH({enabled:e=!0,intervalMs:t=6e4,path:n,onBasicUnlocked:r,onTotalActiveMs:i}){const a=S.useRef(!1),o=S.useRef(""),l=S.useRef(!1),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),m=S.useRef(0);return S.useEffect(()=>{o.current=n??""},[n]),S.useEffect(()=>{let b=null;return(async()=>{const{data:k}=await De.auth.getSession();u.current=k.session?.user?.id??null;const _=De.auth.onAuthStateChange((T,O)=>{u.current=O?.user?.id??null,l.current=!1}).data?.subscription;_&&typeof _.unsubscribe=="function"&&(b=()=>_.unsubscribe())})(),()=>{b&&b()}},[]),S.useEffect(()=>{if(!e)return;const b=async w=>{if(document.visibilityState!=="visible")return;const _=Date.now();if(!(w!=="init"&&_-m.current<1e4)&&(m.current=_,!a.current)){a.current=!0;try{if(!u.current)return;const O=o.current||null,{data:j,error:C}=await De.rpc("ping_activity",{p_last_path:O});if(C)return;const M=LOe(j);if(!M)return;typeof M.total_active_ms=="number"&&i?.(M.total_active_ms),M.upgraded_to_basic===!0&&!l.current&&(l.current=!0,r?.())}finally{a.current=!1}}};b("init");const y=Math.floor(Math.random()*5e3);h.current=window.setTimeout(()=>{b("interval"),d.current=window.setInterval(()=>void b("interval"),t)},y);const k=()=>{document.visibilityState==="visible"&&b("visible")};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k),h.current!==null&&(window.clearTimeout(h.current),h.current=null),d.current!==null&&(window.clearInterval(d.current),d.current=null)}},[e,t,r,i]),null}function IOe(){const e=En(a=>a.loadFromServer),t=En(a=>a.migrateLocalToServer),n=un(a=>a.loadFromServer),r=yn(a=>a.loadFromServer),i=S.useCallback(async()=>{await t(),await Promise.all([r(),n(),e()])},[t,r,n,e]);return S.useEffect(()=>{i();const{data:a}=De.auth.onAuthStateChange(o=>{o==="TOKEN_REFRESHED"||o==="INITIAL_SESSION"||i()});return()=>{a.subscription.unsubscribe()}},[i]),null}function $Oe(e){try{const t=localStorage.getItem(e);if(!t)return 0;const n=Number(t);return Number.isFinite(n)?n:0}catch{return 0}}function BOe(e,t){try{localStorage.setItem(e,String(t))}catch{}}function zOe(e){return e<=0?0:Math.floor(Math.random()*e)}function UOe({enabled:e=!0,href:t="https://open.kakao.com/o/sjBRz57h",hintTexts:n=["    !"," .",",  ."," ,   ,  !","  !  ! "],hideHintHours:r=24,cycleMs:i=4200,mobilePaddingX:a=0,bottomDockCssVarName:o="--bottom-dock"}){const l=S.useMemo(()=>"kakao_chat_hint_hide_until",[]),[u,d]=S.useState(!1),[h,m]=S.useState(()=>zOe(n.length)),b=S.useRef(null),y=S.useCallback(_=>{if(typeof document>"u")return;const T=`${Math.max(0,Math.floor(_))}px`;document.documentElement.style.setProperty(o,T)},[o]);if(S.useEffect(()=>{if(n.length<=0){m(0);return}m(_=>_%n.length)},[n.length]),S.useEffect(()=>{if(!e){d(!1);return}const _=$Oe(l),T=Date.now();if(_>T){d(!1);return}const O=window.setTimeout(()=>d(!0),900);return()=>window.clearTimeout(O)},[e,l]),S.useEffect(()=>{if(!e||!u||n.length<=1)return;const _=window.setInterval(()=>{m(T=>T+1>=n.length?0:T+1)},i);return()=>window.clearInterval(_)},[e,u,n.length,i]),S.useEffect(()=>{if(!e||!u){y(0);return}const _=b.current;if(!_){y(0);return}const T=()=>{const O=Math.ceil(_.getBoundingClientRect().height);y(O)};if(T(),typeof ResizeObserver<"u"){const O=new ResizeObserver(T);return O.observe(_),()=>{O.disconnect(),y(0)}}return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T),y(0)}},[e,u,y]),!e)return null;const k=()=>{BOe(l,Date.now()+r*60*60*1e3),d(!1),y(0)},w=n[h]??"";return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:`
        @keyframes hintFadeCycle {
          0%   { opacity: 0; transform: translate3d(0, 6px, 0); }
          14%  { opacity: 1; transform: translate3d(0, 0, 0); }
          78%  { opacity: 1; transform: translate3d(0, 0, 0); }
          100% { opacity: 0; transform: translate3d(0, -2px, 0); }
        }
      `}),u&&n.length>0?g.jsx("div",{ref:b,className:"desk:hidden fixed left-0 right-0 bottom-0 z-[99] pointer-events-none",style:{paddingLeft:a,paddingRight:a,paddingBottom:0},children:g.jsxs("div",{className:"pointer-events-auto w-full border border-neutral-700 bg-neutral-900/95 text-white shadow-lg",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:10,padding:"4px 8px"},children:[g.jsx("div",{className:"min-w-0 text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},title:w,children:w}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("button",{type:"button",onClick:k,"aria-label":" ",title:"",className:"w-8 h-8 rounded-full bg-neutral-800 border border-neutral-700 text-[14px] flex items-center justify-center hover:bg-neutral-700",children:g.jsx(yy,{})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`w-8 h-8 rounded-full bg-neutral-800 hover:bg-neutral-700 border border-neutral-700
                           flex items-center justify-center transition-colors`,children:g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}):null,g.jsxs("div",{className:"hidden desk:block fixed right-5 bottom-5 z-[999]",children:[u&&n.length>0&&g.jsx("div",{className:"absolute bottom-14 right-0 w-max max-w-[260px]",children:g.jsxs("div",{className:"relative rounded-xl bg-neutral-900 text-white border border-neutral-700 shadow-lg px-3 py-2 text-xs whitespace-pre-line",style:{animationName:"hintFadeCycle",animationDuration:`${i}ms`,animationTimingFunction:"ease-in-out",animationIterationCount:"infinite"},children:[w,g.jsx("button",{type:"button",onClick:k,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-neutral-800 border border-neutral-700 text-[12px] flex items-center justify-center hover:bg-neutral-700 cursor-pointer","aria-label":" ",title:"",children:g.jsx(yy,{size:12})}),g.jsx("div",{className:"absolute -bottom-2 right-4 w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-neutral-900"})]})}),g.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"  ",title:"( )",className:`flex items-center justify-center w-12 h-12 rounded-full shadow-lg
                     bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 transition-colors`,children:g.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[g.jsx("path",{d:"M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7C20 13.88 18.88 15 17.5 15H10l-4.5 4V15H6.5C5.12 15 4 13.88 4 12.5v-7Z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),g.jsx("path",{d:"M7.5 7.5h9M7.5 10.5h6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})]})]})}function FOe(e){const t=["#F87171","#FBBF24","#34D399","#60A5FA","#A78BFA","#F472B6"],n=[];for(let r=0;r<e;r+=1)n.push({leftPct:Math.random()*100,size:6+Math.floor(Math.random()*8),delayMs:Math.floor(Math.random()*300),durationMs:1200+Math.floor(Math.random()*900),rotate:Math.floor(Math.random()*360),driftPx:-40+Math.floor(Math.random()*80),color:t[r%t.length]});return n}function HOe({open:e,onClose:t}){const n=S.useMemo(()=>FOe(48),[]);return S.useEffect(()=>{if(!e)return;const r=a=>{a.key==="Escape"&&t()};window.addEventListener("keydown",r);const i=window.setTimeout(()=>t(),6e3);return()=>{window.removeEventListener("keydown",r),window.clearTimeout(i)}},[e,t]),e?g.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center",children:[g.jsx("style",{children:`
        @keyframes confettiFall {
          0%   { transform: translate3d(var(--dx), -20px, 0) rotate(var(--rot)); opacity: 0; }
          10%  { opacity: 1; }
          100% { transform: translate3d(var(--dx), 560px, 0) rotate(calc(var(--rot) + 360deg)); opacity: 0; }
        }
        @keyframes pop {
          0% { transform: scale(0.98); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
      `}),g.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),g.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:n.map((r,i)=>{const a={position:"absolute",top:0,left:`${r.leftPct}%`,width:r.size,height:Math.max(8,r.size+6),background:r.color,borderRadius:2,transform:`rotate(${r.rotate}deg)`,animation:`confettiFall ${r.durationMs}ms ease-out ${r.delayMs}ms forwards`,"--dx":`${r.driftPx}px`,"--rot":`${r.rotate}deg`};return g.jsx("span",{style:a},i)})}),g.jsxs("div",{className:`relative w-[92%] max-w-[420px] rounded-2xl bg-white dark:bg-neutral-950
                   border border-neutral-200 dark:border-neutral-800 shadow-xl p-5`,style:{animation:"pop 160ms ease-out"},children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl mb-2",children:""}),g.jsx("div",{className:"text-xl font-extrabold text-neutral-900 dark:text-neutral-50",children:"BASIC  !"}),g.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:"     ! "})]}),g.jsx("div",{className:"mt-4 flex justify-center gap-2",children:g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-neutral-900 text-white hover:bg-neutral-800 cursor-pointer",children:""})})]})]}):null}function s$(e){if(typeof e!="string")return"FREE";const t=e.toUpperCase();return t==="BASIC"?"BASIC":t==="PRO"?"PRO":"FREE"}function GOe(){const e=Fr(),t=e.pathname+e.search,n=!e.pathname.startsWith("/admin")&&!e.pathname.startsWith("/impersonate")&&!e.pathname.startsWith("/auth/callback"),[r,i]=S.useState(!1),a=yn(b=>b.loaded),o=yn(b=>b.loading),l=yn(b=>b.userId),u=yn(b=>s$(b.plan)),d=S.useRef(!1);S.useEffect(()=>{n&&(a||o||yn.getState().loadFromServer())},[n,a,o]);const h=S.useCallback(async()=>{if(d.current)return;d.current=!0;const{data:b,error:y}=await De.rpc("mark_basic_celebrated");if(y){console.warn("[basic celebration] rpc error:",y.message);return}b===!0&&i(!0)},[]);S.useEffect(()=>{n&&a&&l&&u==="BASIC"&&h()},[n,a,l,u,h]);const m=S.useCallback(()=>{(async()=>(await yn.getState().loadFromServer(),s$(yn.getState().plan)==="BASIC"&&(d.current=!1,await h())))()},[h]);return g.jsxs(g.Fragment,{children:[g.jsx(XH,{enabled:n,path:t,onBasicUnlocked:m}),g.jsx(UOe,{enabled:n}),g.jsx(HOe,{open:r,onClose:()=>i(!1)})]})}function YOe(e){return typeof e=="object"&&e!==null}function qOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!YOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}function KOe(){const e=tc(),t=Fr(),n=S.useRef(!1);return S.useEffect(()=>{const r=async()=>{if(!n.current){n.current=!0;try{const{data:o}=await De.auth.getSession(),l=o.session?.user?.id??null;if(!l)return;const{data:u,error:d}=await De.rpc("get_my_account_status");if(!d){!!qOe(u)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0});return}const{data:h,error:m}=await De.from("profiles").select("disabled_at").eq("user_id",l).maybeSingle();if(m)return;(h?.disabled_at??null)&&t.pathname!=="/disabled"&&e("/disabled",{replace:!0})}finally{n.current=!1}}};r();const{data:i}=De.auth.onAuthStateChange(()=>{r()}),a=()=>{document.visibilityState==="visible"&&r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a),i.subscription.unsubscribe()}},[e,t.pathname]),null}function WOe(e){return typeof e=="object"&&e!==null}function VOe(e){if(!Array.isArray(e)||e.length===0)return null;const t=e[0];if(!WOe(t))return null;const n=t.disabled_at;return typeof n=="string"?n:null}const ZOe=Yo((e,t)=>({loaded:!1,loading:!1,userId:null,disabledAt:null,reset:()=>{e({loaded:!0,loading:!1,userId:null,disabledAt:null})},loadFromServer:async n=>{if(!t().loading){e({loading:!0,userId:n});try{const{data:i,error:a}=await De.rpc("get_my_account_status");if(!a){const d=VOe(i);e({loaded:!0,loading:!1,disabledAt:d});return}const{data:o,error:l}=await De.from("profiles").select("disabled_at").eq("user_id",n).maybeSingle();if(l){console.error("[accountStatus] load error:",l),e({loaded:!0,loading:!1,disabledAt:null});return}const u=o?.disabled_at??null;e({loaded:!0,loading:!1,disabledAt:typeof u=="string"?u:null})}catch(i){console.error("[accountStatus] exception:",i),e({loaded:!0,loading:!1,disabledAt:null})}}}}));function XOe(e){if(!e)return"-";const t=Date.parse(e);return Number.isFinite(t)?new Date(t).toLocaleString():e}function JOe(){const e=ZOe(n=>n.disabledAt),t=S.useCallback(async()=>{try{await De.auth.signOut(),window.location.href="/"}catch(n){console.error("signOut error:",n),window.location.href="/"}},[]);return g.jsx("main",{className:"min-h-screen flex items-center justify-center p-6 text-white",children:g.jsxs("div",{className:"w-full max-w-[520px] bg-neutral-900 border border-neutral-700 rounded-xl p-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-3",children:" "}),g.jsxs("div",{className:"text-sm text-neutral-300 leading-6",children:["        .",g.jsx("span",{className:"font-semibold text-neutral-100",children:XOe(e)})]}),g.jsx("div",{className:"mt-5 p-3 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-300",children:"    ."}),g.jsxs("div",{className:"mt-6 flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 rounded bg-blue-700 hover:bg-blue-600 cursor-pointer",children:""})]})]})})}function QOe(){const e=Fr();return S.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),g.jsxs(g.Fragment,{children:[g.jsx(IOe,{}),g.jsx(GOe,{}),g.jsx(KOe,{}),g.jsx(XH,{}),g.jsxs(gq,{children:[g.jsx(Ua,{path:"/auth/callback",element:g.jsx(rOe,{})}),g.jsx(Ua,{path:"/disabled",element:g.jsx(JOe,{})}),g.jsx(Ua,{path:"/iching",element:g.jsx(POe,{})}),g.jsx(Ua,{path:"/",element:g.jsx($b,{})}),g.jsx(Ua,{path:"/faq",element:g.jsx($b,{})}),g.jsx(Ua,{path:"/couple",element:g.jsx($b,{})}),g.jsx(Ua,{path:"/result",element:g.jsx($b,{})}),g.jsx(Ua,{path:"/admin/*",element:g.jsx(nH,{})}),g.jsx(Ua,{path:"/impersonate",element:g.jsx(nOe,{})}),g.jsx(Ua,{path:"*",element:g.jsx(mq,{to:"/",replace:!0})})]})]})}_Y.createRoot(document.getElementById("root")).render(g.jsx(Bq,{children:g.jsx(QOe,{})}));
