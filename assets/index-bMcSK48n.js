function E2(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function md(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var q0={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function oN(){if(Xx)return Nu;Xx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:e,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Nu.Fragment=t,Nu.jsx=n,Nu.jsxs=n,Nu}var Jx;function lN(){return Jx||(Jx=1,q0.exports=oN()),q0.exports}var g=lN();const T2="harim.theme",sb="harim.settings.v1";function k2(){try{const e=localStorage.getItem(T2);if(e==="dark"||e==="light")return e;const t=localStorage.getItem(sb);if(t){const i=JSON.parse(t)?.theme;if(i==="dark"||i==="light")return i}return null}catch{return null}}function Pf(e){try{localStorage.setItem(T2,e);const t=localStorage.getItem(sb),n=t?JSON.parse(t):{};localStorage.setItem(sb,JSON.stringify({...n,theme:e}))}catch{}}function A2(e){const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.style.setProperty("color-scheme",e)}(function(){try{const e=k2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");A2(e)}catch{}})();var Z0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function cN(){if(Qx)return ot;Qx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),x=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,N={};function C(U,B,q){this.props=U,this.context=B,this.refs=N,this.updater=q||T}C.prototype.isReactComponent={},C.prototype.setState=function(U,B){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,B,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function $(){}$.prototype=C.prototype;function A(U,B,q){this.props=U,this.context=B,this.refs=N,this.updater=q||T}var D=A.prototype=new $;D.constructor=A,k(D,C.prototype),D.isPureReactComponent=!0;var M=Array.isArray;function G(){}var H={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function K(U,B,q){var V=q.ref;return{$$typeof:e,type:U,key:B,ref:V!==void 0?V:null,props:q}}function ae(U,B){return K(U.type,B,U.props)}function Q(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function Y(U){var B={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(q){return B[q]})}var te=/\/+/g;function re(U,B){return typeof U=="object"&&U!==null&&U.key!=null?Y(""+U.key):B.toString(36)}function Se(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function(B){U.status==="pending"&&(U.status="fulfilled",U.value=B)},function(B){U.status==="pending"&&(U.status="rejected",U.reason=B)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,B,q,V,P){var Z=typeof U;(Z==="undefined"||Z==="boolean")&&(U=null);var ie=!1;if(U===null)ie=!0;else switch(Z){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(U.$$typeof){case e:case t:ie=!0;break;case y:return ie=U._init,X(ie(U._payload),B,q,V,P)}}if(ie)return P=P(U),ie=V===""?"."+re(U,0):V,M(P)?(q="",ie!=null&&(q=ie.replace(te,"$&/")+"/"),X(P,B,q,"",function(xe){return xe})):P!=null&&(Q(P)&&(P=ae(P,q+(P.key==null||U&&U.key===P.key?"":(""+P.key).replace(te,"$&/")+"/")+ie)),B.push(P)),1;ie=0;var me=V===""?".":V+":";if(M(U))for(var ce=0;ce<U.length;ce++)V=U[ce],Z=me+re(V,ce),ie+=X(V,B,q,Z,P);else if(ce=S(U),typeof ce=="function")for(U=ce.call(U),ce=0;!(V=U.next()).done;)V=V.value,Z=me+re(V,ce++),ie+=X(V,B,q,Z,P);else if(Z==="object"){if(typeof U.then=="function")return X(Se(U),B,q,V,P);throw B=String(U),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ie}function oe(U,B,q){if(U==null)return U;var V=[],P=0;return X(U,V,"","",function(Z){return B.call(q,Z,P++)}),V}function J(U){if(U._status===-1){var B=U._result;B=B(),B.then(function(q){(U._status===0||U._status===-1)&&(U._status=1,U._result=q)},function(q){(U._status===0||U._status===-1)&&(U._status=2,U._result=q)}),U._status===-1&&(U._status=0,U._result=B)}if(U._status===1)return U._result.default;throw U._result}var ye=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},W={map:oe,forEach:function(U,B,q){oe(U,function(){B.apply(this,arguments)},q)},count:function(U){var B=0;return oe(U,function(){B++}),B},toArray:function(U){return oe(U,function(B){return B})||[]},only:function(U){if(!Q(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ot.Activity=_,ot.Children=W,ot.Component=C,ot.Fragment=n,ot.Profiler=o,ot.PureComponent=A,ot.StrictMode=i,ot.Suspense=m,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ot.__COMPILER_RUNTIME={__proto__:null,c:function(U){return H.H.useMemoCache(U)}},ot.cache=function(U){return function(){return U.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(U,B,q){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var V=k({},U.props),P=U.key;if(B!=null)for(Z in B.key!==void 0&&(P=""+B.key),B)!F.call(B,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&B.ref===void 0||(V[Z]=B[Z]);var Z=arguments.length-2;if(Z===1)V.children=q;else if(1<Z){for(var ie=Array(Z),me=0;me<Z;me++)ie[me]=arguments[me+2];V.children=ie}return K(U.type,P,V)},ot.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},ot.createElement=function(U,B,q){var V,P={},Z=null;if(B!=null)for(V in B.key!==void 0&&(Z=""+B.key),B)F.call(B,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(P[V]=B[V]);var ie=arguments.length-2;if(ie===1)P.children=q;else if(1<ie){for(var me=Array(ie),ce=0;ce<ie;ce++)me[ce]=arguments[ce+2];P.children=me}if(U&&U.defaultProps)for(V in ie=U.defaultProps,ie)P[V]===void 0&&(P[V]=ie[V]);return K(U,Z,P)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(U){return{$$typeof:f,render:U}},ot.isValidElement=Q,ot.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:J}},ot.memo=function(U,B){return{$$typeof:p,type:U,compare:B===void 0?null:B}},ot.startTransition=function(U){var B=H.T,q={};H.T=q;try{var V=U(),P=H.S;P!==null&&P(q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(G,ye)}catch(Z){ye(Z)}finally{B!==null&&q.types!==null&&(B.types=q.types),H.T=B}},ot.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ot.use=function(U){return H.H.use(U)},ot.useActionState=function(U,B,q){return H.H.useActionState(U,B,q)},ot.useCallback=function(U,B){return H.H.useCallback(U,B)},ot.useContext=function(U){return H.H.useContext(U)},ot.useDebugValue=function(){},ot.useDeferredValue=function(U,B){return H.H.useDeferredValue(U,B)},ot.useEffect=function(U,B){return H.H.useEffect(U,B)},ot.useEffectEvent=function(U){return H.H.useEffectEvent(U)},ot.useId=function(){return H.H.useId()},ot.useImperativeHandle=function(U,B,q){return H.H.useImperativeHandle(U,B,q)},ot.useInsertionEffect=function(U,B){return H.H.useInsertionEffect(U,B)},ot.useLayoutEffect=function(U,B){return H.H.useLayoutEffect(U,B)},ot.useMemo=function(U,B){return H.H.useMemo(U,B)},ot.useOptimistic=function(U,B){return H.H.useOptimistic(U,B)},ot.useReducer=function(U,B,q){return H.H.useReducer(U,B,q)},ot.useRef=function(U){return H.H.useRef(U)},ot.useState=function(U){return H.H.useState(U)},ot.useSyncExternalStore=function(U,B,q){return H.H.useSyncExternalStore(U,B,q)},ot.useTransition=function(){return H.H.useTransition()},ot.version="19.2.1",ot}var ew;function Sm(){return ew||(ew=1,Z0.exports=cN()),Z0.exports}var R=Sm();const rn=ll(R);var V0={exports:{}},Ou={},K0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function uN(){return tw||(tw=1,(function(e){function t(X,oe){var J=X.length;X.push(oe);e:for(;0<J;){var ye=J-1>>>1,W=X[ye];if(0<o(W,oe))X[ye]=oe,X[J]=W,J=ye;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],J=X.pop();if(J!==oe){X[0]=J;e:for(var ye=0,W=X.length,U=W>>>1;ye<U;){var B=2*(ye+1)-1,q=X[B],V=B+1,P=X[V];if(0>o(q,J))V<W&&0>o(P,q)?(X[ye]=P,X[V]=J,ye=V):(X[ye]=q,X[B]=J,ye=B);else if(V<W&&0>o(P,J))X[ye]=P,X[V]=J,ye=V;else break e}}return oe}function o(X,oe){var J=X.sortIndex-oe.sortIndex;return J!==0?J:X.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,_=null,x=3,S=!1,T=!1,k=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var oe=n(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=X)i(p),oe.sortIndex=oe.expirationTime,t(m,oe);else break;oe=n(p)}}function M(X){if(k=!1,D(X),!T)if(n(m)!==null)T=!0,G||(G=!0,Y());else{var oe=n(p);oe!==null&&Se(M,oe.startTime-X)}}var G=!1,H=-1,F=5,K=-1;function ae(){return N?!0:!(e.unstable_now()-K<F)}function Q(){if(N=!1,G){var X=e.unstable_now();K=X;var oe=!0;try{e:{T=!1,k&&(k=!1,$(H),H=-1),S=!0;var J=x;try{t:{for(D(X),_=n(m);_!==null&&!(_.expirationTime>X&&ae());){var ye=_.callback;if(typeof ye=="function"){_.callback=null,x=_.priorityLevel;var W=ye(_.expirationTime<=X);if(X=e.unstable_now(),typeof W=="function"){_.callback=W,D(X),oe=!0;break t}_===n(m)&&i(m),D(X)}else i(m);_=n(m)}if(_!==null)oe=!0;else{var U=n(p);U!==null&&Se(M,U.startTime-X),oe=!1}}break e}finally{_=null,x=J,S=!1}oe=void 0}}finally{oe?Y():G=!1}}}var Y;if(typeof A=="function")Y=function(){A(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,re=te.port2;te.port1.onmessage=Q,Y=function(){re.postMessage(null)}}else Y=function(){C(Q,0)};function Se(X,oe){H=C(function(){X(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(X){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var J=x;x=oe;try{return X()}finally{x=J}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=x;x=X;try{return oe()}finally{x=J}},e.unstable_scheduleCallback=function(X,oe,J){var ye=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,X){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,X={id:y++,callback:oe,priorityLevel:X,startTime:J,expirationTime:W,sortIndex:-1},J>ye?(X.sortIndex=J,t(p,X),n(m)===null&&X===n(p)&&(k?($(H),H=-1):k=!0,Se(M,J-ye))):(X.sortIndex=W,t(m,X),T||S||(T=!0,G||(G=!0,Y()))),X},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(X){var oe=x;return function(){var J=x;x=oe;try{return X.apply(this,arguments)}finally{x=J}}}})(W0)),W0}var nw;function dN(){return nw||(nw=1,K0.exports=uN()),K0.exports}var X0={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function hN(){if(rw)return fr;rw=1;var e=Sm();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fr.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},fr.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},fr.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},fr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},fr.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&i.d.X(m,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fr.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},fr.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fr.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},fr.requestFormReset=function(m){i.d.r(m)},fr.unstable_batchedUpdates=function(m,p){return m(p)},fr.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},fr.useFormStatus=function(){return u.H.useHostTransitionStatus()},fr.version="19.2.1",fr}var iw;function j2(){if(iw)return X0.exports;iw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),X0.exports=hN(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function fN(){if(sw)return Ou;sw=1;var e=dN(),t=Sm(),n=j2();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,h=s;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return m(v),r;if(w===h)return m(v),s;w=w.sibling}throw Error(i(188))}if(c.return!==h.return)c=v,h=w;else{for(var O=!1,z=v.child;z;){if(z===c){O=!0,c=v,h=w;break}if(z===h){O=!0,h=v,c=w;break}z=z.sibling}if(!O){for(z=w.child;z;){if(z===c){O=!0,c=w,h=v;break}if(z===h){O=!0,h=w,c=v;break}z=z.sibling}if(!O)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var te=Symbol.for("react.client.reference");function re(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===te?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case G:return"SuspenseList";case K:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case A:return r.displayName||"Context";case $:return(r._context.displayName||"Context")+".Consumer";case D:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:re(r.type)||"Memo";case F:s=r._payload,r=r._init;try{return re(r(s))}catch{}}return null}var Se=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ye=[],W=-1;function U(r){return{current:r}}function B(r){0>W||(r.current=ye[W],ye[W]=null,W--)}function q(r,s){W++,ye[W]=r.current,r.current=s}var V=U(null),P=U(null),Z=U(null),ie=U(null);function me(r,s){switch(q(Z,s),q(P,r),q(V,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?_x(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=_x(s),r=xx(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}B(V),q(V,r)}function ce(){B(V),B(P),B(Z)}function xe(r){r.memoizedState!==null&&q(ie,r);var s=V.current,c=xx(s,r.type);s!==c&&(q(P,r),q(V,c))}function ke(r){P.current===r&&(B(V),B(P)),ie.current===r&&(B(ie),Tu._currentValue=J)}var je,Me;function Ee(r){if(je===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);je=s&&s[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+r+Me}var Pe=!1;function Ce(r,s){if(!r||Pe)return"";Pe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(we){var _e=we}Reflect.construct(r,[],De)}else{try{De.call()}catch(we){_e=we}r.call(De.prototype)}}else{try{throw Error()}catch(we){_e=we}(De=r())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(we){if(we&&_e&&typeof we.stack=="string")return[we.stack,_e.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),O=w[0],z=w[1];if(O&&z){var ne=O.split(`
`),be=z.split(`
`);for(v=h=0;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;for(;v<be.length&&!be[v].includes("DetermineComponentFrameRoot");)v++;if(h===ne.length||v===be.length)for(h=ne.length-1,v=be.length-1;1<=h&&0<=v&&ne[h]!==be[v];)v--;for(;1<=h&&0<=v;h--,v--)if(ne[h]!==be[v]){if(h!==1||v!==1)do if(h--,v--,0>v||ne[h]!==be[v]){var Ae=`
`+ne[h].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=h&&0<=v);break}}}finally{Pe=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ee(c):""}function Be(r,s){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==s&&s!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ce(r.type,!1);case 11:return Ce(r.type.render,!1);case 1:return Ce(r.type,!0);case 31:return Ee("Activity");default:return""}}function Ue(r){try{var s="",c=null;do s+=Be(r,c),c=r,r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var fe=Object.prototype.hasOwnProperty,Le=e.unstable_scheduleCallback,le=e.unstable_cancelCallback,he=e.unstable_shouldYield,$e=e.unstable_requestPaint,Ie=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,En=e.unstable_LowPriority,Tn=e.unstable_IdlePriority,lr=e.log,vr=e.unstable_setDisableYieldValue,dn=null,Ct=null;function bn(r){if(typeof lr=="function"&&vr(r),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(dn,r)}catch{}}var hn=Math.clz32?Math.clz32:zi,qr=Math.log,ra=Math.LN2;function zi(r){return r>>>=0,r===0?32:31-(qr(r)/ra|0)|0}var kn=256,Dn=262144,os=4194304;function Nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cr(r,s,c){var h=r.pendingLanes;if(h===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var z=h&134217727;return z!==0?(h=z&~w,h!==0?v=Nr(h):(O&=z,O!==0?v=Nr(O):c||(c=z&~r,c!==0&&(v=Nr(c))))):(z=h&~w,z!==0?v=Nr(z):O!==0?v=Nr(O):c||(c=h&~r,c!==0&&(v=Nr(c)))),v===0?0:s!==0&&s!==v&&(s&w)===0&&(w=v&-v,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:v}function gi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ia(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var r=os;return os<<=1,(os&62914560)===0&&(os=4194304),r}function eo(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function Ui(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function to(r,s,c,h,v,w){var O=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var z=r.entanglements,ne=r.expirationTimes,be=r.hiddenUpdates;for(c=O&~c;0<c;){var Ae=31-hn(c),De=1<<Ae;z[Ae]=0,ne[Ae]=-1;var _e=be[Ae];if(_e!==null)for(be[Ae]=null,Ae=0;Ae<_e.length;Ae++){var we=_e[Ae];we!==null&&(we.lane&=-536870913)}c&=~De}h!==0&&sa(r,h,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~s))}function sa(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-hn(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function no(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var h=31-hn(c),v=1<<h;v&s|r[h]&s&&(r[h]|=s),c&=~v}}function ro(r,s){var c=s&-s;return c=(c&42)!==0?1:$n(c),(c&(r.suspendedLanes|s))!==0?0:c}function $n(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ks(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:Fx(r.type))}function Or(r,s){var c=oe.p;try{return oe.p=r,s()}finally{oe.p=c}}var ur=Math.random().toString(36).slice(2),sn="__reactFiber$"+ur,An="__reactProps$"+ur,Zr="__reactContainer$"+ur,bi="__reactEvents$"+ur,pe="__reactListeners$"+ur,Ye="__reactHandles$"+ur,lt="__reactResources$"+ur,pt="__reactMarker$"+ur;function tt(r){delete r[sn],delete r[An],delete r[bi],delete r[pe],delete r[Ye]}function dt(r){var s=r[sn];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Zr]||c[sn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=jx(r);r!==null;){if(c=r[sn])return c;r=jx(r)}return s}r=c,c=r.parentNode}return null}function xt(r){if(r=r[sn]||r[Zr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function mt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function In(r){var s=r[lt];return s||(s=r[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[pt]=!0}var aa=new Set,io={};function yi(r,s){Jn(r,s),Jn(r+"Capture",s)}function Jn(r,s){for(io[r]=s,r=0;r<s.length;r++)aa.add(s[r])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),so={},ao={};function oo(r){return fe.call(ao,r)?!0:fe.call(so,r)?!1:As.test(r)?ao[r]=!0:(so[r]=!0,!1)}function gt(r,s,c){if(oo(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function zt(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function Dr(r,s,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+h)}}function zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function js(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Cc(r,s,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return v.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function at(r){if(!r._valueTracker){var s=js(r)?"checked":"value";r._valueTracker=Cc(r,s,""+r[s])}}function an(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return r&&(h=js(r)?r.checked?"true":"false":r.value),r=h,r!==c?(s.setValue(r),!0):!1}function oa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var dl=/[\n"\\]/g;function en(r){return r.replace(dl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rc(r,s,c,h,v,w,O,z){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),s!=null?O==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+zn(s)):r.value!==""+zn(s)&&(r.value=""+zn(s)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),s!=null?Hi(r,O,zn(s)):c!=null?Hi(r,O,zn(c)):h!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.name=""+zn(z):r.removeAttribute("name")}function lo(r,s,c,h,v,w,O,z){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){at(r);return}c=c!=null?""+zn(c):"",s=s!=null?""+zn(s):c,z||s===r.value||(r.value=s),r.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=z?r.checked:!!h,r.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),at(r)}function Hi(r,s,c){s==="number"&&oa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Yt(r,s,c,h){if(r=r.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=s.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&h&&(r[c].defaultSelected=!0)}else{for(c=""+zn(c),s=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,h&&(r[v].defaultSelected=!0);return}s!==null||r[v].disabled||(s=r[v])}s!==null&&(s.selected=!0)}}function ls(r,s,c){if(s!=null&&(s=""+zn(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+zn(c):""}function la(r,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(i(92));if(Se(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=zn(s),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),at(r)}function vi(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(r,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,c):typeof c!="number"||c===0||Lc.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function hl(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&c[v]!==h&&ca(r,v,h)}else for(var w in s)s.hasOwnProperty(w)&&ca(r,w,s[w])}function co(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(r){return Bc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Mr(){}var ml=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var da=null,it=null;function Vr(r){var s=xt(r);if(s&&(r=s.stateNode)){var c=r[An]||null;e:switch(r=s.stateNode,s.type){case"input":if(Rc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==r&&h.form===r.form){var v=h[An]||null;if(!v)throw Error(i(90));Rc(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===r.form&&an(h)}break e;case"textarea":ls(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Yt(r,!!c.multiple,s,!1)}}}var Bt=!1;function Pc(r,s,c){if(Bt)return r(s,c);Bt=!0;try{var h=r(s);return h}finally{if(Bt=!1,(da!==null||it!==null)&&(wh(),da&&(s=da,r=it,it=da=null,Vr(s),r)))for(s=0;s<r.length;s++)Vr(r[s])}}function Ns(r,s){var c=r.stateNode;if(c===null)return null;var h=c[An]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ho=!1;if(Kr)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{ho=!1}var _i=null,Os=null,yn=null;function cs(){if(yn)return yn;var r,s=Os,c=s.length,h,v="value"in _i?_i.value:_i.textContent,w=v.length;for(r=0;r<c&&s[r]===v[r];r++);var O=c-r;for(h=1;h<=O&&s[c-h]===v[w-h];h++);return yn=v.slice(r,1<h?1-h:void 0)}function fo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function mo(){return!0}function Ad(){return!1}function Qn(r){function s(c,h,v,w,O){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var z in r)r.hasOwnProperty(z)&&(c=r[z],this[z]=c?c(w):w[z]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?mo:Ad,this.isPropagationStopped=Ad,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Qn(Gi),ha=_({},Gi,{view:0,detail:0}),St=Qn(ha),$c,_r,Fi,po=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?($c=r.screenX-Fi.screenX,_r=r.screenY-Fi.screenY):_r=$c=0,Fi=r),$c)},movementY:function(r){return"movementY"in r?r.movementY:_r}}),jd=Qn(po),Ic=_({},po,{dataTransfer:0}),np=Qn(Ic),Nd=_({},ha,{relatedTarget:0}),zc=Qn(Nd),rp=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Uc=Qn(rp),ip=_({},Gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xi=Qn(ip),sp=_({},Gi,{data:0}),Hc=Qn(sp),us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Dd[r])?!!s[r]:!1}function Fc(){return Gc}var Md=_({},ha,{key:function(r){if(r.key){var s=us[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Od[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(r){return r.type==="keypress"?fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Cd=Qn(Md),ap=_({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=Qn(ap),Yc=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),op=Qn(Yc),Ld=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bd=Qn(Ld),gl=_({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ds=Qn(gl),lp=_({},Gi,{newState:0,oldState:0}),go=Qn(lp),Cr=[9,13,27,32],bl=Kr&&"CompositionEvent"in window,fa=null;Kr&&"documentMode"in document&&(fa=document.documentMode);var cp=Kr&&"TextEvent"in window&&!fa,yl=Kr&&(!bl||fa&&8<fa&&11>=fa),vl=" ",Pd=!1;function $d(r,s){switch(r){case"keyup":return Cr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Xr(r,s){switch(r){case"compositionend":return qc(s);case"keypress":return s.which!==32?null:(Pd=!0,vl);case"textInput":return r=s.data,r===vl&&Pd?null:r;default:return null}}function pa(r,s){if(ma)return r==="compositionend"||!bl&&$d(r,s)?(r=cs(),yn=Os=_i=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yl&&s.locale!=="ko"?null:s.data;default:return null}}var up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wi(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!up[r.type]:s==="textarea"}function Id(r,s,c,h){da?it?it.push(h):it=[h]:da=h,s=Nh(s,"onChange"),0<s.length&&(c=new pl("onChange","change",null,c,h),r.push({event:c,listeners:s}))}var Si=null,bo=null;function yo(r){mx(r,0)}function vo(r){var s=mt(r);if(an(s))return r}function _o(r,s){if(r==="change")return s}var zd=!1;if(Kr){var Ei;if(Kr){var ga="oninput"in document;if(!ga){var Ud=document.createElement("div");Ud.setAttribute("oninput","return;"),ga=typeof Ud.oninput=="function"}Ei=ga}else Ei=!1;zd=Ei&&(!document.documentMode||9<document.documentMode)}function _l(){Si&&(Si.detachEvent("onpropertychange",Hd),bo=Si=null)}function Hd(r){if(r.propertyName==="value"&&vo(bo)){var s=[];Id(s,bo,r,uo(r)),Pc(yo,s)}}function Yi(r,s,c){r==="focusin"?(_l(),Si=s,bo=c,Si.attachEvent("onpropertychange",Hd)):r==="focusout"&&_l()}function dp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vo(bo)}function ba(r,s){if(r==="click")return vo(s)}function hp(r,s){if(r==="input"||r==="change")return vo(s)}function qi(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Fn=typeof Object.is=="function"?Object.is:qi;function ya(r,s){if(Fn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!fe.call(s,v)||!Fn(r[v],s[v]))return!1}return!0}function xl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xo(r,s){var c=xl(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=s&&h>=s)return{node:c,offset:s-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=xl(c)}}function wl(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?wl(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function wo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=oa(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=oa(r.document)}return s}function ds(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Sl=Kr&&"documentMode"in document&&11>=document.documentMode,hs=null,El=null,So=null,va=!1;function Gd(r,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;va||hs==null||hs!==oa(h)||(h=hs,"selectionStart"in h&&ds(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),So&&ya(So,h)||(So=h,h=Nh(El,"onSelect"),0<h.length&&(s=new pl("onSelect","select",null,s,c),r.push({event:s,listeners:h}),s.target=hs)))}function fs(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var _a={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Tl={},Fd={};Kr&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Yn(r){if(Tl[r])return Tl[r];if(!_a[r])return r;var s=_a[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Fd)return Tl[r]=s[c];return r}var Eo=Yn("animationend"),Yd=Yn("animationiteration"),To=Yn("animationstart"),fp=Yn("transitionrun"),qd=Yn("transitionstart"),mp=Yn("transitioncancel"),xa=Yn("transitionend"),Zd=new Map,ms="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ms.push("scrollEnd");function Rr(r,s){Zd.set(r,s),yi(s,[r])}var ko=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],dr=0,kl=0;function Ao(){for(var r=dr,s=kl=dr=0;s<r;){var c=Lr[s];Lr[s++]=null;var h=Lr[s];Lr[s++]=null;var v=Lr[s];Lr[s++]=null;var w=Lr[s];if(Lr[s++]=null,h!==null&&v!==null){var O=h.pending;O===null?v.next=v:(v.next=O.next,O.next=v),h.pending=v}w!==0&&wa(c,v,w)}}function ps(r,s,c,h){Lr[dr++]=r,Lr[dr++]=s,Lr[dr++]=c,Lr[dr++]=h,kl|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Zc(r,s,c,h){return ps(r,s,c,h),jo(r)}function Ti(r,s){return ps(r,null,null,s),jo(r)}function wa(r,s,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&s!==null&&(v=31-hn(c),r=w.hiddenUpdates,h=r[v],h===null?r[v]=[s]:h.push(s),s.lane=c|536870912),w):null}function jo(r){if(50<yu)throw yu=0,g0=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ms={};function pp(r,s,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(r,s,c,h){return new pp(r,s,c,h)}function Al(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ki(r,s){var c=r.alternate;return c===null?(c=hr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Vc(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function No(r,s,c,h,v,w){var O=0;if(h=r,typeof r=="function")Al(r)&&(O=1);else if(typeof r=="string")O=Kj(r,c,V.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case K:return r=hr(31,c,s,v),r.elementType=K,r.lanes=w,r;case k:return Cs(c.children,v,w,s);case N:O=8,v|=24;break;case C:return r=hr(12,c,s,v|2),r.elementType=C,r.lanes=w,r;case M:return r=hr(13,c,s,v),r.elementType=M,r.lanes=w,r;case G:return r=hr(19,c,s,v),r.elementType=G,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:O=10;break e;case $:O=9;break e;case D:O=11;break e;case H:O=14;break e;case F:O=16,h=null;break e}O=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return s=hr(O,c,s,v),s.elementType=r,s.type=h,s.lanes=w,s}function Cs(r,s,c,h){return r=hr(7,r,h,s),r.lanes=c,r}function jl(r,s,c){return r=hr(6,r,null,s),r.lanes=c,r}function Kc(r){var s=hr(18,null,null,0);return s.stateNode=r,s}function Wc(r,s,c){return s=hr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var a=new WeakMap;function d(r,s){if(typeof r=="object"&&r!==null){var c=a.get(r);return c!==void 0?c:(s={value:r,source:s,stack:Ue(s)},a.set(r,s),s)}return{value:r,source:s,stack:Ue(s)}}var b=[],E=0,j=null,I=0,ee=[],de=0,ve=null,Oe=1,Ge="";function Xe(r,s){b[E++]=I,b[E++]=j,j=r,I=s}function ht(r,s,c){ee[de++]=Oe,ee[de++]=Ge,ee[de++]=ve,ve=r;var h=Oe;r=Ge;var v=32-hn(h)-1;h&=~(1<<v),c+=1;var w=32-hn(s)+v;if(30<w){var O=v-v%5;w=(h&(1<<O)-1).toString(32),h>>=O,v-=O,Oe=1<<32-hn(s)+v|c<<v|h,Ge=w+r}else Oe=1<<w|c<<v|h,Ge=r}function Un(r){r.return!==null&&(Xe(r,1),ht(r,1,0))}function vn(r){for(;r===j;)j=b[--E],b[E]=null,I=b[--E],b[E]=null;for(;r===ve;)ve=ee[--de],ee[de]=null,Ge=ee[--de],ee[de]=null,Oe=ee[--de],ee[de]=null}function xr(r,s){ee[de++]=Oe,ee[de++]=Ge,ee[de++]=ve,Oe=s.id,Ge=s.overflow,ve=r}var Nt=null,Ot=null,bt=!1,gs=null,Br=!1,Nl=Error(i(519));function bs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(d(s,r)),Nl}function Xc(r){var s=r.stateNode,c=r.type,h=r.memoizedProps;switch(s[sn]=r,s[An]=h,c){case"dialog":vt("cancel",s),vt("close",s);break;case"iframe":case"object":case"embed":vt("load",s);break;case"video":case"audio":for(c=0;c<_u.length;c++)vt(_u[c],s);break;case"source":vt("error",s);break;case"img":case"image":case"link":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"input":vt("invalid",s),lo(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":vt("invalid",s);break;case"textarea":vt("invalid",s),la(s,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||yx(s.textContent,c)?(h.popover!=null&&(vt("beforetoggle",s),vt("toggle",s)),h.onScroll!=null&&vt("scroll",s),h.onScrollEnd!=null&&vt("scrollend",s),h.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||bs(r,!0)}function fn(r){for(Nt=r.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Nt=Nt.return}}function Zi(r){if(r!==Nt)return!1;if(!bt)return fn(r),bt=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||D0(r.type,r.memoizedProps)),c=!c),c&&Ot&&bs(r),fn(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Ax(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Ax(r)}else s===27?(s=Ot,Ba(r.type)?(r=B0,B0=null,Ot=r):Ot=s):Ot=Nt?ji(r.stateNode.nextSibling):null;return!0}function Rs(){Ot=Nt=null,bt=!1}function Jc(){var r=gs;return r!==null&&(zr===null?zr=r:zr.push.apply(zr,r),gs=null),r}function Oo(r){gs===null?gs=[r]:gs.push(r)}var Do=U(null),ys=null,Vi=null;function Sa(r,s,c){q(Do,s._currentValue),s._currentValue=c}function Ls(r){r._currentValue=Do.current,B(Do)}function gp(r,s,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===c)break;r=r.return}}function bp(r,s,c,h){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var z=w;w=v;for(var ne=0;ne<s.length;ne++)if(z.context===s[ne]){w.lanes|=c,z=w.alternate,z!==null&&(z.lanes|=c),gp(w.return,c,r),h||(O=null);break e}w=z.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(i(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),gp(O,c,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Ol(r,s,c,h){r=null;for(var v=s,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var z=v.type;Fn(v.pendingProps.value,O.value)||(r!==null?r.push(z):r=[z])}}else if(v===ie.current){if(O=v.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Tu):r=[Tu])}v=v.return}r!==null&&bp(s,r,c,h),s.flags|=262144}function Vd(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Mo(r){ys=r,Vi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function er(r){return rv(ys,r)}function Kd(r,s){return ys===null&&Mo(r),rv(r,s)}function rv(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Vi===null){if(r===null)throw Error(i(308));Vi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Vi=Vi.next=s;return c}var YA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},qA=e.unstable_scheduleCallback,ZA=e.unstable_NormalPriority,Mn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yp(){return{controller:new YA,data:new Map,refCount:0}}function Qc(r){r.refCount--,r.refCount===0&&qA(ZA,function(){r.controller.abort()})}var eu=null,vp=0,Dl=0,Ml=null;function VA(r,s){if(eu===null){var c=eu=[];vp=0,Dl=w0(),Ml={status:"pending",value:void 0,then:function(h){c.push(h)}}}return vp++,s.then(iv,iv),s}function iv(){if(--vp===0&&eu!==null){Ml!==null&&(Ml.status="fulfilled");var r=eu;eu=null,Dl=0,Ml=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function KA(r,s){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<c.length;v++)(0,c[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var sv=X.S;X.S=function(r,s){H_=Ie(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&VA(r,s),sv!==null&&sv(r,s)};var Co=U(null);function _p(){var r=Co.current;return r!==null?r:qt.pooledCache}function Wd(r,s){s===null?q(Co,Co.current):q(Co,s.pool)}function av(){var r=_p();return r===null?null:{parent:Mn._currentValue,pool:r}}var Cl=Error(i(460)),xp=Error(i(474)),Xd=Error(i(542)),Jd={then:function(){}};function ov(r){return r=r.status,r==="fulfilled"||r==="rejected"}function lv(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,uv(r),r;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,uv(r),r}throw Lo=s,Cl}}function Ro(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Lo=c,Cl):c}}var Lo=null;function cv(){if(Lo===null)throw Error(i(459));var r=Lo;return Lo=null,r}function uv(r){if(r===Cl||r===Xd)throw Error(i(483))}var Rl=null,tu=0;function Qd(r){var s=tu;return tu+=1,Rl===null&&(Rl=[]),lv(Rl,r,s)}function nu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function eh(r,s){throw s.$$typeof===x?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function dv(r){function s(ue,se){if(r){var ge=ue.deletions;ge===null?(ue.deletions=[se],ue.flags|=16):ge.push(se)}}function c(ue,se){if(!r)return null;for(;se!==null;)s(ue,se),se=se.sibling;return null}function h(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function v(ue,se){return ue=ki(ue,se),ue.index=0,ue.sibling=null,ue}function w(ue,se,ge){return ue.index=ge,r?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<se?(ue.flags|=67108866,se):ge):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function O(ue){return r&&ue.alternate===null&&(ue.flags|=67108866),ue}function z(ue,se,ge,Ne){return se===null||se.tag!==6?(se=jl(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function ne(ue,se,ge,Ne){var Qe=ge.type;return Qe===k?Ae(ue,se,ge.props.children,Ne,ge.key):se!==null&&(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===se.type)?(se=v(se,ge.props),nu(se,ge),se.return=ue,se):(se=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),nu(se,ge),se.return=ue,se)}function be(ue,se,ge,Ne){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=Wc(ge,ue.mode,Ne),se.return=ue,se):(se=v(se,ge.children||[]),se.return=ue,se)}function Ae(ue,se,ge,Ne,Qe){return se===null||se.tag!==7?(se=Cs(ge,ue.mode,Ne,Qe),se.return=ue,se):(se=v(se,ge),se.return=ue,se)}function De(ue,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=jl(""+se,ue.mode,ge),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return ge=No(se.type,se.key,se.props,null,ue.mode,ge),nu(ge,se),ge.return=ue,ge;case T:return se=Wc(se,ue.mode,ge),se.return=ue,se;case F:return se=Ro(se),De(ue,se,ge)}if(Se(se)||Y(se))return se=Cs(se,ue.mode,ge,null),se.return=ue,se;if(typeof se.then=="function")return De(ue,Qd(se),ge);if(se.$$typeof===A)return De(ue,Kd(ue,se),ge);eh(ue,se)}return null}function _e(ue,se,ge,Ne){var Qe=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Qe!==null?null:z(ue,se,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Qe?ne(ue,se,ge,Ne):null;case T:return ge.key===Qe?be(ue,se,ge,Ne):null;case F:return ge=Ro(ge),_e(ue,se,ge,Ne)}if(Se(ge)||Y(ge))return Qe!==null?null:Ae(ue,se,ge,Ne,null);if(typeof ge.then=="function")return _e(ue,se,Qd(ge),Ne);if(ge.$$typeof===A)return _e(ue,se,Kd(ue,ge),Ne);eh(ue,ge)}return null}function we(ue,se,ge,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ue=ue.get(ge)||null,z(se,ue,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,ne(se,ue,Ne,Qe);case T:return ue=ue.get(Ne.key===null?ge:Ne.key)||null,be(se,ue,Ne,Qe);case F:return Ne=Ro(Ne),we(ue,se,ge,Ne,Qe)}if(Se(Ne)||Y(Ne))return ue=ue.get(ge)||null,Ae(se,ue,Ne,Qe,null);if(typeof Ne.then=="function")return we(ue,se,ge,Qd(Ne),Qe);if(Ne.$$typeof===A)return we(ue,se,ge,Kd(se,Ne),Qe);eh(se,Ne)}return null}function qe(ue,se,ge,Ne){for(var Qe=null,Dt=null,Ke=se,ft=se=0,Tt=null;Ke!==null&&ft<ge.length;ft++){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Mt=_e(ue,Ke,ge[ft],Ne);if(Mt===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Mt.alternate===null&&s(ue,Ke),se=w(Mt,se,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt,Ke=Tt}if(ft===ge.length)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;ft<ge.length;ft++)Ke=De(ue,ge[ft],Ne),Ke!==null&&(se=w(Ke,se,ft),Dt===null?Qe=Ke:Dt.sibling=Ke,Dt=Ke);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);ft<ge.length;ft++)Tt=we(Ke,ue,ft,ge[ft],Ne),Tt!==null&&(r&&Tt.alternate!==null&&Ke.delete(Tt.key===null?ft:Tt.key),se=w(Tt,se,ft),Dt===null?Qe=Tt:Dt.sibling=Tt,Dt=Tt);return r&&Ke.forEach(function(Ua){return s(ue,Ua)}),bt&&Xe(ue,ft),Qe}function nt(ue,se,ge,Ne){if(ge==null)throw Error(i(151));for(var Qe=null,Dt=null,Ke=se,ft=se=0,Tt=null,Mt=ge.next();Ke!==null&&!Mt.done;ft++,Mt=ge.next()){Ke.index>ft?(Tt=Ke,Ke=null):Tt=Ke.sibling;var Ua=_e(ue,Ke,Mt.value,Ne);if(Ua===null){Ke===null&&(Ke=Tt);break}r&&Ke&&Ua.alternate===null&&s(ue,Ke),se=w(Ua,se,ft),Dt===null?Qe=Ua:Dt.sibling=Ua,Dt=Ua,Ke=Tt}if(Mt.done)return c(ue,Ke),bt&&Xe(ue,ft),Qe;if(Ke===null){for(;!Mt.done;ft++,Mt=ge.next())Mt=De(ue,Mt.value,Ne),Mt!==null&&(se=w(Mt,se,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return bt&&Xe(ue,ft),Qe}for(Ke=h(Ke);!Mt.done;ft++,Mt=ge.next())Mt=we(Ke,ue,ft,Mt.value,Ne),Mt!==null&&(r&&Mt.alternate!==null&&Ke.delete(Mt.key===null?ft:Mt.key),se=w(Mt,se,ft),Dt===null?Qe=Mt:Dt.sibling=Mt,Dt=Mt);return r&&Ke.forEach(function(aN){return s(ue,aN)}),bt&&Xe(ue,ft),Qe}function Gt(ue,se,ge,Ne){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Qe=ge.key;se!==null;){if(se.key===Qe){if(Qe=ge.type,Qe===k){if(se.tag===7){c(ue,se.sibling),Ne=v(se,ge.props.children),Ne.return=ue,ue=Ne;break e}}else if(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===F&&Ro(Qe)===se.type){c(ue,se.sibling),Ne=v(se,ge.props),nu(Ne,ge),Ne.return=ue,ue=Ne;break e}c(ue,se);break}else s(ue,se);se=se.sibling}ge.type===k?(Ne=Cs(ge.props.children,ue.mode,Ne,ge.key),Ne.return=ue,ue=Ne):(Ne=No(ge.type,ge.key,ge.props,null,ue.mode,Ne),nu(Ne,ge),Ne.return=ue,ue=Ne)}return O(ue);case T:e:{for(Qe=ge.key;se!==null;){if(se.key===Qe)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){c(ue,se.sibling),Ne=v(se,ge.children||[]),Ne.return=ue,ue=Ne;break e}else{c(ue,se);break}else s(ue,se);se=se.sibling}Ne=Wc(ge,ue.mode,Ne),Ne.return=ue,ue=Ne}return O(ue);case F:return ge=Ro(ge),Gt(ue,se,ge,Ne)}if(Se(ge))return qe(ue,se,ge,Ne);if(Y(ge)){if(Qe=Y(ge),typeof Qe!="function")throw Error(i(150));return ge=Qe.call(ge),nt(ue,se,ge,Ne)}if(typeof ge.then=="function")return Gt(ue,se,Qd(ge),Ne);if(ge.$$typeof===A)return Gt(ue,se,Kd(ue,ge),Ne);eh(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(c(ue,se.sibling),Ne=v(se,ge),Ne.return=ue,ue=Ne):(c(ue,se),Ne=jl(ge,ue.mode,Ne),Ne.return=ue,ue=Ne),O(ue)):c(ue,se)}return function(ue,se,ge,Ne){try{tu=0;var Qe=Gt(ue,se,ge,Ne);return Rl=null,Qe}catch(Ke){if(Ke===Cl||Ke===Xd)throw Ke;var Dt=hr(29,Ke,null,ue.mode);return Dt.lanes=Ne,Dt.return=ue,Dt}finally{}}}var Bo=dv(!0),hv=dv(!1),Ea=!1;function wp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ta(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,s,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Rt&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=jo(r),wa(r,null,c),s}return ps(r,h,s,c),jo(r)}function ru(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}function Ep(r,s){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?v=w=s:w=w.next=s}else v=w=s;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var Tp=!1;function iu(){if(Tp){var r=Ml;if(r!==null)throw r}}function su(r,s,c,h){Tp=!1;var v=r.updateQueue;Ea=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,z=v.shared.pending;if(z!==null){v.shared.pending=null;var ne=z,be=ne.next;ne.next=null,O===null?w=be:O.next=be,O=ne;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,z=Ae.lastBaseUpdate,z!==O&&(z===null?Ae.firstBaseUpdate=be:z.next=be,Ae.lastBaseUpdate=ne))}if(w!==null){var De=v.baseState;O=0,Ae=be=ne=null,z=w;do{var _e=z.lane&-536870913,we=_e!==z.lane;if(we?(Et&_e)===_e:(h&_e)===_e){_e!==0&&_e===Dl&&(Tp=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var qe=r,nt=z;_e=s;var Gt=c;switch(nt.tag){case 1:if(qe=nt.payload,typeof qe=="function"){De=qe.call(Gt,De,_e);break e}De=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=nt.payload,_e=typeof qe=="function"?qe.call(Gt,De,_e):qe,_e==null)break e;De=_({},De,_e);break e;case 2:Ea=!0}}_e=z.callback,_e!==null&&(r.flags|=64,we&&(r.flags|=8192),we=v.callbacks,we===null?v.callbacks=[_e]:we.push(_e))}else we={lane:_e,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ae===null?(be=Ae=we,ne=De):Ae=Ae.next=we,O|=_e;if(z=z.next,z===null){if(z=v.shared.pending,z===null)break;we=z,z=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);Ae===null&&(ne=De),v.baseState=ne,v.firstBaseUpdate=be,v.lastBaseUpdate=Ae,w===null&&(v.shared.lanes=0),Da|=O,r.lanes=O,r.memoizedState=De}}function fv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function mv(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)fv(c[r],s)}var Ll=U(null),th=U(0);function pv(r,s){r=Fs,q(th,r),q(Ll,s),Fs=r|s.baseLanes}function kp(){q(th,Fs),q(Ll,Ll.current)}function Ap(){Fs=th.current,B(Ll),B(th)}var Jr=U(null),Ai=null;function Aa(r){var s=r.alternate;q(jn,jn.current&1),q(Jr,r),Ai===null&&(s===null||Ll.current!==null||s.memoizedState!==null)&&(Ai=r)}function jp(r){q(jn,jn.current),q(Jr,r),Ai===null&&(Ai=r)}function gv(r){r.tag===22?(q(jn,jn.current),q(Jr,r),Ai===null&&(Ai=r)):ja()}function ja(){q(jn,jn.current),q(Jr,Jr.current)}function Qr(r){B(Jr),Ai===r&&(Ai=null),B(jn)}var jn=U(0);function nh(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||L0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Bs=0,ct=null,Ut=null,Cn=null,rh=!1,Bl=!1,Po=!1,ih=0,au=0,Pl=null,WA=0;function _n(){throw Error(i(321))}function Np(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Fn(r[c],s[c]))return!1;return!0}function Op(r,s,c,h,v,w){return Bs=w,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?Qv:Yp,Po=!1,w=c(h,v),Po=!1,Bl&&(w=yv(s,c,h,v)),bv(r),w}function bv(r){X.H=cu;var s=Ut!==null&&Ut.next!==null;if(Bs=0,Cn=Ut=ct=null,rh=!1,au=0,Pl=null,s)throw Error(i(300));r===null||Rn||(r=r.dependencies,r!==null&&Vd(r)&&(Rn=!0))}function yv(r,s,c,h){ct=r;var v=0;do{if(Bl&&(Pl=null),au=0,Bl=!1,25<=v)throw Error(i(301));if(v+=1,Cn=Ut=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=e_,w=s(c,h)}while(Bl);return w}function XA(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?ou(s):s,r=r.useState()[0],(Ut!==null?Ut.memoizedState:null)!==r&&(ct.flags|=1024),s}function Dp(){var r=ih!==0;return ih=0,r}function Mp(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Cp(r){if(rh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rh=!1}Bs=0,Cn=Ut=ct=null,Bl=!1,au=ih=0,Pl=null}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function Nn(){if(Ut===null){var r=ct.alternate;r=r!==null?r.memoizedState:null}else r=Ut.next;var s=Cn===null?ct.memoizedState:Cn.next;if(s!==null)Cn=s,Ut=r;else{if(r===null)throw ct.alternate===null?Error(i(467)):Error(i(310));Ut=r,r={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Cn===null?ct.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(r){var s=au;return au+=1,Pl===null&&(Pl=[]),r=lv(Pl,r,s),s=ct,(Cn===null?s.memoizedState:Cn.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Qv:Yp),r}function ah(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ou(r);if(r.$$typeof===A)return er(r)}throw Error(i(438,String(r)))}function Rp(r){var s=null,c=ct.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=sh(),ct.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),h=0;h<r;h++)c[h]=ae;return s.index++,c}function Ps(r,s){return typeof s=="function"?s(r):s}function oh(r){var s=Nn();return Lp(s,Ut,r)}function Lp(r,s,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var v=r.baseQueue,w=h.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}s.baseQueue=v=w,h.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{s=v.next;var z=O=null,ne=null,be=s,Ae=!1;do{var De=be.lane&-536870913;if(De!==be.lane?(Et&De)===De:(Bs&De)===De){var _e=be.revertLane;if(_e===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),De===Dl&&(Ae=!0);else if((Bs&_e)===_e){be=be.next,_e===Dl&&(Ae=!0);continue}else De={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=De,O=w):ne=ne.next=De,ct.lanes|=_e,Da|=_e;De=be.action,Po&&c(w,De),w=be.hasEagerState?be.eagerState:c(w,De)}else _e={lane:De,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(z=ne=_e,O=w):ne=ne.next=_e,ct.lanes|=De,Da|=De;be=be.next}while(be!==null&&be!==s);if(ne===null?O=w:ne.next=z,!Fn(w,r.memoizedState)&&(Rn=!0,Ae&&(c=Ml,c!==null)))throw c;r.memoizedState=w,r.baseState=O,r.baseQueue=ne,h.lastRenderedState=w}return v===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Bp(r){var s=Nn(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,v=c.pending,w=s.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);Fn(w,s.memoizedState)||(Rn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,h]}function vv(r,s,c){var h=ct,v=Nn(),w=bt;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=s();var O=!Fn((Ut||v).memoizedState,c);if(O&&(v.memoizedState=c,Rn=!0),v=v.queue,Ip(wv.bind(null,h,v,r),[r]),v.getSnapshot!==s||O||Cn!==null&&Cn.memoizedState.tag&1){if(h.flags|=2048,$l(9,{destroy:void 0},xv.bind(null,h,v,c,s),null),qt===null)throw Error(i(349));w||(Bs&127)!==0||_v(h,s,c)}return c}function _v(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=ct.updateQueue,s===null?(s=sh(),ct.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function xv(r,s,c,h){s.value=c,s.getSnapshot=h,Sv(s)&&Ev(r)}function wv(r,s,c){return c(function(){Sv(s)&&Ev(r)})}function Sv(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Fn(r,c)}catch{return!0}}function Ev(r){var s=Ti(r,2);s!==null&&Ur(s,r,2)}function Pp(r){var s=wr();if(typeof r=="function"){var c=r;if(r=c(),Po){bn(!0);try{c()}finally{bn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:r},s}function Tv(r,s,c,h){return r.baseState=c,Lp(r,Ut,typeof h=="function"?h:Ps)}function JA(r,s,c,h,v){if(uh(r))throw Error(i(485));if(r=s.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};X.T!==null?c(!0):w.isTransition=!1,h(w),c=s.pending,c===null?(w.next=s.pending=w,kv(s,w)):(w.next=c.next,s.pending=c.next=w)}}function kv(r,s){var c=s.action,h=s.payload,v=r.state;if(s.isTransition){var w=X.T,O={};X.T=O;try{var z=c(v,h),ne=X.S;ne!==null&&ne(O,z),Av(r,s,z)}catch(be){$p(r,s,be)}finally{w!==null&&O.types!==null&&(w.types=O.types),X.T=w}}else try{w=c(v,h),Av(r,s,w)}catch(be){$p(r,s,be)}}function Av(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){jv(r,s,h)},function(h){return $p(r,s,h)}):jv(r,s,c)}function jv(r,s,c){s.status="fulfilled",s.value=c,Nv(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,kv(r,c)))}function $p(r,s,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,Nv(s),s=s.next;while(s!==h)}r.action=null}function Nv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ov(r,s){return s}function Dv(r,s){if(bt){var c=qt.formState;if(c!==null){e:{var h=ct;if(bt){if(Ot){t:{for(var v=Ot,w=Br;v.nodeType!==8;){if(!w){v=null;break t}if(v=ji(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Ot=ji(v.nextSibling),h=v.data==="F!";break e}}bs(h)}h=!1}h&&(s=c[0])}}return c=wr(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ov,lastRenderedState:s},c.queue=h,c=Wv.bind(null,ct,h),h.dispatch=c,h=Pp(!1),w=Fp.bind(null,ct,!1,h.queue),h=wr(),v={state:s,dispatch:null,action:r,pending:null},h.queue=v,c=JA.bind(null,ct,v,w,c),v.dispatch=c,h.memoizedState=r,[s,c,!1]}function Mv(r){var s=Nn();return Cv(s,Ut,r)}function Cv(r,s,c){if(s=Lp(r,s,Ov)[0],r=oh(Ps)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=ou(s)}catch(O){throw O===Cl?Xd:O}else h=s;s=Nn();var v=s.queue,w=v.dispatch;return c!==s.memoizedState&&(ct.flags|=2048,$l(9,{destroy:void 0},QA.bind(null,v,c),null)),[h,w,r]}function QA(r,s){r.action=s}function Rv(r){var s=Nn(),c=Ut;if(c!==null)return Cv(s,c,r);Nn(),s=s.memoizedState,c=Nn();var h=c.queue.dispatch;return c.memoizedState=r,[s,h,!1]}function $l(r,s,c,h){return r={tag:r,create:c,deps:h,inst:s,next:null},s=ct.updateQueue,s===null&&(s=sh(),ct.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,s.lastEffect=r),r}function Lv(){return Nn().memoizedState}function lh(r,s,c,h){var v=wr();ct.flags|=r,v.memoizedState=$l(1|s,{destroy:void 0},c,h===void 0?null:h)}function ch(r,s,c,h){var v=Nn();h=h===void 0?null:h;var w=v.memoizedState.inst;Ut!==null&&h!==null&&Np(h,Ut.memoizedState.deps)?v.memoizedState=$l(s,w,c,h):(ct.flags|=r,v.memoizedState=$l(1|s,w,c,h))}function Bv(r,s){lh(8390656,8,r,s)}function Ip(r,s){ch(2048,8,r,s)}function ej(r){ct.flags|=4;var s=ct.updateQueue;if(s===null)s=sh(),ct.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function Pv(r){var s=Nn().memoizedState;return ej({ref:s,nextImpl:r}),function(){if((Rt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function $v(r,s){return ch(4,2,r,s)}function Iv(r,s){return ch(4,4,r,s)}function zv(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Uv(r,s,c){c=c!=null?c.concat([r]):null,ch(4,4,zv.bind(null,s,r),c)}function zp(){}function Hv(r,s){var c=Nn();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&Np(s,h[1])?h[0]:(c.memoizedState=[r,s],r)}function Gv(r,s){var c=Nn();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&Np(s,h[1]))return h[0];if(h=r(),Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h}function Up(r,s,c){return c===void 0||(Bs&1073741824)!==0&&(Et&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=F_(),ct.lanes|=r,Da|=r,c)}function Fv(r,s,c,h){return Fn(c,s)?c:Ll.current!==null?(r=Up(r,c,h),Fn(r,s)||(Rn=!0),r):(Bs&42)===0||(Bs&1073741824)!==0&&(Et&261930)===0?(Rn=!0,r.memoizedState=c):(r=F_(),ct.lanes|=r,Da|=r,s)}function Yv(r,s,c,h,v){var w=oe.p;oe.p=w!==0&&8>w?w:8;var O=X.T,z={};X.T=z,Fp(r,!1,s,c);try{var ne=v(),be=X.S;if(be!==null&&be(z,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=KA(ne,h);lu(r,s,Ae,ni(r))}else lu(r,s,h,ni(r))}catch(De){lu(r,s,{then:function(){},status:"rejected",reason:De},ni())}finally{oe.p=w,O!==null&&z.types!==null&&(O.types=z.types),X.T=O}}function tj(){}function Hp(r,s,c,h){if(r.tag!==5)throw Error(i(476));var v=qv(r).queue;Yv(r,v,s,J,c===null?tj:function(){return Zv(r),c(h)})}function qv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:J},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Zv(r){var s=qv(r);s.next===null&&(s=r.alternate.memoizedState),lu(r,s.next.queue,{},ni())}function Gp(){return er(Tu)}function Vv(){return Nn().memoizedState}function Kv(){return Nn().memoizedState}function nj(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=ni();r=Ta(c);var h=ka(s,r,c);h!==null&&(Ur(h,s,c),ru(h,s,c)),s={cache:yp()},r.payload=s;return}s=s.return}}function rj(r,s,c){var h=ni();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},uh(r)?Xv(s,c):(c=Zc(r,s,c,h),c!==null&&(Ur(c,r,h),Jv(c,s,h)))}function Wv(r,s,c){var h=ni();lu(r,s,c,h)}function lu(r,s,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(uh(r))Xv(s,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,z=w(O,c);if(v.hasEagerState=!0,v.eagerState=z,Fn(z,O))return ps(r,s,v,0),qt===null&&Ao(),!1}catch{}finally{}if(c=Zc(r,s,v,h),c!==null)return Ur(c,r,h),Jv(c,s,h),!0}return!1}function Fp(r,s,c,h){if(h={lane:2,revertLane:w0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},uh(r)){if(s)throw Error(i(479))}else s=Zc(r,c,h,2),s!==null&&Ur(s,r,2)}function uh(r){var s=r.alternate;return r===ct||s!==null&&s===ct}function Xv(r,s){Bl=rh=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function Jv(r,s,c){if((c&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,no(r,c)}}var cu={readContext:er,use:ah,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};cu.useEffectEvent=_n;var Qv={readContext:er,use:ah,useCallback:function(r,s){return wr().memoizedState=[r,s===void 0?null:s],r},useContext:er,useEffect:Bv,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,lh(4194308,4,zv.bind(null,s,r),c)},useLayoutEffect:function(r,s){return lh(4194308,4,r,s)},useInsertionEffect:function(r,s){lh(4,2,r,s)},useMemo:function(r,s){var c=wr();s=s===void 0?null:s;var h=r();if(Po){bn(!0);try{r()}finally{bn(!1)}}return c.memoizedState=[h,s],h},useReducer:function(r,s,c){var h=wr();if(c!==void 0){var v=c(s);if(Po){bn(!0);try{c(s)}finally{bn(!1)}}}else v=s;return h.memoizedState=h.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},h.queue=r,r=r.dispatch=rj.bind(null,ct,r),[h.memoizedState,r]},useRef:function(r){var s=wr();return r={current:r},s.memoizedState=r},useState:function(r){r=Pp(r);var s=r.queue,c=Wv.bind(null,ct,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:zp,useDeferredValue:function(r,s){var c=wr();return Up(c,r,s)},useTransition:function(){var r=Pp(!1);return r=Yv.bind(null,ct,r.queue,!0,!1),wr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var h=ct,v=wr();if(bt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),qt===null)throw Error(i(349));(Et&127)!==0||_v(h,s,c)}v.memoizedState=c;var w={value:c,getSnapshot:s};return v.queue=w,Bv(wv.bind(null,h,w,r),[r]),h.flags|=2048,$l(9,{destroy:void 0},xv.bind(null,h,w,c,s),null),c},useId:function(){var r=wr(),s=qt.identifierPrefix;if(bt){var c=Ge,h=Oe;c=(h&~(1<<32-hn(h)-1)).toString(32)+c,s="_"+s+"R_"+c,c=ih++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=WA++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Gp,useFormState:Dv,useActionState:Dv,useOptimistic:function(r){var s=wr();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Fp.bind(null,ct,!0,c),c.dispatch=s,[r,s]},useMemoCache:Rp,useCacheRefresh:function(){return wr().memoizedState=nj.bind(null,ct)},useEffectEvent:function(r){var s=wr(),c={impl:r};return s.memoizedState=c,function(){if((Rt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Yp={readContext:er,use:ah,useCallback:Hv,useContext:er,useEffect:Ip,useImperativeHandle:Uv,useInsertionEffect:$v,useLayoutEffect:Iv,useMemo:Gv,useReducer:oh,useRef:Lv,useState:function(){return oh(Ps)},useDebugValue:zp,useDeferredValue:function(r,s){var c=Nn();return Fv(c,Ut.memoizedState,r,s)},useTransition:function(){var r=oh(Ps)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:ou(r),s]},useSyncExternalStore:vv,useId:Vv,useHostTransitionStatus:Gp,useFormState:Mv,useActionState:Mv,useOptimistic:function(r,s){var c=Nn();return Tv(c,Ut,r,s)},useMemoCache:Rp,useCacheRefresh:Kv};Yp.useEffectEvent=Pv;var e_={readContext:er,use:ah,useCallback:Hv,useContext:er,useEffect:Ip,useImperativeHandle:Uv,useInsertionEffect:$v,useLayoutEffect:Iv,useMemo:Gv,useReducer:Bp,useRef:Lv,useState:function(){return Bp(Ps)},useDebugValue:zp,useDeferredValue:function(r,s){var c=Nn();return Ut===null?Up(c,r,s):Fv(c,Ut.memoizedState,r,s)},useTransition:function(){var r=Bp(Ps)[0],s=Nn().memoizedState;return[typeof r=="boolean"?r:ou(r),s]},useSyncExternalStore:vv,useId:Vv,useHostTransitionStatus:Gp,useFormState:Rv,useActionState:Rv,useOptimistic:function(r,s){var c=Nn();return Ut!==null?Tv(c,Ut,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Rp,useCacheRefresh:Kv};e_.useEffectEvent=Pv;function qp(r,s,c,h){s=r.memoizedState,c=c(h,s),c=c==null?s:_({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Zp={enqueueSetState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),ru(s,r,h))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var h=ni(),v=Ta(h);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=ka(r,v,h),s!==null&&(Ur(s,r,h),ru(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=ni(),h=Ta(c);h.tag=2,s!=null&&(h.callback=s),s=ka(r,h,c),s!==null&&(Ur(s,r,c),ru(s,r,c))}};function t_(r,s,c,h,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,O):s.prototype&&s.prototype.isPureReactComponent?!ya(c,h)||!ya(v,w):!0}function n_(r,s,c,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==r&&Zp.enqueueReplaceState(s,s.state,null)}function $o(r,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(r=r.defaultProps){c===s&&(c=_({},c));for(var v in r)c[v]===void 0&&(c[v]=r[v])}return c}function r_(r){ko(r)}function i_(r){console.error(r)}function s_(r){ko(r)}function dh(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function a_(r,s,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Vp(r,s,c){return c=Ta(c),c.tag=3,c.payload={element:null},c.callback=function(){dh(r,s)},c}function o_(r){return r=Ta(r),r.tag=3,r}function l_(r,s,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;r.payload=function(){return v(w)},r.callback=function(){a_(s,c,h)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){a_(s,c,h),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var z=h.stack;this.componentDidCatch(h.value,{componentStack:z!==null?z:""})})}function ij(r,s,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&Ol(s,c,v,!0),c=Jr.current,c!==null){switch(c.tag){case 31:case 13:return Ai===null?Sh():c.alternate===null&&xn===0&&(xn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Jd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),v0(r,h,v)),!1;case 22:return c.flags|=65536,h===Jd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),v0(r,h,v)),!1}throw Error(i(435,c.tag))}return v0(r,h,v),Sh(),!1}if(bt)return s=Jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==Nl&&(r=Error(i(422),{cause:h}),Oo(d(r,c)))):(h!==Nl&&(s=Error(i(423),{cause:h}),Oo(d(s,c))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,h=d(h,c),v=Vp(r.stateNode,h,v),Ep(r,v),xn!==4&&(xn=2)),!1;var w=Error(i(520),{cause:h});if(w=d(w,c),bu===null?bu=[w]:bu.push(w),xn!==4&&(xn=2),s===null)return!0;h=d(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=v&-v,c.lanes|=r,r=Vp(c.stateNode,h,r),Ep(c,r),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ma===null||!Ma.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=o_(v),l_(v,r,c,h),Ep(c,v),!1}c=c.return}while(c!==null);return!1}var Kp=Error(i(461)),Rn=!1;function tr(r,s,c,h){s.child=r===null?hv(s,null,c,h):Bo(s,r.child,c,h)}function c_(r,s,c,h,v){c=c.render;var w=s.ref;if("ref"in h){var O={};for(var z in h)z!=="ref"&&(O[z]=h[z])}else O=h;return Mo(s),h=Op(r,s,c,O,w,v),z=Dp(),r!==null&&!Rn?(Mp(r,s,v),$s(r,s,v)):(bt&&z&&Un(s),s.flags|=1,tr(r,s,h,v),s.child)}function u_(r,s,c,h,v){if(r===null){var w=c.type;return typeof w=="function"&&!Al(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,d_(r,s,w,h,v)):(r=No(c.type,null,h,s,s.mode,v),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!r0(r,v)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:ya,c(O,h)&&r.ref===s.ref)return $s(r,s,v)}return s.flags|=1,r=ki(w,h),r.ref=s.ref,r.return=s,s.child=r}function d_(r,s,c,h,v){if(r!==null){var w=r.memoizedProps;if(ya(w,h)&&r.ref===s.ref)if(Rn=!1,s.pendingProps=h=w,r0(r,v))(r.flags&131072)!==0&&(Rn=!0);else return s.lanes=r.lanes,$s(r,s,v)}return Wp(r,s,c,h,v)}function h_(r,s,c,h){var v=h.children,w=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=s.child=r.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,s.child=null;return f_(r,s,w,c,h)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wd(s,w!==null?w.cachePool:null),w!==null?pv(s,w):kp(),gv(s);else return h=s.lanes=536870912,f_(r,s,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Wd(s,w.cachePool),pv(s,w),ja(),s.memoizedState=null):(r!==null&&Wd(s,null),kp(),ja());return tr(r,s,v,c),s.child}function uu(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function f_(r,s,c,h,v){var w=_p();return w=w===null?null:{parent:Mn._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},r!==null&&Wd(s,null),kp(),gv(s),r!==null&&Ol(r,s,h,!0),s.childLanes=v,null}function hh(r,s){return s=mh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function m_(r,s,c){return Bo(s,r.child,null,c),r=hh(s,s.pendingProps),r.flags|=2,Qr(s),s.memoizedState=null,r}function sj(r,s,c){var h=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(bt){if(h.mode==="hidden")return r=hh(s,h),s.lanes=536870912,uu(null,r);if(jp(s),(r=Ot)?(r=kx(r,Br),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Kc(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw bs(s);return s.lanes=536870912,null}return hh(s,h)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(jp(s),v)if(s.flags&256)s.flags&=-257,s=m_(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Rn||Ol(r,s,c,!1),v=(c&r.childLanes)!==0,Rn||v){if(h=qt,h!==null&&(O=ro(h,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ti(r,O),Ur(h,r,O),Kp;Sh(),s=m_(r,s,c)}else r=w.treeContext,Ot=ji(O.nextSibling),Nt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=hh(s,h),s.flags|=4096;return s}return r=ki(r.child,{mode:h.mode,children:h.children}),r.ref=s.ref,s.child=r,r.return=s,r}function fh(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Wp(r,s,c,h,v){return Mo(s),c=Op(r,s,c,h,void 0,v),h=Dp(),r!==null&&!Rn?(Mp(r,s,v),$s(r,s,v)):(bt&&h&&Un(s),s.flags|=1,tr(r,s,c,v),s.child)}function p_(r,s,c,h,v,w){return Mo(s),s.updateQueue=null,c=yv(s,h,c,v),bv(r),h=Dp(),r!==null&&!Rn?(Mp(r,s,w),$s(r,s,w)):(bt&&h&&Un(s),s.flags|=1,tr(r,s,c,w),s.child)}function g_(r,s,c,h,v){if(Mo(s),s.stateNode===null){var w=Ms,O=c.contextType;typeof O=="object"&&O!==null&&(w=er(O)),w=new c(h,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Zp,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=h,w.state=s.memoizedState,w.refs={},wp(s),O=c.contextType,w.context=typeof O=="object"&&O!==null?er(O):Ms,w.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(qp(s,c,O,h),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Zp.enqueueReplaceState(w,w.state,null),su(s,h,w,v),iu(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){w=s.stateNode;var z=s.memoizedProps,ne=$o(c,z);w.props=ne;var be=w.context,Ae=c.contextType;O=Ms,typeof Ae=="object"&&Ae!==null&&(O=er(Ae));var De=c.getDerivedStateFromProps;Ae=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function",z=s.pendingProps!==z,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z||be!==O)&&n_(s,w,h,O),Ea=!1;var _e=s.memoizedState;w.state=_e,su(s,h,w,v),iu(),be=s.memoizedState,z||_e!==be||Ea?(typeof De=="function"&&(qp(s,c,De,h),be=s.memoizedState),(ne=Ea||t_(s,c,ne,h,_e,be,O))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=be),w.props=h,w.state=be,w.context=O,h=ne):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Sp(r,s),O=s.memoizedProps,Ae=$o(c,O),w.props=Ae,De=s.pendingProps,_e=w.context,be=c.contextType,ne=Ms,typeof be=="object"&&be!==null&&(ne=er(be)),z=c.getDerivedStateFromProps,(be=typeof z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==De||_e!==ne)&&n_(s,w,h,ne),Ea=!1,_e=s.memoizedState,w.state=_e,su(s,h,w,v),iu();var we=s.memoizedState;O!==De||_e!==we||Ea||r!==null&&r.dependencies!==null&&Vd(r.dependencies)?(typeof z=="function"&&(qp(s,c,z,h),we=s.memoizedState),(Ae=Ea||t_(s,c,Ae,h,_e,we,ne)||r!==null&&r.dependencies!==null&&Vd(r.dependencies))?(be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,we,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,we,ne)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=we),w.props=h,w.state=we,w.context=ne,h=Ae):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&_e===r.memoizedState||(s.flags|=1024),h=!1)}return w=h,fh(r,s),h=(s.flags&128)!==0,w||h?(w=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,r!==null&&h?(s.child=Bo(s,r.child,null,v),s.child=Bo(s,null,c,v)):tr(r,s,c,v),s.memoizedState=w.state,r=s.child):r=$s(r,s,v),r}function b_(r,s,c,h){return Rs(),s.flags|=256,tr(r,s,c,h),s.child}var Xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jp(r){return{baseLanes:r,cachePool:av()}}function Qp(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=ti),r}function y_(r,s,c){var h=s.pendingProps,v=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(jn.current&2)!==0),O&&(v=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,r===null){if(bt){if(v?Aa(s):ja(),(r=Ot)?(r=kx(r,Br),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ve!==null?{id:Oe,overflow:Ge}:null,retryLane:536870912,hydrationErrors:null},c=Kc(r),c.return=s,s.child=c,Nt=s,Ot=null)):r=null,r===null)throw bs(s);return L0(r)?s.lanes=32:s.lanes=536870912,null}var z=h.children;return h=h.fallback,v?(ja(),v=s.mode,z=mh({mode:"hidden",children:z},v),h=Cs(h,v,c,null),z.return=s,h.return=s,z.sibling=h,s.child=z,h=s.child,h.memoizedState=Jp(c),h.childLanes=Qp(r,O,c),s.memoizedState=Xp,uu(null,h)):(Aa(s),e0(s,z))}var ne=r.memoizedState;if(ne!==null&&(z=ne.dehydrated,z!==null)){if(w)s.flags&256?(Aa(s),s.flags&=-257,s=t0(r,s,c)):s.memoizedState!==null?(ja(),s.child=r.child,s.flags|=128,s=null):(ja(),z=h.fallback,v=s.mode,h=mh({mode:"visible",children:h.children},v),z=Cs(z,v,c,null),z.flags|=2,h.return=s,z.return=s,h.sibling=z,s.child=h,Bo(s,r.child,null,c),h=s.child,h.memoizedState=Jp(c),h.childLanes=Qp(r,O,c),s.memoizedState=Xp,s=uu(null,h));else if(Aa(s),L0(z)){if(O=z.nextSibling&&z.nextSibling.dataset,O)var be=O.dgst;O=be,h=Error(i(419)),h.stack="",h.digest=O,Oo({value:h,source:null,stack:null}),s=t0(r,s,c)}else if(Rn||Ol(r,s,c,!1),O=(c&r.childLanes)!==0,Rn||O){if(O=qt,O!==null&&(h=ro(O,c),h!==0&&h!==ne.retryLane))throw ne.retryLane=h,Ti(r,h),Ur(O,r,h),Kp;R0(z)||Sh(),s=t0(r,s,c)}else R0(z)?(s.flags|=192,s.child=r.child,s=null):(r=ne.treeContext,Ot=ji(z.nextSibling),Nt=s,bt=!0,gs=null,Br=!1,r!==null&&xr(s,r),s=e0(s,h.children),s.flags|=4096);return s}return v?(ja(),z=h.fallback,v=s.mode,ne=r.child,be=ne.sibling,h=ki(ne,{mode:"hidden",children:h.children}),h.subtreeFlags=ne.subtreeFlags&65011712,be!==null?z=ki(be,z):(z=Cs(z,v,c,null),z.flags|=2),z.return=s,h.return=s,h.sibling=z,s.child=h,uu(null,h),h=s.child,z=r.child.memoizedState,z===null?z=Jp(c):(v=z.cachePool,v!==null?(ne=Mn._currentValue,v=v.parent!==ne?{parent:ne,pool:ne}:v):v=av(),z={baseLanes:z.baseLanes|c,cachePool:v}),h.memoizedState=z,h.childLanes=Qp(r,O,c),s.memoizedState=Xp,uu(r.child,h)):(Aa(s),c=r.child,r=c.sibling,c=ki(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,r!==null&&(O=s.deletions,O===null?(s.deletions=[r],s.flags|=16):O.push(r)),s.child=c,s.memoizedState=null,c)}function e0(r,s){return s=mh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function mh(r,s){return r=hr(22,r,null,s),r.lanes=0,r}function t0(r,s,c){return Bo(s,r.child,null,c),r=e0(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function v_(r,s,c){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),gp(r.return,s,c)}function n0(r,s,c,h,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=c,O.tailMode=v,O.treeForkCount=w)}function __(r,s,c){var h=s.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var O=jn.current,z=(O&2)!==0;if(z?(O=O&1|2,s.flags|=128):O&=1,q(jn,O),tr(r,s,h,c),h=bt?I:0,!z&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&v_(r,c,s);else if(r.tag===19)v_(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(c=s.child,v=null;c!==null;)r=c.alternate,r!==null&&nh(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),n0(s,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(r=v.alternate,r!==null&&nh(r)===null){s.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}n0(s,!0,c,null,w,h);break;case"together":n0(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function $s(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Da|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Ol(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=ki(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=ki(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function r0(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Vd(r)))}function aj(r,s,c){switch(s.tag){case 3:me(s,s.stateNode.containerInfo),Sa(s,Mn,r.memoizedState.cache),Rs();break;case 27:case 5:xe(s);break;case 4:me(s,s.stateNode.containerInfo);break;case 10:Sa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,jp(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Aa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?y_(r,s,c):(Aa(s),r=$s(r,s,c),r!==null?r.sibling:null);Aa(s);break;case 19:var v=(r.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(Ol(r,s,c,!1),h=(c&s.childLanes)!==0),v){if(h)return __(r,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),q(jn,jn.current),h)break;return null;case 22:return s.lanes=0,h_(r,s,c,s.pendingProps);case 24:Sa(s,Mn,r.memoizedState.cache)}return $s(r,s,c)}function x_(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Rn=!0;else{if(!r0(r,c)&&(s.flags&128)===0)return Rn=!1,aj(r,s,c);Rn=(r.flags&131072)!==0}else Rn=!1,bt&&(s.flags&1048576)!==0&&ht(s,I,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(r=Ro(s.elementType),s.type=r,typeof r=="function")Al(r)?(h=$o(r,h),s.tag=1,s=g_(null,s,r,h,c)):(s.tag=0,s=Wp(null,s,r,h,c));else{if(r!=null){var v=r.$$typeof;if(v===D){s.tag=11,s=c_(null,s,r,h,c);break e}else if(v===H){s.tag=14,s=u_(null,s,r,h,c);break e}}throw s=re(r)||r,Error(i(306,s,""))}}return s;case 0:return Wp(r,s,s.type,s.pendingProps,c);case 1:return h=s.type,v=$o(h,s.pendingProps),g_(r,s,h,v,c);case 3:e:{if(me(s,s.stateNode.containerInfo),r===null)throw Error(i(387));h=s.pendingProps;var w=s.memoizedState;v=w.element,Sp(r,s),su(s,h,null,c);var O=s.memoizedState;if(h=O.cache,Sa(s,Mn,h),h!==w.cache&&bp(s,[Mn],c,!0),iu(),h=O.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=b_(r,s,h,c);break e}else if(h!==v){v=d(Error(i(424)),s),Oo(v),s=b_(r,s,h,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=ji(r.firstChild),Nt=s,bt=!0,gs=null,Br=!0,c=hv(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Rs(),h===v){s=$s(r,s,c);break e}tr(r,s,h,c)}s=s.child}return s;case 26:return fh(r,s),r===null?(c=Mx(s.type,null,s.pendingProps,null))?s.memoizedState=c:bt||(c=s.type,r=s.pendingProps,h=Oh(Z.current).createElement(c),h[sn]=s,h[An]=r,nr(h,c,r),wt(h),s.stateNode=h):s.memoizedState=Mx(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return xe(s),r===null&&bt&&(h=s.stateNode=Nx(s.type,s.pendingProps,Z.current),Nt=s,Br=!0,v=Ot,Ba(s.type)?(B0=v,Ot=ji(h.firstChild)):Ot=v),tr(r,s,s.pendingProps.children,c),fh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&bt&&((v=h=Ot)&&(h=Bj(h,s.type,s.pendingProps,Br),h!==null?(s.stateNode=h,Nt=s,Ot=ji(h.firstChild),Br=!1,v=!0):v=!1),v||bs(s)),xe(s),v=s.type,w=s.pendingProps,O=r!==null?r.memoizedProps:null,h=w.children,D0(v,w)?h=null:O!==null&&D0(v,O)&&(s.flags|=32),s.memoizedState!==null&&(v=Op(r,s,XA,null,null,c),Tu._currentValue=v),fh(r,s),tr(r,s,h,c),s.child;case 6:return r===null&&bt&&((r=c=Ot)&&(c=Pj(c,s.pendingProps,Br),c!==null?(s.stateNode=c,Nt=s,Ot=null,r=!0):r=!1),r||bs(s)),null;case 13:return y_(r,s,c);case 4:return me(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Bo(s,null,h,c):tr(r,s,h,c),s.child;case 11:return c_(r,s,s.type,s.pendingProps,c);case 7:return tr(r,s,s.pendingProps,c),s.child;case 8:return tr(r,s,s.pendingProps.children,c),s.child;case 12:return tr(r,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Sa(s,s.type,h.value),tr(r,s,h.children,c),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,Mo(s),v=er(v),h=h(v),s.flags|=1,tr(r,s,h,c),s.child;case 14:return u_(r,s,s.type,s.pendingProps,c);case 15:return d_(r,s,s.type,s.pendingProps,c);case 19:return __(r,s,c);case 31:return sj(r,s,c);case 22:return h_(r,s,c,s.pendingProps);case 24:return Mo(s),h=er(Mn),r===null?(v=_p(),v===null&&(v=qt,w=yp(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),s.memoizedState={parent:h,cache:v},wp(s),Sa(s,Mn,v)):((r.lanes&c)!==0&&(Sp(r,s),su(s,null,null,c),iu()),v=r.memoizedState,w=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Sa(s,Mn,h)):(h=w.cache,Sa(s,Mn,h),h!==v.cache&&bp(s,[Mn],c,!0))),tr(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Is(r){r.flags|=4}function i0(r,s,c,h,v){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(V_())r.flags|=8192;else throw Lo=Jd,xp}else r.flags&=-16777217}function w_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Px(s))if(V_())r.flags|=8192;else throw Lo=Jd,xp}function ph(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Qa():536870912,r.lanes|=s,Hl|=s)}function du(r,s){if(!bt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function tn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(s)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=h,r.childLanes=c,s}function oj(r,s,c){var h=s.pendingProps;switch(vn(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return tn(s),null;case 3:return c=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ls(Mn),ce(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Zi(s)?Is(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jc())),tn(s),null;case 26:var v=s.type,w=s.memoizedState;return r===null?(Is(s),w!==null?(tn(s),w_(s,w)):(tn(s),i0(s,v,null,h,c))):w?w!==r.memoizedState?(Is(s),tn(s),w_(s,w)):(tn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==h&&Is(s),tn(s),i0(s,v,r,h,c)),null;case 27:if(ke(s),c=Z.current,v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}r=V.current,Zi(s)?Xc(s):(r=Nx(v,h,c),s.stateNode=r,Is(s))}return tn(s),null;case 5:if(ke(s),v=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return tn(s),null}if(w=V.current,Zi(s))Xc(s);else{var O=Oh(Z.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?O.createElement(v,{is:h.is}):O.createElement(v)}}w[sn]=s,w[An]=h;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=w;e:switch(nr(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Is(s)}}return tn(s),i0(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&Is(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(r=Z.current,Zi(s)){if(r=s.stateNode,c=s.memoizedProps,h=null,v=Nt,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}r[sn]=s,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||yx(r.nodeValue,c)),r||bs(s,!0)}else r=Oh(r).createTextNode(h),r[sn]=s,s.stateNode=r}return tn(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(h=Zi(s),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),r=!1}else c=Jc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(Qr(s),s):(Qr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return tn(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Zi(s),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[sn]=s}else Rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),v=!1}else v=Jc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Qr(s),s):(Qr(s),null)}return Qr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),ph(s,s.updateQueue),tn(s),null);case 4:return ce(),r===null&&k0(s.stateNode.containerInfo),tn(s),null;case 10:return Ls(s.type),tn(s),null;case 19:if(B(jn),h=s.memoizedState,h===null)return tn(s),null;if(v=(s.flags&128)!==0,w=h.rendering,w===null)if(v)du(h,!1);else{if(xn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=nh(r),w!==null){for(s.flags|=128,du(h,!1),r=w.updateQueue,s.updateQueue=r,ph(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)Vc(c,r),c=c.sibling;return q(jn,jn.current&1|2),bt&&Xe(s,h.treeForkCount),s.child}r=r.sibling}h.tail!==null&&Ie()>_h&&(s.flags|=128,v=!0,du(h,!1),s.lanes=4194304)}else{if(!v)if(r=nh(w),r!==null){if(s.flags|=128,v=!0,r=r.updateQueue,s.updateQueue=r,ph(s,r),du(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!bt)return tn(s),null}else 2*Ie()-h.renderingStartTime>_h&&c!==536870912&&(s.flags|=128,v=!0,du(h,!1),s.lanes=4194304);h.isBackwards?(w.sibling=s.child,s.child=w):(r=h.last,r!==null?r.sibling=w:s.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Ie(),r.sibling=null,c=jn.current,q(jn,v?c&1|2:c&1),bt&&Xe(s,h.treeForkCount),r):(tn(s),null);case 22:case 23:return Qr(s),Ap(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),c=s.updateQueue,c!==null&&ph(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),r!==null&&B(Co),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ls(Mn),tn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function lj(r,s){switch(vn(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ls(Mn),ce(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ke(s),null;case 31:if(s.memoizedState!==null){if(Qr(s),s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Qr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return B(jn),null;case 4:return ce(),null;case 10:return Ls(s.type),null;case 22:case 23:return Qr(s),Ap(),r!==null&&B(Co),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ls(Mn),null;case 25:return null;default:return null}}function S_(r,s){switch(vn(s),s.tag){case 3:Ls(Mn),ce();break;case 26:case 27:case 5:ke(s);break;case 4:ce();break;case 31:s.memoizedState!==null&&Qr(s);break;case 13:Qr(s);break;case 19:B(jn);break;case 10:Ls(s.type);break;case 22:case 23:Qr(s),Ap(),r!==null&&B(Co);break;case 24:Ls(Mn)}}function hu(r,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&r)===r){h=void 0;var w=c.create,O=c.inst;h=w(),O.destroy=h}c=c.next}while(c!==v)}}catch(z){It(s,s.return,z)}}function Na(r,s,c){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&r)===r){var O=h.inst,z=O.destroy;if(z!==void 0){O.destroy=void 0,v=s;var ne=c,be=z;try{be()}catch(Ae){It(v,ne,Ae)}}}h=h.next}while(h!==w)}}catch(Ae){It(s,s.return,Ae)}}function E_(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{mv(s,c)}catch(h){It(r,r.return,h)}}}function T_(r,s,c){c.props=$o(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){It(r,s,h)}}function fu(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(v){It(r,s,v)}}function vs(r,s){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){It(r,s,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){It(r,s,v)}else c.current=null}function k_(r){var s=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){It(r,r.return,v)}}function s0(r,s,c){try{var h=r.stateNode;Oj(h,r.type,c,s),h[An]=s}catch(v){It(r,r.return,v)}}function A_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ba(r.type)||r.tag===4}function a0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||A_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ba(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function o0(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(o0(r,s,c),r=r.sibling;r!==null;)o0(r,s,c),r=r.sibling}function gh(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(h!==4&&(h===27&&Ba(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(gh(r,s,c),r=r.sibling;r!==null;)gh(r,s,c),r=r.sibling}function j_(r){var s=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);nr(s,h,c),s[sn]=r,s[An]=c}catch(w){It(r,r.return,w)}}var zs=!1,Ln=!1,l0=!1,N_=typeof WeakSet=="function"?WeakSet:Set,qn=null;function cj(r,s){if(r=r.containerInfo,N0=Ph,r=wo(r),ds(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,z=-1,ne=-1,be=0,Ae=0,De=r,_e=null;t:for(;;){for(var we;De!==c||v!==0&&De.nodeType!==3||(z=O+v),De!==w||h!==0&&De.nodeType!==3||(ne=O+h),De.nodeType===3&&(O+=De.nodeValue.length),(we=De.firstChild)!==null;)_e=De,De=we;for(;;){if(De===r)break t;if(_e===c&&++be===v&&(z=O),_e===w&&++Ae===h&&(ne=O),(we=De.nextSibling)!==null)break;De=_e,_e=De.parentNode}De=we}c=z===-1||ne===-1?null:{start:z,end:ne}}else c=null}c=c||{start:0,end:0}}else c=null;for(O0={focusedElem:r,selectionRange:c},Ph=!1,qn=s;qn!==null;)if(s=qn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,qn=r;else for(;qn!==null;){switch(s=qn,w=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)v=r[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=s,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var qe=$o(c.type,v);r=h.getSnapshotBeforeUpdate(qe,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(nt){It(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)C0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":C0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,qn=r;break}qn=s.return}}function O_(r,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(r,c),h&4&&hu(5,c);break;case 1:if(Hs(r,c),h&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(O){It(c,c.return,O)}else{var v=$o(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(v,s,r.__reactInternalSnapshotBeforeUpdate)}catch(O){It(c,c.return,O)}}h&64&&E_(c),h&512&&fu(c,c.return);break;case 3:if(Hs(r,c),h&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{mv(r,s)}catch(O){It(c,c.return,O)}}break;case 27:s===null&&h&4&&j_(c);case 26:case 5:Hs(r,c),s===null&&h&4&&k_(c),h&512&&fu(c,c.return);break;case 12:Hs(r,c);break;case 31:Hs(r,c),h&4&&C_(r,c);break;case 13:Hs(r,c),h&4&&R_(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=yj.bind(null,c),$j(r,c))));break;case 22:if(h=c.memoizedState!==null||zs,!h){s=s!==null&&s.memoizedState!==null||Ln,v=zs;var w=Ln;zs=h,(Ln=s)&&!w?Gs(r,c,(c.subtreeFlags&8772)!==0):Hs(r,c),zs=v,Ln=w}break;case 30:break;default:Hs(r,c)}}function D_(r){var s=r.alternate;s!==null&&(r.alternate=null,D_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&tt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,Pr=!1;function Us(r,s,c){for(c=c.child;c!==null;)M_(r,s,c),c=c.sibling}function M_(r,s,c){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(dn,c)}catch{}switch(c.tag){case 26:Ln||vs(c,s),Us(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ln||vs(c,s);var h=on,v=Pr;Ba(c.type)&&(on=c.stateNode,Pr=!1),Us(r,s,c),wu(c.stateNode),on=h,Pr=v;break;case 5:Ln||vs(c,s);case 6:if(h=on,v=Pr,on=null,Us(r,s,c),on=h,Pr=v,on!==null)if(Pr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(w){It(c,s,w)}else try{on.removeChild(c.stateNode)}catch(w){It(c,s,w)}break;case 18:on!==null&&(Pr?(r=on,Ex(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Wl(r)):Ex(on,c.stateNode));break;case 4:h=on,v=Pr,on=c.stateNode.containerInfo,Pr=!0,Us(r,s,c),on=h,Pr=v;break;case 0:case 11:case 14:case 15:Na(2,c,s),Ln||Na(4,c,s),Us(r,s,c);break;case 1:Ln||(vs(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&T_(c,s,h)),Us(r,s,c);break;case 21:Us(r,s,c);break;case 22:Ln=(h=Ln)||c.memoizedState!==null,Us(r,s,c),Ln=h;break;default:Us(r,s,c)}}function C_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wl(r)}catch(c){It(s,s.return,c)}}}function R_(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wl(r)}catch(c){It(s,s.return,c)}}function uj(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new N_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new N_),s;default:throw Error(i(435,r.tag))}}function bh(r,s){var c=uj(r);s.forEach(function(h){if(!c.has(h)){c.add(h);var v=vj.bind(null,r,h);h.then(v,v)}})}function $r(r,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=r,O=s,z=O;e:for(;z!==null;){switch(z.tag){case 27:if(Ba(z.type)){on=z.stateNode,Pr=!1;break e}break;case 5:on=z.stateNode,Pr=!1;break e;case 3:case 4:on=z.stateNode.containerInfo,Pr=!0;break e}z=z.return}if(on===null)throw Error(i(160));M_(w,O,v),on=null,Pr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)L_(s,r),s=s.sibling}var Ki=null;function L_(r,s){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$r(s,r),Ir(r),h&4&&(Na(3,r,r.return),hu(3,r),Na(5,r,r.return));break;case 1:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&64&&zs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Ki;if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[pt]||w[sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),nr(w,h,c),w[sn]=r,wt(w),h=w;break e;case"link":var O=Lx("link","href",v).get(h+(c.href||""));if(O){for(var z=0;z<O.length;z++)if(w=O[z],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(z,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;case"meta":if(O=Lx("meta","content",v).get(h+(c.content||""))){for(z=0;z<O.length;z++)if(w=O[z],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(z,1);break t}}w=v.createElement(h),nr(w,h,c),v.head.appendChild(w);break;default:throw Error(i(468,h))}w[sn]=r,wt(w),h=w}r.stateNode=h}else Bx(v,r.type,r.stateNode);else r.stateNode=Rx(v,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?Bx(v,r.type,r.stateNode):Rx(v,h,r.memoizedProps)):h===null&&r.stateNode!==null&&s0(r,r.memoizedProps,c.memoizedProps)}break;case 27:$r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),c!==null&&h&4&&s0(r,r.memoizedProps,c.memoizedProps);break;case 5:if($r(s,r),Ir(r),h&512&&(Ln||c===null||vs(c,c.return)),r.flags&32){v=r.stateNode;try{vi(v,"")}catch(qe){It(r,r.return,qe)}}h&4&&r.stateNode!=null&&(v=r.memoizedProps,s0(r,v,c!==null?c.memoizedProps:v)),h&1024&&(l0=!0);break;case 6:if($r(s,r),Ir(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(qe){It(r,r.return,qe)}}break;case 3:if(Ch=null,v=Ki,Ki=Dh(s.containerInfo),$r(s,r),Ki=v,Ir(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Wl(s.containerInfo)}catch(qe){It(r,r.return,qe)}l0&&(l0=!1,B_(r));break;case 4:h=Ki,Ki=Dh(r.stateNode.containerInfo),$r(s,r),Ir(r),Ki=h;break;case 12:$r(s,r),Ir(r);break;case 31:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 13:$r(s,r),Ir(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(vh=Ie()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 22:v=r.memoizedState!==null;var ne=c!==null&&c.memoizedState!==null,be=zs,Ae=Ln;if(zs=be||v,Ln=Ae||ne,$r(s,r),Ln=Ae,zs=be,Ir(r),h&8192)e:for(s=r.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(c===null||ne||zs||Ln||Io(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){ne=c=s;try{if(w=ne.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{z=ne.stateNode;var De=ne.memoizedProps.style,_e=De!=null&&De.hasOwnProperty("display")?De.display:null;z.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(qe){It(ne,ne.return,qe)}}}else if(s.tag===6){if(c===null){ne=s;try{ne.stateNode.nodeValue=v?"":ne.memoizedProps}catch(qe){It(ne,ne.return,qe)}}}else if(s.tag===18){if(c===null){ne=s;try{var we=ne.stateNode;v?Tx(we,!0):Tx(ne.stateNode,!1)}catch(qe){It(ne,ne.return,qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,bh(r,c))));break;case 19:$r(s,r),Ir(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,bh(r,h)));break;case 30:break;case 21:break;default:$r(s,r),Ir(r)}}function Ir(r){var s=r.flags;if(s&2){try{for(var c,h=r.return;h!==null;){if(A_(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var v=c.stateNode,w=a0(r);gh(r,w,v);break;case 5:var O=c.stateNode;c.flags&32&&(vi(O,""),c.flags&=-33);var z=a0(r);gh(r,z,O);break;case 3:case 4:var ne=c.stateNode.containerInfo,be=a0(r);o0(r,be,ne);break;default:throw Error(i(161))}}catch(Ae){It(r,r.return,Ae)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function B_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;B_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O_(r,s.alternate,s),s=s.sibling}function Io(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Na(4,s,s.return),Io(s);break;case 1:vs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&T_(s,s.return,c),Io(s);break;case 27:wu(s.stateNode);case 26:case 5:vs(s,s.return),Io(s);break;case 22:s.memoizedState===null&&Io(s);break;case 30:Io(s);break;default:Io(s)}r=r.sibling}}function Gs(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=r,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:Gs(v,w,c),hu(4,w);break;case 1:if(Gs(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(be){It(h,h.return,be)}if(h=w,v=h.updateQueue,v!==null){var z=h.stateNode;try{var ne=v.shared.hiddenCallbacks;if(ne!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ne.length;v++)fv(ne[v],z)}catch(be){It(h,h.return,be)}}c&&O&64&&E_(w),fu(w,w.return);break;case 27:j_(w);case 26:case 5:Gs(v,w,c),c&&h===null&&O&4&&k_(w),fu(w,w.return);break;case 12:Gs(v,w,c);break;case 31:Gs(v,w,c),c&&O&4&&C_(v,w);break;case 13:Gs(v,w,c),c&&O&4&&R_(v,w);break;case 22:w.memoizedState===null&&Gs(v,w,c),fu(w,w.return);break;case 30:break;default:Gs(v,w,c)}s=s.sibling}}function c0(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Qc(c))}function u0(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Qc(r))}function Wi(r,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)P_(r,s,c,h),s=s.sibling}function P_(r,s,c,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Wi(r,s,c,h),v&2048&&hu(9,s);break;case 1:Wi(r,s,c,h);break;case 3:Wi(r,s,c,h),v&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Qc(r)));break;case 12:if(v&2048){Wi(r,s,c,h),r=s.stateNode;try{var w=s.memoizedProps,O=w.id,z=w.onPostCommit;typeof z=="function"&&z(O,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ne){It(s,s.return,ne)}}else Wi(r,s,c,h);break;case 31:Wi(r,s,c,h);break;case 13:Wi(r,s,c,h);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?Wi(r,s,c,h):mu(r,s):w._visibility&2?Wi(r,s,c,h):(w._visibility|=2,Il(r,s,c,h,(s.subtreeFlags&10256)!==0||!1)),v&2048&&c0(O,s);break;case 24:Wi(r,s,c,h),v&2048&&u0(s.alternate,s);break;default:Wi(r,s,c,h)}}function Il(r,s,c,h,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=r,O=s,z=c,ne=h,be=O.flags;switch(O.tag){case 0:case 11:case 15:Il(w,O,z,ne,v),hu(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?Il(w,O,z,ne,v):mu(w,O):(Ae._visibility|=2,Il(w,O,z,ne,v)),v&&be&2048&&c0(O.alternate,O);break;case 24:Il(w,O,z,ne,v),v&&be&2048&&u0(O.alternate,O);break;default:Il(w,O,z,ne,v)}s=s.sibling}}function mu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,h=s,v=h.flags;switch(h.tag){case 22:mu(c,h),v&2048&&c0(h.alternate,h);break;case 24:mu(c,h),v&2048&&u0(h.alternate,h);break;default:mu(c,h)}s=s.sibling}}var pu=8192;function zl(r,s,c){if(r.subtreeFlags&pu)for(r=r.child;r!==null;)$_(r,s,c),r=r.sibling}function $_(r,s,c){switch(r.tag){case 26:zl(r,s,c),r.flags&pu&&r.memoizedState!==null&&Wj(c,Ki,r.memoizedState,r.memoizedProps);break;case 5:zl(r,s,c);break;case 3:case 4:var h=Ki;Ki=Dh(r.stateNode.containerInfo),zl(r,s,c),Ki=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=pu,pu=16777216,zl(r,s,c),pu=h):zl(r,s,c));break;default:zl(r,s,c)}}function I_(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function gu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];qn=h,U_(h,r)}I_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)z_(r),r=r.sibling}function z_(r){switch(r.tag){case 0:case 11:case 15:gu(r),r.flags&2048&&Na(9,r,r.return);break;case 3:gu(r);break;case 12:gu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,yh(r)):gu(r);break;default:gu(r)}}function yh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];qn=h,U_(h,r)}I_(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Na(8,s,s.return),yh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,yh(s));break;default:yh(s)}r=r.sibling}}function U_(r,s){for(;qn!==null;){var c=qn;switch(c.tag){case 0:case 11:case 15:Na(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,qn=h;else e:for(c=r;qn!==null;){h=qn;var v=h.sibling,w=h.return;if(D_(h),h===c){qn=null;break e}if(v!==null){v.return=w,qn=v;break e}qn=w}}}var dj={getCacheForType:function(r){var s=er(Mn),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return er(Mn).controller.signal}},hj=typeof WeakMap=="function"?WeakMap:Map,Rt=0,qt=null,yt=null,Et=0,$t=0,ei=null,Oa=!1,Ul=!1,d0=!1,Fs=0,xn=0,Da=0,zo=0,h0=0,ti=0,Hl=0,bu=null,zr=null,f0=!1,vh=0,H_=0,_h=1/0,xh=null,Ma=null,Hn=0,Ca=null,Gl=null,Ys=0,m0=0,p0=null,G_=null,yu=0,g0=null;function ni(){return(Rt&2)!==0&&Et!==0?Et&-Et:X.T!==null?w0():ks()}function F_(){if(ti===0)if((Et&536870912)===0||bt){var r=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),ti=r}else ti=536870912;return r=Jr.current,r!==null&&(r.flags|=32),ti}function Ur(r,s,c){(r===qt&&($t===2||$t===9)||r.cancelPendingCommit!==null)&&(Fl(r,0),Ra(r,Et,ti,!1)),Ui(r,c),((Rt&2)===0||r!==qt)&&(r===qt&&((Rt&2)===0&&(zo|=c),xn===4&&Ra(r,Et,ti,!1)),_s(r))}function Y_(r,s,c){if((Rt&6)!==0)throw Error(i(327));var h=!c&&(s&127)===0&&(s&r.expiredLanes)===0||gi(r,s),v=h?pj(r,s):y0(r,s,!0),w=h;do{if(v===0){Ul&&!h&&Ra(r,s,0,!1);break}else{if(c=r.current.alternate,w&&!fj(c)){v=y0(r,s,!1),w=!1;continue}if(v===2){if(w=s,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var z=r;v=bu;var ne=z.current.memoizedState.isDehydrated;if(ne&&(Fl(z,O).flags|=256),O=y0(z,O,!1),O!==2){if(d0&&!ne){z.errorRecoveryDisabledLanes|=w,zo|=w,v=4;break e}w=zr,zr=v,w!==null&&(zr===null?zr=w:zr.push.apply(zr,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){Fl(r,0),Ra(r,s,0,!0);break}e:{switch(h=r,w=v,w){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ra(h,s,ti,!Oa);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(v=vh+300-Ie(),10<v)){if(Ra(h,s,ti,!Oa),cr(h,0,!0)!==0)break e;Ys=s,h.timeoutHandle=wx(q_.bind(null,h,c,zr,xh,f0,s,ti,zo,Hl,Oa,w,"Throttled",-0,0),v);break e}q_(h,c,zr,xh,f0,s,ti,zo,Hl,Oa,w,null,-0,0)}}break}while(!0);_s(r)}function q_(r,s,c,h,v,w,O,z,ne,be,Ae,De,_e,we){if(r.timeoutHandle=-1,De=s.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},$_(s,w,De);var qe=(w&62914560)===w?vh-Ie():(w&4194048)===w?H_-Ie():0;if(qe=Xj(De,qe),qe!==null){Ys=w,r.cancelPendingCommit=qe(ex.bind(null,r,s,w,c,h,v,O,z,ne,Ae,De,null,_e,we)),Ra(r,w,O,!be);return}}ex(r,s,w,c,h,v,O,z,ne)}function fj(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!Fn(w(),v))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ra(r,s,c,h){s&=~h0,s&=~zo,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var v=s;0<v;){var w=31-hn(v),O=1<<w;h[w]=-1,v&=~O}c!==0&&sa(r,c,s)}function wh(){return(Rt&6)===0?(vu(0),!1):!0}function b0(){if(yt!==null){if($t===0)var r=yt.return;else r=yt,Vi=ys=null,Cp(r),Rl=null,tu=0,r=yt;for(;r!==null;)S_(r.alternate,r),r=r.return;yt=null}}function Fl(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,Cj(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Ys=0,b0(),qt=r,yt=c=ki(r.current,null),Et=s,$t=0,ei=null,Oa=!1,Ul=gi(r,s),d0=!1,Hl=ti=h0=zo=Da=xn=0,zr=bu=null,f0=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var v=31-hn(h),w=1<<v;s|=r[v],h&=~w}return Fs=s,Ao(),c}function Z_(r,s){ct=null,X.H=cu,s===Cl||s===Xd?(s=cv(),$t=3):s===xp?(s=cv(),$t=4):$t=s===Kp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ei=s,yt===null&&(xn=1,dh(r,d(s,r.current)))}function V_(){var r=Jr.current;return r===null?!0:(Et&4194048)===Et?Ai===null:(Et&62914560)===Et||(Et&536870912)!==0?r===Ai:!1}function K_(){var r=X.H;return X.H=cu,r===null?cu:r}function W_(){var r=X.A;return X.A=dj,r}function Sh(){xn=4,Oa||(Et&4194048)!==Et&&Jr.current!==null||(Ul=!0),(Da&134217727)===0&&(zo&134217727)===0||qt===null||Ra(qt,Et,ti,!1)}function y0(r,s,c){var h=Rt;Rt|=2;var v=K_(),w=W_();(qt!==r||Et!==s)&&(xh=null,Fl(r,s)),s=!1;var O=xn;e:do try{if($t!==0&&yt!==null){var z=yt,ne=ei;switch($t){case 8:b0(),O=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(s=!0);var be=$t;if($t=0,ei=null,Yl(r,z,ne,be),c&&Ul){O=0;break e}break;default:be=$t,$t=0,ei=null,Yl(r,z,ne,be)}}mj(),O=xn;break}catch(Ae){Z_(r,Ae)}while(!0);return s&&r.shellSuspendCounter++,Vi=ys=null,Rt=h,X.H=v,X.A=w,yt===null&&(qt=null,Et=0,Ao()),O}function mj(){for(;yt!==null;)X_(yt)}function pj(r,s){var c=Rt;Rt|=2;var h=K_(),v=W_();qt!==r||Et!==s?(xh=null,_h=Ie()+500,Fl(r,s)):Ul=gi(r,s);e:do try{if($t!==0&&yt!==null){s=yt;var w=ei;t:switch($t){case 1:$t=0,ei=null,Yl(r,s,w,1);break;case 2:case 9:if(ov(w)){$t=0,ei=null,J_(s);break}s=function(){$t!==2&&$t!==9||qt!==r||($t=7),_s(r)},w.then(s,s);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:ov(w)?($t=0,ei=null,J_(s)):($t=0,ei=null,Yl(r,s,w,7));break;case 5:var O=null;switch(yt.tag){case 26:O=yt.memoizedState;case 5:case 27:var z=yt;if(O?Px(O):z.stateNode.complete){$t=0,ei=null;var ne=z.sibling;if(ne!==null)yt=ne;else{var be=z.return;be!==null?(yt=be,Eh(be)):yt=null}break t}}$t=0,ei=null,Yl(r,s,w,5);break;case 6:$t=0,ei=null,Yl(r,s,w,6);break;case 8:b0(),xn=6;break e;default:throw Error(i(462))}}gj();break}catch(Ae){Z_(r,Ae)}while(!0);return Vi=ys=null,X.H=h,X.A=v,Rt=c,yt!==null?0:(qt=null,Et=0,Ao(),xn)}function gj(){for(;yt!==null&&!he();)X_(yt)}function X_(r){var s=x_(r.alternate,r,Fs);r.memoizedProps=r.pendingProps,s===null?Eh(r):yt=s}function J_(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=p_(c,s,s.pendingProps,s.type,void 0,Et);break;case 11:s=p_(c,s,s.pendingProps,s.type.render,s.ref,Et);break;case 5:Cp(s);default:S_(c,s),s=yt=Vc(s,Fs),s=x_(c,s,Fs)}r.memoizedProps=r.pendingProps,s===null?Eh(r):yt=s}function Yl(r,s,c,h){Vi=ys=null,Cp(s),Rl=null,tu=0;var v=s.return;try{if(ij(r,v,s,c,Et)){xn=1,dh(r,d(c,r.current)),yt=null;return}}catch(w){if(v!==null)throw yt=v,w;xn=1,dh(r,d(c,r.current)),yt=null;return}s.flags&32768?(bt||h===1?r=!0:Ul||(Et&536870912)!==0?r=!1:(Oa=r=!0,(h===2||h===9||h===3||h===6)&&(h=Jr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Q_(s,r)):Eh(s)}function Eh(r){var s=r;do{if((s.flags&32768)!==0){Q_(s,Oa);return}r=s.return;var c=oj(s.alternate,s,Fs);if(c!==null){yt=c;return}if(s=s.sibling,s!==null){yt=s;return}yt=s=r}while(s!==null);xn===0&&(xn=5)}function Q_(r,s){do{var c=lj(r.alternate,r);if(c!==null){c.flags&=32767,yt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){yt=r;return}yt=r=c}while(r!==null);xn=6,yt=null}function ex(r,s,c,h,v,w,O,z,ne){r.cancelPendingCommit=null;do Th();while(Hn!==0);if((Rt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(w=s.lanes|s.childLanes,w|=kl,to(r,c,w,O,z,ne),r===qt&&(yt=qt=null,Et=0),Gl=s,Ca=r,Ys=c,m0=w,p0=v,G_=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_j(Zt,function(){return sx(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,v=oe.p,oe.p=2,O=Rt,Rt|=4;try{cj(r,s,c)}finally{Rt=O,oe.p=v,X.T=h}}Hn=1,tx(),nx(),rx()}}function tx(){if(Hn===1){Hn=0;var r=Ca,s=Gl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var h=oe.p;oe.p=2;var v=Rt;Rt|=4;try{L_(s,r);var w=O0,O=wo(r.containerInfo),z=w.focusedElem,ne=w.selectionRange;if(O!==z&&z&&z.ownerDocument&&wl(z.ownerDocument.documentElement,z)){if(ne!==null&&ds(z)){var be=ne.start,Ae=ne.end;if(Ae===void 0&&(Ae=be),"selectionStart"in z)z.selectionStart=be,z.selectionEnd=Math.min(Ae,z.value.length);else{var De=z.ownerDocument||document,_e=De&&De.defaultView||window;if(_e.getSelection){var we=_e.getSelection(),qe=z.textContent.length,nt=Math.min(ne.start,qe),Gt=ne.end===void 0?nt:Math.min(ne.end,qe);!we.extend&&nt>Gt&&(O=Gt,Gt=nt,nt=O);var ue=xo(z,nt),se=xo(z,Gt);if(ue&&se&&(we.rangeCount!==1||we.anchorNode!==ue.node||we.anchorOffset!==ue.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ge=De.createRange();ge.setStart(ue.node,ue.offset),we.removeAllRanges(),nt>Gt?(we.addRange(ge),we.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),we.addRange(ge))}}}}for(De=[],we=z;we=we.parentNode;)we.nodeType===1&&De.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<De.length;z++){var Ne=De[z];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Ph=!!N0,O0=N0=null}finally{Rt=v,oe.p=h,X.T=c}}r.current=s,Hn=2}}function nx(){if(Hn===2){Hn=0;var r=Ca,s=Gl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var h=oe.p;oe.p=2;var v=Rt;Rt|=4;try{O_(r,s.alternate,s)}finally{Rt=v,oe.p=h,X.T=c}}Hn=3}}function rx(){if(Hn===4||Hn===3){Hn=0,$e();var r=Ca,s=Gl,c=Ys,h=G_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Hn=5:(Hn=0,Gl=Ca=null,ix(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ma=null),Ve(c),s=s.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(dn,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=X.T,v=oe.p,oe.p=2,X.T=null;try{for(var w=r.onRecoverableError,O=0;O<h.length;O++){var z=h[O];w(z.value,{componentStack:z.stack})}}finally{X.T=s,oe.p=v}}(Ys&3)!==0&&Th(),_s(r),v=r.pendingLanes,(c&261930)!==0&&(v&42)!==0?r===g0?yu++:(yu=0,g0=r):yu=0,vu(0)}}function ix(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Qc(s)))}function Th(){return tx(),nx(),rx(),sx()}function sx(){if(Hn!==5)return!1;var r=Ca,s=m0;m0=0;var c=Ve(Ys),h=X.T,v=oe.p;try{oe.p=32>c?32:c,X.T=null,c=p0,p0=null;var w=Ca,O=Ys;if(Hn=0,Gl=Ca=null,Ys=0,(Rt&6)!==0)throw Error(i(331));var z=Rt;if(Rt|=4,z_(w.current),P_(w,w.current,O,c),Rt=z,vu(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(dn,w)}catch{}return!0}finally{oe.p=v,X.T=h,ix(r,s)}}function ax(r,s,c){s=d(c,s),s=Vp(r.stateNode,s,2),r=ka(r,s,2),r!==null&&(Ui(r,2),_s(r))}function It(r,s,c){if(r.tag===3)ax(r,r,c);else for(;s!==null;){if(s.tag===3){ax(s,r,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ma===null||!Ma.has(h))){r=d(c,r),c=o_(2),h=ka(s,c,2),h!==null&&(l_(c,h,s,r),Ui(h,2),_s(h));break}}s=s.return}}function v0(r,s,c){var h=r.pingCache;if(h===null){h=r.pingCache=new hj;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(c)||(d0=!0,v.add(c),r=bj.bind(null,r,s,c),s.then(r,r))}function bj(r,s,c){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,qt===r&&(Et&c)===c&&(xn===4||xn===3&&(Et&62914560)===Et&&300>Ie()-vh?(Rt&2)===0&&Fl(r,0):h0|=c,Hl===Et&&(Hl=0)),_s(r)}function ox(r,s){s===0&&(s=Qa()),r=Ti(r,s),r!==null&&(Ui(r,s),_s(r))}function yj(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),ox(r,c)}function vj(r,s){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),ox(r,c)}function _j(r,s){return Le(r,s)}var kh=null,ql=null,_0=!1,Ah=!1,x0=!1,La=0;function _s(r){r!==ql&&r.next===null&&(ql===null?kh=ql=r:ql=ql.next=r),Ah=!0,_0||(_0=!0,wj())}function vu(r,s){if(!x0&&Ah){x0=!0;do for(var c=!1,h=kh;h!==null;){if(r!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var O=h.suspendedLanes,z=h.pingedLanes;w=(1<<31-hn(42|r)+1)-1,w&=v&~(O&~z),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,dx(h,w))}else w=Et,w=cr(h,h===qt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||gi(h,w)||(c=!0,dx(h,w));h=h.next}while(c);x0=!1}}function xj(){lx()}function lx(){Ah=_0=!1;var r=0;La!==0&&Mj()&&(r=La);for(var s=Ie(),c=null,h=kh;h!==null;){var v=h.next,w=cx(h,s);w===0?(h.next=null,c===null?kh=v:c.next=v,v===null&&(ql=c)):(c=h,(r!==0||(w&3)!==0)&&(Ah=!0)),h=v}Hn!==0&&Hn!==5||vu(r),La!==0&&(La=0)}function cx(r,s){for(var c=r.suspendedLanes,h=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-hn(w),z=1<<O,ne=v[O];ne===-1?((z&c)===0||(z&h)!==0)&&(v[O]=ia(z,s)):ne<=s&&(r.expiredLanes|=z),w&=~z}if(s=qt,c=Et,c=cr(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===s&&($t===2||$t===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&le(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||gi(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(h!==null&&le(h),Ve(c)){case 2:case 8:c=et;break;case 32:c=Zt;break;case 268435456:c=Tn;break;default:c=Zt}return h=ux.bind(null,r),c=Le(c,h),r.callbackPriority=s,r.callbackNode=c,s}return h!==null&&h!==null&&le(h),r.callbackPriority=2,r.callbackNode=null,2}function ux(r,s){if(Hn!==0&&Hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Th()&&r.callbackNode!==c)return null;var h=Et;return h=cr(r,r===qt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Y_(r,h,s),cx(r,Ie()),r.callbackNode!=null&&r.callbackNode===c?ux.bind(null,r):null)}function dx(r,s){if(Th())return null;Y_(r,s,!0)}function wj(){Rj(function(){(Rt&6)!==0?Le(st,xj):lx()})}function w0(){if(La===0){var r=Dl;r===0&&(r=kn,kn<<=1,(kn&261888)===0&&(kn=256)),La=r}return La}function hx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ua(""+r)}function fx(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function Sj(r,s,c,h,v){if(s==="submit"&&c&&c.stateNode===v){var w=hx((v[An]||null).action),O=h.submitter;O&&(s=(s=O[An]||null)?hx(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var z=new pl("action","action",null,h,v);r.push({event:z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(La!==0){var ne=O?fx(v,O):new FormData(v);Hp(c,{pending:!0,data:ne,method:v.method,action:w},null,ne)}}else typeof w=="function"&&(z.preventDefault(),ne=O?fx(v,O):new FormData(v),Hp(c,{pending:!0,data:ne,method:v.method,action:w},w,ne))},currentTarget:v}]})}}for(var S0=0;S0<ms.length;S0++){var E0=ms[S0],Ej=E0.toLowerCase(),Tj=E0[0].toUpperCase()+E0.slice(1);Rr(Ej,"on"+Tj)}Rr(Eo,"onAnimationEnd"),Rr(Yd,"onAnimationIteration"),Rr(To,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(fp,"onTransitionRun"),Rr(qd,"onTransitionStart"),Rr(mp,"onTransitionCancel"),Rr(xa,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function mx(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],v=h.event;h=h.listeners;e:{var w=void 0;if(s)for(var O=h.length-1;0<=O;O--){var z=h[O],ne=z.instance,be=z.currentTarget;if(z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}else for(O=0;O<h.length;O++){if(z=h[O],ne=z.instance,be=z.currentTarget,z=z.listener,ne!==w&&v.isPropagationStopped())break e;w=z,v.currentTarget=be;try{w(v)}catch(Ae){ko(Ae)}v.currentTarget=null,w=ne}}}}function vt(r,s){var c=s[bi];c===void 0&&(c=s[bi]=new Set);var h=r+"__bubble";c.has(h)||(px(s,r,2,!1),c.add(h))}function T0(r,s,c){var h=0;s&&(h|=4),px(c,r,h,s)}var jh="_reactListening"+Math.random().toString(36).slice(2);function k0(r){if(!r[jh]){r[jh]=!0,aa.forEach(function(c){c!=="selectionchange"&&(kj.has(c)||T0(c,!1,r),T0(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[jh]||(s[jh]=!0,T0("selectionchange",!1,s))}}function px(r,s,c,h){switch(Fx(s)){case 2:var v=eN;break;case 8:v=tN;break;default:v=U0}c=v.bind(null,s,c,r),v=void 0,!ho||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?r.addEventListener(s,c,{capture:!0,passive:v}):r.addEventListener(s,c,!0):v!==void 0?r.addEventListener(s,c,{passive:v}):r.addEventListener(s,c,!1)}function A0(r,s,c,h,v){var w=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var z=h.stateNode.containerInfo;if(z===v)break;if(O===4)for(O=h.return;O!==null;){var ne=O.tag;if((ne===3||ne===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;z!==null;){if(O=dt(z),O===null)return;if(ne=O.tag,ne===5||ne===6||ne===26||ne===27){h=w=O;continue e}z=z.parentNode}}h=h.return}Pc(function(){var be=w,Ae=uo(c),De=[];e:{var _e=Zd.get(r);if(_e!==void 0){var we=pl,qe=r;switch(r){case"keypress":if(fo(c)===0)break e;case"keydown":case"keyup":we=Cd;break;case"focusin":qe="focus",we=zc;break;case"focusout":qe="blur",we=zc;break;case"beforeblur":case"afterblur":we=zc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=np;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=op;break;case Eo:case Yd:case To:we=Uc;break;case xa:we=Bd;break;case"scroll":case"scrollend":we=St;break;case"wheel":we=Ds;break;case"copy":case"cut":case"paste":we=xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Rd;break;case"toggle":case"beforetoggle":we=go}var nt=(s&4)!==0,Gt=!nt&&(r==="scroll"||r==="scrollend"),ue=nt?_e!==null?_e+"Capture":null:_e;nt=[];for(var se=be,ge;se!==null;){var Ne=se;if(ge=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ge===null||ue===null||(Ne=Ns(se,ue),Ne!=null&&nt.push(xu(se,Ne,ge))),Gt)break;se=se.return}0<nt.length&&(_e=new we(_e,qe,null,c,Ae),De.push({event:_e,listeners:nt}))}}if((s&7)===0){e:{if(_e=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",_e&&c!==ml&&(qe=c.relatedTarget||c.fromElement)&&(dt(qe)||qe[Zr]))break e;if((we||_e)&&(_e=Ae.window===Ae?Ae:(_e=Ae.ownerDocument)?_e.defaultView||_e.parentWindow:window,we?(qe=c.relatedTarget||c.toElement,we=be,qe=qe?dt(qe):null,qe!==null&&(Gt=l(qe),nt=qe.tag,qe!==Gt||nt!==5&&nt!==27&&nt!==6)&&(qe=null)):(we=null,qe=be),we!==qe)){if(nt=jd,Ne="onMouseLeave",ue="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(nt=Rd,Ne="onPointerLeave",ue="onPointerEnter",se="pointer"),Gt=we==null?_e:mt(we),ge=qe==null?_e:mt(qe),_e=new nt(Ne,se+"leave",we,c,Ae),_e.target=Gt,_e.relatedTarget=ge,Ne=null,dt(Ae)===be&&(nt=new nt(ue,se+"enter",qe,c,Ae),nt.target=ge,nt.relatedTarget=Gt,Ne=nt),Gt=Ne,we&&qe)t:{for(nt=Aj,ue=we,se=qe,ge=0,Ne=ue;Ne;Ne=nt(Ne))ge++;Ne=0;for(var Qe=se;Qe;Qe=nt(Qe))Ne++;for(;0<ge-Ne;)ue=nt(ue),ge--;for(;0<Ne-ge;)se=nt(se),Ne--;for(;ge--;){if(ue===se||se!==null&&ue===se.alternate){nt=ue;break t}ue=nt(ue),se=nt(se)}nt=null}else nt=null;we!==null&&gx(De,_e,we,nt,!1),qe!==null&&Gt!==null&&gx(De,Gt,qe,nt,!0)}}e:{if(_e=be?mt(be):window,we=_e.nodeName&&_e.nodeName.toLowerCase(),we==="select"||we==="input"&&_e.type==="file")var Dt=_o;else if(wi(_e))if(zd)Dt=hp;else{Dt=dp;var Ke=Yi}else we=_e.nodeName,!we||we.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?be&&co(be.elementType)&&(Dt=_o):Dt=ba;if(Dt&&(Dt=Dt(r,be))){Id(De,Dt,c,Ae);break e}Ke&&Ke(r,_e,be),r==="focusout"&&be&&_e.type==="number"&&be.memoizedProps.value!=null&&Hi(_e,"number",_e.value)}switch(Ke=be?mt(be):window,r){case"focusin":(wi(Ke)||Ke.contentEditable==="true")&&(hs=Ke,El=be,So=null);break;case"focusout":So=El=hs=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Gd(De,c,Ae);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":Gd(De,c,Ae)}var ft;if(bl)e:{switch(r){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else ma?$d(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(yl&&c.locale!=="ko"&&(ma||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ma&&(ft=cs()):(_i=Ae,Os="value"in _i?_i.value:_i.textContent,ma=!0)),Ke=Nh(be,Tt),0<Ke.length&&(Tt=new Hc(Tt,r,null,c,Ae),De.push({event:Tt,listeners:Ke}),ft?Tt.data=ft:(ft=qc(c),ft!==null&&(Tt.data=ft)))),(ft=cp?Xr(r,c):pa(r,c))&&(Tt=Nh(be,"onBeforeInput"),0<Tt.length&&(Ke=new Hc("onBeforeInput","beforeinput",null,c,Ae),De.push({event:Ke,listeners:Tt}),Ke.data=ft)),Sj(De,r,be,c,Ae)}mx(De,s)})}function xu(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Nh(r,s){for(var c=s+"Capture",h=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Ns(r,c),v!=null&&h.unshift(xu(r,v,w)),v=Ns(r,s),v!=null&&h.push(xu(r,v,w))),r.tag===3)return h;r=r.return}return[]}function Aj(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function gx(r,s,c,h,v){for(var w=s._reactName,O=[];c!==null&&c!==h;){var z=c,ne=z.alternate,be=z.stateNode;if(z=z.tag,ne!==null&&ne===h)break;z!==5&&z!==26&&z!==27||be===null||(ne=be,v?(be=Ns(c,w),be!=null&&O.unshift(xu(c,be,ne))):v||(be=Ns(c,w),be!=null&&O.push(xu(c,be,ne)))),c=c.return}O.length!==0&&r.push({event:s,listeners:O})}var jj=/\r\n?/g,Nj=/\u0000|\uFFFD/g;function bx(r){return(typeof r=="string"?r:""+r).replace(jj,`
`).replace(Nj,"")}function yx(r,s){return s=bx(s),bx(r)===s}function Ht(r,s,c,h,v,w){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||vi(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&vi(r,""+h);break;case"className":zt(r,"class",h);break;case"tabIndex":zt(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(r,c,h);break;case"style":hl(r,h,w);break;case"data":if(s!=="object"){zt(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&Ht(r,s,"name",v.name,v,null),Ht(r,s,"formEncType",v.formEncType,v,null),Ht(r,s,"formMethod",v.formMethod,v,null),Ht(r,s,"formTarget",v.formTarget,v,null)):(Ht(r,s,"encType",v.encType,v,null),Ht(r,s,"method",v.method,v,null),Ht(r,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ua(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ua(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":vt("beforetoggle",r),vt("toggle",r),gt(r,"popover",h);break;case"xlinkActuate":Dr(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Dr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Dr(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Dr(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Dr(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Dr(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Dr(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gt(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=fl.get(c)||c,gt(r,c,h))}}function j0(r,s,c,h,v,w){switch(c){case"style":hl(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?vi(r,h):(typeof h=="number"||typeof h=="bigint")&&vi(r,""+h);break;case"onScroll":h!=null&&vt("scroll",r);break;case"onScrollEnd":h!=null&&vt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),s=c.slice(2,v?c.length-7:void 0),w=r[An]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(s,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,h,v);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):gt(r,c,h)}}}function nr(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",r),vt("load",r);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,w,O,c,null)}}v&&Ht(r,s,"srcSet",c.srcSet,c,null),h&&Ht(r,s,"src",c.src,c,null);return;case"input":vt("invalid",r);var z=w=O=v=null,ne=null,be=null;for(h in c)if(c.hasOwnProperty(h)){var Ae=c[h];if(Ae!=null)switch(h){case"name":v=Ae;break;case"type":O=Ae;break;case"checked":ne=Ae;break;case"defaultChecked":be=Ae;break;case"value":w=Ae;break;case"defaultValue":z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,s));break;default:Ht(r,s,h,Ae,c,null)}}lo(r,w,z,ne,be,O,v,!1);return;case"select":vt("invalid",r),h=O=w=null;for(v in c)if(c.hasOwnProperty(v)&&(z=c[v],z!=null))switch(v){case"value":w=z;break;case"defaultValue":O=z;break;case"multiple":h=z;default:Ht(r,s,v,z,c,null)}s=w,c=O,r.multiple=!!h,s!=null?Yt(r,!!h,s,!1):c!=null&&Yt(r,!!h,c,!0);return;case"textarea":vt("invalid",r),w=v=h=null;for(O in c)if(c.hasOwnProperty(O)&&(z=c[O],z!=null))switch(O){case"value":h=z;break;case"defaultValue":v=z;break;case"children":w=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:Ht(r,s,O,z,c,null)}la(r,h,v,w);return;case"option":for(ne in c)if(c.hasOwnProperty(ne)&&(h=c[ne],h!=null))switch(ne){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ht(r,s,ne,h,c,null)}return;case"dialog":vt("beforetoggle",r),vt("toggle",r),vt("cancel",r),vt("close",r);break;case"iframe":case"object":vt("load",r);break;case"video":case"audio":for(h=0;h<_u.length;h++)vt(_u[h],r);break;case"image":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"embed":case"source":case"link":vt("error",r),vt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in c)if(c.hasOwnProperty(be)&&(h=c[be],h!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ht(r,s,be,h,c,null)}return;default:if(co(s)){for(Ae in c)c.hasOwnProperty(Ae)&&(h=c[Ae],h!==void 0&&j0(r,s,Ae,h,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(h=c[z],h!=null&&Ht(r,s,z,h,c,null))}function Oj(r,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,z=null,ne=null,be=null,Ae=null;for(we in c){var De=c[we];if(c.hasOwnProperty(we)&&De!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ne=De;default:h.hasOwnProperty(we)||Ht(r,s,we,null,h,De)}}for(var _e in h){var we=h[_e];if(De=c[_e],h.hasOwnProperty(_e)&&(we!=null||De!=null))switch(_e){case"type":w=we;break;case"name":v=we;break;case"checked":be=we;break;case"defaultChecked":Ae=we;break;case"value":O=we;break;case"defaultValue":z=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,s));break;default:we!==De&&Ht(r,s,_e,we,h,De)}}Rc(r,O,z,ne,be,Ae,w,v);return;case"select":we=O=z=_e=null;for(w in c)if(ne=c[w],c.hasOwnProperty(w)&&ne!=null)switch(w){case"value":break;case"multiple":we=ne;default:h.hasOwnProperty(w)||Ht(r,s,w,null,h,ne)}for(v in h)if(w=h[v],ne=c[v],h.hasOwnProperty(v)&&(w!=null||ne!=null))switch(v){case"value":_e=w;break;case"defaultValue":z=w;break;case"multiple":O=w;default:w!==ne&&Ht(r,s,v,w,h,ne)}s=z,c=O,h=we,_e!=null?Yt(r,!!c,_e,!1):!!h!=!!c&&(s!=null?Yt(r,!!c,s,!0):Yt(r,!!c,c?[]:"",!1));return;case"textarea":we=_e=null;for(z in c)if(v=c[z],c.hasOwnProperty(z)&&v!=null&&!h.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Ht(r,s,z,null,h,v)}for(O in h)if(v=h[O],w=c[O],h.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":_e=v;break;case"defaultValue":we=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==w&&Ht(r,s,O,v,h,w)}ls(r,_e,we);return;case"option":for(var qe in c)if(_e=c[qe],c.hasOwnProperty(qe)&&_e!=null&&!h.hasOwnProperty(qe))switch(qe){case"selected":r.selected=!1;break;default:Ht(r,s,qe,null,h,_e)}for(ne in h)if(_e=h[ne],we=c[ne],h.hasOwnProperty(ne)&&_e!==we&&(_e!=null||we!=null))switch(ne){case"selected":r.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Ht(r,s,ne,_e,h,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)_e=c[nt],c.hasOwnProperty(nt)&&_e!=null&&!h.hasOwnProperty(nt)&&Ht(r,s,nt,null,h,_e);for(be in h)if(_e=h[be],we=c[be],h.hasOwnProperty(be)&&_e!==we&&(_e!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,s));break;default:Ht(r,s,be,_e,h,we)}return;default:if(co(s)){for(var Gt in c)_e=c[Gt],c.hasOwnProperty(Gt)&&_e!==void 0&&!h.hasOwnProperty(Gt)&&j0(r,s,Gt,void 0,h,_e);for(Ae in h)_e=h[Ae],we=c[Ae],!h.hasOwnProperty(Ae)||_e===we||_e===void 0&&we===void 0||j0(r,s,Ae,_e,h,we);return}}for(var ue in c)_e=c[ue],c.hasOwnProperty(ue)&&_e!=null&&!h.hasOwnProperty(ue)&&Ht(r,s,ue,null,h,_e);for(De in h)_e=h[De],we=c[De],!h.hasOwnProperty(De)||_e===we||_e==null&&we==null||Ht(r,s,De,_e,h,we)}function vx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,O=v.initiatorType,z=v.duration;if(w&&z&&vx(O)){for(O=0,z=v.responseEnd,h+=1;h<c.length;h++){var ne=c[h],be=ne.startTime;if(be>z)break;var Ae=ne.transferSize,De=ne.initiatorType;Ae&&vx(De)&&(ne=ne.responseEnd,O+=Ae*(ne<z?1:(z-be)/(ne-be)))}if(--h,s+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var N0=null,O0=null;function Oh(r){return r.nodeType===9?r:r.ownerDocument}function _x(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xx(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function D0(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var M0=null;function Mj(){var r=window.event;return r&&r.type==="popstate"?r===M0?!1:(M0=r,!0):(M0=null,!1)}var wx=typeof setTimeout=="function"?setTimeout:void 0,Cj=typeof clearTimeout=="function"?clearTimeout:void 0,Sx=typeof Promise=="function"?Promise:void 0,Rj=typeof queueMicrotask=="function"?queueMicrotask:typeof Sx<"u"?function(r){return Sx.resolve(null).then(r).catch(Lj)}:wx;function Lj(r){setTimeout(function(){throw r})}function Ba(r){return r==="head"}function Ex(r,s){var c=s,h=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(v),Wl(s);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")wu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,wu(c);for(var w=c.firstChild;w;){var O=w.nextSibling,z=w.nodeName;w[pt]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&wu(r.ownerDocument.body);c=v}while(c);Wl(s)}function Tx(r,s){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function C0(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":C0(c),tt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function Bj(r,s,c,h){for(;r.nodeType===1;){var v=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[pt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=ji(r.nextSibling),r===null)break}return null}function Pj(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ji(r.nextSibling),r===null))return null;return r}function kx(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=ji(r.nextSibling),r===null))return null;return r}function R0(r){return r.data==="$?"||r.data==="$~"}function L0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function $j(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function ji(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var B0=null;function Ax(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return ji(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function jx(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function Nx(r,s,c){switch(s=Oh(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function wu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);tt(r)}var Ni=new Map,Ox=new Set;function Dh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qs=oe.d;oe.d={f:Ij,r:zj,D:Uj,C:Hj,L:Gj,m:Fj,X:qj,S:Yj,M:Zj};function Ij(){var r=qs.f(),s=wh();return r||s}function zj(r){var s=xt(r);s!==null&&s.tag===5&&s.type==="form"?Zv(s):qs.r(r)}var Zl=typeof document>"u"?null:document;function Dx(r,s,c){var h=Zl;if(h&&typeof s=="string"&&s){var v=en(s);v='link[rel="'+r+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Ox.has(v)||(Ox.add(v),r={rel:r,crossOrigin:c,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),nr(s,"link",r),wt(s),h.head.appendChild(s)))}}function Uj(r){qs.D(r),Dx("dns-prefetch",r,null)}function Hj(r,s){qs.C(r,s),Dx("preconnect",r,s)}function Gj(r,s,c){qs.L(r,s,c);var h=Zl;if(h&&r&&s){var v='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+en(c.imageSizes)+'"]')):v+='[href="'+en(r)+'"]';var w=v;switch(s){case"style":w=Vl(r);break;case"script":w=Kl(r)}Ni.has(w)||(r=_({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),Ni.set(w,r),h.querySelector(v)!==null||s==="style"&&h.querySelector(Su(w))||s==="script"&&h.querySelector(Eu(w))||(s=h.createElement("link"),nr(s,"link",r),wt(s),h.head.appendChild(s)))}}function Fj(r,s){qs.m(r,s);var c=Zl;if(c&&r){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+en(h)+'"][href="'+en(r)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Kl(r)}if(!Ni.has(w)&&(r=_({rel:"modulepreload",href:r},s),Ni.set(w,r),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Eu(w)))return}h=c.createElement("link"),nr(h,"link",r),wt(h),c.head.appendChild(h)}}}function Yj(r,s,c){qs.S(r,s,c);var h=Zl;if(h&&r){var v=In(h).hoistableStyles,w=Vl(r);s=s||"default";var O=v.get(w);if(!O){var z={loading:0,preload:null};if(O=h.querySelector(Su(w)))z.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},c),(c=Ni.get(w))&&P0(r,c);var ne=O=h.createElement("link");wt(ne),nr(ne,"link",r),ne._p=new Promise(function(be,Ae){ne.onload=be,ne.onerror=Ae}),ne.addEventListener("load",function(){z.loading|=1}),ne.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Mh(O,s,h)}O={type:"stylesheet",instance:O,count:1,state:z},v.set(w,O)}}}function qj(r,s){qs.X(r,s);var c=Zl;if(c&&r){var h=In(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Eu(v)),w||(r=_({src:r,async:!0},s),(s=Ni.get(v))&&$0(r,s),w=c.createElement("script"),wt(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Zj(r,s){qs.M(r,s);var c=Zl;if(c&&r){var h=In(c).hoistableScripts,v=Kl(r),w=h.get(v);w||(w=c.querySelector(Eu(v)),w||(r=_({src:r,async:!0,type:"module"},s),(s=Ni.get(v))&&$0(r,s),w=c.createElement("script"),wt(w),nr(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Mx(r,s,c,h){var v=(v=Z.current)?Dh(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Vl(c.href),c=In(v).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Vl(c.href);var w=In(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Su(r)))&&!w._p&&(O.instance=w,O.state.loading=5),Ni.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ni.set(r,c),w||Vj(v,r,c,O.state))),s&&h===null)throw Error(i(528,""));return O}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kl(c),c=In(v).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+en(r)+'"'}function Su(r){return'link[rel="stylesheet"]['+r+"]"}function Cx(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function Vj(r,s,c,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),nr(s,"link",c),wt(s),r.head.appendChild(s))}function Kl(r){return'[src="'+en(r)+'"]'}function Eu(r){return"script[async]"+r}function Rx(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+en(c.href)+'"]');if(h)return s.instance=h,wt(h),h;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),wt(h),nr(h,"style",v),Mh(h,c.precedence,r),s.instance=h;case"stylesheet":v=Vl(c.href);var w=r.querySelector(Su(v));if(w)return s.state.loading|=4,s.instance=w,wt(w),w;h=Cx(c),(v=Ni.get(v))&&P0(h,v),w=(r.ownerDocument||r).createElement("link"),wt(w);var O=w;return O._p=new Promise(function(z,ne){O.onload=z,O.onerror=ne}),nr(w,"link",h),s.state.loading|=4,Mh(w,c.precedence,r),s.instance=w;case"script":return w=Kl(c.src),(v=r.querySelector(Eu(w)))?(s.instance=v,wt(v),v):(h=c,(v=Ni.get(w))&&(h=_({},c),$0(h,v)),r=r.ownerDocument||r,v=r.createElement("script"),wt(v),nr(v,"link",h),r.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Mh(h,c.precedence,r));return s.instance}function Mh(r,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,O=0;O<h.length;O++){var z=h[O];if(z.dataset.precedence===s)w=z;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function P0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function $0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ch=null;function Lx(r,s,c){if(Ch===null){var h=new Map,v=Ch=new Map;v.set(c,h)}else v=Ch,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),v=0;v<c.length;v++){var w=c[v];if(!(w[pt]||w[sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=r+O;var z=h.get(O);z?z.push(w):h.set(O,[w])}}return h}function Bx(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function Kj(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Px(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Wj(r,s,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Vl(h.href),w=s.querySelector(Su(v));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Rh.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=w,wt(w);return}w=s.ownerDocument||s,h=Cx(h),(v=Ni.get(v))&&P0(h,v),w=w.createElement("link"),wt(w);var O=w;O._p=new Promise(function(z,ne){O.onload=z,O.onerror=ne}),nr(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Rh.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var I0=0;function Xj(r,s){return r.stylesheets&&r.count===0&&Bh(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&Bh(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+s);0<r.imgBytes&&I0===0&&(I0=62500*Dj());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Bh(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>I0?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lh=null;function Bh(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lh=new Map,s.forEach(Jj,r),Lh=null,Rh.call(r))}function Jj(r,s){if(!(s.state.loading&4)){var c=Lh.get(r);if(c)var h=c.get(null);else{c=new Map,Lh.set(r,c);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),h=O)}h&&c.set(null,h)}v=s.instance,O=v.getAttribute("data-precedence"),w=c.get(O)||h,w===h&&c.set(null,v),c.set(O,v),this.count++,h=Rh.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),s.state.loading|=4}}var Tu={$$typeof:A,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Qj(r,s,c,h,v,w,O,z,ne){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function $x(r,s,c,h,v,w,O,z,ne,be,Ae,De){return r=new Qj(r,s,c,O,ne,be,Ae,De,z),s=1,w===!0&&(s|=24),w=hr(3,null,null,s),r.current=w,w.stateNode=r,s=yp(),s.refCount++,r.pooledCache=s,s.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:s},wp(w),r}function Ix(r){return r?(r=Ms,r):Ms}function zx(r,s,c,h,v,w){v=Ix(v),h.context===null?h.context=v:h.pendingContext=v,h=Ta(s),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ka(r,h,s),c!==null&&(Ur(c,r,s),ru(c,r,s))}function Ux(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function z0(r,s){Ux(r,s),(r=r.alternate)&&Ux(r,s)}function Hx(r){if(r.tag===13||r.tag===31){var s=Ti(r,67108864);s!==null&&Ur(s,r,67108864),z0(r,67108864)}}function Gx(r){if(r.tag===13||r.tag===31){var s=ni();s=$n(s);var c=Ti(r,s);c!==null&&Ur(c,r,s),z0(r,s)}}var Ph=!0;function eN(r,s,c,h){var v=X.T;X.T=null;var w=oe.p;try{oe.p=2,U0(r,s,c,h)}finally{oe.p=w,X.T=v}}function tN(r,s,c,h){var v=X.T;X.T=null;var w=oe.p;try{oe.p=8,U0(r,s,c,h)}finally{oe.p=w,X.T=v}}function U0(r,s,c,h){if(Ph){var v=H0(h);if(v===null)A0(r,s,h,$h,c),Yx(r,h);else if(rN(v,r,s,c,h))h.stopPropagation();else if(Yx(r,h),s&4&&-1<nN.indexOf(r)){for(;v!==null;){var w=xt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=Nr(w.pendingLanes);if(O!==0){var z=w;for(z.pendingLanes|=2,z.entangledLanes|=2;O;){var ne=1<<31-hn(O);z.entanglements[1]|=ne,O&=~ne}_s(w),(Rt&6)===0&&(_h=Ie()+500,vu(0))}}break;case 31:case 13:z=Ti(w,2),z!==null&&Ur(z,w,2),wh(),z0(w,2)}if(w=H0(h),w===null&&A0(r,s,h,$h,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else A0(r,s,h,null,c)}}function H0(r){return r=uo(r),G0(r)}var $h=null;function G0(r){if($h=null,r=dt(r),r!==null){var s=l(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=u(s),r!==null)return r;r=null}else if(c===31){if(r=f(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return $h=r,null}function Fx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case st:return 2;case et:return 8;case Zt:case En:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var F0=!1,Pa=null,$a=null,Ia=null,ku=new Map,Au=new Map,za=[],nN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yx(r,s){switch(r){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":ku.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(s.pointerId)}}function ju(r,s,c,h,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},s!==null&&(s=xt(s),s!==null&&Hx(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),r)}function rN(r,s,c,h,v){switch(s){case"focusin":return Pa=ju(Pa,r,s,c,h,v),!0;case"dragenter":return $a=ju($a,r,s,c,h,v),!0;case"mouseover":return Ia=ju(Ia,r,s,c,h,v),!0;case"pointerover":var w=v.pointerId;return ku.set(w,ju(ku.get(w)||null,r,s,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,Au.set(w,ju(Au.get(w)||null,r,s,c,h,v)),!0}return!1}function qx(r){var s=dt(r.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Gx(c)});return}}else if(s===31){if(s=f(c),s!==null){r.blockedOn=s,Or(r.priority,function(){Gx(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ih(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=H0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);ml=h,c.target.dispatchEvent(h),ml=null}else return s=xt(c),s!==null&&Hx(s),r.blockedOn=c,!1;s.shift()}return!0}function Zx(r,s,c){Ih(r)&&c.delete(s)}function iN(){F0=!1,Pa!==null&&Ih(Pa)&&(Pa=null),$a!==null&&Ih($a)&&($a=null),Ia!==null&&Ih(Ia)&&(Ia=null),ku.forEach(Zx),Au.forEach(Zx)}function zh(r,s){r.blockedOn===s&&(r.blockedOn=null,F0||(F0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iN)))}var Uh=null;function Vx(r){Uh!==r&&(Uh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Uh===r&&(Uh=null);for(var s=0;s<r.length;s+=3){var c=r[s],h=r[s+1],v=r[s+2];if(typeof h!="function"){if(G0(h||c)===null)continue;break}var w=xt(c);w!==null&&(r.splice(s,3),s-=3,Hp(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Wl(r){function s(ne){return zh(ne,r)}Pa!==null&&zh(Pa,r),$a!==null&&zh($a,r),Ia!==null&&zh(Ia,r),ku.forEach(s),Au.forEach(s);for(var c=0;c<za.length;c++){var h=za[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<za.length&&(c=za[0],c.blockedOn===null);)qx(c),c.blockedOn===null&&za.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],O=v[An]||null;if(typeof w=="function")O||Vx(c);else if(O){var z=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[An]||null)z=O.formAction;else if(G0(v)!==null)continue}else z=O.action;typeof z=="function"?c[h+1]=z:(c.splice(h,3),h-=3),Vx(c)}}}function Kx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Y0(r){this._internalRoot=r}Hh.prototype.render=Y0.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,h=ni();zx(c,h,r,s,null,null)},Hh.prototype.unmount=Y0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;zx(r.current,2,null,r,null,null),wh(),s[Zr]=null}};function Hh(r){this._internalRoot=r}Hh.prototype.unstable_scheduleHydration=function(r){if(r){var s=ks();r={blockedOn:null,target:r,priority:s};for(var c=0;c<za.length&&s!==0&&s<za[c].priority;c++);za.splice(c,0,r),c===0&&qx(r)}};var Wx=t.version;if(Wx!=="19.2.1")throw Error(i(527,Wx,"19.2.1"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var sN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{dn=Gh.inject(sN),Ct=Gh}catch{}}return Ou.createRoot=function(r,s){if(!o(r))throw Error(i(299));var c=!1,h="",v=r_,w=i_,O=s_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=$x(r,1,!1,null,null,c,h,null,v,w,O,Kx),r[Zr]=s.current,k0(r),new Y0(s)},Ou.hydrateRoot=function(r,s,c){if(!o(r))throw Error(i(299));var h=!1,v="",w=r_,O=i_,z=s_,ne=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(ne=c.formState)),s=$x(r,1,!0,s,c??null,h,v,ne,w,O,z,Kx),s.context=Ix(null),c=s.current,h=ni(),h=$n(h),v=Ta(h),v.callback=null,ka(c,v,h),c=h,s.current.lanes=c,Ui(s,c),_s(s),r[Zr]=s.current,k0(r),new Hh(s)},Ou.version="19.2.1",Ou}var aw;function mN(){if(aw)return V0.exports;aw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),V0.exports=fN(),V0.exports}var pN=mN();let gN={data:""},bN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||gN,yN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vN=/\/\*[^]*?\*\/|  +/g,ow=/\n+/g,Fa=(e,t)=>{let n="",i="",o="";for(let l in e){let u=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":i+=l[1]=="f"?Fa(u,l):l+"{"+Fa(u,l[1]=="k"?"":t)+"}":typeof u=="object"?i+=Fa(u,t?t.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Fa.p?Fa.p(l,u):l+":"+u+";")}return n+(t&&o?t+"{"+o+"}":o)+i},Zs={},N2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+N2(e[n]);return t}return e},_N=(e,t,n,i,o)=>{let l=N2(e),u=Zs[l]||(Zs[l]=(m=>{let p=0,y=11;for(;p<m.length;)y=101*y+m.charCodeAt(p++)>>>0;return"go"+y})(l));if(!Zs[u]){let m=l!==e?e:(p=>{let y,_,x=[{}];for(;y=yN.exec(p.replace(vN,""));)y[4]?x.shift():y[3]?(_=y[3].replace(ow," ").trim(),x.unshift(x[0][_]=x[0][_]||{})):x[0][y[1]]=y[2].replace(ow," ").trim();return x[0]})(e);Zs[u]=Fa(o?{["@keyframes "+u]:m}:m,n?"":"."+u)}let f=n&&Zs.g?Zs.g:null;return n&&(Zs.g=Zs[u]),((m,p,y,_)=>{_?p.data=p.data.replace(_,m):p.data.indexOf(m)===-1&&(p.data=y?m+p.data:p.data+m)})(Zs[u],t,i,f),u},xN=(e,t,n)=>e.reduce((i,o,l)=>{let u=t[l];if(u&&u.call){let f=u(n),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=m?"."+m:f&&typeof f=="object"?f.props?"":Fa(f,""):f===!1?"":f}return i+o+(u??"")},"");function Em(e){let t=this||{},n=e.call?e(t.p):e;return _N(n.unshift?n.raw?xN(n,[].slice.call(arguments,1),t.p):n.reduce((i,o)=>Object.assign(i,o&&o.call?o(t.p):o),{}):n,bN(t.target),t.g,t.o,t.k)}let O2,ab,ob;Em.bind({g:1});let ta=Em.bind({k:1});function wN(e,t,n,i){Fa.p=t,O2=e,ab=n,ob=i}function Ja(e,t){let n=this||{};return function(){let i=arguments;function o(l,u){let f=Object.assign({},l),m=f.className||o.className;n.p=Object.assign({theme:ab&&ab()},f),n.o=/ *go\d+/.test(m),f.className=Em.apply(n,i)+(m?" "+m:"");let p=e;return e[0]&&(p=f.as||e,delete f.as),ob&&p[0]&&ob(f),O2(p,f)}return o}}var SN=e=>typeof e=="function",Vf=(e,t)=>SN(e)?e(t):e,EN=(()=>{let e=0;return()=>(++e).toString()})(),D2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),TN=20,qb="default",M2=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===t.toast.id?{...u,...t.toast}:u)};case 2:let{toast:i}=t;return M2(e,{type:e.toasts.find(u=>u.id===i.id)?1:0,toast:i});case 3:let{toastId:o}=t;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let l=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},$f=[],C2={toasts:[],pausedAt:void 0,settings:{toastLimit:TN}},Es={},R2=(e,t=qb)=>{Es[t]=M2(Es[t]||C2,e),$f.forEach(([n,i])=>{n===t&&i(Es[t])})},L2=e=>Object.keys(Es).forEach(t=>R2(e,t)),kN=e=>Object.keys(Es).find(t=>Es[t].toasts.some(n=>n.id===e)),Tm=(e=qb)=>t=>{R2(t,e)},AN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jN=(e={},t=qb)=>{let[n,i]=R.useState(Es[t]||C2),o=R.useRef(Es[t]);R.useEffect(()=>(o.current!==Es[t]&&i(Es[t]),$f.push([t,i]),()=>{let u=$f.findIndex(([f])=>f===t);u>-1&&$f.splice(u,1)}),[t]);let l=n.toasts.map(u=>{var f,m,p;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((f=e[u.type])==null?void 0:f.removeDelay)||e?.removeDelay,duration:u.duration||((m=e[u.type])==null?void 0:m.duration)||e?.duration||AN[u.type],style:{...e.style,...(p=e[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},NN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||EN()}),pd=e=>(t,n)=>{let i=NN(t,e,n);return Tm(i.toasterId||kN(i.id))({type:2,toast:i}),i.id},Vn=(e,t)=>pd("blank")(e,t);Vn.error=pd("error");Vn.success=pd("success");Vn.loading=pd("loading");Vn.custom=pd("custom");Vn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Tm(t)(n):L2(n)};Vn.dismissAll=e=>Vn.dismiss(void 0,e);Vn.remove=(e,t)=>{let n={type:4,toastId:e};t?Tm(t)(n):L2(n)};Vn.removeAll=e=>Vn.remove(void 0,e);Vn.promise=(e,t,n)=>{let i=Vn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let l=t.success?Vf(t.success,o):void 0;return l?Vn.success(l,{id:i,...n,...n?.success}):Vn.dismiss(i),o}).catch(o=>{let l=t.error?Vf(t.error,o):void 0;l?Vn.error(l,{id:i,...n,...n?.error}):Vn.dismiss(i)}),e};var ON=1e3,DN=(e,t="default")=>{let{toasts:n,pausedAt:i}=jN(e,t),o=R.useRef(new Map).current,l=R.useCallback((_,x=ON)=>{if(o.has(_))return;let S=setTimeout(()=>{o.delete(_),u({type:4,toastId:_})},x);o.set(_,S)},[]);R.useEffect(()=>{if(i)return;let _=Date.now(),x=n.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(_-S.createdAt);if(T<0){S.visible&&Vn.dismiss(S.id);return}return setTimeout(()=>Vn.dismiss(S.id,t),T)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[n,i,t]);let u=R.useCallback(Tm(t),[t]),f=R.useCallback(()=>{u({type:5,time:Date.now()})},[u]),m=R.useCallback((_,x)=>{u({type:1,toast:{id:_,height:x}})},[u]),p=R.useCallback(()=>{i&&u({type:6,time:Date.now()})},[i,u]),y=R.useCallback((_,x)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=x||{},N=n.filter(A=>(A.position||k)===(_.position||k)&&A.height),C=N.findIndex(A=>A.id===_.id),$=N.filter((A,D)=>D<C&&A.visible).length;return N.filter(A=>A.visible).slice(...S?[$+1]:[0,$]).reduce((A,D)=>A+(D.height||0)+T,0)},[n]);return R.useEffect(()=>{n.forEach(_=>{if(_.dismissed)l(_.id,_.removeDelay);else{let x=o.get(_.id);x&&(clearTimeout(x),o.delete(_.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:m,startPause:f,endPause:p,calculateOffset:y}}},MN=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CN=ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RN=ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,BN=ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PN=Ja("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${BN} 1s linear infinite;
`,$N=ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,IN=ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zN=Ja("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$N} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${IN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UN=Ja("div")`
  position: absolute;
`,HN=Ja("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GN=ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FN=Ja("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,YN=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?R.createElement(FN,null,t):t:n==="blank"?null:R.createElement(HN,null,R.createElement(PN,{...i}),n!=="loading"&&R.createElement(UN,null,n==="error"?R.createElement(LN,{...i}):R.createElement(zN,{...i})))},qN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ZN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,VN="0%{opacity:0;} 100%{opacity:1;}",KN="0%{opacity:1;} 100%{opacity:0;}",WN=Ja("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,XN=Ja("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JN=(e,t)=>{let n=e.includes("top")?1:-1,[i,o]=D2()?[VN,KN]:[qN(n),ZN(n)];return{animation:t?`${ta(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ta(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},QN=R.memo(({toast:e,position:t,style:n,children:i})=>{let o=e.height?JN(e.position||t||"top-center",e.visible):{opacity:0},l=R.createElement(YN,{toast:e}),u=R.createElement(XN,{...e.ariaProps},Vf(e.message,e));return R.createElement(WN,{className:e.className,style:{...o,...n,...e.style}},typeof i=="function"?i({icon:l,message:u}):R.createElement(R.Fragment,null,l,u))});wN(R.createElement);var eO=({id:e,className:t,style:n,onHeightUpdate:i,children:o})=>{let l=R.useCallback(u=>{if(u){let f=()=>{let m=u.getBoundingClientRect().height;i(e,m)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return R.createElement("div",{ref:l,className:t,style:n},o)},tO=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:D2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...o}},nO=Em`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fh=16,rO=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:o,toasterId:l,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=DN(n,l);return R.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Fh,left:Fh,right:Fh,bottom:Fh,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(y=>{let _=y.position||t,x=p.calculateOffset(y,{reverseOrder:e,gutter:i,defaultPosition:t}),S=tO(_,x);return R.createElement(eO,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?nO:"",style:S},y.type==="custom"?Vf(y.message,y):o?o(y):R.createElement(QN,{toast:y,position:_}))}))};function iO(e,t,n,i=0,o=0){t<=2&&(e-=1,t+=12);const l=Math.floor(e/100),u=2-l+Math.floor(l/4),f=n+(i+o/60)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+f+u-1524.5}const sO=864e5;function aO(e){const t=(e-24405875e-1)*sO;return new Date(t)}function oO(e,t=7){const n=e+(t-.5)/12;if(n>=1986&&n<2005){const o=n-2e3;return 63.86+.3345*o-.060374*o*o+.0017275*o**3+651814e-9*o**4+2373599e-11*o**5}if(n>=2005&&n<2050){const o=n-2e3;return 62.92+.32217*o+.005589*o*o}if(n>=2050&&n<=2150){const o=(n-1820)/100;return-20+32*o*o-.5628*(2150-n)}if(n>=1900&&n<1986)return-2.79+1.494119*(n-1900)-.0598939*(n-1900)**2+.0061966*(n-1900)**3-197e-6*(n-1900)**4;if(n>=1800&&n<1900){const o=(n-1800)/100;return 13.72-33.244*o+68.612*o**2-65.3*o**3-1.653*o**4+.3343*o**5-.012125*o**6+1348e-7*o**7-175e-8*o**8}const i=(n-1820)/100;return-20+32*i*i}function lO(e){const t=Math.floor(e+.5),n=e+.5-t;let i=t;if(t>=2299161){const _=Math.floor((t-186721625e-2)/36524.25);i=t+1+_-Math.floor(_/4)}const o=i+1524,l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),f=Math.floor((o-u)/30.6001),m=o-u-Math.floor(30.6001*f)+n;let p=f-1;p>12&&(p-=12);let y=l-4715;return p>2&&(y-=1),[y,p,m]}const Ku=Math.PI,el=Ku/180,cO=180/Ku,uO=86400;function dO(e){return e%=360,e<0?e+360:e}function hO(e,t){return(e-t+540)%360-180}function lw(e,t){for(;e-t>180;)e-=360;for(;e-t<-180;)e+=360;return e}function fO(e){const[t,n]=lO(e);return e+oO(t,Math.round(n))/uO}function cw(e,t){let n=0,i=1;for(let o=0;o<e.length;o++){let l=0;for(const[u,f,m]of e[o])l+=u*Math.cos(f+m*t);n+=l*i,i*=t}return n*1e-8}function mO(e){const t=(e-2451545)/36525,n=(297.85036+445267.11148*t-.0019142*t*t+t*t*t/189474)*el,i=(357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5)*el,o=(134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250)*el,l=(93.27191+483202.017538*t-.0036825*t*t+t*t*t/327270)*el,u=(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e4)*el,f=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[0,0,2,-2,2,-13187,-1.6,5736,-3.1],[0,0,2,0,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[1,0,0,0,0,712,.1,-7,0],[0,1,2,-2,2,-517,1.2,224,-.6],[0,0,2,0,1,-386,-.4,200,0],[1,0,2,0,2,-301,0,129,-.1],[0,-1,2,-2,2,217,-.5,-95,.3]];let m=0,p=0;for(const[y,_,x,S,T,k,N,C,$]of f){const A=y*n+_*i+x*o+S*l+T*u;m+=(k+N*t)*Math.sin(A),p+=(C+$*t)*Math.cos(A)}return m*=1e-4,p*=1e-4,{dpsi:m,deps:p}}function Yh(e){const t=fO(e),n=(t-2451545)/365250,i=cw(uw.L,n),o=cw(uw.R,n);let l=i+Ku;l>2*Ku&&(l-=2*Ku);const{dpsi:u}=mO(t),f=u/3600*el,m=20.4898/(3600*o),p=l+f-m*el;return dO(p*cO)}function Gn(e,t,n){const i=(t%360+360)%360,o=iO(e,1,1),l=Yh(o);let u=i-l;u<0&&(u+=360);let f=o+u/.98564736;const m=1e-6,p=5e-6;for(let x=0;x<25;x++){const S=Yh(f),T=hO(i,S);if(Math.abs(T)<m)break;const k=Yh(f+p),N=Yh(f-p),C=lw(k,S),$=lw(N,S),A=(C-$)/(2*p);f+=T/A}const y=aO(f),_=new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),0,0);if(Number.isFinite(n)){const x=n/15-9;if(Math.abs(x)>1e-12)return new Date(_.getTime()+x*36e5)}return _}const uw={L:[[[175347046,0,0],[3341656,4.6692568,6283.07585],[34894,4.6261,12566.1517],[3497,2.7441,5753.3849],[3418,2.8289,3.5231],[3136,3.6277,77713.7715],[2676,4.4181,7860.4194],[2343,6.1352,3930.2097],[1324,.7425,11506.7698],[1273,2.0371,529.691],[1199,1.1096,1577.3435],[990,5.233,5884.927],[902,2.045,26.298],[857,3.508,398.149],[780,1.179,5223.694],[753,2.533,5507.553],[505,4.583,18849.228],[492,4.205,775.523],[357,2.92,.067],[317,5.849,11790.629]],[[628331966747,0,0],[206059,2.678235,6283.07585],[4303,2.6351,12566.1517],[425,1.59,3.523],[119,5.796,26.298],[109,2.966,1577.344],[93,2.59,18849.23],[72,1.14,529.69],[68,1.87,398.15],[67,4.41,5507.55],[59,2.89,5223.69],[56,2.17,155.42]],[[52919,0,0],[8720,1.0721,6283.0758],[309,.867,12566.152]],[[289,5.844,6283.076],[35,0,0]],[[114,3.142,0],[8,4.13,6283.08]],[[1,3.14,0]]],R:[[[100013989,0,0],[1670700,3.0984635,6283.07585],[13956,3.05525,12566.1517],[3084,5.1985,77713.7715],[1628,1.1739,5753.3849],[1576,2.8469,7860.4194],[925,5.453,11506.77],[542,4.564,3930.21],[472,3.661,5884.927],[346,.964,5507.553],[329,5.9,5223.694]],[[103019,1.10749,6283.07585],[1721,1.0644,12566.1517],[702,3.142,0],[32,1.02,18849.23]],[[4359,5.7846,6283.0758],[124,5.579,12566.152],[12,3.14,0]],[[145,4.273,6283.076]]]},jr=["","","","","","","","","",""],Yr=["","","","","","","","","","","",""],Bi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},mi={:["","","","","","","","","",""],:["","","","","","","","","","","",""]},pO=["","","","","","","","","",""],gO=["","","","","","","","","","","",""],bO=["","","","","","","","","","","","","","","","","","","",""],yO=["","","","","","","","","","","","","","","","","","","","","","","",""],km=new Set(jr),Zb=new Set(Yr),Am={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Kb=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Wb={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},B2={:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""]},dw=[{branch:"",hanja:"",start:1380,end:60},{branch:"",hanja:"",start:60,end:180},{branch:"",hanja:"",start:180,end:300},{branch:"",hanja:"",start:300,end:420},{branch:"",hanja:"",start:420,end:540},{branch:"",hanja:"",start:540,end:660},{branch:"",hanja:"",start:660,end:780},{branch:"",hanja:"",start:780,end:900},{branch:"",hanja:"",start:900,end:1020},{branch:"",hanja:"",start:1020,end:1140},{branch:"",hanja:"",start:1140,end:1260},{branch:"",hanja:"",start:1260,end:1380}],vO={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},_O={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}};function xO(e,t=127.5){return(ut(e,t)||"").charAt(0)}const hw=new Map;function P2(e,t=127.5){const n=`${e}@${t}`,i=hw.get(n);if(i)return i;const o=Gn(e,315,t);if(!o)throw new Error(`    : year=${e}, lon=${t}`);return hw.set(n,o),o}const wO=(e,t)=>(e%t+t)%t,$2=e=>e instanceof Date&&!Number.isNaN(e.getTime());function I2(e,t=127.5){if(!$2(e))throw new Error("resolveYearIndex: invalid date");const n=e.getFullYear(),i=P2(n,t),o=e<i?n-1:n,l=wO(o-4,60);return{useYear:o,index60Num:l}}function ut(e,t=127.5){const{index60Num:n}=I2(e,t);return Kb[n]}const SO=[2,4,6,8,0,2,4,6,8,0];function EO(e,t=127.5){const n=new Array(12);return n[0]=P2(e,t),n[1]=Gn(e,345,t),n[2]=Gn(e,15,t),n[3]=Gn(e,45,t),n[4]=Gn(e,75,t),n[5]=Gn(e,105,t),n[6]=Gn(e,135,t),n[7]=Gn(e,165,t),n[8]=Gn(e,195,t),n[9]=Gn(e,225,t),n[10]=Gn(e,255,t),n[11]=Gn(e+1,285,t),n.map(i=>new Date(i.getTime()+1800*1e3))}function TO(e,t=127.5){const{useYear:n}=I2(e,t),i=EO(n,t);let o=0;for(let u=0;u<12;u++)e>=i[u]&&(o=u);return{monthIndex:o+1,useYear:n,boundaries:i}}function kO(e,t=127.5){const n=xO(e,t),i=Bi..indexOf(n);if(i<0)throw new Error(`resolveFirstMonthStemIdx: invalid year stem "${n}"`);return SO[i]}function AO(e,t,n=127.5){return(kO(e,n)+(t-1))%10}function jt(e,t=127.5){if(!$2(e))return"";const{monthIndex:n}=TO(e,t),i=(2+(n-1))%12,o=Bi.[i],l=AO(e,n,t);return Bi.[l]+o}const z2=(e,t)=>(e%t+t)%t;function U2(e,t,n,i=0,o=0,l=0){t<=2&&(e-=1,t+=12);const u=Math.floor(e/100),f=2-u+Math.floor(u/4),m=(i+o/60+l/3600)/24;return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+m+f-1524.5}function jO(e,t){const n=e.getHours(),i=e.getMinutes(),o=n*60+i,l=H2(e);return t===""&&l===""?o>=1380?1:0:t===""&&(l===""||l==="")?o<180?-1:0:(o<0,0)}function NO(e,t){const i=e.getHours()*60+e.getMinutes();return t===""?i>=1380?1:0:t===""&&i<180?-1:0}const Kf={JDN:2445731,idx:0};function _t(e,t){const n=jO(e,t),i=new Date(e.getTime());i.setDate(i.getDate()+n);const o=U2(i.getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes()),l=Math.floor(o+.5),u=z2(l-Kf.JDN+Kf.idx,60),f=Kb[u];if(!f)throw new Error(`getDayGanZhi: idx=${u} out of range (jdn=${l}, jd=${o})`);return f}function OO(e,t){const n=new Date(e),i=NO(n,t),o=new Date(e.getTime());o.setDate(o.getDate()+i);const l=U2(o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()),u=Math.floor(l+.5),f=z2(u-Kf.JDN+Kf.idx,60),m=Kb[f];if(!m)throw new Error(`getDayGanZhi: idx=${f} out of range (jdn=${u}, jd=${l})`);return m}function H2(e){e instanceof Date||(e=new Date(e));const t=e.getHours()*60+e.getMinutes();for(let n=0;n<dw.length;n++){const{branch:i,start:o,end:l}=dw[n];if(o<l){if(t>=o&&t<l)return i}else if(t>=o||t<l)return i}return""}function DO(e,t,n,i){const o=jr.indexOf(t);if(o<0)return"";let l=(o%5*2+n)%10;const u=e.getHours();return(i===""||i==="/"&&u>=3)&&(n===0||n===1)&&(l=(l+2)%10),jr[l]}function $i(e,t,n){e instanceof Date||(e=new Date(e));const i=H2(e),o=Yr.indexOf(i),u=(n??_t(e,t)).charAt(0);return DO(e,u,o,t)+i}const fw=e=>{let t;const n=new Set,i=(p,y)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=y??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(S=>S(t,x))}},o=()=>t,f={setState:i,getState:o,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=t=e(i,o,f);return f},MO=(e=>e?fw(e):fw),CO=e=>e;function RO(e,t=CO){const n=rn.useSyncExternalStore(e.subscribe,rn.useCallback(()=>t(e.getState()),[e,t]),rn.useCallback(()=>t(e.getInitialState()),[e,t]));return rn.useDebugValue(n),n}const mw=e=>{const t=MO(e),n=i=>RO(t,i);return Object.assign(n,t),n},gd=(e=>e?mw(e):mw);function LO(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var l;const u=m=>m===null?null:JSON.parse(m,void 0),f=(l=n.getItem(o))!=null?l:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,l)=>n.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>n.removeItem(o)}}const lb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return lb(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return lb(i)(n)}}}},BO=(e,t)=>(n,i,o)=>{let l={storage:LO(()=>localStorage),partialize:k=>k,version:0,merge:(k,N)=>({...N,...k}),...t},u=!1;const f=new Set,m=new Set;let p=l.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},i,o);const y=()=>{const k=l.partialize({...i()});return p.setItem(l.name,{state:k,version:l.version})},_=o.setState;o.setState=(k,N)=>(_(k,N),y());const x=e((...k)=>(n(...k),y()),i,o);o.getInitialState=()=>x;let S;const T=()=>{var k,N;if(!p)return;u=!1,f.forEach($=>{var A;return $((A=i())!=null?A:x)});const C=((N=l.onRehydrateStorage)==null?void 0:N.call(l,(k=i())!=null?k:x))||void 0;return lb(p.getItem.bind(p))(l.name).then($=>{if($)if(typeof $.version=="number"&&$.version!==l.version){if(l.migrate){const A=l.migrate($.state,$.version);return A instanceof Promise?A.then(D=>[!0,D]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,$.state];return[!1,void 0]}).then($=>{var A;const[D,M]=$;if(S=l.merge(M,(A=i())!=null?A:x),n(S,!0),D)return y()}).then(()=>{C?.(S,void 0),S=i(),u=!0,m.forEach($=>$(S))}).catch($=>{C?.(void 0,$)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>T(),hasHydrated:()=>u,onHydrate:k=>(f.add(k),()=>{f.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},l.skipHydration||T(),S||x},G2=BO;var Vs={},qh={},cb=function(e,t){return cb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},cb(e,t)};function F2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Wf=function(){return Wf=Object.assign||function(t){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Wf.apply(this,arguments)};function kc(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function Y2(e,t,n,i){var o=arguments.length,l=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,i);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(l=(o<3?u(l):o>3?u(t,n,l):u(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}function q2(e,t){return function(n,i){t(n,i,e)}}function Z2(e,t,n,i,o,l){function u(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var f=i.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!t&&e?i.static?e:e.prototype:null,y=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),_,x=!1,S=n.length-1;S>=0;S--){var T={};for(var k in i)T[k]=k==="access"?{}:i[k];for(var k in i.access)T.access[k]=i.access[k];T.addInitializer=function(C){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(C||null))};var N=(0,n[S])(f==="accessor"?{get:y.get,set:y.set}:y[m],T);if(f==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(_=u(N.get))&&(y.get=_),(_=u(N.set))&&(y.set=_),(_=u(N.init))&&o.unshift(_)}else(_=u(N))&&(f==="field"?o.unshift(_):y[m]=_)}p&&Object.defineProperty(p,i.name,y),x=!0}function V2(e,t,n){for(var i=arguments.length>2,o=0;o<t.length;o++)n=i?t[o].call(e,n):t[o].call(e);return i?n:void 0}function K2(e){return typeof e=="symbol"?e:"".concat(e)}function W2(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function X2(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ze(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(i.next(y))}catch(_){u(_)}}function m(y){try{p(i.throw(y))}catch(_){u(_)}}function p(y){y.done?l(y.value):o(y.value).then(f,m)}p((i=i.apply(e,t||[])).next())})}function J2(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(y){return m([p,y])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var jm=Object.create?(function(e,t,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}):(function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]});function Q2(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&jm(t,e,n)}function Xf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xb(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,l=[],u;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return l}function eE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xb(arguments[t]));return e}function tE(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var l=arguments[t],u=0,f=l.length;u<f;u++,o++)i[o]=l[u];return i}function nE(e,t,n){if(n||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}function yc(e){return this instanceof yc?(this.v=e,this):new yc(e)}function rE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(S){return function(T){return Promise.resolve(T).then(S,_)}}function f(S,T){i[S]&&(o[S]=function(k){return new Promise(function(N,C){l.push([S,k,N,C])>1||m(S,k)})},T&&(o[S]=T(o[S])))}function m(S,T){try{p(i[S](T))}catch(k){x(l[0][3],k)}}function p(S){S.value instanceof yc?Promise.resolve(S.value.v).then(y,_):x(l[0][2],S)}function y(S){m("next",S)}function _(S){m("throw",S)}function x(S,T){S(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function iE(e){var t,n;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,l){t[o]=e[o]?function(u){return(n=!n)?{value:yc(e[o](u)),done:!1}:l?l(u):u}:l}}function sE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Xf=="function"?Xf(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(u){return new Promise(function(f,m){u=e[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}function aE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var PO=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},ub=function(e){return ub=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},ub(e)};function oE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=ub(e),i=0;i<n.length;i++)n[i]!=="default"&&jm(t,e,n[i]);return PO(t,e),t}function lE(e){return e&&e.__esModule?e:{default:e}}function cE(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function uE(e,t,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function dE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function hE(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var $O=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function fE(e){function t(l){e.error=e.hasError?new $O(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var n,i=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(l).then(o,function(u){return t(u),o()})}else i|=1}catch(u){t(u)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function mE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,o,l,u){return i?t?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):e}const IO={__extends:F2,__assign:Wf,__rest:kc,__decorate:Y2,__param:q2,__esDecorate:Z2,__runInitializers:V2,__propKey:K2,__setFunctionName:W2,__metadata:X2,__awaiter:Ze,__generator:J2,__createBinding:jm,__exportStar:Q2,__values:Xf,__read:Xb,__spread:eE,__spreadArrays:tE,__spreadArray:nE,__await:yc,__asyncGenerator:rE,__asyncDelegator:iE,__asyncValues:sE,__makeTemplateObject:aE,__importStar:oE,__importDefault:lE,__classPrivateFieldGet:cE,__classPrivateFieldSet:uE,__classPrivateFieldIn:dE,__addDisposableResource:hE,__disposeResources:fE,__rewriteRelativeImportExtension:mE},zO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:hE,get __assign(){return Wf},__asyncDelegator:iE,__asyncGenerator:rE,__asyncValues:sE,__await:yc,__awaiter:Ze,__classPrivateFieldGet:cE,__classPrivateFieldIn:dE,__classPrivateFieldSet:uE,__createBinding:jm,__decorate:Y2,__disposeResources:fE,__esDecorate:Z2,__exportStar:Q2,__extends:F2,__generator:J2,__importDefault:lE,__importStar:oE,__makeTemplateObject:aE,__metadata:X2,__param:q2,__propKey:K2,__read:Xb,__rest:kc,__rewriteRelativeImportExtension:mE,__runInitializers:V2,__setFunctionName:W2,__spread:eE,__spreadArray:nE,__spreadArrays:tE,__values:Xf,default:IO},Symbol.toStringTag,{value:"Module"})),UO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Nm=class extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}},pE=class extends Nm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},db=class extends Nm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},hb=class extends Nm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Jf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jf||(Jf={}));class HO{constructor(t,{headers:n={},customFetch:i,region:o=Jf.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=UO(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ze(this,arguments,void 0,function*(n,i={}){var o;let l,u;try{const{headers:f,method:m,body:p,signal:y,timeout:_}=i;let x={},{region:S}=i;S||(S=this.region);const T=new URL(`${this.url}/${n}`);S&&S!=="any"&&(x["x-region"]=S,T.searchParams.set("forceFunctionRegion",S));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(x["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(x["Content-Type"]="application/json",k=JSON.stringify(p)):k=p;let N=y;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),y?(N=u.signal,y.addEventListener("abort",()=>u.abort())):N=u.signal);const C=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:k,signal:N}).catch(M=>{throw new pE(M)}),$=C.headers.get("x-relay-error");if($&&$==="true")throw new db(C);if(!C.ok)throw new hb(C);let A=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return A==="application/json"?D=yield C.json():A==="application/octet-stream"||A==="application/pdf"?D=yield C.blob():A==="text/event-stream"?D=C:A==="multipart/form-data"?D=yield C.formData():D=yield C.text(),{data:D,error:null,response:C}}catch(f){return{data:null,error:f,response:f instanceof hb||f instanceof db?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const GO=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Jf},FunctionsClient:HO,FunctionsError:Nm,FunctionsFetchError:pE,FunctionsHttpError:hb,FunctionsRelayError:db},Symbol.toStringTag,{value:"Module"})),gE=md(GO);var mr={};const Ac=md(zO);var Zh={},Vh={},Kh={},Wh={},Xh={},Jh={},pw;function bE(){if(pw)return Jh;pw=1,Object.defineProperty(Jh,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Jh.default=e,Jh}var gw;function yE(){if(gw)return Xh;gw=1,Object.defineProperty(Xh,"__esModule",{value:!0});const t=Ac.__importDefault(bE());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,y,_,x;let S=null,T=null,k=null,N=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const M=await m.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?T=M:T=JSON.parse(M))}const A=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");A&&D&&D.length>1&&(k=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,k=null,N=406,C="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const A=await m.text();try{S=JSON.parse(A),Array.isArray(S)&&m.status===404&&(T=[],S=null,N=200,C="OK")}catch{m.status===404&&A===""?(N=204,C="No Content"):S={message:A}}if(S&&this.isMaybeSingle&&(!((x=S?.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,N=200,C="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:T,count:k,status:N,statusText:C}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,y,_,x,S,T;let k="";const N=m?.cause;if(N){const C=(p=N?.message)!==null&&p!==void 0?p:"",$=(y=N?.code)!==null&&y!==void 0?y:"";k=`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(x=N?.name)!==null&&x!==void 0?x:"Error"}: ${C}`,$&&(k+=` (${$})`),N?.stack&&(k+=`
${N.stack}`)}else k=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(T=m?.name)!==null&&T!==void 0?T:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}};return Xh.default=n,Xh}var bw;function vE(){if(bw)return Wh;bw=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=Ac.__importDefault(yE());let n=class extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return Wh.default=n,Wh}var yw;function Jb(){if(yw)return Kh;yw=1,Object.defineProperty(Kh,"__esModule",{value:!0});const t=Ac.__importDefault(vE()),n=new RegExp("[,()]");let i=class extends t.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}};return Kh.default=i,Kh}var vw;function _E(){if(vw)return Vh;vw=1,Object.defineProperty(Vh,"__esModule",{value:!0});const t=Ac.__importDefault(Jb());let n=class{constructor(o,{headers:l={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(o,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const y=(o??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Vh.default=n,Vh}var _w;function FO(){if(_w)return Zh;_w=1,Object.defineProperty(Zh,"__esModule",{value:!0});const e=Ac,t=e.__importDefault(_E()),n=e.__importDefault(Jb());let i=class xE{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new xE(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var y;let _;const x=new URL(`${this.url}/rpc/${l}`);let S;f||m?(_=f?"HEAD":"GET",Object.entries(u).filter(([k,N])=>N!==void 0).map(([k,N])=>[k,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([k,N])=>{x.searchParams.append(k,N)})):(_="POST",S=u);const T=new Headers(this.headers);return p&&T.set("Prefer",`count=${p}`),new n.default({method:_,url:x,headers:T,schema:this.schemaName,body:S,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Zh.default=i,Zh}var xw;function wE(){if(xw)return mr;xw=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.PostgrestError=mr.PostgrestBuilder=mr.PostgrestTransformBuilder=mr.PostgrestFilterBuilder=mr.PostgrestQueryBuilder=mr.PostgrestClient=void 0;const e=Ac,t=e.__importDefault(FO());mr.PostgrestClient=t.default;const n=e.__importDefault(_E());mr.PostgrestQueryBuilder=n.default;const i=e.__importDefault(Jb());mr.PostgrestFilterBuilder=i.default;const o=e.__importDefault(vE());mr.PostgrestTransformBuilder=o.default;const l=e.__importDefault(yE());mr.PostgrestBuilder=l.default;const u=e.__importDefault(bE());return mr.PostgrestError=u.default,mr.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},mr}class SE{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const YO="2.86.2",qO=`realtime-js/${YO}`,EE="1.0.0",ZO="2.0.0",ww=EE,fb=1e4,VO=1e3,KO=100;var tl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(tl||(tl={}));var Bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bn||(Bn={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var mb;(function(e){e.websocket="websocket"})(mb||(mb={}));var nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nl||(nl={}));class WO{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,i;const o=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,i){var o,l;const u=t.topic,f=(o=t.ref)!==null&&o!==void 0?o:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let T=new DataView(S),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,m.length),T.setUint8(k++,f.length),T.setUint8(k++,u.length),T.setUint8(k++,p.length),T.setUint8(k++,_.length),T.setUint8(k++,n),Array.from(m,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(f,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(u,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(p,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(_,C=>T.setUint8(k++,C.charCodeAt(0)));var N=new Uint8Array(S.byteLength+i.byteLength);return N.set(new Uint8Array(S),0),N.set(new Uint8Array(i),S.byteLength),N.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,u,f,m]=i;return n({join_ref:o,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,i){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(t.slice(m,m+o));m=m+o;const y=i.decode(t.slice(m,m+l));m=m+l;const _=i.decode(t.slice(m,m+u));m=m+u;const x=t.slice(m,t.byteLength),S=f===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,T={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class TE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const Sw=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=XO(u,e,t,o),l),{}):{}},XO=(e,t,n,i)=>{const o=t.find(f=>f.name===e),l=o?.type,u=n[e];return l&&!i.includes(l)?kE(l,u):pb(u)},kE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return tD(t,n)}switch(e){case Kt.bool:return JO(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return QO(t);case Kt.json:case Kt.jsonb:return eD(t);case Kt.timestamp:return nD(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return pb(t);default:return pb(t)}},pb=e=>e,JO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},QO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>kE(t,f))}return e},nD=e=>typeof e=="string"?e.replace(" ","T"):e,AE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class J0{constructor(t,n,i={},o=fb){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gb||(gb={}));let jE=class If{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=If.syncState(this.state,o,l,u),this.pendingDiffs.forEach(m=>{this.state=If.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=If.syncDiff(this.state,o,l,u),f())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const l=this.cloneDeep(t),u=this.transformState(n),f={},m={};return this.map(l,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const _=l[p];if(_){const x=y.map(N=>N.presence_ref),S=_.map(N=>N.presence_ref),T=y.filter(N=>S.indexOf(N.presence_ref)<0),k=_.filter(N=>x.indexOf(N.presence_ref)<0);T.length>0&&(f[p]=T),k.length>0&&(m[p]=k)}else f[p]=y}),this.syncDiff(l,{joins:f,leaves:m},i,o)}static syncDiff(t,n,i,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const y=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(m),y.length>0){const _=t[f].map(S=>S.presence_ref),x=y.filter(S=>_.indexOf(S.presence_ref)<0);t[f].unshift(...x)}i(f,y,m)}),this.map(u,(f,m)=>{let p=t[f];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),t[f]=p,o(f,p,m),p.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var bb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(bb||(bb={}));var mc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(mc||(mc={}));var Ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));const rD=Bn;let NE=class OE{constructor(t,n={config:{}},i){var o,l;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new J0(this,ns.join,this.params,this.timeout),this.rejoinTimer=new TE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new jE(this),this.broadcastEndpointURL=AE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[mc.PRESENCE]&&this.bindings[mc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Ss.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var T;if(this.socket.setAuth(),S===void 0){t?.(Ss.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,N=(T=k?.length)!==null&&T!==void 0?T:0,C=[];for(let $=0;$<N;$++){const A=k[$],{filter:{event:D,schema:M,table:G,filter:H}}=A,F=S&&S[$];if(F&&F.event===D&&F.schema===M&&F.table===G&&F.filter===H)C.push(Object.assign(Object.assign({},A),{id:F.id}));else{this.unsubscribe(),this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Ss.SUBSCRIBED);return}}).receive("error",S=>{this.state=Bn.errored,t?.(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Bn.joined&&t===mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new J0(this,ns.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new J0(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>KO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,l;const u=t.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=ns;if(i&&[f,m,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,n,i);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var T,k,N;return((T=S.filter)===null||T===void 0?void 0:T.event)==="*"||((N=(k=S.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(S=>S.callback(x,i)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var T,k,N,C,$,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const D=S.id,M=(T=S.filter)===null||T===void 0?void 0:T.event;return D&&((k=n.ids)===null||k===void 0?void 0:k.includes(D))&&(M==="*"||M?.toLocaleLowerCase()===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const D=($=(C=S?.filter)===null||C===void 0?void 0:C.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return D==="*"||D===((A=n?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof x=="object"&&"ids"in x){const T=x.data,{schema:k,table:N,commit_timestamp:C,type:$,errors:A}=T;x=Object.assign(Object.assign({},{schema:k,table:N,commit_timestamp:C,eventType:$,new:{},old:{},errors:A}),this._getPayloadRecords(T))}S.callback(x,i)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&OE.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Sw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Sw(t.columns,t.old_record)),n}};const Q0=()=>{},Qh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iD=[1e3,2e3,5e3,1e4],sD=1e4,aD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let oD=class{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fb,this.transport=null,this.heartbeatIntervalMs=Qh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Q0,this.ref=0,this.reconnectTimer=null,this.vsn=ww,this.logger=Q0,this.conn=null,this.sendBuffer=[],this.serializer=new WO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${mb.websocket}`,this.httpEndpoint=AE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=SE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case tl.connecting:return nl.Connecting;case tl.open:return nl.Open;case tl.closing:return nl.Closing;default:return nl.Closed}}isConnected(){return this.connectionState()===nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new NE(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===tl.open||this.conn.readyState===tl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([aD],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:qO};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ns.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new TE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,l,u,f,m,p,y,_,x,S;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:fb,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Qh.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Q0,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:ww,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(T=>iD[T-1]||sD),this.vsn){case EE:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((T,k)=>k(JSON.stringify(T))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:((T,k)=>k(JSON.parse(T)));break;case ZO:this.encode=(x=t?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};const lD=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:rD,get REALTIME_LISTEN_TYPES(){return mc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return bb},get REALTIME_PRESENCE_LISTEN_EVENTS(){return gb},get REALTIME_SUBSCRIBE_STATES(){return Ss},RealtimeChannel:NE,RealtimeClient:oD,RealtimePresence:jE,WebSocketFactory:SE},Symbol.toStringTag,{value:"Module"})),DE=md(lD);class bd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ln(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ME extends bd{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qf extends bd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Qb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cD=()=>Response,yb=e=>{if(Array.isArray(e))return e.map(n=>yb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=yb(i)}),t},uD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dD=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),eg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},hD=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){const i=yield cD();e instanceof i&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new ME(eg(o),l,u))}).catch(o=>{t(new Qf(eg(o),o))}):t(new Qf(eg(e),e))}),fD=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!i?o:(uD(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function yd(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,fD(t,i,o,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>hD(m,f,i))})})}function ed(e,t,n,i){return Ze(this,void 0,void 0,function*(){return yd(e,"GET",t,n,i)})}function ts(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return yd(e,"POST",t,i,o,n)})}function vb(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return yd(e,"PUT",t,i,o,n)})}function mD(e,t,n,i){return Ze(this,void 0,void 0,function*(){return yd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function ey(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return yd(e,"DELETE",t,i,o,n)})}class pD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}var CE;class gD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[CE]="BlobDownloadBuilder",this.promise=null}asStream(){return new pD(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}CE=Symbol.toStringTag;const bD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ew={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yD{constructor(t,n={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=Qb(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,o){return Ze(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Ew),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),_=yield(t=="PUT"?vb:ts)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ln(l))return{data:null,error:l};throw l}})}upload(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,o){return Ze(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:Ew.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",p.cacheControl)):(m=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const _=yield vb(this.fetch,f.toString(),m,{headers:y});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ln(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(t,n){return Ze(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield ts(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new bd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}update(t,n,i){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}copy(t,n,i){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,i){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield ts(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=yield ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",f=this._getFinalPath(t),m=()=>ed(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new gD(m,this.shouldThrowOnError)}info(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield ed(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:yb(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}exists(t){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield mD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i)&&i instanceof Qf){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${p}`)}}}remove(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}list(t,n,i){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},bD),n),{prefix:t||""});return{data:yield ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}listV2(t,n){return Ze(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield ts(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const RE="2.86.2",LE={"X-Client-Info":`storage-js/${RE}`};class vD{constructor(t,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LE),n),this.fetch=Qb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield ed(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}createBucket(t){return Ze(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield vb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var td=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _D(e,t,n){const i=new URL(t,e);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function xD(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function wD(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:l,headers:u}){const f=_D(e.baseUrl,i,o),m=await xD(e.auth),p=await t(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),x=_&&y?JSON.parse(y):y;if(!p.ok){const S=_?x:void 0,T=S?.error;throw new td(T?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:p.status,headers:p.headers,data:x}}}}function ef(e){return e.join("")}var SD=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ef(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ef(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ef(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ef(e.namespace)}`}),!0}catch(t){if(t instanceof td&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof td&&n.status===409)return;throw n}}};function Xl(e){return e.join("")}var ED=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof td&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof td&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},TD=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=wD({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new SD(this.client,t),this.tableOps=new ED(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class BE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},LE),n),this.fetch=Qb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield ed(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ln(n))return{data:null,error:n};throw n}})}from(t){if(!dD(t))throw new bd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new TD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ze(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const ty={"X-Client-Info":`storage-js/${RE}`,"Content-Type":"application/json"};class ny extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class zf extends ny{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class PE extends ny{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var _b;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_b||(_b={}));const Om=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kD=()=>Response,$E=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},AD=e=>Array.from(new Float32Array(e)),jD=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},Tw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ND=(e,t,n)=>Ze(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){const o=e.status||500,l=e;if(typeof l.json=="function")l.json().then(u=>{const f=u?.statusCode||u?.code||o+"";t(new zf(Tw(u),o,f))}).catch(()=>{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new zf(f,o,u))});else{const u=o+"",f=l.statusText||`HTTP ${o} error`;t(new zf(f,o,u))}}else t(new PE(Tw(e),e))}),OD=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return i?($E(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),n)):o};function DD(e,t,n,i,o,l){return Ze(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(n,OD(t,i,o,l)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>ND(m,f,i))})})}function li(e,t,n,i,o){return Ze(this,void 0,void 0,function*(){return DD(e,"POST",t,i,o,n)})}class IE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ty),n),this.fetch=Om(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}listIndexes(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}})}}class zE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ty),n),this.fetch=Om(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield li(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ze(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class UE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ty),n),this.fetch=Om(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(t={}){try{return{data:yield li(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ze(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}})}}class HE extends UE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new GE(this.url,this.headers,t,this.fetch)}createBucket(t){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ze(this,void 0,void 0,function*(){return n.createBucket.call(this,t)})}getBucket(t){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ze(this,void 0,void 0,function*(){return n.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ze(this,arguments,void 0,function*(n={}){return t.listBuckets.call(this,n)})}deleteBucket(t){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ze(this,void 0,void 0,function*(){return n.deleteBucket.call(this,t)})}}class GE extends IE{constructor(t,n,i,o){super(t,n,o),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new FE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class FE extends zE{constructor(t,n,i,o,l){super(t,n,l),this.vectorBucketName=i,this.indexName=o}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class MD extends vD{constructor(t,n={},i,o){super(t,n,i,o)}from(t){return new yD(this.url,this.headers,t,this.fetch)}get vectors(){return new HE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new BE(this.url+"/iceberg",this.headers,this.fetch)}}const CD=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:BE,StorageApiError:ME,StorageClient:MD,StorageError:bd,StorageUnknownError:Qf,StorageVectorsApiError:zf,StorageVectorsClient:HE,StorageVectorsError:ny,get StorageVectorsErrorCode(){return _b},StorageVectorsUnknownError:PE,VectorBucketApi:UE,VectorBucketScope:GE,VectorDataApi:zE,VectorIndexApi:IE,VectorIndexScope:FE,isPlainObject:$E,isStorageError:ln,isStorageVectorsError:Fr,normalizeToFloat32:AD,resolveFetch:Om,resolveResponse:kD,validateVectorDimension:jD},Symbol.toStringTag,{value:"Module"})),RD=md(CD);var tg={},Du={},kw;function LD(){return kw||(kw=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.version=void 0,Du.version="2.86.2"),Du}var Aw;function BD(){return Aw||(Aw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=LD();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(tg)),tg}var ng={},jw;function PD(){return jw||(jw=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);e.resolveFetch=t;const n=()=>Headers;e.resolveHeadersConstructor=n;const i=(o,l,u)=>{const f=(0,e.resolveFetch)(u),m=(0,e.resolveHeadersConstructor)();return async(p,y)=>{var _;const x=(_=await l())!==null&&_!==void 0?_:o;let S=new m(y?.headers);return S.has("apikey")||S.set("apikey",o),S.has("Authorization")||S.set("Authorization",`Bearer ${x}`),f(p,Object.assign(Object.assign({},y),{headers:S}))}};e.fetchWithAuth=i})(ng)),ng}var Ks={},Nw;function $D(){if(Nw)return Ks;Nw=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.isBrowser=void 0,Ks.uuid=e,Ks.ensureTrailingSlash=t,Ks.applySettingDefaults=i,Ks.validateSupabaseUrl=o;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,f=l=="x"?u:u&3|8;return f.toString(16)})}function t(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Ks.isBrowser=n;function i(l,u){var f,m;const{db:p,auth:y,realtime:_,global:x}=l,{db:S,auth:T,realtime:k,global:N}=u,C={db:Object.assign(Object.assign({},S),p),auth:Object.assign(Object.assign({},T),y),realtime:Object.assign(Object.assign({},k),_),storage:{},global:Object.assign(Object.assign(Object.assign({},N),x),{headers:Object.assign(Object.assign({},(f=N?.headers)!==null&&f!==void 0?f:{}),(m=x?.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?C.accessToken=l.accessToken:delete C.accessToken,C}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Ks}var Mu={};const YE="2.86.2",oc=30*1e3,xb=3,rg=xb*oc,ID="http://localhost:9999",zD="supabase.auth.token",UD={"X-Client-Info":`gotrue-js/${YE}`},wb="X-Supabase-Api-Version",qE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GD=600*1e3;let vc=class extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}};function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let ZE=class extends vc{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}};function VE(e){return We(e)&&e.name==="AuthApiError"}let Ya=class extends vc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},na=class extends vc{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}},Hr=class extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function KE(e){return We(e)&&e.name==="AuthSessionMissingError"}let Wo=class extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Hu=class extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Gu=class extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function WE(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}let Sb=class extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},em=class extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function Uf(e){return We(e)&&e.name==="AuthRetryableFetchError"}let Eb=class extends na{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}};function FD(e){return We(e)&&e.name==="AuthWeakPasswordError"}let tm=class extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const nm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ow=` 	
\r=`.split(""),YD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ow.length;t+=1)e[Ow[t].charCodeAt(0)]=-2;for(let t=0;t<nm.length;t+=1)e[nm[t].charCodeAt(0)]=t;return e})();function Dw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(nm[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(nm[i]),t.queuedBits-=6}}function XE(e,t,n){const i=YD[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Mw(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{VD(u,i,n)};for(let u=0;u<e.length;u+=1)XE(e.charCodeAt(u),o,l);return t.join("")}function qD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ZD(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}qD(i,t)}}function VD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function pc(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)XE(e.charCodeAt(o),n,i);return new Uint8Array(t)}function KD(e){const t=[];return ZD(e,n=>t.push(n)),new Uint8Array(t)}function rl(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Dw(o,n,i)),Dw(null,n,i),t.join("")}function WD(e){return Math.round(Date.now()/1e3)+e}function XD(){return Symbol("auth-callback")}const sr=()=>typeof window<"u"&&typeof document<"u",Uo={tested:!1,writable:!1},JE=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Uo.tested)return Uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Uo.tested=!0,Uo.writable=!0}catch{Uo.tested=!0,Uo.writable=!1}return Uo.writable};function JD(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const QE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),QD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ho=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rr=async(e,t)=>{await e.removeItem(t)};class Dm{constructor(){this.promise=new Dm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Dm.promiseConstructor=Promise;function ig(e){const t=e.split(".");if(t.length!==3)throw new tm("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!HD.test(t[i]))throw new tm("JWT not in base64url format");return{header:JSON.parse(Mw(t[0])),payload:JSON.parse(Mw(t[1])),signature:pc(t[2]),raw:{header:t[0],payload:t[1]}}}async function eM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function tM(e,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function nM(e){return("0"+e.toString(16)).substr(-2)}function rM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,nM).join("")}async function iM(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function sM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await iM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jl(e,t,n=!1){const i=rM();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await lc(e,`${t}-code-verifier`,o);const l=await sM(i);return[l,i===l?"plain":"s256"]}const aM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oM(e){const t=e.headers.get(wb);if(!t||!t.match(aM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function lM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function cM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ql(e){if(!uM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sg(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dM(e,t){return new Proxy(e,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,o)}})}function Cw(e){return JSON.parse(JSON.stringify(e))}const Xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hM=[502,503,504];async function Rw(e){var t;if(!QD(e))throw new em(Xo(e),0);if(hM.includes(e.status))throw new em(Xo(e),e.status);let n;try{n=await e.json()}catch(l){throw new Ya(Xo(l),l)}let i;const o=oM(e);if(o&&o.getTime()>=qE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Eb(Xo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Hr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Eb(Xo(n),e.status,n.weak_password.reasons);throw new ZE(Xo(n),e.status||500,i)}const fM=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function rt(e,t,n,i){var o;const l=Object.assign({},i?.headers);l[wb]||(l[wb]=qE["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await mM(e,t,n+f,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function mM(e,t,n,i,o,l){const u=fM(t,i,o,l);let f;try{f=await e(n,Object.assign({},u))}catch(m){throw console.error(m),new em(Xo(m),0)}if(f.ok||await Rw(f),i?.noResolveJson)return f;try{return await f.json()}catch(m){await Rw(m)}}function Qi(e){var t;let n=null;bM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=WD(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Lw(e){const t=Qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function pM(e){return{data:e,error:null}}function gM(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=e,u=kc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function Bw(e){return e}function bM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Hf=["global","local","others"];let ry=class{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=QE(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Hf[0]){if(Hf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hf.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=kc(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:gM,redirectTo:n?.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Bw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(T.split(";")[1].split("=")[1]);p[`${N}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Ql(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qa})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ql(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Ql(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qa})}catch(i){if(We(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Ql(t.userId);try{const{data:n,error:i}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ql(t.userId),Ql(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,o,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Bw});if(y.error)throw y.error;const _=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(T.split(";")[1].split("=")[1]);p[`${N}Page`]=k}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(We(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(We(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}};function Pw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Jo={debug:!!(globalThis&&JE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let eT=class extends iy{};class yM extends iy{}async function tT(e,t,n){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new eT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const $w={};async function vM(e,t,n){var i;const o=(i=$w[e])!==null&&i!==void 0?i:Promise.resolve(),l=Promise.race([o.catch(()=>null),t>=0?new Promise((u,f)=>{setTimeout(()=>{f(new yM(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return $w[e]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function _M(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xM(e){return parseInt(e,16)}function wM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function SM(e){var t;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:y,uri:_,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=nT(e.address),T=y?`${y}://${i}`:i,k=e.statement?`${e.statement}
`:"",N=`${T} wants you to sign in with your Ethereum account:
${S}

${k}`;let C=`URI: ${_}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),f&&(C+=`
Not Before: ${f.toISOString()}`),m&&(C+=`
Request ID: ${m}`),p){let $=`
Resources:`;for(const A of p){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);$+=`
- ${A}`}C+=$}return`${N}
${C}`}class Pn extends Error{constructor({message:t,code:n,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class rm extends Pn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function EM({error:e,options:t}){var n,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(rT(u)){if(l.rp.id!==u)return new Pn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function TM({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(rT(i)){if(n.rpId!==i)return new Pn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class kM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const AM=new kM;function jM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,o=kc(e,["challenge","user","excludeCredentials"]),l=pc(t).buffer,u=Object.assign(Object.assign({},n),{id:pc(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:u});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:pc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function NM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=kc(e,["challenge","allowCredentials"]),o=pc(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:pc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function OM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:rl(new Uint8Array(e.response.attestationObject)),clientDataJSON:rl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function DM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rl(new Uint8Array(o.authenticatorData)),clientDataJSON:rl(new Uint8Array(o.clientDataJSON)),signature:rl(new Uint8Array(o.signature)),userHandle:o.userHandle?rl(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Iw(){var e,t;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function MM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rm("Browser returned unexpected credential type",t)}:{data:null,error:new rm("Empty credential response",t)}}catch(t){return{data:null,error:EM({error:t,options:e})}}}async function CM(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rm("Browser returned unexpected credential type",t)}:{data:null,error:new rm("Empty credential response",t)}}catch(t){return{data:null,error:TM({error:t,options:e})}}}const RM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function im(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(t(u)){const f=i[l];t(f)?i[l]=im(f,u):i[l]=im(u)}else i[l]=u}return i}function BM(e,t){return im(RM,e,t||{})}function PM(e,t){return im(LM,e,t||{})}class $M{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:o},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:f};const m=o??AM.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=BM(u.webauthn.credential_options.publicKey,l?.create),{data:y,error:_}=await MM({publicKey:p,signal:m});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}case"request":{const p=PM(u.webauthn.credential_options.publicKey,l?.request),{data:y,error:_}=await CM(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new vc("rpId is required for WebAuthn authentication")};try{if(!Iw())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new vc("rpId is required for WebAuthn registration")};try{if(!Iw())return{data:null,error:new Ya("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return We(u)?{data:null,error:u}:{data:null,error:new Ya("Unexpected error in register",u)}}}}_M();const IM={url:ID,storageKey:zD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zw(e,t,n){return await n()}const ec={};let sy=class Tb{get jwks(){var t,n;return(n=(t=ec[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ec[this.storageKey]=Object.assign(Object.assign({},ec[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ec[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ec[this.storageKey]=Object.assign(Object.assign({},ec[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},IM),t);if(this.storageKey=l.storageKey,this.instanceID=(n=Tb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&sr()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ry({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=QE(l.fetch),this.lock=l.lock||zw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:sr()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=tT:this.lock=zw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $M(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:JE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Pw(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${YE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(sr()&&(n=JD(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),sr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),WE(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?this._returnResult({error:n}):this._returnResult({error:new Ya("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qi}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var n,i,o;try{let l;if("email"in t){const{email:y,password:_,options:x}=t;let S=null,T=null;this.flowType==="pkce"&&([S,T]=await Jl(this.storage,this.storageKey)),l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:y,password:_,data:(n=x?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:T},xform:Qi})}else if("phone"in t){const{phone:y,password:_,options:x}=t;l=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Qi})}else throw new Hu("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await rr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Lw})}else if("phone"in t){const{phone:l,password:u,options:f}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Lw})}else throw new Hu("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Wo;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,o,l,u,f,m,p,y,_,x;let S,T;if("message"in t)S=t.message,T=t.signature;else{const{chain:k,wallet:N,statement:C,options:$}=t;let A;if(sr())if(typeof N=="object")A=N;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")A=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const D=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href),M=await A.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=nT(M[0]);let H=(i=$?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!H){const K=await A.request({method:"eth_chainId"});H=xM(K)}const F={domain:D.host,address:G,statement:C,uri:D.href,version:"1",chainId:H,nonce:(o=$?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=$?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=$?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=$?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=$?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=$?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=SM(F),T=await A.request({method:"personal_sign",params:[wM(S),G]})}try{const{data:k,error:N}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:T},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qi});if(N)throw N;if(!k||!k.session||!k.user){const C=new Wo;return this._returnResult({data:{user:null,session:null},error:C})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:N})}catch(k){if(We(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var n,i,o,l,u,f,m,p,y,_,x,S;let T,k;if("message"in t)T=t.message,k=t.signature;else{const{chain:N,wallet:C,statement:$,options:A}=t;let D;if(sr())if(typeof C=="object")D=C;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))D=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=C}const M=new URL((n=A?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const G=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),$?{statement:$}:null));let H;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")H=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)H=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)T=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),k=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${M.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(o=(i=A?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=A?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((_=(y=A?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...A.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const G=await D.signMessage(new TextEncoder().encode(T),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=G}}try{const{data:N,error:C}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:rl(k)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Qi});if(C)throw C;if(!N||!N.session||!N.user){const $=new Wo;return this._returnResult({data:{user:null,session:null},error:$})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if(We(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Qi});if(await rr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new Wo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:l,nonce:u}=t,f=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Qi}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Wo;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,o,l,u;try{if("email"in t){const{email:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Jl(this.storage,this.storageKey));const{error:_}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in t){const{phone:f,options:m}=t,{data:p,error:y}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:y})}throw new Hu("You must provide either an email or phone number.")}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,i;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Qi});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var n,i,o,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Jl(this.storage,this.storageKey));const p=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:pM});return!((l=p.data)===null||l===void 0)&&l.url&&sr()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Hr;const{error:o}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(We(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:f}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Hu("You must provide either an email or phone number and a type")}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<rg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Ho(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=sg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=dM(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qa}):await this._useSession(async n=>{var i,o,l;const{data:u,error:f}=n;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hr}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:qa})})}catch(n){if(We(n))return KE(n)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Hr;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Jl(this.storage,this.storageKey));const{data:p,error:y}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:qa});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hr;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:u}=ig(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)throw m;l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(We(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:f}=n;if(f)throw f;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Hr;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(We(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!sr())throw new Gu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sb("No code detected.");const{data:$,error:A}=await this._exchangeCodeForSession(t.code);if(A)throw A;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=t;if(!l||!f||!u||!p)throw new Gu("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(f);let x=y+_;m&&(x=parseInt(m));const S=x-y;S*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const T=x-_;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,x,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,x,y);const{data:k,error:N}=await this._getUser(l);if(N)throw N;const C={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:x,refresh_token:u,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:t.type},error:null})}catch(i){if(We(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(VE(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=XD(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Jl(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var u,f,m,p,y;const{data:_,error:x}=l;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return sr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(We(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:p,nonce:y}=t,_=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Qi}),{data:x,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Wo}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(o){if(await rr(this.storage,`${this.storageKey}-code-verifier`),We(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)throw u;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await tM(async o=>(o>0&&await eM(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qi})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Uf(l)&&Date.now()+u-i<oc})}catch(i){if(this._debug(n,"error",i),We(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),sr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ho(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await lc(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:sg()}else if(o&&!o.user&&!o.user){const u=await Ho(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await rr(this.storage,this.storageKey+"-user"),await lc(this.storage,this.storageKey,o)):o.user=sg()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rg;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${rg}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Uf(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Hr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Dm;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Hr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),We(l)){const u={data:null,error:l};return Uf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await lc(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Cw(o);await lc(this.storage,this.storageKey,l)}else{const o=Cw(n);await lc(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${oc}ms, refresh threshold is ${xb} ticks`),o<=xb&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Jl(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?OM(t.webauthn.credential_response):DM(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:jM(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:NM(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ig(i.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&sr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Hr});const u=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&sr()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Hr})})}catch(t){if(We(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Hr})})}catch(n){if(We(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(f=>f.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===t),i&&this.jwks_cached_at+GD>o)return i;const{data:l,error:u}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(f=>f.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:S,error:T}=await this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});i=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:f,payload:m}}=ig(i);n?.allowExpired||lM(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const y=cM(o.alg),_=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,KD(`${f}.${m}`)))throw new tm("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(We(i))return this._returnResult({data:null,error:i});throw i}}};sy.nextInstanceID={};const zM=ry,UM=sy,HM=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:zM,AuthApiError:ZE,AuthClient:UM,AuthError:vc,AuthImplicitGrantRedirectError:Gu,AuthInvalidCredentialsError:Hu,AuthInvalidJwtError:tm,AuthInvalidTokenResponseError:Wo,AuthPKCEGrantCodeExchangeError:Sb,AuthRetryableFetchError:em,AuthSessionMissingError:Hr,AuthUnknownError:Ya,AuthWeakPasswordError:Eb,CustomAuthError:na,GoTrueAdminApi:ry,GoTrueClient:sy,NavigatorLockAcquireTimeoutError:eT,SIGN_OUT_SCOPES:Hf,isAuthApiError:VE,isAuthError:We,isAuthImplicitGrantRedirectError:WE,isAuthRetryableFetchError:Uf,isAuthSessionMissingError:KE,isAuthWeakPasswordError:FD,lockInternals:Jo,navigatorLock:tT,processLock:vM},Symbol.toStringTag,{value:"Module"})),iT=md(HM);var Uw;function GM(){if(Uw)return Mu;Uw=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.SupabaseAuthClient=void 0;const e=iT;let t=class extends e.AuthClient{constructor(i){super(i)}};return Mu.SupabaseAuthClient=t,Mu}var Hw;function Gw(){if(Hw)return qh;Hw=1,Object.defineProperty(qh,"__esModule",{value:!0});const e=gE,t=wE(),n=DE,i=RD,o=BD(),l=PD(),u=$D(),f=GM();class m{constructor(y,_,x){var S,T,k;this.supabaseUrl=y,this.supabaseKey=_;const N=(0,u.validateSupabaseUrl)(y);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const C=`sb-${N.hostname.split(".")[0]}-auth-token`,$={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:C}),global:o.DEFAULT_GLOBAL_OPTIONS},A=(0,u.applySettingDefaults)(x??{},$);this.storageKey=(S=A.auth.storageKey)!==null&&S!==void 0?S:"",this.headers=(T=A.global.headers)!==null&&T!==void 0?T:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(D,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((k=A.auth)!==null&&k!==void 0?k:{},this.headers,A.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(D=>this.realtime.setAuth(D)).catch(D=>console.warn("Failed to set initial Realtime auth token:",D)),this.rest=new t.PostgrestClient(new URL("rest/v1",N).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,x?.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,_={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,_,x)}channel(y,_={config:{}}){return this.realtime.channel(y,_)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,_;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(_=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,storageKey:k,flowType:N,lock:C,debug:$,throwOnError:A},D,M){const G={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},G),D),storageKey:k,autoRefreshToken:y,persistSession:_,detectSessionInUrl:x,storage:S,userStorage:T,flowType:N,lock:C,debug:$,throwOnError:A,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(H=>H.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,x)=>{this._handleTokenChanged(_,"CLIENT",x?.access_token)})}_handleTokenChanged(y,_,x){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return qh.default=m,qh}var Fw;function FM(){return Fw||(Fw=1,(function(e){var t=Vs&&Vs.__createBinding||(Object.create?(function(y,_,x,S){S===void 0&&(S=x);var T=Object.getOwnPropertyDescriptor(_,x);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(y,S,T)}):(function(y,_,x,S){S===void 0&&(S=x),y[S]=_[x]})),n=Vs&&Vs.__exportStar||function(y,_){for(var x in y)x!=="default"&&!Object.prototype.hasOwnProperty.call(_,x)&&t(_,y,x)},i=Vs&&Vs.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const o=i(Gw());n(iT,e);var l=wE();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=gE;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(DE,e);var f=Gw();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return i(f).default}});const m=(y,_,x)=>new o.default(y,_,x);e.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const _=y.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Vs)),Vs}var sT=FM();const aT=ll(sT),YM=E2({__proto__:null,default:aT},[sT]),{PostgrestError:rU,FunctionsHttpError:iU,FunctionsFetchError:sU,FunctionsRelayError:aU,FunctionsError:oU,FunctionRegion:lU,SupabaseClient:cU,createClient:qM,GoTrueAdminApi:uU,GoTrueClient:dU,AuthAdminApi:hU,AuthClient:fU,navigatorLock:mU,NavigatorLockAcquireTimeoutError:pU,lockInternals:gU,processLock:bU,SIGN_OUT_SCOPES:yU,AuthError:vU,AuthApiError:_U,AuthUnknownError:xU,CustomAuthError:wU,AuthSessionMissingError:SU,AuthInvalidTokenResponseError:EU,AuthInvalidCredentialsError:TU,AuthImplicitGrantRedirectError:kU,AuthPKCEGrantCodeExchangeError:AU,AuthRetryableFetchError:jU,AuthWeakPasswordError:NU,AuthInvalidJwtError:OU,isAuthError:DU,isAuthApiError:MU,isAuthSessionMissingError:CU,isAuthImplicitGrantRedirectError:RU,isAuthRetryableFetchError:LU,isAuthWeakPasswordError:BU,RealtimePresence:PU,RealtimeChannel:$U,RealtimeClient:IU,REALTIME_LISTEN_TYPES:zU,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:UU,REALTIME_PRESENCE_LISTEN_EVENTS:HU,REALTIME_SUBSCRIBE_STATES:GU,REALTIME_CHANNEL_STATES:FU}=aT||YM,At=qM("https://jouhybyquybxbnqztxum.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpvdWh5YnlxdXlieGJucXp0eHVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NjIwOTgsImV4cCI6MjA4MDUzODA5OH0.qAD7S7yRW8GxcRze_3dyirReIy6HvMr9DeET-djp1Fw",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),gc={hiddenStem:"all",hiddenStemMode:"classic",ilunRule:"/",sinsalMode:"classic",sinsalBase:"",sinsalBloom:!1,exposure:"",charType:"",thinEum:!1,showSipSin:!0,showSibiSinsal:!0,showSibiUnseong:!0,showNabeum:!0,theme:"dark",sectionOrder:["hiddenStem","hiddenStemMode","ilunRule","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility"]},Wn=gd()(G2((e,t)=>({settings:gc,syncing:!1,loaded:!1,setSettings:n=>e({settings:n}),setKey:(n,i)=>e({settings:{...t().settings,[n]:i}}),reset:()=>e({settings:gc}),loadFromServer:async()=>{e({syncing:!0});const{data:{user:n},error:i}=await At.auth.getUser();if(i||!n){e({syncing:!1,loaded:!1});return}const{data:o,error:l}=await At.from("user_settings").select("payload").eq("user_id",n.id).single();if(l&&l.code!=="PGRST116"){console.error("loadFromServer(settings) error:",l),e({syncing:!1,loaded:!0});return}if(o?.payload){e({settings:o.payload,syncing:!1,loaded:!0});return}await t().saveToServer(!0),e({syncing:!1,loaded:!0})},saveToServer:async(n=!1)=>{if(!t().loaded&&!n)return;e({syncing:!0});const{data:{user:i},error:o}=await At.auth.getUser();if(o||!i){e({syncing:!1});return}const{error:l}=await At.from("user_settings").upsert({user_id:i.id,payload:t().settings,updated_at:new Date().toISOString()});l&&console.error("saveToServer(settings) error:",l),e({syncing:!1,loaded:!0})}}),{name:"settings_v1"}));function kb(e){const t=jr.indexOf(e);if(t!==-1)return jr[t];const n=mi..indexOf(e);return n!==-1?jr[n]:null}function oT(e){const t=Yr.indexOf(e);if(t!==-1)return Yr[t];const n=mi..indexOf(e);return n!==-1?Yr[n]:null}function Yw(e,t){if(t?.difficultyMode)return t?.theme==="light"?"bg-white border border-gray-300 text-white":"bg-white text-black";switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-500 text-white";case"":return"bg-gray-400 text-white";case"":return"bg-black text-white";default:return"bg-neutral-700 text-white"}}function hi(e,t,n){if(t==="stem"){const i=kb(e);if(!i)return console.warn("Invalid stem:",e),"bg-neutral-700";const o=jr.indexOf(i),l=o>=0?pO[o]:void 0;return Yw(l,n)}else{const i=oT(e);if(!i)return console.warn("Invalid branch:",e),"bg-neutral-700";const o=Yr.indexOf(i),l=o>=0?gO[o]:void 0;return Yw(l,n)}}function Ar(e,t){const n=kb(e);if(!n)throw new Error(`getSipSin: invalid dayStem ${e}`);if(t.stem){const i=kb(t.stem);if(!i)throw new Error(`getSipSin: invalid stem ${t.stem}`);return vO[n][i]}if(t.branch){const i=oT(t.branch);if(!i)throw new Error(`getSipSin: invalid branch ${t.branch}`);return _O[n][i]}throw new Error("getSipSin: stem or branch required")}const Mm={:["","(-)",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","",""],:["","(-)",""],:["","",""],:["","",""]},Cm={:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""],:["(-)","(-)",""],:["","",""],:["(-)","",""]};function Fu({branch:e,dayStem:t,mode:n="all",mapping:i="classic",variant:o="auto",isUnknownTime:l=!1}){const u=(i==="hgc"?Cm:Mm)[e]??[],f=n==="main"?[u[2]]:u,m=o==="white",p=m?"text-white":"text-neutral-800 dark:text-white",y=m?"border-white":"border-neutral-800 dark: border-neutral-200",_=m?"text-yellow-900":"text-red-600 dark:text-yellow-300";return g.jsx("div",{className:"w-full flex flex-col gap-1 mt-1",children:f.map((x,S)=>x==="(-)"||l?g.jsx("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs text-neutral-500 py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap`,children:"(-) ()"},S):g.jsxs("div",{className:`w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border ${y} ${p} rounded text-center text-nowrap 
            ${n==="main"||S===2?`jeonggi bg-neutral-500/50 ${_} font-bold`:""}`,children:[x," (",Ar(t,{stem:x}),")"]},S))})}const vd=gd(e=>({manualHour:null,setManualHour:t=>e({manualHour:t}),clearManualHour:()=>e({manualHour:null})})),ay={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},lT=Object.fromEntries(Object.entries(ay).map(([e,t])=>[t,e])),oy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},cT=Object.fromEntries(Object.entries(oy).map(([e,t])=>[t,e]));function qw(e){return Bi..includes(e)}function Zw(e){return Bi..includes(e)}function ZM(e){return mi..includes(e)}function VM(e){return mi..includes(e)}function Vw(e,t,n){return n===""?t==="stem"?ay[e]??e:oy[e]??e:t==="stem"?lT[e]??e:cT[e]??e}function Kw(e){const t=lT[e]??e;return ZM(t)?t:""}function KM(e){const t=cT[e]??e;return VM(t)?t:""}function WM(e){if(qw(e))return e;const t=ay[e]??e;return qw(t)?t:""}function XM(e){if(Zw(e))return e;const t=oy[e]??e;return Zw(t)?t:""}const JM=new Set(["","","","","","","","","",""]),QM=new Set(["","","","","","","","","","","",""]),eC=e=>JM.has(e),tC=e=>QM.has(e);function cc({label:e,gz:t,dayStem:n,settings:i,unseongText:o,shinsalText:l,hideBranchSipSin:u=!0,hideHiddenStems:f=!1,size:m="sm",variant:p="auto",isUnknownTime:y=!1}){const{manualHour:_}=vd(),x=y&&!_,S=t.charAt(0),T=t.charAt(1),k=Vw(S,"stem",i.charType),N=Vw(T,"branch",i.charType),C=Kw(S),$=KM(T),A=Kw(n),D=XM(T),M=WM(n),G=i.showSipSin?Ar(A,{stem:C}):null,H=!u&&i.showSipSin?Ar(A,{branch:$}):null,F=i.thinEum&&eC(S)?"font-thin":"font-bold",K=i.thinEum&&tC(T)?"font-thin":"font-bold",ae={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16",lg:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20"},Q=!f&&!!i.hiddenStem,Y=i.hiddenStem==="regular"?"main":"all",te=i.hiddenStemMode==="hgc"?"hgc":"classic",re=p==="white",Se=re?"bg-white text-neutral-900 border border-neutral-200":"bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-800",X=re?"bg-neutral-100 text-neutral-700":"bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",oe=re?"border-neutral-200":"border-neutral-200 dark:border-neutral-800",J=re?"text-neutral-500":"text-neutral-400",ye=re?"text-neutral-500":"text-neutral-400",{settings:W}=Wn(),U=x?`bg-white ${oe}`:`${hi(C,"stem",W)} ${oe}`,B=x?`bg-white ${oe}`:`${hi($,"branch",W)} ${oe}`,q=x?"text-black":W.difficultyMode?W.theme==="light"?"text-neutral-900":"text-black":"text-white",V=x?"text-black":W.difficultyMode?W.theme==="light"?"text-neutral-900":"text-black":"text-white";return g.jsxs("div",{className:`rounded-sm desk:rounded-xl overflow-hidden ${Se}`,children:[g.jsx("div",{className:`py-2 text-center text-[10px] desk:text-xs tracking-wider ${X} text-nowrap`,children:e}),g.jsxs("div",{className:"py-3 flex flex-col items-center gap-1",children:[G&&g.jsx("div",{className:`text-[10px] desk:text-xs ${J} text-nowrap`,children:y&&!_?"-":G}),g.jsx("div",{className:`${ae[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${U}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${q} ${F}`,children:x?"-":k})}),g.jsx("div",{className:`${ae[m]} rounded-sm desk:rounded-lg flex items-center justify-center border ${B}`,children:g.jsx("span",{className:`text-2xl md:text-3xl ${V} ${K}`,children:x?"-":N})}),Q&&g.jsx(Fu,{branch:D,dayStem:M,mode:Y,mapping:te,isUnknownTime:y&&!_&&(e===""||e==="")}),H&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye}`,children:y&&!_?"-":H}),i.showSibiUnseong&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:y&&!_?"-":o||""}),i.showSibiSinsal&&g.jsx("div",{className:`text-[10px] desk:text-xs ${ye} text-nowrap`,children:y&&!_?"-":l||""})]})]})}const nC=new Set(mi.);function rC(e){return km.has(e)?e:nC.has(e)?Am[e]:""}function iC({label:e,settings:t,hideBranchSipSin:n=!0}){const i=t.showSipSin,o=!!t.hiddenStem,u=(t.hiddenStem==="regular"?"main":"all")==="main"?1:3,f=t.showSipSin&&!n;return g.jsxs("div",{className:"rounded-sm desk:rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden transition-colors",children:[g.jsx("div",{className:"py-2 text-center text-[10px] desk:text-xs tracking-wider bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 text-nowrap",children:e}),g.jsxs("div",{className:"p-3 flex flex-col items-center gap-1",children:[i&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:"-"}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),g.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-sm desk:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 bg-white",children:g.jsx("span",{className:"text-2xl md:text-3xl font-bold text-neutral-900",children:"-"})}),o&&g.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:Array.from({length:u}).map((m,p)=>g.jsx("div",{className:"w-full max-w-[80px] mx-auto text-[10px] desk:text-xs py-0.5 desk:px-1 border border-neutral-200 dark:border-neutral-800 rounded text-center text-nowrap text-neutral-500 dark:text-neutral-400",children:"-"},p))}),f&&g.jsx("div",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:"-"})]})]})}function sC(){const e=Wn(T=>T.settings),[t,n]=R.useState(new Date),[i,o]=R.useState(!0),[l,u]=R.useState("/"),[f,m]=R.useState(!1);R.useEffect(()=>{if(!i)return;const T=setInterval(()=>n(new Date),1e3);return()=>clearInterval(T)},[i]);const p=ut(t),y=jt(t),_=_t(t,l),x=$i(t,"/"),S=rC(_.charAt(0));return g.jsx("div",{className:"flex justify-center items-center mt-12 w-full h-[calc(100dvh_-_112px)] ",children:g.jsxs("div",{className:`w-[96%] max-w-[640px] mx-auto mb-4 p-4
                      bg-white dark:bg-neutral-950
                      text-neutral-900 dark:text-neutral-100
                      rounded-xl shadow border border-neutral-200 dark:border-neutral-800 transition-colors`,children:[g.jsxs("header",{className:"flex flex-col desk:flex-row items-center justify-center desk:justify-between mb-4 gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[" "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(",i?"":"",") ",lC(t)]})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`text-xs rounded px-2 py-1 h-30 cursor-pointer
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"",children:" ( 23)"}),g.jsx("option",{value:"/",children:"/ ()"}),g.jsx("option",{value:"",children:" ( 3)"})]}),g.jsx("button",{onClick:()=>o(!i),className:`text-xs px-3 py-1 rounded transition-colors cursor-pointer
                        bg-neutral-100 hover:bg-neutral-200
                        dark:bg-neutral-800 dark:hover:bg-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        border border-neutral-200 dark:border-neutral-700`,children:i?" ":" "})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[f?g.jsx(iC,{label:"",settings:e,hideBranchSipSin:!0}):g.jsx(cc,{label:"",gz:x,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:_,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:y,dayStem:S,settings:e,hideBranchSipSin:!0}),g.jsx(cc,{label:"",gz:p,dayStem:S,settings:e,hideBranchSipSin:!0})]}),g.jsxs("div",{className:"flex flex-col desk:flex-row gap-2 desk:gap-3 items-center",children:[g.jsx("label",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:"/ "}),g.jsx("input",{type:"datetime-local",value:aC(t),disabled:i,onChange:T=>{const k=oC(T.target.value);k&&n(k)},className:`rounded px-3 py-1 text-sm transition-colors
                        bg-white dark:bg-neutral-900
                        border border-neutral-300 dark:border-neutral-700
                        text-neutral-900 dark:text-neutral-100
                        focus:outline-none focus:ring-2 focus:ring-amber-500/40
                        ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,min:"1900-01-01T00:00",max:"2100-12-31T23:59"}),g.jsx("button",{onClick:()=>m(T=>!T),className:`text-xs px-3 py-1 rounded border transition-colors cursor-pointer
                        ${f?"bg-white text-neutral-900 border-neutral-300 hover:bg-neutral-100":"bg-neutral-100 text-neutral-900 border-neutral-200 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-700"}`,title:"     ",children:f?" ":" "})]})]})})}function aC(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function oC(e){if(!e)return null;const[t,n]=e.split("T");if(!t||!n)return null;const[i,o,l]=t.split("-").map(Number),[u,f]=n.split(":").map(Number),m=new Date(i,o-1,l,u,f);return Number.isNaN(m.getTime())?null:m}function lC(e){const t=n=>n.toString().padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}const ir=[];for(let e=0;e<256;++e)ir.push((e+256).toString(16).slice(1));function cC(e,t=0){return(ir[e[t+0]]+ir[e[t+1]]+ir[e[t+2]]+ir[e[t+3]]+"-"+ir[e[t+4]]+ir[e[t+5]]+"-"+ir[e[t+6]]+ir[e[t+7]]+"-"+ir[e[t+8]]+ir[e[t+9]]+"-"+ir[e[t+10]]+ir[e[t+11]]+ir[e[t+12]]+ir[e[t+13]]+ir[e[t+14]]+ir[e[t+15]]).toLowerCase()}let ag;const uC=new Uint8Array(16);function dC(){if(!ag){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ag=crypto.getRandomValues.bind(crypto)}return ag(uC)}const hC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ww={randomUUID:hC};function uT(e,t,n){if(Ww.randomUUID&&!e)return Ww.randomUUID();e=e||{};const i=e.random??e.rng?.()??dC();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,cC(i)}var Yu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var fC=Yu.exports,Xw;function mC(){return Xw||(Xw=1,(function(e,t){(function(n,i){i(t)})(fC,(function(n){var i="1.9.4";function o(a){var d,b,E,j;for(b=1,E=arguments.length;b<E;b++){j=arguments[b];for(d in j)a[d]=j[d]}return a}var l=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function u(a,d){var b=Array.prototype.slice;if(a.bind)return a.bind.apply(a,b.call(arguments,1));var E=b.call(arguments,2);return function(){return a.apply(d,E.length?E.concat(b.call(arguments)):arguments)}}var f=0;function m(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function p(a,d,b){var E,j,I,ee;return ee=function(){E=!1,j&&(I.apply(b,j),j=!1)},I=function(){E?j=arguments:(a.apply(b,arguments),setTimeout(ee,d),E=!0)},I}function y(a,d,b){var E=d[1],j=d[0],I=E-j;return a===E&&b?a:((a-j)%I+I)%I+j}function _(){return!1}function x(a,d){if(d===!1)return a;var b=Math.pow(10,d===void 0?6:d);return Math.round(a*b)/b}function S(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return S(a).split(/\s+/)}function k(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var b in d)a.options[b]=d[b];return a.options}function N(a,d,b){var E=[];for(var j in a)E.push(encodeURIComponent(b?j.toUpperCase():j)+"="+encodeURIComponent(a[j]));return(!d||d.indexOf("?")===-1?"?":"&")+E.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function $(a,d){return a.replace(C,function(b,E){var j=d[E];if(j===void 0)throw new Error("No value provided for variable "+b);return typeof j=="function"&&(j=j(d)),j})}var A=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function D(a,d){for(var b=0;b<a.length;b++)if(a[b]===d)return b;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var H=0;function F(a){var d=+new Date,b=Math.max(0,16-(d-H));return H=d+b,window.setTimeout(a,b)}var K=window.requestAnimationFrame||G("RequestAnimationFrame")||F,ae=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Q(a,d,b){if(b&&K===F)a.call(d);else return K.call(window,u(a,d))}function Y(a){a&&ae.call(window,a)}var te={__proto__:null,extend:o,create:l,bind:u,get lastId(){return f},stamp:m,throttle:p,wrapNum:y,falseFn:_,formatNum:x,trim:S,splitWords:T,setOptions:k,getParamString:N,template:$,isArray:A,indexOf:D,emptyImageUrl:M,requestFn:K,cancelFn:ae,requestAnimFrame:Q,cancelAnimFrame:Y};function re(){}re.extend=function(a){var d=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=d.__super__=this.prototype,E=l(b);E.constructor=d,d.prototype=E;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(d[j]=this[j]);return a.statics&&o(d,a.statics),a.includes&&(Se(a.includes),o.apply(null,[E].concat(a.includes))),o(E,a),delete E.statics,delete E.includes,E.options&&(E.options=b.options?l(b.options):{},o(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,ee=E._initHooks.length;I<ee;I++)E._initHooks[I].call(this)}},d},re.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},re.mergeOptions=function(a){return o(this.prototype.options,a),this},re.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),b=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function Se(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=A(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,b)}return this},off:function(a,d,b){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],d);else{a=T(a);for(var j=arguments.length===1,I=0,ee=a.length;I<ee;I++)j?this._off(a[I]):this._off(a[I],d,b)}return this},_on:function(a,d,b,E){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,b)===!1){b===this&&(b=void 0);var j={fn:d,ctx:b};E&&(j.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(j)}},_off:function(a,d,b){var E,j,I;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(j=0,I=E.length;j<I;j++)E[j].fn=_;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var ee=this._listens(a,d,b);if(ee!==!1){var de=E[ee];this._firingCount&&(de.fn=_,this._events[a]=E=E.slice()),E.splice(ee,1)}}},fire:function(a,d,b){if(!this.listens(a,b))return this;var E=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var j=this._events[a];if(j){this._firingCount=this._firingCount+1||1;for(var I=0,ee=j.length;I<ee;I++){var de=j[I],ve=de.fn;de.once&&this.off(a,ve,de.ctx),ve.call(de.ctx||this,E)}this._firingCount--}}return b&&this._propagateEvent(E),this},listens:function(a,d,b,E){typeof a!="string"&&console.warn('"string" type argument expected');var j=d;typeof d!="function"&&(E=!!d,j=void 0,b=void 0);var I=this._events&&this._events[a];if(I&&I.length&&this._listens(a,j,b)!==!1)return!0;if(E){for(var ee in this._eventParents)if(this._eventParents[ee].listens(a,d,b,E))return!0}return!1},_listens:function(a,d,b){if(!this._events)return!1;var E=this._events[a]||[];if(!d)return!!E.length;b===this&&(b=void 0);for(var j=0,I=E.length;j<I;j++)if(E[j].fn===d&&E[j].ctx===b)return j;return!1},once:function(a,d,b){if(typeof a=="object")for(var E in a)this._on(E,a[E],d,!0);else{a=T(a);for(var j=0,I=a.length;j<I;j++)this._on(a[j],d,b,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[m(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[m(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var oe=re.extend(X);function J(a,d,b){this.x=b?Math.round(a):a,this.y=b?Math.round(d):d}var ye=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(a){return this.clone()._add(W(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(W(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new J(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new J(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(a){a=W(a);var d=a.x-this.x,b=a.y-this.y;return Math.sqrt(d*d+b*b)},equals:function(a){return a=W(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=W(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function W(a,d,b){return a instanceof J?a:A(a)?new J(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new J(a.x,a.y):new J(a,d,b)}function U(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}U.prototype={extend:function(a){var d,b;if(!a)return this;if(a instanceof J||typeof a[0]=="number"||"x"in a)d=b=W(a);else if(a=B(a),d=a.min,b=a.max,!d||!b)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=b.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(a){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,b;return typeof a[0]=="number"||a instanceof J?a=W(a):a=B(a),a instanceof U?(d=a.min,b=a.max):d=b=a,d.x>=this.min.x&&b.x<=this.max.x&&d.y>=this.min.y&&b.y<=this.max.y},intersects:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,I=j.x>=d.x&&E.x<=b.x,ee=j.y>=d.y&&E.y<=b.y;return I&&ee},overlaps:function(a){a=B(a);var d=this.min,b=this.max,E=a.min,j=a.max,I=j.x>d.x&&E.x<b.x,ee=j.y>d.y&&E.y<b.y;return I&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,b=this.max,E=Math.abs(d.x-b.x)*a,j=Math.abs(d.y-b.y)*a;return B(W(d.x-E,d.y-j),W(b.x+E,b.y+j))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,d){return!a||a instanceof U?a:new U(a,d)}function q(a,d){if(a)for(var b=d?[a,d]:a,E=0,j=b.length;E<j;E++)this.extend(b[E])}q.prototype={extend:function(a){var d=this._southWest,b=this._northEast,E,j;if(a instanceof P)E=a,j=a;else if(a instanceof q){if(E=a._southWest,j=a._northEast,!E||!j)return this}else return a?this.extend(Z(a)||V(a)):this;return!d&&!b?(this._southWest=new P(E.lat,E.lng),this._northEast=new P(j.lat,j.lng)):(d.lat=Math.min(E.lat,d.lat),d.lng=Math.min(E.lng,d.lng),b.lat=Math.max(j.lat,b.lat),b.lng=Math.max(j.lng,b.lng)),this},pad:function(a){var d=this._southWest,b=this._northEast,E=Math.abs(d.lat-b.lat)*a,j=Math.abs(d.lng-b.lng)*a;return new q(new P(d.lat-E,d.lng-j),new P(b.lat+E,b.lng+j))},getCenter:function(){return new P((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new P(this.getNorth(),this.getWest())},getSouthEast:function(){return new P(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof P||"lat"in a?a=Z(a):a=V(a);var d=this._southWest,b=this._northEast,E,j;return a instanceof q?(E=a.getSouthWest(),j=a.getNorthEast()):E=j=a,E.lat>=d.lat&&j.lat<=b.lat&&E.lng>=d.lng&&j.lng<=b.lng},intersects:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>=d.lat&&E.lat<=b.lat,ee=j.lng>=d.lng&&E.lng<=b.lng;return I&&ee},overlaps:function(a){a=V(a);var d=this._southWest,b=this._northEast,E=a.getSouthWest(),j=a.getNorthEast(),I=j.lat>d.lat&&E.lat<b.lat,ee=j.lng>d.lng&&E.lng<b.lng;return I&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=V(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function V(a,d){return a instanceof q?a:new q(a,d)}function P(a,d,b){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,b!==void 0&&(this.alt=+b)}P.prototype={equals:function(a,d){if(!a)return!1;a=Z(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return me.distance(this,Z(a))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,b=d/Math.cos(Math.PI/180*this.lat);return V([this.lat-d,this.lng-b],[this.lat+d,this.lng+b])},clone:function(){return new P(this.lat,this.lng,this.alt)}};function Z(a,d,b){return a instanceof P?a:A(a)&&typeof a[0]!="object"?a.length===3?new P(a[0],a[1],a[2]):a.length===2?new P(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new P(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new P(a,d,b)}var ie={latLngToPoint:function(a,d){var b=this.projection.project(a),E=this.scale(d);return this.transformation._transform(b,E)},pointToLatLng:function(a,d){var b=this.scale(d),E=this.transformation.untransform(a,b);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,b=this.scale(a),E=this.transformation.transform(d.min,b),j=this.transformation.transform(d.max,b);return new U(E,j)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?y(a.lng,this.wrapLng,!0):a.lng,b=this.wrapLat?y(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new P(b,d,E)},wrapLatLngBounds:function(a){var d=a.getCenter(),b=this.wrapLatLng(d),E=d.lat-b.lat,j=d.lng-b.lng;if(E===0&&j===0)return a;var I=a.getSouthWest(),ee=a.getNorthEast(),de=new P(I.lat-E,I.lng-j),ve=new P(ee.lat-E,ee.lng-j);return new q(de,ve)}},me=o({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var b=Math.PI/180,E=a.lat*b,j=d.lat*b,I=Math.sin((d.lat-a.lat)*b/2),ee=Math.sin((d.lng-a.lng)*b/2),de=I*I+Math.cos(E)*Math.cos(j)*ee*ee,ve=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*ve}}),ce=6378137,xe={R:ce,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,b=this.MAX_LATITUDE,E=Math.max(Math.min(b,a.lat),-b),j=Math.sin(E*d);return new J(this.R*a.lng*d,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(a){var d=180/Math.PI;return new P((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=ce*Math.PI;return new U([-a,-a],[a,a])})()};function ke(a,d,b,E){if(A(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=b,this._d=E}ke.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new J((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function je(a,d,b,E){return new ke(a,d,b,E)}var Me=o({},me,{code:"EPSG:3857",projection:xe,transformation:(function(){var a=.5/(Math.PI*xe.R);return je(a,.5,-a,.5)})()}),Ee=o({},Me,{code:"EPSG:900913"});function Pe(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ce(a,d){var b="",E,j,I,ee,de,ve;for(E=0,I=a.length;E<I;E++){for(de=a[E],j=0,ee=de.length;j<ee;j++)ve=de[j],b+=(j?"L":"M")+ve.x+" "+ve.y;b+=d?Ve.svg?"z":"x":""}return b||"M0 0"}var Be=document.documentElement.style,Ue="ActiveXObject"in window,fe=Ue&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),le=$n("webkit"),he=$n("android"),$e=$n("android 2")||$n("android 3"),Ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=he&&$n("Google")&&Ie<537&&!("AudioNode"in window),st=!!window.opera,et=!Le&&$n("chrome"),Zt=$n("gecko")&&!le&&!st&&!Ue,En=!et&&$n("safari"),Tn=$n("phantom"),lr="OTransition"in Be,vr=navigator.platform.indexOf("Win")===0,dn=Ue&&"transition"in Be,Ct="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$e,bn="MozPerspective"in Be,hn=!window.L_DISABLE_3D&&(dn||Ct||bn)&&!lr&&!Tn,qr=typeof orientation<"u"||$n("mobile"),ra=qr&&le,zi=qr&&Ct,kn=!window.PointerEvent&&window.MSPointerEvent,Dn=!!(window.PointerEvent||kn),os="ontouchstart"in window||!!window.TouchEvent,Nr=!window.L_NO_TOUCH&&(os||Dn),cr=qr&&st,gi=qr&&Zt,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qa=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,d),window.removeEventListener("testPassiveEventSupport",_,d)}catch{}return a})(),eo=(function(){return!!document.createElement("canvas").getContext})(),Ui=!!(document.createElementNS&&Pe("svg").createSVGRect),to=!!Ui&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sa=!Ui&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),no=navigator.platform.indexOf("Mac")===0,ro=navigator.platform.indexOf("Linux")===0;function $n(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ve={ie:Ue,ielt9:fe,edge:Le,webkit:le,android:he,android23:$e,androidStock:He,opera:st,chrome:et,gecko:Zt,safari:En,phantom:Tn,opera12:lr,win:vr,ie3d:dn,webkit3d:Ct,gecko3d:bn,any3d:hn,mobile:qr,mobileWebkit:ra,mobileWebkit3d:zi,msPointer:kn,pointer:Dn,touch:Nr,touchNative:os,mobileOpera:cr,mobileGecko:gi,retina:ia,passiveEvents:Qa,canvas:eo,svg:Ui,vml:sa,inlineSvg:to,mac:no,linux:ro},ks=Ve.msPointer?"MSPointerDown":"pointerdown",Or=Ve.msPointer?"MSPointerMove":"pointermove",ur=Ve.msPointer?"MSPointerUp":"pointerup",sn=Ve.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:ks,touchmove:Or,touchend:ur,touchcancel:sn},Zr={touchstart:In,touchmove:mt,touchend:mt,touchcancel:mt},bi={},pe=!1;function Ye(a,d,b){return d==="touchstart"&&xt(),Zr[d]?(b=Zr[d].bind(this,b),a.addEventListener(An[d],b,!1),b):(console.warn("wrong event specified:",d),_)}function lt(a,d,b){if(!An[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(An[d],b,!1)}function pt(a){bi[a.pointerId]=a}function tt(a){bi[a.pointerId]&&(bi[a.pointerId]=a)}function dt(a){delete bi[a.pointerId]}function xt(){pe||(document.addEventListener(ks,pt,!0),document.addEventListener(Or,tt,!0),document.addEventListener(ur,dt,!0),document.addEventListener(sn,dt,!0),pe=!0)}function mt(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var b in bi)d.touches.push(bi[b]);d.changedTouches=[d],a(d)}}function In(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&yn(d),mt(a,d)}function wt(a){var d={},b,E;for(E in a)b=a[E],d[E]=b&&b.bind?b.bind(a):b;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var aa=200;function io(a,d){a.addEventListener("dblclick",d);var b=0,E;function j(I){if(I.detail!==1){E=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var ee=fo(I);if(!(ee.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!ee.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var de=Date.now();de-b<=aa?(E++,E===2&&d(wt(I))):E=1,b=de}}}return a.addEventListener("click",j),{dblclick:d,simDblclick:j}}function yi(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Jn=lo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),As=lo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=As==="webkitTransition"||As==="OTransition"?As+"End":"transitionend";function ao(a){return typeof a=="string"?document.getElementById(a):a}function oo(a,d){var b=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!b||b==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);b=E?E[d]:null}return b==="auto"?null:b}function gt(a,d,b){var E=document.createElement(a);return E.className=d||"",b&&b.appendChild(E),E}function zt(a){var d=a.parentNode;d&&d.removeChild(a)}function Dr(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function zn(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function js(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Cc(a,d){if(a.classList!==void 0)return a.classList.contains(d);var b=dl(a);return b.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(b)}function at(a,d){if(a.classList!==void 0)for(var b=T(d),E=0,j=b.length;E<j;E++)a.classList.add(b[E]);else if(!Cc(a,d)){var I=dl(a);oa(a,(I?I+" ":"")+d)}}function an(a,d){a.classList!==void 0?a.classList.remove(d):oa(a,S((" "+dl(a)+" ").replace(" "+d+" "," ")))}function oa(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function dl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function en(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Rc(a,d)}function Rc(a,d){var b=!1,E="DXImageTransform.Microsoft.Alpha";try{b=a.filters.item(E)}catch{if(d===1)return}d=Math.round(d*100),b?(b.Enabled=d!==100,b.Opacity=d):a.style.filter+=" progid:"+E+"(opacity="+d+")"}function lo(a){for(var d=document.documentElement.style,b=0;b<a.length;b++)if(a[b]in d)return a[b];return!1}function Hi(a,d,b){var E=d||new J(0,0);a.style[Jn]=(Ve.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(b?" scale("+b+")":"")}function Yt(a,d){a._leaflet_pos=d,Ve.any3d?Hi(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function ls(a){return a._leaflet_pos||new J(0,0)}var la,vi,Lc;if("onselectstart"in document)la=function(){it(window,"selectstart",yn)},vi=function(){Bt(window,"selectstart",yn)};else{var ca=lo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);la=function(){if(ca){var a=document.documentElement.style;Lc=a[ca],a[ca]="none"}},vi=function(){ca&&(document.documentElement.style[ca]=Lc,Lc=void 0)}}function hl(){it(window,"dragstart",yn)}function co(){Bt(window,"dragstart",yn)}var fl,Bc;function ua(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Mr(),fl=a,Bc=a.style.outlineStyle,a.style.outlineStyle="none",it(window,"keydown",Mr))}function Mr(){fl&&(fl.style.outlineStyle=Bc,fl=void 0,Bc=void 0,Bt(window,"keydown",Mr))}function ml(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function uo(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var da={__proto__:null,TRANSFORM:Jn,TRANSITION:As,TRANSITION_END:so,get:ao,getStyle:oo,create:gt,remove:zt,empty:Dr,toFront:zn,toBack:js,hasClass:Cc,addClass:at,removeClass:an,setClass:oa,getClass:dl,setOpacity:en,testProp:lo,setTransform:Hi,setPosition:Yt,getPosition:ls,get disableTextSelection(){return la},get enableTextSelection(){return vi},disableImageDrag:hl,enableImageDrag:co,preventOutline:ua,restoreOutline:Mr,getSizedParentNode:ml,getScale:uo};function it(a,d,b,E){if(d&&typeof d=="object")for(var j in d)Kr(a,j,d[j],b);else{d=T(d);for(var I=0,ee=d.length;I<ee;I++)Kr(a,d[I],b,E)}return this}var Vr="_leaflet_events";function Bt(a,d,b,E){if(arguments.length===1)Pc(a),delete a[Vr];else if(d&&typeof d=="object")for(var j in d)ho(a,j,d[j],b);else if(d=T(d),arguments.length===2)Pc(a,function(de){return D(d,de)!==-1});else for(var I=0,ee=d.length;I<ee;I++)ho(a,d[I],b,E);return this}function Pc(a,d){for(var b in a[Vr]){var E=b.split(/\d/)[0];(!d||d(E))&&ho(a,E,null,null,b)}}var Ns={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Kr(a,d,b,E){var j=d+m(b)+(E?"_"+m(E):"");if(a[Vr]&&a[Vr][j])return this;var I=function(de){return b.call(E||a,de||window.event)},ee=I;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?I=Ye(a,d,I):Ve.touch&&d==="dblclick"?I=io(a,I):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Ns[d]||d,I,Ve.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(I=function(de){de=de||window.event,Gi(a,de)&&ee(de)},a.addEventListener(Ns[d],I,!1)):a.addEventListener(d,ee,!1):a.attachEvent("on"+d,I),a[Vr]=a[Vr]||{},a[Vr][j]=I}function ho(a,d,b,E,j){j=j||d+m(b)+(E?"_"+m(E):"");var I=a[Vr]&&a[Vr][j];if(!I)return this;!Ve.touchNative&&Ve.pointer&&d.indexOf("touch")===0?lt(a,d,I):Ve.touch&&d==="dblclick"?yi(a,I):"removeEventListener"in a?a.removeEventListener(Ns[d]||d,I,!1):a.detachEvent("on"+d,I),a[Vr][j]=null}function Wr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function _i(a){return Kr(a,"wheel",Wr),this}function Os(a){return it(a,"mousedown touchstart dblclick contextmenu",Wr),a._leaflet_disable_click=!0,this}function yn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function cs(a){return yn(a),Wr(a),this}function fo(a){if(a.composedPath)return a.composedPath();for(var d=[],b=a.target;b;)d.push(b),b=b.parentNode;return d}function mo(a,d){if(!d)return new J(a.clientX,a.clientY);var b=uo(d),E=b.boundingClientRect;return new J((a.clientX-E.left)/b.x-d.clientLeft,(a.clientY-E.top)/b.y-d.clientTop)}var Ad=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qn(a){return Ve.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ad:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Gi(a,d){var b=d.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch{return!1}return b!==a}var pl={__proto__:null,on:it,off:Bt,stopPropagation:Wr,disableScrollPropagation:_i,disableClickPropagation:Os,preventDefault:yn,stop:cs,getPropagationPath:fo,getMousePosition:mo,getWheelDelta:Qn,isExternalTarget:Gi,addListener:it,removeListener:Bt},ha=oe.extend({run:function(a,d,b,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=ls(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,b=this._duration*1e3;d<b?this._runFrame(this._easeOut(d/b),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var b=this._startPos.add(this._offset.multiplyBy(a));d&&b._round(),Yt(this._el,b),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),St=oe.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=k(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Z(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=As&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,b){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(Z(a),d,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=o({animate:b.animate},b.zoom),b.pan=o({animate:b.animate,duration:b.duration},b.pan));var E=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,b.zoom):this._tryAnimatedPan(a,b.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,b.pan&&b.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,b){var E=this.getZoomScale(d),j=this.getSize().divideBy(2),I=a instanceof J?a:this.latLngToContainerPoint(a),ee=I.subtract(j).multiplyBy(1-1/E),de=this.containerPointToLatLng(j.add(ee));return this.setView(de,d,{zoom:b})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():V(a);var b=W(d.paddingTopLeft||d.padding||[0,0]),E=W(d.paddingBottomRight||d.padding||[0,0]),j=this.getBoundsZoom(a,!1,b.add(E));if(j=typeof d.maxZoom=="number"?Math.min(d.maxZoom,j):j,j===1/0)return{center:a.getCenter(),zoom:j};var I=E.subtract(b).divideBy(2),ee=this.project(a.getSouthWest(),j),de=this.project(a.getNorthEast(),j),ve=this.unproject(ee.add(de).divideBy(2).add(I),j);return{center:ve,zoom:j}},fitBounds:function(a,d){if(a=V(a),!a.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(a,d);return this.setView(b.center,b.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=W(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){at(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,b,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,b){if(b=b||{},b.animate===!1||!Ve.any3d)return this.setView(a,d,b);this._stop();var E=this.project(this.getCenter()),j=this.project(a),I=this.getSize(),ee=this._zoom;a=Z(a),d=d===void 0?ee:d;var de=Math.max(I.x,I.y),ve=de*this.getZoomScale(ee,d),Oe=j.distanceTo(E)||1,Ge=1.42,Xe=Ge*Ge;function ht(fn){var Zi=fn?-1:1,Rs=fn?ve:de,Jc=ve*ve-de*de+Zi*Xe*Xe*Oe*Oe,Oo=2*Rs*Xe*Oe,Do=Jc/Oo,ys=Math.sqrt(Do*Do+1)-Do,Vi=ys<1e-9?-18:Math.log(ys);return Vi}function Un(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function vn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function xr(fn){return Un(fn)/vn(fn)}var Nt=ht(0);function Ot(fn){return de*(vn(Nt)/vn(Nt+Ge*fn))}function bt(fn){return de*(vn(Nt)*xr(Nt+Ge*fn)-Un(Nt))/Xe}function gs(fn){return 1-Math.pow(1-fn,1.5)}var Br=Date.now(),Nl=(ht(1)-Nt)/Ge,bs=b.duration?1e3*b.duration:1e3*Nl*.8;function Xc(){var fn=(Date.now()-Br)/bs,Zi=gs(fn)*Nl;fn<=1?(this._flyToFrame=Q(Xc,this),this._move(this.unproject(E.add(j.subtract(E).multiplyBy(bt(Zi)/Oe)),ee),this.getScaleZoom(de/Ot(Zi),ee),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),Xc.call(this),this},flyToBounds:function(a,d){var b=this._getBoundsCenterZoom(a,d);return this.flyTo(b.center,b.zoom,d)},setMaxBounds:function(a){return a=V(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var b=this.getCenter(),E=this._limitCenter(b,this._zoom,V(a));return b.equals(E)||this.panTo(E,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var b=W(d.paddingTopLeft||d.padding||[0,0]),E=W(d.paddingBottomRight||d.padding||[0,0]),j=this.project(this.getCenter()),I=this.project(a),ee=this.getPixelBounds(),de=B([ee.min.add(b),ee.max.subtract(E)]),ve=de.getSize();if(!de.contains(I)){this._enforcingBounds=!0;var Oe=I.subtract(de.getCenter()),Ge=de.extend(I).getSize().subtract(ve);j.x+=Oe.x<0?-Ge.x:Ge.x,j.y+=Oe.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(j),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),E=d.divideBy(2).round(),j=b.divideBy(2).round(),I=E.subtract(j);return!I.x&&!I.y?this:(a.animate&&a.pan?this.panBy(I):(a.pan&&this._rawPanBy(I),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),b=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,b,a):navigator.geolocation.getCurrentPosition(d,b,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,b=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,b=a.coords.longitude,E=new P(d,b),j=E.toBounds(a.coords.accuracy*2),I=this._locateOptions;if(I.setView){var ee=this.getBoundsZoom(j);this.setView(E,I.maxZoom?Math.min(ee,I.maxZoom):ee)}var de={latlng:E,bounds:j,timestamp:a.timestamp};for(var ve in a.coords)typeof a.coords[ve]=="number"&&(de[ve]=a.coords[ve]);this.fire("locationfound",de)}},addHandler:function(a,d){if(!d)return this;var b=this[a]=new d(this);return this._handlers.push(b),this.options[a]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)zt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var b="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=gt("div",b,d||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),b=this.unproject(a.getTopRight());return new q(d,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,b){a=V(a),b=W(b||[0,0]);var E=this.getZoom()||0,j=this.getMinZoom(),I=this.getMaxZoom(),ee=a.getNorthWest(),de=a.getSouthEast(),ve=this.getSize().subtract(b),Oe=B(this.project(de,E),this.project(ee,E)).getSize(),Ge=Ve.any3d?this.options.zoomSnap:1,Xe=ve.x/Oe.x,ht=ve.y/Oe.y,Un=d?Math.max(Xe,ht):Math.min(Xe,ht);return E=this.getScaleZoom(Un,E),Ge&&(E=Math.round(E/(Ge/100))*(Ge/100),E=d?Math.ceil(E/Ge)*Ge:Math.floor(E/Ge)*Ge),Math.max(j,Math.min(I,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var b=this._getTopLeftPoint(a,d);return new U(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var b=this.options.crs;return d=d===void 0?this._zoom:d,b.scale(a)/b.scale(d)},getScaleZoom:function(a,d){var b=this.options.crs;d=d===void 0?this._zoom:d;var E=b.zoom(a*b.scale(d));return isNaN(E)?1/0:E},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Z(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(W(a),d)},layerPointToLatLng:function(a){var d=W(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(Z(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Z(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(V(a))},distance:function(a,d){return this.options.crs.distance(Z(a),Z(d))},containerPointToLayerPoint:function(a){return W(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return W(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(W(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(a)))},mouseEventToContainerPoint:function(a){return mo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=ao(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(d,"scroll",this._onScroll,this),this._containerId=m(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,at(a,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=oo(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yt(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(at(a.markerPane,"leaflet-zoom-hide"),at(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,b){Yt(this._mapPane,new J(0,0));var E=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var j=this._zoom!==d;this._moveStart(j,b)._move(a,d)._moveEnd(j),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,b,E){d===void 0&&(d=this._zoom);var j=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?b&&b.pinch&&this.fire("zoom",b):((j||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Yt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[m(this._container)]=this;var d=a?Bt:it;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var b=[],E,j=d==="mouseout"||d==="mouseover",I=a.target||a.srcElement,ee=!1;I;){if(E=this._targets[m(I)],E&&(d==="click"||d==="preclick")&&this._draggableMoved(E)){ee=!0;break}if(E&&E.listens(d,!0)&&(j&&!Gi(I,a)||(b.push(E),j))||I===this._container)break;I=I.parentNode}return!b.length&&!ee&&!j&&this.listens(d,!0)&&(b=[this]),b},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var b=a.type;b==="mousedown"&&ua(d),this._fireDOMEvent(a,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,b){if(a.type==="click"){var E=o({},a);E.type="preclick",this._fireDOMEvent(E,E.type,b)}var j=this._findEventTargets(a,d);if(b){for(var I=[],ee=0;ee<b.length;ee++)b[ee].listens(d,!0)&&I.push(b[ee]);j=I.concat(j)}if(j.length){d==="contextmenu"&&yn(a);var de=j[0],ve={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Oe=de.getLatLng&&(!de._radius||de._radius<=10);ve.containerPoint=Oe?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(a),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Oe?de.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(ee=0;ee<j.length;ee++)if(j[ee].fire(d,ve,!0),ve.originalEvent._stopped||j[ee].options.bubblingMouseEvents===!1&&D(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return ls(this._mapPane)||new J(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var b=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var b=this.getSize()._divideBy(2);return this.project(a,d)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return this.project(a,d)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,d,b){var E=this._getNewPixelOrigin(b,d);return B([this.project(a.getSouthWest(),d)._subtract(E),this.project(a.getNorthWest(),d)._subtract(E),this.project(a.getSouthEast(),d)._subtract(E),this.project(a.getNorthEast(),d)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,b){if(!b)return a;var E=this.project(a,d),j=this.getSize().divideBy(2),I=new U(E.subtract(j),E.add(j)),ee=this._getBoundsOffset(I,b,d);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?a:this.unproject(E.add(ee),d)},_limitOffset:function(a,d){if(!d)return a;var b=this.getPixelBounds(),E=new U(b.min.add(a),b.max.add(a));return a.add(this._getBoundsOffset(E,d))},_getBoundsOffset:function(a,d,b){var E=B(this.project(d.getNorthEast(),b),this.project(d.getSouthWest(),b)),j=E.min.subtract(a.min),I=E.max.subtract(a.max),ee=this._rebound(j.x,-I.x),de=this._rebound(j.y,-I.y);return new J(ee,de)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),b=this.getMaxZoom(),E=Ve.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(d,Math.min(b,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var b=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,d),!0)},_createAnimProxy:function(){var a=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var b=Jn,E=this._proxy.style[b];Hi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),E===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();Hi(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(d),j=this._getCenterOffset(a)._divideBy(1-1/E);return b.animate!==!0&&!this.getSize().contains(j)?!1:(Q(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,b,E){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,at(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $c(a,d){return new St(a,d)}var _r=re.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),b=this.getPosition(),E=a._controlCorners[b];return at(d,"leaflet-control"),b.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Fi=function(a){return new _r(a)};St.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",b=this._controlContainer=gt("div",d+"control-container",this._container);function E(j,I){var ee=d+j+" "+d+I;a[j+I]=gt("div",ee,b)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)zt(this._controlCorners[a]);zt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=_r.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,b,E){return b<E?-1:E<b?1:0}},initialize:function(a,d,b){k(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in d)this._addLayer(d[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return _r.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(m(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){at(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(at(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=gt("div",a),b=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Os(d),_i(d);var E=this._section=gt("section",a+"-list");b&&(this._map.on("click",this.collapse,this),it(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=gt("a",a+"-toggle",d);j.href="#",j.title="Layers",j.setAttribute("role","button"),it(j,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){yn(I),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=gt("div",a+"-base",E),this._separator=gt("div",a+"-separator",E),this._overlaysList=gt("div",a+"-overlays",E),d.appendChild(E)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&m(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,b){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:b}),this.options.sortLayers&&this._layers.sort(u(function(E,j){return this.options.sortFunction(E.layer,j.layer,E.name,j.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Dr(this._baseLayersList),Dr(this._overlaysList),this._layerControlInputs=[];var a,d,b,E,j=0;for(b=0;b<this._layers.length;b++)E=this._layers[b],this._addItem(E),d=d||E.overlay,a=a||!E.overlay,j+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&j>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(m(a.target)),b=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;b&&this._map.fire(b,d)},_createRadioElement:function(a,d){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=b,E.firstChild},_addItem:function(a){var d=document.createElement("label"),b=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=b):E=this._createRadioElement("leaflet-base-layers_"+m(this),b),this._layerControlInputs.push(E),E.layerId=m(a.layer),it(E,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+a.name;var I=document.createElement("span");d.appendChild(I),I.appendChild(E),I.appendChild(j);var ee=a.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,b,E=[],j=[];this._handlingClick=!0;for(var I=a.length-1;I>=0;I--)d=a[I],b=this._getLayer(d.layerId).layer,d.checked?E.push(b):d.checked||j.push(b);for(I=0;I<j.length;I++)this._map.hasLayer(j[I])&&this._map.removeLayer(j[I]);for(I=0;I<E.length;I++)this._map.hasLayer(E[I])||this._map.addLayer(E[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,b,E=this._map.getZoom(),j=a.length-1;j>=0;j--)d=a[j],b=this._getLayer(d.layerId).layer,d.disabled=b.options.minZoom!==void 0&&E<b.options.minZoom||b.options.maxZoom!==void 0&&E>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,it(a,"click",yn),this.expand();var d=this;setTimeout(function(){Bt(a,"click",yn),d._preventClick=!1})}}),jd=function(a,d,b){return new po(a,d,b)},Ic=_r.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",b=gt("div",d+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,d+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,d+"-out",b,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,b,E,j){var I=gt("a",b,E);return I.innerHTML=a,I.href="#",I.title=d,I.setAttribute("role","button"),I.setAttribute("aria-label",d),Os(I),it(I,"click",cs),it(I,"click",j,this),it(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";an(this._zoomInButton,d),an(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(at(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(at(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ic,this.addControl(this.zoomControl))});var np=function(a){return new Ic(a)},Nd=_r.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",b=gt("div",d),E=this.options;return this._addScales(E,d+"-line",b),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,b){a.metric&&(this._mScale=gt("div",d,b)),a.imperial&&(this._iScale=gt("div",d,b))},_update:function(){var a=this._map,d=a.getSize().y/2,b=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(b)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),b=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,b,d/a)},_updateImperial:function(a){var d=a*3.2808399,b,E,j;d>5280?(b=d/5280,E=this._getRoundNum(b),this._updateScale(this._iScale,E+" mi",E/b)):(j=this._getRoundNum(d),this._updateScale(this._iScale,j+" ft",j/d))},_updateScale:function(a,d,b){a.style.width=Math.round(this.options.maxWidth*b)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),b=a/d;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,d*b}}),zc=function(a){return new Nd(a)},rp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Uc=_r.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?rp+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),Os(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var b=[];this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new Uc().addTo(this)});var ip=function(a){return new Uc(a)};_r.Layers=po,_r.Zoom=Ic,_r.Scale=Nd,_r.Attribution=Uc,Fi.layers=jd,Fi.zoom=np,Fi.scale=zc,Fi.attribution=ip;var xi=re.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xi.addTo=function(a,d){return a.addHandler(d,this),this};var sp={Events:X},Hc=Ve.touch?"touchstart mousedown":"mousedown",us=oe.extend({options:{clickTolerance:3},initialize:function(a,d,b,E){k(this,E),this._element=a,this._dragStartTarget=d||a,this._preventOutline=b},enable:function(){this._enabled||(it(this._dragStartTarget,Hc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(us._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,Hc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Cc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){us._dragging===this&&this.finishDrag();return}if(!(us._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(us._dragging=this,this._preventOutline&&ua(this._element),hl(),la(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,b=ml(this._element);this._startPoint=new J(d.clientX,d.clientY),this._startPos=ls(this._element),this._parentScale=uo(b);var E=a.type==="mousedown";it(document,E?"mousemove":"touchmove",this._onMove,this),it(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,b=new J(d.clientX,d.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,yn(a),this._moved||(this.fire("dragstart"),this._moved=!0,at(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),at(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Yt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),co(),vi();var d=this._moved&&this._moving;this._moving=!1,us._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Od(a,d,b){var E,j=[1,4,2,8],I,ee,de,ve,Oe,Ge,Xe,ht;for(I=0,Ge=a.length;I<Ge;I++)a[I]._code=Ds(a[I],d);for(de=0;de<4;de++){for(Xe=j[de],E=[],I=0,Ge=a.length,ee=Ge-1;I<Ge;ee=I++)ve=a[I],Oe=a[ee],ve._code&Xe?Oe._code&Xe||(ht=gl(Oe,ve,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)):(Oe._code&Xe&&(ht=gl(Oe,ve,Xe,d,b),ht._code=Ds(ht,d),E.push(ht)),E.push(ve));a=E}return a}function Dd(a,d){var b,E,j,I,ee,de,ve,Oe,Ge;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xe=Z([0,0]),ht=V(a),Un=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());Un<1700&&(Xe=Gc(a));var vn=a.length,xr=[];for(b=0;b<vn;b++){var Nt=Z(a[b]);xr.push(d.project(Z([Nt.lat-Xe.lat,Nt.lng-Xe.lng])))}for(de=ve=Oe=0,b=0,E=vn-1;b<vn;E=b++)j=xr[b],I=xr[E],ee=j.y*I.x-I.y*j.x,ve+=(j.x+I.x)*ee,Oe+=(j.y+I.y)*ee,de+=ee*3;de===0?Ge=xr[0]:Ge=[ve/de,Oe/de];var Ot=d.unproject(W(Ge));return Z([Ot.lat+Xe.lat,Ot.lng+Xe.lng])}function Gc(a){for(var d=0,b=0,E=0,j=0;j<a.length;j++){var I=Z(a[j]);d+=I.lat,b+=I.lng,E++}return Z([d/E,b/E])}var Fc={__proto__:null,clipPolygon:Od,polygonCenter:Dd,centroid:Gc};function Md(a,d){if(!d||!a.length)return a.slice();var b=d*d;return a=op(a,b),a=Rd(a,b),a}function Cd(a,d,b){return Math.sqrt(go(a,d,b,!0))}function ap(a,d,b){return go(a,d,b)}function Rd(a,d){var b=a.length,E=typeof Uint8Array<"u"?Uint8Array:Array,j=new E(b);j[0]=j[b-1]=1,Yc(a,j,d,0,b-1);var I,ee=[];for(I=0;I<b;I++)j[I]&&ee.push(a[I]);return ee}function Yc(a,d,b,E,j){var I=0,ee,de,ve;for(de=E+1;de<=j-1;de++)ve=go(a[de],a[E],a[j],!0),ve>I&&(ee=de,I=ve);I>b&&(d[ee]=1,Yc(a,d,b,E,ee),Yc(a,d,b,ee,j))}function op(a,d){for(var b=[a[0]],E=1,j=0,I=a.length;E<I;E++)lp(a[E],a[j])>d&&(b.push(a[E]),j=E);return j<I-1&&b.push(a[I-1]),b}var Ld;function Bd(a,d,b,E,j){var I=E?Ld:Ds(a,b),ee=Ds(d,b),de,ve,Oe;for(Ld=ee;;){if(!(I|ee))return[a,d];if(I&ee)return!1;de=I||ee,ve=gl(a,d,de,b,j),Oe=Ds(ve,b),de===I?(a=ve,I=Oe):(d=ve,ee=Oe)}}function gl(a,d,b,E,j){var I=d.x-a.x,ee=d.y-a.y,de=E.min,ve=E.max,Oe,Ge;return b&8?(Oe=a.x+I*(ve.y-a.y)/ee,Ge=ve.y):b&4?(Oe=a.x+I*(de.y-a.y)/ee,Ge=de.y):b&2?(Oe=ve.x,Ge=a.y+ee*(ve.x-a.x)/I):b&1&&(Oe=de.x,Ge=a.y+ee*(de.x-a.x)/I),new J(Oe,Ge,j)}function Ds(a,d){var b=0;return a.x<d.min.x?b|=1:a.x>d.max.x&&(b|=2),a.y<d.min.y?b|=4:a.y>d.max.y&&(b|=8),b}function lp(a,d){var b=d.x-a.x,E=d.y-a.y;return b*b+E*E}function go(a,d,b,E){var j=d.x,I=d.y,ee=b.x-j,de=b.y-I,ve=ee*ee+de*de,Oe;return ve>0&&(Oe=((a.x-j)*ee+(a.y-I)*de)/ve,Oe>1?(j=b.x,I=b.y):Oe>0&&(j+=ee*Oe,I+=de*Oe)),ee=a.x-j,de=a.y-I,E?ee*ee+de*de:new J(j,I)}function Cr(a){return!A(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function bl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(a)}function fa(a,d){var b,E,j,I,ee,de,ve,Oe;if(!a||a.length===0)throw new Error("latlngs not passed");Cr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ge=Z([0,0]),Xe=V(a),ht=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ht<1700&&(Ge=Gc(a));var Un=a.length,vn=[];for(b=0;b<Un;b++){var xr=Z(a[b]);vn.push(d.project(Z([xr.lat-Ge.lat,xr.lng-Ge.lng])))}for(b=0,E=0;b<Un-1;b++)E+=vn[b].distanceTo(vn[b+1])/2;if(E===0)Oe=vn[0];else for(b=0,I=0;b<Un-1;b++)if(ee=vn[b],de=vn[b+1],j=ee.distanceTo(de),I+=j,I>E){ve=(I-E)/j,Oe=[de.x-ve*(de.x-ee.x),de.y-ve*(de.y-ee.y)];break}var Nt=d.unproject(W(Oe));return Z([Nt.lat+Ge.lat,Nt.lng+Ge.lng])}var cp={__proto__:null,simplify:Md,pointToSegmentDistance:Cd,closestPointOnSegment:ap,clipSegment:Bd,_getEdgeIntersection:gl,_getBitCode:Ds,_sqClosestPointOnSegment:go,isFlat:Cr,_flat:bl,polylineCenter:fa},yl={project:function(a){return new J(a.lng,a.lat)},unproject:function(a){return new P(a.y,a.x)},bounds:new U([-180,-90],[180,90])},vl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,b=this.R,E=a.lat*d,j=this.R_MINOR/b,I=Math.sqrt(1-j*j),ee=I*Math.sin(E),de=Math.tan(Math.PI/4-E/2)/Math.pow((1-ee)/(1+ee),I/2);return E=-b*Math.log(Math.max(de,1e-10)),new J(a.lng*d*b,E)},unproject:function(a){for(var d=180/Math.PI,b=this.R,E=this.R_MINOR/b,j=Math.sqrt(1-E*E),I=Math.exp(-a.y/b),ee=Math.PI/2-2*Math.atan(I),de=0,ve=.1,Oe;de<15&&Math.abs(ve)>1e-7;de++)Oe=j*Math.sin(ee),Oe=Math.pow((1-Oe)/(1+Oe),j/2),ve=Math.PI/2-2*Math.atan(I*Oe)-ee,ee+=ve;return new P(ee*d,a.x*d/b)}},Pd={__proto__:null,LonLat:yl,Mercator:vl,SphericalMercator:xe},$d=o({},me,{code:"EPSG:3395",projection:vl,transformation:(function(){var a=.5/(Math.PI*vl.R);return je(a,.5,-a,.5)})()}),qc=o({},me,{code:"EPSG:4326",projection:yl,transformation:je(1/180,1,-1/180,.5)}),ma=o({},ie,{projection:yl,transformation:je(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var b=d.lng-a.lng,E=d.lat-a.lat;return Math.sqrt(b*b+E*E)},infinite:!0});ie.Earth=me,ie.EPSG3395=$d,ie.EPSG3857=Me,ie.EPSG900913=Ee,ie.EPSG4326=qc,ie.Simple=ma;var Xr=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[m(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[m(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var b=this.getEvents();d.on(b,this),this.once("remove",function(){d.off(b,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});St.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=m(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=m(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return m(a)in this._layers},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},_addLayers:function(a){a=a?A(a)?a:[a]:[];for(var d=0,b=a.length;d<b;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[m(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=m(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,b=this._getZoomSpan();for(var E in this._zoomBoundLayers){var j=this._zoomBoundLayers[E].options;a=j.minZoom===void 0?a:Math.min(a,j.minZoom),d=j.maxZoom===void 0?d:Math.max(d,j.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pa=Xr.extend({initialize:function(a,d){k(this,d),this._layers={};var b,E;if(a)for(b=0,E=a.length;b<E;b++)this.addLayer(a[b])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),b,E;for(b in this._layers)E=this._layers[b],E[a]&&E[a].apply(E,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return m(a)}}),up=function(a,d){return new pa(a,d)},wi=pa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),pa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),pa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new q;for(var d in this._layers){var b=this._layers[d];a.extend(b.getBounds?b.getBounds():b.getLatLng())}return a}}),Id=function(a,d){return new wi(a,d)},Si=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var b=this._getIconUrl(a);if(!b){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(b,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,d){var b=this.options,E=b[d+"Size"];typeof E=="number"&&(E=[E,E]);var j=W(E),I=W(d==="shadow"&&b.shadowAnchor||b.iconAnchor||j&&j.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(b.className||""),I&&(a.style.marginLeft=-I.x+"px",a.style.marginTop=-I.y+"px"),j&&(a.style.width=j.x+"px",a.style.height=j.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ve.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bo(a){return new Si(a)}var yo=Si.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yo.imagePath!="string"&&(yo.imagePath=this._detectIconPath()),(this.options.imagePath||yo.imagePath)+Si.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(b,E,j){var I=E.exec(b);return I&&I[j]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=gt("div","leaflet-default-icon-path",document.body),d=oo(a,"background-image")||oo(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),vo=xi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new us(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),at(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,b=d._map,E=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,I=ls(d._icon),ee=b.getPixelBounds(),de=b.getPixelOrigin(),ve=B(ee.min._subtract(de).add(j),ee.max._subtract(de).subtract(j));if(!ve.contains(I)){var Oe=W((Math.max(ve.max.x,I.x)-ve.max.x)/(ee.max.x-ve.max.x)-(Math.min(ve.min.x,I.x)-ve.min.x)/(ee.min.x-ve.min.x),(Math.max(ve.max.y,I.y)-ve.max.y)/(ee.max.y-ve.max.y)-(Math.min(ve.min.y,I.y)-ve.min.y)/(ee.min.y-ve.min.y)).multiplyBy(E);b.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Yt(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Q(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,b=d._shadow,E=ls(d._icon),j=d._map.layerPointToLatLng(E);b&&Yt(b,E),d._latlng=j,a.latlng=j,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),_o=Xr.extend({options:{icon:new yo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){k(this,d),this._latlng=Z(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Z(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=a.icon.createIcon(this._icon),E=!1;b!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(b.title=a.title),b.tagName==="IMG"&&(b.alt=a.alt||"")),at(b,d),a.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(b,"focus",this._panOnFocus,this);var j=a.icon.createShadow(this._shadow),I=!1;j!==this._shadow&&(this._removeShadow(),I=!0),j&&(at(j,d),j.alt=""),this._shadow=j,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&I&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),zt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Yt(this._icon,a),this._shadow&&Yt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(at(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&en(this._icon,a),this._shadow&&en(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,b=d.iconSize?W(d.iconSize):W(0,0),E=d.iconAnchor?W(d.iconAnchor):W(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:b.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zd(a,d){return new _o(a,d)}var Ei=Xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=Ei.extend({options:{fill:!0,radius:10},initialize:function(a,d){k(this,d),this._latlng=Z(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Z(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Ei.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,b=this._clickTolerance(),E=[a+b,d+b];this._pxBounds=new U(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ud(a,d){return new ga(a,d)}var _l=ga.extend({initialize:function(a,d,b){if(typeof d=="number"&&(d=o({},b,{radius:d})),k(this,d),this._latlng=Z(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ei.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,b=this._map,E=b.options.crs;if(E.distance===me.distance){var j=Math.PI/180,I=this._mRadius/me.R/j,ee=b.project([d+I,a]),de=b.project([d-I,a]),ve=ee.add(de).divideBy(2),Oe=b.unproject(ve).lat,Ge=Math.acos((Math.cos(I*j)-Math.sin(d*j)*Math.sin(Oe*j))/(Math.cos(d*j)*Math.cos(Oe*j)))/j;(isNaN(Ge)||Ge===0)&&(Ge=I/Math.cos(Math.PI/180*d)),this._point=ve.subtract(b.getPixelOrigin()),this._radius=isNaN(Ge)?0:ve.x-b.project([Oe,a-Ge]).x,this._radiusY=ve.y-ee.y}else{var Xe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Hd(a,d,b){return new _l(a,d,b)}var Yi=Ei.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){k(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,b=null,E=go,j,I,ee=0,de=this._parts.length;ee<de;ee++)for(var ve=this._parts[ee],Oe=1,Ge=ve.length;Oe<Ge;Oe++){j=ve[Oe-1],I=ve[Oe];var Xe=E(a,j,I,!0);Xe<d&&(d=Xe,b=E(a,j,I))}return b&&(b.distance=Math.sqrt(d)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Z(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new q,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],b=Cr(a),E=0,j=a.length;E<j;E++)b?(d[E]=Z(a[E]),this._bounds.extend(d[E])):d[E]=this._convertLatLngs(a[E]);return d},_project:function(){var a=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new J(a,a);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,b){var E=a[0]instanceof P,j=a.length,I,ee;if(E){for(ee=[],I=0;I<j;I++)ee[I]=this._map.latLngToLayerPoint(a[I]),b.extend(ee[I]);d.push(ee)}else for(I=0;I<j;I++)this._projectLatlngs(a[I],d,b)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,b,E,j,I,ee,de,ve;for(b=0,j=0,I=this._rings.length;b<I;b++)for(ve=this._rings[b],E=0,ee=ve.length;E<ee-1;E++)de=Bd(ve[E],ve[E+1],a,E,!0),de&&(d[j]=d[j]||[],d[j].push(de[0]),(de[1]!==ve[E+1]||E===ee-2)&&(d[j].push(de[1]),j++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,b=0,E=a.length;b<E;b++)a[b]=Md(a[b],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var b,E,j,I,ee,de,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(b=0,I=this._parts.length;b<I;b++)for(de=this._parts[b],E=0,ee=de.length,j=ee-1;E<ee;j=E++)if(!(!d&&E===0)&&Cd(a,de[j],de[E])<=ve)return!0;return!1}});function dp(a,d){return new Yi(a,d)}Yi._flat=bl;var ba=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Yi.prototype._convertLatLngs.call(this,a),b=d.length;return b>=2&&d[0]instanceof P&&d[0].equals(d[b-1])&&d.pop(),d},_setLatLngs:function(a){Yi.prototype._setLatLngs.call(this,a),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,b=new J(d,d);if(a=new U(a.min.subtract(b),a.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,j=this._rings.length,I;E<j;E++)I=Od(this._rings[E],a,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,b,E,j,I,ee,de,ve,Oe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(I=0,ve=this._parts.length;I<ve;I++)for(b=this._parts[I],ee=0,Oe=b.length,de=Oe-1;ee<Oe;de=ee++)E=b[ee],j=b[de],E.y>a.y!=j.y>a.y&&a.x<(j.x-E.x)*(a.y-E.y)/(j.y-E.y)+E.x&&(d=!d);return d||Yi.prototype._containsPoint.call(this,a,!0)}});function hp(a,d){return new ba(a,d)}var qi=wi.extend({initialize:function(a,d){k(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=A(a)?a:a.features,b,E,j;if(d){for(b=0,E=d.length;b<E;b++)j=d[b],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var I=this.options;if(I.filter&&!I.filter(a))return this;var ee=Fn(a,I);return ee?(ee.feature=Sl(a),ee.defaultOptions=ee.options,this.resetStyle(ee),I.onEachFeature&&I.onEachFeature(a,ee),this.addLayer(ee)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function Fn(a,d){var b=a.type==="Feature"?a.geometry:a,E=b?b.coordinates:null,j=[],I=d&&d.pointToLayer,ee=d&&d.coordsToLatLng||xl,de,ve,Oe,Ge;if(!E&&!b)return null;switch(b.type){case"Point":return de=ee(E),ya(I,a,de,d);case"MultiPoint":for(Oe=0,Ge=E.length;Oe<Ge;Oe++)de=ee(E[Oe]),j.push(ya(I,a,de,d));return new wi(j);case"LineString":case"MultiLineString":return ve=xo(E,b.type==="LineString"?0:1,ee),new Yi(ve,d);case"Polygon":case"MultiPolygon":return ve=xo(E,b.type==="Polygon"?1:2,ee),new ba(ve,d);case"GeometryCollection":for(Oe=0,Ge=b.geometries.length;Oe<Ge;Oe++){var Xe=Fn({geometry:b.geometries[Oe],type:"Feature",properties:a.properties},d);Xe&&j.push(Xe)}return new wi(j);case"FeatureCollection":for(Oe=0,Ge=b.features.length;Oe<Ge;Oe++){var ht=Fn(b.features[Oe],d);ht&&j.push(ht)}return new wi(j);default:throw new Error("Invalid GeoJSON object.")}}function ya(a,d,b,E){return a?a(d,b):new _o(b,E&&E.markersInheritOptions&&E)}function xl(a){return new P(a[1],a[0],a[2])}function xo(a,d,b){for(var E=[],j=0,I=a.length,ee;j<I;j++)ee=d?xo(a[j],d-1,b):(b||xl)(a[j]),E.push(ee);return E}function wl(a,d){return a=Z(a),a.alt!==void 0?[x(a.lng,d),x(a.lat,d),x(a.alt,d)]:[x(a.lng,d),x(a.lat,d)]}function wo(a,d,b,E){for(var j=[],I=0,ee=a.length;I<ee;I++)j.push(d?wo(a[I],Cr(a[I])?0:d-1,b,E):wl(a[I],E));return!d&&b&&j.length>0&&j.push(j[0].slice()),j}function ds(a,d){return a.feature?o({},a.feature,{geometry:d}):Sl(d)}function Sl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var hs={toGeoJSON:function(a){return ds(this,{type:"Point",coordinates:wl(this.getLatLng(),a)})}};_o.include(hs),_l.include(hs),ga.include(hs),Yi.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=wo(this._latlngs,d?1:0,!1,a);return ds(this,{type:(d?"Multi":"")+"LineString",coordinates:b})}}),ba.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),b=d&&!Cr(this._latlngs[0]),E=wo(this._latlngs,b?2:d?1:0,!0,a);return d||(E=[E]),ds(this,{type:(b?"Multi":"")+"Polygon",coordinates:E})}}),pa.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(b){d.push(b.toGeoJSON(a).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var b=d==="GeometryCollection",E=[];return this.eachLayer(function(j){if(j.toGeoJSON){var I=j.toGeoJSON(a);if(b)E.push(I.geometry);else{var ee=Sl(I);ee.type==="FeatureCollection"?E.push.apply(E,ee.features):E.push(ee)}}}),b?ds(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function El(a,d){return new qi(a,d)}var So=El,va=Xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,b){this._url=a,this._bounds=V(d),k(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(at(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&js(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=V(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:gt("img");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Hi(this._image,b,d)},_reset:function(){var a=this._image,d=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=d.getSize();Yt(a,d.min),a.style.width=b.x+"px",a.style.height=b.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Gd=function(a,d,b){return new va(a,d,b)},fs=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:gt("video");if(at(d,"leaflet-image-layer"),this._zoomAnimated&&at(d,"leaflet-zoom-animated"),this.options.className&&at(d,this.options.className),d.onselectstart=_,d.onmousemove=_,d.onloadeddata=u(this.fire,this,"load"),a){for(var b=d.getElementsByTagName("source"),E=[],j=0;j<b.length;j++)E.push(b[j].src);this._url=b.length>0?E:[d.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var ee=gt("source");ee.src=this._url[I],d.appendChild(ee)}}});function _a(a,d,b){return new fs(a,d,b)}var Tl=va.extend({_initImage:function(){var a=this._image=this._url;at(a,"leaflet-image-layer"),this._zoomAnimated&&at(a,"leaflet-zoom-animated"),this.options.className&&at(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Fd(a,d,b){return new Tl(a,d,b)}var Yn=Xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof P||A(a))?(this._latlng=Z(a),k(this,d)):(k(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(zt,void 0,this._container),200)):zt(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Z(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&js(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof wi){d=null;var b=this._source._layers;for(var E in b)if(b[E]._map){d=b[E];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=W(this.options.offset),b=this._getAnchor();this._zoomAnimated?Yt(this._container,a.add(b)):d=d.add(a).add(b);var E=this._containerBottom=-d.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=E+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(a,d,b,E){var j=d;return j instanceof a||(j=new a(E).setContent(d)),b&&j.setLatLng(b),j}}),Xr.include({_initOverlay:function(a,d,b,E){var j=b;return j instanceof a?(k(j,E),j._source=this):(j=d&&!E?d:new a(E,this),j.setContent(b)),j}});var Eo=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Yn.prototype.openOn.call(this,a)},onAdd:function(a){Yn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ei||this._source.on("preclick",Wr))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ei||this._source.off("preclick",Wr))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=gt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=gt("div",a+"-content-wrapper",d);if(this._contentNode=gt("div",a+"-content",b),Os(d),_i(this._contentNode),it(d,"contextmenu",Wr),this._tipContainer=gt("div",a+"-tip-container",d),this._tip=gt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=gt("a",a+"-close-button",d);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',it(E,"click",function(j){yn(j),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var b=a.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),d.width=b+1+"px",d.whiteSpace="",d.height="";var E=a.offsetHeight,j=this.options.maxHeight,I="leaflet-popup-scrolled";j&&E>j?(d.height=j+"px",at(a,I)):an(a,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),b=this._getAnchor();Yt(this._container,d.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(oo(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+d,E=this._containerWidth,j=new J(this._containerLeft,-b-this._containerBottom);j._add(ls(this._container));var I=a.layerPointToContainerPoint(j),ee=W(this.options.autoPanPadding),de=W(this.options.autoPanPaddingTopLeft||ee),ve=W(this.options.autoPanPaddingBottomRight||ee),Oe=a.getSize(),Ge=0,Xe=0;I.x+E+ve.x>Oe.x&&(Ge=I.x+E-Oe.x+ve.x),I.x-Ge-de.x<0&&(Ge=I.x-de.x),I.y+b+ve.y>Oe.y&&(Xe=I.y+b-Oe.y+ve.y),I.y-Xe-de.y<0&&(Xe=I.y-de.y),(Ge||Xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ge,Xe]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Yd=function(a,d){return new Eo(a,d)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(a,d,b){return this._initOverlay(Eo,a,d,b).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Xr.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Eo,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof wi||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){cs(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Ei)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var To=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Yn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Yn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Yn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,b,E=this._map,j=this._container,I=E.latLngToContainerPoint(E.getCenter()),ee=E.layerPointToContainerPoint(a),de=this.options.direction,ve=j.offsetWidth,Oe=j.offsetHeight,Ge=W(this.options.offset),Xe=this._getAnchor();de==="top"?(d=ve/2,b=Oe):de==="bottom"?(d=ve/2,b=0):de==="center"?(d=ve/2,b=Oe/2):de==="right"?(d=0,b=Oe/2):de==="left"?(d=ve,b=Oe/2):ee.x<I.x?(de="right",d=0,b=Oe/2):(de="left",d=ve+(Ge.x+Xe.x)*2,b=Oe/2),a=a.subtract(W(d,b,!0)).add(Ge).add(Xe),an(j,"leaflet-tooltip-right"),an(j,"leaflet-tooltip-left"),an(j,"leaflet-tooltip-top"),an(j,"leaflet-tooltip-bottom"),at(j,"leaflet-tooltip-"+de),Yt(j,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&en(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fp=function(a,d){return new To(a,d)};St.include({openTooltip:function(a,d,b){return this._initOverlay(To,a,d,b).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Xr.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(To,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[d](b),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof wi||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(it(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),it(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,b,E;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(d)}});var qd=Si.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Dr(d),d.appendChild(b.html)):d.innerHTML=b.html!==!1?b.html:"",b.bgPos){var E=W(b.bgPos);d.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function mp(a){return new qd(a)}Si.Default=yo;var xa=Xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),zt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(js(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof J?a:new J(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,b=-a(-1/0,1/0),E=0,j=d.length,I;E<j;E++)I=d[E].style.zIndex,d[E]!==this._container&&I&&(b=a(b,+I));isFinite(b)&&(this.options.zIndex=b+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){en(this._container,this.options.opacity);var a=+new Date,d=!1,b=!1;for(var E in this._tiles){var j=this._tiles[E];if(!(!j.current||!j.loaded)){var I=Math.min(1,(a-j.loaded)/200);en(j.el,I),I<1?d=!0:(j.active?b=!0:this._onOpaqueTile(j),j.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),d&&(Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===a?(this._levels[b].el.style.zIndex=d-Math.abs(a-b),this._onUpdateLevel(b)):(zt(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var E=this._levels[a],j=this._map;return E||(E=this._levels[a]={},E.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=d,E.origin=j.project(j.unproject(j.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,j.getCenter(),j.getZoom()),_(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,d,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var E=d.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)zt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,b,E){var j=Math.floor(a/2),I=Math.floor(d/2),ee=b-1,de=new J(+j,+I);de.z=+ee;var ve=this._tileCoordsToKey(de),Oe=this._tiles[ve];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),ee>E?this._retainParent(j,I,ee,E):!1)},_retainChildren:function(a,d,b,E){for(var j=2*a;j<2*a+2;j++)for(var I=2*d;I<2*d+2;I++){var ee=new J(j,I);ee.z=b+1;var de=this._tileCoordsToKey(ee),ve=this._tiles[de];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);b+1<E&&this._retainChildren(j,I,b+1,E)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,b,E){var j=Math.round(d);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var I=this.options.updateWhenZooming&&j!==this._tileZoom;(!E||I)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(a),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var b in this._levels)this._setZoomTransform(this._levels[b],a,d)},_setZoomTransform:function(a,d,b){var E=this._map.getZoomScale(b,a.zoom),j=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(d,b)).round();Ve.any3d?Hi(a.el,j,E):Yt(a.el,j)},_resetGrid:function(){var a=this._map,d=a.options.crs,b=this._tileSize=this.getTileSize(),E=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],E).x/b.x),Math.ceil(a.project([0,d.wrapLng[1]],E).x/b.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],E).y/b.x),Math.ceil(a.project([d.wrapLat[1],0],E).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,b=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),E=d.getZoomScale(b,this._tileZoom),j=d.project(a,this._tileZoom).floor(),I=d.getSize().divideBy(E*2);return new U(j.subtract(I),j.add(I))},_update:function(a){var d=this._map;if(d){var b=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),j=this._pxBoundsToTileRange(E),I=j.getCenter(),ee=[],de=this.options.keepBuffer,ve=new U(j.getBottomLeft().subtract([de,-de]),j.getTopRight().add([de,-de]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ge=this._tiles[Oe].coords;(Ge.z!==this._tileZoom||!ve.contains(new J(Ge.x,Ge.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(a,b);return}for(var Xe=j.min.y;Xe<=j.max.y;Xe++)for(var ht=j.min.x;ht<=j.max.x;ht++){var Un=new J(ht,Xe);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var vn=this._tiles[this._tileCoordsToKey(Un)];vn?vn.current=!0:ee.push(Un)}}if(ee.sort(function(Nt,Ot){return Nt.distanceTo(I)-Ot.distanceTo(I)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xr=document.createDocumentFragment();for(ht=0;ht<ee.length;ht++)this._addTile(ee[ht],xr);this._level.el.appendChild(xr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var b=this._globalTileRange;if(!d.wrapLng&&(a.x<b.min.x||a.x>b.max.x)||!d.wrapLat&&(a.y<b.min.y||a.y>b.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return V(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,b=this.getTileSize(),E=a.scaleBy(b),j=E.add(b),I=d.unproject(E,a.z),ee=d.unproject(j,a.z);return[I,ee]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),b=new q(d[0],d[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),b=new J(+d[0],+d[1]);return b.z=+d[2],b},_removeTile:function(a){var d=this._tiles[a];d&&(zt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){at(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=_,a.onmousemove=_,Ve.ielt9&&this.options.opacity<1&&en(a,this.options.opacity)},_addTile:function(a,d){var b=this._getTilePos(a),E=this._tileCoordsToKey(a),j=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(j),this.createTile.length<2&&Q(u(this._tileReady,this,a,null,j)),Yt(j,b),this._tiles[E]={el:j,coords:a,current:!0},d.appendChild(j),this.fire("tileloadstart",{tile:j,coords:a})},_tileReady:function(a,d,b){d&&this.fire("tileerror",{error:d,tile:b,coords:a});var E=this._tileCoordsToKey(a);b=this._tiles[E],b&&(b.loaded=+new Date,this._map._fadeAnimated?(en(b.el,0),Y(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),d||(at(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new J(this._wrapX?y(a.x,this._wrapX):a.x,this._wrapY?y(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new U(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Zd(a){return new xa(a)}var ms=xa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=k(this,d),d.detectRetina&&Ve.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var b=document.createElement("img");return it(b,"load",u(this._tileOnLoad,this,d,b)),it(b,"error",u(this._tileOnError,this,d,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(a),b},getTileUrl:function(a){var d={r:Ve.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=b),d["-y"]=b}return $(this._url,o(d,this.options))},_tileOnLoad:function(a,d){Ve.ielt9?setTimeout(u(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,b){var E=this.options.errorTileUrl;E&&d.getAttribute("src")!==E&&(d.src=E),a(b,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,b=this.options.zoomReverse,E=this.options.zoomOffset;return b&&(a=d-a),a+E},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=_,d.onerror=_,!d.complete)){d.src=M;var b=this._tiles[a].coords;zt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:b})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",M),xa.prototype._removeTile.call(this,a)},_tileReady:function(a,d,b){if(!(!this._map||b&&b.getAttribute("src")===M))return xa.prototype._tileReady.call(this,a,d,b)}});function Rr(a,d){return new ms(a,d)}var ko=ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var b=o({},this.defaultWmsParams);for(var E in d)E in this.options||(b[E]=d[E]);d=k(this,d);var j=d.detectRetina&&Ve.retina?2:1,I=this.getTileSize();b.width=I.x*j,b.height=I.y*j,this.wmsParams=b},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ms.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),b=this._crs,E=B(b.project(d[0]),b.project(d[1])),j=E.min,I=E.max,ee=(this._wmsVersion>=1.3&&this._crs===qc?[j.y,j.x,I.y,I.x]:[j.x,j.y,I.x,I.y]).join(","),de=ms.prototype.getTileUrl.call(this,a);return de+N(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function Lr(a,d){return new ko(a,d)}ms.WMS=ko,Rr.wms=Lr;var dr=Xr.extend({options:{padding:.1},initialize:function(a){k(this,a),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),at(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var b=this._map.getZoomScale(d,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,d),I=E.multiplyBy(-b).add(j).subtract(this._map._getNewPixelOrigin(a,d));Ve.any3d?Hi(this._container,I,b):Yt(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),b=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new U(b,b.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kl=dr.extend({options:{tolerance:0},getEvents:function(){var a=dr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");it(a,"mousemove",this._onMouseMove,this),it(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,zt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=this._container,b=a.getSize(),E=Ve.retina?2:1;Yt(d,a.min),d.width=E*b.x,d.height=E*b.y,d.style.width=b.x+"px",d.style.height=b.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[m(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,b=d.next,E=d.prev;b?b.prev=E:this._drawLast=E,E?E.next=b:this._drawFirst=b,delete a._order,delete this._layers[m(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),b=[],E,j;for(j=0;j<d.length;j++){if(E=Number(d[j]),isNaN(E))return;b.push(E)}a.options._dashArray=b}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var b=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var b,E,j,I,ee=a._parts,de=ee.length,ve=this._ctx;if(de){for(ve.beginPath(),b=0;b<de;b++){for(E=0,j=ee[b].length;E<j;E++)I=ee[b][E],ve[E?"lineTo":"moveTo"](I.x,I.y);d&&ve.closePath()}this._fillStroke(ve,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,b=this._ctx,E=Math.max(Math.round(a._radius),1),j=(Math.max(Math.round(a._radiusY),1)||E)/E;j!==1&&(b.save(),b.scale(1,j)),b.beginPath(),b.arc(d.x,d.y/j,E,0,Math.PI*2,!1),j!==1&&b.restore(),this._fillStroke(b,a)}},_fillStroke:function(a,d){var b=d.options;b.fill&&(a.globalAlpha=b.fillOpacity,a.fillStyle=b.fillColor||b.color,a.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=b.opacity,a.lineWidth=b.weight,a.strokeStyle=b.color,a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(b))&&(E=b);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(an(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var b,E,j=this._drawFirst;j;j=j.next)b=j.layer,b.options.interactive&&b._containsPoint(d)&&(E=b);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(at(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,b){this._map._fireDOMEvent(d,b||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(b)b.prev=E;else return;E?E.next=b:b&&(this._drawFirst=b),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var b=d.next,E=d.prev;if(E)E.next=b;else return;b?b.prev=E:E&&(this._drawLast=E),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function Ao(a){return Ve.canvas?new kl(a):null}var ps=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Zc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=ps("shape");at(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=ps("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;zt(d),a.removeInteractiveTarget(d),delete this._layers[m(a)]},_updateStyle:function(a){var d=a._stroke,b=a._fill,E=a.options,j=a._container;j.stroked=!!E.stroke,j.filled=!!E.fill,E.stroke?(d||(d=a._stroke=ps("stroke")),j.appendChild(d),d.weight=E.weight+"px",d.color=E.color,d.opacity=E.opacity,E.dashArray?d.dashStyle=A(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=E.lineCap.replace("butt","flat"),d.joinstyle=E.lineJoin):d&&(j.removeChild(d),a._stroke=null),E.fill?(b||(b=a._fill=ps("fill")),j.appendChild(b),b.color=E.fillColor||E.color,b.opacity=E.fillOpacity):b&&(j.removeChild(b),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),b=Math.round(a._radius),E=Math.round(a._radiusY||b);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+b+","+E+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){zn(a._container)},_bringToBack:function(a){js(a._container)}},Ti=Ve.vml?ps:Pe,wa=dr.extend({_initContainer:function(){this._container=Ti("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ti("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,b.setAttribute("width",d.x),b.setAttribute("height",d.y)),Yt(b,a.min),b.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ti("path");a.options.className&&at(d,a.options.className),a.options.interactive&&at(d,"leaflet-interactive"),this._updateStyle(a),this._layers[m(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){zt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[m(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,b=a.options;d&&(b.stroke?(d.setAttribute("stroke",b.color),d.setAttribute("stroke-opacity",b.opacity),d.setAttribute("stroke-width",b.weight),d.setAttribute("stroke-linecap",b.lineCap),d.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?d.setAttribute("stroke-dasharray",b.dashArray):d.removeAttribute("stroke-dasharray"),b.dashOffset?d.setAttribute("stroke-dashoffset",b.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),b.fill?(d.setAttribute("fill",b.fillColor||b.color),d.setAttribute("fill-opacity",b.fillOpacity),d.setAttribute("fill-rule",b.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ce(a._parts,d))},_updateCircle:function(a){var d=a._point,b=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||b,j="a"+b+","+E+" 0 1,0 ",I=a._empty()?"M0 0":"M"+(d.x-b)+","+d.y+j+b*2+",0 "+j+-b*2+",0 ";this._setPath(a,I)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){zn(a._path)},_bringToBack:function(a){js(a._path)}});Ve.vml&&wa.include(Zc);function jo(a){return Ve.svg||Ve.vml?new wa(a):null}St.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Ao(a)||jo(a)}});var Ms=ba.extend({initialize:function(a,d){ba.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=V(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function pp(a,d){return new Ms(a,d)}wa.create=Ti,wa.pointsToPath=Ce,qi.geometryToLayer=Fn,qi.coordsToLatLng=xl,qi.coordsToLatLngs=xo,qi.latLngToCoords=wl,qi.latLngsToCoords=wo,qi.getFeature=ds,qi.asFeature=Sl,St.mergeOptions({boxZoom:!0});var hr=xi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),la(),hl(),this._startPoint=this._map.mouseEventToContainerPoint(a),it(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),at(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new U(this._point,this._startPoint),b=d.getSize();Yt(this._box,d.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(zt(this._box),an(this._container,"leaflet-crosshair")),vi(),co(),Bt(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",hr),St.mergeOptions({doubleClickZoom:!0});var Al=xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,b=d.getZoom(),E=d.options.zoomDelta,j=a.originalEvent.shiftKey?b-E:b+E;d.options.doubleClickZoom==="center"?d.setZoom(j):d.setZoomAround(a.containerPoint,j)}});St.addInitHook("addHandler","doubleClickZoom",Al),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ki=xi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new us(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}at(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=V(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),b=this._initialWorldOffset,E=this._draggable._newPos.x,j=(E-d+b)%a+d-b,I=(E+d+b)%a-d-b,ee=Math.abs(j+b)<Math.abs(I+b)?j:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(a){var d=this._map,b=d.options,E=!b.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),E)d.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,ee=b.easeLinearity,de=j.multiplyBy(ee/I),ve=de.distanceTo([0,0]),Oe=Math.min(b.inertiaMaxSpeed,ve),Ge=de.multiplyBy(Oe/ve),Xe=Oe/(b.inertiaDeceleration*ee),ht=Ge.multiplyBy(-Xe/2).round();!ht.x&&!ht.y?d.fire("moveend"):(ht=d._limitOffset(ht,d.options.maxBounds),Q(function(){d.panBy(ht,{duration:Xe,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",ki),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vc=xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),it(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,b=a.scrollTop||d.scrollTop,E=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(E,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},b=this.keyCodes,E,j;for(E=0,j=b.left.length;E<j;E++)d[b.left[E]]=[-1*a,0];for(E=0,j=b.right.length;E<j;E++)d[b.right[E]]=[a,0];for(E=0,j=b.down.length;E<j;E++)d[b.down[E]]=[0,a];for(E=0,j=b.up.length;E<j;E++)d[b.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},b=this.keyCodes,E,j;for(E=0,j=b.zoomIn.length;E<j;E++)d[b.zoomIn[E]]=a;for(E=0,j=b.zoomOut.length;E<j;E++)d[b.zoomOut[E]]=-a},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,b=this._map,E;if(d in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(E=this._panKeys[d],a.shiftKey&&(E=W(E).multiplyBy(3)),b.options.maxBounds&&(E=b._limitOffset(W(E),b.options.maxBounds)),b.options.worldCopyJump){var j=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(E)));b.panTo(j)}else b.panBy(E)}else if(d in this._zoomKeys)b.setZoom(b.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;cs(a)}}});St.addInitHook("addHandler","keyboard",Vc),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var No=xi.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Qn(a),b=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),cs(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),b=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,I=b?Math.ceil(j/b)*b:j,ee=a._limitZoom(d+(this._delta>0?I:-I))-d;this._delta=0,this._startTime=null,ee&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ee):a.setZoomAround(this._lastMousePos,d+ee))}});St.addInitHook("addHandler","scrollWheelZoom",No);var Cs=600;St.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var jl=xi.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new J(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",yn),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Cs),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Bt(document,"touchend",yn),Bt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new J(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var b=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});b._simulated=!0,d.target.dispatchEvent(b)}});St.addInitHook("addHandler","tapHold",jl),St.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Kc=xi.extend({addHooks:function(){at(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(b.add(E)._divideBy(2))),this._startDist=b.distanceTo(E),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),yn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,b=d.mouseEventToContainerPoint(a.touches[0]),E=d.mouseEventToContainerPoint(a.touches[1]),j=b.distanceTo(E)/this._startDist;if(this._zoom=d.getScaleZoom(j,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&j<1||this._zoom>d.getMaxZoom()&&j>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var I=b._add(E)._divideBy(2)._subtract(this._centerPoint);if(j===1&&I.x===0&&I.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var ee=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(ee,this,!0),yn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",Kc),St.BoxZoom=hr,St.DoubleClickZoom=Al,St.Drag=ki,St.Keyboard=Vc,St.ScrollWheelZoom=No,St.TapHold=jl,St.TouchZoom=Kc,n.Bounds=U,n.Browser=Ve,n.CRS=ie,n.Canvas=kl,n.Circle=_l,n.CircleMarker=ga,n.Class=re,n.Control=_r,n.DivIcon=qd,n.DivOverlay=Yn,n.DomEvent=pl,n.DomUtil=da,n.Draggable=us,n.Evented=oe,n.FeatureGroup=wi,n.GeoJSON=qi,n.GridLayer=xa,n.Handler=xi,n.Icon=Si,n.ImageOverlay=va,n.LatLng=P,n.LatLngBounds=q,n.Layer=Xr,n.LayerGroup=pa,n.LineUtil=cp,n.Map=St,n.Marker=_o,n.Mixin=sp,n.Path=Ei,n.Point=J,n.PolyUtil=Fc,n.Polygon=ba,n.Polyline=Yi,n.Popup=Eo,n.PosAnimation=ha,n.Projection=Pd,n.Rectangle=Ms,n.Renderer=dr,n.SVG=wa,n.SVGOverlay=Tl,n.TileLayer=ms,n.Tooltip=To,n.Transformation=ke,n.Util=te,n.VideoOverlay=fs,n.bind=u,n.bounds=B,n.canvas=Ao,n.circle=Hd,n.circleMarker=Ud,n.control=Fi,n.divIcon=mp,n.extend=o,n.featureGroup=Id,n.geoJSON=El,n.geoJson=So,n.gridLayer=Zd,n.icon=bo,n.imageOverlay=Gd,n.latLng=Z,n.latLngBounds=V,n.layerGroup=up,n.map=$c,n.marker=zd,n.point=W,n.polygon=hp,n.polyline=dp,n.popup=Yd,n.rectangle=pp,n.setOptions=k,n.stamp=m,n.svg=jo,n.svgOverlay=Fd,n.tileLayer=Rr,n.tooltip=fp,n.transformation=je,n.version=i,n.videoOverlay=_a;var Wc=window.L;n.noConflict=function(){return window.L=Wc,this},window.L=n}))})(Yu,Yu.exports)),Yu.exports}var pC=mC();const og=ll(pC),tf=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function Go(e){const t=document.getElementById(e);if(!t)throw new Error(`#${e} not found`);return t}function gC(e){const{buttonId:t,buttonInputId:n,modalId:i,closeMapId:o,mapCloseBtnId:l,searchBoxId:u,suggestionsId:f,mapId:m}=e.ids,p=e.initialCenter??{lat:37.5665,lon:126.978},y=Go(n),_=Go(t),x=Go(i),S=Go(l),T=Go(u),k=Go(f),N=o?Go(o):null;let C=null,$=null,A=null;const D=Y=>Y.code==="Space"||Y.key===" "||Y.key==="Spacebar"||Y.key==="Space",M=Y=>{D(Y)&&document.activeElement!==T&&(Y.preventDefault(),Y.stopPropagation(),T.focus())},G=()=>{x.style.display="flex",C?setTimeout(()=>C?.invalidateSize(),200):setTimeout(()=>{C=og.map(m,{keyboard:!1}).setView([p.lat,p.lon],11),og.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(C),C.invalidateSize()},0),x.addEventListener("keydown",M,!0),x.addEventListener("keyup",M,!0),T.focus()},H=()=>{x.style.display="none",T.value="",k.innerHTML="",A&&(window.clearTimeout(A),A=null),x.removeEventListener("keydown",M,!0),x.removeEventListener("keyup",M,!0)},F=Y=>{const te=Y.dataset.name??"",re=Number(Y.dataset.lat??""),Se=Number(Y.dataset.lon??"");!Number.isFinite(re)||!Number.isFinite(Se)||!C||($?$.setLatLng([re,Se]):$=og.marker([re,Se]).addTo(C),C.flyTo([re,Se],14,{duration:.5}),y.value=te,y.dataset.lat=String(re),y.dataset.lon=String(Se),e.onSelected?.({name:te,lat:re,lon:Se}),k.innerHTML="",H())},K=()=>{A&&window.clearTimeout(A);const Y=T.value.trim();if(!Y){k.innerHTML="";return}A=window.setTimeout(async()=>{try{const te="https://nominatim.openstreetmap.org/search?format=jsonv2&limit=12&accept-language=ko&addressdetails=1&dedupe=1&email=unique950318@gmail.com&q="+encodeURIComponent(Y),re=await fetch(te,{headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`HTTP ${re.status}`);const Se=await re.json();if(!Array.isArray(Se)||Se.length===0){k.innerHTML='<li style="padding:8px"> </li>';return}const X=Se.slice(0,12).map((oe,J)=>{const ye=oe.display_name.split(",").slice(0,3).map(B=>B.trim()).join("  "),W="padding:8px;cursor:pointer;outline:none;",U=J===0?"background-color:#1f2937;border-radius:4px;":"";return`<li
                    role="option"
                    data-name="${tf(ye)}"
                    data-lat="${tf(oe.lat)}"
                    data-lon="${tf(oe.lon)}"
                    data-active="${J===0?"1":"0"}"
                    style="${W}${U}"
                  >${tf(ye)}</li>`}).join("");k.innerHTML=X}catch(te){console.error(te),k.innerHTML='<li style="padding:8px;color:#b91c1c"> </li>'}},250)},ae=Y=>{const te=Y.target;te.tagName==="LI"&&F(te)},Q=Y=>{if(Y.key==="Enter"){const te=k.querySelector('li[data-active="1"]')??k.querySelector("li");te&&F(te)}};return _.addEventListener("click",G),S.addEventListener("click",H),N&&N.addEventListener("click",H),T.addEventListener("input",K),T.addEventListener("keydown",Q),k.addEventListener("click",ae),()=>{_.removeEventListener("click",G),S.removeEventListener("click",H),N&&N.removeEventListener("click",H),T.removeEventListener("input",K),T.removeEventListener("keydown",Q),k.removeEventListener("click",ae),x.removeEventListener("keydown",M,!0),x.removeEventListener("keyup",M,!0),A&&(window.clearTimeout(A),A=null),C&&(C.remove(),C=null)}}function tc(){return document.getElementById("suggestions")}function Gf(e){const t=Array.from(e.querySelectorAll('li, [role="option"]'));return t.forEach((n,i)=>{n.getAttribute("role")||n.setAttribute("role","option"),n.setAttribute("aria-selected",n===document.activeElement?"true":"false"),n.tabIndex=-1,n.id||(n.id=`suggestion-item-${i}`)}),t}function lg(e,t){const n=Gf(e);if(n.length===0)return;const i=n.length;let o=t;o<0&&(o=i-1),o>=i&&(o=0),n.forEach(u=>{u.tabIndex=-1,u.setAttribute("aria-selected","false")});const l=n[o];l.tabIndex=0,l.setAttribute("aria-selected","true"),l.focus()}function dT({onSelect:e,placeholderText:t="",buttonStyle:n,value:i}){const[o,l]=R.useState(t),[u,f]=R.useState(!1),[m,p]=R.useState(i??""),y=R.useRef(null),_=R.useRef(null),x=R.useRef(null),S=R.useRef(null);return R.useEffect(()=>{i!==void 0&&p(i)},[i]),R.useEffect(()=>{if(!u)return;const T=gC({ids:{buttonInputId:"inputBirthPlace",buttonId:"inputBirthPlaceBtn",modalId:"mapModal",closeMapId:"closeMap",mapCloseBtnId:"mapCloseBtn",searchBoxId:"searchBox",suggestionsId:"suggestions",mapId:"map"},onSelected:K=>{l(""),p(K.name),y.current&&(y.current.value=K.name),_.current&&(_.current.value=String(K.lat)),x.current&&(x.current.value=String(K.lon)),e?.(K),f(!1)}}),k=document.getElementById("inputBirthPlaceBtn");k&&k.dispatchEvent(new MouseEvent("click",{bubbles:!0}));const N=document.getElementById("mapModal"),C=document.getElementById("searchBox"),$=tc();setTimeout(()=>C?.focus(),0);const A='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',D=K=>{if(K.key==="Escape"){K.preventDefault(),f(!1);return}if(K.key!=="Tab")return;const ae=tc();if(ae&&ae.contains(document.activeElement))return;const Q=Array.from(N.querySelectorAll(A)).filter(Se=>!Se.hasAttribute("disabled")&&Se.tabIndex!==-1);if(Q.length===0)return;const Y=Q[0],te=Q[Q.length-1],re=document.activeElement;K.shiftKey?(re===Y||!N.contains(re))&&(K.preventDefault(),te.focus()):(re===te||!N.contains(re))&&(K.preventDefault(),Y.focus())};N.addEventListener("keydown",D);const M=K=>{if(K.key!=="ArrowDown")return;const ae=tc();!ae||Gf(ae).length===0||K.preventDefault()};C?.addEventListener("keydown",M);const G=K=>{if(K.target.value.trim()===""){const Q=tc();Q&&(Q.innerHTML="")}};C?.addEventListener("input",G);const H=K=>{const ae=tc();if(!ae)return;const Q=Gf(ae);if(Q.length===0)return;const Y=document.activeElement,te=Y?Q.indexOf(Y):-1;if(te===-1)return;const re=Se=>{K.preventDefault(),lg(ae,te+Se)};switch(K.key){case"Tab":K.preventDefault(),re(K.shiftKey?-1:1);break;case"ArrowDown":K.preventDefault(),re(1);break;case"ArrowUp":K.preventDefault(),re(-1);break;case"Home":K.preventDefault(),lg(ae,0);break;case"End":K.preventDefault(),lg(ae,Q.length-1);break;case"Enter":case" ":K.preventDefault(),Y.click();break;case"Backspace":K.preventDefault(),ae.innerHTML="",C?.focus();break}K.stopPropagation()};let F=null;return $&&($.addEventListener("keydown",H),F=new MutationObserver(()=>{const K=tc();!K||Gf(K).length}),F.observe($,{childList:!0,subtree:!1})),()=>{N.removeEventListener("keydown",D),C?.removeEventListener("keydown",M),C?.removeEventListener("input",G),$&&$.removeEventListener("keydown",H),F?.disconnect(),T?.()}},[u,e]),R.useEffect(()=>{u||setTimeout(()=>S.current?.focus(),0)},[u]),g.jsxs("li",{className:"flex items-center gap-2",children:[g.jsx("input",{className:`w-[60%] desk:w-[70%] mr-2 border rounded-lg p-2
                   bg-white dark:bg-neutral-900
                   border-neutral-300 dark:border-neutral-700
                   text-neutral-900 dark:text-neutral-100
                   placeholder-neutral-400 dark:placeholder-neutral-500`,type:"text",id:"inputBirthPlace",readOnly:!0,"aria-readonly":"true",value:m&&m.trim()!==""?m:t}),g.jsx("button",{ref:S,type:"button",id:"inputBirthPlaceBtn",className:"btn_style text-sm desk:text-base w-[calc(40%_-_8px)] desk:w-[calc(30%_-_8px)] p-0",style:n,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":"mapModal",children:o}),g.jsx("input",{ref:y,type:"hidden",name:"birthPlace_name",defaultValue:""}),g.jsx("input",{ref:_,type:"hidden",name:"birthPlace_lat",defaultValue:""}),g.jsx("input",{ref:x,type:"hidden",name:"birthPlace_lon",defaultValue:""}),u&&g.jsx("div",{id:"mapModal",role:"dialog","aria-modal":"true","aria-labelledby":"mapModalTitle",className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/40 dark:bg-black/60 p-4",children:g.jsxs("div",{className:`w-[96vw] desk:w-[920px] rounded-2xl shadow-2xl overflow-hidden flex flex-col
                          bg-white dark:bg-neutral-950
                          text-neutral-900 dark:text-neutral-100
                          border border-neutral-200 dark:border-neutral-800`,children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{id:"mapModalTitle",className:"font-bold",children:""}),g.jsx("button",{id:"mapCloseBtn","aria-label":"",className:"text-xl hover:opacity-70 cursor-pointer",onClick:()=>f(!1),children:""})]}),g.jsxs("div",{className:"relative grid gap-2 px-3 py-3 border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("label",{htmlFor:"searchBox",className:"text-xs text-neutral-500 dark:text-neutral-400",children:"/ "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"searchBox",placeholder:":   / seoul /  / tokyo",className:`h-10 w-full rounded-lg border px-3 outline-none
                             bg-white dark:bg-neutral-900
                             border-neutral-300 dark:border-neutral-700
                             placeholder-neutral-400 dark:placeholder-neutral-500
                             text-neutral-900 dark:text-neutral-100
                             focus:border-neutral-400 dark:focus:border-neutral-600`,autoComplete:"off"}),g.jsx("ul",{id:"suggestions",role:"listbox","aria-label":" ",className:`absolute left-0 right-0 mt-1 max-h-60 overflow-y-auto rounded-lg border shadow-xl z-[1005]
                             bg-white dark:bg-neutral-900
                             border-neutral-200 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             divide-y divide-neutral-200 dark:divide-neutral-800`})]})]}),g.jsx("div",{className:"relative h-[250px] desk:h-[360px] border-y border-neutral-200 dark:border-neutral-800",children:g.jsx("div",{id:"map",className:"h-full w-full"})}),g.jsxs("div",{className:"gap-2 p-3",children:[g.jsxs("div",{id:"footerHint",className:"pr-2 text-xs text-neutral-600 dark:text-neutral-300 flex-1",children:[g.jsxs("p",{className:"flex mb-1",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:" ,  ."})]}),g.jsxs("p",{className:"flex",children:[g.jsx("span",{className:"mr-1",children:"*"}),g.jsx("span",{children:"       ,   ."})]})]}),g.jsx("button",{id:"closeMap",style:{display:"none"},"aria-hidden":"true",tabIndex:-1})]})]})})]})}var Rm=j2();const bC=ll(Rm);function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yC=typeof Symbol=="function"&&Symbol.observable||"@@observable",Jw=yC,Qw=()=>Math.random().toString(36).substring(7).split("").join("."),vC={INIT:`@@redux/INIT${Qw()}`,REPLACE:`@@redux/REPLACE${Qw()}`},e1=vC;function _C(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hT(e,t,n){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(hT)(e,t)}let i=e,o=t,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((N,C)=>{u.set(C,N)}))}function y(){if(m)throw new Error(Er(3));return o}function _(N){if(typeof N!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let C=!0;p();const $=f++;return u.set($,N),function(){if(C){if(m)throw new Error(Er(6));C=!1,p(),u.delete($),l=null}}}function x(N){if(!_C(N))throw new Error(Er(7));if(typeof N.type>"u")throw new Error(Er(8));if(typeof N.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,o=i(o,N)}finally{m=!1}return(l=u).forEach($=>{$()}),N}function S(N){if(typeof N!="function")throw new Error(Er(10));i=N,x({type:e1.REPLACE})}function T(){const N=_;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Er(11));function $(){const D=C;D.next&&D.next(y())}return $(),{unsubscribe:N($)}},[Jw](){return this}}}return x({type:e1.INIT}),{dispatch:x,subscribe:_,getState:y,replaceReducer:S,[Jw]:T}}function t1(e,t){return function(...n){return t(e.apply(this,n))}}function n1(e,t){if(typeof e=="function")return t1(e,t);if(typeof e!="object"||e===null)throw new Error(Er(16));const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=t1(o,t))}return n}function fT(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function xC(...e){return t=>(n,i)=>{const o=t(n,i);let l=()=>{throw new Error(Er(15))};const u={getState:o.getState,dispatch:(m,...p)=>l(m,...p)},f=e.map(m=>m(u));return l=fT(...f)(o.dispatch),{...o,dispatch:l}}}var cg={exports:{}},ug={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function wC(){if(r1)return ug;r1=1;var e=Sm();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return ug.useSyncExternalStoreWithSelector=function(m,p,y,_,x){var S=o(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=u(function(){function N(M){if(!C){if(C=!0,$=M,M=_(M),x!==void 0&&T.hasValue){var G=T.value;if(x(G,M))return A=G}return A=M}if(G=A,n($,M))return G;var H=_(M);return x!==void 0&&x(G,H)?($=M,G):($=M,A=H)}var C=!1,$,A,D=y===void 0?null:y;return[function(){return N(p())},D===null?void 0:function(){return N(D())}]},[p,y,_,x]);var k=i(m,S[0],S[1]);return l(function(){T.hasValue=!0,T.value=k},[k]),f(k),k},ug}var i1;function SC(){return i1||(i1=1,cg.exports=wC()),cg.exports}SC();var EC=R.version.startsWith("19"),TC=Symbol.for(EC?"react.transitional.element":"react.element"),kC=Symbol.for("react.portal"),AC=Symbol.for("react.fragment"),jC=Symbol.for("react.strict_mode"),NC=Symbol.for("react.profiler"),OC=Symbol.for("react.consumer"),DC=Symbol.for("react.context"),mT=Symbol.for("react.forward_ref"),MC=Symbol.for("react.suspense"),CC=Symbol.for("react.suspense_list"),ly=Symbol.for("react.memo"),RC=Symbol.for("react.lazy"),LC=mT,BC=ly;function PC(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case TC:switch(e=e.type,e){case AC:case NC:case jC:case MC:case CC:return e;default:switch(e=e&&e.$$typeof,e){case DC:case mT:case RC:case ly:return e;case OC:return e;default:return t}}case kC:return t}}}function $C(e){return PC(e)===ly}function IC(e,t,n,i,{areStatesEqual:o,areOwnPropsEqual:l,areStatePropsEqual:u}){let f=!1,m,p,y,_,x;function S($,A){return m=$,p=A,y=e(m,p),_=t(i,p),x=n(y,_,p),f=!0,x}function T(){return y=e(m,p),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function k(){return e.dependsOnOwnProps&&(y=e(m,p)),t.dependsOnOwnProps&&(_=t(i,p)),x=n(y,_,p),x}function N(){const $=e(m,p),A=!u($,y);return y=$,A&&(x=n(y,_,p)),x}function C($,A){const D=!l(A,p),M=!o($,m,A,p);return m=$,p=A,D&&M?T():D?k():M?N():x}return function(A,D){return f?C(A,D):S(A,D)}}function zC(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:i,...o}){const l=t(e,o),u=n(e,o),f=i(e,o);return IC(l,u,f,e,o)}function UC(e,t){const n={};for(const i in e){const o=e[i];typeof o=="function"&&(n[i]=(...l)=>t(o(...l)))}return n}function Ab(e){return function(n){const i=e(n);function o(){return i}return o.dependsOnOwnProps=!1,o}}function s1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function pT(e,t){return function(i,{displayName:o}){const l=function(f,m){return l.dependsOnOwnProps?l.mapToProps(f,m):l.mapToProps(f,void 0)};return l.dependsOnOwnProps=!0,l.mapToProps=function(f,m){l.mapToProps=e,l.dependsOnOwnProps=s1(e);let p=l(f,m);return typeof p=="function"&&(l.mapToProps=p,l.dependsOnOwnProps=s1(p),p=l(f,m)),p},l}}function cy(e,t){return(n,i)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${i.wrappedComponentName}.`)}}function HC(e){return e&&typeof e=="object"?Ab(t=>UC(e,t)):e?typeof e=="function"?pT(e):cy(e,"mapDispatchToProps"):Ab(t=>({dispatch:t}))}function GC(e){return e?typeof e=="function"?pT(e):cy(e,"mapStateToProps"):Ab(()=>({}))}function FC(e,t,n){return{...n,...e,...t}}function YC(e){return function(n,{displayName:i,areMergedPropsEqual:o}){let l=!1,u;return function(m,p,y){const _=e(m,p,y);return l?o(_,u)||(u=_):(l=!0,u=_),u}}}function qC(e){return e?typeof e=="function"?YC(e):cy(e,"mergeProps"):()=>FC}function ZC(e){e()}function VC(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZC(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var a1={notify(){},get:()=>[]};function gT(e,t){let n,i=a1,o=0,l=!1;function u(k){y();const N=i.subscribe(k);let C=!1;return()=>{C||(C=!0,N(),_())}}function f(){i.notify()}function m(){T.onStateChange&&T.onStateChange()}function p(){return l}function y(){o++,n||(n=t?t.addNestedSub(m):e.subscribe(m),i=VC())}function _(){o--,n&&o===0&&(n(),n=void 0,i.clear(),i=a1)}function x(){l||(l=!0,y())}function S(){l&&(l=!1,_())}const T={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>i};return T}var KC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WC=KC(),XC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JC=XC(),QC=()=>WC||JC?R.useLayoutEffect:R.useEffect,sm=QC();function o1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function dg(e,t){if(o1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!o1(e[n[o]],t[n[o]]))return!1;return!0}var e3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r3={[LC]:n3,[BC]:bT};function l1(e){return $C(e)?bT:r3[e.$$typeof]||e3}var i3=Object.defineProperty,s3=Object.getOwnPropertyNames,c1=Object.getOwnPropertySymbols,a3=Object.getOwnPropertyDescriptor,o3=Object.getPrototypeOf,u1=Object.prototype;function jb(e,t){if(typeof t!="string"){if(u1){const l=o3(t);l&&l!==u1&&jb(e,l)}let n=s3(t);c1&&(n=n.concat(c1(t)));const i=l1(e),o=l1(t);for(let l=0;l<n.length;++l){const u=n[l];if(!t3[u]&&!(o&&o[u])&&!(i&&i[u])){const f=a3(t,u);try{i3(e,u,f)}catch{}}}}return e}var l3=Symbol.for("react-redux-context"),c3=typeof globalThis<"u"?globalThis:{};function u3(){if(!R.createContext)return{};const e=c3[l3]??=new Map;let t=e.get(R.createContext);return t||(t=R.createContext(null),e.set(R.createContext,t)),t}var yT=u3(),d3=[null,null];function h3(e,t,n){sm(()=>e(...t),n)}function f3(e,t,n,i,o,l){e.current=i,n.current=!1,o.current&&(o.current=null,l())}function m3(e,t,n,i,o,l,u,f,m,p,y){if(!e)return()=>{};let _=!1,x=null;const S=()=>{if(_||!f.current)return;const k=t.getState();let N,C;try{N=i(k,o.current)}catch($){C=$,x=$}C||(x=null),N===l.current?u.current||p():(l.current=N,m.current=N,u.current=!0,y())};return n.onStateChange=S,n.trySubscribe(),S(),()=>{if(_=!0,n.tryUnsubscribe(),n.onStateChange=null,x)throw x}}function p3(e,t){return e===t}function g3(e,t,n,{pure:i,areStatesEqual:o=p3,areOwnPropsEqual:l=dg,areStatePropsEqual:u=dg,areMergedPropsEqual:f=dg,forwardRef:m=!1,context:p=yT}={}){const y=p,_=GC(e),x=HC(t),S=qC(n),T=!!e;return N=>{const C=N.displayName||N.name||"Component",$=`Connect(${C})`,A={shouldHandleStateChanges:T,displayName:$,wrappedComponentName:C,WrappedComponent:N,initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:u,areOwnPropsEqual:l,areMergedPropsEqual:f};function D(H){const[F,K,ae]=R.useMemo(()=>{const{reactReduxForwardedRef:je,...Me}=H;return[H.context,je,Me]},[H]),Q=R.useMemo(()=>{let je=y;return F?.Consumer,je},[F,y]),Y=R.useContext(Q),te=!!H.store&&!!H.store.getState&&!!H.store.dispatch,re=!!Y&&!!Y.store,Se=te?H.store:Y.store,X=re?Y.getServerState:Se.getState,oe=R.useMemo(()=>zC(Se.dispatch,A),[Se]),[J,ye]=R.useMemo(()=>{if(!T)return d3;const je=gT(Se,te?void 0:Y.subscription),Me=je.notifyNestedSubs.bind(je);return[je,Me]},[Se,te,Y]),W=R.useMemo(()=>te?Y:{...Y,subscription:J},[te,Y,J]),U=R.useRef(void 0),B=R.useRef(ae),q=R.useRef(void 0),V=R.useRef(!1),P=R.useRef(!1),Z=R.useRef(void 0);sm(()=>(P.current=!0,()=>{P.current=!1}),[]);const ie=R.useMemo(()=>()=>q.current&&ae===B.current?q.current:oe(Se.getState(),ae),[Se,ae]),me=R.useMemo(()=>Me=>J?m3(T,Se,J,oe,B,U,V,P,q,ye,Me):()=>{},[J]);h3(f3,[B,U,V,ae,q,ye]);let ce;try{ce=R.useSyncExternalStore(me,ie,X?()=>oe(X(),ae):ie)}catch(je){throw Z.current&&(je.message+=`
The error may be correlated with this previous error:
${Z.current.stack}

`),je}sm(()=>{Z.current=void 0,q.current=void 0,U.current=ce});const xe=R.useMemo(()=>R.createElement(N,{...ce,ref:K}),[K,N,ce]);return R.useMemo(()=>T?R.createElement(Q.Provider,{value:W},xe):xe,[Q,xe,W])}const G=R.memo(D);if(G.WrappedComponent=N,G.displayName=D.displayName=$,m){const F=R.forwardRef(function(ae,Q){return R.createElement(G,{...ae,reactReduxForwardedRef:Q})});return F.displayName=$,F.WrappedComponent=N,jb(F,N)}return jb(G,N)}}var vT=g3;function b3(e){const{children:t,context:n,serverState:i,store:o}=e,l=R.useMemo(()=>{const m=gT(o);return{store:o,subscription:m,getServerState:i?()=>i:void 0}},[o,i]),u=R.useMemo(()=>o.getState(),[o]);sm(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==o.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=n||yT;return R.createElement(f.Provider,{value:l},t)}var y3=b3,v3="Invariant failed";function _3(e,t){throw new Error(v3)}var is=function(t){var n=t.top,i=t.right,o=t.bottom,l=t.left,u=i-l,f=o-n,m={top:n,right:i,bottom:o,left:l,width:u,height:f,x:l,y:n,center:{x:(i+l)/2,y:(o+n)/2}};return m},uy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},d1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},x3=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},hg={top:0,right:0,bottom:0,left:0},dy=function(t){var n=t.borderBox,i=t.margin,o=i===void 0?hg:i,l=t.border,u=l===void 0?hg:l,f=t.padding,m=f===void 0?hg:f,p=is(uy(n,o)),y=is(d1(n,u)),_=is(d1(y,m));return{marginBox:p,borderBox:is(n),paddingBox:y,contentBox:_,margin:o,border:u,padding:m}},Oi=function(t){var n=t.slice(0,-2),i=t.slice(-2);if(i!=="px")return 0;var o=Number(n);return isNaN(o)&&_3(),o},w3=function(){return{x:window.pageXOffset,y:window.pageYOffset}},am=function(t,n){var i=t.borderBox,o=t.border,l=t.margin,u=t.padding,f=x3(i,n);return dy({borderBox:f,border:o,margin:l,padding:u})},om=function(t,n){return n===void 0&&(n=w3()),am(t,n)},_T=function(t,n){var i={top:Oi(n.marginTop),right:Oi(n.marginRight),bottom:Oi(n.marginBottom),left:Oi(n.marginLeft)},o={top:Oi(n.paddingTop),right:Oi(n.paddingRight),bottom:Oi(n.paddingBottom),left:Oi(n.paddingLeft)},l={top:Oi(n.borderTopWidth),right:Oi(n.borderRightWidth),bottom:Oi(n.borderBottomWidth),left:Oi(n.borderLeftWidth)};return dy({borderBox:t,margin:i,padding:o,border:l})},xT=function(t){var n=t.getBoundingClientRect(),i=window.getComputedStyle(t);return _T(n,i)},nd=function(t){var n=[],i=null,o=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];n=f,!i&&(i=requestAnimationFrame(function(){i=null,t.apply(void 0,n)}))};return o.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},o};function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lm.apply(null,arguments)}function wT(e,t){}wT.bind(null,"warn");wT.bind(null,"error");function Za(){}function S3(e,t){return{...e,...t}}function Mi(e,t,n){const i=t.map(o=>{const l=S3(n,o.options);return e.addEventListener(o.eventName,o.fn,l),function(){e.removeEventListener(o.eventName,o.fn,l)}});return function(){i.forEach(l=>{l()})}}const E3="Invariant failed";class cm extends Error{}cm.prototype.toString=function(){return this.message};function ze(e,t){throw new cm(E3)}class T3 extends rn.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Za,this.onWindowError=n=>{const i=this.getCallbacks();i.isDragging()&&i.tryAbort(),n.error instanceof cm&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Mi(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof cm){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const k3=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,um=e=>e+1,A3=e=>`
  You have lifted an item in position ${um(e.source.index)}
`,ST=(e,t)=>{const n=e.droppableId===t.droppableId,i=um(e.index),o=um(t.index);return n?`
      You have moved the item from position ${i}
      to position ${o}
    `:`
    You have moved the item from position ${i}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},ET=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,j3=e=>{const t=e.destination;if(t)return ST(e.source,t);const n=e.combine;return n?ET(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},h1=e=>`
  The item has returned to its starting position
  of ${um(e.index)}
`,N3=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${h1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${ST(e.source,t)}
    `:n?`
      You have dropped the item.
      ${ET(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${h1(e.source)}
  `},Ff={dragHandleUsageInstructions:k3,onDragStart:A3,onDragUpdate:j3,onDragEnd:N3};function O3(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function TT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!O3(e[n],t[n]))return!1;return!0}function kt(e,t){const n=R.useState(()=>({inputs:t,result:e()}))[0],i=R.useRef(!0),o=R.useRef(n),u=i.current||!!(t&&o.current.inputs&&TT(t,o.current.inputs))?o.current:{inputs:t,result:e()};return R.useEffect(()=>{i.current=!1,o.current=u},[u]),u.result}function Je(e,t){return kt(()=>e,t)}const Xn={x:0,y:0},or=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ci=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Va=(e,t)=>e.x===t.x&&e.y===t.y,jc=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),al=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},rd=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),f1=(e,t)=>Math.min(...t.map(n=>rd(e,n))),kT=e=>t=>({x:e(t.x),y:e(t.y)});var D3=(e,t)=>{const n=is({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const _d=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),m1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],M3={top:0,right:0,bottom:0,left:0},C3=(e,t)=>t?_d(e,t.scroll.diff.displacement):e,R3=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,L3=(e,t)=>t&&t.shouldClipSubject?D3(t.pageMarginBox,e):is(e);var _c=({page:e,withPlaceholder:t,axis:n,frame:i})=>{const o=C3(e.marginBox,i),l=R3(o,n,t),u=L3(l,i);return{page:e,withPlaceholder:t,active:u}},hy=(e,t)=>{e.frame||ze();const n=e.frame,i=ci(t,n.scroll.initial),o=jc(i),l={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:i,displacement:o},max:n.scroll.max}},u=_c({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l});return{...e,frame:l,subject:u}};function Kn(e,t=TT){let n=null;function i(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const l=e.apply(this,o);return n={lastResult:l,lastArgs:o,lastThis:this},l}return i.clear=function(){n=null},i}const AT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),jT=Kn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Lm=Kn(e=>Object.values(e)),B3=Kn(e=>Object.values(e));var Nc=Kn((e,t)=>B3(t).filter(i=>e===i.descriptor.droppableId).sort((i,o)=>i.descriptor.index-o.descriptor.index));function fy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Bm(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Pm=Kn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),P3=({isMovingForward:e,draggable:t,destination:n,insideDestination:i,previousImpact:o})=>{if(!n.isCombineEnabled||!fy(o))return null;function u(S){const T={type:"COMBINE",combine:{draggableId:S,droppableId:n.descriptor.id}};return{...o,at:T}}const f=o.displaced.all,m=f.length?f[0]:null;if(e)return m?u(m):null;const p=Pm(t,i);if(!m){if(!p.length)return null;const S=p[p.length-1];return u(S.descriptor.id)}const y=p.findIndex(S=>S.descriptor.id===m);y===-1&&ze();const _=y-1;if(_<0)return null;const x=p[_];return u(x.descriptor.id)},Oc=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const NT={point:Xn,value:0},id={invisible:{},visible:{},all:[]},$3={displaced:id,displacedBy:NT,at:null};var Pi=(e,t)=>n=>e<=n&&n<=t,OT=e=>{const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return i=>{if(t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right))return!0;const l=t(i.top)||t(i.bottom),u=n(i.left)||n(i.right);if(l&&u)return!0;const m=i.top<e.top&&i.bottom>e.bottom,p=i.left<e.left&&i.right>e.right;return m&&p?!0:m&&u||p&&l}},I3=e=>{const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return i=>t(i.top)&&t(i.bottom)&&n(i.left)&&n(i.right)};const my={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},DT={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var z3=e=>t=>{const n=Pi(t.top,t.bottom),i=Pi(t.left,t.right);return o=>e===my?n(o.top)&&n(o.bottom):i(o.left)&&i(o.right)};const U3=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Xn;return _d(e,n)},H3=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,G3=(e,t,n)=>n(t)(e),py=({target:e,destination:t,viewport:n,withDroppableDisplacement:i,isVisibleThroughFrameFn:o})=>{const l=i?U3(e,t):e;return H3(l,t,o)&&G3(l,n,o)},F3=e=>py({...e,isVisibleThroughFrameFn:OT}),MT=e=>py({...e,isVisibleThroughFrameFn:I3}),Y3=e=>py({...e,isVisibleThroughFrameFn:z3(e.destination.axis)}),q3=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:i,visible:o}=t;if(i[e])return!1;const l=o[e];return l?l.shouldAnimate:!0};function Z3(e,t){const n=e.page.marginBox,i={top:t.point.y,right:0,bottom:0,left:t.point.x};return is(uy(n,i))}function sd({afterDragging:e,destination:t,displacedBy:n,viewport:i,forceShouldAnimate:o,last:l}){return e.reduce(function(f,m){const p=Z3(m,n),y=m.descriptor.id;if(f.all.push(y),!F3({target:p,destination:t,viewport:i,withDroppableDisplacement:!0}))return f.invisible[m.descriptor.id]=!0,f;const x=q3(y,l,o),S={draggableId:y,shouldAnimate:x};return f.visible[y]=S,f},{all:[],visible:{},invisible:{}})}function V3(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function p1({insideDestination:e,inHomeList:t,displacedBy:n,destination:i}){const o=V3(e,{inHomeList:t});return{displaced:id,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function dm({draggable:e,insideDestination:t,destination:n,viewport:i,displacedBy:o,last:l,index:u,forceShouldAnimate:f}){const m=Oc(e,n);if(u==null)return p1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const p=t.find(T=>T.descriptor.index===u);if(!p)return p1({insideDestination:t,inHomeList:m,displacedBy:o,destination:n});const y=Pm(e,t),_=t.indexOf(p),x=y.slice(_);return{displaced:sd({afterDragging:x,destination:n,displacedBy:o,last:l,viewport:i.frame,forceShouldAnimate:f}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:u}}}}function Ka(e,t){return!!t.effected[e]}var K3=({isMovingForward:e,destination:t,draggables:n,combine:i,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const l=i.draggableId,f=n[l].descriptor.index;return Ka(l,o)?e?f:f-1:e?f+1:f},W3=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:i})=>{if(!n.length)return null;const o=i.index,l=e?o+1:o-1,u=n[0].descriptor.index,f=n[n.length-1].descriptor.index,m=t?f:f+1;return l<u||l>m?null:l},X3=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:i,destination:o,insideDestination:l,previousImpact:u,viewport:f,afterCritical:m})=>{const p=u.at;if(p||ze(),p.type==="REORDER"){const _=W3({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:l});return _==null?null:dm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:_})}const y=K3({isMovingForward:e,destination:o,displaced:u.displaced,draggables:i,combine:p.combine,afterCritical:m});return y==null?null:dm({draggable:n,insideDestination:l,destination:o,viewport:f,last:u.displaced,displacedBy:u.displacedBy,index:y})},J3=({displaced:e,afterCritical:t,combineWith:n,displacedBy:i})=>{const o=!!(e.visible[n]||e.invisible[n]);return Ka(n,t)?o?Xn:jc(i.point):o?i.point:Xn},Q3=({afterCritical:e,impact:t,draggables:n})=>{const i=Bm(t);i||ze();const o=i.draggableId,l=n[o].page.borderBox.center,u=J3({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return or(l,u)};const CT=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,eR=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,gy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,g1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.end]+CT(e,n),gy(e,t.marginBox,n)),b1=({axis:e,moveRelativeTo:t,isMoving:n})=>al(e.line,t.marginBox[e.start]-eR(e,n),gy(e,t.marginBox,n)),tR=({axis:e,moveInto:t,isMoving:n})=>al(e.line,t.contentBox[e.start]+CT(e,n),gy(e,t.contentBox,n));var nR=({impact:e,draggable:t,draggables:n,droppable:i,afterCritical:o})=>{const l=Nc(i.descriptor.id,n),u=t.page,f=i.axis;if(!l.length)return tR({axis:f,moveInto:i.page,isMoving:u});const{displaced:m,displacedBy:p}=e,y=m.all[0];if(y){const x=n[y];if(Ka(y,o))return b1({axis:f,moveRelativeTo:x.page,isMoving:u});const S=am(x.page,p.point);return b1({axis:f,moveRelativeTo:S,isMoving:u})}const _=l[l.length-1];if(_.descriptor.id===t.descriptor.id)return u.borderBox.center;if(Ka(_.descriptor.id,o)){const x=am(_.page,jc(o.displacedBy.point));return g1({axis:f,moveRelativeTo:x,isMoving:u})}return g1({axis:f,moveRelativeTo:_.page,isMoving:u})},Nb=(e,t)=>{const n=e.frame;return n?or(t,n.scroll.diff.displacement):t};const rR=({impact:e,draggable:t,droppable:n,draggables:i,afterCritical:o})=>{const l=t.page.borderBox.center,u=e.at;return!n||!u?l:u.type==="REORDER"?nR({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:o}):Q3({impact:e,draggables:i,afterCritical:o})};var $m=e=>{const t=rR(e),n=e.droppable;return n?Nb(n,t):t},RT=(e,t)=>{const n=ci(t,e.scroll.initial),i=jc(n);return{frame:is({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:i}}}};function y1(e,t){return e.map(n=>t[n])}function iR(e,t){for(let n=0;n<t.length;n++){const i=t[n].visible[e];if(i)return i}return null}var sR=({impact:e,viewport:t,destination:n,draggables:i,maxScrollChange:o})=>{const l=RT(t,or(t.scroll.current,o)),u=n.frame?hy(n,or(n.frame.scroll.current,o)):n,f=e.displaced,m=sd({afterDragging:y1(f.all,i),destination:n,displacedBy:e.displacedBy,viewport:l.frame,last:f,forceShouldAnimate:!1}),p=sd({afterDragging:y1(f.all,i),destination:u,displacedBy:e.displacedBy,viewport:t.frame,last:f,forceShouldAnimate:!1}),y={},_={},x=[f,m,p];return f.all.forEach(T=>{const k=iR(T,x);if(k){_[T]=k;return}y[T]=!0}),{...e,displaced:{all:f.all,invisible:y,visible:_}}},aR=(e,t)=>or(e.scroll.diff.displacement,t),by=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const i=aR(n,e),o=ci(i,t.page.borderBox.center);return or(t.client.borderBox.center,o)},LT=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:i,withDroppableDisplacement:o,onlyOnMainAxis:l=!1})=>{const u=ci(n,e.page.borderBox.center),m={target:_d(e.page.borderBox,u),destination:t,withDroppableDisplacement:o,viewport:i};return l?Y3(m):MT(m)},oR=({isMovingForward:e,draggable:t,destination:n,draggables:i,previousImpact:o,viewport:l,previousPageBorderBoxCenter:u,previousClientSelection:f,afterCritical:m})=>{if(!n.isEnabled)return null;const p=Nc(n.descriptor.id,i),y=Oc(t,n),_=P3({isMovingForward:e,draggable:t,destination:n,insideDestination:p,previousImpact:o})||X3({isMovingForward:e,isInHomeList:y,draggable:t,draggables:i,destination:n,insideDestination:p,previousImpact:o,viewport:l,afterCritical:m});if(!_)return null;const x=$m({impact:_,draggable:t,droppable:n,draggables:i,afterCritical:m});if(LT({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:by({pageBorderBoxCenter:x,draggable:t,viewport:l}),impact:_,scrollJumpRequest:null};const T=ci(x,u),k=sR({impact:_,viewport:l,destination:n,draggables:i,maxScrollChange:T});return{clientSelection:f,impact:k,scrollJumpRequest:T}};const Sr=e=>{const t=e.subject.active;return t||ze(),t};var lR=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:o})=>{const l=n.subject.active;if(!l)return null;const u=n.axis,f=Pi(l[u.start],l[u.end]),m=Lm(i).filter(y=>y!==n).filter(y=>y.isEnabled).filter(y=>!!y.subject.active).filter(y=>OT(o.frame)(Sr(y))).filter(y=>{const _=Sr(y);return e?l[u.crossAxisEnd]<_[u.crossAxisEnd]:_[u.crossAxisStart]<l[u.crossAxisStart]}).filter(y=>{const _=Sr(y),x=Pi(_[u.start],_[u.end]);return f(_[u.start])||f(_[u.end])||x(l[u.start])||x(l[u.end])}).sort((y,_)=>{const x=Sr(y)[u.crossAxisStart],S=Sr(_)[u.crossAxisStart];return e?x-S:S-x}).filter((y,_,x)=>Sr(y)[u.crossAxisStart]===Sr(x[0])[u.crossAxisStart]);if(!m.length)return null;if(m.length===1)return m[0];const p=m.filter(y=>Pi(Sr(y)[u.start],Sr(y)[u.end])(t[u.line]));return p.length===1?p[0]:p.length>1?p.sort((y,_)=>Sr(y)[u.start]-Sr(_)[u.start])[0]:m.sort((y,_)=>{const x=f1(t,m1(Sr(y))),S=f1(t,m1(Sr(_)));return x!==S?x-S:Sr(y)[u.start]-Sr(_)[u.start]})[0]};const v1=(e,t)=>{const n=e.page.borderBox.center;return Ka(e.descriptor.id,t)?ci(n,t.displacedBy.point):n},cR=(e,t)=>{const n=e.page.borderBox;return Ka(e.descriptor.id,t)?_d(n,jc(t.displacedBy.point)):n};var uR=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:i,afterCritical:o})=>i.filter(u=>MT({target:cR(u,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((u,f)=>{const m=rd(e,Nb(n,v1(u,o))),p=rd(e,Nb(n,v1(f,o)));return m<p?-1:p<m?1:u.descriptor.index-f.descriptor.index})[0]||null,xd=Kn(function(t,n){const i=n[t.line];return{value:i,point:al(t.line,i)}});const dR=(e,t,n)=>{const i=e.axis;if(e.descriptor.mode==="virtual")return al(i.line,t[i.line]);const o=e.subject.page.contentBox[i.size],m=Nc(e.descriptor.id,n).reduce((p,y)=>p+y.client.marginBox[i.size],0)+t[i.line]-o;return m<=0?null:al(i.line,m)},BT=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),PT=(e,t,n)=>{const i=e.frame;Oc(t,e)&&ze(),e.subject.withPlaceholder&&ze();const o=xd(e.axis,t.displaceBy).point,l=dR(e,o,n),u={placeholderSize:o,increasedBy:l,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){const y=_c({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:e.frame});return{...e,subject:y}}const f=l?or(i.scroll.max,l):i.scroll.max,m=BT(i,f),p=_c({page:e.subject.page,withPlaceholder:u,axis:e.axis,frame:m});return{...e,subject:p,frame:m}},hR=e=>{const t=e.subject.withPlaceholder;t||ze();const n=e.frame;if(!n){const u=_c({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:u}}const i=t.oldFrameMaxScroll;i||ze();const o=BT(n,i),l=_c({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:l,frame:o}};var fR=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:i,draggables:o,destination:l,viewport:u,afterCritical:f})=>{if(!t){if(n.length)return null;const _={displaced:id,displacedBy:NT,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},x=$m({impact:_,draggable:i,droppable:l,draggables:o,afterCritical:f}),S=Oc(i,l)?l:PT(l,i,o);return LT({draggable:i,destination:S,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?_:null}const m=e[l.axis.line]<=t.page.borderBox.center[l.axis.line],p=(()=>{const _=t.descriptor.index;return t.descriptor.id===i.descriptor.id||m?_:_+1})(),y=xd(l.axis,i.displaceBy);return dm({draggable:i,insideDestination:n,destination:l,viewport:u,displacedBy:y,last:id,index:p})},mR=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:i,draggables:o,droppables:l,viewport:u,afterCritical:f})=>{const m=lR({isMovingForward:e,pageBorderBoxCenter:t,source:i,droppables:l,viewport:u});if(!m)return null;const p=Nc(m.descriptor.id,o),y=uR({pageBorderBoxCenter:t,viewport:u,destination:m,insideDestination:p,afterCritical:f}),_=fR({previousPageBorderBoxCenter:t,destination:m,draggable:n,draggables:o,moveRelativeTo:y,insideDestination:p,viewport:u,afterCritical:f});if(!_)return null;const x=$m({impact:_,draggable:n,droppable:m,draggables:o,afterCritical:f});return{clientSelection:by({pageBorderBoxCenter:x,draggable:n,viewport:u}),impact:_,scrollJumpRequest:null}},ui=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const pR=(e,t)=>{const n=ui(e);return n?t[n]:null};var gR=({state:e,type:t})=>{const n=pR(e.impact,e.dimensions.droppables),i=!!n,o=e.dimensions.droppables[e.critical.droppable.id],l=n||o,u=l.axis.direction,f=u==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||u==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(f&&!i)return null;const m=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],y=e.current.page.borderBoxCenter,{draggables:_,droppables:x}=e.dimensions;return f?oR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,destination:l,draggables:_,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):mR({isMovingForward:m,previousPageBorderBoxCenter:y,draggable:p,isOver:l,draggables:_,droppables:x,viewport:e.viewport,afterCritical:e.afterCritical})};function Qo(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function $T(e){const t=Pi(e.top,e.bottom),n=Pi(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function bR(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function yR({pageBorderBox:e,draggable:t,candidates:n}){const i=t.page.borderBox.center,o=n.map(l=>{const u=l.axis,f=al(l.axis.line,e.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:rd(i,f)}}).sort((l,u)=>u.distance-l.distance);return o[0]?o[0].id:null}function vR({pageBorderBox:e,draggable:t,droppables:n}){const i=Lm(n).filter(o=>{if(!o.isEnabled)return!1;const l=o.subject.active;if(!l||!bR(e,l))return!1;if($T(l)(e.center))return!0;const u=o.axis,f=l.center[u.crossAxisLine],m=e[u.crossAxisStart],p=e[u.crossAxisEnd],y=Pi(l[u.crossAxisStart],l[u.crossAxisEnd]),_=y(m),x=y(p);return!_&&!x?!0:_?m<f:p>f});return i.length?i.length===1?i[0].descriptor.id:yR({pageBorderBox:e,draggable:t,candidates:i}):null}const IT=(e,t)=>is(_d(e,t));var _R=(e,t)=>{const n=e.frame;return n?IT(t,n.scroll.diff.value):t};function zT({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function xR({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var wR=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:i,last:o,viewport:l,afterCritical:u})=>{const f=n.axis,m=xd(n.axis,t.displaceBy),p=m.value,y=e[f.start],_=e[f.end],S=Pm(t,i).find(k=>{const N=k.descriptor.id,C=k.page.borderBox.center[f.line],$=Ka(N,u),A=zT({displaced:o,id:N});return $?A?_<=C:y<C-p:A?_<=C+p:y<C})||null,T=xR({draggable:t,closest:S,inHomeList:Oc(t,n)});return dm({draggable:t,insideDestination:i,destination:n,viewport:l,last:o,displacedBy:m,index:T})};const SR=4;var ER=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:i,insideDestination:o,afterCritical:l})=>{if(!i.isCombineEnabled)return null;const u=i.axis,f=xd(i.axis,e.displaceBy),m=f.value,p=t[u.start],y=t[u.end],x=Pm(e,o).find(T=>{const k=T.descriptor.id,N=T.page.borderBox,$=N[u.size]/SR,A=Ka(k,l),D=zT({displaced:n.displaced,id:k});return A?D?y>N[u.start]+$&&y<N[u.end]-$:p>N[u.start]-m+$&&p<N[u.end]-m-$:D?y>N[u.start]+m+$&&y<N[u.end]+m-$:p>N[u.start]+$&&p<N[u.end]-$});return x?{displacedBy:f,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}}:null},UT=({pageOffset:e,draggable:t,draggables:n,droppables:i,previousImpact:o,viewport:l,afterCritical:u})=>{const f=IT(t.page.borderBox,e),m=vR({pageBorderBox:f,draggable:t,droppables:i});if(!m)return $3;const p=i[m],y=Nc(p.descriptor.id,n),_=_R(p,f);return ER({pageBorderBoxWithDroppableScroll:_,draggable:t,previousImpact:o,destination:p,insideDestination:y,afterCritical:u})||wR({pageBorderBoxWithDroppableScroll:_,draggable:t,destination:p,insideDestination:y,last:o.displaced,viewport:l,afterCritical:u})},yy=(e,t)=>({...e,[t.descriptor.id]:t});const TR=({previousImpact:e,impact:t,droppables:n})=>{const i=ui(e),o=ui(t);if(!i||i===o)return n;const l=n[i];if(!l.subject.withPlaceholder)return n;const u=hR(l);return yy(n,u)};var kR=({draggable:e,draggables:t,droppables:n,previousImpact:i,impact:o})=>{const l=TR({previousImpact:i,impact:o,droppables:n}),u=ui(o);if(!u)return l;const f=n[u];if(Oc(e,f)||f.subject.withPlaceholder)return l;const m=PT(f,e,t);return yy(l,m)},Wu=({state:e,clientSelection:t,dimensions:n,viewport:i,impact:o,scrollJumpRequest:l})=>{const u=i||e.viewport,f=n||e.dimensions,m=t||e.current.client.selection,p=ci(m,e.initial.client.selection),y={offset:p,selection:m,borderBoxCenter:or(e.initial.client.borderBoxCenter,p)},_={selection:or(y.selection,u.scroll.current),borderBoxCenter:or(y.borderBoxCenter,u.scroll.current),offset:or(y.offset,u.scroll.diff.value)},x={client:y,page:_};if(e.phase==="COLLECTING")return{...e,dimensions:f,viewport:u,current:x};const S=f.draggables[e.critical.draggable.id],T=o||UT({pageOffset:_.offset,draggable:S,draggables:f.draggables,droppables:f.droppables,previousImpact:e.impact,viewport:u,afterCritical:e.afterCritical}),k=kR({draggable:S,impact:T,previousImpact:e.impact,draggables:f.draggables,droppables:f.droppables});return{...e,current:x,dimensions:{draggables:f.draggables,droppables:k},impact:T,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null}};function AR(e,t){return e.map(n=>t[n])}var HT=({impact:e,viewport:t,draggables:n,destination:i,forceShouldAnimate:o})=>{const l=e.displaced,u=AR(l.all,n),f=sd({afterDragging:u,destination:i,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:l});return{...e,displaced:f}},GT=({impact:e,draggable:t,droppable:n,draggables:i,viewport:o,afterCritical:l})=>{const u=$m({impact:e,draggable:t,draggables:i,droppable:n,afterCritical:l});return by({pageBorderBoxCenter:u,draggable:t,viewport:o})},FT=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ze();const i=e.impact,o=n||e.viewport,l=t||e.dimensions,{draggables:u,droppables:f}=l,m=u[e.critical.draggable.id],p=ui(i);p||ze();const y=f[p],_=HT({impact:i,viewport:o,destination:y,draggables:u}),x=GT({impact:_,draggable:m,droppable:y,draggables:u,viewport:o,afterCritical:e.afterCritical});return Wu({impact:_,clientSelection:x,state:e,dimensions:l,viewport:o})},jR=e=>({index:e.index,droppableId:e.droppableId}),YT=({draggable:e,home:t,draggables:n,viewport:i})=>{const o=xd(t.axis,e.displaceBy),l=Nc(t.descriptor.id,n),u=l.indexOf(e);u===-1&&ze();const f=l.slice(u+1),m=f.reduce((x,S)=>(x[S.descriptor.id]=!0,x),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:m};return{impact:{displaced:sd({afterDragging:f,destination:t,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:jR(e.descriptor)}},afterCritical:p}},NR=(e,t)=>({draggables:e.draggables,droppables:yy(e.droppables,t)}),OR=({draggable:e,offset:t,initialWindowScroll:n})=>{const i=am(e.client,t),o=om(i,n);return{...e,placeholder:{...e.placeholder,client:i},client:i,page:o}},DR=e=>{const t=e.frame;return t||ze(),t},MR=({additions:e,updatedDroppables:t,viewport:n})=>{const i=n.scroll.diff.value;return e.map(o=>{const l=o.descriptor.droppableId,u=t[l],m=DR(u).scroll.diff.value,p=or(i,m);return OR({draggable:o,offset:p,initialWindowScroll:n.scroll.initial})})},CR=({state:e,published:t})=>{const n=t.modified.map(C=>{const $=e.dimensions.droppables[C.droppableId];return hy($,C.scroll)}),i={...e.dimensions.droppables,...AT(n)},o=jT(MR({additions:t.additions,updatedDroppables:i,viewport:e.viewport})),l={...e.dimensions.draggables,...o};t.removals.forEach(C=>{delete l[C]});const u={droppables:i,draggables:l},f=ui(e.impact),m=f?u.droppables[f]:null,p=u.draggables[e.critical.draggable.id],y=u.droppables[e.critical.droppable.id],{impact:_,afterCritical:x}=YT({draggable:p,home:y,draggables:l,viewport:e.viewport}),S=m&&m.isCombineEnabled?e.impact:_,T=UT({pageOffset:e.current.page.offset,draggable:u.draggables[e.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:S,viewport:e.viewport,afterCritical:x}),k={...e,phase:"DRAGGING",impact:T,onLiftImpact:_,dimensions:u,afterCritical:x,forceShouldAnimate:!1};return e.phase==="COLLECTING"?k:{...k,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Ob=e=>e.movementMode==="SNAP",fg=(e,t,n)=>{const i=NR(e.dimensions,t);return!Ob(e)||n?Wu({state:e,dimensions:i}):FT({state:e,dimensions:i})};function mg(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const _1={phase:"IDLE",completed:null,shouldFlush:!1};var RR=(e=_1,t)=>{if(t.type==="FLUSH")return{..._1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ze();const{critical:n,clientSelection:i,viewport:o,dimensions:l,movementMode:u}=t.payload,f=l.draggables[n.draggable.id],m=l.droppables[n.droppable.id],p={selection:i,borderBoxCenter:f.client.borderBox.center,offset:Xn},y={client:p,page:{selection:or(p.selection,o.scroll.initial),borderBoxCenter:or(p.selection,o.scroll.initial),offset:or(p.selection,o.scroll.diff.value)}},_=Lm(l.droppables).every(k=>!k.isFixedOnPage),{impact:x,afterCritical:S}=YT({draggable:f,home:m,draggables:l.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:u,dimensions:l,initial:y,current:y,isWindowScrollAllowed:_,impact:x,afterCritical:S,onLiftImpact:x,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ze(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ze(),CR({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{client:n}=t.payload;return Va(n,e.current.client.selection)?e:Wu({state:e,clientSelection:n,impact:Ob(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return mg(e);Qo(e)||ze();const{id:n,newScroll:i}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const l=hy(o,i);return fg(e,l,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isEnabled===i&&ze();const l={...o,isEnabled:i};return fg(e,l,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qo(e)||ze();const{id:n,isCombineEnabled:i}=t.payload,o=e.dimensions.droppables[n];o||ze(),o.isCombineEnabled===i&&ze();const l={...o,isCombineEnabled:i};return fg(e,l,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Qo(e)||ze(),e.isWindowScrollAllowed||ze();const n=t.payload.newScroll;if(Va(e.viewport.scroll.current,n))return mg(e);const i=RT(e.viewport,n);return Ob(e)?FT({state:e,viewport:i}):Wu({state:e,viewport:i})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qo(e))return e;const n=t.payload.maxScroll;if(Va(n,e.viewport.scroll.max))return e;const i={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:i}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ze();const n=gR({state:e,type:t.type});return n?Wu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ze(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:i,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ze(),{phase:"DROP_ANIMATING",completed:n,dropDuration:i,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Pt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const LR=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),BR=e=>({type:"LIFT",payload:e}),PR=e=>({type:"INITIAL_PUBLISH",payload:e}),$R=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),IR=()=>({type:"COLLECTION_STARTING",payload:null}),zR=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),UR=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),HR=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),qT=e=>({type:"MOVE",payload:e}),GR=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),FR=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),YR=()=>({type:"MOVE_UP",payload:null}),qR=()=>({type:"MOVE_DOWN",payload:null}),ZR=()=>({type:"MOVE_RIGHT",payload:null}),VR=()=>({type:"MOVE_LEFT",payload:null}),vy=()=>({type:"FLUSH",payload:null}),KR=e=>({type:"DROP_ANIMATE",payload:e}),_y=e=>({type:"DROP_COMPLETE",payload:e}),ZT=e=>({type:"DROP",payload:e}),WR=e=>({type:"DROP_PENDING",payload:e}),VT=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var XR=e=>({getState:t,dispatch:n})=>i=>o=>{if(!Pt(o,"LIFT")){i(o);return}const{id:l,clientSelection:u,movementMode:f}=o.payload,m=t();m.phase==="DROP_ANIMATING"&&n(_y({completed:m.completed})),t().phase!=="IDLE"&&ze(),n(vy()),n(LR({draggableId:l,movementMode:f}));const y={draggableId:l,scrollOptions:{shouldPublishImmediately:f==="SNAP"}},{critical:_,dimensions:x,viewport:S}=e.startPublishing(y);n(PR({critical:_,dimensions:x,clientSelection:u,movementMode:f,viewport:S}))},JR=e=>()=>t=>n=>{Pt(n,"INITIAL_PUBLISH")&&e.dragging(),Pt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Pt(n,"FLUSH")||Pt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const xy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ad={opacity:{drop:0,combining:.7},scale:{drop:.75}},KT={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fo=`${KT.outOfTheWay}s ${xy.outOfTheWay}`,Xu={fluid:`opacity ${Fo}`,snap:`transform ${Fo}, opacity ${Fo}`,drop:e=>{const t=`${e}s ${xy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fo}`,placeholder:`height ${Fo}, width ${Fo}, margin ${Fo}`},x1=e=>Va(e,Xn)?void 0:`translate(${e.x}px, ${e.y}px)`,Db={moveTo:x1,drop:(e,t)=>{const n=x1(e);if(n)return t?`${n} scale(${ad.scale.drop})`:n}},{minDropTime:Mb,maxDropTime:WT}=KT,QR=WT-Mb,w1=1500,e5=.6;var t5=({current:e,destination:t,reason:n})=>{const i=rd(e,t);if(i<=0)return Mb;if(i>=w1)return WT;const o=i/w1,l=Mb+QR*o,u=n==="CANCEL"?l*e5:l;return Number(u.toFixed(2))},n5=({impact:e,draggable:t,dimensions:n,viewport:i,afterCritical:o})=>{const{draggables:l,droppables:u}=n,f=ui(e),m=f?u[f]:null,p=u[t.descriptor.droppableId],y=GT({impact:e,draggable:t,draggables:l,afterCritical:o,droppable:m||p,viewport:i});return ci(y,t.client.borderBox.center)},r5=({draggables:e,reason:t,lastImpact:n,home:i,viewport:o,onLiftImpact:l})=>!n.at||t!=="DROP"?{impact:HT({draggables:e,impact:l,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:id},didDropInsideDroppable:!0};const i5=({getState:e,dispatch:t})=>n=>i=>{if(!Pt(i,"DROP")){n(i);return}const o=e(),l=i.payload.reason;if(o.phase==="COLLECTING"){t(WR({reason:l}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&ze(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ze();const f=o.critical,m=o.dimensions,p=m.draggables[o.critical.draggable.id],{impact:y,didDropInsideDroppable:_}=r5({reason:l,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),x=_?fy(y):null,S=_?Bm(y):null,T={index:f.draggable.index,droppableId:f.droppable.id},k={draggableId:p.descriptor.id,type:p.descriptor.type,source:T,reason:l,mode:o.movementMode,destination:x,combine:S},N=n5({impact:y,draggable:p,dimensions:m,viewport:o.viewport,afterCritical:o.afterCritical}),C={critical:o.critical,afterCritical:o.afterCritical,result:k,impact:y};if(!(!Va(o.current.client.offset,N)||!!k.combine)){t(_y({completed:C}));return}const A=t5({current:o.current.client.offset,destination:N,reason:l});t(KR({newHomeClientOffset:N,dropDuration:A,completed:C}))};var XT=()=>({x:window.pageXOffset,y:window.pageYOffset});function s5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function a5({onWindowScroll:e}){function t(){e(XT())}const n=nd(t),i=s5(n);let o=Za;function l(){return o!==Za}function u(){l()&&ze(),o=Mi(window,[i])}function f(){l()||ze(),n.cancel(),o(),o=Za}return{start:u,stop:f,isActive:l}}const o5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH"),l5=e=>{const t=a5({onWindowScroll:n=>{e.dispatch(GR({newScroll:n}))}});return n=>i=>{!t.isActive()&&Pt(i,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&o5(i)&&t.stop(),n(i)}};var c5=e=>{let t=!1,n=!1;const i=setTimeout(()=>{n=!0}),o=l=>{t||n||(t=!0,e(l),clearTimeout(i))};return o.wasCalled=()=>t,o},u5=()=>{const e=[],t=o=>{const l=e.findIndex(f=>f.timerId===o);l===-1&&ze();const[u]=e.splice(l,1);u.callback()};return{add:o=>{const l=setTimeout(()=>t(l)),u={timerId:l,callback:o};e.push(u)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(l=>{clearTimeout(l.timerId),l.callback()})}}};const d5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,h5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,f5=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,i=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&i},Cu=(e,t)=>{t()},nf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function pg(e,t,n,i){if(!e){n(i(t));return}const o=c5(n);e(t,{announce:o}),o.wasCalled()||n(i(t))}var m5=(e,t)=>{const n=u5();let i=null;const o=(_,x)=>{i&&ze(),Cu("onBeforeCapture",()=>{const S=e().onBeforeCapture;S&&S({draggableId:_,mode:x})})},l=(_,x)=>{i&&ze(),Cu("onBeforeDragStart",()=>{const S=e().onBeforeDragStart;S&&S(nf(_,x))})},u=(_,x)=>{i&&ze();const S=nf(_,x);i={mode:x,lastCritical:_,lastLocation:S.source,lastCombine:null},n.add(()=>{Cu("onDragStart",()=>pg(e().onDragStart,S,t,Ff.onDragStart))})},f=(_,x)=>{const S=fy(x),T=Bm(x);i||ze();const k=!f5(_,i.lastCritical);k&&(i.lastCritical=_);const N=!d5(i.lastLocation,S);N&&(i.lastLocation=S);const C=!h5(i.lastCombine,T);if(C&&(i.lastCombine=T),!k&&!N&&!C)return;const $={...nf(_,i.mode),combine:T,destination:S};n.add(()=>{Cu("onDragUpdate",()=>pg(e().onDragUpdate,$,t,Ff.onDragUpdate))})},m=()=>{i||ze(),n.flush()},p=_=>{i||ze(),i=null,Cu("onDragEnd",()=>pg(e().onDragEnd,_,t,Ff.onDragEnd))};return{beforeCapture:o,beforeStart:l,start:u,update:f,flush:m,drop:p,abort:()=>{if(!i)return;const _={...nf(i.lastCritical,i.mode),combine:null,destination:null,reason:"CANCEL"};p(_)}}},p5=(e,t)=>{const n=m5(e,t);return i=>o=>l=>{if(Pt(l,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(Pt(l,"INITIAL_PUBLISH")){const f=l.payload.critical;n.beforeStart(f,l.payload.movementMode),o(l),n.start(f,l.payload.movementMode);return}if(Pt(l,"DROP_COMPLETE")){const f=l.payload.completed.result;n.flush(),o(l),n.drop(f);return}if(o(l),Pt(l,"FLUSH")){n.abort();return}const u=i.getState();u.phase==="DRAGGING"&&n.update(u.critical,u.impact)}};const g5=e=>t=>n=>{if(!Pt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const i=e.getState();i.phase!=="DROP_ANIMATING"&&ze(),e.dispatch(_y({completed:i.completed}))},b5=e=>{let t=null,n=null;function i(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>l=>{if((Pt(l,"FLUSH")||Pt(l,"DROP_COMPLETE")||Pt(l,"DROP_ANIMATION_FINISHED"))&&i(),o(l),!Pt(l,"DROP_ANIMATE"))return;const u={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(VT())}};n=requestAnimationFrame(()=>{n=null,t=Mi(window,[u])})}};var y5=e=>()=>t=>n=>{(Pt(n,"DROP_COMPLETE")||Pt(n,"FLUSH")||Pt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},v5=e=>{let t=!1;return()=>n=>i=>{if(Pt(i,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(i.payload.critical.draggable.id),n(i),e.tryRestoreFocusRecorded();return}if(n(i),!!t){if(Pt(i,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Pt(i,"DROP_COMPLETE")){t=!1;const o=i.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const _5=e=>Pt(e,"DROP_COMPLETE")||Pt(e,"DROP_ANIMATE")||Pt(e,"FLUSH");var x5=e=>t=>n=>i=>{if(_5(i)){e.stop(),n(i);return}if(Pt(i,"INITIAL_PUBLISH")){n(i);const o=t.getState();o.phase!=="DRAGGING"&&ze(),e.start(o);return}n(i),e.scroll(t.getState())};const w5=e=>t=>n=>{if(t(n),!Pt(n,"PUBLISH_WHILE_DRAGGING"))return;const i=e.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||e.dispatch(ZT({reason:i.reason})))},S5=fT;var E5=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:i,announce:o,autoScroller:l})=>hT(RR,S5(xC(JR(n),y5(e),XR(e),i5,g5,b5,w5,x5(l),l5,v5(t),p5(i,o))));const gg=()=>({additions:{},removals:{},modified:{}});function T5({registry:e,callbacks:t}){let n=gg(),i=null;const o=()=>{i||(t.collectionStarting(),i=requestAnimationFrame(()=>{i=null;const{additions:m,removals:p,modified:y}=n,_=Object.keys(m).map(T=>e.draggable.getById(T).getDimension(Xn)).sort((T,k)=>T.descriptor.index-k.descriptor.index),x=Object.keys(y).map(T=>{const N=e.droppable.getById(T).callbacks.getScrollWhileDragging();return{droppableId:T,scroll:N}}),S={additions:_,removals:Object.keys(p),modified:x};n=gg(),t.publish(S)}))};return{add:m=>{const p=m.descriptor.id;n.additions[p]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[p]&&delete n.removals[p],o()},remove:m=>{const p=m.descriptor;n.removals[p.id]=!0,n.modified[p.droppableId]=!0,n.additions[p.id]&&delete n.additions[p.id],o()},stop:()=>{i&&(cancelAnimationFrame(i),i=null,n=gg())}}}var JT=({scrollHeight:e,scrollWidth:t,height:n,width:i})=>{const o=ci({x:t,y:e},{x:i,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},QT=()=>{const e=document.documentElement;return e||ze(),e},ek=()=>{const e=QT();return JT({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},k5=()=>{const e=XT(),t=ek(),n=e.y,i=e.x,o=QT(),l=o.clientWidth,u=o.clientHeight,f=i+l,m=n+u;return{frame:is({top:n,left:i,right:f,bottom:m}),scroll:{initial:e,current:e,max:t,diff:{value:Xn,displacement:Xn}}}},A5=({critical:e,scrollOptions:t,registry:n})=>{const i=k5(),o=i.scroll.current,l=e.droppable,u=n.droppable.getAllByType(l.type).map(y=>y.callbacks.getDimensionAndWatchScroll(o,t)),f=n.draggable.getAllByType(e.draggable.type).map(y=>y.getDimension(o));return{dimensions:{draggables:jT(f),droppables:AT(u)},critical:e,viewport:i}};function S1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var j5=(e,t)=>{let n=null;const i=T5({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(x,S)=>{e.droppable.exists(x)||ze(),n&&t.updateDroppableIsEnabled({id:x,isEnabled:S})},l=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:S}))},u=(x,S)=>{n&&(e.droppable.exists(x)||ze(),t.updateDroppableScroll({id:x,newScroll:S}))},f=(x,S)=>{n&&e.droppable.getById(x).callbacks.scroll(S)},m=()=>{if(!n)return;i.stop();const x=n.critical.droppable;e.droppable.getAllByType(x.type).forEach(S=>S.callbacks.dragStopped()),n.unsubscribe(),n=null},p=x=>{n||ze();const S=n.critical.draggable;x.type==="ADDITION"&&S1(e,S,x.value)&&i.add(x.value),x.type==="REMOVAL"&&S1(e,S,x.value)&&i.remove(x.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:l,scrollDroppable:f,updateDroppableScroll:u,startPublishing:x=>{n&&ze();const S=e.draggable.getById(x.draggableId),T=e.droppable.getById(S.descriptor.droppableId),k={draggable:S.descriptor,droppable:T.descriptor},N=e.subscribe(p);return n={critical:k,unsubscribe:N},A5({critical:k,registry:e,scrollOptions:x.scrollOptions})},stopPublishing:m}},tk=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",N5=e=>{window.scrollBy(e.x,e.y)};const O5=Kn(e=>Lm(e).filter(t=>!(!t.isEnabled||!t.frame))),D5=(e,t)=>O5(t).find(i=>(i.frame||ze(),$T(i.frame.pageMarginBox)(e)))||null;var M5=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return D5(e,n)};const od={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var C5=(e,t,n=()=>od)=>{const i=n(),o=e[t.size]*i.startFromPercentage,l=e[t.size]*i.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:l}},nk=({startOfRange:e,endOfRange:t,current:n})=>{const i=t-e;return i===0?0:(n-e)/i},wy=1,R5=(e,t,n=()=>od)=>{const i=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return i.maxPixelScroll;if(e===t.startScrollingFrom)return wy;const l=1-nk({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),u=i.maxPixelScroll*i.ease(l);return Math.ceil(u)},L5=(e,t,n)=>{const i=n(),o=i.durationDampening.accelerateAt,l=i.durationDampening.stopDampeningAt,u=t,f=l,p=Date.now()-u;if(p>=l)return e;if(p<o)return wy;const y=nk({startOfRange:o,endOfRange:f,current:p}),_=e*i.ease(y);return Math.ceil(_)},E1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=R5(e,t,o);return l===0?0:i?Math.max(L5(l,n,o),wy):l},T1=({container:e,distanceToEdges:t,dragStartTime:n,axis:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=C5(e,i,l);return t[i.end]<t[i.start]?E1({distanceToEdge:t[i.end],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l}):-1*E1({distanceToEdge:t[i.start],thresholds:u,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l})},B5=({container:e,subject:t,proposedScroll:n})=>{const i=t.height>e.height,o=t.width>e.width;return!o&&!i?n:o&&i?null:{x:o?0:n.x,y:i?0:n.y}};const P5=kT(e=>e===0?0:e);var rk=({dragStartTime:e,container:t,subject:n,center:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u={top:i.y-t.top,right:t.right-i.x,bottom:t.bottom-i.y,left:i.x-t.left},f=T1({container:t,distanceToEdges:u,dragStartTime:e,axis:my,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),m=T1({container:t,distanceToEdges:u,dragStartTime:e,axis:DT,shouldUseTimeDampening:o,getAutoScrollerOptions:l}),p=P5({x:m,y:f});if(Va(p,Xn))return null;const y=B5({container:t,subject:n,proposedScroll:p});return y?Va(y,Xn)?null:y:null};const $5=kT(e=>e===0?0:e>0?1:-1),Sy=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:i})=>{const o=or(t,i),l={x:e(o.x,n.x),y:e(o.y,n.y)};return Va(l,Xn)?null:l}})(),ik=({max:e,current:t,change:n})=>{const i={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=$5(n),l=Sy({max:i,current:t,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},Ey=(e,t)=>ik({current:e.scroll.current,max:e.scroll.max,change:t}),I5=(e,t)=>{if(!Ey(e,t))return null;const n=e.scroll.max,i=e.scroll.current;return Sy({current:i,max:n,change:t})},Ty=(e,t)=>{const n=e.frame;return n?ik({current:n.scroll.current,max:n.scroll.max,change:t}):!1},z5=(e,t)=>{const n=e.frame;return!n||!Ty(e,t)?null:Sy({current:n.scroll.current,max:n.scroll.max,change:t})};var U5=({viewport:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=rk({dragStartTime:i,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return u&&Ey(e,u)?u:null},H5=({droppable:e,subject:t,center:n,dragStartTime:i,shouldUseTimeDampening:o,getAutoScrollerOptions:l})=>{const u=e.frame;if(!u)return null;const f=rk({dragStartTime:i,container:u.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:l});return f&&Ty(e,f)?f:null},k1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:i,scrollDroppable:o,getAutoScrollerOptions:l})=>{const u=e.current.page.borderBoxCenter,m=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const _=e.viewport,x=U5({dragStartTime:t,viewport:_,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});if(x){i(x);return}}const p=M5({center:u,destination:ui(e.impact),droppables:e.dimensions.droppables});if(!p)return;const y=H5({dragStartTime:t,droppable:p,subject:m,center:u,shouldUseTimeDampening:n,getAutoScrollerOptions:l});y&&o(p.descriptor.id,y)},G5=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>od})=>{const i=nd(e),o=nd(t);let l=null;const u=p=>{l||ze();const{shouldUseTimeDampening:y,dragStartTime:_}=l;k1({state:p,scrollWindow:i,scrollDroppable:o,dragStartTime:_,shouldUseTimeDampening:y,getAutoScrollerOptions:n})};return{start:p=>{l&&ze();const y=Date.now();let _=!1;const x=()=>{_=!0};k1({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:n}),l={dragStartTime:y,shouldUseTimeDampening:_},_&&u(p)},stop:()=>{l&&(i.cancel(),o.cancel(),l=null)},scroll:u}},F5=({move:e,scrollDroppable:t,scrollWindow:n})=>{const i=(f,m)=>{const p=or(f.current.client.selection,m);e({client:p})},o=(f,m)=>{if(!Ty(f,m))return m;const p=z5(f,m);if(!p)return t(f.descriptor.id,m),null;const y=ci(m,p);return t(f.descriptor.id,y),ci(m,y)},l=(f,m,p)=>{if(!f||!Ey(m,p))return p;const y=I5(m,p);if(!y)return n(p),null;const _=ci(p,y);return n(_),ci(p,_)};return f=>{const m=f.scrollJumpRequest;if(!m)return;const p=ui(f.impact);p||ze();const y=o(f.dimensions.droppables[p],m);if(!y)return;const _=f.viewport,x=l(f.isWindowScrollAllowed,_,y);x&&i(f,x)}},Y5=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:i})=>{const o=G5({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:i}),l=F5({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:m=>{if(!(i().disabled||m.phase!=="DRAGGING")){if(m.movementMode==="FLUID"){o.scroll(m);return}m.scrollJumpRequest&&l(m)}},start:o.start,stop:o.stop}};const xc="data-rfd",wc=(()=>{const e=`${xc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Cb=(()=>{const e=`${xc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),q5=(()=>{const e=`${xc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),A1={contextId:`${xc}-scroll-container-context-id`},Z5=e=>t=>`[${t}="${e}"]`,Ru=(e,t)=>e.map(n=>{const i=n.styles[t];return i?`${n.selector} { ${i} }`:""}).join(" "),V5="pointer-events: none;";var K5=e=>{const t=Z5(e),n=(()=>{const f=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(wc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:f,dragging:V5,dropAnimating:f}}})(),i=(()=>{const f=`
      transition: ${Xu.outOfTheWay};
    `;return{selector:t(Cb.contextId),styles:{dragging:f,dropAnimating:f,userCancel:f}}})(),o={selector:t(q5.contextId),styles:{always:"overflow-anchor: none;"}},u=[i,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ru(u,"always"),resting:Ru(u,"resting"),dragging:Ru(u,"dragging"),dropAnimating:Ru(u,"dropAnimating"),userCancel:Ru(u,"userCancel")}};const di=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?R.useLayoutEffect:R.useEffect,bg=()=>{const e=document.querySelector("head");return e||ze(),e},j1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function W5(e,t){const n=kt(()=>K5(e),[e]),i=R.useRef(null),o=R.useRef(null),l=Je(Kn(_=>{const x=o.current;x||ze(),x.textContent=_}),[]),u=Je(_=>{const x=i.current;x||ze(),x.textContent=_},[]);di(()=>{!i.current&&!o.current||ze();const _=j1(t),x=j1(t);return i.current=_,o.current=x,_.setAttribute(`${xc}-always`,e),x.setAttribute(`${xc}-dynamic`,e),bg().appendChild(_),bg().appendChild(x),u(n.always),l(n.resting),()=>{const S=T=>{const k=T.current;k||ze(),bg().removeChild(k),T.current=null};S(i),S(o)}},[t,u,l,n.always,n.resting,e]);const f=Je(()=>l(n.dragging),[l,n.dragging]),m=Je(_=>{if(_==="DROP"){l(n.dropAnimating);return}l(n.userCancel)},[l,n.dropAnimating,n.userCancel]),p=Je(()=>{o.current&&l(n.resting)},[l,n.resting]);return kt(()=>({dragging:f,dropping:m,resting:p}),[f,m,p])}function sk(e,t){return Array.from(e.querySelectorAll(t))}var ak=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Im(e){return e instanceof ak(e).HTMLElement}function X5(e,t){const n=`[${wc.contextId}="${e}"]`,i=sk(document,n);if(!i.length)return null;const o=i.find(l=>l.getAttribute(wc.draggableId)===t);return!o||!Im(o)?null:o}function J5(e){const t=R.useRef({}),n=R.useRef(null),i=R.useRef(null),o=R.useRef(!1),l=Je(function(x,S){const T={id:x,focus:S};return t.current[x]=T,function(){const N=t.current;N[x]!==T&&delete N[x]}},[]),u=Je(function(x){const S=X5(e,x);S&&S!==document.activeElement&&S.focus()},[e]),f=Je(function(x,S){n.current===x&&(n.current=S)},[]),m=Je(function(){i.current||o.current&&(i.current=requestAnimationFrame(()=>{i.current=null;const x=n.current;x&&u(x)}))},[u]),p=Je(function(x){n.current=null;const S=document.activeElement;S&&S.getAttribute(wc.draggableId)===x&&(n.current=x)},[]);return di(()=>(o.current=!0,function(){o.current=!1;const x=i.current;x&&cancelAnimationFrame(x)}),[]),kt(()=>({register:l,tryRecordFocus:p,tryRestoreFocusRecorded:m,tryShiftRecord:f}),[l,p,m,f])}function Q5(){const e={draggables:{},droppables:{}},t=[];function n(_){return t.push(_),function(){const S=t.indexOf(_);S!==-1&&t.splice(S,1)}}function i(_){t.length&&t.forEach(x=>x(_))}function o(_){return e.draggables[_]||null}function l(_){const x=o(_);return x||ze(),x}const u={register:_=>{e.draggables[_.descriptor.id]=_,i({type:"ADDITION",value:_})},update:(_,x)=>{const S=e.draggables[x.descriptor.id];S&&S.uniqueId===_.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[_.descriptor.id]=_)},unregister:_=>{const x=_.descriptor.id,S=o(x);S&&_.uniqueId===S.uniqueId&&(delete e.draggables[x],e.droppables[_.descriptor.droppableId]&&i({type:"REMOVAL",value:_}))},getById:l,findById:o,exists:_=>!!o(_),getAllByType:_=>Object.values(e.draggables).filter(x=>x.descriptor.type===_)};function f(_){return e.droppables[_]||null}function m(_){const x=f(_);return x||ze(),x}const p={register:_=>{e.droppables[_.descriptor.id]=_},unregister:_=>{const x=f(_.descriptor.id);x&&_.uniqueId===x.uniqueId&&delete e.droppables[_.descriptor.id]},getById:m,findById:f,exists:_=>!!f(_),getAllByType:_=>Object.values(e.droppables).filter(x=>x.descriptor.type===_)};function y(){e.draggables={},e.droppables={},t.length=0}return{draggable:u,droppable:p,subscribe:n,clean:y}}function eL(){const e=kt(Q5,[]);return R.useEffect(()=>function(){e.clean()},[e]),e}var ky=rn.createContext(null),hm=()=>{const e=document.body;return e||ze(),e};const tL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},nL=e=>`rfd-announcement-${e}`;function rL(e){const t=kt(()=>nL(e),[e]),n=R.useRef(null);return R.useEffect(function(){const l=document.createElement("div");return n.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),lm(l.style,tL),hm().appendChild(l),function(){setTimeout(function(){const m=hm();m.contains(l)&&m.removeChild(l),l===n.current&&(n.current=null)})}},[t]),Je(o=>{const l=n.current;if(l){l.textContent=o;return}},[])}const iL={separator:"::"};function Ay(e,t=iL){const n=rn.useId();return kt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function sL({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function aL({contextId:e,text:t}){const n=Ay("hidden-text",{separator:"-"}),i=kt(()=>sL({contextId:e,uniqueId:n}),[n,e]);return R.useEffect(function(){const l=document.createElement("div");return l.id=i,l.textContent=t,l.style.display="none",hm().appendChild(l),function(){const f=hm();f.contains(l)&&f.removeChild(l)}},[i,t]),i}var zm=rn.createContext(null);function ok(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),t}function oL(){let e=null;function t(){return!!e}function n(u){return u===e}function i(u){e&&ze();const f={abandon:u};return e=f,f}function o(){e||ze(),e=null}function l(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:i,release:o,tryAbandon:l}}function ld(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const lL=9,cL=13,jy=27,lk=32,uL=33,dL=34,hL=35,fL=36,mL=37,pL=38,gL=39,bL=40,yL={[cL]:!0,[lL]:!0};var ck=e=>{yL[e.keyCode]&&e.preventDefault()};const Um=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(i=>`on${i}`in document)||e})(),uk=0,N1=5;function vL(e,t){return Math.abs(t.x-e.x)>=N1||Math.abs(t.y-e.y)>=N1}const O1={type:"IDLE"};function _L({cancel:e,completed:t,getPhase:n,setPhase:i}){return[{eventName:"mousemove",fn:o=>{const{button:l,clientX:u,clientY:f}=o;if(l!==uk)return;const m={x:u,y:f},p=n();if(p.type==="DRAGGING"){o.preventDefault(),p.actions.move(m);return}p.type!=="PENDING"&&ze();const y=p.point;if(!vL(y,m))return;o.preventDefault();const _=p.actions.fluidLift(m);i({type:"DRAGGING",actions:_})}},{eventName:"mouseup",fn:o=>{const l=n();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===jy){o.preventDefault(),e();return}ck(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const l=n();if(l.type==="IDLE"&&ze(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Um,fn:e}]}function xL(e){const t=R.useRef(O1),n=R.useRef(Za),i=kt(()=>({eventName:"mousedown",fn:function(_){if(_.defaultPrevented||_.button!==uk||_.ctrlKey||_.metaKey||_.shiftKey||_.altKey)return;const x=e.findClosestDraggableId(_);if(!x)return;const S=e.tryGetLock(x,u,{sourceEvent:_});if(!S)return;_.preventDefault();const T={x:_.clientX,y:_.clientY};n.current(),p(S,T)}}),[e]),o=kt(()=>({eventName:"webkitmouseforcewillbegin",fn:y=>{if(y.defaultPrevented)return;const _=e.findClosestDraggableId(y);if(!_)return;const x=e.findOptionsForDraggable(_);x&&(x.shouldRespectForcePress||e.canGetLock(_)&&y.preventDefault())}}),[e]),l=Je(function(){const _={passive:!1,capture:!0};n.current=Mi(window,[o,i],_)},[o,i]),u=Je(()=>{t.current.type!=="IDLE"&&(t.current=O1,n.current(),l())},[l]),f=Je(()=>{const y=t.current;u(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[u]),m=Je(function(){const _={capture:!0,passive:!1},x=_L({cancel:f,completed:u,getPhase:()=>t.current,setPhase:S=>{t.current=S}});n.current=Mi(window,x,_)},[f,u]),p=Je(function(_,x){t.current.type!=="IDLE"&&ze(),t.current={type:"PENDING",point:x,actions:_},m()},[m]);di(function(){return l(),function(){n.current()}},[l])}function wL(){}const SL={[dL]:!0,[uL]:!0,[fL]:!0,[hL]:!0};function EL(e,t){function n(){t(),e.cancel()}function i(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===jy){o.preventDefault(),n();return}if(o.keyCode===lk){o.preventDefault(),i();return}if(o.keyCode===bL){o.preventDefault(),e.moveDown();return}if(o.keyCode===pL){o.preventDefault(),e.moveUp();return}if(o.keyCode===gL){o.preventDefault(),e.moveRight();return}if(o.keyCode===mL){o.preventDefault(),e.moveLeft();return}if(SL[o.keyCode]){o.preventDefault();return}ck(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Um,fn:n}]}function TL(e){const t=R.useRef(wL),n=kt(()=>({eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==lk)return;const u=e.findClosestDraggableId(l);if(!u)return;const f=e.tryGetLock(u,y,{sourceEvent:l});if(!f)return;l.preventDefault();let m=!0;const p=f.snapLift();t.current();function y(){m||ze(),m=!1,t.current(),i()}t.current=Mi(window,EL(p,y),{capture:!0,passive:!1})}}),[e]),i=Je(function(){const l={passive:!1,capture:!0};t.current=Mi(window,[n],l)},[n]);di(function(){return i(),function(){t.current()}},[i])}const yg={type:"IDLE"},kL=120,AL=.15;function jL({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===jy&&n.preventDefault(),e()}},{eventName:Um,fn:e}]}function NL({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:l,clientY:u}=i.touches[0],f={x:l,y:u};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:i=>{const o=n();if(o.type!=="DRAGGING"){e();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:i=>{if(n().type!=="DRAGGING"){e();return}i.preventDefault(),e()}},{eventName:"touchforcechange",fn:i=>{const o=n();o.type==="IDLE"&&ze();const l=i.touches[0];if(!l||!(l.force>=AL))return;const f=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){f&&e();return}if(f){if(o.hasMoved){i.preventDefault();return}e();return}i.preventDefault()}},{eventName:Um,fn:e}]}function OL(e){const t=R.useRef(yg),n=R.useRef(Za),i=Je(function(){return t.current},[]),o=Je(function(S){t.current=S},[]),l=kt(()=>({eventName:"touchstart",fn:function(S){if(S.defaultPrevented)return;const T=e.findClosestDraggableId(S);if(!T)return;const k=e.tryGetLock(T,f,{sourceEvent:S});if(!k)return;const N=S.touches[0],{clientX:C,clientY:$}=N,A={x:C,y:$};n.current(),_(k,A)}}),[e]),u=Je(function(){const S={capture:!0,passive:!1};n.current=Mi(window,[l],S)},[l]),f=Je(()=>{const x=t.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),o(yg),n.current(),u())},[u,o]),m=Je(()=>{const x=t.current;f(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[f]),p=Je(function(){const S={capture:!0,passive:!1},T={cancel:m,completed:f,getPhase:i},k=Mi(window,NL(T),S),N=Mi(window,jL(T),S);n.current=function(){k(),N()}},[m,i,f]),y=Je(function(){const S=i();S.type!=="PENDING"&&ze();const T=S.actions.fluidLift(S.point);o({type:"DRAGGING",actions:T,hasMoved:!1})},[i,o]),_=Je(function(S,T){i().type!=="IDLE"&&ze();const k=setTimeout(y,kL);o({type:"PENDING",point:T,actions:S,longPressTimerId:k}),p()},[p,i,o,y]);di(function(){return u(),function(){n.current();const T=i();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),o(yg))}},[i,u,o]),di(function(){return Mi(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const DL=["input","button","textarea","select","option","optgroup","video","audio"];function dk(e,t){if(t==null)return!1;if(DL.includes(t.tagName.toLowerCase()))return!0;const i=t.getAttribute("contenteditable");return i==="true"||i===""?!0:t===e?!1:dk(e,t.parentElement)}function ML(e,t){const n=t.target;return Im(n)?dk(e,n):!1}var CL=e=>is(e.getBoundingClientRect()).center;function RL(e){return e instanceof ak(e).Element}const LL=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(i=>i in Element.prototype)||e})();function hk(e,t){return e==null?null:e[LL](t)?e:hk(e.parentElement,t)}function BL(e,t){return e.closest?e.closest(t):hk(e,t)}function PL(e){return`[${wc.contextId}="${e}"]`}function $L(e,t){const n=t.target;if(!RL(n))return null;const i=PL(e),o=BL(n,i);return!o||!Im(o)?null:o}function IL(e,t){const n=$L(e,t);return n?n.getAttribute(wc.draggableId):null}function zL(e,t){const n=`[${Cb.contextId}="${e}"]`,o=sk(document,n).find(l=>l.getAttribute(Cb.id)===t);return!o||!Im(o)?null:o}function UL(e){e.preventDefault()}function rf({expected:e,phase:t,isLockActive:n,shouldWarn:i}){return!(!n()||e!==t)}function fk({lockAPI:e,store:t,registry:n,draggableId:i}){if(e.isClaimed())return!1;const o=n.draggable.findById(i);return!(!o||!o.options.isEnabled||!tk(t.getState(),i))}function HL({lockAPI:e,contextId:t,store:n,registry:i,draggableId:o,forceSensorStop:l,sourceEvent:u}){if(!fk({lockAPI:e,store:n,registry:i,draggableId:o}))return null;const m=i.draggable.getById(o),p=zL(t,m.descriptor.id);if(!p||u&&!m.options.canDragInteractiveElements&&ML(p,u))return null;const y=e.claim(l||Za);let _="PRE_DRAG";function x(){return m.options.shouldRespectForcePress}function S(){return e.isActive(y)}function T(M,G){rf({expected:M,phase:_,isLockActive:S,shouldWarn:!0})&&n.dispatch(G())}const k=T.bind(null,"DRAGGING");function N(M){function G(){e.release(),_="COMPLETED"}_!=="PRE_DRAG"&&(G(),ze()),n.dispatch(BR(M.liftActionArgs)),_="DRAGGING";function H(F,K={shouldBlockNextClick:!1}){if(M.cleanup(),K.shouldBlockNextClick){const ae=Mi(window,[{eventName:"click",fn:UL,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ae)}G(),n.dispatch(ZT({reason:F}))}return{isActive:()=>rf({expected:"DRAGGING",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,drop:F=>H("DROP",F),cancel:F=>H("CANCEL",F),...M.actions}}function C(M){const G=nd(F=>{k(()=>qT({client:F}))});return{...N({liftActionArgs:{id:o,clientSelection:M,movementMode:"FLUID"},cleanup:()=>G.cancel(),actions:{move:G}}),move:G}}function $(){const M={moveUp:()=>k(YR),moveRight:()=>k(ZR),moveDown:()=>k(qR),moveLeft:()=>k(VR)};return N({liftActionArgs:{id:o,clientSelection:CL(p),movementMode:"SNAP"},cleanup:Za,actions:M})}function A(){rf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!0})&&e.release()}return{isActive:()=>rf({expected:"PRE_DRAG",phase:_,isLockActive:S,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:C,snapLift:$,abort:A}}const GL=[xL,TL,OL];function FL({contextId:e,store:t,registry:n,customSensors:i,enableDefaultSensors:o}){const l=[...o?GL:[],...i||[]],u=R.useState(()=>oL())[0],f=Je(function(N,C){ld(N)&&!ld(C)&&u.tryAbandon()},[u]);di(function(){let N=t.getState();return t.subscribe(()=>{const $=t.getState();f(N,$),N=$})},[u,t,f]),di(()=>u.tryAbandon,[u.tryAbandon]);const m=Je(k=>fk({lockAPI:u,registry:n,store:t,draggableId:k}),[u,n,t]),p=Je((k,N,C)=>HL({lockAPI:u,registry:n,contextId:e,store:t,draggableId:k,forceSensorStop:N||null,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null}),[e,u,n,t]),y=Je(k=>IL(e,k),[e]),_=Je(k=>{const N=n.draggable.findById(k);return N?N.options:null},[n.draggable]),x=Je(function(){u.isClaimed()&&(u.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(vy()))},[u,t]),S=Je(()=>u.isClaimed(),[u]),T=kt(()=>({canGetLock:m,tryGetLock:p,findClosestDraggableId:y,findOptionsForDraggable:_,tryReleaseLock:x,isLockClaimed:S}),[m,p,y,_,x,S]);for(let k=0;k<l.length;k++)l[k](T)}const YL=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Rm.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),qL=e=>({...od,...e.autoScrollerOptions,durationDampening:{...od.durationDampening,...e.autoScrollerOptions}});function Lu(e){return e.current||ze(),e.current}function ZL(e){const{contextId:t,setCallbacks:n,sensors:i,nonce:o,dragHandleUsageInstructions:l}=e,u=R.useRef(null),f=ok(e),m=Je(()=>YL(f.current),[f]),p=Je(()=>qL(f.current),[f]),y=rL(t),_=aL({contextId:t,text:l}),x=W5(t,o),S=Je(ae=>{Lu(u).dispatch(ae)},[]),T=kt(()=>n1({publishWhileDragging:$R,updateDroppableScroll:zR,updateDroppableIsEnabled:UR,updateDroppableIsCombineEnabled:HR,collectionStarting:IR},S),[S]),k=eL(),N=kt(()=>j5(k,T),[k,T]),C=kt(()=>Y5({scrollWindow:N5,scrollDroppable:N.scrollDroppable,getAutoScrollerOptions:p,...n1({move:qT},S)}),[N.scrollDroppable,S,p]),$=J5(t),A=kt(()=>E5({announce:y,autoScroller:C,dimensionMarshal:N,focusMarshal:$,getResponders:m,styleMarshal:x}),[y,C,N,$,m,x]);u.current=A;const D=Je(()=>{const ae=Lu(u);ae.getState().phase!=="IDLE"&&ae.dispatch(vy())},[]),M=Je(()=>{const ae=Lu(u).getState();return ae.phase==="DROP_ANIMATING"?!0:ae.phase==="IDLE"?!1:ae.isDragging},[]),G=kt(()=>({isDragging:M,tryAbort:D}),[M,D]);n(G);const H=Je(ae=>tk(Lu(u).getState(),ae),[]),F=Je(()=>Qo(Lu(u).getState()),[]),K=kt(()=>({marshal:N,focus:$,contextId:t,canLift:H,isMovementAllowed:F,dragHandleUsageInstructionsId:_,registry:k}),[t,N,_,$,H,F,k]);return FL({contextId:t,store:A,registry:k,customSensors:i||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),R.useEffect(()=>D,[D]),rn.createElement(zm.Provider,{value:K},rn.createElement(y3,{context:ky,store:A},e.children))}function VL(){return rn.useId()}function wd(e){const t=VL(),n=e.dragHandleUsageInstructions||Ff.dragHandleUsageInstructions;return rn.createElement(T3,null,i=>rn.createElement(ZL,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const D1={dragging:5e3,dropAnimating:4500},KL=(e,t)=>t?Xu.drop(t.duration):e?Xu.snap:Xu.fluid,WL=(e,t)=>{if(e)return t?ad.opacity.drop:ad.opacity.combining},XL=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function JL(e){const n=e.dimension.client,{offset:i,combineWith:o,dropping:l}=e,u=!!o,f=XL(e),m=!!l,p=m?Db.drop(i,u):Db.moveTo(i);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:KL(f,l),transform:p,opacity:WL(u,m),zIndex:m?D1.dropAnimating:D1.dragging,pointerEvents:"none"}}function QL(e){return{transform:Db.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function eB(e){return e.type==="DRAGGING"?JL(e):QL(e)}function tB(e,t,n=Xn){const i=window.getComputedStyle(t),o=t.getBoundingClientRect(),l=_T(o,i),u=om(l,n),f={client:l,tagName:t.tagName.toLowerCase(),display:i.display},m={x:l.marginBox.width,y:l.marginBox.height};return{descriptor:e,placeholder:f,displaceBy:m,client:l,page:u}}function nB(e){const t=Ay("draggable"),{descriptor:n,registry:i,getDraggableRef:o,canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}=e,m=kt(()=>({canDragInteractiveElements:l,shouldRespectForcePress:u,isEnabled:f}),[l,f,u]),p=Je(S=>{const T=o();return T||ze(),tB(n,T,S)},[n,o]),y=kt(()=>({uniqueId:t,descriptor:n,options:m,getDimension:p}),[n,p,m,t]),_=R.useRef(y),x=R.useRef(!0);di(()=>(i.draggable.register(_.current),()=>i.draggable.unregister(_.current)),[i.draggable]),di(()=>{if(x.current){x.current=!1;return}const S=_.current;_.current=y,i.draggable.update(y,S)},[y,i.draggable])}var Ny=rn.createContext(null);function fm(e){const t=R.useContext(e);return t||ze(),t}function rB(e){e.preventDefault()}const iB=e=>{const t=R.useRef(null),n=Je((G=null)=>{t.current=G},[]),i=Je(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:l,registry:u}=fm(zm),{type:f,droppableId:m}=fm(Ny),p=kt(()=>({id:e.draggableId,index:e.index,type:f,droppableId:m}),[e.draggableId,e.index,f,m]),{children:y,draggableId:_,isEnabled:x,shouldRespectForcePress:S,canDragInteractiveElements:T,isClone:k,mapped:N,dropAnimationFinished:C}=e;if(!k){const G=kt(()=>({descriptor:p,registry:u,getDraggableRef:i,canDragInteractiveElements:T,shouldRespectForcePress:S,isEnabled:x}),[p,u,i,T,S,x]);nB(G)}const $=kt(()=>x?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":_,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:rB}:null,[o,l,_,x]),A=Je(G=>{N.type==="DRAGGING"&&N.dropping&&G.propertyName==="transform"&&Rm.flushSync(C)},[C,N]),D=kt(()=>{const G=eB(N),H=N.type==="DRAGGING"&&N.dropping?A:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":_,style:G,onTransitionEnd:H},dragHandleProps:$}},[o,$,_,N,A,n]),M=kt(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return rn.createElement(rn.Fragment,null,y(D,N.snapshot,M))};var mk=(e,t)=>e===t,pk=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const sB=e=>e.combine?e.combine.draggableId:null,aB=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function oB(){const e=Kn((o,l)=>({x:o,y:l})),t=Kn((o,l,u=null,f=null,m=null)=>({isDragging:!0,isClone:l,isDropAnimating:!!m,dropAnimation:m,mode:o,draggingOver:u,combineWith:f,combineTargetFor:null})),n=Kn((o,l,u,f,m=null,p=null,y=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:m,combineWith:p,mode:l,offset:o,dimension:u,forceShouldAnimate:y,snapshot:t(l,f,m,p,null)}}));return(o,l)=>{if(ld(o)){if(o.critical.draggable.id!==l.draggableId)return null;const u=o.current.client.offset,f=o.dimensions.draggables[l.draggableId],m=ui(o.impact),p=aB(o.impact),y=o.forceShouldAnimate;return n(e(u.x,u.y),o.movementMode,f,l.isClone,m,p,y)}if(o.phase==="DROP_ANIMATING"){const u=o.completed;if(u.result.draggableId!==l.draggableId)return null;const f=l.isClone,m=o.dimensions.draggables[l.draggableId],p=u.result,y=p.mode,_=pk(p),x=sB(p),T={duration:o.dropDuration,curve:xy.drop,moveTo:o.newHomeClientOffset,opacity:x?ad.opacity.drop:null,scale:x?ad.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:m,dropping:T,draggingOver:_,combineWith:x,mode:y,forceShouldAnimate:null,snapshot:t(y,f,_,x,T)}}}return null}}function gk(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const lB={mapped:{type:"SECONDARY",offset:Xn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:gk(null)}};function cB(){const e=Kn((u,f)=>({x:u,y:f})),t=Kn(gk),n=Kn((u,f=null,m)=>({mapped:{type:"SECONDARY",offset:u,combineTargetFor:f,shouldAnimateDisplacement:m,snapshot:t(f)}})),i=u=>u?n(Xn,u,!0):null,o=(u,f,m,p)=>{const y=m.displaced.visible[u],_=!!(p.inVirtualList&&p.effected[u]),x=Bm(m),S=x&&x.draggableId===u?f:null;if(!y){if(!_)return i(S);if(m.displaced.invisible[u])return null;const N=jc(p.displacedBy.point),C=e(N.x,N.y);return n(C,S,!0)}if(_)return i(S);const T=m.displacedBy.point,k=e(T.x,T.y);return n(k,S,y.shouldAnimate)};return(u,f)=>{if(ld(u))return u.critical.draggable.id===f.draggableId?null:o(f.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){const m=u.completed;return m.result.draggableId===f.draggableId?null:o(f.draggableId,m.result.draggableId,m.impact,m.afterCritical)}return null}}const uB=()=>{const e=oB(),t=cB();return(i,o)=>e(i,o)||t(i,o)||lB},dB={dropAnimationFinished:VT},hB=vT(uB,dB,null,{context:ky,areStatePropsEqual:mk})(iB);function bk(e){return fm(Ny).isUsingCloneFor===e.draggableId&&!e.isClone?null:rn.createElement(hB,e)}function Sc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,i=!!e.shouldRespectForcePress;return rn.createElement(bk,lm({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}const yk=e=>t=>e===t,fB=yk("scroll"),mB=yk("auto"),M1=(e,t)=>t(e.overflowX)||t(e.overflowY),pB=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return M1(n,fB)||M1(n,mB)},gB=()=>!1,vk=e=>e==null?null:e===document.body?gB()?e:null:e===document.documentElement?null:pB(e)?e:vk(e.parentElement);var Rb=e=>({x:e.scrollLeft,y:e.scrollTop});const _k=e=>e?window.getComputedStyle(e).position==="fixed"?!0:_k(e.parentElement):!1;var bB=e=>{const t=vk(e),n=_k(e);return{closestScrollable:t,isFixedOnPage:n}},yB=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:i,direction:o,client:l,page:u,closest:f})=>{const m=(()=>{if(!f)return null;const{scrollSize:x,client:S}=f,T=JT({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:S.paddingBox.height,width:S.paddingBox.width});return{pageMarginBox:f.page.marginBox,frameClient:S,scrollSize:x,shouldClipSubject:f.shouldClipSubject,scroll:{initial:f.scroll,current:f.scroll,max:T,diff:{value:Xn,displacement:Xn}}}})(),p=o==="vertical"?my:DT,y=_c({page:u,withPlaceholder:null,axis:p,frame:m});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:i,axis:p,isEnabled:t,client:l,page:u,frame:m,subject:y}};const vB=(e,t)=>{const n=xT(e);if(!t||e!==t)return n;const i=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,l=i+t.scrollHeight,u=o+t.scrollWidth,m=uy({top:i,right:u,bottom:l,left:o},n.border);return dy({borderBox:m,margin:n.margin,border:n.border,padding:n.padding})};var _B=({ref:e,descriptor:t,env:n,windowScroll:i,direction:o,isDropDisabled:l,isCombineEnabled:u,shouldClipSubject:f})=>{const m=n.closestScrollable,p=vB(e,m),y=om(p,i),_=(()=>{if(!m)return null;const S=xT(m),T={scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};return{client:S,page:om(S,i),scroll:Rb(m),scrollSize:T,shouldClipSubject:f}})();return yB({descriptor:t,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:n.isFixedOnPage,direction:o,client:p,page:y,closest:_})};const xB={passive:!1},wB={passive:!0};var C1=e=>e.shouldPublishImmediately?xB:wB;const sf=e=>e&&e.env.closestScrollable||null;function SB(e){const t=R.useRef(null),n=fm(zm),i=Ay("droppable"),{registry:o,marshal:l}=n,u=ok(e),f=kt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),m=R.useRef(f),p=kt(()=>Kn((D,M)=>{t.current||ze();const G={x:D,y:M};l.updateDroppableScroll(f.id,G)}),[f.id,l]),y=Je(()=>{const D=t.current;return!D||!D.env.closestScrollable?Xn:Rb(D.env.closestScrollable)},[]),_=Je(()=>{const D=y();p(D.x,D.y)},[y,p]),x=kt(()=>nd(_),[_]),S=Je(()=>{const D=t.current,M=sf(D);if(D&&M||ze(),D.scrollOptions.shouldPublishImmediately){_();return}x()},[x,_]),T=Je((D,M)=>{t.current&&ze();const G=u.current,H=G.getDroppableRef();H||ze();const F=bB(H),K={ref:H,descriptor:f,env:F,scrollOptions:M};t.current=K;const ae=_B({ref:H,descriptor:f,env:F,windowScroll:D,direction:G.direction,isDropDisabled:G.isDropDisabled,isCombineEnabled:G.isCombineEnabled,shouldClipSubject:!G.ignoreContainerClipping}),Q=F.closestScrollable;return Q&&(Q.setAttribute(A1.contextId,n.contextId),Q.addEventListener("scroll",S,C1(K.scrollOptions))),ae},[n.contextId,f,S,u]),k=Je(()=>{const D=t.current,M=sf(D);return D&&M||ze(),Rb(M)},[]),N=Je(()=>{const D=t.current;D||ze();const M=sf(D);t.current=null,M&&(x.cancel(),M.removeAttribute(A1.contextId),M.removeEventListener("scroll",S,C1(D.scrollOptions)))},[S,x]),C=Je(D=>{const M=t.current;M||ze();const G=sf(M);G||ze(),G.scrollTop+=D.y,G.scrollLeft+=D.x},[]),$=kt(()=>({getDimensionAndWatchScroll:T,getScrollWhileDragging:k,dragStopped:N,scroll:C}),[N,T,k,C]),A=kt(()=>({uniqueId:i,descriptor:f,callbacks:$}),[$,f,i]);di(()=>(m.current=A.descriptor,o.droppable.register(A),()=>{t.current&&N(),o.droppable.unregister(A)}),[$,f,N,A,l,o.droppable]),di(()=>{t.current&&l.updateDroppableIsEnabled(m.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),di(()=>{t.current&&l.updateDroppableIsCombineEnabled(m.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function vg(){}const R1={width:0,height:0,margin:M3},EB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?R1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},TB=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const i=EB({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Xu.placeholder:null}},kB=e=>{const t=R.useRef(null),n=Je(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:i,onTransitionEnd:o,onClose:l,contextId:u}=e,[f,m]=R.useState(e.animate==="open");R.useEffect(()=>f?i!=="open"?(n(),m(!1),vg):t.current?vg:(t.current=setTimeout(()=>{t.current=null,m(!1)}),n):vg,[i,f,n]);const p=Je(_=>{_.propertyName==="height"&&(o(),i==="close"&&l())},[i,l,o]),y=TB({isAnimatingOpenOnMount:f,animate:e.animate,placeholder:e.placeholder});return rn.createElement(e.placeholder.tagName,{style:y,"data-rfd-placeholder-context-id":u,onTransitionEnd:p,ref:e.innerRef})};var AB=rn.memo(kB);class jB extends rn.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const NB=e=>{const t=R.useContext(zm);t||ze();const{contextId:n,isMovementAllowed:i}=t,o=R.useRef(null),l=R.useRef(null),{children:u,droppableId:f,type:m,mode:p,direction:y,ignoreContainerClipping:_,isDropDisabled:x,isCombineEnabled:S,snapshot:T,useClone:k,updateViewportMaxScroll:N,getContainerForClone:C}=e,$=Je(()=>o.current,[]),A=Je((Q=null)=>{o.current=Q},[]);Je(()=>l.current,[]);const D=Je((Q=null)=>{l.current=Q},[]),M=Je(()=>{i()&&N({maxScroll:ek()})},[i,N]);SB({droppableId:f,type:m,mode:p,direction:y,isDropDisabled:x,isCombineEnabled:S,ignoreContainerClipping:_,getDroppableRef:$});const G=kt(()=>rn.createElement(jB,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:Q,data:Y,animate:te})=>rn.createElement(AB,{placeholder:Y,onClose:Q,innerRef:D,animate:te,contextId:n,onTransitionEnd:M})),[n,M,e.placeholder,e.shouldAnimatePlaceholder,D]),H=kt(()=>({innerRef:A,placeholder:G,droppableProps:{"data-rfd-droppable-id":f,"data-rfd-droppable-context-id":n}}),[n,f,G,A]),F=k?k.dragging.draggableId:null,K=kt(()=>({droppableId:f,type:m,isUsingCloneFor:F}),[f,F,m]);function ae(){if(!k)return null;const{dragging:Q,render:Y}=k,te=rn.createElement(bk,{draggableId:Q.draggableId,index:Q.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(re,Se)=>Y(re,Se,Q));return bC.createPortal(te,C())}return rn.createElement(Ny.Provider,{value:K},u(H,T),ae())};function OB(){return document.body||ze(),document.body}const L1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:OB},xk=e=>{let t={...e},n;for(n in L1)e[n]===void 0&&(t={...t,[n]:L1[n]});return t},_g=(e,t)=>e===t.droppable.type,B1=(e,t)=>t.draggables[e.draggable.id],DB=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Kn(l=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}})),i=Kn((l,u,f,m,p,y)=>{const _=p.descriptor.id;if(p.descriptor.droppableId===l){const T=y?{render:y,dragging:n(p.descriptor)}:null,k={isDraggingOver:f,draggingOverWith:f?_:null,draggingFromThisWith:_,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:k,useClone:T}}if(!u)return t;if(!m)return e;const S={isDraggingOver:f,draggingOverWith:_,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}});return(l,u)=>{const f=xk(u),m=f.droppableId,p=f.type,y=!f.isDropDisabled,_=f.renderClone;if(ld(l)){const x=l.critical;if(!_g(p,x))return t;const S=B1(x,l.dimensions),T=ui(l.impact)===m;return i(m,y,T,T,S,_)}if(l.phase==="DROP_ANIMATING"){const x=l.completed;if(!_g(p,x.critical))return t;const S=B1(x.critical,l.dimensions);return i(m,y,pk(x.result)===m,ui(x.impact)===m,S,_)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){const x=l.completed;if(!_g(p,x.critical))return t;const S=ui(x.impact)===m,T=!!(x.impact.at&&x.impact.at.type==="COMBINE"),k=x.critical.droppable.id===m;return S?T?e:t:k?e:t}return t}},MB={updateViewportMaxScroll:FR},il=vT(DB,MB,(e,t,n)=>({...xk(n),...e,...t}),{context:ky,areStatePropsEqual:mk})(NB),CB={1948:{start:new Date(1948,4,1),end:new Date(1948,7,13)},1949:{start:new Date(1949,2,3),end:new Date(1949,7,11)},1950:{start:new Date(1950,2,1),end:new Date(1950,7,10)},1951:{start:new Date(1951,3,6),end:new Date(1951,7,9)},1955:{start:new Date(1955,3,5),end:new Date(1955,7,9)},1956:{start:new Date(1956,3,20),end:new Date(1956,7,30)},1957:{start:new Date(1957,3,5),end:new Date(1957,7,22)},1958:{start:new Date(1958,3,4),end:new Date(1958,7,21)},1959:{start:new Date(1959,3,3),end:new Date(1959,7,20)},1960:{start:new Date(1960,3,1),end:new Date(1960,7,18)},1987:{start:new Date(1987,3,10),end:new Date(1987,8,11)},1988:{start:new Date(1988,3,8),end:new Date(1988,8,9)}};function mm(e,t,n){const i=CB[e];if(!i)return!1;const o=new Date(e,t-1,n,0,0,0,0);return o>=i.start&&o<i.end}function RB(e){if(!isFinite(e.getTime()))return 0;const t=e.getUTCFullYear(),n=Date.UTC(t,0,1),o=Math.floor((e.getTime()-n)/864e5)+1,l=e.getUTCHours(),u=e.getUTCMinutes(),f=e.getUTCSeconds(),m=(l-12)/24+u/1440+f/86400,p=2*Math.PI/365*(o-1+m);return 229.18*(75e-6+.001868*Math.cos(p)-.032077*Math.sin(p)-.014615*Math.cos(2*p)-.040849*Math.sin(2*p))}function LB(e){return e=(e+540)%360-180,e>=124&&e<=132||e>=129&&e<=146?135:e>=73&&e<=135?120:e>=-161&&e<=-154?-150:e>=-170&&e<-161?-165:e>=-150&&e<-141?-135:e>=-141&&e<-126?-120:e>=-126&&e<-111?-105:e>=-111&&e<-96?-90:e>=-96&&e<-81?-75:Math.round(e/15)*15}function cl(e,t,n=!1){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(n)return new Date(i.getTime()-1800*1e3);if(t==null||!isFinite(t))return i;let o=t;Math.abs(o)<=Math.PI+1e-6&&(o=o*180/Math.PI),o=(o+540)%360-180;const l=LB(o),u=4*(o-l),f=RB(i);return new Date(i.getTime()+(u+f)*60*1e3)}var Yf={exports:{}},BB=Yf.exports,P1;function PB(){return P1||(P1=1,(function(e,t){(function(n,i){e.exports=i()})(BB,function(){return(function(n){function i(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,i),u.l=!0,u.exports}var o={};return i.m=n,i.c=o,i.d=function(l,u,f){i.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:f})},i.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(u,"a",u),u},i.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},i.p="",i(i.s=0)})([function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var l=o(1),u=(function(f){return f&&f.__esModule?f:{default:f}})(l);i.default=u.default,n.exports=i.default},function(n,i,o){function l(te){return te&&te.__esModule?te:{default:te}}Object.defineProperty(i,"__esModule",{value:!0});var u=o(2),f=l(u),m=o(3),p=l(m),y=o(4),_=l(y),x=o(5),S=l(x),T=o(6),k=l(T),N=o(7),C=l(N),$=o(8),A=l($),D=o(9),M=l(D),G=o(10),H=l(G),F=o(11),K=l(F),ae=o(12),Q=l(ae),Y={lunarInfo:f.default,solarMonth:p.default,gan:_.default,zhi:S.default,animals:k.default,lunarTerm:C.default,lTermInfo:A.default,nStr1:M.default,nStr2:H.default,nStr3:K.default,nStr4:Q.default,lYearDays:function(te){var re,Se=348;for(re=32768;re>8;re>>=1)Se+=Y.lunarInfo[te-1900]&re?1:0;return Se+Y.leapDays(te)},leapMonth:function(te){return 15&Y.lunarInfo[te-1900]},leapDays:function(te){return Y.leapMonth(te)?65536&Y.lunarInfo[te-1900]?30:29:0},monthDays:function(te,re){return re>12||re<1?-1:Y.lunarInfo[te-1900]&65536>>re?30:29},solarDays:function(te,re){if(re>12||re<1)return-1;var Se=re-1;return Se==1?te%4==0&&te%100!=0||te%400==0?29:28:Y.solarMonth[Se]},toGanZhi:function(te){return Y.gan[te%10]+Y.zhi[te%12]},getTerm:function(te,re){if(te<1900||te>2100||re<1||re>24)return-1;var Se=Y.lTermInfo[te-1900],X=[parseInt("0x"+Se.substr(0,5)).toString(),parseInt("0x"+Se.substr(5,5)).toString(),parseInt("0x"+Se.substr(10,5)).toString(),parseInt("0x"+Se.substr(15,5)).toString(),parseInt("0x"+Se.substr(20,5)).toString(),parseInt("0x"+Se.substr(25,5)).toString()],oe=[X[0].substr(0,1),X[0].substr(1,2),X[0].substr(3,1),X[0].substr(4,2),X[1].substr(0,1),X[1].substr(1,2),X[1].substr(3,1),X[1].substr(4,2),X[2].substr(0,1),X[2].substr(1,2),X[2].substr(3,1),X[2].substr(4,2),X[3].substr(0,1),X[3].substr(1,2),X[3].substr(3,1),X[3].substr(4,2),X[4].substr(0,1),X[4].substr(1,2),X[4].substr(3,1),X[4].substr(4,2),X[5].substr(0,1),X[5].substr(1,2),X[5].substr(3,1),X[5].substr(4,2)];return parseInt(oe[re-1])},toChinaYear:function(te){var re=parseInt(te/1e3),Se=parseInt(te%1e3/100),X=parseInt(te%100/10),oe=te%10;return Y.nStr4[re]+Y.nStr4[Se]+Y.nStr4[X]+Y.nStr4[oe]+""},toChinaMonth:function(te){if(te>12||te<1)return-1;var re=Y.nStr3[te-1];return re+=""},toChinaDay:function(te){var re;switch(te){case 10:re="";break;case 20:re="";break;case 30:re="";break;default:re=Y.nStr2[Math.floor(te/10)],re+=Y.nStr1[te%10]}return re},getAnimal:function(te){return Y.animals[(te-4)%12]},solar2lunar:function(ye,W,U){if(ye<1900||ye>2100||ye==1900&&W==1&&U<31)return-1;if(ye)var X=new Date(ye,parseInt(W)-1,U);else var X=new Date;var oe,me=0,J=0,ye=X.getFullYear(),W=X.getMonth()+1,U=X.getDate(),B=(Date.UTC(X.getFullYear(),X.getMonth(),X.getDate())-Date.UTC(1900,0,31))/864e5;for(oe=1900;oe<2101&&B>0;oe++)J=Y.lYearDays(oe),B-=J;B<0&&(B+=J,oe--);var q=new Date,V=!1;q.getFullYear()==ye&&q.getMonth()+1==W&&q.getDate()==U&&(V=!0);var P=X.getDay(),Z=Y.nStr1[P];P==0&&(P=7);var ie=oe,me=Y.leapMonth(oe),ce=!1;for(oe=1;oe<13&&B>0;oe++)me>0&&oe==me+1&&ce==0?(--oe,ce=!0,J=Y.leapDays(ie)):J=Y.monthDays(ie,oe),ce==1&&oe==me+1&&(ce=!1),B-=J;B==0&&me>0&&oe==me+1&&(ce?ce=!1:(ce=!0,--oe)),B<0&&(B+=J,--oe);var xe=oe,ke=B+1,je=W-1,Me=Y.getTerm(ye,3),Ee=Y.toGanZhi(ye-4),Pe=new Date(ye,1,Me).getTime();new Date(ye,je,U).getTime()<Pe&&(Ee=Y.toGanZhi(ye-5));var Ce=Y.getTerm(ye,2*W-1),Be=Y.getTerm(ye,2*W),Ue=Y.toGanZhi(12*(ye-1900)+W+11);U>=Ce&&(Ue=Y.toGanZhi(12*(ye-1900)+W+12));var fe=!1,Le="";Ce==U&&(fe=!0,Le=Y.lunarTerm[2*W-2]),Be==U&&(fe=!0,Le=Y.lunarTerm[2*W-1]);var le=Date.UTC(ye,je,1,0,0,0,0)/864e5+25567+10,he=Y.toGanZhi(le+U-1);return{lYear:ie,lMonth:xe,lDay:ke,animal:Y.getAnimal(ie),yearCn:Y.toChinaYear(ie),monthCn:(ce&&me===xe?"":"")+Y.toChinaMonth(xe),dayCn:Y.toChinaDay(ke),cYear:ye,cMonth:W,cDay:U,gzYear:Ee,gzMonth:Ue,gzDay:he,isToday:V,isLeap:ce,nWeek:P,ncWeek:""+Z,isTerm:fe,term:Le}},lunar2solar:function(te,re,Se,X){var oe=Y.leapMonth(te);if(Y.leapDays(te),X&&oe!=re||te==2100&&re==12&&Se>1||te==1900&&re==1&&Se<31)return-1;var J=Y.monthDays(te,re);if(te<1900||te>2100||Se>J)return-1;for(var ye=0,W=1900;W<te;W++)ye+=Y.lYearDays(W);for(var U=0,B=!1,W=1;W<re;W++)U=Y.leapMonth(te),B||U<=W&&U>0&&(ye+=Y.leapDays(te),B=!0),ye+=Y.monthDays(te,W);X&&(ye+=J);var q=Date.UTC(1900,1,30,0,0,0),V=new Date(864e5*(ye+Se-31)+q),P=V.getUTCFullYear(),Z=V.getUTCMonth()+1,ie=V.getUTCDate();return Y.solar2lunar(P,Z,ie)}};i.default=Y,n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=[31,28,31,30,31,30,31,31,30,31,30,31],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","","","","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","","",""],n.exports=i.default},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=["","","","","","","","","","",""],n.exports=i.default}])})})(Yf)),Yf.exports}var wk=PB();const $B=ll(wk),Oy=E2({__proto__:null,default:$B},[wk]);function Lb(e){return typeof e=="object"&&e!==null}function IB(e){if(!Lb(e))throw new Error("Invalid lunar2solar result");const t=e,n=t.cYear,i=t.cMonth,o=t.cDay;if(typeof n!="number"||typeof i!="number"||typeof o!="number")throw new Error("Invalid lunar2solar fields");const l=t.isLeap;return{cYear:n,cMonth:i,cDay:o,isLeap:typeof l=="boolean"?l:void 0}}function zB(e){const t=Lb(e)&&"default"in e?e.default:e;if(!Lb(t))throw new Error("solarlunar module invalid");const n=t.lunar2solar;if(typeof n!="function")throw new Error("solarlunar.lunar2solar not found");return(i,o,l)=>IB(n(i,o,l,!1))}const UB=zB(Oy);function Hm(e){const t=e.mingSikType??"/";let n=Number(e.birthDay.slice(0,4)),i=Number(e.birthDay.slice(4,6)),o=Number(e.birthDay.slice(6,8));if(e.calendarType==="lunar"){const $=UB(n,i,o);n=$.cYear,i=$.cMonth,o=$.cDay}const l=!e.birthTime||e.birthTime==="",u=l?4:Number(e.birthTime.slice(0,2)),f=l?30:Number(e.birthTime.slice(2,4)),m=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,p=new Date(n,i-1,o,u,f,0,0),y=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",_=cl(p,m,y),x=l?"":_.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),S=ut(_,m),T=jt(_,m),k=_t(_,t),N=l?null:$i(_,t),C=[` : ${S} ${T} ${k}`,N?`${N}`:null].filter(Boolean).join(" ");return{correctedLocal:x,ganji:C}}function Dy(e){const t=(e??"").trim();return t?t===""||t.toLowerCase()==="female"||t==="2"||t.toUpperCase()==="F"?"":(t===""||t.toLowerCase()==="male"||t==="1"||t.toUpperCase()==="M",""):""}function $1(e){if(!e)return null;const t=e.match(/(|||||||||)(|||||||||||)/);if(t)return t[1];const n=e.split(/\s+/).find(i=>i.endsWith(""));return n&&n.length>0?n.charAt(0):null}function I1(e){const t=Dy(e.gender),n=$1(e.ganjiText)??$1(e.ganji);if(!n)return"forward";const o=["","","","",""].includes(n),l=t==="";return o&&!l||!o&&l?"forward":"backward"}function HB(e){const t=e.dateObj instanceof Date?e.dateObj:e.dateObj?new Date(e.dateObj):new Date,n=e.corrected instanceof Date?e.corrected:e.corrected?new Date(e.corrected):new Date,i={...e,dateObj:t,corrected:n};try{const o=Hm(i),l={...i,...o},u=I1(l);return{...l,dir:u}}catch(o){console.error("[useMyeongSikStore] recalcGanjiSnapshot error:",o);const l=I1(i);return{...i,dir:l}}}function GB(e){const t={name:e.birth_place_name??"",lat:e.birth_place_lat??0,lon:e.birth_place_lon??127.5},n=e.sort_order===null||e.sort_order===void 0?void 0:Number(e.sort_order),i=typeof n=="number"&&Number.isFinite(n)?n:void 0,o={id:e.id,name:e.name??"",birthDay:e.birth_day??"",birthTime:e.birth_time??"",gender:Dy(e.gender),birthPlace:t,relationship:e.relationship??"",memo:e.memo??"",folder:e.folder??"",mingSikType:["","/",""].includes(e.ming_sik_type)?e.ming_sik_type:"",DayChangeRule:e.day_change_rule===""||e.day_change_rule===""?e.day_change_rule:"",favorite:e.favorite??!1,sortOrder:i,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};return HB(o)}function af(e,t){const n=e.birthPlace??{name:"",lat:0,lon:127.5},i=typeof e.sortOrder=="number"&&Number.isFinite(e.sortOrder)?e.sortOrder:null;return{id:e.id,user_id:t,name:e.name??null,birth_day:e.birthDay??null,birth_time:e.birthTime??null,gender:Dy(e.gender),birth_place_name:n.name??null,birth_place_lat:typeof n.lat=="number"?n.lat:null,birth_place_lon:typeof n.lon=="number"?n.lon:null,relationship:e.relationship??null,memo:e.memo??null,folder:e.folder??null,ming_sik_type:e.mingSikType??null,day_change_rule:e.DayChangeRule??null,favorite:e.favorite??!1,sort_order:i,updated_at:new Date().toISOString()}}const ss=gd((e,t)=>({currentId:null,list:[],loading:!0,setCurrent:n=>e({currentId:n}),loadFromServer:async()=>{e({loading:!0});const{data:{user:n},error:i}=await At.auth.getUser();if(i||!n){console.error("loadFromServer: user not found / error",i),e({list:[],currentId:null,loading:!1});return}const l=await At.from("myeongsik").select("id, user_id, name, birth_day, birth_time, gender, birth_place_name, birth_place_lat, birth_place_lon, relationship, memo, folder, ming_sik_type, day_change_rule, favorite, created_at, updated_at"+", sort_order").order("sort_order",{ascending:!0,nullsFirst:!0}).order("created_at",{ascending:!1}),u=l.data,f=l.error;if(f||!u){console.error("loadFromServer error:",f),e({loading:!1});return}const p=u.filter(x=>x.user_id===n.id).map(GB),y=t().currentId,_=y&&p.some(x=>x.id===y)?y:p[0]?.id??null;e({list:p,currentId:_,loading:!1})},migrateLocalToServer:async()=>{if(typeof window>"u")return;const n=window.localStorage.getItem("myeongsik-list");if(!n)return;let i;try{i=JSON.parse(n)}catch(T){console.error("migrateLocalToServer: JSON parse error",T),window.localStorage.removeItem("myeongsik-list");return}const o=i.state??{},l=Array.isArray(o.list)?o.list:[];if(l.length===0){window.localStorage.removeItem("myeongsik-list");return}const{data:{user:u},error:f}=await At.auth.getUser();if(f||!u){console.warn("migrateLocalToServer: no user, skip");return}const{data:m,error:p}=await At.from("myeongsik").select("id").eq("user_id",u.id);if(p){console.error("migrateLocalToServer: fetch existing ids error",p);return}const y=new Set((m??[]).map(T=>T.id)),_=l.filter(T=>!!T&&!y.has(T.id));if(_.length===0){window.localStorage.removeItem("myeongsik-list");return}const x=_.map(T=>af(T,u.id)),{error:S}=await At.from("myeongsik").upsert(x,{onConflict:"id"});if(S){console.error("migrateLocalToServer upsert error:",S);return}window.localStorage.removeItem("myeongsik-list")},add:async n=>{const i=(t().list.length||0)+1,o={...n,sortOrder:n.sortOrder??i},{data:{user:l},error:u}=await At.auth.getUser();if(u||!l){console.error("add: user not found",u);return}e(p=>({list:[o,...p.list],currentId:p.currentId??o.id}));const f=af(o,l.id),{error:m}=await At.from("myeongsik").upsert(f,{onConflict:"id"});m&&console.error("add upsert error:",m)},update:async(n,i)=>{const o=t().list.find(y=>y.id===n);if(!o)return;const l={...o,...i};e(y=>({list:y.list.map(_=>_.id===n?l:_)}));const{data:{user:u},error:f}=await At.auth.getUser();if(f||!u){console.error("update: user not found",f);return}const m=af(l,u.id),{error:p}=await At.from("myeongsik").update(m).eq("id",n);p&&console.error("update error:",p)},remove:async n=>{e(o=>{const l=o.list.filter(f=>f.id!==n),u=o.currentId===n?l[0]?.id??null:o.currentId;return{list:l,currentId:u}});const{error:i}=await At.from("myeongsik").delete().eq("id",n);i&&console.error("remove error:",i)},reorder:async n=>{const i=n.map((m,p)=>({...m,sortOrder:p+1}));e({list:i});const{data:{user:o},error:l}=await At.auth.getUser();if(l||!o){console.error("reorder: user not found",l);return}const u=i.map(m=>af(m,o.id)),{error:f}=await At.from("myeongsik").upsert(u,{onConflict:"id"});f&&console.error("reorder upsert error:",f)},clear:()=>{e({currentId:null,list:[]})}})),z1="__custom__",FB=[{value:"",label:" (1 )"},{value:"/",label:" / "},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""},{value:"",label:""}],Sk=({value:e,onChange:t})=>{const[n,i]=R.useState(FB),[o,l]=R.useState(""),[u,f]=R.useState(!1),[m,p]=R.useState(""),[y,_]=R.useState(!1),{list:x}=ss(),T=x.some(A=>A.relationship==="")?n.filter(A=>A.value!==""):n;R.useEffect(()=>{e!==void 0&&l(e)},[e]);const k=A=>{const D=A.target.value;D===z1?(f(!0),l(""),t?.("")):(f(!1),p(""),l(D),t?.(D))};R.useEffect(()=>{const A=localStorage.getItem("relationshipOptions");A&&i(JSON.parse(A))},[]),R.useEffect(()=>{localStorage.setItem("relationshipOptions",JSON.stringify(n)),(async()=>{const{data:{user:D},error:M}=await At.auth.getUser();if(M||!D)return;const{data:G,error:H}=await At.from("user_settings").select("payload").eq("user_id",D.id).single();if(H&&H.code!=="PGRST116"){console.error("load relationships settings error",H.message);return}const F={...G?.payload??{},relationshipOptions:n},{error:K}=await At.from("user_settings").upsert({user_id:D.id,payload:F,updated_at:new Date().toISOString()});K&&console.error("save relationships settings error",K.message)})()},[n]);const N=()=>{if(!m.trim())return;const A={value:m,label:m};i([...n,A]),l(m),p(""),f(!1)},C=A=>{i(n.filter(D=>D.value!==A)),o===A&&l("")},$=A=>{if(!A.destination)return;const D=Array.from(n),[M]=D.splice(A.source.index,1);D.splice(A.destination.index,0,M),i(D)};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"rel_set flex items-center gap-2",children:[g.jsxs("select",{name:"relationship",id:"relationship",value:o,onChange:k,children:[g.jsx("option",{value:"",hidden:!0,children:""}),T.map(A=>g.jsx("option",{value:A.value,children:A.label},A.value)),g.jsx("option",{value:z1,children:" "})]}),g.jsx("button",{type:"button",onClick:()=>_(!0),className:"btn_style",children:""})]}),u&&!y&&g.jsxs("div",{className:"rel_set flex items-center mt-2 gap-2",children:[g.jsx("input",{type:"text",placeholder:" ",value:m,onChange:A=>p(A.target.value)}),g.jsx("button",{type:"button",onClick:N,className:"btn_style",children:""})]}),y&&g.jsxs("div",{className:"p-3 border mt-2 rounded bg-gray-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2",children:" "}),g.jsx(wd,{onDragEnd:$,children:g.jsx(il,{droppableId:"relList",children:A=>g.jsxs("ul",{ref:A.innerRef,...A.droppableProps,className:"space-y-1",children:[n.map((D,M)=>g.jsx(Sc,{draggableId:D.value,index:M,children:G=>g.jsxs("li",{ref:G.innerRef,...G.draggableProps,...G.dragHandleProps,className:"flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base",children:[g.jsx("span",{className:"cursor-grab mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:D.label}),g.jsx("button",{type:"button",className:"text-red-500",onClick:()=>C(D.value),children:""})]})},D.value)),A.placeholder]})})}),g.jsx("button",{type:"button",onClick:()=>_(!1),className:"w-full btn_style mt-2",children:""})]})]})},pn=" ",Ek=["","","","","",""],My="ms_folders",Tk="ms_folder_order",U1="ms_folder_favs",Bb="ms_disabled_presets",Wa="myeoun:folder-updated";function sl(e){if(e!==pn)return e||void 0}function Gm(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(e);if(!t)return[];try{const n=JSON.parse(t);return Array.isArray(n)?n.filter(i=>typeof i=="string"):[]}catch{return[]}}function Fm(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function YB(){const e=Gm(Bb);return Ek.filter(t=>!e.includes(t))}function Cy(){return Gm(My)}function qf(){const e=YB(),t=Cy(),n=new Set,i=[];for(const o of[...e,...t])n.has(o)||(n.add(o),i.push(o));return i}function qB(){return[pn,...qf()]}function kk(e){const t=e.trim();if(!t||t===pn)return;const n=Cy();if(n.includes(t))return;const i=[...n,t];Fm(My,i),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function ZB(e){const t=Cy(),n=t.filter(i=>i!==e);n.length!==t.length&&(Fm(My,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa)))}function VB(e){const t=Gm(Bb);if(t.includes(e))return;const n=[...t,e];Fm(Bb,n),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function Zf(){return Gm(Tk)}function Ju(e){Fm(Tk,e),typeof window<"u"&&window.dispatchEvent(new Event(Wa))}function qu(e,t){const n=new Set(e),i=[];for(const o of t)n.has(o)&&!i.includes(o)&&i.push(o);for(const o of e)i.includes(o)||i.push(o);return i}function KB(e){return Array.from(new Set(e))}function of(e){const t=e.filter(n=>n!==pn);return{rest:t,withUnassigned:[pn,...t]}}function WB(e,t){return qu(t,e)}function XB({value:e,onChange:t}){const[n,i]=R.useState([pn]),[o,l]=R.useState(!1),[u,f]=R.useState(""),[m,p]=R.useState(!1),y=R.useCallback(async N=>{const{data:{user:C},error:$}=await At.auth.getUser();if($||!C)return;const A=N.map((M,G)=>({user_id:C.id,folder_name:M,sort_order:G+1,updated_at:new Date().toISOString()})),{error:D}=await At.from("user_folder_order").upsert(A,{onConflict:"user_id,folder_name"});D&&console.error("save folder order error",D.message)},[]),_=R.useCallback(()=>{if(typeof window>"u")return;const N=KB(qB()),C=N.includes(pn)?N:[pn,...N],{rest:$}=of(C),A=Zf(),D=WB(A,$),M=[pn,...D];i(M),A.length===D.length&&A.every((H,F)=>H===D[F])||(Ju(D),y(D))},[y]);R.useEffect(()=>{if(_(),typeof window<"u"){const N=()=>_();return window.addEventListener(Wa,N),()=>window.removeEventListener(Wa,N)}},[_]);const x=R.useMemo(()=>e||pn,[e]),S=N=>{const{rest:C}=of(N);Ju(C),y(C)},T=N=>{const{source:C,destination:$}=N;if(!$||$.index===C.index)return;const{rest:A}=of(n),D=Array.from(A),[M]=D.splice(C.index,1);D.splice($.index,0,M);const G=[pn,...D];i(G),S(G)},k=N=>{const C=sl(N);C&&(kk(C),_())};return g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{className:"flex-1 border rounded-lg p-2",value:o?"__custom__":x,onChange:N=>{const C=N.target.value;if(C==="__custom__"){l(!0),t(void 0);return}l(!1),t(sl(C))},children:[n.map(N=>g.jsx("option",{value:N,children:N},N)),g.jsx("option",{value:"__custom__",children:"+   "})]}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-sm cursor-pointer",onClick:()=>p(N=>!N),children:m?" ":" "})]}),o&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:N=>f(N.target.value),placeholder:"  ",className:"flex-1 border rounded-lg p-2"}),g.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-white cursor-pointer",onClick:()=>{const N=u.trim();N&&(k(N),t(sl(N)),l(!1),f(""))},children:""})]}),m&&g.jsxs("div",{className:"p-3 border rounded bg-neutral-50 dark:bg-neutral-900",children:[g.jsx("h4",{className:"font-bold mb-2 text-s",children:"  "}),g.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm mb-2",children:[g.jsx("span",{className:"opacity-60 select-none",children:""}),g.jsxs("span",{className:"flex-1 px-2",children:[pn," ()"]})]}),g.jsx(wd,{onDragEnd:T,children:g.jsx(il,{droppableId:"folderList",direction:"vertical",type:"FOLDER",children:N=>g.jsxs("ul",{ref:N.innerRef,...N.droppableProps,className:"space-y-1",children:[of(n).rest.map((C,$)=>g.jsx(Sc,{draggableId:C,index:$,children:A=>g.jsxs("li",{ref:A.innerRef,...A.draggableProps,...A.dragHandleProps,className:"flex items-center justify-between bg-white dark:bg-neutral-800 p-2 rounded border text-sm",children:[g.jsx("span",{className:"cursor-grab select-none mr-2",children:""}),g.jsx("span",{className:"flex-1 pr-1",children:C})]})},C)),N.placeholder]})})})]}),g.jsxs("p",{className:"text-xs text-gray-500",children:['   "',pn,'" .      .']})]})}function Ak({message:e,onClose:t,ms:n=2e3}){return R.useEffect(()=>{const i=setTimeout(t,n);return()=>clearTimeout(i)},[t,n]),g.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg shadow-lg z-[9999]",children:e})}function Ym(e){return typeof e=="object"&&e!==null}function JB(e){return Ym(e)&&"default"in e}function QB(e){return Ym(e)&&typeof e.lunar2solar=="function"}function e7(e){if(!Ym(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function t7(e){const t=JB(e)?e.default:e;if(!QB(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,u);return e7(f)}}}const n7=t7(Oy);function br(e,t,n,i=4,o=0){const l=n7.lunar2solar(e,t,n,!1);return new Date(l.cYear,l.cMonth-1,l.cDay,i,o)}const Bu=[{key:"name",label:"",placeholder:" ",type:"text"},{key:"birthDay",label:"",placeholder:": 19900101",type:"tel"},{key:"birthTime",label:" ",placeholder:": 1524",type:"tel"},{key:"mingSikType",label:" ",type:"mingrule"},{key:"gender",label:"",type:"radio"},{key:"birthPlace",label:" ",type:"place"},{key:"relationship",label:"",type:"relationship"},{key:"folder",label:" ",type:"folder"},{key:"memo",label:"",placeholder:" ",type:"textarea"}],Pu=[{value:"solar",label:"",id:"calendarType_solar"},{value:"lunar",label:"",id:"calendarType_lunar"}],lf=["","/",""],cf=["",""];function xg(e,t,n){return n==="ArrowRight"||n==="ArrowDown"?(e+1)%t:n==="ArrowLeft"||n==="ArrowUp"?(e-1+t)%t:n==="Home"?0:n==="End"?t-1:e}function wg(e){const t=document.getElementById(e);t instanceof HTMLElement&&t.focus()}function r7({onSave:e,onClose:t}){const{add:n}=ss(),[i,o]=R.useState(0),[l,u]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[f,m]=R.useState(null),[p,y]=R.useState(!1),[_,x]=R.useState(!1),S=Bu[i],T=D=>m(D);R.useEffect(()=>{if(["name","birthDay","birthTime","memo"].includes(S.key)){const M=document.querySelector(".current-step input[type='text']:not([disabled]), .current-step textarea:not([disabled])");if(M){M.focus();return}}if(S.key==="mingSikType"){const M=document.querySelector("[id^='ming_'][id$='_lbl'][aria-checked='true']");if(M){M.focus();return}}if(S.key==="gender"){const M=document.querySelector("[id^='gender_'][id$='_lbl'][aria-checked='true']");if(M){M.focus();return}}if(l.birthPlace||_){const M=()=>{const G=document.querySelector(".current-step form button[type='submit']");G&&G.focus()};M(),setTimeout(M,0)}else{const M=document.getElementById("inputBirthPlaceBtn");M&&M.focus()}if(S.key==="relationship"){setTimeout(()=>{const M=document.querySelector(".current-step select");M&&M.focus()},0);return}if(S.key==="folder"){setTimeout(()=>{const M=document.querySelector(".current-step select");M&&M.focus()},0);return}document.querySelector(".current-step button, .current-step [tabindex='0']")?.focus()},[_,i,S.key,l.birthPlace]);const k=R.useMemo(()=>{if(l.calendarType!=="lunar"||!l.birthDay||l.birthDay.length!==8)return null;try{const D=Number(l.birthDay.slice(0,4)),M=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8)),H=br(D,M,G);return`  ${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}catch(D){const M=D instanceof Error?D.message:void 0;return`  ${M?`: ${M}`:""}`}},[l.calendarType,l.birthDay]),N=()=>{const D=Bu[i];if(D.key==="name"&&(l.name||(u({...l,name:""}),T("   '' ."))),D.key==="birthDay"){const M=/^\d{8}$/;if(!l.birthDay||!M.test(l.birthDay))return T(" YYYYMMDD  ."),!1;const G=Number(l.birthDay.substring(0,4)),H=Number(l.birthDay.substring(4,6)),F=Number(l.birthDay.substring(6,8));if(G<1900||G>2100)return T("  1900~2100  ."),!1;if(H<1||H>12)return T("  01~12  ."),!1;if(F<1||F>31)return T("  01~31  ."),!1;if(l.calendarType==="solar"){const K=new Date(G,H-1,F);if(K.getFullYear()!==G||K.getMonth()+1!==H||K.getDate()!==F)return T("  ."),!1}else try{br(G,H,F)}catch(K){return T(K instanceof Error?K.message:"   ."),!1}}if(D.key==="birthTime"){if(!l.birthTime&&!p)return T("   ''  ."),!1;if(l.birthTime){const M=Number(l.birthTime);if(Number.isNaN(M)||M<0||M>2359)return T("  00002359  ."),!1;const G=Number(l.birthTime.slice(0,2)),H=Number(l.birthTime.slice(2,4));if(G>23||H>59)return T("  00002359  ."),!1}}return D.key==="birthPlace"&&!l.birthPlace&&!_?(T("   ''  ."),!1):!0},C=()=>{if(!N())return;if(i<Bu.length-1){o(i+1);return}const D=sl(l.folder),M=!l.birthTime||l.birthTime==="",G=!l.birthPlace||typeof l.birthPlace=="object"&&l.birthPlace.name==="";let H=Number(l.birthDay.slice(0,4)),F=Number(l.birthDay.slice(4,6)),K=Number(l.birthDay.slice(6,8));if(l.calendarType==="lunar"){const Z=br(H,F,K);H=Z.getFullYear(),F=Z.getMonth()+1,K=Z.getDate()}const ae=M?4:Number(l.birthTime.slice(0,2)),Q=M?30:Number(l.birthTime.slice(2,4)),Y=new Date(H,F-1,K,ae,Q,0,0),te=_||!l.birthPlace||l.birthPlace.lon===0?127.5:l.birthPlace.lon,re=cl(Y,te,G),Se=l.mingSikType??"/",X=M?"":re.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),oe=ut(re,te),J=jt(re,te),ye=_t(re,Se),W=M?null:$i(re,Se),U=[` : ${oe} ${J} ${ye}`,W?`${W}`:null].filter(Boolean).join(" ");function B(Z,ie){const ce=["","","","","","","","","",""].includes(Z),xe=ie==="";return ce?xe?"forward":"backward":xe?"backward":"forward"}const q=oe.charAt(0),V=B(q,l.gender??""),P={id:uT(),name:l.name?.trim()||"",birthDay:l.birthDay||"",birthTime:M?"":l.birthTime||"",gender:l.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:l.birthPlace??{name:"",lat:0,lon:127.5},relationship:l.relationship??"",memo:l.memo??"",mingSikType:l.mingSikType??"/",DayChangeRule:l.mingSikType===""?"":"",folder:D,correctedLocal:X,ganji:U,calendarType:l.calendarType??"solar",dir:V,corrected:re,dateObj:l.dateObj||new Date,dayStem:l.dayStem||"",ganjiText:l.ganjiText||"   "};n(P),e(P),m(" !"),u({gender:"",mingSikType:"/",calendarType:"solar"}),y(!1),x(!1),o(0)},$=D=>{if(D.key!=="Enter")return;const M=D.target,G=M.getAttribute("role");if(G==="radio"||G==="checkbox")return;const H=document.getElementById("mapModal");if(H&&H.contains(M))return;const F=M.tagName.toLowerCase(),K=M instanceof HTMLInputElement?M.type:"";if(F==="textarea"){if(D.shiftKey)return;D.preventDefault(),C();return}if(K==="radio"||K==="checkbox"){D.preventDefault(),M instanceof HTMLInputElement&&M.click();return}F==="button"&&M.type!=="submit"||(D.preventDefault(),C())},A=D=>{switch(D){case"birthPlace":return _?"":l.birthPlace?.name||"";case"birthTime":return p?"":l.birthTime||"";case"folder":return l.folder?String(l.folder):pn;default:{const G=l[D];return typeof G=="string"?G:G!=null?String(G):""}}};return g.jsxs("div",{className:"mx-auto mt-10 space-y-2 max-w-[640px] w-[96%] text-neutral-900 dark:text-neutral-100",children:[f&&g.jsx(Ak,{message:f,onClose:()=>m(null)}),Bu.slice(0,i).map((D,M)=>g.jsxs("button",{onClick:()=>o(M),className:"p-3 rounded-lg bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 flex justify-between w-full text-left hover:bg-neutral-200 dark:hover:bg-neutral-800/80 transition-colors",children:[g.jsx("span",{className:"font-semibold",children:D.label}),g.jsx("span",{className:"text-neutral-600 dark:text-neutral-300",children:A(D.key)})]},D.key)),g.jsx("div",{className:"p-4 border rounded-lg shadow current-step bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800",children:g.jsxs("form",{onSubmit:D=>{D.preventDefault(),C()},onKeyDown:$,children:[g.jsx("label",{className:"block mb-2 font-bold",children:S.label}),S.key==="name"&&g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.name||"",onChange:D=>u({...l,name:D.target.value})}),S.key==="birthDay"&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex gap-1 items-center",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.birthDay||"",onChange:D=>{const M=D.target.value.replace(/\D/g,"");u({...l,birthDay:M.slice(0,8)})},inputMode:"numeric",pattern:"\\d*",maxLength:8}),g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex gap-1 text-sm",children:Pu.map(({value:D,label:M,id:G})=>{const H=l.calendarType===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:G,name:"calendarType",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:G,id:`${G}_lbl`,role:"radio","aria-checked":H,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                     border-neutral-300 dark:border-neutral-700
                                     bg-white dark:bg-neutral-900
                                     focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                     data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                     dark:data-[checked=true]:bg-amber-500/10`,"data-checked":H?"true":"false",onKeyDown:F=>{if(F.stopPropagation(),F.key===" "||F.key==="Enter"){F.preventDefault(),u({...l,calendarType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(F.key))return;F.preventDefault();const ae=Pu.findIndex(te=>te.value===l.calendarType),Q=xg(ae<0?0:ae,Pu.length,F.key),Y=Pu[Q].value;u({...l,calendarType:Y}),wg(`${Pu[Q].id}_lbl`)},onClick:F=>{F.preventDefault(),u({...l,calendarType:D})},children:M})]},D)})})]}),l.calendarType==="lunar"&&g.jsx("div",{className:"flex items-center justify-end",children:g.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:k})}),l.birthDay&&l.birthDay.length===8&&(()=>{const D=Number(l.birthDay.slice(0,4)),M=Number(l.birthDay.slice(4,6)),G=Number(l.birthDay.slice(6,8));return mm(D,M,G)?g.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" ."}):null})()]}),S.key==="birthTime"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 disabled:opacity-50 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:p?"":l.birthTime||"",onChange:D=>{const M=D.target.value.replace(/\D/g,"");u({...l,birthTime:M.slice(0,4)})},inputMode:"numeric",pattern:"\\d*",maxLength:4,disabled:p}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthTimeX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthTimeX",role:"checkbox","aria-checked":p,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":p?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),y(!p))},onClick:D=>{D.preventDefault(),y(!p)},children:""})]})]}),S.key==="mingSikType"&&g.jsx("fieldset",{role:"radiogroup","aria-label":" ",className:"flex flex-wrap gap-3",children:lf.map(D=>{const M=`ming_${D}`,G=(l.mingSikType??"/")===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:M,name:"mingSikType",type:"radio",style:{display:"none"}}),g.jsxs("label",{htmlFor:M,id:`${M}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,mingSikType:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const K=l.mingSikType??"/",ae=lf.indexOf(K),Q=xg(ae,lf.length,H.key),Y=lf[Q];u({...l,mingSikType:Y}),wg(`ming_${Y}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,mingSikType:D})},children:[D,""]})]},D)})}),S.key==="gender"&&g.jsx("fieldset",{role:"radiogroup","aria-label":"",className:"flex gap-2",children:cf.map(D=>{const M=`gender_${D}`,G=(l.gender??"")===D;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:M,name:"gender",type:"radio",style:{display:"none"}}),g.jsx("label",{htmlFor:M,id:`${M}_lbl`,role:"radio","aria-checked":G,tabIndex:0,className:`cursor-pointer select-none px-2 py-1 rounded-md border
                                 border-neutral-300 dark:border-neutral-700
                                 bg-white dark:bg-neutral-900
                                 focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                                 data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                                 dark:data-[checked=true]:bg-amber-500/10`,"data-checked":G?"true":"false",onKeyDown:H=>{if(H.stopPropagation(),H.key===" "||H.key==="Enter"){H.preventDefault(),u({...l,gender:D});return}if(!["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(H.key))return;H.preventDefault();const K=l.gender??"",ae=cf.indexOf(K),Q=xg(ae,cf.length,H.key),Y=cf[Q];u({...l,gender:Y}),wg(`gender_${Y}_lbl`)},onClick:H=>{H.preventDefault(),u({...l,gender:D})},children:D})]},D)})}),S.key==="birthPlace"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(dT,{onSelect:D=>u({...l,birthPlace:D})}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{id:"birthPlaceX",type:"checkbox",style:{display:"none"}}),g.jsx("label",{htmlFor:"birthPlaceX",role:"checkbox","aria-checked":_,tabIndex:0,className:`text-sm select-none cursor-pointer px-2 py-1 rounded-md border
                             border-neutral-300 dark:border-neutral-700
                             bg-white dark:bg-neutral-900
                             focus-visible:outline focus-visible:outline-2 focus-visible:outline-amber-500
                             data-[checked=true]:border-amber-400 data-[checked=true]:bg-amber-50
                             dark:data-[checked=true]:bg-amber-500/10`,"data-checked":_?"true":"false",onKeyDown:D=>{D.stopPropagation(),(D.key===" "||D.key==="Enter")&&(D.preventDefault(),x(!_))},onClick:D=>{D.preventDefault(),x(!_)},children:""})]})]}),S.key==="relationship"&&g.jsx(Sk,{value:l.relationship||"",onChange:D=>u({...l,relationship:D})}),S.key==="folder"&&g.jsx(XB,{value:sl(l.folder),onChange:D=>u({...l,folder:D})}),S.key==="memo"&&g.jsx("textarea",{className:"w-full border rounded-lg p-2 bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 placeholder-neutral-400 dark:placeholder-neutral-500 text-neutral-900 dark:text-neutral-100",placeholder:S.placeholder,value:l.memo||"",onChange:D=>u({...l,memo:D.target.value})}),g.jsxs("div",{className:"flex justify-between gap-2",children:[g.jsx("button",{className:"mt-4 w-full btn_style btn_secondary dark:focus:ring-amber-500",onClick:t,children:""}),g.jsx("button",{type:"submit",className:"mt-4 w-full btn_style dark:focus:ring-amber-500",children:i===Bu.length-1?"":""})]})]})})]})}var uf={},H1;function i7(){if(H1)return uf;H1=1,uf.match=l,uf.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,i=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function l(y,_){return u(y).some(function(x){var S=x.inverse,T=x.type==="all"||_.type===x.type;if(T&&S||!(T||S))return!1;var k=x.expressions.every(function(N){var C=N.feature,$=N.modifier,A=N.value,D=_[C];if(!D)return!1;switch(C){case"orientation":case"scan":return D.toLowerCase()===A.toLowerCase();case"width":case"height":case"device-width":case"device-height":A=p(A),D=p(D);break;case"resolution":A=m(A),D=m(D);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":A=f(A),D=f(D);break;case"grid":case"color":case"color-index":case"monochrome":A=parseInt(A,10)||1,D=parseInt(D,10)||0;break}switch($){case"min":return D>=A;case"max":return D<=A;default:return D===A}});return k&&!S||!k&&S})}function u(y){return y.split(",").map(function(_){_=_.trim();var x=_.match(e),S=x[1],T=x[2],k=x[3]||"",N={};return N.inverse=!!S&&S.toLowerCase()==="not",N.type=T?T.toLowerCase():"all",k=k.match(/\([^\)]+\)/g)||[],N.expressions=k.map(function(C){var $=C.match(t),A=$[1].toLowerCase().match(n);return{modifier:A[1],feature:A[2],value:$[2]}}),N})}function f(y){var _=Number(y),x;return _||(x=y.match(/^(\d+)\s*\/\s*(\d+)$/),_=x[1]/x[2]),_}function m(y){var _=parseFloat(y),x=String(y).match(o)[1];switch(x){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function p(y){var _=parseFloat(y),x=String(y).match(i)[1];switch(x){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}return uf}var Sg,G1;function s7(){if(G1)return Sg;G1=1;var e=i7().match,t=typeof window<"u"?window.matchMedia:null;function n(o,l,u){var f=this,m;t&&!u&&(m=t.call(window,o)),m?(this.matches=m.matches,this.media=m.media,m.addListener(_)):(this.matches=e(o,l),this.media=o),this.addListener=p,this.removeListener=y,this.dispose=x;function p(S){m&&m.addListener(S)}function y(S){m&&m.removeListener(S)}function _(S){f.matches=S.matches,f.media=S.media}function x(){m&&m.removeListener(_)}}function i(o,l,u){return new n(o,l,u)}return Sg=i,Sg}var a7=s7();const o7=ll(a7);var l7=/[A-Z]/g,c7=/^ms-/,Eg={};function u7(e){return"-"+e.toLowerCase()}function jk(e){if(Eg.hasOwnProperty(e))return Eg[e];var t=e.replace(l7,u7);return Eg[e]=c7.test(t)?"-"+t:t}function d7(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t),o=n.length;if(i.length!==o)return!1;for(let l=0;l<o;l++){const u=n[l];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var Tg={exports:{}},kg,F1;function h7(){if(F1)return kg;F1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kg=e,kg}var Ag,Y1;function f7(){if(Y1)return Ag;Y1=1;var e=h7();function t(){}function n(){}return n.resetWarningCache=t,Ag=function(){function i(u,f,m,p,y,_){if(_!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Ag}var q1;function m7(){return q1||(q1=1,Tg.exports=f7()()),Tg.exports}var p7=m7();const Lt=ll(p7),kr=Lt.oneOfType([Lt.string,Lt.number]),Nk={all:Lt.bool,grid:Lt.bool,aural:Lt.bool,braille:Lt.bool,handheld:Lt.bool,print:Lt.bool,projection:Lt.bool,screen:Lt.bool,tty:Lt.bool,tv:Lt.bool,embossed:Lt.bool},g7={orientation:Lt.oneOf(["portrait","landscape"]),scan:Lt.oneOf(["progressive","interlace"]),aspectRatio:Lt.string,deviceAspectRatio:Lt.string,height:kr,deviceHeight:kr,width:kr,deviceWidth:kr,color:Lt.bool,colorIndex:Lt.bool,monochrome:Lt.bool,resolution:kr,type:Object.keys(Nk)},{type:YU,...b7}=g7,y7={minAspectRatio:Lt.string,maxAspectRatio:Lt.string,minDeviceAspectRatio:Lt.string,maxDeviceAspectRatio:Lt.string,minHeight:kr,maxHeight:kr,minDeviceHeight:kr,maxDeviceHeight:kr,minWidth:kr,maxWidth:kr,minDeviceWidth:kr,maxDeviceWidth:kr,minColor:Lt.number,maxColor:Lt.number,minColorIndex:Lt.number,maxColorIndex:Lt.number,minMonochrome:Lt.number,maxMonochrome:Lt.number,minResolution:kr,maxResolution:kr,...b7},v7={...Nk,...y7};var _7={all:v7};const x7=e=>`not ${e}`,w7=(e,t)=>{const n=jk(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?x7(n):`(${n}: ${t})`},S7=e=>e.join(" and "),E7=e=>{const t=[];return Object.keys(_7.all).forEach(n=>{const i=e[n];i!=null&&t.push(w7(n,i))}),S7(t)},T7=R.createContext(void 0),k7=e=>e.query||E7(e),Z1=e=>e?Object.keys(e).reduce((n,i)=>(n[jk(i)]=e[i],n),{}):void 0,Ok=()=>{const e=R.useRef(!1);return R.useEffect(()=>{e.current=!0},[]),e.current},A7=e=>{const t=R.useContext(T7),n=()=>Z1(e)||Z1(t),[i,o]=R.useState(n);return R.useEffect(()=>{const l=n();d7(i,l)||o(l)},[e,t]),i},j7=e=>{const t=()=>k7(e),[n,i]=R.useState(t);return R.useEffect(()=>{const o=t();n!==o&&i(o)},[e]),n},N7=(e,t)=>{const n=()=>o7(e,t||{},!!t),[i,o]=R.useState(n),l=Ok();return R.useEffect(()=>{if(l){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),i},O7=e=>{const[t,n]=R.useState(e.matches);return R.useEffect(()=>{const i=o=>{n(o.matches)};return e.addListener(i),n(e.matches),()=>{e.removeListener(i)}},[e]),t},D7=(e,t,n)=>{const i=A7(t),o=j7(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const l=N7(o,i),u=O7(l);return Ok(),R.useEffect(()=>{},[u]),R.useEffect(()=>()=>{l&&l.dispose()},[]),u},Dk=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})();function M7(e){const t=Dk.indexOf(e);if(t<0)throw new Error(`Unknown : ${e}`);return t}function pm(e,t,n=1){const i=M7(e),o=t==="forward"?n:-n;return Dk[(i+o+60*1e3)%60]}const C7=60*1e3,R7=60*C7,L7=24*R7;function B7(e,t){const n=new Date(e.getTime()),i=n.getFullYear()+t,o=n.getMonth(),l=n.getDate();return new Date(Date.UTC(i,o,l,n.getUTCHours(),n.getUTCMinutes()))}function Pb(e){const t=new Date(e);return t.setSeconds(0,0),t}function P7(e,t,n){const i=e.getHours(),o=n==="/"?(Math.floor((i+1)/2)*2-1+24)%24:(Math.floor(i/2)*2+1)%24,l=new Date(e);l.setHours(o,0,0,0);const u=new Date(l);u.setHours(o+2,0,0,0);const f=e.getTime()-l.getTime(),m=u.getTime()-e.getTime();return t==="backward"?f:m}function Mk(e,t,n,i=120,o="/"){const l=Pb(e),u=P7(l,n,o),f=Pb(new Date(l.getTime()+u*120)),m=B7(e,i).getTime(),p=[];let y=pm(t,n,1);for(let _=f.getTime();_<=m;_+=10*L7)p.push({at:new Date(_),gz:y}),y=pm(y,n,1);return{firstChange:f,events:p}}function Ck(e,t){const n=t==="forward"?e===""?"":"":e===""?"":"";return i=>i===n}function Rk(e,t,n,i){const o=Ck(i,n);let l=t;const u=[];for(const f of e.events){const m=f.gz.charAt(1);o(m)&&(l=pm(l,n,1),u.push({at:f.at,gz:l}))}return{events:u}}function as(e){const t=e.getFullYear(),n=[{deg:315,name:""},{deg:345,name:""},{deg:15,name:""},{deg:45,name:""},{deg:75,name:""},{deg:105,name:""},{deg:135,name:""},{deg:165,name:""},{deg:195,name:""},{deg:225,name:""},{deg:255,name:""},{deg:285,name:""}],i={deg:315,name:""},o=n.map(f=>({name:f.name,date:Gn(t,f.deg)})).concat([{name:i.name,date:Gn(t+1,i.deg)},{name:"",date:Gn(t+1,285)}]),l=Gn(t,315),u=Gn(t+1,315);return o.filter(f=>f.date>=l&&f.date<u).sort((f,m)=>f.date.getTime()-m.date.getTime())}const $7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},I7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},z7=e=>$7[e]??("".includes(e)?e:null),U7=e=>I7[e]??("".includes(e)?e:null);function V1(e){const t=z7(e[0]),n=U7(e[1]);if(!t||!n)throw new Error(`Invalid GZ: ${e}`);return`${t}${n}`}function Sd(e,t,n,i=120,o){function l(A){return A instanceof Date||(A=new Date(A)),Math.floor((A.getHours()+1)%24/2)}function u(A){return["","","","","","","","","","","",""][l(A)]}function f(A,D,M){const G=A.charAt(0),H=A.charAt(1),F=jr.indexOf(G),K=Yr.indexOf(H),ae=D==="forward"?M:-M,Q=(F+ae%10+10)%10,Y=(K+ae%12+12)%12;return jr[Q]+Yr[Y]}const m=as(e).sort((A,D)=>A.date.getTime()-D.date.getTime());let p;if(n==="forward"){const A=m.findIndex(D=>D.date>=e);A>=0&&(p=m[A].date)}else{const A=m.filter(D=>D.date<=e);A.length&&(p=A[A.length-1].date)}function y(A,D){const M=u(A),G={:23,:1,:3,:5,:7,:9,:11,:13,:15,:17,:19,:21},H=G[M],F=(H+2)%24,K=new Date(A);if(K.setSeconds(0,0),n==="backward"&&D){const Q=u(D),Y=G[Q],te=new Date(D);return te.setHours(Y,0,0,0),te}if(n==="forward"&&D){const Q=u(D),Y=G[Q],te=new Date(D);if(te.setHours(Y,0,0,0),te>K)return te}const ae=new Date(K);return n==="forward"?(ae.setHours(F,0,0,0),ae<=K&&ae.setDate(ae.getDate()+1)):(ae.setHours(H,0,0,0),ae>=K&&ae.setDate(ae.getDate()-1)),ae}new Date(e).setSeconds(0,0);const x=V1(jt(e,127.5)),S=y(e,p),T=Math.floor(n==="forward"?(S.getTime()-e.getTime())/6e4:(e.getTime()-S.getTime())/6e4),k=Math.round(T/120*(14400*60*1e3));let N=new Date(e.getTime()+k);try{const A=V1(jt(e,o));(n==="forward"&&x!==A||n==="backward"&&x!==A)&&(N=new Date(e.getTime()+6e4))}catch{}const C=i/10,$=[];for(let A=0;A<C;A++){const D=new Date(N);D.setFullYear(D.getFullYear()+A*10),D.setSeconds(0,0);const M=f(t,n,A+1);$.push({at:D,gz:M})}return{natalMonthPillar:t,firstChange:N,mPillars:[],events:$}}function H7(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.floor(i))}function Lk(e,t,n,i,o){const l=Ck(i,n);let u=t;const f=[];for(const m of e.events){const p=m.gz.charAt(1);l(p)&&(u=pm(u,n,1),f.push({at:m.at,gz:u,age:H7(o,m.at)}))}return{events:f}}function G7(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=12,l=0;return e.birthTime&&e.birthTime!==""&&/^\d{4}$/.test(e.birthTime)&&(o=Number(e.birthTime.slice(0,2)),l=Number(e.birthTime.slice(2,4))),new Date(t,n-1,i,o,l,0,0)}function qm(e){const t=G7(e),n=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="",i=cl(t,e.birthPlace?.lon??null,n);return Pb(i)}function Ry(e,t){const n=e.birthPlace?.lon??127.5,i=qm(e),o=_t(i,t),l=$i(i,t,o.charAt(0));return{year:ut(i,n),month:jt(i,n),day:o,hour:l}}const F7=(()=>{const e=[];for(let t=0;t<60;t++)e.push(`${jr[t%10]}${Yr[t%12]}`);return e})(),Y7=e=>F7.indexOf(e),jg=e=>{if(Y7(e)<0)throw new Error(`Unknown : ${e}`);return{stem:e[0],branch:e[1]}};function Ly(e){return typeof e=="object"&&e!==null}function q7(e){return Ly(e)&&"default"in e}function Z7(e){return Ly(e)&&typeof e.lunar2solar=="function"}function V7(e){if(!Ly(e))throw new Error("Invalid lunar2solar result");const t=e.cYear,n=e.cMonth,i=e.cDay,o=e.isLeap;if(typeof t!="number"||typeof n!="number"||typeof i!="number")throw new Error("Invalid lunar2solar fields");return{cYear:t,cMonth:n,cDay:i,isLeap:typeof o=="boolean"?o:void 0}}function K7(e){const t=q7(e)?e.default:e;if(!Z7(t))throw new Error("solarlunar.lunar2solar not found");return{lunar2solar:(i,o,l,u)=>{const f=t.lunar2solar(i,o,l,!!u);return V7(f)}}}const W7=K7(Oy),K1=e=>e<10?`0${e}`:`${e}`;function By(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8||i!=="lunar")return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}try{const p=W7.lunar2solar(o,l,u,m),y=`${p.cYear}${K1(p.cMonth)}${K1(p.cDay)}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}}function X7(e,t="/"){const n=R.useMemo(()=>By(e),[e]),i=R.useMemo(()=>qm(n),[n]),o=R.useMemo(()=>Ry(n,t),[n,t]);return R.useMemo(()=>{const l=Sd(i,o.month,n.dir,120,n?.birthPlace?.lon??127.5),u=new Date;function f(A,D){let M=null;const G=D.getTime();for(const H of A)if(H.at.getTime()<=G)M=H;else break;return M}const m=f(l.events,u)?.gz??o.month,p=jg(m),y=u.getFullYear(),_=Gn(y,315),S=_&&u>=_?y:y-1,T=ut(new Date(S,1,10,0,0,0),127.5),k=jg(T),N=jt(u,127.5),C=jg(N),$=[];return C&&$.push({key:"wolun",label:"",data:C}),k&&$.push({key:"seun",label:"",data:k}),p&&$.push({key:"daeun",label:"",data:p}),$},[i,n.dir,o.month,n.birthPlace?.lon])}function Qu(e){const t=n=>n.toString().padStart(2,"0");return`${e.getFullYear()} ${t(e.getMonth()+1)} ${t(e.getDate())} ${t(e.getHours())} ${t(e.getMinutes())}`}function uc(e){return e<10?`0${e}`:`${e}`}function J7(e){return`${uc(e.getHours())}:${uc(e.getMinutes())}`}function Q7(e){return`${e.getFullYear()}-${uc(e.getMonth()+1)}-${uc(e.getDate())} ${uc(e.getHours())}:${uc(e.getMinutes())}`}const fi=gd()(G2((e,t)=>{const n=new Date,i="/",o=127.5,l=o,u=ut(n,l),f=jt(n,l),m=_t(n,i);return{date:n,scope:"",rule:i,lon:o,yearGZ:u,monthGZ:f,dayGZ:m,setDate:p=>{const{rule:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({date:p,yearGZ:ut(p,x),monthGZ:jt(p,x),dayGZ:_t(p,y)})},resetDate:()=>{const{rule:p,lon:y}=t(),_=new Date,x=typeof y=="number"?y:void 0;e({date:_,yearGZ:ut(_,x),monthGZ:jt(_,x),dayGZ:_t(_,p)})},resetMonth:()=>{const{lon:p}=t(),y=new Date;e({date:y,monthGZ:jt(y,typeof p=="number"?p:void 0)})},setScope:p=>e({scope:p}),setRule:p=>{const{date:y,lon:_}=t(),x=typeof _=="number"?_:void 0;e({rule:p,yearGZ:ut(y,x),monthGZ:jt(y,x),dayGZ:_t(y,p)})},setLon:p=>{const{date:y,rule:_}=t(),x=typeof p=="number"?p:void 0;e({lon:p,yearGZ:ut(y,x),monthGZ:jt(y,x),dayGZ:_t(y,_)})},setFromEvent:(p,y)=>{const{rule:_,lon:x}=t(),S=typeof x=="number"?x:void 0;e({date:p.at,scope:y,yearGZ:ut(p.at,S),monthGZ:jt(p.at,S),dayGZ:_t(p.at,_)})},forceKey:new Date}},{name:"luck-picker-v1",merge:(e,t)=>{const n=e;return n.date&&typeof n.date=="string"&&(n.date=new Date(n.date)),{...t,...n}}})),ul={Classic:"",Modern:""};function Jt(e,t){const i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e];return i?i[t]??"":""}function e4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function t4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function n4(e,t){return{:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}}[e]?.[t]??""}function r4(e,t){const n={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},i={:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},:{:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}},o=n[e];return o&&i[o]?i[o][t]??"":""}function Qt(e){const{baseBranch:t,targetBranch:n,era:i,gaehwa:o}=e;return!t||!n?"":i===""?o?e4(t,n):t4(t,n):o?n4(t,n):r4(t,n)}function Ed(e,t="/",n=100){const i=R.useMemo(()=>By(e),[e]),o=R.useMemo(()=>qm(i),[i]),l=R.useMemo(()=>Ry(i,t),[i,t]),u=(f,m)=>{const p=m.getFullYear()-f.getFullYear(),y=m.getMonth()-f.getMonth(),_=m.getDate()-f.getDate(),x=y<0||y===0&&_<0?p-1:p;return Math.max(0,x)};return R.useMemo(()=>Sd(o,l.month,i.dir,n,i.birthPlace?.lon??127.5).events.map(m=>({...m,age:u(o,m.at)})),[o,l.month,i.dir,n,i.birthPlace?.lon])}function Ng(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function i4(e,t){if(!Array.isArray(e)||e.length===0||!Ng(t))return{gz:"",at:t,index:-1};const n=e;for(let l=0;l<n.length;l++){const u=n[l],f=n[l+1];if(!Ng(u.at))continue;if(t.getTime()>=u.at.getTime()&&(!f||Ng(f.at)&&t.getTime()<f.at.getTime()))return{gz:u.gz??"",at:u.at,index:l}}if(t.getTime()<n[0].at.getTime()){const l=n[0];return{gz:l.gz??"",at:l.at,index:0}}const i=n.length-1,o=n[i];return{gz:o.gz??"",at:o.at,index:i}}function Py(e,t,n){const{date:i,rule:o,lon:l}=fi(),u=R.useMemo(()=>n??i??new Date,[n,i]),f=Ed(e,e?.mingSikType),{gz:m}=i4(f,u);return R.useMemo(()=>{try{const p=l??e?.birthPlace?.lon??127.5,y=o??e?.mingSikType??t??"/";return{dae:{gz:m,at:u},se:{gz:ut(u,p),at:u},wol:{gz:jt(u,p),at:u},il:{gz:_t(u,y),at:u}}}catch{const p=new Date;return{dae:{gz:"",at:p},se:{gz:"",at:p},wol:{gz:"",at:p},il:{gz:"",at:p}}}},[u,o,l,e,t,m])}const $y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Iy={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},s4=Object.fromEntries(Object.entries($y).map(([e,t])=>[t,e])),a4=Object.fromEntries(Object.entries(Iy).map(([e,t])=>[t,e])),o4=new Set(["","","","","","","","","",""]),l4=new Set(["","","","","","","","","","","",""]),c4=[{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""},{keys:["",""],label:"",elem:""}],u4=(()=>{const e={};for(const t of c4){const[n,i]=t.keys;e[n]={label:t.label,elem:t.elem},e[i]={label:t.label,elem:t.elem}}return e})();function d4(e){switch(e){case"":return"bg-green-600 text-white";case"":return"bg-red-600 text-white";case"":return"bg-yellow-600 text-white";case"":return"bg-gray-500 text-white";case"":return"bg-blue-700 text-white";default:return"bg-neutral-700 text-white"}}const h4={:1,:2,:3};function f4(e){return e.includes("")?3:e.includes("")?2:(e.includes(""),1)}const m4={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function p4(e){switch(m4[e]){case"":return"bg-green-600 text-white border-green-600";case"":return"bg-red-600 text-white border-red-600";case"":return"bg-yellow-500 text-white border-yellow-500";case"":return"bg-gray-400 text-white border-gray-400";case"":return"bg-blue-900 text-white border-blue-600";default:return"bg-neutral-700 text-white border-neutral-700"}}function g4({data:e,hourTable:t}){const{date:n}=fi(),i=Wn(P=>P.settings),o=i.showNabeum??!0,l=e.mingSikType??t??"/",u=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,{solarY:f,solarM:m,solarD:p}=R.useMemo(()=>{let P=Number(e.birthDay?.slice(0,4)??2e3),Z=Number(e.birthDay?.slice(4,6)??1),ie=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const me=br(P,Z,ie);P=me.getFullYear(),Z=me.getMonth()+1,ie=me.getDate()}return{solarY:P,solarM:Z,solarD:ie}},[e.birthDay,e.calendarType]),[y,_]=R.useState(!1);R.useEffect(()=>{f&&m&&p&&_(mm(f,m,p))},[f,m,p]);const x=!e.birthTime||e.birthTime==="";function S(P,Z){const ie=!P.birthTime||P.birthTime==="";let me=Number(P.birthDay.slice(0,4)),ce=Number(P.birthDay.slice(4,6)),xe=Number(P.birthDay.slice(6,8));if(P.calendarType==="lunar"){const $e=br(me,ce,xe);me=$e.getFullYear(),ce=$e.getMonth()+1,xe=$e.getDate()}const ke=ie?4:Number(P.birthTime.slice(0,2)),je=ie?30:Number(P.birthTime.slice(2,4)),Me=new Date(me,ce-1,xe,ke,je,0,0),Ee=!P.birthPlace||P.birthPlace.name===""||!P.birthPlace.lon,Pe=Ee?127.5:P.birthPlace.lon;let Ce;Ee?Ce=new Date(Me.getTime()-1800*1e3):Ce=cl(Me,Pe,ie);const Be=Z?new Date(Ce.getTime()-3600*1e3):Ce,Ue=P.mingSikType??"/",fe=ut(Be,Pe),Le=jt(Be,Pe),le=_t(Be,Ue),he=ie?null:$i(Be,Ue);return{corrected:Be,year:{stem:fe.charAt(0),branch:fe.charAt(1)},month:{stem:Le.charAt(0),branch:Le.charAt(1)},day:{stem:le.charAt(0),branch:le.charAt(1)},hour:he?{stem:he.charAt(0),branch:he.charAt(1)}:null}}const[T,k]=R.useState(()=>S(e,y));R.useEffect(()=>{k(S(e,y))},[e,y]);const N=e.id??`${e.birthDay}-${e.birthTime}-${e.name??""}`,C=T.day.stem,[$,A]=R.useState(null),[D,M]=R.useState(()=>e.mingSikType==="");R.useEffect(()=>{A(null),M(e.mingSikType==="")},[N,e.mingSikType]);const G=R.useMemo(()=>(D?Wb:B2)[C]??[],[D,C]),H=$??T.hour,F=i.sinsalBase===""?T.day.branch:T.year.branch,K=vd(P=>P.setManualHour),ae=(P,Z)=>{const ie={stem:P,branch:Z};A(ie),K(ie)},Q=P=>i.showSibiUnseong?Jt(C,P):null,Y=P=>i.showSibiSinsal?Qt({baseBranch:F,targetBranch:P,era:Og(i.sinsalMode),gaehwa:i.sinsalBloom}):null,te=X7(e,l),re=D7({query:"(min-width: 992px)"}),Se=i.hiddenStem==="regular"?"main":"all",X=i.exposure,oe=X===""?0:h4[X],J=oe===0?[]:te.filter(P=>f4(P.label)<=oe),ye=mm(f,m,p),W=()=>_(P=>!P),U=Py(e,t,n),B=U.dae.gz,q=U.se.gz,V=U.wol.gz;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"mb-1 flex flex-wrap items-end justify-between gap-2 p-2",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"text-md desk:text-xl font-bold text-neutral-900 dark:text-neutral-100",children:[(e.name?.trim()||"")+" ",g.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 mr-2",children:["(",e.gender,")"]}),ye&&g.jsxs("button",{onClick:W,className:`px-2 py-0.5 text-xs rounded cursor-pointer border
                  ${y?"bg-red-600 text-white border-red-600":"bg-neutral-100 text-neutral-700 border-neutral-300 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,children:[" ",y?"ON":"OFF"]})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[y4(e.birthDay,e.birthTime),e.birthPlace?.name?`  ${": "+e.birthPlace.name}`:""]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[": ",`${x?"":Q7(T.corrected)}`]})]}),g.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" : ",u.toFixed(2),"  ",l," "]})]}),g.jsxs("div",{className:`grid gap-2 p-2 desk:p-0 ${J.length===0?"grid-cols-1":J.length===1?"grid-cols-[2fr_8fr]":J.length===2?"grid-cols-[3.5fr_6.5fr]":"grid-cols-[4fr_5fr]"}`,children:[J.length>0&&(re?g.jsxs("section",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-2 p-3 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(P=>{let Z=P.data.stem,ie=P.data.branch;P.label.includes("")&&B&&(Z=B.charAt(0),ie=B.charAt(1)),P.label.includes("")&&q&&(Z=q.charAt(0),ie=q.charAt(1)),P.label.includes("")&&V&&(Z=V.charAt(0),ie=V.charAt(1));const me=Q(ie),ce=Y(ie);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(C,{stem:Z})}),g.jsx(Ha,{value:Z,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:ie,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Fu,{branch:ie,dayStem:C,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:me}),i.showSibiSinsal&&g.jsx("div",{children:ce}),o&&g.jsx(df,{stem:Z,branch:ie})]})]})]},P.key)})})})]}):g.jsxs("div",{className:"rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:`grid gap-1 p-0 ${J.length===1?"grid-cols-1":J.length===2?"grid-cols-2":"grid-cols-3"}`,children:J.map(P=>{let Z=P.data.stem,ie=P.data.branch;P.label.includes("")&&B&&(Z=B.charAt(0),ie=B.charAt(1)),P.label.includes("")&&q&&(Z=q.charAt(0),ie=q.charAt(1)),P.label.includes("")&&V&&(Z=V.charAt(0),ie=V.charAt(1));const me=Q(ie),ce=Y(ie);return g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsxs("div",{className:"py-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(C,{stem:Z})}),g.jsx(Ha,{value:Z,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:ie,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Fu,{branch:ie,dayStem:C,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:me}),i.showSibiSinsal&&g.jsx("div",{children:ce}),o&&g.jsx(df,{stem:Z,branch:ie})]})]})]},P.key)})})})]})),re?g.jsxs("section",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-md text-neutral-600 dark:text-neutral-300",children:g.jsx("b",{children:""})}),g.jsx("div",{className:"pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-2 p-3",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(P=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-2 py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsx("div",{className:"p-2 flex flex-col items-center gap-1",children:P.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(C,{stem:P.data.stem})}),g.jsx(Ha,{value:P.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:P.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Fu,{branch:P.data.branch,dayStem:C,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(C,P.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:P.data.branch,era:Og(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(df,{stem:P.data.stem,branch:P.data.branch})]})]}):g.jsx("span",{className:"text-[10px] desk:text-xs text-neutral-500 dark:text-neutral-400",children:" "})})]},P.key))})})]}):g.jsxs("div",{className:"flex-2 rounded-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 shadow",children:[g.jsx("div",{className:"px-3 py-1 text-[11px] text-neutral-600 dark:text-neutral-300",children:""}),g.jsx("div",{className:"px-1 pb-2",children:g.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{key:"hour",label:"",data:H},{key:"day",label:"",data:T.day},{key:"month",label:"",data:T.month},{key:"year",label:"",data:T.year}].map(P=>g.jsxs("div",{className:"rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"py-1 text-center text-xs tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:P.label}),g.jsx("div",{className:"py-2 flex flex-col items-center gap-1",children:P.data?g.jsxs(g.Fragment,{children:[i.showSipSin&&g.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:Ar(C,{stem:P.data.stem})}),g.jsx(Ha,{value:P.data.stem,kind:"stem",charType:i.charType,thinEum:i.thinEum}),g.jsx(Ha,{value:P.data.branch,kind:"branch",charType:i.charType,thinEum:i.thinEum}),g.jsx(Fu,{branch:P.data.branch,dayStem:C,mode:Se,mapping:i.hiddenStemMode}),(i.showSibiUnseong||i.showSibiSinsal||o)&&g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5",children:[i.showSibiUnseong&&g.jsx("div",{children:Jt(C,P.data.branch)}),i.showSibiSinsal&&g.jsx("div",{children:Qt({baseBranch:i.sinsalBase===""?T.day.branch:T.year.branch,targetBranch:P.data.branch,era:Og(i.sinsalMode),gaehwa:i.sinsalBloom})}),o&&g.jsx(df,{stem:P.data.stem,branch:P.data.branch})]})]}):g.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-nowrap",children:" "})})]},P.key))})})]})]}),x&&g.jsxs("div",{className:"mt-4 p-3 border rounded bg-neutral-50 dark:bg-neutral-800",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-semibold text-sm text-neutral-700 dark:text-neutral-300",children:" "}),g.jsx("button",{onClick:()=>M(P=>!P),className:"px-2 py-1 text-xs rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-600 cursor-pointer",children:D?" : ":" : "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:G.map(P=>{const Z=P.charAt(0),ie=P.charAt(1),me=$?.stem===Z&&$?.branch===ie;return g.jsx("button",{onClick:()=>ae(Z,ie),className:`p-2 text-xs rounded border cursor-pointer ${me?p4(ie):"bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-600"}`,title:`${P} ( )`,children:P},P)})})]})]})}function df({stem:e,branch:t}){const n=$y[e]??e,i=Iy[t]??t,o=`${n}${i}`,l=u4[o];if(!l)return null;const u=d4(l.elem);return g.jsx("span",{className:`inline-block px-1.5 py-[2px] rounded ${u} border border-white/10 text-nowrap`,title:`${l.label}  ${l.elem}`,children:l.label})}function b4(e){return Ym(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function Og(e){const t=ul;return b4(t)?e==="classic"?t.Classic:t.Modern:e}function Ha({value:e,kind:t,charType:n,thinEum:i}){const{settings:o}=Wn(),l=hi(e,t,o),u=n===""?t==="stem"?$y[e]??e:Iy[e]??e:t==="stem"?s4[e]??e:a4[e]??e,f=t==="stem"?o4.has(e):l4.has(e),m=i&&f?"font-thin":"font-bold";return g.jsx("div",{className:`w-11 h-11 sm:w-14 sm:h-14 md:w-14 md:h-14 rounded-md ${l}
                  flex items-center justify-center border border-neutral-200 dark:border-neutral-800`,children:g.jsx("span",{className:`text-[24px] md:text-2xl ${m}`,children:u})})}function y4(e,t){if(!e||!/^\d{8}$/.test(e))return"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8),l=`${n}-${i}-${o}`;return!t||t===""||!/^\d{4}$/.test(t)?l:`${l} ${t.slice(0,2)}:${t.slice(2,4)}`}function Xa(e){const t=Number(e.birthDay?.slice(0,4)),n=Number(e.birthDay?.slice(4,6))-1,i=Number(e.birthDay?.slice(6,8)),o=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(0,2)),l=!e.birthTime||e.birthTime===""?0:Number(e.birthTime?.slice(2,4)),u=new Date(t,n,i,o,l,0,0);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${e.birthDay} ${e.birthTime}`);const f=!e.birthPlace||typeof e.birthPlace=="object"&&e.birthPlace.name==="";return cl(u,e.birthPlace?.lon??127.5,f)}function Zm(e,t){const n=e.length;if(n===0||!t)return 0;const i=e[0].at.getTime(),o=e[n-1].at.getTime(),l=t.getTime();if(l<=i)return 0;if(l>=o)return n-1;for(let u=0;u<n-1;u+=1){const f=e[u].at.getTime(),m=e[u+1].at.getTime();if(l>=f&&l<m)return u}return 0}const Bk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Pk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},v4=Object.fromEntries(Object.entries(Bk).map(([e,t])=>[t,e])),_4=Object.fromEntries(Object.entries(Pk).map(([e,t])=>[t,e]));function W1(e,t,n){return n===""?t==="stem"?Bk[e]??e:Pk[e]??e:t==="stem"?v4[e]??e:_4[e]??e}const x4=new Set(["","","","","","","","","",""]),w4=new Set(["","","","","","","","","","","",""]);function X1(e,t){return t==="stem"?x4.has(e):w4.has(e)}function S4(e){return typeof e=="object"&&e!==null}function E4(e){return S4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function T4(e){const t=ul;return E4(t)?e==="classic"?t.Classic:t.Modern:e}const k4=!1,J1=e=>e<10?`0${e}`:`${e}`;function A4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${J1(p.getMonth()+1)}${J1(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function j4({data:e}){const t=Ed(e),n=R.useMemo(()=>{const M=A4(e);return Xa(M)},[e]),i=R.useMemo(()=>{const M=e.mingSikType??"/";return _t(n,M).charAt(0)},[n,e.mingSikType]),{date:o,setFromEvent:l}=fi(),u=R.useMemo(()=>Zm(t,o),[t,o]),f=Wn(M=>M.settings),{charType:m,thinEum:p,showSipSin:y,showSibiUnseong:_,showSibiSinsal:x,sinsalBase:S,sinsalMode:T,sinsalBloom:k}=f,N=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,C=e.mingSikType??"/",$=S===""?_t(n,C).charAt(1):ut(n,N).charAt(1),A=M=>_?Jt(i,M):null,D=M=>x?Qt({baseBranch:$,targetBranch:M,era:T4(T),gaehwa:!!k}):null;return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:t.map((M,G)=>{const H=M.gz.charAt(0),F=M.gz.charAt(1),K=N4(n,M.at),ae=G===u,Q=W1(H,"stem",m),Y=W1(F,"branch",m),te=X1(H,"stem"),re=X1(F,"branch"),Se=p&&te?"font-thin":"font-bold",X=p&&re?"font-thin":"font-bold",oe=A(F),J=D(F);return g.jsxs("div",{onClick:()=>l(M,""),className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${ae?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${M.gz}  ${M.at.toLocaleDateString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-0.5",children:[y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{stem:H})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(H,"stem",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${Se}`,children:Q})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(F,"branch",f)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${X}`,children:Y})}),y&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(i,{branch:F})}),(_||x)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1 text-center space-y-0.5 text-nowrap",children:[_&&g.jsx("div",{children:oe}),x&&g.jsx("div",{children:J})]})]})]},`${M.gz}-${G}`)})})]})}function N4(e,t){const i=(t.getTime()-e.getTime())/(365.2425*24*60*60*1e3);return Math.max(0,Math.round(i))}function Vm(e,t){const n=e,i=typeof n.isUnknownTime=="boolean"?n.isUnknownTime:!1,o=typeof n.birthTime=="string"&&/^(?:\d{4}|\d{2}:\d{2})$/.test(n.birthTime),l=typeof n.birthHour=="number",u=typeof n.birthMinute=="number";if(i||!(o||l||u)){const m=new Date(t);return m.setDate(m.getDate()+1),m.setHours(4,30,0,0),m}return t}const $k={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ik={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},O4=Object.fromEntries(Object.entries($k).map(([e,t])=>[t,e])),D4=Object.fromEntries(Object.entries(Ik).map(([e,t])=>[t,e]));function Q1(e,t,n){return n===""?t==="stem"?$k[e]??e:Ik[e]??e:t==="stem"?O4[e]??e:D4[e]??e}const M4=new Set(["","","","","","","","","",""]),C4=new Set(["","","","","","","","","","","",""]);function eS(e,t){return t==="stem"?M4.has(e):C4.has(e)}function R4(e){return typeof e=="object"&&e!==null}function L4(e){return R4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function B4(e){const t=ul;return L4(t)?e==="classic"?t.Classic:t.Modern:e}function Dg(e){return new Date(e,6,2,12,0,0,0)}function P4(e,t){return t-e+1}const $4=!1,tS=e=>e<10?`0${e}`:`${e}`;function I4(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${tS(p.getMonth()+1)}${tS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function z4({data:e,list:t,onSelect:n}){const i=Wn(H=>H.settings),{date:o,setFromEvent:l}=fi(),[u,f]=R.useState(()=>t);R.useEffect(()=>{t&&t.length>0&&f(t)},[t]);const m=Xa(e),p=R.useMemo(()=>Vm(e,m),[e,m]),y=R.useMemo(()=>p.getFullYear(),[p]),_=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,x=R.useMemo(()=>{if(!o)return[];const H=o.getFullYear(),F=Dg(H),K=ut(F,_);return[{at:F,gz:K}]},[o,_]),S=t.length>0?t:u.length>0?u:x,T=R.useMemo(()=>[...S].sort((H,F)=>H.at.getTime()-F.at.getTime()),[S]),k=R.useMemo(()=>{if(T.length===0)return 0;const H=Zm(T,o);return H<0?0:H>=T.length?T.length-1:H},[T,o]),[N,C]=R.useState(null);R.useEffect(()=>{C(null)},[o,T]);const $=N??k,A=R.useMemo(()=>{const H=I4(e);return Xa(H)},[e]),D=e.mingSikType??"/",M=R.useMemo(()=>_t(A,D).charAt(0),[A,D]),G=R.useMemo(()=>i.sinsalBase===""?_t(p,D).charAt(1):ut(p,_).charAt(1),[p,D,_,i.sinsalBase]);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:T.map((H,F)=>{const K=H.at.getFullYear(),ae=Dg(K),Q=ut(ae,_),Y=Q.charAt(0),te=Q.charAt(1),re=F===$,Se=Q1(Y,"stem",i.charType),X=Q1(te,"branch",i.charType),oe=eS(Y,"stem"),J=eS(te,"branch"),ye=i.thinEum&&oe?"font-thin":"font-bold",W=i.thinEum&&J?"font-thin":"font-bold",U=i.showSibiUnseong?Jt(M,te):null,B=i.showSibiSinsal?Qt({baseBranch:G,targetBranch:te,era:B4(i.sinsalMode),gaehwa:!!i.sinsalBloom}):null,q=P4(y,K);return g.jsxs("div",{onClick:()=>{if(F===0){C(F);return}C(F);const V=Dg(K),P=ut(V,_);l({at:V,gz:P},""),n&&(typeof queueMicrotask<"u"?queueMicrotask(()=>n(K)):Promise.resolve().then(()=>n(K)))},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${re?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${Q}  ${H.at.toLocaleDateString()}  ${q}`,children:[g.jsxs("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-100 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200",children:[q,""]}),g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:K}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(M,{stem:Y})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(Y,"stem",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${ye}`,children:Se})}),g.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border ${hi(te,"branch",i)}`,children:g.jsx("span",{className:`text-[20px] md:text-xl ${W}`,children:X})}),i.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(M,{branch:te})}),(i.showSibiUnseong||i.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[i.showSibiUnseong&&U&&g.jsx("div",{children:U}),i.showSibiSinsal&&B&&g.jsx("div",{children:B})]})]})]},`${K}-${H.gz||F}`)})})]})}const U4=new Set(["","","","","","","","","","","",""]);function H4(e){const t=new Date(e.getFullYear(),e.getMonth()+1),n=t.getFullYear(),o=[...as(new Date(n-1,5,15,12,0))??[],...as(new Date(n,5,15,12,0))??[],...as(new Date(n+1,5,15,12,0))??[]].map(m=>({name:String(m.name),date:new Date(m.date)})).sort((m,p)=>m.date.getTime()-p.date.getTime()).filter(m=>U4.has(m.name));let l=o.findIndex((m,p)=>o[p].date<=t&&t<o[p+1]?.date);l<0&&(l=0);const u=o[l],f=o[l+1];return{start:new Date(u.date.getFullYear(),u.date.getMonth(),u.date.getDate(),0,0,0,0),end:new Date(f.date.getFullYear(),f.date.getMonth(),f.date.getDate(),0,0,0,0),cur:u,next:f}}const zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Uk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},G4=Object.fromEntries(Object.entries(zk).map(([e,t])=>[t,e])),F4=Object.fromEntries(Object.entries(Uk).map(([e,t])=>[t,e]));function nS(e,t,n){return n===""?t==="stem"?zk[e]??e:Uk[e]??e:t==="stem"?G4[e]??e:F4[e]??e}const Y4=new Set(["","","","","","","","","",""]),q4=new Set(["","","","","","","","","","","",""]);function rS(e,t){return t==="stem"?Y4.has(e):q4.has(e)}function Z4(e){return typeof e=="object"&&e!==null}function V4(e){return Z4(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function K4(e){const t=ul;return V4(t)?e==="classic"?t.Classic:t.Modern:e}const W4=new Set(["","","","","","","","","","","",""]);function X4(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,0,0)}function J4(e){const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric"}).formatToParts(e);return Number(t.find(n=>n.type==="month")?.value??e.getMonth()+1)}function Mg(e){return new Date(e,5,15,12,0,0,0)}function Q4(e){const n=[...as(Mg(e-1))??[],...as(Mg(e))??[],...as(Mg(e+1))??[]].map(f=>({name:String(f.name),date:new Date(f.date)})).sort((f,m)=>f.date.getTime()-m.date.getTime()).filter(f=>W4.has(f.name)),i=new Date(e,0,1,0,0,0,0),o=new Date(e+1,0,1,0,0,0,0),l=n.findIndex(f=>f.name===""&&f.date>=i&&f.date<o);if(l===-1)return[];const u=[];for(let f=0;f<12;f++){const m=n[l+f];if(!m)break;const p=new Date(m.date),y=X4(p);u.push({name:m.name,termAt:p,at00:y})}return u}const eP=!1,iS=e=>e<10?`0${e}`:`${e}`;function tP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${iS(p.getMonth()+1)}${iS(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function nP({data:e,activeYear:t,onSelect:n,onSelectMonth:i}){const o=Wn(N=>N.settings),l=!e.birthPlace||e.birthPlace.name===""||e.birthPlace.lon===0?127.5:e.birthPlace.lon,u=Xa(e),f=R.useMemo(()=>Vm(e,u),[e,u]),m=R.useMemo(()=>{const N=tP(e);return Xa(N)},[e]),p=e.mingSikType??"/",y=R.useMemo(()=>_t(m,p).charAt(0),[m,p]),_=o.sinsalBase===""?_t(f,p).charAt(1):ut(f,l).charAt(1),x=R.useMemo(()=>t?Q4(t).map(C=>{const $=C.at00,A=new Date(C.at00);A.setDate(A.getDate()+1);const D=jt(A,l);return{at:$,gz:D,term:C.name,termAt:C.termAt}}):[],[t,l]),{date:S,setFromEvent:T}=fi(),k=Zm(x,S);return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"px-3 py-2 text-sm font-semibold tracking-wider bg-neutral-50 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-300",children:""}),g.jsx("div",{className:"flex gap-0.5 desk:gap-1 py-2 desk:p-2 flex-row-reverse",children:x.map((N,C)=>{const $=N.gz.charAt(0),A=N.gz.charAt(1),D=`${J4(N.at)}`,M=C===k,G=nS($,"stem",o.charType),H=nS(A,"branch",o.charType),F=rS($,"stem"),K=rS(A,"branch"),ae=o.thinEum&&F?"font-thin":"font-bold",Q=o.thinEum&&K?"font-thin":"font-bold",Y=o.showSibiUnseong?Jt(y,A):null,te=o.showSibiSinsal?Qt({baseBranch:_,targetBranch:A,era:K4(o.sinsalMode),gaehwa:!!o.sinsalBloom}):null;return g.jsxs("div",{onClick:()=>{i(N.at);const re=new Date(N.at),{start:Se}=H4(re);n?.(Se.getFullYear(),Se.getMonth()),T({at:re,gz:jt(re,l)},"")},className:`flex-1 rounded-sm desk:rounded-lg bg-white dark:bg-neutral-900 overflow-hidden cursor-pointer ${M?"border border-yellow-500":"border border-neutral-200 dark:border-neutral-800 hover:border-yellow-500"}`,title:`${N.term}   ${N.gz}  ${N.termAt.toLocaleString()}`,children:[g.jsx("div",{className:"desk:px-2 py-1 text-center text-[10px] bg-neutral-50 dark:bg-neutral-800/60 text-neutral-600 dark:text-neutral-300",children:D}),g.jsxs("div",{className:"p-2 flex flex-col items-center gap-1",children:[o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{stem:$})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi($,"stem",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${ae}`,children:G})}),g.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm md:rounded-lg flex items-center justify-center border border-neutral-200 dark:border-neutral-800 ${hi(A,"branch",o)}`,children:g.jsx("span",{className:`text-base md:text-xl ${Q}`,children:H})}),o.showSipSin&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-nowrap",children:Ar(y,{branch:A})}),(o.showSibiUnseong||o.showSibiSinsal)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center text-nowrap",children:[o.showSibiUnseong&&Y&&g.jsx("div",{children:Y}),o.showSibiSinsal&&te&&g.jsx("div",{children:te})]}),g.jsx("div",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 text-nowrap",children:N.term})]})]},`${N.term}-${N.at.toISOString()}`)})})]})}const Hk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Gk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},rP=Object.fromEntries(Object.entries(Hk).map(([e,t])=>[t,e])),iP=Object.fromEntries(Object.entries(Gk).map(([e,t])=>[t,e]));function sS(e,t,n){return n===""?t==="stem"?Hk[e]??e:Gk[e]??e:t==="stem"?rP[e]??e:iP[e]??e}const sP=new Set(["","","","","","","","","",""]),aP=new Set(["","","","","","","","","","","",""]);function aS(e,t){return t==="stem"?sP.has(e):aP.has(e)}function oP(e){return typeof e=="object"&&e!==null}function lP(e){return oP(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function cP(e){const t=ul;return lP(t)?e==="classic"?t.Classic:t.Modern:e}const uP=!1,oS=e=>e<10?`0${e}`:`${e}`;function dP(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${oS(f.getMonth()+1)}${oS(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}function hP(e,t){return new Date(e,t,15,12,0,0,0)}function Cg(e){const t=new Date(e);return t.setHours(23,59,0,0),t}const fP=new Set(["","","","","","","","","","","",""]);function Fk(e){return[...as(new Date(e-1,5,15,12,0))??[],...as(new Date(e,5,15,12,0))??[],...as(new Date(e+1,5,15,12,0))??[]].map(n=>({name:String(n.name),date:new Date(n.date)})).sort((n,i)=>n.date.getTime()-i.date.getTime())}function mP(e){const t=Fk(e.getFullYear()),n=t.filter(u=>fP.has(u.name));if(n.length<12){const u=t.findIndex(p=>p.date>e),f=t[Math.max(0,u-1)],m=t[Math.min(t.length-1,u)];return{start:new Date(f.date),end:new Date(m.date),cur:f,next:m}}let i=n.findIndex(u=>u.date>e)-1;i<0&&(i=n.length-1);const o=n[i],l=n[(i+1)%n.length];return{start:new Date(o.date),end:new Date(l.date),cur:o,next:l}}function pP({data:e,year:t,month:n,selectedMonth:i}){const o=Wn(K=>K.settings),l=o.ilunRule||"/",u=e?Xa(e):null,f=e&&u?Vm(e,u):null,m=R.useMemo(()=>{const K=dP(e);return Xa(K)},[e]),p=R.useMemo(()=>m?_t(m,l).charAt(0):void 0,[m,l]),y=e&&e.birthPlace&&e.birthPlace.name!==""&&e.birthPlace.lon!==0?e.birthPlace.lon:127.5,_=e&&f?o.sinsalBase===""?_t(f,l).charAt(1):ut(f,y).charAt(1):null,{date:x,setFromEvent:S}=fi(),T=R.useMemo(()=>hP(t,n),[t,n]),k=R.useMemo(()=>x?Cg(new Date(x)):null,[x]),N=R.useMemo(()=>i?Cg(i):null,[i]),C=R.useMemo(()=>k??N??T,[k,N,T]),{start:$,end:A,cur:D,next:M}=R.useMemo(()=>mP(C),[C]),G=R.useMemo(()=>{const K=[],ae=new Date($);for(;ae<A;)K.push(new Date(ae)),ae.setDate(ae.getDate()+1);return K},[$,A]),H=R.useMemo(()=>{const K=Fk(C.getFullYear()),ae=K.filter(Y=>Y.date>=$&&Y.date<A),Q=K.find(Y=>Y.date>=A);return Q?[...ae,Q]:ae},[C,$,A]),F=R.useMemo(()=>{const K=[];let ae=[];const Q=new Date($).getDay();for(let Y=0;Y<Q;Y++)ae.push(null);for(const Y of G)ae.length===7&&(K.push(ae),ae=[]),ae.push(Y);for(;ae.length<7;)ae.push(null);return K.push(ae),K},[G,$]);return g.jsxs("div",{className:"w-full max-w-[800px] mx-auto mb-4 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[g.jsx("div",{className:"flex justify-center items-center px-2 desk:px-4 py-2 bg-neutral-50 dark:bg-neutral-800/60",children:g.jsxs("div",{className:"text-center text-[11px] desk:text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:[D?.name?g.jsxs(g.Fragment,{children:[D.name," ~ ",M?.name??""]}):`${t} ${n}`,H.length>0&&g.jsxs("div",{className:"mt-0.5 text-[10px] desk:text-xs font-normal text-neutral-500 dark:text-neutral-400",children:["[",H.map((K,ae)=>g.jsxs("span",{children:[K.name," ",gP(K.date),ae<H.length-1?"  ":""]},`${K.name}_${K.date.getTime()}_${ae}`)),"]"]})]})}),g.jsx("div",{className:"grid grid-cols-7 text-center text-xs bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300",children:["","","","","","",""].map(K=>g.jsx("div",{className:"py-1",children:K},K))}),g.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 dark:bg-neutral-800",children:F.map((K,ae)=>K.map((Q,Y)=>{if(!Q)return g.jsx("div",{className:"bg-white dark:bg-neutral-900"},`${ae}-${Y}`);const te=Cg(Q),re=new Date,Se=te.getFullYear()===re.getFullYear()&&te.getMonth()===re.getMonth()&&te.getDate()===re.getDate(),oe=!!k&&te.getFullYear()===k.getFullYear()&&te.getMonth()===k.getMonth()&&te.getDate()===k.getDate()||!k&&Se,J=OO(te,l),ye=J.charAt(0),W=J.charAt(1),U=sS(ye,"stem",o.charType),B=sS(W,"branch",o.charType),q=o.thinEum&&aS(ye,"stem")?"font-thin":"font-bold",V=o.thinEum&&aS(W,"branch")?"font-thin":"font-bold",P=!!p&&o.showSipSin,Z=!!p&&o.showSibiUnseong,ie=!!p&&_!=null&&o.showSibiSinsal,me=P?Ar(p,{stem:ye}):"",ce=P?Ar(p,{branch:W}):"",xe=Z?Jt(p,W):"",ke=ie?Qt({baseBranch:_,targetBranch:W,era:cP(o.sinsalMode),gaehwa:!!o.sinsalBloom}):"",je=H.find(Me=>Me.date.getFullYear()===te.getFullYear()&&Me.date.getMonth()===te.getMonth()&&Me.date.getDate()===te.getDate());return g.jsxs("div",{onClick:()=>S({at:te},""),className:`space-y-1 bg-white dark:bg-neutral-900 flex flex-col items-center justify-start p-1 text-xs border cursor-pointer ${oe?"border-yellow-500":"border-neutral-200 dark:border-neutral-800"}`,title:`${J} (${te.toLocaleDateString()})`,children:[g.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1",children:[g.jsx("span",{children:te.getDate()}),je&&g.jsx("span",{className:"text-[10px] text-nowrap px-1 rounded bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",children:je.name})]}),P&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:me}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(ye,"stem",o)}`,children:g.jsx("span",{className:q,children:U})}),g.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-base ${hi(W,"branch",o)}`,children:g.jsx("span",{className:V,children:B})}),P&&g.jsx("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400",children:ce}),(Z||ie)&&g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 text-center space-y-0.5",children:[Z&&xe&&g.jsx("div",{children:xe}),ie&&ke&&g.jsx("div",{children:ke})]})]},Q.toISOString())}))})]})}function gP(e){if(!e)return null;const t=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e);let n="",i="",o="",l="";for(const u of t)u.type==="month"&&(n=u.value),u.type==="day"&&(i=u.value),u.type==="hour"&&(o=u.value),u.type==="minute"&&(l=u.value);return`${n}/${i} ${o}:${l}`}function lS(e,t){const n=e.at.getFullYear(),i=t?t.at.getFullYear():n+10,o=[];for(let l=n;l<i;l++){const u=Gn(l,315);let f=l;new Date<u&&(f=l-1);const p=ut(new Date(f,1,10));o.push({at:u,gz:p})}return o}function bP({data:e}){const t=Ed(e),[n,i]=R.useState(null),[o,l]=R.useState(null),[u,f]=R.useState("il"),[m,p]=R.useState(null);R.useEffect(()=>{if(!t.length)return;const T=new Date,k=t.findIndex((N,C)=>{const $=t[C+1]?.at;return T>=N.at&&(!$||T<$)});k!==-1&&i(k)},[t]),R.useEffect(()=>{if(n===null)return;const T=t[n],k=t[n+1];if(!T)return;const N=lS(T,k),C=new Date;N.findIndex((A,D)=>{const M=N[D+1]?.at;return C>=A.at&&(!M||C<M)})!==-1&&l({year:C.getFullYear(),month:C.getMonth()})},[n,t]);const y=Py(e),{date:_}=fi(),x=_.getMonth()+1===1?_.getFullYear()-1:_.getFullYear(),S=R.useMemo(()=>{if(!y?.dae?.gz)return[];const T=t.findIndex((C,$)=>{const A=t[$+1]?.at;return y.dae.at>=C.at&&(!A||y.dae.at<A)});if(T===-1)return[];const k=t[T],N=t[T+1];return lS(k,N)},[t,y?.dae]);return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx(j4,{data:e}),u==="se"||u==="wol"||u==="il"?g.jsx(z4,{data:e,list:S,onSelect:()=>{f("wol")}}):null,u==="wol"||u==="il"?g.jsx(nP,{data:e,activeYear:x,onSelect:(T,k)=>{l({year:T,month:k}),f("il")},onSelectMonth:p}):null,u==="il"&&o&&g.jsx(pP,{data:e,year:o.year,month:o.month+1,hourTable:e?.mingSikType,selectedMonth:m})]})}const yP=new Set(bO),vP=new Set(yO);function cS(e){return typeof e=="string"&&e.length>=2&&yP.has(e[0])&&vP.has(e[1])}function ri(e,...t){if(cS(e))return e;for(const n of t)if(cS(n))return n;return""}const _P={:0,:2,:4,:6,:8,:10,:12,:14,:16,:18,:20,:22},Yk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},xP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function uS(e){return!!e&&Bi..includes(e)}function wP(e){return Yk[e]??e}function dS(e){return xP[e]??e}function SP(e){if(uS(e))return e;const t=Yk[e];return uS(t)?t:""}function EP(e){return typeof e=="object"&&e!==null&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function TP(e){const t=ul;return EP(t)?e==="classic"?t.Classic??t.classic:t.Modern??t.modern:e}function hf(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function kP({data:e}){const t=Wn(ae=>ae.settings),{manualHour:n}=vd(),{showSibiUnseong:i,showSibiSinsal:o,sinsalBase:l,sinsalMode:u,sinsalBloom:f}=t,{date:m}=fi(),p=R.useMemo(()=>By(e),[e]),y=R.useMemo(()=>qm(p),[p]),_=R.useMemo(()=>Ry(p,"/"),[p]),x=R.useMemo(()=>SP(_.day?.charAt(0)??""),[_.day]),S=!e.birthTime||e.birthTime==="",T=R.useMemo(()=>Mk(y,_.hour,e.dir??"forward",120,"/"),[y,_.hour,e.dir]),k=R.useMemo(()=>Rk(T,_.day,e.dir??"forward",""),[T,_.day,e.dir]),N=R.useMemo(()=>Sd(y,_.month,e.dir??"forward",120,p.birthPlace?.lon??127.5),[y,_.month,e.dir,p.birthPlace?.lon]),C=R.useMemo(()=>Lk(N,_.year,e.dir??"forward","",y),[N,_.year,e.dir,y]),$=R.useMemo(()=>{const ae=T?.events?.[0];return ae?{at:ae.at,from:ri(_.hour),to:ri(ae.gz)}:null},[T?.events,_.hour]),A=R.useMemo(()=>{const ae=N?.events?.[0];return N?.firstChange?{at:N.firstChange,from:ri(_.month),to:ri(ae?.gz??_.month)}:null},[N?.firstChange,N?.events,_.month]),D=R.useMemo(()=>{const ae=S?n?n.stem+n.branch:"":ri(hf(T.events,m)?.gz,_.hour);let Q;if(S&&n){const Y=m.getFullYear(),te=m.getMonth(),re=m.getDate(),Se=_P[n.branch]??0,X=new Date(Y,te,re,Se,0),oe=_t(X,e.mingSikType??"/");Q=ri(oe,_.day)}else Q=ri(hf(k.events,m)?.gz,_.day);return{si:ae,il:Q,wl:ri(hf(N.events,m)?.gz,_.month),yn:ri(hf(C.events,m)?.gz,_.year)}},[m,T.events,k.events,N.events,C.events,_,S,n,e.mingSikType]),M=R.useMemo(()=>({si:ri($i(m,"/")),il:ri(_t(m,"/")),wl:ri(jt(m)),yn:ri(ut(m))}),[m]),G=R.useMemo(()=>l===""?_.day.charAt(1):_.year.charAt(1),[l,_.day,_.year]),H=R.useMemo(()=>TP(u),[u]),F=ae=>{if(!ae)return{unseong:"",shinsal:""};const Q=wP(x),Y=dS(ae.charAt(1)),te=dS(G);return{unseong:i&&Jt(Q,Y)||"",shinsal:o&&Qt({baseBranch:te,targetBranch:Y,era:H,gaehwa:!!f})||""}},K=(ae,Q,Y="myoun")=>{const te=Q,{unseong:re,shinsal:Se}=Q?F(Q):{unseong:"",shinsal:""},X=Y==="myoun"&&S&&(ae===""||ae==="");return g.jsx(cc,{label:ae,gz:te,dayStem:x,settings:t,unseongText:Q?re:"",shinsalText:Q?Se:"",hideBranchSipSin:!0,size:"sm",isUnknownTime:X},`${Y}-${ae}`)};return g.jsxs("div",{className:"w-full max-w-[640px] mx-auto mb-4 px-2 py-4 desk:p-4 bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800",children:[g.jsx("header",{className:"flex flex-wrap items-center gap-3 justify-between mb-4",children:g.jsxs("div",{className:"font-semibold text-xs desk:text-sm",children:[" +   "," ",g.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["(: ",Qu(y),")"]})]})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:""}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[K("",D.si,"myoun"),K("",D.il,"myoun"),K("",D.wl,"myoun"),K("",D.yn,"myoun")]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs mb-2 text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("div",{className:"grid grid-cols-4 gap-1 desk:gap-2",children:[K("",M.si,"live"),K("",M.il,"live"),K("",M.wl,"live"),K("",M.yn,"live")]})]})]}),g.jsxs("div",{className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 space-y-1",children:[g.jsx("div",{className:"font-semibold",children:"  "}),g.jsxs("div",{children:[":"," ",$?`${Qu($.at)} (${$.from}  ${$.to})`:" "]}),g.jsxs("div",{children:[":"," ",A?`${Qu(A.at)} (${A.from}  ${A.to})`:" "]})]})]})}const hS=["","","","","","","","","",""],AP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},NP={:"",:"",:"",:"",:""},OP={:"",:"",:"",:"",:""},DP={:"",:"",:"",:"",:""},MP={:"",:"",:"",:"",:""};function CP(e,t){switch(e){case"":return t;case"":return NP[t];case"":return DP[t];case"":return MP[t];case"":return OP[t];default:return t}}function RP({data:e,perStemElementScaled:t,elementPercent:n,dayStem:i,width:o=280,height:l=280,revKey:u}){const f=o,m=l,p=f/2,y=m/2,_=Math.min(f,m)*.37,x=R.useMemo(()=>{const A=(i??"").charAt(0);return jP[A]??null},[i]),S=A=>Math.PI/2+2*-Math.PI*A/5,T=R.useMemo(()=>e.map((A,D)=>({...A,x:p+_*Math.cos(S(D)),y:y-_*Math.sin(S(D))})),[e,p,y,_]),[k,N]=R.useState(0),C=R.useRef(""),$=R.useMemo(()=>{const A=e.map(G=>`${G.name}:${G.value}`).join(","),D=hS.map(G=>`${G}:${t?.[G]??0}`).join(","),M=n?`:${n.??0},:${n.??0},:${n.??0},:${n.??0},:${n.??0}`:"el:none";return[u??"",A,D,M,i??""].join("||")},[u,e,t,i,n]);return R.useEffect(()=>{$!==C.current&&(C.current=$,N(A=>A+1))},[$]),g.jsx("div",{className:"w-full",children:g.jsxs("svg",{width:f,height:m,className:"mx-auto pt-2",children:[T.map((A,D)=>{const M=T[(D+2)%5];return g.jsx("line",{x1:A.x,y1:A.y,x2:M.x,y2:M.y,stroke:"#94a3b8",strokeWidth:1},`line-${D}`)}),T.map((A,D)=>{const M=T[(D+1)%5],G=(A.x+M.x)/2,H=(A.y+M.y)/2,F=G-p,K=H-y,ae=1.5,Q=p+F*ae,Y=y+K*ae;return g.jsx("path",{d:`M${A.x},${A.y} Q${Q},${Y} ${M.x},${M.y}`,stroke:"#ef4444",strokeWidth:1.5,fill:"none",markerEnd:"url(#arrow)"},`curve-${D}`)}),g.jsx("defs",{children:g.jsx("marker",{id:"arrow",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:g.jsx("path",{d:"M0,0 L6,3 L0,6 Z",fill:"#ef4444"})})}),T.map(A=>{const D=A.name,M=x?CP(D,x):null,G=M?hS.filter(H=>AP[H]===M).map(H=>[H,t?.[H]??0]):[];return g.jsxs("g",{transform:`translate(${A.x},${A.y})`,children:[g.jsx("circle",{r:33,fill:A.color??"#334155",opacity:A.value===0?.7:1}),g.jsxs("text",{textAnchor:"middle",dy:"-6",fontSize:14,className:"fill-white font-semibold",children:[A.name," ",A.value]}),G.map(([H,F],K)=>g.jsxs("text",{textAnchor:"middle",dy:8+K*11,fontSize:10,className:"fill-white",children:[H," ",Math.round(F)]},H))]},`${A.name}-${A.value}`)})]},k)})}const LP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}];function zy(e){return Math.max(0,Math.min(100,e))}function qk(e){const t=zy(e);return LP.find(i=>t>=i.min&&t<i.max)?.name??""}const BP=[10,20,35,45,55,65,80];function PP({value:e}){const t=R.useMemo(()=>zy(e),[e]),n=R.useMemo(()=>qk(t),[t]);return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:""}),g.jsx("span",{children:""}),g.jsx("span",{children:""})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[BP.map(i=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${i}%`},title:`${i}%`},i)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${t}%`,transform:"translateX(-50%)"},"aria-label":`  ${t}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:n}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[t.toFixed(1),"%"]})]})]})}const Js=["","","",""],ff={year:0,month:1,day:2,hour:3},Rg="",$P={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Zk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Fe(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=$P[i[1]]??i[1],l=Zk[i[2]]??i[2];return`${o}${l}`}return""}const gm=e=>e&&e.length>=1?e[0]:"",Qs=e=>e&&e.length>=2?e[1]:"",Uy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Hy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Gy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Fy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Yy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],qy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Zy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Vy=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],fS=[{name:"",members:["","",""]},{name:"",members:["","",""]}],Ky=[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],Wy=[{pair:["",""],label:""}],IP=new Set(["","","",""]),cd=new Set(["","","",""]),Km=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}],Wm=[{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""},{name:"",members:["","",""],out:"",wang:""}];function Sn(e,t,n){for(const{pair:[i,o],label:l}of e)if(t===i&&n===o||t===o&&n===i)return l;return null}function Wt(e,t){e.includes(t)||e.push(t)}const Yo=e=>[...e].sort((t,n)=>t-n).map(t=>Js[t]).join("X"),Lg=(e,t)=>e===0&&t===3||e===3&&t===0;function mS(e,t){const n=[];for(const i of e)for(const o of t){if(i===o)continue;const l=Math.min(i,o),u=Math.max(i,o);l===0&&u===3||n.push([l,u])}return n.sort((i,o)=>{const l=Math.abs(i[0]-i[1]),u=Math.abs(o[0]-o[1]);return l!==u?l-u:0})}function zP(e){const t=[],n=[...e].sort((i,o)=>i-o);for(let i=0;i<n.length;i++)for(let o=i+1;o<n.length;o++){const l=n[i],u=n[o];l===0&&u===3||t.push([l,u])}return t}const Vk=e=>{switch(e){case"":return"";case"":return"";case"":return"";case"":return""}};function UP(e){if(!e)return!1;const t=e.normalize("NFC").trim();return/^#\s*$/u.test(t)}const HP=["cheonganHap","cheonganChung","jijiSamhap","jijiBanhap","jijiBanghap","jijiYukhap","jijiChung","jijiHyeong","jijiPa","jijiHae","jijiWonjin","jijiGwimun","amhap","ganjiAmhap"];function Kk(e){for(const t of HP){const i=(e[t]??[]).map(o=>o&&o.normalize("NFKC")).filter(o=>!!o&&!UP(o));e[t]=Array.from(new Set(i))}return e.jijiHyeong=Wk(e.jijiHyeong),e}const pS=["","","",""];function Wk(e){if(!e||e.length===0)return e;const t=Array.from(new Set(e.map(o=>o?.normalize("NFKC")??""))).filter(Boolean),n=t.some(o=>o.includes("")||o.includes("()")),i=t.some(o=>o.includes("")||o.includes("()"));return t.filter(o=>!(n&&(o.includes("")||o.includes("")||o.includes(""))||i&&(o.includes("")||o.includes("")||o.includes(""))))}function Xy(e,t={}){const{emitGanjiAmhap:n=!0}=t,i=e.map(Fe),o=i.map(x=>gm(x)),l=i.map(x=>Qs(x)),f={title:i.map((x,S)=>`${x}${["","","",""][S]}`).join(" "),cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]},m=(x,S,T,k)=>{const N=o.flatMap(($,A)=>$===x?[A]:[]),C=o.flatMap(($,A)=>$===S?[A]:[]);for(const $ of N)for(const A of C)$!==A&&Math.abs($-A)===1&&Wt(k,`#${Yo([$,A])}_${T}`)};Uy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganHap)),Hy.forEach(({pair:[x,S],label:T})=>m(x,S,T,f.cheonganChung));const p=x=>{const S=new Set,T=[];for(const k of x)for(let N=0;N<l.length;N++)if(l[N]===k&&!S.has(N)){S.add(N),T.push(N);break}return T};Km.forEach(({name:x,members:S,wang:T})=>{const k=S.filter(C=>l.includes(C)),N=new Set(k).size;if(N===3){const C=p(S);C.length===3&&Wt(f.jijiSamhap,`#${Yo(C)}_${x}`)}else if(N===2){if(!k.includes(T))return;const[C,$]=k,A=l.flatMap((H,F)=>H===C?[F]:[]),D=l.flatMap((H,F)=>H===$?[F]:[]),M=mS(A,D),G=M.length>1;for(const[H,F]of M){const K=Lg(H,F),ae=`#${Yo([H,F])}_${C}${$}${G?"":K?`_${Rg}`:""}`;Wt(f.jijiSamhap,ae)}}}),Wm.forEach(({name:x,members:S})=>{const T=S.filter(N=>l.includes(N));if(new Set(T).size===3){const N=p(S);N.length===3&&Wt(f.jijiBanghap,`#${Yo(N)}_${x}`)}});const y=(x,S,T,k)=>{const N=l.flatMap((D,M)=>D===x?[M]:[]),C=l.flatMap((D,M)=>D===S?[M]:[]),$=mS(N,C),A=$.length>1;for(const[D,M]of $){const G=Lg(D,M),H=`#${Yo([D,M])}_${T}${A?"":G?`_${Rg}`:""}`;Wt(k,H)}};if(Gy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiYukhap)),Fy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiChung)),Yy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiPa)),qy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHae)),Zy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiWonjin)),Vy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiGwimun)),[["","",""],["","",""]].forEach(x=>{const S=[],T=new Set;if(x.forEach(k=>{l.forEach((N,C)=>{N===k&&(S.push(C),T.add(k))})}),T.size===3){const k=Array.from(new Set(S)).sort((N,C)=>N-C);Wt(f.jijiHyeong,`#${Yo(k)}_${x.join("")}`)}}),Ky.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),Wy.forEach(({pair:[x,S],label:T})=>y(x,S,T,f.jijiHyeong)),["","","",""].forEach(x=>{const S=l.flatMap((N,C)=>N===x?[C]:[]),T=zP(S),k=T.length>1;for(const[N,C]of T){const $=Lg(N,C),A=`#${Yo([N,C])}_${x}${x}${k?"":$?`_${Rg}`:""}`;Wt(f.jijiHyeong,A)}}),[{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}].forEach(({pair:[x,S],label:T})=>y(x,S,T,f.amhap)),n)for(let x=0;x<4;x++){const S=i[x]??"";if(S.length<2)continue;const T=`${S[0]}${S[1]}`;cd.has(T)&&Wt(f.ganjiAmhap,`#${Vk(Js[x])}_${T}`)}return f.jijiHyeong=Wk(f.jijiHyeong),Kk(f)}function gr(e,t={}){const{emitNatalGanjiAmhap:n=!1}=t,i=[Fe(e.natal[0]??""),Fe(e.natal[1]??""),Fe(e.natal[2]??""),Fe(e.natal[3]??"")],l=[Fe(e.daewoon??""),Fe(e.sewoon??""),Fe(e.wolwoon??"")].some(y=>y.length>=2),u={cheonganHap:[],cheonganChung:[],jijiSamhap:[],jijiBanhap:[],jijiBanghap:[],jijiYukhap:[],jijiChung:[],jijiHyeong:[],jijiPa:[],jijiHae:[],jijiWonjin:[],jijiGwimun:[],amhap:[],ganjiAmhap:[]};if(n&&l)for(let y=0;y<4;y++){const _=i[y]??"";if(_.length<2)continue;const x=`${_[0]}${_[1]}`;cd.has(x)&&Wt(u.ganjiAmhap,`#${Vk(Js[y])}_${x}`)}const f=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];let m=!1,p=!1;for(const[y,_]of f){if(!_)continue;const x=Fe(_);if(!x||x.length<2)continue;const S=gm(x),T=Qs(x);{const C=`${S}${T}`;cd.has(C)&&Wt(u.ganjiAmhap,`#${y}_${C}`)}for(let C=0;C<4;C++){const $=i[C]??"";if($.length<2)continue;const A=Js[C],D=gm($),M=Qs($),G=Sn(Uy,S,D);G&&Wt(u.cheonganHap,`#${y}X${A}_${G}`);const H=Sn(Hy,S,D);H&&Wt(u.cheonganChung,`#${y}X${A}_${H}`);const F=Sn(Gy,T,M);F&&Wt(u.jijiYukhap,`#${y}X${A}_${F}`);const K=Sn(Fy,T,M);K&&Wt(u.jijiChung,`#${y}X${A}_${K}`);const ae=Sn(Yy,T,M);ae&&Wt(u.jijiPa,`#${y}X${A}_${ae}`);const Q=Sn(qy,T,M);Q&&Wt(u.jijiHae,`#${y}X${A}_${Q}`);const Y=Sn(Zy,T,M);Y&&Wt(u.jijiWonjin,`#${y}X${A}_${Y}`);const te=Sn(Vy,T,M);te&&Wt(u.jijiGwimun,`#${y}X${A}_${te}`);const re=Sn(Ky,T,M);if(re)Wt(u.jijiHyeong,`#${y}X${A}_${re}`);else{const oe=Sn(Wy,T,M);oe?Wt(u.jijiHyeong,`#${y}X${A}_${oe}`):T===M&&IP.has(T)&&Wt(u.jijiHyeong,`#${y}X${A}_${T}${M}`)}const X=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],T,M);X&&Wt(u.amhap,`#${y}X${A}_${X}`)}const k=i.map(C=>{const $=Qs(C??"");return Zk[$]??$});for(const C of Km){if(!C.members.includes(T))continue;const $=C.members.filter(D=>D!==T),A=k.map((D,M)=>({b:D,pos:Js[M]})).filter(D=>$.includes(D.b));if(new Set(A.map(D=>D.b)).size===2){const[D,M]=A.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Wt(u.jijiSamhap,`#${y}X${D}X${M}_(${C.name})`)}}const N=[...i.map((C,$)=>({b:Qs(C),pos:Js[$]}))];for(const C of Wm){const $=N.filter(A=>C.members.includes(A.b));if(new Set($.map(A=>A.b)).size===3){const A=$.map(D=>D.pos).join("X");Wt(u.jijiBanghap,`#${A}_(${C.name})`)}}for(const C of fS){if(!C.members.includes(T))continue;const $=C.members.filter(D=>D!==T),A=k.map((D,M)=>({b:D,pos:Js[M]})).filter(D=>$.includes(D.b));if(new Set(A.map(D=>D.b)).size===2){const[D,M]=A.map(G=>G.pos).sort((G,H)=>["","","",""].indexOf(G)-["","","",""].indexOf(H));Wt(u.jijiHyeong,`#${y}X${D}X${M}_${C.name}`),C.name===""&&(m=!0),C.name===""&&(p=!0)}}}{const y=[],_=[["",e.daewoon],["",e.sewoon],["",e.wolwoon],["",e.ilwoon]];for(const[x,S]of _){const T=Fe(S??"");T.length>=2&&y.push({kind:x,b:Qs(T)})}if(y.length>=2){const x=i.map((S,T)=>({pos:Js[T],b:Qs(S)}));for(const S of fS)for(let T=0;T<y.length;T++)for(let k=T+1;k<y.length;k++){const N=y[T],C=y[k];for(const $ of x){const A=new Set([$.b,N.b,C.b]);if(A.size===3&&S.members.every(D=>A.has(D))){const D=[N.kind,C.kind].sort((G,H)=>pS.indexOf(G)-pS.indexOf(H)).join("X"),M=`${$.pos}X${D}`;Wt(u.jijiHyeong,`#${M}_${S.name}`),S.name===""&&(m=!0),S.name===""&&(p=!0)}}}}}return(m||p)&&(u.jijiHyeong=u.jijiHyeong.filter(y=>!(m&&/(||)/.test(y)||p&&/(||)/.test(y)))),Kk(u)}function GP(e,t){const i=e.map(Fe).map(m=>Qs(m)),o=ff.month,l=i[o],u=m=>{const p=[];for(let y=0;y<4;y++){const _=i[y];_&&m.has(_)&&p.push(y)}return p},f=m=>{const p=[...m].sort((y,_)=>y-_);return p.length===3&&p[0]+1===p[1]&&p[1]+1===p[2]};for(const m of Km){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?10:8:t[m.out]+=5:t[m.out]+=3}if(y.length===2&&y.includes(o)){const _=y[0]===o?y[1]:y[0],x=l===m.wang;_===ff.day&&x?t[m.out]+=8:_===ff.year&&x?t[m.out]+=6:_===ff.hour&&(t[m.out]+=x?4:2)}}for(const m of Wm){const p=new Set(m.members),y=u(p);if(y.length===3){const _=y.includes(o),x=l===m.wang;_?f(y)?t[m.out]+=x?8:6:t[m.out]+=4:t[m.out]+=2}}}function gS(e){const t=["","","",""],n=e.map(Fe),i=n.map(f=>gm(f)),o=n.map(f=>Qs(f)),l=new Map,u=new Map;for(let f=0;f<4;f++){const m=i[f],p=o[f];m.includes(m)&&l.set(m,[...l.get(m)??[],f]),p.includes(p)&&u.set(p,[...u.get(p)??[],f])}return{stemsByPos:i,brsByPos:o,stemPos:l,brPos:u,names:t}}function Ft(e){return Js[e]}function pr(e,t){t&&(e.includes(t)||e.push(t))}function FP(e,t){const n=gS(e),i=gS(t),o={:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[],:[]};for(let f=0;f<4;f++){const m=n.stemsByPos[f],p=n.brsByPos[f];for(let y=0;y<4;y++){const _=i.stemsByPos[y],x=i.brsByPos[y],S=Sn(Uy,m,_);S&&pr(o.,`${Ft(f)}X${Ft(y)} ${S}`);const T=Sn(Hy,m,_);T&&pr(o.,`${Ft(f)}X${Ft(y)} ${T}`);const k=Sn(Gy,p,x);k&&pr(o.,`${Ft(f)}X${Ft(y)} ${k}`);const N=Sn(Fy,p,x);N&&pr(o.,`${Ft(f)}X${Ft(y)} ${N}`);const C=Sn(Yy,p,x);C&&pr(o.,`${Ft(f)}X${Ft(y)} ${C}`);const $=Sn(qy,p,x);$&&pr(o.,`${Ft(f)}X${Ft(y)} ${$}`);const A=Sn(Zy,p,x);A&&pr(o.,`${Ft(f)}X${Ft(y)} ${A}`);const D=Sn(Vy,p,x);D&&pr(o.,`${Ft(f)}X${Ft(y)} ${D}`);const G=Sn([{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""},{pair:["",""],label:""}],p,x);G&&pr(o.,`${Ft(f)}X${Ft(y)} ${G}`);const H=`${m}${x}`,F=`${_}${p}`;cd.has(H)&&pr(o.,`${Ft(f)}X${Ft(y)} ${H}`),cd.has(F)&&pr(o.,`${Ft(y)}X${Ft(f)} ${F}`);const K=Sn(Ky,p,x);if(K)pr(o.,`${Ft(f)}X${Ft(y)} ${K}`);else{const ae=Sn(Wy,p,x);ae&&pr(o.,`${Ft(f)}X${Ft(y)} ${ae}`)}}}const l=new Set(n.brsByPos.filter(Boolean)),u=new Set(i.brsByPos.filter(Boolean));for(const f of Km){if(f.members.every(y=>l.has(y)||u.has(y))){const y=f.members.filter(x=>l.has(x)).length,_=f.members.filter(x=>u.has(x)).length;y>=1&&_>=1&&pr(o.,`${f.name}`)}const p=f.members.filter(y=>l.has(y)||u.has(y));if(p.length===2&&p.includes(f.wang)){const y=p.some(x=>l.has(x)),_=p.some(x=>u.has(x));if(y&&_){const[x,S]=p.sort(),T=n.brPos.get(x)?.[0]??n.brPos.get(S)?.[0],k=i.brPos.get(x)?.[0]??i.brPos.get(S)?.[0];T!=null&&k!=null&&pr(o.,`${Ft(T)}X${Ft(k)} ${x}${S}`)}}}for(const f of Wm)if(f.members.every(p=>l.has(p)||u.has(p))){const p=f.members.filter(_=>l.has(_)).length,y=f.members.filter(_=>u.has(_)).length;p>=1&&y>=1&&pr(o.,`${f.name}`)}return Object.keys(o).forEach(f=>o[f].sort()),o}function $u(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function Xi({label:e,natal:t,dae:n,se:i,wol:o,il:l}){const u=n.length+i.length+o.length+l.length>0,f=t.length>0?t:["#"],m=u?f.filter(_=>_!=="#"):f,y=m.some(_=>_!=="#")||n.length>0||i.length>0||o.length>0||l.length>0?"shrink-0 w-20 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:[g.jsx("div",{className:y,children:e}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+$u(_,"natal"),children:_},`natal-${x}`)),n.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+$u(_,"dae"),children:_},`dae-${x}`)),i.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+$u(_,"se"),children:_},`se-${x}`)),o.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+$u(_,"wol"),children:_},`wol-${x}`)),l.map((_,x)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+$u(_,"il"),children:_},`il-${x}`))]})]})}function $b(e){return Array.isArray(e)?e:[]}function mf(e,t){const n=new Set($b(e));return $b(t).filter(o=>!n.has(o))}function YP({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const u=Xy(e),f=gr({natal:e}),m=t?gr({natal:e,daewoon:t}):f,p=n?gr({natal:e,daewoon:t,sewoon:n}):m,y=i?gr({natal:e,daewoon:t,sewoon:n,wolwoon:i}):p,_=o?gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o}):y,x=k=>({natal:$b(u[k]),dae:mf(f[k],m[k]),se:mf(m[k],p[k]),wol:mf(p[k],y[k]),il:mf(y[k],_[k])}),S={cheonganHap:x("cheonganHap"),cheonganChung:x("cheonganChung"),jijiSamhap:x("jijiSamhap"),jijiBanghap:x("jijiBanghap"),jijiYukhap:x("jijiYukhap"),amhap:x("amhap"),ganjiAmhap:x("ganjiAmhap"),jijiChung:x("jijiChung"),jijiHyeong:x("jijiHyeong"),jijiPa:x("jijiPa"),jijiHae:x("jijiHae")},T=k=>l===""?{natal:k.natal,dae:[],se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:[],wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:[],il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:[]}:l===""?{natal:k.natal,dae:k.dae,se:k.se,wol:k.wol,il:k.il}:{natal:[],dae:[],se:[],wol:[],il:[]};return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:""}),g.jsx(Xi,{label:"",...T(S.cheonganHap)}),g.jsx(Xi,{label:"",...T(S.cheonganChung)}),g.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-800 my-2"}),g.jsx(Xi,{label:"",...T(S.jijiSamhap)}),g.jsx(Xi,{label:"",...T(S.jijiBanghap)}),g.jsx(Xi,{label:"",...T(S.jijiYukhap)}),g.jsx(Xi,{label:"",...T(S.amhap)}),g.jsx(Xi,{label:"",...T(S.ganjiAmhap)}),g.jsx(Xi,{label:"",...T(S.jijiChung)}),g.jsx(Xi,{label:"",...T(S.jijiHyeong)}),g.jsx(Xi,{label:"",...T(S.jijiPa)}),g.jsx(Xi,{label:"",...T(S.jijiHae)})]})}const qP={:{:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535"},:{:"#DC143C",:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713"},:{:"#F0B100",:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C"},:{:"#a0a0a0",:"#353535",:"#13B713",:"#DC143C",:"#F0B100"},:{:"#353535",:"#13B713",:"#DC143C",:"#F0B100",:"#a0a0a0"}},ZP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Xk(e){const t=ZP[e]??"";return qP[t]}const Jk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},VP={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Td={:"",:"",:"",:"",:""},ud={:"",:"",:"",:"",:""},Dc={:"",:"",:"",:"",:""},KP=[{name:"",min:0,max:10},{name:"",min:10,max:20},{name:"",min:20,max:35},{name:"",min:35,max:45},{name:"",min:45,max:55},{name:"",min:55,max:65},{name:"",min:65,max:80},{name:"",min:80,max:100.0001}],WP={:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"cold",wet:"wet"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"normal"},:{temp:"mild",wet:"wet"},:{temp:"hot",wet:"normal"},:{temp:"hot",wet:"dry"},:{temp:"hot",wet:"wet"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"},:{temp:"mild",wet:"dry"}};function Jy(e){return Math.max(0,Math.min(100,e))}function Ec(e,t,n){return Math.max(t,Math.min(n,e))}function XP(e){const t=Jy(e);return KP.find(n=>t>=n.min&&t<n.max)?.name??""}function JP(e){const t=e?.[2]?.charAt(0)??"";return Jk[t]??null}function QP(e){return(e?.[1]?.charAt(1)??"")||null}function Xm(e){const t=Object.entries(Dc);for(const[n,i]of t)if(i===e)return n;return""}function e9(e){return e?{peer:e,resource:ud[e],leak:Td[e],wealth:Dc[e],officer:Xm(e)}:null}function t9(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=n.charAt(0),o=n.charAt(1),l=Jk[i],u=VP[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t}function n9(e){const t=Object.values(e).reduce((i,o)=>i+o,0);if(t<=0)return{:20,:20,:20,:20,:20};const n={:0,:0,:0,:0,:0};return Object.keys(e).forEach(i=>{n[i]=e[i]/t*100}),n}function r9(e){if(!e||e.length===0)return null;const t=e.reduce((i,o)=>i+(o?.value??0),0)||0;if(t<=0)return null;const n=i=>e.find(o=>o.name===i)?.value??0;return Jy((n("")+n(""))/t*100)}function i9(e,t){return!e||!t?null:t===e?"":Td[e]===t?"":Dc[e]===t?"":Xm(e)===t?"":ud[e]===t?"":null}const Bg=24,s9=[[60,0],[55,.01],[50,.03],[45,.06],[40,.1],[35,.18],[30,.32],[27,.48],[24,.62]];function a9(e){for(const[t,n]of s9)if(e>=t)return n;return 1}const bm=20,bS=(e,t)=>Ec((bm-(t[e]??0))/bm,0,1),yS=(e,t)=>Ec(((t[e]??0)-bm)/bm,0,1);function o9(e,t,n,i){const o=i9(e,n);if(!e||!o)return 0;const l=Ec((50-t)/50,0,1),u=Ec((t-50)/50,0,1),f=bS(n,i),m=yS(n,i),p=bS(e,i),y=yS(e,i),_=6.5;let x=0;if(l>0)switch(o){case"":x=+(.3+.4*p+.15*f)*l;break;case"":x=+(.18+.45*p)*l;break;case"":x=-(.08+.2*(1-f)+.1*y)*l;break;case"":x=-(.22+.25*(1-f)+.1*(1-p))*l;break;case"":x=-(.35+.25*(1-f)+.1*(1-p))*l;break}else if(u>0)switch(o){case"":x=-(.25+.25*(1-f)+.2*y)*u;break;case"":x=-(.28+.2*y)*u;break;case"":x=+(.18+.2*f+.15*y)*u;break;case"":x=+(.22+.25*f+.1*y)*u;break;case"":x=+(.2+.2*f)*u;break}else switch(o){case"":x=.08*(p+f);break;case"":x=.05*p-.03*y;break;case"":x=.02*f-.02*m;break;case"":x=.01*f-.06*m;break;case"":x=-.05*(1-f);break}return Math.round(_*x*10)/10}function l9(e,t,n,i){const o=["","",""].includes(t),l=["","","",""].includes(t),u={:0,:0,:0,:0,:0};if(o){const f=Td[e],m=Dc[e],p=Xm(e);u[f]+=28,u[m]+=22,u[p]+=20,i.get(f)?.push(":    ()"),i.get(m)?.push(":     "),i.get(p)?.push(":     ")}if(l){const f=ud[e],m=e;u[f]+=28,u[m]+=22,i.get(f)?.push(":     "),i.get(m)?.push(":     ")}return u}function vS(e,t){if(!e)return{:0,:0,:0,:0,:0};const n=WP[e]??{temp:"mild",wet:"normal"},i={:0,:0,:0,:0,:0};return n.temp==="cold"?(i.+=16,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.temp==="hot"&&(i.+=14,i.+=6,t.get("")?.push(":   "),t.get("")?.push(":  ")),n.wet==="wet"?(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")):n.wet==="dry"&&(i.+=8,i.+=4,t.get("")?.push(":   "),t.get("")?.push(":  ")),i}function _S(e,t){const n={:0,:0,:0,:0,:0},i=["","","","",""];for(const o of i){const l=Dc[o],u=Math.max(0,(e[o]??0)-(e[l]??0));if(u<=0)continue;const f=Td[o],m=Math.round(u*.35);m>0&&(n[f]+=m,t.get(f)?.push(`: ${o}${l} `))}return n}function xS(e,t){const n={:0,:0,:0,:0,:0},i=Object.entries(e),o=Math.min(...i.map(([,u])=>u)),l=i.filter(([,u])=>u<=Math.max(6,o));for(const[u]of l)n[u]+=12,t.get(u)?.push(":  ");return n}function wS(e,t){const n=JP(e),i=QP(e),o=t9(e),l=n9(o);let u=r9(t);if(u==null)if(!n)u=50;else{const Q=n,Y=ud[n],te=Object.values(o).reduce((re,Se)=>re+Se,0)||1;u=Jy(((o[Q]??0)+(o[Y]??0))/te*100)}const f=XP(u),m={:0,:0,:0,:0,:0},p=new Map(["","","","",""].map(Q=>[Q,[]]));if(n){const Q=l9(n,f,o,p);Object.keys(m).forEach(Y=>{m[Y]+=Q[Y]??0})}const y=vS(i,p);Object.keys(m).forEach(Q=>{m[Q]+=y[Q]??0});const _=_S(o,p);Object.keys(m).forEach(Q=>{m[Q]+=_[Q]??0});const x=xS(o,p);Object.keys(m).forEach(Q=>{m[Q]+=x[Q]??0});const S=e9(n),T={:0,:0,:0,:0,:0};if(Array.isArray(t))for(const Q of t)T[Q.name]=Q.value;if(u>=45&&u<=55&&S){const Q=T.>=30||T.>=Math.max(T.,T.,T.,T.)+5;u<=50?(m[S.resource]+=14,p.get(S.resource)?.push(": -"),m[S.peer]+=10,p.get(S.peer)?.push(": -"),m[S.leak]+=6,p.get(S.leak)?.push(": -"),m[S.wealth]+=3,p.get(S.wealth)?.push(": -"),Q&&S.officer&&(m[S.officer]=Math.round(m[S.officer]*.8*10)/10,p.get(S.officer)?.push(":   "))):(m[S.leak]+=14,p.get(S.leak)?.push(": -"),m[S.wealth]+=10,p.get(S.wealth)?.push(": -"),S.officer&&(m[S.officer]+=6,p.get(S.officer)?.push(": -")),m[S.resource]+=3,p.get(S.resource)?.push(": -"))}["","","","",""].forEach(Q=>{const Y=o9(n,u,Q,l);m[Q]=Ec(Math.round((m[Q]+Y)*10)/10,0,999)});const N=u<50;["","","","",""].forEach(Q=>{const Y=l[Q]??0,te=N&&n===Q;if(Y>=Bg&&!te){const re=a9(Y);m[Q]=Math.round(m[Q]*re*10)/10;const Se=Math.min(14,Math.max(0,Math.ceil((Y-Bg)*.5)));Se>0&&(m[Q]=Ec(m[Q]-Se,0,999)),p.get(Q)?.push(" ()")}});const C={:[],:[],:[],:[],:[]};if(n){const Q=Td[n],Y=Dc[n],te=Xm(n),re=n,Se=ud[n];C[Q].push(""),C[Y].push(""),C[te].push(""),C[re].push(""),C[Se].push("")}const $={:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0,:(o.??0)>0},A=Q=>{const Y=l[Q]??0;return Y>=Bg&&!(N&&n===Q)?Y>=55?4:Y>=45?3:2:$[Q]?0:1},D=vS(i,new Map),M=_S(o,new Map),G=xS(o,new Map),H=Object.keys(m).map(Q=>({element:Q,score:Math.round(m[Q]*10)/10,via:c9(Q,D,M,G),reasons:(p.get(Q)??[]).slice(),tenGodHints:C[Q]})).sort((Q,Y)=>{const te=A(Q.element),re=A(Y.element);return te!==re?te-re:Y.score!==Q.score?Y.score-Q.score:Q.element.localeCompare(Y.element)}),F=u9(f,D,M,G),K={:0,:0,:0,:0,:0},ae=t?t.reduce((Q,Y)=>(Q[Y.name]=Y.value,Q),{...K}):void 0;return{chosenType:F,ordered:H,debug:{band:f,overallPct:u,elementScore:o,tenGodTotals:ae,monthBranch:i??void 0}}}function c9(e,t,n,i){const o=[];return(t[e]??0)>0&&o.push(""),(n[e]??0)>0&&o.push(""),(i[e]??0)>0&&o.push(""),o.length===0&&o.push(""),o}function u9(e,t,n,i){if(["","","",""].includes(e))return"";const l=p=>Object.values(p).reduce((y,_)=>y+_,0),u=l(t),f=l(n),m=l(i);return u>Math.max(f,m)?"":f>=m?"":""}const d9=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),h9=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),f9=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),m9=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),p9=e=>d9[e]??e,g9=e=>f9[e]??e,b9=e=>h9[e]??e,y9=e=>m9[e]??e;function v9(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?p9(n):b9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}function Qy(e){const t={...e};for(const n of Object.keys(e)){const i=/[]/.test(n)?g9(n):y9(n);i&&t[i]===void 0&&(t[i]=e[n])}return t}const _9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},x9={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Qk={:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},w9={...Qk,:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.5,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.2},{stem:"",ratio:1,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}],:[{stem:"",ratio:.2},{stem:"",ratio:.3},{stem:"",ratio:.7,main:!0}]},SS=v9(_9),ES=Qy(x9);Qy(Qk);Qy(w9);const S9=["","","","",""],mn={2:4,1:3,3:2,0:1};function pf(e,t,n="classic"){const i=oi(t),o=Xt(t),l=(n==="hgc"?Cm:Mm)[o]??[];return[i,...l].includes(e)}const dc={1:4,2:3,0:2,3:1},eA=new Set(Object.keys(Am)),tA=new Set(Object.keys(Vb)),E9=e=>e.slice(0,1),T9=e=>e.slice(-1);function ea(e){return km.has(e)?e:eA.has(e)?Am[e]??e:e}function yr(e){return Zb.has(e)?e:tA.has(e)?Vb[e]??e:e}function oi(e){return ea(E9(e))}function Xt(e){return yr(T9(e))}const Te={year:0,month:1,day:2,hour:3};function Pg(e,t){const n=yr(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(Xt(t[o])===n)return{pos:o,weight:mn[o]??0};return null}function ev(e,t,n){return Xt(t[n])===yr(e)?{pos:n,weight:mn[n]}:null}function k9(e,t){const n=ea(e),i=[Te.day,Te.month,Te.hour,Te.year];for(const o of i)if(oi(t[o])===n)return{pos:o,weight:mn[o]??0};return null}const A9=/^#(|||)X\1_/,j9=e=>A9.test(e);function TS(e){const t=new Map;for(const n of e){if(j9(n.name))continue;const i=`${n.name}@${n.pos}`,o=t.get(i);(!o||n.weight>o.weight)&&t.set(i,n)}return Array.from(t.values()).sort((n,i)=>i.weight!==n.weight?i.weight-n.weight:n.name.localeCompare(i.name,"ko"))}function gf(e){return e===3?"si":e===2?"il":e===1?"wol":"yeon"}const ol=e=>e===0?"":e===1?"":e===2?"":"",Mc=e=>e==="dae"?"":e==="se"?"":e==="wol"?"":"",N9=(e,t)=>`#X${ol(t)}_${e}`,nA=(e,t)=>t===Te.month?`#_${e}`:`#X${ol(t)}_${e}`,bc=(e,t,n)=>`#${ol(t)}X${ol(n)}_${e}`,O9=(e,t)=>`#${e==="day"?"":""}X${ol(t)}_`,xs=e=>`#_${e}`,bf=(e,t)=>`#${ol(t)}_${e}`,nc=(e,t)=>`#X${Mc(t)}_${e}`,Iu=(e,t)=>`#X${Mc(t)}_${e}`,$g=(e,t,n)=>`#${Mc(t)}X${ol(n)}_${e}`,D9=(e,t)=>`#${t==="day"?"":""}X${Mc(e)}_`,M9=(e,t)=>`#${t==="day"?"":""}X${Mc(e)}_`,kS=(e,t)=>`#X${Mc(e)}_${t}`;function C9(e){if(!e)return null;const t=Array.from(String(e));let n=null,i=null;for(const o of t)!n&&(km.has(o)||eA.has(o))&&(n=ea(o)),(Zb.has(o)||tA.has(o))&&(i=yr(o));return n&&i?{stem:n,branch:i}:null}function Ig(e){return e.map(Xt)}const gn=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(yr)])),R9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),rA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),L9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),B9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),P9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),iA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),$9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),I9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),U9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),H9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),sA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),G9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),F9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Y9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),q9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Z9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),V9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),aA=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),K9=sA,W9=rA,X9=aA,J9=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Q9=iA,e6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),t6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),n6=gn({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),oA=e=>(Array.isArray(e)?e:String(e).split("")).map(t=>yr(t.trim())).filter(Boolean),Ii=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),(Array.isArray(n)?n:[n]).map(i=>yr(i))])),AS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},jS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},NS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},OS={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},r6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),DS=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),Jm=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[yr(t),oA(n)])),i6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),s6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),a6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),o6=Jm({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),l6=Ii({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),c6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),u6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),d6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),h6=Ii({:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""],:["",""]}),MS=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),f6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),m6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),p6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),g6=Ii({:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),un=e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[ea(t),oA(n)])),b6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),CS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),y6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),v6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),_6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),x6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),w6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),RS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),S6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),E6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),T6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),k6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),A6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),LS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),j6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),N6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),BS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),O6=un({:"",:"",:"",:""}),D6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),PS=un({:"",:"",:""}),$S=un({:"",:"",:""}),M6=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),IS=un({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}),zS=un({:"",:"",:"",:"",:"",:"",:""}),zg=[["",""],["",""],["",""],["",""],["",""],["",""]],Ug=[["",""],["",""],["",""],["",""],["",""],["",""]],C6=new Set(["","","",""]),US=[["",""],["",""]],R6=[{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]},{set:new Set(["","","","","","","","","",""]),voids:["",""]}];function zu(e,t,n){const i=yr(t),o=yr(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return!0;return!1}function HS(e,t,n){const i=yr(t),o=yr(n);for(const[l,u]of e)if(l===i&&u===o||l===o&&u===i)return`${l}${u}`;return`${i}${o}`}function yf(e){for(const t of R6)if(t.set.has(e))return t.voids;return null}function Hg(e){const t=yr(e),n=[{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])},{group:new Set(["","",""]),years:new Set(["","",""])}];for(const i of n)if(i.group.has(t))return Array.from(i.years);return null}function kd(e,t){e.push(t)}function Gg(e,t,n,i,o=0){const l=dc[n]>=dc[i]?n:i,u=bc(t,n,i);e.push({name:u,weight:mn[l]+o,pos:l})}function nn(e,t,n,i,o){const l=Xt(e[Te.year]),u=t[l];if(!u)return;const f=n==="MONTH"?[Te.month]:n==="DAY"?[Te.day]:n==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=ev(m,e,p);y&&kd(o,{name:bc(i,Te.year,p),weight:y.weight,pos:p})}}function vf(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=ea(l),f=k9(u,e);f&&kd(i,{name:nA(n,f.pos),weight:f.weight,pos:f.pos})}function ii(e,t,n,i,o="ALL"){const l=Xt(e[Te.month]),u=t[l];if(!u)return;const f=o==="YEAR"?[Te.year]:o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:o==="DAY_HOUR"?[Te.day,Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=ev(m,e,p);if(!y)continue;const _=p===Te.month?`#_${n}`:nA(n,p);kd(i,{name:_,weight:y.weight,pos:p})}}function _f(e,t,n,i){const o=Xt(e[Te.month]),l=t[o];if(!l)return;const u=e[Te.day];l.includes(u)&&kd(i,{name:bc(n,Te.month,Te.day),weight:mn[Te.day],pos:Te.day})}function Vt(e,t,n,i,o){const l=oi(e[Te.day]),u=t[l];if(!u)return;const f=o==="DAY"?[Te.day]:o==="HOUR"?[Te.hour]:[Te.year,Te.month,Te.day,Te.hour];for(const m of u)for(const p of f){const y=ev(m,e,p);y&&kd(i,{name:N9(n,p),weight:y.weight,pos:p})}}function Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:l}){const u=oi(e[Te.day]),f=Xt(e[Te.day]),m=Xt(e[Te.month]),p=Xt(e[Te.year]),y=Ig(e),_=[],x=[],S=new Set(["","","",""]);if(nn(e,R9,"MONTH","",x),nn(e,rA,"DAY","",x),nn(e,B9,"MONTH","",x),nn(e,P9,"MONTH","",x),nn(e,$9,"ALL","",x),nn(e,I9,"HOUR","",x),nn(e,z9,"ALL","",x),nn(e,U9,"ALL","",x),nn(e,H9,"ALL","",x),nn(e,sA,"ALL","",x),nn(e,G9,"ALL","",x),nn(e,F9,"ALL","",x),nn(e,Y9,"ALL","",x),nn(e,q9,"ALL","",x),nn(e,Z9,"ALL","",x),nn(e,V9,"ALL","",x),nn(e,aA,"ALL","",x),nn(e,K9,"ALL","",x),nn(e,W9,"ALL","",x),nn(e,X9,"ALL","",x),nn(e,J9,"ALL","",x),nn(e,Q9,"ALL","",x),nn(e,e6,"ALL","",x),nn(e,t6,"ALL","",x),nn(e,n6,"ALL","",x),vf(e,AS,"",_),vf(e,jS,"",_),vf(e,NS,"",_),vf(e,OS,"",_),ii(e,r6,"",x,"ALL"),ii(e,DS,"",x,"YEAR"),ii(e,DS,"",x,"DAY"),_f(e,i6,"",_),_f(e,s6,"",x),_f(e,a6,"",x),_f(e,o6,"",_),ii(e,l6,"",x,"ALL"),ii(e,c6,"",x,"ALL"),ii(e,u6,"",x,"ALL"),ii(e,d6,"",x,"ALL"),ii(e,h6,"",x,"ALL"),ii(e,MS,"",_,"ALL"),ii(e,f6,"",_,"DAY_HOUR"),ii(e,m6,"",_,"DAY_HOUR"),ii(e,p6,"",_,"ALL"),ii(e,g6,"",_,"ALL"),Vt(e,b6,"",_,"ALL"),Vt(e,CS,"",_,"ALL"),Vt(e,y6,"",_,"ALL"),Vt(e,v6,"",_,"ALL"),Vt(e,_6,"",_,"ALL"),Vt(e,x6,"",_,"ALL"),Vt(e,w6,"",_,"ALL"),Vt(e,RS,"",_,"ALL"),Vt(e,S6,"",_,"ALL"),Vt(e,E6,"",_,"ALL"),Vt(e,T6,"",_,"ALL"),Vt(e,k6,"",_,"ALL"),Vt(e,A6,"",_,"ALL"),Vt(e,LS,"",x,"ALL"),Vt(e,j6,"",x,"ALL"),Vt(e,N6,"",x,"ALL"),Vt(e,BS,"",x,"DAY"),Vt(e,BS,"",x,"HOUR"),Vt(e,PS,"",x,"DAY"),Vt(e,PS,"",x,"HOUR"),Vt(e,$S,"",x,"DAY"),Vt(e,$S,"",x,"HOUR"),Vt(e,O6,"",x,"DAY"),Vt(e,D6,"",x,"ALL"),Vt(e,M6,"",_,"ALL"),Vt(e,IS,"",x,"ALL"),S.has(e[Te.day])){x.push({name:xs(""),weight:mn[Te.day],pos:Te.day});for(const W of[Te.year,Te.month,Te.hour])e[W]===e[Te.day]&&x.push({name:bf("",W),weight:mn[W],pos:W})}const k=zS[u];if(k)for(const W of[Te.year,Te.month,Te.day,Te.hour]){const U=oi(e[W]),B=Xt(e[W]);U===u&&k.includes(B)&&x.push({name:bf("",W),weight:mn[W],pos:W})}for(const[W,U]of US){const B=Pg(W,e),q=Pg(U,e);B&&q&&Gg(x,"",B.pos,q.pos)}{const W=new Set(["",""]),U=new Set(["","","",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(W.has(q)||U.has(V))&&x.push({name:bf("",B),weight:mn[B],pos:B})}}{const W=oi(e[Te.day]),U=e[Te.hour],B=(q,V)=>q.includes(W)&&V.includes(U);B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour}),B(["",""],["",""])&&x.push({name:xs(""),weight:mn[Te.hour],pos:Te.hour})}{const W=Ig(e);["","","",""].every(B=>W.includes(B))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const W=e[Te.day],U=e[Te.hour];(W===""&&U===""||W===""&&U==="")&&x.push({name:bc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const W=Xt(e[Te.year]),U=new Set(Ig(e).slice(1)),B=(q,V)=>q.every(P=>U.has(P))&&W===V;(B(["","",""],"")||B(["","",""],"")||B(["","",""],"")||B(["","",""],""))&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}["",""].includes(e[Te.day])&&_.push({name:xs(""),weight:mn[Te.day],pos:Te.day});{const W=oi(e[Te.day]),B={:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""},:{rok:"",group:["","",""],ma:"",maStem:""}}[W],q=e.some(Z=>Xt(Z)===B.rok),P=oi(e[Te.hour])===B.maStem;q&&P&&_.push({name:bc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}{const W=oi(e[Te.day]),U=Xt(e[Te.day]),B=Xt(e[Te.hour]),V={:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""},:{rok:"",ma:"",rokStem:"",maStem:""}}[W];if(V){const P=U===V.rok,Z=B===V.ma,ie=pf(V.rokStem,e[Te.day],"classic")||pf(V.rokStem,e[Te.hour],"classic"),me=pf(V.maStem,e[Te.day],"classic")||pf(V.maStem,e[Te.hour],"classic");P&&Z&&(ie||me)&&_.push({name:bc("",Te.day,Te.hour),weight:mn[Te.hour],pos:Te.hour})}}{const W=new Set(["","","","","",""]),U=e.map(oi),B=e.map(Xt),q=U.concat(B).filter(ie=>W.has(ie)).length,V=t?oi(t):"",P=t?Xt(t):"",Z=W.has(V)||W.has(P);(q>=4||q===3&&Z)&&x.push({name:xs(""),weight:mn[Te.day],pos:Te.day})}{const W=new Set(["",""]),U=new Set(["",""]);for(let B=0;B<=3;B++){const q=oi(e[B]),V=Xt(e[B]);(W.has(q)||U.has(V))&&x.push({name:bf("",B),weight:mn[B],pos:B})}}{const W=[[Te.year,Te.month],[Te.year,Te.day],[Te.month,Te.day],[Te.month,Te.hour],[Te.day,Te.hour]];for(const[U,B]of W){const q=Xt(e[U]),V=Xt(e[B]);if(zu(zg,q,V)){const P=HS(zg,q,V);Gg(x,`${P}`,U,B)}}}{const W=[[Te.year,Te.month,0],[Te.month,Te.day,1],[Te.month,Te.hour,0],[Te.day,Te.hour,0]];for(const[U,B,q]of W){const V=Xt(e[U]),P=Xt(e[B]);if(zu(Ug,V,P)){const Z=HS(Ug,V,P),ie=(q?1:0)+(C6.has(V+P)?1:0);Gg(x,`${Z}`,U,B,ie)}}}function N(W){const U=W.lastIndexOf("_");return U>=0?W.slice(U+1):W}const C=new Set(["",""]);function $(W){return C.has(W)?!0:W.endsWith("")||W.endsWith("")}function A(W){const U=new Map;for(const q of W){const V=N(q.name);U.has(V)||U.set(V,[]),U.get(V).push(q)}const B=[];for(const[q,V]of U)if($(q))B.push(...V);else{const P=V.sort((Z,ie)=>dc[Z.pos]!==dc[ie.pos]?dc[ie.pos]-dc[Z.pos]:ie.weight-Z.weight)[0];B.push(P)}return B}const D=yf(e[Te.day]),M=yf(e[Te.year]);{const W=(l?.voidBasis??"day")==="day"?D:M;if(W){const[U,B]=W.map(yr),q=[Te.year,Te.month,Te.day,Te.hour];for(const V of q){const P=Xt(e[V]);(P===U||P===B)&&x.push({name:O9(l?.voidBasis??"day",V),weight:mn[V],pos:V})}}}const G=A(TS(_)),H=A(TS(x)),F={si:[],il:[],yeon:[],wol:[]},K={si:[],il:[],yeon:[],wol:[]};for(const W of G)F[gf(W.pos)].push(W.name);for(const W of H)K[gf(W.pos)].push(W.name);const ae=[],Q=[],Y=[],te=[],re=[],Se=[],X=[],oe=[];function J(W,U){W.includes(U)||W.push(U)}function ye(W,U){const B=C9(U);if(!B)return;const q=B.branch,V=B.stem;let P,Z;switch(W){case"dae":P=ae,Z=re;break;case"se":P=Q,Z=Se;break;case"wol":P=Y,Z=X;break;case"il":P=te,Z=oe;break;default:return}ea(AS[m])===V&&J(P,Iu("",W)),ea(jS[m])===V&&J(P,Iu("",W)),ea(NS[m])===V&&J(P,Iu("",W)),ea(OS[m])===V&&J(P,Iu("",W)),MS[m]?.includes(q)&&J(P,Iu("",W)),CS[u]?.includes(q)&&J(P,nc("",W)),RS[u]?.includes(q)&&J(P,nc("",W)),LS[u]?.includes(q)&&J(Z,nc("",W)),IS[u]?.includes(q)&&J(Z,nc("",W)),zS[u]?.includes(q)&&J(Z,nc("",W)),W==="se"&&(L9[p]?.includes(q)&&J(Z,kS(W,"")),iA[p]?.includes(q)&&J(Z,kS(W,"")));for(const me of y)if(zu(US,q,me)){const ce=Pg(me,e)?.pos;ce!==void 0&&J(Z,$g("",W,ce));break}new Set(["",""]).has(u)&&new Set(["","","",""]).has(q)&&J(Z,nc("",W));const ie=(l?.voidBasis??"day")==="day"?D:M;ie&&(q===ie[0]||q===ie[1])&&J(Z,D9(W,l?.voidBasis??"day"));for(let me=0;me<=3;me++){const ce=Xt(e[me]);zu(zg,q,ce)&&J(Z,$g("",W,me)),zu(Ug,q,ce)&&J(Z,$g("",W,me))}if(W==="se"){const me=(l?.samjaeBasis??"day")==="day"?f:p,ce=me?Hg(me):null;ce&&ce.includes(q)&&J(Z,M9(W,l?.samjaeBasis??"day"))}}return ye("dae",t??null),ye("se",n??null),ye("wol",i??null),ye("il",o??null),{good:{si:[],il:[],yeon:[],wol:[],...(()=>{const W={si:[],il:[],yeon:[],wol:[]};for(const U of G)W[gf(U.pos)].push(U.name);return W})(),dae:ae,se:Q,wolun:Y,ilun:te},bad:{si:[],il:[],yeon:[],wol:[],...(()=>{const W={si:[],il:[],yeon:[],wol:[]};for(const U of H)W[gf(U.pos)].push(U.name);return W})(),dae:re,se:Se,wolun:X,ilun:oe},meta:{voidPair:{day:yf(e[Te.day])??void 0,year:yf(e[Te.year])??void 0},samjaeYears:{day:Hg(f)??void 0,year:Hg(p)??void 0},currentBasis:{voidBasis:l?.voidBasis??"day",samjaeBasis:l?.samjaeBasis??"day"}}}}function L6(e,t){if(e==="#")return"bg-neutral-100 text-neutral-500 border-neutral-200 dark:bg-neutral-900 dark:text-neutral-500 dark:border-neutral-700";switch(t){case"natal":return"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800";case"dae":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800";case"se":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800";case"wol":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-800";case"il":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800";default:return""}}function B6({items:e,source:t}){const n=e.length>0?e:["#"];return g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((i,o)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap "+L6(i,t),children:i},`${t}-${o}-${i}`))})}function GS({title:e,rows:t}){return g.jsxs("div",{className:"space-y-2 desk:flex-1 desk:px-1",children:[g.jsx("div",{className:"text-md font-bold text-neutral-800 dark:text-neutral-200 mt-2",children:e}),t.map(n=>{const o=n.items.some(l=>l!=="#")?"shrink-0 w-12 text-xs font-semibold text-orange-700 dark:text-orange-300 mt-1":"shrink-0 w-12 text-xs font-semibold text-neutral-700 dark:text-neutral-300 mt-1";return g.jsxs("div",{className:"flex items-start gap-3 border border-gray-700 dark:border-gray-400 p-2 rounded-sm",children:[g.jsx("div",{className:o,children:n.label}),g.jsx(B6,{items:n.items.length>0?n.items:["#"],source:n.source})]},`${e}-${n.label}`)})]})}function P6({pillars:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,tab:l=""}){const{settings:u}=Wn(),[f,m]=R.useState(""),[p,y]=R.useState("");R.useEffect(()=>{u.sinsalBase===""?(m(""),y("")):(m(""),y(""))},[u.sinsalBase]);const _=R.useMemo(()=>({voidBasis:f===""?"day":"year",samjaeBasis:p===""?"day":"year"}),[f,p]),x=R.useMemo(()=>Gr({natal:e,daewoon:t,sewoon:n,wolwoon:i,ilwoon:o,basis:_}),[e,t,n,i,o,_]),{good:S,bad:T,meta:k}=x,N=ae=>ae.map(Q=>Q==="#"?Q:` ${Q}`),C=(ae,Q)=>{const Y=["natal"];return Q===""&&Y.push("natal"),Q===""&&Y.push("natal","dae"),Q===""&&Y.push("natal","dae","se"),Q===""&&Y.push("natal","dae","se","wol"),Q===""&&Y.push("natal","dae","se","wol","il"),ae.filter(te=>Y.includes(te.source))},$=[{label:"",items:N(S.si),source:"natal"},{label:"",items:N(S.il),source:"natal"},{label:"",items:N(S.wol),source:"natal"},{label:"",items:N(S.yeon),source:"natal"},{label:"",items:S.dae,source:"dae"},{label:"",items:S.se,source:"se"},{label:"",items:S.wolun,source:"wol"},{label:"",items:S.ilun,source:"il"}],A=[{label:"",items:N(T.si),source:"natal"},{label:"",items:N(T.il),source:"natal"},{label:"",items:N(T.wol),source:"natal"},{label:"",items:N(T.yeon),source:"natal"},{label:"",items:T.dae,source:"dae"},{label:"",items:T.se,source:"se"},{label:"",items:T.wolun,source:"wol"},{label:"",items:T.ilun,source:"il"}],D=C($,l),M=C(A,l),G=k.voidPair.day?`(${k.voidPair.day.join("")})`:"()",H=k.voidPair.year?`(${k.voidPair.year.join("")})`:"()",F=k.samjaeYears.day?`(${k.samjaeYears.day.join("")})`:"()",K=k.samjaeYears.year?`(${k.samjaeYears.year.join("")})`:"()";return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-base font-bold mb-1",children:"(/)"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:f,onChange:ae=>m(ae.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:G}),g.jsx("option",{value:"",children:H})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-neutral-600 dark:text-neutral-300",children:" "}),g.jsxs("select",{value:p,onChange:ae=>y(ae.target.value),className:"px-2 h-30 rounded border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:F}),g.jsx("option",{value:"",children:K})]})]})]}),g.jsxs("div",{className:"desk:flex",children:[g.jsx(GS,{title:"()",rows:D}),g.jsx("div",{className:"block desk:hidden border-t border-neutral-200 dark:border-neutral-800 mt-4 mb-3"}),g.jsx(GS,{title:"()",rows:M})]})]})}const Ci={year:0,month:1,day:2,hour:3},lA={[Ci.year]:.3,[Ci.month]:.5,[Ci.day]:.3,[Ci.hour]:.3},cA={[Ci.year]:.15,[Ci.month]:.2,[Ci.day]:0,[Ci.hour]:.15},$6=e=>Zb.has(e)?e:Vb[e]??e,I6=e=>km.has(e)?e:Am[e]??e,z6=e=>typeof e=="string"&&e.length>=2?$6(e.slice(-1)):"",U6=e=>typeof e=="string"&&e.length>=1?I6(e.slice(0,1)):"",wn=(e,t,n,i)=>({han:e,nan:t,jo:n,seup:i}),H6={:wn(2,0,.5,2),:wn(2,0,0,2),:wn(2,0,0,2),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,2,1,2),:wn(0,2,2,.5),:wn(0,2,2,0),:wn(0,2,2,1),:wn(2,0,0,2),:wn(2,0,0,2),:wn(2,0,1,1)},G6={:wn(0,1,1,0),:wn(0,1,1,0),:wn(0,2,2,0),:wn(0,2,2,0),:wn(0,0,1,0),:wn(0,0,0,1),:wn(1,0,0,1),:wn(1,0,0,1),:wn(2,0,0,2),:wn(2,0,0,2)},FS=e=>Math.max(0,Math.min(100,e));function YS(e,t){const n=Math.max(0,e),i=Math.max(0,t),o=n+i;return o<=0?50:i/o*100}function F6(e){let t=0,n=0,i=0,o=0;return[Ci.year,Ci.month,Ci.day,Ci.hour].forEach(l=>{const u=H6[z6(e[l])],f=G6[U6(e[l])],m=lA[l],p=cA[l];m>0&&u&&(t+=u.han*m,n+=u.nan*m,i+=u.jo*m,o+=u.seup*m),p>0&&f&&(t+=f.han*p,n+=f.nan*p,i+=f.jo*p,o+=f.seup*p)}),{han:t,nan:n,jo:i,seup:o}}function Y6(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map(n=>typeof n=="string"?n:"")}function q6(e){const t=Y6(e);return R.useMemo(()=>{const{han:n,nan:i,jo:o,seup:l}=F6(t),u=YS(n,i),f=YS(l,o);return{hanNanPct:FS(u),joSeupPct:FS(f),raw:{han:n,nan:i,jo:o,seup:l},weights:{branch:lA,stem:cA}}},[t])}function qS({label:e,percent:t,leftHint:n,midHint:i,rightHint:o}){const l=R.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),u=[10,20,35,45,55,65,80];return g.jsxs("div",{className:"w-full mx-auto p-2 desk:p-4 bg-neutral-100 dark:bg-neutral-800 rounded-xl",children:[g.jsxs("div",{className:"flex justify-between text-[11px] text-neutral-400 mb-1",children:[g.jsx("span",{children:n}),g.jsx("span",{children:i}),g.jsx("span",{children:o})]}),g.jsxs("div",{className:"relative h-4 rounded bg-gradient-to-r from-blue-500 via-yellow-400 to-red-500",children:[u.map(f=>g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/30",style:{left:`${f}%`},title:`${f}%`},f)),g.jsx("div",{className:"absolute top-0 h-4 w-[1px] bg-black/40",style:{left:"50%"},title:"50%"}),g.jsx("div",{className:"absolute -top-1 h-6 w-2 bg-white rounded shadow-sm",style:{left:`${l}%`,transform:"translateX(-50%)"},"aria-label":`${e} ${l.toFixed(1)}%`})]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs border border-neutral-600 text-neutral-700 dark:text-neutral-200",children:e}),g.jsxs("span",{className:"text-xs text-neutral-400",children:[l.toFixed(1),"%"]})]})]})}function Z6({natal:e}){const{hanNanPct:t,joSeupPct:n}=q6(e);return g.jsxs("div",{className:"flex gap-2",children:[g.jsx(qS,{label:"",percent:t,leftHint:"",midHint:"",rightHint:""}),g.jsx(qS,{label:"",percent:n,leftHint:"",midHint:"",rightHint:""})]})}const V6=Object.fromEntries(mi..map((e,t)=>[e,jr[t]])),K6=Object.fromEntries(jr.map((e,t)=>[e,mi.[t]])),W6=Object.fromEntries(mi..map((e,t)=>[e,Yr[t]])),X6=Object.fromEntries(Yr.map((e,t)=>[e,mi.[t]])),J6=e=>V6[e]??e,Q6=e=>W6[e]??e,e$=e=>K6[e]??e,t$=e=>X6[e]??e;function uA(e){const t={...e};for(const n of Object.keys(e)){if(n.length<2)continue;const i=n.charAt(0),o=n.charAt(1),l=/[]/.test(i)||/[]/.test(o)?`${J6(i)}${Q6(o)}`:`${e$(i)}${t$(o)}`;t[l]===void 0&&(t[l]=e[n])}return t}const dA={:1,:.2,:1,:1,:.5,:.7,:0,:.5,:1,:1,:0,:1,:0,:0,:.3,:0,:.5,:.3,:0,:0,:.3,:0,:.8,:.3,:0,:.5,:0,:0,:.3,:.3,:0,:.3,:0,:0,:.8,:0,:0,:.8,:0,:0,:.5,:0,:1,:.5,:0,:0,:.7,:0,:1,:.5,:.7,:0,:.2,:.7,:1,:.7,:.7,:1,:.2,:.7},n$={...dA,:.8,:.3,:.5,:.5,:.2,:.2,:.8,:.2},r$=uA(dA),i$=uA(n$),s$={:"",:"",:"",:"",:""},a$={:"",:"",:"",:"",:""},o$={:"",:"",:"",:"",:""},l$={:"",:"",:"",:"",:""},c$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},u$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},d$=e=>c$[e]??e,h$=e=>u$[e]??e;function hA(e){return!e||e.length<2?"":`${d$(e[0])}${h$(e[1])}`}const fA=e=>e&&e.length>=1?e[0]:"",mA=e=>e&&e.length>=2?e[1]:"";function pA(e){return{:e,:s$[e],:a$[e],:o$[e],:l$[e]}}const gA={:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","","","","","",""],:["","","","","","","",""],:["","","","","","","",""]};function f$(e,t){const n=(e??[]).slice(0,4).map(hA);if(n.length!==4||n.some(x=>x.length<2))return{flags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},monthBranch:"",dayEl:""};const i=fA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(x=>mA(x)),u={:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},f=gA[i]??[],m=l[1];f.includes(m)&&(u..=!0,u..=!0);const p=l[2];f.includes(p)&&(u..=!0,u..=!0);const y=pA(o).,_=t[y]??0;return u..=_>=30,{flags:u,monthBranch:m,dayEl:o}}function bA(e,t){const n=(e??[]).slice(0,4).map(hA);if(n.length<3||n[0].length<2||n[1].length<2||n[2].length<2){const T={:!1,:!1,:!1};return{flags:{:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T},:{...T}},monthBranch:"",dayEl:""}}const i=fA(n[2]),o=i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":i===""||i===""?"":"",l=n.map(T=>mA(T)),u={:!1,:!1,:!1},f={:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u},:{...u}},m=gA[i]??[],p=l[1];m.includes(p)&&(f..=!0,f..=!0,f..=!0,f..=!0);const y=l[2];m.includes(y)&&(f..=!0,f..=!0,f..=!0,f..=!0);const _=pA(o).;return(t[_]??0)>=30&&(f..=!0,f..=!0,f..=!0,f..=!0),{flags:f,monthBranch:p,dayEl:o}}const m$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},p$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},g$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},y$=e=>m$[e]??e,v$=e=>p$[e]??e;function _$(e){return!e||e.length<2?"":`${y$(e[0])}${v$(e[1])}`}function qo(e){return SS[e]??SS[g$[e]??""]}function Zo(e){return ES[e]??ES[b$[e]??""]}const Fg=["year","month","day","hour"],x$={year:{stem:10,branch:10},month:{stem:15,branch:30},day:{stem:25,branch:25},hour:{stem:15,branch:15}},w$={year:{stem:10,branch:10},month:{stem:15,branch:45},day:{stem:25,branch:40},hour:{stem:15,branch:12.5}},S$=new Set(["","","","",""]),E$=new Set(["","","","","",""]),T$=new Set(["","","",""]),Yg=e=>S$.has(e)?"":"",qg=e=>{const t=E$.has(e)?"":"";return T$.has(e)?t===""?"":"":t};function ZS(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.floor(f+.5)),o=100-i.reduce((f,m)=>f+m,0);if(o===0)return i;const l=n.map((f,m)=>({i:m,frac:f-Math.floor(f+.5)})).sort((f,m)=>m.frac-f.frac),u=i.slice();if(o>0)for(let f=0;f<o;f++)u[l[f].i]+=1;else for(let f=0;f<-o;f++)u[l[l.length-1-f].i]-=1;return u}function k$(e,t){return e===0?t?1:.8:e===1?t?.6:.5:t?.3:.2}const xf={:.15,:.1,:-.15,:-.2,:-.25},ym={:"",:"",:"",:"",:""},yA={:"",:"",:"",:"",:""},dd={:"",:"",:"",:"",:""},A$={:"",:"",:"",:"",:""};function wf(e,t){return e===t?"":ym[t]===e?"":ym[e]===t?"":dd[e]===t?"":dd[t]===e?"":""}const Ga=e=>e&&e.length>=1?e[0]:"",Vo=e=>e&&e.length>=2?e[1]:"";function j$(e,t){const n=e.reduce((m,p)=>m+p,0);if(n<=0||t<=0)return new Array(e.length).fill(0);const i=e.map(m=>m/n*t),o=i.map(m=>Math.floor(m));let l=t-o.reduce((m,p)=>m+p,0);const u=i.map((m,p)=>({i:p,frac:m-Math.floor(m)})).sort((m,p)=>p.frac-m.frac),f=o.slice();for(let m=0;m<u.length&&l>0;m++)f[u[m].i]+=1,l-=1;return f}function VS(e,t){switch(e){case"":return t;case"":return ym[t];case"":return dd[t];case"":return A$[t];case"":return yA[t];default:return t}}function Ib(e){const{pillars:t,dayStem:n,mode:i,debug:o,useHarmonyOverlay:l,criteriaMode:u,luck:f}=e,m=u==="modern"?x$:w$,p=i==="classic"?i$:r$,y={:0,:0,:0,:0,:0},_={},x={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},S=(t??[]).slice(0,4).map(_$),T=S.length===4&&S[0]&&S[0].length>=2&&S[1]&&S[1].length>=2&&S[2]&&S[2].length>=2,k={totalsSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},perStemAugBare:{},perStemAugFull:{}};if(!T){const P=["","","","",""].map(Z=>({name:Z,value:0,color:"#999999"}));return{overlay:k,totals:P,perTenGod:{:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}},PerTenGodSub:{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0},elementScoreRaw:y,deukFlags:{:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1},:{:!1,:!1,:!1}},perStemElement:{},perStemElementScaled:{},stemScoreRaw:{},elementPercent100:{:0,:0,:0,:0,:0}}}const N=Ga(S[2]),C=n??N,$=C===""||C===""?"":C===""||C===""?"":C===""||C===""?"":C===""||C===""?"":"",A=[{val:0},{val:0},{val:0},{val:0}],D=[[],[],[],[]];for(const P of S){if(!P)continue;const Z=P.charAt(0),ie=P.charAt(1);_[Z]=(_[Z]??0)+50;const me=x[ie];me&&(_[me]=(_[me]??0)+50)}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Fg[P],me=Ga(Z),ce=Vo(Z),xe=m[ie],ke=qo(me);ke&&(y[ke]+=xe.stem,A[P]={stem:me,el:ke,pol:Yg(me),val:xe.stem});const je=Zo(ce);je&&(y[je]+=xe.branch,D[P].push({el:je,pol:qg(ce),val:xe.branch}))}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Fg[P],me=p[Z]??0;if(me===0)continue;const ce=Ga(Z),xe=qo(ce);if(!xe)continue;const ke=m[ie].stem*me;y[xe]+=ke,A[P].val+=ke}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=Zo(ie);if(!me)continue;const ce=m[Fg[P]].branch,xe=qg(ie);let ke=0;const je=[P];P-1>=0&&je.push(P-1),P+1<=3&&je.push(P+1),P-2>=0&&je.push(P-2),P+2<=3&&je.push(P+2);const Me=Array.from(new Set(je));for(const Ee of Me){if(!S[Ee]||S[Ee].length<2)continue;const Pe=Ga(S[Ee]),Ce=qo(Pe);if(!Ce||Ce!==me)continue;const Be=Yg(Pe)===xe,Ue=Math.abs(Ee-P),fe=k$(Ue,Be);ke+=ce*fe}ke!==0&&(y[me]+=ke,D[P].push({el:me,pol:xe,val:ke}))}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Ga(Z),me=qo(ie);if(!me)continue;let ce=0;const xe=Vo(S[P]),ke=Zo(xe);ke&&(ce+=xf[wf(me,ke)]);const je=P===0?[1]:P===3?[2]:[P-1,P+1];for(const Ee of je){const Pe=Ga(S[Ee]),Ce=qo(Pe);Ce&&(ce+=xf[wf(me,Ce)])}const Me=A[P].val;if(Me!==0&&ce!==0){const Ee=Math.round(Me*(1+ce)*10)/10,Pe=Ee-Me;y[me]+=Pe,A[P].val=Ee}}for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=Zo(ie);if(!me)continue;let ce=0;const xe=Ga(S[P]),ke=qo(xe);ke&&(ce+=xf[wf(me,ke)]);const je=P===0?[1]:P===3?[2]:[P-1,P+1];for(const Ee of je){if(!S[Ee]||S[Ee].length<2)continue;const Pe=Vo(S[Ee]),Ce=Zo(Pe);Ce&&(ce+=xf[wf(me,Ce)])}const Me=D[P].reduce((Ee,Pe)=>Ee+Pe.val,0);if(Me!==0&&ce!==0){const Pe=Math.round(Me*(1+ce)*10)/10-Me;y[me]+=Pe,D[P].length>0&&(D[P][0].val+=Pe)}}l&&GP(S,y);const M={dae:{stem:.04,branch:.04},se:{stem:.03,branch:.03},wol:{stem:.02,branch:.02},il:{stem:.01,branch:.01}},G=[];if(!(!f||f.tab==="")){let P=function(Z,ie){const me=Z?Fe(Z):"";if(!me||me.length<2)return;const ce=Ga(me),xe=Vo(me),ke=qo(ce),je=Zo(xe),Me=Math.max(1,(y.??0)+(y.??0)+(y.??0)+(y.??0)+(y.??0)),Ee=M[ie];if(ke){const Pe=Math.round(Me*Ee.stem);y[ke]+=Pe,G.push({stem:ce,el:ke,pol:Yg(ce),val:Pe})}if(je){const Pe=Math.round(Me*Ee.branch);y[je]+=Pe,G.push({el:je,pol:qg(xe),val:Pe})}};P(f.dae,"dae"),(f.tab===""||f.tab===""||f.tab==="")&&P(f.se,"se"),(f.tab===""||f.tab==="")&&P(f.wol,"wol"),f.tab===""&&P(f.il,"il")}const H={:0,:0,:0,:0,:0};Object.entries(y).forEach(([P,Z])=>{const ie=te(P,$);H[ie]+=Z});const F=["","","","",""],K=ZS(F.map(P=>H[P])),ae=Xk(C),Q=F.map((P,Z)=>({name:P,value:K[Z],color:ae[P]})),Y={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};function te(P,Z){return P===Z?"":ym[Z]===P?"":dd[Z]===P?"":dd[P]===Z?"":yA[Z]===P?"":""}function re(P,Z){switch(te(P,$)){case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break;case"":Y.+=Z*.5,Y.+=Z*.5;break}}Object.entries(y).forEach(([P,Z])=>{Z>0&&re(P,Z)});const Se={:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0},:{a:"",b:"",aVal:0,bVal:0}};for(const P of F){const Z=Q.find(je=>je.name===P)?.value??0,ie=Se[P].a,me=Se[P].b,ce=Y[ie]??0,xe=Y[me]??0,ke=ce+xe;if(ke>0){const je=Math.floor(Z*ce/ke+.5),Me=Z-je;Se[P].aVal=je,Se[P].bVal=Me}else Se[P].aVal=Math.floor(Z/2+.5),Se[P].bVal=Z-Se[P].aVal}const{flags:X}=f$(S,y),oe={};A.forEach(P=>{if(P.stem&&P.el&&P.val){const Z=`${P.stem}${P.el}`;oe[Z]=(oe[Z]??0)+P.val}});for(let P=0;P<4;P++){const Z=S[P];if(!Z||Z.length<2)continue;const ie=Vo(Z),me=x[ie],ce=Zo(ie);if(!me||!ce)continue;const xe=`${me}${ce}`,ke=D[P].reduce((je,Me)=>je+Me.val,0);oe[xe]=(oe[xe]??0)+ke}const J=["","","","","","","","","",""],ye={};J.forEach(P=>{ye[P]=0}),F.forEach(P=>{const Z=Q.find(Me=>Me.name===P)?.value??0,ie=VS(P,$),me=Object.entries(oe).filter(([Me])=>Me.endsWith(ie)),ce=me.map(([Me])=>Me),xe=me.map(([,Me])=>Me),ke=Math.max(0,Math.round(Z*10)),je=j$(xe.length?xe:[1,1],ke);if(ce.length===2)ye[ce[0]]=(je[0]??Math.round(ke/2))/10,ye[ce[1]]=(je[1]??ke-(je[0]??0))/10;else if(ce.length===1)ye[ce[0]]=ke/10;else{const Me=ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:ie===""?["",""]:["",""],Ee=Math.floor(ke/2),Pe=ke-Ee;ye[Me[0]]+=Ee/10,ye[Me[1]]+=Pe/10}});const W=["","","","",""],U={:0,:0,:0,:0,:0};for(const P of Q){const Z=VS(P.name,$);U[Z]+=P.value}const B=ZS(W.map(P=>U[P])),q={:B[0],:B[1],:B[2],:B[3],:B[4]};return o&&console.log({elementScore:y,totals:Q,perTenGod:Se,perStemRaw:oe,perStemElementScaled:ye,elementPercent100:q}),{overlay:{totalsSub:Y,perStemAugBare:oe,perStemAugFull:ye},totals:Q,perTenGod:Se,PerTenGodSub:Y,stemScoreRaw:_,elementScoreRaw:y,deukFlags:X,perStemElement:oe,perStemElementScaled:ye,elementPercent100:q}}function N$(e){const t=e.reduce((f,m)=>f+m,0);if(t<=0)return e.map(()=>0);const n=e.map(f=>f*100/t),i=n.map(f=>Math.round(f));let l=100-i.reduce((f,m)=>f+m,0);const u=n.map((f,m)=>({i:m,f:f-Math.round(f)})).sort((f,m)=>m.f-f.f);for(let f=0;f<u.length&&l>0;f++)i[u[f].i]+=1,l-=1;return i}const KS=["","","","",""];function O$(e,t){const n=[Fe(e[0]??""),Fe(e[1]??""),Fe(e[2]??""),Fe(e[3]??"")],{elementScoreRaw:i}=Ib({pillars:n,criteriaMode:t?.criteriaMode??"modern",useHarmonyOverlay:t?.useHarmonyOverlay??!0,luck:void 0}),o=KS.map(f=>i[f]??0),l=N$(o),u={:0,:0,:0,:0,:0};return KS.forEach((f,m)=>{u[f]=l[m]}),u}function vA(e,t){const n=O$(e,t),i=Fe(e[2]??"").charAt(0),l={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[i];if(!l)return 0;const u={:"",:"",:"",:"",:""},f=n[l]??0,m=n[u[l]]??0;return f+m*.7}const Sf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ef={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Tf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},D$=["","","","",""];function WS(e){return D$.includes(e)}const M$={:"",:"",:"",:"",:""},C$={:"",:"",:"",:"",:""},R$={:"",:"",:"",:"",:""},L$={:"",:"",:"",:"",:""},zb={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},B$=["","","","","","","","","",""],P$={natal:50,dae:30,se:20,wol:7,il:3};function vm(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Sf[t])return Sf[t];if(["","","","","","","","","","","",""].includes(t))return Tf[t]??null;if(Ef[t])return Tf[Ef[t]]??null;const n=t.charAt(0);return Sf[n]?Sf[n]:["","","","","","","","","",""].includes(n)?n:Ef[n]?Tf[Ef[n]]??null:["","","","","","","","","","","",""].includes(n)?Tf[n]??null:null}function $$(e,t){const n=zb[e],i=zb[t];if(!n||!i)return"";let o;i===n?o="":i===M$[n]?o="":i===C$[n]?o="":i===R$[n]?o="":i===L$[n]?o="":o="";const l=WS(e)===WS(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function _m(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.round(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.round(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function XS(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=vm(i);if(!l)continue;const u=$$(t,l);n[u]+=o}return _m(n)}function I$(e){return{:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.},:{a:"",b:"",aVal:e.,bVal:e.}}}function JS(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=vm(n);o&&(t[o]=(t[o]??0)+i)}return t}function QS(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of B$){const o=zb[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}function e2(e){const t=["","","","",""],n={:0,:0,:0,:0,:0};for(const i of t)typeof e[i]=="number"&&(n[i]=e[i]);return n}function z$(e,t){const n=t?.dae?kf(t.dae):{},i=t?.se?kf(t.se):{},o=t?.wol?kf(t.wol):{},l=t?.il?kf(t.il):{},u={},f=[{kind:"natal",bare:e},{kind:"dae",bare:n},{kind:"se",bare:i},{kind:"wol",bare:o},{kind:"il",bare:l}];for(const{kind:p,bare:y}of f){const _=P$[p];if(!y||Object.keys(y).length===0)continue;const x=_m(y);for(const[S,T]of Object.entries(x))u[S]=(u[S]??0)+T*_}const m=Object.values(u).reduce((p,y)=>p+y,0);if(m>0)for(const p of Object.keys(u))u[p]=u[p]/m*100;return u}function U$(e){if(!e)return[];const t=vm(e.charAt(0)),n=vm(e.charAt(1));return[t,n].filter(Boolean)}function kf(e){const t=U$(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function _A(e){const{natal:t,tab:n,chain:i,hourKey:o="unified"}=e,l=[Fe(t[0]??""),Fe(t[1]??""),Fe(t[2]??""),Fe(t[3]??"")],u=l[2]?.charAt(0)??"",{hiddenStemMode:f,hiddenStem:m}=gc,p=f==="classic"?"classic":"hgc",y=i?{tab:n,dae:i.dae?Fe(i.dae):void 0,se:(n===""||n===""||n==="")&&i.se?Fe(i.se):void 0,wol:(n===""||n==="")&&i.wol?Fe(i.wol):void 0,il:n===""&&i.il?Fe(i.il):void 0}:{tab:n},_=Ib({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:y}),x=Ib({pillars:l,dayStem:u,mode:p,criteriaMode:"modern",useHarmonyOverlay:!0,luck:{tab:"",dae:void 0,se:void 0,wol:void 0,il:void 0}}),S=JS(_.perStemElementScaled),T=n===""?S:z$(S,i),k=_m(T),N=XS(T,u),C=I$(N),$=QS(k),A=JS(x.perStemElementScaled),D=XS(A,u),M=_m(A),G=QS(M);return{elementScoreRaw:_.elementScoreRaw,elementPercent100:_.elementPercent100,totals:_.totals,perStemElementScaled:_.perStemElementScaled,dayStem:u,mergedStems:k,perTenGodSub:N,perTenGod:C,overlay:{totalsSub:N,perStemAugBare:T,perStemAugFull:$},natalFixed:{elementScoreRaw:e2(x.elementScoreRaw),elementPercent100:e2(x.elementPercent100),totalsSub:D,overlay:{totalsSub:D,perStemAugBare:A,perStemAugFull:G}}}}const Ri={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ts={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},H$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Li(e){return["","","","",""].includes(e)}function G$(e){return["","","","","",""].includes(e)}const xA={:"",:"",:"",:"",:""},tv={:"",:"",:"",:"",:""},wA={:"",:"",:"",:"",:""},SA={:"",:"",:"",:"",:""},Zg=e=>({:"",:"",:"",:"",:"",:"",:"",:"",:"",:""})[e]??e,Di=e=>e&&e.length>=1?e.charAt(0):"",On=e=>e&&e.length>=2?e.charAt(1):"",F$=e=>Array.from(new Set(e)),Y$={:{:{stem:"",w:10},:{stem:"",w:20}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:10},:{stem:"",w:9},:{stem:"",w:11}},:{:{stem:"",w:9},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:10},:{stem:"",w:7},:{stem:"",w:16}},:{:{stem:"",w:9},:{stem:"",w:20}},:{:{stem:"",w:7},:{stem:"",w:3},:{stem:"",w:18}},:{:{stem:"",w:16},:{stem:"",w:7},:{stem:"",w:16}}},q$={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function Z$(e,t){const n=q$[e];if(!n)return!1;const o=as(t).find(f=>f.name===n);if(!o)return!1;const l=new Date(o.date);return Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24))<=12}const V$={:["","",""],:["","",""],:["","",""],:["","",""]};function K$(e,t){const n=V$[e];return n?n.filter(i=>i!==e).every(i=>t.includes(i)):!1}function rs(e,t){const n=Ri[e],i=Ri[t];if(!n||!i)return"";let o;i===n?o="":i===xA[n]?o="":i===tv[n]?o="":i===wA[n]?o="":i===SA[n]?o="":o="";const l=Li(e)===Li(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function W$(e,t){const n=Ri[e],i=Ts[t];if(!n||!i)return"";let o;i===n?o="":i===xA[n]?o="":i===tv[n]?o="":i===wA[n]?o="":i===SA[n]?o="":o="";const l=Li(e)===G$(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function X$(e){return{:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[e]??""}function Ub(e,t){const n=X$(e),i=Li(e),o={:"",:"",:"",:"",:""},l={:"",:"",:"",:"",:""};let u;t===n?u="":o[n]===t?u="":o[t]===n?u="":l[n]===t?u="":l[t]===n?u="":u="";const f=i===Li(J$(t));switch(u){case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":"";case"":return f?"":""}}function J$(e){return{:"",:"",:"",:"",:""}[e]}const Vg={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},EA={:"",:"",:"",:"",:""},TA={:"",:"",:"",:""},Q$=[{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""},{a:"",b:"",to:""}],e8=e=>{const t={:0,:0,:0,:0,:0};for(const n of e){const i=Di(n),o=On(n),l=Ri[i],u=Ts[o];l&&(t[l]+=10),u&&(t[u]+=6)}return t};function t8(e){const{pillars:t,dayStem:n,monthBranch:i,mapping:o}=e,[l,u,f,m]=(t??[]).slice(0,4),p=[Di(l),Di(u),Di(f),Di(m)].filter(Boolean),y=[On(l),On(u),On(f),On(m)].filter(Boolean),_=Ri[n],x=p.map(he=>rs(n,he)),S=[],T=he=>p.filter($e=>$e===he).length,k=he=>y.filter($e=>$e===he).length,N=he=>he.every($e=>y.includes($e)),C=he=>x.some($e=>he.includes($e)),$=Di(u),A=he=>Li(he),D=()=>{const he=p.map($e=>Ri[$e]);return he.length===4&&he.every($e=>$e===he[0])},M=()=>{if(p.length!==4)return!1;const he=p.map(A),$e=he[0]&&!he[1]&&he[2]&&!he[3],Ie=!he[0]&&he[1]&&!he[2]&&he[3];return $e||Ie};Li(n)&&EA[n]===i&&S.push("");const G=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];for(const[he,$e]of G)if(n===he&&i===$e){S.push("");break}!Li(n)&&TA[n]===i&&S.push("");const H=Vg[n];H&&On(f)===H&&_===Ts[On(f)]&&S.push(""),H&&On(m)===H&&_===Ts[On(m)]&&S.push("");const F=[l,u,f,m].map(c8),K=[l,u,f,m].map(u8);for(const he of F);for(const he of K);const ae=o==="hgc"?Cm:Mm;function Q(he){return(ae[he]??[]).filter($e=>["","","","","","","","","",""].includes($e))}const Y=[l,u,f,m].filter(Boolean),re=Y.flatMap(he=>[he.charAt(0),he.charAt(1)]).flatMap(he=>{try{if(["","","","","","","","","",""].includes(he))return[rs(n,he)];if(["","","","","","","","","","","",""].includes(he)){const $e=W$(n,he),Ie=Q(he).map(He=>rs(n,He));return[$e,...Ie]}return[]}catch{return[]}}),Se=he=>re.some($e=>he.includes($e)),X=(he,$e)=>{const Ie=[],He=[];for(const et of Y){const Zt=et.charAt(0),En=et.charAt(1);Ie.push(rs(n,Zt));const Tn=Ts[En];Tn?He.push(Ub(n,Tn)):He.push(null)}const st=(et,Zt)=>!!et&&!!Zt&&(he.includes(et)&&$e.includes(Zt)||$e.includes(et)&&he.includes(Zt));for(let et=0;et<Ie.length;et++)if(st(Ie[et],He[et]))return!0;for(let et=0;et<Ie.length-1;et++)if(st(Ie[et],Ie[et+1])||st(He[et],He[et+1]))return!0;return!1},oe={:["",""],:["",""],:["",""],:["",""]};Se([...oe.])&&Se([...oe.])&&X([...oe.],[...oe.])&&S.push(""),Se([...oe.])&&Se([...oe.])&&X([...oe.],[...oe.])&&S.push("");const J=he=>x.filter($e=>he.includes($e)).length,ye=J(["",""]),W=J([""]),U=J([""]),B=J(["",""]),q=J(["",""]),V=J(["",""]);W>=1&&ye>=1&&ye>=W&&U<=W&&S.push("");const P=J([""]);P>=1&&B>=1&&P>=B&&S.push(""),x.includes("")&&B>=1&&S.push("");const ie=e8(t),me=Object.entries(ie).sort((he,$e)=>$e[1]-he[1]),ce=me[0];if(ce&&ce[1]>=60&&S.push(`(${ce[0]})`),me.length>=2){const[he,$e]=me[0],[,Ie]=me[1];$e>=75&&$e-Ie>=12&&_!==he&&S.push(`(${he})`)}for(const he of Q$){const $e=p.includes(he.a),Ie=p.includes(he.b);if(!$e||!Ie)continue;const He=he.to,st=ie[He]??0,et=Ri[he.a],Zt=Ri[he.b],En=Math.max(ie[et]??0,ie[Zt]??0),Tn=Ts[i]===He,vr=Object.entries(ie).sort((Ct,bn)=>bn[1]-Ct[1])[0]?.[0]===He;let dn=!1;st>=60&&(Tn||vr)&&En<=20&&st-En>=20&&(S.push(`(${He})`),dn=!0),!dn&&st>=50&&(Tn||vr)&&En<=25&&(S.push(`(${He})`),dn=!0),!dn&&st>=35&&S.push(`(${He})`)}const xe=`${Di(m)}${On(m)}`;["",""].includes(n)&&["","",""].includes(xe)&&S.push(""),["","","",""].includes(On(m))&&S.push(""),["",""].includes(n)&&(On(f)===""||On(u)==="")&&!y.includes("")&&S.push("");const ke=p.some(he=>he===""||he===""),je=y.some(he=>he===""||he==="");["",""].includes(On(f))&&!ke&&!je&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push(""),["","",""].every(he=>p.includes(he))&&S.push("");const Me=Object.values(ie).sort((he,$e)=>$e-he);Me.length>=3&&Me[0]-Me[2]<=8&&Me[0]+Me[1]+Me[2]>=80&&S.push(""),q>=1&&V>=1&&Math.abs(q-V)<=1&&S.push(""),N(["","","",""])&&S.push(""),N(["","","",""])&&S.push(""),N(["","","",""])&&S.push(""),y.length===4&&y.every(he=>he===y[0])&&S.push(""),p.length===4&&D()&&M()&&S.push(""),t.every(he=>he&&he===t[0])&&S.push(""),p.length===4&&p.every(he=>he===p[0])&&y.length===4&&y.every(he=>he===y[0])&&S.push(""),ye>=1&&(On(f)===Vg[n]||On(m)===Vg[n])&&S.push(""),T("")>=3&&N(["","",""])&&["","",""].includes(On(f))&&S.push("");const Pe=n===""||n==="",Ce=[["","",""],["","",""]],Be=[["","",""],["","",""]];Pe&&(Ce.some(he=>N(he))||Be.some(he=>N(he)))&&S.push("");const Ue=new Set(["","","","","",""]),fe=`${Di(f)}${On(f)}`;if(Ue.has(fe)&&k("")>=2&&(C(["",""])||y.includes("")||y.includes("")||C(["",""])||S.push("")),new Set(["","","","","",""]).has(fe)&&k("")>=2&&y.includes("")&&S.push(""),n===""&&`${Di(m)}${On(m)}`==""){const he=rs(n,$);!["","","",""].includes(he)&&C(["",""])&&!y.includes("")&&!y.includes("")&&S.push("")}return new Set(["","",""]).has(fe)&&`${Di(m)}${On(m)}`==""&&!y.includes("")&&!C(["",""])&&S.push(""),fe===""&&k("")+k("")>=2&&S.push(""),(fe===""||fe==="")&&k("")>=2&&!C(["",""])&&!y.includes("")&&S.push(""),n===""&&N(["","",""])&&S.push(""),fe===""&&`${Di(m)}${On(m)}`==""&&S.push(""),F$(S)}function n8(e){const{dayStem:t,monthBranch:n,date:i,pillars:o,emittedStems:l=[],otherBranches:u=[],isNeutralized:f,mapping:m}=e,p=[],y=Y$[n];if(!y)return{:"-",:"-",:"-",:"-",:"-",:[],reason:["  "]};const _={:y.?{stem:Zg(y..stem),w:y..w}:void 0,:y.?{stem:Zg(y..stem),w:y..w}:void 0,:{stem:Zg(y..stem),w:y..w}},x=_..stem;let S=x;if(["","","",""].includes(n))S=_..stem,p.push(":   ");else if(["","","",""].includes(n)){const F=[];_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),_.&&F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)}),F.push({from:"",stem:_..stem,w:_..w,emitted:l.includes(_..stem)});const K=F.filter(ae=>ae.emitted);K.length===1?(S=K[0].stem,p.push(`: ${K[0].from}  `)):K.length>1?(K.sort((ae,Q)=>Q.w-ae.w),S=K[0].stem,p.push(`:      ${K[0].from} `)):(S=_..stem,p.push(":    "))}else["","","",""].includes(n)&&(K$(n,u)&&_.?(S=_..stem,p.push(":     ")):Z$(n,i)&&_.?(S=_..stem,p.push(":  +12    ")):(S=_..stem,p.push(":  +12    ")));const T=S;let k="";const N=Ri[T];if(N){const F=Object.entries(tv).find(([,K])=>K===N)?.[0]??null;F&&(k=Object.entries(Ri).find(([ae,Q])=>Q===F&&Li(ae)===Li(T))?.[0]??"")}f?.(T)&&p.push(":   / ");let C="-";const $=rs(t,T),D=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]].some(([F,K])=>F===t&&K===n),M=Li(t)&&EA[t]===n,G=!Li(t)&&TA[t]===n;$===""||$===""?D?(C="",p.push(": /   ")):M?(C="",p.push(":    ")):G?(C="",p.push(":    ")):p.push(": /  "):$===""?C="()":C={:"",:"",:"",:"",:"",:"",:"",:""}[$]??"-";const H=t8({pillars:o,dayStem:t,monthBranch:n,mapping:m});return{:x,:S,:T,:k,:C,:H,reason:p}}const Re=(e,t)=>`${e}+${t}`,Tr=(e,t,n)=>`${e}+${t}+${n}`,r8={[Re("","")]:[""],[Tr("","","")]:void 0,[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Tr("","","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:["",""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""],[Re("","")]:[""]},i8={[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:[""],[Tr("","","")]:["",""]};function s8(){const e={},t={},n=/[]/g;for(const[i,o]of Object.entries(r8)){if(!o)continue;const l=i.match(n);if(!l||l.length<2)continue;const[u,f]=l;e[i]=o.map(m=>`${u}X${f}_${m}`)}for(const[i,o]of Object.entries(i8)){if(!o)continue;const l=i.match(n);if(!l||l.length<3)continue;const[u,f,m]=l;t[i]=o.map(p=>`${u}X${f}X${m}_${p}`)}return{newPairs:e,newTris:t}}const{newPairs:Kg,newTris:Wg}=s8();function a8(e){const[t,n,i,o]=e,l=S=>Di(S),u=l(o),f=l(i),m=l(n),p=l(t),y=[],_=[[u,f],[f,m],[m,p]];for(const[S,T]of _){if(!S||!T)continue;const k=Re(S,T),N=Kg[k];N&&N.length&&y.push(...N);const C=Re(T,S);C!==k&&Kg[C]&&y.push(...Kg[C])}const x=[[u,f,m],[f,m,p]];for(const[S,T,k]of x){if(!S||!T||!k)continue;const N=Tr(S,T,k),C=Wg[N];C&&C.length&&y.push(...C);const $=Tr(k,T,S);$!==N&&Wg[$]&&y.push(...Wg[$])}return Array.from(new Set(y))}const o8={:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1,:!0,:!1},l8={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function c8(e){return e?.charAt(0)??""}function u8(e){return e?.charAt(1)??""}function d8(e,t,n){const[i,o,l,u]=(e??[]).slice(0,4),f=le=>(le?.length??0)>=1?le.charAt(0):"",m=le=>(le?.length??0)>=2?le.charAt(1):"",p=[i,o,l,u].map(f).filter(Boolean),y=[i,o,l,u].map(m).filter(Boolean),_=f(l),x=o8[_]??!1,S=new Set,T=t==="classic"?Mm:Cm,k=new Set(["","","","","","","","","",""]),N=le=>(T[le]??[]).filter(he=>k.has(he)),C=(le,he)=>{const $e=Ts[he];if(!$e)throw new Error(`Unknown branch main element: ${he}`);return Ub(le,$e)},$={:0,:0,:0,:0,:0};for(const le of p){const he=Ri[le];he&&($[he]+=10)}const A=[];for(const le of y){const he=H$[le];he&&A.push(he);const $e=Ts[le];$e&&($[$e]+=6)}const M=[...p,...A].map(le=>rs(_,le)),G={:["",""],:["",""],:["",""],:["",""],:["",""]},H=le=>M.filter(he=>he===le).length,F=le=>M.filter(he=>G[le].includes(he)).length,K=y[1],ae=!!_&&l8[_]===K,Q=n.elementPercent100;Q.>=20&&Q.>=20&&Q.>=15&&S.add("");const Y=[i,o,l,u].filter(Boolean),te=[];for(const le of Y){const he=le.charAt(0),$e=le.charAt(1);te.push(rs(_,he)),te.push(C(_,$e))}const re=(le,he)=>{const $e=(Ie,He)=>!!Ie&&!!He&&le.includes(Ie)&&he.includes(He)||he.includes(Ie)&&le.includes(He);for(let Ie=0;Ie+1<te.length;Ie+=2)if($e(te[Ie],te[Ie+1]))return!0;return!1},Se=le=>te.some(he=>le.includes(he)),X=H("")+H(""),oe=H(""),J=F(""),ye=F(""),W=re(["",""],["",""]);if((oe>=1||X>=2)&&J>=1&&X>J&&ye<=1&&W&&S.add(""),Se(G.)&&Se(G.)&&re(G.,G.)){const le=M.includes("");S.add(le?"":"")}F("")>=2&&F("")>=2&&Math.abs(F("")-F(""))<=1&&F("")<=1&&F("")<=1&&S.add("");const U=H(""),B=H(""),q=H("")+H(""),V=H("")+H(""),P=F("");B>=2&&q>=1&&$.+$.>=20&&S.add(""),B>=2&&V>=1&&$.+$.>=20&&S.add(""),B>=2&&V>=1&&$.+$.>=20&&re([""],["",""])&&P<=1&&S.add(""),U>=2&&V>=1&&$.+$.>=20&&re([""],["",""])&&P<=1&&S.add("");const Z=(le,he)=>{const $e=Ri[le],Ie=Ts[he];return!!$e&&!!Ie&&$e===Ie},ie=[i,o,l,u].filter(Boolean),me=m(l),ce=Z(_,me),xe=ie.map(le=>le.charAt(0)).filter(le=>["",""].includes(rs(_,le)));let ke=!1;for(const le of ie){const he=le.charAt(0),$e=le.charAt(1);if(xe.includes(he)&&Z(he,$e)){ke=!0;break}}ce&&ke&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=.5*(F("")+F("")+F("")+F(""))&&S.add(""),F("")>=3&&F("")>=1&&S.add(""),F("")>=3&&F("")+F("")<=1&&S.add("");const je=H("");F("")+F("")>=2&&je===1&&F("")>=1&&S.add(""),je>=2&&q+F("")>=3&&S.add("");const Me=U+B;(U>=2||Me>=2)&&V>=1&&Me>V&&S.add(""),B>=2&&V>=1&&Me>V&&S.add("");const Ee=H(""),Pe=H("");Ee>=2&&je+Pe>=1&&S.add(""),Ee>=2&&je+Pe===0&&S.add(""),x&&Ee>=2&&je>=1&&S.add(""),!x&&Ee>=2&&je>=1&&S.add(""),H("")>=2&&H("")>=1&&S.add(""),H("")>=1&&H("")>=1&&re([""],[""])&&S.add(""),ae&&je>=1&&F("")+F("")>=2&&S.add("");const Ce=[m(i),m(o),m(l),m(u)].filter(Boolean),Be=[i?.charAt(0),o?.charAt(0),u?.charAt(0)].filter(Boolean),Ue=new Set(Be.map(le=>rs(_,le))),fe=new Set(Ce.flatMap(le=>{const he=Ts[le];return he?[Ub(_,he)]:[]})),Le=new Set(Ce.flatMap(le=>N(le).map(he=>rs(_,he))));return["","","","",""].forEach(le=>{const he=G[le],$e=he.some(st=>Ue.has(st)),Ie=he.some(st=>fe.has(st)),He=he.some(st=>Le.has(st));!$e&&!Ie&&!He?S.add(`${le}`):!$e&&!Ie&&He&&S.add(`${le}`)}),Array.from(S)}function h8(e){const{pillars:t,tab:n,birthDate:i,emittedStems:o,otherBranches:l,isNeutralized:u,mapping:f,unified:m}=e,[p,y,_,x]=t,S=re=>re&&re.length>=1?re.charAt(0):"",T=re=>re&&re.length>=2?re.charAt(1):"",k=T(y),N=S(_),C=i instanceof Date&&!Number.isNaN(i.getTime())?i:new Date,$=[S(p),S(y),S(_),S(x)].filter(re=>!!(re&&re.length===1)),A=[T(p),T(_),T(x)].filter(re=>!!(re&&re.length===1)),D=n8({dayStem:N,monthBranch:k,date:C,pillars:t,emittedStems:o??$,otherBranches:l??A,isNeutralized:u,mapping:f}),M=[` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`,` : ${D.||"-"}`],G=[` : ${D.||"-"}`],H=Array.isArray(D.)&&D..length>0?D..map(re=>` : ${re}`):[" : -"],F=a8(t),K=[...F.length?F.map(re=>`${re}`):[]],Q=[...d8(t,f,m)],Y=({text:re,color:Se})=>{const X={violet:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",amber:"bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:border-amber-800",blue:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800",green:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800",red:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800"};return g.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full border whitespace-nowrap ${X[Se]}`,title:re,children:re})},te=({children:re})=>g.jsx("li",{className:"!flex flex-wrap gap-1 border border-gray-700 dark:border-gray-200 p-2 rounded-sm",children:re});return g.jsxs("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3 text-sm","data-revkey":`gyeok:${n}|${t.join("")}|${M.join(",")}|${G.join(",")}|${H.join(",")}`,children:[g.jsx("div",{className:"font-bold text-base",children:"   "}),g.jsxs("ul",{className:"space-y-1",children:[g.jsx(te,{children:M.map(re=>g.jsx(Y,{text:re,color:"violet"},re))}),g.jsx(te,{children:G.map(re=>g.jsx(Y,{text:re,color:"amber"},re))}),g.jsx(te,{children:H.map(re=>g.jsx(Y,{text:re,color:"blue"},re))}),g.jsx(te,{children:K.map(re=>g.jsx(Y,{text:re,color:"green"},re))}),g.jsx(te,{children:Q.map(re=>g.jsx(Y,{text:re,color:"red"},re))})]}),D.reason.length>0&&g.jsxs("div",{className:"mt-2 text-xs text-neutral-600 dark:text-neutral-400",children:[" ",D.reason.join(" / ")]})]})}const hc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Tc={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},kA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Af={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},f8=["","","","",""];function t2(e){return f8.includes(e)}const m8={:"",:"",:"",:"",:""},p8={:"",:"",:"",:"",:""},g8={:"",:"",:"",:"",:""},b8={:"",:"",:"",:"",:""};function hd(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(hc[t])return hc[t];if(["","","","","","","","","","","",""].includes(t))return Af[t]??null;if(fc[t])return Af[fc[t]]??null;const n=t.charAt(0);return hc[n]?hc[n]:["","","","","","","","","",""].includes(n)?n:fc[n]?Af[fc[n]]??null:["","","","","","","","","","","",""].includes(n)?Af[n]??null:null}function y8(e,t){const n=Tc[e],i=Tc[t];if(!n||!i)return"";let o;i===n?o="":i===m8[n]?o="":i===p8[n]?o="":i===g8[n]?o="":i===b8[n]?o="":o="";const l=t2(e)===t2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function v8(e){switch(e){case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return"";case"":case"":return""}}function Qm(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function _8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e??{})){const o=Tc[hd(n)];o&&i>0&&(t[o]+=i)}return Qm(t)}function x8(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e??{})){if(o<=0)continue;const l=hd(i);if(!l)continue;const u=y8(t,l);n[u]+=o}return n}function w8(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=v8(n);t[o]+=i}return Qm(t)}function Xg(e){if(!e)return"";const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);return i?`${hc[i[1]]}${fc[i[2]]}`:""}function n2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${hc[u[1]]}${fc[u[2]]}`:i<=2?"--":""})}function S8(e,t){const n={:!1,:!1,:!1,:!1,:!1};for(const i of e){if(!i)continue;const o=Tc[i.charAt(0)];o&&(n[o]=!0);{const l=kA[i.charAt(1)];l&&(n[l]=!0)}}return n}function E8(e){const t={:0,:0,:0,:0,:0};for(const n of e){if(!n)continue;const i=Tc[n.charAt(0)],o=kA[n.charAt(1)];i&&(t[i]+=10),o&&(t[o]+=6)}return t}function Jg(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}const T8=["","","","","","","","","",""];function k8(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=hd(n);o&&(t[o]=(t[o]??0)+i)}return t}function A8(e){const n={...{:0,:0,:0,:0,:0,:0,:0,:0,:0,:0}};for(const i of T8){const o=Tc[i],l=`${i}${o}`;n[l]=Math.max(0,Math.round(e[i]??0))}return n}const j8={natal:50,dae:30,se:20,wol:7,il:3};function N8(e){const t={};for(const{kind:i,bare:o}of e){const l=j8[i]??0;if(l<=0)continue;const u=Qm(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function O8(e){if(!e)return[];const t=hd(e.charAt(0)),n=hd(e.charAt(1));return[t,n].filter(Boolean)}function jf(e){const t=O8(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function D8({data:e,pillars:t,lunarPillars:n,daewoonGz:i}){const o=Wn(Ee=>Ee.settings),[l,u]=R.useState("   "),[f,m]=R.useState(""),[p,y]=R.useState(!0),{date:_,yearGZ:x,monthGZ:S,dayGZ:T}=fi(),k=R.useMemo(()=>Fe(x),[x]),N=R.useMemo(()=>Fe(S),[S]),C=R.useMemo(()=>Fe(T),[T]),$=Ed(e,e?.mingSikType),A=R.useMemo(()=>{if(!$?.length)return 0;const Ee=$.findIndex((Pe,Ce)=>{const Be=$[Ce+1]?.at;return _>=Pe.at&&(!Be||_<Be)});return Ee!==-1?Ee:_<$[0].at?0:$.length-1},[$,_]),D=R.useMemo(()=>{const Ee=i??$?.[A]?.gz??"";return Fe(Ee)||null},[i,$,A]),{manualHour:M}=vd(),G=e.mingSikType??"/",H=R.useMemo(()=>n2(t),[t]),F=R.useMemo(()=>n2(n),[n]),K=R.useMemo(()=>{const Ee=[...H];return(!Ee[3]||Ee[3]==="")&&M&&(Ee[3]=M.stem+M.branch),Ee},[H,M]),ae=R.useMemo(()=>{const Ee=[...F];return(!Ee[3]||Ee[3]==="")&&M&&(Ee[3]=M.stem+M.branch),Ee},[F,M]),Q=R.useMemo(()=>{const Ee=Number(e.birthDay?.slice(0,4)),Pe=Number(e.birthDay?.slice(4,6)),Ce=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(Ee)||!Number.isFinite(Pe)||!Number.isFinite(Ce))return null;const Be=new Date(Ee,Pe-1,Ce,12,0,0,0),Ue=Xg(ut(Be)||""),fe=Xg(jt(Be)||""),Le=Xg(_t(Be,G)||"");return[Ue,fe,Le,""]},[e.birthDay,G]),Y=Jg(K),te=Jg(ae),[re]=R.useState("solar"),Se=re==="lunar"?te?"lunar":Y?"solar":"lunar":Y?"solar":te?"lunar":"solar",X=R.useMemo(()=>{const Pe=[...Se==="lunar"?te?ae:Y?K:Q??["","","",""]:Y?K:te?ae:Q??["","","",""]];return(!Pe[3]||Pe[3]==="")&&M&&(Pe[3]=M.stem+M.branch),Pe},[Se,Y,te,K,ae,Q,M]),oe=R.useMemo(()=>M?M.stem+M.branch:X[3]||"",[M,X]),J=R.useMemo(()=>({dae:f!==""?D??null:null,se:f===""||f===""||f===""?k??null:null,wol:f===""||f===""?N??null:null,il:f===""?C??null:null}),[f,D,k,N,C]),ye=R.useMemo(()=>_A({natal:X,tab:f,chain:J,hourKey:oe}),[X,f,J,oe]),W=R.useMemo(()=>{if(!ye)return null;const Ee=k8(ye.perStemElementScaled),Pe=J.dae?jf(J.dae):{},Ce=J.se?jf(J.se):{},Be=J.wol?jf(J.wol):{},Ue=J.il?jf(J.il):{},fe=N8([{kind:"natal",bare:Ee},{kind:"dae",bare:Pe},{kind:"se",bare:Ce},{kind:"wol",bare:Be},{kind:"il",bare:Ue}]),Le=Qm(fe),le=A8(Le),he=x8(fe,ye.dayStem),$e=w8(he),Ie=_8(fe);return{perStemAugBare:fe,perStemAugFull:le,elemPct100:Ie,totalsMain:$e,totalsSub:he}},[ye,J]),U=R.useMemo(()=>S8(X),[X]),B=R.useMemo(()=>["","","","",""].some(Ee=>!U[Ee]),[U]),q=W?.elemPct100??ye?.elementPercent100??E8(X),V=R.useMemo(()=>{if(!ye||!W)return[];const Ee=Xk(ye.dayStem);return Object.entries(W.totalsMain).map(([Pe,Ce])=>({name:Pe,value:Ce,color:Ee[Pe]}))},[ye,W]),P=W?.elemPct100??{:0,:0,:0,:0,:0},Z=W?.totalsSub??null,ie=R.useMemo(()=>M?M.stem+M.branch:X[3]||"",[M,X]),me=R.useMemo(()=>[f,D??"",k??"",N??"",C??"",_?.toISOString?.()??"",ie].join("|"),[f,D,k,N,C,_,ie]),ce=R.useMemo(()=>{const Ee=Z?Object.entries(Z).sort(([Ce],[Be])=>Ce.localeCompare(Be)).map(([Ce,Be])=>`${Ce}:${Be}`).join(","):"none",Pe=V.map(Ce=>`${Ce.name}:${Ce.value}`).join(",");return`${me}||${X.join("")}||${Pe}||${Ee}`},[me,X,V,Z]),xe=typeof wS=="function"?wS(X,ye?.totals):null,ke=R.useMemo(()=>{const Pe=(xe?.ordered??[]).map(Ue=>{const fe=Ue.element??"",Le=/||wood/i.test(fe)?"":/||fire/i.test(fe)?"":/||earth/i.test(fe)?"":/||metal/i.test(fe)?"":/||water/i.test(fe)?"":null,le=typeof Ue.score=="number"?Ue.score:Le?q[Le]??0:0,he=Array.isArray(Ue.reasons)?Ue.reasons:[];return{element:fe,elNorm:Le,score:le,reasons:he}}),Ce=Ue=>Ue?U[Ue]:!1,Be=p?Pe.map(Ue=>Ue.elNorm&&!Ce(Ue.elNorm)?{...Ue,score:0,reasons:[...Ue.reasons,":    0"]}:Ue):Pe;return Be.sort((Ue,fe)=>{const Le=Ce(Ue.elNorm)?1:0,le=Ce(fe.elNorm)?1:0;return p&&Le!==le?le-Le:(fe.score??0)!==(Ue.score??0)?(fe.score??0)-(Ue.score??0):(Ue.elNorm??Ue.element).localeCompare(fe.elNorm??fe.element)}),Be},[xe,p,q,U]),je=R.useMemo(()=>Math.max(0,...ke.map(Ee=>Number.isFinite(Ee.score)?Ee.score:0)),[ke]);function Me(Ee){return vA(Ee,{criteriaMode:"modern",useHarmonyOverlay:!0})}return Jg(X)?g.jsxs("div",{className:"space-y-4 mb-4",children:[g.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:S9.map(Ee=>g.jsx("button",{onClick:()=>m(Ee),className:"px-2 py-1 text-xs rounded border cursor-pointer "+(f===Ee?"bg-yellow-500 text-black border-yellow-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),g.jsx("div",{className:"flex gap-2 mb-4 justify-center flex-wrap",children:["  ","   ","",""].map(Ee=>g.jsx("button",{onClick:()=>u(Ee),className:"px-3 py-1 text-sm rounded border cursor-pointer "+(l===Ee?"bg-violet-500 text-white border-violet-600":"bg-neutral-400 dark:bg-neutral-900 text-neutral-100 dark:text-neutral-300 border-neutral-400 dark:border-neutral-700"),children:Ee},Ee))}),l===""&&g.jsx(YP,{pillars:X,daewoon:D||void 0,sewoon:k||void 0,wolwoon:N||void 0,ilwoon:C||void 0,tab:f},`harm-${f}-${ie}`),l==="   "&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(RP,{data:V,revKey:ce,perStemElementScaled:W?.perStemAugFull,elementPercent:P,dayStem:X[2]?.charAt(0)??null},`pentagon-${ce}`),g.jsx(PP,{value:Me(X)}),g.jsx(Z6,{natal:X}),g.jsxs("div",{className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"text-sm font-bold",children:" "}),B&&g.jsxs("button",{type:"button",onClick:()=>y(Ee=>!Ee),className:`text-xs px-2 py-1 rounded-lg border transition cursor-pointer
                    ${p?"bg-violet-100 text-violet-800 border-violet-200 whitespace-nowrap dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-700"}`,"aria-pressed":p,children:[": ",p?"ON":"OFF"]})]}),g.jsx("ul",{className:"space-y-2",children:ke.map((Ee,Pe)=>g.jsxs("li",{className:"flex items-start justify-between gap-3 rounded-lg border border-neutral-200 dark:border-neutral-800 p-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200",children:[Pe+1,""]}),g.jsx("span",{className:"text-sm font-semibold",children:Ee.element})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"mt-1 h-1.5 w-full rounded bg-neutral-300 dark:bg-neutral-800 overflow-hidden",children:g.jsx("div",{className:"h-1.5 rounded bg-white dark:bg-neutral-100",style:{width:`${je>0?Math.max(2,Math.min(100,Math.round((Ee.score??0)/je*100))):12}%`},title:` ${Ee.score}`})}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Ee.reasons??[]).map((Ce,Be)=>g.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300",children:Ce},Be))})]})]},Ee.elNorm??Ee.element))})]})]}),l===""&&g.jsx(P6,{pillars:X,daewoon:D||void 0,sewoon:k||void 0,wolwoon:N||void 0,ilwoon:C||void 0,tab:f},`shin-${f}-${ie}`),l==="  "&&g.jsx(h8,{unified:ye,pillars:X,tab:f,mapping:o.hiddenStemMode},`gyeok-${f}-${ie}`)]}):g.jsx("div",{className:"p-4 rounded-xl bg-neutral-100 dark:bg-neutral-900 text-sm",children:"   ."})}const M8=!1,r2=e=>e<10?`0${e}`:`${e}`,C8=e=>typeof e=="string"&&e.length>=2,R8=e=>Array.isArray(e)&&e.length===4&&e.every(C8);function L8(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8)),f=["isLeap","isLeapMonth","leapMonth","leap","lunarLeap"];let m=!1;for(const p of f){const y=t[p];if(typeof y=="boolean"){m=y;break}if(typeof y=="number"){m=y===1;break}if(typeof y=="string"){m=y==="1"||y.toLowerCase()==="true";break}}if(i==="lunar")try{const p=br(o,l,u,0,0),y=`${p.getFullYear()}${r2(p.getMonth()+1)}${r2(p.getDate())}`;return{...e,birthDay:y,calendarType:"solar"}}catch{return e}return e}function B8({data:e}){const[t,n]=R.useState("un"),i=R.useMemo(()=>{try{const f=L8(e);return Xa(f)}catch{return new Date}},[e]),o=R.useMemo(()=>Vm(e,i),[e,i]),l=!e.birthTime||e.birthTime==="",u=R.useMemo(()=>{try{const f=ut(o,e.birthPlace?.lon),m=jt(o,e.birthPlace?.lon),p=_t(o,e.mingSikType),y=l?"":$i(o,e.mingSikType);return[f,m,p,y]}catch{return[]}},[o,e?.mingSikType,e?.birthPlace?.lon,l]);return g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto",children:[g.jsxs("div",{className:"flex border-b border-neutral-700 mb-4",children:[g.jsx("button",{onClick:()=>n("un"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="un"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("myoun"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="myoun"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "}),g.jsx("button",{onClick:()=>n("report"),className:`px-2 desk:px-4 py-2 text-xs desk:text-sm cursor-pointer border-b hover:border-purple-500 hover:text-purple-500 font-bold ${t==="report"?"border-purple-500 text-purple-500":"border-transparent text-neutral-400"}`,children:" "})]}),t==="un"&&g.jsx(bP,{data:e}),t==="myoun"&&g.jsx(kP,{data:e}),t==="report"&&g.jsx(D8,{data:e,pillars:R8(u)?u:[]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),i2=e=>{const t=$8(e);return t.charAt(0).toUpperCase()+t.slice(1)},AA=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),I8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...f},m)=>R.createElement("svg",{ref:m,...z8,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:AA("lucide",o),...!l&&!I8(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>R.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=(e,t)=>{const n=R.forwardRef(({className:i,...o},l)=>R.createElement(U8,{ref:l,iconNode:t,className:AA(`lucide-${P8(i2(e))}`,`lucide-${e}`,i),...o}));return n.displayName=i2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G8=pi("chevron-down",H8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Y8=pi("chevron-up",F8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Z8=pi("circle-x",q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],K8=pi("heart-handshake",V8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],X8=pi("house",W8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Q8=pi("log-out",J8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],tI=pi("menu",eI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rI=pi("plus",nI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sI=pi("settings",iI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]],oI=pi("square-user",aI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],s2=pi("star",lI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uI=pi("user-plus",cI);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jA=pi("x",dI);function hI({onOpenSidebar:e,onAddNew:t,onOpenCustom:n}){return g.jsx("header",{className:"fixed min-w-[320px] top-0 left-0 right-0 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800 z-55 px-2 desk:px-3 transition-colors",children:g.jsxs("div",{className:"relative max-w-[640px] w-full mx-auto h-12 sm:h-14 flex justify-between items-center",children:[g.jsx("button",{type:"button",onClick:e,"aria-label":" ",className:"p-2 rounded-full text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-purple-600 dark:hover:text-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(tI,{size:22})}),g.jsx("h1",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mx-auto text-base sm:text-lg font-bold tracking-tight text-neutral-900 dark:text-neutral-100",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:t,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(uI,{size:18})}),g.jsx("button",{type:"button",onClick:n,"aria-label":" ",className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-md bg-orange-600 text-white hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-colors",children:g.jsx(oI,{size:18})})]})]})})}function fI(e){R.useEffect(()=>{const t=e??k2()??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");A2(t),e&&Pf(e)},[e])}const NA=["theme","hiddenStem","hiddenStemMode","sinsalMode","sinsalBase","sinsalBloom","exposure","charType","thinEum","visibility","difficultyMode"];function mI(e){return typeof e=="string"&&NA.includes(e)}function Qg(e){const t=Array.isArray(e)?e.filter(mI):[],n=NA.filter(i=>!t.includes(i));return[...t,...n]}function pI({open:e,onClose:t}){const{settings:n,setSettings:i,saveToServer:o}=Wn(),l=R.useMemo(()=>Qg(n.sectionOrder),[n.sectionOrder]),u=R.useMemo(()=>({...gc,...n,sectionOrder:Qg(n.sectionOrder)}),[n]),[f,m]=R.useState(l),[p,y]=R.useState(u),[_,x]=R.useState(null),S=p.theme??n.theme??"dark";fI(S),R.useEffect(()=>{Pf(S)},[S]),R.useEffect(()=>{if(!e)return;const $=Qg(n.sectionOrder);y({...gc,...n,sectionOrder:$}),m($)},[e,n]);const T=($,A)=>{y(D=>{const M={...D,[$]:A};return $==="theme"&&Pf(A),M})},k=()=>{const $={...gc,...p,sectionOrder:f};i($),$.theme&&Pf($.theme),o(),x(" "),t()},N=$=>{const{destination:A,source:D}=$;if(!A||A.index===D.index)return;const M=Array.from(f),[G]=M.splice(D.index,1);M.splice(A.index,0,G),m(M)},C=$=>{switch($){case"theme":return g.jsx(Ji,{title:"",children:g.jsx(gI,{value:p.theme??"dark",onChange:A=>T("theme",A)})});case"hiddenStem":return g.jsx(Ji,{title:"  ",children:g.jsx(rc,{value:p.hiddenStem,onChange:A=>T("hiddenStem",A),options:[{label:"",value:"all"},{label:" ",value:"regular"}]})});case"hiddenStemMode":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:p.hiddenStemMode,onChange:A=>T("hiddenStemMode",A),options:[{label:"",value:"classic"},{label:"",value:"hgc"}]})});case"sinsalMode":return g.jsx(Ji,{title:"",children:g.jsx(rc,{value:p.sinsalMode,onChange:A=>T("sinsalMode",A),options:[{label:"",value:"classic"},{label:"",value:"modern"}]})});case"sinsalBase":return g.jsx(Ji,{title:"",children:g.jsx(rc,{value:p.sinsalBase,onChange:A=>T("sinsalBase",A),options:[{label:"",value:""},{label:"",value:""}]})});case"sinsalBloom":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!p.sinsalBloom,onChange:A=>T("sinsalBloom",A)})});case"exposure":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:p.exposure,onChange:A=>T("exposure",A),options:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]})});case"charType":return g.jsx(Ji,{title:" ",children:g.jsx(rc,{value:p.charType,onChange:A=>T("charType",A),options:[{label:"",value:""},{label:"",value:""}]})});case"thinEum":return g.jsx(Ji,{title:" ",children:g.jsx(Ko,{label:" ",checked:!!p.thinEum,onChange:A=>T("thinEum",A)})});case"visibility":return g.jsx(Ji,{title:" ",children:g.jsxs("div",{className:"space-y-2 w-full max-w-[180px] mx-auto",children:[g.jsx(Ko,{label:" ",checked:!!p.showSipSin,onChange:A=>T("showSipSin",A)}),g.jsx(Ko,{label:" ",checked:!!p.showSibiUnseong,onChange:A=>T("showSibiUnseong",A)}),g.jsx(Ko,{label:" ",checked:!!p.showSibiSinsal,onChange:A=>T("showSibiSinsal",A)}),g.jsx(Ko,{label:" ",checked:!!p.showNabeum,onChange:A=>T("showNabeum",A)})]})});case"difficultyMode":return g.jsx(Ji,{title:" UP ver.",children:g.jsx(Ko,{label:" UP ",checked:!!p.difficultyMode,onChange:A=>T("difficultyMode",A)})});default:return null}};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed inset-x-0 mx-auto w-full max-w-[640px] h-[88dvh] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white shadow-lg rounded-t-2xl transition-bottom duration-300 z-99 ${e?"bottom-0":"bottom-[-88dvh]"}`,children:[g.jsx("div",{className:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-800",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-lg font-bold",children:""}),g.jsx("button",{onClick:k,className:"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-sm cursor-pointer",children:""})]})}),e&&g.jsx(wd,{onDragEnd:N,children:g.jsx(il,{droppableId:"settings-sections",children:$=>g.jsxs("ul",{ref:$.innerRef,...$.droppableProps,className:"flex flex-col gap-2 p-4 overflow-y-auto max-h-[80dvh] list-none",children:[f.map((A,D)=>g.jsx(Sc,{draggableId:A,index:D,children:M=>g.jsxs("li",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,className:"!flex justify-between items-center bg-white dark:bg-neutral-800 p-2 rounded border text-sm desk:text-base select-none cursor-grab active:cursor-grabbing",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsx("div",{className:"flex-1 min-w-0",children:C(A)})]})},A)),$.placeholder]})})})]}),_&&g.jsx(Ak,{message:_,onClose:()=>x(null),ms:1800})]})}function gI({value:e,onChange:t}){const n=e==="dark";return g.jsxs("button",{"data-no-drag":!0,onClick:()=>t(n?"light":"dark"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md border text-sm cursor-pointer border-neutral-300 bg-white hover:bg-neutral-100 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200",title:"/ ","aria-pressed":n,children:[g.jsx("span",{className:"inline-block w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all dark:bg-neutral-700"}),g.jsx("span",{children:n?"":""})]})}function Ji({title:e,children:t}){return g.jsxs("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200 text-neutral-900 dark:bg-neutral-900 dark:border-neutral-800 dark:text-neutral-100 space-y-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-center",children:e}),g.jsx("div",{className:"flex justify-center",children:t})]})}function rc({value:e,onChange:t,options:n}){return g.jsx("div",{"data-no-drag":!0,className:"inline-flex rounded-md overflow-hidden border border-neutral-300 bg-white dark:border-neutral-700 dark:bg-neutral-800",onMouseDown:i=>i.stopPropagation(),onTouchStart:i=>i.stopPropagation(),children:n.map(i=>{const o=e===i.value;return g.jsx("button",{type:"button",onClick:()=>t(i.value),className:`px-3 py-1 text-sm transition-colors ${o?"bg-indigo-600 text-white":"text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-700 cursor-pointer"}`,children:i.label},i.value)})})}function Ko({label:e,checked:t,onChange:n}){const i=`switch-${e}`;return g.jsxs("label",{"data-no-drag":!0,htmlFor:i,className:"flex items-center justify-between w-full max-w-[180px] text-sm cursor-pointer",children:[g.jsx("span",{children:e}),g.jsx("input",{id:i,type:"checkbox",checked:t,onChange:o=>n(o.target.checked),className:"peer hidden"}),g.jsx("span",{className:"w-10 h-5 bg-neutral-300 rounded-full relative after:content-[''] after:w-4 after:h-4 after:bg-white after:rounded-full after:absolute after:top-0.5 after:left-0.5 after:transition-all peer-checked:bg-green-600 peer-checked:after:translate-x-5 dark:bg-neutral-700 dark:peer-checked:bg-green-600"})]})}function bI({onShowToday:e,onShowCouple:t}){const[n,i]=R.useState(!1),[o,l]=R.useState(!1),u=async()=>{if(!o){l(!0);try{await At.auth.signOut(),window.location.reload()}catch(f){console.error(f),alert(" .  ."),l(!1)}}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed min-w-[320px] h-[64px] bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2 text-xs sm:text-sm z-50 dark:bg-neutral-950 dark:border-neutral-800",children:g.jsxs("nav",{className:"flex justify-around items-center max-w-[640px] w-full mx-auto",children:[g.jsx(Nf,{icon:g.jsx(X8,{size:22}),label:" ",onClick:e}),g.jsx(Nf,{icon:g.jsx(K8,{size:22}),label:"",onClick:t}),g.jsx(Nf,{icon:g.jsx(sI,{size:22}),label:"",onClick:()=>i(!0)}),g.jsx(Nf,{icon:g.jsx(Q8,{size:22}),label:"",onClick:u,disabled:o})]})}),g.jsx(pI,{open:n,onClose:()=>i(!1)})]})}function Nf({icon:e,label:t,onClick:n,disabled:i}){return g.jsxs("button",{onClick:n,disabled:i,className:"flex flex-col items-center justify-center text-neutral-600 hover:text-purple-600 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed dark:text-neutral-300 dark:hover:text-purple-400",children:[e,g.jsx("span",{className:"mt-1",children:t})]})}function yI(e,t){const[n,i]=R.useState(()=>{if(typeof window>"u")return{};try{const M=localStorage.getItem(U1);return M?JSON.parse(M):{}}catch{return{}}});R.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(U1,JSON.stringify(n))}catch{}},[n]);const[o,l]=R.useState({}),[u,f]=R.useState({}),[m,p]=R.useState(""),[y,_]=R.useState(!1),[x,S]=R.useState(()=>{const M=qf(),G=Zf();return G.length?qu(M,G):M}),T=R.useRef(!1);R.useEffect(()=>{(async()=>{if(y)return;const{data:{user:G},error:H}=await At.auth.getUser();if(H||!G)return;const{data:F,error:K}=await At.from("user_folder_order").select("folder_name, sort_order").eq("user_id",G.id).order("sort_order",{ascending:!0,nullsFirst:!0});if(K){console.error("load folder order from server error:",K),_(!0);return}const ae=qf(),Q=(F??[]).map(te=>String(te.folder_name)).filter(Boolean),Y=Q.length?qu(ae,Q):qu(ae,Zf());S(Y),_(!0)})()},[y]);const k=R.useCallback(async M=>{const{data:{user:G},error:H}=await At.auth.getUser();if(H||!G)return;const F=M.map((ae,Q)=>({user_id:G.id,folder_name:ae,sort_order:Q+1,updated_at:new Date().toISOString()})),{error:K}=await At.from("user_folder_order").upsert(F,{onConflict:"user_id,folder_name"});K&&console.error("save folder order to server error:",K)},[]);R.useEffect(()=>{if(typeof window>"u")return;const M=()=>{if(T.current){T.current=!1;return}const G=qf(),H=Zf(),F=H.length?qu(G,H):G;S(F)};return window.addEventListener(Wa,M),()=>window.removeEventListener(Wa,M)},[]),R.useEffect(()=>{l(M=>{const G={...M};for(const H of x)G[H]===void 0&&(G[H]=!0);return G})},[x]);const{grouped:N,unassignedItems:C}=R.useMemo(()=>{const M={};x.forEach(F=>{M[F]=[]});const G=[],H=new Set;for(const F of e){if(!F.id||H.has(F.id))continue;const K=F.folder;K&&x.includes(K)?M[K].push(F):G.push(F),H.add(F.id)}return{grouped:M,unassignedItems:G}},[e,x]),$=R.useCallback(M=>{const{source:G,destination:H,type:F}=M;if(!H||F!=="FOLDER")return;const K=G.index,ae=H.index;K!==ae&&S(Q=>{if(!Q.length)return Q;const Y=[...Q],[te]=Y.splice(K,1);return Y.splice(ae,0,te),T.current=!0,Ju(Y),Y})},[]);return{folderFavMap:n,setFolderFavMap:i,folderOpenMap:o,setFolderOpenMap:l,memoOpenMap:u,setMemoOpenMap:f,newFolderName:m,setNewFolderName:p,orderedFolders:x,grouped:N,unassignedItems:C,handleDragEnd:$,createFolder:M=>{const G=M.trim();!G||G===pn||(kk(G),S(H=>{if(H.includes(G))return H;const F=[...H,G];return Ju(F),k(F),F}))},deleteFolder:M=>{e.forEach(G=>{G.folder===M&&t(G.id,{folder:void 0})}),i(G=>{const H={...G};return delete H[M],H}),S(G=>{const H=G.filter(F=>F!==M);return Ju(H),k(H),H}),Ek.includes(M)?VB(M):ZB(M)},UNASSIGNED_LABEL:pn}}function a2(e,t){if(!/^\d{8}$/.test(e))return e||"";const n=e.slice(0,4),i=e.slice(4,6),o=e.slice(6,8);return t&&/^\d{4}$/.test(t)?`${n} ${i} ${o} ${t.slice(0,2)}:${t.slice(2,4)}`:t===""?`${n} ${i} ${o} ( )`:`${n} ${i} ${o}`}function vI(e){if(!e)return"";const t=e.split(/[\s,]+/).filter(Boolean);if(t.length===0)return"";const n=u=>t.find(f=>u.some(m=>f.endsWith(m))),i=n(["","",""]),o=n(["","","",""]);return t.length===1||!n(["","","","","","",""])&&!n(["","","","",""])?e:i&&o?`${i} ${o}`:i||e}function Hb(e){return(e.ganji??"").replace(/\r\n/g,`
`).replace(/\s*null\s*/gi,"").trim()}const _I="list:__unassigned__",xI=e=>`list:${e}`,o2=e=>{if(!e.startsWith("list:"))return;const t=e.slice(5);return t==="__unassigned__"?void 0:t},wI="myeoun:folder-updated",l2=()=>{typeof window>"u"||window.dispatchEvent(new Event(wI))};function SI(e){const t=Hb(e),n=String(e.birthDay??"").trim();if(!/^\d{8}$/.test(n))return t;const i=Number(n.slice(0,4)),o=Number(n.slice(4,6)),l=Number(n.slice(6,8));if(!mm(i,o,l)||!e.birthTime||e.birthTime==="")return t;const u=Number(e.birthTime.slice(0,2)),f=e.birthTime.slice(2,4),m=u-1<0?23:u-1,p=String(m).padStart(2,"0")+f,y=e.corrected instanceof Date?e.corrected:new Date(e.corrected);if(Number.isNaN(y.getTime()))return t;new Date(y.getTime()-3600*1e3);const _=Hm({...e,birthTime:p});return Hb({...e,..._})}function EI({open:e,onClose:t,onView:n,onAddNew:i,onEdit:o,onDeleteView:l}){const{list:u,remove:f,update:m,reorder:p}=ss(),{folderFavMap:y,setFolderFavMap:_,folderOpenMap:x,setFolderOpenMap:S,memoOpenMap:T,setMemoOpenMap:k,newFolderName:N,setNewFolderName:C,orderedFolders:$,grouped:A,unassignedItems:D,handleDragEnd:M,createFolder:G,deleteFolder:H,UNASSIGNED_LABEL:F}=yI(u,m),[K,ae]=R.useState(""),[Q,Y]=R.useState("name"),te=/\S/.test(K),{filteredUnassigned:re,filteredGrouped:Se,totalMatches:X}=R.useMemo(()=>{const B=ce=>ce.toLowerCase().replace(/\s+/g," ").trim();if(!te)return{filteredUnassigned:D,filteredGrouped:A,totalMatches:D.length+Object.values(A).reduce((ce,xe)=>ce+xe.length,0)};const q=B(K),V=ce=>{const xe=String(ce.birthDay??"").trim();let ke="",je="",Me="";if(/^\d{8}$/.test(xe))ke=xe.slice(0,4),je=xe.slice(4,6),Me=xe.slice(6,8);else{const Ue=new Date(xe);if(!Number.isNaN(Ue.getTime())){const fe=Ue.getFullYear(),Le=Ue.getMonth()+1,le=Ue.getDate();ke=String(fe).padStart(4,"0"),je=String(Le).padStart(2,"0"),Me=String(le).padStart(2,"0")}}const Ee=ke&&je&&Me?`${ke}${je}${Me}`:"",Pe=ke&&je&&Me?`${ke}-${je}-${Me}`:"",Ce=ke&&je&&Me?`${ke}.${je}.${Me}`:"",Be=a2(ce.birthDay,ce.birthTime);return B([Ee,Pe,Ce,Be].filter(Boolean).join(" "))},P=ce=>Q==="name"?B(ce.name??"").includes(q):Q==="ganji"?B(Hb(ce)??"").includes(q):V(ce).includes(q),Z=D.filter(P),ie={};let me=Z.length;for(const ce of $){const xe=(A[ce]||[]).filter(P);ie[ce]=xe,me+=xe.length}return{filteredUnassigned:Z,filteredGrouped:ie,totalMatches:me}},[K,Q,te,D,A,$]),oe=R.useRef(null),J=R.useRef(null);R.useEffect(()=>{if(J.current==null)return;const B=oe.current;B&&(B.scrollTop=J.current,J.current=null)},[u,$]);const ye=B=>({...B,transition:B?.transform?"transform 0.15s ease":"none"}),W=(B,q)=>{const V=SI(B),P=vI(B.birthPlace?.name),Z=`item:${B.id}`,ie=!!T[B.id],me=B.gender===""?"":B.gender===""?"":B.gender,ce=new Date(B.corrected),xe=!B.birthTime||B.birthTime==="",ke=String(B.birthDay).trim();let je=NaN;if(/^\d{8}$/.test(ke)){const Ce=`${ke.slice(0,4)}-${ke.slice(4,6)}-${ke.slice(6,8)}`,Be=new Date(Ce);Number.isNaN(Be.getTime())||(je=Be.getFullYear())}else{const Ce=new Date(ke);Number.isNaN(Ce.getTime())||(je=Ce.getFullYear())}function Me(Ce,Be){return Number.isNaN(Ce)?0:Be-Ce+1}const Ee=new Date().getFullYear(),Pe=Me(je,Ee);return g.jsx(Sc,{draggableId:Z,index:q,isDragDisabled:te,children:Ce=>g.jsx("li",{ref:Ce.innerRef,...Ce.draggableProps,...Ce.dragHandleProps,style:ye(Ce.draggableProps.style),className:`list-none select-none rounded-xl border
                       bg-white dark:bg-neutral-900
                       border-neutral-200 dark:border-neutral-800
                       text-neutral-900 dark:text-neutral-100
                       cursor-grab active:cursor-grabbing`,children:g.jsxs("div",{className:"p-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-semibold text-sm desk:text-base",children:[B.name," (",Pe,", ",me,")"]}),g.jsx("span",{className:"opacity-40",children:""}),g.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:B.relationship?B.relationship:" "}),g.jsx("span",{className:"ml-auto opacity-50 select-none",children:""})]}),g.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-300 mt-1",children:[a2(B.birthDay,B.birthTime),","," ",B.calendarType==="lunar"?"":""]}),(P||ce)&&g.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[P,ce&&g.jsxs("span",{className:"opacity-70",children:[" "," "," ",xe?"":J7(ce)]})]}),V&&g.jsx("div",{className:"text-sm text-neutral-800 dark:text-neutral-200 mt-1 whitespace-pre-wrap break-keep",children:V}),B.memo&&B.memo.trim()!==""&&g.jsxs("div",{children:[g.jsx("button",{type:"button",className:"text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 inline-flex items-center gap-1 cursor-pointer",onClick:Be=>{Be.stopPropagation(),k(Ue=>({...Ue,[B.id]:!Ue[B.id]}))},children:ie?" ":" "}),g.jsx("div",{className:ie?"mt-1 text-sm text-neutral-800 dark:text-neutral-200 whitespace-pre-wrap":"hidden",children:B.memo})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g.jsx("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.folder??F,onClick:Be=>Be.stopPropagation(),onChange:Be=>{Be.stopPropagation();const Ue=Be.target.value,fe=Ue===F?void 0:Ue;m(B.id,{folder:fe})},children:[F,...$].map(Be=>g.jsx("option",{value:Be,children:Be},Be))}),g.jsxs("select",{className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,value:B.mingSikType??"/",onClick:Be=>Be.stopPropagation(),onChange:Be=>{Be.stopPropagation();const Ue=Be.target.value,fe={...B,mingSikType:Ue},Le=Hm(fe);m(B.id,{mingSikType:Ue,...Le}),n({...fe,...Le}),t()},children:[g.jsx("option",{value:"",children:""}),g.jsx("option",{value:"/",children:"/"}),g.jsx("option",{value:"",children:""})]})]}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{onClick:Be=>{Be.stopPropagation(),n(B),t()},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-indigo-600 hover:bg-indigo-500`,children:""}),g.jsx("button",{onClick:Be=>{Be.stopPropagation(),o?.(B)},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-amber-600 hover:bg-amber-500`,children:""}),g.jsx("button",{onClick:Be=>{Be.stopPropagation(),confirm(`'${B.name}'  ?`)&&(f(B.id),l&&l())},className:`px-3 py-1 rounded text-white text-sm cursor-pointer
                             bg-red-600 hover:bg-red-500`,children:""}),g.jsx("button",{type:"button",onClick:Be=>{Be.stopPropagation();const Ue=!B.favorite;m(B.id,{favorite:Ue});const fe=B.folder??"__unassigned__",Le={__unassigned__:[]};$.forEach(Ie=>{Le[Ie]=[]}),u.forEach(Ie=>{const He=Ie.folder??"__unassigned__";Le[He]||(Le[He]=[]),Le[He].push(Ie)});const he=(Le[fe]??[]).filter(Ie=>Ie.id!==B.id);Ue?Le[fe]=[{...B,favorite:Ue},...he]:Le[fe]=[...he,{...B,favorite:Ue}];const $e=[...Le.__unassigned__,...$.flatMap(Ie=>Le[Ie]??[])];p($e)},className:`ml-auto p-1 rounded cursor-pointer ${B.favorite?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(s2,{size:16,fill:B.favorite?"currentColor":"none"})})]})]})})},Z)},U=B=>{const{type:q,source:V,destination:P,draggableId:Z}=B;if(!P||te)return;const ie=oe.current;if(ie&&(J.current=ie.scrollTop),q==="FOLDER"){M(B);return}if(q==="ITEM"){if(!Z.replace(/^item:/,""))return;const ce=o2(V.droppableId),xe=o2(P.droppableId),ke=ce??"__unassigned__",je=xe??"__unassigned__",Me={__unassigned__:[...D]};$.forEach(fe=>{Me[fe]=[...A[fe]||[]]});const Ee=Me[ke]??[];if(!Ee[V.index])return;const[Pe]=Ee.splice(V.index,1),Ce={...Pe,folder:xe??void 0},Be=Me[je]??[];Be.splice(P.index,0,Ce),Me[ke]=Ee,Me[je]=Be;const Ue=[...Me.__unassigned__,...$.flatMap(fe=>Me[fe]??[])];p(Ue)}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/70 transition-opacity duration-300 z-90 ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:t}),g.jsxs("div",{className:`fixed top-0 left-0 h-[100dvh] min-w-[320px] w-full desk:w-1/3
                    bg-white dark:bg-neutral-950
                    text-neutral-900 dark:text-white
                    shadow-lg z-99 transition-[left] duration-300
                    overflow-hidden
                    ${e?"left-0":"left-[-100%]"}`,children:[g.jsxs("div",{className:"flex justify-between items-center w-full h-12 desk:h-16 p-4 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("h2",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:()=>{i(),t()},className:`inline-flex items-center gap-1 px-3 py-1.5 rounded text-sm cursor-pointer
                         bg-purple-600 hover:bg-purple-500 text-white`,children:[g.jsx(rI,{size:16})," "]}),g.jsx("button",{onClick:t,className:"p-1 rounded cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-900",children:g.jsx(jA,{size:22})})]})]}),g.jsx(wd,{onDragEnd:U,children:g.jsxs("div",{ref:oe,className:"p-4 h-[calc(100%-56px)] overflow-y-auto overscroll-contain",style:{touchAction:"pan-y"},children:[g.jsx("div",{className:"mb-3 sticky top-[-16px] z-10 pb-2 pt-2 bg-white dark:bg-neutral-950 z-50",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:Q,onChange:B=>Y(B.target.value),className:`h-30 text-xs rounded px-2 py-1 cursor-pointer
                             bg-white dark:bg-neutral-900
                             border border-neutral-300 dark:border-neutral-700
                             text-neutral-900 dark:text-neutral-100
                             focus:outline-none focus:ring-2 focus:ring-amber-500/40`,children:[g.jsx("option",{value:"name",children:""}),g.jsx("option",{value:"ganji",children:""}),g.jsx("option",{value:"birth",children:""})]}),g.jsxs("div",{className:"relative flex-1",children:[g.jsx("input",{type:"text",value:K,onChange:B=>ae(B.target.value),placeholder:Q==="name"?" ":Q==="ganji"?"  (: )":"  (: 19961229, 1996-12-29)",className:`w-full pl-7 pr-8 py-1 h-30 rounded
                               bg-white dark:bg-neutral-900
                               border border-neutral-300 dark:border-neutral-700
                               text-[16px] text-neutral-900 dark:text-neutral-100
                               placeholder-neutral-400 dark:placeholder-neutral-500
                               focus:outline-none focus:ring-2 focus:ring-amber-500/40`}),K&&g.jsx("button",{type:"button",onClick:()=>ae(""),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-60 hover:opacity-100","aria-label":" ",title:" ",children:g.jsx(Z8,{size:16})})]}),te&&g.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:[X,""]})]})}),g.jsxs("div",{className:"flex items-center mb-2 gap-2",children:[g.jsx("input",{type:"text",value:N,onChange:B=>C(B.target.value),placeholder:"  ",className:`flex-1 w-[60%] px-2 py-1 rounded h-30
                           bg-white dark:bg-neutral-900
                           border border-neutral-300 dark:border-neutral-700
                           text-sm text-neutral-900 dark:text-neutral-100
                           placeholder-neutral-400 dark:placeholder-neutral-500`,onClick:B=>B.stopPropagation()}),g.jsx("button",{type:"button",className:`px-3 rounded h-30 text-sm cursor-pointer
                           bg-neutral-100 hover:bg-neutral-200
                           dark:bg-neutral-800 dark:hover:bg-neutral-700
                           text-neutral-900 dark:text-neutral-100
                           border border-neutral-200 dark:border-neutral-700`,onClick:B=>{B.stopPropagation();const q=N.trim();q&&(G(q),C(""),l2())},children:""})]}),g.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:te?"   .":"/      ."}),g.jsx(il,{droppableId:_I,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:B=>{const q=re;return g.jsx("div",{ref:B.innerRef,...B.droppableProps,className:"mb-6",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[q.map((V,P)=>W(V,P)),B.placeholder]})})}}),g.jsx(il,{droppableId:"folders:root",type:"FOLDER",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:B=>g.jsxs("div",{ref:B.innerRef,...B.droppableProps,children:[$.map((q,V)=>{const P=xI(q),Z=Se[q]||[],ie=!!x[q],me=!!y[q];return g.jsx(Sc,{draggableId:`folder-${q}`,index:V,isDragDisabled:te,children:ce=>g.jsxs("div",{ref:ce.innerRef,...ce.draggableProps,...ce.dragHandleProps,className:"mb-4 cursor-grab active:cursor-grabbing select-none",children:[g.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded
                                         bg-neutral-50 dark:bg-neutral-900/70
                                         border border-neutral-200 dark:border-neutral-800
                                         text-neutral-800 dark:text-neutral-200`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{type:"button",onClick:xe=>{xe.stopPropagation(),S(ke=>({...ke,[q]:!ie}))},className:"inline-flex items-center gap-1 text-sm font-semibold cursor-pointer",children:[ie?g.jsx(Y8,{size:16}):g.jsx(G8,{size:16}),g.jsx("span",{className:"text-sm font-semibold",children:q})]}),g.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),_(ke=>({...ke,[q]:!ke[q]}))},className:`p-1 rounded cursor-pointer ${me?"text-yellow-400":"text-neutral-400"} hover:text-yellow-400`,children:g.jsx(s2,{size:16,fill:me?"currentColor":"none"})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"opacity-60 text-xs",children:[Z.length,""]}),g.jsx("button",{type:"button",onClick:xe=>{if(xe.stopPropagation(),y[q]){alert(`'${q}'    .
   .`);return}confirm(`'${q}'  ?
(   )`)&&(H(q),l2())},className:`px-2 py-1 rounded text-xs cursor-pointer
                                             border border-red-300 dark:border-red-700
                                             text-red-700 dark:text-red-300
                                             hover:bg-red-50 dark:hover:bg-red-900/30`,children:""})]})]}),ie&&g.jsx(il,{droppableId:P,type:"ITEM",direction:"vertical",ignoreContainerClipping:!0,isDropDisabled:te,children:xe=>g.jsx("div",{ref:xe.innerRef,...xe.droppableProps,className:"mt-2",children:g.jsxs("ul",{className:"flex flex-col gap-2",children:[Z.map((ke,je)=>W(ke,je)),xe.placeholder]})})})]})},`folder-${q}`)}),B.placeholder]})})]})})]})]})}const c2="ms_folders",eb="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",TI="w-full rounded p-2 border transition-colors duration-200 bg-white text-neutral-900 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:border-neutral-700 dark:focus:ring-violet-400",kI="w-full rounded p-2 border min-h-28 transition-colors duration-200 bg-white text-neutral-900 placeholder-neutral-400 border-neutral-300 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-neutral-900 dark:text-neutral-100 dark:placeholder-neutral-500 dark:border-neutral-700 dark:focus:ring-violet-400",Ws="block text-sm mb-1 font-medium text-neutral-800 dark:text-neutral-200",AI="text-xs text-neutral-500 dark:text-neutral-400",Of="accent-violet-600 dark:accent-violet-400",u2="accent-violet-600 dark:accent-violet-400",ep="px-3 py-1.5 rounded text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-neutral-900",jI=`${ep} bg-amber-600 text-white hover:bg-amber-500 dark:bg-amber-600 dark:hover:bg-amber-500 cursor-pointer`,NI=`${ep} bg-red-600 text-white hover:bg-red-500 dark:bg-red-600 dark:hover:bg-red-500 cursor-pointer`,d2=`${ep} bg-neutral-800 text-white hover:bg-neutral-700 dark:bg-neutral-700 dark:hover:bg-neutral-600 cursor-pointer`,OI=`${ep} bg-green-600 text-white hover:bg-green-500 dark:bg-green-600 dark:hover:bg-green-500 cursor-pointer`;function DI({item:e,onClose:t}){const{list:n,update:i,remove:o}=ss(),[l,u]=R.useState(!1),[f,m]=R.useState({...e,calendarType:e.calendarType??"solar"}),[p,y]=R.useState(!e.birthTime||e.birthTime===""),[_,x]=R.useState(!e.birthPlace||e.birthPlace.name===""),S=R.useMemo(()=>["","","","","",""],[]),[T,k]=R.useState([]);R.useEffect(()=>{try{const M=JSON.parse(localStorage.getItem(c2)||"[]");Array.isArray(M)&&k(M)}catch{}},[]);const N=R.useMemo(()=>{const M=Array.from(new Set(n.map(F=>F.folder).filter(Boolean))),G=new Set([...S,...T,...M]),H=Array.from(G).sort((F,K)=>F.localeCompare(K));return[pn,...H]},[n,T,S]),C=()=>{m({...e,calendarType:e.calendarType??"solar"}),y(!e.birthTime||e.birthTime===""),x(!e.birthPlace||e.birthPlace.name==="")},$=()=>{if(!f.name||f.name.trim()==="")return" .";if(!f.birthDay||!/^\d{8}$/.test(f.birthDay))return" YYYYMMDD  .";const M=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8));if(f.calendarType==="lunar")try{br(M,G,H)}catch(F){return F instanceof Error?F.message:"   ."}else{const F=new Date(M,G-1,H);if(F.getFullYear()!==M||F.getMonth()+1!==G||F.getDate()!==H)return"   ."}if(!p){if(!f.birthTime||!/^\d{4}$/.test(f.birthTime))return"  00002359 (4) .";const F=Number(f.birthTime.slice(0,2)),K=Number(f.birthTime.slice(2,4));if(F<0||F>23||K<0||K>59)return"  00002359  ."}return!_&&!f.birthPlace?"   '' .":null},A=()=>{const M=$();if(M){alert(M);return}const G=Number(f.birthDay.slice(0,4)),H=Number(f.birthDay.slice(4,6)),F=Number(f.birthDay.slice(6,8));let K=G,ae=H,Q=F;if(f.calendarType==="lunar"){const ie=br(G,H,F);K=ie.getFullYear(),ae=ie.getMonth()+1,Q=ie.getDate()}const Y=p?4:Number((f.birthTime??"0430").slice(0,2)),te=p?30:Number((f.birthTime??"0430").slice(2,4)),re=_||!f.birthPlace||f.birthPlace.lon===0?127.5:f.birthPlace.lon,Se=new Date(K,ae-1,Q,Y,te,0,0),X=!f.birthPlace||typeof f.birthPlace=="object"&&f.birthPlace.name==="",oe=cl(Se,re,X),ye=ut(oe,re).charAt(0),U=((ie,me)=>{const xe=["","","","","","","","","",""].includes(ie),ke=(me??"")==="";return xe?ke?"forward":"backward":ke?"backward":"forward"})(ye,f.gender??""),B=sl(f.folder===pn?void 0:f.folder),q={...e,name:(f.name??"").trim()||"",birthDay:f.birthDay,birthTime:p?"":f.birthTime??"0430",gender:f.gender??"",birthPlace:_?{name:"",lat:0,lon:127.5}:f.birthPlace??{name:"",lat:0,lon:127.5},relationship:f.relationship??"",memo:f.memo??"",folder:B,calendarType:f.calendarType??"solar",mingSikType:f.mingSikType??"/",DayChangeRule:(f.mingSikType??"/")===""?"":"",dir:U,corrected:oe,correctedLocal:"",ganji:""},{correctedLocal:V,ganji:P}=Hm(q),Z={...q,correctedLocal:V,ganji:P};if(Z.folder&&!S.includes(Z.folder)&&!T.includes(Z.folder)){const ie=[...T,Z.folder];k(ie),localStorage.setItem(c2,JSON.stringify(ie))}i(e.id,Z),u(!1),t&&t()},D=()=>{confirm(`'${e.name}'  ?`)&&o(e.id)};return l?g.jsxs("div",{className:"space-y-4 max-h-[calc(90dvh_-_40px)] overflow-auto transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 p-4 rounded-xl",children:[g.jsx("h3",{className:"text-lg font-bold",children:" "}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("input",{className:eb,value:f.name||"",onChange:M=>m({...f,name:M.target.value}),placeholder:""})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" (YYYYMMDD)"}),g.jsx("input",{className:eb,value:f.birthDay||"",onChange:M=>m({...f,birthDay:M.target.value.replace(/\D/g,"").slice(0,8)}),inputMode:"numeric",maxLength:8,placeholder:": 19900101"}),g.jsxs("div",{className:"flex gap-4 mt-2 items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"calendarType",checked:f.calendarType==="solar",onChange:()=>m({...f,calendarType:"solar"}),id:"editor_calendar_solar"}),g.jsx("label",{htmlFor:"editor_calendar_solar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"calendarType",checked:f.calendarType==="lunar",onChange:()=>m({...f,calendarType:"lunar"}),id:"editor_calendar_lunar"}),g.jsx("label",{htmlFor:"editor_calendar_lunar",className:"inline-flex items-center gap-1 text-sm text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),f.calendarType==="lunar"&&f.birthDay?.length===8&&g.jsx("span",{className:AI,children:(()=>{try{const M=Number(f.birthDay.slice(0,4)),G=Number(f.birthDay.slice(4,6)),H=Number(f.birthDay.slice(6,8)),F=br(M,G,H);return`  ${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`}catch(M){const G=M instanceof Error?M.message:void 0;return`  ${G?`: ${G}`:""}`}})()})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:"  (HHMM)"}),g.jsx("input",{className:`${eb} disabled:opacity-50`,value:p?"":f.birthTime||"",onChange:M=>m({...f,birthTime:M.target.value.replace(/\D/g,"").slice(0,4)}),inputMode:"numeric",maxLength:4,placeholder:": 1524",disabled:p}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:u2,checked:p,onChange:M=>y(M.target.checked),id:"editor_birthTimeX"}),g.jsx("label",{htmlFor:"editor_birthTimeX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx("div",{className:"flex gap-4 text-sm",children:["","/",""].map(M=>{const G=`editor_ming_${M}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"mingSikType",checked:(f.mingSikType??"")===M,onChange:()=>m({...f,mingSikType:M}),id:G}),g.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:M})]},M)})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("div",{className:"flex gap-4 text-sm",children:["",""].map(M=>{const G=`editor_gender_${M}`;return g.jsxs("span",{className:"inline-flex items-center gap-1",children:[g.jsx("input",{type:"radio",className:Of,name:"gender",value:M,checked:f.gender===M,onChange:H=>m({...f,gender:H.target.value}),id:G}),g.jsx("label",{htmlFor:G,className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:M})]},M)})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:" "}),g.jsx(dT,{onSelect:M=>m({...f,birthPlace:M}),value:_?"":f.birthPlace?.name??""}),g.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",className:u2,checked:_,onChange:M=>x(M.target.checked),id:"editor_birthPlaceX"}),g.jsx("label",{htmlFor:"editor_birthPlaceX",className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx(Sk,{value:f.relationship||"",onChange:M=>m({...f,relationship:M})})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("select",{className:TI,value:f.folder??pn,onChange:M=>{const G=M.target.value;m(G===pn?{...f,folder:void 0}:{...f,folder:G})},children:N.map(M=>g.jsx("option",{value:M===pn?pn:M,children:M},M))})]}),g.jsxs("div",{children:[g.jsx("label",{className:Ws,children:""}),g.jsx("textarea",{className:kI,value:f.memo||"",onChange:M=>m({...f,memo:M.target.value}),placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{className:d2,onClick:()=>{C(),u(!1)},children:""}),g.jsx("button",{className:OI,onClick:A,children:""})]})]}):g.jsxs("div",{className:"p-4 space-y-3 transition-colors duration-200 bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"text-lg font-bold",children:[" ",e.name," "]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:jI,onClick:()=>u(!0),children:""}),g.jsx("button",{className:NI,onClick:D,children:""}),t&&g.jsx("button",{className:d2,onClick:t,children:""})]})]}),g.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[g.jsxs("div",{children:[": ",e.gender]}),g.jsxs("div",{children:["/: ",e.birthDay," ",e.birthTime===""?"( )":e.birthTime,","," ",e.calendarType==="lunar"?"":""]}),g.jsxs("div",{children:[": ",e.correctedLocal||"-"]}),g.jsxs("div",{children:[": ",e.birthPlace?.name||"-"]}),g.jsxs("div",{children:[": ",e.relationship||"-"]}),g.jsxs("div",{children:[": ",e.folder??pn]})]}),e.ganji&&g.jsx("div",{className:"text-sm text-red-500 whitespace-pre-wrap",children:e.ganji}),e.memo&&g.jsxs("div",{className:"text-sm whitespace-pre-wrap text-neutral-800 dark:text-neutral-200",children:[g.jsx("p",{className:"mb-1 font-semibold",children:""}),e.memo]})]})}function MI({pillarsA:e,pillarsB:t}){const n=FP(e,t);return g.jsxs("div",{className:"rounded-xl p-4 bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 space-y-2",children:[g.jsx("div",{className:"text-sm font-bold mb-3",children:"   "}),Object.entries(n).map(([i,o])=>o.length>0?g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"shrink-0 w-20 text-xs font-semibold text-neutral-700 dark:text-neutral-400 mt-1",children:i}),g.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((l,u)=>g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border whitespace-nowrap bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-200 dark:border-violet-800",children:l},u))})]},i):null)]})}function CI(e){return typeof e=="object"&&e!==null}const RI=["","","","","","","","","","","","","","","","","","","",""],LI=["","","","","","","","","","","","","","","","","","","","","","","",""],BI=new Set(RI),PI=new Set(LI);function h2(e){return typeof e=="string"&&e.length>=2&&BI.has(e[0])&&PI.has(e[1])}function cn(e,...t){if(h2(e))return e;for(const n of t)if(h2(n))return n;return""}function Df(e,t){let n=null;const i=t.getTime();for(const o of e)if(o.at.getTime()<=i)n=o;else break;return n}function $I(e){const t=n=>String(n).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`}function f2(e){if(!e)return null;const t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/.exec(e);if(!t)return null;const[,n,i,o,l,u]=t,f=new Date(+n,+i-1,+o,+l,+u);return Number.isNaN(f.getTime())?null:f}function xm(e){const t=e;return typeof t.name=="string"&&t.name?t.name:typeof t.title=="string"&&t.title?t.title:typeof t.memo=="string"&&t.memo?t.memo:" "}function II(e){const t=Number(e.birthDay.slice(0,4)),n=Number(e.birthDay.slice(4,6)),i=Number(e.birthDay.slice(6,8));let o=0,l=0;const u=e;return typeof u.birthTime=="string"&&u.birthTime.length>=4&&(o=Number(u.birthTime.slice(0,2)),l=Number(u.birthTime.slice(2,4))),{y:t,m:n,d:i,hh:o,mm:l}}function tp(e){const{y:t,m:n,d:i}=II(e),o=e.corrected.getHours(),l=e.corrected.getMinutes();return e.calendarType==="lunar"?br(t,n,i,o,l):new Date(t,n-1,i,o,l)}function zI(e){const t=tp(e);return`${xm(e)}-${t.toISOString()}`}function Uu(e){const t=e;return typeof t.id=="string"&&t.id?t.id:zI(e)}function UI(e){return CI(e)&&("Classic"in e||"Modern"in e||"classic"in e||"modern"in e)}function HI(e){const t=ul;return UI(t)?e==="classic"?t.Classic:t.Modern:e}const tb="people_picker_order_v1";function GI(e,t,n){const i=e.slice(),[o]=i.splice(t,1);return i.splice(n,0,o),i}function m2({open:e,list:t,onSelect:n,onClose:i}){const[o,l]=R.useState("");R.useEffect(()=>{e||l("")},[e]);const u=R.useMemo(()=>t.map(Uu),[t]),f=R.useMemo(()=>new Set(u),[u]),[m,p]=R.useState([]);R.useEffect(()=>{const k=localStorage.getItem(tb),N=k?JSON.parse(k):[],C=N.filter(A=>f.has(A)),$=[...C,...u.filter(A=>!C.includes(A))];p($),JSON.stringify($)!==JSON.stringify(N)&&localStorage.setItem(tb,JSON.stringify($))},[u,f]);const y=k=>{p(k),localStorage.setItem(tb,JSON.stringify(k))},_=R.useMemo(()=>{const k=new Map(t.map(C=>[Uu(C),C])),N=[];for(const C of m){const $=k.get(C);$&&N.push($)}return k.forEach((C,$)=>{m.includes($)||N.push(C)}),N},[t,m]),x=R.useMemo(()=>{const k=o.trim().toLowerCase();return k?_.filter(N=>xm(N).toLowerCase().includes(k)):_},[_,o]),S=o.trim()==="",T=k=>{const{destination:N,source:C}=k;if(!N||!S||N.index===C.index)return;const $=x.map(Uu),A=GI($,C.index,N.index),M=_.map(Uu).filter(H=>!$.includes(H)),G=[...A,...M].filter((H,F,K)=>K.indexOf(H)===F);y(G)};return g.jsxs(g.Fragment,{children:[g.jsx("style",{children:"[data-rbd-drag-handle-context-id]{touch-action:none!important}"}),g.jsx("div",{className:`fixed inset-0 bg-black/60 transition-opacity duration-200 z-[1000] ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:i}),g.jsxs("div",{className:`fixed bottom-0 inset-x-0 mx-auto w-full max-w-[640px] max-h-[80dvh] bg-white dark:bg-neutral-950 rounded-t-2xl border border-neutral-200 dark:border-neutral-800 p-4 overflow-auto transition-transform duration-300 z-[1001] ${e?"translate-y-0":"translate-y-full"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200",children:" "}),g.jsx("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white text-sm cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{placeholder:" ",value:o,onChange:k=>l(k.target.value),className:"flex-1 px-3 py-2 rounded bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 text-sm text-neutral-900 dark:text-neutral-100"}),!S&&g.jsx("span",{className:"text-[11px] text-neutral-500 dark:text-neutral-400 whitespace-nowrap",children:"    "})]}),g.jsx(wd,{onDragEnd:T,children:g.jsx(il,{droppableId:"peopleList",children:k=>g.jsxs("ul",{ref:k.innerRef,...k.droppableProps,className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto",children:[x.map((N,C)=>{const $=String(Uu(N)),A=tp(N);return g.jsx(Sc,{draggableId:$,index:C,children:D=>g.jsx("li",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,onClick:()=>n(N),className:"w-full text-left p-3 rounded border bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-800 cursor-grab select-none active:cursor-grabbing",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"mr-2 select-none",children:""}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-neutral-900 dark:text-neutral-50 text-sm truncate",children:xm(N)}),g.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Qu(A)})]})]})})},$)}),k.placeholder]})})})]})]})}function nb({label:e,gzHour:t,gzDay:n,gzMonth:i,gzYear:o,dayStem:l,cardSettings:u,sinsalBaseBranch:f,sinsalMode:m,sinsalBloom:p}){const y=k=>{const N=u.showSibiUnseong?Jt(l,k):"",C=u.showSibiSinsal?Qt({baseBranch:f,targetBranch:k,era:HI(m),gaehwa:!!p}):"";return{unseongText:N||void 0,shinsalText:C||void 0}},_=cn(t).charAt(1),x=cn(n).charAt(1),S=cn(i).charAt(1),T=cn(o).charAt(1);return g.jsxs("div",{className:"rounded-lg border bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 py-2 desk:p-2",children:[g.jsx("div",{className:"px-2 py-1 text-xs text-neutral-600 dark:text-neutral-300",children:e}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-neutral-900 dark:text-white",children:[["",cn(t),_],["",cn(n),x],["",cn(i),S],["",cn(o),T]].map(([k,N,C])=>{const{unseongText:$,shinsalText:A}=y(C);return g.jsx(cc,{label:k,gz:N,dayStem:l,settings:Wn.getState().settings,unseongText:$,shinsalText:A,hideBranchSipSin:!0,size:"sm"},`${e}-${k}`)})})]})}function FI(e){if(!e)return"";const t=e,n=f=>typeof t[f]=="string"?String(t[f]).trim().toLowerCase():null,i=f=>typeof t[f]=="boolean"?t[f]:null,o=[n("gender"),n("sex"),n("genderType"),n(""),n("sexType"),n("g")].filter(f=>!!f);for(const f of o){if(["","","male","m","boy","man"].includes(f))return"";if(["","","female","f","girl","woman"].includes(f))return""}const l=i("isMale"),u=i("isFemale");return l===!0?"":u===!0?"":""}function ic({label:e,data:t,mode:n,effectiveDate:i,onPick:o}){const l=Wn(M=>M.settings),u=R.useMemo(()=>t?tp(t):null,[t]),f=cn(u?$i(u,"/"):void 0),m=cn(u?_t(u,"/"):void 0),p=cn(u?jt(u):void 0),y=cn(u?ut(u):void 0),_=R.useMemo(()=>m.charAt(0)||"",[m]),x=u,S=R.useMemo(()=>{const M=t?.birthPlace;return!M||M.name===""||!M.lon?127.5:M.lon},[t]),T=t?.mingSikType??"/",k=R.useMemo(()=>{const M=x?_t(x,T).charAt(1):m.charAt(1)||"",G=x?ut(x,S).charAt(1):y.charAt(1)||"";return(l.sinsalBase??"")===""?M:G},[l.sinsalBase,x,T,S,m,y]),N=R.useMemo(()=>{if(n!==""||!u||!t)return null;try{const M=Mk(u,f,t.dir,120,t.mingSikType),G=Rk(M,m,t.dir,t.DayChangeRule),H=Sd(u,p,t.dir,120,t?.birthPlace?.lon??127.5),F=Lk(H,y,t.dir,t.DayChangeRule,u),K=i;return{si:cn(Df(M.events,K)?.gz,f),il:cn(Df(G.events,K)?.gz,m),wl:cn(Df(H.events,K)?.gz,p),yn:cn(Df(F.events,K)?.gz,y)}}catch{return null}},[n,u,f,m,p,y,i,t]),C=R.useMemo(()=>{if(n!=="")return null;const M=i;return{si:cn($i(M,"/")),il:cn(_t(M,"/")),wl:cn(jt(M)),yn:cn(ut(M))}},[n,i]),$=t?xm(t):"",A=u?Qu(u):"",D=t?FI(t):"";return t?g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:o,className:"px-3 py-1 rounded text-xs bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 border border-neutral-900 dark:border-white hover:opacity-90 cursor-pointer",title:" ",children:" "}),g.jsxs("div",{className:"text-[11px] text-neutral-600 dark:text-neutral-300",children:[g.jsx("span",{className:"font-semibold text-neutral-900 dark:text-neutral-200",children:e}),g.jsx("span",{className:"ml-2 text-neutral-900 dark:text-neutral-50",children:$}),D&&g.jsxs("span",{className:"ml-1 text-neutral-500 dark:text-neutral-400",children:[" ",D]}),A&&g.jsx("span",{className:"block desk:inline-block mt-1 text-neutral-500 dark:text-neutral-400 text-[10px]",children:A})]}),n===""&&g.jsx(nb,{label:"",gzHour:f,gzDay:m,gzMonth:p,gzYear:y,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&N&&g.jsx(nb,{label:"",gzHour:N.si,gzDay:N.il,gzMonth:N.wl,gzYear:N.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom}),n===""&&C&&g.jsx(nb,{label:"",gzHour:C.si,gzDay:C.il,gzMonth:C.wl,gzYear:C.yn,dayStem:_,cardSettings:l,sinsalBaseBranch:k,sinsalMode:l.sinsalMode,sinsalBloom:!!l.sinsalBloom})]}):g.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg border border-dashed bg-white dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700",children:g.jsx("button",{onClick:o,className:"px-3 py-2 rounded bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 text-sm hover:opacity-90 cursor-pointer",children:" "})})}function YI({people:e=[]}){const[t,n]=R.useState(),[i,o]=R.useState(),[l,u]=R.useState(!1),[f,m]=R.useState(!1),p=R.useRef(new Date),[y,_]=R.useState(()=>$I(p.current)),x=R.useRef(f2(y)??p.current),S=R.useMemo(()=>{const A=f2(y);return A&&(x.current=A),x.current},[y]),[T,k]=R.useState(!1),[N,C]=R.useState(!1);function $(A){if(!A)return["","","",""];try{const D=tp(A),M={hour:cn($i(D,"/")),day:cn(_t(D,"/")),month:cn(jt(D)),year:cn(ut(D))};return[M.year,M.month,M.day,M.hour]}catch{return["","","",""]}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"w-[96%] max-w-[640px] mx-auto bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 rounded-xl shadow border border-neutral-200 dark:border-neutral-800 px-2 py-4 desk:p-4",children:[g.jsxs("header",{className:"flex gap-3 justify-between items-center mb-4",children:[g.jsx("div",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-200",children:" "}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-600 dark:text-neutral-400",children:[g.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:A=>u(A.target.checked),className:"accent-indigo-500"})," "]}),g.jsx("button",{onClick:()=>m(A=>!A),className:"px-2 py-1 rounded border border-neutral-300 dark:border-neutral-700 hover:border-indigo-500 text-neutral-700 dark:text-neutral-300 bg-white dark:bg-neutral-900 cursor-pointer",children:f?"  ":"  "})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 desk:gap-4",children:[g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)}),l&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),l&&i&&g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)}),f&&t&&g.jsx(ic,{label:" A",data:t,mode:"",effectiveDate:S,onPick:()=>k(!0)}),f&&i&&g.jsx(ic,{label:" B",data:i,mode:"",effectiveDate:S,onPick:()=>C(!0)})]}),t&&i&&g.jsx("div",{className:"mt-4",children:g.jsx(MI,{pillarsA:$(t),pillarsB:$(i)})}),g.jsxs("div",{className:"mt-4 max-w-[260px] mx-auto text-center",children:[g.jsx("label",{className:"min-w-0 block text-xs text-neutral-600 dark:text-neutral-400 mb-2",children:"/ "}),g.jsx("input",{type:"datetime-local",value:y,onChange:A=>_(A.target.value),className:"min-w-0 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700 rounded px-3 py-1 text-xs w-[260px] max-w-[260px] box-border overflow-x-hidden text-neutral-900 dark:text-neutral-100 h-30",min:"1900-01-01T00:00",max:"2100-12-31T23:59"})]})]}),g.jsx(m2,{open:T,list:e||[],onSelect:A=>{n(A),k(!1)},onClose:()=>k(!1)}),g.jsx(m2,{open:N,list:e||[],onSelect:A=>{o(A),C(!1)},onClose:()=>C(!1)})]})}function qI(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=async()=>{try{const{data:{user:l}}=await At.auth.getUser();if(!l){alert("  .");return}const u=l.id;await At.from("profiles").delete().eq("id",u),await At.from("myeongsik").delete().eq("user_id",u),await At.auth.admin.deleteUser(u),await At.auth.signOut(),alert(" ."),window.location.href="/"}catch(l){console.error(l),alert("   .")}};return g.jsxs(g.Fragment,{children:[g.jsxs("footer",{className:"py-8 px-4 border-t border-neutral-200 dark:border-neutral-700",children:[g.jsx("div",{className:"text-center text-[12px] text-orange-600 dark:text-orange-300",children:"Copyright  2025 Hwarim96. All rights reserved."}),g.jsxs("div",{className:"flex flex-col items-center gap-2 mt-3",children:[g.jsx("button",{onClick:()=>t(!0),className:"text-[12px] text-neutral-500 dark:text-neutral-300 underline cursor-pointer hover:text-orange-500 transition",children:" "}),g.jsx("button",{onClick:()=>i(!0),className:"text-[12px] text-red-500 underline hover:text-red-400 transition cursor-pointer",children:""})]})]}),e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>t(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>t(!1),className:"cursor-pointer mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})}),n&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>i(!1),children:g.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:l=>l.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4 text-red-500",children:" ?"}),g.jsxs("p",{className:"text-sm leading-relaxed mb-6",children:["         .",g.jsx("br",{}),"    ."]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>i(!1),className:"cursor-pointer flex-1 py-2 bg-neutral-300 dark:bg-neutral-700 text-black dark:text-white rounded-lg hover:bg-neutral-400 transition",children:""}),g.jsx("button",{onClick:o,className:"cursor-pointer flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:""})]})]})})]})}function ZI({ms:e}){const{date:t,setDate:n}=fi();R.useEffect(()=>{n(new Date)},[e]);const i=Py(e),o=R.useMemo(()=>{const f=t??new Date,m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),y=String(f.getDate()).padStart(2,"0");return`${m}-${p}-${y}`},[t]),l=f=>{if(!f)return;const[m,p,y]=f.split("-"),_=Number(m),x=Number(p),S=Number(y);if(!Number.isFinite(_)||!Number.isFinite(x)||!Number.isFinite(S))return;const T=t??new Date,k=T.getHours(),N=T.getMinutes(),C=new Date(_,x,0).getDate(),$=Math.min(S,C),A=new Date(_,x-1,$,k,N,0,0);Number.isNaN(A.getTime())||n(A)},u=R.useMemo(()=>{const f=e.ganji,m=i?.dae?.gz?`${i.dae.gz}`:null,p=i?.se?.gz?`${i.se.gz}`:null,y=i?.wol?.gz?`${i.wol.gz}`:null,_=[m,p,y].filter(Boolean).join(" ");return[f,_].filter(Boolean).join(" + ")},[e,i]);return g.jsxs("div",{className:"max-w-[640px] mx-auto mb-4 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-3 space-y-3",children:[u&&g.jsx("div",{className:"text-center text-sm font-medium text-neutral-800 dark:text-neutral-200",children:u}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.jsxs("label",{className:"w-full flex justify-center items-center",children:[g.jsx("span",{className:"text-sm text-neutral-500 mr-4",children:""}),g.jsx("input",{type:"date",value:o,onChange:f=>l(f.target.value),min:"1900-01-01",max:"2100-12-31",className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})]})})]})}const VI=["23:0000:59","01:0002:59","03:0004:59","05:0006:59","07:0008:59","09:0010:59","11:0012:59","13:0014:59","15:0016:59","17:0018:59","19:0020:59","21:0022:59"];function KI(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function Mf(e,t){return e&&t?`${e}${t}`:null}function p2(e){return!!(e.yearStem&&e.yearBranch&&e.monthStem&&e.monthBranch&&e.dayStem&&e.dayBranch&&e.hourStem&&e.hourBranch)}const WI={:0,:1,:2,:3,:4,:5,:6,:7,:8,:9},XI=Bi.,JI=["","","","","","","","","","","",""];function g2(e,t){let n;e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":e===""||e===""?n="":n="";const i=WI[n],o=JI.indexOf(t),l=(i+(o>=0?o:0))%10;return XI[l]}const QI=Bi..slice(),ez=["","","","","","","","","","","",""];function sc(e,t){const i=(t===""?B2:Wb)[e],o=t===""?QI:ez,l=Bi..reduce((u,f)=>(u[f]="",u),{});for(let u=0;u<12;u++)l[o[u]]=i[u];return l}const tz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},nz={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};function rz({open:e,onClose:t,onSave:n}){const{settings:i}=Wn(),[o,l]=R.useState(null),[u,f]=R.useState({}),[m,p]=R.useState(null),[y,_]=R.useState(!0),[x,S]=R.useState(!0),[T,k]=R.useState(""),[N,C]=R.useState("male"),[$,A]=R.useState(null),[D,M]=R.useState(!1),[,G]=R.useState(null),[H,F]=R.useState(null),[K,ae]=R.useState({gender:"",mingSikType:"/",DayChangeRule:"",calendarType:"solar"}),[Q,Y]=R.useState(!1),[te,re]=R.useState(null),Se=fe=>{re(fe),setTimeout(()=>re(null),1800)},[X,oe]=R.useState(!1),[J,ye]=R.useState(!1);R.useEffect(()=>{if(X){const fe=setTimeout(()=>oe(!1),2e3);return()=>clearTimeout(fe)}},[X]),R.useEffect(()=>{if(J){const fe=setTimeout(()=>ye(!1),2e3);return()=>clearTimeout(fe)}},[J]);const W=()=>{const fe=H!==null?$?.filter((kn,Dn)=>Dn===H)??[]:[];if(fe.length===0){alert("  .");return}const Le=T===""?"/":"",le=fe[0],[he,$e,Ie]=le.date.split("-").map(Number),He={:{hh:0,mi:0},:{hh:2,mi:0},:{hh:4,mi:0},:{hh:6,mi:0},:{hh:8,mi:0},:{hh:10,mi:0},:{hh:12,mi:0},:{hh:14,mi:0},:{hh:16,mi:0},:{hh:18,mi:0},:{hh:20,mi:0},:{hh:22,mi:0}};let st=0,et=0;if(le.hourSlots.length>0){const kn=le.hourSlots[0].branch,Dn=He[kn];Dn&&(st=Dn.hh,et=Dn.mi)}const Zt=new Date(he,$e-1,Ie,st,et),En=new Date(Zt.getTime()-30*6e4),Tn=En.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),lr=N==="male"?"":"";function vr(kn,Dn){const Nr=["","","","","","","","","",""].includes(kn),cr=Dn==="";return Nr?cr?"forward":"backward":cr?"backward":"forward"}const dn=vr(le.year.charAt(0),lr),Ct=ut(En,127.5),bn=jt(En,127.5),hn=_t(En,Le),qr=$i(En,Le),ra=[` : ${Ct} ${bn} ${hn}`,qr?`${qr}`:null].filter(Boolean).join(" "),zi={id:uT(),name:"",birthDay:`${he}${String($e).padStart(2,"0")}${String(Ie).padStart(2,"0")}`,birthTime:`${String(st).padStart(2,"0")}${String(et).padStart(2,"0")}`,gender:lr,birthPlace:Q?{name:"",lat:0,lon:127.5}:K.birthPlace??{name:"",lat:0,lon:127.5},relationship:K.relationship??"",memo:K.memo??"",folder:sl(K.folder),mingSikType:K.mingSikType??"/",DayChangeRule:K.mingSikType===""?"":"",calendarType:K.calendarType??"solar",yearGZ:le.year,monthGZ:le.month,dayGZ:le.day,hourGZ:le.hour,ganjiText:` : ${le.year} ${le.month} ${le.day} ${le.hour}`,ganji:ra,dayStem:le.day.charAt(0),dateObj:Zt,corrected:En,correctedLocal:Tn,dir:dn};Rm.flushSync(()=>{ss.getState().add(zi)}),n(zi),re(" !"),ae({gender:"",mingSikType:"/",calendarType:"solar"}),Y(!1),t()},U=y||x,B=!!(u.yearStem&&u.yearBranch),q=!!(u.dayStem&&u.dayBranch),V=!U||B||q,P=!!m&&m.endsWith("Stem"),Z=!!m&&m.endsWith("Branch");function ie(fe){return fe==="yearStem"?"yearBranch":fe==="yearBranch"?"yearStem":fe==="monthStem"?"monthBranch":fe==="monthBranch"?"monthStem":fe==="dayStem"?"dayBranch":fe==="dayBranch"?"dayStem":fe==="hourStem"?"hourBranch":"hourStem"}const me=R.useCallback((fe,Le)=>{if(!y||!fe.yearStem)return fe;const le={...fe},he=Wb[fe.yearStem];if(!he)return le;const $e=He=>he.filter(st=>st.startsWith(He)),Ie=He=>he.find(st=>st.endsWith(He));if(Le==="monthStem"&&le.monthStem){const He=$e(le.monthStem).map(st=>st.slice(1));return He.length>=2?(l(He.slice(0,2)),p("monthBranch"),le):(He.length===1&&(le.monthBranch=He[0],l(null)),le)}if(Le==="monthBranch"&&le.monthBranch){const He=Ie(le.monthBranch);return He&&(le.monthStem=He.slice(0,1),l(null)),le}if(Le==="yearStem"){if(le.monthStem&&!le.monthBranch){const He=$e(le.monthStem).map(st=>st.slice(1));if(He.length>=2)return l(He.slice(0,2)),p("monthBranch"),le;He.length===1&&(le.monthBranch=He[0])}else if(le.monthBranch&&!le.monthStem){const He=Ie(le.monthBranch);He&&(le.monthStem=He.slice(0,1))}}return le},[y,p]),ce=R.useCallback((fe,Le)=>{if(!x||!fe.dayStem)return fe;const le={...fe},he=sc(fe.dayStem,T),$e=He=>Object.entries(he).find(([,st])=>st.startsWith(He)),Ie=He=>he[He];if(Le==="hourStem"&&le.hourStem){const He=$e(le.hourStem);return He&&(le.hourBranch=He[0]),le}if(Le==="hourBranch"&&le.hourBranch){const He=Ie(le.hourBranch);return He&&(le.hourStem=He.slice(0,1)),le}if(Le==="dayStem"){if(le.hourStem&&!le.hourBranch){const He=$e(le.hourStem);He&&(le.hourBranch=He[0])}else if(le.hourBranch&&!le.hourStem){const He=Ie(le.hourBranch);He&&(le.hourStem=He.slice(0,1))}}return le},[x,T]),xe=R.useCallback(fe=>!y||!fe.yearStem?!1:fe.monthBranch&&fe.monthStem?g2(fe.yearStem,fe.monthBranch)!==fe.monthStem:!1,[y]),ke=R.useCallback(fe=>{if(!x||!fe.dayStem)return!1;if(fe.hourBranch&&fe.hourStem){const le=sc(fe.dayStem,T)[fe.hourBranch];return le?le.slice(0,1)!==fe.hourStem:!1}return!1},[x,T]);R.useEffect(()=>{if(!(!x||!u.dayStem||!u.hourBranch)&&(u.hourBranch===""||u.hourBranch==="")){const Le=sc(u.dayStem,T)[u.hourBranch];Le&&f(le=>({...le,hourStem:Le.slice(0,1)}))}},[T,x,u.dayStem,u.hourBranch]);const je=R.useCallback(fe=>{if(!m)return;if(!V&&!(m==="yearStem"||m==="yearBranch"||m==="dayStem"||m==="dayBranch")){G("/  :    ."),setTimeout(()=>G(null),1500);return}let le={...u,[m]:fe};(m==="yearStem"||m==="monthStem"||m==="monthBranch")&&(le=me(le,m)),(m==="dayStem"||m==="hourStem"||m==="hourBranch")&&(le=ce(le,m)),f(le);let he=!1;xe(le)&&(_(!1),he=!0),ke(le)&&(S(!1),he=!0),he&&Se("/  .   ."),f(le),A(null);const $e=ie(m);p($e),setTimeout(()=>{const Ie={...le};if(Ie.yearStem&&Ie.yearBranch&&!Ie.monthStem){p("monthStem");return}if(Ie.monthStem&&Ie.monthBranch&&!Ie.dayStem){p("dayStem");return}if(Ie.dayStem&&Ie.dayBranch&&!Ie.hourStem){p("hourStem");return}},0)},[m,u,V,me,ce,xe,ke]),Me=p2(u),Ee=R.useCallback(async()=>{if(A(null),G(null),!p2(u)){G("   .");return}const fe=Mf(u.yearStem,u.yearBranch),Le=Mf(u.monthStem,u.monthBranch),le=Mf(u.dayStem,u.dayBranch),he=Mf(u.hourStem,u.hourBranch),$e=300,Ie=[];M(!0);try{const He=new Date(1900,0,1,12,0,0),st=new Date(2100,11,31,12,0,0);for(let et=He.getTime();et<=st.getTime();et+=24*3600*1e3){const Zt=new Date(et),En=T===""?"/":"",Tn=ut(Zt);if(Tn!==fe)continue;const lr=jt(Zt);if(lr!==Le)continue;const vr=_t(Zt,En);if(vr!==le)continue;const dn=sc(u.dayStem,T),Ct=[];for(let bn=0;bn<12;bn++){const hn=Bi.[bn];dn[hn]===he&&Ct.push({branch:hn,time:VI[bn]})}if(Ct.length!==0&&(Ie.push({date:KI(Zt),year:Tn,month:lr,day:vr,hour:he,hourSlots:Ct}),Ie.length>=$e))break}Ie.length===0&&G("  . (: 19002100)"),A(Ie)}catch(He){He instanceof Error?G(He.message):G(String(He))}finally{M(!1)}},[u,T]),Pe=()=>{f({}),A(null),G(null),p(null)},Ce=fe=>{A(null),fe&&f(Le=>{const le={...Le};return le.yearStem&&le.monthBranch&&(le.monthStem=g2(le.yearStem,le.monthBranch)),le}),_(fe)},Be=fe=>{A(null),fe&&f(Le=>{const le={...Le};if(le.dayStem&&le.hourBranch){const $e=sc(le.dayStem,T)[le.hourBranch];$e&&(le.hourStem=$e.slice(0,1))}return le}),S(fe)};if(!e)return null;const Ue=fe=>{if(A(null),k(fe),x&&u.dayStem&&u.hourBranch&&(u.hourBranch===""||u.hourBranch==="")){const le=sc(u.dayStem,fe)[u.hourBranch];le&&f(he=>({...he,hourStem:le.slice(0,1)}))}};return g.jsx("div",{className:"fixed min-w-[320px] inset-0 z-[1000] flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-white max-w-[360px] dark:bg-neutral-900 rounded-xl shadow-xl w-full max-w-5xl p-4 relative",children:[g.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200 cursor-pointer","aria-label":"",children:g.jsx(jA,{size:20})}),g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),g.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:"/"}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useWoldu",checked:y,onChange:fe=>Ce(fe.target.checked)}),g.jsx("label",{htmlFor:"useWoldu",className:"ml-1",children:" "})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"checkbox",id:"useSidu",checked:x,onChange:fe=>Be(fe.target.checked)}),g.jsx("label",{htmlFor:"useSidu",className:"ml-1",children:" "})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:" "}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"jasi",checked:T==="",onChange:()=>Ue("")}),g.jsx("label",{htmlFor:"jasi",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"insi",checked:T==="",onChange:()=>Ue("")}),g.jsx("label",{htmlFor:"insi",className:"ml-1",children:""})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsxs("span",{className:"mr-3 chkContainer",children:[g.jsx("input",{type:"radio",id:"male",checked:N==="male",onChange:()=>C("male")}),g.jsx("label",{htmlFor:"male",className:"ml-1",children:""})]}),g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",id:"female",checked:N==="female",onChange:()=>C("female")}),g.jsx("label",{htmlFor:"female",className:"ml-1",children:""})]})]})]}),U&&!V&&g.jsxs("div",{className:"mb-3 text-sm text-orange-700 bg-orange-50 dark:text-orange-300 dark:bg-orange-900/30 rounded p-2 text-center",children:["/  . ",g.jsx("br",{}),g.jsx("b",{children:""}),"  ",g.jsx("b",{children:""}),"  ."]}),g.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[["hourStem",""],["dayStem",""],["monthStem",""],["yearStem",""],["hourBranch",""],["dayBranch",""],["monthBranch",""],["yearBranch",""]].map(([fe,Le])=>{const le=!V&&!(fe==="yearStem"||fe==="yearBranch"||fe==="dayStem"||fe==="dayBranch"),he=m===fe;return g.jsxs("button",{onClick:()=>!le&&p(fe),disabled:le,className:["border rounded p-2 text-center cursor-pointer",he?"border-purple-500 bg-purple-100 dark:bg-purple-900/30":"border-neutral-300 dark:border-neutral-700",le?"opacity-50 cursor-not-allowed":""].join(" "),children:[Le,g.jsx("br",{}),g.jsx("span",{className:"font-bold",children:u[fe]??"-"})]},fe)})}),o&&o.length>0&&g.jsxs("div",{className:"mb-3",children:[g.jsx("p",{className:"text-sm mb-1",children:"  :"}),g.jsx("div",{className:"flex gap-2",children:o.map(fe=>g.jsx("button",{onClick:()=>{let Le={...u,monthBranch:fe};l(null),Le=me(Le,"monthBranch"),f(Le),p("dayStem")},className:"flex-1 px-2 py-1 border rounded hover:bg-orange-100 dark:hover:bg-orange-800 cursor-pointer",children:fe},fe))})]}),g.jsx("div",{className:"flex w-full flex-wrap gap-6 mb-4",children:m?g.jsxs("div",{className:"w-full",children:[P&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:Bi..map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"stem",i)}`,children:fe},fe))})]}),Z&&g.jsxs("div",{children:[g.jsx("p",{className:"font-medium mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-6 gap-2",children:Bi..filter(fe=>{const Le=ie(m),le=u[Le];return le?nz[fe]===tz[le]:!0}).map(fe=>g.jsx("button",{onClick:()=>je(fe),className:`border rounded px-2 py-1 cursor-pointer ${hi(fe,"branch",i)}`,children:fe},fe))})]})]}):g.jsx("div",{className:"text-sm text-neutral-500 p-2 border rounded w-full text-center",children:"    ."})}),g.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[g.jsx("span",{children:g.jsx("button",{type:"button",onClick:()=>{if(!Me){oe(!0);return}Ee()},disabled:D,className:"px-2 py-1 rounded-md bg-blue-600 text-white disabled:opacity-50 cursor-pointer",children:D?" ...":""})}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:Pe,className:"px-2 py-1 rounded-md bg-red-600 border border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""}),g.jsx("button",{type:"button",onClick:()=>{if((H!==null?$?.filter((Le,le)=>le===H)??[]:[]).length===0){ye(!0);return}W()},className:"px-2 py-1 rounded-md border bg-yellow-600 border-neutral-300 dark:border-neutral-700 cursor-pointer",children:""})]})]}),g.jsx("div",{className:"max-h-[40vh] overflow-auto rounded border border-neutral-200 dark:border-neutral-800",children:$?$.length===0?g.jsx("div",{className:"p-4 text-neutral-500",children:"  ."}):g.jsxs("table",{className:"w-full text-xs",children:[g.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-neutral-800",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""}),g.jsx("th",{className:"p-1 text-center",children:""})]})}),g.jsx("tbody",{children:$.map((fe,Le)=>g.jsxs("tr",{className:"border-t border-neutral-200 dark:border-neutral-800",children:[g.jsx("td",{className:"p-1 text-center",children:g.jsxs("span",{className:"chkContainer",children:[g.jsx("input",{type:"radio",name:"selectRow",id:`selectRow-${Le}`,checked:H===Le,onChange:()=>F(Le)}),g.jsx("label",{htmlFor:`selectRow-${Le}`,children:"ON"})]})}),g.jsx("td",{className:"p-1 text-center",children:fe.date}),g.jsx("td",{className:"p-1 text-center",children:fe.year}),g.jsx("td",{className:"p-1 text-center",children:fe.month}),g.jsx("td",{className:"p-1 text-center",children:fe.day}),g.jsx("td",{className:"p-1 text-center",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:fe.hourSlots.map((le,he)=>g.jsx("span",{className:"inline-flex items-center mx-auto gap-1 px-1 py-0.5 rounded bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700",children:g.jsx("b",{children:le.branch})},he))})}),g.jsx("td",{className:"p-1 text-center",children:N==="male"?"":""})]},`${fe.date}-${Le}`))})]}):g.jsx("div",{className:"p-2 text-neutral-500 text-sm text-center",children:"   ."})}),te&&g.jsx("div",{className:"pointer-events-none fixed left-1/2 -translate-x-1/2 top-6 z-[1100] border border-white/30",children:g.jsx("div",{className:"px-4 py-2 rounded-md bg-black/80 text-white text-sm shadow-lg",children:te})}),X&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg",children:" 4  ."})}),J&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[2000]",children:g.jsxs("div",{className:"bg-black text-white px-4 py-2 rounded-lg shadow-lg text-center",children:[" .",g.jsx("br",{})," ,  ."]})})]})})}const OA=gd(e=>({shinsalBase:"",shinsalEra:"",shinsalGaehwa:!1,hiddenStemMode:"hgc",setShinsalBase:t=>e({shinsalBase:t}),setShinsalEra:t=>e({shinsalEra:t}),setShinsalGaehwa:t=>e({shinsalGaehwa:t}),setHiddenStemMode:t=>e({hiddenStemMode:t})}));function wm(e){if(!e)return["","","",""];let t=Number(e.birthDay?.slice(0,4)??2e3),n=Number(e.birthDay?.slice(4,6)??1),i=Number(e.birthDay?.slice(6,8)??1);if(e.calendarType==="lunar"){const A=br(t,n,i);t=A.getFullYear(),n=A.getMonth()+1,i=A.getDate()}const o=!e.birthTime||e.birthTime==="",l=o?4:Number(e.birthTime.slice(0,2)),u=o?30:Number(e.birthTime.slice(2,4)),f=new Date(t,n-1,i,l,u,0,0),m=!e.birthPlace||e.birthPlace.name===""||!e.birthPlace.lon?127.5:e.birthPlace.lon,p=cl(f,m,o),y=e.mingSikType??"/",_=ut(p,m),x=jt(p,m),S=_t(p,y),T=o?null:$i(p,y),k=Fe(_),N=Fe(x),C=Fe(S),$=T?Fe(T):"";return[k,N,C,$]}function DA(e){const t=new Date(e.corrected),n=wm(e),i=n[0].charAt(0),l=["","","","",""].includes(i),u=e.gender==="",f=u&&l||!u&&!l?"forward":"backward",m=Sd(t,n[1],f,120,e.birthPlace?.lon??127.5),p=m.firstChange;if(!p)return[];const y=[];let _=Fe(m.events[0]?.gz??n[1]);for(let x=0;x<10;x++){const S=new Date(p);if(S.setFullYear(S.getFullYear()+x*10),x>0){const T=m.events[x];T&&(_=Fe(T.gz))}y.push(`${S.getFullYear()} ${String(S.getMonth()+1).padStart(2,"0")} ${_}  `)}return y}const iz=!1,b2=e=>e<10?`0${e}`:`${e}`;function MA(e){const t=e,n=typeof t.birthDay=="string"?t.birthDay:"",i=typeof t.calendarType=="string"?t.calendarType:"solar";if(n.length<8)return e;const o=Number(n.slice(0,4)),l=Number(n.slice(4,6)),u=Number(n.slice(6,8));if(i==="lunar")try{const f=br(o,l,u,0,0),m=`${f.getFullYear()}${b2(f.getMonth()+1)}${b2(f.getDate())}`;return{...e,birthDay:m,calendarType:"solar"}}catch{return e}return e}const Zu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Vu={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},fd={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Cf={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},sz=["","","","",""];function y2(e){return sz.includes(e)}const CA={:"",:"",:"",:"",:""},RA={:"",:"",:"",:"",:""},LA={:"",:"",:"",:"",:""},BA={:"",:"",:"",:"",:""};function Gb(e){if(!e)return null;const t=e.trim();if(["","","","","","","","","",""].includes(t))return t;if(Zu[t])return Zu[t];if(["","","","","","","","","","","",""].includes(t))return Cf[t]??null;if(Vu[t])return Cf[Vu[t]]??null;const n=t.charAt(0);return Zu[n]?Zu[n]:["","","","","","","","","",""].includes(n)?n:Vu[n]?Cf[Vu[n]]??null:["","","","","","","","","","","",""].includes(n)?Cf[n]??null:null}function az(e,t){const n=fd[e],i=fd[t];if(!n||!i)return"";let o;i===n?o="":i===CA[n]?o="":i===RA[n]?o="":i===LA[n]?o="":i===BA[n]?o="":o="";const l=y2(e)===y2(t);switch(o){case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":"";case"":return l?"":""}}function PA(e){const t=Object.entries(e),n=t.reduce((p,[,y])=>p+(y>0?y:0),0);if(n<=0)return Object.fromEntries(t.map(([p])=>[p,0]));const i=t.map(([p,y])=>[p,(y>0?y:0)*100/n]),o=i.map(([p,y])=>[p,Math.floor(y)]);let l=o.reduce((p,[,y])=>p+y,0);const u=i.map(([p,y])=>[p,y-Math.floor(y)]).sort((p,y)=>y[1]-p[1]),f=Object.fromEntries(o.map(([p,y])=>[p,y]));let m=0;for(;l<100&&m<u.length;)f[u[m][0]]+=1,l+=1,m+=1;return f}function oz(e){const t={};for(const[n,i]of Object.entries(e??{})){if(i<=0)continue;const o=Gb(n);o&&(t[o]=(t[o]??0)+i)}return t}function lz(e){if(!e)return[];const t=Gb(e.charAt(0)),n=Gb(e.charAt(1));return[t,n].filter(Boolean)}function Rf(e){const t=lz(e),n={};for(const i of t)n[i]=(n[i]??0)+1;return n}function ai(e,t){return t===e?"":t===CA[e]?"":t===RA[e]?"":t===LA[e]?"":t===BA[e]?"":""}const cz={:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"   ",keywords:"  "},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"/ ",keywords:""},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"  ",keywords:"  /"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:"  ",keywords:""},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:" ",keywords:"/ "},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:" ",keywords:" "},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"  ()",keywords:"/"},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"()",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:"( )",keywords:" "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:" ()",keywords:"  "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:"/ ",keywords:" "},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:" ",keywords:"/"},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"  ",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:"",keywords:" "},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:" ()",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"",keywords:""},:{name:"",element:"",brief:"  ",keywords:"/"},:{name:"",element:"",brief:"  ",keywords:"/"}};function uz(e){if(!e||e.length<2)return e;const t=e.charAt(0),n=e.charAt(1),i=Zu[t]??t,o=Vu[n]??n;return`${i}${o}`}function ar(e){const t=uz(e),n=cz[t];return n?{...n,code:t}:null}function dz(e){const t={:0,:0,:0,:0,:0};for(const[n,i]of Object.entries(e)){const o=fd[n];o&&(t[o]+=i)}return t}function hz(e,t){const n={:0,:0,:0,:0,:0,:0,:0,:0,:0,:0};for(const[i,o]of Object.entries(e)){if(o<=0)continue;const l=az(t,i);n[l]+=o}return n}function fz(e){return{:e.+e.,:e.+e.,:e.+e.,:e.+e.,:e.+e.}}const mz={natal:50,dae:30,se:20,wol:7,il:3};function pz(e){const t={};for(const{kind:i,bare:o}of e){const l=mz[i]??0;if(l<=0)continue;const u=PA(o);for(const[f,m]of Object.entries(u))t[f]=(t[f]??0)+m*l}const n=Object.values(t).reduce((i,o)=>i+o,0);if(n>0)for(const i of Object.keys(t))t[i]=t[i]/n*100;return t}function es(e,t,n){const i=oz(e.perStemElementScaled),o=t!==""&&n?.dae?Rf(n.dae):{},l=(t===""||t===""||t==="")&&n?.se?Rf(n.se):{},u=(t===""||t==="")&&n?.wol?Rf(n.wol):{},f=t===""&&n?.il?Rf(n.il):{},m=pz([{kind:"natal",bare:i},{kind:"dae",bare:o},{kind:"se",bare:l},{kind:"wol",bare:u},{kind:"il",bare:f}]),p=PA(m),y=dz(p),_=hz(p,e.dayStem),x=fz(_);return{perStemAugBare:p,elementPercent:y,totalsSub:_,totalsMain:x}}function gz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const rb=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),Fb=e=>{if(Array.isArray(e)){const t=e.map(Fb).filter(n=>!(n==null||Array.isArray(n)&&n.length===0||rb(n)&&Object.keys(n).length===0));return t.length>0?t:void 0}if(rb(e)){const t={};for(const[n,i]of Object.entries(e)){const o=Fb(i);o!==void 0&&(Array.isArray(o)&&o.length===0||rb(o)&&Object.keys(o).length===0||(t[n]=o))}return Object.keys(t).length>0?t:void 0}if(e!=null)return e},bz=e=>{const t=Fb(e);return t===void 0?"":typeof t=="string"||typeof t=="number"||typeof t=="boolean"?String(t):["```json",JSON.stringify(t,null,2),"```"].join(`
`)},si=(e,t)=>{const n=bz(t);return n?`## ${e}
${n}`:""};function yz(e){const{ms:t,natal:n,chain:i,basis:o,tab:l,unified:u,percent:f,category:m,topic:p,subTopic:y,relationMode:_,teacherMode:x}=e,S=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],T=DA(t).slice(0,10),k=gr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),N=Gr({natal:S,daewoon:l!==""?i?.dae??void 0:void 0,sewoon:l===""||l===""||l===""?i?.se??void 0:void 0,wolwoon:l===""||l===""?i?.wol??void 0:void 0,ilwoon:l===""?i?.il??void 0:void 0}),{shinsalEra:C,shinsalGaehwa:$,shinsalBase:A}=OA.getState(),D=A===""?S[0]?.charAt(1)??"":S[2]?.charAt(1)??"",M=es(u,l,i),G=M.elementPercent,H=M.totalsSub,{flags:F}=bA(S,u.elementScoreRaw),K=`${m} (${f.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`,ae=!t.birthTime||t.birthTime==="";function Q(B){const V=MA(B).birthDay??"",P=V.slice(0,4),Z=V.slice(4,6),ie=V.slice(6,8);let me="";if(B.corrected instanceof Date&&!isNaN(B.corrected.getTime())){const ce=String(B.corrected.getHours()).padStart(2,"0"),xe=String(B.corrected.getMinutes()).padStart(2,"0");me=ae?"":`${ce}:${xe}`}return`${P} ${Z} ${ie}  ${me}`}function Y(B,q){if(!q)return"()";const V=[];return(B===""||B===""||B===""||B==="")&&q.dae&&V.push(`:${Fe(q.dae)}`),(B===""||B===""||B==="")&&q.se&&V.push(`:${Fe(q.se)}`),(B===""||B==="")&&q.wol&&V.push(`:${Fe(q.wol)}`),B===""&&q.il&&V.push(`:${Fe(q.il)}`),V.length>0?V.join(" / "):"()"}const te=gz(S,t),re=u.dayStem,Se=fd[re],X=[` : ${t.name??""} (${Q(t)}) : ${t.gender}`,` ${S[0]} ${S[1]} ${S[2]}`+(S[3]?` ${S[3]}${!t.birthTime||t.birthTime===""?"()":""}`:""),`: ${Y(l,i)}`].join(`
`),oe=[];if(oe.push(si("  (10)",T)),oe.push(si("",K)),oe.push(si("(  )",Object.fromEntries(Object.entries(u.natalFixed.elementPercent100).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),l!==""&&oe.push(si(`(=${l})`,Object.fromEntries(Object.entries(G).map(([B,q])=>[`${B}(${ai(Se,B)})`,q])))),oe.push(si(" ( 10 100)",u.natalFixed.totalsSub)),l!==""&&oe.push(si(` ( 10=${l} 100)`,H)),oe.push(si("(+ )",l===""?S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean):[...S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,unseong:Jt(S[2]?.charAt(0)??"",B.charAt(1))}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,unseong:Jt(S[2]?.charAt(0)??"",i.dae.charAt(1))}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,unseong:Jt(S[2]?.charAt(0)??"",i.se.charAt(1))}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,unseong:Jt(S[2]?.charAt(0)??"",i.wol.charAt(1))}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,unseong:Jt(S[2]?.charAt(0)??"",i.il.charAt(1))}]:[]].filter(Boolean))),oe.push(si("(+  )",l===""?S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,shinsal:Qt({baseBranch:D,targetBranch:B.charAt(1),era:C,gaehwa:$})}).filter(Boolean):[...S.map((B,q)=>!B||q>=te.length?null:{pos:te[q],gz:B,shinsal:Qt({baseBranch:D,targetBranch:B.charAt(1),era:C,gaehwa:$})}).filter(Boolean),...i?.dae?[{pos:"",gz:i.dae,shinsal:Qt({baseBranch:D,targetBranch:i.dae.charAt(1),era:C,gaehwa:$})}]:[],...(l===""||l===""||l==="")&&i?.se?[{pos:"",gz:i.se,shinsal:Qt({baseBranch:D,targetBranch:i.se.charAt(1),era:C,gaehwa:$})}]:[],...(l===""||l==="")&&i?.wol?[{pos:"",gz:i.wol,shinsal:Qt({baseBranch:D,targetBranch:i.wol.charAt(1),era:C,gaehwa:$})}]:[],...l===""&&i?.il?[{pos:"",gz:i.il,shinsal:Qt({baseBranch:D,targetBranch:i.il.charAt(1),era:C,gaehwa:$})}]:[]].filter(Boolean))),oe.push(si("(+ )",l===""?S.map((B,q)=>{if(!B||q>=te.length)return null;const V=ar(B);return V?{pos:te[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:te[q],gz:B,nabeum:null}}).filter(Boolean):[...S.map((B,q)=>{if(!B||q>=te.length)return null;const V=ar(B);return V?{pos:te[q],gz:B,nabeum:V.name,element:V.element,code:V.code}:{pos:te[q],gz:B,nabeum:null}}).filter(Boolean),...i?.dae?(()=>{const B=ar(i.dae);return B?[{pos:"",gz:i.dae,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l===""||l==="")&&i?.se?(()=>{const B=ar(i.se);return B?[{pos:"",gz:i.se,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...(l===""||l==="")&&i?.wol?(()=>{const B=ar(i.wol);return B?[{pos:"",gz:i.wol,nabeum:B.name,element:B.element,code:B.code}]:[]})():[],...l===""&&i?.il?(()=>{const B=ar(i.il);return B?[{pos:"",gz:i.il,nabeum:B.name,element:B.element,code:B.code}]:[]})():[]].filter(Boolean))),oe.push(si("()",Xy(S.filter((B,q)=>q<te.length)))),oe.push(si("( :  )",k)),l===""){const B=Gr({natal:S,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:o});oe.push(si("( )",{good:B.good,bad:B.bad,meta:B.meta}))}else oe.push(si(`( =${l})`,N));const J=oe.filter(B=>B&&B.trim().length>0).join(`

`),ye=HA({topic:p,subTopic:y,timeMode:"single",tab:l,relationMode:_,teacherMode:x}),W=["-----","  ","","1.       (////)  .","2.  ,        ."];ye&&W.push("","  ( )",ye);const U=W.join(`
`);return[X,J,U].join(`

`)}function vz(e,t){return e[3]&&e[3]!==""?["","","",!t.birthTime||t.birthTime===""?"()":""]:["","",""]}const _z=e=>typeof e=="object"&&e!==null&&!Array.isArray(e);function nv(e){return new Date(e.startYear,(e.startMonth??1)-1,e.startDay??1)}function $A(e,t){const n=e[t],i=e[t+1];return i?nv(i):new Date(n.endYear+1,0,1)}function IA(e,t,n,i){return e<i&&t>n}function zA(e,t,n){const i=new Date(t,0,1),o=new Date(n+1,0,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=nv(f),p=$A(e,u);IA(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function v2(e,t){return zA(e,t,t)}function Lf(e,t,n){const i=new Date(t,n-1,1),o=new Date(t,n,1),l=[];for(let u=0;u<e.length;u++){const f=e[u],m=nv(f),p=$A(e,u);IA(m,p,i,o)&&(l.some(y=>y.gz===f.gz&&y.startYear===f.startYear)||l.push(f))}return l}function UA(e){const t=315569259747e-1,o=Date.UTC(1900,1,4,7,15,0)+(e-1900)*t+3*t/24,l=new Date(o);return new Date(l.getTime()+540*60*1e3)}function Bf(e,t){const n=[],i=new Date(e,t-1,15,0,0,0),o=new Date(e,t,1,15,0,0),l=UA(e),u=ut(new Date(e-1,5,15)),f=ut(new Date(e,5,15)),m=ut(new Date(e+1,5,15));if(o<=l)u&&n.push(Fe(u));else if(i>=l)f&&n.push(Fe(f));else if(u&&n.push(Fe(u)),f){const p=Fe(f);n.includes(p)||n.push(p)}if(t===12&&m){const p=Fe(m);n.includes(p)||n.push(p)}return n}function xz(e,t){const n=UA(e),i=new Date(e,t-1,1),o=[];return i<n&&o.push(e-1),i>=n&&o.push(e),t===12&&o.push(e+1),o}const ws=(e,t)=>{if(!e)return{};const n=t,i=f=>{if(!f)return;const m={};for(const[p,y]of Object.entries(f)){if(!Array.isArray(y))continue;const _=y.filter(x=>typeof x=="string"&&x.includes(n));_.length>0&&(m[p]=_)}if(Object.keys(m).length!==0)return m},o=i(e.good),l=i(e.bad),u={};return o&&(u.good=o),l&&(u.bad=l),u};function Yb(e){if(e!=null){if(Array.isArray(e)){const t=e.map(n=>Yb(n)).filter(n=>n!==void 0);return t.length>0?t:void 0}if(_z(e)){const t={};for(const[n,i]of Object.entries(e)){const o=Yb(i);o!==void 0&&(t[n]=o)}return Object.keys(t).length>0?t:void 0}return e}}const wz=e=>e==null?"":typeof e=="string"?e:JSON.stringify(e,null,2),Zn=(e,t)=>{const n=Yb(t);if(n===void 0)return"";const i=wz(n);return i.trim()?`## ${e}
${i}`:""},Xs=(e,t)=>{const n={};if(!e||typeof e!="object")return n;for(const[i,o]of Object.entries(e)){if(!Array.isArray(o))continue;const l=Array.from(new Set(o.filter(u=>typeof u=="string"&&u.includes(t))));l.length>0&&(n[i]=l)}return n};function Sz(e){const{ms:t,natal:n,basis:i,unified:o,percent:l,category:u,selectedDaeList:f,daeList:m,seYears:p,wolMonths:y,ilDays:_,topic:x,subTopic:S,teacherMode:T}=e,k=[Fe(n[0]??""),Fe(n[1]??""),Fe(n[2]??""),Fe(n[3]??"")],N=!t.birthTime||t.birthTime==="",C=vz(k,t),$=o.dayStem,A=fd[$],{shinsalEra:D,shinsalGaehwa:M,shinsalBase:G}=OA.getState(),H=G===""?k[0]?.charAt(1)??"":k[2]?.charAt(1)??"",{flags:F}=bA(k,o.elementScoreRaw),K=`${u} (${l.toFixed(1)}%)  ${[` ${F..||F..||F..||F..?"":""}`,` ${F..||F..||F..||F..?"":""}`,` ${F..||F..?"":""}`].join(", ")}`;function ae(J){const W=MA(J).birthDay??"",U=W.slice(0,4),B=W.slice(4,6),q=W.slice(6,8);let V="";if(J.corrected instanceof Date&&!isNaN(J.corrected.getTime())){const P=String(J.corrected.getHours()).padStart(2,"0"),Z=String(J.corrected.getMinutes()).padStart(2,"0");V=N?"":`${P}:${Z}`}return`${U} ${B} ${q}  ${V}`}const Q=[` : ${t.name??""} (${ae(t)}) : ${t.gender}`,` ${k[0]} ${k[1]} ${k[2]}`+(k[3]?` ${k[3]}${!t.birthTime||t.birthTime===""?"()":""}`:"")].join(`
`),Y=[];Y.push(Zn("",K)),Y.push(Zn("()",Object.fromEntries(Object.entries(o.natalFixed.elementPercent100).map(([J,ye])=>[`${J}(${ai(A,J)})`,ye])))),Y.push(Zn(" ( 10 100)",o.natalFixed.totalsSub)),Y.push(Zn("()",Xy(k.filter((J,ye)=>ye<C.length))));const te=Gr({natal:k,daewoon:null,sewoon:null,wolwoon:null,ilwoon:null,basis:i});if(Y.push(Zn("()",{good:te.good,bad:te.bad,meta:te.meta})),Y.push(Zn("()",k.map((J,ye)=>{if(!J||ye>=C.length)return null;const W=ar(J);return W?{pos:C[ye],gz:J,nabeum:W.name,element:W.element,code:W.code}:{pos:C[ye],gz:J,nabeum:null}}).filter(Boolean))),Y.push(Zn("()",k.map((J,ye)=>!J||ye>=C.length?null:{pos:C[ye],gz:J,unseong:Jt(k[2]?.charAt(0)??"",J.charAt(1))}).filter(Boolean))),Y.push(Zn("()",k.map((J,ye)=>!J||ye>=C.length?null:{pos:C[ye],gz:J,shinsal:Qt({baseBranch:H,targetBranch:J.charAt(1),era:D,gaehwa:M})}).filter(Boolean))),m.length>0)for(const J of f){const ye={dae:J.gz,se:null,wol:null,il:null},W=es(o,"",ye),U=gr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0}),B=Gr({natal:k,daewoon:J.gz,sewoon:void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),q=ar(J.gz),V=Jt(k[2]?.charAt(0)??"",J.gz.charAt(1)),P=Qt({baseBranch:H,targetBranch:J.gz.charAt(1),era:D,gaehwa:M});Y.push(Zn(`${J.age} ${J.gz} (${J.startYear}~${J.endYear})`,{:Object.fromEntries(Object.entries(W.elementPercent).map(([Z,ie])=>[`${Z}(${ai(A,Z)})`,ie])),:W.totalsSub,:U,:ws(B,""),:q?{gz:J.gz,nabeum:q.name,element:q.element,code:q.code}:null,:{pos:"",gz:J.gz,unseong:V},:{pos:"",gz:J.gz,shinsal:P}}))}if(p.length>0){const J=p[0],ye=p[p.length-1],W=zA(m,J,ye);if(W.length>0){const U=J,B=ut(new Date(U,5,15)),q=Fe(B||""),V={:W.map(P=>{const Z={dae:P.gz,se:q||null,wol:null,il:null},ie=es(o,"",Z),me=gr({natal:k,daewoon:P.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Gr({natal:k,daewoon:P.gz,sewoon:q||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),xe=ar(P.gz),ke=Jt(k[2]?.charAt(0)??"",P.gz.charAt(1)),je=Qt({baseBranch:H,targetBranch:P.gz.charAt(1),era:D,gaehwa:M});return{:`${P.age} ${P.gz} (${P.startYear}~${P.endYear})`,:P.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(A,Me)})`,Ee])),:ie.totalsSub,:Xs(me,""),:ws(ce,""),:xe?{gz:P.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:P.gz,unseong:ke},:{pos:"",gz:P.gz,shinsal:je}}})};Y.push(Zn("",V))}for(const U of p){const B=ut(new Date(U,5,15)),q=v2(m,U),V=q.length>0?q[0]:null,P={dae:V?V.gz:null,se:Fe(B||""),wol:null,il:null},Z=es(o,"",P),ie=gr({natal:k,daewoon:V?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0}),me=Gr({natal:k,daewoon:V?.gz,sewoon:Fe(B||""),wolwoon:void 0,ilwoon:void 0,basis:i}),ce=ar(Fe(B||"")),xe=Jt(k[2]?.charAt(0)??"",(B||"").charAt(1)),ke=Qt({baseBranch:H,targetBranch:(B||"").charAt(1),era:D,gaehwa:M}),je={:{:`${U} ${Fe(B||"")}`,:Fe(B||""),:Object.fromEntries(Object.entries(Z.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(A,Me)})`,Ee])),:Z.totalsSub,:Xs(ie,""),:ws(me,""),:ce?{gz:Fe(B||""),nabeum:ce.name,element:ce.element,code:ce.code}:null,:{pos:"",gz:Fe(B||""),unseong:xe},:{pos:"",gz:Fe(B||""),shinsal:ke}}};Y.push(Zn(` ${U}`,je))}}if(y.length>0){const J=[],ye=new Map;for(const V of y){const[P,Z]=V.split("-").map(Number);Lf(m,P,Z).forEach(xe=>{J.some(ke=>ke.gz===xe.gz&&ke.startYear===xe.startYear)||J.push(xe)});const me=xz(P,Z);Bf(P,Z).forEach((xe,ke)=>{const je=me[ke]??me[me.length-1];ye.has(xe)||ye.set(xe,{year:je,month:Z})})}const[W]=y[0].split("-").map(Number),U=ut(new Date(W,5,15)),B=Fe(U||"");if(J.length>0){const V={:J.map(P=>{const Z={dae:P.gz,se:B||null,wol:null,il:null},ie=es(o,"",Z),me=gr({natal:k,daewoon:P.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0}),ce=Gr({natal:k,daewoon:P.gz,sewoon:B||void 0,wolwoon:void 0,ilwoon:void 0,basis:i}),xe=ar(P.gz),ke=Jt(k[2]?.charAt(0)??"",P.gz.charAt(1)),je=Qt({baseBranch:H,targetBranch:P.gz.charAt(1),era:D,gaehwa:M});return{:`${P.age} ${P.gz} (${P.startYear}~${P.endYear})`,:P.gz,:Object.fromEntries(Object.entries(ie.elementPercent).map(([Me,Ee])=>[`${Me}(${ai(A,Me)})`,Ee])),:ie.totalsSub,:Xs(me,""),:ws(ce,""),:xe?{gz:P.gz,nabeum:xe.name,element:xe.element,code:xe.code}:null,:{pos:"",gz:P.gz,unseong:ke},:{pos:"",gz:P.gz,shinsal:je}}})};Y.push(Zn("",V))}const q=Array.from(ye.keys());if(q.length>0){const V={:q.map(P=>{const ie=ye.get(P).year,ce=v2(m,ie)[0]??J[0]??null,xe={dae:ce?ce.gz:null,se:P,wol:null,il:null},ke=es(o,"",xe),je=gr({natal:k,daewoon:ce?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0}),Me=Gr({natal:k,daewoon:ce?.gz,sewoon:P,wolwoon:void 0,ilwoon:void 0,basis:i}),Ee=ar(P),Pe=Jt(k[2]?.charAt(0)??"",P.charAt(1)),Ce=Qt({baseBranch:H,targetBranch:P.charAt(1),era:D,gaehwa:M});return{:`${ie} ${P}`,:P,:Object.fromEntries(Object.entries(ke.elementPercent).map(([Be,Ue])=>[`${Be}(${ai(A,Be)})`,Ue])),:ke.totalsSub,:Xs(je,""),:ws(Me,""),:Ee?{gz:P,nabeum:Ee.name,element:Ee.element,code:Ee.code}:null,:{pos:"",gz:P,unseong:Pe},:{pos:"",gz:P,shinsal:Ce}}})};Y.push(Zn("",V))}for(const V of y){const[P,Z]=V.split("-").map(Number),ie=new Date(P,Z-1,15),me=jt(ie),ce=Lf(m,P,Z),xe=ce.length>0?ce[0]:null,ke=Bf(P,Z),je=ke.length>0?ke[ke.length-1]:"",Me={dae:xe?xe.gz:null,se:je||null,wol:Fe(me||""),il:null},Ee=es(o,"",Me),Pe=gr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:Fe(me||""),ilwoon:void 0}),Ce=Gr({natal:k,daewoon:xe?.gz,sewoon:je||void 0,wolwoon:Fe(me||""),ilwoon:void 0,basis:i}),Be=ar(Fe(me||"")),Ue=Jt(k[2]?.charAt(0)??"",(me||"").charAt(1)),fe=Qt({baseBranch:H,targetBranch:(me||"").charAt(1),era:D,gaehwa:M}),Le={:{:`${V} ${Fe(me||"")}`,:Fe(me||""),:Object.fromEntries(Object.entries(Ee.elementPercent).map(([le,he])=>[`${le}(${ai(A,le)})`,he])),:Ee.totalsSub,:Xs(Pe,""),:ws(Ce,""),:Be?{gz:Fe(me||""),nabeum:Be.name,element:Be.element,code:Be.code}:null,:{pos:"",gz:Fe(me||""),unseong:Ue},:{pos:"",gz:Fe(me||""),shinsal:fe}}};Y.push(Zn(` ${V}`,Le))}}if(_.length>0){const J=t.mingSikType??"/",[ye,W,U]=_[0].split("-").map(Number),B=new Date(ye,W-1,U,4,0);if(!isNaN(B.getTime())){const q=Lf(m,ye,W),V=q.length>0?q[0]:null,P=Bf(ye,W),Z=P.length>0?P[P.length-1]:"",ie=jt(new Date(ye,W-1,15)),me=_t(B,J),ce=Fe(ie||""),xe=Fe(Z||""),ke=Fe(me||"");if(V){const je={dae:V.gz,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=ar(V.gz),Be=Jt(k[2]?.charAt(0)??"",V.gz.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:V.gz.charAt(1),era:D,gaehwa:M});Y.push(Zn("",{:`${V.age} ${V.gz} (${V.startYear}~${V.endYear})`,:V.gz,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(A,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:V.gz,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:V.gz,unseong:Be},:{pos:"",gz:V.gz,shinsal:Ue}}))}if(xe){const je={dae:V?V.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=ar(xe),Be=Jt(k[2]?.charAt(0)??"",xe.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:xe.charAt(1),era:D,gaehwa:M});Y.push(Zn("",{:`${ye} ${xe}`,:xe,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(A,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:xe,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:xe,unseong:Be},:{pos:"",gz:xe,shinsal:Ue}}))}if(ce){const je={dae:V?V.gz:null,se:xe,wol:ce,il:ke},Me=es(o,"",je),Ee=gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke}),Pe=Gr({natal:k,daewoon:V?.gz,sewoon:xe,wolwoon:ce,ilwoon:ke,basis:i}),Ce=ar(ce),Be=Jt(k[2]?.charAt(0)??"",ce.charAt(1)),Ue=Qt({baseBranch:H,targetBranch:ce.charAt(1),era:D,gaehwa:M});Y.push(Zn("",{:`${ye}-${String(W).padStart(2,"0")} ${ce}`,:ce,:Object.fromEntries(Object.entries(Me.elementPercent).map(([fe,Le])=>[`${fe}(${ai(A,fe)})`,Le])),:Me.totalsSub,:Xs(Ee,""),:ws(Pe,""),:Ce?{gz:ce,nabeum:Ce.name,element:Ce.element,code:Ce.code}:null,:{pos:"",gz:ce,unseong:Be},:{pos:"",gz:ce,shinsal:Ue}}))}}for(const q of _){const[V,P,Z]=q.split("-").map(Number),ie=new Date(V,P-1,Z,4,0);if(isNaN(ie.getTime()))continue;const me=Lf(m,V,P),ce=me.length>0?me[0]:null,xe=Bf(V,P),ke=xe.length>0?xe[xe.length-1]:"",je=jt(new Date(V,P-1,15)),Me=_t(ie,J),Ee=Fe(je||""),Pe=Fe(ke||""),Ce=Fe(Me||""),Be={dae:ce?ce.gz:null,se:Pe||null,wol:Ee,il:Ce},Ue=es(o,"",Be),fe=gr({natal:k,daewoon:ce?.gz,sewoon:Pe||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0}),Le=Gr({natal:k,daewoon:ce?.gz,sewoon:Pe||void 0,wolwoon:Ee||void 0,ilwoon:Ce||void 0,basis:i}),le=ar(Ce),he=Jt(k[2]?.charAt(0)??"",Ce.charAt(1)),$e=Qt({baseBranch:H,targetBranch:Ce.charAt(1),era:D,gaehwa:M}),Ie={:{:`${q} ${Ce}`,:Ce,:Object.fromEntries(Object.entries(Ue.elementPercent).map(([He,st])=>[`${He}(${ai(A,He)})`,st])),:Ue.totalsSub,:Xs(fe,""),:ws(Le,""),:le?{gz:Ce,nabeum:le.name,element:le.element,code:le.code}:null,:{pos:"",gz:Ce,unseong:he},:{pos:"",gz:Ce,shinsal:$e}}};Y.push(Zn(` ${q}`,Ie))}}const re=Y.filter(J=>J.trim().length>0).join(`

`),Se=HA({topic:x,subTopic:S,timeMode:"single",teacherMode:T}),X=["-----","  ","","1.       (////)  .","2.  ,        ."];Se&&X.push("","  ( )",Se);const oe=X.join(`
`);return[Q,re,oe].join(`

`)}function HA(e){const{topic:t,subTopic:n,timeMode:i="single",tab:o,relationMode:l,teacherMode:u}=e;if(!t)return"";const f=[];switch(u===!0?f.push("-   ,     (, ,   )  .","-         ,   .","-    .    .","-  ,     .","-    ,    .","- JSON/  ,     ."):f.push("- AI     ,      . (, ,   )","-   ,  . (     )","-  /    .","- , , , ,       ,    .","-     , (~, ~  ) .","-    .","-  JSON/      .","-       .","-         .","-   ,    ."),i==="single"?o?f.push(`-    (${o})   ,         .`,"-   ,             ."):f.push("-    ,          ."):f.push("-  (///)  ,           .","-      ,    ,           ."),t){case"personality":{f.push("-    /  .","-  ,       ."),(!n||n==="overview"||n==="personality_basic")&&f.push("-        .","  1)   : /, , /,        ,      .","  2)   :    VS   ,   VS   ,  VS      .","  3) /:   ,     , /        .","  4)   : //  ,    ,       .","  5)  :     ,    ,       .","-          ."),n==="personality_shadow"&&f.push("-     ,              .","-           ."),n==="personality_relationshipStyle"&&f.push("-    ,   ,       /    ."),n==="personality_workStyle"&&f.push("-     ,     /      ."),n==="personality_stressPattern"&&f.push("-   ,    vs       .","-      (, , ) .");break}case"lifeFlow":{f.push("-         .","-   ,      .","-  , 20, 30    ,       .","-    ,        ."),n==="lifeFlow_turningPoint"&&f.push("-       ,        .");break}case"love":{f.push("-   //   .","-  ,   ,      ."),(!n||n==="overview"||n==="love_pattern")&&f.push("-      ,     ,       ."),n==="love_timing"&&f.push("-     ,    ,       ."),n==="love_partner"&&f.push("-    ,        ."),n==="love_current"&&f.push("-       ,     ,     ."),n==="love_breakup"&&f.push("- /   ,      ,     ."),n==="love_marriageChange"&&f.push("-          ."),l==="solo"?f.push("-  ' ,  /   ' .","-     ,      .","-    , /     ."):l==="couple"&&f.push("-  '  ,      ' .","-            .","-      /   .","-      ,        .");break}case"career":{f.push("-   ///  .","-    ,      ,     ."),(!n||n==="overview")&&f.push("-  / VS       ,    .","-    VS          ."),n==="career_aptitude"&&f.push("-   (: , ,  ,  )    ."),n==="career_mode"&&f.push("- , , ,        ."),n==="career_jobChange"&&f.push("- /   ,    ,    ."),n==="career_promotion"&&f.push("-     ,    (, ,  )  ."),(n==="career_study"||n==="career_exam")&&f.push("- /   ,        .");break}case"money":{f.push("-   //  .","-     ,  ,   ,   ."),(!n||n==="overview"||n==="money_flow")&&f.push("-   ( ,  ,  )   ."),n==="money_income"&&f.push("- , ,        ( , ,  )  ."),n==="money_spending"&&f.push("-   ,   ,        ."),(n==="money_saving"||n==="money_asset")&&f.push("-   ,        ,   ."),n==="money_debt"&&f.push("- /      ,       ."),n==="money_invest"&&f.push("- /   ,          ."),n==="money_bigEvent"&&f.push("- , ,         ,      .");break}case"family":{f.push("-   /   .","- ()  ()        ."),(!n||n==="overview"||n==="family_current")&&f.push("-        ,     ."),(n==="family_origin"||n==="family_parents")&&f.push("-     (, ,  )     ."),n==="family_siblings"&&f.push("-   (  , / ) ."),n==="family_children"&&f.push("-   ,            .");break}case"health":{f.push("-   /  .","-    ,   (, , ,  ) ."),(!n||n==="overview"||n==="health_overall")&&f.push("-   (:   /     )   ."),n==="health_physical"&&f.push("-    (, ,   )   ."),n==="health_mental"&&f.push("-    (, ,  ) ,        ."),n==="health_stress"&&f.push("-      ,      ."),n==="health_accident"&&f.push("- /   ,    ,   (, ,  )  .");break}case"move":{f.push("-   /  .","-    , ,     ."),(!n||n==="overview"||n==="move_chance")&&f.push("-    ,         ."),n==="move_timing"&&f.push("-    ,           ."),n==="move_targetHouse"&&f.push("-     ,   ,      ,      ."),n==="move_environment"&&f.push("- / (, ,  )     ."),n==="move_finance"&&f.push("- //      ,       .");break}case"social":{f.push("-   //  .","-  ,  ,      ."),(!n||n==="overview"||n==="social_overall")&&f.push("-       ."),n==="social_friend"&&f.push("-      ,      ."),n==="social_workspace"&&f.push("-      (, ,  ) ."),n==="social_network"&&f.push("-   (  vs   )    ,    ."),n==="social_conflict"&&f.push("-    ,  ,      ,    .");break}case"compat":{f.push("-   /   .","-  /  ,        ."),(!n||n==="overview"||n==="compat_overall")&&f.push("-     , //      ."),(n==="compat_love"||n==="compat_marriage")&&f.push("- /  ,  ,        ."),n==="compat_work"&&f.push("- /   ,  ,     ."),(n==="compat_family"||n==="compat_friend")&&f.push("- /       ,       .");break}case"risk":{f.push("-   /   .","-  ,        ."),(!n||n==="overview")&&f.push("- , , ,           ."),n==="risk_money"&&f.push("-   ( , ,   ) ,       ."),n==="risk_relationship"&&f.push("-      (, ,   )  ."),n==="risk_health"&&f.push("- /  ,        ."),n==="risk_lawsuit"&&f.push("-  //     ,         ."),n==="risk_burnout"&&f.push("- /    ,          .");break}case"meta":{f.push("-         .","-    ,         ,     ."),(n==="meta_structure"||!n||n==="overview")&&f.push("-     / ,     ."),n==="meta_cycle"&&f.push("- /   ,     ."),n==="meta_trigger"&&f.push("- , ,           ,   ."),n==="meta_usage"&&f.push("-         ,        .");break}}return f.join(`
`)}function Ez({date:e,onChange:t,min:n="1900-01-01",max:i="2100-12-31"}){const o=R.useMemo(()=>{const u=e.getFullYear(),f=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}-${f}-${m}`},[e]),l=u=>{if(!u)return;const[f,m,p]=u.split("-"),y=Number(f),_=Number(m),x=Number(p),S=e.getHours(),T=e.getMinutes(),k=new Date(y,_,0).getDate(),N=Math.min(x,k),C=new Date(y,_-1,N,S,T);Number.isNaN(C.getTime())||t(C)};return g.jsx("input",{type:"date",value:o,onChange:u=>l(u.target.value),min:n,max:i,className:"w rounded-md border border-neutral-300 dark:border-neutral-700 bg-transparent px-2 py-1 text-sm"})}const ib={analysis:{label:"",desc:`-   ,   
- "     "  
- ST   `},teacher:{label:"",desc:`-   
-    
- ,     `},mentor:{label:"",desc:`-        
-   X,   X
-    ~~  `},speed:{label:"",desc:`-   
- 2~4  
-    `},dryHumor:{label:"",desc:`-   +  
-           `},softWarm:{label:"",desc:`-      
-    `},ect:{label:"",desc:"-    "}},Tz=["","","","",""],GA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},FA={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},_2={personality:{label:"     "},lifeFlow:{label:"    "},love:{label:"    "},career:{label:"      "},money:{label:"      "},family:{label:"      "},health:{label:"      "},move:{label:"       "},social:{label:"     "},compat:{label:"   "},risk:{label:"    "},meta:{label:"    "},etc:{label:"  "}},x2={personality:[{key:"overview",label:"  "},{key:"personality_basic",label:"  "},{key:"personality_shadow",label:" "},{key:"personality_relationshipStyle",label:"  "},{key:"personality_workStyle",label:"  "},{key:"personality_stressPattern",label:" "}],lifeFlow:[{key:"overview",label:"  "},{key:"lifeFlow_cycle",label:" "},{key:"lifeFlow_turningPoint",label:""},{key:"lifeFlow_peak",label:""},{key:"lifeFlow_down",label:""},{key:"lifeFlow_theme",label:"  "}],love:[{key:"love_pattern",label:" "},{key:"love_timing",label:" /"},{key:"love_partner",label:" "},{key:"love_current",label:" / "},{key:"love_breakup",label:"/ "},{key:"love_marriageChange",label:" "}],career:[{key:"career_aptitude",label:" "},{key:"career_mode",label:" vs /"},{key:"career_jobChange",label:"/ "},{key:"career_promotion",label:""},{key:"career_study",label:""},{key:"career_exam",label:""}],money:[{key:"overview",label:"  "},{key:"money_flow",label:"  "},{key:"money_income",label:""},{key:"money_spending",label:" "},{key:"money_saving",label:" "},{key:"money_asset",label:" "},{key:"money_debt",label:" "},{key:"money_invest",label:" "},{key:"money_bigEvent",label:"  "}],family:[{key:"overview",label:"  "},{key:"family_origin",label:"()"},{key:"family_current",label:" "},{key:"family_parents",label:" "},{key:"family_siblings",label:" "},{key:"family_children",label:""},{key:"family_care",label:" "}],health:[{key:"overview",label:" "},{key:"health_overall",label:" "},{key:"health_physical",label:" "},{key:"health_mental",label:" "},{key:"health_stress",label:" "},{key:"health_accident",label:" "}],move:[{key:"overview",label:"  "},{key:"move_timing",label:" "},{key:"move_chance",label:"  "},{key:"move_targetHouse",label:"   "},{key:"move_environment",label:" "},{key:"move_finance",label:" "}],social:[{key:"overview",label:" "},{key:"social_overall",label:"  "},{key:"social_friend",label:"  "},{key:"social_workspace",label:"  "},{key:"social_network",label:""},{key:"social_conflict",label:" "}],compat:[{key:"overview",label:"  "},{key:"compat_overall",label:"  "},{key:"compat_love",label:" "},{key:"compat_marriage",label:"  "},{key:"compat_work",label:" "},{key:"compat_family",label:"  "},{key:"compat_friend",label:" "}],risk:[{key:"overview",label:" "},{key:"risk_money",label:" "},{key:"risk_relationship",label:" "},{key:"risk_health",label:" "},{key:"risk_lawsuit",label:" "},{key:"risk_burnout",label:" "}],meta:[{key:"overview",label:"  "},{key:"meta_structure",label:"  "},{key:"meta_cycle",label:"  "},{key:"meta_trigger",label:"  "},{key:"meta_usage",label:"  "}],etc:[]};function ac(e){if(!e)return"";if(e.length===2)return e;const t=e.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),n=t.match(/([]).*?([])/);if(n)return`${n[1]}${n[2]}`;const i=t.match(/([]).*?([])/);if(i){const o=GA[i[1]],l=FA[i[2]];return o&&l?`${o}${l}`:""}return""}function w2(e){return e[0]?.length===2&&e[1]?.length===2&&e[2]?.length===2}function S2(e){const t=Array.isArray(e)?e.slice(0,4):[];for(;t.length<4;)t.push("");return t.map((n,i)=>{if(!n)return"";const o=n.replace(/[()[\]{}]/g,"").replace(/\s+/g,"").replace(/[:\-_.]/g,""),l=o.match(/([]).*?([])/);if(l)return`${l[1]}${l[2]}`;const u=o.match(/([]).*?([])/);return u?`${GA[u[1]]}${FA[u[2]]}`:i<=2?"--":""})}function kz({ms:e,natal:t,chain:n,basis:i,lunarPillars:o,includeTenGod:l=!1}){const[u,f]=R.useState("analysis"),[m,p]=R.useState(!1),[y,_]=R.useState(!1),[x,S]=R.useState(()=>new Date),{list:T,currentId:k}=ss.getState(),[N,C]=R.useState(""),[$,A]=R.useState("personality"),[D,M]=R.useState("overview"),G=R.useMemo(()=>N?T.find(pe=>pe.id===N)??null:null,[N,T]),[H,F]=R.useState(""),[K,ae]=R.useState("solo");R.useEffect(()=>{$!=="love"&&$!=="compat"&&(ae("solo"),C(""))},[$]);const[Q,Y]=R.useState(!1),[te,re]=R.useState(""),[Se,X]=R.useState([]),[oe,J]=R.useState(new Date().getFullYear()),[ye,W]=R.useState(new Date().getFullYear()),[U,B]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[q,V]=R.useState(()=>{const pe=new Date;return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}),[P,Z]=R.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),[ie,me]=R.useState(()=>{const pe=new Date,Ye=pe.getFullYear(),lt=String(pe.getMonth()+1).padStart(2,"0"),pt=String(pe.getDate()).padStart(2,"0");return`${Ye}-${lt}-${pt}`}),ce=1e3*60*60*24;function xe(pe,Ye){return(Ye.getFullYear()-pe.getFullYear())*12+(Ye.getMonth()-pe.getMonth())}function ke(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`}function je(pe){return`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}-${String(pe.getDate()).padStart(2,"0")}`}const Me=pe=>{J(pe)},Ee=pe=>{W(pe)},Pe=()=>{const pe=oe;let Ye=ye;Ye<pe&&(Ye=pe),Ye-pe>9&&(Ye=pe+9),W(Ye)},Ce=()=>{let pe=oe;const Ye=ye;Ye<pe&&(pe=Ye),Ye-pe>9&&(pe=Ye-9),J(pe)},Be=pe=>{B(pe)},Ue=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){V(ke(tt));return}if(xe(tt,dt)>11){const mt=new Date(tt);mt.setMonth(tt.getMonth()+11),V(ke(mt))}},fe=pe=>{V(pe)},Le=()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number),tt=new Date(pe,Ye-1),dt=new Date(lt,pt-1);if(dt<tt){B(ke(dt));return}if(xe(tt,dt)>11){const mt=new Date(dt);mt.setMonth(dt.getMonth()-11),B(ke(mt))}},le=pe=>{Z(pe)},he=()=>{if(!P||!ie)return;const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(mt<xt){me(je(xt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(xt);wt.setDate(xt.getDate()+6),me(je(wt))}},$e=pe=>{me(pe)},Ie=()=>{if(!P||!ie)return;const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);if(xt>mt){Z(je(mt));return}if(Math.floor((mt.getTime()-xt.getTime())/ce)>7){const wt=new Date(mt);wt.setDate(mt.getDate()-6),Z(je(wt))}},He=e.mingSikType??"/",st=R.useMemo(()=>{if(n)return{dae:n.dae??null,se:n.se??null,wol:n.wol??null,il:n.il??null};const pe=x??new Date,Ye=ac(ut(pe)||""),lt=ac(jt(pe)||""),pt=ac(_t(pe,He)||"");return{dae:null,se:Ye||null,wol:lt||null,il:pt||null}},[n,x,He]),et=vd.getState().manualHour,Zt=R.useMemo(()=>S2(t),[t]),En=R.useMemo(()=>S2(o),[o]),Tn=R.useMemo(()=>{const pe=[...Zt];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[Zt,et]),lr=R.useMemo(()=>{const pe=[...En];return(!pe[3]||pe[3]==="")&&et&&(pe[3]=et.stem+et.branch),pe},[En,et]),vr=R.useMemo(()=>{const pe=Number(e.birthDay?.slice(0,4)),Ye=Number(e.birthDay?.slice(4,6)),lt=Number(e.birthDay?.slice(6,8));if(!Number.isFinite(pe)||!Number.isFinite(Ye)||!Number.isFinite(lt))return null;const pt=new Date(pe,Ye-1,lt,12,4,0,0),tt=ac(ut(pt)||""),dt=ac(jt(pt)||""),xt=ac(_t(pt,He)||"");return[tt,dt,xt,""]},[e.birthDay,He]),dn=w2(Tn),Ct=w2(lr),[bn]=R.useState("solar"),hn=bn==="lunar"?Ct?"lunar":dn?"solar":"lunar":dn?"solar":Ct?"lunar":"solar",qr=R.useMemo(()=>{const Ye=[...hn==="lunar"?Ct?lr:dn?Tn:vr??["","","",""]:dn?Tn:Ct?lr:vr??["","","",""]];return(!Ye[3]||Ye[3]==="")&&et&&(Ye[3]=et.stem+et.branch),Ye},[hn,dn,Ct,Tn,lr,vr,et]),ra=R.useMemo(()=>et?et.stem+et.branch:qr[3]||"",[et,qr]);(!t||t.length===0)&&(t=wm(e));const zi=et?et.stem+et.branch:"",kn=R.useMemo(()=>{const pe=wm(e);return zi&&zi.length===2&&(pe[3]=zi),pe},[e,zi]),Dn=R.useMemo(()=>_A({natal:kn,tab:H,chain:st,hourKey:ra}),[kn,H,st,ra]);function os(pe){return vA(pe,{criteriaMode:"modern",useHarmonyOverlay:!0})}const Nr=os(kn),cr=R.useMemo(()=>zy(Nr),[Nr]),gi=R.useMemo(()=>qk(cr),[cr]),ia=R.useMemo(()=>{const pe=DA(e).slice(0,10),Ye=e.birthDay?Number(e.birthDay.slice(0,4)):0;return pe.map((lt,pt)=>{const tt=lt.match(/(\d{4})\s+(\d{1,2})\s+([-]{2})\s+/),dt=tt?Number(tt[1]):0,xt=tt?Number(tt[2]):1,mt=1,In=tt?tt[3]:"",wt=Ye>0?Az(Ye,dt):pt*10;return{gz:In,age:wt,startYear:dt,startMonth:xt,startDay:mt,endYear:dt+10}})},[e]),Qa=x2[$],eo=R.useMemo(()=>e?yz({ms:e,natal:kn,chain:st,basis:i,tab:H,unified:Dn,percent:cr,category:gi,topic:$,subTopic:D,relationMode:K,teacherMode:y}):"",[e,i,l,H,st,Dn,cr,gi,kn,$,D,K,G,y]),Ui=R.useMemo(()=>{if(!e||!Q)return"";const pe=Se.map(tt=>ia[tt]).filter(tt=>tt),Ye=te===""?(()=>{const tt=[];for(let dt=oe;dt<=ye&&tt.length<10;dt++)tt.push(dt);return tt})():[],lt=te===""?(()=>{const tt=[],[dt,xt]=U.split("-").map(Number),[mt,In]=q.split("-").map(Number),wt=new Date(dt,xt-1),aa=new Date(mt,In-1);for(;wt<=aa&&tt.length<12;)tt.push(`${wt.getFullYear()}-${String(wt.getMonth()+1).padStart(2,"0")}`),wt.setMonth(wt.getMonth()+1);return tt})():[],pt=te===""?(()=>{const tt=[],[dt,xt,mt]=P.split("-").map(Number),[In,wt,aa]=ie.split("-").map(Number),io=new Date(dt,xt-1,mt,4,0,0),yi=new Date(In,wt-1,aa,4,0,0);if(isNaN(io.getTime())||isNaN(yi.getTime()))return tt;const Jn=new Date(io);for(;Jn<=yi&&tt.length<31;){const As=Jn.getFullYear(),so=String(Jn.getMonth()+1).padStart(2,"0"),ao=String(Jn.getDate()).padStart(2,"0");tt.push(`${As}-${so}-${ao}`),Jn.setDate(Jn.getDate()+1)}return tt})():[];return Sz({ms:e,natal:kn,basis:i,unified:Dn,percent:cr,category:gi,selectedDaeList:pe,daeList:ia,seYears:Ye,wolMonths:lt,ilDays:pt,topic:$,subTopic:D,teacherMode:y})},[e,Q,te,Se,ia,oe,ye,U,q,P,ie,kn,i,l,Dn,cr,gi,$,D,K,G,y]),to=R.useMemo(()=>{if(K!=="couple"||!G)return"";const pe=G.name||"";let Ye="";if(G.birthDay&&G.birthDay.length===8){const dt=G.birthDay.slice(0,4),xt=G.birthDay.slice(4,6),mt=G.birthDay.slice(6,8);Ye=`${dt}-${xt}-${mt}`}else G.birthDay&&(Ye=G.birthDay);let lt="";if(G.birthTime&&G.birthTime.trim().length>0){const xt=G.birthTime.trim().padEnd(4,"0").slice(0,4),mt=xt.slice(0,2),In=xt.slice(2,4);lt=`${mt}:${In}`}let pt="";G.birthPlace&&typeof G.birthPlace=="object"&&(pt=G.birthPlace.name||"");const tt=G.ganji||G.ganjiText||"";return["","","[  - () ]"," ",`-  : ${pe}`,`-  : ${Ye}`,`-   : ${lt}`,`-   : ${pt}`,`- ${tt}`,""," //,       ,","           .",""].join(`
`)},[K,G]),sa=Q?Ui:eo,no=R.useMemo(()=>{switch(u){case"analysis":return`     .
`;case"teacher":return`    '' .
`;case"mentor":return`      .
`;case"speed":return`     .
`;case"dryHumor":return`   ,    .
`;case"softWarm":return`    .
`;default:return""}},[u]),ro=m?`   ,   .
`:"",$n=R.useMemo(()=>sa||to?`${sa}${to}
${no}${ro}`:"",[no,ro,sa,to]),[Ve,ks]=R.useState(""),[Or,ur]=R.useState([]);R.useEffect(()=>{ks(""),ur([])},[e.id]);const sn=R.useMemo(()=>{if(!$n)return"";if(Or.length===0)return $n;const pe=["","-----","     ","",...Or.map((Ye,lt)=>`${lt+1}. ${Ye}`)];return`${$n}
${pe.join(`
`)}`},[$n,Or]),[An,Zr]=R.useState(!1);async function bi(){if(sn)try{await navigator.clipboard.writeText(sn),Zr(!0),setTimeout(()=>Zr(!1),1200)}catch{Zr(!1)}}return e?g.jsxs("div",{className:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"GPT  "}),g.jsx("button",{onClick:bi,className:`px-3 py-1 rounded-md text-xs cursor-pointer ${An?"bg-green-600 text-white":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:An?"!":" "})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[g.jsxs("div",{className:"w-full mt-2 p-2 border rounded-md bg-neutral-50 dark:bg-neutral-800",children:[g.jsx("div",{className:"text-xs font-semibold mb-1 text-neutral-700 dark:text-neutral-200",children:"  "}),g.jsx("div",{className:"flex gap-1.5 mb-2",children:Object.keys(ib).map(pe=>g.jsx("button",{onClick:()=>f(pe),className:`flex-1 px-2 py-1 text-[10px] rounded border cursor-pointer ${u===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-white dark:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:ib[pe].label},pe))}),g.jsx("div",{className:"text-[11px] whitespace-pre-line text-neutral-600 dark:text-neutral-300 leading-4",children:ib[u].desc}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsxs("div",{className:"mr-1 flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"friendMode",checked:m,onChange:pe=>p(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"friendMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:""})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"teacherMode",checked:y,onChange:pe=>_(pe.target.checked),className:"w-3 h-3"}),g.jsx("label",{htmlFor:"teacherMode",className:"text-[11px] text-neutral-700 dark:text-neutral-200 cursor-pointer",children:"(/)"})]})]})]}),g.jsx("select",{value:$,onChange:pe=>{const Ye=pe.target.value;A(Ye);const lt=x2[Ye];lt.length>0?M(lt[0].key):M("overview"),Ye!=="love"&&Ye!=="compat"&&ae("solo")},className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Object.keys(_2).map(pe=>{const Ye=_2[pe];return g.jsx("option",{value:pe,children:Ye.label},pe)})}),Qa.length>0&&g.jsx("select",{value:D,onChange:pe=>M(pe.target.value),className:"px-2.5 h-30 h-8 text-[11px] rounded-md border bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200 border-neutral-200 dark:border-neutral-700",children:Qa.map(pe=>g.jsx("option",{value:pe.key,children:pe.label},pe.key))})]}),($==="love"||$==="compat")&&g.jsxs("div",{className:"flex flex-col gap-1.5 text-[11px] text-neutral-700 dark:text-neutral-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:" "}),g.jsxs("div",{className:"inline-flex rounded-full border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[g.jsx("button",{type:"button",onClick:()=>ae("solo"),className:`px-3 py-1 cursor-pointer ${K==="solo"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "}),g.jsx("button",{type:"button",onClick:()=>ae("couple"),className:`px-3 py-1 cursor-pointer ${K==="couple"?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-50 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:" "})]})]}),K==="couple"&&g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"font-semibold",children:"  "}),g.jsxs("select",{value:N,onChange:pe=>C(pe.target.value),className:"min-w-[180px] h-30 px-2 py-1 border rounded bg-white dark:bg-neutral-800",children:[g.jsx("option",{value:"",children:"  "}),T.filter(pe=>pe.id!==k).map(pe=>g.jsxs("option",{value:pe.id,children:[pe.name||" "," ",pe.birthDay?`(${pe.birthDay})`:""]},pe.id))]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Y(!1),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300":"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black"}`,children:" "}),g.jsx("button",{onClick:()=>Y(!0),className:`px-3 py-1.5 text-xs rounded-md border cursor-pointer ${Q?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:""})]}),!Q&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex desk:justify-between flex-col desk:flex-row gap-2",children:[g.jsx("div",{className:"flex gap-1 flex-wrap",children:Tz.map(pe=>g.jsx("button",{onClick:()=>F(pe),className:`px-2 py-1 text-xs rounded-md border cursor-pointer ${H===pe?"bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"}`,children:pe},pe))}),g.jsx(Ez,{date:x,onChange:S})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsx("p",{children:"     ."}),g.jsx("p",{children:"  ,  ."}),g.jsx("p",{children:"   ,   ."})]})]}),Q&&g.jsxs("div",{className:"space-y-3 p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[g.jsx("div",{className:"flex gap-1.5 border-b pb-2",children:["","","",""].map(pe=>g.jsx("button",{onClick:()=>re(pe),className:`px-3 py-1.5 text-xs rounded-md cursor-pointer transition-colors ${te===pe?"bg-blue-600 text-white font-semibold":"bg-white dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600"}`,children:pe},pe))}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  (  )"}),g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:ia.map((pe,Ye)=>g.jsxs("button",{onClick:()=>{X(lt=>lt.includes(Ye)?lt.filter(pt=>pt!==Ye):[...lt,Ye])},className:`px-2 py-1.5 text-xs rounded border cursor-pointer text-left ${Se.includes(Ye)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-neutral-700 border-neutral-300 dark:border-neutral-600"}`,children:[g.jsx("div",{className:"font-mono",children:pe.gz}),g.jsxs("div",{className:"text-[10px] opacity-80",children:[pe.age," (",pe.startYear,"~",pe.endYear,")"]})]},Ye))})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 10)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",value:oe,onChange:pe=>Me(Number(pe.target.value)),onBlur:Pe,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"number",value:ye,onChange:pe=>Ee(Number(pe.target.value)),onBlur:Ce,className:"w-24 h-30 px-2 text-[16px] desk:text-xs border rounded bg-white dark:bg-neutral-700",placeholder:""})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",ye-oe+1,""]})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 12)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"month",value:U,onChange:pe=>Be(pe.target.value),onBlur:Ue,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"month",value:q,onChange:pe=>fe(pe.target.value),onBlur:Le,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye]=U.split("-").map(Number),[lt,pt]=q.split("-").map(Number);return(lt-pe)*12+(pt-Ye)+1})(),""]})]}),te===""&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-semibold mb-2 text-neutral-700 dark:text-neutral-200",children:"  ( 7)"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"date",value:P,onChange:pe=>le(pe.target.value),onBlur:he,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"}),g.jsx("span",{className:"text-xs",children:"~"}),g.jsx("input",{type:"date",value:ie,onChange:pe=>$e(pe.target.value),onBlur:Ie,className:"px-2 py-1 text-xs border rounded bg-white dark:bg-neutral-700"})]}),g.jsxs("div",{className:"text-[10px] text-neutral-500 dark:text-neutral-400 mt-1",children:[" :"," ",(()=>{const[pe,Ye,lt]=P.split("-").map(Number),[pt,tt,dt]=ie.split("-").map(Number),xt=new Date(pe,Ye-1,lt,4,0,0),mt=new Date(pt,tt-1,dt,4,0,0);return isNaN(xt.getTime())||isNaN(mt.getTime())||mt<xt?0:Math.floor((mt.getTime()-xt.getTime())/ce)+1})(),""]})]}),g.jsxs("div",{className:"text-[11px] text-neutral-500 dark:text-neutral-400",children:[g.jsxs("p",{children:[" ",te,"   ."]}),g.jsx("p",{children:"    ."})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200",children:"   ()"}),Or.length>0&&g.jsx("button",{type:"button",onClick:()=>ur([]),className:"px-2 py-1 text-[10px] rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-500 dark:text-neutral-300 cursor-pointer",children:" "})]}),g.jsx("textarea",{value:Ve,onChange:pe=>ks(pe.target.value),placeholder:" GPT     , ' '  .",rows:3,className:"w-full text-xs rounded-md border bg-white dark:bg-neutral-800 p-2"}),g.jsxs("div",{className:"mb-4 text-center",children:[g.jsx("button",{type:"button",onClick:()=>{const pe=Ve.trim();pe&&(ur(Ye=>[...Ye,pe]),ks(""))},className:"w-full desk:max-w-[160px] px-1 py-1.5 text-xs rounded-md border bg-neutral-900 text-white dark:bg-yellow-500 dark:text-black cursor-pointer",children:" "}),Or.length>0&&g.jsxs("div",{className:"flex-1 text-[11px] text-neutral-500 dark:text-neutral-400 text-right",children:[" "," ",Or.length,""]})]}),Or.length>0&&g.jsx("ul",{className:"mt-1 space-y-1 max-h-24 overflow-y-auto text-[11px] text-neutral-700 dark:text-neutral-200",children:Or.map((pe,Ye)=>g.jsxs("li",{className:"flex gap-1 items-start",children:[g.jsxs("span",{className:"shrink-0",children:[Ye+1,"."]}),g.jsx("span",{className:"whitespace-pre-wrap break-words flex-1",children:pe}),g.jsx("button",{type:"button",onClick:()=>{ur(lt=>lt.filter((pt,tt)=>tt!==Ye))},className:"shrink-0 ml-2 text-[10px] text-red-500 hover:underline",children:""})]},Ye))})]}),g.jsx("textarea",{readOnly:!0,value:sn,placeholder:"   .",className:"w-full min-h-[320px] text-xs font-mono rounded-md border bg-neutral-50 dark:bg-neutral-800 p-2"})]}):g.jsx("div",{className:"p-4 border rounded bg-neutral-50 dark:bg-neutral-900 text-sm text-neutral-500",children:"   ."})}function Az(e,t){return t-e+1}function jz(e){const t=fi(o=>o.date),n=fi(o=>o.rule),i=Ed(e);return R.useMemo(()=>{if(!e)return{dae:null,se:null,wol:null,il:null};const o=Zm(i,t),l=o>=0?i[o]?.gz??null:null,u=ut(t),f=jt(t),m=_t(t,n);return{dae:l,se:u,wol:f,il:m}},[e,i,t,n])}function Nz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(!1);R.useEffect(()=>{setTimeout(()=>t(!0),50),setTimeout(()=>i(!0),250),setTimeout(()=>l(!0),450)},[]);const y=async()=>{if(!m){alert("     .");return}const{error:_}=await At.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});_&&(console.error("Google Login Error:",_),alert("   ."))};return g.jsxs("main",{className:`flex min-h-screen items-center justify-center bg-neutral-950 text-white px-4 transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:`transform transition-all duration-500 ${n?"translate-y-0 opacity-100":"translate-y-4 opacity-0"} absolute top-16 text-center`,children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:""}),g.jsx("p",{className:"text-sm text-neutral-400",children:"    "})]}),g.jsxs("div",{className:`w-full max-w-sm rounded-2xl bg-neutral-900 p-8 shadow-xl border border-neutral-800 transition-all duration-500 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-6"}`,children:[g.jsx("h1",{className:"mb-2 text-2xl font-bold tracking-tight text-center",children:""}),g.jsxs("p",{className:"mb-6 text-sm text-neutral-400 text-center leading-relaxed",children:["  .",g.jsx("br",{}),"     "]}),g.jsx("div",{className:"mb-5 space-y-2",children:g.jsxs("label",{className:"flex items-start gap-2 text-sm text-neutral-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:m,onChange:()=>p(!m),className:"mt-[2px]"}),g.jsxs("span",{children:["  .",g.jsx("button",{type:"button",onClick:()=>f(!0),className:"ml-1 underline text-orange-400 hover:text-orange-300 cursor-pointer",children:"( )"})]})]})}),g.jsxs("button",{type:"button",onClick:y,disabled:!m,className:`flex items-center justify-center gap-3 w-full py-3 rounded-lg font-medium text-sm shadow transition-all cursor-pointer 
            ${m?"bg-white text-black hover:bg-neutral-100 active:scale-[0.98]":"bg-neutral-700 text-neutral-400 cursor-not-allowed"}`,children:[g.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",className:"w-5 h-5 opacity-90"}),g.jsx("span",{children:"  "})]})]}),u&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>f(!1),children:g.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-200 p-6 rounded-xl shadow-xl relative animate-fadeInUp",onClick:_=>_.stopPropagation(),children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:" "}),g.jsxs("div",{className:"text-sm leading-relaxed max-h-[60vh] overflow-y-auto pr-2",children:[g.jsx("p",{className:"mb-2",children:"( )     ,      ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"1.  "}),g.jsx("p",{className:"mb-2",children:"   ,  (,  )        ( ,  )"}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"2.  "}),g.jsx("p",{className:"mb-2",children:"                   "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"3.  "}),g.jsx("p",{className:"mb-2",children:"                 "}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"4. 3 "}),g.jsx("p",{className:"mb-2",children:"          ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"5. "}),g.jsx("p",{className:"mb-2",children:" Supabase        ."}),g.jsx("p",{className:"font-semibold mt-4 mb-1",children:"6. "}),g.jsx("p",{children:"   : unique950318@gmail.com"})]}),g.jsx("button",{onClick:()=>f(!1),className:"mt-4 w-full py-2 bg-neutral-900 dark:bg-neutral-700 text-white rounded-lg hover:bg-neutral-800 transition",children:""})]})})]})}const Oz={id:"empty",name:"",birthDay:"",birthTime:"",gender:"",birthPlace:{name:"",lat:0,lon:0},relationship:"",memo:"",folder:"",mingSikType:"",DayChangeRule:"",favorite:!1,dateObj:new Date,corrected:new Date,correctedLocal:"",dayStem:"",ganjiText:"",ganji:"",calendarType:"solar",dir:"forward"};function Dz(){const[e,t]=R.useState(!1),[n,i]=R.useState(!1),o=ss(p=>p.migrateLocalToServer),l=ss(p=>p.loadFromServer),u=ss(p=>p.loading),f=Wn(p=>p.loaded),m=Wn(p=>p.loadFromServer);return R.useEffect(()=>{const p=At;(async()=>{const{data:x,error:S}=await p.auth.getSession();if(S){i(!1),t(!0);return}i(!!x.session),t(!0)})();const{data:{subscription:_}}=p.auth.onAuthStateChange((x,S)=>{i(!!S),t(!0)});return()=>{_.unsubscribe()}},[]),R.useEffect(()=>{n&&(async()=>(await o(),await l(),await m()))()},[n,o,l,m]),e?n?f?u?g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(Mz,{isLoggedIn:n}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"  ..."})}):g.jsx(Nz,{}):g.jsx("main",{className:"flex min-h-screen items-center justify-center",children:g.jsx("p",{className:"text-sm text-neutral-500",children:"   ..."})})}function Mz({isLoggedIn:e}){const{list:t}=ss(),[n,i]=R.useState(()=>t.length>0?t[0].id:""),[o,l]=R.useState(!1),[u,f]=R.useState(!1),[m,p]=R.useState(null),[y,_]=R.useState(!1),[x,S]=R.useState(!1),[T,k]=R.useState(!1);R.useEffect(()=>{_(!0),S(!1)},[]);const N=R.useMemo(()=>t.find(re=>re.id===n)??t[0],[t,n]),C=t.length>0&&!!N&&typeof N.birthDay=="string",$=C?N:Oz,A=R.useMemo(()=>wm($),[$]),D=jz($),M=re=>typeof re=="string"&&re.length>=2,G=re=>Array.isArray(re)&&re.length===4&&re.every(M),H=()=>l(!0),{settings:F,loadFromServer:K,saveToServer:ae,loaded:Q}=Wn();R.useEffect(()=>{e&&K()},[e,K]),R.useEffect(()=>{!e||!Q||ae()},[e,Q,F,ae]);const Y=F.sinsalBase===""?"day":"year",te=F.sinsalBase===""?"day":"year";return g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(hI,{onOpenSidebar:()=>f(!0),onAddNew:H,onOpenCustom:()=>k(!0)}),g.jsx(rz,{open:T,onClose:()=>k(!1),onSave:re=>{i(re.id),_(!1),S(!1),f(!1)}}),g.jsx(rO,{position:"top-center"}),g.jsx(EI,{open:u,onClose:()=>f(!1),onView:re=>{i(re.id),f(!1),_(!1),S(!1);const Se=new Date;Se.setHours(12,0,0,0),fi.getState().setDate(Se),C&&N.id===re.id?(_(!1),S(!1),f(!1)):(i(re.id),f(!1),_(!1),S(!1))},onAddNew:H,onEdit:re=>{p(re),i(re.id),f(!1),_(!1),S(!1)},onDeleteView:()=>{const re=ss.getState().list[0]?.id??"";i(re),_(!0),S(!1)}}),y&&g.jsx(sC,{}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"wizard-dim",className:"bg-black opacity-80 fixed inset-0 w-full min-h-full z-99"}),g.jsx("div",{className:"absolute inset-0 transition-opacity duration-150 opacity-100 z-100",children:g.jsx("div",{className:"py-6 pb-16 overflow-y-auto min-h-[100dvh]",children:g.jsx(r7,{onSave:re=>{i(re.id),_(!1),S(!1),f(!1),requestAnimationFrame(()=>l(!1))},onClose:()=>l(!1)})})})]}),C&&!y&&!x&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(g4,{data:N,hourTable:N.mingSikType??"/"})}),g.jsx(ZI,{ms:N}),g.jsx("div",{children:g.jsx(B8,{data:N})}),g.jsx("div",{className:"max-w-[640px] mx-auto mb-8",children:g.jsx(kz,{ms:N,natal:G(A)?A:[],chain:D,basis:{voidBasis:Y,samjaeBasis:te},includeTenGod:!0,lunarPillars:[]})})]}),x&&g.jsx("div",{className:"pt-18 pb-4",children:g.jsx(YI,{people:t})}),m&&g.jsx("div",{className:"fixed inset-0 z-55 flex items-center justify-center bg-black/60",children:g.jsx("div",{className:"bg-white dark:bg-neutral-950 p-4 rounded-xl w-full max-h-[90dvh] max-w-xl shadow-lg",children:g.jsx(DI,{item:m,onClose:()=>{p(null)}})})}),g.jsx(bI,{onShowToday:()=>{_(!0),S(!1)},onShowCouple:()=>{S(!0),_(!1)}}),g.jsx(qI,{})]})}pN.createRoot(document.getElementById("root")).render(g.jsx(R.StrictMode,{children:g.jsx(Dz,{})}));
